const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/raw-in9isEBO.js","assets/basedecoder-B2c5_Eok.js","assets/lzw-_aCqfs4w.js","assets/jpeg-vtRboCKw.js","assets/deflate-B9JhHpvg.js","assets/pako.esm-Cram60i4.js","assets/packbits-DDWKfGV_.js","assets/lerc-ChTYi2NF.js","assets/webimage-DBgUwIbt.js"])))=>i.map(i=>d[i]);
function z5(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in e)){const g=Object.getOwnPropertyDescriptor(a,d);g&&Object.defineProperty(e,d,g.get?g:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&a(y)}).observe(document,{childList:!0,subtree:!0});function i(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function a(d){if(d.ep)return;d.ep=!0;const g=i(d);fetch(d.href,g)}})();function Vl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o1={exports:{}},_0={};var yE;function k5(){if(yE)return _0;yE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,d,g){var y=null;if(g!==void 0&&(y=""+g),d.key!==void 0&&(y=""+d.key),"key"in d){g={};for(var c in d)c!=="key"&&(g[c]=d[c])}else g=d;return d=g.ref,{$$typeof:e,type:a,key:y,ref:d!==void 0?d:null,props:g}}return _0.Fragment=t,_0.jsx=i,_0.jsxs=i,_0}var vE;function R5(){return vE||(vE=1,o1.exports=k5()),o1.exports}var re=R5(),s1={exports:{}},wr={};var _E;function L5(){if(_E)return wr;_E=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),y=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),B=Symbol.iterator;function G(Ae){return Ae===null||typeof Ae!="object"?null:(Ae=B&&Ae[B]||Ae["@@iterator"],typeof Ae=="function"?Ae:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,U={};function oe(Ae,qe,ct){this.props=Ae,this.context=qe,this.refs=U,this.updater=ct||Z}oe.prototype.isReactComponent={},oe.prototype.setState=function(Ae,qe){if(typeof Ae!="object"&&typeof Ae!="function"&&Ae!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ae,qe,"setState")},oe.prototype.forceUpdate=function(Ae){this.updater.enqueueForceUpdate(this,Ae,"forceUpdate")};function ce(){}ce.prototype=oe.prototype;function fe(Ae,qe,ct){this.props=Ae,this.context=qe,this.refs=U,this.updater=ct||Z}var ve=fe.prototype=new ce;ve.constructor=fe,H(ve,oe.prototype),ve.isPureReactComponent=!0;var Ee=Array.isArray;function Me(){}var ze={H:null,A:null,T:null,S:null},Ke=Object.prototype.hasOwnProperty;function mt(Ae,qe,ct){var wt=ct.ref;return{$$typeof:e,type:Ae,key:qe,ref:wt!==void 0?wt:null,props:ct}}function zt(Ae,qe){return mt(Ae.type,qe,Ae.props)}function Ge(Ae){return typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===e}function Te(Ae){var qe={"=":"=0",":":"=2"};return"$"+Ae.replace(/[=:]/g,function(ct){return qe[ct]})}var dt=/\/+/g;function It(Ae,qe){return typeof Ae=="object"&&Ae!==null&&Ae.key!=null?Te(""+Ae.key):qe.toString(36)}function Rt(Ae){switch(Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason;default:switch(typeof Ae.status=="string"?Ae.then(Me,Me):(Ae.status="pending",Ae.then(function(qe){Ae.status==="pending"&&(Ae.status="fulfilled",Ae.value=qe)},function(qe){Ae.status==="pending"&&(Ae.status="rejected",Ae.reason=qe)})),Ae.status){case"fulfilled":return Ae.value;case"rejected":throw Ae.reason}}throw Ae}function Ve(Ae,qe,ct,wt,jt){var $t=typeof Ae;($t==="undefined"||$t==="boolean")&&(Ae=null);var Ft=!1;if(Ae===null)Ft=!0;else switch($t){case"bigint":case"string":case"number":Ft=!0;break;case"object":switch(Ae.$$typeof){case e:case t:Ft=!0;break;case C:return Ft=Ae._init,Ve(Ft(Ae._payload),qe,ct,wt,jt)}}if(Ft)return jt=jt(Ae),Ft=wt===""?"."+It(Ae,0):wt,Ee(jt)?(ct="",Ft!=null&&(ct=Ft.replace(dt,"$&/")+"/"),Ve(jt,qe,ct,"",function(er){return er})):jt!=null&&(Ge(jt)&&(jt=zt(jt,ct+(jt.key==null||Ae&&Ae.key===jt.key?"":(""+jt.key).replace(dt,"$&/")+"/")+Ft)),qe.push(jt)),1;Ft=0;var Tr=wt===""?".":wt+":";if(Ee(Ae))for(var pt=0;pt<Ae.length;pt++)wt=Ae[pt],$t=Tr+It(wt,pt),Ft+=Ve(wt,qe,ct,$t,jt);else if(pt=G(Ae),typeof pt=="function")for(Ae=pt.call(Ae),pt=0;!(wt=Ae.next()).done;)wt=wt.value,$t=Tr+It(wt,pt++),Ft+=Ve(wt,qe,ct,$t,jt);else if($t==="object"){if(typeof Ae.then=="function")return Ve(Rt(Ae),qe,ct,wt,jt);throw qe=String(Ae),Error("Objects are not valid as a React child (found: "+(qe==="[object Object]"?"object with keys {"+Object.keys(Ae).join(", ")+"}":qe)+"). If you meant to render a collection of children, use an array instead.")}return Ft}function it(Ae,qe,ct){if(Ae==null)return Ae;var wt=[],jt=0;return Ve(Ae,wt,"","",function($t){return qe.call(ct,$t,jt++)}),wt}function Mt(Ae){if(Ae._status===-1){var qe=Ae._result;qe=qe(),qe.then(function(ct){(Ae._status===0||Ae._status===-1)&&(Ae._status=1,Ae._result=ct)},function(ct){(Ae._status===0||Ae._status===-1)&&(Ae._status=2,Ae._result=ct)}),Ae._status===-1&&(Ae._status=0,Ae._result=qe)}if(Ae._status===1)return Ae._result.default;throw Ae._result}var Be=typeof reportError=="function"?reportError:function(Ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var qe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Ae=="object"&&Ae!==null&&typeof Ae.message=="string"?String(Ae.message):String(Ae),error:Ae});if(!window.dispatchEvent(qe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Ae);return}console.error(Ae)},yt={map:it,forEach:function(Ae,qe,ct){it(Ae,function(){qe.apply(this,arguments)},ct)},count:function(Ae){var qe=0;return it(Ae,function(){qe++}),qe},toArray:function(Ae){return it(Ae,function(qe){return qe})||[]},only:function(Ae){if(!Ge(Ae))throw Error("React.Children.only expected to receive a single React element child.");return Ae}};return wr.Activity=I,wr.Children=yt,wr.Component=oe,wr.Fragment=i,wr.Profiler=d,wr.PureComponent=fe,wr.StrictMode=a,wr.Suspense=A,wr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ze,wr.__COMPILER_RUNTIME={__proto__:null,c:function(Ae){return ze.H.useMemoCache(Ae)}},wr.cache=function(Ae){return function(){return Ae.apply(null,arguments)}},wr.cacheSignal=function(){return null},wr.cloneElement=function(Ae,qe,ct){if(Ae==null)throw Error("The argument must be a React element, but you passed "+Ae+".");var wt=H({},Ae.props),jt=Ae.key;if(qe!=null)for($t in qe.key!==void 0&&(jt=""+qe.key),qe)!Ke.call(qe,$t)||$t==="key"||$t==="__self"||$t==="__source"||$t==="ref"&&qe.ref===void 0||(wt[$t]=qe[$t]);var $t=arguments.length-2;if($t===1)wt.children=ct;else if(1<$t){for(var Ft=Array($t),Tr=0;Tr<$t;Tr++)Ft[Tr]=arguments[Tr+2];wt.children=Ft}return mt(Ae.type,jt,wt)},wr.createContext=function(Ae){return Ae={$$typeof:y,_currentValue:Ae,_currentValue2:Ae,_threadCount:0,Provider:null,Consumer:null},Ae.Provider=Ae,Ae.Consumer={$$typeof:g,_context:Ae},Ae},wr.createElement=function(Ae,qe,ct){var wt,jt={},$t=null;if(qe!=null)for(wt in qe.key!==void 0&&($t=""+qe.key),qe)Ke.call(qe,wt)&&wt!=="key"&&wt!=="__self"&&wt!=="__source"&&(jt[wt]=qe[wt]);var Ft=arguments.length-2;if(Ft===1)jt.children=ct;else if(1<Ft){for(var Tr=Array(Ft),pt=0;pt<Ft;pt++)Tr[pt]=arguments[pt+2];jt.children=Tr}if(Ae&&Ae.defaultProps)for(wt in Ft=Ae.defaultProps,Ft)jt[wt]===void 0&&(jt[wt]=Ft[wt]);return mt(Ae,$t,jt)},wr.createRef=function(){return{current:null}},wr.forwardRef=function(Ae){return{$$typeof:c,render:Ae}},wr.isValidElement=Ge,wr.lazy=function(Ae){return{$$typeof:C,_payload:{_status:-1,_result:Ae},_init:Mt}},wr.memo=function(Ae,qe){return{$$typeof:P,type:Ae,compare:qe===void 0?null:qe}},wr.startTransition=function(Ae){var qe=ze.T,ct={};ze.T=ct;try{var wt=Ae(),jt=ze.S;jt!==null&&jt(ct,wt),typeof wt=="object"&&wt!==null&&typeof wt.then=="function"&&wt.then(Me,Be)}catch($t){Be($t)}finally{qe!==null&&ct.types!==null&&(qe.types=ct.types),ze.T=qe}},wr.unstable_useCacheRefresh=function(){return ze.H.useCacheRefresh()},wr.use=function(Ae){return ze.H.use(Ae)},wr.useActionState=function(Ae,qe,ct){return ze.H.useActionState(Ae,qe,ct)},wr.useCallback=function(Ae,qe){return ze.H.useCallback(Ae,qe)},wr.useContext=function(Ae){return ze.H.useContext(Ae)},wr.useDebugValue=function(){},wr.useDeferredValue=function(Ae,qe){return ze.H.useDeferredValue(Ae,qe)},wr.useEffect=function(Ae,qe){return ze.H.useEffect(Ae,qe)},wr.useEffectEvent=function(Ae){return ze.H.useEffectEvent(Ae)},wr.useId=function(){return ze.H.useId()},wr.useImperativeHandle=function(Ae,qe,ct){return ze.H.useImperativeHandle(Ae,qe,ct)},wr.useInsertionEffect=function(Ae,qe){return ze.H.useInsertionEffect(Ae,qe)},wr.useLayoutEffect=function(Ae,qe){return ze.H.useLayoutEffect(Ae,qe)},wr.useMemo=function(Ae,qe){return ze.H.useMemo(Ae,qe)},wr.useOptimistic=function(Ae,qe){return ze.H.useOptimistic(Ae,qe)},wr.useReducer=function(Ae,qe,ct){return ze.H.useReducer(Ae,qe,ct)},wr.useRef=function(Ae){return ze.H.useRef(Ae)},wr.useState=function(Ae){return ze.H.useState(Ae)},wr.useSyncExternalStore=function(Ae,qe,ct){return ze.H.useSyncExternalStore(Ae,qe,ct)},wr.useTransition=function(){return ze.H.useTransition()},wr.version="19.2.4",wr}var bE;function ny(){return bE||(bE=1,s1.exports=L5()),s1.exports}var X=ny();const jg=Vl(X),B5=z5({__proto__:null,default:jg},[X]);var l1={exports:{}},b0={},c1={exports:{}},u1={};var xE;function j5(){return xE||(xE=1,(function(e){function t(Ve,it){var Mt=Ve.length;Ve.push(it);e:for(;0<Mt;){var Be=Mt-1>>>1,yt=Ve[Be];if(0<d(yt,it))Ve[Be]=it,Ve[Mt]=yt,Mt=Be;else break e}}function i(Ve){return Ve.length===0?null:Ve[0]}function a(Ve){if(Ve.length===0)return null;var it=Ve[0],Mt=Ve.pop();if(Mt!==it){Ve[0]=Mt;e:for(var Be=0,yt=Ve.length,Ae=yt>>>1;Be<Ae;){var qe=2*(Be+1)-1,ct=Ve[qe],wt=qe+1,jt=Ve[wt];if(0>d(ct,Mt))wt<yt&&0>d(jt,ct)?(Ve[Be]=jt,Ve[wt]=Mt,Be=wt):(Ve[Be]=ct,Ve[qe]=Mt,Be=qe);else if(wt<yt&&0>d(jt,Mt))Ve[Be]=jt,Ve[wt]=Mt,Be=wt;else break e}}return it}function d(Ve,it){var Mt=Ve.sortIndex-it.sortIndex;return Mt!==0?Mt:Ve.id-it.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var y=Date,c=y.now();e.unstable_now=function(){return y.now()-c}}var A=[],P=[],C=1,I=null,B=3,G=!1,Z=!1,H=!1,U=!1,oe=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function ve(Ve){for(var it=i(P);it!==null;){if(it.callback===null)a(P);else if(it.startTime<=Ve)a(P),it.sortIndex=it.expirationTime,t(A,it);else break;it=i(P)}}function Ee(Ve){if(H=!1,ve(Ve),!Z)if(i(A)!==null)Z=!0,Me||(Me=!0,Te());else{var it=i(P);it!==null&&Rt(Ee,it.startTime-Ve)}}var Me=!1,ze=-1,Ke=5,mt=-1;function zt(){return U?!0:!(e.unstable_now()-mt<Ke)}function Ge(){if(U=!1,Me){var Ve=e.unstable_now();mt=Ve;var it=!0;try{e:{Z=!1,H&&(H=!1,ce(ze),ze=-1),G=!0;var Mt=B;try{t:{for(ve(Ve),I=i(A);I!==null&&!(I.expirationTime>Ve&&zt());){var Be=I.callback;if(typeof Be=="function"){I.callback=null,B=I.priorityLevel;var yt=Be(I.expirationTime<=Ve);if(Ve=e.unstable_now(),typeof yt=="function"){I.callback=yt,ve(Ve),it=!0;break t}I===i(A)&&a(A),ve(Ve)}else a(A);I=i(A)}if(I!==null)it=!0;else{var Ae=i(P);Ae!==null&&Rt(Ee,Ae.startTime-Ve),it=!1}}break e}finally{I=null,B=Mt,G=!1}it=void 0}}finally{it?Te():Me=!1}}}var Te;if(typeof fe=="function")Te=function(){fe(Ge)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,It=dt.port2;dt.port1.onmessage=Ge,Te=function(){It.postMessage(null)}}else Te=function(){oe(Ge,0)};function Rt(Ve,it){ze=oe(function(){Ve(e.unstable_now())},it)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ve){Ve.callback=null},e.unstable_forceFrameRate=function(Ve){0>Ve||125<Ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ke=0<Ve?Math.floor(1e3/Ve):5},e.unstable_getCurrentPriorityLevel=function(){return B},e.unstable_next=function(Ve){switch(B){case 1:case 2:case 3:var it=3;break;default:it=B}var Mt=B;B=it;try{return Ve()}finally{B=Mt}},e.unstable_requestPaint=function(){U=!0},e.unstable_runWithPriority=function(Ve,it){switch(Ve){case 1:case 2:case 3:case 4:case 5:break;default:Ve=3}var Mt=B;B=Ve;try{return it()}finally{B=Mt}},e.unstable_scheduleCallback=function(Ve,it,Mt){var Be=e.unstable_now();switch(typeof Mt=="object"&&Mt!==null?(Mt=Mt.delay,Mt=typeof Mt=="number"&&0<Mt?Be+Mt:Be):Mt=Be,Ve){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=Mt+yt,Ve={id:C++,callback:it,priorityLevel:Ve,startTime:Mt,expirationTime:yt,sortIndex:-1},Mt>Be?(Ve.sortIndex=Mt,t(P,Ve),i(A)===null&&Ve===i(P)&&(H?(ce(ze),ze=-1):H=!0,Rt(Ee,Mt-Be))):(Ve.sortIndex=yt,t(A,Ve),Z||G||(Z=!0,Me||(Me=!0,Te()))),Ve},e.unstable_shouldYield=zt,e.unstable_wrapCallback=function(Ve){var it=B;return function(){var Mt=B;B=it;try{return Ve.apply(this,arguments)}finally{B=Mt}}}})(u1)),u1}var wE;function N5(){return wE||(wE=1,c1.exports=j5()),c1.exports}var h1={exports:{}},po={};var SE;function F5(){if(SE)return po;SE=1;var e=ny();function t(A){var P="https://react.dev/errors/"+A;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)P+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+A+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function g(A,P,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:I==null?null:""+I,children:A,containerInfo:P,implementation:C}}var y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(A,P){if(A==="font")return"";if(typeof P=="string")return P==="use-credentials"?P:""}return po.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,po.createPortal=function(A,P){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)throw Error(t(299));return g(A,P,null,C)},po.flushSync=function(A){var P=y.T,C=a.p;try{if(y.T=null,a.p=2,A)return A()}finally{y.T=P,a.p=C,a.d.f()}},po.preconnect=function(A,P){typeof A=="string"&&(P?(P=P.crossOrigin,P=typeof P=="string"?P==="use-credentials"?P:"":void 0):P=null,a.d.C(A,P))},po.prefetchDNS=function(A){typeof A=="string"&&a.d.D(A)},po.preinit=function(A,P){if(typeof A=="string"&&P&&typeof P.as=="string"){var C=P.as,I=c(C,P.crossOrigin),B=typeof P.integrity=="string"?P.integrity:void 0,G=typeof P.fetchPriority=="string"?P.fetchPriority:void 0;C==="style"?a.d.S(A,typeof P.precedence=="string"?P.precedence:void 0,{crossOrigin:I,integrity:B,fetchPriority:G}):C==="script"&&a.d.X(A,{crossOrigin:I,integrity:B,fetchPriority:G,nonce:typeof P.nonce=="string"?P.nonce:void 0})}},po.preinitModule=function(A,P){if(typeof A=="string")if(typeof P=="object"&&P!==null){if(P.as==null||P.as==="script"){var C=c(P.as,P.crossOrigin);a.d.M(A,{crossOrigin:C,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0})}}else P==null&&a.d.M(A)},po.preload=function(A,P){if(typeof A=="string"&&typeof P=="object"&&P!==null&&typeof P.as=="string"){var C=P.as,I=c(C,P.crossOrigin);a.d.L(A,C,{crossOrigin:I,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0,type:typeof P.type=="string"?P.type:void 0,fetchPriority:typeof P.fetchPriority=="string"?P.fetchPriority:void 0,referrerPolicy:typeof P.referrerPolicy=="string"?P.referrerPolicy:void 0,imageSrcSet:typeof P.imageSrcSet=="string"?P.imageSrcSet:void 0,imageSizes:typeof P.imageSizes=="string"?P.imageSizes:void 0,media:typeof P.media=="string"?P.media:void 0})}},po.preloadModule=function(A,P){if(typeof A=="string")if(P){var C=c(P.as,P.crossOrigin);a.d.m(A,{as:typeof P.as=="string"&&P.as!=="script"?P.as:void 0,crossOrigin:C,integrity:typeof P.integrity=="string"?P.integrity:void 0})}else a.d.m(A)},po.requestFormReset=function(A){a.d.r(A)},po.unstable_batchedUpdates=function(A,P){return A(P)},po.useFormState=function(A,P,C){return y.H.useFormState(A,P,C)},po.useFormStatus=function(){return y.H.useHostTransitionStatus()},po.version="19.2.4",po}var TE;function ED(){if(TE)return h1.exports;TE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),h1.exports=F5(),h1.exports}var EE;function U5(){if(EE)return b0;EE=1;var e=N5(),t=ny(),i=ED();function a(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function g(l){var h=l,v=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(v=h.return),l=h.return;while(l)}return h.tag===3?v:null}function y(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function c(l){if(l.tag===31){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function A(l){if(g(l)!==l)throw Error(a(188))}function P(l){var h=l.alternate;if(!h){if(h=g(l),h===null)throw Error(a(188));return h!==l?null:l}for(var v=l,S=h;;){var z=v.return;if(z===null)break;var j=z.alternate;if(j===null){if(S=z.return,S!==null){v=S;continue}break}if(z.child===j.child){for(j=z.child;j;){if(j===v)return A(z),l;if(j===S)return A(z),h;j=j.sibling}throw Error(a(188))}if(v.return!==S.return)v=z,S=j;else{for(var Q=!1,de=z.child;de;){if(de===v){Q=!0,v=z,S=j;break}if(de===S){Q=!0,S=z,v=j;break}de=de.sibling}if(!Q){for(de=j.child;de;){if(de===v){Q=!0,v=j,S=z;break}if(de===S){Q=!0,S=j,v=z;break}de=de.sibling}if(!Q)throw Error(a(189))}}if(v.alternate!==S)throw Error(a(190))}if(v.tag!==3)throw Error(a(188));return v.stateNode.current===v?l:h}function C(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l;for(l=l.child;l!==null;){if(h=C(l),h!==null)return h;l=l.sibling}return null}var I=Object.assign,B=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),Z=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Ee=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),mt=Symbol.for("react.activity"),zt=Symbol.for("react.memo_cache_sentinel"),Ge=Symbol.iterator;function Te(l){return l===null||typeof l!="object"?null:(l=Ge&&l[Ge]||l["@@iterator"],typeof l=="function"?l:null)}var dt=Symbol.for("react.client.reference");function It(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===dt?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case H:return"Fragment";case oe:return"Profiler";case U:return"StrictMode";case Ee:return"Suspense";case Me:return"SuspenseList";case mt:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Z:return"Portal";case fe:return l.displayName||"Context";case ce:return(l._context.displayName||"Context")+".Consumer";case ve:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case ze:return h=l.displayName||null,h!==null?h:It(l.type)||"Memo";case Ke:h=l._payload,l=l._init;try{return It(l(h))}catch{}}return null}var Rt=Array.isArray,Ve=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Mt={pending:!1,data:null,method:null,action:null},Be=[],yt=-1;function Ae(l){return{current:l}}function qe(l){0>yt||(l.current=Be[yt],Be[yt]=null,yt--)}function ct(l,h){yt++,Be[yt]=l.current,l.current=h}var wt=Ae(null),jt=Ae(null),$t=Ae(null),Ft=Ae(null);function Tr(l,h){switch(ct($t,h),ct(jt,l),ct(wt,null),h.nodeType){case 9:case 11:l=(l=h.documentElement)&&(l=l.namespaceURI)?Tu(l):0;break;default:if(l=h.tagName,h=h.namespaceURI)h=Tu(h),l=t0(h,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}qe(wt),ct(wt,l)}function pt(){qe(wt),qe(jt),qe($t)}function er(l){l.memoizedState!==null&&ct(Ft,l);var h=wt.current,v=t0(h,l.type);h!==v&&(ct(jt,l),ct(wt,v))}function mr(l){jt.current===l&&(qe(wt),qe(jt)),Ft.current===l&&(qe(Ft),Op._currentValue=Mt)}var At,Mn;function cr(l){if(At===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);At=h&&h[1]||"",Mn=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+l+Mn}var Xr=!1;function ln(l,h){if(!l||Xr)return"";Xr=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(st){var nt=st}Reflect.construct(l,[],Tt)}else{try{Tt.call()}catch(st){nt=st}l.call(Tt.prototype)}}else{try{throw Error()}catch(st){nt=st}(Tt=l())&&typeof Tt.catch=="function"&&Tt.catch(function(){})}}catch(st){if(st&&nt&&typeof st.stack=="string")return[st.stack,nt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=S.DetermineComponentFrameRoot(),Q=j[0],de=j[1];if(Q&&de){var Le=Q.split(`
`),rt=de.split(`
`);for(z=S=0;S<Le.length&&!Le[S].includes("DetermineComponentFrameRoot");)S++;for(;z<rt.length&&!rt[z].includes("DetermineComponentFrameRoot");)z++;if(S===Le.length||z===rt.length)for(S=Le.length-1,z=rt.length-1;1<=S&&0<=z&&Le[S]!==rt[z];)z--;for(;1<=S&&0<=z;S--,z--)if(Le[S]!==rt[z]){if(S!==1||z!==1)do if(S--,z--,0>z||Le[S]!==rt[z]){var gt=`
`+Le[S].replace(" at new "," at ");return l.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",l.displayName)),gt}while(1<=S&&0<=z);break}}}finally{Xr=!1,Error.prepareStackTrace=v}return(v=l?l.displayName||l.name:"")?cr(v):""}function Lr(l,h){switch(l.tag){case 26:case 27:case 5:return cr(l.type);case 16:return cr("Lazy");case 13:return l.child!==h&&h!==null?cr("Suspense Fallback"):cr("Suspense");case 19:return cr("SuspenseList");case 0:case 15:return ln(l.type,!1);case 11:return ln(l.type.render,!1);case 1:return ln(l.type,!0);case 31:return cr("Activity");default:return""}}function va(l){try{var h="",v=null;do h+=Lr(l,v),v=l,l=l.return;while(l);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var tl=Object.prototype.hasOwnProperty,bs=e.unstable_scheduleCallback,Uo=e.unstable_cancelCallback,vo=e.unstable_shouldYield,qc=e.unstable_requestPaint,ni=e.unstable_now,_a=e.unstable_getCurrentPriorityLevel,$c=e.unstable_ImmediatePriority,xs=e.unstable_UserBlockingPriority,ws=e.unstable_NormalPriority,Xu=e.unstable_LowPriority,rl=e.unstable_IdlePriority,Fe=e.log,ee=e.unstable_setDisableYieldValue,ie=null,se=null;function we(l){if(typeof Fe=="function"&&ee(l),se&&typeof se.setStrictMode=="function")try{se.setStrictMode(ie,l)}catch{}}var Oe=Math.clz32?Math.clz32:Ue,Ye=Math.log,Ze=Math.LN2;function Ue(l){return l>>>=0,l===0?32:31-(Ye(l)/Ze|0)|0}var He=256,_t=262144,ot=4194304;function Ie(l){var h=l&42;if(h!==0)return h;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ut(l,h,v){var S=l.pendingLanes;if(S===0)return 0;var z=0,j=l.suspendedLanes,Q=l.pingedLanes;l=l.warmLanes;var de=S&134217727;return de!==0?(S=de&~j,S!==0?z=Ie(S):(Q&=de,Q!==0?z=Ie(Q):v||(v=de&~l,v!==0&&(z=Ie(v))))):(de=S&~j,de!==0?z=Ie(de):Q!==0?z=Ie(Q):v||(v=S&~l,v!==0&&(z=Ie(v)))),z===0?0:h!==0&&h!==z&&(h&j)===0&&(j=z&-z,v=h&-h,j>=v||j===32&&(v&4194048)!==0)?h:z}function ir(l,h){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&h)===0}function Xt(l,h){switch(l){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var l=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),l}function tr(l){for(var h=[],v=0;31>v;v++)h.push(l);return h}function ar(l,h){l.pendingLanes|=h,h!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function fn(l,h,v,S,z,j){var Q=l.pendingLanes;l.pendingLanes=v,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=v,l.entangledLanes&=v,l.errorRecoveryDisabledLanes&=v,l.shellSuspendCounter=0;var de=l.entanglements,Le=l.expirationTimes,rt=l.hiddenUpdates;for(v=Q&~v;0<v;){var gt=31-Oe(v),Tt=1<<gt;de[gt]=0,Le[gt]=-1;var nt=rt[gt];if(nt!==null)for(rt[gt]=null,gt=0;gt<nt.length;gt++){var st=nt[gt];st!==null&&(st.lane&=-536870913)}v&=~Tt}S!==0&&Pn(l,S,0),j!==0&&z===0&&l.tag!==0&&(l.suspendedLanes|=j&~(Q&~h))}function Pn(l,h,v){l.pendingLanes|=h,l.suspendedLanes&=~h;var S=31-Oe(h);l.entangledLanes|=h,l.entanglements[S]=l.entanglements[S]|1073741824|v&261930}function xn(l,h){var v=l.entangledLanes|=h;for(l=l.entanglements;v;){var S=31-Oe(v),z=1<<S;z&h|l[S]&h&&(l[S]|=h),v&=~z}}function Si(l,h){var v=h&-h;return v=(v&42)!==0?1:dn(v),(v&(l.suspendedLanes|h))!==0?0:v}function dn(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function St(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Ir(){var l=it.p;return l!==0?l:(l=window.event,l===void 0?32:g_(l.type))}function on(l,h){var v=it.p;try{return it.p=l,h()}finally{it.p=v}}var Xi=Math.random().toString(36).slice(2),Ur="__reactFiber$"+Xi,Pt="__reactProps$"+Xi,Kt="__reactContainer$"+Xi,ur="__reactEvents$"+Xi,ba="__reactListeners$"+Xi,xf="__reactHandles$"+Xi,Vo="__reactResources$"+Xi,hr="__reactMarker$"+Xi;function $l(l){delete l[Ur],delete l[Pt],delete l[ur],delete l[ba],delete l[xf]}function Go(l){var h=l[Ur];if(h)return h;for(var v=l.parentNode;v;){if(h=v[Kt]||v[Ur]){if(v=h.alternate,h.child!==null||v!==null&&v.child!==null)for(l=pg(l);l!==null;){if(v=l[Ur])return v;l=pg(l)}return h}l=v,v=l.parentNode}return null}function Ss(l){if(l=l[Ur]||l[Kt]){var h=l.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return l}return null}function qo(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l.stateNode;throw Error(a(33))}function $o(l){var h=l[Vo];return h||(h=l[Vo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Cn(l){l[hr]=!0}var Zc=new Set,Pi={};function Ar(l,h){Ts(l,h),Ts(l+"Capture",h)}function Ts(l,h){for(Pi[l]=h,l=0;l<h.length;l++)Zc.add(h[l])}var Hc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yc={},nl={};function _o(l){return tl.call(nl,l)?!0:tl.call(Yc,l)?!1:Hc.test(l)?nl[l]=!0:(Yc[l]=!0,!1)}function Wu(l,h,v){if(_o(h))if(v===null)l.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":l.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){l.removeAttribute(h);return}}l.setAttribute(h,""+v)}}function Zo(l,h,v){if(v===null)l.removeAttribute(h);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttribute(h,""+v)}}function Ya(l,h,v,S){if(S===null)l.removeAttribute(v);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(v);return}l.setAttributeNS(h,v,""+S)}}function Or(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Od(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function cm(l,h,v){var S=Object.getOwnPropertyDescriptor(l.constructor.prototype,h);if(!l.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var z=S.get,j=S.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return z.call(this)},set:function(Q){v=""+Q,j.call(this,Q)}}),Object.defineProperty(l,h,{enumerable:S.enumerable}),{getValue:function(){return v},setValue:function(Q){v=""+Q},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function Zl(l){if(!l._valueTracker){var h=Od(l)?"checked":"value";l._valueTracker=cm(l,h,""+l[h])}}function zd(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var v=h.getValue(),S="";return l&&(S=Od(l)?l.checked?"true":"false":l.value),l=S,l!==v?(h.setValue(l),!0):!1}function Ku(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var um=/[\n"\\]/g;function Li(l){return l.replace(um,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Qu(l,h,v,S,z,j,Q,de){l.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.type=Q:l.removeAttribute("type"),h!=null?Q==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+Or(h)):l.value!==""+Or(h)&&(l.value=""+Or(h)):Q!=="submit"&&Q!=="reset"||l.removeAttribute("value"),h!=null?Ju(l,Q,Or(h)):v!=null?Ju(l,Q,Or(v)):S!=null&&l.removeAttribute("value"),z==null&&j!=null&&(l.defaultChecked=!!j),z!=null&&(l.checked=z&&typeof z!="function"&&typeof z!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?l.name=""+Or(de):l.removeAttribute("name")}function wf(l,h,v,S,z,j,Q,de){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(l.type=j),h!=null||v!=null){if(!(j!=="submit"&&j!=="reset"||h!=null)){Zl(l);return}v=v!=null?""+Or(v):"",h=h!=null?""+Or(h):v,de||h===l.value||(l.value=h),l.defaultValue=h}S=S??z,S=typeof S!="function"&&typeof S!="symbol"&&!!S,l.checked=de?l.checked:!!S,l.defaultChecked=!!S,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(l.name=Q),Zl(l)}function Ju(l,h,v){h==="number"&&Ku(l.ownerDocument)===l||l.defaultValue===""+v||(l.defaultValue=""+v)}function il(l,h,v,S){if(l=l.options,h){h={};for(var z=0;z<v.length;z++)h["$"+v[z]]=!0;for(v=0;v<l.length;v++)z=h.hasOwnProperty("$"+l[v].value),l[v].selected!==z&&(l[v].selected=z),z&&S&&(l[v].defaultSelected=!0)}else{for(v=""+Or(v),h=null,z=0;z<l.length;z++){if(l[z].value===v){l[z].selected=!0,S&&(l[z].defaultSelected=!0);return}h!==null||l[z].disabled||(h=l[z])}h!==null&&(h.selected=!0)}}function hm(l,h,v){if(h!=null&&(h=""+Or(h),h!==l.value&&(l.value=h),v==null)){l.defaultValue!==h&&(l.defaultValue=h);return}l.defaultValue=v!=null?""+Or(v):""}function Xc(l,h,v,S){if(h==null){if(S!=null){if(v!=null)throw Error(a(92));if(Rt(S)){if(1<S.length)throw Error(a(93));S=S[0]}v=S}v==null&&(v=""),h=v}v=Or(h),l.defaultValue=v,S=l.textContent,S===v&&S!==""&&S!==null&&(l.value=S),Zl(l)}function Es(l,h){if(h){var v=l.firstChild;if(v&&v===l.lastChild&&v.nodeType===3){v.nodeValue=h;return}}l.textContent=h}var fm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hl(l,h,v){var S=h.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?S?l.setProperty(h,""):h==="float"?l.cssFloat="":l[h]="":S?l.setProperty(h,v):typeof v!="number"||v===0||fm.has(h)?h==="float"?l.cssFloat=v:l[h]=(""+v).trim():l[h]=v+"px"}function Sf(l,h,v){if(h!=null&&typeof h!="object")throw Error(a(62));if(l=l.style,v!=null){for(var S in v)!v.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?l.setProperty(S,""):S==="float"?l.cssFloat="":l[S]="");for(var z in h)S=h[z],h.hasOwnProperty(z)&&v[z]!==S&&Hl(l,z,S)}else for(var j in h)h.hasOwnProperty(j)&&Hl(l,j,h[j])}function Yl(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var al=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(l){return Wc.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function bo(){}var kd=null;function eh(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ii=null,Gn=null;function pn(l){var h=Ss(l);if(h&&(l=h.stateNode)){var v=l[Pt]||null;e:switch(l=h.stateNode,h.type){case"input":if(Qu(l,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),h=v.name,v.type==="radio"&&h!=null){for(v=l;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Li(""+h)+'"][type="radio"]'),h=0;h<v.length;h++){var S=v[h];if(S!==l&&S.form===l.form){var z=S[Pt]||null;if(!z)throw Error(a(90));Qu(S,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(h=0;h<v.length;h++)S=v[h],S.form===l.form&&zd(S)}break e;case"textarea":hm(l,v.value,v.defaultValue);break e;case"select":h=v.value,h!=null&&il(l,!!v.multiple,h,!1)}}}var rr=!1;function Wr(l,h,v){if(rr)return l(h,v);rr=!0;try{var S=l(h);return S}finally{if(rr=!1,(ii!==null||Gn!==null)&&(gp(),ii&&(h=ii,l=Gn,Gn=ii=null,pn(h),l)))for(h=0;h<l.length;h++)pn(l[h])}}function Xa(l,h){var v=l.stateNode;if(v===null)return null;var S=v[Pt]||null;if(S===null)return null;v=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(v&&typeof v!="function")throw Error(a(231,h,typeof v));return v}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bi=!1;if(Dn)try{var ai={};Object.defineProperty(ai,"passive",{get:function(){Bi=!0}}),window.addEventListener("test",ai,ai),window.removeEventListener("test",ai,ai)}catch{Bi=!1}var xa=null,Ho=null,mn=null;function ol(){if(mn)return mn;var l,h=Ho,v=h.length,S,z="value"in xa?xa.value:xa.textContent,j=z.length;for(l=0;l<v&&h[l]===z[l];l++);var Q=v-l;for(S=1;S<=Q&&h[v-S]===z[j-S];S++);return mn=z.slice(l,1<S?1-S:void 0)}function wa(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function Xl(){return!0}function ji(){return!1}function Kn(l){function h(v,S,z,j,Q){this._reactName=v,this._targetInst=z,this.type=S,this.nativeEvent=j,this.target=Q,this.currentTarget=null;for(var de in l)l.hasOwnProperty(de)&&(v=l[de],this[de]=v?v(j):j[de]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Xl:ji,this.isPropagationStopped=ji,this}return I(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),h}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},th=Kn(Ni),Wl=I({},Ni,{view:0,detail:0}),Kl=Kn(Wl),$r,sl,xr,fr=I({},Wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ih,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==xr&&(xr&&l.type==="mousemove"?($r=l.screenX-xr.screenX,sl=l.screenY-xr.screenY):sl=$r=0,xr=l),$r)},movementY:function(l){return"movementY"in l?l.movementY:sl}}),Ql=Kn(fr),Mr=I({},fr,{dataTransfer:0}),rh=Kn(Mr),Wa=I({},Wl,{relatedTarget:0}),ll=Kn(Wa),cl=I({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),dm=Kn(cl),nh=I({},Ni,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Rd=Kn(nh),_y=I({},Ni,{data:0}),Ld=Kn(_y),Fi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=gn[l])?!!h[l]:!1}function ih(){return Jl}var ah=I({},Wl,{key:function(l){if(l.key){var h=Fi[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=wa(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Yo[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ih,charCode:function(l){return l.type==="keypress"?wa(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?wa(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),In=Kn(ah),pm=I({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tf=Kn(pm),mm=I({},Wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ih}),by=Kn(mm),Kc=I({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ef=Kn(Kc),Qc=I({},fr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Bd=Kn(Qc),oh=I({},Ni,{newState:0,oldState:0}),Jc=Kn(oh),eu=[9,13,27,32],jn=Dn&&"CompositionEvent"in window,tu=null;Dn&&"documentMode"in document&&(tu=document.documentMode);var ru=Dn&&"TextEvent"in window&&!tu,nu=Dn&&(!jn||tu&&8<tu&&11>=tu),ul=" ",gm=!1;function sh(l,h){switch(l){case"keyup":return eu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ym(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var xo=!1;function Af(l,h){switch(l){case"compositionend":return ym(h);case"keypress":return h.which!==32?null:(gm=!0,ul);case"textInput":return l=h.data,l===ul&&gm?null:l;default:return null}}function vm(l,h){if(xo)return l==="compositionend"||!jn&&sh(l,h)?(l=ol(),mn=Ho=xa=null,xo=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return nu&&h.locale!=="ko"?null:h.data;default:return null}}var _m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mf(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!_m[l.type]:h==="textarea"}function Pf(l,h,v,S){ii?Gn?Gn.push(S):Gn=[S]:ii=S,h=bp(h,"onChange"),0<h.length&&(v=new th("onChange","change",null,v,S),l.push({event:v,listeners:h}))}var ec=null,iu=null;function bm(l){t_(l,0)}function lh(l){var h=qo(l);if(zd(h))return l}function hl(l,h){if(l==="change")return h}var jd=!1;if(Dn){var ch;if(Dn){var fl="oninput"in document;if(!fl){var Nd=document.createElement("div");Nd.setAttribute("oninput","return;"),fl=typeof Nd.oninput=="function"}ch=fl}else ch=!1;jd=ch&&(!document.documentMode||9<document.documentMode)}function uh(){ec&&(ec.detachEvent("onpropertychange",xm),iu=ec=null)}function xm(l){if(l.propertyName==="value"&&lh(iu)){var h=[];Pf(h,iu,l,eh(l)),Wr(bm,h)}}function xy(l,h,v){l==="focusin"?(uh(),ec=h,iu=v,ec.attachEvent("onpropertychange",xm)):l==="focusout"&&uh()}function wm(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return lh(iu)}function hh(l,h){if(l==="click")return lh(h)}function Sm(l,h){if(l==="input"||l==="change")return lh(h)}function Fd(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var Wi=typeof Object.is=="function"?Object.is:Fd;function dl(l,h){if(Wi(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var v=Object.keys(l),S=Object.keys(h);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var z=v[S];if(!tl.call(h,z)||!Wi(l[z],h[z]))return!1}return!0}function Ka(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function fh(l,h){var v=Ka(l);l=0;for(var S;v;){if(v.nodeType===3){if(S=l+v.textContent.length,l<=h&&S>=h)return{node:v,offset:h-l};l=S}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Ka(v)}}function Cf(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?Cf(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function Df(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var h=Ku(l.document);h instanceof l.HTMLIFrameElement;){try{var v=typeof h.contentWindow.location.href=="string"}catch{v=!1}if(v)l=h.contentWindow;else break;h=Ku(l.document)}return h}function dh(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var If=Dn&&"documentMode"in document&&11>=document.documentMode,Qa=null,ph=null,mh=null,Of=!1;function Tm(l,h,v){var S=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;Of||Qa==null||Qa!==Ku(S)||(S=Qa,"selectionStart"in S&&dh(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),mh&&dl(mh,S)||(mh=S,S=bp(ph,"onSelect"),0<S.length&&(h=new th("onSelect","select",null,h,v),l.push({event:h,listeners:S}),h.target=Qa)))}function tc(l,h){var v={};return v[l.toLowerCase()]=h.toLowerCase(),v["Webkit"+l]="webkit"+h,v["Moz"+l]="moz"+h,v}var rc={animationend:tc("Animation","AnimationEnd"),animationiteration:tc("Animation","AnimationIteration"),animationstart:tc("Animation","AnimationStart"),transitionrun:tc("Transition","TransitionRun"),transitionstart:tc("Transition","TransitionStart"),transitioncancel:tc("Transition","TransitionCancel"),transitionend:tc("Transition","TransitionEnd")},Ud={},zr={};Dn&&(zr=document.createElement("div").style,"AnimationEvent"in window||(delete rc.animationend.animation,delete rc.animationiteration.animation,delete rc.animationstart.animation),"TransitionEvent"in window||delete rc.transitionend.transition);function Xo(l){if(Ud[l])return Ud[l];if(!rc[l])return l;var h=rc[l],v;for(v in h)if(h.hasOwnProperty(v)&&v in zr)return Ud[l]=h[v];return l}var gh=Xo("animationend"),yh=Xo("animationiteration"),zf=Xo("animationstart"),nc=Xo("transitionrun"),vh=Xo("transitionstart"),au=Xo("transitioncancel"),Sa=Xo("transitionend"),Vd=new Map,kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kf.push("scrollEnd");function Ta(l,h){Vd.set(l,h),Ar(h,[l])}var Wo=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ui=[],As=0,ic=0;function ac(){for(var l=As,h=ic=As=0;h<l;){var v=Ui[h];Ui[h++]=null;var S=Ui[h];Ui[h++]=null;var z=Ui[h];Ui[h++]=null;var j=Ui[h];if(Ui[h++]=null,S!==null&&z!==null){var Q=S.pending;Q===null?z.next=z:(z.next=Q.next,Q.next=z),S.pending=z}j!==0&&Gd(v,z,j)}}function _h(l,h,v,S){Ui[As++]=l,Ui[As++]=h,Ui[As++]=v,Ui[As++]=S,ic|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function pl(l,h,v,S){return _h(l,h,v,S),ou(l)}function Ja(l,h){return _h(l,null,null,h),ou(l)}function Gd(l,h,v){l.lanes|=v;var S=l.alternate;S!==null&&(S.lanes|=v);for(var z=!1,j=l.return;j!==null;)j.childLanes|=v,S=j.alternate,S!==null&&(S.childLanes|=v),j.tag===22&&(l=j.stateNode,l===null||l._visibility&1||(z=!0)),l=j,j=j.return;return l.tag===3?(j=l.stateNode,z&&h!==null&&(z=31-Oe(v),l=j.hiddenUpdates,S=l[z],S===null?l[z]=[h]:S.push(h),h.lane=v|536870912),j):null}function ou(l){if(50<mp)throw mp=0,Ny=null,Error(a(185));for(var h=l.return;h!==null;)l=h,h=l.return;return l.tag===3?l.stateNode:null}var pr={};function Rf(l,h,v,S){this.tag=l,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(l,h,v,S){return new Rf(l,h,v,S)}function Lf(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Aa(l,h){var v=l.alternate;return v===null?(v=Ea(l.tag,h,l.key,l.mode),v.elementType=l.elementType,v.type=l.type,v.stateNode=l.stateNode,v.alternate=l,l.alternate=v):(v.pendingProps=h,v.type=l.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=l.flags&65011712,v.childLanes=l.childLanes,v.lanes=l.lanes,v.child=l.child,v.memoizedProps=l.memoizedProps,v.memoizedState=l.memoizedState,v.updateQueue=l.updateQueue,h=l.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=l.sibling,v.index=l.index,v.ref=l.ref,v.refCleanup=l.refCleanup,v}function Em(l,h){l.flags&=65011714;var v=l.alternate;return v===null?(l.childLanes=0,l.lanes=h,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=v.childLanes,l.lanes=v.lanes,l.child=v.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=v.memoizedProps,l.memoizedState=v.memoizedState,l.updateQueue=v.updateQueue,l.type=v.type,h=v.dependencies,l.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),l}function Bf(l,h,v,S,z,j){var Q=0;if(S=l,typeof l=="function")Lf(l)&&(Q=1);else if(typeof l=="string")Q=bg(l,v,wt.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case mt:return l=Ea(31,v,h,z),l.elementType=mt,l.lanes=j,l;case H:return ml(v.children,z,j,h);case U:Q=8,z|=24;break;case oe:return l=Ea(12,v,h,z|2),l.elementType=oe,l.lanes=j,l;case Ee:return l=Ea(13,v,h,z),l.elementType=Ee,l.lanes=j,l;case Me:return l=Ea(19,v,h,z),l.elementType=Me,l.lanes=j,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case fe:Q=10;break e;case ce:Q=9;break e;case ve:Q=11;break e;case ze:Q=14;break e;case Ke:Q=16,S=null;break e}Q=29,v=Error(a(130,l===null?"null":typeof l,"")),S=null}return h=Ea(Q,v,h,z),h.elementType=l,h.type=S,h.lanes=j,h}function ml(l,h,v,S){return l=Ea(7,l,S,h),l.lanes=v,l}function qd(l,h,v){return l=Ea(6,l,null,h),l.lanes=v,l}function jf(l){var h=Ea(18,null,null,0);return h.stateNode=l,h}function gl(l,h,v){return h=Ea(4,l.children!==null?l.children:[],l.key,h),h.lanes=v,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}var su=new WeakMap;function Vi(l,h){if(typeof l=="object"&&l!==null){var v=su.get(l);return v!==void 0?v:(h={value:l,source:h,stack:va(h)},su.set(l,h),h)}return{value:l,source:h,stack:va(h)}}var yl=[],vl=0,oc=null,_l=0,oi=[],ui=0,Ko=null,Qo=1,Ki="";function Ms(l,h){yl[vl++]=_l,yl[vl++]=oc,oc=l,_l=h}function $d(l,h,v){oi[ui++]=Qo,oi[ui++]=Ki,oi[ui++]=Ko,Ko=l;var S=Qo;l=Ki;var z=32-Oe(S)-1;S&=~(1<<z),v+=1;var j=32-Oe(h)+z;if(30<j){var Q=z-z%5;j=(S&(1<<Q)-1).toString(32),S>>=Q,z-=Q,Qo=1<<32-Oe(h)+z|v<<z|S,Ki=j+l}else Qo=1<<j|v<<z|S,Ki=l}function sc(l){l.return!==null&&(Ms(l,1),$d(l,1,0))}function lu(l){for(;l===oc;)oc=yl[--vl],yl[vl]=null,_l=yl[--vl],yl[vl]=null;for(;l===Ko;)Ko=oi[--ui],oi[ui]=null,Ki=oi[--ui],oi[ui]=null,Qo=oi[--ui],oi[ui]=null}function Zd(l,h){oi[ui++]=Qo,oi[ui++]=Ki,oi[ui++]=Ko,Qo=h.id,Ki=h.overflow,Ko=l}var hi=null,Kr=null,Sr=!1,Ps=null,Ma=!1,wn=Error(a(519));function Qi(l){var h=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cs(Vi(h,l)),wn}function Ji(l){var h=l.stateNode,v=l.type,S=l.memoizedProps;switch(h[Ur]=l,h[Pt]=S,v){case"dialog":Dr("cancel",h),Dr("close",h);break;case"iframe":case"object":case"embed":Dr("load",h);break;case"video":case"audio":for(v=0;v<Su.length;v++)Dr(Su[v],h);break;case"source":Dr("error",h);break;case"img":case"image":case"link":Dr("error",h),Dr("load",h);break;case"details":Dr("toggle",h);break;case"input":Dr("invalid",h),wf(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Dr("invalid",h);break;case"textarea":Dr("invalid",h),Xc(h,S.value,S.defaultValue,S.children)}v=S.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||h.textContent===""+v||S.suppressHydrationWarning===!0||Jy(h.textContent,v)?(S.popover!=null&&(Dr("beforetoggle",h),Dr("toggle",h)),S.onScroll!=null&&Dr("scroll",h),S.onScrollEnd!=null&&Dr("scrollend",h),S.onClick!=null&&(h.onclick=bo),h=!0):h=!1,h||Qi(l,!0)}function bh(l){for(hi=l.return;hi;)switch(hi.tag){case 5:case 31:case 13:Ma=!1;return;case 27:case 3:Ma=!0;return;default:hi=hi.return}}function Jo(l){if(l!==hi)return!1;if(!Sr)return bh(l),Sr=!0,!1;var h=l.tag,v;if((v=h!==3&&h!==27)&&((v=h===5)&&(v=l.type,v=!(v!=="form"&&v!=="button")||hg(l.type,l.memoizedProps)),v=!v),v&&Kr&&Qi(l),bh(l),h===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Kr=Oi(l)}else if(h===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Kr=Oi(l)}else h===27?(h=Kr,Au(l.type)?(l=La,La=null,Kr=l):Kr=h):Kr=hi?zo(l.stateNode.nextSibling):null;return!0}function es(){Kr=hi=null,Sr=!1}function ts(){var l=Ps;return l!==null&&(co===null?co=l:co.push.apply(co,l),Ps=null),l}function Cs(l){Ps===null?Ps=[l]:Ps.push(l)}var Ds=Ae(null),eo=null,rs=null;function Is(l,h,v){ct(Ds,h._currentValue),h._currentValue=v}function ns(l){l._currentValue=Ds.current,qe(Ds)}function Nf(l,h,v){for(;l!==null;){var S=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),l===v)break;l=l.return}}function Ff(l,h,v,S){var z=l.child;for(z!==null&&(z.return=l);z!==null;){var j=z.dependencies;if(j!==null){var Q=z.child;j=j.firstContext;e:for(;j!==null;){var de=j;j=z;for(var Le=0;Le<h.length;Le++)if(de.context===h[Le]){j.lanes|=v,de=j.alternate,de!==null&&(de.lanes|=v),Nf(j.return,v,l),S||(Q=null);break e}j=de.next}}else if(z.tag===18){if(Q=z.return,Q===null)throw Error(a(341));Q.lanes|=v,j=Q.alternate,j!==null&&(j.lanes|=v),Nf(Q,v,l),Q=null}else Q=z.child;if(Q!==null)Q.return=z;else for(Q=z;Q!==null;){if(Q===l){Q=null;break}if(z=Q.sibling,z!==null){z.return=Q.return,Q=z;break}Q=Q.return}z=Q}}function Pa(l,h,v,S){l=null;for(var z=h,j=!1;z!==null;){if(!j){if((z.flags&524288)!==0)j=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var Q=z.alternate;if(Q===null)throw Error(a(387));if(Q=Q.memoizedProps,Q!==null){var de=z.type;Wi(z.pendingProps.value,Q.value)||(l!==null?l.push(de):l=[de])}}else if(z===Ft.current){if(Q=z.alternate,Q===null)throw Error(a(387));Q.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(l!==null?l.push(Op):l=[Op])}z=z.return}l!==null&&Ff(h,l,v,S),h.flags|=262144}function cu(l){for(l=l.firstContext;l!==null;){if(!Wi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Os(l){eo=l,rs=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function qn(l){return Uf(eo,l)}function xh(l,h){return eo===null&&Os(l),Uf(l,h)}function Uf(l,h){var v=h._currentValue;if(h={context:h,memoizedValue:v,next:null},rs===null){if(l===null)throw Error(a(308));rs=h,l.dependencies={lanes:0,firstContext:h},l.flags|=524288}else rs=rs.next=h;return v}var Hd=typeof AbortController<"u"?AbortController:function(){var l=[],h=this.signal={aborted:!1,addEventListener:function(v,S){l.push(S)}};this.abort=function(){h.aborted=!0,l.forEach(function(v){return v()})}},Am=e.unstable_scheduleCallback,Yd=e.unstable_NormalPriority,Nn={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function is(){return{controller:new Hd,data:new Map,refCount:0}}function uu(l){l.refCount--,l.refCount===0&&Am(Yd,function(){l.controller.abort()})}var Ci=null,Ca=0,lc=0,Di=null;function wy(l,h){if(Ci===null){var v=Ci=[];Ca=0,lc=Yy(),Di={status:"pending",value:void 0,then:function(S){v.push(S)}}}return Ca++,h.then(hu,hu),h}function hu(){if(--Ca===0&&Ci!==null){Di!==null&&(Di.status="fulfilled");var l=Ci;Ci=null,lc=0,Di=null;for(var h=0;h<l.length;h++)(0,l[h])()}}function wh(l,h){var v=[],S={status:"pending",value:null,reason:null,then:function(z){v.push(z)}};return l.then(function(){S.status="fulfilled",S.value=h;for(var z=0;z<v.length;z++)(0,v[z])(h)},function(z){for(S.status="rejected",S.reason=z,z=0;z<v.length;z++)(0,v[z])(void 0)}),S}var si=Ve.S;Ve.S=function(l,h){jv=ni(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&wy(l,h),si!==null&&si(l,h)};var wo=Ae(null);function Vf(){var l=wo.current;return l!==null?l:_n.pooledCache}function Gf(l,h){h===null?ct(wo,wo.current):ct(wo,h.pool)}function Mm(){var l=Vf();return l===null?null:{parent:Nn._currentValue,pool:l}}var So=Error(a(460)),bl=Error(a(474)),ea=Error(a(542)),Lt={then:function(){}};function Sh(l){return l=l.status,l==="fulfilled"||l==="rejected"}function qf(l,h,v){switch(v=l[v],v===void 0?l.push(h):v!==h&&(h.then(bo,bo),h=v),h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,$f(l),l;default:if(typeof h.status=="string")h.then(bo,bo);else{if(l=_n,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=h,l.status="pending",l.then(function(S){if(h.status==="pending"){var z=h;z.status="fulfilled",z.value=S}},function(S){if(h.status==="pending"){var z=h;z.status="rejected",z.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,$f(l),l}throw To=h,So}}function to(l){try{var h=l._init;return h(l._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(To=v,So):v}}var To=null;function fu(){if(To===null)throw Error(a(459));var l=To;return To=null,l}function $f(l){if(l===So||l===ea)throw Error(a(483))}var as=null,cc=0;function Th(l){var h=cc;return cc+=1,as===null&&(as=[]),qf(as,l,h)}function os(l,h){h=h.props.ref,l.ref=h!==void 0?h:null}function Zf(l,h){throw h.$$typeof===B?Error(a(525)):(l=Object.prototype.toString.call(h),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l)))}function Eh(l){function h($e,Ne){if(l){var tt=$e.deletions;tt===null?($e.deletions=[Ne],$e.flags|=16):tt.push(Ne)}}function v($e,Ne){if(!l)return null;for(;Ne!==null;)h($e,Ne),Ne=Ne.sibling;return null}function S($e){for(var Ne=new Map;$e!==null;)$e.key!==null?Ne.set($e.key,$e):Ne.set($e.index,$e),$e=$e.sibling;return Ne}function z($e,Ne){return $e=Aa($e,Ne),$e.index=0,$e.sibling=null,$e}function j($e,Ne,tt){return $e.index=tt,l?(tt=$e.alternate,tt!==null?(tt=tt.index,tt<Ne?($e.flags|=67108866,Ne):tt):($e.flags|=67108866,Ne)):($e.flags|=1048576,Ne)}function Q($e){return l&&$e.alternate===null&&($e.flags|=67108866),$e}function de($e,Ne,tt,bt){return Ne===null||Ne.tag!==6?(Ne=qd(tt,$e.mode,bt),Ne.return=$e,Ne):(Ne=z(Ne,tt),Ne.return=$e,Ne)}function Le($e,Ne,tt,bt){var nr=tt.type;return nr===H?gt($e,Ne,tt.props.children,bt,tt.key):Ne!==null&&(Ne.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===Ke&&to(nr)===Ne.type)?(Ne=z(Ne,tt.props),os(Ne,tt),Ne.return=$e,Ne):(Ne=Bf(tt.type,tt.key,tt.props,null,$e.mode,bt),os(Ne,tt),Ne.return=$e,Ne)}function rt($e,Ne,tt,bt){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==tt.containerInfo||Ne.stateNode.implementation!==tt.implementation?(Ne=gl(tt,$e.mode,bt),Ne.return=$e,Ne):(Ne=z(Ne,tt.children||[]),Ne.return=$e,Ne)}function gt($e,Ne,tt,bt,nr){return Ne===null||Ne.tag!==7?(Ne=ml(tt,$e.mode,bt,nr),Ne.return=$e,Ne):(Ne=z(Ne,tt),Ne.return=$e,Ne)}function Tt($e,Ne,tt){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=qd(""+Ne,$e.mode,tt),Ne.return=$e,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case G:return tt=Bf(Ne.type,Ne.key,Ne.props,null,$e.mode,tt),os(tt,Ne),tt.return=$e,tt;case Z:return Ne=gl(Ne,$e.mode,tt),Ne.return=$e,Ne;case Ke:return Ne=to(Ne),Tt($e,Ne,tt)}if(Rt(Ne)||Te(Ne))return Ne=ml(Ne,$e.mode,tt,null),Ne.return=$e,Ne;if(typeof Ne.then=="function")return Tt($e,Th(Ne),tt);if(Ne.$$typeof===fe)return Tt($e,xh($e,Ne),tt);Zf($e,Ne)}return null}function nt($e,Ne,tt,bt){var nr=Ne!==null?Ne.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return nr!==null?null:de($e,Ne,""+tt,bt);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case G:return tt.key===nr?Le($e,Ne,tt,bt):null;case Z:return tt.key===nr?rt($e,Ne,tt,bt):null;case Ke:return tt=to(tt),nt($e,Ne,tt,bt)}if(Rt(tt)||Te(tt))return nr!==null?null:gt($e,Ne,tt,bt,null);if(typeof tt.then=="function")return nt($e,Ne,Th(tt),bt);if(tt.$$typeof===fe)return nt($e,Ne,xh($e,tt),bt);Zf($e,tt)}return null}function st($e,Ne,tt,bt,nr){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return $e=$e.get(tt)||null,de(Ne,$e,""+bt,nr);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case G:return $e=$e.get(bt.key===null?tt:bt.key)||null,Le(Ne,$e,bt,nr);case Z:return $e=$e.get(bt.key===null?tt:bt.key)||null,rt(Ne,$e,bt,nr);case Ke:return bt=to(bt),st($e,Ne,tt,bt,nr)}if(Rt(bt)||Te(bt))return $e=$e.get(tt)||null,gt(Ne,$e,bt,nr,null);if(typeof bt.then=="function")return st($e,Ne,tt,Th(bt),nr);if(bt.$$typeof===fe)return st($e,Ne,tt,xh(Ne,bt),nr);Zf(Ne,bt)}return null}function Zt($e,Ne,tt,bt){for(var nr=null,Yr=null,Wt=Ne,yr=Ne=0,or=null;Wt!==null&&yr<tt.length;yr++){Wt.index>yr?(or=Wt,Wt=null):or=Wt.sibling;var Nr=nt($e,Wt,tt[yr],bt);if(Nr===null){Wt===null&&(Wt=or);break}l&&Wt&&Nr.alternate===null&&h($e,Wt),Ne=j(Nr,Ne,yr),Yr===null?nr=Nr:Yr.sibling=Nr,Yr=Nr,Wt=or}if(yr===tt.length)return v($e,Wt),Sr&&Ms($e,yr),nr;if(Wt===null){for(;yr<tt.length;yr++)Wt=Tt($e,tt[yr],bt),Wt!==null&&(Ne=j(Wt,Ne,yr),Yr===null?nr=Wt:Yr.sibling=Wt,Yr=Wt);return Sr&&Ms($e,yr),nr}for(Wt=S(Wt);yr<tt.length;yr++)or=st(Wt,$e,yr,tt[yr],bt),or!==null&&(l&&or.alternate!==null&&Wt.delete(or.key===null?yr:or.key),Ne=j(or,Ne,yr),Yr===null?nr=or:Yr.sibling=or,Yr=or);return l&&Wt.forEach(function(Oc){return h($e,Oc)}),Sr&&Ms($e,yr),nr}function lr($e,Ne,tt,bt){if(tt==null)throw Error(a(151));for(var nr=null,Yr=null,Wt=Ne,yr=Ne=0,or=null,Nr=tt.next();Wt!==null&&!Nr.done;yr++,Nr=tt.next()){Wt.index>yr?(or=Wt,Wt=null):or=Wt.sibling;var Oc=nt($e,Wt,Nr.value,bt);if(Oc===null){Wt===null&&(Wt=or);break}l&&Wt&&Oc.alternate===null&&h($e,Wt),Ne=j(Oc,Ne,yr),Yr===null?nr=Oc:Yr.sibling=Oc,Yr=Oc,Wt=or}if(Nr.done)return v($e,Wt),Sr&&Ms($e,yr),nr;if(Wt===null){for(;!Nr.done;yr++,Nr=tt.next())Nr=Tt($e,Nr.value,bt),Nr!==null&&(Ne=j(Nr,Ne,yr),Yr===null?nr=Nr:Yr.sibling=Nr,Yr=Nr);return Sr&&Ms($e,yr),nr}for(Wt=S(Wt);!Nr.done;yr++,Nr=tt.next())Nr=st(Wt,$e,yr,Nr.value,bt),Nr!==null&&(l&&Nr.alternate!==null&&Wt.delete(Nr.key===null?yr:Nr.key),Ne=j(Nr,Ne,yr),Yr===null?nr=Nr:Yr.sibling=Nr,Yr=Nr);return l&&Wt.forEach(function(S_){return h($e,S_)}),Sr&&Ms($e,yr),nr}function rn($e,Ne,tt,bt){if(typeof tt=="object"&&tt!==null&&tt.type===H&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case G:e:{for(var nr=tt.key;Ne!==null;){if(Ne.key===nr){if(nr=tt.type,nr===H){if(Ne.tag===7){v($e,Ne.sibling),bt=z(Ne,tt.props.children),bt.return=$e,$e=bt;break e}}else if(Ne.elementType===nr||typeof nr=="object"&&nr!==null&&nr.$$typeof===Ke&&to(nr)===Ne.type){v($e,Ne.sibling),bt=z(Ne,tt.props),os(bt,tt),bt.return=$e,$e=bt;break e}v($e,Ne);break}else h($e,Ne);Ne=Ne.sibling}tt.type===H?(bt=ml(tt.props.children,$e.mode,bt,tt.key),bt.return=$e,$e=bt):(bt=Bf(tt.type,tt.key,tt.props,null,$e.mode,bt),os(bt,tt),bt.return=$e,$e=bt)}return Q($e);case Z:e:{for(nr=tt.key;Ne!==null;){if(Ne.key===nr)if(Ne.tag===4&&Ne.stateNode.containerInfo===tt.containerInfo&&Ne.stateNode.implementation===tt.implementation){v($e,Ne.sibling),bt=z(Ne,tt.children||[]),bt.return=$e,$e=bt;break e}else{v($e,Ne);break}else h($e,Ne);Ne=Ne.sibling}bt=gl(tt,$e.mode,bt),bt.return=$e,$e=bt}return Q($e);case Ke:return tt=to(tt),rn($e,Ne,tt,bt)}if(Rt(tt))return Zt($e,Ne,tt,bt);if(Te(tt)){if(nr=Te(tt),typeof nr!="function")throw Error(a(150));return tt=nr.call(tt),lr($e,Ne,tt,bt)}if(typeof tt.then=="function")return rn($e,Ne,Th(tt),bt);if(tt.$$typeof===fe)return rn($e,Ne,xh($e,tt),bt);Zf($e,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,Ne!==null&&Ne.tag===6?(v($e,Ne.sibling),bt=z(Ne,tt),bt.return=$e,$e=bt):(v($e,Ne),bt=qd(tt,$e.mode,bt),bt.return=$e,$e=bt),Q($e)):v($e,Ne)}return function($e,Ne,tt,bt){try{cc=0;var nr=rn($e,Ne,tt,bt);return as=null,nr}catch(Wt){if(Wt===So||Wt===ea)throw Wt;var Yr=Ea(29,Wt,null,$e.mode);return Yr.lanes=bt,Yr.return=$e,Yr}}}var ss=Eh(!0),Xd=Eh(!1),ls=!1;function Hf(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ah(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function cs(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function zs(l,h,v){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(en&2)!==0){var z=S.pending;return z===null?h.next=h:(h.next=z.next,z.next=h),S.pending=h,h=ou(l),Gd(l,null,v),h}return _h(l,S,h,v),ou(l)}function ro(l,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194048)!==0)){var S=h.lanes;S&=l.pendingLanes,v|=S,h.lanes=v,xn(l,v)}}function Vr(l,h){var v=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var z=null,j=null;if(v=v.firstBaseUpdate,v!==null){do{var Q={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};j===null?z=j=Q:j=j.next=Q,v=v.next}while(v!==null);j===null?z=j=h:j=j.next=h}else z=j=h;v={baseState:S.baseState,firstBaseUpdate:z,lastBaseUpdate:j,shared:S.shared,callbacks:S.callbacks},l.updateQueue=v;return}l=v.lastBaseUpdate,l===null?v.firstBaseUpdate=h:l.next=h,v.lastBaseUpdate=h}var Wd=!1;function ks(){if(Wd){var l=Di;if(l!==null)throw l}}function xl(l,h,v,S){Wd=!1;var z=l.updateQueue;ls=!1;var j=z.firstBaseUpdate,Q=z.lastBaseUpdate,de=z.shared.pending;if(de!==null){z.shared.pending=null;var Le=de,rt=Le.next;Le.next=null,Q===null?j=rt:Q.next=rt,Q=Le;var gt=l.alternate;gt!==null&&(gt=gt.updateQueue,de=gt.lastBaseUpdate,de!==Q&&(de===null?gt.firstBaseUpdate=rt:de.next=rt,gt.lastBaseUpdate=Le))}if(j!==null){var Tt=z.baseState;Q=0,gt=rt=Le=null,de=j;do{var nt=de.lane&-536870913,st=nt!==de.lane;if(st?(Cr&nt)===nt:(S&nt)===nt){nt!==0&&nt===lc&&(Wd=!0),gt!==null&&(gt=gt.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var Zt=l,lr=de;nt=h;var rn=v;switch(lr.tag){case 1:if(Zt=lr.payload,typeof Zt=="function"){Tt=Zt.call(rn,Tt,nt);break e}Tt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=lr.payload,nt=typeof Zt=="function"?Zt.call(rn,Tt,nt):Zt,nt==null)break e;Tt=I({},Tt,nt);break e;case 2:ls=!0}}nt=de.callback,nt!==null&&(l.flags|=64,st&&(l.flags|=8192),st=z.callbacks,st===null?z.callbacks=[nt]:st.push(nt))}else st={lane:nt,tag:de.tag,payload:de.payload,callback:de.callback,next:null},gt===null?(rt=gt=st,Le=Tt):gt=gt.next=st,Q|=nt;if(de=de.next,de===null){if(de=z.shared.pending,de===null)break;st=de,de=st.next,st.next=null,z.lastBaseUpdate=st,z.shared.pending=null}}while(!0);gt===null&&(Le=Tt),z.baseState=Le,z.firstBaseUpdate=rt,z.lastBaseUpdate=gt,j===null&&(z.shared.lanes=0),Sc|=Q,l.lanes=Q,l.memoizedState=Tt}}function Mh(l,h){if(typeof l!="function")throw Error(a(191,l));l.call(h)}function Yf(l,h){var v=l.callbacks;if(v!==null)for(l.callbacks=null,l=0;l<v.length;l++)Mh(v[l],h)}var uc=Ae(null),Ph=Ae(0);function Kd(l,h){l=wc,ct(Ph,l),ct(uc,h),wc=l|h.baseLanes}function Da(){ct(Ph,wc),ct(uc,uc.current)}function hc(){wc=Ph.current,qe(uc),qe(Ph)}var Bt=Ae(null),Gt=null;function no(l){var h=l.alternate;ct(On,On.current&1),ct(Bt,l),Gt===null&&(h===null||uc.current!==null||h.memoizedState!==null)&&(Gt=l)}function du(l){ct(On,On.current),ct(Bt,l),Gt===null&&(Gt=l)}function Ch(l){l.tag===22?(ct(On,On.current),ct(Bt,l),Gt===null&&(Gt=l)):Fn()}function Fn(){ct(On,On.current),ct(Bt,Bt.current)}function Sn(l){qe(Bt),Gt===l&&(Gt=null),qe(On)}var On=Ae(0);function Dh(l){for(var h=l;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||ia(v)||En(v)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Rs=0,br=null,Br=null,vr=null,yn=!1,io=!1,Eo=!1,fc=0,dc=0,Ls=null,Qd=0;function cn(){throw Error(a(321))}function Ao(l,h){if(h===null)return!1;for(var v=0;v<h.length&&v<l.length;v++)if(!Wi(l[v],h[v]))return!1;return!0}function pu(l,h,v,S,z,j){return Rs=j,br=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Ve.H=l===null||l.memoizedState===null?Jr:$n,Eo=!1,j=v(S,z),Eo=!1,io&&(j=Ih(h,v,S,z)),mu(l),j}function mu(l){Ve.H=Gr;var h=Br!==null&&Br.next!==null;if(Rs=0,vr=Br=br=null,yn=!1,dc=0,Ls=null,h)throw Error(a(300));l===null||pi||(l=l.dependencies,l!==null&&cu(l)&&(pi=!0))}function Ih(l,h,v,S){br=l;var z=0;do{if(io&&(Ls=null),dc=0,io=!1,25<=z)throw Error(a(301));if(z+=1,vr=Br=null,l.updateQueue!=null){var j=l.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}Ve.H=Qn,j=h(v,S)}while(io);return j}function Oh(){var l=Ve.H,h=l.useState()[0];return h=typeof h.then=="function"?pc(h):h,l=l.useState()[0],(Br!==null?Br.memoizedState:null)!==l&&(br.flags|=1024),h}function zh(){var l=fc!==0;return fc=0,l}function wl(l,h,v){h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~v}function Bs(l){if(yn){for(l=l.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}yn=!1}Rs=0,vr=Br=br=null,io=!1,dc=fc=0,Ls=null}function Ti(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?br.memoizedState=vr=l:vr=vr.next=l,vr}function vn(){if(Br===null){var l=br.alternate;l=l!==null?l.memoizedState:null}else l=Br.next;var h=vr===null?br.memoizedState:vr.next;if(h!==null)vr=h,Br=l;else{if(l===null)throw br.alternate===null?Error(a(467)):Error(a(310));Br=l,l={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},vr===null?br.memoizedState=vr=l:vr=vr.next=l}return vr}function us(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(l){var h=dc;return dc+=1,Ls===null&&(Ls=[]),l=qf(Ls,l,h),h=br,(vr===null?h.memoizedState:vr.next)===null&&(h=h.alternate,Ve.H=h===null||h.memoizedState===null?Jr:$n),l}function mc(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return pc(l);if(l.$$typeof===fe)return qn(l)}throw Error(a(438,String(l)))}function gu(l){var h=null,v=br.updateQueue;if(v!==null&&(h=v.memoCache),h==null){var S=br.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(z){return z.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),v===null&&(v=us(),br.updateQueue=v),v.memoCache=h,v=h.data[h.index],v===void 0)for(v=h.data[h.index]=Array(l),S=0;S<l;S++)v[S]=zt;return h.index++,v}function Mo(l,h){return typeof h=="function"?h(l):h}function w(l){var h=vn();return n(h,Br,l)}function n(l,h,v){var S=l.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=v;var z=l.baseQueue,j=S.pending;if(j!==null){if(z!==null){var Q=z.next;z.next=j.next,j.next=Q}h.baseQueue=z=j,S.pending=null}if(j=l.baseState,z===null)l.memoizedState=j;else{h=z.next;var de=Q=null,Le=null,rt=h,gt=!1;do{var Tt=rt.lane&-536870913;if(Tt!==rt.lane?(Cr&Tt)===Tt:(Rs&Tt)===Tt){var nt=rt.revertLane;if(nt===0)Le!==null&&(Le=Le.next={lane:0,revertLane:0,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),Tt===lc&&(gt=!0);else if((Rs&nt)===nt){rt=rt.next,nt===lc&&(gt=!0);continue}else Tt={lane:0,revertLane:rt.revertLane,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Le===null?(de=Le=Tt,Q=j):Le=Le.next=Tt,br.lanes|=nt,Sc|=nt;Tt=rt.action,Eo&&v(j,Tt),j=rt.hasEagerState?rt.eagerState:v(j,Tt)}else nt={lane:Tt,revertLane:rt.revertLane,gesture:rt.gesture,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Le===null?(de=Le=nt,Q=j):Le=Le.next=nt,br.lanes|=Tt,Sc|=Tt;rt=rt.next}while(rt!==null&&rt!==h);if(Le===null?Q=j:Le.next=de,!Wi(j,l.memoizedState)&&(pi=!0,gt&&(v=Di,v!==null)))throw v;l.memoizedState=j,l.baseState=Q,l.baseQueue=Le,S.lastRenderedState=j}return z===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function u(l){var h=vn(),v=h.queue;if(v===null)throw Error(a(311));v.lastRenderedReducer=l;var S=v.dispatch,z=v.pending,j=h.memoizedState;if(z!==null){v.pending=null;var Q=z=z.next;do j=l(j,Q.action),Q=Q.next;while(Q!==z);Wi(j,h.memoizedState)||(pi=!0),h.memoizedState=j,h.baseQueue===null&&(h.baseState=j),v.lastRenderedState=j}return[j,S]}function p(l,h,v){var S=br,z=vn(),j=Sr;if(j){if(v===void 0)throw Error(a(407));v=v()}else v=h();var Q=!Wi((Br||z).memoizedState,v);if(Q&&(z.memoizedState=v,pi=!0),z=z.queue,Je(M.bind(null,S,z,l),[l]),z.getSnapshot!==h||Q||vr!==null&&vr.memoizedState.tag&1){if(S.flags|=2048,Se(9,{destroy:void 0},T.bind(null,S,z,v,h),null),_n===null)throw Error(a(349));j||(Rs&127)!==0||_(S,h,v)}return v}function _(l,h,v){l.flags|=16384,l={getSnapshot:h,value:v},h=br.updateQueue,h===null?(h=us(),br.updateQueue=h,h.stores=[l]):(v=h.stores,v===null?h.stores=[l]:v.push(l))}function T(l,h,v,S){h.value=v,h.getSnapshot=S,O(h)&&R(l)}function M(l,h,v){return v(function(){O(h)&&R(l)})}function O(l){var h=l.getSnapshot;l=l.value;try{var v=h();return!Wi(l,v)}catch{return!0}}function R(l){var h=Ja(l,2);h!==null&&ho(h,l,2)}function V(l){var h=Ti();if(typeof l=="function"){var v=l;if(l=v(),Eo){we(!0);try{v()}finally{we(!1)}}}return h.memoizedState=h.baseState=l,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:l},h}function q(l,h,v,S){return l.baseState=v,n(l,Br,typeof S=="function"?S:Mo)}function K(l,h,v,S,z){if(Ia(l))throw Error(a(485));if(l=h.action,l!==null){var j={payload:z,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){j.listeners.push(Q)}};Ve.T!==null?v(!0):j.isTransition=!1,S(j),v=h.pending,v===null?(j.next=h.pending=j,W(h,j)):(j.next=v.next,h.pending=v.next=j)}}function W(l,h){var v=h.action,S=h.payload,z=l.state;if(h.isTransition){var j=Ve.T,Q={};Ve.T=Q;try{var de=v(z,S),Le=Ve.S;Le!==null&&Le(Q,de),ne(l,h,de)}catch(rt){pe(l,h,rt)}finally{j!==null&&Q.types!==null&&(j.types=Q.types),Ve.T=j}}else try{j=v(z,S),ne(l,h,j)}catch(rt){pe(l,h,rt)}}function ne(l,h,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(S){le(l,h,S)},function(S){return pe(l,h,S)}):le(l,h,v)}function le(l,h,v){h.status="fulfilled",h.value=v,ye(h),l.state=v,h=l.pending,h!==null&&(v=h.next,v===h?l.pending=null:(v=v.next,h.next=v,W(l,v)))}function pe(l,h,v){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=v,ye(h),h=h.next;while(h!==S)}l.action=null}function ye(l){l=l.listeners;for(var h=0;h<l.length;h++)(0,l[h])()}function ge(l,h){return h}function xe(l,h){if(Sr){var v=_n.formState;if(v!==null){e:{var S=br;if(Sr){if(Kr){t:{for(var z=Kr,j=Ma;z.nodeType!==8;){if(!j){z=null;break t}if(z=zo(z.nextSibling),z===null){z=null;break t}}j=z.data,z=j==="F!"||j==="F"?z:null}if(z){Kr=zo(z.nextSibling),S=z.data==="F!";break e}}Qi(S)}S=!1}S&&(h=v[0])}}return v=Ti(),v.memoizedState=v.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ge,lastRenderedState:h},v.queue=S,v=yu.bind(null,br,S),S.dispatch=v,S=V(!1),j=ra.bind(null,br,!1,S.queue),S=Ti(),z={state:h,dispatch:null,action:l,pending:null},S.queue=z,v=K.bind(null,br,z,j,v),z.dispatch=v,S.memoizedState=l,[h,v,!1]}function De(l){var h=vn();return be(h,Br,l)}function be(l,h,v){if(h=n(l,h,ge)[0],l=w(Mo)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=pc(h)}catch(Q){throw Q===So?ea:Q}else S=h;h=vn();var z=h.queue,j=z.dispatch;return v!==h.memoizedState&&(br.flags|=2048,Se(9,{destroy:void 0},Ce.bind(null,z,v),null)),[S,j,l]}function Ce(l,h){l.action=h}function ke(l){var h=vn(),v=Br;if(v!==null)return be(h,v,l);vn(),h=h.memoizedState,v=vn();var S=v.queue.dispatch;return v.memoizedState=l,[h,S,!1]}function Se(l,h,v,S){return l={tag:l,create:v,deps:S,inst:h,next:null},h=br.updateQueue,h===null&&(h=us(),br.updateQueue=h),v=h.lastEffect,v===null?h.lastEffect=l.next=l:(S=v.next,v.next=l,l.next=S,h.lastEffect=l),l}function je(){return vn().memoizedState}function et(l,h,v,S){var z=Ti();br.flags|=l,z.memoizedState=Se(1|h,{destroy:void 0},v,S===void 0?null:S)}function Xe(l,h,v,S){var z=vn();S=S===void 0?null:S;var j=z.memoizedState.inst;Br!==null&&S!==null&&Ao(S,Br.memoizedState.deps)?z.memoizedState=Se(h,j,v,S):(br.flags|=l,z.memoizedState=Se(1|h,j,v,S))}function Qe(l,h){et(8390656,8,l,h)}function Je(l,h){Xe(2048,8,l,h)}function Ct(l){br.flags|=4;var h=br.updateQueue;if(h===null)h=us(),br.updateQueue=h,h.events=[l];else{var v=h.events;v===null?h.events=[l]:v.push(l)}}function Dt(l){var h=vn().memoizedState;return Ct({ref:h,nextImpl:l}),function(){if((en&2)!==0)throw Error(a(440));return h.impl.apply(void 0,arguments)}}function vt(l,h){return Xe(4,2,l,h)}function kt(l,h){return Xe(4,4,l,h)}function sr(l,h){if(typeof h=="function"){l=l();var v=h(l);return function(){typeof v=="function"?v():h(null)}}if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function jr(l,h,v){v=v!=null?v.concat([l]):null,Xe(4,4,sr.bind(null,h,l),v)}function nn(){}function Qr(l,h){var v=vn();h=h===void 0?null:h;var S=v.memoizedState;return h!==null&&Ao(h,S[1])?S[0]:(v.memoizedState=[l,h],l)}function un(l,h){var v=vn();h=h===void 0?null:h;var S=v.memoizedState;if(h!==null&&Ao(h,S[1]))return S[0];if(S=l(),Eo){we(!0);try{l()}finally{we(!1)}}return v.memoizedState=[S,h],S}function Zr(l,h,v){return v===void 0||(Rs&1073741824)!==0&&(Cr&261930)===0?l.memoizedState=h:(l.memoizedState=v,l=Fv(),br.lanes|=l,Sc|=l,v)}function Tn(l,h,v,S){return Wi(v,h)?v:uc.current!==null?(l=Zr(l,v,S),Wi(l,h)||(pi=!0),l):(Rs&42)===0||(Rs&1073741824)!==0&&(Cr&261930)===0?(pi=!0,l.memoizedState=v):(l=Fv(),br.lanes|=l,Sc|=l,h)}function hn(l,h,v,S,z){var j=it.p;it.p=j!==0&&8>j?j:8;var Q=Ve.T,de={};Ve.T=de,ra(l,!1,h,v);try{var Le=z(),rt=Ve.S;if(rt!==null&&rt(de,Le),Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var gt=wh(Le,S);Co(l,h,gt,uo(l))}else Co(l,h,S,uo(l))}catch(Tt){Co(l,h,{then:function(){},status:"rejected",reason:Tt},uo())}finally{it.p=j,Q!==null&&de.types!==null&&(Q.types=de.types),Ve.T=Q}}function fi(){}function zn(l,h,v,S){if(l.tag!==5)throw Error(a(476));var z=kn(l).queue;hn(l,z,h,Mt,v===null?fi:function(){return di(l),v(S)})}function kn(l){var h=l.memoizedState;if(h!==null)return h;h={memoizedState:Mt,baseState:Mt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:Mt},next:null};var v={};return h.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:v},next:null},l.memoizedState=h,l=l.alternate,l!==null&&(l.memoizedState=h),h}function di(l){var h=kn(l);h.next===null&&(h=l.alternate.memoizedState),Co(l,h.next.queue,{},uo())}function hs(){return qn(Op)}function fs(){return vn().memoizedState}function Po(){return vn().memoizedState}function ta(l){for(var h=l.return;h!==null;){switch(h.tag){case 24:case 3:var v=uo();l=cs(v);var S=zs(h,l,v);S!==null&&(ho(S,h,v),ro(S,h,v)),h={cache:is()},l.payload=h;return}h=h.return}}function gc(l,h,v){var S=uo();v={lane:S,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Ia(l)?ao(h,v):(v=pl(l,h,v,S),v!==null&&(ho(v,l,S),oo(v,h,S)))}function yu(l,h,v){var S=uo();Co(l,h,v,S)}function Co(l,h,v,S){var z={lane:S,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(Ia(l))ao(h,z);else{var j=l.alternate;if(l.lanes===0&&(j===null||j.lanes===0)&&(j=h.lastRenderedReducer,j!==null))try{var Q=h.lastRenderedState,de=j(Q,v);if(z.hasEagerState=!0,z.eagerState=de,Wi(de,Q))return _h(l,h,z,0),_n===null&&ac(),!1}catch{}if(v=pl(l,h,z,S),v!==null)return ho(v,l,S),oo(v,h,S),!0}return!1}function ra(l,h,v,S){if(S={lane:2,revertLane:Yy(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Ia(l)){if(h)throw Error(a(479))}else h=pl(l,v,S,2),h!==null&&ho(h,l,2)}function Ia(l){var h=l.alternate;return l===br||h!==null&&h===br}function ao(l,h){io=yn=!0;var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}function oo(l,h,v){if((v&4194048)!==0){var S=h.lanes;S&=l.pendingLanes,v|=S,h.lanes=v,xn(l,v)}}var Gr={readContext:qn,use:mc,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};Gr.useEffectEvent=cn;var Jr={readContext:qn,use:mc,useCallback:function(l,h){return Ti().memoizedState=[l,h===void 0?null:h],l},useContext:qn,useEffect:Qe,useImperativeHandle:function(l,h,v){v=v!=null?v.concat([l]):null,et(4194308,4,sr.bind(null,h,l),v)},useLayoutEffect:function(l,h){return et(4194308,4,l,h)},useInsertionEffect:function(l,h){et(4,2,l,h)},useMemo:function(l,h){var v=Ti();h=h===void 0?null:h;var S=l();if(Eo){we(!0);try{l()}finally{we(!1)}}return v.memoizedState=[S,h],S},useReducer:function(l,h,v){var S=Ti();if(v!==void 0){var z=v(h);if(Eo){we(!0);try{v(h)}finally{we(!1)}}}else z=h;return S.memoizedState=S.baseState=z,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:z},S.queue=l,l=l.dispatch=gc.bind(null,br,l),[S.memoizedState,l]},useRef:function(l){var h=Ti();return l={current:l},h.memoizedState=l},useState:function(l){l=V(l);var h=l.queue,v=yu.bind(null,br,h);return h.dispatch=v,[l.memoizedState,v]},useDebugValue:nn,useDeferredValue:function(l,h){var v=Ti();return Zr(v,l,h)},useTransition:function(){var l=V(!1);return l=hn.bind(null,br,l.queue,!0,!1),Ti().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,h,v){var S=br,z=Ti();if(Sr){if(v===void 0)throw Error(a(407));v=v()}else{if(v=h(),_n===null)throw Error(a(349));(Cr&127)!==0||_(S,h,v)}z.memoizedState=v;var j={value:v,getSnapshot:h};return z.queue=j,Qe(M.bind(null,S,j,l),[l]),S.flags|=2048,Se(9,{destroy:void 0},T.bind(null,S,j,v,h),null),v},useId:function(){var l=Ti(),h=_n.identifierPrefix;if(Sr){var v=Ki,S=Qo;v=(S&~(1<<32-Oe(S)-1)).toString(32)+v,h="_"+h+"R_"+v,v=fc++,0<v&&(h+="H"+v.toString(32)),h+="_"}else v=Qd++,h="_"+h+"r_"+v.toString(32)+"_";return l.memoizedState=h},useHostTransitionStatus:hs,useFormState:xe,useActionState:xe,useOptimistic:function(l){var h=Ti();h.memoizedState=h.baseState=l;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=v,h=ra.bind(null,br,!0,v),v.dispatch=h,[l,h]},useMemoCache:gu,useCacheRefresh:function(){return Ti().memoizedState=ta.bind(null,br)},useEffectEvent:function(l){var h=Ti(),v={impl:l};return h.memoizedState=v,function(){if((en&2)!==0)throw Error(a(440));return v.impl.apply(void 0,arguments)}}},$n={readContext:qn,use:mc,useCallback:Qr,useContext:qn,useEffect:Je,useImperativeHandle:jr,useInsertionEffect:vt,useLayoutEffect:kt,useMemo:un,useReducer:w,useRef:je,useState:function(){return w(Mo)},useDebugValue:nn,useDeferredValue:function(l,h){var v=vn();return Tn(v,Br.memoizedState,l,h)},useTransition:function(){var l=w(Mo)[0],h=vn().memoizedState;return[typeof l=="boolean"?l:pc(l),h]},useSyncExternalStore:p,useId:fs,useHostTransitionStatus:hs,useFormState:De,useActionState:De,useOptimistic:function(l,h){var v=vn();return q(v,Br,l,h)},useMemoCache:gu,useCacheRefresh:Po};$n.useEffectEvent=Dt;var Qn={readContext:qn,use:mc,useCallback:Qr,useContext:qn,useEffect:Je,useImperativeHandle:jr,useInsertionEffect:vt,useLayoutEffect:kt,useMemo:un,useReducer:u,useRef:je,useState:function(){return u(Mo)},useDebugValue:nn,useDeferredValue:function(l,h){var v=vn();return Br===null?Zr(v,l,h):Tn(v,Br.memoizedState,l,h)},useTransition:function(){var l=u(Mo)[0],h=vn().memoizedState;return[typeof l=="boolean"?l:pc(l),h]},useSyncExternalStore:p,useId:fs,useHostTransitionStatus:hs,useFormState:ke,useActionState:ke,useOptimistic:function(l,h){var v=vn();return Br!==null?q(v,Br,l,h):(v.baseState=l,[l,v.queue.dispatch])},useMemoCache:gu,useCacheRefresh:Po};Qn.useEffectEvent=Dt;function Xf(l,h,v,S){h=l.memoizedState,v=v(S,h),v=v==null?h:I({},h,v),l.memoizedState=v,l.lanes===0&&(l.updateQueue.baseState=v)}var Wf={enqueueSetState:function(l,h,v){l=l._reactInternals;var S=uo(),z=cs(S);z.payload=h,v!=null&&(z.callback=v),h=zs(l,z,S),h!==null&&(ho(h,l,S),ro(h,l,S))},enqueueReplaceState:function(l,h,v){l=l._reactInternals;var S=uo(),z=cs(S);z.tag=1,z.payload=h,v!=null&&(z.callback=v),h=zs(l,z,S),h!==null&&(ho(h,l,S),ro(h,l,S))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var v=uo(),S=cs(v);S.tag=2,h!=null&&(S.callback=h),h=zs(l,S,v),h!==null&&(ho(h,l,v),ro(h,l,v))}};function Sl(l,h,v,S,z,j,Q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,j,Q):h.prototype&&h.prototype.isPureReactComponent?!dl(v,S)||!dl(z,j):!0}function Pm(l,h,v,S){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,S),h.state!==l&&Wf.enqueueReplaceState(h,h.state,null)}function Tl(l,h){var v=h;if("ref"in h){v={};for(var S in h)S!=="ref"&&(v[S]=h[S])}if(l=l.defaultProps){v===h&&(v=I({},v));for(var z in l)v[z]===void 0&&(v[z]=l[z])}return v}function Kf(l){Wo(l)}function js(l){console.error(l)}function Ns(l){Wo(l)}function Do(l,h){try{var v=l.onUncaughtError;v(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function Qf(l,h,v){try{var S=l.onCaughtError;S(v.value,{componentStack:v.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function kh(l,h,v){return v=cs(v),v.tag=3,v.payload={element:null},v.callback=function(){Do(l,h)},v}function Rh(l){return l=cs(l),l.tag=3,l}function Lh(l,h,v,S){var z=v.type.getDerivedStateFromError;if(typeof z=="function"){var j=S.value;l.payload=function(){return z(j)},l.callback=function(){Qf(h,v,S)}}var Q=v.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(l.callback=function(){Qf(h,v,S),typeof z!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var de=S.stack;this.componentDidCatch(S.value,{componentStack:de!==null?de:""})})}function Cm(l,h,v,S,z){if(v.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=v.alternate,h!==null&&Pa(h,v,z,!0),v=Bt.current,v!==null){switch(v.tag){case 31:case 13:return Gt===null?yp():v.alternate===null&&Zn===0&&(Zn=3),v.flags&=-257,v.flags|=65536,v.lanes=z,S===Lt?v.flags|=16384:(h=v.updateQueue,h===null?v.updateQueue=new Set([S]):h.add(S),eg(l,S,z)),!1;case 22:return v.flags|=65536,S===Lt?v.flags|=16384:(h=v.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},v.updateQueue=h):(v=h.retryQueue,v===null?h.retryQueue=new Set([S]):v.add(S)),eg(l,S,z)),!1}throw Error(a(435,v.tag))}return eg(l,S,z),yp(),!1}if(Sr)return h=Bt.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=z,S!==wn&&(l=Error(a(422),{cause:S}),Cs(Vi(l,v)))):(S!==wn&&(h=Error(a(423),{cause:S}),Cs(Vi(h,v))),l=l.current.alternate,l.flags|=65536,z&=-z,l.lanes|=z,S=Vi(S,v),z=kh(l.stateNode,S,z),Vr(l,z),Zn!==4&&(Zn=2)),!1;var j=Error(a(520),{cause:S});if(j=Vi(j,v),dp===null?dp=[j]:dp.push(j),Zn!==4&&(Zn=2),h===null)return!0;S=Vi(S,v),v=h;do{switch(v.tag){case 3:return v.flags|=65536,l=z&-z,v.lanes|=l,l=kh(v.stateNode,S,l),Vr(v,l),!1;case 1:if(h=v.type,j=v.stateNode,(v.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Tc===null||!Tc.has(j))))return v.flags|=65536,z&=-z,v.lanes|=z,z=Rh(z),Lh(z,l,v,S),Vr(v,z),!1}v=v.return}while(v!==null);return!1}var Dm=Error(a(461)),pi=!1;function Ei(l,h,v,S){h.child=l===null?Xd(h,null,v,S):ss(h,l.child,v,S)}function Sv(l,h,v,S,z){v=v.render;var j=h.ref;if("ref"in S){var Q={};for(var de in S)de!=="ref"&&(Q[de]=S[de])}else Q=S;return Os(h),S=pu(l,h,v,Q,j,z),de=zh(),l!==null&&!pi?(wl(l,h,z),Al(l,h,z)):(Sr&&de&&sc(h),h.flags|=1,Ei(l,h,S,z),h.child)}function Im(l,h,v,S,z){if(l===null){var j=v.type;return typeof j=="function"&&!Lf(j)&&j.defaultProps===void 0&&v.compare===null?(h.tag=15,h.type=j,Sy(l,h,j,S,z)):(l=Bf(v.type,null,S,h,h.mode,z),l.ref=h.ref,l.return=h,h.child=l)}if(j=l.child,!tp(l,z)){var Q=j.memoizedProps;if(v=v.compare,v=v!==null?v:dl,v(Q,S)&&l.ref===h.ref)return Al(l,h,z)}return h.flags|=1,l=Aa(j,S),l.ref=h.ref,l.return=h,h.child=l}function Sy(l,h,v,S,z){if(l!==null){var j=l.memoizedProps;if(dl(j,S)&&l.ref===h.ref)if(pi=!1,h.pendingProps=S=j,tp(l,z))(l.flags&131072)!==0&&(pi=!0);else return h.lanes=l.lanes,Al(l,h,z)}return Ey(l,h,v,S,z)}function Ty(l,h,v,S){var z=S.children,j=l!==null?l.memoizedState:null;if(l===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(j=j!==null?j.baseLanes|v:v,l!==null){for(S=h.child=l.child,z=0;S!==null;)z=z|S.lanes|S.childLanes,S=S.sibling;S=z&~j}else S=0,h.child=null;return Tv(l,h,j,v,S)}if((v&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},l!==null&&Gf(h,j!==null?j.cachePool:null),j!==null?Kd(h,j):Da(),Ch(h);else return S=h.lanes=536870912,Tv(l,h,j!==null?j.baseLanes|v:v,v,S)}else j!==null?(Gf(h,j.cachePool),Kd(h,j),Fn(),h.memoizedState=null):(l!==null&&Gf(h,null),Da(),Fn());return Ei(l,h,z,v),h.child}function El(l,h){return l!==null&&l.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Tv(l,h,v,S,z){var j=Vf();return j=j===null?null:{parent:Nn._currentValue,pool:j},h.memoizedState={baseLanes:v,cachePool:j},l!==null&&Gf(h,null),Da(),Ch(h),l!==null&&Pa(l,h,S,!0),h.childLanes=z,null}function yc(l,h){return h=Lm({mode:h.mode,children:h.children},l.mode),h.ref=l.ref,l.child=h,h.return=l,h}function Jd(l,h,v){return ss(h,l.child,null,v),l=yc(h,h.pendingProps),l.flags|=2,Sn(h),h.memoizedState=null,l}function Om(l,h,v){var S=h.pendingProps,z=(h.flags&128)!==0;if(h.flags&=-129,l===null){if(Sr){if(S.mode==="hidden")return l=yc(h,S),h.lanes=536870912,El(null,l);if(du(h),(l=Kr)?(l=Mu(l,Ma),l=l!==null&&l.data==="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:Ko!==null?{id:Qo,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},v=jf(l),v.return=h,h.child=v,hi=h,Kr=null)):l=null,l===null)throw Qi(h);return h.lanes=536870912,null}return yc(h,S)}var j=l.memoizedState;if(j!==null){var Q=j.dehydrated;if(du(h),z)if(h.flags&256)h.flags&=-257,h=Jd(l,h,v);else if(h.memoizedState!==null)h.child=l.child,h.flags|=128,h=null;else throw Error(a(558));else if(pi||Pa(l,h,v,!1),z=(v&l.childLanes)!==0,pi||z){if(S=_n,S!==null&&(Q=Si(S,v),Q!==0&&Q!==j.retryLane))throw j.retryLane=Q,Ja(l,Q),ho(S,l,Q),Dm;yp(),h=Jd(l,h,v)}else l=j.treeContext,Kr=zo(Q.nextSibling),hi=h,Sr=!0,Ps=null,Ma=!1,l!==null&&Zd(h,l),h=yc(h,S),h.flags|=4096;return h}return l=Aa(l.child,{mode:S.mode,children:S.children}),l.ref=h.ref,h.child=l,l.return=h,l}function zm(l,h){var v=h.ref;if(v===null)l!==null&&l.ref!==null&&(h.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(a(284));(l===null||l.ref!==v)&&(h.flags|=4194816)}}function Ey(l,h,v,S,z){return Os(h),v=pu(l,h,v,S,void 0,z),S=zh(),l!==null&&!pi?(wl(l,h,z),Al(l,h,z)):(Sr&&S&&sc(h),h.flags|=1,Ei(l,h,v,z),h.child)}function Ev(l,h,v,S,z,j){return Os(h),h.updateQueue=null,v=Ih(h,S,v,z),mu(l),S=zh(),l!==null&&!pi?(wl(l,h,j),Al(l,h,j)):(Sr&&S&&sc(h),h.flags|=1,Ei(l,h,v,j),h.child)}function Av(l,h,v,S,z){if(Os(h),h.stateNode===null){var j=pr,Q=v.contextType;typeof Q=="object"&&Q!==null&&(j=qn(Q)),j=new v(S,j),h.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Wf,h.stateNode=j,j._reactInternals=h,j=h.stateNode,j.props=S,j.state=h.memoizedState,j.refs={},Hf(h),Q=v.contextType,j.context=typeof Q=="object"&&Q!==null?qn(Q):pr,j.state=h.memoizedState,Q=v.getDerivedStateFromProps,typeof Q=="function"&&(Xf(h,v,Q,S),j.state=h.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(Q=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),Q!==j.state&&Wf.enqueueReplaceState(j,j.state,null),xl(h,S,j,z),ks(),j.state=h.memoizedState),typeof j.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(l===null){j=h.stateNode;var de=h.memoizedProps,Le=Tl(v,de);j.props=Le;var rt=j.context,gt=v.contextType;Q=pr,typeof gt=="object"&&gt!==null&&(Q=qn(gt));var Tt=v.getDerivedStateFromProps;gt=typeof Tt=="function"||typeof j.getSnapshotBeforeUpdate=="function",de=h.pendingProps!==de,gt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(de||rt!==Q)&&Pm(h,j,S,Q),ls=!1;var nt=h.memoizedState;j.state=nt,xl(h,S,j,z),ks(),rt=h.memoizedState,de||nt!==rt||ls?(typeof Tt=="function"&&(Xf(h,v,Tt,S),rt=h.memoizedState),(Le=ls||Sl(h,v,Le,S,nt,rt,Q))?(gt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=rt),j.props=S,j.state=rt,j.context=Q,S=Le):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{j=h.stateNode,Ah(l,h),Q=h.memoizedProps,gt=Tl(v,Q),j.props=gt,Tt=h.pendingProps,nt=j.context,rt=v.contextType,Le=pr,typeof rt=="object"&&rt!==null&&(Le=qn(rt)),de=v.getDerivedStateFromProps,(rt=typeof de=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Q!==Tt||nt!==Le)&&Pm(h,j,S,Le),ls=!1,nt=h.memoizedState,j.state=nt,xl(h,S,j,z),ks();var st=h.memoizedState;Q!==Tt||nt!==st||ls||l!==null&&l.dependencies!==null&&cu(l.dependencies)?(typeof de=="function"&&(Xf(h,v,de,S),st=h.memoizedState),(gt=ls||Sl(h,v,gt,S,nt,st,Le)||l!==null&&l.dependencies!==null&&cu(l.dependencies))?(rt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(S,st,Le),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(S,st,Le)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||Q===l.memoizedProps&&nt===l.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&nt===l.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=st),j.props=S,j.state=st,j.context=Le,S=gt):(typeof j.componentDidUpdate!="function"||Q===l.memoizedProps&&nt===l.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&nt===l.memoizedState||(h.flags|=1024),S=!1)}return j=S,zm(l,h),S=(h.flags&128)!==0,j||S?(j=h.stateNode,v=S&&typeof v.getDerivedStateFromError!="function"?null:j.render(),h.flags|=1,l!==null&&S?(h.child=ss(h,l.child,null,z),h.child=ss(h,null,v,z)):Ei(l,h,v,z),h.memoizedState=j.state,l=h.child):l=Al(l,h,z),l}function Mv(l,h,v,S){return es(),h.flags|=256,Ei(l,h,v,S),h.child}var km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ep(l){return{baseLanes:l,cachePool:Mm()}}function Rm(l,h,v){return l=l!==null?l.childLanes&~v:0,h&&(l|=Gi),l}function Ay(l,h,v){var S=h.pendingProps,z=!1,j=(h.flags&128)!==0,Q;if((Q=j)||(Q=l!==null&&l.memoizedState===null?!1:(On.current&2)!==0),Q&&(z=!0,h.flags&=-129),Q=(h.flags&32)!==0,h.flags&=-33,l===null){if(Sr){if(z?no(h):Fn(),(l=Kr)?(l=Mu(l,Ma),l=l!==null&&l.data!=="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:Ko!==null?{id:Qo,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},v=jf(l),v.return=h,h.child=v,hi=h,Kr=null)):l=null,l===null)throw Qi(h);return En(l)?h.lanes=32:h.lanes=536870912,null}var de=S.children;return S=S.fallback,z?(Fn(),z=h.mode,de=Lm({mode:"hidden",children:de},z),S=ml(S,z,v,null),de.return=h,S.return=h,de.sibling=S,h.child=de,S=h.child,S.memoizedState=ep(v),S.childLanes=Rm(l,Q,v),h.memoizedState=km,El(null,S)):(no(h),My(h,de))}var Le=l.memoizedState;if(Le!==null&&(de=Le.dehydrated,de!==null)){if(j)h.flags&256?(no(h),h.flags&=-257,h=Bm(l,h,v)):h.memoizedState!==null?(Fn(),h.child=l.child,h.flags|=128,h=null):(Fn(),de=S.fallback,z=h.mode,S=Lm({mode:"visible",children:S.children},z),de=ml(de,z,v,null),de.flags|=2,S.return=h,de.return=h,S.sibling=de,h.child=S,ss(h,l.child,null,v),S=h.child,S.memoizedState=ep(v),S.childLanes=Rm(l,Q,v),h.memoizedState=km,h=El(null,S));else if(no(h),En(de)){if(Q=de.nextSibling&&de.nextSibling.dataset,Q)var rt=Q.dgst;Q=rt,S=Error(a(419)),S.stack="",S.digest=Q,Cs({value:S,source:null,stack:null}),h=Bm(l,h,v)}else if(pi||Pa(l,h,v,!1),Q=(v&l.childLanes)!==0,pi||Q){if(Q=_n,Q!==null&&(S=Si(Q,v),S!==0&&S!==Le.retryLane))throw Le.retryLane=S,Ja(l,S),ho(Q,l,S),Dm;ia(de)||yp(),h=Bm(l,h,v)}else ia(de)?(h.flags|=192,h.child=l.child,h=null):(l=Le.treeContext,Kr=zo(de.nextSibling),hi=h,Sr=!0,Ps=null,Ma=!1,l!==null&&Zd(h,l),h=My(h,S.children),h.flags|=4096);return h}return z?(Fn(),de=S.fallback,z=h.mode,Le=l.child,rt=Le.sibling,S=Aa(Le,{mode:"hidden",children:S.children}),S.subtreeFlags=Le.subtreeFlags&65011712,rt!==null?de=Aa(rt,de):(de=ml(de,z,v,null),de.flags|=2),de.return=h,S.return=h,S.sibling=de,h.child=S,El(null,S),S=h.child,de=l.child.memoizedState,de===null?de=ep(v):(z=de.cachePool,z!==null?(Le=Nn._currentValue,z=z.parent!==Le?{parent:Le,pool:Le}:z):z=Mm(),de={baseLanes:de.baseLanes|v,cachePool:z}),S.memoizedState=de,S.childLanes=Rm(l,Q,v),h.memoizedState=km,El(l.child,S)):(no(h),v=l.child,l=v.sibling,v=Aa(v,{mode:"visible",children:S.children}),v.return=h,v.sibling=null,l!==null&&(Q=h.deletions,Q===null?(h.deletions=[l],h.flags|=16):Q.push(l)),h.child=v,h.memoizedState=null,v)}function My(l,h){return h=Lm({mode:"visible",children:h},l.mode),h.return=l,l.child=h}function Lm(l,h){return l=Ea(22,l,null,h),l.lanes=0,l}function Bm(l,h,v){return ss(h,l.child,null,v),l=My(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function Py(l,h,v){l.lanes|=h;var S=l.alternate;S!==null&&(S.lanes|=h),Nf(l.return,h,v)}function Cy(l,h,v,S,z,j){var Q=l.memoizedState;Q===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:z,treeForkCount:j}:(Q.isBackwards=h,Q.rendering=null,Q.renderingStartTime=0,Q.last=S,Q.tail=v,Q.tailMode=z,Q.treeForkCount=j)}function jm(l,h,v){var S=h.pendingProps,z=S.revealOrder,j=S.tail;S=S.children;var Q=On.current,de=(Q&2)!==0;if(de?(Q=Q&1|2,h.flags|=128):Q&=1,ct(On,Q),Ei(l,h,S,v),S=Sr?_l:0,!de&&l!==null&&(l.flags&128)!==0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Py(l,v,h);else if(l.tag===19)Py(l,v,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(z){case"forwards":for(v=h.child,z=null;v!==null;)l=v.alternate,l!==null&&Dh(l)===null&&(z=v),v=v.sibling;v=z,v===null?(z=h.child,h.child=null):(z=v.sibling,v.sibling=null),Cy(h,!1,z,v,j,S);break;case"backwards":case"unstable_legacy-backwards":for(v=null,z=h.child,h.child=null;z!==null;){if(l=z.alternate,l!==null&&Dh(l)===null){h.child=z;break}l=z.sibling,z.sibling=v,v=z,z=l}Cy(h,!0,v,null,j,S);break;case"together":Cy(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function Al(l,h,v){if(l!==null&&(h.dependencies=l.dependencies),Sc|=h.lanes,(v&h.childLanes)===0)if(l!==null){if(Pa(l,h,v,!1),(v&h.childLanes)===0)return null}else return null;if(l!==null&&h.child!==l.child)throw Error(a(153));if(h.child!==null){for(l=h.child,v=Aa(l,l.pendingProps),h.child=v,v.return=h;l.sibling!==null;)l=l.sibling,v=v.sibling=Aa(l,l.pendingProps),v.return=h;v.sibling=null}return h.child}function tp(l,h){return(l.lanes&h)!==0?!0:(l=l.dependencies,!!(l!==null&&cu(l)))}function rp(l,h,v){switch(h.tag){case 3:Tr(h,h.stateNode.containerInfo),Is(h,Nn,l.memoizedState.cache),es();break;case 27:case 5:er(h);break;case 4:Tr(h,h.stateNode.containerInfo);break;case 10:Is(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,du(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(no(h),h.flags|=128,null):(v&h.child.childLanes)!==0?Ay(l,h,v):(no(h),l=Al(l,h,v),l!==null?l.sibling:null);no(h);break;case 19:var z=(l.flags&128)!==0;if(S=(v&h.childLanes)!==0,S||(Pa(l,h,v,!1),S=(v&h.childLanes)!==0),z){if(S)return jm(l,h,v);h.flags|=128}if(z=h.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),ct(On,On.current),S)break;return null;case 22:return h.lanes=0,Ty(l,h,v,h.pendingProps);case 24:Is(h,Nn,l.memoizedState.cache)}return Al(l,h,v)}function na(l,h,v){if(l!==null)if(l.memoizedProps!==h.pendingProps)pi=!0;else{if(!tp(l,v)&&(h.flags&128)===0)return pi=!1,rp(l,h,v);pi=(l.flags&131072)!==0}else pi=!1,Sr&&(h.flags&1048576)!==0&&$d(h,_l,h.index);switch(h.lanes=0,h.tag){case 16:e:{var S=h.pendingProps;if(l=to(h.elementType),h.type=l,typeof l=="function")Lf(l)?(S=Tl(l,S),h.tag=1,h=Av(null,h,l,S,v)):(h.tag=0,h=Ey(null,h,l,S,v));else{if(l!=null){var z=l.$$typeof;if(z===ve){h.tag=11,h=Sv(null,h,l,S,v);break e}else if(z===ze){h.tag=14,h=Im(null,h,l,S,v);break e}}throw h=It(l)||l,Error(a(306,h,""))}}return h;case 0:return Ey(l,h,h.type,h.pendingProps,v);case 1:return S=h.type,z=Tl(S,h.pendingProps),Av(l,h,S,z,v);case 3:e:{if(Tr(h,h.stateNode.containerInfo),l===null)throw Error(a(387));S=h.pendingProps;var j=h.memoizedState;z=j.element,Ah(l,h),xl(h,S,null,v);var Q=h.memoizedState;if(S=Q.cache,Is(h,Nn,S),S!==j.cache&&Ff(h,[Nn],v,!0),ks(),S=Q.element,j.isDehydrated)if(j={element:S,isDehydrated:!1,cache:Q.cache},h.updateQueue.baseState=j,h.memoizedState=j,h.flags&256){h=Mv(l,h,S,v);break e}else if(S!==z){z=Vi(Error(a(424)),h),Cs(z),h=Mv(l,h,S,v);break e}else for(l=h.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,Kr=zo(l.firstChild),hi=h,Sr=!0,Ps=null,Ma=!0,v=Xd(h,null,S,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(es(),S===z){h=Al(l,h,v);break e}Ei(l,h,S,v)}h=h.child}return h;case 26:return zm(l,h),l===null?(v=s0(h.type,null,h.pendingProps,null))?h.memoizedState=v:Sr||(v=h.type,l=h.pendingProps,S=Sp($t.current).createElement(v),S[Ur]=h,S[Pt]=l,Mi(S,v,l),Cn(S),h.stateNode=S):h.memoizedState=s0(h.type,l.memoizedProps,h.pendingProps,l.memoizedState),null;case 27:return er(h),l===null&&Sr&&(S=h.stateNode=s_(h.type,h.pendingProps,$t.current),hi=h,Ma=!0,z=Kr,Au(h.type)?(La=z,Kr=zo(S.firstChild)):Kr=z),Ei(l,h,h.pendingProps.children,v),zm(l,h),l===null&&(h.flags|=4194304),h.child;case 5:return l===null&&Sr&&((z=S=Kr)&&(S=Ii(S,h.type,h.pendingProps,Ma),S!==null?(h.stateNode=S,hi=h,Kr=zo(S.firstChild),Ma=!1,z=!0):z=!1),z||Qi(h)),er(h),z=h.type,j=h.pendingProps,Q=l!==null?l.memoizedProps:null,S=j.children,hg(z,j)?S=null:Q!==null&&hg(z,Q)&&(h.flags|=32),h.memoizedState!==null&&(z=pu(l,h,Oh,null,null,v),Op._currentValue=z),zm(l,h),Ei(l,h,S,v),h.child;case 6:return l===null&&Sr&&((l=v=Kr)&&(v=Gs(v,h.pendingProps,Ma),v!==null?(h.stateNode=v,hi=h,Kr=null,l=!0):l=!1),l||Qi(h)),null;case 13:return Ay(l,h,v);case 4:return Tr(h,h.stateNode.containerInfo),S=h.pendingProps,l===null?h.child=ss(h,null,S,v):Ei(l,h,S,v),h.child;case 11:return Sv(l,h,h.type,h.pendingProps,v);case 7:return Ei(l,h,h.pendingProps,v),h.child;case 8:return Ei(l,h,h.pendingProps.children,v),h.child;case 12:return Ei(l,h,h.pendingProps.children,v),h.child;case 10:return S=h.pendingProps,Is(h,h.type,S.value),Ei(l,h,S.children,v),h.child;case 9:return z=h.type._context,S=h.pendingProps.children,Os(h),z=qn(z),S=S(z),h.flags|=1,Ei(l,h,S,v),h.child;case 14:return Im(l,h,h.type,h.pendingProps,v);case 15:return Sy(l,h,h.type,h.pendingProps,v);case 19:return jm(l,h,v);case 31:return Om(l,h,v);case 22:return Ty(l,h,v,h.pendingProps);case 24:return Os(h),S=qn(Nn),l===null?(z=Vf(),z===null&&(z=_n,j=is(),z.pooledCache=j,j.refCount++,j!==null&&(z.pooledCacheLanes|=v),z=j),h.memoizedState={parent:S,cache:z},Hf(h),Is(h,Nn,z)):((l.lanes&v)!==0&&(Ah(l,h),xl(h,null,null,v),ks()),z=l.memoizedState,j=h.memoizedState,z.parent!==S?(z={parent:S,cache:S},h.memoizedState=z,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=z),Is(h,Nn,S)):(S=j.cache,Is(h,Nn,S),S!==z.cache&&Ff(h,[Nn],v,!0))),Ei(l,h,h.pendingProps.children,v),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Ml(l){l.flags|=4}function np(l,h,v,S,z){if((h=(l.mode&32)!==0)&&(h=!1),h){if(l.flags|=16777216,(z&335544128)===z)if(l.stateNode.complete)l.flags|=8192;else if(Uy())l.flags|=8192;else throw To=Lt,bl}else l.flags&=-16777217}function Pv(l,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!xg(h))if(Uy())l.flags|=8192;else throw To=Lt,bl}function ip(l,h){h!==null&&(l.flags|=4),l.flags&16384&&(h=l.tag!==22?Qt():536870912,l.lanes|=h,Uh|=h)}function ap(l,h){if(!Sr)switch(l.tailMode){case"hidden":h=l.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?l.tail=null:v.sibling=null;break;case"collapsed":v=l.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Rn(l){var h=l.alternate!==null&&l.alternate.child===l.child,v=0,S=0;if(h)for(var z=l.child;z!==null;)v|=z.lanes|z.childLanes,S|=z.subtreeFlags&65011712,S|=z.flags&65011712,z.return=l,z=z.sibling;else for(z=l.child;z!==null;)v|=z.lanes|z.childLanes,S|=z.subtreeFlags,S|=z.flags,z.return=l,z=z.sibling;return l.subtreeFlags|=S,l.childLanes=v,h}function Cv(l,h,v){var S=h.pendingProps;switch(lu(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(h),null;case 1:return Rn(h),null;case 3:return v=h.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),ns(Nn),pt(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(l===null||l.child===null)&&(Jo(h)?Ml(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ts())),Rn(h),null;case 26:var z=h.type,j=h.memoizedState;return l===null?(Ml(h),j!==null?(Rn(h),Pv(h,j)):(Rn(h),np(h,z,null,S,v))):j?j!==l.memoizedState?(Ml(h),Rn(h),Pv(h,j)):(Rn(h),h.flags&=-16777217):(l=l.memoizedProps,l!==S&&Ml(h),Rn(h),np(h,z,l,S,v)),null;case 27:if(mr(h),v=$t.current,z=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==S&&Ml(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Rn(h),null}l=wt.current,Jo(h)?Ji(h):(l=s_(z,S,v),h.stateNode=l,Ml(h))}return Rn(h),null;case 5:if(mr(h),z=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==S&&Ml(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Rn(h),null}if(j=wt.current,Jo(h))Ji(h);else{var Q=Sp($t.current);switch(j){case 1:j=Q.createElementNS("http://www.w3.org/2000/svg",z);break;case 2:j=Q.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;default:switch(z){case"svg":j=Q.createElementNS("http://www.w3.org/2000/svg",z);break;case"math":j=Q.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;case"script":j=Q.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof S.is=="string"?Q.createElement("select",{is:S.is}):Q.createElement("select"),S.multiple?j.multiple=!0:S.size&&(j.size=S.size);break;default:j=typeof S.is=="string"?Q.createElement(z,{is:S.is}):Q.createElement(z)}}j[Ur]=h,j[Pt]=S;e:for(Q=h.child;Q!==null;){if(Q.tag===5||Q.tag===6)j.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===h)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===h)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}h.stateNode=j;e:switch(Mi(j,z,S),z){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&Ml(h)}}return Rn(h),np(h,h.type,l===null?null:l.memoizedProps,h.pendingProps,v),null;case 6:if(l&&h.stateNode!=null)l.memoizedProps!==S&&Ml(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(a(166));if(l=$t.current,Jo(h)){if(l=h.stateNode,v=h.memoizedProps,S=null,z=hi,z!==null)switch(z.tag){case 27:case 5:S=z.memoizedProps}l[Ur]=h,l=!!(l.nodeValue===v||S!==null&&S.suppressHydrationWarning===!0||Jy(l.nodeValue,v)),l||Qi(h,!0)}else l=Sp(l).createTextNode(S),l[Ur]=h,h.stateNode=l}return Rn(h),null;case 31:if(v=h.memoizedState,l===null||l.memoizedState!==null){if(S=Jo(h),v!==null){if(l===null){if(!S)throw Error(a(318));if(l=h.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(557));l[Ur]=h}else es(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Rn(h),l=!1}else v=ts(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),l=!0;if(!l)return h.flags&256?(Sn(h),h):(Sn(h),null);if((h.flags&128)!==0)throw Error(a(558))}return Rn(h),null;case 13:if(S=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(z=Jo(h),S!==null&&S.dehydrated!==null){if(l===null){if(!z)throw Error(a(318));if(z=h.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(a(317));z[Ur]=h}else es(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Rn(h),z=!1}else z=ts(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=z),z=!0;if(!z)return h.flags&256?(Sn(h),h):(Sn(h),null)}return Sn(h),(h.flags&128)!==0?(h.lanes=v,h):(v=S!==null,l=l!==null&&l.memoizedState!==null,v&&(S=h.child,z=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(z=S.alternate.memoizedState.cachePool.pool),j=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(j=S.memoizedState.cachePool.pool),j!==z&&(S.flags|=2048)),v!==l&&v&&(h.child.flags|=8192),ip(h,h.updateQueue),Rn(h),null);case 4:return pt(),l===null&&Ky(h.stateNode.containerInfo),Rn(h),null;case 10:return ns(h.type),Rn(h),null;case 19:if(qe(On),S=h.memoizedState,S===null)return Rn(h),null;if(z=(h.flags&128)!==0,j=S.rendering,j===null)if(z)ap(S,!1);else{if(Zn!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(j=Dh(l),j!==null){for(h.flags|=128,ap(S,!1),l=j.updateQueue,h.updateQueue=l,ip(h,l),h.subtreeFlags=0,l=v,v=h.child;v!==null;)Em(v,l),v=v.sibling;return ct(On,On.current&1|2),Sr&&Ms(h,S.treeForkCount),h.child}l=l.sibling}S.tail!==null&&ni()>pp&&(h.flags|=128,z=!0,ap(S,!1),h.lanes=4194304)}else{if(!z)if(l=Dh(j),l!==null){if(h.flags|=128,z=!0,l=l.updateQueue,h.updateQueue=l,ip(h,l),ap(S,!0),S.tail===null&&S.tailMode==="hidden"&&!j.alternate&&!Sr)return Rn(h),null}else 2*ni()-S.renderingStartTime>pp&&v!==536870912&&(h.flags|=128,z=!0,ap(S,!1),h.lanes=4194304);S.isBackwards?(j.sibling=h.child,h.child=j):(l=S.last,l!==null?l.sibling=j:h.child=j,S.last=j)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=ni(),l.sibling=null,v=On.current,ct(On,z?v&1|2:v&1),Sr&&Ms(h,S.treeForkCount),l):(Rn(h),null);case 22:case 23:return Sn(h),hc(),S=h.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(v&536870912)!==0&&(h.flags&128)===0&&(Rn(h),h.subtreeFlags&6&&(h.flags|=8192)):Rn(h),v=h.updateQueue,v!==null&&ip(h,v.retryQueue),v=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==v&&(h.flags|=2048),l!==null&&qe(wo),null;case 24:return v=null,l!==null&&(v=l.memoizedState.cache),h.memoizedState.cache!==v&&(h.flags|=2048),ns(Nn),Rn(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function Vx(l,h){switch(lu(h),h.tag){case 1:return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return ns(Nn),pt(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 26:case 27:case 5:return mr(h),null;case 31:if(h.memoizedState!==null){if(Sn(h),h.alternate===null)throw Error(a(340));es()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 13:if(Sn(h),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(a(340));es()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return qe(On),null;case 4:return pt(),null;case 10:return ns(h.type),null;case 22:case 23:return Sn(h),hc(),l!==null&&qe(wo),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 24:return ns(Nn),null;case 25:return null;default:return null}}function Nm(l,h){switch(lu(h),h.tag){case 3:ns(Nn),pt();break;case 26:case 27:case 5:mr(h);break;case 4:pt();break;case 31:h.memoizedState!==null&&Sn(h);break;case 13:Sn(h);break;case 19:qe(On);break;case 10:ns(h.type);break;case 22:case 23:Sn(h),hc(),l!==null&&qe(wo);break;case 24:ns(Nn)}}function Jf(l,h){try{var v=h.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var z=S.next;v=z;do{if((v.tag&l)===l){S=void 0;var j=v.create,Q=v.inst;S=j(),Q.destroy=S}v=v.next}while(v!==z)}}catch(de){tn(h,h.return,de)}}function vc(l,h,v){try{var S=h.updateQueue,z=S!==null?S.lastEffect:null;if(z!==null){var j=z.next;S=j;do{if((S.tag&l)===l){var Q=S.inst,de=Q.destroy;if(de!==void 0){Q.destroy=void 0,z=h;var Le=v,rt=de;try{rt()}catch(gt){tn(z,Le,gt)}}}S=S.next}while(S!==j)}}catch(gt){tn(h,h.return,gt)}}function Dv(l){var h=l.updateQueue;if(h!==null){var v=l.stateNode;try{Yf(h,v)}catch(S){tn(l,l.return,S)}}}function Iv(l,h,v){v.props=Tl(l.type,l.memoizedProps),v.state=l.memoizedState;try{v.componentWillUnmount()}catch(S){tn(l,h,S)}}function op(l,h){try{var v=l.ref;if(v!==null){switch(l.tag){case 26:case 27:case 5:var S=l.stateNode;break;case 30:S=l.stateNode;break;default:S=l.stateNode}typeof v=="function"?l.refCleanup=v(S):v.current=S}}catch(z){tn(l,h,z)}}function Io(l,h){var v=l.ref,S=l.refCleanup;if(v!==null)if(typeof S=="function")try{S()}catch(z){tn(l,h,z)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(z){tn(l,h,z)}else v.current=null}function Fm(l){var h=l.type,v=l.memoizedProps,S=l.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":v.autoFocus&&S.focus();break e;case"img":v.src?S.src=v.src:v.srcSet&&(S.srcset=v.srcSet)}}catch(z){tn(l,l.return,z)}}function Um(l,h,v){try{var S=l.stateNode;a_(S,l.type,v,h),S[Pt]=h}catch(z){tn(l,l.return,z)}}function vu(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Au(l.type)||l.tag===4}function Bh(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||vu(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Au(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Dy(l,h,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,h?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(l,h):(h=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,h.appendChild(l),v=v._reactRootContainer,v!=null||h.onclick!==null||(h.onclick=bo));else if(S!==4&&(S===27&&Au(l.type)&&(v=l.stateNode,h=null),l=l.child,l!==null))for(Dy(l,h,v),l=l.sibling;l!==null;)Dy(l,h,v),l=l.sibling}function Vm(l,h,v){var S=l.tag;if(S===5||S===6)l=l.stateNode,h?v.insertBefore(l,h):v.appendChild(l);else if(S!==4&&(S===27&&Au(l.type)&&(v=l.stateNode),l=l.child,l!==null))for(Vm(l,h,v),l=l.sibling;l!==null;)Vm(l,h,v),l=l.sibling}function Ov(l){var h=l.stateNode,v=l.memoizedProps;try{for(var S=l.type,z=h.attributes;z.length;)h.removeAttributeNode(z[0]);Mi(h,S,v),h[Ur]=l,h[Pt]=v}catch(j){tn(l,l.return,j)}}var _c=!1,mi=!1,Iy=!1,zv=typeof WeakSet=="function"?WeakSet:Set,gi=null;function Gx(l,h){if(l=l.containerInfo,wp=Cu,l=Df(l),dh(l)){if("selectionStart"in l)var v={start:l.selectionStart,end:l.selectionEnd};else e:{v=(v=l.ownerDocument)&&v.defaultView||window;var S=v.getSelection&&v.getSelection();if(S&&S.rangeCount!==0){v=S.anchorNode;var z=S.anchorOffset,j=S.focusNode;S=S.focusOffset;try{v.nodeType,j.nodeType}catch{v=null;break e}var Q=0,de=-1,Le=-1,rt=0,gt=0,Tt=l,nt=null;t:for(;;){for(var st;Tt!==v||z!==0&&Tt.nodeType!==3||(de=Q+z),Tt!==j||S!==0&&Tt.nodeType!==3||(Le=Q+S),Tt.nodeType===3&&(Q+=Tt.nodeValue.length),(st=Tt.firstChild)!==null;)nt=Tt,Tt=st;for(;;){if(Tt===l)break t;if(nt===v&&++rt===z&&(de=Q),nt===j&&++gt===S&&(Le=Q),(st=Tt.nextSibling)!==null)break;Tt=nt,nt=Tt.parentNode}Tt=st}v=de===-1||Le===-1?null:{start:de,end:Le}}else v=null}v=v||{start:0,end:0}}else v=null;for(e0={focusedElem:l,selectionRange:v},Cu=!1,gi=h;gi!==null;)if(h=gi,l=h.child,(h.subtreeFlags&1028)!==0&&l!==null)l.return=h,gi=l;else for(;gi!==null;){switch(h=gi,j=h.alternate,l=h.flags,h.tag){case 0:if((l&4)!==0&&(l=h.updateQueue,l=l!==null?l.events:null,l!==null))for(v=0;v<l.length;v++)z=l[v],z.ref.impl=z.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&j!==null){l=void 0,v=h,z=j.memoizedProps,j=j.memoizedState,S=v.stateNode;try{var Zt=Tl(v.type,z);l=S.getSnapshotBeforeUpdate(Zt,j),S.__reactInternalSnapshotBeforeUpdate=l}catch(lr){tn(v,v.return,lr)}}break;case 3:if((l&1024)!==0){if(l=h.stateNode.containerInfo,v=l.nodeType,v===9)Dl(l);else if(v===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Dl(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(a(163))}if(l=h.sibling,l!==null){l.return=h.return,gi=l;break}gi=h.return}}function Oy(l,h,v){var S=v.flags;switch(v.tag){case 0:case 11:case 15:lo(l,v),S&4&&Jf(5,v);break;case 1:if(lo(l,v),S&4)if(l=v.stateNode,h===null)try{l.componentDidMount()}catch(Q){tn(v,v.return,Q)}else{var z=Tl(v.type,h.memoizedProps);h=h.memoizedState;try{l.componentDidUpdate(z,h,l.__reactInternalSnapshotBeforeUpdate)}catch(Q){tn(v,v.return,Q)}}S&64&&Dv(v),S&512&&op(v,v.return);break;case 3:if(lo(l,v),S&64&&(l=v.updateQueue,l!==null)){if(h=null,v.child!==null)switch(v.child.tag){case 27:case 5:h=v.child.stateNode;break;case 1:h=v.child.stateNode}try{Yf(l,h)}catch(Q){tn(v,v.return,Q)}}break;case 27:h===null&&S&4&&Ov(v);case 26:case 5:lo(l,v),h===null&&S&4&&Fm(v),S&512&&op(v,v.return);break;case 12:lo(l,v);break;case 31:lo(l,v),S&4&&sp(l,v);break;case 13:lo(l,v),S&4&&lp(l,v),S&64&&(l=v.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(v=Gy.bind(null,v),vi(l,v))));break;case 22:if(S=v.memoizedState!==null||_c,!S){h=h!==null&&h.memoizedState!==null||mi,z=_c;var j=mi;_c=S,(mi=h)&&!j?bc(l,v,(v.subtreeFlags&8772)!==0):lo(l,v),_c=z,mi=j}break;case 30:break;default:lo(l,v)}}function ed(l){var h=l.alternate;h!==null&&(l.alternate=null,ed(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&$l(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Un=null,kr=!1;function so(l,h,v){for(v=v.child;v!==null;)zy(l,h,v),v=v.sibling}function zy(l,h,v){if(se&&typeof se.onCommitFiberUnmount=="function")try{se.onCommitFiberUnmount(ie,v)}catch{}switch(v.tag){case 26:mi||Io(v,h),so(l,h,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:mi||Io(v,h);var S=Un,z=kr;Au(v.type)&&(Un=v.stateNode,kr=!1),so(l,h,v),Tp(v.stateNode),Un=S,kr=z;break;case 5:mi||Io(v,h);case 6:if(S=Un,z=kr,Un=null,so(l,h,v),Un=S,kr=z,Un!==null)if(kr)try{(Un.nodeType===9?Un.body:Un.nodeName==="HTML"?Un.ownerDocument.body:Un).removeChild(v.stateNode)}catch(j){tn(v,h,j)}else try{Un.removeChild(v.stateNode)}catch(j){tn(v,h,j)}break;case 18:Un!==null&&(kr?(l=Un,o_(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,v.stateNode),gd(l)):o_(Un,v.stateNode));break;case 4:S=Un,z=kr,Un=v.stateNode.containerInfo,kr=!0,so(l,h,v),Un=S,kr=z;break;case 0:case 11:case 14:case 15:vc(2,v,h),mi||vc(4,v,h),so(l,h,v);break;case 1:mi||(Io(v,h),S=v.stateNode,typeof S.componentWillUnmount=="function"&&Iv(v,h,S)),so(l,h,v);break;case 21:so(l,h,v);break;case 22:mi=(S=mi)||v.memoizedState!==null,so(l,h,v),mi=S;break;default:so(l,h,v)}}function sp(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{gd(l)}catch(v){tn(h,h.return,v)}}}function lp(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{gd(l)}catch(v){tn(h,h.return,v)}}function cp(l){switch(l.tag){case 31:case 13:case 19:var h=l.stateNode;return h===null&&(h=l.stateNode=new zv),h;case 22:return l=l.stateNode,h=l._retryCache,h===null&&(h=l._retryCache=new zv),h;default:throw Error(a(435,l.tag))}}function up(l,h){var v=cp(l);h.forEach(function(S){if(!v.has(S)){v.add(S);var z=Zx.bind(null,l,S);S.then(z,z)}})}function Oa(l,h){var v=h.deletions;if(v!==null)for(var S=0;S<v.length;S++){var z=v[S],j=l,Q=h,de=Q;e:for(;de!==null;){switch(de.tag){case 27:if(Au(de.type)){Un=de.stateNode,kr=!1;break e}break;case 5:Un=de.stateNode,kr=!1;break e;case 3:case 4:Un=de.stateNode.containerInfo,kr=!0;break e}de=de.return}if(Un===null)throw Error(a(160));zy(j,Q,z),Un=null,kr=!1,j=z.alternate,j!==null&&(j.return=null),z.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Gm(h,l),h=h.sibling}var za=null;function Gm(l,h){var v=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Oa(h,l),Ai(l),S&4&&(vc(3,l,l.return),Jf(3,l),vc(5,l,l.return));break;case 1:Oa(h,l),Ai(l),S&512&&(mi||v===null||Io(v,v.return)),S&64&&_c&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(v=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=v===null?S:v.concat(S))));break;case 26:var z=za;if(Oa(h,l),Ai(l),S&512&&(mi||v===null||Io(v,v.return)),S&4){var j=v!==null?v.memoizedState:null;if(S=l.memoizedState,v===null)if(S===null)if(l.stateNode===null){e:{S=l.type,v=l.memoizedProps,z=z.ownerDocument||z;t:switch(S){case"title":j=z.getElementsByTagName("title")[0],(!j||j[hr]||j[Ur]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=z.createElement(S),z.head.insertBefore(j,z.querySelector("head > title"))),Mi(j,S,v),j[Ur]=l,Cn(j),S=j;break e;case"link":var Q=Ap("link","href",z).get(S+(v.href||""));if(Q){for(var de=0;de<Q.length;de++)if(j=Q[de],j.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&j.getAttribute("rel")===(v.rel==null?null:v.rel)&&j.getAttribute("title")===(v.title==null?null:v.title)&&j.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){Q.splice(de,1);break t}}j=z.createElement(S),Mi(j,S,v),z.head.appendChild(j);break;case"meta":if(Q=Ap("meta","content",z).get(S+(v.content||""))){for(de=0;de<Q.length;de++)if(j=Q[de],j.getAttribute("content")===(v.content==null?null:""+v.content)&&j.getAttribute("name")===(v.name==null?null:v.name)&&j.getAttribute("property")===(v.property==null?null:v.property)&&j.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&j.getAttribute("charset")===(v.charSet==null?null:v.charSet)){Q.splice(de,1);break t}}j=z.createElement(S),Mi(j,S,v),z.head.appendChild(j);break;default:throw Error(a(468,S))}j[Ur]=l,Cn(j),S=j}l.stateNode=S}else Mp(z,l.type,l.stateNode);else l.stateNode=Zh(z,S,l.memoizedProps);else j!==S?(j===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):j.count--,S===null?Mp(z,l.type,l.stateNode):Zh(z,S,l.memoizedProps)):S===null&&l.stateNode!==null&&Um(l,l.memoizedProps,v.memoizedProps)}break;case 27:Oa(h,l),Ai(l),S&512&&(mi||v===null||Io(v,v.return)),v!==null&&S&4&&Um(l,l.memoizedProps,v.memoizedProps);break;case 5:if(Oa(h,l),Ai(l),S&512&&(mi||v===null||Io(v,v.return)),l.flags&32){z=l.stateNode;try{Es(z,"")}catch(Zt){tn(l,l.return,Zt)}}S&4&&l.stateNode!=null&&(z=l.memoizedProps,Um(l,z,v!==null?v.memoizedProps:z)),S&1024&&(Iy=!0);break;case 6:if(Oa(h,l),Ai(l),S&4){if(l.stateNode===null)throw Error(a(162));S=l.memoizedProps,v=l.stateNode;try{v.nodeValue=S}catch(Zt){tn(l,l.return,Zt)}}break;case 3:if(Ep=null,z=za,za=Mc(h.containerInfo),Oa(h,l),za=z,Ai(l),S&4&&v!==null&&v.memoizedState.isDehydrated)try{gd(h.containerInfo)}catch(Zt){tn(l,l.return,Zt)}Iy&&(Iy=!1,hp(l));break;case 4:S=za,za=Mc(l.stateNode.containerInfo),Oa(h,l),Ai(l),za=S;break;case 12:Oa(h,l),Ai(l);break;case 31:Oa(h,l),Ai(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,up(l,S)));break;case 13:Oa(h,l),Ai(l),l.child.flags&8192&&l.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Zm=ni()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,up(l,S)));break;case 22:z=l.memoizedState!==null;var Le=v!==null&&v.memoizedState!==null,rt=_c,gt=mi;if(_c=rt||z,mi=gt||Le,Oa(h,l),mi=gt,_c=rt,Ai(l),S&8192)e:for(h=l.stateNode,h._visibility=z?h._visibility&-2:h._visibility|1,z&&(v===null||Le||_c||mi||Fs(l)),v=null,h=l;;){if(h.tag===5||h.tag===26){if(v===null){Le=v=h;try{if(j=Le.stateNode,z)Q=j.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{de=Le.stateNode;var Tt=Le.memoizedProps.style,nt=Tt!=null&&Tt.hasOwnProperty("display")?Tt.display:null;de.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(Zt){tn(Le,Le.return,Zt)}}}else if(h.tag===6){if(v===null){Le=h;try{Le.stateNode.nodeValue=z?"":Le.memoizedProps}catch(Zt){tn(Le,Le.return,Zt)}}}else if(h.tag===18){if(v===null){Le=h;try{var st=Le.stateNode;z?qr(st,!0):qr(Le.stateNode,!1)}catch(Zt){tn(Le,Le.return,Zt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===l)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;v===h&&(v=null),h=h.return}v===h&&(v=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=l.updateQueue,S!==null&&(v=S.retryQueue,v!==null&&(S.retryQueue=null,up(l,v))));break;case 19:Oa(h,l),Ai(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,up(l,S)));break;case 30:break;case 21:break;default:Oa(h,l),Ai(l)}}function Ai(l){var h=l.flags;if(h&2){try{for(var v,S=l.return;S!==null;){if(vu(S)){v=S;break}S=S.return}if(v==null)throw Error(a(160));switch(v.tag){case 27:var z=v.stateNode,j=Bh(l);Vm(l,j,z);break;case 5:var Q=v.stateNode;v.flags&32&&(Es(Q,""),v.flags&=-33);var de=Bh(l);Vm(l,de,Q);break;case 3:case 4:var Le=v.stateNode.containerInfo,rt=Bh(l);Dy(l,rt,Le);break;default:throw Error(a(161))}}catch(gt){tn(l,l.return,gt)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function hp(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var h=l;hp(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),l=l.sibling}}function lo(l,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Oy(l,h.alternate,h),h=h.sibling}function Fs(l){for(l=l.child;l!==null;){var h=l;switch(h.tag){case 0:case 11:case 14:case 15:vc(4,h,h.return),Fs(h);break;case 1:Io(h,h.return);var v=h.stateNode;typeof v.componentWillUnmount=="function"&&Iv(h,h.return,v),Fs(h);break;case 27:Tp(h.stateNode);case 26:case 5:Io(h,h.return),Fs(h);break;case 22:h.memoizedState===null&&Fs(h);break;case 30:Fs(h);break;default:Fs(h)}l=l.sibling}}function bc(l,h,v){for(v=v&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,z=l,j=h,Q=j.flags;switch(j.tag){case 0:case 11:case 15:bc(z,j,v),Jf(4,j);break;case 1:if(bc(z,j,v),S=j,z=S.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(rt){tn(S,S.return,rt)}if(S=j,z=S.updateQueue,z!==null){var de=S.stateNode;try{var Le=z.shared.hiddenCallbacks;if(Le!==null)for(z.shared.hiddenCallbacks=null,z=0;z<Le.length;z++)Mh(Le[z],de)}catch(rt){tn(S,S.return,rt)}}v&&Q&64&&Dv(j),op(j,j.return);break;case 27:Ov(j);case 26:case 5:bc(z,j,v),v&&S===null&&Q&4&&Fm(j),op(j,j.return);break;case 12:bc(z,j,v);break;case 31:bc(z,j,v),v&&Q&4&&sp(z,j);break;case 13:bc(z,j,v),v&&Q&4&&lp(z,j);break;case 22:j.memoizedState===null&&bc(z,j,v),op(j,j.return);break;case 30:break;default:bc(z,j,v)}h=h.sibling}}function qm(l,h){var v=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),l=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(l=h.memoizedState.cachePool.pool),l!==v&&(l!=null&&l.refCount++,v!=null&&uu(v))}function xc(l,h){l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&uu(l))}function Us(l,h,v,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)ky(l,h,v,S),h=h.sibling}function ky(l,h,v,S){var z=h.flags;switch(h.tag){case 0:case 11:case 15:Us(l,h,v,S),z&2048&&Jf(9,h);break;case 1:Us(l,h,v,S);break;case 3:Us(l,h,v,S),z&2048&&(l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&uu(l)));break;case 12:if(z&2048){Us(l,h,v,S),l=h.stateNode;try{var j=h.memoizedProps,Q=j.id,de=j.onPostCommit;typeof de=="function"&&de(Q,h.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Le){tn(h,h.return,Le)}}else Us(l,h,v,S);break;case 31:Us(l,h,v,S);break;case 13:Us(l,h,v,S);break;case 23:break;case 22:j=h.stateNode,Q=h.alternate,h.memoizedState!==null?j._visibility&2?Us(l,h,v,S):jh(l,h):j._visibility&2?Us(l,h,v,S):(j._visibility|=2,Pl(l,h,v,S,(h.subtreeFlags&10256)!==0||!1)),z&2048&&qm(Q,h);break;case 24:Us(l,h,v,S),z&2048&&xc(h.alternate,h);break;default:Us(l,h,v,S)}}function Pl(l,h,v,S,z){for(z=z&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var j=l,Q=h,de=v,Le=S,rt=Q.flags;switch(Q.tag){case 0:case 11:case 15:Pl(j,Q,de,Le,z),Jf(8,Q);break;case 23:break;case 22:var gt=Q.stateNode;Q.memoizedState!==null?gt._visibility&2?Pl(j,Q,de,Le,z):jh(j,Q):(gt._visibility|=2,Pl(j,Q,de,Le,z)),z&&rt&2048&&qm(Q.alternate,Q);break;case 24:Pl(j,Q,de,Le,z),z&&rt&2048&&xc(Q.alternate,Q);break;default:Pl(j,Q,de,Le,z)}h=h.sibling}}function jh(l,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var v=l,S=h,z=S.flags;switch(S.tag){case 22:jh(v,S),z&2048&&qm(S.alternate,S);break;case 24:jh(v,S),z&2048&&xc(S.alternate,S);break;default:jh(v,S)}h=h.sibling}}var td=8192;function Nh(l,h,v){if(l.subtreeFlags&td)for(l=l.child;l!==null;)kv(l,h,v),l=l.sibling}function kv(l,h,v){switch(l.tag){case 26:Nh(l,h,v),l.flags&td&&l.memoizedState!==null&&u0(v,za,l.memoizedState,l.memoizedProps);break;case 5:Nh(l,h,v);break;case 3:case 4:var S=za;za=Mc(l.stateNode.containerInfo),Nh(l,h,v),za=S;break;case 22:l.memoizedState===null&&(S=l.alternate,S!==null&&S.memoizedState!==null?(S=td,td=16777216,Nh(l,h,v),td=S):Nh(l,h,v));break;default:Nh(l,h,v)}}function Rv(l){var h=l.alternate;if(h!==null&&(l=h.child,l!==null)){h.child=null;do h=l.sibling,l.sibling=null,l=h;while(l!==null)}}function fp(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var S=h[v];gi=S,rd(S,l)}Rv(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Lv(l),l=l.sibling}function Lv(l){switch(l.tag){case 0:case 11:case 15:fp(l),l.flags&2048&&vc(9,l,l.return);break;case 3:fp(l);break;case 12:fp(l);break;case 22:var h=l.stateNode;l.memoizedState!==null&&h._visibility&2&&(l.return===null||l.return.tag!==13)?(h._visibility&=-3,$m(l)):fp(l);break;default:fp(l)}}function $m(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var v=0;v<h.length;v++){var S=h[v];gi=S,rd(S,l)}Rv(l)}for(l=l.child;l!==null;){switch(h=l,h.tag){case 0:case 11:case 15:vc(8,h,h.return),$m(h);break;case 22:v=h.stateNode,v._visibility&2&&(v._visibility&=-3,$m(h));break;default:$m(h)}l=l.sibling}}function rd(l,h){for(;gi!==null;){var v=gi;switch(v.tag){case 0:case 11:case 15:vc(8,v,h);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var S=v.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:uu(v.memoizedState.cache)}if(S=v.child,S!==null)S.return=v,gi=S;else e:for(v=l;gi!==null;){S=gi;var z=S.sibling,j=S.return;if(ed(S),S===v){gi=null;break e}if(z!==null){z.return=j,gi=z;break e}gi=j}}}var qx={getCacheForType:function(l){var h=qn(Nn),v=h.data.get(l);return v===void 0&&(v=l(),h.data.set(l,v)),v},cacheSignal:function(){return qn(Nn).controller.signal}},Bv=typeof WeakMap=="function"?WeakMap:Map,en=0,_n=null,Pr=null,Cr=0,sn=0,ka=null,ds=!1,_u=!1,Ry=!1,wc=0,Zn=0,Sc=0,Fh=0,Ly=0,Gi=0,Uh=0,dp=null,co=null,By=!1,Zm=0,jv=0,pp=1/0,nd=null,Tc=null,yi=0,Ec=null,id=null,ps=0,jy=0,Hm=null,Nv=null,mp=0,Ny=null;function uo(){return(en&2)!==0&&Cr!==0?Cr&-Cr:Ve.T!==null?Yy():Ir()}function Fv(){if(Gi===0)if((Cr&536870912)===0||Sr){var l=_t;_t<<=1,(_t&3932160)===0&&(_t=262144),Gi=l}else Gi=536870912;return l=Bt.current,l!==null&&(l.flags|=32),Gi}function ho(l,h,v){(l===_n&&(sn===2||sn===9)||l.cancelPendingCommit!==null)&&(od(l,0),bu(l,Cr,Gi,!1)),ar(l,v),((en&2)===0||l!==_n)&&(l===_n&&((en&2)===0&&(Fh|=v),Zn===4&&bu(l,Cr,Gi,!1)),Vs(l))}function li(l,h,v){if((en&6)!==0)throw Error(a(327));var S=!v&&(h&127)===0&&(h&l.expiredLanes)===0||ir(l,h),z=S?sd(l,h):Wm(l,h,!0),j=S;do{if(z===0){_u&&!S&&bu(l,h,0,!1);break}else{if(v=l.current.alternate,j&&!$x(v)){z=Wm(l,h,!1),j=!1;continue}if(z===2){if(j=h,l.errorRecoveryDisabledLanes&j)var Q=0;else Q=l.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){h=Q;e:{var de=l;z=dp;var Le=de.current.memoizedState.isDehydrated;if(Le&&(od(de,Q).flags|=256),Q=Wm(de,Q,!1),Q!==2){if(Ry&&!Le){de.errorRecoveryDisabledLanes|=j,Fh|=j,z=4;break e}j=co,co=z,j!==null&&(co===null?co=j:co.push.apply(co,j))}z=Q}if(j=!1,z!==2)continue}}if(z===1){od(l,0),bu(l,h,0,!0);break}e:{switch(S=l,j=z,j){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:bu(S,h,Gi,!ds);break e;case 2:co=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(z=Zm+300-ni(),10<z)){if(bu(S,h,Gi,!ds),Ut(S,0,!0)!==0)break e;ps=h,S.timeoutHandle=dg(ad.bind(null,S,v,co,nd,By,h,Gi,Fh,Uh,ds,j,"Throttled",-0,0),z);break e}ad(S,v,co,nd,By,h,Gi,Fh,Uh,ds,j,null,-0,0)}}break}while(!0);Vs(l)}function ad(l,h,v,S,z,j,Q,de,Le,rt,gt,Tt,nt,st){if(l.timeoutHandle=-1,Tt=h.subtreeFlags,Tt&8192||(Tt&16785408)===16785408){Tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bo},kv(h,j,Tt);var Zt=(j&62914560)===j?Zm-ni():(j&4194048)===j?jv-ni():0;if(Zt=u_(Tt,Zt),Zt!==null){ps=j,l.cancelPendingCommit=Zt($v.bind(null,l,h,j,v,S,z,Q,de,Le,gt,Tt,null,nt,st)),bu(l,j,Q,!rt);return}}$v(l,h,j,v,S,z,Q,de,Le)}function $x(l){for(var h=l;;){var v=h.tag;if((v===0||v===11||v===15)&&h.flags&16384&&(v=h.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var S=0;S<v.length;S++){var z=v[S],j=z.getSnapshot;z=z.value;try{if(!Wi(j(),z))return!1}catch{return!1}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function bu(l,h,v,S){h&=~Ly,h&=~Fh,l.suspendedLanes|=h,l.pingedLanes&=~h,S&&(l.warmLanes|=h),S=l.expirationTimes;for(var z=h;0<z;){var j=31-Oe(z),Q=1<<j;S[j]=-1,z&=~Q}v!==0&&Pn(l,v,h)}function gp(){return(en&6)===0?(Oo(0),!1):!0}function Ym(){if(Pr!==null){if(sn===0)var l=Pr.return;else l=Pr,rs=eo=null,Bs(l),as=null,cc=0,l=Pr;for(;l!==null;)Nm(l.alternate,l),l=l.return;Pr=null}}function od(l,h){var v=l.timeoutHandle;v!==-1&&(l.timeoutHandle=-1,r0(v)),v=l.cancelPendingCommit,v!==null&&(l.cancelPendingCommit=null,v()),ps=0,Ym(),_n=l,Pr=v=Aa(l.current,null),Cr=h,sn=0,ka=null,ds=!1,_u=ir(l,h),Ry=!1,Uh=Gi=Ly=Fh=Sc=Zn=0,co=dp=null,By=!1,(h&8)!==0&&(h|=h&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=h;0<S;){var z=31-Oe(S),j=1<<z;h|=l[z],S&=~j}return wc=h,ac(),v}function Fy(l,h){br=null,Ve.H=Gr,h===So||h===ea?(h=fu(),sn=3):h===bl?(h=fu(),sn=4):sn=h===Dm?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ka=h,Pr===null&&(Zn=1,Do(l,Vi(h,l.current)))}function Uy(){var l=Bt.current;return l===null?!0:(Cr&4194048)===Cr?Gt===null:(Cr&62914560)===Cr||(Cr&536870912)!==0?l===Gt:!1}function Vh(){var l=Ve.H;return Ve.H=Gr,l===null?Gr:l}function Xm(){var l=Ve.A;return Ve.A=qx,l}function yp(){Zn=4,ds||(Cr&4194048)!==Cr&&Bt.current!==null||(_u=!0),(Sc&134217727)===0&&(Fh&134217727)===0||_n===null||bu(_n,Cr,Gi,!1)}function Wm(l,h,v){var S=en;en|=2;var z=Vh(),j=Xm();(_n!==l||Cr!==h)&&(nd=null,od(l,h)),h=!1;var Q=Zn;e:do try{if(sn!==0&&Pr!==null){var de=Pr,Le=ka;switch(sn){case 8:Ym(),Q=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(h=!0);var rt=sn;if(sn=0,ka=null,ld(l,de,Le,rt),v&&_u){Q=0;break e}break;default:rt=sn,sn=0,ka=null,ld(l,de,Le,rt)}}Km(),Q=Zn;break}catch(gt){Fy(l,gt)}while(!0);return h&&l.shellSuspendCounter++,rs=eo=null,en=S,Ve.H=z,Ve.A=j,Pr===null&&(_n=null,Cr=0,ac()),Q}function Km(){for(;Pr!==null;)Vv(Pr)}function sd(l,h){var v=en;en|=2;var S=Vh(),z=Xm();_n!==l||Cr!==h?(nd=null,pp=ni()+500,od(l,h)):_u=ir(l,h);e:do try{if(sn!==0&&Pr!==null){h=Pr;var j=ka;t:switch(sn){case 1:sn=0,ka=null,ld(l,h,j,1);break;case 2:case 9:if(Sh(j)){sn=0,ka=null,Gv(h);break}h=function(){sn!==2&&sn!==9||_n!==l||(sn=7),Vs(l)},j.then(h,h);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:Sh(j)?(sn=0,ka=null,Gv(h)):(sn=0,ka=null,ld(l,h,j,7));break;case 5:var Q=null;switch(Pr.tag){case 26:Q=Pr.memoizedState;case 5:case 27:var de=Pr;if(Q?xg(Q):de.stateNode.complete){sn=0,ka=null;var Le=de.sibling;if(Le!==null)Pr=Le;else{var rt=de.return;rt!==null?(Pr=rt,Qm(rt)):Pr=null}break t}}sn=0,ka=null,ld(l,h,j,5);break;case 6:sn=0,ka=null,ld(l,h,j,6);break;case 8:Ym(),Zn=6;break e;default:throw Error(a(462))}}Uv();break}catch(gt){Fy(l,gt)}while(!0);return rs=eo=null,Ve.H=S,Ve.A=z,en=v,Pr!==null?0:(_n=null,Cr=0,ac(),Zn)}function Uv(){for(;Pr!==null&&!vo();)Vv(Pr)}function Vv(l){var h=na(l.alternate,l,wc);l.memoizedProps=l.pendingProps,h===null?Qm(l):Pr=h}function Gv(l){var h=l,v=h.alternate;switch(h.tag){case 15:case 0:h=Ev(v,h,h.pendingProps,h.type,void 0,Cr);break;case 11:h=Ev(v,h,h.pendingProps,h.type.render,h.ref,Cr);break;case 5:Bs(h);default:Nm(v,h),h=Pr=Em(h,wc),h=na(v,h,wc)}l.memoizedProps=l.pendingProps,h===null?Qm(l):Pr=h}function ld(l,h,v,S){rs=eo=null,Bs(h),as=null,cc=0;var z=h.return;try{if(Cm(l,z,h,v,Cr)){Zn=1,Do(l,Vi(v,l.current)),Pr=null;return}}catch(j){if(z!==null)throw Pr=z,j;Zn=1,Do(l,Vi(v,l.current)),Pr=null;return}h.flags&32768?(Sr||S===1?l=!0:_u||(Cr&536870912)!==0?l=!1:(ds=l=!0,(S===2||S===9||S===3||S===6)&&(S=Bt.current,S!==null&&S.tag===13&&(S.flags|=16384))),qv(h,l)):Qm(h)}function Qm(l){var h=l;do{if((h.flags&32768)!==0){qv(h,ds);return}l=h.return;var v=Cv(h.alternate,h,wc);if(v!==null){Pr=v;return}if(h=h.sibling,h!==null){Pr=h;return}Pr=h=l}while(h!==null);Zn===0&&(Zn=5)}function qv(l,h){do{var v=Vx(l.alternate,l);if(v!==null){v.flags&=32767,Pr=v;return}if(v=l.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!h&&(l=l.sibling,l!==null)){Pr=l;return}Pr=l=v}while(l!==null);Zn=6,Pr=null}function $v(l,h,v,S,z,j,Q,de,Le){l.cancelPendingCommit=null;do Jm();while(yi!==0);if((en&6)!==0)throw Error(a(327));if(h!==null){if(h===l.current)throw Error(a(177));if(j=h.lanes|h.childLanes,j|=ic,fn(l,v,j,Q,de,Le),l===_n&&(Pr=_n=null,Cr=0),id=h,Ec=l,ps=v,jy=j,Hm=z,Nv=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Kv(ws,function(){return Wv(),null})):(l.callbackNode=null,l.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=Ve.T,Ve.T=null,z=it.p,it.p=2,Q=en,en|=4;try{Gx(l,h,v)}finally{en=Q,it.p=z,Ve.T=S}}yi=1,Zv(),Hv(),Yv()}}function Zv(){if(yi===1){yi=0;var l=Ec,h=id,v=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||v){v=Ve.T,Ve.T=null;var S=it.p;it.p=2;var z=en;en|=4;try{Gm(h,l);var j=e0,Q=Df(l.containerInfo),de=j.focusedElem,Le=j.selectionRange;if(Q!==de&&de&&de.ownerDocument&&Cf(de.ownerDocument.documentElement,de)){if(Le!==null&&dh(de)){var rt=Le.start,gt=Le.end;if(gt===void 0&&(gt=rt),"selectionStart"in de)de.selectionStart=rt,de.selectionEnd=Math.min(gt,de.value.length);else{var Tt=de.ownerDocument||document,nt=Tt&&Tt.defaultView||window;if(nt.getSelection){var st=nt.getSelection(),Zt=de.textContent.length,lr=Math.min(Le.start,Zt),rn=Le.end===void 0?lr:Math.min(Le.end,Zt);!st.extend&&lr>rn&&(Q=rn,rn=lr,lr=Q);var $e=fh(de,lr),Ne=fh(de,rn);if($e&&Ne&&(st.rangeCount!==1||st.anchorNode!==$e.node||st.anchorOffset!==$e.offset||st.focusNode!==Ne.node||st.focusOffset!==Ne.offset)){var tt=Tt.createRange();tt.setStart($e.node,$e.offset),st.removeAllRanges(),lr>rn?(st.addRange(tt),st.extend(Ne.node,Ne.offset)):(tt.setEnd(Ne.node,Ne.offset),st.addRange(tt))}}}}for(Tt=[],st=de;st=st.parentNode;)st.nodeType===1&&Tt.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<Tt.length;de++){var bt=Tt[de];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}Cu=!!wp,e0=wp=null}finally{en=z,it.p=S,Ve.T=v}}l.current=h,yi=2}}function Hv(){if(yi===2){yi=0;var l=Ec,h=id,v=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||v){v=Ve.T,Ve.T=null;var S=it.p;it.p=2;var z=en;en|=4;try{Oy(l,h.alternate,h)}finally{en=z,it.p=S,Ve.T=v}}yi=3}}function Yv(){if(yi===4||yi===3){yi=0,qc();var l=Ec,h=id,v=ps,S=Nv;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?yi=5:(yi=0,id=Ec=null,Xv(l,l.pendingLanes));var z=l.pendingLanes;if(z===0&&(Tc=null),St(v),h=h.stateNode,se&&typeof se.onCommitFiberRoot=="function")try{se.onCommitFiberRoot(ie,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=Ve.T,z=it.p,it.p=2,Ve.T=null;try{for(var j=l.onRecoverableError,Q=0;Q<S.length;Q++){var de=S[Q];j(de.value,{componentStack:de.stack})}}finally{Ve.T=h,it.p=z}}(ps&3)!==0&&Jm(),Vs(l),z=l.pendingLanes,(v&261930)!==0&&(z&42)!==0?l===Ny?mp++:(mp=0,Ny=l):mp=0,Oo(0)}}function Xv(l,h){(l.pooledCacheLanes&=h)===0&&(h=l.pooledCache,h!=null&&(l.pooledCache=null,uu(h)))}function Jm(){return Zv(),Hv(),Yv(),Wv()}function Wv(){if(yi!==5)return!1;var l=Ec,h=jy;jy=0;var v=St(ps),S=Ve.T,z=it.p;try{it.p=32>v?32:v,Ve.T=null,v=Hm,Hm=null;var j=Ec,Q=ps;if(yi=0,id=Ec=null,ps=0,(en&6)!==0)throw Error(a(331));var de=en;if(en|=4,Lv(j.current),ky(j,j.current,Q,v),en=de,Oo(0,!1),se&&typeof se.onPostCommitFiberRoot=="function")try{se.onPostCommitFiberRoot(ie,j)}catch{}return!0}finally{it.p=z,Ve.T=S,Xv(l,h)}}function Vy(l,h,v){h=Vi(v,h),h=kh(l.stateNode,h,2),l=zs(l,h,2),l!==null&&(ar(l,2),Vs(l))}function tn(l,h,v){if(l.tag===3)Vy(l,l,v);else for(;h!==null;){if(h.tag===3){Vy(h,l,v);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Tc===null||!Tc.has(S))){l=Vi(v,l),v=Rh(2),S=zs(h,v,2),S!==null&&(Lh(v,S,h,l),ar(S,2),Vs(S));break}}h=h.return}}function eg(l,h,v){var S=l.pingCache;if(S===null){S=l.pingCache=new Bv;var z=new Set;S.set(h,z)}else z=S.get(h),z===void 0&&(z=new Set,S.set(h,z));z.has(v)||(Ry=!0,z.add(v),l=xu.bind(null,l,h,v),h.then(l,l))}function xu(l,h,v){var S=l.pingCache;S!==null&&S.delete(h),l.pingedLanes|=l.suspendedLanes&v,l.warmLanes&=~v,_n===l&&(Cr&v)===v&&(Zn===4||Zn===3&&(Cr&62914560)===Cr&&300>ni()-Zm?(en&2)===0&&od(l,0):Ly|=v,Uh===Cr&&(Uh=0)),Vs(l)}function vp(l,h){h===0&&(h=Qt()),l=Ja(l,h),l!==null&&(ar(l,h),Vs(l))}function Gy(l){var h=l.memoizedState,v=0;h!==null&&(v=h.retryLane),vp(l,v)}function Zx(l,h){var v=0;switch(l.tag){case 31:case 13:var S=l.stateNode,z=l.memoizedState;z!==null&&(v=z.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(h),vp(l,v)}function Kv(l,h){return bs(l,h)}var tg=null,cd=null,qy=!1,rg=!1,$y=!1,Ac=0;function Vs(l){l!==cd&&l.next===null&&(cd===null?tg=cd=l:cd=cd.next=l),rg=!0,qy||(qy=!0,Hy())}function Oo(l,h){if(!$y&&rg){$y=!0;do for(var v=!1,S=tg;S!==null;){if(l!==0){var z=S.pendingLanes;if(z===0)var j=0;else{var Q=S.suspendedLanes,de=S.pingedLanes;j=(1<<31-Oe(42|l)+1)-1,j&=z&~(Q&~de),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(v=!0,_p(S,j))}else j=Cr,j=Ut(S,S===_n?j:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(j&3)===0||ir(S,j)||(v=!0,_p(S,j));S=S.next}while(v);$y=!1}}function wu(){Zy()}function Zy(){rg=qy=!1;var l=0;Ac!==0&&fg()&&(l=Ac);for(var h=ni(),v=null,S=tg;S!==null;){var z=S.next,j=ng(S,h);j===0?(S.next=null,v===null?tg=z:v.next=z,z===null&&(cd=v)):(v=S,(l!==0||(j&3)!==0)&&(rg=!0)),S=z}yi!==0&&yi!==5||Oo(l),Ac!==0&&(Ac=0)}function ng(l,h){for(var v=l.suspendedLanes,S=l.pingedLanes,z=l.expirationTimes,j=l.pendingLanes&-62914561;0<j;){var Q=31-Oe(j),de=1<<Q,Le=z[Q];Le===-1?((de&v)===0||(de&S)!==0)&&(z[Q]=Xt(de,h)):Le<=h&&(l.expiredLanes|=de),j&=~de}if(h=_n,v=Cr,v=Ut(l,l===h?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S=l.callbackNode,v===0||l===h&&(sn===2||sn===9)||l.cancelPendingCommit!==null)return S!==null&&S!==null&&Uo(S),l.callbackNode=null,l.callbackPriority=0;if((v&3)===0||ir(l,v)){if(h=v&-v,h===l.callbackPriority)return h;switch(S!==null&&Uo(S),St(v)){case 2:case 8:v=xs;break;case 32:v=ws;break;case 268435456:v=rl;break;default:v=ws}return S=Qv.bind(null,l),v=bs(v,S),l.callbackPriority=h,l.callbackNode=v,h}return S!==null&&S!==null&&Uo(S),l.callbackPriority=2,l.callbackNode=null,2}function Qv(l,h){if(yi!==0&&yi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var v=l.callbackNode;if(Jm()&&l.callbackNode!==v)return null;var S=Cr;return S=Ut(l,l===_n?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S===0?null:(li(l,S,h),ng(l,ni()),l.callbackNode!=null&&l.callbackNode===v?Qv.bind(null,l):null)}function _p(l,h){if(Jm())return null;li(l,h,!0)}function Hy(){i0(function(){(en&6)!==0?bs($c,wu):Zy()})}function Yy(){if(Ac===0){var l=lc;l===0&&(l=He,He<<=1,(He&261888)===0&&(He=256)),Ac=l}return Ac}function ig(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:gr(""+l)}function ag(l,h){var v=h.ownerDocument.createElement("input");return v.name=h.name,v.value=h.value,l.id&&v.setAttribute("form",l.id),h.parentNode.insertBefore(v,h),l=new FormData(l),v.parentNode.removeChild(v),l}function ud(l,h,v,S,z){if(h==="submit"&&v&&v.stateNode===z){var j=ig((z[Pt]||null).action),Q=S.submitter;Q&&(h=(h=Q[Pt]||null)?ig(h.formAction):Q.getAttribute("formAction"),h!==null&&(j=h,Q=null));var de=new th("action","action",null,S,z);l.push({event:de,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Ac!==0){var Le=Q?ag(z,Q):new FormData(z);zn(v,{pending:!0,data:Le,method:z.method,action:j},null,Le)}}else typeof j=="function"&&(de.preventDefault(),Le=Q?ag(z,Q):new FormData(z),zn(v,{pending:!0,data:Le,method:z.method,action:j},j,Le))},currentTarget:z}]})}}for(var og=0;og<kf.length;og++){var sg=kf[og],Xy=sg.toLowerCase(),Jv=sg[0].toUpperCase()+sg.slice(1);Ta(Xy,"on"+Jv)}Ta(gh,"onAnimationEnd"),Ta(yh,"onAnimationIteration"),Ta(zf,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(nc,"onTransitionRun"),Ta(vh,"onTransitionStart"),Ta(au,"onTransitionCancel"),Ta(Sa,"onTransitionEnd"),Ts("onMouseEnter",["mouseout","mouseover"]),Ts("onMouseLeave",["mouseout","mouseover"]),Ts("onPointerEnter",["pointerout","pointerover"]),Ts("onPointerLeave",["pointerout","pointerover"]),Ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function t_(l,h){h=(h&4)!==0;for(var v=0;v<l.length;v++){var S=l[v],z=S.event;S=S.listeners;e:{var j=void 0;if(h)for(var Q=S.length-1;0<=Q;Q--){var de=S[Q],Le=de.instance,rt=de.currentTarget;if(de=de.listener,Le!==j&&z.isPropagationStopped())break e;j=de,z.currentTarget=rt;try{j(z)}catch(gt){Wo(gt)}z.currentTarget=null,j=Le}else for(Q=0;Q<S.length;Q++){if(de=S[Q],Le=de.instance,rt=de.currentTarget,de=de.listener,Le!==j&&z.isPropagationStopped())break e;j=de,z.currentTarget=rt;try{j(z)}catch(gt){Wo(gt)}z.currentTarget=null,j=Le}}}}function Dr(l,h){var v=h[ur];v===void 0&&(v=h[ur]=new Set);var S=l+"__bubble";v.has(S)||(cg(h,l,2,!1),v.add(S))}function Wy(l,h,v){var S=0;h&&(S|=4),cg(v,l,S,h)}var lg="_reactListening"+Math.random().toString(36).slice(2);function Ky(l){if(!l[lg]){l[lg]=!0,Zc.forEach(function(v){v!=="selectionchange"&&(e_.has(v)||Wy(v,!1,l),Wy(v,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[lg]||(h[lg]=!0,Wy("selectionchange",!1,h))}}function cg(l,h,v,S){switch(g_(h)){case 2:var z=Hx;break;case 8:z=p0;break;default:z=zp}v=z.bind(null,h,v,l),z=void 0,!Bi||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(z=!0),S?z!==void 0?l.addEventListener(h,v,{capture:!0,passive:z}):l.addEventListener(h,v,!0):z!==void 0?l.addEventListener(h,v,{passive:z}):l.addEventListener(h,v,!1)}function Cl(l,h,v,S,z){var j=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Q=S.tag;if(Q===3||Q===4){var de=S.stateNode.containerInfo;if(de===z)break;if(Q===4)for(Q=S.return;Q!==null;){var Le=Q.tag;if((Le===3||Le===4)&&Q.stateNode.containerInfo===z)return;Q=Q.return}for(;de!==null;){if(Q=Go(de),Q===null)return;if(Le=Q.tag,Le===5||Le===6||Le===26||Le===27){S=j=Q;continue e}de=de.parentNode}}S=S.return}Wr(function(){var rt=j,gt=eh(v),Tt=[];e:{var nt=Vd.get(l);if(nt!==void 0){var st=th,Zt=l;switch(l){case"keypress":if(wa(v)===0)break e;case"keydown":case"keyup":st=In;break;case"focusin":Zt="focus",st=ll;break;case"focusout":Zt="blur",st=ll;break;case"beforeblur":case"afterblur":st=ll;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=by;break;case gh:case yh:case zf:st=dm;break;case Sa:st=Ef;break;case"scroll":case"scrollend":st=Kl;break;case"wheel":st=Bd;break;case"copy":case"cut":case"paste":st=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Tf;break;case"toggle":case"beforetoggle":st=Jc}var lr=(h&4)!==0,rn=!lr&&(l==="scroll"||l==="scrollend"),$e=lr?nt!==null?nt+"Capture":null:nt;lr=[];for(var Ne=rt,tt;Ne!==null;){var bt=Ne;if(tt=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||tt===null||$e===null||(bt=Xa(Ne,$e),bt!=null&&lr.push(hd(Ne,bt,tt))),rn)break;Ne=Ne.return}0<lr.length&&(nt=new st(nt,Zt,null,v,gt),Tt.push({event:nt,listeners:lr}))}}if((h&7)===0){e:{if(nt=l==="mouseover"||l==="pointerover",st=l==="mouseout"||l==="pointerout",nt&&v!==kd&&(Zt=v.relatedTarget||v.fromElement)&&(Go(Zt)||Zt[Kt]))break e;if((st||nt)&&(nt=gt.window===gt?gt:(nt=gt.ownerDocument)?nt.defaultView||nt.parentWindow:window,st?(Zt=v.relatedTarget||v.toElement,st=rt,Zt=Zt?Go(Zt):null,Zt!==null&&(rn=g(Zt),lr=Zt.tag,Zt!==rn||lr!==5&&lr!==27&&lr!==6)&&(Zt=null)):(st=null,Zt=rt),st!==Zt)){if(lr=Ql,bt="onMouseLeave",$e="onMouseEnter",Ne="mouse",(l==="pointerout"||l==="pointerover")&&(lr=Tf,bt="onPointerLeave",$e="onPointerEnter",Ne="pointer"),rn=st==null?nt:qo(st),tt=Zt==null?nt:qo(Zt),nt=new lr(bt,Ne+"leave",st,v,gt),nt.target=rn,nt.relatedTarget=tt,bt=null,Go(gt)===rt&&(lr=new lr($e,Ne+"enter",Zt,v,gt),lr.target=tt,lr.relatedTarget=rn,bt=lr),rn=bt,st&&Zt)t:{for(lr=r_,$e=st,Ne=Zt,tt=0,bt=$e;bt;bt=lr(bt))tt++;bt=0;for(var nr=Ne;nr;nr=lr(nr))bt++;for(;0<tt-bt;)$e=lr($e),tt--;for(;0<bt-tt;)Ne=lr(Ne),bt--;for(;tt--;){if($e===Ne||Ne!==null&&$e===Ne.alternate){lr=$e;break t}$e=lr($e),Ne=lr(Ne)}lr=null}else lr=null;st!==null&&Qy(Tt,nt,st,lr,!1),Zt!==null&&rn!==null&&Qy(Tt,rn,Zt,lr,!0)}}e:{if(nt=rt?qo(rt):window,st=nt.nodeName&&nt.nodeName.toLowerCase(),st==="select"||st==="input"&&nt.type==="file")var Yr=hl;else if(Mf(nt))if(jd)Yr=Sm;else{Yr=wm;var Wt=xy}else st=nt.nodeName,!st||st.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?rt&&Yl(rt.elementType)&&(Yr=hl):Yr=hh;if(Yr&&(Yr=Yr(l,rt))){Pf(Tt,Yr,v,gt);break e}Wt&&Wt(l,nt,rt),l==="focusout"&&rt&&nt.type==="number"&&rt.memoizedProps.value!=null&&Ju(nt,"number",nt.value)}switch(Wt=rt?qo(rt):window,l){case"focusin":(Mf(Wt)||Wt.contentEditable==="true")&&(Qa=Wt,ph=rt,mh=null);break;case"focusout":mh=ph=Qa=null;break;case"mousedown":Of=!0;break;case"contextmenu":case"mouseup":case"dragend":Of=!1,Tm(Tt,v,gt);break;case"selectionchange":if(If)break;case"keydown":case"keyup":Tm(Tt,v,gt)}var yr;if(jn)e:{switch(l){case"compositionstart":var or="onCompositionStart";break e;case"compositionend":or="onCompositionEnd";break e;case"compositionupdate":or="onCompositionUpdate";break e}or=void 0}else xo?sh(l,v)&&(or="onCompositionEnd"):l==="keydown"&&v.keyCode===229&&(or="onCompositionStart");or&&(nu&&v.locale!=="ko"&&(xo||or!=="onCompositionStart"?or==="onCompositionEnd"&&xo&&(yr=ol()):(xa=gt,Ho="value"in xa?xa.value:xa.textContent,xo=!0)),Wt=bp(rt,or),0<Wt.length&&(or=new Ld(or,l,null,v,gt),Tt.push({event:or,listeners:Wt}),yr?or.data=yr:(yr=ym(v),yr!==null&&(or.data=yr)))),(yr=ru?Af(l,v):vm(l,v))&&(or=bp(rt,"onBeforeInput"),0<or.length&&(Wt=new Ld("onBeforeInput","beforeinput",null,v,gt),Tt.push({event:Wt,listeners:or}),Wt.data=yr)),ud(Tt,l,rt,v,gt)}t_(Tt,h)})}function hd(l,h,v){return{instance:l,listener:h,currentTarget:v}}function bp(l,h){for(var v=h+"Capture",S=[];l!==null;){var z=l,j=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||j===null||(z=Xa(l,v),z!=null&&S.unshift(hd(l,z,j)),z=Xa(l,h),z!=null&&S.push(hd(l,z,j))),l.tag===3)return S;l=l.return}return[]}function r_(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Qy(l,h,v,S,z){for(var j=h._reactName,Q=[];v!==null&&v!==S;){var de=v,Le=de.alternate,rt=de.stateNode;if(de=de.tag,Le!==null&&Le===S)break;de!==5&&de!==26&&de!==27||rt===null||(Le=rt,z?(rt=Xa(v,j),rt!=null&&Q.unshift(hd(v,rt,Le))):z||(rt=Xa(v,j),rt!=null&&Q.push(hd(v,rt,Le)))),v=v.return}Q.length!==0&&l.push({event:h,listeners:Q})}var n_=/\r\n?/g,i_=/\u0000|\uFFFD/g;function xp(l){return(typeof l=="string"?l:""+l).replace(n_,`
`).replace(i_,"")}function Jy(l,h){return h=xp(h),xp(l)===h}function Hr(l,h,v,S,z,j){switch(v){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||Es(l,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&Es(l,""+S);break;case"className":Zo(l,"class",S);break;case"tabIndex":Zo(l,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Zo(l,v,S);break;case"style":Sf(l,S,j);break;case"data":if(h!=="object"){Zo(l,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||v!=="href")){l.removeAttribute(v);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(v);break}S=gr(""+S),l.setAttribute(v,S);break;case"action":case"formAction":if(typeof S=="function"){l.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(v==="formAction"?(h!=="input"&&Hr(l,h,"name",z.name,z,null),Hr(l,h,"formEncType",z.formEncType,z,null),Hr(l,h,"formMethod",z.formMethod,z,null),Hr(l,h,"formTarget",z.formTarget,z,null)):(Hr(l,h,"encType",z.encType,z,null),Hr(l,h,"method",z.method,z,null),Hr(l,h,"target",z.target,z,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(v);break}S=gr(""+S),l.setAttribute(v,S);break;case"onClick":S!=null&&(l.onclick=bo);break;case"onScroll":S!=null&&Dr("scroll",l);break;case"onScrollEnd":S!=null&&Dr("scrollend",l);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(v=S.__html,v!=null){if(z.children!=null)throw Error(a(60));l.innerHTML=v}}break;case"multiple":l.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":l.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){l.removeAttribute("xlink:href");break}v=gr(""+S),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(v,""+S):l.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(v,""):l.removeAttribute(v);break;case"capture":case"download":S===!0?l.setAttribute(v,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(v,S):l.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?l.setAttribute(v,S):l.removeAttribute(v);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?l.removeAttribute(v):l.setAttribute(v,S);break;case"popover":Dr("beforetoggle",l),Dr("toggle",l),Wu(l,"popover",S);break;case"xlinkActuate":Ya(l,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Ya(l,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Ya(l,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Ya(l,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Ya(l,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Ya(l,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Ya(l,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Ya(l,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Ya(l,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Wu(l,"is",S);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=al.get(v)||v,Wu(l,v,S))}}function ug(l,h,v,S,z,j){switch(v){case"style":Sf(l,S,j);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(v=S.__html,v!=null){if(z.children!=null)throw Error(a(60));l.innerHTML=v}}break;case"children":typeof S=="string"?Es(l,S):(typeof S=="number"||typeof S=="bigint")&&Es(l,""+S);break;case"onScroll":S!=null&&Dr("scroll",l);break;case"onScrollEnd":S!=null&&Dr("scrollend",l);break;case"onClick":S!=null&&(l.onclick=bo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pi.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(z=v.endsWith("Capture"),h=v.slice(2,z?v.length-7:void 0),j=l[Pt]||null,j=j!=null?j[v]:null,typeof j=="function"&&l.removeEventListener(h,j,z),typeof S=="function")){typeof j!="function"&&j!==null&&(v in l?l[v]=null:l.hasAttribute(v)&&l.removeAttribute(v)),l.addEventListener(h,S,z);break e}v in l?l[v]=S:S===!0?l.setAttribute(v,""):Wu(l,v,S)}}}function Mi(l,h,v){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Dr("error",l),Dr("load",l);var S=!1,z=!1,j;for(j in v)if(v.hasOwnProperty(j)){var Q=v[j];if(Q!=null)switch(j){case"src":S=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Hr(l,h,j,Q,v,null)}}z&&Hr(l,h,"srcSet",v.srcSet,v,null),S&&Hr(l,h,"src",v.src,v,null);return;case"input":Dr("invalid",l);var de=j=Q=z=null,Le=null,rt=null;for(S in v)if(v.hasOwnProperty(S)){var gt=v[S];if(gt!=null)switch(S){case"name":z=gt;break;case"type":Q=gt;break;case"checked":Le=gt;break;case"defaultChecked":rt=gt;break;case"value":j=gt;break;case"defaultValue":de=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(a(137,h));break;default:Hr(l,h,S,gt,v,null)}}wf(l,j,de,Le,rt,Q,z,!1);return;case"select":Dr("invalid",l),S=Q=j=null;for(z in v)if(v.hasOwnProperty(z)&&(de=v[z],de!=null))switch(z){case"value":j=de;break;case"defaultValue":Q=de;break;case"multiple":S=de;default:Hr(l,h,z,de,v,null)}h=j,v=Q,l.multiple=!!S,h!=null?il(l,!!S,h,!1):v!=null&&il(l,!!S,v,!0);return;case"textarea":Dr("invalid",l),j=z=S=null;for(Q in v)if(v.hasOwnProperty(Q)&&(de=v[Q],de!=null))switch(Q){case"value":S=de;break;case"defaultValue":z=de;break;case"children":j=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(91));break;default:Hr(l,h,Q,de,v,null)}Xc(l,S,z,j);return;case"option":for(Le in v)v.hasOwnProperty(Le)&&(S=v[Le],S!=null)&&(Le==="selected"?l.selected=S&&typeof S!="function"&&typeof S!="symbol":Hr(l,h,Le,S,v,null));return;case"dialog":Dr("beforetoggle",l),Dr("toggle",l),Dr("cancel",l),Dr("close",l);break;case"iframe":case"object":Dr("load",l);break;case"video":case"audio":for(S=0;S<Su.length;S++)Dr(Su[S],l);break;case"image":Dr("error",l),Dr("load",l);break;case"details":Dr("toggle",l);break;case"embed":case"source":case"link":Dr("error",l),Dr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in v)if(v.hasOwnProperty(rt)&&(S=v[rt],S!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Hr(l,h,rt,S,v,null)}return;default:if(Yl(h)){for(gt in v)v.hasOwnProperty(gt)&&(S=v[gt],S!==void 0&&ug(l,h,gt,S,v,void 0));return}}for(de in v)v.hasOwnProperty(de)&&(S=v[de],S!=null&&Hr(l,h,de,S,v,null))}function a_(l,h,v,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,j=null,Q=null,de=null,Le=null,rt=null,gt=null;for(st in v){var Tt=v[st];if(v.hasOwnProperty(st)&&Tt!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":Le=Tt;default:S.hasOwnProperty(st)||Hr(l,h,st,null,S,Tt)}}for(var nt in S){var st=S[nt];if(Tt=v[nt],S.hasOwnProperty(nt)&&(st!=null||Tt!=null))switch(nt){case"type":j=st;break;case"name":z=st;break;case"checked":rt=st;break;case"defaultChecked":gt=st;break;case"value":Q=st;break;case"defaultValue":de=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(a(137,h));break;default:st!==Tt&&Hr(l,h,nt,st,S,Tt)}}Qu(l,Q,de,Le,rt,gt,j,z);return;case"select":st=Q=de=nt=null;for(j in v)if(Le=v[j],v.hasOwnProperty(j)&&Le!=null)switch(j){case"value":break;case"multiple":st=Le;default:S.hasOwnProperty(j)||Hr(l,h,j,null,S,Le)}for(z in S)if(j=S[z],Le=v[z],S.hasOwnProperty(z)&&(j!=null||Le!=null))switch(z){case"value":nt=j;break;case"defaultValue":de=j;break;case"multiple":Q=j;default:j!==Le&&Hr(l,h,z,j,S,Le)}h=de,v=Q,S=st,nt!=null?il(l,!!v,nt,!1):!!S!=!!v&&(h!=null?il(l,!!v,h,!0):il(l,!!v,v?[]:"",!1));return;case"textarea":st=nt=null;for(de in v)if(z=v[de],v.hasOwnProperty(de)&&z!=null&&!S.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:Hr(l,h,de,null,S,z)}for(Q in S)if(z=S[Q],j=v[Q],S.hasOwnProperty(Q)&&(z!=null||j!=null))switch(Q){case"value":nt=z;break;case"defaultValue":st=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(91));break;default:z!==j&&Hr(l,h,Q,z,S,j)}hm(l,nt,st);return;case"option":for(var Zt in v)nt=v[Zt],v.hasOwnProperty(Zt)&&nt!=null&&!S.hasOwnProperty(Zt)&&(Zt==="selected"?l.selected=!1:Hr(l,h,Zt,null,S,nt));for(Le in S)nt=S[Le],st=v[Le],S.hasOwnProperty(Le)&&nt!==st&&(nt!=null||st!=null)&&(Le==="selected"?l.selected=nt&&typeof nt!="function"&&typeof nt!="symbol":Hr(l,h,Le,nt,S,st));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lr in v)nt=v[lr],v.hasOwnProperty(lr)&&nt!=null&&!S.hasOwnProperty(lr)&&Hr(l,h,lr,null,S,nt);for(rt in S)if(nt=S[rt],st=v[rt],S.hasOwnProperty(rt)&&nt!==st&&(nt!=null||st!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(a(137,h));break;default:Hr(l,h,rt,nt,S,st)}return;default:if(Yl(h)){for(var rn in v)nt=v[rn],v.hasOwnProperty(rn)&&nt!==void 0&&!S.hasOwnProperty(rn)&&ug(l,h,rn,void 0,S,nt);for(gt in S)nt=S[gt],st=v[gt],!S.hasOwnProperty(gt)||nt===st||nt===void 0&&st===void 0||ug(l,h,gt,nt,S,st);return}}for(var $e in v)nt=v[$e],v.hasOwnProperty($e)&&nt!=null&&!S.hasOwnProperty($e)&&Hr(l,h,$e,null,S,nt);for(Tt in S)nt=S[Tt],st=v[Tt],!S.hasOwnProperty(Tt)||nt===st||nt==null&&st==null||Hr(l,h,Tt,nt,S,st)}function Ra(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fd(){if(typeof performance.getEntriesByType=="function"){for(var l=0,h=0,v=performance.getEntriesByType("resource"),S=0;S<v.length;S++){var z=v[S],j=z.transferSize,Q=z.initiatorType,de=z.duration;if(j&&de&&Ra(Q)){for(Q=0,de=z.responseEnd,S+=1;S<v.length;S++){var Le=v[S],rt=Le.startTime;if(rt>de)break;var gt=Le.transferSize,Tt=Le.initiatorType;gt&&Ra(Tt)&&(Le=Le.responseEnd,Q+=gt*(Le<de?1:(de-rt)/(Le-rt)))}if(--S,h+=8*(j+Q)/(z.duration/1e3),l++,10<l)break}}if(0<l)return h/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var wp=null,e0=null;function Sp(l){return l.nodeType===9?l:l.ownerDocument}function Tu(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function t0(l,h){if(l===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&h==="foreignObject"?0:l}function hg(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Eu=null;function fg(){var l=window.event;return l&&l.type==="popstate"?l===Eu?!1:(Eu=l,!0):(Eu=null,!1)}var dg=typeof setTimeout=="function"?setTimeout:void 0,r0=typeof clearTimeout=="function"?clearTimeout:void 0,n0=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof n0<"u"?function(l){return n0.resolve(null).then(l).catch(a0)}:dg;function a0(l){setTimeout(function(){throw l})}function Au(l){return l==="head"}function o_(l,h){var v=h,S=0;do{var z=v.nextSibling;if(l.removeChild(v),z&&z.nodeType===8)if(v=z.data,v==="/$"||v==="/&"){if(S===0){l.removeChild(z),gd(h);return}S--}else if(v==="$"||v==="$?"||v==="$~"||v==="$!"||v==="&")S++;else if(v==="html")Tp(l.ownerDocument.documentElement);else if(v==="head"){v=l.ownerDocument.head,Tp(v);for(var j=v.firstChild;j;){var Q=j.nextSibling,de=j.nodeName;j[hr]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&j.rel.toLowerCase()==="stylesheet"||v.removeChild(j),j=Q}}else v==="body"&&Tp(l.ownerDocument.body);v=z}while(v);gd(h)}function qr(l,h){var v=l;l=0;do{var S=v.nextSibling;if(v.nodeType===1?h?(v._stashedDisplay=v.style.display,v.style.display="none"):(v.style.display=v._stashedDisplay||"",v.getAttribute("style")===""&&v.removeAttribute("style")):v.nodeType===3&&(h?(v._stashedText=v.nodeValue,v.nodeValue=""):v.nodeValue=v._stashedText||""),S&&S.nodeType===8)if(v=S.data,v==="/$"){if(l===0)break;l--}else v!=="$"&&v!=="$?"&&v!=="$~"&&v!=="$!"||l++;v=S}while(v)}function Dl(l){var h=l.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var v=h;switch(h=h.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":Dl(v),$l(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}l.removeChild(v)}}function Ii(l,h,v,S){for(;l.nodeType===1;){var z=v;if(l.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(S){if(!l[hr])switch(h){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(j=l.getAttribute("rel"),j==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(j!==z.rel||l.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||l.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||l.getAttribute("title")!==(z.title==null?null:z.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(j=l.getAttribute("src"),(j!==(z.src==null?null:z.src)||l.getAttribute("type")!==(z.type==null?null:z.type)||l.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&j&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(h==="input"&&l.type==="hidden"){var j=z.name==null?null:""+z.name;if(z.type==="hidden"&&l.getAttribute("name")===j)return l}else return l;if(l=zo(l.nextSibling),l===null)break}return null}function Gs(l,h,v){if(h==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!v||(l=zo(l.nextSibling),l===null))return null;return l}function Mu(l,h){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=zo(l.nextSibling),l===null))return null;return l}function ia(l){return l.data==="$?"||l.data==="$~"}function En(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function vi(l,h){var v=l.ownerDocument;if(l.data==="$~")l._reactRetry=h;else if(l.data!=="$?"||v.readyState!=="loading")h();else{var S=function(){h(),v.removeEventListener("DOMContentLoaded",S)};v.addEventListener("DOMContentLoaded",S),l._reactRetry=S}}function zo(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return l}var La=null;function Oi(l){l=l.nextSibling;for(var h=0;l;){if(l.nodeType===8){var v=l.data;if(v==="/$"||v==="/&"){if(h===0)return zo(l.nextSibling);h--}else v!=="$"&&v!=="$!"&&v!=="$?"&&v!=="$~"&&v!=="&"||h++}l=l.nextSibling}return null}function pg(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var v=l.data;if(v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"){if(h===0)return l;h--}else v!=="/$"&&v!=="/&"||h++}l=l.previousSibling}return null}function s_(l,h,v){switch(h=Sp(v),l){case"html":if(l=h.documentElement,!l)throw Error(a(452));return l;case"head":if(l=h.head,!l)throw Error(a(453));return l;case"body":if(l=h.body,!l)throw Error(a(454));return l;default:throw Error(a(451))}}function Tp(l){for(var h=l.attributes;h.length;)l.removeAttributeNode(h[0]);$l(l)}var Rr=new Map,Ba=new Set;function Mc(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Il=it.d;it.d={f:l_,r:c_,D:aa,C:qs,L:gg,m:oa,X:yg,S:Pu,M:o0};function l_(){var l=Il.f(),h=gp();return l||h}function c_(l){var h=Ss(l);h!==null&&h.tag===5&&h.type==="form"?di(h):Il.r(l)}var Gh=typeof document>"u"?null:document;function mg(l,h,v){var S=Gh;if(S&&typeof h=="string"&&h){var z=Li(h);z='link[rel="'+l+'"][href="'+z+'"]',typeof v=="string"&&(z+='[crossorigin="'+v+'"]'),Ba.has(z)||(Ba.add(z),l={rel:l,crossOrigin:v,href:h},S.querySelector(z)===null&&(h=S.createElement("link"),Mi(h,"link",l),Cn(h),S.head.appendChild(h)))}}function aa(l){Il.D(l),mg("dns-prefetch",l,null)}function qs(l,h){Il.C(l,h),mg("preconnect",l,h)}function gg(l,h,v){Il.L(l,h,v);var S=Gh;if(S&&l&&h){var z='link[rel="preload"][as="'+Li(h)+'"]';h==="image"&&v&&v.imageSrcSet?(z+='[imagesrcset="'+Li(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(z+='[imagesizes="'+Li(v.imageSizes)+'"]')):z+='[href="'+Li(l)+'"]';var j=z;switch(h){case"style":j=qh(l);break;case"script":j=$h(l)}Rr.has(j)||(l=I({rel:"preload",href:h==="image"&&v&&v.imageSrcSet?void 0:l,as:h},v),Rr.set(j,l),S.querySelector(z)!==null||h==="style"&&S.querySelector(dd(j))||h==="script"&&S.querySelector(pd(j))||(h=S.createElement("link"),Mi(h,"link",l),Cn(h),S.head.appendChild(h)))}}function oa(l,h){Il.m(l,h);var v=Gh;if(v&&l){var S=h&&typeof h.as=="string"?h.as:"script",z='link[rel="modulepreload"][as="'+Li(S)+'"][href="'+Li(l)+'"]',j=z;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=$h(l)}if(!Rr.has(j)&&(l=I({rel:"modulepreload",href:l},h),Rr.set(j,l),v.querySelector(z)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(pd(j)))return}S=v.createElement("link"),Mi(S,"link",l),Cn(S),v.head.appendChild(S)}}}function Pu(l,h,v){Il.S(l,h,v);var S=Gh;if(S&&l){var z=$o(S).hoistableStyles,j=qh(l);h=h||"default";var Q=z.get(j);if(!Q){var de={loading:0,preload:null};if(Q=S.querySelector(dd(j)))de.loading=5;else{l=I({rel:"stylesheet",href:l,"data-precedence":h},v),(v=Rr.get(j))&&_g(l,v);var Le=Q=S.createElement("link");Cn(Le),Mi(Le,"link",l),Le._p=new Promise(function(rt,gt){Le.onload=rt,Le.onerror=gt}),Le.addEventListener("load",function(){de.loading|=1}),Le.addEventListener("error",function(){de.loading|=2}),de.loading|=4,md(Q,h,S)}Q={type:"stylesheet",instance:Q,count:1,state:de},z.set(j,Q)}}}function yg(l,h){Il.X(l,h);var v=Gh;if(v&&l){var S=$o(v).hoistableScripts,z=$h(l),j=S.get(z);j||(j=v.querySelector(pd(z)),j||(l=I({src:l,async:!0},h),(h=Rr.get(z))&&c0(l,h),j=v.createElement("script"),Cn(j),Mi(j,"link",l),v.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},S.set(z,j))}}function o0(l,h){Il.M(l,h);var v=Gh;if(v&&l){var S=$o(v).hoistableScripts,z=$h(l),j=S.get(z);j||(j=v.querySelector(pd(z)),j||(l=I({src:l,async:!0,type:"module"},h),(h=Rr.get(z))&&c0(l,h),j=v.createElement("script"),Cn(j),Mi(j,"link",l),v.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},S.set(z,j))}}function s0(l,h,v,S){var z=(z=$t.current)?Mc(z):null;if(!z)throw Error(a(446));switch(l){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(h=qh(v.href),v=$o(z).hoistableStyles,S=v.get(h),S||(S={type:"style",instance:null,count:0,state:null},v.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){l=qh(v.href);var j=$o(z).hoistableStyles,Q=j.get(l);if(Q||(z=z.ownerDocument||z,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(l,Q),(j=z.querySelector(dd(l)))&&!j._p&&(Q.instance=j,Q.state.loading=5),Rr.has(l)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Rr.set(l,v),j||vg(z,l,v,Q.state))),h&&S===null)throw Error(a(528,""));return Q}if(h&&S!==null)throw Error(a(529,""));return null;case"script":return h=v.async,v=v.src,typeof v=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=$h(v),v=$o(z).hoistableScripts,S=v.get(h),S||(S={type:"script",instance:null,count:0,state:null},v.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,l))}}function qh(l){return'href="'+Li(l)+'"'}function dd(l){return'link[rel="stylesheet"]['+l+"]"}function l0(l){return I({},l,{"data-precedence":l.precedence,precedence:null})}function vg(l,h,v,S){l.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=l.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Mi(h,"link",v),Cn(h),l.head.appendChild(h))}function $h(l){return'[src="'+Li(l)+'"]'}function pd(l){return"script[async]"+l}function Zh(l,h,v){if(h.count++,h.instance===null)switch(h.type){case"style":var S=l.querySelector('style[data-href~="'+Li(v.href)+'"]');if(S)return h.instance=S,Cn(S),S;var z=I({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return S=(l.ownerDocument||l).createElement("style"),Cn(S),Mi(S,"style",z),md(S,v.precedence,l),h.instance=S;case"stylesheet":z=qh(v.href);var j=l.querySelector(dd(z));if(j)return h.state.loading|=4,h.instance=j,Cn(j),j;S=l0(v),(z=Rr.get(z))&&_g(S,z),j=(l.ownerDocument||l).createElement("link"),Cn(j);var Q=j;return Q._p=new Promise(function(de,Le){Q.onload=de,Q.onerror=Le}),Mi(j,"link",S),h.state.loading|=4,md(j,v.precedence,l),h.instance=j;case"script":return j=$h(v.src),(z=l.querySelector(pd(j)))?(h.instance=z,Cn(z),z):(S=v,(z=Rr.get(j))&&(S=I({},v),c0(S,z)),l=l.ownerDocument||l,z=l.createElement("script"),Cn(z),Mi(z,"link",S),l.head.appendChild(z),h.instance=z);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,md(S,v.precedence,l));return h.instance}function md(l,h,v){for(var S=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=S.length?S[S.length-1]:null,j=z,Q=0;Q<S.length;Q++){var de=S[Q];if(de.dataset.precedence===h)j=de;else if(j!==z)break}j?j.parentNode.insertBefore(l,j.nextSibling):(h=v.nodeType===9?v.head:v,h.insertBefore(l,h.firstChild))}function _g(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.title==null&&(l.title=h.title)}function c0(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.integrity==null&&(l.integrity=h.integrity)}var Ep=null;function Ap(l,h,v){if(Ep===null){var S=new Map,z=Ep=new Map;z.set(v,S)}else z=Ep,S=z.get(v),S||(S=new Map,z.set(v,S));if(S.has(l))return S;for(S.set(l,null),v=v.getElementsByTagName(l),z=0;z<v.length;z++){var j=v[z];if(!(j[hr]||j[Ur]||l==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=j.getAttribute(h)||"";Q=l+Q;var de=S.get(Q);de?de.push(j):S.set(Q,[j])}}return S}function Mp(l,h,v){l=l.ownerDocument||l,l.head.insertBefore(v,h==="title"?l.querySelector("head > title"):null)}function bg(l,h,v){if(v===1||h.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(l=h.disabled,typeof h.precedence=="string"&&l==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function xg(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function u0(l,h,v,S){if(v.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var z=qh(S.href),j=h.querySelector(dd(z));if(j){h=j._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(l.count++,l=Cp.bind(l),h.then(l,l)),v.state.loading|=4,v.instance=j,Cn(j);return}j=h.ownerDocument||h,S=l0(S),(z=Rr.get(z))&&_g(S,z),j=j.createElement("link"),Cn(j);var Q=j;Q._p=new Promise(function(de,Le){Q.onload=de,Q.onerror=Le}),Mi(j,"link",S),v.instance=j}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(v,h),(h=v.state.preload)&&(v.state.loading&3)===0&&(l.count++,v=Cp.bind(l),h.addEventListener("load",v),h.addEventListener("error",v))}}var Pp=0;function u_(l,h){return l.stylesheets&&l.count===0&&Ip(l,l.stylesheets),0<l.count||0<l.imgCount?function(v){var S=setTimeout(function(){if(l.stylesheets&&Ip(l,l.stylesheets),l.unsuspend){var j=l.unsuspend;l.unsuspend=null,j()}},6e4+h);0<l.imgBytes&&Pp===0&&(Pp=62500*fd());var z=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Ip(l,l.stylesheets),l.unsuspend)){var j=l.unsuspend;l.unsuspend=null,j()}},(l.imgBytes>Pp?50:800)+h);return l.unsuspend=v,function(){l.unsuspend=null,clearTimeout(S),clearTimeout(z)}}:null}function Cp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ip(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Dp=null;function Ip(l,h){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Dp=new Map,h.forEach(h_,l),Dp=null,Cp.call(l))}function h_(l,h){if(!(h.state.loading&4)){var v=Dp.get(l);if(v)var S=v.get(null);else{v=new Map,Dp.set(l,v);for(var z=l.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<z.length;j++){var Q=z[j];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(v.set(Q.dataset.precedence,Q),S=Q)}S&&v.set(null,S)}z=h.instance,Q=z.getAttribute("data-precedence"),j=v.get(Q)||S,j===S&&v.set(null,z),v.set(Q,z),this.count++,S=Cp.bind(this),z.addEventListener("load",S),z.addEventListener("error",S),j?j.parentNode.insertBefore(z,j.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(z,l.firstChild)),h.state.loading|=4}}var Op={$$typeof:fe,Provider:null,Consumer:null,_currentValue:Mt,_currentValue2:Mt,_threadCount:0};function f_(l,h,v,S,z,j,Q,de,Le){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=S,this.onUncaughtError=z,this.onCaughtError=j,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Le,this.incompleteTransitions=new Map}function d_(l,h,v,S,z,j,Q,de,Le,rt,gt,Tt){return l=new f_(l,h,v,Q,Le,rt,gt,Tt,de),h=1,j===!0&&(h|=24),j=Ea(3,null,null,h),l.current=j,j.stateNode=l,h=is(),h.refCount++,l.pooledCache=h,h.refCount++,j.memoizedState={element:S,isDehydrated:v,cache:h},Hf(j),l}function p_(l){return l?(l=pr,l):pr}function wg(l,h,v,S,z,j){z=p_(z),S.context===null?S.context=z:S.pendingContext=z,S=cs(h),S.payload={element:v},j=j===void 0?null:j,j!==null&&(S.callback=j),v=zs(l,S,h),v!==null&&(ho(v,l,h),ro(v,l,h))}function h0(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var v=l.retryLane;l.retryLane=v!==0&&v<h?v:h}}function f0(l,h){h0(l,h),(l=l.alternate)&&h0(l,h)}function m_(l){if(l.tag===13||l.tag===31){var h=Ja(l,67108864);h!==null&&ho(h,l,67108864),f0(l,67108864)}}function d0(l){if(l.tag===13||l.tag===31){var h=uo();h=dn(h);var v=Ja(l,h);v!==null&&ho(v,l,h),f0(l,h)}}var Cu=!0;function Hx(l,h,v,S){var z=Ve.T;Ve.T=null;var j=it.p;try{it.p=2,zp(l,h,v,S)}finally{it.p=j,Ve.T=z}}function p0(l,h,v,S){var z=Ve.T;Ve.T=null;var j=it.p;try{it.p=8,zp(l,h,v,S)}finally{it.p=j,Ve.T=z}}function zp(l,h,v,S){if(Cu){var z=Sg(S);if(z===null)Cl(l,h,S,Pc,v),v_(l,S);else if(Yx(z,l,h,v,S))S.stopPropagation();else if(v_(l,S),h&4&&-1<y_.indexOf(l)){for(;z!==null;){var j=Ss(z);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var Q=Ie(j.pendingLanes);if(Q!==0){var de=j;for(de.pendingLanes|=2,de.entangledLanes|=2;Q;){var Le=1<<31-Oe(Q);de.entanglements[1]|=Le,Q&=~Le}Vs(j),(en&6)===0&&(pp=ni()+500,Oo(0))}}break;case 31:case 13:de=Ja(j,2),de!==null&&ho(de,j,2),gp(),f0(j,2)}if(j=Sg(S),j===null&&Cl(l,h,S,Pc,v),j===z)break;z=j}z!==null&&S.stopPropagation()}else Cl(l,h,S,null,v)}}function Sg(l){return l=eh(l),Tg(l)}var Pc=null;function Tg(l){if(Pc=null,l=Go(l),l!==null){var h=g(l);if(h===null)l=null;else{var v=h.tag;if(v===13){if(l=y(h),l!==null)return l;l=null}else if(v===31){if(l=c(h),l!==null)return l;l=null}else if(v===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null)}}return Pc=l,null}function g_(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_a()){case $c:return 2;case xs:return 8;case ws:case Xu:return 32;case rl:return 268435456;default:return 32}default:return 32}}var Hh=!1,Cc=null,Dc=null,Ic=null,kp=new Map,Rp=new Map,Ol=[],y_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v_(l,h){switch(l){case"focusin":case"focusout":Cc=null;break;case"dragenter":case"dragleave":Dc=null;break;case"mouseover":case"mouseout":Ic=null;break;case"pointerover":case"pointerout":kp.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rp.delete(h.pointerId)}}function Lp(l,h,v,S,z,j){return l===null||l.nativeEvent!==j?(l={blockedOn:h,domEventName:v,eventSystemFlags:S,nativeEvent:j,targetContainers:[z]},h!==null&&(h=Ss(h),h!==null&&m_(h)),l):(l.eventSystemFlags|=S,h=l.targetContainers,z!==null&&h.indexOf(z)===-1&&h.push(z),l)}function Yx(l,h,v,S,z){switch(h){case"focusin":return Cc=Lp(Cc,l,h,v,S,z),!0;case"dragenter":return Dc=Lp(Dc,l,h,v,S,z),!0;case"mouseover":return Ic=Lp(Ic,l,h,v,S,z),!0;case"pointerover":var j=z.pointerId;return kp.set(j,Lp(kp.get(j)||null,l,h,v,S,z)),!0;case"gotpointercapture":return j=z.pointerId,Rp.set(j,Lp(Rp.get(j)||null,l,h,v,S,z)),!0}return!1}function __(l){var h=Go(l.target);if(h!==null){var v=g(h);if(v!==null){if(h=v.tag,h===13){if(h=y(v),h!==null){l.blockedOn=h,on(l.priority,function(){d0(v)});return}}else if(h===31){if(h=c(v),h!==null){l.blockedOn=h,on(l.priority,function(){d0(v)});return}}else if(h===3&&v.stateNode.current.memoizedState.isDehydrated){l.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Eg(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var v=Sg(l.nativeEvent);if(v===null){v=l.nativeEvent;var S=new v.constructor(v.type,v);kd=S,v.target.dispatchEvent(S),kd=null}else return h=Ss(v),h!==null&&m_(h),l.blockedOn=v,!1;h.shift()}return!0}function m0(l,h,v){Eg(l)&&v.delete(h)}function Xx(){Hh=!1,Cc!==null&&Eg(Cc)&&(Cc=null),Dc!==null&&Eg(Dc)&&(Dc=null),Ic!==null&&Eg(Ic)&&(Ic=null),kp.forEach(m0),Rp.forEach(m0)}function Du(l,h){l.blockedOn===h&&(l.blockedOn=null,Hh||(Hh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xx)))}var Ag=null;function b_(l){Ag!==l&&(Ag=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ag===l&&(Ag=null);for(var h=0;h<l.length;h+=3){var v=l[h],S=l[h+1],z=l[h+2];if(typeof S!="function"){if(Tg(S||v)===null)continue;break}var j=Ss(v);j!==null&&(l.splice(h,3),h-=3,zn(j,{pending:!0,data:z,method:v.method,action:S},S,z))}}))}function gd(l){function h(Le){return Du(Le,l)}Cc!==null&&Du(Cc,l),Dc!==null&&Du(Dc,l),Ic!==null&&Du(Ic,l),kp.forEach(h),Rp.forEach(h);for(var v=0;v<Ol.length;v++){var S=Ol[v];S.blockedOn===l&&(S.blockedOn=null)}for(;0<Ol.length&&(v=Ol[0],v.blockedOn===null);)__(v),v.blockedOn===null&&Ol.shift();if(v=(l.ownerDocument||l).$$reactFormReplay,v!=null)for(S=0;S<v.length;S+=3){var z=v[S],j=v[S+1],Q=z[Pt]||null;if(typeof j=="function")Q||b_(v);else if(Q){var de=null;if(j&&j.hasAttribute("formAction")){if(z=j,Q=j[Pt]||null)de=Q.formAction;else if(Tg(z)!==null)continue}else de=Q.action;typeof de=="function"?v[S+1]=de:(v.splice(S,3),S-=3),b_(v)}}}function Mg(){function l(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(Q){return z=Q})},focusReset:"manual",scroll:"manual"})}function h(){z!==null&&(z(),z=null),S||setTimeout(v,20)}function v(){if(!S&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,z=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(v,100),function(){S=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),z!==null&&(z(),z=null)}}}function Pg(l){this._internalRoot=l}Cg.prototype.render=Pg.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(a(409));var v=h.current,S=uo();wg(v,S,l,h,null,null)},Cg.prototype.unmount=Pg.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;wg(l.current,2,null,l,null,null),gp(),h[Kt]=null}};function Cg(l){this._internalRoot=l}Cg.prototype.unstable_scheduleHydration=function(l){if(l){var h=Ir();l={blockedOn:null,target:l,priority:h};for(var v=0;v<Ol.length&&h!==0&&h<Ol[v].priority;v++);Ol.splice(v,0,l),v===0&&__(l)}};var x_=t.version;if(x_!=="19.2.4")throw Error(a(527,x_,"19.2.4"));it.findDOMNode=function(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=P(h),l=l!==null?C(l):null,l=l===null?null:l.stateNode,l};var w_={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Ve,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{ie=Bp.inject(w_),se=Bp}catch{}}return b0.createRoot=function(l,h){if(!d(l))throw Error(a(299));var v=!1,S="",z=Kf,j=js,Q=Ns;return h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(z=h.onUncaughtError),h.onCaughtError!==void 0&&(j=h.onCaughtError),h.onRecoverableError!==void 0&&(Q=h.onRecoverableError)),h=d_(l,1,!1,null,null,v,S,null,z,j,Q,Mg),l[Kt]=h.current,Ky(l),new Pg(h)},b0.hydrateRoot=function(l,h,v){if(!d(l))throw Error(a(299));var S=!1,z="",j=Kf,Q=js,de=Ns,Le=null;return v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(z=v.identifierPrefix),v.onUncaughtError!==void 0&&(j=v.onUncaughtError),v.onCaughtError!==void 0&&(Q=v.onCaughtError),v.onRecoverableError!==void 0&&(de=v.onRecoverableError),v.formState!==void 0&&(Le=v.formState)),h=d_(l,1,!0,h,v??null,S,z,Le,j,Q,de,Mg),h.context=p_(null),v=h.current,S=uo(),S=dn(S),z=cs(S),z.callback=null,zs(v,z,S),v=S,h.current.lanes=v,ar(h,v),Vs(h),l[Kt]=h.current,Ky(l),new Cg(h)},b0.version="19.2.4",b0}var AE;function V5(){if(AE)return l1.exports;AE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),l1.exports=U5(),l1.exports}var G5=V5();var ME="popstate";function q5(e={}){function t(a,d){let{pathname:g,search:y,hash:c}=a.location;return e2("",{pathname:g,search:y,hash:c},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function i(a,d){return typeof d=="string"?d:j0(d)}return Z5(t,i,null,e)}function ci(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $5(){return Math.random().toString(36).substring(2,10)}function PE(e,t){return{usr:e.state,key:e.key,idx:t}}function e2(e,t,i=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?iy(t):t,state:i,key:t&&t.key||a||$5()}}function j0({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function iy(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function Z5(e,t,i,a={}){let{window:d=document.defaultView,v5Compat:g=!1}=a,y=d.history,c="POP",A=null,P=C();P==null&&(P=0,y.replaceState({...y.state,idx:P},""));function C(){return(y.state||{idx:null}).idx}function I(){c="POP";let U=C(),oe=U==null?null:U-P;P=U,A&&A({action:c,location:H.location,delta:oe})}function B(U,oe){c="PUSH";let ce=e2(H.location,U,oe);P=C()+1;let fe=PE(ce,P),ve=H.createHref(ce);try{y.pushState(fe,"",ve)}catch(Ee){if(Ee instanceof DOMException&&Ee.name==="DataCloneError")throw Ee;d.location.assign(ve)}g&&A&&A({action:c,location:H.location,delta:1})}function G(U,oe){c="REPLACE";let ce=e2(H.location,U,oe);P=C();let fe=PE(ce,P),ve=H.createHref(ce);y.replaceState(fe,"",ve),g&&A&&A({action:c,location:H.location,delta:0})}function Z(U){return H5(U)}let H={get action(){return c},get location(){return e(d,y)},listen(U){if(A)throw new Error("A history only accepts one active listener");return d.addEventListener(ME,I),A=U,()=>{d.removeEventListener(ME,I),A=null}},createHref(U){return t(d,U)},createURL:Z,encodeLocation(U){let oe=Z(U);return{pathname:oe.pathname,search:oe.search,hash:oe.hash}},push:B,replace:G,go(U){return y.go(U)}};return H}function H5(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),ci(i,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:j0(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function AD(e,t,i="/"){return Y5(e,t,i,!1)}function Y5(e,t,i,a){let d=typeof t=="string"?iy(t):t,g=af(d.pathname||"/",i);if(g==null)return null;let y=MD(e);X5(y);let c=null;for(let A=0;c==null&&A<y.length;++A){let P=oR(g);c=iR(y[A],P,a)}return c}function MD(e,t=[],i=[],a="",d=!1){let g=(y,c,A=d,P)=>{let C={relativePath:P===void 0?y.path||"":P,caseSensitive:y.caseSensitive===!0,childrenIndex:c,route:y};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(a)&&A)return;ci(C.relativePath.startsWith(a),`Absolute route path "${C.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(a.length)}let I=tf([a,C.relativePath]),B=i.concat(C);y.children&&y.children.length>0&&(ci(y.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),MD(y.children,t,B,I,A)),!(y.path==null&&!y.index)&&t.push({path:I,score:rR(I,y.index),routesMeta:B})};return e.forEach((y,c)=>{if(y.path===""||!y.path?.includes("?"))g(y,c);else for(let A of PD(y.path))g(y,c,!0,A)}),t}function PD(e){let t=e.split("/");if(t.length===0)return[];let[i,...a]=t,d=i.endsWith("?"),g=i.replace(/\?$/,"");if(a.length===0)return d?[g,""]:[g];let y=PD(a.join("/")),c=[];return c.push(...y.map(A=>A===""?g:[g,A].join("/"))),d&&c.push(...y),c.map(A=>e.startsWith("/")&&A===""?"/":A)}function X5(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:nR(t.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var W5=/^:[\w-]+$/,K5=3,Q5=2,J5=1,eR=10,tR=-2,CE=e=>e==="*";function rR(e,t){let i=e.split("/"),a=i.length;return i.some(CE)&&(a+=tR),t&&(a+=Q5),i.filter(d=>!CE(d)).reduce((d,g)=>d+(W5.test(g)?K5:g===""?J5:eR),a)}function nR(e,t){return e.length===t.length&&e.slice(0,-1).every((a,d)=>a===t[d])?e[e.length-1]-t[t.length-1]:0}function iR(e,t,i=!1){let{routesMeta:a}=e,d={},g="/",y=[];for(let c=0;c<a.length;++c){let A=a[c],P=c===a.length-1,C=g==="/"?t:t.slice(g.length)||"/",I=ob({path:A.relativePath,caseSensitive:A.caseSensitive,end:P},C),B=A.route;if(!I&&P&&i&&!a[a.length-1].route.index&&(I=ob({path:A.relativePath,caseSensitive:A.caseSensitive,end:!1},C)),!I)return null;Object.assign(d,I.params),y.push({params:d,pathname:tf([g,I.pathname]),pathnameBase:uR(tf([g,I.pathnameBase])),route:B}),I.pathnameBase!=="/"&&(g=tf([g,I.pathnameBase]))}return y}function ob(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=aR(e.path,e.caseSensitive,e.end),d=t.match(i);if(!d)return null;let g=d[0],y=g.replace(/(.)\/+$/,"$1"),c=d.slice(1);return{params:a.reduce((P,{paramName:C,isOptional:I},B)=>{if(C==="*"){let Z=c[B]||"";y=g.slice(0,g.length-Z.length).replace(/(.)\/+$/,"$1")}const G=c[B];return I&&!G?P[C]=void 0:P[C]=(G||"").replace(/%2F/g,"/"),P},{}),pathname:g,pathnameBase:y,pattern:e}}function aR(e,t=!1,i=!0){Vu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,c,A)=>(a.push({paramName:c,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,t?void 0:"i"),a]}function oR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vu(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function af(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}var sR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function lR(e,t="/"){let{pathname:i,search:a="",hash:d=""}=typeof e=="string"?iy(e):e,g;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?g=DE(i.substring(1),"/"):g=DE(i,t)):g=t,{pathname:g,search:hR(a),hash:fR(d)}}function DE(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?i.length>1&&i.pop():d!=="."&&i.push(d)}),i.length>1?i.join("/"):"/"}function f1(e,t,i,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cR(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function CD(e){let t=cR(e);return t.map((i,a)=>a===t.length-1?i.pathname:i.pathnameBase)}function DD(e,t,i,a=!1){let d;typeof e=="string"?d=iy(e):(d={...e},ci(!d.pathname||!d.pathname.includes("?"),f1("?","pathname","search",d)),ci(!d.pathname||!d.pathname.includes("#"),f1("#","pathname","hash",d)),ci(!d.search||!d.search.includes("#"),f1("#","search","hash",d)));let g=e===""||d.pathname==="",y=g?"/":d.pathname,c;if(y==null)c=i;else{let I=t.length-1;if(!a&&y.startsWith("..")){let B=y.split("/");for(;B[0]==="..";)B.shift(),I-=1;d.pathname=B.join("/")}c=I>=0?t[I]:"/"}let A=lR(d,c),P=y&&y!=="/"&&y.endsWith("/"),C=(g||y===".")&&i.endsWith("/");return!A.pathname.endsWith("/")&&(P||C)&&(A.pathname+="/"),A}var tf=e=>e.join("/").replace(/\/\/+/g,"/"),uR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,dR=class{constructor(e,t,i,a=!1){this.status=e,this.statusText=t||"",this.internal=a,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function pR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function mR(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ID=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function OD(e,t){let i=e;if(typeof i!="string"||!sR.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let a=i,d=!1;if(ID)try{let g=new URL(window.location.href),y=i.startsWith("//")?new URL(g.protocol+i):new URL(i),c=af(y.pathname,t);y.origin===g.origin&&c!=null?i=c+y.search+y.hash:d=!0}catch{Vu(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:d,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var zD=["POST","PUT","PATCH","DELETE"];new Set(zD);var gR=["GET",...zD];new Set(gR);var ay=X.createContext(null);ay.displayName="DataRouter";var Qb=X.createContext(null);Qb.displayName="DataRouterState";var yR=X.createContext(!1),kD=X.createContext({isTransitioning:!1});kD.displayName="ViewTransition";var vR=X.createContext(new Map);vR.displayName="Fetchers";var _R=X.createContext(null);_R.displayName="Await";var Gl=X.createContext(null);Gl.displayName="Navigation";var rv=X.createContext(null);rv.displayName="Location";var ff=X.createContext({outlet:null,matches:[],isDataRoute:!1});ff.displayName="Route";var nS=X.createContext(null);nS.displayName="RouteError";var RD="REACT_ROUTER_ERROR",bR="REDIRECT",xR="ROUTE_ERROR_RESPONSE";function wR(e){if(e.startsWith(`${RD}:${bR}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function SR(e){if(e.startsWith(`${RD}:${xR}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new dR(t.status,t.statusText,t.data)}catch{}}function TR(e,{relative:t}={}){ci(nv(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=X.useContext(Gl),{hash:d,pathname:g,search:y}=iv(e,{relative:t}),c=g;return i!=="/"&&(c=g==="/"?i:tf([i,g])),a.createHref({pathname:c,search:y,hash:d})}function nv(){return X.useContext(rv)!=null}function Md(){return ci(nv(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(rv).location}var LD="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BD(e){X.useContext(Gl).static||X.useLayoutEffect(e)}function ER(){let{isDataRoute:e}=X.useContext(ff);return e?jR():AR()}function AR(){ci(nv(),"useNavigate() may be used only in the context of a <Router> component.");let e=X.useContext(ay),{basename:t,navigator:i}=X.useContext(Gl),{matches:a}=X.useContext(ff),{pathname:d}=Md(),g=JSON.stringify(CD(a)),y=X.useRef(!1);return BD(()=>{y.current=!0}),X.useCallback((A,P={})=>{if(Vu(y.current,LD),!y.current)return;if(typeof A=="number"){i.go(A);return}let C=DD(A,JSON.parse(g),d,P.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:tf([t,C.pathname])),(P.replace?i.replace:i.push)(C,P.state,P)},[t,i,g,d,e])}X.createContext(null);function iv(e,{relative:t}={}){let{matches:i}=X.useContext(ff),{pathname:a}=Md(),d=JSON.stringify(CD(i));return X.useMemo(()=>DD(e,JSON.parse(d),a,t==="path"),[e,d,a,t])}function MR(e,t){return jD(e,t)}function jD(e,t,i,a,d){ci(nv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=X.useContext(Gl),{matches:y}=X.useContext(ff),c=y[y.length-1],A=c?c.params:{},P=c?c.pathname:"/",C=c?c.pathnameBase:"/",I=c&&c.route;{let ce=I&&I.path||"";FD(P,!I||ce.endsWith("*")||ce.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${P}" (under <Route path="${ce}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ce}"> to <Route path="${ce==="/"?"*":`${ce}/*`}">.`)}let B=Md(),G;if(t){let ce=typeof t=="string"?iy(t):t;ci(C==="/"||ce.pathname?.startsWith(C),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${ce.pathname}" was given in the \`location\` prop.`),G=ce}else G=B;let Z=G.pathname||"/",H=Z;if(C!=="/"){let ce=C.replace(/^\//,"").split("/");H="/"+Z.replace(/^\//,"").split("/").slice(ce.length).join("/")}let U=AD(e,{pathname:H});Vu(I||U!=null,`No routes matched location "${G.pathname}${G.search}${G.hash}" `),Vu(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${G.pathname}${G.search}${G.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let oe=OR(U&&U.map(ce=>Object.assign({},ce,{params:Object.assign({},A,ce.params),pathname:tf([C,g.encodeLocation?g.encodeLocation(ce.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ce.pathname]),pathnameBase:ce.pathnameBase==="/"?C:tf([C,g.encodeLocation?g.encodeLocation(ce.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ce.pathnameBase])})),y,i,a,d);return t&&oe?X.createElement(rv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...G},navigationType:"POP"}},oe):oe}function PR(){let e=BR(),t=pR(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:a},g={padding:"2px 4px",backgroundColor:a},y=null;return console.error("Error handled by React Router default ErrorBoundary:",e),y=X.createElement(X.Fragment,null,X.createElement("p",null," Hey developer "),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:g},"ErrorBoundary")," or"," ",X.createElement("code",{style:g},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},t),i?X.createElement("pre",{style:d},i):null,y)}var CR=X.createElement(PR,null),ND=class extends X.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const i=SR(e.digest);i&&(e=i)}let t=e!==void 0?X.createElement(ff.Provider,{value:this.props.routeContext},X.createElement(nS.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?X.createElement(DR,{error:e},t):t}};ND.contextType=yR;var d1=new WeakMap;function DR({children:e,error:t}){let{basename:i}=X.useContext(Gl);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let a=wR(t.digest);if(a){let d=d1.get(t);if(d)throw d;let g=OD(a.location,i);if(ID&&!d1.get(t))if(g.isExternal||a.reloadDocument)window.location.href=g.absoluteURL||g.to;else{const y=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(g.to,{replace:a.replace}));throw d1.set(t,y),y}return X.createElement("meta",{httpEquiv:"refresh",content:`0;url=${g.absoluteURL||g.to}`})}}return e}function IR({routeContext:e,match:t,children:i}){let a=X.useContext(ay);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),X.createElement(ff.Provider,{value:e},i)}function OR(e,t=[],i=null,a=null,d=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let g=e,y=i?.errors;if(y!=null){let C=g.findIndex(I=>I.route.id&&y?.[I.route.id]!==void 0);ci(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(y).join(",")}`),g=g.slice(0,Math.min(g.length,C+1))}let c=!1,A=-1;if(i)for(let C=0;C<g.length;C++){let I=g[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(A=C),I.route.id){let{loaderData:B,errors:G}=i,Z=I.route.loader&&!B.hasOwnProperty(I.route.id)&&(!G||G[I.route.id]===void 0);if(I.route.lazy||Z){c=!0,A>=0?g=g.slice(0,A+1):g=[g[0]];break}}}let P=i&&a?(C,I)=>{a(C,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:mR(i.matches),errorInfo:I})}:void 0;return g.reduceRight((C,I,B)=>{let G,Z=!1,H=null,U=null;i&&(G=y&&I.route.id?y[I.route.id]:void 0,H=I.route.errorElement||CR,c&&(A<0&&B===0?(FD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Z=!0,U=null):A===B&&(Z=!0,U=I.route.hydrateFallbackElement||null)));let oe=t.concat(g.slice(0,B+1)),ce=()=>{let fe;return G?fe=H:Z?fe=U:I.route.Component?fe=X.createElement(I.route.Component,null):I.route.element?fe=I.route.element:fe=C,X.createElement(IR,{match:I,routeContext:{outlet:C,matches:oe,isDataRoute:i!=null},children:fe})};return i&&(I.route.ErrorBoundary||I.route.errorElement||B===0)?X.createElement(ND,{location:i.location,revalidation:i.revalidation,component:H,error:G,children:ce(),routeContext:{outlet:null,matches:oe,isDataRoute:!0},onError:P}):ce()},null)}function iS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zR(e){let t=X.useContext(ay);return ci(t,iS(e)),t}function kR(e){let t=X.useContext(Qb);return ci(t,iS(e)),t}function RR(e){let t=X.useContext(ff);return ci(t,iS(e)),t}function aS(e){let t=RR(e),i=t.matches[t.matches.length-1];return ci(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function LR(){return aS("useRouteId")}function BR(){let e=X.useContext(nS),t=kR("useRouteError"),i=aS("useRouteError");return e!==void 0?e:t.errors?.[i]}function jR(){let{router:e}=zR("useNavigate"),t=aS("useNavigate"),i=X.useRef(!1);return BD(()=>{i.current=!0}),X.useCallback(async(d,g={})=>{Vu(i.current,LD),i.current&&(typeof d=="number"?await e.navigate(d):await e.navigate(d,{fromRouteId:t,...g}))},[e,t])}var IE={};function FD(e,t,i){!t&&!IE[e]&&(IE[e]=!0,Vu(!1,i))}X.memo(NR);function NR({routes:e,future:t,state:i,onError:a}){return jD(e,void 0,i,a,t)}function Ng(e){ci(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function FR({basename:e="/",children:t=null,location:i,navigationType:a="POP",navigator:d,static:g=!1,unstable_useTransitions:y}){ci(!nv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),A=X.useMemo(()=>({basename:c,navigator:d,static:g,unstable_useTransitions:y,future:{}}),[c,d,g,y]);typeof i=="string"&&(i=iy(i));let{pathname:P="/",search:C="",hash:I="",state:B=null,key:G="default"}=i,Z=X.useMemo(()=>{let H=af(P,c);return H==null?null:{location:{pathname:H,search:C,hash:I,state:B,key:G},navigationType:a}},[c,P,C,I,B,G,a]);return Vu(Z!=null,`<Router basename="${c}"> is not able to match the URL "${P}${C}${I}" because it does not start with the basename, so the <Router> won't render anything.`),Z==null?null:X.createElement(Gl.Provider,{value:A},X.createElement(rv.Provider,{children:t,value:Z}))}function UR({children:e,location:t}){return MR(t2(e),t)}function t2(e,t=[]){let i=[];return X.Children.forEach(e,(a,d)=>{if(!X.isValidElement(a))return;let g=[...t,d];if(a.type===X.Fragment){i.push.apply(i,t2(a.props.children,g));return}ci(a.type===Ng,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ci(!a.props.index||!a.props.children,"An index route cannot have child routes.");let y={id:a.props.id||g.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(y.children=t2(a.props.children,g)),i.push(y)}),i}var W_="get",K_="application/x-www-form-urlencoded";function Jb(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function VR(e){return Jb(e)&&e.tagName.toLowerCase()==="button"}function GR(e){return Jb(e)&&e.tagName.toLowerCase()==="form"}function qR(e){return Jb(e)&&e.tagName.toLowerCase()==="input"}function $R(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ZR(e,t){return e.button===0&&(!t||t==="_self")&&!$R(e)}var A_=null;function HR(){if(A_===null)try{new FormData(document.createElement("form"),0),A_=!1}catch{A_=!0}return A_}var YR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function p1(e){return e!=null&&!YR.has(e)?(Vu(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${K_}"`),null):e}function XR(e,t){let i,a,d,g,y;if(GR(e)){let c=e.getAttribute("action");a=c?af(c,t):null,i=e.getAttribute("method")||W_,d=p1(e.getAttribute("enctype"))||K_,g=new FormData(e)}else if(VR(e)||qR(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=e.getAttribute("formaction")||c.getAttribute("action");if(a=A?af(A,t):null,i=e.getAttribute("formmethod")||c.getAttribute("method")||W_,d=p1(e.getAttribute("formenctype"))||p1(c.getAttribute("enctype"))||K_,g=new FormData(c,e),!HR()){let{name:P,type:C,value:I}=e;if(C==="image"){let B=P?`${P}.`:"";g.append(`${B}x`,"0"),g.append(`${B}y`,"0")}else P&&g.append(P,I)}}else{if(Jb(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=W_,a=null,d=K_,y=e}return g&&d==="text/plain"&&(y=g,g=void 0),{action:a,method:i.toLowerCase(),encType:d,formData:g,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function oS(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function WR(e,t,i,a){let d=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${a}`:d.pathname=`${d.pathname}.${a}`:d.pathname==="/"?d.pathname=`_root.${a}`:t&&af(d.pathname,t)==="/"?d.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${a}`,d}async function KR(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QR(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function JR(e,t,i){let a=await Promise.all(e.map(async d=>{let g=t.routes[d.route.id];if(g){let y=await KR(g,i);return y.links?y.links():[]}return[]}));return n4(a.flat(1).filter(QR).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function OE(e,t,i,a,d,g){let y=(A,P)=>i[P]?A.route.id!==i[P].route.id:!0,c=(A,P)=>i[P].pathname!==A.pathname||i[P].route.path?.endsWith("*")&&i[P].params["*"]!==A.params["*"];return g==="assets"?t.filter((A,P)=>y(A,P)||c(A,P)):g==="data"?t.filter((A,P)=>{let C=a.routes[A.route.id];if(!C||!C.hasLoader)return!1;if(y(A,P)||c(A,P))return!0;if(A.route.shouldRevalidate){let I=A.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:A.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function e4(e,t,{includeHydrateFallback:i}={}){return t4(e.map(a=>{let d=t.routes[a.route.id];if(!d)return[];let g=[d.module];return d.clientActionModule&&(g=g.concat(d.clientActionModule)),d.clientLoaderModule&&(g=g.concat(d.clientLoaderModule)),i&&d.hydrateFallbackModule&&(g=g.concat(d.hydrateFallbackModule)),d.imports&&(g=g.concat(d.imports)),g}).flat(1))}function t4(e){return[...new Set(e)]}function r4(e){let t={},i=Object.keys(e).sort();for(let a of i)t[a]=e[a];return t}function n4(e,t){let i=new Set;return new Set(t),e.reduce((a,d)=>{let g=JSON.stringify(r4(d));return i.has(g)||(i.add(g),a.push({key:g,link:d})),a},[])}function UD(){let e=X.useContext(ay);return oS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function i4(){let e=X.useContext(Qb);return oS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var sS=X.createContext(void 0);sS.displayName="FrameworkContext";function VD(){let e=X.useContext(sS);return oS(e,"You must render this element inside a <HydratedRouter> element"),e}function a4(e,t){let i=X.useContext(sS),[a,d]=X.useState(!1),[g,y]=X.useState(!1),{onFocus:c,onBlur:A,onMouseEnter:P,onMouseLeave:C,onTouchStart:I}=t,B=X.useRef(null);X.useEffect(()=>{if(e==="render"&&y(!0),e==="viewport"){let H=oe=>{oe.forEach(ce=>{y(ce.isIntersecting)})},U=new IntersectionObserver(H,{threshold:.5});return B.current&&U.observe(B.current),()=>{U.disconnect()}}},[e]),X.useEffect(()=>{if(a){let H=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(H)}}},[a]);let G=()=>{d(!0)},Z=()=>{d(!1),y(!1)};return i?e!=="intent"?[g,B,{}]:[g,B,{onFocus:x0(c,G),onBlur:x0(A,Z),onMouseEnter:x0(P,G),onMouseLeave:x0(C,Z),onTouchStart:x0(I,G)}]:[!1,B,{}]}function x0(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function o4({page:e,...t}){let{router:i}=UD(),a=X.useMemo(()=>AD(i.routes,e,i.basename),[i.routes,e,i.basename]);return a?X.createElement(l4,{page:e,matches:a,...t}):null}function s4(e){let{manifest:t,routeModules:i}=VD(),[a,d]=X.useState([]);return X.useEffect(()=>{let g=!1;return JR(e,t,i).then(y=>{g||d(y)}),()=>{g=!0}},[e,t,i]),a}function l4({page:e,matches:t,...i}){let a=Md(),{future:d,manifest:g,routeModules:y}=VD(),{basename:c}=UD(),{loaderData:A,matches:P}=i4(),C=X.useMemo(()=>OE(e,t,P,g,a,"data"),[e,t,P,g,a]),I=X.useMemo(()=>OE(e,t,P,g,a,"assets"),[e,t,P,g,a]),B=X.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let H=new Set,U=!1;if(t.forEach(ce=>{let fe=g.routes[ce.route.id];!fe||!fe.hasLoader||(!C.some(ve=>ve.route.id===ce.route.id)&&ce.route.id in A&&y[ce.route.id]?.shouldRevalidate||fe.hasClientLoader?U=!0:H.add(ce.route.id))}),H.size===0)return[];let oe=WR(e,c,d.unstable_trailingSlashAwareDataRequests,"data");return U&&H.size>0&&oe.searchParams.set("_routes",t.filter(ce=>H.has(ce.route.id)).map(ce=>ce.route.id).join(",")),[oe.pathname+oe.search]},[c,d.unstable_trailingSlashAwareDataRequests,A,a,g,C,t,e,y]),G=X.useMemo(()=>e4(I,g),[I,g]),Z=s4(I);return X.createElement(X.Fragment,null,B.map(H=>X.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...i})),G.map(H=>X.createElement("link",{key:H,rel:"modulepreload",href:H,...i})),Z.map(({key:H,link:U})=>X.createElement("link",{key:H,nonce:i.nonce,...U,crossOrigin:U.crossOrigin??i.crossOrigin})))}function c4(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var u4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{u4&&(window.__reactRouterVersion="7.13.0")}catch{}function h4({basename:e,children:t,unstable_useTransitions:i,window:a}){let d=X.useRef();d.current==null&&(d.current=q5({window:a,v5Compat:!0}));let g=d.current,[y,c]=X.useState({action:g.action,location:g.location}),A=X.useCallback(P=>{i===!1?c(P):X.startTransition(()=>c(P))},[i]);return X.useLayoutEffect(()=>g.listen(A),[g,A]),X.createElement(FR,{basename:e,children:t,location:y.location,navigationType:y.action,navigator:g,unstable_useTransitions:i})}var GD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zg=X.forwardRef(function({onClick:t,discover:i="render",prefetch:a="none",relative:d,reloadDocument:g,replace:y,state:c,target:A,to:P,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:B,...G},Z){let{basename:H,unstable_useTransitions:U}=X.useContext(Gl),oe=typeof P=="string"&&GD.test(P),ce=OD(P,H);P=ce.to;let fe=TR(P,{relative:d}),[ve,Ee,Me]=a4(a,G),ze=m4(P,{replace:y,state:c,target:A,preventScrollReset:C,relative:d,viewTransition:I,unstable_defaultShouldRevalidate:B,unstable_useTransitions:U});function Ke(zt){t&&t(zt),zt.defaultPrevented||ze(zt)}let mt=X.createElement("a",{...G,...Me,href:ce.absoluteURL||fe,onClick:ce.isExternal||g?t:Ke,ref:c4(Z,Ee),target:A,"data-discover":!oe&&i==="render"?"true":void 0});return ve&&!oe?X.createElement(X.Fragment,null,mt,X.createElement(o4,{page:fe})):mt});Zg.displayName="Link";var f4=X.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:a="",end:d=!1,style:g,to:y,viewTransition:c,children:A,...P},C){let I=iv(y,{relative:P.relative}),B=Md(),G=X.useContext(Qb),{navigator:Z,basename:H}=X.useContext(Gl),U=G!=null&&b4(I)&&c===!0,oe=Z.encodeLocation?Z.encodeLocation(I).pathname:I.pathname,ce=B.pathname,fe=G&&G.navigation&&G.navigation.location?G.navigation.location.pathname:null;i||(ce=ce.toLowerCase(),fe=fe?fe.toLowerCase():null,oe=oe.toLowerCase()),fe&&H&&(fe=af(fe,H)||fe);const ve=oe!=="/"&&oe.endsWith("/")?oe.length-1:oe.length;let Ee=ce===oe||!d&&ce.startsWith(oe)&&ce.charAt(ve)==="/",Me=fe!=null&&(fe===oe||!d&&fe.startsWith(oe)&&fe.charAt(oe.length)==="/"),ze={isActive:Ee,isPending:Me,isTransitioning:U},Ke=Ee?t:void 0,mt;typeof a=="function"?mt=a(ze):mt=[a,Ee?"active":null,Me?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let zt=typeof g=="function"?g(ze):g;return X.createElement(Zg,{...P,"aria-current":Ke,className:mt,ref:C,style:zt,to:y,viewTransition:c},typeof A=="function"?A(ze):A)});f4.displayName="NavLink";var d4=X.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:a,replace:d,state:g,method:y=W_,action:c,onSubmit:A,relative:P,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:B,...G},Z)=>{let{unstable_useTransitions:H}=X.useContext(Gl),U=v4(),oe=_4(c,{relative:P}),ce=y.toLowerCase()==="get"?"get":"post",fe=typeof c=="string"&&GD.test(c),ve=Ee=>{if(A&&A(Ee),Ee.defaultPrevented)return;Ee.preventDefault();let Me=Ee.nativeEvent.submitter,ze=Me?.getAttribute("formmethod")||y,Ke=()=>U(Me||Ee.currentTarget,{fetcherKey:t,method:ze,navigate:i,replace:d,state:g,relative:P,preventScrollReset:C,viewTransition:I,unstable_defaultShouldRevalidate:B});H&&i!==!1?X.startTransition(()=>Ke()):Ke()};return X.createElement("form",{ref:Z,method:ce,action:oe,onSubmit:a?A:ve,...G,"data-discover":!fe&&e==="render"?"true":void 0})});d4.displayName="Form";function p4(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qD(e){let t=X.useContext(ay);return ci(t,p4(e)),t}function m4(e,{target:t,replace:i,state:a,preventScrollReset:d,relative:g,viewTransition:y,unstable_defaultShouldRevalidate:c,unstable_useTransitions:A}={}){let P=ER(),C=Md(),I=iv(e,{relative:g});return X.useCallback(B=>{if(ZR(B,t)){B.preventDefault();let G=i!==void 0?i:j0(C)===j0(I),Z=()=>P(e,{replace:G,state:a,preventScrollReset:d,relative:g,viewTransition:y,unstable_defaultShouldRevalidate:c});A?X.startTransition(()=>Z()):Z()}},[C,P,I,i,a,t,e,d,g,y,c,A])}var g4=0,y4=()=>`__${String(++g4)}__`;function v4(){let{router:e}=qD("useSubmit"),{basename:t}=X.useContext(Gl),i=LR(),a=e.fetch,d=e.navigate;return X.useCallback(async(g,y={})=>{let{action:c,method:A,encType:P,formData:C,body:I}=XR(g,t);if(y.navigate===!1){let B=y.fetcherKey||y4();await a(B,i,y.action||c,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:C,body:I,formMethod:y.method||A,formEncType:y.encType||P,flushSync:y.flushSync})}else await d(y.action||c,{unstable_defaultShouldRevalidate:y.unstable_defaultShouldRevalidate,preventScrollReset:y.preventScrollReset,formData:C,body:I,formMethod:y.method||A,formEncType:y.encType||P,replace:y.replace,state:y.state,fromRouteId:i,flushSync:y.flushSync,viewTransition:y.viewTransition})},[a,d,t,i])}function _4(e,{relative:t}={}){let{basename:i}=X.useContext(Gl),a=X.useContext(ff);ci(a,"useFormAction must be used inside a RouteContext");let[d]=a.matches.slice(-1),g={...iv(e||".",{relative:t})},y=Md();if(e==null){g.search=y.search;let c=new URLSearchParams(g.search),A=c.getAll("index");if(A.some(C=>C==="")){c.delete("index"),A.filter(I=>I).forEach(I=>c.append("index",I));let C=c.toString();g.search=C?`?${C}`:""}}return(!e||e===".")&&d.route.index&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(g.pathname=g.pathname==="/"?i:tf([i,g.pathname])),j0(g)}function b4(e,{relative:t}={}){let i=X.useContext(kD);ci(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=qD("useViewTransitionState"),d=iv(e,{relative:t});if(!i.isTransitioning)return!1;let g=af(i.currentLocation.pathname,a)||i.currentLocation.pathname,y=af(i.nextLocation.pathname,a)||i.nextLocation.pathname;return ob(d.pathname,y)!=null||ob(d.pathname,g)!=null}var $D=ED();const x4=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w4=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,a)=>a?a.toUpperCase():i.toLowerCase()),zE=e=>{const t=w4(e);return t.charAt(0).toUpperCase()+t.slice(1)},ZD=(...e)=>e.filter((t,i,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===i).join(" ").trim(),S4=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var T4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const E4=X.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:d="",children:g,iconNode:y,...c},A)=>X.createElement("svg",{ref:A,...T4,width:t,height:t,stroke:e,strokeWidth:a?Number(i)*24/Number(t):i,className:ZD("lucide",d),...!g&&!S4(c)&&{"aria-hidden":"true"},...c},[...y.map(([P,C])=>X.createElement(P,C)),...Array.isArray(g)?g:[g]]));const ys=(e,t)=>{const i=X.forwardRef(({className:a,...d},g)=>X.createElement(E4,{ref:g,iconNode:t,className:ZD(`lucide-${x4(zE(e))}`,`lucide-${e}`,a),...d}));return i.displayName=zE(e),i};const A4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],kE=ys("chart-line",A4);const M4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],k0=ys("chevron-down",M4);const P4=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],C4=ys("chevrons-down",P4);const D4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],I4=ys("circle-alert",D4);const O4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],z4=ys("clock",O4);const k4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],R4=ys("house",k4);const L4=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],B4=ys("layers",L4);const j4=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],HD=ys("map",j4);const N4=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],F4=ys("menu",N4);const U4=[["path",{d:"M5 12h14",key:"1ays0h"}]],V4=ys("minus",U4);const G4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],q4=ys("plus",G4);const $4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Z4=ys("trending-up",$4);const H4=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Y4=ys("trophy",H4);const X4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lS=ys("x",X4),W4="/unfpa-dashboard/assets/undp-BN7dWDkM.png",K4=()=>{const[e,t]=X.useState(!1),i=Md(),a=[{label:"Home",path:"/"},{label:"About",path:"/about"},{label:"Methodology",path:"/methodology"},{label:"Analytics",path:"/analytics"},{label:"Data Catalog",path:"/catalog"}];return re.jsxs("header",{className:"w-full h-16 relative z-50 bg-white border-b border-gray-200 shadow-sm flex items-center justify-between px-6",children:[re.jsx("div",{className:"flex items-center gap-4",children:re.jsxs(Zg,{to:"/",className:"flex items-center gap-4 hover:opacity-90 transition-opacity",children:[re.jsx("img",{src:W4,alt:"UNFPA Logo",className:"h-8 w-auto object-contain"}),re.jsxs("div",{className:"flex flex-col",children:[re.jsx("span",{className:"font-bold text-[15px] text-gray-900 leading-tight tracking-tight",children:"Odisha Demographic & Data Intelligence Platform"}),re.jsx("span",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mt-1",children:"UNFPA India (Odisha State Office) initiative"})]})]})}),re.jsxs("div",{className:"flex items-center gap-8",children:[re.jsx("nav",{className:"hidden md:flex items-center gap-8 text-sm font-bold text-gray-600",children:a.map(d=>{const g=i.pathname===d.path;return re.jsx(Zg,{to:d.path,className:`transition-colors py-2 font-[400] ${g?"text-orange-500":"hover:text-orange-500 text-gray-600"}`,children:d.label},d.path)})}),re.jsxs("div",{className:"flex md:hidden items-center z-[100]",children:[re.jsx("button",{onClick:()=>t(!e),className:`p-2 rounded-lg transition-all relative z-[110] ${e?"text-[#26412C]":"text-gray-600 hover:bg-gray-100"}`,children:e?re.jsx(lS,{className:"w-8 h-8"}):re.jsx(F4,{className:"w-6 h-6"})}),e&&re.jsx("div",{className:"fixed inset-0 bg-white z-[100] flex flex-col items-center justify-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:re.jsx("nav",{className:"flex flex-col gap-8 text-center",children:a.map(d=>re.jsx(Zg,{to:d.path,onClick:()=>t(!1),className:"text-4xl font-[400] tracking-tighter transition-all text-black hover:text-orange-500 leading-none active:scale-95",children:d.label.toUpperCase()},d.label))})})]})]})]})},Q4=()=>re.jsx("footer",{className:"mt-5 pt-10 pb-10 border-t border-gray-300 bg-white text-center",children:re.jsx("div",{className:"max-w-7xl mx-auto px-6",children:re.jsx("p",{className:"text-[14px]  font-[400]",children:" 2026 mistEO. All rights reserved."})})});var Q_={exports:{}};var J4=Q_.exports,RE;function e6(){return RE||(RE=1,(function(e,t){(function(i,a){e.exports=a()})(J4,(function(){var i={},a={};function d(y,c,A){if(a[y]=A,y==="index"){var P="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",C={};return a.shared(C),a.index(i,C),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}d("shared",["exports"],(function(y){function c(s,r,o,f){return new(o||(o=Promise))((function(m,b){function x(k){try{D(f.next(k))}catch(N){b(N)}}function E(k){try{D(f.throw(k))}catch(N){b(N)}}function D(k){var N;k.done?m(k.value):(N=k.value,N instanceof o?N:new o((function(F){F(N)}))).then(x,E)}D((f=f.apply(s,r||[])).next())}))}function A(s,r){this.x=s,this.y=r}function P(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var C,I;typeof SuppressedError=="function"&&SuppressedError,A.prototype={clone(){return new A(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,r){return this.clone()._rotateAround(s,r)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){const r=s.x-this.x,o=s.y-this.y;return r*r+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,r){return Math.atan2(this.x*r-this.y*s,this.x*s+this.y*r)},_matMult(s){const r=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=r,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){const s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){const r=Math.cos(s),o=Math.sin(s),f=o*this.x+r*this.y;return this.x=r*this.x-o*this.y,this.y=f,this},_rotateAround(s,r){const o=Math.cos(s),f=Math.sin(s),m=r.y+f*(this.x-r.x)+o*(this.y-r.y);return this.x=r.x+o*(this.x-r.x)-f*(this.y-r.y),this.y=m,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:A},A.convert=function(s){if(s instanceof A)return s;if(Array.isArray(s))return new A(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new A(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var B=(function(){if(I)return C;function s(r,o,f,m){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(m-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=o,this.p2x=f,this.p2y=m}return I=1,C=s,s.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,o){if(o===void 0&&(o=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,m=0;m<8;m++){var b=this.sampleCurveX(f)-r;if(Math.abs(b)<o)return f;var x=this.sampleCurveDerivativeX(f);if(Math.abs(x)<1e-6)break;f-=b/x}var E=0,D=1;for(f=r,m=0;m<20&&(b=this.sampleCurveX(f),!(Math.abs(b-r)<o));m++)r>b?E=f:D=f,f=.5*(D-E)+E;return f},solve:function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))}},C})(),G=P(B);let Z,H;function U(){return Z==null&&(Z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Z}function oe(){if(H==null&&(H=!1,U())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let f=0;f<25;f++){const m=4*f;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(f%5,Math.floor(f/5),1,1)}const o=r.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&o[f]!==f){H=!0;break}}}return H||!1}var ce=1e-6,fe=typeof Float32Array<"u"?Float32Array:Array;function ve(){var s=new fe(9);return fe!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Ee(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Me(){var s=new fe(3);return fe!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function ze(s){var r=s[0],o=s[1],f=s[2];return Math.sqrt(r*r+o*o+f*f)}function Ke(s,r,o){var f=new fe(3);return f[0]=s,f[1]=r,f[2]=o,f}function mt(s,r,o){return s[0]=r[0]+o[0],s[1]=r[1]+o[1],s[2]=r[2]+o[2],s}function zt(s,r,o){return s[0]=r[0]*o,s[1]=r[1]*o,s[2]=r[2]*o,s}function Ge(s,r,o){var f=r[0],m=r[1],b=r[2],x=o[0],E=o[1],D=o[2];return s[0]=m*D-b*E,s[1]=b*x-f*D,s[2]=f*E-m*x,s}var Te,dt=ze;function It(s,r,o){var f=r[0],m=r[1],b=r[2],x=r[3];return s[0]=o[0]*f+o[4]*m+o[8]*b+o[12]*x,s[1]=o[1]*f+o[5]*m+o[9]*b+o[13]*x,s[2]=o[2]*f+o[6]*m+o[10]*b+o[14]*x,s[3]=o[3]*f+o[7]*m+o[11]*b+o[15]*x,s}function Rt(){var s=new fe(4);return fe!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Ve(s,r,o,f){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",b=Math.PI/360;r*=b,f*=b,o*=b;var x=Math.sin(r),E=Math.cos(r),D=Math.sin(o),k=Math.cos(o),N=Math.sin(f),F=Math.cos(f);switch(m){case"xyz":s[0]=x*k*F+E*D*N,s[1]=E*D*F-x*k*N,s[2]=E*k*N+x*D*F,s[3]=E*k*F-x*D*N;break;case"xzy":s[0]=x*k*F-E*D*N,s[1]=E*D*F-x*k*N,s[2]=E*k*N+x*D*F,s[3]=E*k*F+x*D*N;break;case"yxz":s[0]=x*k*F+E*D*N,s[1]=E*D*F-x*k*N,s[2]=E*k*N-x*D*F,s[3]=E*k*F+x*D*N;break;case"yzx":s[0]=x*k*F+E*D*N,s[1]=E*D*F+x*k*N,s[2]=E*k*N-x*D*F,s[3]=E*k*F-x*D*N;break;case"zxy":s[0]=x*k*F-E*D*N,s[1]=E*D*F+x*k*N,s[2]=E*k*N+x*D*F,s[3]=E*k*F-x*D*N;break;case"zyx":s[0]=x*k*F-E*D*N,s[1]=E*D*F+x*k*N,s[2]=E*k*N-x*D*F,s[3]=E*k*F+x*D*N;break;default:throw new Error("Unknown angle order "+m)}return s}function it(){var s=new fe(2);return fe!=Float32Array&&(s[0]=0,s[1]=0),s}function Mt(s,r){var o=new fe(2);return o[0]=s,o[1]=r,o}Me(),Te=new fe(4),fe!=Float32Array&&(Te[0]=0,Te[1]=0,Te[2]=0,Te[3]=0),Me(),Ke(1,0,0),Ke(0,1,0),Rt(),Rt(),ve(),it();const Be=8192;function yt(s,r,o){return r*(Be/(s.tileSize*Math.pow(2,o-s.tileID.overscaledZ)))}function Ae(s,r){return(s%r+r)%r}function qe(s,r,o){return s*(1-o)+r*o}function ct(s){if(s<=0)return 0;if(s>=1)return 1;const r=s*s,o=r*s;return 4*(s<.5?o:3*(s-r)+o-.75)}function wt(s,r,o,f){const m=new G(s,r,o,f);return b=>m.solve(b)}const jt=wt(.25,.1,.25,1);function $t(s,r,o){return Math.min(o,Math.max(r,s))}function Ft(s,r,o){const f=o-r,m=((s-r)%f+f)%f+r;return m===r?o:m}function Tr(s,...r){for(const o of r)for(const f in o)s[f]=o[f];return s}let pt=1;function er(s,r,o){const f={};for(const m in s)f[m]=r.call(this,s[m],m,s);return f}function mr(s,r,o){const f={};for(const m in s)r.call(this,s[m],m,s)&&(f[m]=s[m]);return f}function At(s){return Array.isArray(s)?s.map(At):typeof s=="object"&&s?er(s,At):s}const Mn={};function cr(s){Mn[s]||(typeof console<"u"&&console.warn(s),Mn[s]=!0)}function Xr(s,r,o){return(o.y-s.y)*(r.x-s.x)>(r.y-s.y)*(o.x-s.x)}function ln(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Lr=null;function va(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const tl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function bs(s,r,o,f,m){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const b=new VideoFrame(s,{timestamp:0});try{const x=b?.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const E=x.startsWith("BGR"),D=new Uint8ClampedArray(f*m*4);if(yield b.copyTo(D,(function(k,N,F,$,Y){const J=4*Math.max(-N,0),te=(Math.max(0,F)-F)*$*4+J,ae=4*$,he=Math.max(0,N),_e=Math.max(0,F);return{rect:{x:he,y:_e,width:Math.min(k.width,N+$)-he,height:Math.min(k.height,F+Y)-_e},layout:[{offset:te,stride:ae}]}})(s,r,o,f,m)),E)for(let k=0;k<D.length;k+=4){const N=D[k];D[k]=D[k+2],D[k+2]=N}return D}finally{b.close()}}))}let Uo,vo;function qc(s,r,o,f){return s.addEventListener(r,o,f),{unsubscribe:()=>{s.removeEventListener(r,o,f)}}}function ni(s){return s*Math.PI/180}function _a(s){return s/Math.PI*180}const $c={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},xs={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ws="AbortError";class Xu extends Error{constructor(r=ws){super(r instanceof Error?r.message:r),this.name=ws,r instanceof Error&&r.stack&&(this.stack=r.stack)}}function rl(s){return s.name===ws}const Fe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ee(s){return Fe.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const ie="global-dispatcher";class se extends Error{constructor(r,o,f,m){super(`AJAXError: ${o} (${r}): ${f}`),this.status=r,this.statusText=o,this.url=f,this.body=m}}const we=()=>ln(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Oe=function(s,r){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const f=ee(s.url);if(f)return f(s,r);if(ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:ie},r)}if(!(/^file:/.test(o=s.url)||/^file:/.test(we())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,m){return c(this,void 0,void 0,(function*(){const b=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:we(),signal:m.signal});let x,E;f.type!=="json"||b.headers.has("Accept")||b.headers.set("Accept","application/json");try{x=yield fetch(b)}catch(k){throw rl(k)?k:new se(0,k.message,f.url,new Blob)}if(!x.ok){const k=yield x.blob();throw new se(x.status,x.statusText,f.url,k)}E=f.type==="arrayBuffer"||f.type==="image"?x.arrayBuffer():f.type==="json"?x.json():x.text();const D=yield E;return m.signal.throwIfAborted(),{data:D,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}}))})(s,r);if(ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:ie},r)}var o;return(function(f,m){return new Promise(((b,x)=>{var E;const D=new XMLHttpRequest;D.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(D.responseType="arraybuffer");for(const k in f.headers)D.setRequestHeader(k,f.headers[k]);f.type==="json"&&(D.responseType="text",!((E=f.headers)===null||E===void 0)&&E.Accept||D.setRequestHeader("Accept","application/json")),D.withCredentials=f.credentials==="include",D.onerror=()=>{x(new Error(D.statusText))},D.onload=()=>{if(!m.signal.aborted)if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let k=D.response;if(f.type==="json")try{k=JSON.parse(D.response)}catch(N){return void x(N)}b({data:k,cacheControl:D.getResponseHeader("Cache-Control"),expires:D.getResponseHeader("Expires")})}else{const k=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});x(new se(D.status,D.statusText,f.url,k))}},m.signal.addEventListener("abort",(()=>{D.abort(),x(new Xu(m.signal.reason))})),D.send(f.body)}))})(s,r)};function Ye(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const r=new URL(s),o=window.location;return r.protocol===o.protocol&&r.host===o.host}function Ze(s,r,o){o[s]&&o[s].indexOf(r)!==-1||(o[s]=o[s]||[],o[s].push(r))}function Ue(s,r,o){if(o&&o[s]){const f=o[s].indexOf(r);f!==-1&&o[s].splice(f,1)}}class He{constructor(r,o={}){Tr(this,o),this.type=r}}class _t extends He{constructor(r,o={}){super("error",Tr({error:r},o))}}class ot{on(r,o){return this._listeners=this._listeners||{},Ze(r,o,this._listeners),{unsubscribe:()=>{this.off(r,o)}}}off(r,o){return Ue(r,o,this._listeners),Ue(r,o,this._oneTimeListeners),this}once(r,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Ze(r,o,this._oneTimeListeners),this):new Promise((f=>this.once(r,f)))}fire(r,o){typeof r=="string"&&(r=new He(r,o||{}));const f=r.type;if(this.listens(f)){r.target=this;const m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of m)E.call(this,r);const b=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of b)Ue(f,E,this._oneTimeListeners),E.call(this,r);const x=this._eventedParent;x&&(Tr(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(r))}else r instanceof _t&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,o){return this._eventedParent=r,this._eventedParentData=o,this}}var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ir(s,r){const o={};for(const f in s)f!=="ref"&&(o[f]=s[f]);return Ut.forEach((f=>{f in r&&(o[f]=r[f])})),o}function Xt(s,r){if(Array.isArray(s)){if(!Array.isArray(r)||s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(!Xt(s[o],r[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&r!==null){if(typeof r!="object"||Object.keys(s).length!==Object.keys(r).length)return!1;for(const o in s)if(!Xt(s[o],r[o]))return!1;return!0}return s===r}function Qt(s,r){s.push(r)}function tr(s,r,o){Qt(o,{command:"addSource",args:[s,r[s]]})}function ar(s,r,o){Qt(r,{command:"removeSource",args:[s]}),o[s]=!0}function fn(s,r,o,f){ar(s,o,f),tr(s,r,o)}function Pn(s,r,o){let f;for(f in s[o])if(Object.prototype.hasOwnProperty.call(s[o],f)&&f!=="data"&&!Xt(s[o][f],r[o][f]))return!1;for(f in r[o])if(Object.prototype.hasOwnProperty.call(r[o],f)&&f!=="data"&&!Xt(s[o][f],r[o][f]))return!1;return!0}function xn(s,r,o,f,m,b){s=s||{},r=r||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(Xt(s[x],r[x])||o.push({command:b,args:[f,x,r[x],m]}));for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(Xt(s[x],r[x])||o.push({command:b,args:[f,x,r[x],m]}))}function Si(s){return s.id}function dn(s,r){return s[r.id]=r,s}class St{constructor(r,o,f,m){this.message=(r?`${r}: `:"")+f,m&&(this.identifier=m),o!=null&&o.__line__&&(this.line=o.__line__)}}function Ir(s,...r){for(const o of r)for(const f in o)s[f]=o[f];return s}class on extends Error{constructor(r,o){super(o),this.message=o,this.key=r}}class Xi{constructor(r,o=[]){this.parent=r,this.bindings={};for(const[f,m]of o)this.bindings[f]=m}concat(r){return new Xi(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Ur={kind:"null"},Pt={kind:"number"},Kt={kind:"string"},ur={kind:"boolean"},ba={kind:"color"},xf={kind:"projectionDefinition"},Vo={kind:"object"},hr={kind:"value"},$l={kind:"collator"},Go={kind:"formatted"},Ss={kind:"padding"},qo={kind:"colorArray"},$o={kind:"numberArray"},Cn={kind:"resolvedImage"},Zc={kind:"variableAnchorOffsetCollection"};function Pi(s,r){return{kind:"array",itemType:s,N:r}}function Ar(s){if(s.kind==="array"){const r=Ar(s.itemType);return typeof s.N=="number"?`array<${r}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${r}>`}return s.kind}const Ts=[Ur,Pt,Kt,ur,ba,xf,Go,Vo,Pi(hr),Ss,$o,qo,Cn,Zc];function Hc(s,r){if(r.kind==="error")return null;if(s.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Hc(s.itemType,r.itemType))&&(typeof s.N!="number"||s.N===r.N))return null}else{if(s.kind===r.kind)return null;if(s.kind==="value"){for(const o of Ts)if(!Hc(o,r))return null}}return`Expected ${Ar(s)} but found ${Ar(r)} instead.`}function Yc(s,r){return r.some((o=>o.kind===s.kind))}function nl(s,r){return r.some((o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s))}function _o(s,r){return s.kind==="array"&&r.kind==="array"?s.itemType.kind===r.itemType.kind&&typeof s.N=="number":s.kind===r.kind}const Wu=.96422,Zo=.82521,Ya=4/29,Or=6/29,Od=3*Or*Or,cm=Or*Or*Or,Zl=Math.PI/180,zd=180/Math.PI;function Ku(s){return(s%=360)<0&&(s+=360),s}function um([s,r,o,f]){let m,b;const x=Qu((.2225045*(s=Li(s))+.7168786*(r=Li(r))+.0606169*(o=Li(o)))/1);s===r&&r===o?m=b=x:(m=Qu((.4360747*s+.3850649*r+.1430804*o)/Wu),b=Qu((.0139322*s+.0971045*r+.7141733*o)/Zo));const E=116*x-16;return[E<0?0:E,500*(m-x),200*(x-b),f]}function Li(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Qu(s){return s>cm?Math.pow(s,1/3):s/Od+Ya}function wf([s,r,o,f]){let m=(s+16)/116,b=isNaN(r)?m:m+r/500,x=isNaN(o)?m:m-o/200;return m=1*il(m),b=Wu*il(b),x=Zo*il(x),[Ju(3.1338561*b-1.6168667*m-.4906146*x),Ju(-.9787684*b+1.9161415*m+.033454*x),Ju(.0719453*b-.2289914*m+1.4052427*x),f]}function Ju(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function il(s){return s>Or?s*s*s:Od*(s-Ya)}const hm=Object.hasOwn||function(s,r){return Object.prototype.hasOwnProperty.call(s,r)};function Xc(s,r){return hm(s,r)?s[r]:void 0}function Es(s){return parseInt(s.padEnd(2,s),16)/255}function fm(s,r){return Hl(r?s/100:s,0,1)}function Hl(s,r,o){return Math.min(Math.max(r,s),o)}function Sf(s){return!s.some(Number.isNaN)}const Yl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function al(s,r,o){return s+o*(r-s)}function Wc(s,r,o){return s.map(((f,m)=>al(f,r[m],o)))}class gr{constructor(r,o,f,m=1,b=!0){this.r=r,this.g=o,this.b=f,this.a=m,b||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,o,f,m]))}static parse(r){if(r instanceof gr)return r;if(typeof r!="string")return;const o=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Xc(Yl,f);if(m){const[x,E,D]=m;return[x/255,E/255,D/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const x=f.length<6?1:2;let E=1;return[Es(f.slice(E,E+=x)),Es(f.slice(E,E+=x)),Es(f.slice(E,E+=x)),Es(f.slice(E,E+x)||"ff")]}if(f.startsWith("rgb")){const x=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[E,D,k,N,F,$,Y,J,te,ae,he,_e]=x,ue=[N||" ",Y||" ",ae].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){const me=[k,$,te].join(""),Pe=me==="%%%"?100:me===""?255:0;if(Pe){const Re=[Hl(+D/Pe,0,1),Hl(+F/Pe,0,1),Hl(+J/Pe,0,1),he?fm(+he,_e):1];if(Sf(Re))return Re}}return}}const b=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[x,E,D,k,N,F,$,Y,J]=b,te=[D||" ",N||" ",$].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){const ae=[+E,Hl(+k,0,100),Hl(+F,0,100),Y?fm(+Y,J):1];if(Sf(ae))return(function([he,_e,ue,me]){function Pe(Re){const We=(Re+he/30)%12,lt=_e*Math.min(ue,1-ue);return ue-lt*Math.max(-1,Math.min(We-3,9-We,1))}return he=Ku(he),_e/=100,ue/=100,[Pe(0),Pe(8),Pe(4),me]})(ae)}}})(r);return o?new gr(...o,!1):void 0}get rgb(){const{r,g:o,b:f,a:m}=this,b=m||1/0;return this.overwriteGetter("rgb",[r/b,o/b,f/b,m])}get hcl(){return this.overwriteGetter("hcl",(function(r){const[o,f,m,b]=um(r),x=Math.sqrt(f*f+m*m);return[Math.round(1e4*x)?Ku(Math.atan2(m,f)*zd):NaN,x,o,b]})(this.rgb))}get lab(){return this.overwriteGetter("lab",um(this.rgb))}overwriteGetter(r,o){return Object.defineProperty(this,r,{value:o}),o}toString(){const[r,o,f,m]=this.rgb;return`rgba(${[r,o,f].map((b=>Math.round(255*b))).join(",")},${m})`}static interpolate(r,o,f,m="rgb"){switch(m){case"rgb":{const[b,x,E,D]=Wc(r.rgb,o.rgb,f);return new gr(b,x,E,D,!1)}case"hcl":{const[b,x,E,D]=r.hcl,[k,N,F,$]=o.hcl;let Y,J;if(isNaN(b)||isNaN(k))isNaN(b)?isNaN(k)?Y=NaN:(Y=k,E!==1&&E!==0||(J=N)):(Y=b,F!==1&&F!==0||(J=x));else{let ue=k-b;k>b&&ue>180?ue-=360:k<b&&b-k>180&&(ue+=360),Y=b+f*ue}const[te,ae,he,_e]=(function([ue,me,Pe,Re]){return ue=isNaN(ue)?0:ue*Zl,wf([Pe,Math.cos(ue)*me,Math.sin(ue)*me,Re])})([Y,J??al(x,N,f),al(E,F,f),al(D,$,f)]);return new gr(te,ae,he,_e,!1)}case"lab":{const[b,x,E,D]=wf(Wc(r.lab,o.lab,f));return new gr(b,x,E,D,!1)}}}}gr.black=new gr(0,0,0,1),gr.white=new gr(1,1,1,1),gr.transparent=new gr(0,0,0,0),gr.red=new gr(1,0,0,1);class bo{constructor(r,o,f){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,o){return this.collator.compare(r,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const kd=["bottom","center","top"];class eh{constructor(r,o,f,m,b,x){this.text=r,this.image=o,this.scale=f,this.fontStack=m,this.textColor=b,this.verticalAlign=x}}class ii{constructor(r){this.sections=r}static fromString(r){return new ii([new eh(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((r=>r.text.length!==0||r.image&&r.image.name.length!==0))}static factory(r){return r instanceof ii?r:ii.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map((r=>r.text)).join("")}}class Gn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Gn)return r;if(typeof r=="number")return new Gn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const o of r)if(typeof o!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Gn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f){return new Gn(Wc(r.values,o.values,f))}}class pn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof pn)return r;if(typeof r=="number")return new pn([r]);if(Array.isArray(r)){for(const o of r)if(typeof o!="number")return;return new pn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f){return new pn(Wc(r.values,o.values,f))}}class rr{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof rr)return r;if(typeof r=="string"){const f=gr.parse(r);return f?new rr([f]):void 0}if(!Array.isArray(r))return;const o=[];for(const f of r){if(typeof f!="string")return;const m=gr.parse(f);if(!m)return;o.push(m)}return new rr(o)}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f,m="rgb"){const b=[];if(r.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let x=0;x<r.values.length;x++)b.push(gr.interpolate(r.values[x],o.values[x],f,m));return new rr(b)}}class Wr extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const Xa=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Dn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Dn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let o=0;o<r.length;o+=2){const f=r[o],m=r[o+1];if(typeof f!="string"||!Xa.has(f)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Dn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f){const m=r.values,b=o.values;if(m.length!==b.length)throw new Wr(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${o.toString()}`);const x=[];for(let E=0;E<m.length;E+=2){if(m[E]!==b[E])throw new Wr(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${m[E]}, to[${E}]: ${b[E]}`);x.push(m[E]);const[D,k]=m[E+1],[N,F]=b[E+1];x.push([al(D,N,f),al(k,F,f)])}return new Dn(x)}}class Bi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Bi({name:r,available:!1}):null}}class ai{constructor(r,o,f){this.from=r,this.to=o,this.transition=f}static interpolate(r,o,f){return new ai(r,o,f)}static parse(r){return r instanceof ai?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new ai(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new ai(r.from,r.to,r.transition):typeof r=="string"?new ai(r,r,1):void 0}}function xa(s,r,o,f){return typeof s=="number"&&s>=0&&s<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[s,r,o,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[s,r,o,f]:[s,r,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ho(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof ai||s instanceof gr||s instanceof bo||s instanceof ii||s instanceof Gn||s instanceof pn||s instanceof rr||s instanceof Dn||s instanceof Bi)return!0;if(Array.isArray(s)){for(const r of s)if(!Ho(r))return!1;return!0}if(typeof s=="object"){for(const r in s)if(!Ho(s[r]))return!1;return!0}return!1}function mn(s){if(s===null)return Ur;if(typeof s=="string")return Kt;if(typeof s=="boolean")return ur;if(typeof s=="number")return Pt;if(s instanceof gr)return ba;if(s instanceof ai)return xf;if(s instanceof bo)return $l;if(s instanceof ii)return Go;if(s instanceof Gn)return Ss;if(s instanceof pn)return $o;if(s instanceof rr)return qo;if(s instanceof Dn)return Zc;if(s instanceof Bi)return Cn;if(Array.isArray(s)){const r=s.length;let o;for(const f of s){const m=mn(f);if(o){if(o===m)continue;o=hr;break}o=m}return Pi(o||hr,r)}return Vo}function ol(s){const r=typeof s;return s===null?"":r==="string"||r==="number"||r==="boolean"?String(s):s instanceof gr||s instanceof ai||s instanceof ii||s instanceof Gn||s instanceof pn||s instanceof rr||s instanceof Dn||s instanceof Bi?s.toString():JSON.stringify(s)}class wa{constructor(r,o){this.type=r,this.value=o}static parse(r,o){if(r.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ho(r[1]))return o.error("invalid value");const f=r[1];let m=mn(f);const b=o.expectedType;return m.kind!=="array"||m.N!==0||!b||b.kind!=="array"||typeof b.N=="number"&&b.N!==0||(m=b),new wa(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Xl={string:Kt,number:Pt,boolean:ur,object:Vo};class ji{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let f,m=1;const b=r[0];if(b==="array"){let E,D;if(r.length>2){const k=r[1];if(typeof k!="string"||!(k in Xl)||k==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);E=Xl[k],m++}else E=hr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);D=r[2],m++}f=Pi(E,D)}else{if(!Xl[b])throw new Error(`Types doesn't contain name = ${b}`);f=Xl[b]}const x=[];for(;m<r.length;m++){const E=o.parse(r[m],m,hr);if(!E)return null;x.push(E)}return new ji(f,x)}evaluate(r){for(let o=0;o<this.args.length;o++){const f=this.args[o].evaluate(r);if(!Hc(this.type,mn(f)))return f;if(o===this.args.length-1)throw new Wr(`Expected value to be of type ${Ar(this.type)}, but found ${Ar(mn(f))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const Kn={"to-boolean":ur,"to-color":ba,"to-number":Pt,"to-string":Kt};class Ni{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const f=r[0];if(!Kn[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&r.length!==2)return o.error("Expected one argument.");const m=Kn[f],b=[];for(let x=1;x<r.length;x++){const E=o.parse(r[x],x,hr);if(!E)return null;b.push(E)}return new Ni(m,b)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let o,f;for(const m of this.args){if(o=m.evaluate(r),f=null,o instanceof gr)return o;if(typeof o=="string"){const b=r.parseColor(o);if(b)return b}else if(Array.isArray(o)&&(f=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:xa(o[0],o[1],o[2],o[3]),!f))return new gr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Wr(f||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const f of this.args){o=f.evaluate(r);const m=Gn.parse(o);if(m)return m}throw new Wr(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const f of this.args){o=f.evaluate(r);const m=pn.parse(o);if(m)return m}throw new Wr(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const f of this.args){o=f.evaluate(r);const m=rr.parse(o);if(m)return m}throw new Wr(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const f of this.args){o=f.evaluate(r);const m=Dn.parse(o);if(m)return m}throw new Wr(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const f of this.args){if(o=f.evaluate(r),o===null)return 0;const m=Number(o);if(!isNaN(m))return m}throw new Wr(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return ii.fromString(ol(this.args[0].evaluate(r)));case"resolvedImage":return Bi.fromString(ol(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return ol(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const th=["Unknown","Point","LineString","Polygon"];class Wl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?th[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let o=this._parseColorCache.get(r);return o||(o=gr.parse(r),this._parseColorCache.set(r,o)),o}}class Kl{constructor(r,o,f=[],m,b=new Xi,x=[]){this.registry=r,this.path=f,this.key=f.map((E=>`[${E}]`)).join(""),this.scope=b,this.errors=x,this.expectedType=m,this._isConstant=o}parse(r,o,f,m,b={}){return o?this.concat(o,f,m)._parse(r,b):this._parse(r,b)}_parse(r,o){function f(m,b,x){return x==="assert"?new ji(b,[m]):x==="coerce"?new Ni(b,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const b=this.registry[m];if(b){let x=b.parse(r,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,D=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||D.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(D.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(D.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(D.kind)||E.kind==="colorArray"&&["value","string","array"].includes(D.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(D.kind))x=f(x,E,o.typeAnnotation||"coerce");else if(this.checkSubtype(E,D))return null}else x=f(x,E,o.typeAnnotation||"assert")}if(!(x instanceof wa)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const E=new Wl;try{x=new wa(x.type,x.evaluate(E))}catch(D){return this.error(D.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,o,f){const m=typeof r=="number"?this.path.concat(r):this.path,b=f?this.scope.concat(f):this.scope;return new Kl(this.registry,this._isConstant,m,o||null,b,this.errors)}error(r,...o){const f=`${this.key}${o.map((m=>`[${m}]`)).join("")}`;this.errors.push(new on(f,r))}checkSubtype(r,o){const f=Hc(r,o);return f&&this.error(f),f}}class $r{constructor(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const o of this.bindings)r(o[1]);r(this.result)}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const f=[];for(let b=1;b<r.length-1;b+=2){const x=r[b];if(typeof x!="string")return o.error(`Expected string, but found ${typeof x} instead.`,b);if(/[^a-zA-Z0-9_]/.test(x))return o.error("Variable names must contain only alphanumeric characters or '_'.",b);const E=o.parse(r[b+1],b+1);if(!E)return null;f.push([x,E])}const m=o.parse(r[r.length-1],r.length-1,o.expectedType,f);return m?new $r(f,m):null}outputDefined(){return this.result.outputDefined()}}class sl{constructor(r,o){this.type=o.type,this.name=r,this.boundExpression=o}static parse(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const f=r[1];return o.scope.has(f)?new sl(f,o.scope.get(f)):o.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class xr{constructor(r,o,f){this.type=r,this.index=o,this.input=f}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,Pt),m=o.parse(r[2],2,Pi(o.expectedType||hr));return f&&m?new xr(m.type.itemType,f,m):null}evaluate(r){const o=this.index.evaluate(r),f=this.input.evaluate(r);if(o<0)throw new Wr(`Array index out of bounds: ${o} < 0.`);if(o>=f.length)throw new Wr(`Array index out of bounds: ${o} > ${f.length-1}.`);if(o!==Math.floor(o))throw new Wr(`Array index must be an integer, but found ${o} instead.`);return f[o]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class fr{constructor(r,o){this.type=ur,this.needle=r,this.haystack=o}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,hr),m=o.parse(r[2],2,hr);return f&&m?Yc(f.type,[ur,Kt,Pt,Ur,hr])?new fr(f,m):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(f.type)} instead`):null}evaluate(r){const o=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!f)return!1;if(!nl(o,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(mn(o))} instead.`);if(!nl(f,["string","array"]))throw new Wr(`Expected second argument to be of type array or string, but found ${Ar(mn(f))} instead.`);return f.indexOf(o)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Ql{constructor(r,o,f){this.type=Pt,this.needle=r,this.haystack=o,this.fromIndex=f}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,hr),m=o.parse(r[2],2,hr);if(!f||!m)return null;if(!Yc(f.type,[ur,Kt,Pt,Ur,hr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(f.type)} instead`);if(r.length===4){const b=o.parse(r[3],3,Pt);return b?new Ql(f,m,b):null}return new Ql(f,m)}evaluate(r){const o=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!nl(o,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Ar(mn(o))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(r)),nl(f,["string"])){const b=f.indexOf(o,m);return b===-1?-1:[...f.slice(0,b)].length}if(nl(f,["array"]))return f.indexOf(o,m);throw new Wr(`Expected second argument to be of type array or string, but found ${Ar(mn(f))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Mr{constructor(r,o,f,m,b,x){this.inputType=r,this.type=o,this.input=f,this.cases=m,this.outputs=b,this.otherwise=x}static parse(r,o){if(r.length<5)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return o.error("Expected an even number of arguments.");let f,m;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);const b={},x=[];for(let k=2;k<r.length-1;k+=2){let N=r[k];const F=r[k+1];Array.isArray(N)||(N=[N]);const $=o.concat(k);if(N.length===0)return $.error("Expected at least one branch label.");for(const J of N){if(typeof J!="number"&&typeof J!="string")return $.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return $.error("Numeric branch labels must be integer values.");if(f){if($.checkSubtype(f,mn(J)))return null}else f=mn(J);if(b[String(J)]!==void 0)return $.error("Branch labels must be unique.");b[String(J)]=x.length}const Y=o.parse(F,k,m);if(!Y)return null;m=m||Y.type,x.push(Y)}const E=o.parse(r[1],1,hr);if(!E)return null;const D=o.parse(r[r.length-1],r.length-1,m);return D?E.type.kind!=="value"&&o.concat(1).checkSubtype(f,E.type)?null:new Mr(f,m,E,b,x,D):null}evaluate(r){const o=this.input.evaluate(r);return(mn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))&&this.otherwise.outputDefined()}}class rh{constructor(r,o,f){this.type=r,this.branches=o,this.otherwise=f}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return o.error("Expected an odd number of arguments.");let f;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);const m=[];for(let x=1;x<r.length-1;x+=2){const E=o.parse(r[x],x,ur);if(!E)return null;const D=o.parse(r[x+1],x+1,f);if(!D)return null;m.push([E,D]),f=f||D.type}const b=o.parse(r[r.length-1],r.length-1,f);if(!b)return null;if(!f)throw new Error("Can't infer output type");return new rh(f,m,b)}evaluate(r){for(const[o,f]of this.branches)if(o.evaluate(r))return f.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[o,f]of this.branches)r(o),r(f);r(this.otherwise)}outputDefined(){return this.branches.every((([r,o])=>o.outputDefined()))&&this.otherwise.outputDefined()}}class Wa{constructor(r,o,f,m){this.type=r,this.input=o,this.beginIndex=f,this.endIndex=m}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,hr),m=o.parse(r[2],2,Pt);if(!f||!m)return null;if(!Yc(f.type,[Pi(hr),Kt,hr]))return o.error(`Expected first argument to be of type array or string, but found ${Ar(f.type)} instead`);if(r.length===4){const b=o.parse(r[3],3,Pt);return b?new Wa(f.type,f,m,b):null}return new Wa(f.type,f,m)}evaluate(r){const o=this.input.evaluate(r),f=this.beginIndex.evaluate(r);let m;if(this.endIndex&&(m=this.endIndex.evaluate(r)),nl(o,["string"]))return[...o].slice(f,m).join("");if(nl(o,["array"]))return o.slice(f,m);throw new Wr(`Expected first argument to be of type array or string, but found ${Ar(mn(o))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function ll(s,r){const o=s.length-1;let f,m,b=0,x=o,E=0;for(;b<=x;)if(E=Math.floor((b+x)/2),f=s[E],m=s[E+1],f<=r){if(E===o||r<m)return E;b=E+1}else{if(!(f>r))throw new Wr("Input is not a number.");x=E-1}return 0}class cl{constructor(r,o,f){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(const[m,b]of f)this.labels.push(m),this.outputs.push(b)}static parse(r,o){if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");const f=o.parse(r[1],1,Pt);if(!f)return null;const m=[];let b=null;o.expectedType&&o.expectedType.kind!=="value"&&(b=o.expectedType);for(let x=1;x<r.length;x+=2){const E=x===1?-1/0:r[x],D=r[x+1],k=x,N=x+1;if(typeof E!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(m.length&&m[m.length-1][0]>=E)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const F=o.parse(D,N,b);if(!F)return null;b=b||F.type,m.push([E,F])}return new cl(b,f,m)}evaluate(r){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(r);const m=this.input.evaluate(r);if(m<=o[0])return f[0].evaluate(r);const b=o.length;return m>=o[b-1]?f[b-1].evaluate(r):f[ll(o,m)].evaluate(r)}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function dm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var nh,Rd,_y=(function(){if(Rd)return nh;function s(r,o,f,m){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(m-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=o,this.p2x=f,this.p2y=m}return Rd=1,nh=s,s.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,o){if(o===void 0&&(o=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,m=0;m<8;m++){var b=this.sampleCurveX(f)-r;if(Math.abs(b)<o)return f;var x=this.sampleCurveDerivativeX(f);if(Math.abs(x)<1e-6)break;f-=b/x}var E=0,D=1;for(f=r,m=0;m<20&&(b=this.sampleCurveX(f),!(Math.abs(b-r)<o));m++)r>b?E=f:D=f,f=.5*(D-E)+E;return f},solve:function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))}},nh})(),Ld=dm(_y);class Fi{constructor(r,o,f,m,b){this.type=r,this.operator=o,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[x,E]of b)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(r,o,f,m){let b=0;if(r.name==="exponential")b=Yo(o,r.base,f,m);else if(r.name==="linear")b=Yo(o,1,f,m);else if(r.name==="cubic-bezier"){const x=r.controlPoints;b=new Ld(x[0],x[1],x[2],x[3]).solve(Yo(o,1,f,m))}return b}static parse(r,o){let[f,m,b,...x]=r;if(!Array.isArray(m)||m.length===0)return o.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const k=m[1];if(typeof k!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:k}}else{if(m[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const k=m.slice(1);if(k.length!==4||k.some((N=>typeof N!="number"||N<0||N>1)))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:k}}}if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(b=o.parse(b,2,Pt),!b)return null;const E=[];let D=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||o.expectedType==qo?o.expectedType&&o.expectedType.kind!=="value"&&(D=o.expectedType):D=ba;for(let k=0;k<x.length;k+=2){const N=x[k],F=x[k+1],$=k+3,Y=k+4;if(typeof N!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',$);if(E.length&&E[E.length-1][0]>=N)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',$);const J=o.parse(F,Y,D);if(!J)return null;D=D||J.type,E.push([N,J])}return _o(D,Pt)||_o(D,xf)||_o(D,ba)||_o(D,Ss)||_o(D,$o)||_o(D,qo)||_o(D,Zc)||_o(D,Pi(Pt))?new Fi(D,f,m,b,E):o.error(`Type ${Ar(D)} is not interpolatable.`)}evaluate(r){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(r);const m=this.input.evaluate(r);if(m<=o[0])return f[0].evaluate(r);const b=o.length;if(m>=o[b-1])return f[b-1].evaluate(r);const x=ll(o,m),E=Fi.interpolationFactor(this.interpolation,m,o[x],o[x+1]),D=f[x].evaluate(r),k=f[x+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return al(D,k,E);case"color":return gr.interpolate(D,k,E);case"padding":return Gn.interpolate(D,k,E);case"colorArray":return rr.interpolate(D,k,E);case"numberArray":return pn.interpolate(D,k,E);case"variableAnchorOffsetCollection":return Dn.interpolate(D,k,E);case"array":return Wc(D,k,E);case"projectionDefinition":return ai.interpolate(D,k,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return gr.interpolate(D,k,E,"hcl");case"colorArray":return rr.interpolate(D,k,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return gr.interpolate(D,k,E,"lab");case"colorArray":return rr.interpolate(D,k,E,"lab")}}}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function Yo(s,r,o,f){const m=f-o,b=s-o;return m===0?0:r===1?b/m:(Math.pow(r,b)-1)/(Math.pow(r,m)-1)}const gn={color:gr.interpolate,number:al,padding:Gn.interpolate,numberArray:pn.interpolate,colorArray:rr.interpolate,variableAnchorOffsetCollection:Dn.interpolate,array:Wc};class Jl{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let f=null;const m=o.expectedType;m&&m.kind!=="value"&&(f=m);const b=[];for(const E of r.slice(1)){const D=o.parse(E,1+b.length,f,void 0,{typeAnnotation:"omit"});if(!D)return null;f=f||D.type,b.push(D)}if(!f)throw new Error("No output type");const x=m&&b.some((E=>Hc(m,E.type)));return new Jl(x?hr:f,b)}evaluate(r){let o,f=null,m=0;for(const b of this.args)if(m++,f=b.evaluate(r),f&&f instanceof Bi&&!f.available&&(o||(o=f.name),f=null,m===this.args.length&&(f=o)),f!==null)break;return f}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}function ih(s,r){return s==="=="||s==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function ah(s,r,o,f){return f.compare(r,o)===0}function In(s,r,o){const f=s!=="=="&&s!=="!=";return class YD{constructor(b,x,E){this.type=ur,this.lhs=b,this.rhs=x,this.collator=E,this.hasUntypedArgument=b.type.kind==="value"||x.type.kind==="value"}static parse(b,x){if(b.length!==3&&b.length!==4)return x.error("Expected two or three arguments.");const E=b[0];let D=x.parse(b[1],1,hr);if(!D)return null;if(!ih(E,D.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${Ar(D.type)}'.`);let k=x.parse(b[2],2,hr);if(!k)return null;if(!ih(E,k.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${Ar(k.type)}'.`);if(D.type.kind!==k.type.kind&&D.type.kind!=="value"&&k.type.kind!=="value")return x.error(`Cannot compare types '${Ar(D.type)}' and '${Ar(k.type)}'.`);f&&(D.type.kind==="value"&&k.type.kind!=="value"?D=new ji(k.type,[D]):D.type.kind!=="value"&&k.type.kind==="value"&&(k=new ji(D.type,[k])));let N=null;if(b.length===4){if(D.type.kind!=="string"&&k.type.kind!=="string"&&D.type.kind!=="value"&&k.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(N=x.parse(b[3],3,$l),!N)return null}return new YD(D,k,N)}evaluate(b){const x=this.lhs.evaluate(b),E=this.rhs.evaluate(b);if(f&&this.hasUntypedArgument){const D=mn(x),k=mn(E);if(D.kind!==k.kind||D.kind!=="string"&&D.kind!=="number")throw new Wr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${D.kind}, ${k.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const D=mn(x),k=mn(E);if(D.kind!=="string"||k.kind!=="string")return r(b,x,E)}return this.collator?o(b,x,E,this.collator.evaluate(b)):r(b,x,E)}eachChild(b){b(this.lhs),b(this.rhs),this.collator&&b(this.collator)}outputDefined(){return!0}}}const pm=In("==",(function(s,r,o){return r===o}),ah),Tf=In("!=",(function(s,r,o){return r!==o}),(function(s,r,o,f){return!ah(0,r,o,f)})),mm=In("<",(function(s,r,o){return r<o}),(function(s,r,o,f){return f.compare(r,o)<0})),by=In(">",(function(s,r,o){return r>o}),(function(s,r,o,f){return f.compare(r,o)>0})),Kc=In("<=",(function(s,r,o){return r<=o}),(function(s,r,o,f){return f.compare(r,o)<=0})),Ef=In(">=",(function(s,r,o){return r>=o}),(function(s,r,o,f){return f.compare(r,o)>=0}));class Qc{constructor(r,o,f){this.type=$l,this.locale=f,this.caseSensitive=r,this.diacriticSensitive=o}static parse(r,o){if(r.length!==2)return o.error("Expected one argument.");const f=r[1];if(typeof f!="object"||Array.isArray(f))return o.error("Collator options argument must be an object.");const m=o.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,ur);if(!m)return null;const b=o.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,ur);if(!b)return null;let x=null;return f.locale&&(x=o.parse(f.locale,1,Kt),!x)?null:new Qc(m,b,x)}evaluate(r){return new bo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Bd{constructor(r,o,f,m,b){this.type=Kt,this.number=r,this.locale=o,this.currency=f,this.minFractionDigits=m,this.maxFractionDigits=b}static parse(r,o){if(r.length!==3)return o.error("Expected two arguments.");const f=o.parse(r[1],1,Pt);if(!f)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return o.error("NumberFormat options argument must be an object.");let b=null;if(m.locale&&(b=o.parse(m.locale,1,Kt),!b))return null;let x=null;if(m.currency&&(x=o.parse(m.currency,1,Kt),!x))return null;let E=null;if(m["min-fraction-digits"]&&(E=o.parse(m["min-fraction-digits"],1,Pt),!E))return null;let D=null;return m["max-fraction-digits"]&&(D=o.parse(m["max-fraction-digits"],1,Pt),!D)?null:new Bd(f,b,x,E,D)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class oh{constructor(r){this.type=Go,this.sections=r}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const f=r[1];if(!Array.isArray(f)&&typeof f=="object")return o.error("First argument must be an image or text section.");const m=[];let b=!1;for(let x=1;x<=r.length-1;++x){const E=r[x];if(b&&typeof E=="object"&&!Array.isArray(E)){b=!1;let D=null;if(E["font-scale"]&&(D=o.parse(E["font-scale"],1,Pt),!D))return null;let k=null;if(E["text-font"]&&(k=o.parse(E["text-font"],1,Pi(Kt)),!k))return null;let N=null;if(E["text-color"]&&(N=o.parse(E["text-color"],1,ba),!N))return null;let F=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!kd.includes(E["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(F=o.parse(E["vertical-align"],1,Kt),!F)return null}const $=m[m.length-1];$.scale=D,$.font=k,$.textColor=N,$.verticalAlign=F}else{const D=o.parse(r[x],1,hr);if(!D)return null;const k=D.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");b=!0,m.push({content:D,scale:null,font:null,textColor:null,verticalAlign:null})}}return new oh(m)}evaluate(r){return new ii(this.sections.map((o=>{const f=o.content.evaluate(r);return mn(f)===Cn?new eh("",f,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(r):null):new eh(ol(f),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null,o.verticalAlign?o.verticalAlign.evaluate(r):null)})))}eachChild(r){for(const o of this.sections)r(o.content),o.scale&&r(o.scale),o.font&&r(o.font),o.textColor&&r(o.textColor),o.verticalAlign&&r(o.verticalAlign)}outputDefined(){return!1}}class Jc{constructor(r){this.type=Cn,this.input=r}static parse(r,o){if(r.length!==2)return o.error("Expected two arguments.");const f=o.parse(r[1],1,Kt);return f?new Jc(f):o.error("No image name provided.")}evaluate(r){const o=this.input.evaluate(r),f=Bi.fromString(o);return f&&r.availableImages&&(f.available=r.availableImages.indexOf(o)>-1),f}eachChild(r){r(this.input)}outputDefined(){return!1}}class eu{constructor(r){this.type=Pt,this.input=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=o.parse(r[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Ar(f.type)} instead.`):new eu(f):null}evaluate(r){const o=this.input.evaluate(r);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Wr(`Expected value to be of type string or array, but found ${Ar(mn(o))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const jn=8192;function tu(s,r){const o=(180+s[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(o*m*jn),Math.round(f*m*jn)]}function ru(s,r){const o=Math.pow(2,r.z);return[(m=(s[0]/jn+r.x)/o,360*m-180),(f=(s[1]/jn+r.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,m}function nu(s,r){s[0]=Math.min(s[0],r[0]),s[1]=Math.min(s[1],r[1]),s[2]=Math.max(s[2],r[0]),s[3]=Math.max(s[3],r[1])}function ul(s,r){return!(s[0]<=r[0]||s[2]>=r[2]||s[1]<=r[1]||s[3]>=r[3])}function gm(s,r,o){const f=s[0]-r[0],m=s[1]-r[1],b=s[0]-o[0],x=s[1]-o[1];return f*x-b*m==0&&f*b<=0&&m*x<=0}function sh(s,r,o,f){return(m=[f[0]-o[0],f[1]-o[1]])[0]*(b=[r[0]-s[0],r[1]-s[1]])[1]-m[1]*b[0]!=0&&!(!Mf(s,r,o,f)||!Mf(o,f,s,r));var m,b}function ym(s,r,o){for(const f of o)for(let m=0;m<f.length-1;++m)if(sh(s,r,f[m],f[m+1]))return!0;return!1}function xo(s,r,o=!1){let f=!1;for(const E of r)for(let D=0;D<E.length-1;D++){if(gm(s,E[D],E[D+1]))return o;(b=E[D])[1]>(m=s)[1]!=(x=E[D+1])[1]>m[1]&&m[0]<(x[0]-b[0])*(m[1]-b[1])/(x[1]-b[1])+b[0]&&(f=!f)}var m,b,x;return f}function Af(s,r){for(const o of r)if(xo(s,o))return!0;return!1}function vm(s,r){for(const o of s)if(!xo(o,r))return!1;for(let o=0;o<s.length-1;++o)if(ym(s[o],s[o+1],r))return!1;return!0}function _m(s,r){for(const o of r)if(vm(s,o))return!0;return!1}function Mf(s,r,o,f){const m=f[0]-o[0],b=f[1]-o[1],x=(s[0]-o[0])*b-m*(s[1]-o[1]),E=(r[0]-o[0])*b-m*(r[1]-o[1]);return x>0&&E<0||x<0&&E>0}function Pf(s,r,o){const f=[];for(let m=0;m<s.length;m++){const b=[];for(let x=0;x<s[m].length;x++){const E=tu(s[m][x],o);nu(r,E),b.push(E)}f.push(b)}return f}function ec(s,r,o){const f=[];for(let m=0;m<s.length;m++){const b=Pf(s[m],r,o);f.push(b)}return f}function iu(s,r,o,f){if(s[0]<o[0]||s[0]>o[2]){const m=.5*f;let b=s[0]-o[0]>m?-f:o[0]-s[0]>m?f:0;b===0&&(b=s[0]-o[2]>m?-f:o[2]-s[0]>m?f:0),s[0]+=b}nu(r,s)}function bm(s,r,o,f){const m=Math.pow(2,f.z)*jn,b=[f.x*jn,f.y*jn],x=[];for(const E of s)for(const D of E){const k=[D.x+b[0],D.y+b[1]];iu(k,r,o,m),x.push(k)}return x}function lh(s,r,o,f){const m=Math.pow(2,f.z)*jn,b=[f.x*jn,f.y*jn],x=[];for(const D of s){const k=[];for(const N of D){const F=[N.x+b[0],N.y+b[1]];nu(r,F),k.push(F)}x.push(k)}if(r[2]-r[0]<=m/2){(E=r)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const D of x)for(const k of D)iu(k,r,o,m)}var E;return x}class hl{constructor(r,o){this.type=ur,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ho(r[1])){const f=r[1];if(f.type==="FeatureCollection"){const m=[];for(const b of f.features){const{type:x,coordinates:E}=b.geometry;x==="Polygon"&&m.push(E),x==="MultiPolygon"&&m.push(...E)}if(m.length)return new hl(f,{type:"MultiPolygon",coordinates:m})}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new hl(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new hl(f,f)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(o,f){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(f.type==="Polygon"){const E=Pf(f.coordinates,b,x),D=bm(o.geometry(),m,b,x);if(!ul(m,b))return!1;for(const k of D)if(!xo(k,E))return!1}if(f.type==="MultiPolygon"){const E=ec(f.coordinates,b,x),D=bm(o.geometry(),m,b,x);if(!ul(m,b))return!1;for(const k of D)if(!Af(k,E))return!1}return!0})(r,this.geometries);if(r.geometryType()==="LineString")return(function(o,f){const m=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(f.type==="Polygon"){const E=Pf(f.coordinates,b,x),D=lh(o.geometry(),m,b,x);if(!ul(m,b))return!1;for(const k of D)if(!vm(k,E))return!1}if(f.type==="MultiPolygon"){const E=ec(f.coordinates,b,x),D=lh(o.geometry(),m,b,x);if(!ul(m,b))return!1;for(const k of D)if(!_m(k,E))return!1}return!0})(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let jd=class{constructor(s=[],r=(o,f)=>o<f?-1:o>f?1:0){if(this.data=s,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:r,compare:o}=this,f=r[s];for(;s>0;){const m=s-1>>1,b=r[m];if(o(f,b)>=0)break;r[s]=b,s=m}r[s]=f}_down(s){const{data:r,compare:o}=this,f=this.length>>1,m=r[s];for(;s<f;){let b=1+(s<<1);const x=b+1;if(x<this.length&&o(r[x],r[b])<0&&(b=x),o(r[b],m)>=0)break;r[s]=r[b],s=b}r[s]=m}};function ch(s,r,o=0,f=s.length-1,m=Nd){for(;f>o;){if(f-o>600){const D=f-o+1,k=r-o+1,N=Math.log(D),F=.5*Math.exp(2*N/3),$=.5*Math.sqrt(N*F*(D-F)/D)*(k-D/2<0?-1:1);ch(s,r,Math.max(o,Math.floor(r-k*F/D+$)),Math.min(f,Math.floor(r+(D-k)*F/D+$)),m)}const b=s[r];let x=o,E=f;for(fl(s,o,r),m(s[f],b)>0&&fl(s,o,f);x<E;){for(fl(s,x,E),x++,E--;m(s[x],b)<0;)x++;for(;m(s[E],b)>0;)E--}m(s[o],b)===0?fl(s,o,E):(E++,fl(s,E,f)),E<=r&&(o=E+1),r<=E&&(f=E-1)}}function fl(s,r,o){const f=s[r];s[r]=s[o],s[o]=f}function Nd(s,r){return s<r?-1:s>r?1:0}function uh(s,r){if(s.length<=1)return[s];const o=[];let f,m;for(const b of s){const x=xy(b);x!==0&&(b.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(f&&o.push(f),f=[b]):f.push(b))}if(f&&o.push(f),r>1)for(let b=0;b<o.length;b++)o[b].length<=r||(ch(o[b],r,1,o[b].length-1,xm),o[b]=o[b].slice(0,r));return o}function xm(s,r){return r.area-s.area}function xy(s){let r=0;for(let o,f,m=0,b=s.length,x=b-1;m<b;x=m++)o=s[m],f=s[x],r+=(f.x-o.x)*(o.y+f.y);return r}const wm=1/298.257223563,hh=wm*(2-wm),Sm=Math.PI/180;class Fd{constructor(r){const o=6378.137*Sm*1e3,f=Math.cos(r*Sm),m=1/(1-hh*(1-f*f)),b=Math.sqrt(m);this.kx=o*b*f,this.ky=o*b*m*(1-hh)}distance(r,o){const f=this.wrap(r[0]-o[0])*this.kx,m=(r[1]-o[1])*this.ky;return Math.sqrt(f*f+m*m)}pointOnLine(r,o){let f,m,b,x,E=1/0;for(let D=0;D<r.length-1;D++){let k=r[D][0],N=r[D][1],F=this.wrap(r[D+1][0]-k)*this.kx,$=(r[D+1][1]-N)*this.ky,Y=0;F===0&&$===0||(Y=(this.wrap(o[0]-k)*this.kx*F+(o[1]-N)*this.ky*$)/(F*F+$*$),Y>1?(k=r[D+1][0],N=r[D+1][1]):Y>0&&(k+=F/this.kx*Y,N+=$/this.ky*Y)),F=this.wrap(o[0]-k)*this.kx,$=(o[1]-N)*this.ky;const J=F*F+$*$;J<E&&(E=J,f=k,m=N,b=D,x=Y)}return{point:[f,m],index:b,t:Math.max(0,Math.min(1,x))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Wi(s,r){return r[0]-s[0]}function dl(s){return s[1]-s[0]+1}function Ka(s,r){return s[1]>=s[0]&&s[1]<r}function fh(s,r){if(s[0]>s[1])return[null,null];const o=dl(s);if(r){if(o===2)return[s,null];const m=Math.floor(o/2);return[[s[0],s[0]+m],[s[0]+m,s[1]]]}if(o===1)return[s,null];const f=Math.floor(o/2)-1;return[[s[0],s[0]+f],[s[0]+f+1,s[1]]]}function Cf(s,r){if(!Ka(r,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let f=r[0];f<=r[1];++f)nu(o,s[f]);return o}function Df(s){const r=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const f of o)nu(r,f);return r}function dh(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function If(s,r,o){if(!dh(s)||!dh(r))return NaN;let f=0,m=0;return s[2]<r[0]&&(f=r[0]-s[2]),s[0]>r[2]&&(f=s[0]-r[2]),s[1]>r[3]&&(m=s[1]-r[3]),s[3]<r[1]&&(m=r[1]-s[3]),o.distance([0,0],[f,m])}function Qa(s,r,o){const f=o.pointOnLine(r,s);return o.distance(s,f.point)}function ph(s,r,o,f,m){const b=Math.min(Qa(s,[o,f],m),Qa(r,[o,f],m)),x=Math.min(Qa(o,[s,r],m),Qa(f,[s,r],m));return Math.min(b,x)}function mh(s,r,o,f,m){if(!Ka(r,s.length)||!Ka(f,o.length))return 1/0;let b=1/0;for(let x=r[0];x<r[1];++x){const E=s[x],D=s[x+1];for(let k=f[0];k<f[1];++k){const N=o[k],F=o[k+1];if(sh(E,D,N,F))return 0;b=Math.min(b,ph(E,D,N,F,m))}}return b}function Of(s,r,o,f,m){if(!Ka(r,s.length)||!Ka(f,o.length))return NaN;let b=1/0;for(let x=r[0];x<=r[1];++x)for(let E=f[0];E<=f[1];++E)if(b=Math.min(b,m.distance(s[x],o[E])),b===0)return b;return b}function Tm(s,r,o){if(xo(s,r,!0))return 0;let f=1/0;for(const m of r){const b=m[0],x=m[m.length-1];if(b!==x&&(f=Math.min(f,Qa(s,[x,b],o)),f===0))return f;const E=o.pointOnLine(m,s);if(f=Math.min(f,o.distance(s,E.point)),f===0)return f}return f}function tc(s,r,o,f){if(!Ka(r,s.length))return NaN;for(let b=r[0];b<=r[1];++b)if(xo(s[b],o,!0))return 0;let m=1/0;for(let b=r[0];b<r[1];++b){const x=s[b],E=s[b+1];for(const D of o)for(let k=0,N=D.length,F=N-1;k<N;F=k++){const $=D[F],Y=D[k];if(sh(x,E,$,Y))return 0;m=Math.min(m,ph(x,E,$,Y,f))}}return m}function rc(s,r){for(const o of s)for(const f of o)if(xo(f,r,!0))return!0;return!1}function Ud(s,r,o,f=1/0){const m=Df(s),b=Df(r);if(f!==1/0&&If(m,b,o)>=f)return f;if(ul(m,b)){if(rc(s,r))return 0}else if(rc(r,s))return 0;let x=1/0;for(const E of s)for(let D=0,k=E.length,N=k-1;D<k;N=D++){const F=E[N],$=E[D];for(const Y of r)for(let J=0,te=Y.length,ae=te-1;J<te;ae=J++){const he=Y[ae],_e=Y[J];if(sh(F,$,he,_e))return 0;x=Math.min(x,ph(F,$,he,_e,o))}}return x}function zr(s,r,o,f,m,b){if(!b)return;const x=If(Cf(f,b),m,o);x<r&&s.push([x,b,[0,0]])}function Xo(s,r,o,f,m,b,x){if(!b||!x)return;const E=If(Cf(f,b),Cf(m,x),o);E<r&&s.push([E,b,x])}function gh(s,r,o,f,m=1/0){let b=Math.min(f.distance(s[0],o[0][0]),m);if(b===0)return b;const x=new jd([[0,[0,s.length-1],[0,0]]],Wi),E=Df(o);for(;x.length>0;){const D=x.pop();if(D[0]>=b)continue;const k=D[1],N=r?50:100;if(dl(k)<=N){if(!Ka(k,s.length))return NaN;if(r){const F=tc(s,k,o,f);if(isNaN(F)||F===0)return F;b=Math.min(b,F)}else for(let F=k[0];F<=k[1];++F){const $=Tm(s[F],o,f);if(b=Math.min(b,$),b===0)return 0}}else{const F=fh(k,r);zr(x,b,f,s,E,F[0]),zr(x,b,f,s,E,F[1])}}return b}function yh(s,r,o,f,m,b=1/0){let x=Math.min(b,m.distance(s[0],o[0]));if(x===0)return x;const E=new jd([[0,[0,s.length-1],[0,o.length-1]]],Wi);for(;E.length>0;){const D=E.pop();if(D[0]>=x)continue;const k=D[1],N=D[2],F=r?50:100,$=f?50:100;if(dl(k)<=F&&dl(N)<=$){if(!Ka(k,s.length)&&Ka(N,o.length))return NaN;let Y;if(r&&f)Y=mh(s,k,o,N,m),x=Math.min(x,Y);else if(r&&!f){const J=s.slice(k[0],k[1]+1);for(let te=N[0];te<=N[1];++te)if(Y=Qa(o[te],J,m),x=Math.min(x,Y),x===0)return x}else if(!r&&f){const J=o.slice(N[0],N[1]+1);for(let te=k[0];te<=k[1];++te)if(Y=Qa(s[te],J,m),x=Math.min(x,Y),x===0)return x}else Y=Of(s,k,o,N,m),x=Math.min(x,Y)}else{const Y=fh(k,r),J=fh(N,f);Xo(E,x,m,s,o,Y[0],J[0]),Xo(E,x,m,s,o,Y[0],J[1]),Xo(E,x,m,s,o,Y[1],J[0]),Xo(E,x,m,s,o,Y[1],J[1])}}return x}function zf(s){return s.type==="MultiPolygon"?s.coordinates.map((r=>({type:"Polygon",coordinates:r}))):s.type==="MultiLineString"?s.coordinates.map((r=>({type:"LineString",coordinates:r}))):s.type==="MultiPoint"?s.coordinates.map((r=>({type:"Point",coordinates:r}))):[s]}class nc{constructor(r,o){this.type=Pt,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ho(r[1])){const f=r[1];if(f.type==="FeatureCollection")return new nc(f,f.features.map((m=>zf(m.geometry))).flat());if(f.type==="Feature")return new nc(f,zf(f.geometry));if("type"in f&&"coordinates"in f)return new nc(f,zf(f))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(o,f){const m=o.geometry(),b=m.flat().map((D=>ru([D.x,D.y],o.canonical)));if(m.length===0)return NaN;const x=new Fd(b[0][1]);let E=1/0;for(const D of f){switch(D.type){case"Point":E=Math.min(E,yh(b,!1,[D.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,yh(b,!1,D.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,gh(b,!1,D.coordinates,x,E))}if(E===0)return E}return E})(r,this.geometries);if(r.geometryType()==="LineString")return(function(o,f){const m=o.geometry(),b=m.flat().map((D=>ru([D.x,D.y],o.canonical)));if(m.length===0)return NaN;const x=new Fd(b[0][1]);let E=1/0;for(const D of f){switch(D.type){case"Point":E=Math.min(E,yh(b,!0,[D.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,yh(b,!0,D.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,gh(b,!0,D.coordinates,x,E))}if(E===0)return E}return E})(r,this.geometries);if(r.geometryType()==="Polygon")return(function(o,f){const m=o.geometry();if(m.length===0||m[0].length===0)return NaN;const b=uh(m,0).map((D=>D.map((k=>k.map((N=>ru([N.x,N.y],o.canonical))))))),x=new Fd(b[0][0][0][1]);let E=1/0;for(const D of f)for(const k of b){switch(D.type){case"Point":E=Math.min(E,gh([D.coordinates],!1,k,x,E));break;case"LineString":E=Math.min(E,gh(D.coordinates,!0,k,x,E));break;case"Polygon":E=Math.min(E,Ud(k,D.coordinates,x,E))}if(E===0)return E}return E})(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class vh{constructor(r){this.type=hr,this.key=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=r[1];return f==null?o.error("Global state property must be defined."):typeof f!="string"?o.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new vh(f)}evaluate(r){var o;const f=(o=r.globals)===null||o===void 0?void 0:o.globalState;return f&&Object.keys(f).length!==0?Xc(f,this.key):null}eachChild(){}outputDefined(){return!1}}const au={"==":pm,"!=":Tf,">":by,"<":mm,">=":Ef,"<=":Kc,array:ji,at:xr,boolean:ji,case:rh,coalesce:Jl,collator:Qc,format:oh,image:Jc,in:fr,"index-of":Ql,interpolate:Fi,"interpolate-hcl":Fi,"interpolate-lab":Fi,length:eu,let:$r,literal:wa,match:Mr,number:ji,"number-format":Bd,object:ji,slice:Wa,step:cl,string:ji,"to-boolean":Ni,"to-color":Ni,"to-number":Ni,"to-string":Ni,var:sl,within:hl,distance:nc,"global-state":vh};class Sa{constructor(r,o,f,m){this.name=r,this.type=o,this._evaluate=f,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,o){const f=r[0],m=Sa.definitions[f];if(!m)return o.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const b=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=x.filter((([k])=>!Array.isArray(k)||k.length===r.length-1));let D=null;for(const[k,N]of E){D=new Kl(o.registry,Ui,o.path,null,o.scope);const F=[];let $=!1;for(let Y=1;Y<r.length;Y++){const J=r[Y],te=Array.isArray(k)?k[Y-1]:k.type,ae=D.parse(J,1+F.length,te);if(!ae){$=!0;break}F.push(ae)}if(!$)if(Array.isArray(k)&&k.length!==F.length)D.error(`Expected ${k.length} arguments, but found ${F.length} instead.`);else{for(let Y=0;Y<F.length;Y++){const J=Array.isArray(k)?k[Y]:k.type,te=F[Y];D.concat(Y+1).checkSubtype(J,te.type)}if(D.errors.length===0)return new Sa(f,b,N,F)}}if(E.length===1)o.errors.push(...D.errors);else{const k=(E.length?E:x).map((([F])=>{return $=F,Array.isArray($)?`(${$.map(Ar).join(", ")})`:`(${Ar($.type)}...)`;var $})).join(" | "),N=[];for(let F=1;F<r.length;F++){const $=o.parse(r[F],1+N.length);if(!$)return null;N.push(Ar($.type))}o.error(`Expected arguments of type ${k}, but found (${N.join(", ")}) instead.`)}return null}static register(r,o){Sa.definitions=o;for(const f in o)r[f]=Sa}}function Vd(s,[r,o,f,m]){r=r.evaluate(s),o=o.evaluate(s),f=f.evaluate(s);const b=m?m.evaluate(s):1,x=xa(r,o,f,b);if(x)throw new Wr(x);return new gr(r/255,o/255,f/255,b,!1)}function kf(s,r){return s in r}function Ta(s,r){const o=r[s];return o===void 0?null:o}function Wo(s){return{type:s}}function Ui(s){if(s instanceof sl)return Ui(s.boundExpression);if(s instanceof Sa&&s.name==="error"||s instanceof Qc||s instanceof hl||s instanceof nc||s instanceof vh)return!1;const r=s instanceof Ni||s instanceof ji;let o=!0;return s.eachChild((f=>{o=r?o&&Ui(f):o&&f instanceof wa})),!!o&&As(s)&&ac(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function As(s){if(s instanceof Sa&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof hl||s instanceof nc)return!1;let r=!0;return s.eachChild((o=>{r&&!As(o)&&(r=!1)})),r}function ic(s){if(s instanceof Sa&&s.name==="feature-state")return!1;let r=!0;return s.eachChild((o=>{r&&!ic(o)&&(r=!1)})),r}function ac(s,r){if(s instanceof Sa&&r.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild((f=>{o&&!ac(f,r)&&(o=!1)})),o}function _h(s){return{result:"success",value:s}}function pl(s){return{result:"error",value:s}}function Ja(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Gd(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ou(s){return!!s.expression&&s.expression.interpolated}function pr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Rf(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&mn(s)===Vo}function Ea(s){return s}function Lf(s,r){const o=s.stops&&typeof s.stops[0][0]=="object",f=o||!(o||s.property!==void 0),m=s.type||(ou(r)?"exponential":"interval"),b=(function(N){switch(N.type){case"color":return gr.parse;case"padding":return Gn.parse;case"numberArray":return pn.parse;case"colorArray":return rr.parse;default:return null}})(r);if(b&&((s=Ir({},s)).stops&&(s.stops=s.stops.map((N=>[N[0],b(N[1])]))),s.default=b(s.default?s.default:r.default)),s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;const E=(function(N){switch(N){case"exponential":return ml;case"interval":return Bf;case"categorical":return Em;case"identity":return qd;default:throw new Error(`Unknown function type "${N}"`)}})(m);let D,k;if(m==="categorical"){D=Object.create(null);for(const N of s.stops)D[N[0]]=N[1];k=typeof s.stops[0][0]}if(o){const N={},F=[];for(let J=0;J<s.stops.length;J++){const te=s.stops[J],ae=te[0].zoom;N[ae]===void 0&&(N[ae]={zoom:ae,type:s.type,property:s.property,default:s.default,stops:[]},F.push(ae)),N[ae].stops.push([te[0].value,te[1]])}const $=[];for(const J of F)$.push([N[J].zoom,Lf(N[J],r)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Fi.interpolationFactor.bind(void 0,Y),zoomStops:$.map((J=>J[0])),evaluate:({zoom:J},te)=>ml({stops:$,base:s.base},r,J).evaluate(J,te)}}if(f){const N=m==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Fi.interpolationFactor.bind(void 0,N),zoomStops:s.stops.map((F=>F[0])),evaluate:({zoom:F})=>E(s,r,F,D,k)}}return{kind:"source",evaluate(N,F){const $=F&&F.properties?F.properties[s.property]:void 0;return $===void 0?Aa(s.default,r.default):E(s,r,$,D,k)}}}function Aa(s,r,o){return s!==void 0?s:r!==void 0?r:o!==void 0?o:void 0}function Em(s,r,o,f,m){return Aa(typeof o===m?f[o]:void 0,s.default,r.default)}function Bf(s,r,o){if(pr(o)!=="number")return Aa(s.default,r.default);const f=s.stops.length;if(f===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[f-1][0])return s.stops[f-1][1];const m=ll(s.stops.map((b=>b[0])),o);return s.stops[m][1]}function ml(s,r,o){const f=s.base!==void 0?s.base:1;if(pr(o)!=="number")return Aa(s.default,r.default);const m=s.stops.length;if(m===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[m-1][0])return s.stops[m-1][1];const b=ll(s.stops.map((N=>N[0])),o),x=(function(N,F,$,Y){const J=Y-$,te=N-$;return J===0?0:F===1?te/J:(Math.pow(F,te)-1)/(Math.pow(F,J)-1)})(o,f,s.stops[b][0],s.stops[b+1][0]),E=s.stops[b][1],D=s.stops[b+1][1],k=gn[r.type]||Ea;return typeof E.evaluate=="function"?{evaluate(...N){const F=E.evaluate.apply(void 0,N),$=D.evaluate.apply(void 0,N);if(F!==void 0&&$!==void 0)return k(F,$,x,s.colorSpace)}}:k(E,D,x,s.colorSpace)}function qd(s,r,o){switch(r.type){case"color":o=gr.parse(o);break;case"formatted":o=ii.fromString(o.toString());break;case"resolvedImage":o=Bi.fromString(o.toString());break;case"padding":o=Gn.parse(o);break;case"colorArray":o=rr.parse(o);break;case"numberArray":o=pn.parse(o);break;default:pr(o)===r.type||r.type==="enum"&&r.values[o]||(o=void 0)}return Aa(o,s.default,r.default)}Sa.register(au,{error:[{kind:"error"},[Kt],(s,[r])=>{throw new Wr(r.evaluate(s))}],typeof:[Kt,[hr],(s,[r])=>Ar(mn(r.evaluate(s)))],"to-rgba":[Pi(Pt,4),[ba],(s,[r])=>{const[o,f,m,b]=r.evaluate(s).rgb;return[255*o,255*f,255*m,b]}],rgb:[ba,[Pt,Pt,Pt],Vd],rgba:[ba,[Pt,Pt,Pt,Pt],Vd],has:{type:ur,overloads:[[[Kt],(s,[r])=>kf(r.evaluate(s),s.properties())],[[Kt,Vo],(s,[r,o])=>kf(r.evaluate(s),o.evaluate(s))]]},get:{type:hr,overloads:[[[Kt],(s,[r])=>Ta(r.evaluate(s),s.properties())],[[Kt,Vo],(s,[r,o])=>Ta(r.evaluate(s),o.evaluate(s))]]},"feature-state":[hr,[Kt],(s,[r])=>Ta(r.evaluate(s),s.featureState||{})],properties:[Vo,[],s=>s.properties()],"geometry-type":[Kt,[],s=>s.geometryType()],id:[hr,[],s=>s.id()],zoom:[Pt,[],s=>s.globals.zoom],"heatmap-density":[Pt,[],s=>s.globals.heatmapDensity||0],elevation:[Pt,[],s=>s.globals.elevation||0],"line-progress":[Pt,[],s=>s.globals.lineProgress||0],accumulated:[hr,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Pt,Wo(Pt),(s,r)=>{let o=0;for(const f of r)o+=f.evaluate(s);return o}],"*":[Pt,Wo(Pt),(s,r)=>{let o=1;for(const f of r)o*=f.evaluate(s);return o}],"-":{type:Pt,overloads:[[[Pt,Pt],(s,[r,o])=>r.evaluate(s)-o.evaluate(s)],[[Pt],(s,[r])=>-r.evaluate(s)]]},"/":[Pt,[Pt,Pt],(s,[r,o])=>r.evaluate(s)/o.evaluate(s)],"%":[Pt,[Pt,Pt],(s,[r,o])=>r.evaluate(s)%o.evaluate(s)],ln2:[Pt,[],()=>Math.LN2],pi:[Pt,[],()=>Math.PI],e:[Pt,[],()=>Math.E],"^":[Pt,[Pt,Pt],(s,[r,o])=>Math.pow(r.evaluate(s),o.evaluate(s))],sqrt:[Pt,[Pt],(s,[r])=>Math.sqrt(r.evaluate(s))],log10:[Pt,[Pt],(s,[r])=>Math.log(r.evaluate(s))/Math.LN10],ln:[Pt,[Pt],(s,[r])=>Math.log(r.evaluate(s))],log2:[Pt,[Pt],(s,[r])=>Math.log(r.evaluate(s))/Math.LN2],sin:[Pt,[Pt],(s,[r])=>Math.sin(r.evaluate(s))],cos:[Pt,[Pt],(s,[r])=>Math.cos(r.evaluate(s))],tan:[Pt,[Pt],(s,[r])=>Math.tan(r.evaluate(s))],asin:[Pt,[Pt],(s,[r])=>Math.asin(r.evaluate(s))],acos:[Pt,[Pt],(s,[r])=>Math.acos(r.evaluate(s))],atan:[Pt,[Pt],(s,[r])=>Math.atan(r.evaluate(s))],min:[Pt,Wo(Pt),(s,r)=>Math.min(...r.map((o=>o.evaluate(s))))],max:[Pt,Wo(Pt),(s,r)=>Math.max(...r.map((o=>o.evaluate(s))))],abs:[Pt,[Pt],(s,[r])=>Math.abs(r.evaluate(s))],round:[Pt,[Pt],(s,[r])=>{const o=r.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[Pt,[Pt],(s,[r])=>Math.floor(r.evaluate(s))],ceil:[Pt,[Pt],(s,[r])=>Math.ceil(r.evaluate(s))],"filter-==":[ur,[Kt,hr],(s,[r,o])=>s.properties()[r.value]===o.value],"filter-id-==":[ur,[hr],(s,[r])=>s.id()===r.value],"filter-type-==":[ur,[Kt],(s,[r])=>s.geometryType()===r.value],"filter-<":[ur,[Kt,hr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f<m}],"filter-id-<":[ur,[hr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o<f}],"filter->":[ur,[Kt,hr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f>m}],"filter-id->":[ur,[hr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o>f}],"filter-<=":[ur,[Kt,hr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[ur,[hr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o<=f}],"filter->=":[ur,[Kt,hr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[ur,[hr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o>=f}],"filter-has":[ur,[hr],(s,[r])=>r.value in s.properties()],"filter-has-id":[ur,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[ur,[Pi(Kt)],(s,[r])=>r.value.indexOf(s.geometryType())>=0],"filter-id-in":[ur,[Pi(hr)],(s,[r])=>r.value.indexOf(s.id())>=0],"filter-in-small":[ur,[Kt,Pi(hr)],(s,[r,o])=>o.value.indexOf(s.properties()[r.value])>=0],"filter-in-large":[ur,[Kt,Pi(hr)],(s,[r,o])=>(function(f,m,b,x){for(;b<=x;){const E=b+x>>1;if(m[E]===f)return!0;m[E]>f?x=E-1:b=E+1}return!1})(s.properties()[r.value],o.value,0,o.value.length-1)],all:{type:ur,overloads:[[[ur,ur],(s,[r,o])=>r.evaluate(s)&&o.evaluate(s)],[Wo(ur),(s,r)=>{for(const o of r)if(!o.evaluate(s))return!1;return!0}]]},any:{type:ur,overloads:[[[ur,ur],(s,[r,o])=>r.evaluate(s)||o.evaluate(s)],[Wo(ur),(s,r)=>{for(const o of r)if(o.evaluate(s))return!0;return!1}]]},"!":[ur,[ur],(s,[r])=>!r.evaluate(s)],"is-supported-script":[ur,[Kt],(s,[r])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(r.evaluate(s))}],upcase:[Kt,[Kt],(s,[r])=>r.evaluate(s).toUpperCase()],downcase:[Kt,[Kt],(s,[r])=>r.evaluate(s).toLowerCase()],concat:[Kt,Wo(hr),(s,r)=>r.map((o=>ol(o.evaluate(s)))).join("")],"resolved-locale":[Kt,[$l],(s,[r])=>r.evaluate(s).resolvedLocale()]});class jf{constructor(r,o,f){this.expression=r,this._warningHistory={},this._evaluator=new Wl,this._defaultValue=o?(function(m){if(m.type==="color"&&Rf(m.default))return new gr(0,0,0,0);switch(m.type){case"color":return gr.parse(m.default)||null;case"padding":return Gn.parse(m.default)||null;case"numberArray":return pn.parse(m.default)||null;case"colorArray":return rr.parse(m.default)||null;case"variableAnchorOffsetCollection":return Dn.parse(m.default)||null;case"projectionDefinition":return ai.parse(m.default)||null;default:return m.default===void 0?null:m.default}})(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=f}evaluateWithoutErrorHandling(r,o,f,m,b,x){return this._globalState&&(r=ui(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=f,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(r,o,f,m,b,x){this._globalState&&(r=ui(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m,this._evaluator.availableImages=b||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Wr(`Expected value to be one of ${Object.keys(this._enumValues).map((D=>JSON.stringify(D))).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function gl(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in au}function su(s,r,o){const f=new Kl(au,Ui,[],r?(function(b){const x={color:ba,string:Kt,number:Pt,enum:Kt,boolean:ur,formatted:Go,padding:Ss,numberArray:$o,colorArray:qo,projectionDefinition:xf,resolvedImage:Cn,variableAnchorOffsetCollection:Zc};return b.type==="array"?Pi(x[b.value]||hr,b.length):x[b.type]})(r):void 0),m=f.parse(s,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?_h(new jf(m,r,o)):pl(f.errors)}class Vi{constructor(r,o,f){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!ic(o.expression),this.globalStateRefs=oi(o.expression),this._globalState=f}evaluateWithoutErrorHandling(r,o,f,m,b,x){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,o,f,m,b,x)}evaluate(r,o,f,m,b,x){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluate(r,o,f,m,b,x)}}class yl{constructor(r,o,f,m,b){this.kind=r,this.zoomStops=f,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!ic(o.expression),this.globalStateRefs=oi(o.expression),this.interpolationType=m,this._globalState=b}evaluateWithoutErrorHandling(r,o,f,m,b,x){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,o,f,m,b,x)}evaluate(r,o,f,m,b,x){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluate(r,o,f,m,b,x)}interpolationFactor(r,o,f){return this.interpolationType?Fi.interpolationFactor(this.interpolationType,r,o,f):0}}function vl(s,r,o){const f=su(s,r,o);if(f.result==="error")return f;const m=f.value.expression,b=As(m);if(!b&&!Ja(r))return pl([new on("","data expressions not supported")]);const x=ac(m,["zoom"]);if(!x&&!Gd(r))return pl([new on("","zoom expressions not supported")]);const E=_l(m);return E||x?E instanceof on?pl([E]):E instanceof Fi&&!ou(r)?pl([new on("",'"interpolate" expressions cannot be used with this property')]):_h(E?new yl(b?"camera":"composite",f.value,E.labels,E instanceof Fi?E.interpolation:void 0,o):new Vi(b?"constant":"source",f.value,o)):pl([new on("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class oc{constructor(r,o){this._parameters=r,this._specification=o,Ir(this,Lf(this._parameters,this._specification))}static deserialize(r){return new oc(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function _l(s){let r=null;if(s instanceof $r)r=_l(s.result);else if(s instanceof Jl){for(const o of s.args)if(r=_l(o),r)break}else(s instanceof cl||s instanceof Fi)&&s.input instanceof Sa&&s.input.name==="zoom"&&(r=s);return r instanceof on||s.eachChild((o=>{const f=_l(o);f instanceof on?r=f:!r&&f?r=new on("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&f&&r!==f&&(r=new on("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r}function oi(s,r=new Set){return s instanceof vh&&r.add(s.key),s.eachChild((o=>{oi(o,r)})),r}function ui(s,r){const{zoom:o,heatmapDensity:f,elevation:m,lineProgress:b,isSupportedScript:x,accumulated:E}=s??{};return{zoom:o,heatmapDensity:f,elevation:m,lineProgress:b,isSupportedScript:x,accumulated:E,globalState:r}}function Ko(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const r of s.slice(1))if(!Ko(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Qo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ki(s,r){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ko(s)||(s=sc(s));const o=su(s,Qo,r);if(o.result==="error")throw new Error(o.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,m,b)=>o.value.evaluate(f,m,{},b),needGeometry:$d(s),getGlobalStateRefs:()=>oi(o.value.expression)}}function Ms(s,r){return s<r?-1:s>r?1:0}function $d(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let r=1;r<s.length;r++)if($d(s[r]))return!0;return!1}function sc(s){if(!s)return!0;const r=s[0];return s.length<=1?r!=="any":r==="=="?lu(s[1],s[2],"=="):r==="!="?Kr(lu(s[1],s[2],"==")):r==="<"||r===">"||r==="<="||r===">="?lu(s[1],s[2],r):r==="any"?(o=s.slice(1),["any"].concat(o.map(sc))):r==="all"?["all"].concat(s.slice(1).map(sc)):r==="none"?["all"].concat(s.slice(1).map(sc).map(Kr)):r==="in"?Zd(s[1],s.slice(2)):r==="!in"?Kr(Zd(s[1],s.slice(2))):r==="has"?hi(s[1]):r!=="!has"||Kr(hi(s[1]));var o}function lu(s,r,o){switch(s){case"$type":return[`filter-type-${o}`,r];case"$id":return[`filter-id-${o}`,r];default:return[`filter-${o}`,s,r]}}function Zd(s,r){if(r.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some((o=>typeof o!=typeof r[0]))?["filter-in-large",s,["literal",r.sort(Ms)]]:["filter-in-small",s,["literal",r]]}}function hi(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Kr(s){return["!",s]}function Sr(s){const r=typeof s;if(r==="number"||r==="boolean"||r==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let m="[";for(const b of s)m+=`${Sr(b)},`;return`${m}]`}const o=Object.keys(s).sort();let f="{";for(let m=0;m<o.length;m++)f+=`${JSON.stringify(o[m])}:${Sr(s[o[m]])},`;return`${f}}`}function Ps(s){let r="";for(const o of Ut)r+=`/${Sr(s[o])}`;return r}function Ma(s){const r=s.value;return r?[new St(s.key,r,"constants have been deprecated as of v8")]:[]}function wn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Qi(s){if(Array.isArray(s))return s.map(Qi);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const r={};for(const o in s)r[o]=Qi(s[o]);return r}return wn(s)}function Ji(s){const r=s.key,o=s.value,f=s.valueSpec||{},m=s.objectElementValidators||{},b=s.style,x=s.styleSpec,E=s.validateSpec;let D=[];const k=pr(o);if(k!=="object")return[new St(r,o,`object expected, ${k} found`)];for(const N in o){const F=N.split(".")[0],$=Xc(f,F)||f["*"];let Y;if(Xc(m,F))Y=m[F];else if(Xc(f,F)){if(o[N]===void 0)continue;Y=E}else if(m["*"])Y=m["*"];else{if(!f["*"]){D.push(new St(r,o[N],`unknown property "${N}"`));continue}Y=E}D=D.concat(Y({key:(r&&`${r}.`)+N,value:o[N],valueSpec:$,style:b,styleSpec:x,object:o,objectKey:N,validateSpec:E},o))}for(const N in f)m[N]||f[N].required&&f[N].default===void 0&&o[N]===void 0&&D.push(new St(r,o,`missing required property "${N}"`));return D}function bh(s){const r=s.value,o=s.valueSpec,f=s.style,m=s.styleSpec,b=s.key,x=s.arrayElementValidator||s.validateSpec;if(pr(r)!=="array")return[new St(b,r,`array expected, ${pr(r)} found`)];if(o.length&&r.length!==o.length)return[new St(b,r,`array length ${o.length} expected, length ${r.length} found`)];let E={type:o.value,values:o.values};m.$version<7&&(E.function=o.function),pr(o.value)==="object"&&(E=o.value);let D=[];for(let k=0;k<r.length;k++)D=D.concat(x({array:r,arrayIndex:k,value:r[k],valueSpec:E,validateSpec:s.validateSpec,style:f,styleSpec:m,key:`${b}[${k}]`}));return D}function Jo(s){const r=s.key,o=s.value,f=s.valueSpec;let m=pr(o);return m==="number"&&o!=o&&(m="NaN"),m!=="number"?[new St(r,o,`number expected, ${m} found`)]:"minimum"in f&&o<f.minimum?[new St(r,o,`${o} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&o>f.maximum?[new St(r,o,`${o} is greater than the maximum value ${f.maximum}`)]:[]}function es(s){const r=s.valueSpec,o=wn(s.value.type);let f,m,b,x={};const E=o!=="categorical"&&s.value.property===void 0,D=!E,k=pr(s.value.stops)==="array"&&pr(s.value.stops[0])==="array"&&pr(s.value.stops[0][0])==="object",N=Ji({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Y){if(o==="identity")return[new St(Y.key,Y.value,'identity function may not have a "stops" property')];let J=[];const te=Y.value;return J=J.concat(bh({key:Y.key,value:te,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:F})),pr(te)==="array"&&te.length===0&&J.push(new St(Y.key,te,"array must have at least one stop")),J},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return o==="identity"&&E&&N.push(new St(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||N.push(new St(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!ou(s.valueSpec)&&N.push(new St(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(D&&!Ja(s.valueSpec)?N.push(new St(s.key,s.value,"property functions not supported")):E&&!Gd(s.valueSpec)&&N.push(new St(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!k||s.value.property!==void 0||N.push(new St(s.key,s.value,'"property" property is required')),N;function F(Y){let J=[];const te=Y.value,ae=Y.key;if(pr(te)!=="array")return[new St(ae,te,`array expected, ${pr(te)} found`)];if(te.length!==2)return[new St(ae,te,`array length 2 expected, length ${te.length} found`)];if(k){if(pr(te[0])!=="object")return[new St(ae,te,`object expected, ${pr(te[0])} found`)];if(te[0].zoom===void 0)return[new St(ae,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new St(ae,te,"object stop key must have value")];if(b&&b>wn(te[0].zoom))return[new St(ae,te[0].zoom,"stop zoom values must appear in ascending order")];wn(te[0].zoom)!==b&&(b=wn(te[0].zoom),m=void 0,x={}),J=J.concat(Ji({key:`${ae}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Jo,value:$}}))}else J=J.concat($({key:`${ae}[0]`,value:te[0],validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},te));return gl(Qi(te[1]))?J.concat([new St(`${ae}[1]`,te[1],"expressions are not allowed in function stops.")]):J.concat(Y.validateSpec({key:`${ae}[1]`,value:te[1],valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function $(Y,J){const te=pr(Y.value),ae=wn(Y.value),he=Y.value!==null?Y.value:J;if(f){if(te!==f)return[new St(Y.key,he,`${te} stop domain type must match previous stop domain type ${f}`)]}else f=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new St(Y.key,he,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&o!=="categorical"){let _e=`number expected, ${te} found`;return Ja(r)&&o===void 0&&(_e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new St(Y.key,he,_e)]}return o!=="categorical"||te!=="number"||isFinite(ae)&&Math.floor(ae)===ae?o!=="categorical"&&te==="number"&&m!==void 0&&ae<m?[new St(Y.key,he,"stop domain values must appear in ascending order")]:(m=ae,o==="categorical"&&ae in x?[new St(Y.key,he,"stop domain values must be unique")]:(x[ae]=!0,[])):[new St(Y.key,he,`integer expected, found ${ae}`)]}}function ts(s){const r=(s.expressionContext==="property"?vl:su)(Qi(s.value),s.valueSpec);if(r.result==="error")return r.value.map((f=>new St(`${s.key}${f.key}`,s.value,f.message)));const o=r.value.expression||r.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new St(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ic(o))return[new St(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!ic(o))return[new St(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!ac(o,["zoom","feature-state"]))return[new St(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!As(o))return[new St(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cs(s){const r=s.key,o=s.value,f=pr(o);return f!=="string"?[new St(r,o,`color expected, ${f} found`)]:gr.parse(String(o))?[]:[new St(r,o,`color expected, "${o}" found`)]}function Ds(s){const r=s.key,o=s.value,f=s.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(wn(o))===-1&&m.push(new St(r,o,`expected one of [${f.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(f.values).indexOf(wn(o))===-1&&m.push(new St(r,o,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(o)} found`)),m}function eo(s){return Ko(Qi(s.value))?ts(Ir({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):rs(s)}function rs(s){const r=s.value,o=s.key;if(pr(r)!=="array")return[new St(o,r,`array expected, ${pr(r)} found`)];const f=s.styleSpec;let m,b=[];if(r.length<1)return[new St(o,r,"filter array must have at least 1 element")];switch(b=b.concat(Ds({key:`${o}[0]`,value:r[0],valueSpec:f.filter_operator,style:s.style,styleSpec:s.styleSpec})),wn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&wn(r[1])==="$type"&&b.push(new St(o,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&b.push(new St(o,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=pr(r[1]),m!=="string"&&b.push(new St(`${o}[1]`,r[1],`string expected, ${m} found`)));for(let x=2;x<r.length;x++)m=pr(r[x]),wn(r[1])==="$type"?b=b.concat(Ds({key:`${o}[${x}]`,value:r[x],valueSpec:f.geometry_type,style:s.style,styleSpec:s.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&b.push(new St(`${o}[${x}]`,r[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<r.length;x++)b=b.concat(rs({key:`${o}[${x}]`,value:r[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":m=pr(r[1]),r.length!==2?b.push(new St(o,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&b.push(new St(`${o}[1]`,r[1],`string expected, ${m} found`))}return b}function Is(s,r){const o=s.key,f=s.validateSpec,m=s.style,b=s.styleSpec,x=s.value,E=s.objectKey,D=b[`${r}_${s.layerType}`];if(!D)return[];const k=E.match(/^(.*)-transition$/);if(r==="paint"&&k&&D[k[1]]&&D[k[1]].transition)return f({key:o,value:x,valueSpec:b.transition,style:m,styleSpec:b});const N=s.valueSpec||D[E];if(!N)return[new St(o,x,`unknown property "${E}"`)];let F;if(pr(x)==="string"&&Ja(N)&&!N.tokens&&(F=/^{([^}]+)}$/.exec(x)))return[new St(o,x,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const $=[];return s.layerType==="symbol"&&E==="text-font"&&Rf(Qi(x))&&wn(x.type)==="identity"&&$.push(new St(o,x,'"text-font" does not support identity functions')),$.concat(f({key:s.key,value:x,valueSpec:N,style:m,styleSpec:b,expressionContext:"property",propertyType:r,propertyKey:E}))}function ns(s){return Is(s,"paint")}function Nf(s){return Is(s,"layout")}function Ff(s){let r=[];const o=s.value,f=s.key,m=s.style,b=s.styleSpec;if(pr(o)!=="object")return[new St(f,o,`object expected, ${pr(o)} found`)];o.type||o.ref||r.push(new St(f,o,'either "type" or "ref" is required'));let x=wn(o.type);const E=wn(o.ref);if(o.id){const D=wn(o.id);for(let k=0;k<s.arrayIndex;k++){const N=m.layers[k];wn(N.id)===D&&r.push(new St(f,o.id,`duplicate layer id "${o.id}", previously used at line ${N.id.__line__}`))}}if("ref"in o){let D;["type","source","source-layer","filter","layout"].forEach((k=>{k in o&&r.push(new St(f,o[k],`"${k}" is prohibited for ref layers`))})),m.layers.forEach((k=>{wn(k.id)===E&&(D=k)})),D?D.ref?r.push(new St(f,o.ref,"ref cannot reference another ref layer")):x=wn(D.type):r.push(new St(f,o.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(o.source){const D=m.sources&&m.sources[o.source],k=D&&wn(D.type);D?k==="vector"&&x==="raster"?r.push(new St(f,o.source,`layer "${o.id}" requires a raster source`)):k!=="raster-dem"&&x==="hillshade"||k!=="raster-dem"&&x==="color-relief"?r.push(new St(f,o.source,`layer "${o.id}" requires a raster-dem source`)):k==="raster"&&x!=="raster"?r.push(new St(f,o.source,`layer "${o.id}" requires a vector source`)):k!=="vector"||o["source-layer"]?k==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?r.push(new St(f,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!o.paint||!o.paint["line-gradient"]||k==="geojson"&&D.lineMetrics||r.push(new St(f,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new St(f,o,`layer "${o.id}" must specify a "source-layer"`)):r.push(new St(f,o.source,`source "${o.source}" not found`))}else r.push(new St(f,o,'missing required property "source"'));return r=r.concat(Ji({key:f,value:o,valueSpec:b.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${f}.type`,value:o.type,valueSpec:b.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:eo,layout:D=>Ji({layer:o,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":k=>Nf(Ir({layerType:x},k))}}),paint:D=>Ji({layer:o,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":k=>ns(Ir({layerType:x},k))}})}})),r}function Pa(s){const r=s.value,o=s.key,f=pr(r);return f!=="string"?[new St(o,r,`string expected, ${f} found`)]:[]}const cu={promoteId:function({key:s,value:r}){if(pr(r)==="string")return Pa({key:s,value:r});{const o=[];for(const f in r)o.push(...Pa({key:`${s}.${f}`,value:r[f]}));return o}}};function Os(s){const r=s.value,o=s.key,f=s.styleSpec,m=s.style,b=s.validateSpec;if(!r.type)return[new St(o,r,'"type" is required')];const x=wn(r.type);let E;switch(x){case"vector":case"raster":return E=Ji({key:o,value:r,valueSpec:f[`source_${x.replace("-","_")}`],style:s.style,styleSpec:f,objectElementValidators:cu,validateSpec:b}),E;case"raster-dem":return E=(function(D){var k;const N=(k=D.sourceName)!==null&&k!==void 0?k:"",F=D.value,$=D.styleSpec,Y=$.source_raster_dem,J=D.style;let te=[];const ae=pr(F);if(F===void 0)return te;if(ae!=="object")return te.push(new St("source_raster_dem",F,`object expected, ${ae} found`)),te;const he=wn(F.encoding)==="custom",_e=["redFactor","greenFactor","blueFactor","baseShift"],ue=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const me in F)!he&&_e.includes(me)?te.push(new St(me,F[me],`In "${N}": "${me}" is only valid when "encoding" is set to "custom". ${ue} encoding found`)):Y[me]?te=te.concat(D.validateSpec({key:me,value:F[me],valueSpec:Y[me],validateSpec:D.validateSpec,style:J,styleSpec:$})):te.push(new St(me,F[me],`unknown property "${me}"`));return te})({sourceName:o,value:r,style:s.style,styleSpec:f,validateSpec:b}),E;case"geojson":if(E=Ji({key:o,value:r,valueSpec:f.source_geojson,style:m,styleSpec:f,validateSpec:b,objectElementValidators:cu}),r.cluster)for(const D in r.clusterProperties){const[k,N]=r.clusterProperties[D],F=typeof k=="string"?[k,["accumulated"],["get",D]]:k;E.push(...ts({key:`${o}.${D}.map`,value:N,expressionContext:"cluster-map"})),E.push(...ts({key:`${o}.${D}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return E;case"video":return Ji({key:o,value:r,valueSpec:f.source_video,style:m,validateSpec:b,styleSpec:f});case"image":return Ji({key:o,value:r,valueSpec:f.source_image,style:m,validateSpec:b,styleSpec:f});case"canvas":return[new St(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ds({key:`${o}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function qn(s){const r=s.value,o=s.styleSpec,f=o.light,m=s.style;let b=[];const x=pr(r);if(r===void 0)return b;if(x!=="object")return b=b.concat([new St("light",r,`object expected, ${x} found`)]),b;for(const E in r){const D=E.match(/^(.*)-transition$/);b=b.concat(D&&f[D[1]]&&f[D[1]].transition?s.validateSpec({key:E,value:r[E],valueSpec:o.transition,validateSpec:s.validateSpec,style:m,styleSpec:o}):f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],validateSpec:s.validateSpec,style:m,styleSpec:o}):[new St(E,r[E],`unknown property "${E}"`)])}return b}function xh(s){const r=s.value,o=s.styleSpec,f=o.sky,m=s.style,b=pr(r);if(r===void 0)return[];if(b!=="object")return[new St("sky",r,`object expected, ${b} found`)];let x=[];for(const E in r)x=x.concat(f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],style:m,styleSpec:o}):[new St(E,r[E],`unknown property "${E}"`)]);return x}function Uf(s){const r=s.value,o=s.styleSpec,f=o.terrain,m=s.style;let b=[];const x=pr(r);if(r===void 0)return b;if(x!=="object")return b=b.concat([new St("terrain",r,`object expected, ${x} found`)]),b;for(const E in r)b=b.concat(f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],validateSpec:s.validateSpec,style:m,styleSpec:o}):[new St(E,r[E],`unknown property "${E}"`)]);return b}function Hd(s){let r=[];const o=s.value,f=s.key;if(Array.isArray(o)){const m=[],b=[];for(const x in o)o[x].id&&m.includes(o[x].id)&&r.push(new St(f,o,`all the sprites' ids must be unique, but ${o[x].id} is duplicated`)),m.push(o[x].id),o[x].url&&b.includes(o[x].url)&&r.push(new St(f,o,`all the sprites' URLs must be unique, but ${o[x].url} is duplicated`)),b.push(o[x].url),r=r.concat(Ji({key:`${f}[${x}]`,value:o[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return r}return Pa({key:f,value:o})}function Am(s){return!!s&&s.constructor===Object}function Yd(s){return Am(s.value)?[]:[new St(s.key,s.value,`object expected, ${pr(s.value)} found`)]}const Nn={"*":()=>[],array:bh,boolean:function(s){const r=s.value,o=s.key,f=pr(r);return f!=="boolean"?[new St(o,r,`boolean expected, ${f} found`)]:[]},number:Jo,color:Cs,constants:Ma,enum:Ds,filter:eo,function:es,layer:Ff,object:Ji,source:Os,light:qn,sky:xh,terrain:Uf,projection:function(s){const r=s.value,o=s.styleSpec,f=o.projection,m=s.style,b=pr(r);if(r===void 0)return[];if(b!=="object")return[new St("projection",r,`object expected, ${b} found`)];let x=[];for(const E in r)x=x.concat(f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],style:m,styleSpec:o}):[new St(E,r[E],`unknown property "${E}"`)]);return x},projectionDefinition:function(s){const r=s.key;let o=s.value;o=o instanceof String?o.valueOf():o;const f=pr(o);return f!=="array"||(function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"})(o)||(function(m){return!!["interpolate","step","literal"].includes(m[0])})(o)?["array","string"].includes(f)?[]:[new St(r,o,`projection expected, invalid type "${f}" found`)]:[new St(r,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:Pa,formatted:function(s){return Pa(s).length===0?[]:ts(s)},resolvedImage:function(s){return Pa(s).length===0?[]:ts(s)},padding:function(s){const r=s.key,o=s.value;if(pr(o)==="array"){if(o.length<1||o.length>4)return[new St(r,o,`padding requires 1 to 4 values; ${o.length} values found`)];const f={type:"number"};let m=[];for(let b=0;b<o.length;b++)m=m.concat(s.validateSpec({key:`${r}[${b}]`,value:o[b],validateSpec:s.validateSpec,valueSpec:f}));return m}return Jo({key:r,value:o,valueSpec:{}})},numberArray:function(s){const r=s.key,o=s.value;if(pr(o)==="array"){const f={type:"number"};if(o.length<1)return[new St(r,o,"array length at least 1 expected, length 0 found")];let m=[];for(let b=0;b<o.length;b++)m=m.concat(s.validateSpec({key:`${r}[${b}]`,value:o[b],validateSpec:s.validateSpec,valueSpec:f}));return m}return Jo({key:r,value:o,valueSpec:{}})},colorArray:function(s){const r=s.key,o=s.value;if(pr(o)==="array"){if(o.length<1)return[new St(r,o,"array length at least 1 expected, length 0 found")];let f=[];for(let m=0;m<o.length;m++)f=f.concat(Cs({key:`${r}[${m}]`,value:o[m]}));return f}return Cs({key:r,value:o})},variableAnchorOffsetCollection:function(s){const r=s.key,o=s.value,f=pr(o),m=s.styleSpec;if(f!=="array"||o.length<1||o.length%2!=0)return[new St(r,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let b=[];for(let x=0;x<o.length;x+=2)b=b.concat(Ds({key:`${r}[${x}]`,value:o[x],valueSpec:m.layout_symbol["text-anchor"]})),b=b.concat(bh({key:`${r}[${x+1}]`,value:o[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:m}));return b},sprite:Hd,state:Yd,fontFaces:function(s){const r=s.key,o=s.value,f=s.validateSpec,m=s.styleSpec,b=s.style;if(!Am(o))return[new St(r,o,`object expected, ${pr(o)} found`)];const x=[];for(const E in o){const D=o[E],k=pr(D);if(k==="string")x.push(...Pa({key:`${r}.${E}`,value:D}));else if(k==="array"){const N={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[F,$]of D.entries())x.push(...Ji({key:`${r}.${E}[${F}]`,value:$,valueSpec:N,styleSpec:m,style:b,validateSpec:f}))}else x.push(new St(`${r}.${E}`,D,`string or array expected, ${k} found`))}return x}};function is(s){const r=s.value,o=s.valueSpec,f=s.styleSpec;return s.validateSpec=is,o.expression&&Rf(wn(r))?es(s):o.expression&&gl(Qi(r))?ts(s):o.type&&Nn[o.type]?Nn[o.type](s):Ji(Ir({},s,{valueSpec:o.type?f[o.type]:o}))}function uu(s){const r=s.value,o=s.key,f=Pa(s);return f.length||(r.indexOf("{fontstack}")===-1&&f.push(new St(o,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&f.push(new St(o,r,'"glyphs" url must include a "{range}" token'))),f}function Ci(s,r=Ie){let o=[];return o=o.concat(is({key:"",value:s,valueSpec:r.$root,styleSpec:r,style:s,validateSpec:is,objectElementValidators:{glyphs:uu,"*":()=>[]}})),s.constants&&(o=o.concat(Ma({key:"constants",value:s.constants}))),lc(o)}function Ca(s){return function(r){return s(Object.assign({},r,{validateSpec:is}))}}function lc(s){return[].concat(s).sort(((r,o)=>r.line-o.line))}function Di(s){return function(...r){return lc(s.apply(this,r))}}Ci.source=Di(Ca(Os)),Ci.sprite=Di(Ca(Hd)),Ci.glyphs=Di(Ca(uu)),Ci.light=Di(Ca(qn)),Ci.sky=Di(Ca(xh)),Ci.terrain=Di(Ca(Uf)),Ci.state=Di(Ca(Yd)),Ci.layer=Di(Ca(Ff)),Ci.filter=Di(Ca(eo)),Ci.paintProperty=Di(Ca(ns)),Ci.layoutProperty=Di(Ca(Nf));const wy={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class hu{constructor(r,o){this._globalState=o,this.setValue(r)}evaluate(){var r;return(r=this._literalValue)!==null&&r!==void 0?r:this._compiledValue.evaluate({})}setValue(r){if(r==null||r==="visible"||r==="none")return this._literalValue=r==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const o=su(r,wy,this._globalState);if(o.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(o.value.map((f=>`${f.key}: ${f.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=o.value,this._globalStateRefs=oi(o.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const wh=Ie,si=Ci,wo=si.light,Vf=si.sky,Gf=si.paintProperty,Mm=si.layoutProperty;function So(s,r){let o=!1;if(r&&r.length)for(const f of r)s.fire(new _t(new Error(f.message))),o=!0;return o}class bl{constructor(r,o,f){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const x=new Int32Array(this.arrayBuffer);r=x[0],this.d=(o=x[1])+2*(f=x[2]);for(let D=0;D<this.d*this.d;D++){const k=x[3+D],N=x[3+D+1];m.push(k===N?null:x.subarray(k,N))}const E=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=o+2*f;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=f,this.scale=o/r,this.uid=0;const b=f/o*r;this.min=-b,this.max=r+b}insert(r,o,f,m,b){this._forEachCell(o,f,m,b,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(b)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,o,f,m,b,x){this.cells[b].push(x)}query(r,o,f,m,b){const x=this.min,E=this.max;if(r<=x&&o<=x&&E<=f&&E<=m&&!b)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(r,o,f,m,this._queryCell,D,{},b),D}}_queryCell(r,o,f,m,b,x,E,D){const k=this.cells[b];if(k!==null){const N=this.keys,F=this.bboxes;for(let $=0;$<k.length;$++){const Y=k[$];if(E[Y]===void 0){const J=4*Y;(D?D(F[J+0],F[J+1],F[J+2],F[J+3]):r<=F[J+2]&&o<=F[J+3]&&f>=F[J+0]&&m>=F[J+1])?(E[Y]=!0,x.push(N[Y])):E[Y]=!1}}}}_forEachCell(r,o,f,m,b,x,E,D){const k=this._convertToCellCoord(r),N=this._convertToCellCoord(o),F=this._convertToCellCoord(f),$=this._convertToCellCoord(m);for(let Y=k;Y<=F;Y++)for(let J=N;J<=$;J++){const te=this.d*J+Y;if((!D||D(this._convertFromCellCoord(Y),this._convertFromCellCoord(J),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(J+1)))&&b.call(this,r,o,f,m,te,x,E,D))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,o=3+this.cells.length+1+1;let f=0;for(let x=0;x<this.cells.length;x++)f+=this.cells[x].length;const m=new Int32Array(o+f+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let b=o;for(let x=0;x<r.length;x++){const E=r[x];m[3+x]=b,m.set(E,b),b+=E.length}return m[3+r.length]=b,m.set(this.keys,b),b+=this.keys.length,m[3+r.length+1]=b,m.set(this.bboxes,b),b+=this.bboxes.length,m.buffer}static serialize(r,o){const f=r.toArrayBuffer();return o&&o.push(f),{buffer:f}}static deserialize(r){return new bl(r.buffer)}}const ea={};function Lt(s,r,o={}){if(ea[s])throw new Error(`${s} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:s,writeable:!1}),ea[s]={klass:r,omit:o.omit||[],shallow:o.shallow||[]}}Lt("Object",Object),Lt("Set",Set),Lt("TransferableGridIndex",bl),Lt("Color",gr),Lt("Error",Error),Lt("AJAXError",se),Lt("ResolvedImage",Bi),Lt("StylePropertyFunction",oc),Lt("StyleExpression",jf,{omit:["_evaluator"]}),Lt("ZoomDependentExpression",yl),Lt("ZoomConstantExpression",Vi),Lt("CompoundExpression",Sa,{omit:["_evaluate"]});for(const s in au)au[s]._classRegistryKey||Lt(`Expression_${s}`,au[s]);function Sh(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function qf(s){return s.$name||s.constructor._classRegistryKey}function to(s){return!(function(r){if(r===null||typeof r!="object")return!1;const o=qf(r);return!(!o||o==="Object")})(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Sh(s)||va(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function To(s,r){if(to(s))return(Sh(s)||va(s))&&r&&r.push(s),ArrayBuffer.isView(s)&&r&&r.push(s.buffer),s instanceof ImageData&&r&&r.push(s.data.buffer),s;if(Array.isArray(s)){const b=[];for(const x of s)b.push(To(x,r));return b}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=qf(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!ea[o])throw new Error(`${o} is not registered.`);const{klass:f}=ea[o],m=f.serialize?f.serialize(s,r):{};if(f.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const b in s){if(!s.hasOwnProperty(b)||ea[o].omit.indexOf(b)>=0)continue;const x=s[b];m[b]=ea[o].shallow.indexOf(b)>=0?x:To(x,r)}s instanceof Error&&(m.message=s.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(m.$name=o),m}function fu(s){if(to(s))return s;if(Array.isArray(s))return s.map(fu);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const r=qf(s)||"Object";if(!ea[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:o}=ea[r];if(!o)throw new Error(`can't deserialize unregistered class ${r}`);if(o.deserialize)return o.deserialize(s);const f=Object.create(o.prototype);for(const m of Object.keys(s)){if(m==="$name")continue;const b=s[m];f[m]=ea[r].shallow.indexOf(m)>=0?b:fu(b)}return f}class $f{constructor(){this.first=!0}update(r,o){const f=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=f,!0))}}function as(s){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function cc(s){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function Th(s){return/\s/u.test(String.fromCodePoint(s))}function os(s){for(const r of s)if(cc(r.codePointAt(0)))return!0;return!1}function Zf(s){for(const r of s)if(!Xd(r.codePointAt(0)))return!1;return!0}function Eh(s){const r=s.map((o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}})).filter((o=>o));return new RegExp(r.join("|"),"u")}const ss=Eh(["Arab","Dupl","Mong","Ougr","Syrc"]);function Xd(s){return!ss.test(String.fromCodePoint(s))}function ls(s){return!(cc(s)||(r=s,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(r))));var r}const Hf=Eh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ah(s){return Hf.test(String.fromCodePoint(s))}function cs(s,r){return!(!r&&Ah(s)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(s)))}function zs(s){for(const r of s)if(Ah(r.codePointAt(0)))return!0;return!1}const ro=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(ro.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,r){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const o=s.pluginURL,f=new Promise((b=>{this.loadScriptResolve=b}));r(o);const m=new Promise((b=>setTimeout((()=>b()),this.TIMEOUT)));if(yield Promise.race([f,m]),this.isParsed()){const b={pluginStatus:"loaded",pluginURL:o};return this.setState(b),b}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)}))}};class Vr{constructor(r,o){this.isSupportedScript=Wd,this.zoom=r,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new $f,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $f,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,o=r-Math.floor(r),f=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*o}}}function Wd(s){return(function(r,o){for(const f of r)if(!cs(f.codePointAt(0),o))return!1;return!0})(s,ro.getRTLTextPluginStatus()==="loaded")}const ks="-transition";class xl{constructor(r,o,f){this.property=r,this.value=o,this.expression=(function(m,b,x){if(Rf(m))return new oc(m,b);if(gl(m)){const E=vl(m,b,x);if(E.result==="error")throw new Error(E.value.map((D=>`${D.key}: ${D.message}`)).join(", "));return E.value}{let E=m;return b.type==="color"&&typeof m=="string"?E=gr.parse(m):b.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?b.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?b.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?E=Dn.parse(m):b.type==="projectionDefinition"&&typeof m=="string"&&(E=ai.parse(m)):E=rr.parse(m):E=pn.parse(m):E=Gn.parse(m),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>E}}})(o===void 0?r.specification.default:o,r.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(r,o,f){return this.property.possiblyEvaluate(this,r,o,f)}}class Mh{constructor(r,o){this.property=r,this.value=new xl(r,void 0,o)}transitioned(r,o){return new uc(this.property,this.value,o,Tr({},r.transition,this.transition),r.now)}untransitioned(){return new uc(this.property,this.value,null,{},0)}}class Yf{constructor(r,o){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._globalState=o}getValue(r){return At(this._values[r].value.value)}setValue(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Mh(this._values[r].property,this._globalState)),this._values[r].value=new xl(this._values[r].property,o===null?void 0:At(o),this._globalState)}getTransition(r){return At(this._values[r].transition)}setTransition(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Mh(this._values[r].property,this._globalState)),this._values[r].transition=At(o)||void 0}serialize(){const r={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(r[o]=f);const m=this.getTransition(o);m!==void 0&&(r[`${o}${ks}`]=m)}return r}transitioned(r,o){const f=new Ph(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(r,o._values[m]);return f}untransitioned(){const r=new Ph(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].untransitioned();return r}}class uc{constructor(r,o,f,m,b){this.property=r,this.value=o,this.begin=b+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(r,o,f){const m=r.now||0,b=this.value.possiblyEvaluate(r,o,f),x=this.prior;if(x){if(m>this.end)return this.prior=null,b;if(this.value.isDataDriven())return this.prior=null,b;if(m<this.begin)return x.possiblyEvaluate(r,o,f);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(r,o,f),b,ct(E))}}return b}}class Ph{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,o,f){const m=new hc(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(r,o,f);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Kd{constructor(r,o){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._globalState=o}hasValue(r){return this._values[r].value!==void 0}getValue(r){return At(this._values[r].value)}setValue(r,o){this._values[r]=new xl(this._values[r].property,o===null?void 0:At(o),this._globalState)}serialize(){const r={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(r[o]=f)}return r}possiblyEvaluate(r,o,f){const m=new hc(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].possiblyEvaluate(r,o,f);return m}}class Da{constructor(r,o,f){this.property=r,this.value=o,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,o,f,m){return this.property.evaluate(this.value,this.parameters,r,o,f,m)}}class hc{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Bt{constructor(r){this.specification=r}possiblyEvaluate(r,o){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(o)}interpolate(r,o,f){const m=gn[this.specification.type];return m?m(r,o,f):r}}class Gt{constructor(r,o){this.specification=r,this.overrides=o}possiblyEvaluate(r,o,f,m){return new Da(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},f,m)}:r.expression,o)}interpolate(r,o,f){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new Da(this,{kind:"constant",value:void 0},r.parameters);const m=gn[this.specification.type];if(m){const b=m(r.value.value,o.value.value,f);return new Da(this,{kind:"constant",value:b},r.parameters)}return r}evaluate(r,o,f,m,b,x){return r.kind==="constant"?r.value:r.evaluate(o,f,m,b,x)}}class no extends Gt{possiblyEvaluate(r,o,f,m){if(r.value===void 0)return new Da(this,{kind:"constant",value:void 0},o);if(r.expression.kind==="constant"){const b=r.expression.evaluate(o,null,{},f,m),x=r.property.specification.type==="resolvedImage"&&typeof b!="string"?b.name:b,E=this._calculate(x,x,x,o);return new Da(this,{kind:"constant",value:E},o)}if(r.expression.kind==="camera"){const b=this._calculate(r.expression.evaluate({zoom:o.zoom-1}),r.expression.evaluate({zoom:o.zoom}),r.expression.evaluate({zoom:o.zoom+1}),o);return new Da(this,{kind:"constant",value:b},o)}return new Da(this,r.expression,o)}evaluate(r,o,f,m,b,x){if(r.kind==="source"){const E=r.evaluate(o,f,m,b,x);return this._calculate(E,E,E,o)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(o.zoom)-1},f,m),r.evaluate({zoom:Math.floor(o.zoom)},f,m),r.evaluate({zoom:Math.floor(o.zoom)+1},f,m),o):r.value}_calculate(r,o,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:f,to:o}}interpolate(r){return r}}class du{constructor(r){this.specification=r}possiblyEvaluate(r,o,f,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const b=r.expression.evaluate(o,null,{},f,m);return this._calculate(b,b,b,o)}return this._calculate(r.expression.evaluate(new Vr(Math.floor(o.zoom-1),o)),r.expression.evaluate(new Vr(Math.floor(o.zoom),o)),r.expression.evaluate(new Vr(Math.floor(o.zoom+1),o)),o)}}_calculate(r,o,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:f,to:o}}interpolate(r){return r}}class Ch{constructor(r){this.specification=r}possiblyEvaluate(r,o,f,m){return!!r.expression.evaluate(o,null,{},f,m)}interpolate(){return!1}}class Fn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in r){const f=r[o];f.specification.overridable&&this.overridableProperties.push(o);const m=this.defaultPropertyValues[o]=new xl(f,void 0,void 0),b=this.defaultTransitionablePropertyValues[o]=new Mh(f,void 0);this.defaultTransitioningPropertyValues[o]=b.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=m.possiblyEvaluate({})}}}Lt("DataDrivenProperty",Gt),Lt("DataConstantProperty",Bt),Lt("CrossFadedDataDrivenProperty",no),Lt("CrossFadedProperty",du),Lt("ColorRampProperty",Ch);class Sn extends ot{constructor(r,o,f){if(super(),this.id=r.id,this.type=r.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(m,b){return new hu(m,b)})(this.visibility,f),r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter,this._featureFilter=Ki(r.filter,f)),o.layout&&(this._unevaluatedLayout=new Kd(o.layout,f)),o.paint)){this._transitionablePaint=new Yf(o.paint,f);for(const m in r.paint)this.setPaintProperty(m,r.paint[m],{validate:!1});for(const m in r.layout)this.setLayoutProperty(m,r.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new hc(o.paint)}}setFilter(r){this.filter=r,this._featureFilter=Ki(r,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}getLayoutAffectingGlobalStateRefs(){const r=new Set;for(const o of this._visibilityExpression.getGlobalStateRefs())r.add(o);if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[o];for(const m of f.getGlobalStateRefs())r.add(m)}for(const o of this._featureFilter.getGlobalStateRefs())r.add(o);return r}getPaintAffectingGlobalStateRefs(){var r;const o=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const m=this._transitionablePaint._values[f].value;for(const b of m.getGlobalStateRefs()){const x=(r=o.get(b))!==null&&r!==void 0?r:[];x.push({name:f,value:m.value}),o.set(b,x)}}return o}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(r,o,f={}){if(o==null||!this._validate(Mm,`layers.${this.id}.layout.${r}`,r,o,f))return r==="visibility"?(this.visibility=o,this._visibilityExpression.setValue(o),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(r,o)}getPaintProperty(r){return r.endsWith(ks)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,o,f={}){if(o!=null&&this._validate(Gf,`layers.${this.id}.paint.${r}`,r,o,f))return!1;if(r.endsWith(ks))return this._transitionablePaint.setTransition(r.slice(0,-11),o||void 0),!1;{const m=this._transitionablePaint._values[r],b=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(r,o),this._handleSpecialPaintPropertyUpdate(r);const D=this._transitionablePaint._values[r].value;return D.isDataDriven()||x||b||this._handleOverridablePaintPropertyUpdate(r,E,D)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,o,f){return!1}isHidden(r=this.minzoom,o=!1){return!!(this.minzoom&&r<(o?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&r>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(r,o){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,o)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),mr(r,((o,f)=>!(o===void 0||f==="layout"&&!Object.keys(o).length||f==="paint"&&!Object.keys(o).length)))}_validate(r,o,f,m,b={}){return(!b||b.validate!==!1)&&So(this,r.call(si,{key:o,layerType:this.type,objectKey:f,value:m,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const o=this.paint.get(r);if(o instanceof Da&&Ja(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let On;var Dh={get paint(){return On=On||new Fn({"raster-opacity":new Bt(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bt(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bt(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bt(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new Bt(Ie.paint_raster["raster-saturation"]),"raster-contrast":new Bt(Ie.paint_raster["raster-contrast"]),"raster-resampling":new Bt(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new Bt(Ie.paint_raster["raster-fade-duration"])})}};class Rs extends Sn{constructor(r,o){super(r,Dh,o)}}const br={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Br{constructor(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function yn(s,r=1){let o=0,f=0;return{members:s.map((m=>{const b=br[m.type].BYTES_PER_ELEMENT,x=o=io(o,Math.max(r,b)),E=m.components||1;return f=Math.max(f,b),o+=b*E,{name:m.name,type:m.type,components:E,offset:x}})),size:io(o,Math.max(f,r)),alignment:r}}function io(s,r){return Math.ceil(s/r)*r}class Eo extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o){const f=this.length;return this.resize(f+1),this.emplace(f,r,o)}emplace(r,o,f){const m=2*r;return this.int16[m+0]=o,this.int16[m+1]=f,r}}Eo.prototype.bytesPerElement=4,Lt("StructArrayLayout2i4",Eo);class fc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const b=3*r;return this.int16[b+0]=o,this.int16[b+1]=f,this.int16[b+2]=m,r}}fc.prototype.bytesPerElement=6,Lt("StructArrayLayout3i6",fc);class dc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,f,m)}emplace(r,o,f,m,b){const x=4*r;return this.int16[x+0]=o,this.int16[x+1]=f,this.int16[x+2]=m,this.int16[x+3]=b,r}}dc.prototype.bytesPerElement=8,Lt("StructArrayLayout4i8",dc);class Ls extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,b,x)}emplace(r,o,f,m,b,x,E){const D=6*r;return this.int16[D+0]=o,this.int16[D+1]=f,this.int16[D+2]=m,this.int16[D+3]=b,this.int16[D+4]=x,this.int16[D+5]=E,r}}Ls.prototype.bytesPerElement=12,Lt("StructArrayLayout2i4i12",Ls);class Qd extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,b,x)}emplace(r,o,f,m,b,x,E){const D=4*r,k=8*r;return this.int16[D+0]=o,this.int16[D+1]=f,this.uint8[k+4]=m,this.uint8[k+5]=b,this.uint8[k+6]=x,this.uint8[k+7]=E,r}}Qd.prototype.bytesPerElement=8,Lt("StructArrayLayout2i4ub8",Qd);class cn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o){const f=this.length;return this.resize(f+1),this.emplace(f,r,o)}emplace(r,o,f){const m=2*r;return this.float32[m+0]=o,this.float32[m+1]=f,r}}cn.prototype.bytesPerElement=8,Lt("StructArrayLayout2f8",cn);class Ao extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x,E,D,k,N){const F=this.length;return this.resize(F+1),this.emplace(F,r,o,f,m,b,x,E,D,k,N)}emplace(r,o,f,m,b,x,E,D,k,N,F){const $=10*r;return this.uint16[$+0]=o,this.uint16[$+1]=f,this.uint16[$+2]=m,this.uint16[$+3]=b,this.uint16[$+4]=x,this.uint16[$+5]=E,this.uint16[$+6]=D,this.uint16[$+7]=k,this.uint16[$+8]=N,this.uint16[$+9]=F,r}}Ao.prototype.bytesPerElement=20,Lt("StructArrayLayout10ui20",Ao);class pu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x,E,D){const k=this.length;return this.resize(k+1),this.emplace(k,r,o,f,m,b,x,E,D)}emplace(r,o,f,m,b,x,E,D,k){const N=8*r;return this.uint16[N+0]=o,this.uint16[N+1]=f,this.uint16[N+2]=m,this.uint16[N+3]=b,this.uint16[N+4]=x,this.uint16[N+5]=E,this.uint16[N+6]=D,this.uint16[N+7]=k,r}}pu.prototype.bytesPerElement=16,Lt("StructArrayLayout8ui16",pu);class mu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x,E,D,k,N,F,$){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,o,f,m,b,x,E,D,k,N,F,$)}emplace(r,o,f,m,b,x,E,D,k,N,F,$,Y){const J=12*r;return this.int16[J+0]=o,this.int16[J+1]=f,this.int16[J+2]=m,this.int16[J+3]=b,this.uint16[J+4]=x,this.uint16[J+5]=E,this.uint16[J+6]=D,this.uint16[J+7]=k,this.int16[J+8]=N,this.int16[J+9]=F,this.int16[J+10]=$,this.int16[J+11]=Y,r}}mu.prototype.bytesPerElement=24,Lt("StructArrayLayout4i4ui4i24",mu);class Ih extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const b=3*r;return this.float32[b+0]=o,this.float32[b+1]=f,this.float32[b+2]=m,r}}Ih.prototype.bytesPerElement=12,Lt("StructArrayLayout3f12",Ih);class Oh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint32[1*r+0]=o,r}}Oh.prototype.bytesPerElement=4,Lt("StructArrayLayout1ul4",Oh);class zh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x,E,D,k){const N=this.length;return this.resize(N+1),this.emplace(N,r,o,f,m,b,x,E,D,k)}emplace(r,o,f,m,b,x,E,D,k,N){const F=10*r,$=5*r;return this.int16[F+0]=o,this.int16[F+1]=f,this.int16[F+2]=m,this.int16[F+3]=b,this.int16[F+4]=x,this.int16[F+5]=E,this.uint32[$+3]=D,this.uint16[F+8]=k,this.uint16[F+9]=N,r}}zh.prototype.bytesPerElement=20,Lt("StructArrayLayout6i1ul2ui20",zh);class wl extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,b,x)}emplace(r,o,f,m,b,x,E){const D=6*r;return this.int16[D+0]=o,this.int16[D+1]=f,this.int16[D+2]=m,this.int16[D+3]=b,this.int16[D+4]=x,this.int16[D+5]=E,r}}wl.prototype.bytesPerElement=12,Lt("StructArrayLayout2i2i2i12",wl);class Bs extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b){const x=this.length;return this.resize(x+1),this.emplace(x,r,o,f,m,b)}emplace(r,o,f,m,b,x){const E=4*r,D=8*r;return this.float32[E+0]=o,this.float32[E+1]=f,this.float32[E+2]=m,this.int16[D+6]=b,this.int16[D+7]=x,r}}Bs.prototype.bytesPerElement=16,Lt("StructArrayLayout2f1f2i16",Bs);class Ti extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,b,x)}emplace(r,o,f,m,b,x,E){const D=16*r,k=4*r,N=8*r;return this.uint8[D+0]=o,this.uint8[D+1]=f,this.float32[k+1]=m,this.float32[k+2]=b,this.int16[N+6]=x,this.int16[N+7]=E,r}}Ti.prototype.bytesPerElement=16,Lt("StructArrayLayout2ub2f2i16",Ti);class vn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const b=3*r;return this.uint16[b+0]=o,this.uint16[b+1]=f,this.uint16[b+2]=m,r}}vn.prototype.bytesPerElement=6,Lt("StructArrayLayout3ui6",vn);class us extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x,E,D,k,N,F,$,Y,J,te,ae,he){const _e=this.length;return this.resize(_e+1),this.emplace(_e,r,o,f,m,b,x,E,D,k,N,F,$,Y,J,te,ae,he)}emplace(r,o,f,m,b,x,E,D,k,N,F,$,Y,J,te,ae,he,_e){const ue=24*r,me=12*r,Pe=48*r;return this.int16[ue+0]=o,this.int16[ue+1]=f,this.uint16[ue+2]=m,this.uint16[ue+3]=b,this.uint32[me+2]=x,this.uint32[me+3]=E,this.uint32[me+4]=D,this.uint16[ue+10]=k,this.uint16[ue+11]=N,this.uint16[ue+12]=F,this.float32[me+7]=$,this.float32[me+8]=Y,this.uint8[Pe+36]=J,this.uint8[Pe+37]=te,this.uint8[Pe+38]=ae,this.uint32[me+10]=he,this.int16[ue+22]=_e,r}}us.prototype.bytesPerElement=48,Lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",us);class pc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f,m,b,x,E,D,k,N,F,$,Y,J,te,ae,he,_e,ue,me,Pe,Re,We,lt,ht,xt,Ot,Et){const ft=this.length;return this.resize(ft+1),this.emplace(ft,r,o,f,m,b,x,E,D,k,N,F,$,Y,J,te,ae,he,_e,ue,me,Pe,Re,We,lt,ht,xt,Ot,Et)}emplace(r,o,f,m,b,x,E,D,k,N,F,$,Y,J,te,ae,he,_e,ue,me,Pe,Re,We,lt,ht,xt,Ot,Et,ft){const at=32*r,Nt=16*r;return this.int16[at+0]=o,this.int16[at+1]=f,this.int16[at+2]=m,this.int16[at+3]=b,this.int16[at+4]=x,this.int16[at+5]=E,this.int16[at+6]=D,this.int16[at+7]=k,this.uint16[at+8]=N,this.uint16[at+9]=F,this.uint16[at+10]=$,this.uint16[at+11]=Y,this.uint16[at+12]=J,this.uint16[at+13]=te,this.uint16[at+14]=ae,this.uint16[at+15]=he,this.uint16[at+16]=_e,this.uint16[at+17]=ue,this.uint16[at+18]=me,this.uint16[at+19]=Pe,this.uint16[at+20]=Re,this.uint16[at+21]=We,this.uint16[at+22]=lt,this.uint32[Nt+12]=ht,this.float32[Nt+13]=xt,this.float32[Nt+14]=Ot,this.uint16[at+30]=Et,this.uint16[at+31]=ft,r}}pc.prototype.bytesPerElement=64,Lt("StructArrayLayout8i15ui1ul2f2ui64",pc);class mc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.float32[1*r+0]=o,r}}mc.prototype.bytesPerElement=4,Lt("StructArrayLayout1f4",mc);class gu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const b=3*r;return this.uint16[6*r+0]=o,this.float32[b+1]=f,this.float32[b+2]=m,r}}gu.prototype.bytesPerElement=12,Lt("StructArrayLayout1ui2f12",gu);class Mo extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const b=4*r;return this.uint32[2*r+0]=o,this.uint16[b+2]=f,this.uint16[b+3]=m,r}}Mo.prototype.bytesPerElement=8,Lt("StructArrayLayout1ul2ui8",Mo);class w extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o){const f=this.length;return this.resize(f+1),this.emplace(f,r,o)}emplace(r,o,f){const m=2*r;return this.uint16[m+0]=o,this.uint16[m+1]=f,r}}w.prototype.bytesPerElement=4,Lt("StructArrayLayout2ui4",w);class n extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint16[1*r+0]=o,r}}n.prototype.bytesPerElement=2,Lt("StructArrayLayout1ui2",n);class u extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f,m){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,f,m)}emplace(r,o,f,m,b){const x=4*r;return this.float32[x+0]=o,this.float32[x+1]=f,this.float32[x+2]=m,this.float32[x+3]=b,r}}u.prototype.bytesPerElement=16,Lt("StructArrayLayout4f16",u);class p extends Br{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}p.prototype.size=20;class _ extends zh{get(r){return new p(this,r)}}Lt("CollisionBoxArray",_);class T extends Br{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}T.prototype.size=48;class M extends us{get(r){return new T(this,r)}}Lt("PlacedSymbolArray",M);class O extends Br{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}O.prototype.size=64;class R extends pc{get(r){return new O(this,r)}}Lt("SymbolInstanceArray",R);class V extends mc{getoffsetX(r){return this.float32[1*r+0]}}Lt("GlyphOffsetArray",V);class q extends fc{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Lt("SymbolLineVertexArray",q);class K extends Br{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}K.prototype.size=12;class W extends gu{get(r){return new K(this,r)}}Lt("TextAnchorOffsetArray",W);class ne extends Br{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ne.prototype.size=8;class le extends Mo{get(r){return new ne(this,r)}}Lt("FeatureIndexArray",le);class pe extends Eo{}class ye extends Eo{}class ge extends Eo{}class xe extends Ls{}class De extends Qd{}class be extends cn{}class Ce extends Ao{}class ke extends pu{}class Se extends mu{}class je extends Ih{}class et extends Oh{}class Xe extends wl{}class Qe extends Ti{}class Je extends vn{}class Ct extends w{}const Dt=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:vt}=Dt;class kt{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,o,f,m){const b=this.segments[this.segments.length-1];return r>kt.MAX_VERTEX_ARRAY_LENGTH&&cr(`Max vertices per segment is ${kt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${kt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!b||b.vertexLength+r>kt.MAX_VERTEX_ARRAY_LENGTH||b.sortKey!==m?this.createNewSegment(o,f,m):b}createNewSegment(r,o,f){const m={vertexOffset:r.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(m.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(r,o,f){return this.prepareSegment(0,r,o,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const o in r.vaos)r.vaos[o].destroy()}static simpleSegment(r,o,f,m){return new kt([{vertexOffset:r,primitiveOffset:o,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function sr(s,r){return 256*(s=$t(Math.floor(s),0,255))+$t(Math.floor(r),0,255)}kt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lt("SegmentVector",kt);const jr=yn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),nn=yn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Qr,un,Zr,Tn={exports:{}},hn={exports:{}},fi={exports:{}},zn=(function(){if(Zr)return Tn.exports;Zr=1;var s=(Qr||(Qr=1,hn.exports=function(o,f){var m,b,x,E,D,k,N,F;for(b=o.length-(m=3&o.length),x=f,D=3432918353,k=461845907,F=0;F<b;)N=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,x=27492+(65535&(E=5*(65535&(x=(x^=N=(65535&(N=(N=(65535&N)*D+(((N>>>16)*D&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(N=0,m){case 3:N^=(255&o.charCodeAt(F+2))<<16;case 2:N^=(255&o.charCodeAt(F+1))<<8;case 1:x^=N=(65535&(N=(N=(65535&(N^=255&o.charCodeAt(F)))*D+(((N>>>16)*D&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295}return x^=o.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),hn.exports),r=(un||(un=1,fi.exports=function(o,f){for(var m,b=o.length,x=f^b,E=0;b>=4;)m=1540483477*(65535&(m=255&o.charCodeAt(E)|(255&o.charCodeAt(++E))<<8|(255&o.charCodeAt(++E))<<16|(255&o.charCodeAt(++E))<<24))+((1540483477*(m>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),b-=4,++E;switch(b){case 3:x^=(255&o.charCodeAt(E+2))<<16;case 2:x^=(255&o.charCodeAt(E+1))<<8;case 1:x=1540483477*(65535&(x^=255&o.charCodeAt(E)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),fi.exports);return Tn.exports=s,Tn.exports.murmur3=s,Tn.exports.murmur2=r,Tn.exports})(),kn=P(zn);class di{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,o,f,m){this.ids.push(hs(r)),this.positions.push(o,f,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=hs(r);let f=0,m=this.ids.length-1;for(;f<m;){const x=f+m>>1;this.ids[x]>=o?m=x:f=x+1}const b=[];for(;this.ids[f]===o;)b.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return b}static serialize(r,o){const f=new Float64Array(r.ids),m=new Uint32Array(r.positions);return fs(f,m,0,f.length-1),o&&o.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(r){const o=new di;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o}}function hs(s){const r=+s;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:kn(String(s))}function fs(s,r,o,f){for(;o<f;){const m=s[o+f>>1];let b=o-1,x=f+1;for(;;){do b++;while(s[b]<m);do x--;while(s[x]>m);if(b>=x)break;Po(s,b,x),Po(r,3*b,3*x),Po(r,3*b+1,3*x+1),Po(r,3*b+2,3*x+2)}x-o<f-x?(fs(s,r,o,x),o=x+1):(fs(s,r,x+1,f),f=x)}}function Po(s,r,o){const f=s[r];s[r]=s[o],s[o]=f}Lt("FeaturePositionMap",di);class ta{constructor(r,o){this.gl=r.gl,this.location=o}}class gc extends ta{constructor(r,o){super(r,o),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class yu extends ta{constructor(r,o){super(r,o),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Co extends ta{constructor(r,o){super(r,o),this.current=gr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const ra=new Float32Array(16);function Ia(s){return[sr(255*s.r,255*s.g),sr(255*s.b,255*s.a)]}class ao{constructor(r,o,f){this.value=r,this.uniformNames=o.map((m=>`u_${m}`)),this.type=f}setUniform(r,o,f){r.set(f.constantOr(this.value))}getBinding(r,o,f){return this.type==="color"?new Co(r,o):new gc(r,o)}}class oo{constructor(r,o){this.uniformNames=o.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr}setConstantDashPositions(r,o){this.dashTo=[0,r.y,r.height,r.width],this.dashFrom=[0,o.y,o.height,o.width]}setUniform(r,o,f,m){let b=null;m==="u_pattern_to"?b=this.patternTo:m==="u_pattern_from"?b=this.patternFrom:m==="u_dasharray_to"?b=this.dashTo:m==="u_dasharray_from"?b=this.dashFrom:m==="u_pixel_ratio_to"?b=this.pixelRatioTo:m==="u_pixel_ratio_from"&&(b=this.pixelRatioFrom),b!==null&&r.set(b)}getBinding(r,o,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new yu(r,o):new gc(r,o)}}class Gr{constructor(r,o,f,m){this.expression=r,this.type=f,this.maxValue=0,this.paintVertexAttributes=o.map((b=>({name:`a_${b}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new m}populatePaintArray(r,o,f){const m=this.paintVertexArray.length,b=this.expression.evaluate(new Vr(0,f),o,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(r),this._setPaintValue(m,r,b)}updatePaintArray(r,o,f,m,b){const x=this.expression.evaluate(new Vr(0,b),f,m);this._setPaintValue(r,o,x)}_setPaintValue(r,o,f){if(this.type==="color"){const m=Ia(f);for(let b=r;b<o;b++)this.paintVertexArray.emplace(b,m[0],m[1])}else{for(let m=r;m<o;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Jr{constructor(r,o,f,m,b,x){this.expression=r,this.uniformNames=o.map((E=>`u_${E}_t`)),this.type=f,this.useIntegerZoom=m,this.zoom=b,this.maxValue=0,this.paintVertexAttributes=o.map((E=>({name:`a_${E}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new x}populatePaintArray(r,o,f){const m=this.expression.evaluate(new Vr(this.zoom,f),o,{},f.canonical,[],f.formattedSection),b=this.expression.evaluate(new Vr(this.zoom+1,f),o,{},f.canonical,[],f.formattedSection),x=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(x,r,m,b)}updatePaintArray(r,o,f,m,b){const x=this.expression.evaluate(new Vr(this.zoom,b),f,m),E=this.expression.evaluate(new Vr(this.zoom+1,b),f,m);this._setPaintValue(r,o,x,E)}_setPaintValue(r,o,f,m){if(this.type==="color"){const b=Ia(f),x=Ia(m);for(let E=r;E<o;E++)this.paintVertexArray.emplace(E,b[0],b[1],x[0],x[1])}else{for(let b=r;b<o;b++)this.paintVertexArray.emplace(b,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,o){const f=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,m=$t(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,o,f){return new gc(r,o)}}class $n{constructor(r,o,f,m,b,x){this.expression=r,this.type=o,this.useIntegerZoom=f,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new b,this.zoomOutPaintVertexArray=new b}populatePaintArray(r,o,f){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,this.getPositionIds(o),f)}updatePaintArray(r,o,f,m,b){this._setPaintValues(r,o,this.getPositionIds(f),b)}_setPaintValues(r,o,f,m){const b=this.getPositions(m);if(!b||!f)return;const x=b[f.min],E=b[f.mid],D=b[f.max];if(x&&E&&D)for(let k=r;k<o;k++)this.emplace(this.zoomInPaintVertexArray,k,E,x),this.emplace(this.zoomOutPaintVertexArray,k,E,D)}upload(r){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const o=this.getVertexAttributes();this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,o,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,o,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Qn extends $n{getPositions(r){return r.imagePositions}getPositionIds(r){return r.patterns&&r.patterns[this.layerId]}getVertexAttributes(){return jr.members}emplace(r,o,f,m){r.emplace(o,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],f.pixelRatio,m.pixelRatio)}}class Xf extends $n{getPositions(r){return r.dashPositions}getPositionIds(r){return r.dashes&&r.dashes[this.layerId]}getVertexAttributes(){return nn.members}emplace(r,o,f,m){r.emplace(o,0,f.y,f.height,f.width,0,m.y,m.height,m.width)}}class Wf{constructor(r,o,f){this.binders={},this._buffers=[];const m=[];for(const b in r.paint._values){if(!f(b))continue;const x=r.paint.get(b);if(!(x instanceof Da&&Ja(x.property.specification)))continue;const E=Pm(b,r.type),D=x.value,k=x.property.specification.type,N=x.property.useIntegerZoom,F=x.property.specification["property-type"],$=F==="cross-faded"||F==="cross-faded-data-driven";if(D.kind==="constant")this.binders[b]=$?new oo(D.value,E):new ao(D.value,E,k),m.push(`/u_${b}`);else if(D.kind==="source"||$){const Y=Tl(b,k,"source");this.binders[b]=$?b==="line-dasharray"?new Xf(D,k,N,o,Y,r.id):new Qn(D,k,N,o,Y,r.id):new Gr(D,E,k,Y),m.push(`/a_${b}`)}else{const Y=Tl(b,k,"composite");this.binders[b]=new Jr(D,E,k,N,o,Y),m.push(`/z_${b}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const o=this.binders[r];return o instanceof Gr||o instanceof Jr?o.maxValue:0}populatePaintArrays(r,o,f){for(const m in this.binders){const b=this.binders[m];(b instanceof Gr||b instanceof Jr||b instanceof $n)&&b.populatePaintArray(r,o,f)}}setConstantPatternPositions(r,o){for(const f in this.binders){const m=this.binders[f];m instanceof oo&&m.setConstantPatternPositions(r,o)}}setConstantDashPositions(r,o){for(const f in this.binders){const m=this.binders[f];m instanceof oo&&m.setConstantDashPositions(r,o)}}updatePaintArrays(r,o,f,m,b){let x=!1;for(const E in r){const D=o.getPositions(E);for(const k of D){const N=f.feature(k.index);for(const F in this.binders){const $=this.binders[F];if(($ instanceof Gr||$ instanceof Jr||$ instanceof $n)&&$.expression.isStateDependent===!0){const Y=m.paint.get(F);$.expression=Y.value,$.updatePaintArray(k.start,k.end,N,r[E],b),x=!0}}}}return x}defines(){const r=[];for(const o in this.binders){const f=this.binders[o];(f instanceof ao||f instanceof oo)&&r.push(...f.uniformNames.map((m=>`#define HAS_UNIFORM_${m}`)))}return r}getBinderAttributes(){const r=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof Gr||f instanceof Jr)for(let m=0;m<f.paintVertexAttributes.length;m++)r.push(f.paintVertexAttributes[m].name);else if(f instanceof $n){const m=f.getVertexAttributes();for(const b of m)r.push(b.name)}}return r}getBinderUniforms(){const r=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof ao||f instanceof oo||f instanceof Jr)for(const m of f.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,o){const f=[];for(const m in this.binders){const b=this.binders[m];if(b instanceof ao||b instanceof oo||b instanceof Jr){for(const x of b.uniformNames)if(o[x]){const E=b.getBinding(r,o[x],x);f.push({name:x,property:m,binding:E})}}}return f}setUniforms(r,o,f,m){for(const{name:b,property:x,binding:E}of o)this.binders[x].setUniform(E,m,f.get(x),b)}updatePaintBuffers(r){this._buffers=[];for(const o in this.binders){const f=this.binders[o];if(r&&f instanceof $n){const m=r.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(f instanceof Gr||f instanceof Jr)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(r){for(const o in this.binders){const f=this.binders[o];(f instanceof Gr||f instanceof Jr||f instanceof $n)&&f.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const o=this.binders[r];(o instanceof Gr||o instanceof Jr||o instanceof $n)&&o.destroy()}}}class Sl{constructor(r,o,f=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new Wf(m,o,f);this.needsUpload=!1,this._featureMap=new di,this._bufferOffset=0}populatePaintArrays(r,o,f,m){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(r,o,m);o.id!==void 0&&this._featureMap.add(o.id,f,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,o,f,m){for(const b of f)this.needsUpload=this.programConfigurations[b.id].updatePaintArrays(r,this._featureMap,o,b,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Pm(s,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${r}-`,"").replace(/-/g,"_")]}function Tl(s,r,o){const f={color:{source:cn,composite:u},number:{source:mc,composite:cn}},m=(function(b){return{"line-pattern":{source:Ce,composite:Ce},"fill-pattern":{source:Ce,composite:Ce},"fill-extrusion-pattern":{source:Ce,composite:Ce},"line-dasharray":{source:ke,composite:ke}}[b]})(s);return m&&m[o]||f[r][o]}Lt("ConstantBinder",ao),Lt("CrossFadedConstantBinder",oo),Lt("SourceExpressionBinder",Gr),Lt("CrossFadedPatternBinder",Qn),Lt("CrossFadedDasharrayBinder",Xf),Lt("CompositeExpressionBinder",Jr),Lt("ProgramConfiguration",Wf,{omit:["_buffers"]}),Lt("ProgramConfigurationSet",Sl);const Kf=Math.pow(2,14)-1,js=-Kf-1;function Ns(s){const r=Be/s.extent,o=s.loadGeometry();for(let f=0;f<o.length;f++){const m=o[f];for(let b=0;b<m.length;b++){const x=m[b],E=Math.round(x.x*r),D=Math.round(x.y*r);x.x=$t(E,js,Kf),x.y=$t(D,js,Kf),(E<x.x||E>x.x+1||D<x.y||D>x.y+1)&&cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Do(s,r){return{type:s.type,id:s.id,properties:s.properties,geometry:r?Ns(s):[]}}const Qf=-32768;function kh(s,r,o,f,m){s.emplaceBack(Qf+8*r+f,Qf+8*o+m)}class Rh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new ye,this.indexArray=new Je,this.segments=new kt,this.programConfigurations=new Sl(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){const m=this.layers[0],b=[];let x=null,E=!1,D=m.type==="heatmap";if(m.type==="circle"){const N=m;x=N.layout.get("circle-sort-key"),E=!x.isConstant(),D=D||N.paint.get("circle-pitch-alignment")==="map"}const k=D?o.subdivisionGranularity.circle:1;for(const{feature:N,id:F,index:$,sourceLayerIndex:Y}of r){const J=this.layers[0]._featureFilter.needGeometry,te=Do(N,J);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),te,f))continue;const ae=E?x.evaluate(te,{},f):void 0,he={id:F,properties:N.properties,type:N.type,sourceLayerIndex:Y,index:$,geometry:J?te.geometry:Ns(N),patterns:{},sortKey:ae};b.push(he)}E&&b.sort(((N,F)=>N.sortKey-F.sortKey));for(const N of b){const{geometry:F,index:$,sourceLayerIndex:Y}=N,J=r[$].feature;this.addFeature(N,F,$,f,k),o.featureIndex.insert(J,F,$,Y,this.index)}}update(r,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,vt),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,o,f,m,b=1){let x;switch(b){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${b}; valid values are 1, 3, 5, 7.`)}const E=x.length;for(const D of o)for(const k of D){const N=k.x,F=k.y;if(N<0||N>=Be||F<0||F>=Be)continue;const $=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,r.sortKey),Y=$.vertexLength;for(let J=0;J<E;J++)for(let te=0;te<E;te++)kh(this.layoutVertexArray,N,F,x[te],x[J]);for(let J=0;J<E-1;J++)for(let te=0;te<E-1;te++){const ae=Y+J*E+te,he=Y+(J+1)*E+te;this.indexArray.emplaceBack(ae,he+1,ae+1),this.indexArray.emplaceBack(ae,he,he+1)}$.vertexLength+=E*E,$.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:{},canonical:m})}}function Lh(s,r){for(let o=0;o<s.length;o++)if(El(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(El(s,r[o]))return!0;return!!Ei(s,r)}function Cm(s,r,o){return!!El(s,r)||!!Im(r,s,o)}function Dm(s,r){if(s.length===1)return Ty(r,s[0]);for(let o=0;o<r.length;o++){const f=r[o];for(let m=0;m<f.length;m++)if(El(s,f[m]))return!0}for(let o=0;o<s.length;o++)if(Ty(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(Ei(s,r[o]))return!0;return!1}function pi(s,r,o){if(s.length>1){if(Ei(s,r))return!0;for(let f=0;f<r.length;f++)if(Im(r[f],s,o))return!0}for(let f=0;f<s.length;f++)if(Im(s[f],r,o))return!0;return!1}function Ei(s,r){if(s.length===0||r.length===0)return!1;for(let o=0;o<s.length-1;o++){const f=s[o],m=s[o+1];for(let b=0;b<r.length-1;b++)if(Sv(f,m,r[b],r[b+1]))return!0}return!1}function Sv(s,r,o,f){return Xr(s,o,f)!==Xr(r,o,f)&&Xr(s,r,o)!==Xr(s,r,f)}function Im(s,r,o){const f=o*o;if(r.length===1)return s.distSqr(r[0])<f;for(let m=1;m<r.length;m++)if(Sy(s,r[m-1],r[m])<f)return!0;return!1}function Sy(s,r,o){const f=r.distSqr(o);if(f===0)return s.distSqr(r);const m=((s.x-r.x)*(o.x-r.x)+(s.y-r.y)*(o.y-r.y))/f;return s.distSqr(m<0?r:m>1?o:o.sub(r)._mult(m)._add(r))}function Ty(s,r){let o,f,m,b=!1;for(let x=0;x<s.length;x++){o=s[x];for(let E=0,D=o.length-1;E<o.length;D=E++)f=o[E],m=o[D],f.y>r.y!=m.y>r.y&&r.x<(m.x-f.x)*(r.y-f.y)/(m.y-f.y)+f.x&&(b=!b)}return b}function El(s,r){let o=!1;for(let f=0,m=s.length-1;f<s.length;m=f++){const b=s[f],x=s[m];b.y>r.y!=x.y>r.y&&r.x<(x.x-b.x)*(r.y-b.y)/(x.y-b.y)+b.x&&(o=!o)}return o}function Tv(s,r,o){const f=o[0],m=o[2];if(s.x<f.x&&r.x<f.x||s.x>m.x&&r.x>m.x||s.y<f.y&&r.y<f.y||s.y>m.y&&r.y>m.y)return!1;const b=Xr(s,r,o[0]);return b!==Xr(s,r,o[1])||b!==Xr(s,r,o[2])||b!==Xr(s,r,o[3])}function yc(s,r,o){const f=r.paint.get(s).value;return f.kind==="constant"?f.value:o.programConfigurations.get(r.id).getMaxValue(s)}function Jd(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Om(s,r,o,f,m){if(!r[0]&&!r[1])return s;const b=A.convert(r)._mult(m);o==="viewport"&&b._rotate(-f);const x=[];for(let E=0;E<s.length;E++)x.push(s[E].sub(b));return x}function zm(s){const r=[];for(let o=0;o<s.length;o++){const f=s[o],m=r.at(-1);(o===0||m&&!f.equals(m))&&r.push(f)}return r}function Ey({queryGeometry:s,size:r},o){return Cm(s,o,r)}function Ev({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m},b){return Cm(s,b,r*(o.projectTileCoordinates(b.x,b.y,f,m).signedDistanceFromCamera/o.cameraToCenterDistance))}function Av({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m},b){const x=o.projectTileCoordinates(b.x,b.y,f,m).signedDistanceFromCamera,E=r*(o.cameraToCenterDistance/x);return Cm(s,ep(b,o,f,m),E)}function Mv({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m},b){return Cm(s,ep(b,o,f,m),r)}function km({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m,pitchAlignment:b="map",pitchScale:x="map"},E){const D=b==="map"?x==="map"?Ey:Ev:x==="map"?Av:Mv,k={queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m};for(const N of E)for(const F of N)if(D(k,F))return!0;return!1}function ep(s,r,o,f){const m=r.projectTileCoordinates(s.x,s.y,o,f).point;return new A((.5*m.x+.5)*r.width,(.5*-m.y+.5)*r.height)}let Rm,Ay;Lt("CircleBucket",Rh,{omit:["layers"]});var My={get paint(){return Ay=Ay||new Fn({"circle-radius":new Gt(Ie.paint_circle["circle-radius"]),"circle-color":new Gt(Ie.paint_circle["circle-color"]),"circle-blur":new Gt(Ie.paint_circle["circle-blur"]),"circle-opacity":new Gt(Ie.paint_circle["circle-opacity"]),"circle-translate":new Bt(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new Bt(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bt(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bt(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gt(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gt(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gt(Ie.paint_circle["circle-stroke-opacity"])})},get layout(){return Rm=Rm||new Fn({"circle-sort-key":new Gt(Ie.layout_circle["circle-sort-key"])})}};class Lm extends Sn{constructor(r,o){super(r,My,o)}createBucket(r){return new Rh(r)}queryRadius(r){const o=r;return yc("circle-radius",this,o)+yc("circle-stroke-width",this,o)+Jd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:b,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:D}){const k=Om(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-b.bearingInRadians,x),N=this.paint.get("circle-radius").evaluate(o,f)+this.paint.get("circle-stroke-width").evaluate(o,f),F=this.paint.get("circle-pitch-scale"),$=this.paint.get("circle-pitch-alignment");let Y,J;return $==="map"?(Y=k,J=N*x):(Y=(function(te,ae,he,_e){return te.map((ue=>ep(ue,ae,he,_e)))})(k,b,E,D),J=N),km({queryGeometry:Y,size:J,transform:b,unwrappedTileID:E,getElevation:D,pitchAlignment:$,pitchScale:F},m)}}class Bm extends Rh{}let Py;Lt("HeatmapBucket",Bm,{omit:["layers"]});var Cy={get paint(){return Py=Py||new Fn({"heatmap-radius":new Gt(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gt(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bt(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ch(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bt(Ie.paint_heatmap["heatmap-opacity"])})}};function jm(s,{width:r,height:o},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*o*f)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*o*f}`)}else m=new Uint8Array(r*o*f);return s.width=r,s.height=o,s.data=m,s}function Al(s,{width:r,height:o},f){if(r===s.width&&o===s.height)return;const m=jm({},{width:r,height:o},f);tp(s,m,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,r),height:Math.min(s.height,o)},f),s.width=r,s.height=o,s.data=m.data}function tp(s,r,o,f,m,b){if(m.width===0||m.height===0)return r;if(m.width>s.width||m.height>s.height||o.x>s.width-m.width||o.y>s.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||f.x>r.width-m.width||f.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,E=r.data;if(x===E)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<m.height;D++){const k=((o.y+D)*s.width+o.x)*b,N=((f.y+D)*r.width+f.x)*b;for(let F=0;F<m.width*b;F++)E[N+F]=x[k+F]}return r}class rp{constructor(r,o){jm(this,r,1,o)}resize(r){Al(this,r,1)}clone(){return new rp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,f,m,b){tp(r,o,f,m,b,1)}}class na{constructor(r,o){jm(this,r,4,o)}resize(r){Al(this,r,4)}replace(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new na({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,f,m,b){tp(r,o,f,m,b,4)}setPixel(r,o,f){const m=4*(r*this.width+o);this.data[m+0]=Math.round(255*f.r/f.a),this.data[m+1]=Math.round(255*f.g/f.a),this.data[m+2]=Math.round(255*f.b/f.a),this.data[m+3]=Math.round(255*f.a)}}function Ml(s){const r={},o=s.resolution||256,f=s.clips?s.clips.length:1,m=s.image||new na({width:o,height:f});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const b=(x,E,D)=>{r[s.evaluationKey]=D;const k=s.expression.evaluate(r);m.setPixel(x/4/o,E/4,k)};if(s.clips)for(let x=0,E=0;x<f;++x,E+=4*o)for(let D=0,k=0;D<o;D++,k+=4){const N=D/(o-1),{start:F,end:$}=s.clips[x];b(E,k,F*(1-N)+$*N)}else for(let x=0,E=0;x<o;x++,E+=4)b(0,E,x/(o-1));return m}Lt("AlphaImage",rp),Lt("RGBAImage",na);const np="big-fb";class Pv extends Sn{createBucket(r){return new Bm(r)}constructor(r,o){super(r,Cy,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Ml({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(np)&&this.heatmapFbos.delete(np)}queryRadius(r){return yc("heatmap-radius",this,r)}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:b,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:D}){return km({queryGeometry:r,size:this.paint.get("heatmap-radius").evaluate(o,f)*x,transform:b,unwrappedTileID:E,getElevation:D},m)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let ip;var ap={get paint(){return ip=ip||new Fn({"hillshade-illumination-direction":new Bt(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Bt(Ie.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Bt(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bt(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bt(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bt(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bt(Ie.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Bt(Ie.paint_hillshade["hillshade-method"])})}};class Rn extends Sn{constructor(r,o){super(r,ap,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const b=Math.max(r.length,o.length,f.length,m.length);r=r.concat(Array(b-r.length).fill(r.at(-1))),o=o.concat(Array(b-o.length).fill(o.at(-1))),f=f.concat(Array(b-f.length).fill(f.at(-1))),m=m.concat(Array(b-m.length).fill(m.at(-1)));const x=o.map(ni);return{directionRadians:r.map(ni),altitudeRadians:x,shadowColor:m,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let Cv;var Vx={get paint(){return Cv=Cv||new Fn({"color-relief-opacity":new Bt(Ie["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ch(Ie["paint_color-relief"]["color-relief-color"])})}};class Nm{constructor(r,o,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(o,m)}update(r,o,f){const{width:m,height:b}=r,x=!(this.size&&this.size[0]===m&&this.size[1]===b||f),{context:E}=this,{gl:D}=E;if(this.useMipmap=!!(o&&o.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!o||o.premultiply!==!1)),x)this.size=[m,b],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||va(r)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,r):D.texImage2D(D.TEXTURE_2D,0,this.format,m,b,0,this.format,D.UNSIGNED_BYTE,r.data);else{const{x:k,y:N}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||va(r)?D.texSubImage2D(D.TEXTURE_2D,0,k,N,D.RGBA,D.UNSIGNED_BYTE,r):D.texSubImage2D(D.TEXTURE_2D,0,k,N,m,b,D.RGBA,D.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,o,f){const{context:m}=this,{gl:b}=m;b.bindTexture(b.TEXTURE_2D,this.texture),f!==b.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=b.LINEAR),r!==this.filter&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,r),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,f||r),this.filter=r),o!==this.wrap&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,o),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class Jf{constructor(r,o,f,m=1,b=1,x=1,E=0){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void cr(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const D=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=b,this.blueFactor=x,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<D;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(D,k)]=this.data[this._idx(D-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,D)]=this.data[this._idx(k,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<D;k++)for(let N=0;N<D;N++){const F=this.get(k,N);F>this.max&&(this.max=F),F<this.min&&(this.min=F)}}get(r,o){const f=new Uint8Array(this.data.buffer),m=4*this._idx(r,o);return this.unpack(f[m],f[m+1],f[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${r}, y: ${o}, dim: ${this.dim}`);return(o+1)*this.stride+(r+1)}unpack(r,o,f){return r*this.redFactor+o*this.greenFactor+f*this.blueFactor-this.baseShift}pack(r){return vc(r,this.getUnpackVector())}getPixels(){return new na({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,o,f){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=o*this.dim,b=o*this.dim+this.dim,x=f*this.dim,E=f*this.dim+this.dim;switch(o){case-1:m=b-1;break;case 1:b=m+1}switch(f){case-1:x=E-1;break;case 1:E=x+1}const D=-o*this.dim,k=-f*this.dim;for(let N=x;N<E;N++)for(let F=m;F<b;F++)this.data[this._idx(F,N)]=r.data[this._idx(F+D,N+k)]}}function vc(s,r){const o=r[0],f=r[1],m=r[2],b=r[3],x=Math.min(o,f,m),E=Math.round((s+b)/x);return{r:Math.floor(E*x/o)%256,g:Math.floor(E*x/f)%256,b:Math.floor(E*x/m)%256}}Lt("DEMData",Jf);class Dv extends Sn{constructor(r,o){super(r,Vx,o)}_createColorRamp(r){const o={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Vi&&f._styleExpression.expression instanceof Fi){this.colorRampExpression=f;const x=f._styleExpression.expression;o.elevationStops=x.labels,o.colorStops=[];for(const E of o.elevationStops)o.colorStops.push(x.evaluate({globals:{elevation:E}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[gr.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=r)return o;const m={elevationStops:[],colorStops:[]},b=(o.elevationStops.length-1)/(r-1);for(let x=0;x<o.elevationStops.length-.5;x+=b)m.elevationStops.push(o.elevationStops[Math.round(x)]),m.colorStops.push(o.colorStops[Math.round(x)]);return cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${r}, provided: ${o.elevationStops.length}`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(r,o,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(o),b=new na({width:m.colorStops.length,height:1}),x=new na({width:m.colorStops.length,height:1});for(let E=0;E<m.elevationStops.length;E++){const D=vc(m.elevationStops[E],f);x.setPixel(0,E,new gr(D.r/255,D.g/255,D.b/255,1)),b.setPixel(0,E,m.colorStops[E])}return this.colorRampTextures={elevationTexture:new Nm(r,x,r.gl.RGBA),colorTexture:new Nm(r,b,r.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const Iv=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:op}=Iv;function Io(s,r,o){const f=o.patternDependencies;let m=!1;for(const b of r){const x=b.paint.get(`${s}-pattern`);x.isConstant()||(m=!0);const E=x.constantOr(null);E&&(m=!0,f[E.to]=!0,f[E.from]=!0)}return m}function Fm(s,r,o,f,m){const{zoom:b}=f,x=m.patternDependencies;for(const E of r){const D=E.paint.get(`${s}-pattern`).value;if(D.kind!=="constant"){let k=D.evaluate({zoom:b-1},o,{},m.availableImages),N=D.evaluate({zoom:b},o,{},m.availableImages),F=D.evaluate({zoom:b+1},o,{},m.availableImages);k=k&&k.name?k.name:k,N=N&&N.name?N.name:N,F=F&&F.name?F.name:F,x[k]=!0,x[N]=!0,x[F]=!0,o.patterns[E.id]={min:k,mid:N,max:F}}}return o}function Um(s,r,o,f,m){let b;if(m===(function(x,E,D,k){let N=0;for(let F=E,$=D-k;F<D;F+=k)N+=(x[$]-x[F])*(x[F+1]+x[$+1]),$=F;return N})(s,r,o,f)>0)for(let x=r;x<o;x+=f)b=Oa(x/f|0,s[x],s[x+1],b);else for(let x=o-f;x>=r;x-=f)b=Oa(x/f|0,s[x],s[x+1],b);return b&&so(b,b.next)&&(za(b),b=b.next),b}function vu(s,r){if(!s)return s;r||(r=s);let o,f=s;do if(o=!1,f.steiner||!so(f,f.next)&&kr(f.prev,f,f.next)!==0)f=f.next;else{if(za(f),f=r=f.prev,f===f.next)break;o=!0}while(o||f!==r);return r}function Bh(s,r,o,f,m,b,x){if(!s)return;!x&&b&&(function(D,k,N,F){let $=D;do $.z===0&&($.z=gi($.x,$.y,k,N,F)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==D);$.prevZ.nextZ=null,$.prevZ=null,(function(Y){let J,te=1;do{let ae,he=Y;Y=null;let _e=null;for(J=0;he;){J++;let ue=he,me=0;for(let Re=0;Re<te&&(me++,ue=ue.nextZ,ue);Re++);let Pe=te;for(;me>0||Pe>0&&ue;)me!==0&&(Pe===0||!ue||he.z<=ue.z)?(ae=he,he=he.nextZ,me--):(ae=ue,ue=ue.nextZ,Pe--),_e?_e.nextZ=ae:Y=ae,ae.prevZ=_e,_e=ae;he=ue}_e.nextZ=null,te*=2}while(J>1)})($)})(s,f,m,b);let E=s;for(;s.prev!==s.next;){const D=s.prev,k=s.next;if(b?Vm(s,f,m,b):Dy(s))r.push(D.i,s.i,k.i),za(s),s=k.next,E=k.next;else if((s=k)===E){x?x===1?Bh(s=Ov(vu(s),r),r,o,f,m,b,2):x===2&&_c(s,r,o,f,m,b):Bh(vu(s),r,o,f,m,b,1);break}}}function Dy(s){const r=s.prev,o=s,f=s.next;if(kr(r,o,f)>=0)return!1;const m=r.x,b=o.x,x=f.x,E=r.y,D=o.y,k=f.y,N=Math.min(m,b,x),F=Math.min(E,D,k),$=Math.max(m,b,x),Y=Math.max(E,D,k);let J=f.next;for(;J!==r;){if(J.x>=N&&J.x<=$&&J.y>=F&&J.y<=Y&&ed(m,E,b,D,x,k,J.x,J.y)&&kr(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function Vm(s,r,o,f){const m=s.prev,b=s,x=s.next;if(kr(m,b,x)>=0)return!1;const E=m.x,D=b.x,k=x.x,N=m.y,F=b.y,$=x.y,Y=Math.min(E,D,k),J=Math.min(N,F,$),te=Math.max(E,D,k),ae=Math.max(N,F,$),he=gi(Y,J,r,o,f),_e=gi(te,ae,r,o,f);let ue=s.prevZ,me=s.nextZ;for(;ue&&ue.z>=he&&me&&me.z<=_e;){if(ue.x>=Y&&ue.x<=te&&ue.y>=J&&ue.y<=ae&&ue!==m&&ue!==x&&ed(E,N,D,F,k,$,ue.x,ue.y)&&kr(ue.prev,ue,ue.next)>=0||(ue=ue.prevZ,me.x>=Y&&me.x<=te&&me.y>=J&&me.y<=ae&&me!==m&&me!==x&&ed(E,N,D,F,k,$,me.x,me.y)&&kr(me.prev,me,me.next)>=0))return!1;me=me.nextZ}for(;ue&&ue.z>=he;){if(ue.x>=Y&&ue.x<=te&&ue.y>=J&&ue.y<=ae&&ue!==m&&ue!==x&&ed(E,N,D,F,k,$,ue.x,ue.y)&&kr(ue.prev,ue,ue.next)>=0)return!1;ue=ue.prevZ}for(;me&&me.z<=_e;){if(me.x>=Y&&me.x<=te&&me.y>=J&&me.y<=ae&&me!==m&&me!==x&&ed(E,N,D,F,k,$,me.x,me.y)&&kr(me.prev,me,me.next)>=0)return!1;me=me.nextZ}return!0}function Ov(s,r){let o=s;do{const f=o.prev,m=o.next.next;!so(f,m)&&zy(f,o,o.next,m)&&cp(f,m)&&cp(m,f)&&(r.push(f.i,o.i,m.i),za(o),za(o.next),o=s=m),o=o.next}while(o!==s);return vu(o)}function _c(s,r,o,f,m,b){let x=s;do{let E=x.next.next;for(;E!==x.prev;){if(x.i!==E.i&&Un(x,E)){let D=up(x,E);return x=vu(x,x.next),D=vu(D,D.next),Bh(x,r,o,f,m,b,0),void Bh(D,r,o,f,m,b,0)}E=E.next}x=x.next}while(x!==s)}function mi(s,r){let o=s.x-r.x;return o===0&&(o=s.y-r.y,o===0)&&(o=(s.next.y-s.y)/(s.next.x-s.x)-(r.next.y-r.y)/(r.next.x-r.x)),o}function Iy(s,r){const o=(function(m,b){let x=b;const E=m.x,D=m.y;let k,N=-1/0;if(so(m,x))return x;do{if(so(m,x.next))return x.next;if(D<=x.y&&D>=x.next.y&&x.next.y!==x.y){const te=x.x+(D-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(te<=E&&te>N&&(N=te,k=x.x<x.next.x?x:x.next,te===E))return k}x=x.next}while(x!==b);if(!k)return null;const F=k,$=k.x,Y=k.y;let J=1/0;x=k;do{if(E>=x.x&&x.x>=$&&E!==x.x&&Oy(D<Y?E:N,D,$,Y,D<Y?N:E,D,x.x,x.y)){const te=Math.abs(D-x.y)/(E-x.x);cp(x,m)&&(te<J||te===J&&(x.x>k.x||x.x===k.x&&zv(k,x)))&&(k=x,J=te)}x=x.next}while(x!==F);return k})(s,r);if(!o)return r;const f=up(o,s);return vu(f,f.next),vu(o,o.next)}function zv(s,r){return kr(s.prev,s,r.prev)<0&&kr(r.next,s,s.next)<0}function gi(s,r,o,f,m){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-f)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Gx(s){let r=s,o=s;do(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next;while(r!==s);return o}function Oy(s,r,o,f,m,b,x,E){return(m-x)*(r-E)>=(s-x)*(b-E)&&(s-x)*(f-E)>=(o-x)*(r-E)&&(o-x)*(b-E)>=(m-x)*(f-E)}function ed(s,r,o,f,m,b,x,E){return!(s===x&&r===E)&&Oy(s,r,o,f,m,b,x,E)}function Un(s,r){return s.next.i!==r.i&&s.prev.i!==r.i&&!(function(o,f){let m=o;do{if(m.i!==o.i&&m.next.i!==o.i&&m.i!==f.i&&m.next.i!==f.i&&zy(m,m.next,o,f))return!0;m=m.next}while(m!==o);return!1})(s,r)&&(cp(s,r)&&cp(r,s)&&(function(o,f){let m=o,b=!1;const x=(o.x+f.x)/2,E=(o.y+f.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&x<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(b=!b),m=m.next;while(m!==o);return b})(s,r)&&(kr(s.prev,s,r.prev)||kr(s,r.prev,r))||so(s,r)&&kr(s.prev,s,s.next)>0&&kr(r.prev,r,r.next)>0)}function kr(s,r,o){return(r.y-s.y)*(o.x-r.x)-(r.x-s.x)*(o.y-r.y)}function so(s,r){return s.x===r.x&&s.y===r.y}function zy(s,r,o,f){const m=lp(kr(s,r,o)),b=lp(kr(s,r,f)),x=lp(kr(o,f,s)),E=lp(kr(o,f,r));return m!==b&&x!==E||!(m!==0||!sp(s,o,r))||!(b!==0||!sp(s,f,r))||!(x!==0||!sp(o,s,f))||!(E!==0||!sp(o,r,f))}function sp(s,r,o){return r.x<=Math.max(s.x,o.x)&&r.x>=Math.min(s.x,o.x)&&r.y<=Math.max(s.y,o.y)&&r.y>=Math.min(s.y,o.y)}function lp(s){return s>0?1:s<0?-1:0}function cp(s,r){return kr(s.prev,s,s.next)<0?kr(s,r,s.next)>=0&&kr(s,s.prev,r)>=0:kr(s,r,s.prev)<0||kr(s,s.next,r)<0}function up(s,r){const o=Gm(s.i,s.x,s.y),f=Gm(r.i,r.x,r.y),m=s.next,b=r.prev;return s.next=r,r.prev=s,o.next=m,m.prev=o,f.next=o,o.prev=f,b.next=f,f.prev=b,f}function Oa(s,r,o,f){const m=Gm(s,r,o);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function za(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Gm(s,r,o){return{i:s,x:r,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ai{constructor(r,o){if(o>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=o}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class hp{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}hp.noSubdivision=new hp({fill:new Ai(0,0),line:new Ai(0,0),tile:new Ai(0,0),stencil:new Ai(0,0),circle:1}),Lt("SubdivisionGranularityExpression",Ai),Lt("SubdivisionGranularitySetting",hp);const lo=-32768,Fs=32767;class bc{constructor(r,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=Be/r,this._canonical=o}_getKey(r,o){return(r+=32768)<<16|o+32768}_vertexToIndex(r,o){if(r<-32768||o<-32768||r>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(r),m=0|Math.round(o),b=this._getKey(f,m);if(this._vertexDictionary.has(b))return this._vertexDictionary.get(b);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(b,x),this._vertexBuffer.push(f,m),x}_subdivideTrianglesScanline(r){if(this._granularity<2)return(function(m,b){const x=[];for(let E=0;E<b.length;E+=3){const D=b[E],k=b[E+1],N=b[E+2],F=m[2*D],$=m[2*D+1];(m[2*k]-F)*(m[2*N+1]-$)-(m[2*k+1]-$)*(m[2*N]-F)>0?(x.push(D),x.push(N),x.push(k)):(x.push(D),x.push(k),x.push(N))}return x})(this._vertexBuffer,r);const o=[],f=r.length;for(let m=0;m<f;m+=3){const b=[r[m+0],r[m+1],r[m+2]],x=[this._vertexBuffer[2*r[m+0]+0],this._vertexBuffer[2*r[m+0]+1],this._vertexBuffer[2*r[m+1]+0],this._vertexBuffer[2*r[m+1]+1],this._vertexBuffer[2*r[m+2]+0],this._vertexBuffer[2*r[m+2]+1]];let E=1/0,D=1/0,k=-1/0,N=-1/0;for(let te=0;te<3;te++){const ae=x[2*te],he=x[2*te+1];E=Math.min(E,ae),k=Math.max(k,ae),D=Math.min(D,he),N=Math.max(N,he)}if(E===k||D===N)continue;const F=Math.floor(E/this._granularityCellSize),$=Math.ceil(k/this._granularityCellSize),Y=Math.floor(D/this._granularityCellSize),J=Math.ceil(N/this._granularityCellSize);if(F!==$||Y!==J)for(let te=Y;te<J;te++){const ae=this._scanlineGenerateVertexRingForCellRow(te,x,b);Us(this._vertexBuffer,ae,o)}else o.push(...b)}return o}_scanlineGenerateVertexRingForCellRow(r,o,f){const m=r*this._granularityCellSize,b=m+this._granularityCellSize,x=[];for(let E=0;E<3;E++){const D=o[2*E],k=o[2*E+1],N=o[2*(E+1)%6],F=o[(2*(E+1)+1)%6],$=o[2*(E+2)%6],Y=o[(2*(E+2)+1)%6],J=N-D,te=F-k,ae=J===0,he=te===0,_e=(m-k)/te,ue=(b-k)/te,me=Math.min(_e,ue),Pe=Math.max(_e,ue);if(!he&&(me>=1||Pe<=0)||he&&(k<m||k>b)){F>=m&&F<=b&&x.push(f[(E+1)%3]);continue}!he&&me>0&&x.push(this._vertexToIndex(D+J*me,k+te*me));const Re=D+J*Math.max(me,0),We=D+J*Math.min(Pe,1);ae||this._generateIntraEdgeVertices(x,D,k,N,F,Re,We),!he&&Pe<1&&x.push(this._vertexToIndex(D+J*Pe,k+te*Pe)),(he||F>=m&&F<=b)&&x.push(f[(E+1)%3]),!he&&(F<=m||F>=b)&&this._generateInterEdgeVertices(x,D,k,N,F,$,Y,We,m,b)}return x}_generateIntraEdgeVertices(r,o,f,m,b,x,E){const D=m-o,k=b-f,N=k===0,F=N?Math.min(o,m):Math.min(x,E),$=N?Math.max(o,m):Math.max(x,E),Y=Math.floor(F/this._granularityCellSize)+1,J=Math.ceil($/this._granularityCellSize)-1;if(N?o<m:x<E)for(let te=Y;te<=J;te++){const ae=te*this._granularityCellSize;r.push(this._vertexToIndex(ae,f+k*(ae-o)/D))}else for(let te=J;te>=Y;te--){const ae=te*this._granularityCellSize;r.push(this._vertexToIndex(ae,f+k*(ae-o)/D))}}_generateInterEdgeVertices(r,o,f,m,b,x,E,D,k,N){const F=b-f,$=x-m,Y=E-b,J=(k-b)/Y,te=(N-b)/Y,ae=Math.min(J,te),he=Math.max(J,te),_e=m+$*ae;let ue=Math.floor(Math.min(_e,D)/this._granularityCellSize)+1,me=Math.ceil(Math.max(_e,D)/this._granularityCellSize)-1,Pe=D<_e;const Re=Y===0;if(Re&&(E===k||E===N))return;if(Re||ae>=1||he<=0){const lt=f-E,ht=x+(o-x)*Math.min((k-E)/lt,(N-E)/lt);ue=Math.floor(Math.min(ht,D)/this._granularityCellSize)+1,me=Math.ceil(Math.max(ht,D)/this._granularityCellSize)-1,Pe=D<ht}const We=F>0?N:k;if(Pe)for(let lt=ue;lt<=me;lt++)r.push(this._vertexToIndex(lt*this._granularityCellSize,We));else for(let lt=me;lt>=ue;lt--)r.push(this._vertexToIndex(lt*this._granularityCellSize,We))}_generateOutline(r){const o=[];for(const f of r){const m=xc(f,this._granularity,!0),b=this._pointArrayToIndices(m),x=[];for(let E=1;E<b.length;E++)x.push(b[E-1]),x.push(b[E]);o.push(x)}return o}_handlePoles(r){let o=!1,f=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(o||f)&&this._fillPoles(r,o,f)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let o=0;o<r.length;o+=2){const f=r[o+1];f===lo&&(r[o+1]=-32767),f===Fs&&(r[o+1]=32766)}}_generatePoleQuad(r,o,f,m,b,x){m>b!=(x===lo)?(r.push(o),r.push(f),r.push(this._vertexToIndex(m,x)),r.push(f),r.push(this._vertexToIndex(b,x)),r.push(this._vertexToIndex(m,x))):(r.push(f),r.push(o),r.push(this._vertexToIndex(m,x)),r.push(this._vertexToIndex(b,x)),r.push(f),r.push(this._vertexToIndex(m,x)))}_fillPoles(r,o,f){const m=this._vertexBuffer,b=Be,x=r.length;for(let E=2;E<x;E+=3){const D=r[E-2],k=r[E-1],N=r[E],F=m[2*D],$=m[2*D+1],Y=m[2*k],J=m[2*k+1],te=m[2*N],ae=m[2*N+1];o&&($===0&&J===0&&this._generatePoleQuad(r,D,k,F,Y,lo),J===0&&ae===0&&this._generatePoleQuad(r,k,N,Y,te,lo),ae===0&&$===0&&this._generatePoleQuad(r,N,D,te,F,lo)),f&&($===b&&J===b&&this._generatePoleQuad(r,D,k,F,Y,Fs),J===b&&ae===b&&this._generatePoleQuad(r,k,N,Y,te,Fs),ae===b&&$===b&&this._generatePoleQuad(r,N,D,te,F,Fs))}}_initializeVertices(r){for(let o=0;o<r.length;o+=2)this._vertexToIndex(r[o],r[o+1])}subdividePolygonInternal(r,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:m}=(function(E){const D=[],k=[];for(const N of E)if(N.length!==0){N!==E[0]&&D.push(k.length/2);for(let F=0;F<N.length;F++)k.push(N[F].x),k.push(N[F].y)}return{flattened:k,holeIndices:D}})(r);let b;this._initializeVertices(f);try{const E=(function(k,N,F=2){const $=N&&N.length,Y=$?N[0]*F:k.length;let J=Um(k,0,Y,F,!0);const te=[];if(!J||J.next===J.prev)return te;let ae,he,_e;if($&&(J=(function(ue,me,Pe,Re){const We=[];for(let lt=0,ht=me.length;lt<ht;lt++){const xt=Um(ue,me[lt]*Re,lt<ht-1?me[lt+1]*Re:ue.length,Re,!1);xt===xt.next&&(xt.steiner=!0),We.push(Gx(xt))}We.sort(mi);for(let lt=0;lt<We.length;lt++)Pe=Iy(We[lt],Pe);return Pe})(k,N,J,F)),k.length>80*F){ae=k[0],he=k[1];let ue=ae,me=he;for(let Pe=F;Pe<Y;Pe+=F){const Re=k[Pe],We=k[Pe+1];Re<ae&&(ae=Re),We<he&&(he=We),Re>ue&&(ue=Re),We>me&&(me=We)}_e=Math.max(ue-ae,me-he),_e=_e!==0?32767/_e:0}return Bh(J,te,F,ae,he,_e,0),te})(f,m),D=this._convertIndices(f,E);b=this._subdivideTrianglesScanline(D)}catch(E){console.error(E)}let x=[];return o&&(x=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(b),{verticesFlattened:this._vertexBuffer,indicesTriangles:b,indicesLineList:x}}_convertIndices(r,o){const f=[];for(let m=0;m<o.length;m++)f.push(this._vertexToIndex(r[2*o[m]],r[2*o[m]+1]));return f}_pointArrayToIndices(r){const o=[];for(let f=0;f<r.length;f++){const m=r[f];o.push(this._vertexToIndex(m.x,m.y))}return o}}function qm(s,r,o,f=!0){return new bc(o,r).subdividePolygonInternal(s,f)}function xc(s,r,o=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const f=s[0],m=s[s.length-1],b=o&&(f.x!==m.x||f.y!==m.y);if(r<2)return b?[...s,s[0]]:[...s];const x=Math.floor(Be/r),E=[];E.push(new A(s[0].x,s[0].y));const D=s.length,k=b?D:D-1;for(let N=0;N<k;N++){const F=s[N],$=N<D-1?s[N+1]:s[0],Y=F.x,J=F.y,te=$.x,ae=$.y,he=Y!==te,_e=J!==ae;if(!he&&!_e)continue;const ue=te-Y,me=ae-J,Pe=Math.abs(ue),Re=Math.abs(me);let We=Y,lt=J;for(;;){const xt=ue>0?(Math.floor(We/x)+1)*x:(Math.ceil(We/x)-1)*x,Ot=me>0?(Math.floor(lt/x)+1)*x:(Math.ceil(lt/x)-1)*x,Et=Math.abs(We-xt),ft=Math.abs(lt-Ot),at=Math.abs(We-te),Nt=Math.abs(lt-ae),Vt=he?Et/Pe:Number.POSITIVE_INFINITY,Yt=_e?ft/Re:Number.POSITIVE_INFINITY;if((at<=Et||!he)&&(Nt<=ft||!_e))break;if(Vt<Yt&&he||!_e){We=xt,lt+=me*Vt;const qt=new A(We,Math.round(lt));E[E.length-1].x===qt.x&&E[E.length-1].y===qt.y||E.push(qt)}else{We+=ue*Yt,lt=Ot;const qt=new A(Math.round(We),lt);E[E.length-1].x===qt.x&&E[E.length-1].y===qt.y||E.push(qt)}}const ht=new A(te,ae);E[E.length-1].x===ht.x&&E[E.length-1].y===ht.y||E.push(ht)}return E}function Us(s,r,o){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,m=s[2*r[0]];for(let D=1;D<r.length;D++){const k=s[2*r[D]];k<m&&(m=k,f=D)}const b=r.length;let x=f,E=(x+1)%b;for(;;){const D=x-1>=0?x-1:b-1,k=(E+1)%b,N=s[2*r[D]],F=s[2*r[k]],$=s[2*r[x]],Y=s[2*r[x]+1],J=s[2*r[E]+1];let te=!1;if(N<F)te=!0;else if(N>F)te=!1;else{const ae=J-Y,he=-(s[2*r[E]]-$),_e=Y<J?1:-1;((N-$)*ae+(s[2*r[D]+1]-Y)*he)*_e>((F-$)*ae+(s[2*r[k]+1]-Y)*he)*_e&&(te=!0)}if(te){const ae=r[D],he=r[x],_e=r[E];ae!==he&&ae!==_e&&he!==_e&&o.push(_e,he,ae),x--,x<0&&(x=b-1)}else{const ae=r[k],he=r[x],_e=r[E];ae!==he&&ae!==_e&&he!==_e&&o.push(_e,he,ae),E++,E>=b&&(E=0)}if(D===k)break}}function ky(s,r,o,f,m,b,x,E,D){const k=m.length/2,N=x&&E&&D;if(k<kt.MAX_VERTEX_ARRAY_LENGTH){const F=r.prepareSegment(k,o,f),$=F.vertexLength;for(let te=0;te<b.length;te+=3)f.emplaceBack($+b[te],$+b[te+1],$+b[te+2]);let Y,J;F.vertexLength+=k,F.primitiveLength+=b.length/3,N&&(J=x.prepareSegment(k,o,E),Y=J.vertexLength,J.vertexLength+=k);for(let te=0;te<m.length;te+=2)s(m[te],m[te+1]);if(N)for(let te=0;te<D.length;te++){const ae=D[te];for(let he=1;he<ae.length;he+=2)E.emplaceBack(Y+ae[he-1],Y+ae[he]);J.primitiveLength+=ae.length/2}}else(function(F,$,Y,J,te,ae){const he=[];for(let Re=0;Re<J.length/2;Re++)he.push(-1);const _e={count:0};let ue=0,me=F.getOrCreateLatestSegment($,Y),Pe=me.vertexLength;for(let Re=2;Re<te.length;Re+=3){const We=te[Re-2],lt=te[Re-1],ht=te[Re];let xt=he[We]<ue,Ot=he[lt]<ue,Et=he[ht]<ue;me.vertexLength+((xt?1:0)+(Ot?1:0)+(Et?1:0))>kt.MAX_VERTEX_ARRAY_LENGTH&&(me=F.createNewSegment($,Y),ue=_e.count,xt=!0,Ot=!0,Et=!0,Pe=0);const ft=Pl(he,J,ae,_e,We,xt,me),at=Pl(he,J,ae,_e,lt,Ot,me),Nt=Pl(he,J,ae,_e,ht,Et,me);Y.emplaceBack(Pe+ft-ue,Pe+at-ue,Pe+Nt-ue),me.primitiveLength++}})(r,o,f,m,b,s),N&&(function(F,$,Y,J,te,ae){const he=[];for(let Re=0;Re<J.length/2;Re++)he.push(-1);const _e={count:0};let ue=0,me=F.getOrCreateLatestSegment($,Y),Pe=me.vertexLength;for(let Re=0;Re<te.length;Re++){const We=te[Re];for(let lt=1;lt<te[Re].length;lt+=2){const ht=We[lt-1],xt=We[lt];let Ot=he[ht]<ue,Et=he[xt]<ue;me.vertexLength+((Ot?1:0)+(Et?1:0))>kt.MAX_VERTEX_ARRAY_LENGTH&&(me=F.createNewSegment($,Y),ue=_e.count,Ot=!0,Et=!0,Pe=0);const ft=Pl(he,J,ae,_e,ht,Ot,me),at=Pl(he,J,ae,_e,xt,Et,me);Y.emplaceBack(Pe+ft-ue,Pe+at-ue),me.primitiveLength++}}})(x,o,E,m,D,s),r.forceNewSegmentOnNextPrepare(),x?.forceNewSegmentOnNextPrepare()}function Pl(s,r,o,f,m,b,x){if(b){const E=f.count;return o(r[2*m],r[2*m+1]),s[m]=f.count,f.count++,x.vertexLength++,E}return s[m]}class jh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ge,this.indexArray=new Je,this.indexArray2=new Ct,this.programConfigurations=new Sl(r.layers,r.zoom),this.segments=new kt,this.segments2=new kt,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){this.hasDependencies=Io("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),b=!m.isConstant(),x=[];for(const{feature:E,id:D,index:k,sourceLayerIndex:N}of r){const F=this.layers[0]._featureFilter.needGeometry,$=Do(E,F);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),$,f))continue;const Y=b?m.evaluate($,{},f,o.availableImages):void 0,J={id:D,properties:E.properties,type:E.type,sourceLayerIndex:N,index:k,geometry:F?$.geometry:Ns(E),patterns:{},sortKey:Y};x.push(J)}b&&x.sort(((E,D)=>E.sortKey-D.sortKey));for(const E of x){const{geometry:D,index:k,sourceLayerIndex:N}=E;if(this.hasDependencies){const F=Fm("fill",this.layers,E,{zoom:this.zoom},o);this.patternFeatures.push(F)}else this.addFeature(E,D,k,f,{},o.subdivisionGranularity);o.featureIndex.insert(r[k].feature,D,k,N,this.index)}}update(r,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f})}addFeatures(r,o,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,f,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,op),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,o,f,m,b,x){for(const E of uh(o,500)){const D=qm(E,m,x.fill.getGranularityForZoomLevel(m.z)),k=this.layoutVertexArray;ky(((N,F)=>{k.emplaceBack(N,F)}),this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles,this.segments2,this.indexArray2,D.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:b,canonical:m})}}let td,Nh;Lt("FillBucket",jh,{omit:["layers","patternFeatures"]});var kv={get paint(){return Nh=Nh||new Fn({"fill-antialias":new Bt(Ie.paint_fill["fill-antialias"]),"fill-opacity":new Gt(Ie.paint_fill["fill-opacity"]),"fill-color":new Gt(Ie.paint_fill["fill-color"]),"fill-outline-color":new Gt(Ie.paint_fill["fill-outline-color"]),"fill-translate":new Bt(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new Bt(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new no(Ie.paint_fill["fill-pattern"])})},get layout(){return td=td||new Fn({"fill-sort-key":new Gt(Ie.layout_fill["fill-sort-key"])})}};class Rv extends Sn{constructor(r,o){super(r,kv,o)}recalculate(r,o){super.recalculate(r,o);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new jh(r)}queryRadius(){return Jd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:o,transform:f,pixelsToTileUnits:m}){return Dm(Om(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,m),o)}isTileClipped(){return!0}}const fp=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Lv=yn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:$m}=fp;class rd{constructor(r,o,f,m,b){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=r,this._geometry=-1,this._keys=m,this._values=b,r.readFields(qx,this,o)}loadGeometry(){const r=this._pbf;r.pos=this._geometry;const o=r.readVarint()+r.pos,f=[];let m,b=1,x=0,E=0,D=0;for(;r.pos<o;){if(x<=0){const k=r.readVarint();b=7&k,x=k>>3}if(x--,b===1||b===2)E+=r.readSVarint(),D+=r.readSVarint(),b===1&&(m&&f.push(m),m=[]),m&&m.push(new A(E,D));else{if(b!==7)throw new Error(`unknown command ${b}`);m&&m.push(m[0].clone())}}return m&&f.push(m),f}bbox(){const r=this._pbf;r.pos=this._geometry;const o=r.readVarint()+r.pos;let f=1,m=0,b=0,x=0,E=1/0,D=-1/0,k=1/0,N=-1/0;for(;r.pos<o;){if(m<=0){const F=r.readVarint();f=7&F,m=F>>3}if(m--,f===1||f===2)b+=r.readSVarint(),x+=r.readSVarint(),b<E&&(E=b),b>D&&(D=b),x<k&&(k=x),x>N&&(N=x);else if(f!==7)throw new Error(`unknown command ${f}`)}return[E,k,D,N]}toGeoJSON(r,o,f){const m=this.extent*Math.pow(2,f),b=this.extent*r,x=this.extent*o,E=this.loadGeometry();function D($){return[360*($.x+b)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*($.y+x)/m)*Math.PI))-90]}function k($){return $.map(D)}let N;if(this.type===1){const $=[];for(const J of E)$.push(J[0]);const Y=k($);N=$.length===1?{type:"Point",coordinates:Y[0]}:{type:"MultiPoint",coordinates:Y}}else if(this.type===2){const $=E.map(k);N=$.length===1?{type:"LineString",coordinates:$[0]}:{type:"MultiLineString",coordinates:$}}else{if(this.type!==3)throw new Error("unknown feature type");{const $=Bv(E),Y=[];for(const J of $)Y.push(J.map(k));N=Y.length===1?{type:"Polygon",coordinates:Y[0]}:{type:"MultiPolygon",coordinates:Y}}}const F={type:"Feature",geometry:N,properties:this.properties};return this.id!=null&&(F.id=this.id),F}}function qx(s,r,o){s===1?r.id=o.readVarint():s===2?(function(f,m){const b=f.readVarint()+f.pos;for(;f.pos<b;){const x=m._keys[f.readVarint()],E=m._values[f.readVarint()];m.properties[x]=E}})(o,r):s===3?r.type=o.readVarint():s===4&&(r._geometry=o.pos)}function Bv(s){const r=s.length;if(r<=1)return[s];const o=[];let f,m;for(let b=0;b<r;b++){const x=en(s[b]);x!==0&&(m===void 0&&(m=x<0),m===x<0?(f&&o.push(f),f=[s[b]]):f&&f.push(s[b]))}return f&&o.push(f),o}function en(s){let r=0;for(let o,f,m=0,b=s.length,x=b-1;m<b;x=m++)o=s[m],f=s[x],r+=(f.x-o.x)*(o.y+f.y);return r}rd.types=["Unknown","Point","LineString","Polygon"];class _n{constructor(r,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Pr,this,o),this.length=this._features.length}feature(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];const o=this._pbf.readVarint()+this._pbf.pos;return new rd(this._pbf,o,this.extent,this._keys,this._values)}}function Pr(s,r,o){s===15?r.version=o.readVarint():s===1?r.name=o.readString():s===5?r.extent=o.readVarint():s===2?r._features.push(o.pos):s===3?r._keys.push(o.readString()):s===4&&r._values.push((function(f){let m=null;const b=f.readVarint()+f.pos;for(;f.pos<b;){const x=f.readVarint()>>3;m=x===1?f.readString():x===2?f.readFloat():x===3?f.readDouble():x===4?f.readVarint64():x===5?f.readVarint():x===6?f.readSVarint():x===7?f.readBoolean():null}if(m==null)throw new Error("unknown feature value");return m})(o))}class Cr{constructor(r,o){this.layers=r.readFields(sn,{},o)}}function sn(s,r,o){if(s===3){const f=new _n(o,o.readVarint()+o.pos);f.length&&(r[f.name]=f)}}const ka=Math.pow(2,13);function ds(s,r,o,f,m,b,x,E){s.emplaceBack(r,o,2*Math.floor(f*ka)+x,m*ka*2,b*ka*2,Math.round(E))}class _u{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new xe,this.centroidVertexArray=new pe,this.indexArray=new Je,this.programConfigurations=new Sl(r.layers,r.zoom),this.segments=new kt,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){this.features=[],this.hasDependencies=Io("fill-extrusion",this.layers,o);for(const{feature:m,id:b,index:x,sourceLayerIndex:E}of r){const D=this.layers[0]._featureFilter.needGeometry,k=Do(m,D);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),k,f))continue;const N={id:b,sourceLayerIndex:E,index:x,geometry:D?k.geometry:Ns(m),properties:m.properties,type:m.type,patterns:{}};this.hasDependencies?this.features.push(Fm("fill-extrusion",this.layers,N,{zoom:this.zoom},o)):this.addFeature(N,N.geometry,x,f,{},o.subdivisionGranularity),o.featureIndex.insert(m,N.geometry,x,E,this.index,!0)}}addFeatures(r,o,f){for(const m of this.features){const{geometry:b}=m;this.addFeature(m,b,m.index,o,f,r.subdivisionGranularity)}}update(r,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,$m),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,Lv.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,o,f,m,b,x){for(const E of uh(o,500)){const D={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(D,m,r,E,x);const N=this.layoutVertexArray.length-k,F=Math.floor(D.x/D.sampleCount),$=Math.floor(D.y/D.sampleCount);for(let Y=0;Y<N;Y++)this.centroidVertexArray.emplaceBack(F,$)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:b,canonical:m})}processPolygon(r,o,f,m,b){if(m.length<1||Zn(m[0]))return;for(const F of m)F.length!==0&&Ry(r,F);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=b.fill.getGranularityForZoomLevel(o.z),D=rd.types[f.type]==="Polygon";for(const F of m){if(F.length===0||Zn(F))continue;const $=xc(F,E,D);this._generateSideFaces($,x)}if(!D)return;const k=qm(m,o,E,!1),N=this.layoutVertexArray;ky(((F,$)=>{ds(N,F,$,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(r,o){let f=0;for(let m=1;m<r.length;m++){const b=r[m],x=r[m-1];if(wc(b,x))continue;o.segment.vertexLength+4>kt.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=b.sub(x)._perp()._unit(),D=x.dist(b);f+D>32768&&(f=0),ds(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,0,f),ds(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,1,f),f+=D,ds(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,f),ds(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,f);const k=o.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function Ry(s,r){for(let o=0;o<r.length;o++){const f=r[o];o===r.length-1&&r[0].x===f.x&&r[0].y===f.y||(s.x+=f.x,s.y+=f.y,s.sampleCount++)}}function wc(s,r){return s.x===r.x&&(s.x<0||s.x>Be)||s.y===r.y&&(s.y<0||s.y>Be)}function Zn(s){return s.every((r=>r.x<0))||s.every((r=>r.x>Be))||s.every((r=>r.y<0))||s.every((r=>r.y>Be))}let Sc;Lt("FillExtrusionBucket",_u,{omit:["layers","features"]});var Fh={get paint(){return Sc=Sc||new Fn({"fill-extrusion-opacity":new Bt(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gt(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bt(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bt(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new no(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gt(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gt(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bt(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ly extends Sn{constructor(r,o){super(r,Fh,o)}createBucket(r){return new _u(r)}queryRadius(){return Jd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:b,pixelsToTileUnits:x,pixelPosMatrix:E}){const D=Om(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-b.bearingInRadians,x),k=this.paint.get("fill-extrusion-height").evaluate(o,f),N=this.paint.get("fill-extrusion-base").evaluate(o,f),F=(function(Y,J){const te=[];for(const ae of Y){const he=[ae.x,ae.y,0,1];It(he,he,J),te.push(new A(he[0]/he[3],he[1]/he[3]))}return te})(D,E),$=(function(Y,J,te,ae){const he=[],_e=[],ue=ae[8]*J,me=ae[9]*J,Pe=ae[10]*J,Re=ae[11]*J,We=ae[8]*te,lt=ae[9]*te,ht=ae[10]*te,xt=ae[11]*te;for(const Ot of Y){const Et=[],ft=[];for(const at of Ot){const Nt=at.x,Vt=at.y,Yt=ae[0]*Nt+ae[4]*Vt+ae[12],qt=ae[1]*Nt+ae[5]*Vt+ae[13],_r=ae[2]*Nt+ae[6]*Vt+ae[14],Ln=ae[3]*Nt+ae[7]*Vt+ae[15],_i=_r+Pe,sa=Ln+Re,zl=Yt+We,fo=qt+lt,qi=_r+ht,la=Ln+xt,Jn=new A((Yt+ue)/sa,(qt+me)/sa);Jn.z=_i/sa,Et.push(Jn);const $i=new A(zl/la,fo/la);$i.z=qi/la,ft.push($i)}he.push(Et),_e.push(ft)}return[he,_e]})(m,N,k,E);return(function(Y,J,te){let ae=1/0;Dm(te,J)&&(ae=Uh(te,J[0]));for(let he=0;he<J.length;he++){const _e=J[he],ue=Y[he];for(let me=0;me<_e.length-1;me++){const Pe=_e[me],Re=[Pe,_e[me+1],ue[me+1],ue[me],Pe];Lh(te,Re)&&(ae=Math.min(ae,Uh(te,Re)))}}return ae!==1/0&&ae})($[0],$[1],F)}}function Gi(s,r){return s.x*r.x+s.y*r.y}function Uh(s,r){if(s.length===1){let o=0;const f=r[o++];let m;for(;!m||f.equals(m);)if(m=r[o++],!m)return 1/0;for(;o<r.length;o++){const b=r[o],x=s[0],E=m.sub(f),D=b.sub(f),k=x.sub(f),N=Gi(E,E),F=Gi(E,D),$=Gi(D,D),Y=Gi(k,E),J=Gi(k,D),te=N*$-F*F,ae=($*Y-F*J)/te,he=(N*J-F*Y)/te,_e=f.z*(1-ae-he)+m.z*ae+b.z*he;if(isFinite(_e))return _e}return 1/0}{let o=1/0;for(const f of r)o=Math.min(o,f.z);return o}}const dp=yn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:co}=dp,By=yn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Zm}=By,jv=Math.cos(Math.PI/180*37.5),pp=Math.pow(2,14)/.5;class nd{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((o=>{this.gradients[o.id]={}})),this.layoutVertexArray=new De,this.layoutVertexArray2=new be,this.indexArray=new Je,this.programConfigurations=new Sl(r.layers,r.zoom),this.segments=new kt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){this.hasDependencies=Io("line",this.layers,o)||this.hasLineDasharray(this.layers);const m=this.layers[0].layout.get("line-sort-key"),b=!m.isConstant(),x=[];for(const{feature:E,id:D,index:k,sourceLayerIndex:N}of r){const F=this.layers[0]._featureFilter.needGeometry,$=Do(E,F);if(!this.layers[0]._featureFilter.filter(new Vr(this.zoom),$,f))continue;const Y=b?m.evaluate($,{},f):void 0,J={id:D,properties:E.properties,type:E.type,sourceLayerIndex:N,index:k,geometry:F?$.geometry:Ns(E),patterns:{},dashes:{},sortKey:Y};x.push(J)}b&&x.sort(((E,D)=>E.sortKey-D.sortKey));for(const E of x){const{geometry:D,index:k,sourceLayerIndex:N}=E;this.hasDependencies?(Io("line",this.layers,o)?Fm("line",this.layers,E,{zoom:this.zoom},o):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,E,this.zoom,o),this.patternFeatures.push(E)):this.addFeature(E,D,k,f,{},{},o.subdivisionGranularity),o.featureIndex.insert(r[k].feature,D,k,N,this.index)}}update(r,o,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f,dashPositions:m})}addFeatures(r,o,f,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,o,f,m,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Zm)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,co),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,o,f,m,b,x,E){const D=this.layers[0].layout,k=D.get("line-join").evaluate(r,{}),N=D.get("line-cap"),F=D.get("line-miter-limit"),$=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const Y of o)this.addLine(Y,r,k,N,F,$,m,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:b,dashPositions:x,canonical:m})}addLine(r,o,f,m,b,x,E,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=xc(r,E?D.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<r.length-1;ue++)this.totalDistance+=r[ue].dist(r[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=rd.types[o.type]==="Polygon";let N=r.length;for(;N>=2&&r[N-1].equals(r[N-2]);)N--;let F=0;for(;F<N-1&&r[F].equals(r[F+1]);)F++;if(N<(k?3:2))return;f==="bevel"&&(b=1.05);const $=this.overscaling<=16?122880/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let J,te,ae,he,_e;this.e1=this.e2=-1,k&&(J=r[N-2],_e=r[F].sub(J)._unit()._perp());for(let ue=F;ue<N;ue++){if(ae=ue===N-1?k?r[F+1]:void 0:r[ue+1],ae&&r[ue].equals(ae))continue;_e&&(he=_e),J&&(te=J),J=r[ue],_e=ae?ae.sub(J)._unit()._perp():he,he=he||_e;let me=he.add(_e);me.x===0&&me.y===0||me._unit();const Pe=he.x*_e.x+he.y*_e.y,Re=me.x*_e.x+me.y*_e.y,We=Re!==0?1/Re:1/0,lt=2*Math.sqrt(2-2*Re),ht=Re<jv&&te&&ae,xt=he.x*_e.y-he.y*_e.x>0;if(ht&&ue>F){const ft=J.dist(te);if(ft>2*$){const at=J.sub(J.sub(te)._mult($/ft)._round());this.updateDistance(te,at),this.addCurrentVertex(at,he,0,0,Y),te=at}}const Ot=te&&ae;let Et=Ot?f:k?"butt":m;if(Ot&&Et==="round"&&(We<x?Et="miter":We<=2&&(Et="fakeround")),Et==="miter"&&We>b&&(Et="bevel"),Et==="bevel"&&(We>2&&(Et="flipbevel"),We<b&&(Et="miter")),te&&this.updateDistance(te,J),Et==="miter")me._mult(We),this.addCurrentVertex(J,me,0,0,Y);else if(Et==="flipbevel"){if(We>100)me=_e.mult(-1);else{const ft=We*he.add(_e).mag()/he.sub(_e).mag();me._perp()._mult(ft*(xt?-1:1))}this.addCurrentVertex(J,me,0,0,Y),this.addCurrentVertex(J,me.mult(-1),0,0,Y)}else if(Et==="bevel"||Et==="fakeround"){const ft=-Math.sqrt(We*We-1),at=xt?ft:0,Nt=xt?0:ft;if(te&&this.addCurrentVertex(J,he,at,Nt,Y),Et==="fakeround"){const Vt=Math.round(180*lt/Math.PI/20);for(let Yt=1;Yt<Vt;Yt++){let qt=Yt/Vt;if(qt!==.5){const Ln=qt-.5;qt+=qt*Ln*(qt-1)*((1.0904+Pe*(Pe*(3.55645-1.43519*Pe)-3.2452))*Ln*Ln+(.848013+Pe*(.215638*Pe-1.06021)))}const _r=_e.sub(he)._mult(qt)._add(he)._unit()._mult(xt?-1:1);this.addHalfVertex(J,_r.x,_r.y,!1,xt,0,Y)}}ae&&this.addCurrentVertex(J,_e,-at,-Nt,Y)}else if(Et==="butt")this.addCurrentVertex(J,me,0,0,Y);else if(Et==="square"){const ft=te?1:-1;this.addCurrentVertex(J,me,ft,ft,Y)}else Et==="round"&&(te&&(this.addCurrentVertex(J,he,0,0,Y),this.addCurrentVertex(J,he,1,1,Y,!0)),ae&&(this.addCurrentVertex(J,_e,-1,-1,Y,!0),this.addCurrentVertex(J,_e,0,0,Y)));if(ht&&ue<N-1){const ft=J.dist(ae);if(ft>2*$){const at=J.add(ae.sub(J)._mult($/ft)._round());this.updateDistance(J,at),this.addCurrentVertex(at,_e,0,0,Y),J=at}}}}addCurrentVertex(r,o,f,m,b,x=!1){const E=o.y*m-o.x,D=-o.y-o.x*m;this.addHalfVertex(r,o.x+o.y*f,o.y-o.x*f,x,!1,f,b),this.addHalfVertex(r,E,D,x,!0,-m,b),this.distance>pp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,o,f,m,b,x))}addHalfVertex({x:r,y:o},f,m,b,x,E,D){const k=.5*(this.lineClips?this.scaledDistance*(pp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(b?1:0),(o<<1)+(x?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(E===0?0:E<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),D.primitiveLength++),x?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,o){this.distance+=r.dist(o),this.updateScaledDistance()}hasLineDasharray(r){for(const o of r){const f=o.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(r,o,f,m){for(const b of r){const x=b.paint.get("line-dasharray");if(!x||x.value.kind==="constant")continue;const E=b.layout.get("line-cap")==="round",D={dasharray:x.value.evaluate({zoom:f-1},o,{}),round:E},k={dasharray:x.value.evaluate({zoom:f},o,{}),round:E},N={dasharray:x.value.evaluate({zoom:f+1},o,{}),round:E},F=`${D.dasharray.join(",")},${D.round}`,$=`${k.dasharray.join(",")},${k.round}`,Y=`${N.dasharray.join(",")},${N.round}`;m.dashDependencies[F]=D,m.dashDependencies[$]=k,m.dashDependencies[Y]=N,o.dashes[b.id]={min:F,mid:$,max:Y}}}}let Tc,yi;Lt("LineBucket",nd,{omit:["layers","patternFeatures"]});var Ec={get paint(){return yi=yi||new Fn({"line-opacity":new Gt(Ie.paint_line["line-opacity"]),"line-color":new Gt(Ie.paint_line["line-color"]),"line-translate":new Bt(Ie.paint_line["line-translate"]),"line-translate-anchor":new Bt(Ie.paint_line["line-translate-anchor"]),"line-width":new Gt(Ie.paint_line["line-width"]),"line-gap-width":new Gt(Ie.paint_line["line-gap-width"]),"line-offset":new Gt(Ie.paint_line["line-offset"]),"line-blur":new Gt(Ie.paint_line["line-blur"]),"line-dasharray":new no(Ie.paint_line["line-dasharray"]),"line-pattern":new no(Ie.paint_line["line-pattern"]),"line-gradient":new Ch(Ie.paint_line["line-gradient"])})},get layout(){return Tc=Tc||new Fn({"line-cap":new Bt(Ie.layout_line["line-cap"]),"line-join":new Gt(Ie.layout_line["line-join"]),"line-miter-limit":new Bt(Ie.layout_line["line-miter-limit"]),"line-round-limit":new Bt(Ie.layout_line["line-round-limit"]),"line-sort-key":new Gt(Ie.layout_line["line-sort-key"])})}};class id extends Gt{possiblyEvaluate(r,o){return o=new Vr(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(r,o)}evaluate(r,o,f,m){return o=Tr({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,f,m)}}let ps;class jy extends Sn{constructor(r,o){super(r,Ec,o),this.gradientVersion=0,ps||(ps=new id(Ec.paint.properties["line-width"].specification),ps.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(o)&&o._styleExpression.expression instanceof cl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,o){super.recalculate(r,o),this.paint._values["line-floorwidth"]=ps.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new nd(r)}queryRadius(r){const o=r,f=Hm(yc("line-width",this,o),yc("line-gap-width",this,o)),m=yc("line-offset",this,o);return f/2+Math.abs(m)+Jd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:b,pixelsToTileUnits:x}){const E=Om(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-b.bearingInRadians,x),D=x/2*Hm(this.paint.get("line-width").evaluate(o,f),this.paint.get("line-gap-width").evaluate(o,f)),k=this.paint.get("line-offset").evaluate(o,f);return k&&(m=(function(N,F){const $=[];for(let Y=0;Y<N.length;Y++){const J=zm(N[Y]),te=[];for(let ae=0;ae<J.length;ae++){const he=J[ae],_e=J[ae-1],ue=J[ae+1],me=ae===0?new A(0,0):he.sub(_e)._unit()._perp(),Pe=ae===J.length-1?new A(0,0):ue.sub(he)._unit()._perp(),Re=me._add(Pe)._unit(),We=Re.x*Pe.x+Re.y*Pe.y;We!==0&&Re._mult(1/We),te.push(Re._mult(F)._add(he))}$.push(te)}return $})(m,k*x)),(function(N,F,$){for(let Y=0;Y<F.length;Y++){const J=F[Y];if(N.length>=3){for(let te=0;te<J.length;te++)if(El(N,J[te]))return!0}if(pi(N,J,$))return!0}return!1})(E,m,D)}isTileClipped(){return!0}}function Hm(s,r){return r>0?r+2*s:s}const Nv=yn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),mp=yn([{name:"a_projected_pos",components:3,type:"Float32"}],4);yn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ny=yn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);yn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uo=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Fv=yn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ho(s,r,o){return s.sections.forEach((f=>{f.text=(function(m,b,x){const E=b.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),ro.applyArabicShaping&&(m=ro.applyArabicShaping(m)),m})(f.text,r,o)})),s}yn([{name:"triangle",components:3,type:"Uint16"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),yn([{type:"Float32",name:"offsetX"}]),yn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),yn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var li=24;const ad={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},$x={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},bu={40:!0};function gp(s,r,o,f,m,b){if("fontStack"in r){const x=o[r.fontStack],E=x&&x[s];return E?E.metrics.advance*r.scale+m:0}{const x=f[r.imageName];return x?x.displaySize[0]*r.scale*li/b+m:0}}function Ym(s,r,o,f){const m=Math.pow(s-r,2);return f?s<r?m/2:2*m:m+Math.abs(o)*o}function od(s,r,o){let f=0;return s===10&&(f-=1e4),o&&(f+=150),s!==40&&s!==65288||(f+=50),r!==41&&r!==65289||(f+=50),f}function Fy(s,r,o,f,m,b){let x=null,E=Ym(r,o,m,b);for(const D of f){const k=Ym(r-D.x,o,m,b)+D.badness;k<=E&&(x=D,E=k)}return{index:s,x:r,priorBreak:x,badness:E}}function Uy(s){return s?Uy(s.priorBreak).concat(s.index):[]}class Vh{constructor(r="",o=[],f=[]){this.text=r,this.sections=o,this.sectionIndex=f,this.imageSectionID=null}static fromFeature(r,o){const f=new Vh;for(let m=0;m<r.sections.length;m++){const b=r.sections[m];b.image?f.addImageSection(b):f.addTextSection(b,o)}return f}length(){return[...this.text].length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}verticalizePunctuation(){this.text=(function(r){let o="",f={premature:!0,value:void 0};const m=r[Symbol.iterator]();let b=m.next();const x=r[Symbol.iterator]();x.next();let E=x.next();for(;!b.done;)o+=!E.done&&ls(E.value.codePointAt(0))&&!ad[E.value]||!f.premature&&ls(f.value.codePointAt(0))&&!ad[f.value]||!ad[b.value]?b.value:ad[b.value],f={value:b.value,premature:!1},b=m.next(),E=x.next();return o})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const r=this.text.match(/^\s*/),o=r?r[0].length:0,f=this.text.match(/\S\s*$/),m=f?f[0].length-1:0;this.text=this.text.substring(o,this.text.length-m),this.sectionIndex=this.sectionIndex.slice(o,this.sectionIndex.length-m)}substring(r,o){const f=[...this.text].slice(r,o).join(""),m=this.sectionIndex.slice(r,o);return new Vh(f,this.sections,m)}toCodeUnitIndex(r){return[...this.text].slice(0,r).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((r,o)=>Math.max(r,this.sections[o].scale)),0)}getMaxImageSize(r){let o=0,f=0;for(let m=0;m<this.length();m++){const b=this.getSection(m);if("imageName"in b){const x=r[b.imageName];if(!x)continue;const E=x.displaySize;o=Math.max(o,E[0]),f=Math.max(f,E[1])}}return{maxImageWidth:o,maxImageHeight:f}}addTextSection(r,o){this.text+=r.text,this.sections.push({scale:r.scale||1,verticalAlign:r.verticalAlign||"bottom",fontStack:r.fontStack||o});const f=this.sections.length-1;this.sectionIndex.push(...[...r.text].map((()=>f)))}addImageSection(r){const o=r.image?r.image.name:"";if(o.length===0)return void cr("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push({scale:1,verticalAlign:r.verticalAlign||"bottom",imageName:o}),this.sectionIndex.push(this.sections.length-1)):cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(r,o,f,m,b){const x=[],E=this.determineAverageLineWidth(r,o,f,m,b),D=this.hasZeroWidthSpaces();let k=0,N=0;const F=this.text[Symbol.iterator]();let $=F.next();const Y=this.text[Symbol.iterator]();Y.next();let J=Y.next();const te=this.text[Symbol.iterator]();te.next(),te.next();let ae=te.next();for(;!$.done;){const he=this.getSection(N),_e=$.value.codePointAt(0);if(Th(_e)||(k+=gp(_e,he,f,m,r,b)),!J.done){const ue=as(_e),me=J.value.codePointAt(0);($x[_e]||ue||"imageName"in he||!ae.done&&bu[me])&&x.push(Fy(N+1,k,E,x,od(_e,me,ue&&D),!1))}N++,$=F.next(),J=Y.next(),ae=te.next()}return Uy(Fy(this.length(),k,E,x,0,!0))}determineAverageLineWidth(r,o,f,m,b){let x=0,E=0;for(const D of this.text){const k=this.getSection(E);x+=gp(D.codePointAt(0),k,f,m,r,b),E++}return x/Math.max(1,Math.ceil(x/o))}}const Xm=4294967296,yp=1/Xm,Wm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Km{constructor(r=new Uint8Array(16)){this.buf=ArrayBuffer.isView(r)?r:new Uint8Array(r),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(r,o,f=this.length){for(;this.pos<f;){const m=this.readVarint(),b=m>>3,x=this.pos;this.type=7&m,r(b,o,this),this.pos===x&&this.skip(m)}return o}readMessage(r,o){return this.readFields(r,o,this.readVarint()+this.pos)}readFixed32(){const r=this.dataView.getUint32(this.pos,!0);return this.pos+=4,r}readSFixed32(){const r=this.dataView.getInt32(this.pos,!0);return this.pos+=4,r}readFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Xm;return this.pos+=8,r}readSFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Xm;return this.pos+=8,r}readFloat(){const r=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,r}readDouble(){const r=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,r}readVarint(r){const o=this.buf;let f,m;return m=o[this.pos++],f=127&m,m<128?f:(m=o[this.pos++],f|=(127&m)<<7,m<128?f:(m=o[this.pos++],f|=(127&m)<<14,m<128?f:(m=o[this.pos++],f|=(127&m)<<21,m<128?f:(m=o[this.pos],f|=(15&m)<<28,(function(b,x,E){const D=E.buf;let k,N;if(N=D[E.pos++],k=(112&N)>>4,N<128||(N=D[E.pos++],k|=(127&N)<<3,N<128)||(N=D[E.pos++],k|=(127&N)<<10,N<128)||(N=D[E.pos++],k|=(127&N)<<17,N<128)||(N=D[E.pos++],k|=(127&N)<<24,N<128)||(N=D[E.pos++],k|=(1&N)<<31,N<128))return sd(b,k,x);throw new Error("Expected varint not more than 10 bytes")})(f,r,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const r=this.readVarint();return r%2==1?(r+1)/-2:r/2}readBoolean(){return!!this.readVarint()}readString(){const r=this.readVarint()+this.pos,o=this.pos;return this.pos=r,r-o>=12&&Wm?Wm.decode(this.buf.subarray(o,r)):(function(f,m,b){let x="",E=m;for(;E<b;){const D=f[E];let k,N,F,$=null,Y=D>239?4:D>223?3:D>191?2:1;if(E+Y>b)break;Y===1?D<128&&($=D):Y===2?(k=f[E+1],(192&k)==128&&($=(31&D)<<6|63&k,$<=127&&($=null))):Y===3?(k=f[E+1],N=f[E+2],(192&k)==128&&(192&N)==128&&($=(15&D)<<12|(63&k)<<6|63&N,($<=2047||$>=55296&&$<=57343)&&($=null))):Y===4&&(k=f[E+1],N=f[E+2],F=f[E+3],(192&k)==128&&(192&N)==128&&(192&F)==128&&($=(15&D)<<18|(63&k)<<12|(63&N)<<6|63&F,($<=65535||$>=1114112)&&($=null))),$===null?($=65533,Y=1):$>65535&&($-=65536,x+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),x+=String.fromCharCode($),E+=Y}return x})(this.buf,o,r)}readBytes(){const r=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,r);return this.pos=r,o}readPackedVarint(r=[],o){const f=this.readPackedEnd();for(;this.pos<f;)r.push(this.readVarint(o));return r}readPackedSVarint(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readSVarint());return r}readPackedBoolean(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readBoolean());return r}readPackedFloat(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readFloat());return r}readPackedDouble(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readDouble());return r}readPackedFixed32(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readFixed32());return r}readPackedSFixed32(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readSFixed32());return r}readPackedFixed64(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readFixed64());return r}readPackedSFixed64(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readSFixed64());return r}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(r){const o=7&r;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(r,o){this.writeVarint(r<<3|o)}realloc(r){let o=this.length||16;for(;o<this.pos+r;)o*=2;if(o!==this.length){const f=new Uint8Array(o);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeSFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*yp),!0),this.pos+=8}writeSFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*yp),!0),this.pos+=8}writeVarint(r){(r=+r||0)>268435455||r<0?(function(o,f){let m,b;if(o>=0?(m=o%4294967296|0,b=o/4294967296|0):(m=~(-o%4294967296),b=~(-o/4294967296),4294967295^m?m=m+1|0:(m=0,b=b+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(x,E,D){D.buf[D.pos++]=127&x|128,x>>>=7,D.buf[D.pos++]=127&x|128,x>>>=7,D.buf[D.pos++]=127&x|128,x>>>=7,D.buf[D.pos++]=127&x|128,D.buf[D.pos]=127&(x>>>=7)})(m,0,f),(function(x,E){const D=(7&x)<<4;E.buf[E.pos++]|=D|((x>>>=3)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x|((x>>>=7)?128:0),x&&(E.buf[E.pos++]=127&x)))))})(b,f)})(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))}writeSVarint(r){this.writeVarint(r<0?2*-r-1:2*r)}writeBoolean(r){this.writeVarint(+r)}writeString(r){r=String(r),this.realloc(4*r.length),this.pos++;const o=this.pos;this.pos=(function(m,b,x){for(let E,D,k=0;k<b.length;k++){if(E=b.charCodeAt(k),E>55295&&E<57344){if(!D){E>56319||k+1===b.length?(m[x++]=239,m[x++]=191,m[x++]=189):D=E;continue}if(E<56320){m[x++]=239,m[x++]=191,m[x++]=189,D=E;continue}E=D-55296<<10|E-56320|65536,D=null}else D&&(m[x++]=239,m[x++]=191,m[x++]=189,D=null);E<128?m[x++]=E:(E<2048?m[x++]=E>>6|192:(E<65536?m[x++]=E>>12|224:(m[x++]=E>>18|240,m[x++]=E>>12&63|128),m[x++]=E>>6&63|128),m[x++]=63&E|128)}return x})(this.buf,r,this.pos);const f=this.pos-o;f>=128&&Uv(o,f,this),this.pos=o-1,this.writeVarint(f),this.pos+=f}writeFloat(r){this.realloc(4),this.dataView.setFloat32(this.pos,r,!0),this.pos+=4}writeDouble(r){this.realloc(8),this.dataView.setFloat64(this.pos,r,!0),this.pos+=8}writeBytes(r){const o=r.length;this.writeVarint(o),this.realloc(o);for(let f=0;f<o;f++)this.buf[this.pos++]=r[f]}writeRawMessage(r,o){this.pos++;const f=this.pos;r(o,this);const m=this.pos-f;m>=128&&Uv(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m}writeMessage(r,o,f){this.writeTag(r,2),this.writeRawMessage(o,f)}writePackedVarint(r,o){o.length&&this.writeMessage(r,Vv,o)}writePackedSVarint(r,o){o.length&&this.writeMessage(r,Gv,o)}writePackedBoolean(r,o){o.length&&this.writeMessage(r,qv,o)}writePackedFloat(r,o){o.length&&this.writeMessage(r,ld,o)}writePackedDouble(r,o){o.length&&this.writeMessage(r,Qm,o)}writePackedFixed32(r,o){o.length&&this.writeMessage(r,$v,o)}writePackedSFixed32(r,o){o.length&&this.writeMessage(r,Zv,o)}writePackedFixed64(r,o){o.length&&this.writeMessage(r,Hv,o)}writePackedSFixed64(r,o){o.length&&this.writeMessage(r,Yv,o)}writeBytesField(r,o){this.writeTag(r,2),this.writeBytes(o)}writeFixed32Field(r,o){this.writeTag(r,5),this.writeFixed32(o)}writeSFixed32Field(r,o){this.writeTag(r,5),this.writeSFixed32(o)}writeFixed64Field(r,o){this.writeTag(r,1),this.writeFixed64(o)}writeSFixed64Field(r,o){this.writeTag(r,1),this.writeSFixed64(o)}writeVarintField(r,o){this.writeTag(r,0),this.writeVarint(o)}writeSVarintField(r,o){this.writeTag(r,0),this.writeSVarint(o)}writeStringField(r,o){this.writeTag(r,2),this.writeString(o)}writeFloatField(r,o){this.writeTag(r,5),this.writeFloat(o)}writeDoubleField(r,o){this.writeTag(r,1),this.writeDouble(o)}writeBooleanField(r,o){this.writeVarintField(r,+o)}}function sd(s,r,o){return o?4294967296*r+(s>>>0):4294967296*(r>>>0)+(s>>>0)}function Uv(s,r,o){const f=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));o.realloc(f);for(let m=o.pos-1;m>=s;m--)o.buf[m+f]=o.buf[m]}function Vv(s,r){for(let o=0;o<s.length;o++)r.writeVarint(s[o])}function Gv(s,r){for(let o=0;o<s.length;o++)r.writeSVarint(s[o])}function ld(s,r){for(let o=0;o<s.length;o++)r.writeFloat(s[o])}function Qm(s,r){for(let o=0;o<s.length;o++)r.writeDouble(s[o])}function qv(s,r){for(let o=0;o<s.length;o++)r.writeBoolean(s[o])}function $v(s,r){for(let o=0;o<s.length;o++)r.writeFixed32(s[o])}function Zv(s,r){for(let o=0;o<s.length;o++)r.writeSFixed32(s[o])}function Hv(s,r){for(let o=0;o<s.length;o++)r.writeFixed64(s[o])}function Yv(s,r){for(let o=0;o<s.length;o++)r.writeSFixed64(s[o])}function Xv(s,r,o){s===1&&o.readMessage(Jm,r)}function Jm(s,r,o){if(s===3){const{id:f,bitmap:m,width:b,height:x,left:E,top:D,advance:k}=o.readMessage(Wv,{});r.push({id:f,bitmap:new rp({width:b+6,height:x+6},m),metrics:{width:b,height:x,left:E,top:D,advance:k}})}}function Wv(s,r,o){s===1?r.id=o.readVarint():s===2?r.bitmap=o.readBytes():s===3?r.width=o.readVarint():s===4?r.height=o.readVarint():s===5?r.left=o.readSVarint():s===6?r.top=o.readSVarint():s===7&&(r.advance=o.readVarint())}function Vy(s){let r=0,o=0;for(const x of s)r+=x.w*x.h,o=Math.max(o,x.w);s.sort(((x,E)=>E.h-x.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),o),h:1/0}];let m=0,b=0;for(const x of s)for(let E=f.length-1;E>=0;E--){const D=f[E];if(!(x.w>D.w||x.h>D.h)){if(x.x=D.x,x.y=D.y,b=Math.max(b,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===D.w&&x.h===D.h){const k=f.pop();k&&E<f.length&&(f[E]=k)}else x.h===D.h?(D.x+=x.w,D.w-=x.w):x.w===D.w?(D.y+=x.h,D.h-=x.h):(f.push({x:D.x+x.w,y:D.y,w:D.w-x.w,h:x.h}),D.y+=x.h,D.h-=x.h);break}}return{w:m,h:b,fill:r/(m*b)||0}}class tn{constructor(r,{pixelRatio:o,version:f,stretchX:m,stretchY:b,content:x,textFitWidth:E,textFitHeight:D}){this.paddedRect=r,this.pixelRatio=o,this.stretchX=m,this.stretchY=b,this.content=x,this.version=f,this.textFitWidth=E,this.textFitHeight=D}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class eg{constructor(r,o){const f={},m={};this.haveRenderCallbacks=[];const b=[];this.addImages(r,f,b),this.addImages(o,m,b);const{w:x,h:E}=Vy(b),D=new na({width:x||1,height:E||1});for(const k in r){const N=r[k],F=f[k].paddedRect;na.copy(N.data,D,{x:0,y:0},{x:F.x+1,y:F.y+1},N.data)}for(const k in o){const N=o[k],F=m[k].paddedRect,$=F.x+1,Y=F.y+1,J=N.data.width,te=N.data.height;na.copy(N.data,D,{x:0,y:0},{x:$,y:Y},N.data),na.copy(N.data,D,{x:0,y:te-1},{x:$,y:Y-1},{width:J,height:1}),na.copy(N.data,D,{x:0,y:0},{x:$,y:Y+te},{width:J,height:1}),na.copy(N.data,D,{x:J-1,y:0},{x:$-1,y:Y},{width:1,height:te}),na.copy(N.data,D,{x:0,y:0},{x:$+J,y:Y},{width:1,height:te})}this.image=D,this.iconPositions=f,this.patternPositions=m}addImages(r,o,f){for(const m in r){const b=r[m],x={x:0,y:0,w:b.data.width+2,h:b.data.height+2};f.push(x),o[m]=new tn(x,b),b.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,o){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in r.updatedImages)this.patchUpdatedImage(this.iconPositions[f],r.getImage(f),o),this.patchUpdatedImage(this.patternPositions[f],r.getImage(f),o)}patchUpdatedImage(r,o,f){if(!r||!o||r.version===o.version)return;r.version=o.version;const[m,b]=r.tl;f.update(o.data,void 0,{x:m,y:b})}}var xu;function vp(s,r,o,f,m,b,x,E,D,k,N,F,$,Y,J){const te=Vh.fromFeature(s,m);let ae;F===y.az.vertical&&te.verticalizePunctuation();let he=te.determineLineBreaks(k,b,r,f,Y);const{processBidirectionalText:_e,processStyledBidirectionalText:ue}=ro;if(_e&&te.sections.length===1){ae=[],he=he.map((We=>te.toCodeUnitIndex(We)));const Re=_e(te.toString(),he);for(const We of Re){const lt=[...We].map((()=>0));ae.push(new Vh(We,te.sections,lt))}}else if(ue){ae=[],he=he.map((ht=>te.toCodeUnitIndex(ht)));let Re=0;const We=[];for(const ht of te.text)We.push(...Array(ht.length).fill(te.sectionIndex[Re])),Re++;const lt=ue(te.text,We,he);for(const ht of lt){const xt=[];let Ot="";for(const Et of ht[0])xt.push(ht[1][Ot.length]),Ot+=Et;ae.push(new Vh(ht[0],te.sections,xt))}}else ae=(function(Re,We){const lt=[];let ht=0;for(const xt of We)lt.push(Re.substring(ht,xt)),ht=xt;return ht<Re.length()&&lt.push(Re.substring(ht,Re.length())),lt})(te,he);const me=[],Pe={positionedLines:me,text:te.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:F,iconsInText:!1,verticalizable:!1};return(function(Re,We,lt,ht,xt,Ot,Et,ft,at,Nt,Vt,Yt){let qt=0,_r=0,Ln=0,_i=0;const sa=ft==="right"?1:ft==="left"?0:.5,zl=li/Yt;let fo=0;for(const Jn of xt){Jn.trim();const $i=Jn.getMaxScale(),ja={positionedGlyphs:[],lineOffset:0};Re.positionedLines[fo]=ja;const Na=ja.positionedGlyphs;let ko=0;if(!Jn.length()){_r+=Ot,++fo;continue}const ca=Zx(ht,Jn,zl);let Ro=0;for(const zi of Jn.text){const Vn=Jn.getSection(Ro),bi=zi.codePointAt(0),Hn=tg(at,Vt,bi),ki={glyph:bi,imageName:null,x:qt,y:_r+-17,vertical:Hn,scale:1,fontStack:"",sectionIndex:Jn.getSectionIndex(Ro),metrics:null,rect:null};let Yh;if("fontStack"in Vn){if(Yh=cd(Vn,bi,Hn,ca,We,lt),!Yh)continue;ki.fontStack=Vn.fontStack}else{if(Re.iconsInText=!0,Vn.scale*=zl,Yh=qy(Vn,Hn,$i,ca,ht),!Yh)continue;ko=Math.max(ko,Yh.imageOffset),ki.imageName=Vn.imageName}const{rect:zc,metrics:v0,baselineOffset:yd}=Yh;ki.y+=yd,ki.scale=Vn.scale,ki.metrics=v0,ki.rect=zc,Na.push(ki),Hn?(Re.verticalizable=!0,qt+=("imageName"in Vn?v0.advance:li)*Vn.scale+Nt):qt+=v0.advance*Vn.scale+Nt,Ro++}Na.length!==0&&(Ln=Math.max(qt-Nt,Ln),rg(Na,0,Na.length-1,sa)),qt=0,ja.lineOffset=Math.max(ko,($i-1)*li);const kl=Ot*$i+ko;_r+=kl,_i=Math.max(kl,_i),++fo}const{horizontalAlign:qi,verticalAlign:la}=Gy(Et);(function(Jn,$i,ja,Na,ko,ca,Ro,kl,zi){const Vn=($i-ja)*ko;let bi=0;bi=ca!==Ro?-kl*Na- -17:-Na*zi*Ro+.5*Ro;for(const Hn of Jn)for(const ki of Hn.positionedGlyphs)ki.x+=Vn,ki.y+=bi})(Re.positionedLines,sa,qi,la,Ln,_i,Ot,_r,xt.length),Re.top+=-la*_r,Re.bottom=Re.top+_r,Re.left+=-qi*Ln,Re.right=Re.left+Ln})(Pe,r,o,f,ae,x,E,D,F,k,$,J),!(function(Re){for(const We of Re)if(We.positionedGlyphs.length!==0)return!1;return!0})(me)&&Pe}function Gy(s){let r=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:r,verticalAlign:o}}function Zx(s,r,o){const f=r.getMaxScale()*li,{maxImageWidth:m,maxImageHeight:b}=r.getMaxImageSize(s),x=Math.max(f,b*o);return{verticalLineContentWidth:Math.max(f,m*o),horizontalLineContentHeight:x}}function Kv(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function tg(s,r,o){return!(s===y.az.horizontal||!r&&!cc(o)||r&&(Th(o)||(f=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function cd(s,r,o,f,m,b){const x=b[s.fontStack],E=(function(k,N,F,$){if(k&&k.rect)return k;const Y=N[F.fontStack],J=Y&&Y[$];return J?{rect:null,metrics:J.metrics}:null})(x&&x[r],m,s,r);if(E===null)return null;let D;if(o)D=f.verticalLineContentWidth-s.scale*li;else{const k=Kv(s.verticalAlign);D=(f.horizontalLineContentHeight-s.scale*li)*k}return{rect:E.rect,metrics:E.metrics,baselineOffset:D}}function qy(s,r,o,f,m){const b=m[s.imageName];if(!b)return null;const x=b.paddedRect,E=b.displaySize,D={width:E[0],height:E[1],left:1,top:-3,advance:r?E[1]:E[0]};let k;if(r)k=f.verticalLineContentWidth-E[1]*s.scale;else{const N=Kv(s.verticalAlign);k=(f.horizontalLineContentHeight-E[1]*s.scale)*N}return{rect:x,metrics:D,baselineOffset:k,imageOffset:(r?E[0]:E[1])*s.scale-li*o}}function rg(s,r,o,f){if(f===0)return;const m=s[o],b=(s[o].x+m.metrics.advance*m.scale)*f;for(let x=r;x<=o;x++)s[x].x-=b}function $y(s,r,o){const{horizontalAlign:f,verticalAlign:m}=Gy(o),b=r[0]-s.displaySize[0]*f,x=r[1]-s.displaySize[1]*m;return{image:s,top:x,bottom:x+s.displaySize[1],left:b,right:b+s.displaySize[0]}}function Ac(s){var r,o;let f=s.left,m=s.top,b=s.right-f,x=s.bottom-m;const E=(r=s.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",D=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",k=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(D==="proportional"){if(E==="stretchOnly"&&b/x<k||E==="proportional"){const N=Math.ceil(x*k);f*=N/b,b=N}}else if(E==="proportional"&&D==="stretchOnly"&&k!==0&&b/x>k){const N=Math.ceil(b/k);m*=N/x,x=N}return{x1:f,y1:m,x2:f+b,y2:m+x}}function Vs(s,r,o,f,m,b){const x=s.image;let E;if(x.content){const ae=x.content,he=x.pixelRatio||1;E=[ae[0]/he,ae[1]/he,x.displaySize[0]-ae[2]/he,x.displaySize[1]-ae[3]/he]}const D=r.left*b,k=r.right*b;let N,F,$,Y;o==="width"||o==="both"?(Y=m[0]+D-f[3],F=m[0]+k+f[1]):(Y=m[0]+(D+k-x.displaySize[0])/2,F=Y+x.displaySize[0]);const J=r.top*b,te=r.bottom*b;return o==="height"||o==="both"?(N=m[1]+J-f[0],$=m[1]+te+f[2]):(N=m[1]+(J+te-x.displaySize[1])/2,$=N+x.displaySize[1]),{image:x,top:N,right:F,bottom:$,left:Y,collisionPadding:E}}Lt("ImagePosition",tn),Lt("ImageAtlas",eg),y.az=void 0,(xu=y.az||(y.az={}))[xu.none=0]="none",xu[xu.horizontal=1]="horizontal",xu[xu.vertical=2]="vertical",xu[xu.horizontalOnly=3]="horizontalOnly";const Oo=128,wu=32640;function Zy(s,r){const{expression:o}=r;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Vr(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=o;let b=0;for(;b<f.length&&f[b]<=s;)b++;b=Math.max(0,b-1);let x=b;for(;x<f.length&&f[x]<s+1;)x++;x=Math.min(f.length-1,x);const E=f[b],D=f[x];return o.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:D,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:D,minSize:o.evaluate(new Vr(E)),maxSize:o.evaluate(new Vr(D)),interpolationType:m}}}function ng(s,r,o){let f="never";const m=s.get(r);return m?f=m:s.get(o)&&(f="always"),f}const Qv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _p(s,r,o,f,m,b,x,E,D,k,N,F,$){const Y=E?Math.min(wu,Math.round(E[0])):0,J=E?Math.min(wu,Math.round(E[1])):0;s.emplaceBack(r,o,Math.round(32*f),Math.round(32*m),b,x,(Y<<1)+(D?1:0),J,16*k,16*N,256*F,256*$)}function Hy(s,r,o){s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o)}function Yy(s){for(const r of s.sections)if(zs(r.text))return!0;return!1}class ig{constructor(r){this.layoutVertexArray=new Se,this.indexArray=new Je,this.programConfigurations=r,this.segments=new kt,this.dynamicLayoutVertexArray=new je,this.opacityVertexArray=new et,this.hasVisibleVertices=!1,this.placedSymbolArray=new M}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,o,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Nv.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,mp.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Qv,!0),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Lt("SymbolBuffers",ig);class ag{constructor(r,o,f){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new f,this.segments=new kt,this.collisionVertexArray=new Qe}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,Ny.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Lt("CollisionBuffers",ag);class ud{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((x=>x.id)),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Zy(this.zoom,o["text-size"]),this.iconSizeData=Zy(this.zoom,o["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),b=f.get("symbol-z-order");this.canOverlap=ng(f,"text-overlap","text-allow-overlap")!=="never"||ng(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=b!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(b==="viewport-y"||b==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((x=>y.az[x]))),this.stateDependentLayerIds=this.layers.filter((x=>x.isStateDependent())).map((x=>x.id)),this.sourceID=r.sourceID}createArrays(){this.text=new ig(new Sl(this.layers,this.zoom,(r=>/^text/.test(r)))),this.icon=new ig(new Sl(this.layers,this.zoom,(r=>/^icon/.test(r)))),this.glyphOffsetArray=new V,this.lineVertexArray=new q,this.symbolInstances=new R,this.textAnchorOffsets=new W}calculateGlyphDependencies(r,o,f,m,b){for(const x of r)if(o[x.codePointAt(0)]=!0,(f||m)&&b){const E=ad[x];E&&(o[E.codePointAt(0)]=!0)}}populate(r,o,f){const m=this.layers[0],b=m.layout,x=b.get("text-font"),E=b.get("text-field"),D=b.get("icon-image"),k=(E.value.kind!=="constant"||E.value.value instanceof ii&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),N=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,F=b.get("symbol-sort-key");if(this.features=[],!k&&!N)return;const $=o.iconDependencies,Y=o.glyphDependencies,J=o.availableImages,te=new Vr(this.zoom);for(const{feature:ae,id:he,index:_e,sourceLayerIndex:ue}of r){const me=m._featureFilter.needGeometry,Pe=Do(ae,me);if(!m._featureFilter.filter(te,Pe,f))continue;let Re,We;if(me||(Pe.geometry=Ns(ae)),k){const ht=m.getValueAndResolveTokens("text-field",Pe,f,J),xt=ii.factory(ht),Ot=this.hasRTLText=this.hasRTLText||Yy(xt);(!Ot||ro.getRTLTextPluginStatus()==="unavailable"||Ot&&ro.isParsed())&&(Re=ho(xt,m,Pe))}if(N){const ht=m.getValueAndResolveTokens("icon-image",Pe,f,J);We=ht instanceof Bi?ht:Bi.fromString(ht)}if(!Re&&!We)continue;const lt=this.sortFeaturesByKey?F.evaluate(Pe,{},f):void 0;if(this.features.push({id:he,text:Re,icon:We,index:_e,sourceLayerIndex:ue,geometry:Pe.geometry,properties:ae.properties,type:rd.types[ae.type],sortKey:lt}),We&&($[We.name]=!0),Re){const ht=x.evaluate(Pe,{},f).join(","),xt=b.get("text-rotation-alignment")!=="viewport"&&b.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(y.az.vertical)>=0;for(const Ot of Re.sections)if(Ot.image)$[Ot.image.name]=!0;else{const Et=os(Re.toString()),ft=Ot.fontStack||ht,at=Y[ft]=Y[ft]||{};this.calculateGlyphDependencies(Ot.text,at,xt,this.allowVerticalPlacement,Et)}}}b.get("symbol-placement")==="line"&&(this.features=(function(ae){const he={},_e={},ue=[];let me=0;function Pe(ht){ue.push(ae[ht]),me++}function Re(ht,xt,Ot){const Et=_e[ht];return delete _e[ht],_e[xt]=Et,ue[Et].geometry[0].pop(),ue[Et].geometry[0]=ue[Et].geometry[0].concat(Ot[0]),Et}function We(ht,xt,Ot){const Et=he[xt];return delete he[xt],he[ht]=Et,ue[Et].geometry[0].shift(),ue[Et].geometry[0]=Ot[0].concat(ue[Et].geometry[0]),Et}function lt(ht,xt,Ot){const Et=Ot?xt[0][xt[0].length-1]:xt[0][0];return`${ht}:${Et.x}:${Et.y}`}for(let ht=0;ht<ae.length;ht++){const xt=ae[ht],Ot=xt.geometry,Et=xt.text?xt.text.toString():null;if(!Et){Pe(ht);continue}const ft=lt(Et,Ot),at=lt(Et,Ot,!0);if(ft in _e&&at in he&&_e[ft]!==he[at]){const Nt=We(ft,at,Ot),Vt=Re(ft,at,ue[Nt].geometry);delete he[ft],delete _e[at],_e[lt(Et,ue[Vt].geometry,!0)]=Vt,ue[Nt].geometry=null}else ft in _e?Re(ft,at,Ot):at in he?We(ft,at,Ot):(Pe(ht),he[ft]=me-1,_e[at]=me-1)}return ue.filter((ht=>ht.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ae,he)=>ae.sortKey-he.sortKey))}update(r,o,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,o){const f=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(o[r.segment+1]),b=r.dist(o[r.segment]);const x={};for(let E=r.segment+1;E<o.length;E++)x[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:m},E<o.length-1&&(m+=o[E+1].dist(o[E]));for(let E=r.segment||0;E>=0;E--)x[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:b},E>0&&(b+=o[E-1].dist(o[E]));for(let E=0;E<o.length;E++){const D=x[E];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(r,o,f,m,b,x,E,D,k,N,F,$){const Y=r.indexArray,J=r.layoutVertexArray,te=r.segments.prepareSegment(4*o.length,J,Y,this.canOverlap?x.sortKey:void 0),ae=this.glyphOffsetArray.length,he=te.vertexLength,_e=this.allowVerticalPlacement&&E===y.az.vertical?Math.PI/2:0,ue=x.text&&x.text.sections;for(let me=0;me<o.length;me++){const{tl:Pe,tr:Re,bl:We,br:lt,tex:ht,pixelOffsetTL:xt,pixelOffsetBR:Ot,minFontScaleX:Et,minFontScaleY:ft,glyphOffset:at,isSDF:Nt,sectionIndex:Vt}=o[me],Yt=te.vertexLength,qt=at[1];_p(J,D.x,D.y,Pe.x,qt+Pe.y,ht.x,ht.y,f,Nt,xt.x,xt.y,Et,ft),_p(J,D.x,D.y,Re.x,qt+Re.y,ht.x+ht.w,ht.y,f,Nt,Ot.x,xt.y,Et,ft),_p(J,D.x,D.y,We.x,qt+We.y,ht.x,ht.y+ht.h,f,Nt,xt.x,Ot.y,Et,ft),_p(J,D.x,D.y,lt.x,qt+lt.y,ht.x+ht.w,ht.y+ht.h,f,Nt,Ot.x,Ot.y,Et,ft),Hy(r.dynamicLayoutVertexArray,D,_e),Y.emplaceBack(Yt,Yt+2,Yt+1),Y.emplaceBack(Yt+1,Yt+2,Yt+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(at[0]),me!==o.length-1&&Vt===o[me+1].sectionIndex||r.programConfigurations.populatePaintArrays(J.length,x,x.index,{imagePositions:{},canonical:$,formattedSection:ue&&ue[Vt]})}r.placedSymbolArray.emplaceBack(D.x,D.y,ae,this.glyphOffsetArray.length-ae,he,k,N,D.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],E,0,!1,0,F)}_addCollisionDebugVertex(r,o,f,m,b,x){return o.emplaceBack(0,0),r.emplaceBack(f.x,f.y,m,b,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(r,o,f,m,b,x,E){const D=b.segments.prepareSegment(4,b.layoutVertexArray,b.indexArray),k=D.vertexLength,N=b.layoutVertexArray,F=b.collisionVertexArray,$=E.anchorX,Y=E.anchorY;this._addCollisionDebugVertex(N,F,x,$,Y,new A(r,o)),this._addCollisionDebugVertex(N,F,x,$,Y,new A(f,o)),this._addCollisionDebugVertex(N,F,x,$,Y,new A(f,m)),this._addCollisionDebugVertex(N,F,x,$,Y,new A(r,m)),D.vertexLength+=4;const J=b.indexArray;J.emplaceBack(k,k+1),J.emplaceBack(k+1,k+2),J.emplaceBack(k+2,k+3),J.emplaceBack(k+3,k),D.primitiveLength+=4}addDebugCollisionBoxes(r,o,f,m){for(let b=r;b<o;b++){const x=this.collisionBoxArray.get(b);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ag(Xe,uo.members,Ct),this.iconCollisionBox=new ag(Xe,uo.members,Ct);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(r,o,f,m,b,x,E,D,k){const N={};for(let F=o;F<f;F++){const $=r.get(F);N.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},N.textFeatureIndex=$.featureIndex;break}for(let F=m;F<b;F++){const $=r.get(F);N.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},N.verticalTextFeatureIndex=$.featureIndex;break}for(let F=x;F<E;F++){const $=r.get(F);N.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},N.iconFeatureIndex=$.featureIndex;break}for(let F=D;F<k;F++){const $=r.get(F);N.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},N.verticalIconFeatureIndex=$.featureIndex;break}return N}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const f=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,o){const f=r.placedSymbolArray.get(o),m=f.vertexStartIndex+4*f.numGlyphs;for(let b=f.vertexStartIndex;b<m;b+=4)r.indexArray.emplaceBack(b,b+2,b+1),r.indexArray.emplaceBack(b+1,b+2,b+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(r),f=Math.cos(r),m=[],b=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const D=this.symbolInstances.get(E);m.push(0|Math.round(o*D.anchorX+f*D.anchorY)),b.push(D.featureIndex)}return x.sort(((E,D)=>m[E]-m[D]||b[D]-b[E])),x}addToSortKeyRanges(r,o){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===o?f.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const f=this.symbolInstances.get(o);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((m,b,x)=>{m>=0&&x.indexOf(m)===b&&this.addIndicesForPlacedSymbol(this.text,m)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let og,sg;Lt("SymbolBucket",ud,{omit:["layers","collisionBoxArray","features","compareText"]}),ud.MAX_GLYPHS=65535,ud.addDynamicAttributes=Hy;var Xy={get paint(){return sg=sg||new Fn({"icon-opacity":new Gt(Ie.paint_symbol["icon-opacity"]),"icon-color":new Gt(Ie.paint_symbol["icon-color"]),"icon-halo-color":new Gt(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gt(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gt(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new Bt(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bt(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gt(Ie.paint_symbol["text-opacity"]),"text-color":new Gt(Ie.paint_symbol["text-color"],{runtimeType:ba,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Gt(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new Gt(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new Gt(Ie.paint_symbol["text-halo-blur"]),"text-translate":new Bt(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new Bt(Ie.paint_symbol["text-translate-anchor"])})},get layout(){return og=og||new Fn({"symbol-placement":new Bt(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new Bt(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bt(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gt(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bt(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bt(Ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Bt(Ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Bt(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bt(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bt(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gt(Ie.layout_symbol["icon-size"]),"icon-text-fit":new Bt(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bt(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gt(Ie.layout_symbol["icon-image"]),"icon-rotate":new Gt(Ie.layout_symbol["icon-rotate"]),"icon-padding":new Gt(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new Bt(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new Gt(Ie.layout_symbol["icon-offset"]),"icon-anchor":new Gt(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bt(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bt(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bt(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new Gt(Ie.layout_symbol["text-field"]),"text-font":new Gt(Ie.layout_symbol["text-font"]),"text-size":new Gt(Ie.layout_symbol["text-size"]),"text-max-width":new Gt(Ie.layout_symbol["text-max-width"]),"text-line-height":new Bt(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new Gt(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new Gt(Ie.layout_symbol["text-justify"]),"text-radial-offset":new Gt(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bt(Ie.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Gt(Ie.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Gt(Ie.layout_symbol["text-anchor"]),"text-max-angle":new Bt(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new Bt(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new Gt(Ie.layout_symbol["text-rotate"]),"text-padding":new Bt(Ie.layout_symbol["text-padding"]),"text-keep-upright":new Bt(Ie.layout_symbol["text-keep-upright"]),"text-transform":new Gt(Ie.layout_symbol["text-transform"]),"text-offset":new Gt(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new Bt(Ie.layout_symbol["text-allow-overlap"]),"text-overlap":new Bt(Ie.layout_symbol["text-overlap"]),"text-ignore-placement":new Bt(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new Bt(Ie.layout_symbol["text-optional"])})}};class Jv{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Ur,this.defaultValue=r}evaluate(r){if(r.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Lt("FormatSectionOverride",Jv,{omit:["defaultValue"]});class Su extends Sn{constructor(r,o){super(r,Xy,o)}recalculate(r,o){if(super.recalculate(r,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const b of f)m.indexOf(b)<0&&m.push(b);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,o,f,m){const b=this.layout.get(r).evaluate(o,{},f,m),x=this._unevaluatedLayout._values[r];return x.isDataDriven()||gl(x.value)||!b?b:(function(E,D){return D.replace(/{([^{}]+)}/g,((k,N)=>E&&N in E?String(E[N]):""))})(o.properties,b)}createBucket(r){return new ud(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Xy.paint.overridableProperties){if(!Su.hasPaintOverride(this.layout,r))continue;const o=this.paint.get(r),f=new Jv(o),m=new jf(f,o.property.specification);let b=null;b=o.value.kind==="constant"||o.value.kind==="source"?new Vi("source",m):new yl("composite",m,o.value.zoomStops),this.paint._values[r]=new Da(o.property,b,o.parameters)}}_handleOverridablePaintPropertyUpdate(r,o,f){return!(!this.layout||o.isDataDriven()||f.isDataDriven())&&Su.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,o){const f=r.get("text-field"),m=Xy.paint.properties[o];let b=!1;const x=E=>{for(const D of E)if(m.overrides&&m.overrides.hasOverride(D))return void(b=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ii)x(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const E=k=>{b||(k instanceof wa&&mn(k.value)===Go?x(k.value.sections):k instanceof oh?x(k.sections):k.eachChild(E))},D=f.value;D._styleExpression&&E(D._styleExpression.expression)}return b}}let e_;var t_={get paint(){return e_=e_||new Fn({"background-color":new Bt(Ie.paint_background["background-color"]),"background-pattern":new du(Ie.paint_background["background-pattern"]),"background-opacity":new Bt(Ie.paint_background["background-opacity"])})}};class Dr extends Sn{constructor(r,o){super(r,t_,o)}}class Wy extends Sn{constructor(r,o){super(r,{},o),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class lg{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ky={once:!0},cg=63710088e-1;class Cl{constructor(r,o){if(isNaN(r)||isNaN(o))throw new Error(`Invalid LngLat object: (${r}, ${o})`);if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Cl(Ft(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const o=Math.PI/180,f=this.lat*o,m=r.lat*o,b=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((r.lng-this.lng)*o);return cg*Math.acos(Math.min(b,1))}static convert(r){if(r instanceof Cl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Cl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Cl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hd=2*Math.PI*cg;function bp(s){return hd*Math.cos(s*Math.PI/180)}function r_(s){return(180+s)/360}function Qy(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function n_(s,r){return s/bp(r)}function i_(s){return 360*s-180}function xp(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Jy(s,r){return s*bp(xp(r))}class Hr{constructor(r,o,f=0){this.x=+r,this.y=+o,this.z=+f}static fromLngLat(r,o=0){const f=Cl.convert(r);return new Hr(r_(f.lng),Qy(f.lat),n_(o,f.lat))}toLngLat(){return new Cl(i_(this.x),xp(this.y))}toAltitude(){return Jy(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/hd*(r=xp(this.y),1/Math.cos(r*Math.PI/180));var r}}function ug(s,r,o){var f=2*Math.PI*6378137/256/Math.pow(2,o);return[s*f-2*Math.PI*6378137/2,r*f-2*Math.PI*6378137/2]}class Mi{constructor(r,o,f){if(!(function(m,b,x){return!(m<0||m>25||x<0||x>=Math.pow(2,m)||b<0||b>=Math.pow(2,m))})(r,o,f))throw new Error(`x=${o}, y=${f}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=o,this.y=f,this.key=fd(0,r,r,o,f)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,o,f){const m=(x=this.y,E=this.z,D=ug(256*(b=this.x),256*(x=Math.pow(2,E)-x-1),E),k=ug(256*(b+1),256*(x+1),E),D[0]+","+D[1]+","+k[0]+","+k[1]);var b,x,E,D,k;const N=(function(F,$,Y){let J,te="";for(let ae=F;ae>0;ae--)J=1<<ae-1,te+=($&J?1:0)+(Y&J?2:0);return te})(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const o=this.z-r.z;return o>0&&r.x===this.x>>o&&r.y===this.y>>o}getTilePoint(r){const o=Math.pow(2,this.z);return new A((r.x*o-this.x)*Be,(r.y*o-this.y)*Be)}toString(){return`${this.z}/${this.x}/${this.y}`}}class a_{constructor(r,o){this.wrap=r,this.canonical=o,this.key=fd(r,o.z,o.z,o.x,o.y)}}class Ra{constructor(r,o,f,m,b){if(this.terrainRttPosMatrix32f=null,r<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${f}`);this.overscaledZ=r,this.wrap=o,this.canonical=new Mi(f,+m,+b),this.key=fd(o,r,f,m,b)}clone(){return new Ra(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-r;return r>this.canonical.z?new Ra(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ra(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(r,o){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-r;return r>this.canonical.z?fd(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):fd(this.wrap*+o,r,r,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(r){if(r.wrap!==this.wrap||this.overscaledZ-r.overscaledZ<=0)return!1;if(r.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-r.canonical.z;return!(o<0)&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o}children(r){if(this.overscaledZ>=r)return[new Ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new Ra(o,this.wrap,o,f,m),new Ra(o,this.wrap,o,f+1,m),new Ra(o,this.wrap,o,f,m+1),new Ra(o,this.wrap,o,f+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Ra(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new a_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Hr(r.x-this.wrap,r.y))}normalizeCoordinates(r,o,f=8192){if(r>=0&&r<f&&o>=0&&o<f)return{tileID:this,x:r,y:o};const m=Math.floor(r/f),b=Math.floor(o/f),x=r-m*f,E=o-b*f,D=this.canonical.z,k=1<<D,N=this.canonical.y+b;if(N<0||N>=k)return null;let F=this.canonical.x+m,$=this.wrap;return F<0?($-=Math.ceil(-F/k),F=(F%k+k)%k):F>=k&&($+=Math.floor(F/k),F%=k),{tileID:new Ra(this.overscaledZ,$,D,F,N),x,y:E}}}function fd(s,r,o,f,m){(s*=2)<0&&(s=-1*s-1);const b=1<<o;return(b*b*s+b*m+f).toString(36)+o.toString(36)+r.toString(36)}function wp(s,r){return r?s.properties[r]:s.id}function e0(s,r){const o={id:s.id};if(r.removeAllProperties&&(delete s.removeProperties,delete s.addOrUpdateProperties,delete r.removeProperties),r.removeProperties)for(const f of r.removeProperties){const m=s.addOrUpdateProperties.findIndex((b=>b.key===f));m>-1&&s.addOrUpdateProperties.splice(m,1)}return(s.removeAllProperties||r.removeAllProperties)&&(o.removeAllProperties=!0),(s.removeProperties||r.removeProperties)&&(o.removeProperties=[...s.removeProperties||[],...r.removeProperties||[]]),(s.addOrUpdateProperties||r.addOrUpdateProperties)&&(o.addOrUpdateProperties=[...s.addOrUpdateProperties||[],...r.addOrUpdateProperties||[]]),(s.newGeometry||r.newGeometry)&&(o.newGeometry=r.newGeometry||s.newGeometry),o}function Sp(s){var r,o;if(!s)return{};const f={};return f.removeAll=s.removeAll,f.remove=new Set(s.remove||[]),f.add=new Map((r=s.add)===null||r===void 0?void 0:r.map((m=>[m.id,m]))),f.update=new Map((o=s.update)===null||o===void 0?void 0:o.map((m=>[m.id,m]))),f}Lt("CanonicalTileID",Mi),Lt("OverscaledTileID",Ra,{omit:["terrainRttPosMatrix32f"]});class Tu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(r){return this.minX=Math.min(this.minX,r.x),this.minY=Math.min(this.minY,r.y),this.maxX=Math.max(this.maxX,r.x),this.maxY=Math.max(this.maxY,r.y),this}expandBy(r){return this.minX-=r,this.minY-=r,this.maxX+=r,this.maxY+=r,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(r){return this.expandBy(-r)}map(r){const o=new Tu;return o.extend(r(new A(this.minX,this.minY))),o.extend(r(new A(this.maxX,this.minY))),o.extend(r(new A(this.minX,this.maxY))),o.extend(r(new A(this.maxX,this.maxY))),o}static fromPoints(r){const o=new Tu;for(const f of r)o.extend(f);return o}contains(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(r){return!this.empty()&&!r.empty()&&r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY}intersects(r){return!this.empty()&&!r.empty()&&r.minX<=this.maxX&&r.maxX>=this.minX&&r.minY<=this.maxY&&r.maxY>=this.minY}}class t0{constructor(r){this._stringToNumber={},this._numberToString=[];for(let o=0;o<r.length;o++){const f=r[o];this._stringToNumber[f]=o,this._numberToString[o]=f}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class hg{constructor(r,o,f,m,b){this.type="Feature",this._vectorTileFeature=r,this._x=f,this._y=m,this._z=o,this.properties=r.properties,this.id=b}projectPoint(r,o,f,m){return[360*(r.x+o)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(r.y+f)/m)*Math.PI))-90]}projectLine(r,o,f,m){return r.map((b=>this.projectPoint(b,o,f,m)))}get geometry(){if(this._geometry)return this._geometry;const r=this._vectorTileFeature,o=r.extent*Math.pow(2,this._z),f=r.extent*this._x,m=r.extent*this._y,b=r.loadGeometry();switch(r.type){case 1:{const x=[];for(const D of b)x.push(D[0]);const E=this.projectLine(x,f,m,o);this._geometry=x.length===1?{type:"Point",coordinates:E[0]}:{type:"MultiPoint",coordinates:E};break}case 2:{const x=b.map((E=>this.projectLine(E,f,m,o)));this._geometry=x.length===1?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x};break}case 3:{const x=Bv(b),E=[];for(const D of x)E.push(D.map((k=>this.projectLine(k,f,m,o))));this._geometry=E.length===1?{type:"Polygon",coordinates:E[0]}:{type:"MultiPolygon",coordinates:E};break}default:throw new Error(`unknown feature type: ${r.type}`)}return this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&o!=="_x"&&o!=="_y"&&o!=="_z"&&(r[o]=this[o]);return r}}class Eu{_name;dataBuffer;nullabilityBuffer;_size;constructor(r,o,f){this._name=r,this.dataBuffer=o,typeof f=="number"?this._size=f:(this.nullabilityBuffer=f,this._size=f.size())}getValue(r){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(r)?null:this.getValueFromBuffer(r)}has(r){return this.nullabilityBuffer&&this.nullabilityBuffer.get(r)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class fg extends Eu{}class dg extends fg{getValueFromBuffer(r){return this.dataBuffer[r]}}class r0 extends fg{getValueFromBuffer(r){return this.dataBuffer[r]}}class n0 extends Eu{delta;constructor(r,o,f,m){super(r,o,m),this.delta=f}}class i0 extends n0{constructor(r,o,f,m){super(r,Int32Array.of(o),f,m)}getValueFromBuffer(r){return this.dataBuffer[0]+r*this.delta}}class a0 extends Eu{constructor(r,o,f){super(r,Int32Array.of(o),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}class Au{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(r,o,f,m,b=4096){this._name=r,this._geometryVector=o,this._idVector=f,this._propertyVectors=m,this._extent=b}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(r){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((o=>[o.name,o])))),this.propertyVectorsMap.get(r)}*[Symbol.iterator](){const r=this.geometryVector[Symbol.iterator]();let o=0;for(;o<this.numFeatures;){let f;this.idVector&&(f=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(o)):this.idVector.getValue(o));const m=r?.next().value,b={};for(const x of this.propertyVectors){if(!x)continue;const E=x.name,D=x.getValue(o);D!==null&&(b[E]=D)}o++,yield{id:f,geometry:m,properties:b}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const r=[],o=this.geometryVector.getGeometries();for(let f=0;f<this.numFeatures;f++){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(f)):this.idVector.getValue(f));const b={coordinates:o[f],type:this.geometryVector.geometryType(f)},x={};for(const E of this.propertyVectors){if(!E)continue;const D=E.name,k=E.getValue(f);k!==null&&(x[D]=k)}r.push({id:m,geometry:b,properties:x})}return r}containsMaxSaveIntegerValues(r){return r instanceof dg||r instanceof a0&&r instanceof i0||r instanceof r0}}class o_{value;constructor(r){this.value=r}get(){return this.value}set(r){this.value=r}increment(){return this.value++}add(r){this.value+=r}}var qr,Dl,Ii,Gs,Mu,ia,En,vi,zo,La;function Oi(s,r,o){const f=new Int32Array(o);let m=0,b=r.get();for(let x=0;x<f.length;x++){let E=s[b++],D=127&E;E<128||(E=s[b++],D|=(127&E)<<7,E<128||(E=s[b++],D|=(127&E)<<14,E<128||(E=s[b++],D|=(127&E)<<21,E<128||(E=s[b++],D|=(15&E)<<28)))),f[m++]=D}return r.set(b),f}function pg(s,r,o){const f=new BigInt64Array(o);for(let m=0;m<f.length;m++)f[m]=s_(s,r);return f}function s_(s,r){let o=0n,f=0,m=r.get();for(;m<s.length;){const b=s[m++];if(o|=BigInt(127&b)<<BigInt(f),!(128&b))break;if(f+=7,f>=64)throw new Error("Varint too long")}return r.set(m),o}function Tp(s,r){let o,f;return f=s[r.get()],r.increment(),o=127&f,f<128?o:(f=s[r.get()],r.increment(),o|=(127&f)<<7,f<128?o:(f=s[r.get()],r.increment(),o|=(127&f)<<14,f<128?o:(f=s[r.get()],r.increment(),o|=(127&f)<<21,f<128?o:(f=s[r.get()],o|=(15&f)<<28,(function(m,b,x){let E,D;if(D=b[x.get()],x.increment(),E=(112&D)>>4,D<128||(D=b[x.get()],x.increment(),E|=(127&D)<<3,D<128)||(D=b[x.get()],x.increment(),E|=(127&D)<<10,D<128)||(D=b[x.get()],x.increment(),E|=(127&D)<<17,D<128)||(D=b[x.get()],x.increment(),E|=(127&D)<<24,D<128)||(D=b[x.get()],x.increment(),E|=(1&D)<<31,D<128))return 4294967296*E+(m>>>0);throw new Error("Expected varint not more than 10 bytes")})(o,s,r)))))}function Rr(s){return s>>>1^-(1&s)}function Ba(s){return s>>1n^-(1n&s)}function Mc(s){return s%2==1?(s+1)/-2:s/2}function Il(s,r,o){if(o===void 0){o=0;for(let b=0;b<r;b++)o+=s[b]}const f=new Int32Array(o);let m=0;for(let b=0;b<r;b++){const x=s[b];f.fill(s[b+r],m,m+x),m+=x}return f}function l_(s,r,o){if(o===void 0){o=0;for(let b=0;b<r;b++)o+=Number(s[b])}const f=new BigInt64Array(o);let m=0;for(let b=0;b<r;b++){const x=Number(s[b]);f.fill(s[b+r],m,m+x),m+=x}return f}function c_(s,r,o){const f=new Float64Array(o);let m=0;for(let b=0;b<r;b++){const x=s[b];f.fill(s[b+r],m,m+x),m+=x}return f}function Gh(s){const r=s.length/4*4;let o=1;if(r>=4)for(let f=s[0];o<r-4;o+=4)f=s[o]+=f,f=s[o+1]+=f,f=s[o+2]+=f,f=s[o+3]+=f;for(;o!=s.length;)s[o]+=s[o-1],++o}(function(s){s.NONE="NONE",s.DELTA="DELTA",s.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",s.RLE="RLE",s.MORTON="MORTON",s.PDE="PDE"})(qr||(qr={})),(function(s){s.NONE="NONE",s.FAST_PFOR="FAST_PFOR",s.VARINT="VARINT",s.ALP="ALP"})(Dl||(Dl={})),(function(s){s.PRESENT="PRESENT",s.DATA="DATA",s.OFFSET="OFFSET",s.LENGTH="LENGTH"})(Ii||(Ii={}));class mg{_dictionaryType;_offsetType;_lengthType;constructor(r,o,f){this._dictionaryType=r,this._offsetType=o,this._lengthType=f}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function aa(s,r){const o=(function(f,m){const b=f[m.get()],x=Object.values(Ii)[b>>4];let E=null;switch(x){case Ii.DATA:E=new mg(Object.values(Gs)[15&b]);break;case Ii.OFFSET:E=new mg(null,Object.values(Mu)[15&b]);break;case Ii.LENGTH:E=new mg(null,null,Object.values(ia)[15&b])}m.increment();const D=f[m.get()],k=Object.values(qr)[D>>5],N=Object.values(qr)[D>>2&7],F=Object.values(Dl)[3&D];m.increment();const $=Oi(f,m,2),Y=$[0];return{physicalStreamType:x,logicalStreamType:E,logicalLevelTechnique1:k,logicalLevelTechnique2:N,physicalLevelTechnique:F,numValues:Y,byteLength:$[1],decompressedCount:Y}})(s,r);return o.logicalLevelTechnique1===qr.MORTON?(function(f,m,b){const x=Oi(m,b,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:f.decompressedCount,numBits:x[0],coordinateShift:x[1]}})(o,s,r):qr.RLE!==o.logicalLevelTechnique1&&qr.RLE!==o.logicalLevelTechnique2||Dl.NONE===o.physicalLevelTechnique?o:(function(f,m,b){const x=Oi(m,b,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:x[1],runs:x[0],numRleValues:x[1]}})(o,s,r)}(function(s){s.NONE="NONE",s.SINGLE="SINGLE",s.SHARED="SHARED",s.VERTEX="VERTEX",s.MORTON="MORTON",s.FSST="FSST"})(Gs||(Gs={})),(function(s){s.VERTEX="VERTEX",s.INDEX="INDEX",s.STRING="STRING",s.KEY="KEY"})(Mu||(Mu={})),(function(s){s.VAR_BINARY="VAR_BINARY",s.GEOMETRIES="GEOMETRIES",s.PARTS="PARTS",s.RINGS="RINGS",s.TRIANGLES="TRIANGLES",s.SYMBOL="SYMBOL",s.DICTIONARY="DICTIONARY"})(ia||(ia={})),(function(s){s[s.FLAT=0]="FLAT",s[s.CONST=1]="CONST",s[s.SEQUENCE=2]="SEQUENCE",s[s.DICTIONARY=3]="DICTIONARY",s[s.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(En||(En={}));class qs{values;_size;constructor(r,o){this.values=r,this._size=o}get(r){const o=Math.floor(r/8);return(this.values[o]>>r%8&1)==1}set(r,o){const f=Math.floor(r/8);this.values[f]=this.values[f]|(o?1:0)<<r%8}getInt(r){const o=Math.floor(r/8);return this.values[o]>>r%8&1}size(){return this._size}getBuffer(){return this.values}}function gg(s,r,o){if(!r)return s;const f=r.size(),m=new s.constructor(f);let b=0;for(let x=0;x<f;x++)m[x]=r.get(x)?s[b++]:o;return m}function oa(s,r,o,f,m,b){return(function(x,E,D,k,N){switch(E.logicalLevelTechnique1){case qr.DELTA:if(E.logicalLevelTechnique2===qr.RLE){const F=E;if(!N)return(function($,Y,J){const te=new Int32Array(J);let ae=0,he=0;for(let _e=0;_e<Y;_e++){const ue=$[_e],me=Rr($[_e+Y]);for(let Pe=0;Pe<ue;Pe++)he+=me,te[ae++]=he}return te})(x,F.runs,F.numRleValues);x=Il(x,F.runs,F.numRleValues)}(function(F){F[0]=Rr(F[0]);const $=F.length/4*4;let Y=1;if($>=4)for(;Y<$-4;Y+=4){const J=F[Y+1],te=F[Y+2],ae=F[Y+3];F[Y]=Rr(F[Y])+F[Y-1],F[Y+1]=Rr(J)+F[Y],F[Y+2]=Rr(te)+F[Y+1],F[Y+3]=Rr(ae)+F[Y+2]}for(;Y!=F.length;++Y)F[Y]=Rr(F[Y])+F[Y-1]})(x);break;case qr.RLE:x=(function(F,$,Y){return Y?(function(J,te,ae){if(ae===void 0){ae=0;for(let ue=0;ue<te;ue++)ae+=J[ue]}const he=new Int32Array(ae);let _e=0;for(let ue=0;ue<te;ue++){const me=J[ue];let Pe=J[ue+te];Pe=Rr(Pe),he.fill(Pe,_e,_e+me),_e+=me}return he})(F,$.runs,$.numRleValues):Il(F,$.runs,$.numRleValues)})(x,E,D);break;case qr.MORTON:Gh(x);break;case qr.COMPONENTWISE_DELTA:(function(F){if(F.length<2)return;F[0]=Rr(F[0]),F[1]=Rr(F[1]);const $=F.length/4*4;let Y=2;if($>=4)for(;Y<$-4;Y+=4){const J=F[Y+1],te=F[Y+2],ae=F[Y+3];F[Y]=Rr(F[Y])+F[Y-2],F[Y+1]=Rr(J)+F[Y-1],F[Y+2]=Rr(te)+F[Y],F[Y+3]=Rr(ae)+F[Y+1]}for(;Y!=F.length;Y+=2)F[Y]=Rr(F[Y])+F[Y-2],F[Y+1]=Rr(F[Y+1])+F[Y-1]})(x);break;case qr.NONE:D&&(function(F){for(let $=0;$<F.length;$++)F[$]=Rr(F[$])})(x);break;default:throw new Error(`The specified Logical level technique is not supported: ${E.logicalLevelTechnique1}`)}return N?gg(x,N,0):x})(yg(s,r,o),o,f,0,b)}function Pu(s,r,o){return(function(f,m){if(m.logicalLevelTechnique1===qr.DELTA&&m.logicalLevelTechnique2===qr.NONE)return(function(b){const x=new Int32Array(b.length+1);x[0]=0,x[1]=Rr(b[0]);let E=x[1];for(let D=2;D!=x.length;++D)E+=Rr(b[D-1]),x[D]=x[D-1]+E;return new Uint32Array(x)})(f);if(m.logicalLevelTechnique1===qr.RLE&&m.logicalLevelTechnique2===qr.NONE)return(function(b,x,E){const D=new Int32Array(E+1);D[0]=0;let k=1,N=D[0];for(let F=0;F<x;F++){const $=b[F],Y=b[F+x];for(let J=k;J<k+$;J++)D[J]=Y+N,N=D[J];k+=$}return new Uint32Array(D)})(f,m.runs,m.numRleValues);if(m.logicalLevelTechnique1===qr.NONE&&m.logicalLevelTechnique2===qr.NONE){(function(x){let E=0;for(let D=0;D<x.length;D++)x[D]+=E,E=x[D]})(f);const b=new Uint32Array(m.numValues+1);return b[0]=0,b.set(f,1),b}if(m.logicalLevelTechnique1===qr.DELTA&&m.logicalLevelTechnique2===qr.RLE){const b=(function(x,E,D){const k=new Int32Array(D+1);k[0]=0;let N=1,F=k[0];for(let $=0;$<E;$++){const Y=x[$];let J=x[$+E];J=Rr(J);for(let te=N;te<N+Y;te++)k[te]=J+F,F=k[te];N+=Y}return new Uint32Array(k)})(f,m.runs,m.numRleValues);return Gh(b),b}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(yg(s,r,o),o)}function yg(s,r,o){const f=o.physicalLevelTechnique;if(f===Dl.FAST_PFOR)return(function(){throw new Error("FastPFor is not implemented yet.")})();if(f===Dl.VARINT)return Oi(s,r,o.numValues);if(f===Dl.NONE){const m=r.get();r.add(o.byteLength);const b=s.subarray(m,r.get());return new Int32Array(b)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function o0(s,r,o,f){const m=yg(s,r,o);if(m.length===1){const b=m[0];return f?Rr(b):b}return f?(function(b){return Rr(b[1])})(m):(function(b){return b[1]})(m)}function s0(s,r,o){return(function(f){if(f.length==2){const m=Rr(f[1]);return[m,m]}return[Rr(f[2]),Rr(f[3])]})(yg(s,r,o))}function qh(s,r,o){return(function(f){if(f.length==2){const m=Ba(f[1]);return[m,m]}return[Ba(f[2]),Ba(f[3])]})(pg(s,r,o.numValues))}function dd(s,r,o,f,m){return(function(b,x,E,D){switch(x.logicalLevelTechnique1){case qr.DELTA:if(x.logicalLevelTechnique2===qr.RLE){const k=x;if(!D)return(function(N,F,$){const Y=new BigInt64Array($);let J=0,te=0n;for(let ae=0;ae<F;ae++){const he=Number(N[ae]),_e=Ba(N[ae+F]);for(let ue=0;ue<he;ue++)te+=_e,Y[J++]=te}return Y})(b,k.runs,k.numRleValues);b=l_(b,k.runs,k.numRleValues)}(function(k){k[0]=Ba(k[0]);const N=k.length/4*4;let F=1;if(N>=4)for(;F<N-4;F+=4){const $=k[F+1],Y=k[F+2],J=k[F+3];k[F]=Ba(k[F])+k[F-1],k[F+1]=Ba($)+k[F],k[F+2]=Ba(Y)+k[F+1],k[F+3]=Ba(J)+k[F+2]}for(;F!=k.length;++F)k[F]=Ba(k[F])+k[F-1]})(b);break;case qr.RLE:b=(function(k,N,F){return F?(function($,Y,J){if(J===void 0){J=0;for(let he=0;he<Y;he++)J+=Number($[he])}const te=new BigInt64Array(J);let ae=0;for(let he=0;he<Y;he++){const _e=Number($[he]);let ue=$[he+Y];ue=Ba(ue),te.fill(ue,ae,ae+_e),ae+=_e}return te})(k,N.runs,N.numRleValues):l_(k,N.runs,N.numRleValues)})(b,x,E);break;case qr.NONE:E&&(function(k){for(let N=0;N<k.length;N++)k[N]=Ba(k[N])})(b);break;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}return D?gg(b,D,0n):b})(pg(s,r,o.numValues),o,f,m)}function l0(s,r,o,f){const m=pg(s,r,o.numValues);if(m.length===1){const b=m[0];return f?Ba(b):b}return f?(function(b){return Ba(b[1])})(m):(function(b){return b[1]})(m)}function vg(s,r,o,f){const m=s.logicalLevelTechnique1;if(m===qr.RLE)return s.runs===1?En.CONST:En.FLAT;if(m!==qr.DELTA||s.logicalLevelTechnique2!==qr.RLE)return s.numValues===1?En.CONST:En.FLAT;const b=r instanceof qs?r.size():r;if(s.numRleValues!==b)return En.FLAT;if(s.runs===1)return En.SEQUENCE;if(s.runs!==2)return s.numValues===1?En.CONST:En.FLAT;const x=f.get();let E;if(s.physicalLevelTechnique===Dl.VARINT)E=Oi(o,f,4);else{const D=f.get();E=new Int32Array(o.buffer,o.byteOffset+D,4)}return f.set(x),E[2]===2&&E[3]===2?En.SEQUENCE:s.numValues===1?En.CONST:En.FLAT}class $h extends fg{getValueFromBuffer(r){return this.dataBuffer[r]}}class pd extends n0{constructor(r,o,f,m){super(r,BigInt64Array.of(o),f,m)}getValueFromBuffer(r){return this.dataBuffer[0]+BigInt(r)*this.delta}}class Zh{_geometryOffsets;_partOffsets;_ringOffsets;constructor(r,o,f){this._geometryOffsets=r,this._partOffsets=o,this._ringOffsets=f}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function md(s,r,o){return{x:_g(s,r)-o,y:_g(s>>1,r)-o}}function _g(s,r){let o=0;for(let f=0;f<r;f++)o|=(s&1<<2*f)>>f;return o}(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON",s[s.MULTIPOINT=3]="MULTIPOINT",s[s.MULTILINESTRING=4]="MULTILINESTRING",s[s.MULTIPOLYGON=5]="MULTIPOLYGON"})(vi||(vi={})),(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON"})(zo||(zo={})),(function(s){s[s.MORTON=0]="MORTON",s[s.VEC_2=1]="VEC_2",s[s.VEC_3=2]="VEC_3"})(La||(La={}));class c0{createPoint(r){return[[r]]}createMultiPoint(r){return r.map((o=>[o]))}createLineString(r){return[r]}createMultiLineString(r){return r}createPolygon(r,o){return[r].concat(o)}createMultiPolygon(r){return r.flat()}}function Ep(s){const r=new Array(s.numGeometries);let o=1,f=1,m=1,b=0;const x=new c0;let E=0,D=0;const k=s.mortonSettings,N=s.topologyVector,F=N.geometryOffsets,$=N.partOffsets,Y=N.ringOffsets,J=s.vertexOffsets,te=s.containsPolygonGeometry(),ae=s.vertexBuffer;for(let he=0;he<s.numGeometries;he++){const _e=s.geometryType(he);if(_e===vi.POINT){if(J&&J.length!==0)if(s.vertexBufferType===La.VEC_2){const ue=2*J[D++],me=new A(ae[ue],ae[ue+1]);r[b++]=x.createPoint(me)}else{const ue=md(ae[J[D++]],k.numBits,k.coordinateShift),me=new A(ue.x,ue.y);r[b++]=x.createPoint(me)}else{const ue=new A(ae[E++],ae[E++]);r[b++]=x.createPoint(ue)}F&&m++,$&&o++,Y&&f++}else if(_e===vi.MULTIPOINT){const ue=F[m]-F[m-1];m++;const me=new Array(ue);if(J&&J.length!==0){for(let Pe=0;Pe<ue;Pe++){const Re=2*J[D++];me[Pe]=new A(ae[Re],ae[Re+1])}r[b++]=x.createMultiPoint(me)}else{for(let Pe=0;Pe<ue;Pe++){const Re=ae[E++],We=ae[E++];me[Pe]=new A(Re,We)}r[b++]=x.createMultiPoint(me)}}else if(_e===vi.LINESTRING){let ue,me=0;te?(me=Y[f]-Y[f-1],f++):me=$[o]-$[o-1],o++,J&&J.length!==0?(ue=s.vertexBufferType===La.VEC_2?u0(ae,J,D,me,!1):Pp(ae,J,D,me,!1,k),D+=me):(ue=xg(ae,E,me,!1),E+=2*me),r[b++]=x.createLineString(ue),F&&m++}else if(_e===vi.POLYGON){const ue=$[o]-$[o-1];o++;const me=new Array(ue-1);let Pe=Y[f]-Y[f-1];if(f++,J&&J.length!==0){const Re=s.vertexBufferType===La.VEC_2?Mp(ae,J,D,Pe):bg(ae,J,D,Pe,0,k);D+=Pe;for(let We=0;We<me.length;We++)Pe=Y[f]-Y[f-1],f++,me[We]=s.vertexBufferType===La.VEC_2?Mp(ae,J,D,Pe):bg(ae,J,D,Pe,0,k),D+=Pe;r[b++]=x.createPolygon(Re,me)}else{const Re=Ap(ae,E,Pe);E+=2*Pe;for(let We=0;We<me.length;We++)Pe=Y[f]-Y[f-1],f++,me[We]=Ap(ae,E,Pe),E+=2*Pe;r[b++]=x.createPolygon(Re,me)}F&&m++}else if(_e===vi.MULTILINESTRING){const ue=F[m]-F[m-1];m++;const me=new Array(ue);if(J&&J.length!==0){for(let Pe=0;Pe<ue;Pe++){let Re=0;te?(Re=Y[f]-Y[f-1],f++):Re=$[o]-$[o-1],o++;const We=s.vertexBufferType===La.VEC_2?u0(ae,J,D,Re,!1):Pp(ae,J,D,Re,!1,k);me[Pe]=We,D+=Re}r[b++]=x.createMultiLineString(me)}else{for(let Pe=0;Pe<ue;Pe++){let Re=0;te?(Re=Y[f]-Y[f-1],f++):Re=$[o]-$[o-1],o++,me[Pe]=xg(ae,E,Re,!1),E+=2*Re}r[b++]=x.createMultiLineString(me)}}else{if(_e!==vi.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const ue=F[m]-F[m-1];m++;const me=new Array(ue);let Pe=0;if(J&&J.length!==0){for(let Re=0;Re<ue;Re++){const We=$[o]-$[o-1];o++;const lt=new Array(We-1);Pe=Y[f]-Y[f-1],f++;const ht=s.vertexBufferType===La.VEC_2?Mp(ae,J,D,Pe):bg(ae,J,D,Pe,0,k);D+=Pe;for(let xt=0;xt<lt.length;xt++)Pe=Y[f]-Y[f-1],f++,lt[xt]=s.vertexBufferType===La.VEC_2?Mp(ae,J,D,Pe):bg(ae,J,D,Pe,0,k),D+=Pe;me[Re]=x.createPolygon(ht,lt)}r[b++]=x.createMultiPolygon(me)}else{for(let Re=0;Re<ue;Re++){const We=$[o]-$[o-1];o++;const lt=new Array(We-1);Pe=Y[f]-Y[f-1],f++;const ht=Ap(ae,E,Pe);E+=2*Pe;for(let xt=0;xt<lt.length;xt++){const Ot=Y[f]-Y[f-1];f++,lt[xt]=Ap(ae,E,Ot),E+=2*Ot}me[Re]=x.createPolygon(ht,lt)}r[b++]=x.createMultiPolygon(me)}}}}return r}function Ap(s,r,o){return xg(s,r,o,!0)}function Mp(s,r,o,f){return u0(s,r,o,f,!0)}function bg(s,r,o,f,m,b){return Pp(s,r,o,f,!0,b)}function xg(s,r,o,f){const m=new Array(f?o+1:o);for(let b=0;b<2*o;b+=2)m[b/2]=new A(s[r+b],s[r+b+1]);return f&&(m[m.length-1]=m[0]),m}function u0(s,r,o,f,m){const b=new Array(m?f+1:f);for(let x=0;x<2*f;x+=2){const E=2*r[o+x/2];b[x/2]=new A(s[E],s[E+1])}return m&&(b[b.length-1]=b[0]),b}function Pp(s,r,o,f,m,b){const x=new Array(m?f+1:f);for(let E=0;E<f;E++){const D=md(s[r[o+E]],b.numBits,b.coordinateShift);x[E]=new A(D.x,D.y)}return m&&(x[x.length-1]=x[0]),x}class u_{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(r,o,f,m,b){this._vertexBufferType=r,this._topologyVector=o,this._vertexOffsets=f,this._vertexBuffer=m,this._mortonSettings=b}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const r=Ep(this);let o=0;for(;o<this.numGeometries;)yield{coordinates:r[o],type:this.geometryType(o)},o++}getSimpleEncodedVertex(r){const o=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[o],this.vertexBuffer[o+1]]}getVertex(r){if(this.vertexOffsets&&this.mortonSettings){const f=md(this.vertexBuffer[this.vertexOffsets[r]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[f.x,f.y]}const o=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[o],this.vertexBuffer[o+1]]}getGeometries(){return Ep(this)}get mortonSettings(){return this._mortonSettings}}class Cp extends u_{_numGeometries;_geometryType;constructor(r,o,f,m,b,x,E){super(f,m,b,x,E),this._numGeometries=r,this._geometryType=o}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===vi.POLYGON||this._geometryType===vi.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Dp extends u_{_geometryTypes;constructor(r,o,f,m,b,x){super(r,f,m,b,x),this._geometryTypes=o}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let r=0;r<this.numGeometries;r++)if(this.geometryType(r)===vi.POLYGON||this.geometryType(r)===vi.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Ip{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(r,o,f,m){this._triangleOffsets=r,this._indexBuffer=o,this._vertexBuffer=f,this._topologyVector=m}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const r=new Array(this.numGeometries),o=this._topologyVector,f=o.partOffsets,m=o.ringOffsets,b=o.geometryOffsets;let x=0,E=1,D=1,k=1;for(let N=0;N<this.numGeometries;N++)switch(this.geometryType(N)){case vi.POLYGON:{const F=f[E]-f[E-1];E++;const $=[];for(let Y=0;Y<F;Y++){const J=m[D]-m[D-1];D++;const te=[];for(let ae=0;ae<J;ae++){const he=this._vertexBuffer[x++],_e=this._vertexBuffer[x++];te.push(new A(he,_e))}te.length>0&&te.push(te[0]),$.push(te)}r[N]=$,b&&k++}break;case vi.MULTIPOLYGON:{const F=b[k]-b[k-1];k++;const $=[];for(let Y=0;Y<F;Y++){const J=f[E]-f[E-1];E++;for(let te=0;te<J;te++){const ae=m[D]-m[D-1];D++;const he=[];for(let _e=0;_e<ae;_e++){const ue=this._vertexBuffer[x++],me=this._vertexBuffer[x++];he.push(new A(ue,me))}he.length>0&&he.push(he[0]),$.push(he)}}r[N]=$}}return r}[Symbol.iterator](){return null}}function h_(s,r,o,f,m,b){return new Op(s,r,o,f,m,b)}class Op extends Ip{_numGeometries;_geometryType;constructor(r,o,f,m,b,x){super(f,m,b,x),this._numGeometries=r,this._geometryType=o}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function f_(s,r,o,f,m){return new d_(s,r,o,f,m)}class d_ extends Ip{_geometryTypes;constructor(r,o,f,m,b){super(o,f,m,b),this._geometryTypes=r}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function p_(s,r,o,f,m){const b=aa(s,o);let x=null,E=null,D=null,k=null;if(vg(b,f,s,o)===En.CONST){const _e=o0(s,o,b,!1);let ue=null,me=null,Pe=null,Re=null;for(let We=0;We<r-1;We++){const lt=aa(s,o);switch(lt.physicalStreamType){case Ii.LENGTH:switch(lt.logicalStreamType.lengthType){case ia.GEOMETRIES:ue=Pu(s,o,lt);break;case ia.PARTS:me=Pu(s,o,lt);break;case ia.RINGS:Pe=Pu(s,o,lt);break;case ia.TRIANGLES:Re=Pu(s,o,lt)}break;case Ii.OFFSET:switch(lt.logicalStreamType.offsetType){case Mu.VERTEX:x=oa(s,o,lt,!1);break;case Mu.INDEX:k=oa(s,o,lt,!1)}break;case Ii.DATA:Gs.VERTEX===lt.logicalStreamType.dictionaryType?E=oa(s,o,lt,!0):(D={numBits:lt.numBits,coordinateShift:lt.coordinateShift},E=oa(s,o,lt,!1))}}return k!==null?ue!=null||me!=null?h_(f,_e,Re,k,E,new Zh(ue,me,Pe)):h_(f,_e,Re,k,E):D===null?(function(We,lt,ht,xt,Ot){return new Cp(We,lt,La.VEC_2,ht,xt,Ot)})(f,_e,new Zh(ue,me,Pe),x,E):(function(We,lt,ht,xt,Ot,Et){return new Cp(We,lt,La.MORTON,ht,xt,Ot,Et)})(f,_e,new Zh(ue,me,Pe),x,E,D)}const N=oa(s,o,b,!1);let F=null,$=null,Y=null,J=null;for(let _e=0;_e<r-1;_e++){const ue=aa(s,o);switch(ue.physicalStreamType){case Ii.LENGTH:switch(ue.logicalStreamType.lengthType){case ia.GEOMETRIES:F=oa(s,o,ue,!1);break;case ia.PARTS:$=oa(s,o,ue,!1);break;case ia.RINGS:Y=oa(s,o,ue,!1);break;case ia.TRIANGLES:J=Pu(s,o,ue)}break;case Ii.OFFSET:switch(ue.logicalStreamType.offsetType){case Mu.VERTEX:x=oa(s,o,ue,!1);break;case Mu.INDEX:k=oa(s,o,ue,!1)}break;case Ii.DATA:Gs.VERTEX===ue.logicalStreamType.dictionaryType?E=oa(s,o,ue,!0):(D={numBits:ue.numBits,coordinateShift:ue.coordinateShift},E=oa(s,o,ue,!1))}}let te=null,ae=null,he=null;return F!==null?(te=wg(N,F,2),$!==null&&Y!==null?(ae=h0(N,te,$,!1),he=(function(_e,ue,me,Pe){const Re=new Uint32Array(me[me.length-1]+1);let We=0;Re[0]=We;let lt=1,ht=1,xt=0;for(let Ot=0;Ot<_e.length;Ot++){const Et=_e[Ot],ft=ue[Ot+1]-ue[Ot];if(Et!==0&&Et!==3)for(let at=0;at<ft;at++){const Nt=me[lt]-me[lt-1];lt++;for(let Vt=0;Vt<Nt;Vt++)We=Re[ht++]=We+Pe[xt++]}else for(let at=0;at<ft;at++)Re[ht++]=++We,lt++}return Re})(N,te,ae,Y)):$!==null&&(ae=(function(_e,ue,me){const Pe=new Uint32Array(ue[ue.length-1]+1);let Re=0;Pe[0]=Re;let We=1,lt=0;for(let ht=0;ht<_e.length;ht++){const xt=_e[ht],Ot=ue[ht+1]-ue[ht];if(xt===4||xt===1)for(let Et=0;Et<Ot;Et++)Re=Pe[We++]=Re+me[lt++];else for(let Et=0;Et<Ot;Et++)Pe[We++]=++Re}return Pe})(N,te,$))):$!==null&&Y!==null?(ae=wg(N,$,1),he=h0(N,ae,Y,!0)):$!==null&&(ae=wg(N,$,0)),k!==null&&ae===null?f_(N,J,k,E):k!==null?f_(N,J,k,E,new Zh(te,ae,he)):D===null?(function(_e,ue,me,Pe){return new Dp(La.VEC_2,_e,ue,me,Pe)})(N,new Zh(te,ae,he),x,E):(function(_e,ue,me,Pe,Re){return new Dp(La.MORTON,_e,ue,me,Pe,Re)})(N,new Zh(te,ae,he),x,E,D)}function wg(s,r,o){const f=new Uint32Array(s.length+1);let m=0;f[0]=m;let b=0;for(let x=0;x<s.length;x++)m=f[x+1]=m+(s[x]>o?r[b++]:1);return f}function h0(s,r,o,f){const m=new Uint32Array(r[r.length-1]+1);let b=0;m[0]=b;let x=1,E=0;for(let D=0;D<s.length;D++){const k=s[D],N=r[D+1]-r[D];if(k===5||k===2||f&&(k===4||k===1))for(let F=0;F<N;F++)b=m[x++]=b+o[E++];else for(let F=0;F<N;F++)m[x++]=++b}return m}class f0 extends Eu{dataVector;constructor(r,o,f){super(r,o.getBuffer(),f),this.dataVector=o}getValueFromBuffer(r){return this.dataVector.get(r)}}class m_ extends fg{getValueFromBuffer(r){return this.dataBuffer[r]}}class d0 extends Eu{constructor(r,o,f){super(r,BigInt64Array.of(o),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}function Cu(s,r,o,f,m){const b=(function(x,E,D,k){const N=new Uint8Array(E);let F=0;const $=k.get()+D;for(;F<E&&!(k.get()>=$);){const Y=x[k.increment()];if(Y<=127){const J=Y+3,te=x[k.increment()],ae=Math.min(F+J,E);N.fill(te,F,ae),F=ae}else{const J=256-Y;for(let te=0;te<J&&F<E;te++)N[F++]=x[k.increment()]}}return k.set($),N})(s,Math.ceil(r/8),o,f);return m?(function(x,E,D){if(!D)return x;const k=D.size(),N=new qs(x,E),F=new qs(new Uint8Array(Math.ceil(k/8)),k);let $=0;for(let Y=0;Y<k;Y++){const J=!!D.get(Y)&&N.get($++);F.set(Y,J)}return F.getBuffer()})(b,r,m):b}const Hx=new TextDecoder;function p0(s,r,o){return o-r>=12?Hx.decode(s.subarray(r,o)):(function(f,m,b){let x="",E=m;for(;E<b;){const D=f[E];let k,N,F,$=null,Y=D>239?4:D>223?3:D>191?2:1;if(E+Y>b)break;Y===1?D<128&&($=D):Y===2?(k=f[E+1],(192&k)==128&&($=(31&D)<<6|63&k,$<=127&&($=null))):Y===3?(k=f[E+1],N=f[E+2],(192&k)==128&&(192&N)==128&&($=(15&D)<<12|(63&k)<<6|63&N,($<=2047||$>=55296&&$<=57343)&&($=null))):Y===4&&(k=f[E+1],N=f[E+2],F=f[E+3],(192&k)==128&&(192&N)==128&&(192&F)==128&&($=(15&D)<<18|(63&k)<<12|(63&N)<<6|63&F,($<=65535||$>=1114112)&&($=null))),$===null?($=65533,Y=1):$>65535&&($-=65536,x+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),x+=String.fromCharCode($),E+=Y}return x})(s,r,o)}class zp extends Eu{offsetBuffer;constructor(r,o,f,m){super(r,f,m),this.offsetBuffer=o}}class Sg extends zp{textEncoder;constructor(r,o,f,m){super(r,o,f,m??o.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(r){return p0(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class Pc extends zp{indexBuffer;textEncoder;constructor(r,o,f,m,b){super(r,f,m,b??o.length),this.indexBuffer=o,this.indexBuffer=o,this.textEncoder=new TextEncoder}getValueFromBuffer(r){const o=this.indexBuffer[r];return p0(this.dataBuffer,this.offsetBuffer[o],this.offsetBuffer[o+1])}}class Tg extends zp{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(r,o,f,m,b,x,E){super(r,f,m,E),this.indexBuffer=o,this.symbolOffsetBuffer=b,this.symbolTableBuffer=x,this.textEncoder=new TextEncoder}getValueFromBuffer(r){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(f,m,b){const x=[],E=new Array(m.length).fill(0);for(let D=1;D<m.length;D++)E[D]=E[D-1]+m[D-1];for(let D=0;D<b.length;D++)if(b[D]===255)x.push(b[++D]);else{const k=m[b[D]],N=E[b[D]];for(let F=0;F<k;F++)x.push(f[N+F])}return new Uint8Array(x)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const o=this.indexBuffer[r];return p0(this.decodedDictionary,this.offsetBuffer[o],this.offsetBuffer[o+1])}offsetToLengthBuffer(r){const o=new Uint32Array(r.length-1);let f=r[0];for(let m=1;m<r.length;m++){const b=r[m];o[m-1]=b-f,f=b}return o}}function g_(s,r,o,f,m,b){return o.type==="scalarType"?(function(x,E,D,k,N,F){let $=null,Y=0;if(x===0)return null;if(F.nullable){const te=aa(E,D);Y=te.numValues;const ae=D.get(),he=Cu(E,Y,te.byteLength,D);D.set(ae+te.byteLength),$=new qs(he,te.numValues)}const J=$??k;switch(N.physicalType){case 4:case 3:return(function(te,ae,he,_e,ue){const me=aa(te,ae),Pe=vg(me,ue,te,ae),Re=_e.physicalType===3;if(Pe===En.FLAT){const We=oa(te,ae,me,Re,0,Hh(ue)?ue:void 0);return new dg(he.name,We,ue)}if(Pe===En.SEQUENCE){const We=s0(te,ae,me);return new i0(he.name,We[0],We[1],me.numRleValues)}{const We=o0(te,ae,me,Re);return new a0(he.name,We,ue)}})(E,D,F,N,J);case 9:return(function(te,ae,he,_e,ue){let me=null,Pe=null,Re=null,We=null,lt=null,ht=null,xt=null,Ot=null;for(let Et=0;Et<_e;Et++){const ft=aa(ae,he);if(ft.byteLength!==0)switch(ft.physicalStreamType){case Ii.PRESENT:{const at=Cu(ae,ft.numValues,ft.byteLength,he);ht=new qs(at,ft.numValues);break}case Ii.OFFSET:Pe=oa(ae,he,ft,!1,0,ue!=null||ht!=null?ue??ht:void 0);break;case Ii.LENGTH:{const at=Pu(ae,he,ft);ia.DICTIONARY===ft.logicalStreamType.lengthType?me=at:ia.SYMBOL===ft.logicalStreamType.lengthType?We=at:xt=at;break}case Ii.DATA:{const at=ae.subarray(he.get(),he.get()+ft.byteLength);he.add(ft.byteLength);const Nt=ft.logicalStreamType.dictionaryType;Gs.FSST===Nt?lt=at:Gs.SINGLE===Nt||Gs.SHARED===Nt?Re=at:Gs.NONE===Nt&&(Ot=at);break}}}return(function(Et,ft,at,Nt,Vt,Yt,qt){return ft?new Tg(Et,at,Nt,Vt,Yt,ft,qt):null})(te,lt,Pe,me,Re,We,ue??ht)??(function(Et,ft,at,Nt,Vt){return ft?Vt?new Pc(Et,at,Nt,ft,Vt):new Pc(Et,at,Nt,ft):null})(te,Re,Pe,me,ue??ht)??(function(Et,ft,at,Nt,Vt){if(!ft||!at)return null;if(Nt)return Vt?new Pc(Et,Nt,ft,at,Vt):new Pc(Et,Nt,ft,at);if(Vt&&Vt.size()!==ft.length-1){const Yt=new Int32Array(Vt.size());let qt=0;for(let _r=0;_r<Vt.size();_r++)Yt[_r]=Vt.get(_r)?qt++:0;return new Pc(Et,Yt,ft,at,Vt)}return Vt?new Sg(Et,ft,at,Vt):new Sg(Et,ft,at)})(te,xt,Ot,Pe,ue??ht)})(F.name,E,D,F.nullable?x-1:x,$);case 0:return(function(te,ae,he,_e,ue){const me=aa(te,ae),Pe=me.numValues,Re=ae.get(),We=Hh(ue)?ue:void 0,lt=Cu(te,Pe,me.byteLength,ae,We);ae.set(Re+me.byteLength);const ht=new qs(lt,Pe);return new f0(he.name,ht,ue)})(E,D,F,0,J);case 6:case 5:return(function(te,ae,he,_e,ue){const me=aa(te,ae),Pe=vg(me,_e,te,ae),Re=ue.physicalType===5;if(Pe===En.FLAT){const We=dd(te,ae,me,Re,Hh(_e)?_e:void 0);return new $h(he.name,We,_e)}if(Pe===En.SEQUENCE){const We=qh(te,ae,me);return new pd(he.name,We[0],We[1],me.numRleValues)}{const We=l0(te,ae,me,Re);return new d0(he.name,We,_e)}})(E,D,F,J,N);case 7:return(function(te,ae,he,_e){const ue=aa(te,ae),me=Hh(_e)?_e:void 0,Pe=(function(Re,We,lt,ht){const xt=We.get(),Ot=xt+lt*Float32Array.BYTES_PER_ELEMENT,Et=new Uint8Array(Re.subarray(xt,Ot)).buffer,ft=new Float32Array(Et);return We.set(Ot),ht?gg(ft,ht,0):ft})(te,ae,ue.numValues,me);return new m_(he.name,Pe,_e)})(E,D,F,J);case 8:return(function(te,ae,he,_e){const ue=aa(te,ae),me=Hh(_e)?_e:void 0,Pe=(function(Re,We,lt,ht){const xt=We.get(),Ot=xt+lt*Float64Array.BYTES_PER_ELEMENT,Et=new Uint8Array(Re.subarray(xt,Ot)).buffer,ft=new Float64Array(Et);return We.set(Ot),ht?gg(ft,ht,0):ft})(te,ae,ue.numValues,me);return new r0(he.name,Pe,_e)})(E,D,F,J);default:throw new Error(`The specified data type for the field is currently not supported: ${N}`)}})(f,s,r,m,o.scalarType,o):f===0?null:(function(x,E,D,k){let N=null,F=null,$=null,Y=null,J=!1;for(;!J;){const _e=aa(x,E);switch(_e.physicalStreamType){case Ii.LENGTH:ia.DICTIONARY===_e.logicalStreamType.lengthType?N=Pu(x,E,_e):$=Pu(x,E,_e);break;case Ii.DATA:Gs.SINGLE===_e.logicalStreamType.dictionaryType||Gs.SHARED===_e.logicalStreamType.dictionaryType?(F=x.subarray(E.get(),E.get()+_e.byteLength),J=!0):Y=x.subarray(E.get(),E.get()+_e.byteLength),E.add(_e.byteLength)}}const te=D.complexType.children,ae=[];let he=0;for(const _e of te){const ue=Oi(x,E,1)[0];if(ue==0)continue;const me=_e.name?`${D.name}${_e.name}`:D.name;if(ue!==2||_e.type!=="scalarField"||_e.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Pe=aa(x,E),Re=Cu(x,Pe.numValues,Pe.byteLength,E),We=aa(x,E),lt=oa(x,E,We,!1,0,We.decompressedCount!==k?new qs(Re,Pe.numValues):void 0);ae[he++]=Y?new Tg(me,lt,N,F,$,Y,new qs(Re,Pe.numValues)):new Pc(me,lt,N,F,new qs(Re,Pe.numValues))}return ae})(s,r,o,m)}function Hh(s){return s instanceof qs}function Cc(s){switch(s){case 0:case 1:case 2:case 3:{const r={};r.nullable=!!(1&s),r.columnScope=0;const o={};return o.physicalType=s>1?6:4,o.type="physicalType",r.scalarType=o,r.type="scalarType",r}case 4:{const r={nullable:!1,columnScope:0},o={type:"physicalType",physicalType:0};return r.type="complexType",r.complexType=o,r}case 30:{const r={nullable:!1,columnScope:0},o={type:"physicalType",physicalType:1};return r.type="complexType",r.complexType=o,r}default:return(function(r){let o=null;switch(r){case 10:case 11:o=0;break;case 12:case 13:o=1;break;case 14:case 15:o=2;break;case 16:case 17:o=3;break;case 18:case 19:o=4;break;case 20:case 21:o=5;break;case 22:case 23:o=6;break;case 24:case 25:o=7;break;case 26:case 27:o=8;break;case 28:case 29:o=9;break;default:return null}const f={};f.nullable=!!(1&r),f.columnScope=0;const m={type:"physicalType"};return m.physicalType=o,f.type="scalarType",f.scalarType=m,f})(s)}}function Dc(s){return s>=10}function Ic(s){return s===30}function kp(s){if(s.name==="id")return!1;if(s.type==="scalarType"){const r=s.scalarType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(r.type==="logicalType")return!1}else if(s.type==="complexType"){const r=s.complexType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",s),!1}const Rp=new TextDecoder;function Ol(s,r){const o=Oi(s,r,1)[0];if(o===0)return"";const f=r.get(),m=s.subarray(f,f+o);return r.add(o),Rp.decode(m)}function y_(s,r){const o=Oi(s,r,1)[0]>>>0;if(o<10||o>30)throw new Error(`Unsupported field type code ${o}. Supported: 10-29(scalars), 30(STRUCT)`);const f=Cc(o);if(Dc(o)&&(f.name=Ol(s,r)),Ic(o)){const m=Oi(s,r,1)[0]>>>0;f.complexType.children=new Array(m);for(let b=0;b<m;b++)f.complexType.children[b]=y_(s,r)}return(function(m){return{name:m.name,nullable:m.nullable,scalarField:m.scalarType,complexField:m.complexType,type:m.type==="scalarType"?"scalarField":"complexField"}})(f)}function v_(s,r){const o=Oi(s,r,1)[0]>>>0,f=Cc(o);if(!f)throw new Error(`Unsupported column type code ${o}. Supported: 0-3(ID), 4(GEOMETRY), 10-29(scalars), 30(STRUCT)`);if(Dc(o)?f.name=Ol(s,r):o>=0&&o<=3?f.name="id":o===4&&(f.name="geometry"),Ic(o)){const m=Oi(s,r,1)[0]>>>0,b=f.complexType;b.children=new Array(m);for(let x=0;x<m;x++)b.children[x]=y_(s,r)}return f}function Lp(s,r){const o={featureTables:[]},f={};f.name=Ol(s,r);const m=Oi(s,r,1)[0]>>>0,b=Oi(s,r,1)[0]>>>0;f.columns=new Array(b);for(let x=0;x<b;x++)f.columns[x]=v_(s,r);return o.featureTables.push(f),[o,m]}function Yx(s,r,o,f,m,b,x=!1){const E=r.scalarType.physicalType,D=vg(m,b,s,o);if(E===4)switch(D){case En.FLAT:{const k=oa(s,o,m,!1);return new dg(f,k,b)}case En.SEQUENCE:{const k=s0(s,o,m);return new i0(f,k[0],k[1],m.numRleValues)}case En.CONST:{const k=o0(s,o,m,!1);return new a0(f,k,b)}}else switch(D){case En.FLAT:{if(x){const N=(function(F,$,Y){const J=(function(te,ae,he){const _e=new Float64Array(he);for(let ue=0;ue<he;ue++)_e[ue]=Tp(te,ae);return _e})(F,$,Y.numValues);return(function(te,ae){switch(ae.logicalLevelTechnique1){case qr.DELTA:return ae.logicalLevelTechnique2===qr.RLE&&(te=c_(te,ae.runs,ae.numRleValues)),(function(he){he[0]=Mc(he[0]);const _e=he.length/4*4;let ue=1;if(_e>=4)for(;ue<_e-4;ue+=4){const me=he[ue+1],Pe=he[ue+2],Re=he[ue+3];he[ue]=Mc(he[ue])+he[ue-1],he[ue+1]=Mc(me)+he[ue],he[ue+2]=Mc(Pe)+he[ue+1],he[ue+3]=Mc(Re)+he[ue+2]}for(;ue!=he.length;++ue)he[ue]=Mc(he[ue])+he[ue-1]})(te),te;case qr.RLE:return(function(he,_e){return c_(he,_e.runs,_e.numRleValues)})(te,ae);case qr.NONE:return te;default:throw new Error(`The specified Logical level technique is not supported: ${ae.logicalLevelTechnique1}`)}})(J,Y)})(s,o,m);return new r0(f,N,b)}const k=dd(s,o,m,!1);return new $h(f,k,b)}case En.SEQUENCE:{const k=qh(s,o,m);return new pd(f,k[0],k[1],m.numRleValues)}case En.CONST:{const k=l0(s,o,m,!1);return new d0(f,k,b)}}throw new Error("Vector type not supported for id column.")}class __{constructor(r,o){var f;switch(this._featureData=r,this.properties=this._featureData.properties||{},(f=this._featureData.geometry)===null||f===void 0?void 0:f.type){case vi.POINT:case vi.MULTIPOINT:this.type=1;break;case vi.LINESTRING:case vi.MULTILINESTRING:this.type=2;break;case vi.POLYGON:case vi.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=o,this.id=Number(this._featureData.id)}loadGeometry(){const r=[];for(const o of this._featureData.geometry.coordinates){const f=[];for(const m of o)f.push(new A(m.x,m.y));r.push(f)}return r}}class Eg{constructor(r){this.features=[],this.featureTable=r,this.name=r.name,this.extent=r.extent,this.version=2,this.features=r.getFeatures(),this.length=this.features.length}feature(r){return new __(this.features[r],this.extent)}}class m0{constructor(r){this.layers={};const o=(function(f,m,b=!0){const x=new o_(0),E=[];for(;x.get()<f.length;){const D=Oi(f,x,1)[0]>>>0,k=x.get()+D;if(k>f.length)throw new Error(`Block overruns tile: ${k} > ${f.length}`);if(Oi(f,x,1)[0]>>>0!=1){x.set(k);continue}const N=Lp(f,x),F=N[1],$=N[0].featureTables[0];let Y=null,J=null;const te=[];let ae=0;for(const _e of $.columns){const ue=_e.name;if(ue==="id"){let me=null;if(_e.nullable){const Re=aa(f,x),We=x.get(),lt=Cu(f,Re.numValues,Re.byteLength,x);x.set(We+Re.byteLength),me=new qs(lt,Re.numValues)}const Pe=aa(f,x);ae=Pe.decompressedCount,Y=Yx(f,_e,x,ue,Pe,me??ae,b)}else if(ue==="geometry"){const me=Oi(f,x,1)[0];if(ae===0){const Pe=x.get();ae=aa(f,x).decompressedCount,x.set(Pe)}J=p_(f,me,x,ae)}else{const me=kp(_e)?Oi(f,x,1)[0]:1;if(me===0)continue;const Pe=g_(f,x,_e,me,ae);if(Pe)if(Array.isArray(Pe))for(const Re of Pe)te.push(Re);else te.push(Pe)}}const he=new Au($.name,J,Y,te,F);E.push(he),x.set(k)}return E})(new Uint8Array(r));this.layers=o.reduce(((f,m)=>Object.assign(Object.assign({},f),{[m.name]:new Eg(m)})),{})}}class Xx{constructor(r,o){this.feature=r,this.type=r.type,this.properties=r.tags?r.tags:{},this.extent=o,"id"in r&&(typeof r.id=="string"?this.id=parseInt(r.id,10):typeof r.id!="number"||isNaN(r.id)||(this.id=r.id))}loadGeometry(){const r=[],o=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const f of o){const m=[];for(const b of f)m.push(new A(b[0],b[1]));r.push(m)}return r}}const Du="_geojsonTileLayer";function Ag(s,r){r.writeVarintField(15,s.version||1),r.writeStringField(1,s.name||""),r.writeVarintField(5,s.extent||4096);const o={keys:[],values:[],keycache:{},valuecache:{}};for(let b=0;b<s.length;b++)o.feature=s.feature(b),r.writeMessage(2,b_,o);const f=o.keys;for(const b of f)r.writeStringField(3,b);const m=o.values;for(const b of m)r.writeMessage(4,x_,b)}function b_(s,r){if(!s.feature)return;const o=s.feature;o.id!==void 0&&r.writeVarintField(1,o.id),r.writeMessage(2,gd,s),r.writeVarintField(3,o.type),r.writeMessage(4,Cg,o)}function gd(s,r){for(const o in s.feature?.properties){let f=s.feature.properties[o],m=s.keycache[o];if(f==null)continue;m===void 0&&(s.keys.push(o),m=s.keys.length-1,s.keycache[o]=m),r.writeVarint(m),typeof f!="string"&&typeof f!="boolean"&&typeof f!="number"&&(f=JSON.stringify(f));const b=typeof f+":"+f;let x=s.valuecache[b];x===void 0&&(s.values.push(f),x=s.values.length-1,s.valuecache[b]=x),r.writeVarint(x)}}function Mg(s,r){return(r<<3)+(7&s)}function Pg(s){return s<<1^s>>31}function Cg(s,r){const o=s.loadGeometry(),f=s.type;let m=0,b=0;for(const x of o){let E=1;f===1&&(E=x.length),r.writeVarint(Mg(1,E));const D=f===3?x.length-1:x.length;for(let k=0;k<D;k++){k===1&&f!==1&&r.writeVarint(Mg(2,D-1));const N=x[k].x-m,F=x[k].y-b;r.writeVarint(Pg(N)),r.writeVarint(Pg(F)),m+=N,b+=F}s.type===3&&r.writeVarint(Mg(7,1))}}function x_(s,r){const o=typeof s;o==="string"?r.writeStringField(1,s):o==="boolean"?r.writeBooleanField(7,s):o==="number"&&(s%1!=0?r.writeDoubleField(3,s):s<0?r.writeSVarintField(6,s):r.writeVarintField(5,s))}class w_{constructor(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new bl(Be,16,0),this.grid3D=new bl(Be,16,0),this.featureIndexArray=new le,this.promoteId=o}insert(r,o,f,m,b,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,b);const D=x?this.grid3D:this.grid;for(let k=0;k<o.length;k++){const N=o[k],F=[1/0,1/0,-1/0,-1/0];for(let $=0;$<N.length;$++){const Y=N[$];F[0]=Math.min(F[0],Y.x),F[1]=Math.min(F[1],Y.y),F[2]=Math.max(F[2],Y.x),F[3]=Math.max(F[3],Y.y)}F[0]<Be&&F[1]<Be&&F[2]>=0&&F[3]>=0&&D.insert(E,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Cr(new Km(this.rawTileData)).layers:new m0(this.rawTileData).layers,this.sourceLayerCoder=new t0(this.vtLayers?Object.keys(this.vtLayers).sort():[Du])),this.vtLayers}query(r,o,f,m){this.loadVTLayers();const b=r.params,x=Be/r.tileSize/r.scale,E=Ki(b.filter,b.globalState),D=r.queryGeometry,k=r.queryPadding*x,N=Tu.fromPoints(D),F=this.grid.query(N.minX-k,N.minY-k,N.maxX+k,N.maxY+k),$=Tu.fromPoints(r.cameraQueryGeometry).expandBy(k),Y=this.grid3D.query($.minX,$.minY,$.maxX,$.maxY,((ae,he,_e,ue)=>(function(me,Pe,Re,We,lt){for(const xt of me)if(Pe<=xt.x&&Re<=xt.y&&We>=xt.x&&lt>=xt.y)return!0;const ht=[new A(Pe,Re),new A(Pe,lt),new A(We,lt),new A(We,Re)];if(me.length>2){for(const xt of ht)if(El(me,xt))return!0}for(let xt=0;xt<me.length-1;xt++)if(Tv(me[xt],me[xt+1],ht))return!0;return!1})(r.cameraQueryGeometry,ae-k,he-k,_e+k,ue+k)));for(const ae of Y)F.push(ae);F.sort(l);const J={};let te;for(let ae=0;ae<F.length;ae++){const he=F[ae];if(he===te)continue;te=he;const _e=this.featureIndexArray.get(he);let ue=null;this.loadMatchingFeature(J,_e.bucketIndex,_e.sourceLayerIndex,_e.featureIndex,E,b.layers,b.availableImages,o,f,m,((me,Pe,Re)=>(ue||(ue=Ns(me)),Pe.queryIntersectsFeature({queryGeometry:D,feature:me,featureState:Re,geometry:ue,zoom:this.z,transform:r.transform,pixelsToTileUnits:x,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation}))))}return J}loadMatchingFeature(r,o,f,m,b,x,E,D,k,N,F){const $=this.bucketLayerIDs[o];if(x&&!$.some((ae=>x.has(ae))))return;const Y=this.sourceLayerCoder.decode(f),J=this.vtLayers[Y].feature(m);if(b.needGeometry){const ae=Do(J,!0);if(!b.filter(new Vr(this.tileID.overscaledZ),ae,this.tileID.canonical))return}else if(!b.filter(new Vr(this.tileID.overscaledZ),J))return;const te=this.getId(J,Y);for(let ae=0;ae<$.length;ae++){const he=$[ae];if(x&&!x.has(he))continue;const _e=D[he];if(!_e)continue;let ue={};te&&N&&(ue=N.getState(_e.sourceLayer||Du,te));const me=Tr({},k[he]);me.paint=Bp(me.paint,_e.paint,J,ue,E),me.layout=Bp(me.layout,_e.layout,J,ue,E);const Pe=!F||F(J,_e,ue);if(!Pe)continue;const Re=new hg(J,this.z,this.x,this.y,te);Re.layer=me;let We=r[he];We===void 0&&(We=r[he]=[]),We.push({featureIndex:m,feature:Re,intersectionZ:Pe})}}lookupSymbolFeatures(r,o,f,m,b,x,E,D){const k={};this.loadVTLayers();const N=Ki(b.filterSpec,b.globalState);for(const F of r)this.loadMatchingFeature(k,f,m,F,N,x,E,D,o);return k}hasLayer(r){for(const o of this.bucketLayerIDs)for(const f of o)if(r===f)return!0;return!1}getId(r,o){var f;let m=r.id;return this.promoteId&&(m=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((f=r.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(m=Number(r.properties.cluster_id))),m}}function Bp(s,r,o,f,m){return er(s,((b,x)=>{const E=r instanceof hc?r.get(x):null;return E&&E.evaluate?E.evaluate(o,f,m):E}))}function l(s,r){return r-s}function h(s,r,o,f,m){const b=[];for(let x=0;x<s.length;x++){const E=s[x];let D;for(let k=0;k<E.length-1;k++){let N=E[k],F=E[k+1];N.x<r&&F.x<r||(N.x<r?N=new A(r,N.y+(r-N.x)/(F.x-N.x)*(F.y-N.y))._round():F.x<r&&(F=new A(r,N.y+(r-N.x)/(F.x-N.x)*(F.y-N.y))._round()),N.y<o&&F.y<o||(N.y<o?N=new A(N.x+(o-N.y)/(F.y-N.y)*(F.x-N.x),o)._round():F.y<o&&(F=new A(N.x+(o-N.y)/(F.y-N.y)*(F.x-N.x),o)._round()),N.x>=f&&F.x>=f||(N.x>=f?N=new A(f,N.y+(f-N.x)/(F.x-N.x)*(F.y-N.y))._round():F.x>=f&&(F=new A(f,N.y+(f-N.x)/(F.x-N.x)*(F.y-N.y))._round()),N.y>=m&&F.y>=m||(N.y>=m?N=new A(N.x+(m-N.y)/(F.y-N.y)*(F.x-N.x),m)._round():F.y>=m&&(F=new A(N.x+(m-N.y)/(F.y-N.y)*(F.x-N.x),m)._round()),D&&N.equals(D[D.length-1])||(D=[N],b.push(D)),D.push(F)))))}}return b}function v(s,r,o,f,m){switch(r){case 1:return(function(b,x,E,D){const k=[];for(const N of b)for(const F of N){const $=D===0?F.x:F.y;$>=x&&$<=E&&k.push([F])}return k})(s,o,f,m);case 2:return z(s,o,f,m,!1);case 3:return z(s,o,f,m,!0)}return[]}function S(s,r,o,f,m){const b=f===0?j:Q;let x=[];const E=[];for(let N=0;N<s.length-1;N++){const F=s[N],$=s[N+1],Y=f===0?F.x:F.y,J=f===0?$.x:$.y;let te=!1;Y<r?J>r&&x.push(b(F,$,r)):Y>o?J<o&&x.push(b(F,$,o)):x.push(F),J<r&&Y>=r&&(x.push(b(F,$,r)),te=!0),J>o&&Y<=o&&(x.push(b(F,$,o)),te=!0),!m&&te&&(E.push(x),x=[])}const D=s.length-1,k=f===0?s[D].x:s[D].y;return k>=r&&k<=o&&x.push(s[D]),m&&x.length>0&&!x[0].equals(x[x.length-1])&&x.push(new A(x[0].x,x[0].y)),x.length>0&&E.push(x),E}function z(s,r,o,f,m){const b=[];for(const x of s){const E=S(x,r,o,f,m);E.length>0&&b.push(...E)}return b}function j(s,r,o){return new A(o,s.y+(o-s.x)/(r.x-s.x)*(r.y-s.y))}function Q(s,r,o){return new A(s.x+(o-s.y)/(r.y-s.y)*(r.x-s.x),o)}Lt("FeatureIndex",w_,{omit:["rawTileData","sourceLayerCoder"]});class de extends A{constructor(r,o,f,m){super(r,o),this.angle=f,m!==void 0&&(this.segment=m)}clone(){return new de(this.x,this.y,this.angle,this.segment)}}function Le(s,r,o,f,m){if(r.segment===void 0||o===0)return!0;let b=r,x=r.segment+1,E=0;for(;E>-o/2;){if(x--,x<0)return!1;E-=s[x].dist(b),b=s[x]}E+=s[x].dist(s[x+1]),x++;const D=[];let k=0;for(;E<o/2;){const N=s[x],F=s[x+1];if(!F)return!1;let $=s[x-1].angleTo(N)-N.angleTo(F);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:E,angleDelta:$}),k+=$;E-D[0].distance>f;)k-=D.shift().angleDelta;if(k>m)return!1;x++,E+=N.dist(F)}return!0}function rt(s){let r=0;for(let o=0;o<s.length-1;o++)r+=s[o].dist(s[o+1]);return r}function gt(s,r,o){return s?.6*r*o:0}function Tt(s,r){return Math.max(s?s.right-s.left:0,r?r.right-r.left:0)}function nt(s,r,o,f,m,b){const x=gt(o,m,b),E=Tt(o,f)*b;let D=0;const k=rt(s)/2;for(let N=0;N<s.length-1;N++){const F=s[N],$=s[N+1],Y=F.dist($);if(D+Y>k){const J=(k-D)/Y,te=gn.number(F.x,$.x,J),ae=gn.number(F.y,$.y,J),he=new de(te,ae,$.angleTo(F),N);return he._round(),!x||Le(s,he,E,x,r)?he:void 0}D+=Y}}function st(s,r,o,f,m,b,x,E,D){const k=gt(f,b,x),N=Tt(f,m),F=N*x,$=s[0].x===0||s[0].x===D||s[0].y===0||s[0].y===D;return r-F<r/4&&(r=F+r/4),Zt(s,$?r/2*E%r:(N/2+2*b)*x*E%r,r,k,o,F,$,!1,D)}function Zt(s,r,o,f,m,b,x,E,D){const k=b/2,N=rt(s);let F=0,$=r-o,Y=[];for(let J=0;J<s.length-1;J++){const te=s[J],ae=s[J+1],he=te.dist(ae),_e=ae.angleTo(te);for(;$+o<F+he;){$+=o;const ue=($-F)/he,me=gn.number(te.x,ae.x,ue),Pe=gn.number(te.y,ae.y,ue);if(me>=0&&me<D&&Pe>=0&&Pe<D&&$-k>=0&&$+k<=N){const Re=new de(me,Pe,_e,J);Re._round(),f&&!Le(s,Re,b,f,m)||Y.push(Re)}}F+=he}return E||Y.length||x||(Y=Zt(s,F/2,o,f,m,b,x,!0,D)),Y}function lr(s,r,o,f){const m=[],b=s.image,x=b.pixelRatio,E=b.paddedRect.w-2,D=b.paddedRect.h-2;let k={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const N=b.stretchX||[[0,E]],F=b.stretchY||[[0,D]],$=(at,Nt)=>at+Nt[1]-Nt[0],Y=N.reduce($,0),J=F.reduce($,0),te=E-Y,ae=D-J;let he=0,_e=Y,ue=0,me=J,Pe=0,Re=te,We=0,lt=ae;if(b.content&&f){const at=b.content,Nt=at[2]-at[0],Vt=at[3]-at[1];(b.textFitWidth||b.textFitHeight)&&(k=Ac(s)),he=rn(N,0,at[0]),ue=rn(F,0,at[1]),_e=rn(N,at[0],at[2]),me=rn(F,at[1],at[3]),Pe=at[0]-he,We=at[1]-ue,Re=Nt-_e,lt=Vt-me}const ht=k.x1,xt=k.y1,Ot=k.x2-ht,Et=k.y2-xt,ft=(at,Nt,Vt,Yt)=>{const qt=Ne(at.stretch-he,_e,Ot,ht),_r=tt(at.fixed-Pe,Re,at.stretch,Y),Ln=Ne(Nt.stretch-ue,me,Et,xt),_i=tt(Nt.fixed-We,lt,Nt.stretch,J),sa=Ne(Vt.stretch-he,_e,Ot,ht),zl=tt(Vt.fixed-Pe,Re,Vt.stretch,Y),fo=Ne(Yt.stretch-ue,me,Et,xt),qi=tt(Yt.fixed-We,lt,Yt.stretch,J),la=new A(qt,Ln),Jn=new A(sa,Ln),$i=new A(sa,fo),ja=new A(qt,fo),Na=new A(_r/x,_i/x),ko=new A(zl/x,qi/x),ca=r*Math.PI/180;if(ca){const zi=Math.sin(ca),Vn=Math.cos(ca),bi=[Vn,-zi,zi,Vn];la._matMult(bi),Jn._matMult(bi),ja._matMult(bi),$i._matMult(bi)}const Ro=at.stretch+at.fixed,kl=Nt.stretch+Nt.fixed;return{tl:la,tr:Jn,bl:ja,br:$i,tex:{x:b.paddedRect.x+1+Ro,y:b.paddedRect.y+1+kl,w:Vt.stretch+Vt.fixed-Ro,h:Yt.stretch+Yt.fixed-kl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Na,pixelOffsetBR:ko,minFontScaleX:Re/x/Ot,minFontScaleY:lt/x/Et,isSDF:o}};if(f&&(b.stretchX||b.stretchY)){const at=$e(N,te,Y),Nt=$e(F,ae,J);for(let Vt=0;Vt<at.length-1;Vt++){const Yt=at[Vt],qt=at[Vt+1];for(let _r=0;_r<Nt.length-1;_r++)m.push(ft(Yt,Nt[_r],qt,Nt[_r+1]))}}else m.push(ft({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:D+1}));return m}function rn(s,r,o){let f=0;for(const m of s)f+=Math.max(r,Math.min(o,m[1]))-Math.max(r,Math.min(o,m[0]));return f}function $e(s,r,o){const f=[{fixed:-1,stretch:0}];for(const[m,b]of s){const x=f[f.length-1];f.push({fixed:m-x.stretch,stretch:x.stretch}),f.push({fixed:m-x.stretch,stretch:x.stretch+(b-m)})}return f.push({fixed:r+1,stretch:o}),f}function Ne(s,r,o,f){return s/r*o+f}function tt(s,r,o,f){return s-r*o/f}Lt("Anchor",de);class bt{constructor(r,o,f,m,b,x,E,D,k,N){var F;if(this.boxStartIndex=r.length,k){let $=x.top,Y=x.bottom;const J=x.collisionPadding;J&&($-=J[1],Y+=J[3]);let te=Y-$;te>0&&(te=Math.max(10,te),this.circleDiameter=te)}else{const $=!((F=x.image)===null||F===void 0)&&F.content&&(x.image.textFitWidth||x.image.textFitHeight)?Ac(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};$.y1=$.y1*E-D[0],$.y2=$.y2*E+D[2],$.x1=$.x1*E-D[3],$.x2=$.x2*E+D[1];const Y=x.collisionPadding;if(Y&&($.x1-=Y[0]*E,$.y1-=Y[1]*E,$.x2+=Y[2]*E,$.y2+=Y[3]*E),N){const J=new A($.x1,$.y1),te=new A($.x2,$.y1),ae=new A($.x1,$.y2),he=new A($.x2,$.y2),_e=N*Math.PI/180;J._rotate(_e),te._rotate(_e),ae._rotate(_e),he._rotate(_e),$.x1=Math.min(J.x,te.x,ae.x,he.x),$.x2=Math.max(J.x,te.x,ae.x,he.x),$.y1=Math.min(J.y,te.y,ae.y,he.y),$.y2=Math.max(J.y,te.y,ae.y,he.y)}r.emplaceBack(o.x,o.y,$.x1,$.y1,$.x2,$.y2,f,m,b)}this.boxEndIndex=r.length}}class nr{constructor(r=[],o=(f,m)=>f<m?-1:f>m?1:0){if(this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:o,compare:f}=this,m=o[r];for(;r>0;){const b=r-1>>1,x=o[b];if(f(m,x)>=0)break;o[r]=x,r=b}o[r]=m}_down(r){const{data:o,compare:f}=this,m=this.length>>1,b=o[r];for(;r<m;){let x=1+(r<<1);const E=x+1;if(E<this.length&&f(o[E],o[x])<0&&(x=E),f(o[x],b)>=0)break;o[r]=o[x],r=x}o[r]=b}}function Yr(s,r=1,o=!1){const f=Tu.fromPoints(s[0]),m=Math.min(f.width(),f.height());let b=m/2;const x=new nr([],Wt),{minX:E,minY:D,maxX:k,maxY:N}=f;if(m===0)return new A(E,D);for(let Y=E;Y<k;Y+=m)for(let J=D;J<N;J+=m)x.push(new yr(Y+b,J+b,b,s));let F=(function(Y){let J=0,te=0,ae=0;const he=Y[0];for(let _e=0,ue=he.length,me=ue-1;_e<ue;me=_e++){const Pe=he[_e],Re=he[me],We=Pe.x*Re.y-Re.x*Pe.y;te+=(Pe.x+Re.x)*We,ae+=(Pe.y+Re.y)*We,J+=3*We}return new yr(te/J,ae/J,0,Y)})(s),$=x.length;for(;x.length;){const Y=x.pop();(Y.d>F.d||!F.d)&&(F=Y,o&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,$)),Y.max-F.d<=r||(b=Y.h/2,x.push(new yr(Y.p.x-b,Y.p.y-b,b,s)),x.push(new yr(Y.p.x+b,Y.p.y-b,b,s)),x.push(new yr(Y.p.x-b,Y.p.y+b,b,s)),x.push(new yr(Y.p.x+b,Y.p.y+b,b,s)),$+=4)}return o&&(console.log(`num probes: ${$}`),console.log(`best distance: ${F.d}`)),F.p}function Wt(s,r){return r.max-s.max}function yr(s,r,o,f){this.p=new A(s,r),this.h=o,this.d=(function(m,b){let x=!1,E=1/0;for(let D=0;D<b.length;D++){const k=b[D];for(let N=0,F=k.length,$=F-1;N<F;$=N++){const Y=k[N],J=k[$];Y.y>m.y!=J.y>m.y&&m.x<(J.x-Y.x)*(m.y-Y.y)/(J.y-Y.y)+Y.x&&(x=!x),E=Math.min(E,Sy(m,Y,J))}}return(x?1:-1)*Math.sqrt(E)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var or;y.aP=void 0,(or=y.aP||(y.aP={}))[or.center=1]="center",or[or.left=2]="left",or[or.right=3]="right",or[or.top=4]="top",or[or.bottom=5]="bottom",or[or["top-left"]=6]="top-left",or[or["top-right"]=7]="top-right",or[or["bottom-left"]=8]="bottom-left",or[or["bottom-right"]=9]="bottom-right";const Nr=Number.POSITIVE_INFINITY;function Oc(s,r){return r[1]!==Nr?(function(o,f,m){let b=0,x=0;switch(f=Math.abs(f),m=Math.abs(m),o){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(o){case"top-right":case"bottom-right":case"right":b=-f;break;case"top-left":case"bottom-left":case"left":b=f}return[b,x]})(s,r[0],r[1]):(function(o,f){let m=0,b=0;f<0&&(f=0);const x=f/Math.SQRT2;switch(o){case"top-right":case"top-left":b=x-7;break;case"bottom-right":case"bottom-left":b=7-x;break;case"bottom":b=7-f;break;case"top":b=f-7}switch(o){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=f;break;case"right":m=-f}return[m,b]})(s,r[0])}function S_(s,r,o){var f;const m=s.layout,b=(f=m.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(r,{},o);if(b){const E=b.values,D=[];for(let k=0;k<E.length;k+=2){const N=D[k]=E[k],F=E[k+1].map(($=>$*li));N.startsWith("top")?F[1]-=7:N.startsWith("bottom")&&(F[1]+=7),D[k+1]=F}return new Dn(D)}const x=m.get("text-variable-anchor");if(x){let E;E=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},o)*li,Nr]:m.get("text-offset").evaluate(r,{},o).map((k=>k*li));const D=[];for(const k of x)D.push(k,Oc(k,E));return new Dn(D)}return null}function Wx(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _5(s,r,o,f,m,b,x,E,D,k,N,F){let $=b.textMaxSize.evaluate(r,{});$===void 0&&($=x);const Y=s.layers[0].layout,J=Y.get("icon-offset").evaluate(r,{},N),te=oE(o.horizontal),ae=x/24,he=s.tilePixelRatio*ae,_e=s.tilePixelRatio*$/24,ue=s.tilePixelRatio*E,me=s.tilePixelRatio*Y.get("symbol-spacing"),Pe=Y.get("text-padding")*s.tilePixelRatio,Re=(function(Vt,Yt,qt,_r=1){const Ln=Vt.get("icon-padding").evaluate(Yt,{},qt),_i=Ln&&Ln.values;return[_i[0]*_r,_i[1]*_r,_i[2]*_r,_i[3]*_r]})(Y,r,N,s.tilePixelRatio),We=Y.get("text-max-angle")/180*Math.PI,lt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",ht=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",xt=Y.get("symbol-placement"),Ot=me/2,Et=Y.get("icon-text-fit");let ft;f&&Et!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(ft=Vs(f,o.vertical,Et,Y.get("icon-text-fit-padding"),J,ae)),te&&(f=Vs(f,te,Et,Y.get("icon-text-fit-padding"),J,ae)));const at=N?F.line.getGranularityForZoomLevel(N.z):1,Nt=(Vt,Yt)=>{Yt.x<0||Yt.x>=Be||Yt.y<0||Yt.y>=Be||(function(qt,_r,Ln,_i,sa,zl,fo,qi,la,Jn,$i,ja,Na,ko,ca,Ro,kl,zi,Vn,bi,Hn,ki,Yh,zc,v0){const yd=qt.addToLineVertexArray(_r,Ln);let jp,Dg,Ig,Og,uE=0,hE=0,fE=0,dE=0,i1=-1,a1=-1;const Xh={};let pE=kn("");if(qt.allowVerticalPlacement&&_i.vertical){const Fa=qi.layout.get("text-rotate").evaluate(Hn,{},zc)+90;Ig=new bt(la,_r,Jn,$i,ja,_i.vertical,Na,ko,ca,Fa),fo&&(Og=new bt(la,_r,Jn,$i,ja,fo,kl,zi,ca,Fa))}if(sa){const Fa=qi.layout.get("icon-rotate").evaluate(Hn,{}),$s=qi.layout.get("icon-text-fit")!=="none",Np=lr(sa,Fa,Yh,$s),Rc=fo?lr(fo,Fa,Yh,$s):void 0;Dg=new bt(la,_r,Jn,$i,ja,sa,kl,zi,!1,Fa),uE=4*Np.length;const Fp=qt.iconSizeData;let Iu=null;Fp.kind==="source"?(Iu=[Oo*qi.layout.get("icon-size").evaluate(Hn,{})],Iu[0]>wu&&cr(`${qt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Fp.kind==="composite"&&(Iu=[Oo*ki.compositeIconSizes[0].evaluate(Hn,{},zc),Oo*ki.compositeIconSizes[1].evaluate(Hn,{},zc)],(Iu[0]>wu||Iu[1]>wu)&&cr(`${qt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),qt.addSymbols(qt.icon,Np,Iu,bi,Vn,Hn,y.az.none,_r,yd.lineStartIndex,yd.lineLength,-1,zc),i1=qt.icon.placedSymbolArray.length-1,Rc&&(hE=4*Rc.length,qt.addSymbols(qt.icon,Rc,Iu,bi,Vn,Hn,y.az.vertical,_r,yd.lineStartIndex,yd.lineLength,-1,zc),a1=qt.icon.placedSymbolArray.length-1)}const mE=Object.keys(_i.horizontal);for(const Fa of mE){const $s=_i.horizontal[Fa];if(!jp){pE=kn($s.text);const Rc=qi.layout.get("text-rotate").evaluate(Hn,{},zc);jp=new bt(la,_r,Jn,$i,ja,$s,Na,ko,ca,Rc)}const Np=$s.positionedLines.length===1;if(fE+=aE(qt,_r,$s,zl,qi,ca,Hn,Ro,yd,_i.vertical?y.az.horizontal:y.az.horizontalOnly,Np?mE:[Fa],Xh,i1,ki,zc),Np)break}_i.vertical&&(dE+=aE(qt,_r,_i.vertical,zl,qi,ca,Hn,Ro,yd,y.az.vertical,["vertical"],Xh,a1,ki,zc));const w5=jp?jp.boxStartIndex:qt.collisionBoxArray.length,S5=jp?jp.boxEndIndex:qt.collisionBoxArray.length,T5=Ig?Ig.boxStartIndex:qt.collisionBoxArray.length,E5=Ig?Ig.boxEndIndex:qt.collisionBoxArray.length,A5=Dg?Dg.boxStartIndex:qt.collisionBoxArray.length,M5=Dg?Dg.boxEndIndex:qt.collisionBoxArray.length,P5=Og?Og.boxStartIndex:qt.collisionBoxArray.length,C5=Og?Og.boxEndIndex:qt.collisionBoxArray.length;let kc=-1;const E_=(Fa,$s)=>Fa&&Fa.circleDiameter?Math.max(Fa.circleDiameter,$s):$s;kc=E_(jp,kc),kc=E_(Ig,kc),kc=E_(Dg,kc),kc=E_(Og,kc);const gE=kc>-1?1:0;gE&&(kc*=v0/li),qt.glyphOffsetArray.length>=ud.MAX_GLYPHS&&cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Hn.sortKey!==void 0&&qt.addToSortKeyRanges(qt.symbolInstances.length,Hn.sortKey);const D5=S_(qi,Hn,zc),[I5,O5]=(function(Fa,$s){const Np=Fa.length,Rc=$s?.values;if(Rc?.length>0)for(let Fp=0;Fp<Rc.length;Fp+=2){const Iu=Rc[Fp+1];Fa.emplaceBack(y.aP[Rc[Fp]],Iu[0],Iu[1])}return[Np,Fa.length]})(qt.textAnchorOffsets,D5);qt.symbolInstances.emplaceBack(_r.x,_r.y,Xh.right>=0?Xh.right:-1,Xh.center>=0?Xh.center:-1,Xh.left>=0?Xh.left:-1,Xh.vertical||-1,i1,a1,pE,w5,S5,T5,E5,A5,M5,P5,C5,Jn,fE,dE,uE,hE,gE,0,Na,kc,I5,O5)})(s,Yt,Vt,o,f,m,ft,s.layers[0],s.collisionBoxArray,r.index,r.sourceLayerIndex,s.index,he,[Pe,Pe,Pe,Pe],lt,D,ue,Re,ht,J,r,b,k,N,x)};if(xt==="line")for(const Vt of h(r.geometry,0,0,Be,Be)){const Yt=xc(Vt,at),qt=st(Yt,me,We,o.vertical||te,f,24,_e,s.overscaling,Be);for(const _r of qt)te&&b5(s,te.text,Ot,_r)||Nt(Yt,_r)}else if(xt==="line-center"){for(const Vt of r.geometry)if(Vt.length>1){const Yt=xc(Vt,at),qt=nt(Yt,We,o.vertical||te,f,24,_e);qt&&Nt(Yt,qt)}}else if(r.type==="Polygon")for(const Vt of uh(r.geometry,0)){const Yt=Yr(Vt,16);Nt(xc(Vt[0],at,!0),new de(Yt.x,Yt.y,0))}else if(r.type==="LineString")for(const Vt of r.geometry){const Yt=xc(Vt,at);Nt(Yt,new de(Yt[0].x,Yt[0].y,0))}else if(r.type==="Point")for(const Vt of r.geometry)for(const Yt of Vt)Nt([Yt],new de(Yt.x,Yt.y,0))}function aE(s,r,o,f,m,b,x,E,D,k,N,F,$,Y,J){const te=(function(_e,ue,me,Pe,Re,We,lt,ht){const xt=Pe.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,Ot=[];for(const Et of ue.positionedLines)for(const ft of Et.positionedGlyphs){if(!ft.rect)continue;const at=ft.rect||{};let Nt=4,Vt=!0,Yt=1,qt=0;const _r=(Re||ht)&&ft.vertical,Ln=ft.metrics.advance*ft.scale/2;if(ht&&ue.verticalizable&&(qt=Et.lineOffset/2-(ft.imageName?-(li-ft.metrics.width*ft.scale)/2:(ft.scale-1)*li)),ft.imageName){const zi=lt[ft.imageName];Vt=zi.sdf,Yt=zi.pixelRatio,Nt=1/Yt}const _i=Re?[ft.x+Ln,ft.y]:[0,0];let sa=Re?[0,0]:[ft.x+Ln+me[0],ft.y+me[1]-qt],zl=[0,0];_r&&(zl=sa,sa=[0,0]);const fo=ft.metrics.isDoubleResolution?2:1,qi=(ft.metrics.left-Nt)*ft.scale-Ln+sa[0],la=(-ft.metrics.top-Nt)*ft.scale+sa[1],Jn=qi+at.w/fo*ft.scale/Yt,$i=la+at.h/fo*ft.scale/Yt,ja=new A(qi,la),Na=new A(Jn,la),ko=new A(qi,$i),ca=new A(Jn,$i);if(_r){const zi=new A(-Ln,Ln- -17),Vn=-Math.PI/2,bi=12-Ln,Hn=new A(22-bi,-(ft.imageName?bi:0)),ki=new A(...zl);ja._rotateAround(Vn,zi)._add(Hn)._add(ki),Na._rotateAround(Vn,zi)._add(Hn)._add(ki),ko._rotateAround(Vn,zi)._add(Hn)._add(ki),ca._rotateAround(Vn,zi)._add(Hn)._add(ki)}if(xt){const zi=Math.sin(xt),Vn=Math.cos(xt),bi=[Vn,-zi,zi,Vn];ja._matMult(bi),Na._matMult(bi),ko._matMult(bi),ca._matMult(bi)}const Ro=new A(0,0),kl=new A(0,0);Ot.push({tl:ja,tr:Na,bl:ko,br:ca,tex:at,writingMode:ue.writingMode,glyphOffset:_i,sectionIndex:ft.sectionIndex,isSDF:Vt,pixelOffsetTL:Ro,pixelOffsetBR:kl,minFontScaleX:0,minFontScaleY:0})}return Ot})(0,o,E,m,b,x,f,s.allowVerticalPlacement),ae=s.textSizeData;let he=null;ae.kind==="source"?(he=[Oo*m.layout.get("text-size").evaluate(x,{})],he[0]>wu&&cr(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ae.kind==="composite"&&(he=[Oo*Y.compositeTextSizes[0].evaluate(x,{},J),Oo*Y.compositeTextSizes[1].evaluate(x,{},J)],(he[0]>wu||he[1]>wu)&&cr(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,te,he,E,b,x,k,r,D.lineStartIndex,D.lineLength,$,J);for(const _e of N)F[_e]=s.text.placedSymbolArray.length-1;return 4*te.length}function oE(s){for(const r in s)return s[r];return null}function b5(s,r,o,f){const m=s.compareText;if(r in m){const b=m[r];for(let x=b.length-1;x>=0;x--)if(f.dist(b[x])<o)return!0}else m[r]=[];return m[r].push(f),!1}const sE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Kx{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,f]=new Uint8Array(r,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const b=sE[15&f];if(!b)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(r,2,1),[E]=new Uint32Array(r,4,1);return new Kx(E,x,b,r)}constructor(r,o=64,f=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=f,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const b=sE.indexOf(this.ArrayType),x=2*r*this.ArrayType.BYTES_PER_ELEMENT,E=r*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-E%8)%8;if(b<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+D,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+D),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+D,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+b]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r)}add(r,o){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=r,this.coords[this._pos++]=o,f}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Qx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,o,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:b,coords:x,nodeSize:E}=this,D=[0,b.length-1,0],k=[];for(;D.length;){const N=D.pop()||0,F=D.pop()||0,$=D.pop()||0;if(F-$<=E){for(let ae=$;ae<=F;ae++){const he=x[2*ae],_e=x[2*ae+1];he>=r&&he<=f&&_e>=o&&_e<=m&&k.push(b[ae])}continue}const Y=$+F>>1,J=x[2*Y],te=x[2*Y+1];J>=r&&J<=f&&te>=o&&te<=m&&k.push(b[Y]),(N===0?r<=J:o<=te)&&(D.push($),D.push(Y-1),D.push(1-N)),(N===0?f>=J:m>=te)&&(D.push(Y+1),D.push(F),D.push(1-N))}return k}within(r,o,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:b,nodeSize:x}=this,E=[0,m.length-1,0],D=[],k=f*f;for(;E.length;){const N=E.pop()||0,F=E.pop()||0,$=E.pop()||0;if(F-$<=x){for(let ae=$;ae<=F;ae++)cE(b[2*ae],b[2*ae+1],r,o)<=k&&D.push(m[ae]);continue}const Y=$+F>>1,J=b[2*Y],te=b[2*Y+1];cE(J,te,r,o)<=k&&D.push(m[Y]),(N===0?r-f<=J:o-f<=te)&&(E.push($),E.push(Y-1),E.push(1-N)),(N===0?r+f>=J:o+f>=te)&&(E.push(Y+1),E.push(F),E.push(1-N))}return D}}function Qx(s,r,o,f,m,b){if(m-f<=o)return;const x=f+m>>1;lE(s,r,x,f,m,b),Qx(s,r,o,f,x-1,1-b),Qx(s,r,o,x+1,m,1-b)}function lE(s,r,o,f,m,b){for(;m>f;){if(m-f>600){const k=m-f+1,N=o-f+1,F=Math.log(k),$=.5*Math.exp(2*F/3),Y=.5*Math.sqrt(F*$*(k-$)/k)*(N-k/2<0?-1:1);lE(s,r,o,Math.max(f,Math.floor(o-N*$/k+Y)),Math.min(m,Math.floor(o+(k-N)*$/k+Y)),b)}const x=r[2*o+b];let E=f,D=m;for(g0(s,r,f,o),r[2*m+b]>x&&g0(s,r,f,m);E<D;){for(g0(s,r,E,D),E++,D--;r[2*E+b]<x;)E++;for(;r[2*D+b]>x;)D--}r[2*f+b]===x?g0(s,r,f,D):(D++,g0(s,r,D,m)),D<=o&&(f=D+1),o<=D&&(m=D-1)}}function g0(s,r,o,f){Jx(s,o,f),Jx(r,2*o,2*f),Jx(r,2*o+1,2*f+1)}function Jx(s,r,o){const f=s[r];s[r]=s[o],s[o]=f}function cE(s,r,o,f){const m=s-o,b=r-f;return m*m+b*b}var e1;y.cI=void 0,(e1=y.cI||(y.cI={})).create="create",e1.load="load",e1.fullLoad="fullLoad";let T_=null,y0=[];const t1=1e3/60,r1="loadTime",n1="fullLoadTime",x5={mark(s){performance.mark(s)},recordStartOfFrameAt(s){T_!=null&&y0.push(s-T_),T_=s},resetRuntimeMetrics(){T_=null,y0=[]},clearInitializationMetrics(){performance.clearMeasures(r1),performance.clearMeasures(n1);for(const s in y.cI)performance.clearMarks(y.cI[s])},remove(){this.resetRuntimeMetrics(),this.clearInitializationMetrics()},getPerformanceMetrics(){performance.measure(r1,y.cI.create,y.cI.load),performance.measure(n1,y.cI.create,y.cI.fullLoad);const s=performance.getEntriesByName(r1)[0].duration,r=performance.getEntriesByName(n1)[0].duration,o=y0.length;return{loadTimeMs:s,fullLoadTimeMs:r,averageFramesPerSecond:1/(y0.reduce(((f,m)=>f+m),0)/o/1e3),virtualDroppedFramesCount:y0.filter((f=>f>t1)).reduce(((f,m)=>f+(m-t1)/t1),0),totalFramesCount:o}}};y.$=U,y.A=fe,y.B=So,y.C=si,y.D=Bt,y.E=ot,y.F=function([s,r,o]){return r+=90,r*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(r)*Math.sin(o),y:s*Math.sin(r)*Math.sin(o),z:s*Math.cos(o)}},y.G=gn,y.H=Vr,y.I=tn,y.J=Vf,y.K=function(s){if(Lr==null){const r=s.navigator?s.navigator.userAgent:null;Lr=!!s.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Lr},y.L=class{constructor(s,r){this.target=s,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new lg((()=>this.process())),this.subscription=qc(this.target,"message",(o=>this.receive(o)),!1),this.globalScope=ln(self)?s:window}registerMessageHandler(s,r){this.messageHandlers[s]=r}unregisterMessageHandler(s){delete this.messageHandlers[s]}sendAsync(s,r){return new Promise(((o,f)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),b=r?qc(r.signal,"abort",(()=>{b?.unsubscribe(),delete this.resolveRejects[m];const D={id:m,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(D)}),Ky):null;this.resolveRejects[m]={resolve:D=>{b?.unsubscribe(),o(D)},reject:D=>{b?.unsubscribe(),f(D)}};const x=[],E=Object.assign(Object.assign({},s),{id:m,sourceMapId:this.mapId,origin:location.origin,data:To(s.data,x)});this.target.postMessage(E,{transfer:x})}))}receive(s){const r=s.data,o=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[o];const f=this.abortControllers[o];return delete this.abortControllers[o],void(f&&f.abort())}if(ln(self)||r.mustQueue)return this.tasks[o]=r,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,r)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),r=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(s,r)}processTask(s,r){return c(this,void 0,void 0,(function*(){if(r.type==="<response>"){const m=this.resolveRejects[s];return delete this.resolveRejects[s],m?void(r.error?m.reject(fu(r.error)):m.resolve(fu(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=fu(r.data),f=new AbortController;this.abortControllers[s]=f;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,o,f);this.completeTask(s,null,m)}catch(m){this.completeTask(s,m)}}))}completeTask(s,r,o){const f=[];delete this.abortControllers[s];const m={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?To(r):null,data:To(o,f)};this.target.postMessage(m,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},y.M=ie,y.N=function(){var s=new fe(16);return fe!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},y.O=function(s,r,o){var f,m,b,x,E,D,k,N,F,$,Y,J,te=o[0],ae=o[1],he=o[2];return r===s?(s[12]=r[0]*te+r[4]*ae+r[8]*he+r[12],s[13]=r[1]*te+r[5]*ae+r[9]*he+r[13],s[14]=r[2]*te+r[6]*ae+r[10]*he+r[14],s[15]=r[3]*te+r[7]*ae+r[11]*he+r[15]):(m=r[1],b=r[2],x=r[3],E=r[4],D=r[5],k=r[6],N=r[7],F=r[8],$=r[9],Y=r[10],J=r[11],s[0]=f=r[0],s[1]=m,s[2]=b,s[3]=x,s[4]=E,s[5]=D,s[6]=k,s[7]=N,s[8]=F,s[9]=$,s[10]=Y,s[11]=J,s[12]=f*te+E*ae+F*he+r[12],s[13]=m*te+D*ae+$*he+r[13],s[14]=b*te+k*ae+Y*he+r[14],s[15]=x*te+N*ae+J*he+r[15]),s},y.P=A,y.Q=function(s,r,o){var f=o[0],m=o[1],b=o[2];return s[0]=r[0]*f,s[1]=r[1]*f,s[2]=r[2]*f,s[3]=r[3]*f,s[4]=r[4]*m,s[5]=r[5]*m,s[6]=r[6]*m,s[7]=r[7]*m,s[8]=r[8]*b,s[9]=r[9]*b,s[10]=r[10]*b,s[11]=r[11]*b,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},y.R=na,y.S=function(s,r,o){var f=r[0],m=r[1],b=r[2],x=r[3],E=r[4],D=r[5],k=r[6],N=r[7],F=r[8],$=r[9],Y=r[10],J=r[11],te=r[12],ae=r[13],he=r[14],_e=r[15],ue=o[0],me=o[1],Pe=o[2],Re=o[3];return s[0]=ue*f+me*E+Pe*F+Re*te,s[1]=ue*m+me*D+Pe*$+Re*ae,s[2]=ue*b+me*k+Pe*Y+Re*he,s[3]=ue*x+me*N+Pe*J+Re*_e,s[4]=(ue=o[4])*f+(me=o[5])*E+(Pe=o[6])*F+(Re=o[7])*te,s[5]=ue*m+me*D+Pe*$+Re*ae,s[6]=ue*b+me*k+Pe*Y+Re*he,s[7]=ue*x+me*N+Pe*J+Re*_e,s[8]=(ue=o[8])*f+(me=o[9])*E+(Pe=o[10])*F+(Re=o[11])*te,s[9]=ue*m+me*D+Pe*$+Re*ae,s[10]=ue*b+me*k+Pe*Y+Re*he,s[11]=ue*x+me*N+Pe*J+Re*_e,s[12]=(ue=o[12])*f+(me=o[13])*E+(Pe=o[14])*F+(Re=o[15])*te,s[13]=ue*m+me*D+Pe*$+Re*ae,s[14]=ue*b+me*k+Pe*Y+Re*he,s[15]=ue*x+me*N+Pe*J+Re*_e,s},y.T=Nm,y.U=function(s,r){const o={};for(let f=0;f<r.length;f++){const m=r[f];m in s&&(o[m]=s[m])}return o},y.V=Cl,y.W=Ft,y.X=Qy,y.Y=r_,y.Z=rl,y._=c,y.a=Xu,y.a$=zt,y.a0=oe,y.a1=bs,y.a2=Ra,y.a3=i_,y.a4=xp,y.a5=Be,y.a6=function(s,r,o){if(!s)return r||{};if(!r)return s||{};const f=Sp(s),m=Sp(r);(function(x,E){E.removeAll&&(x.add.clear(),x.update.clear(),x.remove.clear(),E.remove.clear());for(const D of E.remove)x.add.delete(D),x.update.delete(D);for(const[D,k]of E.update){const N=x.update.get(D);N&&(E.update.set(D,e0(N,k)),x.update.delete(D))}})(f,m);const b={};if((f.removeAll||m.removeAll)&&(b.removeAll=!0),b.remove=new Set([...f.remove,...m.remove]),b.add=new Map([...f.add,...m.add]),b.update=new Map([...f.update,...m.update]),b.remove.size&&b.add.size)for(const x of b.add.keys())b.remove.delete(x);return(function(x){const E={};return x.removeAll&&(E.removeAll=x.removeAll),x.remove&&(E.remove=Array.from(x.remove)),x.add&&(E.add=Array.from(x.add.values())),x.update&&(E.update=Array.from(x.update.values())),E})(b)},y.a7=function(s,r){const o=new Map;if(s==null||s.type==null)return o;if(s.type==="Feature"){const f=wp(s,r);return f==null?void 0:(o.set(f,s),o)}if(s.type==="FeatureCollection"){const f=new Set;for(const m of s.features){const b=wp(m,r);if(b==null||f.has(b))return;f.add(b),o.set(b,m)}return o}},y.a8=function(s,r,o){var f,m;const b=[];if(r.removeAll)s.clear();else if(r.remove)for(const x of r.remove){const E=s.get(x);E&&(b.push(E.geometry),s.delete(x))}if(r.add)for(const x of r.add){const E=wp(x,o);if(E==null)continue;const D=s.get(E);D&&b.push(D.geometry),b.push(x.geometry),s.set(E,x)}if(r.update)for(const x of r.update){const E=s.get(x.id);if(!E)continue;const D=!!x.newGeometry,k=x.removeAllProperties||((f=x.removeProperties)===null||f===void 0?void 0:f.length)>0||((m=x.addOrUpdateProperties)===null||m===void 0?void 0:m.length)>0;if(!D&&!k)continue;b.push(E.geometry);const N=Object.assign({},E);if(s.set(x.id,N),D&&(b.push(x.newGeometry),N.geometry=x.newGeometry),k){if(N.properties=x.removeAllProperties?{}:Object.assign({},N.properties||{}),x.removeProperties)for(const F of x.removeProperties)delete N.properties[F];if(x.addOrUpdateProperties)for(const{key:F,value:$}of x.addOrUpdateProperties)N.properties[F]=$}}return b},y.a9=Hr,y.aA=function(s,{uSize:r,uSizeT:o},{lowerSize:f,upperSize:m}){return s.kind==="source"?f/Oo:s.kind==="composite"?gn.number(f/Oo,m/Oo,o):r},y.aB=function(s,r){var o=r[0],f=r[1],m=r[2],b=r[3],x=r[4],E=r[5],D=r[6],k=r[7],N=r[8],F=r[9],$=r[10],Y=r[11],J=r[12],te=r[13],ae=r[14],he=r[15],_e=o*E-f*x,ue=o*D-m*x,me=o*k-b*x,Pe=f*D-m*E,Re=f*k-b*E,We=m*k-b*D,lt=N*te-F*J,ht=N*ae-$*J,xt=N*he-Y*J,Ot=F*ae-$*te,Et=F*he-Y*te,ft=$*he-Y*ae,at=_e*ft-ue*Et+me*Ot+Pe*xt-Re*ht+We*lt;return at?(s[0]=(E*ft-D*Et+k*Ot)*(at=1/at),s[1]=(m*Et-f*ft-b*Ot)*at,s[2]=(te*We-ae*Re+he*Pe)*at,s[3]=($*Re-F*We-Y*Pe)*at,s[4]=(D*xt-x*ft-k*ht)*at,s[5]=(o*ft-m*xt+b*ht)*at,s[6]=(ae*me-J*We-he*ue)*at,s[7]=(N*We-$*me+Y*ue)*at,s[8]=(x*Et-E*xt+k*lt)*at,s[9]=(f*xt-o*Et-b*lt)*at,s[10]=(J*Re-te*me+he*_e)*at,s[11]=(F*me-N*Re-Y*_e)*at,s[12]=(E*ht-x*Ot-D*lt)*at,s[13]=(o*Ot-f*ht+m*lt)*at,s[14]=(te*ue-J*Pe-ae*_e)*at,s[15]=(N*Pe-F*ue+$*_e)*at,s):null},y.aC=it,y.aD=function(s){var r=s[0],o=s[1];return Math.sqrt(r*r+o*o)},y.aE=function(s){return s[0]=0,s[1]=0,s},y.aF=function(s,r,o){return s[0]=r[0]*o,s[1]=r[1]*o,s},y.aG=Hy,y.aH=It,y.aI=function(s,r,o,f){const m=r.y-s.y,b=r.x-s.x,x=f.y-o.y,E=f.x-o.x,D=x*b-E*m;if(D===0)return null;const k=(E*(s.y-o.y)-x*(s.x-o.x))/D;return new A(s.x+k*b,s.y+k*m)},y.aJ=h,y.aK=Lh,y.aL=function(s){let r=1/0,o=1/0,f=-1/0,m=-1/0;for(const b of s)r=Math.min(r,b.x),o=Math.min(o,b.y),f=Math.max(f,b.x),m=Math.max(m,b.y);return[r,o,f,m]},y.aM=li,y.aN=yt,y.aO=function(s,r,o,f,m=!1){if(!o[0]&&!o[1])return[0,0];const b=m?f==="map"?-s.bearingInRadians:0:f==="viewport"?s.bearingInRadians:0;if(b){const x=Math.sin(b),E=Math.cos(b);o=[o[0]*E-o[1]*x,o[0]*x+o[1]*E]}return[m?o[0]:yt(r,o[0],s.zoom),m?o[1]:yt(r,o[1],s.zoom)]},y.aQ=ng,y.aR=Wx,y.aS=Gy,y.aT=Kx,y.aU=yn,y.aV=hp,y.aW=pe,y.aX=kt,y.aY=Je,y.aZ=_a,y.a_=Jy,y.aa=Tu,y.ab=25,y.ac=Mi,y.ad=s=>{const r=window.document.createElement("video");return r.muted=!0,new Promise((o=>{r.onloadstart=()=>{o(r)};for(const f of s){const m=window.document.createElement("source");Ye(f)||(r.crossOrigin="Anonymous"),m.src=f,r.appendChild(m)}}))},y.ae=St,y.af=function(){return pt++},y.ag=_,y.ah=ud,y.ai=Du,y.aj=Ki,y.ak=Do,y.al=hg,y.am=function(s){const r={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((o,f,m,b)=>{const x=m||b;return r[f]=!x||x.toLowerCase(),""})),r["max-age"]){const o=parseInt(r["max-age"],10);isNaN(o)?delete r["max-age"]:r["max-age"]=o}return r},y.an=$t,y.ao=85.051129,y.ap=ni,y.aq=function(s){return Math.pow(2,s)},y.ar=Ee,y.as=n_,y.at=function(s){return Math.log(s)/Math.LN2},y.au=function(s){var r=s[0],o=s[1];return r*r+o*o},y.av=function(s){if(!s.length)return new Set;const r=Math.max(...s.map((D=>D.canonical.z)));let o=1/0,f=-1/0,m=1/0,b=-1/0;const x=[];for(const D of s){const{x:k,y:N,z:F}=D.canonical,$=Math.pow(2,r-F),Y=k*$,J=N*$;x.push({id:D,x:Y,y:J}),Y<o&&(o=Y),Y>f&&(f=Y),J<m&&(m=J),J>b&&(b=J)}const E=new Set;for(const D of x)D.x!==o&&D.x!==f&&D.y!==m&&D.y!==b||E.add(D.id);return E},y.aw=function(s,r){const o=Math.abs(2*s.wrap)-+(s.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return s.overscaledZ-r.overscaledZ||f-o||r.canonical.y-s.canonical.y||r.canonical.x-s.canonical.x},y.ax=class{constructor(s,r){this.max=s,this.onRemove=r,this.reset()}reset(){for(const s in this.data)for(const r of this.data[s])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(s,r,o){const f=s.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const m={value:r,timeout:void 0};if(o!==void 0&&(m.timeout=setTimeout((()=>{this.remove(s,m)}),o)),this.data[f].push(m),this.order.push(f),this.order.length>this.max){const b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const r=this.data[s].shift();return r.timeout&&clearTimeout(r.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),r.value}getByKey(s){const r=this.data[s];return r?r[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,r){if(!this.has(s))return this;const o=s.wrapped().key,f=r===void 0?0:this.data[o].indexOf(r),m=this.data[o][f];return this.data[o].splice(f,1),m.timeout&&clearTimeout(m.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(m.value),this.order.splice(this.order.indexOf(o),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(s){const r=[];for(const o in this.data)for(const f of this.data[o])s(f.value)||r.push(f);for(const o of r)this.remove(o.value.tileID,o)}},y.ay=function(s,r){let o=0,f=0;if(s.kind==="constant")f=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:m,minZoom:b,maxZoom:x}=s,E=m?$t(Fi.interpolationFactor(m,r,b,x),0,1):0;s.kind==="camera"?f=gn.number(s.minSize,s.maxSize,E):o=E}return{uSizeT:o,uSize:f}},y.b=va,y.b$=Co,y.b0=mt,y.b1=function(s){var r=new fe(3);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r},y.b2=function(s,r,o){return s[0]=r[0]-o[0],s[1]=r[1]-o[1],s[2]=r[2]-o[2],s},y.b3=function(s,r){var o=r[0],f=r[1],m=r[2],b=o*o+f*f+m*m;return b>0&&(b=1/Math.sqrt(b)),s[0]=r[0]*b,s[1]=r[1]*b,s[2]=r[2]*b,s},y.b4=Ge,y.b5=function(s,r){return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]},y.b6=function(s,r,o){return s[0]=r[0]*o[0],s[1]=r[1]*o[1],s[2]=r[2]*o[2],s[3]=r[3]*o[3],s},y.b7=ze,y.b8=function(s,r,o){const f=r[0]*o[0]+r[1]*o[1]+r[2]*o[2];return f===0?null:(-(s[0]*o[0]+s[1]*o[1]+s[2]*o[2])-o[3])/f},y.b9=dt,y.bA=function(){return new Float64Array(3)},y.bB=Ve,y.bC=function(s,r,o){var f=o[0],m=o[1],b=o[2],x=o[3],E=r[0],D=r[1],k=r[2],N=m*k-b*D,F=b*E-f*k,$=f*D-m*E;return s[0]=E+x*(N+=N)+m*($+=$)-b*(F+=F),s[1]=D+x*F+b*N-f*$,s[2]=k+x*$+f*F-m*N,s},y.bD=function(s,r,o){const f=(m=[s[0],s[1],s[2],r[0],r[1],r[2],o[0],o[1],o[2]])[0]*((N=m[8])*(x=m[4])-(E=m[5])*(k=m[7]))+m[1]*(-N*(b=m[3])+E*(D=m[6]))+m[2]*(k*b-x*D);var m,b,x,E,D,k,N;if(f===0)return null;const F=Ge([],[r[0],r[1],r[2]],[o[0],o[1],o[2]]),$=Ge([],[o[0],o[1],o[2]],[s[0],s[1],s[2]]),Y=Ge([],[s[0],s[1],s[2]],[r[0],r[1],r[2]]),J=zt([],F,-s[3]);return mt(J,J,zt([],$,-r[3])),mt(J,J,zt([],Y,-o[3])),zt(J,J,1/f),J},y.bE=cg,y.bF=function(){return new Float64Array(4)},y.bG=function(s,r,o,f){var m=[],b=[];return m[0]=r[0]-o[0],m[1]=r[1]-o[1],m[2]=r[2]-o[2],b[0]=m[0]*Math.cos(f)-m[1]*Math.sin(f),b[1]=m[0]*Math.sin(f)+m[1]*Math.cos(f),b[2]=m[2],s[0]=b[0]+o[0],s[1]=b[1]+o[1],s[2]=b[2]+o[2],s},y.bH=function(s,r,o,f){var m=[],b=[];return m[0]=r[0]-o[0],m[1]=r[1]-o[1],m[2]=r[2]-o[2],b[0]=m[0],b[1]=m[1]*Math.cos(f)-m[2]*Math.sin(f),b[2]=m[1]*Math.sin(f)+m[2]*Math.cos(f),s[0]=b[0]+o[0],s[1]=b[1]+o[1],s[2]=b[2]+o[2],s},y.bI=function(s,r,o,f){var m=[],b=[];return m[0]=r[0]-o[0],m[1]=r[1]-o[1],m[2]=r[2]-o[2],b[0]=m[2]*Math.sin(f)+m[0]*Math.cos(f),b[1]=m[1],b[2]=m[2]*Math.cos(f)-m[0]*Math.sin(f),s[0]=b[0]+o[0],s[1]=b[1]+o[1],s[2]=b[2]+o[2],s},y.bJ=function(s,r,o){var f=Math.sin(o),m=Math.cos(o),b=r[0],x=r[1],E=r[2],D=r[3],k=r[8],N=r[9],F=r[10],$=r[11];return r!==s&&(s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=b*m-k*f,s[1]=x*m-N*f,s[2]=E*m-F*f,s[3]=D*m-$*f,s[8]=b*f+k*m,s[9]=x*f+N*m,s[10]=E*f+F*m,s[11]=D*f+$*m,s},y.bK=function(s,r){const o=Ae(s,360),f=Ae(r,360),m=f-o,b=f>o?m-360:m+360;return Math.abs(m)<Math.abs(b)?m:b},y.bL=function(s){return s[0]=0,s[1]=0,s[2]=0,s},y.bM=function(s,r,o,f){const m=Math.sqrt(s*s+r*r),b=Math.sqrt(o*o+f*f);s/=m,r/=m,o/=b,f/=b;const x=Math.acos(s*o+r*f);return-r*o+s*f>0?x:-x},y.bN=function(s,r){const o=Ae(s,2*Math.PI),f=Ae(r,2*Math.PI);return Math.min(Math.abs(o-f),Math.abs(o-f+2*Math.PI),Math.abs(o-f-2*Math.PI))},y.bO=function(){const s={},r=Ie.$version;for(const o in Ie.$root){const f=Ie.$root[o];if(f.required){let m=null;m=o==="version"?r:f.type==="array"?[]:{},m!=null&&(s[o]=m)}}return s},y.bP=we,y.bQ=$f,y.bR=function s(r,o){if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(let f=0;f<r.length;f++)if(!s(r[f],o[f]))return!1;return!0}if(typeof r=="object"&&r!==null&&o!==null){if(typeof o!="object"||Object.keys(r).length!==Object.keys(o).length)return!1;for(const f in r)if(!s(r[f],o[f]))return!1;return!0}return r===o},y.bS=function(s){s=s.slice();const r=Object.create(null);for(let o=0;o<s.length;o++)r[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=ir(s[o],r[s[o].ref]));return s},y.bT=function(s,r){if(s.type==="custom")return new Wy(s,r);switch(s.type){case"background":return new Dr(s,r);case"circle":return new Lm(s,r);case"color-relief":return new Dv(s,r);case"fill":return new Rv(s,r);case"fill-extrusion":return new Ly(s,r);case"heatmap":return new Pv(s,r);case"hillshade":return new Rn(s,r);case"line":return new jy(s,r);case"raster":return new Rs(s,r);case"symbol":return new Su(s,r)}},y.bU=s=>s.type==="raster",y.bV=At,y.bW=function(s,r){if(!s)return[{command:"setStyle",args:[r]}];let o=[];try{if(!Xt(s.version,r.version))return[{command:"setStyle",args:[r]}];Xt(s.center,r.center)||o.push({command:"setCenter",args:[r.center]}),Xt(s.state,r.state)||o.push({command:"setGlobalState",args:[r.state]}),Xt(s.centerAltitude,r.centerAltitude)||o.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Xt(s.zoom,r.zoom)||o.push({command:"setZoom",args:[r.zoom]}),Xt(s.bearing,r.bearing)||o.push({command:"setBearing",args:[r.bearing]}),Xt(s.pitch,r.pitch)||o.push({command:"setPitch",args:[r.pitch]}),Xt(s.roll,r.roll)||o.push({command:"setRoll",args:[r.roll]}),Xt(s.sprite,r.sprite)||o.push({command:"setSprite",args:[r.sprite]}),Xt(s.glyphs,r.glyphs)||o.push({command:"setGlyphs",args:[r.glyphs]}),Xt(s.transition,r.transition)||o.push({command:"setTransition",args:[r.transition]}),Xt(s.light,r.light)||o.push({command:"setLight",args:[r.light]}),Xt(s.terrain,r.terrain)||o.push({command:"setTerrain",args:[r.terrain]}),Xt(s.sky,r.sky)||o.push({command:"setSky",args:[r.sky]}),Xt(s.projection,r.projection)||o.push({command:"setProjection",args:[r.projection]});const f={},m=[];(function(x,E,D,k){let N;for(N in E=E||{},x=x||{})Object.prototype.hasOwnProperty.call(x,N)&&(Object.prototype.hasOwnProperty.call(E,N)||ar(N,D,k));for(N in E)Object.prototype.hasOwnProperty.call(E,N)&&(Object.prototype.hasOwnProperty.call(x,N)?Xt(x[N],E[N])||(x[N].type==="geojson"&&E[N].type==="geojson"&&Pn(x,E,N)?Qt(D,{command:"setGeoJSONSourceData",args:[N,E[N].data]}):fn(N,E,D,k)):tr(N,E,D))})(s.sources,r.sources,m,f);const b=[];s.layers&&s.layers.forEach((x=>{"source"in x&&f[x.source]?o.push({command:"removeLayer",args:[x.id]}):b.push(x)})),o=o.concat(m),(function(x,E,D){E=E||[];const k=(x=x||[]).map(Si),N=E.map(Si),F=x.reduce(dn,{}),$=E.reduce(dn,{}),Y=k.slice(),J=Object.create(null);let te,ae,he,_e,ue;for(let me=0,Pe=0;me<k.length;me++)te=k[me],Object.prototype.hasOwnProperty.call($,te)?Pe++:(Qt(D,{command:"removeLayer",args:[te]}),Y.splice(Y.indexOf(te,Pe),1));for(let me=0,Pe=0;me<N.length;me++)te=N[N.length-1-me],Y[Y.length-1-me]!==te&&(Object.prototype.hasOwnProperty.call(F,te)?(Qt(D,{command:"removeLayer",args:[te]}),Y.splice(Y.lastIndexOf(te,Y.length-Pe),1)):Pe++,_e=Y[Y.length-me],Qt(D,{command:"addLayer",args:[$[te],_e]}),Y.splice(Y.length-me,0,te),J[te]=!0);for(let me=0;me<N.length;me++)if(te=N[me],ae=F[te],he=$[te],!J[te]&&!Xt(ae,he))if(Xt(ae.source,he.source)&&Xt(ae["source-layer"],he["source-layer"])&&Xt(ae.type,he.type)){for(ue in xn(ae.layout,he.layout,D,te,null,"setLayoutProperty"),xn(ae.paint,he.paint,D,te,null,"setPaintProperty"),Xt(ae.filter,he.filter)||Qt(D,{command:"setFilter",args:[te,he.filter]}),Xt(ae.minzoom,he.minzoom)&&Xt(ae.maxzoom,he.maxzoom)||Qt(D,{command:"setLayerZoomRange",args:[te,he.minzoom,he.maxzoom]}),ae)Object.prototype.hasOwnProperty.call(ae,ue)&&ue!=="layout"&&ue!=="paint"&&ue!=="filter"&&ue!=="metadata"&&ue!=="minzoom"&&ue!=="maxzoom"&&(ue.indexOf("paint.")===0?xn(ae[ue],he[ue],D,te,ue.slice(6),"setPaintProperty"):Xt(ae[ue],he[ue])||Qt(D,{command:"setLayerProperty",args:[te,ue,he[ue]]}));for(ue in he)Object.prototype.hasOwnProperty.call(he,ue)&&!Object.prototype.hasOwnProperty.call(ae,ue)&&ue!=="layout"&&ue!=="paint"&&ue!=="filter"&&ue!=="metadata"&&ue!=="minzoom"&&ue!=="maxzoom"&&(ue.indexOf("paint.")===0?xn(ae[ue],he[ue],D,te,ue.slice(6),"setPaintProperty"):Xt(ae[ue],he[ue])||Qt(D,{command:"setLayerProperty",args:[te,ue,he[ue]]}))}else Qt(D,{command:"removeLayer",args:[te]}),_e=Y[Y.lastIndexOf(te)+1],Qt(D,{command:"addLayer",args:[he,_e]})})(b,r.layers,o)}catch(f){console.warn("Unable to compute style diff:",f),o=[{command:"setStyle",args:[r]}]}return o},y.bX=function(s){const r=[],o=s.id;return o===void 0&&r.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&r.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&r.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),r},y.bY=er,y.bZ=mr,y.b_=class extends ta{constructor(s,r){super(s,r),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},y.ba=function(s,r,o){return s[0]=r[0]*o,s[1]=r[1]*o,s[2]=r[2]*o,s[3]=r[3]*o,s},y.bb=function(s,r){return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3]},y.bc=a_,y.bd=fd,y.be=function(s,r,o,f,m){var b=1/Math.tan(r/2);if(s[0]=b/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=b,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,m!=null&&m!==1/0){var x=1/(f-m);s[10]=(m+f)*x,s[14]=2*m*f*x}else s[10]=-1,s[14]=-2*f;return s},y.bf=function(s){var r=new fe(16);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],r},y.bg=function(s,r,o){var f=Math.sin(o),m=Math.cos(o),b=r[0],x=r[1],E=r[2],D=r[3],k=r[4],N=r[5],F=r[6],$=r[7];return r!==s&&(s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=b*m+k*f,s[1]=x*m+N*f,s[2]=E*m+F*f,s[3]=D*m+$*f,s[4]=k*m-b*f,s[5]=N*m-x*f,s[6]=F*m-E*f,s[7]=$*m-D*f,s},y.bh=function(s,r,o){var f=Math.sin(o),m=Math.cos(o),b=r[4],x=r[5],E=r[6],D=r[7],k=r[8],N=r[9],F=r[10],$=r[11];return r!==s&&(s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[4]=b*m+k*f,s[5]=x*m+N*f,s[6]=E*m+F*f,s[7]=D*m+$*f,s[8]=k*m-b*f,s[9]=N*m-x*f,s[10]=F*m-E*f,s[11]=$*m-D*f,s},y.bi=function(){const s=new Float32Array(16);return Ee(s),s},y.bj=function(){const s=new Float64Array(16);return Ee(s),s},y.bk=function(){return new Float64Array(16)},y.bl=function(s,r,o){const f=new Float64Array(4);return Ve(f,s,r-90,o),f},y.bm=function(s,r,o,f){var m,b,x,E,D,k=r[0],N=r[1],F=r[2],$=r[3],Y=o[0],J=o[1],te=o[2],ae=o[3];return(b=k*Y+N*J+F*te+$*ae)<0&&(b=-b,Y=-Y,J=-J,te=-te,ae=-ae),1-b>ce?(m=Math.acos(b),x=Math.sin(m),E=Math.sin((1-f)*m)/x,D=Math.sin(f*m)/x):(E=1-f,D=f),s[0]=E*k+D*Y,s[1]=E*N+D*J,s[2]=E*F+D*te,s[3]=E*$+D*ae,s},y.bn=function(s){const r=new Float64Array(9);var o,f,m,b,x,E,D,k,N,F,$,Y,J,te,ae,he,_e,ue;F=(m=(f=s)[0])*(D=m+m),$=(b=f[1])*D,J=(x=f[2])*D,te=x*(k=b+b),he=(E=f[3])*D,_e=E*k,ue=E*(N=x+x),(o=r)[0]=1-(Y=b*k)-(ae=x*N),o[3]=$-ue,o[6]=J+_e,o[1]=$+ue,o[4]=1-F-ae,o[7]=te-he,o[2]=J-_e,o[5]=te+he,o[8]=1-F-Y;const me=_a(-Math.asin($t(r[2],-1,1)));let Pe,Re;return Math.hypot(r[5],r[8])<.001?(Pe=0,Re=-_a(Math.atan2(r[3],r[4]))):(Pe=_a(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),Re=_a(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:Pe,pitch:me+90,bearing:Re}},y.bo=function(s,r){return s.roll==r.roll&&s.pitch==r.pitch&&s.bearing==r.bearing},y.bp=gr,y.bq=gc,y.br=lo,y.bs=Fs,y.bt=Ai,y.bu=qe,y.bv=ct,y.bw=ai,y.bx=function(s,r,o,f,m){return qe(f,m,$t((s-r)/(o-r),0,1))},y.by=function(s,r,o,f){return s[0]=r[0]+o[0]*f,s[1]=r[1]+o[1]*f,s[2]=r[2]+o[2]*f,s},y.bz=Ae,y.c=Fe,y.c$=class{constructor(s){this.start=`${s}#start`,this.end=`${s}#end`,this.measure=s,performance.mark(this.start)}finish(){performance.mark(this.end);let s=performance.getEntriesByName(this.measure);return s.length===0&&(performance.measure(this.measure,this.start,this.end),s=performance.getEntriesByName(this.measure),performance.clearMarks(this.start),performance.clearMarks(this.end),performance.clearMeasures(this.measure)),s}},y.c0=class extends ta{constructor(s,r){super(s,r),this.current=ra}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let r=1;r<16;r++)if(s[r]!==this.current[r]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},y.c1=yu,y.c2=class extends ta{constructor(s,r){super(s,r),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},y.c3=class extends ta{constructor(s,r){super(s,r),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},y.c4=ve,y.c5=function(s,r){var o=Math.sin(r),f=Math.cos(r);return s[0]=f,s[1]=o,s[2]=0,s[3]=-o,s[4]=f,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},y.c6=function(s,r,o){var f=r[0],m=r[1],b=r[2];return s[0]=f*o[0]+m*o[3]+b*o[6],s[1]=f*o[1]+m*o[4]+b*o[7],s[2]=f*o[2]+m*o[5]+b*o[8],s},y.c7=function(s,r,o,f,m,b,x){var E=1/(r-o),D=1/(f-m),k=1/(b-x);return s[0]=-2*E,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*D,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*k,s[11]=0,s[12]=(r+o)*E,s[13]=(m+f)*D,s[14]=(x+b)*k,s[15]=1,s},y.c8=class extends ta{constructor(s,r){super(s,r),this.current=new Array}set(s){if(s!=this.current){this.current=s;const r=new Float32Array(4*s.length);for(let o=0;o<s.length;o++)r[4*o]=s[o].r,r[4*o+1]=s[o].g,r[4*o+2]=s[o].b,r[4*o+3]=s[o].a;this.gl.uniform4fv(this.location,r)}}},y.c9=class extends ta{constructor(s,r){super(s,r),this.current=new Array}set(s){if(s!=this.current){this.current=s;const r=new Float32Array(s);this.gl.uniform1fv(this.location,r)}}},y.cA=function(s,r){var o;if(!xs[r])return!1;const f=s?.target,m=((o=f?.ownerDocument)===null||o===void 0?void 0:o.defaultView)||window;return s instanceof m.MouseEvent||s instanceof m.WheelEvent},y.cB=function(s,r){return $c[r]&&"touches"in s},y.cC=function(s){return $c[s]||xs[s]},y.cD=function(s,r,o){var f=r[0],m=r[1];return s[0]=o[0]*f+o[4]*m+o[12],s[1]=o[1]*f+o[5]*m+o[13],s},y.cE=function(s,r){const{x:o,y:f}=Hr.fromLngLat(r);return!(s<0||s>25||f<0||f>=1||o<0||o>=1)},y.cF=function(s,r){return s[0]=r[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=r[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=r[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},y.cG=class extends fc{},y.cH=x5,y.cJ=se,y.cK=function(s,r){Fe.REGISTERED_PROTOCOLS[s]=r},y.cL=function(s){delete Fe.REGISTERED_PROTOCOLS[s]},y.cM=function(s,r){const o={};for(let m=0;m<s.length;m++){const b=r&&r[s[m].id]||Ps(s[m]);r&&(r[s[m].id]=b);let x=o[b];x||(x=o[b]=[]),x.push(s[m])}const f=[];for(const m in o)f.push(o[m]);return f},y.cN=Lt,y.cO=t0,y.cP=w_,y.cQ=eg,y.cR=function(s){var r;s.bucket.createArrays(),s.bucket.tilePixelRatio=Be/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const o=s.bucket.layers[0],f=o.layout,m=o._unevaluatedLayout._values,b={layoutIconSize:m["icon-size"].possiblyEvaluate(new Vr(s.bucket.zoom+1),s.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Vr(s.bucket.zoom+1),s.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Vr(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:F}=s.bucket.textSizeData;b.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Vr(N),s.canonical),m["text-size"].possiblyEvaluate(new Vr(F),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:F}=s.bucket.iconSizeData;b.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Vr(N),s.canonical),m["icon-size"].possiblyEvaluate(new Vr(F),s.canonical)]}const x=f.get("text-line-height")*li,E=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",D=f.get("text-keep-upright"),k=f.get("text-size");for(const N of s.bucket.features){const F=f.get("text-font").evaluate(N,{},s.canonical).join(","),$=k.evaluate(N,{},s.canonical),Y=b.layoutTextSize.evaluate(N,{},s.canonical),J=b.layoutIconSize.evaluate(N,{},s.canonical),te={horizontal:{},vertical:void 0},ae=N.text;let he,_e=[0,0];if(ae){const Pe=ae.toString(),Re=f.get("text-letter-spacing").evaluate(N,{},s.canonical)*li,We=Zf(Pe)?Re:0,lt=f.get("text-anchor").evaluate(N,{},s.canonical),ht=S_(o,N,s.canonical);if(!ht){const ft=f.get("text-radial-offset").evaluate(N,{},s.canonical);_e=ft?Oc(lt,[ft*li,Nr]):f.get("text-offset").evaluate(N,{},s.canonical).map((at=>at*li))}let xt=E?"center":f.get("text-justify").evaluate(N,{},s.canonical);const Ot=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(N,{},s.canonical)*li:1/0,Et=()=>{s.bucket.allowVerticalPlacement&&os(Pe)&&(te.vertical=vp(ae,s.glyphMap,s.glyphPositions,s.imagePositions,F,Ot,x,lt,"left",We,_e,y.az.vertical,!0,Y,$))};if(!E&&ht){const ft=new Set;if(xt==="auto")for(let Nt=0;Nt<ht.values.length;Nt+=2)ft.add(Wx(ht.values[Nt]));else ft.add(xt);let at=!1;for(const Nt of ft)if(!te.horizontal[Nt])if(at)te.horizontal[Nt]=te.horizontal[0];else{const Vt=vp(ae,s.glyphMap,s.glyphPositions,s.imagePositions,F,Ot,x,"center",Nt,We,_e,y.az.horizontal,!1,Y,$);Vt&&(te.horizontal[Nt]=Vt,at=Vt.positionedLines.length===1)}Et()}else{xt==="auto"&&(xt=Wx(lt));const ft=vp(ae,s.glyphMap,s.glyphPositions,s.imagePositions,F,Ot,x,lt,xt,We,_e,y.az.horizontal,!1,Y,$);ft&&(te.horizontal[xt]=ft),Et(),os(Pe)&&E&&D&&(te.vertical=vp(ae,s.glyphMap,s.glyphPositions,s.imagePositions,F,Ot,x,lt,xt,We,_e,y.az.vertical,!1,Y,$))}}let ue=!1;if(N.icon&&N.icon.name){const Pe=s.imageMap[N.icon.name];Pe&&(he=$y(s.imagePositions[N.icon.name],f.get("icon-offset").evaluate(N,{},s.canonical),f.get("icon-anchor").evaluate(N,{},s.canonical)),ue=!!Pe.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ue:s.bucket.sdfIcons!==ue&&cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Pe.pixelRatio!==s.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const me=oE(te.horizontal)||te.vertical;(r=s.bucket).iconsInText||(r.iconsInText=!!me&&me.iconsInText),(me||he)&&_5(s.bucket,N,te,he,s.imageMap,b,Y,J,_e,ue,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},y.cS=jh,y.cT=_u,y.cU=nd,y.cV=function(s){const r=new Km;return(function(o,f){for(const m in o.layers)f.writeMessage(3,Ag,o.layers[m])})(s,r),r.finish()},y.cW=function(s,r,o,f,m,b){let x=v(s,r,o,m,0);return x=v(x,r,f,b,1),x},y.cX=class{constructor(s){this.maxEntries=s,this.map=new Map}get(s){const r=this.map.get(s);return r!==void 0&&(this.map.delete(s),this.map.set(s,r)),r}set(s,r){if(this.map.has(s))this.map.delete(s);else if(this.map.size>=this.maxEntries){const o=this.map.keys().next().value;this.map.delete(o)}this.map.set(s,r)}clear(){this.map.clear()}},y.cY=Cr,y.cZ=Km,y.c_=m0,y.ca=class extends Bs{},y.cb=Fv,y.cc=class extends vn{},y.cd=np,y.ce=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},y.cf=Ml,y.cg=function(s,r,o){var f=r[0],m=r[1],b=r[2],x=o[3]*f+o[7]*m+o[11]*b+o[15];return s[0]=(o[0]*f+o[4]*m+o[8]*b+o[12])/(x=x||1),s[1]=(o[1]*f+o[5]*m+o[9]*b+o[13])/x,s[2]=(o[2]*f+o[6]*m+o[10]*b+o[14])/x,s},y.ch=class extends dc{},y.ci=class extends n{},y.cj=function(s,r){return s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]&&s[3]===r[3]&&s[4]===r[4]&&s[5]===r[5]&&s[6]===r[6]&&s[7]===r[7]&&s[8]===r[8]&&s[9]===r[9]&&s[10]===r[10]&&s[11]===r[11]&&s[12]===r[12]&&s[13]===r[13]&&s[14]===r[14]&&s[15]===r[15]},y.ck=function(s,r){var o=s[0],f=s[1],m=s[2],b=s[3],x=s[4],E=s[5],D=s[6],k=s[7],N=s[8],F=s[9],$=s[10],Y=s[11],J=s[12],te=s[13],ae=s[14],he=s[15],_e=r[0],ue=r[1],me=r[2],Pe=r[3],Re=r[4],We=r[5],lt=r[6],ht=r[7],xt=r[8],Ot=r[9],Et=r[10],ft=r[11],at=r[12],Nt=r[13],Vt=r[14],Yt=r[15];return Math.abs(o-_e)<=ce*Math.max(1,Math.abs(o),Math.abs(_e))&&Math.abs(f-ue)<=ce*Math.max(1,Math.abs(f),Math.abs(ue))&&Math.abs(m-me)<=ce*Math.max(1,Math.abs(m),Math.abs(me))&&Math.abs(b-Pe)<=ce*Math.max(1,Math.abs(b),Math.abs(Pe))&&Math.abs(x-Re)<=ce*Math.max(1,Math.abs(x),Math.abs(Re))&&Math.abs(E-We)<=ce*Math.max(1,Math.abs(E),Math.abs(We))&&Math.abs(D-lt)<=ce*Math.max(1,Math.abs(D),Math.abs(lt))&&Math.abs(k-ht)<=ce*Math.max(1,Math.abs(k),Math.abs(ht))&&Math.abs(N-xt)<=ce*Math.max(1,Math.abs(N),Math.abs(xt))&&Math.abs(F-Ot)<=ce*Math.max(1,Math.abs(F),Math.abs(Ot))&&Math.abs($-Et)<=ce*Math.max(1,Math.abs($),Math.abs(Et))&&Math.abs(Y-ft)<=ce*Math.max(1,Math.abs(Y),Math.abs(ft))&&Math.abs(J-at)<=ce*Math.max(1,Math.abs(J),Math.abs(at))&&Math.abs(te-Nt)<=ce*Math.max(1,Math.abs(te),Math.abs(Nt))&&Math.abs(ae-Vt)<=ce*Math.max(1,Math.abs(ae),Math.abs(Vt))&&Math.abs(he-Yt)<=ce*Math.max(1,Math.abs(he),Math.abs(Yt))},y.cl=function(s,r){return s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},y.cm=s=>s.type==="symbol",y.cn=s=>s.type==="circle",y.co=s=>s.type==="heatmap",y.cp=s=>s.type==="line",y.cq=s=>s.type==="fill",y.cr=s=>s.type==="fill-extrusion",y.cs=s=>s.type==="hillshade",y.ct=s=>s.type==="color-relief",y.cu=s=>s.type==="background",y.cv=s=>s.type==="custom",y.cw=wt,y.cx=function(s,r,o){if(r<=0)return s;const f=1/r;return o===void 0||Math.abs(o)<1e-10?Math.round(s*f)/f:(o>0?Math.ceil(s*f-1e-9):Math.floor(s*f+1e-10))/f},y.cy=function(s,r,o){const f=Mt(r.x-o.x,r.y-o.y),m=Mt(s.x-o.x,s.y-o.y);var b,x;return _a(Math.atan2(f[0]*m[1]-f[1]*m[0],(b=f)[0]*(x=m)[0]+b[1]*x[1]))},y.cz=jt,y.d=Ye,y.d0=function(s,r,o,f,m){return c(this,void 0,void 0,(function*(){if(oe())try{return yield bs(s,r,o,f,m)}catch{}return(function(b,x,E,D,k){const N=b.width,F=b.height;Uo&&vo||(Uo=new OffscreenCanvas(N,F),vo=Uo.getContext("2d",{willReadFrequently:!0})),Uo.width=N,Uo.height=F,vo.drawImage(b,0,0,N,F);const $=vo.getImageData(x,E,D,k);return vo.clearRect(0,0,N,F),$.data})(s,r,o,f,m)}))},y.d1=Jf,y.d2=P,y.d3=class{constructor(s,r){this.layers={[Du]:this},this.name=Du,this.version=r?r.version:1,this.extent=r?r.extent:4096,this.length=s.length,this.features=s}feature(s){return new Xx(this.features[s],this.extent)}},y.d4=su,y.d5=ro,y.e=Tr,y.f=s=>c(void 0,void 0,void 0,(function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(r)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),y.g=ee,y.h=s=>new Promise(((r,o)=>{const f=new Image;f.onload=()=>{r(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=tl}))},f.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(s)],{type:"image/png"});f.src=s.byteLength?URL.createObjectURL(m):tl})),y.i=ln,y.j=(s,r)=>Oe(Tr(s,{type:"json"}),r),y.k=_t,y.l=He,y.m=Oe,y.n=(s,r)=>Oe(Tr(s,{type:"arrayBuffer"}),r),y.o=function(s){return new Km(s).readFields(Xv,[])},y.p=Vy,y.q=function(s){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))},y.r=rp,y.s=qc,y.t=Fn,y.u=Ie,y.v=wh,y.w=cr,y.x=Yf,y.y=wo,y.z=ks})),d("worker",["./shared"],(function(y){class c{constructor(ee,ie){this.keyCache={},ee&&this.replace(ee,ie)}replace(ee,ie){this._layerConfigs={},this._layers={},this.update(ee,[],ie)}update(ee,ie,se){for(const Oe of ee){this._layerConfigs[Oe.id]=Oe;const Ye=this._layers[Oe.id]=y.bT(Oe,se);Ye._featureFilter=y.aj(Ye.filter,se),this.keyCache[Oe.id]&&delete this.keyCache[Oe.id]}for(const Oe of ie)delete this.keyCache[Oe],delete this._layerConfigs[Oe],delete this._layers[Oe];this.familiesBySource={};const we=y.cM(Object.values(this._layerConfigs),this.keyCache);for(const Oe of we){const Ye=Oe.map((Ie=>this._layers[Ie.id])),Ze=Ye[0];if(Ze.isHidden())continue;const Ue=Ze.source||"";let He=this.familiesBySource[Ue];He||(He=this.familiesBySource[Ue]={});const _t=Ze.sourceLayer||y.ai;let ot=He[_t];ot||(ot=He[_t]=[]),ot.push(Ye)}}}class A{constructor(ee){const ie={},se=[];for(const Ze in ee){const Ue=ee[Ze],He=ie[Ze]={};for(const _t in Ue){const ot=Ue[+_t];if(!ot||ot.bitmap.width===0||ot.bitmap.height===0)continue;const Ie={x:0,y:0,w:ot.bitmap.width+2,h:ot.bitmap.height+2};se.push(Ie),He[_t]={rect:Ie,metrics:ot.metrics}}}const{w:we,h:Oe}=y.p(se),Ye=new y.r({width:we||1,height:Oe||1});for(const Ze in ee){const Ue=ee[Ze];for(const He in Ue){const _t=Ue[+He];if(!_t||_t.bitmap.width===0||_t.bitmap.height===0)continue;const ot=ie[Ze][He].rect;y.r.copy(_t.bitmap,Ye,{x:0,y:0},{x:ot.x+1,y:ot.y+1},_t.bitmap)}}this.image=Ye,this.positions=ie}}y.cN("GlyphAtlas",A);class P{constructor(ee){this.tileID=new y.a2(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,ie,se,we,Oe){return y._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new y.ag;const Ye=new y.cO(Object.keys(ee.layers).sort()),Ze=new y.cP(this.tileID,this.promoteId);Ze.bucketLayerIDs=[];const Ue={},He={featureIndex:Ze,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:se,subdivisionGranularity:Oe},_t=ie.familiesBySource[this.source];for(const Ir in _t){const on=ee.layers[Ir];if(!on)continue;on.version===1&&y.w(`Vector tile source "${this.source}" layer "${Ir}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Xi=Ye.encode(Ir),Ur=[];for(let Pt=0;Pt<on.length;Pt++){const Kt=on.feature(Pt),ur=Ze.getId(Kt,Ir);Ur.push({feature:Kt,id:ur,index:Pt,sourceLayerIndex:Xi})}for(const Pt of _t[Ir]){const Kt=Pt[0];Kt.source!==this.source&&y.w(`layer.source = ${Kt.source} does not equal this.source = ${this.source}`),Kt.isHidden(this.zoom,!0)||(C(Pt,this.zoom,se),(Ue[Kt.id]=Kt.createBucket({index:Ze.bucketLayerIDs.length,layers:Pt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Xi,sourceID:this.source})).populate(Ur,He,this.tileID.canonical),Ze.bucketLayerIDs.push(Pt.map((ur=>ur.id))))}}const ot=y.bY(He.glyphDependencies,(Ir=>Object.keys(Ir).map(Number)));this.inFlightDependencies.forEach((Ir=>Ir?.abort())),this.inFlightDependencies=[];let Ie=Promise.resolve({});if(Object.keys(ot).length){const Ir=new AbortController;this.inFlightDependencies.push(Ir),Ie=we.sendAsync({type:"GG",data:{stacks:ot,source:this.source,tileID:this.tileID,type:"glyphs"}},Ir)}const Ut=Object.keys(He.iconDependencies);let ir=Promise.resolve({});if(Ut.length){const Ir=new AbortController;this.inFlightDependencies.push(Ir),ir=we.sendAsync({type:"GI",data:{icons:Ut,source:this.source,tileID:this.tileID,type:"icons"}},Ir)}const Xt=Object.keys(He.patternDependencies);let Qt=Promise.resolve({});if(Xt.length){const Ir=new AbortController;this.inFlightDependencies.push(Ir),Qt=we.sendAsync({type:"GI",data:{icons:Xt,source:this.source,tileID:this.tileID,type:"patterns"}},Ir)}const tr=He.dashDependencies;let ar=Promise.resolve({});if(Object.keys(tr).length){const Ir=new AbortController;this.inFlightDependencies.push(Ir),ar=we.sendAsync({type:"GDA",data:{dashes:tr}},Ir)}const[fn,Pn,xn,Si]=yield Promise.all([Ie,ir,Qt,ar]),dn=new A(fn),St=new y.cQ(Pn,xn);for(const Ir in Ue){const on=Ue[Ir];on instanceof y.ah?(C(on.layers,this.zoom,se),y.cR({bucket:on,glyphMap:fn,glyphPositions:dn.positions,imageMap:Pn,imagePositions:St.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:He.subdivisionGranularity})):on.hasDependencies&&(on instanceof y.cS||on instanceof y.cT||on instanceof y.cU)&&(C(on.layers,this.zoom,se),on.addFeatures(He,this.tileID.canonical,St.patternPositions,Si))}return this.status="done",{buckets:Object.values(Ue).filter((Ir=>!Ir.isEmpty())),featureIndex:Ze,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dn.image,imageAtlas:St,dashPositions:Si,glyphMap:this.returnDependencies?fn:null,iconMap:this.returnDependencies?Pn:null,glyphPositions:this.returnDependencies?dn.positions:null}}))}}function C(Fe,ee,ie){const se=new y.H(ee);for(const we of Fe)we.recalculate(se,ie)}class I{constructor(){this.loading={},this.loaded={},this.parsing={}}startLoading(ee,ie){this.loading[ee]=ie}finishLoading(ee){delete this.loading[ee]}abort(ee){const ie=this.loading[ee];ie?.abort&&(ie.abort.abort(),delete this.loading[ee])}setParsing(ee,ie){this.parsing[ee]=ie}consumeParsing(ee){const ie=this.parsing[ee];if(ie)return delete this.parsing[ee],ie}clearParsing(ee){delete this.parsing[ee]}markLoaded(ee,ie){this.loaded[ee]=ie}getLoaded(ee){const ie=this.loaded[ee];if(ie)return ie}removeLoaded(ee){delete this.loaded[ee]}clearLoaded(){this.loaded={}}}class B{constructor(ee,ie,se,we,Oe){this.type=ee,this.properties=se||{},this.extent=Oe,this.pointsArray=ie,this.id=we}loadGeometry(){return this.pointsArray.map((ee=>ee.map((ie=>new y.P(ie.x,ie.y)))))}}class G{constructor(ee,ie,se){this.version=2,this._myFeatures=ee,this.name=ie,this.length=ee.length,this.extent=se}feature(ee){return this._myFeatures[ee]}}class Z{constructor(){this.layers={}}addLayer(ee){this.layers[ee.name]=ee}}function H(Fe){let ee=y.cV(Fe);return ee.byteOffset===0&&ee.byteLength===ee.buffer.byteLength||(ee=new Uint8Array(ee)),{vectorTile:Fe,rawData:ee.buffer}}function U(Fe,ee,ie){const{extent:se}=Fe,we=Math.pow(2,ie.z-ee.z),Oe=(ie.x-ee.x*we)*se,Ye=(ie.y-ee.y*we)*se,Ze=[];for(let Ue=0;Ue<Fe.length;Ue++){const He=Fe.feature(Ue);let _t=He.loadGeometry();for(const Ie of _t)for(const Ut of Ie)Ut.x=Ut.x*we-Oe,Ut.y=Ut.y*we-Ye;const ot=128;_t=y.cW(_t,He.type,-ot,-ot,se+ot,se+ot),_t.length!==0&&Ze.push(new B(He.type,_t,He.properties,He.id,se))}return new G(Ze,Fe.name,se)}class oe{constructor(ee,ie,se){this.actor=ee,this.layerIndex=ie,this.availableImages=se,this.tileState=new I,this.overzoomedTileResultCache=new y.cX(1e3)}loadVectorTile(ee,ie){return y._(this,void 0,void 0,(function*(){const se=yield y.n(ee.request,ie);try{return{vectorTile:ee.encoding!=="mlt"?new y.cY(new y.cZ(se.data)):new y.c_(se.data),rawData:se.data,cacheControl:se.cacheControl,expires:se.expires}}catch(we){const Oe=new Uint8Array(se.data);let Ye=`Unable to parse the tile at ${ee.request.url}, `;throw Ye+=Oe[0]===31&&Oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${we.message}`,new Error(Ye)}}))}loadTile(ee){return y._(this,void 0,void 0,(function*(){const{uid:ie,overzoomParameters:se}=ee;se&&(ee.request=se.overzoomRequest);const we=this._startRequestTiming(ee),Oe=new P(ee);this.tileState.startLoading(ie,Oe);const Ye=new AbortController;Oe.abort=Ye;try{const Ze=yield this.loadVectorTile(ee,Ye);if(this.tileState.finishLoading(ie),!Ze)return null;let{vectorTile:Ue,rawData:He}=Ze;se&&({vectorTile:Ue,rawData:He}=this._getOverzoomTile(ee,Ze.vectorTile));const _t=this._getExpiryData(Ze),ot=this._finishRequestTiming(we);Oe.vectorTile=Ue,this.tileState.markLoaded(ie,Oe);const Ie={rawData:He,cacheControl:_t,resourceTiming:ot};this.tileState.setParsing(ie,Ie);try{return yield this._parseWorkerTile(Oe,ee,Ie)}finally{this.tileState.clearParsing(ie)}}catch(Ze){throw this.tileState.finishLoading(ie),Oe.status="done",this.tileState.markLoaded(ie,Oe),Ze}}))}_parseWorkerTile(ee,ie,se){return y._(this,void 0,void 0,(function*(){let we=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);if(se){const{rawData:Oe,cacheControl:Ye,resourceTiming:Ze}=se;we=y.e({rawTileData:Oe.slice(0),encoding:ie.encoding},we,Ye,Ze)}return we}))}_getExpiryData(ee){const{expires:ie,cacheControl:se}=ee,we={};return ie&&(we.expires=ie),se&&(we.cacheControl=se),we}_startRequestTiming(ee){var ie;if(!((ie=ee.request)===null||ie===void 0)&&ie.collectResourceTiming)return new y.c$(ee.request.url)}_finishRequestTiming(ee){const ie=ee?.finish();return ie?{resourceTiming:JSON.parse(JSON.stringify(ie))}:{}}_getOverzoomTile(ee,ie){const{tileID:se,source:we,overzoomParameters:Oe}=ee,{maxZoomTileID:Ye}=Oe,Ze=`${Ye.key}_${se.key}`,Ue=this.overzoomedTileResultCache.get(Ze);if(Ue)return Ue;const He=new Z,_t=this.layerIndex.familiesBySource[we];for(const Ie in _t){const Ut=ie.layers[Ie];if(!Ut)continue;const ir=U(Ut,Ye,se.canonical);ir.length>0&&He.addLayer(ir)}const ot=H(He);return this.overzoomedTileResultCache.set(Ze,ot),ot}reloadTile(ee){return y._(this,void 0,void 0,(function*(){const ie=ee.uid,se=this.tileState.getLoaded(ie);if(!se)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(se.showCollisionBoxes=ee.showCollisionBoxes,se.status==="parsing"){const we=this.tileState.consumeParsing(ie);return yield this._parseWorkerTile(se,ee,we)}if(se.status==="done"&&se.vectorTile)return yield this._parseWorkerTile(se,ee)}))}abortTile(ee){return y._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return y._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}}class ce{constructor(){this.loaded={}}loadTile(ee){return y._(this,void 0,void 0,(function*(){const{uid:ie,encoding:se,rawImageData:we,redFactor:Oe,greenFactor:Ye,blueFactor:Ze,baseShift:Ue}=ee,He=we.width+2,_t=we.height+2,ot=y.b(we)?new y.R({width:He,height:_t},yield y.d0(we,-1,-1,He,_t)):we,Ie=new y.d1(ie,ot,se,Oe,Ye,Ze,Ue);return this.loaded=this.loaded||{},this.loaded[ie]=Ie,Ie}))}removeTile(ee){const ie=this.loaded,se=ee.uid;ie&&ie[se]&&delete ie[se]}}var fe,ve,Ee=(function(){if(ve)return fe;function Fe(ie,se){if(ie.length!==0){ee(ie[0],se);for(var we=1;we<ie.length;we++)ee(ie[we],!se)}}function ee(ie,se){for(var we=0,Oe=0,Ye=0,Ze=ie.length,Ue=Ze-1;Ye<Ze;Ue=Ye++){var He=(ie[Ye][0]-ie[Ue][0])*(ie[Ue][1]+ie[Ye][1]),_t=we+He;Oe+=Math.abs(we)>=Math.abs(He)?we-_t+He:He-_t+we,we=_t}we+Oe>=0!=!!se&&ie.reverse()}return ve=1,fe=function ie(se,we){var Oe,Ye=se&&se.type;if(Ye==="FeatureCollection")for(Oe=0;Oe<se.features.length;Oe++)ie(se.features[Oe],we);else if(Ye==="GeometryCollection")for(Oe=0;Oe<se.geometries.length;Oe++)ie(se.geometries[Oe],we);else if(Ye==="Feature")ie(se.geometry,we);else if(Ye==="Polygon")Fe(se.coordinates,we);else if(Ye==="MultiPolygon")for(Oe=0;Oe<se.coordinates.length;Oe++)Fe(se.coordinates[Oe],we);return se}})(),Me=y.d2(Ee);const ze={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Fe=>Fe},Ke=Math.fround||(mt=new Float32Array(1),Fe=>(mt[0]=+Fe,mt[0]));var mt;class zt{constructor(ee){this.options=Object.assign(Object.create(ze),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:ie,minZoom:se,maxZoom:we}=this.options;ie&&console.time("total time");const Oe=`prepare ${ee.length} points`;ie&&console.time(Oe),this.points=ee;const Ye=[];for(let Ue=0;Ue<ee.length;Ue++){const He=ee[Ue];if(!He.geometry)continue;const[_t,ot]=He.geometry.coordinates,Ie=Ke(dt(_t)),Ut=Ke(It(ot));Ye.push(Ie,Ut,1/0,Ue,-1,1),this.options.reduce&&Ye.push(0)}let Ze=this.trees[we+1]=this._createTree(Ye);ie&&console.timeEnd(Oe);for(let Ue=we;Ue>=se;Ue--){const He=+Date.now();Ze=this.trees[Ue]=this._createTree(this._cluster(Ze,Ue)),ie&&console.log("z%d: %d clusters in %dms",Ue,Ze.numItems,+Date.now()-He)}return ie&&console.timeEnd("total time"),this}getClusters(ee,ie){let se=((ee[0]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,ee[1]));let Oe=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Ye=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)se=-180,Oe=180;else if(se>Oe){const ot=this.getClusters([se,we,180,Ye],ie),Ie=this.getClusters([-180,we,Oe,Ye],ie);return ot.concat(Ie)}const Ze=this.trees[this._limitZoom(ie)],Ue=Ze.range(dt(se),It(Ye),dt(Oe),It(we)),He=Ze.data,_t=[];for(const ot of Ue){const Ie=this.stride*ot;_t.push(He[Ie+5]>1?Ge(He,Ie,this.clusterProps):this.points[He[Ie+3]])}return _t}getChildren(ee){const ie=this._getOriginId(ee),se=this._getOriginZoom(ee),we="No cluster with the specified id.",Oe=this.trees[se];if(!Oe)throw new Error(we);const Ye=Oe.data;if(ie*this.stride>=Ye.length)throw new Error(we);const Ze=this.options.radius/(this.options.extent*Math.pow(2,se-1)),Ue=Oe.within(Ye[ie*this.stride],Ye[ie*this.stride+1],Ze),He=[];for(const _t of Ue){const ot=_t*this.stride;Ye[ot+4]===ee&&He.push(Ye[ot+5]>1?Ge(Ye,ot,this.clusterProps):this.points[Ye[ot+3]])}if(He.length===0)throw new Error(we);return He}getLeaves(ee,ie,se){const we=[];return this._appendLeaves(we,ee,ie=ie||10,se=se||0,0),we}getTile(ee,ie,se){const we=this.trees[this._limitZoom(ee)],Oe=Math.pow(2,ee),{extent:Ye,radius:Ze}=this.options,Ue=Ze/Ye,He=(se-Ue)/Oe,_t=(se+1+Ue)/Oe,ot={features:[]};return this._addTileFeatures(we.range((ie-Ue)/Oe,He,(ie+1+Ue)/Oe,_t),we.data,ie,se,Oe,ot),ie===0&&this._addTileFeatures(we.range(1-Ue/Oe,He,1,_t),we.data,Oe,se,Oe,ot),ie===Oe-1&&this._addTileFeatures(we.range(0,He,Ue/Oe,_t),we.data,-1,se,Oe,ot),ot.features.length?ot:null}getClusterExpansionZoom(ee){let ie=this._getOriginZoom(ee)-1;for(;ie<=this.options.maxZoom;){const se=this.getChildren(ee);if(ie++,se.length!==1)break;ee=se[0].properties.cluster_id}return ie}_appendLeaves(ee,ie,se,we,Oe){const Ye=this.getChildren(ie);for(const Ze of Ye){const Ue=Ze.properties;if(Ue&&Ue.cluster?Oe+Ue.point_count<=we?Oe+=Ue.point_count:Oe=this._appendLeaves(ee,Ue.cluster_id,se,we,Oe):Oe<we?Oe++:ee.push(Ze),ee.length===se)break}return Oe}_createTree(ee){const ie=new y.aT(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let se=0;se<ee.length;se+=this.stride)ie.add(ee[se],ee[se+1]);return ie.finish(),ie.data=ee,ie}_addTileFeatures(ee,ie,se,we,Oe,Ye){for(const Ze of ee){const Ue=Ze*this.stride,He=ie[Ue+5]>1;let _t,ot,Ie;if(He)_t=Te(ie,Ue,this.clusterProps),ot=ie[Ue],Ie=ie[Ue+1];else{const Xt=this.points[ie[Ue+3]];_t=Xt.properties;const[Qt,tr]=Xt.geometry.coordinates;ot=dt(Qt),Ie=It(tr)}const Ut={type:1,geometry:[[Math.round(this.options.extent*(ot*Oe-se)),Math.round(this.options.extent*(Ie*Oe-we))]],tags:_t};let ir;ir=He||this.options.generateId?ie[Ue+3]:this.points[ie[Ue+3]].id,ir!==void 0&&(Ut.id=ir),Ye.features.push(Ut)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ie){const{radius:se,extent:we,reduce:Oe,minPoints:Ye}=this.options,Ze=se/(we*Math.pow(2,ie)),Ue=ee.data,He=[],_t=this.stride;for(let ot=0;ot<Ue.length;ot+=_t){if(Ue[ot+2]<=ie)continue;Ue[ot+2]=ie;const Ie=Ue[ot],Ut=Ue[ot+1],ir=ee.within(Ue[ot],Ue[ot+1],Ze),Xt=Ue[ot+5];let Qt=Xt;for(const tr of ir){const ar=tr*_t;Ue[ar+2]>ie&&(Qt+=Ue[ar+5])}if(Qt>Xt&&Qt>=Ye){let tr,ar=Ie*Xt,fn=Ut*Xt,Pn=-1;const xn=(ot/_t<<5)+(ie+1)+this.points.length;for(const Si of ir){const dn=Si*_t;if(Ue[dn+2]<=ie)continue;Ue[dn+2]=ie;const St=Ue[dn+5];ar+=Ue[dn]*St,fn+=Ue[dn+1]*St,Ue[dn+4]=xn,Oe&&(tr||(tr=this._map(Ue,ot,!0),Pn=this.clusterProps.length,this.clusterProps.push(tr)),Oe(tr,this._map(Ue,dn)))}Ue[ot+4]=xn,He.push(ar/Qt,fn/Qt,1/0,xn,-1,Qt),Oe&&He.push(Pn)}else{for(let tr=0;tr<_t;tr++)He.push(Ue[ot+tr]);if(Qt>1)for(const tr of ir){const ar=tr*_t;if(!(Ue[ar+2]<=ie)){Ue[ar+2]=ie;for(let fn=0;fn<_t;fn++)He.push(Ue[ar+fn])}}}}return He}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ie,se){if(ee[ie+5]>1){const Ye=this.clusterProps[ee[ie+6]];return se?Object.assign({},Ye):Ye}const we=this.points[ee[ie+3]].properties,Oe=this.options.map(we);return se&&Oe===we?Object.assign({},Oe):Oe}}function Ge(Fe,ee,ie){return{type:"Feature",id:Fe[ee+3],properties:Te(Fe,ee,ie),geometry:{type:"Point",coordinates:[(se=Fe[ee],360*(se-.5)),Rt(Fe[ee+1])]}};var se}function Te(Fe,ee,ie){const se=Fe[ee+5],we=se>=1e4?`${Math.round(se/1e3)}k`:se>=1e3?Math.round(se/100)/10+"k":se,Oe=Fe[ee+6],Ye=Oe===-1?{}:Object.assign({},ie[Oe]);return Object.assign(Ye,{cluster:!0,cluster_id:Fe[ee+3],point_count:se,point_count_abbreviated:we})}function dt(Fe){return Fe/360+.5}function It(Fe){const ee=Math.sin(Fe*Math.PI/180),ie=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ie<0?0:ie>1?1:ie}function Rt(Fe){const ee=(180-360*Fe)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Ve(Fe,ee,ie,se){let we=se;const Oe=ee+(ie-ee>>1);let Ye,Ze=ie-ee;const Ue=Fe[ee],He=Fe[ee+1],_t=Fe[ie],ot=Fe[ie+1];for(let Ie=ee+3;Ie<ie;Ie+=3){const Ut=it(Fe[Ie],Fe[Ie+1],Ue,He,_t,ot);if(Ut>we)Ye=Ie,we=Ut;else if(Ut===we){const ir=Math.abs(Ie-Oe);ir<Ze&&(Ye=Ie,Ze=ir)}}we>se&&(Ye-ee>3&&Ve(Fe,ee,Ye,se),Fe[Ye+2]=we,ie-Ye>3&&Ve(Fe,Ye,ie,se))}function it(Fe,ee,ie,se,we,Oe){let Ye=we-ie,Ze=Oe-se;if(Ye!==0||Ze!==0){const Ue=((Fe-ie)*Ye+(ee-se)*Ze)/(Ye*Ye+Ze*Ze);Ue>1?(ie=we,se=Oe):Ue>0&&(ie+=Ye*Ue,se+=Ze*Ue)}return Ye=Fe-ie,Ze=ee-se,Ye*Ye+Ze*Ze}function Mt(Fe,ee,ie,se){const we={type:ee,geom:ie},Oe={id:Fe??null,type:we.type,geometry:we.geom,tags:se,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(we.type){case"Point":case"MultiPoint":case"LineString":Be(Oe,we.geom);break;case"Polygon":Be(Oe,we.geom[0]);break;case"MultiLineString":for(const Ye of we.geom)Be(Oe,Ye);break;case"MultiPolygon":for(const Ye of we.geom)Be(Oe,Ye[0])}return Oe}function Be(Fe,ee){for(let ie=0;ie<ee.length;ie+=3)Fe.minX=Math.min(Fe.minX,ee[ie]),Fe.minY=Math.min(Fe.minY,ee[ie+1]),Fe.maxX=Math.max(Fe.maxX,ee[ie]),Fe.maxY=Math.max(Fe.maxY,ee[ie+1])}function yt(Fe,ee){const ie=[];switch(Fe.type){case"FeatureCollection":for(let se=0;se<Fe.features.length;se++)Ae(ie,Fe.features[se],ee,se);break;case"Feature":Ae(ie,Fe,ee);break;default:Ae(ie,{geometry:Fe,properties:void 0},ee)}return ie}function Ae(Fe,ee,ie,se){if(!ee.geometry)return;if(ee.geometry.type==="GeometryCollection"){for(const Ze of ee.geometry.geometries)Ae(Fe,{id:ee.id,geometry:Ze,properties:ee.properties},ie,se);return}if(!ee.geometry.coordinates?.length)return;const Oe=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let Ye=ee.id;switch(ie.promoteId?Ye=ee.properties?.[ie.promoteId]:ie.generateId&&(Ye=se||0),ee.geometry.type){case"Point":{const Ze=[];return qe(ee.geometry.coordinates,Ze),void Fe.push(Mt(Ye,ee.geometry.type,Ze,ee.properties))}case"MultiPoint":{const Ze=[];for(const Ue of ee.geometry.coordinates)qe(Ue,Ze);return void Fe.push(Mt(Ye,ee.geometry.type,Ze,ee.properties))}case"LineString":{const Ze=[];return ct(ee.geometry.coordinates,Ze,Oe,!1),void Fe.push(Mt(Ye,ee.geometry.type,Ze,ee.properties))}case"MultiLineString":{if(ie.lineMetrics){for(const Ue of ee.geometry.coordinates){const He=[];ct(Ue,He,Oe,!1),Fe.push(Mt(Ye,"LineString",He,ee.properties))}return}const Ze=[];return wt(ee.geometry.coordinates,Ze,Oe,!1),void Fe.push(Mt(Ye,ee.geometry.type,Ze,ee.properties))}case"Polygon":{const Ze=[];return wt(ee.geometry.coordinates,Ze,Oe,!0),void Fe.push(Mt(Ye,ee.geometry.type,Ze,ee.properties))}case"MultiPolygon":{const Ze=[];for(const Ue of ee.geometry.coordinates){const He=[];wt(Ue,He,Oe,!0),Ze.push(He)}return void Fe.push(Mt(Ye,ee.geometry.type,Ze,ee.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function qe(Fe,ee){ee.push(jt(Fe[0]),$t(Fe[1]),0)}function ct(Fe,ee,ie,se){let we,Oe,Ye=0;for(let Ue=0;Ue<Fe.length;Ue++){const He=jt(Fe[Ue][0]),_t=$t(Fe[Ue][1]);ee.push(He,_t,0),Ue>0&&(Ye+=se?(we*_t-He*Oe)/2:Math.sqrt(Math.pow(He-we,2)+Math.pow(_t-Oe,2))),we=He,Oe=_t}const Ze=ee.length-3;ee[2]=1,ie>0&&Ve(ee,0,Ze,ie),ee[Ze+2]=1,ee.size=Math.abs(Ye),ee.start=0,ee.end=ee.size}function wt(Fe,ee,ie,se){for(let we=0;we<Fe.length;we++){const Oe=[];ct(Fe[we],Oe,ie,se),ee.push(Oe)}}function jt(Fe){return Fe/360+.5}function $t(Fe){const ee=Math.sin(Fe*Math.PI/180),ie=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ie<0?0:ie>1?1:ie}function Ft(Fe,ee,ie,se,we,Oe,Ye,Ze){if(se/=ee,Oe>=(ie/=ee)&&Ye<se)return Fe;if(Ye<ie||Oe>=se)return null;const Ue=[];for(const He of Fe){const _t=we===0?He.minX:He.minY,ot=we===0?He.maxX:He.maxY;if(_t>=ie&&ot<se)Ue.push(He);else if(!(ot<ie||_t>=se))switch(He.type){case"Point":case"MultiPoint":{const Ie=[];if(Tr(He.geometry,Ie,ie,se,we),!Ie.length)continue;Ue.push(Mt(He.id,Ie.length===3?"Point":"MultiPoint",Ie,He.tags));continue}case"LineString":{const Ie=[];if(pt(He.geometry,Ie,ie,se,we,!1,Ze.lineMetrics),!Ie.length)continue;if(Ze.lineMetrics){for(const Ut of Ie)Ue.push(Mt(He.id,He.type,Ut,He.tags));continue}if(Ie.length>1){Ue.push(Mt(He.id,"MultiLineString",Ie,He.tags));continue}Ue.push(Mt(He.id,He.type,Ie[0],He.tags));continue}case"MultiLineString":{const Ie=[];if(mr(He.geometry,Ie,ie,se,we,!1),!Ie.length)continue;if(Ie.length===1){Ue.push(Mt(He.id,"LineString",Ie[0],He.tags));continue}Ue.push(Mt(He.id,He.type,Ie,He.tags));continue}case"Polygon":{const Ie=[];if(mr(He.geometry,Ie,ie,se,we,!0),!Ie.length)continue;Ue.push(Mt(He.id,He.type,Ie,He.tags));continue}case"MultiPolygon":{const Ie=[];for(const Ut of He.geometry){const ir=[];mr(Ut,ir,ie,se,we,!0),ir.length&&Ie.push(ir)}if(!Ie.length)continue;Ue.push(Mt(He.id,He.type,Ie,He.tags));continue}}}return Ue.length?Ue:null}function Tr(Fe,ee,ie,se,we){for(let Oe=0;Oe<Fe.length;Oe+=3){const Ye=Fe[Oe+we];Ye>=ie&&Ye<=se&&At(ee,Fe[Oe],Fe[Oe+1],Fe[Oe+2])}}function pt(Fe,ee,ie,se,we,Oe,Ye){let Ze=er(Fe);const Ue=we===0?Mn:cr;let He,_t,ot=Fe.start;for(let Qt=0;Qt<Fe.length-3;Qt+=3){const tr=Fe[Qt],ar=Fe[Qt+1],fn=Fe[Qt+2],Pn=Fe[Qt+3],xn=Fe[Qt+4],Si=we===0?tr:ar,dn=we===0?Pn:xn;let St=!1;Ye&&(He=Math.sqrt(Math.pow(tr-Pn,2)+Math.pow(ar-xn,2))),Si<ie?dn>ie&&(_t=Ue(Ze,tr,ar,Pn,xn,ie),Ye&&(Ze.start=ot+He*_t)):Si>se?dn<se&&(_t=Ue(Ze,tr,ar,Pn,xn,se),Ye&&(Ze.start=ot+He*_t)):At(Ze,tr,ar,fn),dn<ie&&Si>=ie&&(_t=Ue(Ze,tr,ar,Pn,xn,ie),St=!0),dn>se&&Si<=se&&(_t=Ue(Ze,tr,ar,Pn,xn,se),St=!0),!Oe&&St&&(Ye&&(Ze.end=ot+He*_t),ee.push(Ze),Ze=er(Fe)),Ye&&(ot+=He)}let Ie=Fe.length-3;const Ut=Fe[Ie],ir=Fe[Ie+1],Xt=we===0?Ut:ir;Xt>=ie&&Xt<=se&&At(Ze,Ut,ir,Fe[Ie+2]),Ie=Ze.length-3,Oe&&Ie>=3&&(Ze[Ie]!==Ze[0]||Ze[Ie+1]!==Ze[1])&&At(Ze,Ze[0],Ze[1],Ze[2]),Ze.length&&ee.push(Ze)}function er(Fe){const ee=[];return ee.size=Fe.size,ee.start=Fe.start,ee.end=Fe.end,ee}function mr(Fe,ee,ie,se,we,Oe){for(const Ye of Fe)pt(Ye,ee,ie,se,we,Oe,!1)}function At(Fe,ee,ie,se){Fe.push(ee,ie,se)}function Mn(Fe,ee,ie,se,we,Oe){const Ye=(Oe-ee)/(se-ee);return At(Fe,Oe,ie+(we-ie)*Ye,1),Ye}function cr(Fe,ee,ie,se,we,Oe){const Ye=(Oe-ie)/(we-ie);return At(Fe,ee+(se-ee)*Ye,Oe,1),Ye}function Xr(Fe,ee){const ie=ee.buffer/ee.extent;let se=Fe;const we=Ft(Fe,1,-1-ie,ie,0,-1,2,ee),Oe=Ft(Fe,1,1-ie,2+ie,0,-1,2,ee);return(we||Oe)&&(se=Ft(Fe,1,-ie,1+ie,0,-1,2,ee)||[],we&&(se=ln(we,1).concat(se)),Oe&&(se=se.concat(ln(Oe,-1)))),se}function ln(Fe,ee){const ie=[];for(const se of Fe)switch(se.type){case"Point":case"MultiPoint":case"LineString":{const we=Lr(se.geometry,ee);ie.push(Mt(se.id,se.type,we,se.tags));continue}case"MultiLineString":case"Polygon":{const we=[];for(const Oe of se.geometry)we.push(Lr(Oe,ee));ie.push(Mt(se.id,se.type,we,se.tags));continue}case"MultiPolygon":{const we=[];for(const Oe of se.geometry){const Ye=[];for(const Ze of Oe)Ye.push(Lr(Ze,ee));we.push(Ye)}ie.push(Mt(se.id,se.type,we,se.tags));continue}}return ie}function Lr(Fe,ee){const ie=[];ie.size=Fe.size,Fe.start!==void 0&&(ie.start=Fe.start,ie.end=Fe.end);for(let se=0;se<Fe.length;se+=3)ie.push(Fe[se]+ee,Fe[se+1],Fe[se+2]);return ie}function va(Fe,ee){if(Fe.transformed)return Fe;const ie=1<<Fe.z,se=Fe.x,we=Fe.y;for(const Oe of Fe.features){if(Oe.type===1){const Ze=[];for(let Ue=0;Ue<Oe.geometry.length;Ue+=2)Ze.push(tl(Oe.geometry[Ue],Oe.geometry[Ue+1],ee,ie,se,we));Oe.geometry=Ze;continue}const Ye=[];for(const Ze of Oe.geometry){const Ue=[];for(let He=0;He<Ze.length;He+=2)Ue.push(tl(Ze[He],Ze[He+1],ee,ie,se,we));Ye.push(Ue)}Oe.geometry=Ye}return Fe.transformed=!0,Fe}function tl(Fe,ee,ie,se,we,Oe){return[Math.round(ie*(Fe*se-we)),Math.round(ie*(ee*se-Oe))]}function bs(Fe,ee,ie,se,we){const Oe=ee===we.maxZoom?0:we.tolerance/((1<<ee)*we.extent),Ye={features:[],numPoints:0,numSimplified:0,numFeatures:Fe.length,source:null,x:ie,y:se,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ze of Fe)Uo(Ye,Ze,Oe,we);return Ye}function Uo(Fe,ee,ie,se){Fe.minX=Math.min(Fe.minX,ee.minX),Fe.minY=Math.min(Fe.minY,ee.minY),Fe.maxX=Math.max(Fe.maxX,ee.maxX),Fe.maxY=Math.max(Fe.maxY,ee.maxY);let we,Oe=ee.tags||null;switch(ee.type){case"Point":case"MultiPoint":{const Ye=[];for(let Ze=0;Ze<ee.geometry.length;Ze+=3)Ye.push(ee.geometry[Ze],ee.geometry[Ze+1]),Fe.numPoints++,Fe.numSimplified++;if(!Ye.length)return;we={type:1,tags:Oe,geometry:Ye};break}case"LineString":{const Ye=[];if(vo(Ye,ee.geometry,Fe,ie,!1,!1),!Ye.length)return;if(se.lineMetrics){Oe={};for(const Ze in ee.tags)Oe[Ze]=ee.tags[Ze];Oe.mapbox_clip_start=ee.geometry.start/ee.geometry.size,Oe.mapbox_clip_end=ee.geometry.end/ee.geometry.size}we={type:2,tags:Oe,geometry:Ye};break}case"MultiLineString":case"Polygon":{const Ye=[];for(let Ze=0;Ze<ee.geometry.length;Ze++)vo(Ye,ee.geometry[Ze],Fe,ie,ee.type==="Polygon",Ze===0);if(!Ye.length)return;we={type:ee.type==="Polygon"?3:2,tags:Oe,geometry:Ye};break}case"MultiPolygon":{const Ye=[];for(let Ze=0;Ze<ee.geometry.length;Ze++){const Ue=ee.geometry[Ze];for(let He=0;He<Ue.length;He++)vo(Ye,Ue[He],Fe,ie,!0,He===0)}if(!Ye.length)return;we={type:3,tags:Oe,geometry:Ye};break}}ee.id!==null&&(we.id=ee.id),Fe.features.push(we)}function vo(Fe,ee,ie,se,we,Oe){const Ye=se*se;if(se>0&&ee.size<(we?Ye:se))return void(ie.numPoints+=ee.length/3);const Ze=[];for(let Ue=0;Ue<ee.length;Ue+=3)(se===0||ee[Ue+2]>Ye)&&(ie.numSimplified++,Ze.push(ee[Ue],ee[Ue+1])),ie.numPoints++;we&&(function(Ue,He){let _t=0;for(let ot=0,Ie=Ue.length,Ut=Ie-2;ot<Ie;Ut=ot,ot+=2)_t+=(Ue[ot]-Ue[Ut])*(Ue[ot+1]+Ue[Ut+1]);if(_t>0===He)for(let ot=0,Ie=Ue.length;ot<Ie/2;ot+=2){const Ut=Ue[ot],ir=Ue[ot+1];Ue[ot]=Ue[Ie-2-ot],Ue[ot+1]=Ue[Ie-1-ot],Ue[Ie-2-ot]=Ut,Ue[Ie-1-ot]=ir}})(Ze,Oe),Fe.push(Ze)}function qc(Fe,ee,ie){const se=!!ee.newGeometry,we=ee.removeAllProperties||ee.removeProperties?.length>0||ee.addOrUpdateProperties?.length>0;if(se){let Oe=yt({type:"FeatureCollection",features:[{type:"Feature",id:Fe.id,geometry:ee.newGeometry,properties:we?ni(Fe.tags,ee):Fe.tags}]},ie);return Oe=Xr(Oe,ie),Oe[0]}if(we){const Oe={...Fe};return Oe.tags=ni(Oe.tags,ee),Oe}return null}function ni(Fe,ee){if(ee.removeAllProperties)return{};const ie={...Fe||{}};if(ee.removeProperties)for(const se of ee.removeProperties)delete ie[se];if(ee.addOrUpdateProperties)for(const{key:se,value:we}of ee.addOrUpdateProperties)ie[se]=we;return ie}const _a={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class $c{options;tiles;tileCoords;stats={};total=0;source;constructor(ee,ie){const se=(ie=this.options=Object.assign({},_a,ie)).debug;if(se&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let we=yt(ee,ie);this.tiles={},this.tileCoords=[],se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),we=Xr(we,ie),we.length&&this.splitTile(we,0,0,0),ie.updateable&&(this.source=we),se&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,ie,se,we,Oe,Ye,Ze){const Ue=[ee,ie,se,we],He=this.options,_t=He.debug;for(;Ue.length;){we=Ue.pop(),se=Ue.pop(),ie=Ue.pop(),ee=Ue.pop();const ot=1<<ie,Ie=xs(ie,se,we);let Ut=this.tiles[Ie];if(!Ut&&(_t>1&&console.time("creation"),Ut=this.tiles[Ie]=bs(ee,ie,se,we,He),this.tileCoords.push({z:ie,x:se,y:we,id:Ie}),_t)){_t>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,se,we,Ut.numFeatures,Ut.numPoints,Ut.numSimplified),console.timeEnd("creation"));const St=`z${ie}`;this.stats[St]=(this.stats[St]||0)+1,this.total++}if(Ut.source=ee,Oe==null){if(ie===He.indexMaxZoom||Ut.numPoints<=He.indexMaxPoints)continue}else{if(ie===He.maxZoom||ie===Oe)continue;if(Oe!=null){const St=Oe-ie;if(se!==Ye>>St||we!==Ze>>St)continue}}if(Ut.source=null,!ee.length)continue;_t>1&&console.time("clipping");const ir=.5*He.buffer/He.extent,Xt=.5-ir,Qt=.5+ir,tr=1+ir;let ar=null,fn=null,Pn=null,xn=null;const Si=Ft(ee,ot,se-ir,se+Qt,0,Ut.minX,Ut.maxX,He),dn=Ft(ee,ot,se+Xt,se+tr,0,Ut.minX,Ut.maxX,He);Si&&(ar=Ft(Si,ot,we-ir,we+Qt,1,Ut.minY,Ut.maxY,He),fn=Ft(Si,ot,we+Xt,we+tr,1,Ut.minY,Ut.maxY,He)),dn&&(Pn=Ft(dn,ot,we-ir,we+Qt,1,Ut.minY,Ut.maxY,He),xn=Ft(dn,ot,we+Xt,we+tr,1,Ut.minY,Ut.maxY,He)),_t>1&&console.timeEnd("clipping"),Ue.push(ar||[],ie+1,2*se,2*we),Ue.push(fn||[],ie+1,2*se,2*we+1),Ue.push(Pn||[],ie+1,2*se+1,2*we),Ue.push(xn||[],ie+1,2*se+1,2*we+1)}}getTile(ee,ie,se){ee=+ee,ie=+ie,se=+se;const we=this.options,{extent:Oe,debug:Ye}=we;if(ee<0||ee>24)return null;const Ze=1<<ee,Ue=xs(ee,ie=ie+Ze&Ze-1,se);if(this.tiles[Ue])return va(this.tiles[Ue],Oe);Ye>1&&console.log("drilling down to z%d-%d-%d",ee,ie,se);let He,_t=ee,ot=ie,Ie=se;for(;!He&&_t>0;)_t--,ot>>=1,Ie>>=1,He=this.tiles[xs(_t,ot,Ie)];return He?.source?(Ye>1&&(console.log("found parent tile z%d-%d-%d",_t,ot,Ie),console.time("drilling down")),this.splitTile(He.source,_t,ot,Ie,ee,ie,se),Ye>1&&console.timeEnd("drilling down"),this.tiles[Ue]?va(this.tiles[Ue],Oe):null):null}invalidateTiles(ee){const ie=this.options,{debug:se}=ie;let we=1/0,Oe=-1/0,Ye=1/0,Ze=-1/0;for(const _t of ee)we=Math.min(we,_t.minX),Oe=Math.max(Oe,_t.maxX),Ye=Math.min(Ye,_t.minY),Ze=Math.max(Ze,_t.maxY);const Ue=ie.buffer/ie.extent,He=new Set;for(const _t in this.tiles){const ot=this.tiles[_t],Ie=1<<ot.z,Ut=(ot.x-Ue)/Ie,ir=(ot.x+1+Ue)/Ie,Xt=(ot.y-Ue)/Ie,Qt=(ot.y+1+Ue)/Ie;if(Oe<Ut||we>=ir||Ze<Xt||Ye>=Qt)continue;let tr=!1;for(const ar of ee)if(ar.maxX>=Ut&&ar.minX<ir&&ar.maxY>=Xt&&ar.minY<Qt){tr=!0;break}if(tr){if(se){se>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ot.z,ot.x,ot.y,ot.numFeatures,ot.numPoints,ot.numSimplified);const ar=`z${ot.z}`;this.stats[ar]=(this.stats[ar]||0)-1,this.total--}delete this.tiles[_t],He.add(_t)}}He.size&&(this.tileCoords=this.tileCoords.filter((_t=>!He.has(_t.id))))}updateData(ee){const ie=this.options,se=ie.debug;if(!ie.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");const{affected:we,source:Oe}=(function(ot,Ie,Ut){const ir=(function(Qt){return Qt?{removeAll:Qt.removeAll,remove:new Set(Qt.remove||[]),add:new Map(Qt.add?.map((tr=>[tr.id,tr]))),update:new Map(Qt.update?.map((tr=>[tr.id,tr])))}:{remove:new Set,add:new Map,update:new Map}})(Ie);let Xt=[];if(ir.removeAll&&(Xt=ot,ot=[]),ir.remove.size||ir.add.size){const Qt=[];for(const tr of ot){const{id:ar}=tr;(ir.remove.has(ar)||ir.add.has(ar))&&Qt.push(tr)}if(Qt.length){Xt.push(...Qt);const tr=new Set(Qt.map((ar=>ar.id)));ot=ot.filter((ar=>!tr.has(ar.id)))}if(ir.add.size){let tr=yt({type:"FeatureCollection",features:Array.from(ir.add.values())},Ut);tr=Xr(tr,Ut),Xt.push(...tr),ot.push(...tr)}}if(ir.update.size)for(const[Qt,tr]of ir.update){const ar=ot.findIndex((xn=>xn.id===Qt));if(ar===-1)continue;const fn=ot[ar],Pn=qc(fn,tr,Ut);Pn&&(Xt.push(fn,Pn),ot[ar]=Pn)}return{affected:Xt,source:ot}})(this.source,ee,ie);if(!we.length)return;this.source=Oe,se>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(we),se>1&&console.timeEnd("invalidating");const[Ye,Ze,Ue]=[0,0,0],He=bs(this.source,Ye,Ze,Ue,this.options);He.source=this.source;const _t=xs(Ye,Ze,Ue);if(this.tiles[_t]=He,this.tileCoords.push({z:Ye,x:Ze,y:Ue,id:_t}),se){const ot=`z${Ye}`;this.stats[ot]=(this.stats[ot]||0)+1,this.total++}}}function xs(Fe,ee,ie){return 32*((1<<Fe)*ie+ee)+Fe}class ws{constructor(ee,ie,se,we=Xu){this._dataUpdateable=new Map,this.actor=ee,this.layerIndex=ie,this.availableImages=se,this.tileState=new I,this._createGeoJSONIndex=we}loadVectorTile(ee){if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const{z:ie,x:se,y:we}=ee.tileID.canonical,Oe=this._geoJSONIndex.getTile(ie,se,we);return Oe?H(new y.d3(Oe.features,{version:2,extent:y.a5})):null}loadTile(ee){return y._(this,void 0,void 0,(function*(){const{uid:ie}=ee,se=new P(ee);se.abort=new AbortController;try{const we=this.loadVectorTile(ee);if(!we)return null;const{vectorTile:Oe,rawData:Ye}=we;se.vectorTile=Oe,this.tileState.markLoaded(ie,se);const Ze={rawData:Ye};this.tileState.setParsing(ie,Ze);try{return yield this._parseWorkerTile(se,ee,Ze)}finally{this.tileState.clearParsing(ie)}}catch(we){throw se.status="done",this.tileState.markLoaded(ie,se),we}}))}_reloadLoadedTile(ee){return y._(this,void 0,void 0,(function*(){const ie=ee.uid,se=this.tileState.getLoaded(ie);if(!se)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(se.showCollisionBoxes=ee.showCollisionBoxes,se.status==="parsing"){const we=this.tileState.consumeParsing(ie);return yield this._parseWorkerTile(se,ee,we)}if(se.status==="done"&&se.vectorTile)return yield this._parseWorkerTile(se,ee)}))}_parseWorkerTile(ee,ie,se){return y._(this,void 0,void 0,(function*(){let we=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ie.subdivisionGranularity);if(se){const{rawData:Oe}=se;we=y.e({rawTileData:Oe.slice(0)},we)}return we}))}abortTile(ee){return y._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return y._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}loadData(ee){return y._(this,void 0,void 0,(function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const se=this._startRequestTiming(ee);this._pendingRequest=new AbortController;try{(!this._pendingData||ee.request||ee.data||ee.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest));const we=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(we,ee),this.tileState.clearLoaded();const Oe={};return ee.request&&(Oe.data=we),this._finishRequestTiming(se,ee,Oe),Oe}catch(we){if(delete this._pendingRequest,y.Z(we))return{abandoned:!0};throw we}}))}_startRequestTiming(ee){var ie;if(!((ie=ee.request)===null||ie===void 0)&&ie.collectResourceTiming)return new y.c$(ee.request.url)}_finishRequestTiming(ee,ie,se){const we=ee?.finish();we&&(se.resourceTiming={[ie.source]:JSON.parse(JSON.stringify(we))})}getData(){return y._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ee){return this.tileState.getLoaded(ee.uid)?this._reloadLoadedTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,ie){return y._(this,void 0,void 0,(function*(){let se;if(ee.request?se=yield this.loadGeoJSONFromUrl(ee.request,ee.promoteId,ie):ee.data?se=this._loadGeoJSONFromObject(ee.data,ee.promoteId):ee.dataDiff&&(se=this._loadGeoJSONFromDiff(ee.dataDiff,ee.promoteId,ee.source)),delete this._pendingRequest,typeof se!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);return Me(se,!0),ee.filter&&(se=this._filterGeoJSON(se,ee.filter)),se}))}loadGeoJSONFromUrl(ee,ie,se){return y._(this,void 0,void 0,(function*(){const we=yield y.j(ee,se);return this._dataUpdateable=y.a7(we.data,ie),we.data}))}_loadGeoJSONFromObject(ee,ie){return this._dataUpdateable=y.a7(ee,ie),ee}_loadGeoJSONFromDiff(ee,ie,se){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${se}`);y.a8(this._dataUpdateable,ee,ie);const we=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(we)}_filterGeoJSON(ee,ie){const se=y.d4(ie,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map((Oe=>`${Oe.key}: ${Oe.message}`)).join(", "));const we=ee.features.filter((Oe=>se.value.evaluate({zoom:0},Oe)));return this._toFeatureCollection(we)}_toFeatureCollection(ee){return{type:"FeatureCollection",features:ee}}removeSource(ee){return y._(this,void 0,void 0,(function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort()}))}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}function Xu(Fe,ee){return ee.cluster?new zt((function({superclusterOptions:ie,clusterProperties:se}){if(!se||!ie)return ie;const we={},Oe={},Ye={accumulated:null,zoom:0},Ze={properties:null},Ue=Object.keys(se);for(const He of Ue){const[_t,ot]=se[He],Ie=y.d4(ot),Ut=y.d4(typeof _t=="string"?[_t,["accumulated"],["get",He]]:_t);we[He]=Ie.value,Oe[He]=Ut.value}return ie.map=He=>{Ze.properties=He;const _t={};for(const ot of Ue)_t[ot]=we[ot].evaluate(Ye,Ze);return _t},ie.reduce=(He,_t)=>{Ze.properties=_t;for(const ot of Ue)Ye.accumulated=He[ot],He[ot]=Oe[ot].evaluate(Ye,Ze)},ie})(ee)).load(Fe.features):(function(ie,se){return new $c(ie,se)})(Fe,ee.geojsonVtOptions)}class rl{constructor(ee){this.self=ee,this.actor=new y.L(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ie,se)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=se},this.self.addProtocol=y.cK,this.self.removeProtocol=y.cL,this.self.registerRTLTextPlugin=ie=>{y.d5.setMethods(ie)},this.actor.registerMessageHandler("LDT",((ie,se)=>this._getDEMWorkerSource(ie,se.source).loadTile(se))),this.actor.registerMessageHandler("RDT",((ie,se)=>y._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ie,se.source).removeTile(se)})))),this.actor.registerMessageHandler("GCEZ",((ie,se)=>y._(this,void 0,void 0,(function*(){return this._getWorkerSource(ie,se.type,se.source).getClusterExpansionZoom(se)})))),this.actor.registerMessageHandler("GCC",((ie,se)=>y._(this,void 0,void 0,(function*(){return this._getWorkerSource(ie,se.type,se.source).getClusterChildren(se)})))),this.actor.registerMessageHandler("GCL",((ie,se)=>y._(this,void 0,void 0,(function*(){return this._getWorkerSource(ie,se.type,se.source).getClusterLeaves(se)})))),this.actor.registerMessageHandler("LD",((ie,se)=>this._getWorkerSource(ie,se.type,se.source).loadData(se))),this.actor.registerMessageHandler("GD",((ie,se)=>this._getWorkerSource(ie,se.type,se.source).getData())),this.actor.registerMessageHandler("LT",((ie,se)=>this._getWorkerSource(ie,se.type,se.source).loadTile(se))),this.actor.registerMessageHandler("RT",((ie,se)=>this._getWorkerSource(ie,se.type,se.source).reloadTile(se))),this.actor.registerMessageHandler("AT",((ie,se)=>this._getWorkerSource(ie,se.type,se.source).abortTile(se))),this.actor.registerMessageHandler("RMT",((ie,se)=>this._getWorkerSource(ie,se.type,se.source).removeTile(se))),this.actor.registerMessageHandler("RS",((ie,se)=>y._(this,void 0,void 0,(function*(){if(!this.workerSources[ie]||!this.workerSources[ie][se.type]||!this.workerSources[ie][se.type][se.source])return;const we=this.workerSources[ie][se.type][se.source];delete this.workerSources[ie][se.type][se.source],we.removeSource!==void 0&&we.removeSource(se)})))),this.actor.registerMessageHandler("RM",(ie=>y._(this,void 0,void 0,(function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie],this.globalStates.delete(ie)})))),this.actor.registerMessageHandler("SR",((ie,se)=>y._(this,void 0,void 0,(function*(){this.referrer=se})))),this.actor.registerMessageHandler("SRPS",((ie,se)=>this._syncRTLPluginState(ie,se))),this.actor.registerMessageHandler("IS",((ie,se)=>y._(this,void 0,void 0,(function*(){this.self.importScripts(se)})))),this.actor.registerMessageHandler("SI",((ie,se)=>this._setImages(ie,se))),this.actor.registerMessageHandler("UL",((ie,se)=>y._(this,void 0,void 0,(function*(){this._getLayerIndex(ie).update(se.layers,se.removedIds,this._getGlobalState(ie))})))),this.actor.registerMessageHandler("UGS",((ie,se)=>y._(this,void 0,void 0,(function*(){const we=this._getGlobalState(ie);for(const Oe in se)we[Oe]=se[Oe]})))),this.actor.registerMessageHandler("SL",((ie,se)=>y._(this,void 0,void 0,(function*(){this._getLayerIndex(ie).replace(se,this._getGlobalState(ie))}))))}_getGlobalState(ee){let ie=this.globalStates.get(ee);return ie||(ie={},this.globalStates.set(ee,ie)),ie}_setImages(ee,ie){return y._(this,void 0,void 0,(function*(){this.availableImages[ee]=ie;for(const se in this.workerSources[ee]){const we=this.workerSources[ee][se];for(const Oe in we)we[Oe].availableImages=ie}}))}_syncRTLPluginState(ee,ie){return y._(this,void 0,void 0,(function*(){return yield y.d5.syncState(ie,this.self.importScripts)}))}_getAvailableImages(ee){let ie=this.availableImages[ee];return ie||(ie=[]),ie}_getLayerIndex(ee){let ie=this.layerIndexes[ee];return ie||(ie=this.layerIndexes[ee]=new c),ie}_getWorkerSource(ee,ie,se){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ie]||(this.workerSources[ee][ie]={}),!this.workerSources[ee][ie][se]){const we={sendAsync:(Oe,Ye)=>(Oe.targetMapId=ee,this.actor.sendAsync(Oe,Ye))};switch(ie){case"vector":this.workerSources[ee][ie][se]=new oe(we,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][ie][se]=new ws(we,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][ie][se]=new this.externalWorkerSourceTypes[ie](we,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][ie][se]}_getDEMWorkerSource(ee,ie){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ie]||(this.demWorkerSources[ee][ie]=new ce),this.demWorkerSources[ee][ie]}}return y.i(self)&&(self.worker=new rl(self)),rl})),d("index",["exports","./shared"],(function(y,c){var A="5.18.0";function P(){var w=new c.A(4);return c.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let C,I,B;const G={frame(w,n,u,p){const _=p||window,T=_.requestAnimationFrame((O=>{M(),n(O)})),{unsubscribe:M}=c.s(w.signal,"abort",(()=>{M(),_.cancelAnimationFrame(T),u(new c.a(w.signal.reason))}),!1)},frameAsync(w,n){return new Promise(((u,p)=>{this.frame(w,u,p,n)}))},getImageData(w,n=0){return this.getImageCanvasContext(w).getImageData(-n,-n,w.width+2*n,w.height+2*n)},getImageCanvasContext(w){const n=window.document.createElement("canvas"),u=n.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return n.width=w.width,n.height=w.height,u.drawImage(w,0,0,w.width,w.height),u},resolveURL:w=>(C||(C=document.createElement("a")),C.href=w,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return B!==void 0?B:!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)},set prefersReducedMotion(w){B=w}},Z=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function H(){return Z.getCurrentTime()}class U{static testProp(n){if(!U.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in U.docStyle)return n[u];return n[0]}static create(n,u,p){const _=window.document.createElement(n);return u!==void 0&&(_.className=u),p&&p.appendChild(_),_}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){U.docStyle&&U.selectProp&&(U.userSelect=U.docStyle[U.selectProp],U.docStyle[U.selectProp]="none")}static enableDrag(){U.docStyle&&U.selectProp&&(U.docStyle[U.selectProp]=U.userSelect)}static setTransform(n,u){n.style[U.transformProp]=u}static addEventListener(n,u,p,_={}){n.addEventListener(u,p,"passive"in _?_:_.capture)}static removeEventListener(n,u,p,_={}){n.removeEventListener(u,p,"passive"in _?_:_.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",U.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",U.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",U.suppressClickInternal,!0)}),0)}static getScale(n){const u=n.getBoundingClientRect();return{x:u.width/n.offsetWidth||1,y:u.height/n.offsetHeight||1,boundingClientRect:u}}static getPoint(n,u,p){const _=u.boundingClientRect;return new c.P((p.clientX-_.left)/u.x-n.clientLeft,(p.clientY-_.top)/u.y-n.clientTop)}static mousePos(n,u){const p=U.getScale(n);return U.getPoint(n,p,u)}static touchPos(n,u){const p=[],_=U.getScale(n);for(let T=0;T<u.length;T++)p.push(U.getPoint(n,_,u[T]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const u=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),p=u.querySelectorAll("script");for(const _ of p)_.remove();return U.clean(u),u.innerHTML}static isPossiblyDangerous(n,u){const p=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!p.includes("javascript:")&&!p.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const u=n.children;for(const p of u)U.removeAttributes(p),U.clean(p)}static removeAttributes(n){for(const{name:u,value:p}of n.attributes)U.isPossiblyDangerous(u,p)&&n.removeAttribute(u)}}U.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,U.selectProp=U.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),U.transformProp=U.testProp(["transform","WebkitTransform"]);const oe={supported:!1,testSupport:function(w){!ve&&fe&&(Ee?Me(w):ce=w)}};let ce,fe,ve=!1,Ee=!1;function Me(w){const n=w.createTexture();w.bindTexture(w.TEXTURE_2D,n);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,fe),w.isContextLost())return;oe.supported=!0}catch{}w.deleteTexture(n),ve=!0}var ze;typeof document<"u"&&(fe=document.createElement("img"),fe.onload=()=>{ce&&Me(ce),ce=null,Ee=!0},fe.onerror=()=>{ve=!0,ce=null},fe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let n,u,p,_;w.resetRequestQueue=()=>{n=[],u=0,p=0,_={}},w.addThrottleControl=R=>{const V=p++;return _[V]=R,V},w.removeThrottleControl=R=>{delete _[R],M()},w.getImage=(R,V,q=!0)=>new Promise(((K,W)=>{oe.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),c.e(R,{type:"image"}),n.push({abortController:V,requestParameters:R,supportImageRefresh:q,state:"queued",onError:ne=>{W(ne)},onSuccess:ne=>{K(ne)}}),M()}));const T=R=>c._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:V,supportImageRefresh:q,onError:K,onSuccess:W,abortController:ne}=R,le=q===!1&&!c.i(self)&&!c.g(V.url)&&(!V.headers||Object.keys(V.headers).reduce(((ge,xe)=>ge&&xe==="accept"),!0));u++;const pe=le?O(V,ne):c.m(V,ne);try{const ge=yield pe;delete R.abortController,R.state="completed",ge.data instanceof HTMLImageElement||c.b(ge.data)?W(ge):ge.data&&W({data:yield(ye=ge.data,typeof createImageBitmap=="function"?c.f(ye):c.h(ye)),cacheControl:ge.cacheControl,expires:ge.expires})}catch(ge){delete R.abortController,K(ge)}finally{u--,M()}var ye})),M=()=>{const R=(()=>{for(const V of Object.keys(_))if(_[V]())return!0;return!1})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let V=u;V<R&&n.length>0;V++){const q=n.shift();q.abortController.signal.aborted?V--:T(q)}},O=(R,V)=>new Promise(((q,K)=>{const W=new Image,ne=R.url,le=R.credentials;le&&le==="include"?W.crossOrigin="use-credentials":(le&&le==="same-origin"||!c.d(ne))&&(W.crossOrigin="anonymous"),V.signal.addEventListener("abort",(()=>{W.src="",K(new c.a(V.signal.reason))})),W.fetchPriority="high",W.onload=()=>{W.onerror=W.onload=null,q({data:W})},W.onerror=()=>{W.onerror=W.onload=null,V.signal.aborted||K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},W.src=ne}))})(ze||(ze={})),ze.resetRequestQueue();class Ke{constructor(n){this._transformRequestFn=n??null}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function mt(w){const n=[];if(typeof w=="string")n.push({id:"default",url:w});else if(w&&w.length>0){const u=[];for(const{id:p,url:_}of w){const T=`${p}${_}`;u.indexOf(T)===-1&&(u.push(T),n.push({id:p,url:_}))}}return n}function zt(w,n,u){try{const p=new URL(w);return p.pathname+=`${n}${u}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ge(w){const{userImage:n}=w;return!!(n&&n.render&&n.render())&&(w.data.replace(new Uint8Array(n.data.buffer)),!0)}class Te extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const n of Object.keys(this.images))this.removeImage(n);this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(n){const u=this.images[n];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new c.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let p=!0;const _=u.data||u.spriteData;return this._validateStretch(u.stretchX,_&&_.width)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,_&&_.height)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,u){if(!n)return!0;let p=0;for(const _ of n){if(_[0]<p||_[1]<_[0]||u<_[1])return!1;p=_[1]}return!0}_validateContent(n,u){if(!n)return!0;if(n.length!==4)return!1;const p=u.spriteData,_=p&&p.width||u.data.width,T=p&&p.height||u.data.height;return!(n[0]<0||_<n[0]||n[1]<0||T<n[1]||n[2]<0||_<n[2]||n[3]<0||T<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,u,p=!0){const _=this.getImage(n);if(p&&(_.data.width!==u.data.width||_.data.height!==u.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=_.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise(((u,p)=>{let _=!0;if(!this.isLoaded())for(const T of n)this.images[T]||(_=!1);this.isLoaded()||_?u(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:u})}))}_getImagesForIds(n){const u={};for(const p of n){let _=this.getImage(p);_||(this.fire(new c.l("styleimagemissing",{id:p})),_=this.getImage(p)),_?u[p]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:c.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],p=this.getImage(n);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},T=new c.I(_,p);this.patterns[n]={bin:_,position:T}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const T in this.patterns)n.push(this.patterns[T].bin);const{w:u,h:p}=c.p(n),_=this.atlasImage;_.resize({width:u||1,height:p||1});for(const T in this.patterns){const{bin:M}=this.patterns[T],O=M.x+1,R=M.y+1,V=this.getImage(T).data,q=V.width,K=V.height;c.R.copy(V,_,{x:0,y:0},{x:O,y:R},{width:q,height:K}),c.R.copy(V,_,{x:0,y:K-1},{x:O,y:R-1},{width:q,height:1}),c.R.copy(V,_,{x:0,y:0},{x:O,y:R+K},{width:q,height:1}),c.R.copy(V,_,{x:q-1,y:0},{x:O-1,y:R},{width:1,height:K}),c.R.copy(V,_,{x:0,y:0},{x:O+q,y:R},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||c.w(`Image with ID: "${u}" was not found`),Ge(p)&&this.updateImage(u,p)}}cloneImages(){const n={};for(const u in this.images){const p=this.images[u];n[u]=Object.assign(Object.assign({},p),{data:p.data?p.data.clone():null})}return n}}const dt=1e20;function It(w,n,u,p,_,T,M,O,R){for(let V=n;V<n+p;V++)Rt(w,u*T+V,T,_,M,O,R);for(let V=u;V<u+_;V++)Rt(w,V*T+n,1,p,M,O,R)}function Rt(w,n,u,p,_,T,M){T[0]=0,M[0]=-dt,M[1]=dt,_[0]=w[n];for(let O=1,R=0,V=0;O<p;O++){_[O]=w[n+O*u];const q=O*O;do{const K=T[R];V=(_[O]-_[K]+q-K*K)/(O-K)/2}while(V<=M[R]&&--R>-1);R++,T[R]=O,M[R]=V,M[R+1]=dt}for(let O=0,R=0;O<p;O++){for(;M[R+1]<O;)R++;const V=T[R],q=O-V;w[n+O*u]=_[V]+q*q}}const Ve=c.v.layout_symbol["text-font"].default.join(",");class it{constructor(n,u,p){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={},this.lang=p}setURL(n){this.url=n}getGlyphs(n){return c._(this,void 0,void 0,(function*(){const u=[];for(const T in n)for(const M of n[T])u.push(this._getAndCacheGlyphsPromise(T,M));const p=yield Promise.all(u),_={};for(const{stack:T,id:M,glyph:O}of p)_[T]||(_[T]={}),_[T][M]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return _}))}_getAndCacheGlyphsPromise(n,u){return c._(this,void 0,void 0,(function*(){let p=this.entries[n];p||(p=this.entries[n]={glyphs:{},requests:{},ranges:{}});let _=p.glyphs[u];return _!==void 0?{stack:n,id:u,glyph:_}:!this.url||this._charUsesLocalIdeographFontFamily(u)?(_=p.glyphs[u]=this._drawGlyph(p,n,u),{stack:n,id:u,glyph:_}):yield this._downloadAndCacheRangePromise(n,u)}))}_downloadAndCacheRangePromise(n,u){return c._(this,void 0,void 0,(function*(){const p=this.entries[n],_=Math.floor(u/256);if(p.ranges[_])return{stack:n,id:u,glyph:null};if(!p.requests[_]){const T=it.loadGlyphRange(n,_,this.url,this.requestManager);p.requests[_]=T}try{const T=yield p.requests[_];for(const M in T)p.glyphs[+M]=T[+M];return p.ranges[_]=!0,{stack:n,id:u,glyph:T[u]||null}}catch(T){const M=p.glyphs[u]=this._drawGlyph(p,n,u);return this._warnOnMissingGlyphRange(M,_,u,T),{stack:n,id:u,glyph:M}}}))}_warnOnMissingGlyphRange(n,u,p,_){const T=256*u,M=T+255,O=p.toString(16).padStart(4,"0").toUpperCase();c.w(`Unable to load glyph range ${u}, ${T}-${M}. Rendering codepoint U+${O} locally instead. ${_}`)}_charUsesLocalIdeographFontFamily(n){return!!this.localIdeographFontFamily&&c.q(n)}_drawGlyph(n,u,p){const _=u===Ve&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(p),T=_?"ideographTinySDF":"tinySDF";n[T]||(n[T]=this._createTinySDF(_?this.localIdeographFontFamily:u));const M=n[T].draw(String.fromCodePoint(p)),O=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(p));return{id:p,bitmap:new c.r({width:M.width||60,height:M.height||60},M.data),metrics:{width:O?0:M.glyphWidth/2||24,height:M.glyphHeight/2||24,left:M.glyphLeft/2+.5||0,top:M.glyphTop/2-27.5||-8,advance:O?0:M.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(n){const u=n?n.split(","):[];u.push("sans-serif");const p=u.map((_=>/[-\w]+/.test(_)?_:`'${CSS.escape(_)}'`)).join(",");return new it.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:this._fontWeight(u[0]),fontStyle:this._fontStyle(u[0]),lang:this.lang})}_fontStyle(n){return/italic/i.test(n)?"italic":/oblique/i.test(n)?"oblique":"normal"}_fontWeight(n){const u={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let p;for(const[_,T]of Object.entries(u))new RegExp(`\\b${_}\\b`,"i").test(n)&&(p=`${T}`);return p}destroy(){for(const n in this.entries){const u=this.entries[n];u.tinySDF&&(u.tinySDF=null),u.ideographTinySDF&&(u.ideographTinySDF=null),u.glyphs={},u.requests={},u.ranges={}}this.entries={}}}it.loadGlyphRange=function(w,n,u,p){return c._(this,void 0,void 0,(function*(){const _=256*n,T=_+255,M=p.transformRequest(u.replace("{fontstack}",w).replace("{range}",`${_}-${T}`),"Glyphs"),O=yield c.n(M,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${n}, ${_}-${T}`);const R={};for(const V of c.o(O.data))R[V.id]=V;return R}))},it.TinySDF=class{constructor({fontSize:w=24,buffer:n=3,radius:u=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:T="normal",fontStyle:M="normal",lang:O=null}={}){this.buffer=n,this.cutoff=p,this.radius=u,this.lang=O;const R=this.size=w+4*n,V=this._createCanvas(R),q=this.ctx=V.getContext("2d",{willReadFrequently:!0});q.font=`${M} ${T} ${w}px ${_}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(w){const n=document.createElement("canvas");return n.width=n.height=w,n}draw(w){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:T}=this.ctx.measureText(w),M=Math.ceil(u),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-_))),R=Math.min(this.size-this.buffer,M+Math.ceil(p)),V=O+2*this.buffer,q=R+2*this.buffer,K=Math.max(V*q,0),W=new Uint8ClampedArray(K),ne={data:W,width:V,height:q,glyphWidth:O,glyphHeight:R,glyphTop:M,glyphLeft:0,glyphAdvance:n};if(O===0||R===0)return ne;const{ctx:le,buffer:pe,gridInner:ye,gridOuter:ge}=this;this.lang&&(le.lang=this.lang),le.clearRect(pe,pe,O,R),le.fillText(w,pe,pe+M);const xe=le.getImageData(pe,pe,O,R);ge.fill(dt,0,K),ye.fill(0,0,K);for(let De=0;De<R;De++)for(let be=0;be<O;be++){const Ce=xe.data[4*(De*O+be)+3]/255;if(Ce===0)continue;const ke=(De+pe)*V+be+pe;if(Ce===1)ge[ke]=0,ye[ke]=dt;else{const Se=.5-Ce;ge[ke]=Se>0?Se*Se:0,ye[ke]=Se<0?Se*Se:0}}It(ge,0,0,V,q,V,this.f,this.v,this.z),It(ye,pe,pe,O,R,V,this.f,this.v,this.z);for(let De=0;De<K;De++){const be=Math.sqrt(ge[De])-Math.sqrt(ye[De]);W[De]=Math.round(255-255*(be/this.radius+this.cutoff))}return ne}};class Mt{constructor(){this.specification=c.u.light.position}possiblyEvaluate(n,u){return c.F(n.expression.evaluate(u))}interpolate(n,u,p){return{x:c.G.number(n.x,u.x,p),y:c.G.number(n.y,u.y,p),z:c.G.number(n.z,u.z,p)}}}let Be;class yt extends c.E{constructor(n){super(),Be=Be||new c.t({anchor:new c.D(c.u.light.anchor),position:new Mt,color:new c.D(c.u.light.color),intensity:new c.D(c.u.light.intensity)}),this._transitionable=new c.x(Be,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,u={}){if(!this._validate(c.y,n,u))for(const p in n){const _=n[p];p.endsWith(c.z)?this._transitionable.setTransition(p.slice(0,-c.z.length),_):this._transitionable.setValue(p,_)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,p){return(!p||p.validate!==!1)&&c.B(this,n.call(c.C,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.u}))}}const Ae=new c.t({"sky-color":new c.D(c.u.sky["sky-color"]),"horizon-color":new c.D(c.u.sky["horizon-color"]),"fog-color":new c.D(c.u.sky["fog-color"]),"fog-ground-blend":new c.D(c.u.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.u.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.u.sky["atmosphere-blend"])});class qe extends c.E{constructor(n){super(),this._transitionable=new c.x(Ae,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0))}setSky(n,u={}){if(!this._validate(c.J,n,u)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in n){const _=n[p];p.endsWith(c.z)?this._transitionable.setTransition(p.slice(0,-c.z.length),_):this._transitionable.setValue(p,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,p={}){return p?.validate!==!1&&c.B(this,n.call(c.C,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.u})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class ct{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const p=n.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,u)),this.dashEntry[p]}getDashRanges(n,u,p){const _=[];let T=n.length%2==1?-n[n.length-1]*p:0,M=n[0]*p,O=!0;_.push({left:T,right:M,isDash:O,zeroLength:n[0]===0});let R=n[0];for(let V=1;V<n.length;V++){O=!O;const q=n[V];T=R*p,R+=q,M=R*p,_.push({left:T,right:M,isDash:O,zeroLength:q===0})}return _}addRoundDash(n,u,p){const _=u/2;for(let T=-p;T<=p;T++){const M=this.width*(this.nextRow+p+T);let O=0,R=n[O];for(let V=0;V<this.width;V++){V/R.right>1&&(R=n[++O]);const q=Math.abs(V-R.left),K=Math.abs(V-R.right),W=Math.min(q,K);let ne;const le=T/p*(_+1);if(R.isDash){const pe=_-Math.abs(le);ne=Math.sqrt(W*W+pe*pe)}else ne=_-Math.sqrt(W*W+le*le);this.data[M+V]=Math.max(0,Math.min(255,ne+128))}}}addRegularDash(n){for(let O=n.length-1;O>=0;--O){const R=n[O],V=n[O+1];R.zeroLength?n.splice(O,1):V&&V.isDash===R.isDash&&(V.left=R.left,n.splice(O,1))}const u=n[0],p=n[n.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const _=this.width*this.nextRow;let T=0,M=n[T];for(let O=0;O<this.width;O++){O/M.right>1&&(M=n[++T]);const R=Math.abs(O-M.left),V=Math.abs(O-M.right),q=Math.min(R,V);this.data[_+O]=Math.max(0,Math.min(255,(M.isDash?q:-q)+128))}}addDash(n,u){const p=u?7:0,_=2*p+1;if(this.nextRow+_>this.height)return c.w("LineAtlas out of space"),null;let T=0;for(let O=0;O<n.length;O++)T+=n[O];if(T!==0){const O=this.width/T,R=this.getDashRanges(n,this.width,O);u?this.addRoundDash(R,O,p):this.addRegularDash(R)}const M={y:this.nextRow+p,height:2*p,width:T};return this.nextRow+=_,this.dirty=!0,M}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const wt="maplibre_preloaded_worker_pool";class jt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<jt.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[wt]}numActive(){return Object.keys(this.active).length}}const $t=Math.floor(G.hardwareConcurrency/2);let Ft,Tr;function pt(){return Ft||(Ft=new jt),Ft}jt.workerCount=c.K(globalThis)?Math.max(Math.min($t,3),1):1;class er{constructor(n,u){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let _=0;_<p.length;_++){const T=new c.L(p[_],u);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u){const p=[];for(const _ of this.actors)p.push(_.sendAsync({type:n,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,u){for(const p of this.actors)p.registerMessageHandler(n,u)}unregisterMessageHandler(n){for(const u of this.actors)u.unregisterMessageHandler(n)}}function mr(){return Tr||(Tr=new er(pt(),c.M),Tr.registerMessageHandler("GR",((w,n,u)=>c.m(n,u)))),Tr}function At(w,n){const u=c.N();return c.O(u,u,[1,1,0]),c.Q(u,u,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?c.S(u,u,w.calculatePosMatrix(n.toUnwrapped())):u}function Mn(w,n,u,p,_,T,M){var O;const R=(function(W,ne,le){if(W)for(const pe of W){const ye=ne[pe];if(ye&&ye.source===le&&ye.type==="fill-extrusion")return!0}else for(const pe in ne){const ye=ne[pe];if(ye.source===le&&ye.type==="fill-extrusion")return!0}return!1})((O=_?.layers)!==null&&O!==void 0?O:null,n,w.id),V=T.maxPitchScaleFactor(),q=w.tilesIn(p,V,R);q.sort(cr);const K=[];for(const W of q)K.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(n,u,w.getState(),W.queryGeometry,W.cameraQueryGeometry,W.scale,_,T,V,At(T,W.tileID),M?(ne,le)=>M(W.tileID,ne,le):void 0)});return(function(W,ne){for(const le in W)for(const pe of W[le])Xr(pe,ne);return W})((function(W){const ne={},le={};for(const pe of W){const ye=pe.queryResults,ge=pe.wrappedTileID,xe=le[ge]=le[ge]||{};for(const De in ye){const be=ye[De],Ce=xe[De]=xe[De]||{},ke=ne[De]=ne[De]||[];for(const Se of be)Ce[Se.featureIndex]||(Ce[Se.featureIndex]=!0,ke.push(Se))}}return ne})(K),w)}function cr(w,n){const u=w.tileID,p=n.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function Xr(w,n){const u=w.feature,p=n.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=p}function ln(w,n,u,p){return c._(this,void 0,void 0,(function*(){let _=w;if(w.url?_=(yield c.j(n.transformRequest(w.url,"Source"),u)).data:yield G.frameAsync(u,p),!_)return null;const T=c.U(c.e(_,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(T.vectorLayerIds=_.vector_layers.map((M=>M.id))),T}))}class Lr{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}extend(n){const u=this._sw,p=this._ne;let _,T;if(n instanceof c.V)_=n,T=n;else{if(!(n instanceof Lr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Lr.convert(n)):this.extend(c.V.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.V.convert(n)):this;if(_=n._sw,T=n._ne,!_||!T)return this}return u||p?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),p.lng=Math.max(T.lng,p.lng),p.lat=Math.max(T.lat,p.lat)):(this._sw=new c.V(_.lng,_.lat),this._ne=new c.V(T.lng,T.lat)),this}getCenter(){return new c.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.V(this.getWest(),this.getNorth())}getSouthEast(){return new c.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:p}=c.V.convert(n);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}intersects(n){if(!((n=Lr.convert(n)).getNorth()>=this.getSouth()&&n.getSouth()<=this.getNorth()))return!1;const u=Math.abs(this.getEast()-this.getWest()),p=Math.abs(n.getEast()-n.getWest());if(u>=360||p>=360)return!0;const _=c.W(this.getWest(),-180,180),T=c.W(this.getEast(),-180,180),M=c.W(n.getWest(),-180,180),O=c.W(n.getEast(),-180,180),R=_>T,V=M>O;return!(!R||!V)||(R?O>=_||M<=T:V?T>=M||_<=O:M<=T&&O>=_)}static convert(n){return n instanceof Lr?n:n&&new Lr(n)}static fromLngLat(n,u=0){const p=360*u/40075017,_=p/Math.cos(Math.PI/180*n.lat);return new Lr(new c.V(n.lng-_,n.lat-p),new c.V(n.lng+_,n.lat+p))}adjustAntiMeridian(){const n=new c.V(this._sw.lng,this._sw.lat),u=new c.V(this._ne.lng,this._ne.lat);return new Lr(n,n.lng>u.lng?new c.V(u.lng+360,u.lat):u)}}class va{constructor(n,u,p){this.bounds=Lr.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),p=Math.floor(c.Y(this.bounds.getWest())*u),_=Math.floor(c.X(this.bounds.getNorth())*u),T=Math.ceil(c.Y(this.bounds.getEast())*u),M=Math.ceil(c.X(this.bounds.getSouth())*u);return n.x>=p&&n.x<T&&n.y>=_&&n.y<M}}class tl extends c.E{constructor(n,u,p,_){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.U(u,["url","scheme","tileSize","promoteId","encoding"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield ln(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),n&&(c.e(this,n),n.bounds&&(this.tileBounds=new va(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,c.Z(n)||this.fire(new c.k(n))}}))}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(n)};p.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise(((T,M)=>{n.reloadPromise={resolve:T,reject:M}}))}else n.actor=this.dispatcher.getActor(),_="LT";n.abortController=new AbortController;try{const T=yield n.actor.sendAsync({type:_,data:p},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,T)}catch(T){if(delete n.abortController,n.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(n,null)}}))}_getOverzoomParameters(n){if(n.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const u=n.tileID.scaledTo(this.maxzoom).canonical,p=u.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:u,overzoomRequest:this.map._requestManager.transformRequest(p,"Tile")}}_afterTileLoadWorkerResponse(n,u){if(u&&u.resourceTiming&&(n.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&n.setExpiryData(u),n.loadVectorData(u,this.map.painter),n.reloadPromise){const p=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(p.resolve).catch(p.reject)}}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class bs extends c.E{constructor(n,u,p,_){super(),this.id=n,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.U(u,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(n=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield ln(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,u&&(c.e(this,u),u.bounds&&(this.tileBounds=new va(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,c.Z(u)||this.fire(new c.k(u))}}))}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}serialize(){return c.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const p=yield ze.getImage(this.map._requestManager.transformRequest(u,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const _=this.map.painter.context,T=_.gl,M=p.data;n.texture=this.map.painter.getTileTexture(M.width),n.texture?n.texture.update(M,{useMipmap:!0}):(n.texture=new c.T(_,M,T.RGBA,{useMipmap:!0}),n.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}}))}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)}))}hasTransition(){return!1}}class Uo extends bs{constructor(n,u,p,_){super(n,u,p,_),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const _=yield ze.getImage(p,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(_&&_.data){const T=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&n.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const M=c.b(T)&&c.$()?T:yield this.readImageNow(T),O={type:this.type,uid:n.uid,source:this.id,rawImageData:M,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const R=yield n.actor.sendAsync({type:"LDT",data:O});n.dem=R,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(_){if(delete n.abortController,n.aborted)n.state="unloaded";else if(_)throw n.state="errored",_}}))}readImageNow(n){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&c.a0()){const u=n.width+2,p=n.height+2;try{return new c.R({width:u,height:p},yield c.a1(n,-1,-1,u,p))}catch{}}return G.getImageData(n,1)}))}_getNeighboringTiles(n){const u=n.canonical,p=Math.pow(2,u.z),_=(u.x-1+p)%p,T=u.x===0?n.wrap-1:n.wrap,M=(u.x+1+p)%p,O=u.x+1===p?n.wrap+1:n.wrap,R={};return R[new c.a2(n.overscaledZ,T,u.z,_,u.y).key]={backfilled:!1},R[new c.a2(n.overscaledZ,O,u.z,M,u.y).key]={backfilled:!1},u.y>0&&(R[new c.a2(n.overscaledZ,T,u.z,_,u.y-1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,O,u.z,M,u.y-1).key]={backfilled:!1}),u.y+1<p&&(R[new c.a2(n.overscaledZ,T,u.z,_,u.y+1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,O,u.z,M,u.y+1).key]={backfilled:!1}),R}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))}))}}function vo(w){return w.type==="GeometryCollection"?w.geometries.map((n=>n.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function qc(w){const n=new Lr;let u;switch(w.type){case"FeatureCollection":u=w.features.map((p=>vo(p.geometry))).flat(1/0);break;case"Feature":u=vo(w.geometry);break;default:u=vo(w)}if(u.length==0)return n;for(let p=0;p<u.length-1;p+=2)n.extend([u[p],u[p+1]]);return n}class ni extends c.E{constructor(n,u,p,_){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=p.getActor(),this.setEventedParent(_),this._data=typeof u.data=="string"?{url:u.data}:{geojson:u.data},this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:c.a5,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.a5,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(n){return n*(c.a5/this.tileSize)}_getClusterMaxZoom(n){const u=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${u}"`),u}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(n){this.map=n,this.load()}setData(n,u){this._data=typeof n=="string"?{url:n}:{geojson:n},this._pendingWorkerUpdate={data:n};const p=this._updateWorkerData();return u?p:this}updateData(n,u){this._pendingWorkerUpdate.diff=c.a6(this._pendingWorkerUpdate.diff,n);const p=this._updateWorkerData();return u?p:this}getData(){return c._(this,void 0,void 0,(function*(){const n=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})}))}getBounds(){return c._(this,void 0,void 0,(function*(){return qc(yield this.getData())}))}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:u,offset:p}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void c.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:n,diff:u}=this._pendingWorkerUpdate,p=this._getLoadGeoJSONParameters(n,u);n!==void 0?this._pendingWorkerUpdate.data=void 0:u&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(p)}))}_getLoadGeoJSONParameters(n,u){const p=c.e({type:this.type},this.workerOptions);return typeof n=="string"?(p.request=this.map._requestManager.transformRequest(G.resolveURL(n),"Source"),p.request.collectResourceTiming=this._collectResourceTiming,p):n!==void 0?(p.data=n,p):(u&&(p.dataDiff=u),p)}_dispatchWorkerUpdate(n){return c._(this,void 0,void 0,(function*(){this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const u=yield this.actor.sendAsync({type:"LD",data:n});if(this._isUpdatingWorker=!1,this._removed||u.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));u.data&&(this._data={geojson:u.data});const p=this._applyDiffToSource(n.dataDiff),_=this._getShouldReloadTileOptions(p),T={dataType:"source"};this._applyResourceTiming(T,u),this.fire(new c.l("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},T),{sourceDataType:"content",shouldReloadTileOptions:_})))}catch(u){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(u))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyResourceTiming(n,u){var p;if(!this._collectResourceTiming)return;const _=(p=u.resourceTiming)===null||p===void 0?void 0:p[this.id];if(!_)return;const T=_.slice(0);T?.length&&c.e(n,{resourceTiming:T})}_applyDiffToSource(n){if(!n)return;const u=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const _=c.a7(this._data.geojson,u);if(!_)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:_}}if(!this._data.updateable)return;const p=c.a8(this._data.updateable,n,u);return n.removeAll||this._options.cluster?void 0:p}_getShouldReloadTileOptions(n){if(n)return{affectedBounds:n.filter(Boolean).map((u=>qc(u)))}}shouldReloadTile(n,{affectedBounds:u}){if(n.state==="loading")return!0;if(n.state==="unloaded")return!1;const{buffer:p,extent:_}=this.workerOptions.geojsonVtOptions,T=(function({x:M,y:O,z:R},V=0){const q=c.a3((M-V)/Math.pow(2,R)),K=c.a4((O+1+V)/Math.pow(2,R)),W=c.a3((M+1+V)/Math.pow(2,R)),ne=c.a4((O-V)/Math.pow(2,R));return new Lr([q,K],[W,ne])})(n.tileID.canonical,p/_);for(const M of u)if(T.intersects(M))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.actor?"RT":"LT";n.actor=this.actor;const p={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const _=yield this.actor.sendAsync({type:u,data:p},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(_,this.map.painter,u==="RT")}))}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class _a extends c.E{constructor(n,u,p,_){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=u}load(n){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield ze.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,n&&(this.coordinates=n),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,c.Z(u)||this.fire(new c.k(u))}}))}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const u=n.map(c.a9.fromLngLat);var p;return this.tileID=(function(_){const T=c.aa.fromPoints(_),M=T.width(),O=T.height(),R=Math.max(M,O),V=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),q=Math.pow(2,V);return new c.ac(V,Math.floor((T.minX+T.maxX)/2*q),Math.floor((T.minY+T.maxY)/2*q))})(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,u=n.gl;this.texture||(this.texture=new c.T(n,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:u,minY:p,maxX:_,maxY:T}=c.aa.fromPoints(n),M={};for(let O=0;O<=c.ab;O++){const R=Math.pow(2,O),V=Math.floor(u*R),q=Math.floor(p*R),K=Math.floor(_*R),W=Math.floor(T*R),ne=(V%R+R)%R,le=K%R,pe=Math.floor(V/R),ye=Math.floor(K/R);M[O]={minWrap:pe,maxWrap:ye,minTileXWrapped:ne,maxTileXWrapped:le,minTileY:q,maxTileY:W}}return M}}class $c extends _a{constructor(n,u,p,_){super(n,u,p,_),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const u of n.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.ad(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.k(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new c.k(new c.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,u=n.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(n,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,p=!0)}p&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xs extends _a{constructor(n,u,p,_){super(n,u,p,_),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((M=>typeof M!="number"))))||this.fire(new c.k(new c.ae(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.ae(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.k(new c.ae(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.ae(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.ae(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new c.T(u,this.canvas,p.RGBA,{premultiply:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let _=!1;for(const T in this.tiles){const M=this.tiles[T];M.state!=="loaded"&&(M.state="loaded",M.texture=this.texture,_=!0)}_&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const ws={},Xu=w=>{switch(w){case"geojson":return ni;case"image":return _a;case"raster":return bs;case"raster-dem":return Uo;case"vector":return tl;case"video":return $c;case"canvas":return xs}return ws[w]},rl="RTLPluginLoaded";class Fe extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=mr()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return c._(this,arguments,void 0,(function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=G.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(rl))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ee=null;function ie(){return ee||(ee=new Fe),ee}var se,we;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(se||(se={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(we||(we={}));class Oe{constructor(n,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=c.af(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttFingerprint={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:u,fadingParentID:p,fadeEndTime:_}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=u,this.fadingParentID=p,this.fadeEndTime=_}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=H(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData,this.latestFeatureIndex.encoding=n.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=(function(_,T){const M={};if(!T)return M;for(const O of _){const R=O.layerIds.map((V=>T.getLayer(V))).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map((V=>R.filter((q=>q.id===V))[0])));for(const V of R)M[V.id]=O}}return M})(n.buckets,u?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const T=this.buckets[_];if(T instanceof c.ah){if(this.hasSymbolBuckets=!0,!p)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const T=this.buckets[_];if(T instanceof c.ah&&T.hasRTLText){this.hasRTLText=!0,ie().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const T=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(_).queryRadius(T))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new c.ag}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,p,_,T,M,O,R,V,q,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:T,scale:M,tileSize:this.tileSize,pixelPosMatrix:q,transform:R,params:O,queryPadding:this.queryPadding*V,getElevation:K},n,u,p):{}}querySourceFeatures(n,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),T=u&&u.sourceLayer?u.sourceLayer:"",M=_[c.ai]||_[T];if(!M)return;const O=c.aj(u?.filter,u?.globalState),{z:R,x:V,y:q}=this.tileID.canonical,K={z:R,x:V,y:q};for(let W=0;W<M.length;W++){const ne=M.feature(W);if(O.needGeometry){const ye=c.ak(ne,!0);if(!O.filter(new c.H(this.tileID.overscaledZ),ye,this.tileID.canonical))continue}else if(!O.filter(new c.H(this.tileID.overscaledZ),ne))continue;const le=p.getId(ne,T),pe=new c.al(ne,R,V,q,le);pe.tile=K,n.push(pe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const p=c.am(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(u)if(this.expirationTime<u)_=!0;else{const T=this.expirationTime-u;T?this.expirationTime=p+Math.max(T,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!u.style.hasLayer(_))continue;const T=this.buckets[_],M=T.layers[0].sourceLayer||c.ai,O=p[M],R=n[M];if(!O||!R||Object.keys(R).length===0)continue;T.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const V=u&&u.style&&u.style.getLayer(_);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<H()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=H()+n}setDependencies(n,u){const p={};for(const _ of u)p[_]=!0;this.dependencies[n]=p}hasDependency(n,u){for(const p of n){const _=this.dependencies[p];if(_){for(const T of u)if(_[T])return!0}}return!1}}class Ye{constructor(){this.state={},this.stateChanges={},this.deletedStates={},this.revision=0}updateState(n,u,p){const _=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][_]=this.stateChanges[n][_]||{},c.e(this.stateChanges[n][_],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const T in this.state[n])T!==_&&(this.deletedStates[n][T]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][_]===null){this.deletedStates[n][_]={};for(const T in this.state[n][_])p[T]||(this.deletedStates[n][_][T]=null)}else for(const T in p)this.deletedStates[n]&&this.deletedStates[n][_]&&this.deletedStates[n][_][T]===null&&delete this.deletedStates[n][_][T]}removeFeatureState(n,u,p){if(this.deletedStates[n]===null)return;const _=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&u!==void 0)this.deletedStates[n][_]!==null&&(this.deletedStates[n][_]=this.deletedStates[n][_]||{},this.deletedStates[n][_][p]=null);else if(u!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][_])for(p in this.deletedStates[n][_]={},this.stateChanges[n][_])this.deletedStates[n][_][p]=null;else this.deletedStates[n][_]=null;else this.deletedStates[n]=null}getState(n,u){const p=String(u),_=c.e({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const T=this.deletedStates[n][u];if(T===null)return{};for(const M in T)delete _[M]}return _}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const T={};for(const M in this.stateChanges[_])this.state[_][M]||(this.state[_][M]={}),c.e(this.state[_][M],this.stateChanges[_][M]),T[M]=this.state[_][M];p[_]=T}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const T={};if(this.deletedStates[_]===null)for(const M in this.state[_])T[M]={},this.state[_][M]={};else for(const M in this.deletedStates[_]){if(this.deletedStates[_][M]===null)this.state[_][M]={};else for(const O of Object.keys(this.deletedStates[_][M]))delete this.state[_][M][O];T[M]=this.state[_][M]}p[_]=p[_]||{},c.e(p[_],T)}this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0&&(this.revision++,n.setFeatureState(p,u))}}const Ze=89.25;function Ue(w,n){const u=c.an(n.lat,-c.ao,c.ao);return new c.P(c.Y(n.lng)*w,c.X(u)*w)}function He(w,n){return new c.a9(n.x/w,n.y/w).toLngLat()}function _t(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(c.ap(90-w.pitch)),Math.tan(c.ap(Ze-w.pitch)))}function ot(w,n){const u=w.canonical,p=n/c.aq(u.z),_=u.x+Math.pow(2,u.z)*w.wrap,T=c.ar(new Float64Array(16));return c.O(T,T,[_*p,u.y*p,0]),c.Q(T,T,[p/c.a5,p/c.a5,1]),T}function Ie(w,n,u,p,_){const T=c.a9.fromLngLat(w,n),M=_*c.as(1,w.lat),{x:O,y:R,z:V}=Ut(u,p);return new c.a9(T.x+M*-O,T.y+M*-R,T.z+M*-V)}function Ut(w,n){const u=c.ap(w),p=c.ap(n),_=Math.cos(-u),T=Math.sin(u);return{x:T*Math.sin(p),y:-T*Math.cos(p),z:_}}function ir(w,n,u){const p=n.intersectsFrustum(w);if(!u||p===0)return p;const _=n.intersectsPlane(u);return _===0?0:p===2&&_===2?2:1}function Xt(w,n,u){let p=0;const _=(u-n)/10;for(let T=0;T<10;T++)p+=_*Math.pow(Math.cos(n+(T+.5)/10*(u-n)),w);return p}function Qt(w,n){return function(u,p,_,T,M){const O=2*((w-1)/c.at(Math.cos(c.ap(Ze-M))/Math.cos(c.ap(Ze)))-1),R=Math.acos(_/T),V=2*Xt(O-1,0,c.ap(M/2)),q=Math.min(c.ap(Ze),R+c.ap(M/2)),K=Xt(O-1,Math.min(q,R-c.ap(M/2)),q),W=Math.atan(p/_),ne=Math.hypot(p,_);let le=u;return le+=c.at(T/ne/Math.max(.5,Math.cos(c.ap(M/2)))),le+=O*c.at(Math.cos(W))/2,le-=c.at(Math.max(1,K/V/n))/2,le}}const tr=Qt(9.314,3);function ar(w,n){const u=(n.roundZoom?Math.round:Math.floor)(w.zoom+c.at(w.tileSize/n.tileSize));return Math.max(0,u)}function fn(w,n){const u=w.getCameraFrustum(),p=w.getClippingPlane(),_=w.screenPointToMercatorCoordinate(w.getCameraPoint()),T=c.a9.fromLngLat(w.center,w.elevation);_.z=T.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const M=w.getCoveringTilesDetailsProvider(),O=M.allowVariableZoom(w,n),R=ar(w,n),V=n.minzoom||0,q=n.maxzoom!==void 0?n.maxzoom:w.maxZoom,K=Math.min(Math.max(0,R),q),W=Math.pow(2,K),ne=[W*_.x,W*_.y,0],le=[W*T.x,W*T.y,0],pe=Math.hypot(T.x-_.x,T.y-_.y),ye=Math.abs(T.z-_.z),ge=Math.hypot(pe,ye),xe=Ce=>({zoom:0,x:0,y:0,wrap:Ce,fullyVisible:!1}),De=[],be=[];if(w.renderWorldCopies&&M.allowWorldCopies())for(let Ce=1;Ce<=3;Ce++)De.push(xe(-Ce)),De.push(xe(Ce));for(De.push(xe(0));De.length>0;){const Ce=De.pop(),ke=Ce.x,Se=Ce.y;let je=Ce.fullyVisible;const et={x:ke,y:Se,z:Ce.zoom},Xe=M.getTileBoundingVolume(et,Ce.wrap,w.elevation,n);if(!je){const Dt=ir(u,Xe,p);if(Dt===0)continue;je=Dt===2}const Qe=M.distanceToTile2d(_.x,_.y,et,Xe);let Je=R;O&&(Je=(n.calculateTileZoom||tr)(w.zoom+c.at(w.tileSize/n.tileSize),Qe,ye,ge,w.fov)),Je=(n.roundZoom?Math.round:Math.floor)(Je),Je=Math.max(0,Je);const Ct=Math.min(Je,q);if(Ce.wrap=M.getWrap(T,et,Ce.wrap),Ce.zoom>=Ct){if(Ce.zoom<V)continue;const Dt=K-Ce.zoom,vt=ne[0]-.5-(ke<<Dt),kt=ne[1]-.5-(Se<<Dt),sr=n.reparseOverscaled?Math.max(Ce.zoom,Je):Ce.zoom;be.push({tileID:new c.a2(Ce.zoom===q?sr:Ce.zoom,Ce.wrap,Ce.zoom,ke,Se),distanceSq:c.au([le[0]-.5-ke,le[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(vt*vt+kt*kt)})}else for(let Dt=0;Dt<4;Dt++)De.push({zoom:Ce.zoom+1,x:(ke<<1)+Dt%2,y:(Se<<1)+(Dt>>1),wrap:Ce.wrap,fullyVisible:je})}return be.sort(((Ce,ke)=>Ce.distanceSq-ke.distanceSq)).map((Ce=>Ce.tileID))}const Pn=c.aa.fromPoints([new c.P(0,0),new c.P(c.a5,c.a5)]);function xn(w){return w==="raster"||w==="image"||w==="video"}function Si(w,n,u,p,_,T,M){if(!n.hasData())return!1;const{tileID:O,fadingRole:R,fadingDirection:V,fadingParentID:q}=n;if(R===se.Base&&V===we.Incoming&&q)return u[q.key]=q,!0;const K=Math.max(O.overscaledZ-_,T);for(let W=O.overscaledZ-1;W>=K;W--){const ne=O.scaledTo(W),le=w.getLoadedTile(ne);if(le)return n.setCrossFadeLogic({fadingRole:se.Base,fadingDirection:we.Incoming,fadingParentID:le.tileID,fadeEndTime:p+M}),le.setCrossFadeLogic({fadingRole:se.Parent,fadingDirection:we.Departing,fadeEndTime:p+M}),u[ne.key]=ne,!0}return!1}function dn(w,n,u,p,_,T){if(!n.hasData())return!1;const M=n.tileID.children(_);let O=St(w,n,M,u,p,_,T);if(O)return!0;for(const R of M)St(w,n,R.children(_),u,p,_,T)&&(O=!0);return O}function St(w,n,u,p,_,T,M){if(u[0].overscaledZ>=T)return!1;let O=!1;for(const R of u){const V=w.getLoadedTile(R);if(!V)continue;const{fadingRole:q,fadingDirection:K,fadingParentID:W}=V;q===se.Base&&K===we.Departing&&W||(V.setCrossFadeLogic({fadingRole:se.Base,fadingDirection:we.Departing,fadingParentID:n.tileID,fadeEndTime:_+M}),n.setCrossFadeLogic({fadingRole:se.Parent,fadingDirection:we.Incoming,fadeEndTime:_+M})),p[R.key]=R,O=!0}return O}function Ir(w,n,u,p){const _=w.tileID;return!!w.selfFading||!w.hasData()&&!!n.has(_)&&(w.setSelfFadeLogic(u+p),!0)}function on(w,n){var u;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let p=n.tileID.canonical.x-w.tileID.canonical.x;const _=n.tileID.canonical.y-w.tileID.canonical.y,T=Math.pow(2,w.tileID.canonical.z),M=n.tileID.key;p===0&&_===0||Math.abs(_)>1||(Math.abs(p)>1&&(Math.abs(p+T)===1?p+=T:Math.abs(p-T)===1&&(p-=T)),n.dem&&w.dem&&(w.dem.backfillBorder(n.dem,p,_),!((u=w.neighboringTiles)===null||u===void 0)&&u[M]&&(w.neighboringTiles[M].backfilled=!0)))}class Xi{constructor(){this._tiles={}}handleWrapJump(n){const u={};for(const p in this._tiles){const _=this._tiles[p];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+n),u[_.tileID.key]=_}this._tiles=u}setFeatureState(n,u){for(const p in this._tiles)this._tiles[p].setFeatureState(n,u)}getAllTiles(){return Object.values(this._tiles)}getAllIds(n=!1){return n?Object.values(this._tiles).map((u=>u.tileID)).sort(c.aw).map((u=>u.key)):Object.keys(this._tiles)}getTileById(n){return this._tiles[n]}setTile(n,u){this._tiles[n]=u}deleteTileById(n){delete this._tiles[n]}getLoadedTile(n){const u=this.getTileById(n.key);return u?.hasData()?u:null}isIdRenderable(n,u=!1){var p;return(p=this.getTileById(n))===null||p===void 0?void 0:p.isRenderable(u)}getRenderableIds(n=0,u){const p=[];for(const _ of this.getAllIds())this.isIdRenderable(_,u)&&p.push(this.getTileById(_));return u?p.sort(((_,T)=>{const M=_.tileID,O=T.tileID,R=new c.P(M.canonical.x,M.canonical.y)._rotate(-n),V=new c.P(O.canonical.x,O.canonical.y)._rotate(-n);return M.overscaledZ-O.overscaledZ||V.y-R.y||V.x-R.x})).map((_=>_.tileID.key)):p.map((_=>_.tileID)).sort(c.aw).map((_=>_.key))}}class Ur extends c.E{constructor(n,u,p){super(),this.id=n,this.dispatcher=p,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,T,M,O)=>{const R=new(Xu(T.type))(_,T,M,O);if(R.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${R.id}`);return R})(n,u,p,this),this._inViewTiles=new Xi,this._outOfViewCache=new c.ax(0,(_=>this._unloadTile(_))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ye,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){for(const u of this._inViewTiles.getAllTiles())u.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n),this._inViewTiles=new Xi}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u,p){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,u,p)}catch(_){n.state="errored",_.status!==404?this._source.fire(new c.k(_,{tile:n})):this.update(this.transform,this.terrain)}}))}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new c.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const u of this._inViewTiles.getAllTiles())u.upload(n),u.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(n){var u;return this._inViewTiles.getRenderableIds((u=this.transform)===null||u===void 0?void 0:u.bearingInRadians,n)}hasRenderableParent(n){const u=n.overscaledZ-1;if(u>=this._source.minzoom){const p=this.getLoadedTile(n.scaledTo(u));if(p)return this._inViewTiles.isIdRenderable(p.tileID.key)}return!1}reload(n,u=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const p of this._inViewTiles.getAllIds()){const _=this._inViewTiles.getTileById(p);u&&!this._source.shouldReloadTile(_,u)||(n?this._reloadTile(p,"expired"):_.state!=="errored"&&this._reloadTile(p,"reloading"))}}}_reloadTile(n,u){return c._(this,void 0,void 0,(function*(){const p=this._inViewTiles.getTileById(n);p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,n,u))}))}_tileLoaded(n,u,p){n.timeAdded=H(),n.selfFading&&(n.fadeEndTime=n.timeAdded+this._rasterFadeDuration),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),this.getSource().type==="raster-dem"&&n.dem&&(function(_,T){var M,O;const R=T.getRenderableIds();for(const V of R){if(!_.neighboringTiles||!_.neighboringTiles[V])continue;const q=T.getTileById(V);_.neighboringTiles[V].backfilled||on(_,q),!((O=(M=q.neighboringTiles)===null||M===void 0?void 0:M[_.tileID.key])===null||O===void 0)&&O.backfilled||on(q,_)}})(n,this._inViewTiles),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:n,coord:n.tileID}))}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._inViewTiles.getTileById(n)}_retainLoadedChildren(n,u){const p=this._getLoadedDescendents(u),_=new Set;for(const T of u){const M=p[T.key];if(!M?.length){_.add(T);continue}const O=T.overscaledZ+Ur.maxOverzooming,R=M.filter((K=>K.tileID.overscaledZ<=O));if(!R.length){_.add(T);continue}const V=Math.min(...R.map((K=>K.tileID.overscaledZ))),q=R.filter((K=>K.tileID.overscaledZ===V)).map((K=>K.tileID));for(const K of q)n[K.key]=K;this._areDescendentsComplete(q,V,T.overscaledZ)||_.add(T)}return _}_getLoadedDescendents(n){var u;const p={};for(const _ of this._inViewTiles.getAllTiles().filter((T=>T.hasData())))for(const T of n)_.tileID.isChildOf(T)&&(p[u=T.key]||(p[u]=[])).push(_);return p}_areDescendentsComplete(n,u,p){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===u:Math.pow(4,u-p)===n.length}getLoadedTile(n){return this._inViewTiles.getLoadedTile(n)}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,_=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._outOfViewCache.setMaxSize(T)}handleWrapJump(n){const u=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);this._prevLng=n,u&&(this._inViewTiles.handleWrapJump(u),this._resetTileReloadTimers())}update(n,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=n,this.terrain=u,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((R=>new c.a2(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y))):(p=fn(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?n.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter((R=>this._source.hasTile(R))))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const _=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=ar(n,this._source),M=this._updateRetainedTiles(p,T),O=xn(this._source.type);O&&this._rasterFadeDuration>0&&!u&&(function(R,V,q,K,W,ne,le){const pe=H(),ye=c.av(V);for(const ge of V){const xe=R.getTileById(ge.key);xe.fadingDirection!==we.Departing&&xe.fadeOpacity!==0||xe.resetFadeLogic(),Si(R,xe,q,pe,K,W,le)||dn(R,xe,q,pe,ne,le)||Ir(xe,ye,pe,le)||xe.resetFadeLogic()}})(this._inViewTiles,p,M,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),O?this._cleanUpRasterTiles(M):this._cleanUpVectorTiles(M)}_cleanUpRasterTiles(n){for(const u of this._inViewTiles.getAllIds())n[u]||this._removeTile(u)}_cleanUpVectorTiles(n){for(const u of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(u);n[u]?p.clearSymbolFadeHold():p.hasSymbolBuckets?p.holdingForSymbolFade()?p.symbolFadeFinished()&&this._removeTile(u):p.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(n){const u=[];for(const p of n)if(p.canonical.z>this._source.minzoom){const _=p.scaledTo(p.canonical.z-1);u.push(_);const T=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));u.push(T)}return n.concat(u)}releaseSymbolFadeTiles(){for(const n of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(n).holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){var p;const _=new Set;for(const V of n)this._addTile(V).hasData()||_.add(V);const T=n.reduce(((V,q)=>(V[q.key]=q,V)),{}),M=this._retainLoadedChildren(T,_),O={},R=Math.max(u-Ur.maxUnderzooming,this._source.minzoom);for(const V of M){let q=this._inViewTiles.getTileById(V.key),K=q?.wasRequested();for(let W=V.overscaledZ-1;W>=R;--W){const ne=V.scaledTo(W);if(O[ne.key])break;if(O[ne.key]=!0,q=this.getTile(ne),!q&&K&&(q=this._addTile(ne)),q){const le=q.hasData();if((le||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||K)&&(T[ne.key]=ne),K=q.wasRequested(),le)break}}}return T}_addTile(n){let u=this._inViewTiles.getTileById(n.key);if(u)return u;u=this._outOfViewCache.getAndRemove(n),u&&(u.resetFadeLogic(),this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null));const p=u;return u||(u=new Oe(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,n.key,u.state)),u.uses++,this._inViewTiles.setTile(n.key,u),p||this._source.fire(new c.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){this._clearTileReloadTimer(n);const p=u.getExpiryTimeout();p&&(this._timers[n]=setTimeout((()=>{this._reloadTile(n,"expired"),delete this._timers[n]}),p))}_clearTileReloadTimer(n){const u=this._timers[n];u&&(clearTimeout(u),delete this._timers[n])}_resetTileReloadTimers(){for(const n in this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(const n of this._inViewTiles.getAllIds()){const u=this._inViewTiles.getTileById(n);this._setTileReloadTimer(n,u)}}refreshTiles(n){for(const u of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(u);(this._inViewTiles.isIdRenderable(u)||p.state=="errored")&&n.some((_=>_.equals(p.tileID.canonical)))&&this._reloadTile(u,"expired")}}_removeTile(n){const u=this._inViewTiles.getTileById(n);u&&(u.uses--,this._inViewTiles.deleteTileById(n),this._clearTileReloadTimer(n),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._outOfViewCache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged,n.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n of this._inViewTiles.getAllIds())this._removeTile(n);this._outOfViewCache.reset()}tilesIn(n,u,p){const _=[],T=this.transform;if(!T)return _;const M=T.getCoveringTilesDetailsProvider().allowWorldCopies(),O=p?T.getCameraQueryGeometry(n):n,R=ne=>T.screenPointToMercatorCoordinate(ne,this.terrain),V=this.transformBbox(n,R,!M),q=this.transformBbox(O,R,!M),K=this.getIds(),W=c.aa.fromPoints(q);for(let ne=0;ne<K.length;ne++){const le=this._inViewTiles.getTileById(K[ne]);if(le.holdingForSymbolFade())continue;const pe=M?[le.tileID]:[le.tileID.unwrapTo(-1),le.tileID.unwrapTo(0)],ye=Math.pow(2,T.zoom-le.tileID.overscaledZ),ge=u*le.queryPadding*c.a5/le.tileSize/ye;for(const xe of pe){const De=W.map((be=>xe.getTilePoint(new c.a9(be.x,be.y))));if(De.expandBy(ge),De.intersects(Pn)){const be=V.map((ke=>xe.getTilePoint(ke))),Ce=q.map((ke=>xe.getTilePoint(ke)));_.push({tile:le,tileID:M?xe:xe.unwrapTo(0),queryGeometry:be,cameraQueryGeometry:Ce,scale:ye})}}}return _}transformBbox(n,u,p){let _=n.map(u);if(p){const T=c.aa.fromPoints(n);T.shrinkBy(.001*Math.min(T.width(),T.height()));const M=T.map(u);c.aa.fromPoints(_).covers(M)||(_=_.map((O=>O.x>.5?new c.a9(O.x-1,O.y,O.z):O)))}return _}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map((p=>this._inViewTiles.getTileById(p).tileID));return this.transform&&this.transform.populateCache(u),u}hasTransition(){return!!this._source.hasTransition()||!(!xn(this._source.type)||!(function(n,u){if(u<=0)return!1;const p=H();for(const _ of n.getAllTiles())if(_.fadeEndTime>=p)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,u,p){this._state.updateState(n=n||c.ai,u,p)}removeFeatureState(n,u,p){this._state.removeFeatureState(n=n||c.ai,u,p)}getFeatureState(n,u){return this._state.getState(n=n||c.ai,u)}setDependencies(n,u,p){const _=this._inViewTiles.getTileById(n);_&&_.setDependencies(u,p)}reloadTilesForDependencies(n,u){for(const p of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(p).hasDependency(n,u)&&this._reloadTile(p,"reloading");this._outOfViewCache.filter((p=>!p.hasDependency(n,u)))}areTilesLoaded(){for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}}Ur.maxUnderzooming=10,Ur.maxOverzooming=3;class Pt{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.an(n,0,1);let u=1,p=this._distances[u];const _=n*this.paddedLength+this.padding;for(;p<_&&u<this._distances.length;)p=this._distances[++u];const T=u-1,M=this._distances[T],O=p-M,R=O>0?(_-M)/O:0;return this.points[T].mult(1-R).add(this.points[u].mult(R))}}function Kt(w,n){let u=!0;return w==="always"||w!=="never"&&n!=="never"||(u=!1),u}class ur{constructor(n,u,p){const _=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(u/p);for(let M=0;M<this.xCellCount*this.yCellCount;M++)_.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,p,_,T){this._forEachCell(u,p,_,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(T)}insertCircle(n,u,p,_){this._forEachCell(u-_,p-_,u+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(p),this.circles.push(_)}_insertBoxCell(n,u,p,_,T,M){this.boxCells[T].push(M)}_insertCircleCell(n,u,p,_,T,M){this.circleCells[T].push(M)}_query(n,u,p,_,T,M,O){if(p<0||n>this.width||_<0||u>this.height)return[];const R=[];if(n<=0&&u<=0&&this.width<=p&&this.height<=_){if(T)return[{key:null,x1:n,y1:u,x2:p,y2:_}];for(let V=0;V<this.boxKeys.length;V++)R.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const q=this.circles[3*V],K=this.circles[3*V+1],W=this.circles[3*V+2];R.push({key:this.circleKeys[V],x1:q-W,y1:K-W,x2:q+W,y2:K+W})}}else this._forEachCell(n,u,p,_,this._queryCell,R,{hitTest:T,overlapMode:M,seenUids:{box:{},circle:{}}},O);return R}query(n,u,p,_){return this._query(n,u,p,_,!1,null)}hitTest(n,u,p,_,T,M){return this._query(n,u,p,_,!0,T,M).length>0}hitTestCircle(n,u,p,_,T){const M=n-p,O=n+p,R=u-p,V=u+p;if(O<0||M>this.width||V<0||R>this.height)return!1;const q=[];return this._forEachCell(M,R,O,V,this._queryCellCircle,q,{hitTest:!0,overlapMode:_,circle:{x:n,y:u,radius:p},seenUids:{box:{},circle:{}}},T),q.length>0}_queryCell(n,u,p,_,T,M,O,R){const{seenUids:V,hitTest:q,overlapMode:K}=O,W=this.boxCells[T];if(W!==null){const le=this.bboxes;for(const pe of W)if(!V.box[pe]){V.box[pe]=!0;const ye=4*pe,ge=this.boxKeys[pe];if(n<=le[ye+2]&&u<=le[ye+3]&&p>=le[ye+0]&&_>=le[ye+1]&&(!R||R(ge))&&(!q||!Kt(K,ge.overlapMode))&&(M.push({key:ge,x1:le[ye],y1:le[ye+1],x2:le[ye+2],y2:le[ye+3]}),q))return!0}}const ne=this.circleCells[T];if(ne!==null){const le=this.circles;for(const pe of ne)if(!V.circle[pe]){V.circle[pe]=!0;const ye=3*pe,ge=this.circleKeys[pe];if(this._circleAndRectCollide(le[ye],le[ye+1],le[ye+2],n,u,p,_)&&(!R||R(ge))&&(!q||!Kt(K,ge.overlapMode))){const xe=le[ye],De=le[ye+1],be=le[ye+2];if(M.push({key:ge,x1:xe-be,y1:De-be,x2:xe+be,y2:De+be}),q)return!0}}}return!1}_queryCellCircle(n,u,p,_,T,M,O,R){const{circle:V,seenUids:q,overlapMode:K}=O,W=this.boxCells[T];if(W!==null){const le=this.bboxes;for(const pe of W)if(!q.box[pe]){q.box[pe]=!0;const ye=4*pe,ge=this.boxKeys[pe];if(this._circleAndRectCollide(V.x,V.y,V.radius,le[ye+0],le[ye+1],le[ye+2],le[ye+3])&&(!R||R(ge))&&!Kt(K,ge.overlapMode))return M.push(!0),!0}}const ne=this.circleCells[T];if(ne!==null){const le=this.circles;for(const pe of ne)if(!q.circle[pe]){q.circle[pe]=!0;const ye=3*pe,ge=this.circleKeys[pe];if(this._circlesCollide(le[ye],le[ye+1],le[ye+2],V.x,V.y,V.radius)&&(!R||R(ge))&&!Kt(K,ge.overlapMode))return M.push(!0),!0}}}_forEachCell(n,u,p,_,T,M,O,R){const V=this._convertToXCellCoord(n),q=this._convertToYCellCoord(u),K=this._convertToXCellCoord(p),W=this._convertToYCellCoord(_);for(let ne=V;ne<=K;ne++)for(let le=q;le<=W;le++)if(T.call(this,n,u,p,_,this.xCellCount*le+ne,M,O,R))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,p,_,T,M){const O=_-n,R=T-u,V=p+M;return V*V>O*O+R*R}_circleAndRectCollide(n,u,p,_,T,M,O){const R=(M-_)/2,V=Math.abs(n-(_+R));if(V>R+p)return!1;const q=(O-T)/2,K=Math.abs(u-(T+q));if(K>q+p)return!1;if(V<=R||K<=q)return!0;const W=V-R,ne=K-q;return W*W+ne*ne<=p*p}}function ba(w,n,u){const p=c.N();if(!w){const{vecSouth:K,vecEast:W}=Vo(n),ne=P();ne[0]=W[0],ne[1]=W[1],ne[2]=K[0],ne[3]=K[1],_=ne,(q=(M=(T=ne)[0])*(V=T[3])-(R=T[2])*(O=T[1]))&&(_[0]=V*(q=1/q),_[1]=-O*q,_[2]=-R*q,_[3]=M*q),p[0]=ne[0],p[1]=ne[1],p[4]=ne[2],p[5]=ne[3]}var _,T,M,O,R,V,q;return c.Q(p,p,[1/u,1/u,1]),p}function xf(w,n,u,p){if(w){const _=c.N();if(!n){const{vecSouth:T,vecEast:M}=Vo(u);_[0]=M[0],_[1]=M[1],_[4]=T[0],_[5]=T[1]}return c.Q(_,_,[p,p,1]),_}return u.pixelsToClipSpaceMatrix}function Vo(w){const n=Math.cos(w.rollInRadians),u=Math.sin(w.rollInRadians),p=Math.cos(w.pitchInRadians),_=Math.cos(w.bearingInRadians),T=Math.sin(w.bearingInRadians),M=c.aC();M[0]=-_*p*u-T*n,M[1]=-T*p*u+_*n;const O=c.aD(M);O<1e-9?c.aE(M):c.aF(M,M,1/O);const R=c.aC();R[0]=_*p*n-T*u,R[1]=T*p*n+_*u;const V=c.aD(R);return V<1e-9?c.aE(R):c.aF(R,R,1/V),{vecEast:R,vecSouth:M}}function hr(w,n,u,p){let _;p?(_=[w,n,p(w,n),1],c.aH(_,_,u)):(_=[w,n,0,1],Ya(_,_,u));const T=_[3];return{point:new c.P(_[0]/T,_[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function $l(w,n){return .5+w/n*.5}function Go(w,n){return w.x>=-n[0]&&w.x<=n[0]&&w.y>=-n[1]&&w.y<=n[1]}function Ss(w,n,u,p,_,T,M,O,R,V,q,K,W){const ne=u?w.textSizeData:w.iconSizeData,le=c.ay(ne,n.transform.zoom),pe=[256/n.width*2+1,256/n.height*2+1],ye=u?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ye.clear();const ge=w.lineVertexArray,xe=u?w.text.placedSymbolArray:w.icon.placedSymbolArray,De=n.transform.width/n.transform.height;let be=!1;for(let Ce=0;Ce<xe.length;Ce++){const ke=xe.get(Ce);if(ke.hidden||ke.writingMode===c.az.vertical&&!be){Zo(ke.numGlyphs,ye);continue}be=!1;const Se=new c.P(ke.anchorX,ke.anchorY),je={getElevation:W,pitchedLabelPlaneMatrix:p,lineVertexArray:ge,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:Se,unwrappedTileID:R,width:V,height:q,translation:K},et=Hc(ke.anchorX,ke.anchorY,je);if(!Go(et.point,pe)){Zo(ke.numGlyphs,ye);continue}const Xe=$l(n.transform.cameraToCenterDistance,et.signedDistanceFromCamera),Qe=c.aA(ne,le,ke),Je=T?Qe*n.transform.getPitchedTextCorrection(ke.anchorX,ke.anchorY,R)/Xe:Qe*Xe,Ct=Cn({projectionContext:je,pitchedLabelPlaneMatrixInverse:_,symbol:ke,fontSize:Je,flip:!1,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ye,aspectRatio:De,rotateToLine:O});be=Ct.useVertical,(Ct.notEnoughRoom||be||Ct.needsFlipping&&Cn({projectionContext:je,pitchedLabelPlaneMatrixInverse:_,symbol:ke,fontSize:Je,flip:!0,keepUpright:M,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ye,aspectRatio:De,rotateToLine:O}).notEnoughRoom)&&Zo(ke.numGlyphs,ye)}u?w.text.dynamicLayoutVertexBuffer.updateData(ye):w.icon.dynamicLayoutVertexBuffer.updateData(ye)}function qo(w,n,u,p,_,T,M,O){const R=T.glyphStartIndex+T.numGlyphs,V=T.lineStartIndex,q=T.lineStartIndex+T.lineLength,K=n.getoffsetX(T.glyphStartIndex),W=n.getoffsetX(R-1),ne=_o(w*K,u,p,_,T.segment,V,q,O,M);if(!ne)return null;const le=_o(w*W,u,p,_,T.segment,V,q,O,M);return le?O.projectionCache.anyProjectionOccluded?null:{first:ne,last:le}:null}function $o(w,n,u,p){return w===c.az.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*p?{useVertical:!0}:(w===c.az.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function Cn(w){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:u,symbol:p,fontSize:_,flip:T,keepUpright:M,glyphOffsetArray:O,dynamicLayoutVertexArray:R,aspectRatio:V,rotateToLine:q}=w,K=_/24,W=p.lineOffsetX*K,ne=p.lineOffsetY*K;let le;if(p.numGlyphs>1){const pe=p.glyphStartIndex+p.numGlyphs,ye=p.lineStartIndex,ge=p.lineStartIndex+p.lineLength,xe=qo(K,O,W,ne,T,p,q,n);if(!xe)return{notEnoughRoom:!0};const De=Ts(xe.first.point.x,xe.first.point.y,n,u),be=Ts(xe.last.point.x,xe.last.point.y,n,u);if(M&&!T){const Ce=$o(p.writingMode,De,be,V);if(Ce)return Ce}le=[xe.first];for(let Ce=p.glyphStartIndex+1;Ce<pe-1;Ce++){const ke=_o(K*O.getoffsetX(Ce),W,ne,T,p.segment,ye,ge,n,q);if(!ke)return{notEnoughRoom:!0};le.push(ke)}le.push(xe.last)}else{if(M&&!T){const ye=Ar(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,ge=p.lineStartIndex+p.segment+1,xe=new c.P(n.lineVertexArray.getx(ge),n.lineVertexArray.gety(ge)),De=Ar(xe.x,xe.y,n),be=De.signedDistanceFromCamera>0?De.point:Zc(n.tileAnchorPoint,xe,ye,1,n),Ce=Ts(ye.x,ye.y,n,u),ke=Ts(be.x,be.y,n,u),Se=$o(p.writingMode,Ce,ke,V);if(Se)return Se}const pe=_o(K*O.getoffsetX(p.glyphStartIndex),W,ne,T,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,n,q);if(!pe||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};le=[pe]}for(const pe of le)c.aG(R,pe.point,pe.angle);return{}}function Zc(w,n,u,p,_){const T=w.add(w.sub(n)._unit()),M=Ar(T.x,T.y,_).point,O=u.sub(M);return u.add(O._mult(p/O.mag()))}function Pi(w,n,u){const p=n.projectionCache;if(p.projections[w])return p.projections[w];const _=new c.P(n.lineVertexArray.getx(w),n.lineVertexArray.gety(w)),T=Ar(_.x,_.y,n);if(T.signedDistanceFromCamera>0)return p.projections[w]=T.point,p.anyProjectionOccluded=p.anyProjectionOccluded||T.isOccluded,T.point;const M=w-u.direction;return Zc(u.distanceFromAnchor===0?n.tileAnchorPoint:new c.P(n.lineVertexArray.getx(M),n.lineVertexArray.gety(M)),_,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,n)}function Ar(w,n,u){const p=w+u.translation[0],_=n+u.translation[1];let T;return u.pitchWithMap?(T=hr(p,_,u.pitchedLabelPlaneMatrix,u.getElevation),T.isOccluded=!1):(T=u.transform.projectTileCoordinates(p,_,u.unwrappedTileID,u.getElevation),T.point.x=(.5*T.point.x+.5)*u.width,T.point.y=(.5*-T.point.y+.5)*u.height),T}function Ts(w,n,u,p){if(u.pitchWithMap){const _=[w,n,0,1];return c.aH(_,_,p),u.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],u.unwrappedTileID,u.getElevation).point}return{x:w/u.width*2-1,y:1-n/u.height*2}}function Hc(w,n,u){return u.transform.projectTileCoordinates(w,n,u.unwrappedTileID,u.getElevation)}function Yc(w,n,u){return w._unit()._perp()._mult(n*u)}function nl(w,n,u,p,_,T,M,O,R){if(O.projectionCache.offsets[w])return O.projectionCache.offsets[w];const V=u.add(n);if(w+R.direction<p||w+R.direction>=_)return O.projectionCache.offsets[w]=V,V;const q=Pi(w+R.direction,O,R),K=Yc(q.sub(u),M,R.direction),W=u.add(K),ne=q.add(K);return O.projectionCache.offsets[w]=c.aI(T,V,W,ne)||V,O.projectionCache.offsets[w]}function _o(w,n,u,p,_,T,M,O,R){const V=p?w-n:w+n;let q=V>0?1:-1,K=0;p&&(q*=-1,K=Math.PI),q<0&&(K+=Math.PI);let W,ne=q>0?T+_:T+_+1;O.projectionCache.cachedAnchorPoint?W=O.projectionCache.cachedAnchorPoint:(W=Ar(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=W);let le,pe,ye=W,ge=W,xe=0,De=0;const be=Math.abs(V),Ce=[];let ke;for(;xe+De<=be;){if(ne+=q,ne<T||ne>=M)return null;xe+=De,ge=ye,pe=le;const et={absOffsetX:be,direction:q,distanceFromAnchor:xe,previousVertex:ge};if(ye=Pi(ne,O,et),u===0)Ce.push(ge),ke=ye.sub(ge);else{let Xe;const Qe=ye.sub(ge);Xe=Qe.mag()===0?Yc(Pi(ne+q,O,et).sub(ye),u,q):Yc(Qe,u,q),pe||(pe=ge.add(Xe)),le=nl(ne,Xe,ye,T,M,pe,u,O,et),Ce.push(pe),ke=le.sub(pe)}De=ke.mag()}const Se=ke._mult((be-xe)/De)._add(pe||ge),je=K+Math.atan2(ye.y-ge.y,ye.x-ge.x);return Ce.push(Se),{point:Se,angle:R?je:0,path:Ce}}const Wu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Zo(w,n){for(let u=0;u<w;u++){const p=n.length;n.resize(p+4),n.float32.set(Wu,3*p)}}function Ya(w,n,u){const p=n[0],_=n[1];return w[0]=u[0]*p+u[4]*_+u[12],w[1]=u[1]*p+u[5]*_+u[13],w[3]=u[3]*p+u[7]*_+u[15],w}const Or=100;class Od{constructor(n,u=new ur(n.width+200,n.height+200,25),p=new ur(n.width+200,n.height+200,25)){this.transform=n,this.grid=u,this.ignoredGrid=p,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Or,this.screenBottomBoundary=n.height+Or,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,p,_,T,M,O,R,V,q,K,W){const ne=this.projectAndGetPerspectiveRatio(n.anchorPointX+R[0],n.anchorPointY+R[1],T,q,W),le=p*ne.perspectiveRatio;let pe;if(M||O)pe=this._projectCollisionBox(n,le,_,T,M,O,R,ne,q,K,W);else{const ke=ne.x+(K?K.x*le:0),Se=ne.y+(K?K.y*le:0);pe={allPointsOccluded:!1,box:[ke+n.x1*le,Se+n.y1*le,ke+n.x2*le,Se+n.y2*le]}}const[ye,ge,xe,De]=pe.box,be=M?pe.allPointsOccluded:ne.isOccluded;let Ce=be;return Ce||(Ce=ne.perspectiveRatio<this.perspectiveRatioCutoff),Ce||(Ce=!this.isInsideGrid(ye,ge,xe,De)),Ce||u!=="always"&&this.grid.hitTest(ye,ge,xe,De,u,V)?{box:[ye,ge,xe,De],placeable:!1,offscreen:!1,occluded:be}:{box:[ye,ge,xe,De],placeable:!0,offscreen:this.isOffscreen(ye,ge,xe,De),occluded:be}}placeCollisionCircles(n,u,p,_,T,M,O,R,V,q,K,W,ne,le){const pe=[],ye=new c.P(u.anchorX,u.anchorY),ge=this.getPerspectiveRatio(ye.x,ye.y,M,le),xe=(V?T*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,M)/ge:T*ge)/c.aM,De={getElevation:le,pitchedLabelPlaneMatrix:O,lineVertexArray:p,pitchWithMap:V,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ye,unwrappedTileID:M,width:this.transform.width,height:this.transform.height,translation:ne},be=qo(xe,_,u.lineOffsetX*xe,u.lineOffsetY*xe,!1,u,!1,De);let Ce=!1,ke=!1,Se=!0;if(be){const je=.5*K*ge+W,et=new c.P(-100,-100),Xe=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Qe=new Pt,Je=be.first,Ct=be.last;let Dt=[];for(let sr=Je.path.length-1;sr>=1;sr--)Dt.push(Je.path[sr]);for(let sr=1;sr<Ct.path.length;sr++)Dt.push(Ct.path[sr]);const vt=2.5*je;if(V){const sr=this.projectPathToScreenSpace(Dt,De);Dt=sr.some((jr=>jr.signedDistanceFromCamera<=0))?[]:sr.map((jr=>jr.point))}let kt=[];if(Dt.length>0){const sr=Dt[0].clone(),jr=Dt[0].clone();for(let nn=1;nn<Dt.length;nn++)sr.x=Math.min(sr.x,Dt[nn].x),sr.y=Math.min(sr.y,Dt[nn].y),jr.x=Math.max(jr.x,Dt[nn].x),jr.y=Math.max(jr.y,Dt[nn].y);kt=sr.x>=et.x&&jr.x<=Xe.x&&sr.y>=et.y&&jr.y<=Xe.y?[Dt]:jr.x<et.x||sr.x>Xe.x||jr.y<et.y||sr.y>Xe.y?[]:c.aJ([Dt],et.x,et.y,Xe.x,Xe.y)}for(const sr of kt){Qe.reset(sr,.25*je);let jr=0;jr=Qe.length<=.5*je?1:Math.ceil(Qe.paddedLength/vt)+1;for(let nn=0;nn<jr;nn++){const Qr=nn/Math.max(jr-1,1),un=Qe.lerp(Qr),Zr=un.x+Or,Tn=un.y+Or;pe.push(Zr,Tn,je,0);const hn=Zr-je,fi=Tn-je,zn=Zr+je,kn=Tn+je;if(Se=Se&&this.isOffscreen(hn,fi,zn,kn),ke=ke||this.isInsideGrid(hn,fi,zn,kn),n!=="always"&&this.grid.hitTestCircle(Zr,Tn,je,n,q)&&(Ce=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ce}}}}return{circles:!R&&Ce||!ke||ge<this.perspectiveRatioCutoff?[]:pe,offscreen:Se,collisionDetected:Ce}}projectPathToScreenSpace(n,u){const p=(function(_,T){const M=c.N();return c.aB(M,T.pitchedLabelPlaneMatrix),_.map((O=>{const R=hr(O.x,O.y,M,T.getElevation),V=T.transform.projectTileCoordinates(R.point.x,R.point.y,T.unwrappedTileID,T.getElevation);return V.point.x=(.5*V.point.x+.5)*T.width,V.point.y=(.5*-V.point.y+.5)*T.height,V}))})(n,u);return(function(_){let T=0,M=0,O=0,R=0;for(let V=0;V<_.length;V++)_[V].isOccluded?(O=V+1,R=0):(R++,R>M&&(M=R,T=O));return _.slice(T,T+M)})(p)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],p=new c.aa;for(const K of n){const W=new c.P(K.x+Or,K.y+Or);p.extend(W),u.push(W)}const{minX:_,minY:T,maxX:M,maxY:O}=p,R=this.grid.query(_,T,M,O).concat(this.ignoredGrid.query(_,T,M,O)),V={},q={};for(const K of R){const W=K.key;if(V[W.bucketInstanceId]===void 0&&(V[W.bucketInstanceId]={}),V[W.bucketInstanceId][W.featureIndex])continue;const ne=[new c.P(K.x1,K.y1),new c.P(K.x2,K.y1),new c.P(K.x2,K.y2),new c.P(K.x1,K.y2)];c.aK(u,ne)&&(V[W.bucketInstanceId][W.featureIndex]=!0,q[W.bucketInstanceId]===void 0&&(q[W.bucketInstanceId]=[]),q[W.bucketInstanceId].push(W.featureIndex))}return q}insertCollisionBox(n,u,p,_,T,M){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:T,collisionGroupID:M,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,p,_,T,M){const O=p?this.ignoredGrid:this.grid,R={bucketInstanceId:_,featureIndex:T,collisionGroupID:M,overlapMode:u};for(let V=0;V<n.length;V+=4)O.insertCircle(R,n[V],n[V+1],n[V+2])}projectAndGetPerspectiveRatio(n,u,p,_,T){if(T){let M;_?(M=[n,u,_(n,u),1],c.aH(M,M,T)):(M=[n,u,0,1],Ya(M,M,T));const O=M[3];return{x:(M[0]/O+1)/2*this.transform.width+Or,y:(-M[1]/O+1)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const M=this.transform.projectTileCoordinates(n,u,p,_);return{x:(M.point.x+1)/2*this.transform.width+Or,y:(1-M.point.y)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M.signedDistanceFromCamera*.5,isOccluded:M.isOccluded,signedDistanceFromCamera:M.signedDistanceFromCamera}}}getPerspectiveRatio(n,u,p,_){const T=this.transform.projectTileCoordinates(n,u,p,_);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(n,u,p,_){return p<Or||n>=this.screenRightBoundary||_<Or||u>this.screenBottomBoundary}isInsideGrid(n,u,p,_){return p>=0&&n<this.gridRightBoundary&&_>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=c.ar([]);return c.O(n,n,[-100,-100,0]),n}_projectCollisionBox(n,u,p,_,T,M,O,R,V,q,K){let W=1,ne=0,le=0,pe=1;const ye=n.anchorPointX+O[0],ge=n.anchorPointY+O[1];if(M&&!T){const Dt=this.projectAndGetPerspectiveRatio(ye+1,ge,_,V,K),vt=Dt.x-R.x,kt=Math.atan((Dt.y-R.y)/vt)+(vt<0?Math.PI:0),sr=Math.sin(kt),jr=Math.cos(kt);W=jr,ne=sr,le=-sr,pe=jr}else if(!M&&T){const Dt=Vo(this.transform);W=Dt.vecEast[0],ne=Dt.vecEast[1],le=Dt.vecSouth[0],pe=Dt.vecSouth[1]}let xe=R.x,De=R.y,be=u;T&&(xe=ye,De=ge,be=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),be*=this.transform.getPitchedTextCorrection(ye,ge,_),q||(be*=c.an(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(xe+=W*q.x*be+le*q.y*be,De+=ne*q.x*be+pe*q.y*be);const Ce=n.x1*be,ke=n.x2*be,Se=(Ce+ke)/2,je=n.y1*be,et=n.y2*be,Xe=(je+et)/2,Qe=[{offsetX:Ce,offsetY:je},{offsetX:Se,offsetY:je},{offsetX:ke,offsetY:je},{offsetX:ke,offsetY:Xe},{offsetX:ke,offsetY:et},{offsetX:Se,offsetY:et},{offsetX:Ce,offsetY:et},{offsetX:Ce,offsetY:Xe}];let Je=[];for(const{offsetX:Dt,offsetY:vt}of Qe)Je.push(new c.P(xe+W*Dt+le*vt,De+ne*Dt+pe*vt));let Ct=!1;if(T){const Dt=Je.map((vt=>this.projectAndGetPerspectiveRatio(vt.x,vt.y,_,V,K)));Ct=Dt.some((vt=>!vt.isOccluded)),Je=Dt.map((vt=>new c.P(vt.x,vt.y)))}else Ct=!0;return{box:c.aL(Je),allPointsOccluded:!Ct}}}class cm{constructor(n,u,p,_){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Zl{constructor(n,u,p,_,T){this.text=new cm(n?n.text:null,u,p,T),this.icon=new cm(n?n.icon:null,u,_,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zd{constructor(n,u,p){this.text=n,this.icon=u,this.skipFade=p}}class Ku{constructor(n,u,p,_,T){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=T}}class um{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[n]}}function Li(w,n,u,p,_){const{horizontalAlign:T,verticalAlign:M}=c.aS(w);return new c.P(-(T-.5)*n+p[0]*_,-(M-.5)*u+p[1]*_)}class Qu{constructor(n,u,p,_,T){this.transform=n.clone(),this.terrain=u,this.collisionIndex=new Od(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new um(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const u=this.terrain;return u?(p,_)=>u.getElevation(n,p,_):null}getBucketParts(n,u,p,_){const T=p.getBucket(u),M=p.latestFeatureIndex;if(!T||!M||u.id!==T.layerIds[0])return;const O=p.collisionBoxArray,R=T.layers[0].layout,V=T.layers[0].paint,q=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),K=p.tileSize/c.a5,W=p.tileID.toUnwrapped(),ne=R.get("text-rotation-alignment")==="map",le=c.aN(p,1,this.transform.zoom),pe=c.aO(this.collisionIndex.transform,p,V.get("text-translate"),V.get("text-translate-anchor")),ye=c.aO(this.collisionIndex.transform,p,V.get("icon-translate"),V.get("icon-translate-anchor")),ge=ba(ne,this.transform,le);this.retainedQueryData[T.bucketInstanceId]=new Ku(T.bucketInstanceId,M,T.sourceLayerIndex,T.index,p.tileID);const xe={bucket:T,layout:R,translationText:pe,translationIcon:ye,unwrappedTileID:W,pitchedLabelPlaneMatrix:ge,scale:q,textPixelRatio:K,holdingForFade:p.holdingForSymbolFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:c.ay(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(_)for(const De of T.sortKeyRanges){const{sortKey:be,symbolInstanceStart:Ce,symbolInstanceEnd:ke}=De;n.push({sortKey:be,symbolInstanceStart:Ce,symbolInstanceEnd:ke,parameters:xe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(n,u,p,_,T,M,O,R,V,q,K,W,ne,le,pe,ye,ge,xe,De,be){const Ce=c.aP[n.textAnchor],ke=[n.textOffset0,n.textOffset1],Se=Li(Ce,p,_,ke,T),je=this.collisionIndex.placeCollisionBox(u,W,R,V,q,O,M,ye,K.predicate,De,Se,be);if((!xe||this.collisionIndex.placeCollisionBox(xe,W,R,V,q,O,M,ge,K.predicate,De,Se,be).placeable)&&je.placeable){let et;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID]&&this.prevPlacement.placements[ne.crossTileID].text&&(et=this.prevPlacement.variableOffsets[ne.crossTileID].anchor),ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ne.crossTileID]={textOffset:ke,width:p,height:_,anchor:Ce,textBoxScale:T,prevAnchor:et},this.markUsedJustification(le,Ce,ne,pe),le.allowVerticalPlacement&&(this.markUsedOrientation(le,pe,ne),this.placedOrientations[ne.crossTileID]=pe),{shift:Se,placedGlyphBoxes:je}}}placeLayerBucketPart(n,u,p){const{bucket:_,layout:T,translationText:M,translationIcon:O,unwrappedTileID:R,pitchedLabelPlaneMatrix:V,textPixelRatio:q,holdingForFade:K,collisionBoxArray:W,partiallyEvaluatedTextSize:ne,collisionGroup:le}=n.parameters,pe=T.get("text-optional"),ye=T.get("icon-optional"),ge=c.aQ(T,"text-overlap","text-allow-overlap"),xe=ge==="always",De=c.aQ(T,"icon-overlap","icon-allow-overlap"),be=De==="always",Ce=T.get("text-rotation-alignment")==="map",ke=T.get("text-pitch-alignment")==="map",Se=T.get("icon-text-fit")!=="none",je=T.get("symbol-z-order")==="viewport-y",et=xe&&(be||!_.hasIconData()||ye),Xe=be&&(xe||!_.hasTextData()||pe);!_.collisionArrays&&W&&_.deserializeCollisionBoxes(W);const Qe=this.retainedQueryData[_.bucketInstanceId].tileID,Je=this._getTerrainElevationFunc(Qe),Ct=this.transform.getFastPathSimpleProjectionMatrix(Qe),Dt=(vt,kt,sr)=>{var jr,nn;if(u[vt.crossTileID])return;if(K)return void(this.placements[vt.crossTileID]=new zd(!1,!1,!1));let Qr=!1,un=!1,Zr=!0,Tn=null,hn={box:null,placeable:!1,offscreen:null,occluded:!1},fi={placeable:!1},zn=null,kn=null,di=null,hs=0,fs=0,Po=0;kt.textFeatureIndex?hs=kt.textFeatureIndex:vt.useRuntimeCollisionCircles&&(hs=vt.featureIndex),kt.verticalTextFeatureIndex&&(fs=kt.verticalTextFeatureIndex);const ta=kt.textBox;if(ta){const ra=Gr=>{let Jr=c.az.horizontal;if(_.allowVerticalPlacement&&!Gr&&this.prevPlacement){const $n=this.prevPlacement.placedOrientations[vt.crossTileID];$n&&(this.placedOrientations[vt.crossTileID]=$n,Jr=$n,this.markUsedOrientation(_,Jr,vt))}return Jr},Ia=(Gr,Jr)=>{if(_.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&kt.verticalTextBox){for(const $n of _.writingModes)if($n===c.az.vertical?(hn=Jr(),fi=hn):hn=Gr(),hn&&hn.placeable)break}else hn=Gr()},ao=vt.textAnchorOffsetStartIndex,oo=vt.textAnchorOffsetEndIndex;if(oo===ao){const Gr=(Jr,$n)=>{const Qn=this.collisionIndex.placeCollisionBox(Jr,ge,q,Qe,R,ke,Ce,M,le.predicate,Je,void 0,Ct);return Qn&&Qn.placeable&&(this.markUsedOrientation(_,$n,vt),this.placedOrientations[vt.crossTileID]=$n),Qn};Ia((()=>Gr(ta,c.az.horizontal)),(()=>{const Jr=kt.verticalTextBox;return _.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&Jr?Gr(Jr,c.az.vertical):{box:null,offscreen:null}})),ra(hn&&hn.placeable)}else{let Gr=c.aP[(nn=(jr=this.prevPlacement)===null||jr===void 0?void 0:jr.variableOffsets[vt.crossTileID])===null||nn===void 0?void 0:nn.anchor];const Jr=(Qn,Xf,Wf)=>{const Sl=Qn.x2-Qn.x1,Pm=Qn.y2-Qn.y1,Tl=vt.textBoxScale,Kf=Se&&De==="never"?Xf:null;let js=null,Ns=ge==="never"?1:2,Do="never";Gr&&Ns++;for(let Qf=0;Qf<Ns;Qf++){for(let kh=ao;kh<oo;kh++){const Rh=_.textAnchorOffsets.get(kh);if(Gr&&Rh.textAnchor!==Gr)continue;const Lh=this.attemptAnchorPlacement(Rh,Qn,Sl,Pm,Tl,Ce,ke,q,Qe,R,le,Do,vt,_,Wf,M,O,Kf,Je);if(Lh&&(js=Lh.placedGlyphBoxes,js&&js.placeable))return Qr=!0,Tn=Lh.shift,js}Gr?Gr=null:Do=ge}return p&&!js&&(js={box:this.collisionIndex.placeCollisionBox(ta,"always",q,Qe,R,ke,Ce,M,le.predicate,Je,void 0,Ct).box,offscreen:!1,placeable:!1,occluded:!1}),js};Ia((()=>Jr(ta,kt.iconBox,c.az.horizontal)),(()=>{const Qn=kt.verticalTextBox;return _.allowVerticalPlacement&&(!hn||!hn.placeable)&&vt.numVerticalGlyphVertices>0&&Qn?Jr(Qn,kt.verticalIconBox,c.az.vertical):{box:null,occluded:!0,offscreen:null}})),hn&&(Qr=hn.placeable,Zr=hn.offscreen);const $n=ra(hn&&hn.placeable);if(!Qr&&this.prevPlacement){const Qn=this.prevPlacement.variableOffsets[vt.crossTileID];Qn&&(this.variableOffsets[vt.crossTileID]=Qn,this.markUsedJustification(_,Qn.anchor,vt,$n))}}}if(zn=hn,Qr=zn&&zn.placeable,Zr=zn&&zn.offscreen,vt.useRuntimeCollisionCircles&&vt.centerJustifiedTextSymbolIndex>=0){const ra=_.text.placedSymbolArray.get(vt.centerJustifiedTextSymbolIndex),Ia=c.aA(_.textSizeData,ne,ra),ao=T.get("text-padding");kn=this.collisionIndex.placeCollisionCircles(ge,ra,_.lineVertexArray,_.glyphOffsetArray,Ia,R,V,p,ke,le.predicate,vt.collisionCircleDiameter,ao,M,Je),kn.circles.length&&kn.collisionDetected&&!p&&c.w("Collisions detected, but collision boxes are not shown"),Qr=xe||kn.circles.length>0&&!kn.collisionDetected,Zr=Zr&&kn.offscreen}if(kt.iconFeatureIndex&&(Po=kt.iconFeatureIndex),kt.iconBox){const ra=Ia=>this.collisionIndex.placeCollisionBox(Ia,De,q,Qe,R,ke,Ce,O,le.predicate,Je,Se&&Tn?Tn:void 0,Ct);fi&&fi.placeable&&kt.verticalIconBox?(di=ra(kt.verticalIconBox),un=di.placeable):(di=ra(kt.iconBox),un=di.placeable),Zr=Zr&&di.offscreen}const gc=pe||vt.numHorizontalGlyphVertices===0&&vt.numVerticalGlyphVertices===0,yu=ye||vt.numIconVertices===0;gc||yu?yu?gc||(un=un&&Qr):Qr=un&&Qr:un=Qr=un&&Qr;const Co=un&&di.placeable;if(Qr&&zn.placeable&&this.collisionIndex.insertCollisionBox(zn.box,ge,T.get("text-ignore-placement"),_.bucketInstanceId,fi&&fi.placeable&&fs?fs:hs,le.ID),Co&&this.collisionIndex.insertCollisionBox(di.box,De,T.get("icon-ignore-placement"),_.bucketInstanceId,Po,le.ID),kn&&Qr&&this.collisionIndex.insertCollisionCircles(kn.circles,ge,T.get("text-ignore-placement"),_.bucketInstanceId,hs,le.ID),p&&this.storeCollisionData(_.bucketInstanceId,sr,kt,zn,di,kn),vt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vt.crossTileID]=new zd((Qr||et)&&!zn?.occluded,(un||Xe)&&!di?.occluded,Zr||_.justReloaded),u[vt.crossTileID]=!0};if(je){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const vt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let kt=vt.length-1;kt>=0;--kt){const sr=vt[kt];Dt(_.symbolInstances.get(sr),_.collisionArrays[sr],sr)}}else for(let vt=n.symbolInstanceStart;vt<n.symbolInstanceEnd;vt++)Dt(_.symbolInstances.get(vt),_.collisionArrays[vt],vt);_.justReloaded=!1}storeCollisionData(n,u,p,_,T,M){if(p.textBox||p.iconBox){let O,R;this.collisionBoxArrays.has(n)?O=this.collisionBoxArrays.get(n):(O=new Map,this.collisionBoxArrays.set(n,O)),O.has(u)?R=O.get(u):(R={text:null,icon:null},O.set(u,R)),p.textBox&&(R.text=_.box),p.iconBox&&(R.icon=T.box)}if(M){let O=this.collisionCircleArrays[n];O===void 0&&(O=this.collisionCircleArrays[n]=[]);for(let R=0;R<M.circles.length;R+=4)O.push(M.circles[R+0]-Or),O.push(M.circles[R+1]-Or),O.push(M.circles[R+2]),O.push(M.collisionDetected?1:0)}}markUsedJustification(n,u,p,_){let T;T=_===c.az.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[c.aR(u)];const M=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const O of M)O>=0&&(n.text.placedSymbolArray.get(O).crossTileID=T>=0&&O!==T?0:p.crossTileID)}markUsedOrientation(n,u,p){const _=u===c.az.horizontal||u===c.az.horizontalOnly?u:0,T=u===c.az.vertical?u:0,M=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const O of M)n.text.placedSymbolArray.get(O).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const _=u?u.symbolFadeChange(n):1,T=u?u.opacities:{},M=u?u.variableOffsets:{},O=u?u.placedOrientations:{};for(const R in this.placements){const V=this.placements[R],q=T[R];q?(this.opacities[R]=new Zl(q,_,V.text,V.icon),p=p||V.text!==q.text.placed||V.icon!==q.icon.placed):(this.opacities[R]=new Zl(null,_,V.text,V.icon,V.skipFade),p=p||V.text||V.icon)}for(const R in T){const V=T[R];if(!this.opacities[R]){const q=new Zl(V,_,!1,!1);q.isHidden()||(this.opacities[R]=q,p=p||V.text.placed||V.icon.placed)}}for(const R in M)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=M[R]);for(const R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const p={};for(const _ of u){const T=_.getBucket(n);T&&_.latestFeatureIndex&&n.id===T.layerIds[0]&&this.updateBucketOpacities(T,_.tileID,p,_.collisionBoxArray)}}updateBucketOpacities(n,u,p,_){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const T=n.layers[0],M=T.layout,O=new Zl(null,0,!1,!1,!0),R=M.get("text-allow-overlap"),V=M.get("icon-allow-overlap"),q=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),K=M.get("text-rotation-alignment")==="map",W=M.get("text-pitch-alignment")==="map",ne=M.get("icon-text-fit")!=="none",le=new Zl(null,0,R&&(V||!n.hasIconData()||M.get("icon-optional")),V&&(R||!n.hasTextData()||M.get("text-optional")),!0);!n.collisionArrays&&_&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(_);const pe=(ge,xe,De)=>{for(let be=0;be<xe/4;be++)ge.opacityVertexArray.emplaceBack(De);ge.hasVisibleVertices=ge.hasVisibleVertices||De!==Yl},ye=this.collisionBoxArrays.get(n.bucketInstanceId);for(let ge=0;ge<n.symbolInstances.length;ge++){const xe=n.symbolInstances.get(ge),{numHorizontalGlyphVertices:De,numVerticalGlyphVertices:be,crossTileID:Ce}=xe;let ke=this.opacities[Ce];p[Ce]?ke=O:ke||(ke=le,this.opacities[Ce]=ke),p[Ce]=!0;const Se=xe.numIconVertices>0,je=this.placedOrientations[xe.crossTileID],et=je===c.az.vertical,Xe=je===c.az.horizontal||je===c.az.horizontalOnly;if(De>0||be>0){const Je=Sf(ke.text);pe(n.text,De,et?Yl:Je),pe(n.text,be,Xe?Yl:Je);const Ct=ke.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach((kt=>{kt>=0&&(n.text.placedSymbolArray.get(kt).hidden=Ct||et?1:0)})),xe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Ct||Xe?1:0);const Dt=this.variableOffsets[xe.crossTileID];Dt&&this.markUsedJustification(n,Dt.anchor,xe,je);const vt=this.placedOrientations[xe.crossTileID];vt&&(this.markUsedJustification(n,"left",xe,vt),this.markUsedOrientation(n,vt,xe))}if(Se){const Je=Sf(ke.icon),Ct=!(ne&&xe.verticalPlacedIconSymbolIndex&&et);xe.placedIconSymbolIndex>=0&&(pe(n.icon,xe.numIconVertices,Ct?Je:Yl),n.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=ke.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(pe(n.icon,xe.numVerticalIconVertices,Ct?Yl:Je),n.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}const Qe=ye&&ye.has(ge)?ye.get(ge):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Je=n.collisionArrays[ge];if(Je){let Ct=new c.P(0,0);if(Je.textBox||Je.verticalTextBox){let Dt=!0;if(q){const vt=this.variableOffsets[Ce];vt?(Ct=Li(vt.anchor,vt.width,vt.height,vt.textOffset,vt.textBoxScale),K&&Ct._rotate(W?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Dt=!1}if(Je.textBox||Je.verticalTextBox){let vt;Je.textBox&&(vt=et),Je.verticalTextBox&&(vt=Xe),wf(n.textCollisionBox.collisionVertexArray,ke.text.placed,!Dt||vt,Qe.text,Ct.x,Ct.y)}}if(Je.iconBox||Je.verticalIconBox){const Dt=!!(!Xe&&Je.verticalIconBox);let vt;Je.iconBox&&(vt=Dt),Je.verticalIconBox&&(vt=!Dt),wf(n.iconCollisionBox.collisionVertexArray,ke.icon.placed,vt,Qe.icon,ne?Ct.x:0,ne?Ct.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function wf(w,n,u,p,_,T){p&&p.length!==0||(p=[0,0,0,0]);const M=p[0]-Or,O=p[1]-Or,R=p[2]-Or,V=p[3]-Or;w.emplaceBack(n?1:0,u?1:0,_||0,T||0,M,O),w.emplaceBack(n?1:0,u?1:0,_||0,T||0,R,O),w.emplaceBack(n?1:0,u?1:0,_||0,T||0,R,V),w.emplaceBack(n?1:0,u?1:0,_||0,T||0,M,V)}const Ju=Math.pow(2,25),il=Math.pow(2,24),hm=Math.pow(2,17),Xc=Math.pow(2,16),Es=Math.pow(2,9),fm=Math.pow(2,8),Hl=Math.pow(2,1);function Sf(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const n=w.placed?1:0,u=Math.floor(127*w.opacity);return u*Ju+n*il+u*hm+n*Xc+u*Es+n*fm+u*Hl+n}const Yl=0;class al{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,p,_,T){const M=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(M,_,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort(((O,R)=>O.sortKey-R.sortKey)));this._currentPartIndex<M.length;)if(u.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,T())return!0;return!1}}class Wc{constructor(n,u,p,_,T,M,O,R){this.placement=new Qu(n,u,M,O,R),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(n,u,p){const _=H(),T=()=>!this._forceFullPlacement&&H()-_>2;for(;this._currentPlacementIndex>=0;){const M=u[n[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=O)&&(!M.maxzoom||M.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new al(M)),this._inProgressLayer.continuePlacement(p[M.source],this.placement,this._showCollisionBoxes,M,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const gr=512/c.a5/2;class bo{constructor(n,u,p){this.tileID=n,this.bucketInstanceId=p,this._symbolsByKey={};const _=new Map;for(let T=0;T<u.length;T++){const M=u.get(T),O=M.key,R=_.get(O);R?R.push(M):_.set(O,[M])}for(const[T,M]of _){const O={positions:M.map((R=>({x:Math.floor(R.anchorX*gr),y:Math.floor(R.anchorY*gr)}))),crossTileIDs:M.map((R=>R.crossTileID))};if(O.positions.length>128){const R=new c.aT(O.positions.length,16,Uint16Array);for(const{x:V,y:q}of O.positions)R.add(V,q);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[T]=O}}getScaledCoordinates(n,u){const{x:p,y:_,z:T}=this.tileID.canonical,{x:M,y:O,z:R}=u.canonical,V=gr/Math.pow(2,R-T),q=(O*c.a5+n.anchorY)*V,K=_*c.a5*gr;return{x:Math.floor((M*c.a5+n.anchorX)*V-p*c.a5*gr),y:Math.floor(q-K)}}findMatches(n,u,p){const _=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let T=0;T<n.length;T++){const M=n.get(T);if(M.crossTileID)continue;const O=this._symbolsByKey[M.key];if(!O)continue;const R=this.getScaledCoordinates(M,u);if(O.index){const V=O.index.range(R.x-_,R.y-_,R.x+_,R.y+_).sort();for(const q of V){const K=O.crossTileIDs[q];if(!p[K]){p[K]=!0,M.crossTileID=K;break}}}else if(O.positions)for(let V=0;V<O.positions.length;V++){const q=O.positions[V],K=O.crossTileIDs[V];if(Math.abs(q.x-R.x)<=_&&Math.abs(q.y-R.y)<=_&&!p[K]){p[K]=!0,M.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:n})=>n))}}class kd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class eh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(u!==0)for(const p in this.indexes){const _=this.indexes[p],T={};for(const M in _){const O=_[M];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+u),T[O.tileID.key]=O}this.indexes[p]=T}this.lng=n}addBucket(n,u,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let T=0;T<u.symbolInstances.length;T++)u.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const _=this.usedCrossTileIDs[n.overscaledZ];for(const T in this.indexes){const M=this.indexes[T];if(Number(T)>n.overscaledZ)for(const O in M){const R=M[O];R.tileID.isChildOf(n)&&R.findMatches(u.symbolInstances,n,_)}else{const O=M[n.scaledTo(Number(T)).key];O&&O.findMatches(u.symbolInstances,n,_)}}for(let T=0;T<u.symbolInstances.length;T++){const M=u.symbolInstances.get(T);M.crossTileID||(M.crossTileID=p.generate(),_[M.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new bo(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const p of u.getCrossTileIDsLists())for(const _ of p)delete this.usedCrossTileIDs[n][_]}removeStaleBuckets(n){let u=!1;for(const p in this.indexes){const _=this.indexes[p];for(const T in _)n[_[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[T]),delete _[T],u=!0)}return u}}class ii{constructor(){this.layerIndexes={},this.crossTileIDs=new kd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,p){let _=this.layerIndexes[n.id];_===void 0&&(_=this.layerIndexes[n.id]=new eh);let T=!1;const M={};_.handleWrapJump(p);for(const O of u){const R=O.getBucket(n);R&&n.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(O.tileID,R,this.crossTileIDs)&&(T=!0),M[R.bucketInstanceId]=!0)}return _.removeStaleBuckets(M)&&(T=!0),T}pruneUnusedLayers(n){const u={};n.forEach((p=>{u[p]=!0}));for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}var Gn="void main() {fragColor=vec4(1.0);}";const pn={prelude:rr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:rr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:rr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:rr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:rr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:rr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:rr(Gn,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:rr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:rr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:rr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:rr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:rr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:rr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:rr(Gn,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:rr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:rr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:rr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:rr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:rr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:rr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:rr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:rr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:rr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:rr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:rr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:rr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:rr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:rr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:rr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:rr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:rr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:rr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:rr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:rr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:rr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:rr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:rr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function rr(w,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/in ([\w]+) ([\w]+)/g),_=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=T?T.concat(_):_,O={};return{fragmentSource:w=w.replace(u,((R,V,q,K,W)=>(O[W]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${W}
in ${q} ${K} ${W};
#else
uniform ${q} ${K} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${q} ${K} ${W} = u_${W};
#endif
`))),vertexSource:n=n.replace(u,((R,V,q,K,W)=>{const ne=K==="float"?"vec2":"vec4",le=W.match(/color/)?"color":ne;return O[W]?V==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${q} ${ne} a_${W};
out ${q} ${K} ${W};
#else
uniform ${q} ${K} u_${W};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${q} ${K} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${le}(a_${W}, u_${W}_t);
#else
    ${q} ${K} ${W} = u_${W};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${q} ${ne} a_${W};
#else
uniform ${q} ${K} u_${W};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${q} ${K} ${W} = a_${W};
#else
    ${q} ${K} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${q} ${K} ${W} = unpack_mix_${le}(a_${W}, u_${W}_t);
#else
    ${q} ${K} ${W} = u_${W};
#endif
`})),staticAttributes:p,staticUniforms:M}}class Wr{constructor(n,u,p){this.vertexBuffer=n,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Xa=c.aU([{name:"a_pos",type:"Int16",components:2}]);const Dn="#define PROJECTION_MERCATOR",Bi="mercator";class ai{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Bi}get shaderDefine(){return Dn}get shaderPreludeCode(){return pn.projectionMercator}get vertexShaderPreludeCode(){return pn.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,u,p,_,T){if(this._cachedMesh)return this._cachedMesh;const M=new c.aW;M.emplaceBack(0,0),M.emplaceBack(c.a5,0),M.emplaceBack(0,c.a5),M.emplaceBack(c.a5,c.a5);const O=n.createVertexBuffer(M,Xa.members),R=c.aX.simpleSegment(0,0,4,2),V=new c.aY;V.emplaceBack(1,0,2),V.emplaceBack(1,2,3);const q=n.createIndexBuffer(V);return this._cachedMesh=new Wr(O,q,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class xa{constructor(n=0,u=0,p=0,_=0){if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=p,this.right=_}interpolate(n,u,p){return u.top!=null&&n.top!=null&&(this.top=c.G.number(n.top,u.top,p)),u.bottom!=null&&n.bottom!=null&&(this.bottom=c.G.number(n.bottom,u.bottom,p)),u.left!=null&&n.left!=null&&(this.left=c.G.number(n.left,u.left,p)),u.right!=null&&n.right!=null&&(this.right=c.G.number(n.right,u.right,p)),this}getCenter(n,u){const p=c.an((this.left+n-this.right)/2,0,n),_=c.an((this.top+u-this.bottom)/2,0,u);return new c.P(p,_)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new xa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ho(w,n){if(!w.renderWorldCopies||w.lngRange)return;const u=n.lng-w.center.lng;n.lng+=u>180?-360:u<-180?360:0}function mn(w){return Math.max(0,Math.floor(w))}class ol{constructor(n,u){var p;this.applyConstrain=(_,T)=>this._constrainOverride!==null?this._constrainOverride(_,T):this._callbacks.defaultConstrain(_,T),this._callbacks=n,this._tileSize=512,this._renderWorldCopies=u?.renderWorldCopies===void 0||!!u?.renderWorldCopies,this._minZoom=u?.minZoom||0,this._maxZoom=u?.maxZoom||22,this._minPitch=u?.minPitch==null?0:u?.minPitch,this._maxPitch=u?.maxPitch==null?60:u?.maxPitch,this._constrainOverride=(p=u?.constrainOverride)!==null&&p!==void 0?p:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=mn(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new xa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,u,p){this._constrainOverride=n.constrainOverride,this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=mn(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new xa(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!p&&n.autoCalculateNearFarZ,u&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get constrainOverride(){return this._constrainOverride}setConstrainOverride(n){n===void 0&&(n=null),this._constrainOverride!==n&&(this._constrainOverride=n,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const u=c.W(n,-180,180)*Math.PI/180;var p,_,T,M,O,R,V,q,K;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=P(),p=this._rotationMatrix,T=-this._bearingInRadians,M=(_=this._rotationMatrix)[0],O=_[1],R=_[2],V=_[3],q=Math.sin(T),K=Math.cos(T),p[0]=M*K+R*q,p[1]=O*K+V*q,p[2]=M*-q+R*K,p[3]=O*-q+V*K)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const u=c.an(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const u=n/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aZ(this._fovInRadians)}setFov(n){n=c.an(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=c.ap(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const u=this.applyConstrain(this._center,n).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=c.aq(u),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,u){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,p){this._unmodified=!1,this._edgeInsets.interpolate(n,u,p),this.constrainInternal(),this._calcMatrices()}resize(n,u,p=!0){this._width=n,this._height=u,p&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-c.ao,c.ao])}getCameraQueryGeometry(n,u){if(u.length===1)return[u[0],n];{const{minX:p,minY:_,maxX:T,maxY:M}=c.aa.fromPoints(u).extend(n);return[new c.P(p,_),new c.P(T,_),new c.P(T,M),new c.P(p,M),new c.P(p,_)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:u,zoom:p}=this.applyConstrain(this.center,this.zoom);this.setCenter(u),this.setZoom(p),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=c.ar(new Float64Array(16));c.Q(n,n,[this._width/2,-this._height/2,1]),c.O(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=c.ar(new Float64Array(16)),c.Q(n,n,[1,-1,1]),c.O(n,n,[-1,-1,0]),c.Q(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,u,p,_){const T=p!==void 0?p:this.bearing,M=_=_!==void 0?_:this.pitch,{distanceToCenter:O,clampedElevation:R}=this._distanceToCenterFromAltElevationPitch(u,this.elevation,M),{x:V,y:q}=Ut(M,T),K=c.a9.fromLngLat(n,u);let W,ne,le=c.a_(1,K.y),pe=0;do{if(pe+=1,pe>10)break;ne=O/le,W=new c.a9(K.x+V*ne,K.y+q*ne),le=1/W.meterInMercatorCoordinateUnits()}while(Math.abs(O-ne*le)>1e-12);return{center:W.toLngLat(),elevation:R,zoom:c.at(this.height/2/Math.tan(this.fovInRadians/2)/ne/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const u=1/this.worldSize,p=c.as(1,this.center.lat)*this.worldSize,_=c.a9.fromLngLat(this.center,this.elevation),T=_.x/u,M=_.y/u,O=_.z/u,R=this.pitch,V=this.bearing,{x:q,y:K,z:W}=Ut(R,V),ne=this.cameraToCenterDistance,le=T+ne*-q,pe=M+ne*-K,ye=O+ne*W,{distanceToCenter:ge,clampedElevation:xe}=this._distanceToCenterFromAltElevationPitch(ye/p,n,R),De=ge*p,be=new c.a9((le+q*De)*u,(pe+K*De)*u,0).toLngLat(),Ce=c.as(1,be.lat),ke=c.at(this.height/2/Math.tan(this.fovInRadians/2)/ge/Ce/this.tileSize);this._elevation=xe,this._center=be,this.setZoom(ke)}_distanceToCenterFromAltElevationPitch(n,u,p){const _=-Math.cos(c.ap(p)),T=n-u;let M,O=u;return _*T>=0||Math.abs(_)<.1?(M=1e4,O=n+M*_):M=-T/_,{distanceToCenter:M,clampedElevation:O}}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return Ie(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const u=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/u,n.canonical.y/u,1/u/c.a5,1/u/c.a5]}}class wa{constructor(n,u){this.min=n,this.max=u,this.center=c.a$([],c.b0([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],p=c.b1(this.min),_=c.b1(this.max);for(let T=0;T<u.length;T++)p[T]=u[T]?this.min[T]:this.center[T],_[T]=u[T]?this.center[T]:this.max[T];return _[2]=this.max[2],new wa(p,_)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let u=!0;for(let p=0;p<n.planes.length;p++){const _=this.intersectsPlane(n.planes[p]);if(_===0)return 0;_===1&&(u=!1)}return u?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let u=n[3],p=n[3];for(let _=0;_<3;_++)n[_]>0?(u+=n[_]*this.min[_],p+=n[_]*this.max[_]):(p+=n[_]*this.min[_],u+=n[_]*this.max[_]);return u>=0?2:p<0?0:1}}class Xl{distanceToTile2d(n,u,p,_){const T=_.distanceX([n,u]),M=_.distanceY([n,u]);return Math.hypot(T,M)}getWrap(n,u,p){return p}getTileBoundingVolume(n,u,p,_){var T,M;let O=0,R=0;if(_?.terrain){const q=new c.a2(n.z,u,n.z,n.x,n.y),K=_.terrain.getMinMaxElevation(q);O=(T=K.minElevation)!==null&&T!==void 0?T:Math.min(0,p),R=(M=K.maxElevation)!==null&&M!==void 0?M:Math.max(0,p)}const V=1<<n.z;return new wa([u+n.x/V,n.y/V,O],[u+(n.x+1)/V,(n.y+1)/V,R])}allowVariableZoom(n,u){const p=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,_=c.an(78.5-p/2,0,60);return!!u.terrain||n.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class ji{constructor(n,u,p){this.points=n,this.planes=u,this.aabb=p}static fromInvProjectionMatrix(n,u=1,p=0,_,T){const M=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,p),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((W=>(function(ne,le,pe,ye){const ge=c.aH([],ne,le),xe=1/ge[3]/pe*ye;return c.b6(ge,ge,[xe,xe,1/ge[3],xe])})(W,n,u,O)));_&&(function(W,ne,le,pe){const ye=pe?4:0,ge=pe?0:4;let xe=0;const De=[],be=[];for(let Se=0;Se<4;Se++){const je=c.b2([],W[Se+ge],W[Se+ye]),et=c.b7(je);c.a$(je,je,1/et),De.push(et),be.push(je)}for(let Se=0;Se<4;Se++){const je=c.b8(W[Se+ye],be[Se],le);xe=je!==null&&je>=0?Math.max(xe,je):Math.max(xe,De[Se])}const Ce=(function(Se,je){const et=c.b2([],Se[je[0]],Se[je[1]]),Xe=c.b2([],Se[je[2]],Se[je[1]]),Qe=[0,0,0,0];return c.b3(Qe,c.b4([],et,Xe)),Qe[3]=-c.b5(Qe,Se[je[0]]),Qe})(W,ne),ke=(function(Se,je){const et=c.b9(Se),Xe=c.ba([],Se,1/et),Qe=c.b2([],je,c.a$([],Xe,c.b5(je,Xe))),Je=c.b9(Qe);if(Je>0){const Ct=Math.sqrt(1-Xe[3]*Xe[3]),Dt=c.a$([],Xe,-Xe[3]),vt=c.b0([],Dt,c.a$([],Qe,Ct/Je));return c.bb(je,vt)}return null})(le,Ce);if(ke!==null){const Se=ke/c.b5(be[0],Ce);xe=Math.min(xe,Se)}for(let Se=0;Se<4;Se++){const je=Math.min(xe,De[Se]);W[Se+ge]=[W[Se+ye][0]+be[Se][0]*je,W[Se+ye][1]+be[Se][1]*je,W[Se+ye][2]+be[Se][2]*je,1]}})(R,M[0],_,T);const V=M.map((W=>{const ne=c.b2([],R[W[0]],R[W[1]]),le=c.b2([],R[W[2]],R[W[1]]),pe=c.b3([],c.b4([],ne,le)),ye=-c.b5(pe,R[W[1]]);return pe.concat(ye)})),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],K=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const W of R)for(let ne=0;ne<3;ne++)q[ne]=Math.min(q[ne],W[ne]),K[ne]=Math.max(K[ne],W[ne]);return new ji(R,V,new wa(q,K))}}class Kn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,p){return this._helper.interpolatePadding(n,u,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,p=!0){this._helper.resize(n,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,u){}constructor(n){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(u,p)=>{p=c.an(+p,this.minZoom,this.maxZoom);const _={center:new c.V(u.lng,u.lat),zoom:p};let T=this._helper._lngRange;if(!this._helper._renderWorldCopies&&T===null){const be=179.9999999999;T=[-be,be]}const M=this.tileSize*c.aq(_.zoom);let O=0,R=M,V=0,q=M,K=0,W=0;const{x:ne,y:le}=this.size;if(this._helper._latRange){const be=this._helper._latRange;O=c.X(be[1])*M,R=c.X(be[0])*M,R-O<le&&(K=le/(R-O))}T&&(V=c.W(c.Y(T[0])*M,0,M),q=c.W(c.Y(T[1])*M,0,M),q<V&&(q+=M),q-V<ne&&(W=ne/(q-V)));const{x:pe,y:ye}=Ue(M,u);let ge,xe;const De=Math.max(W||0,K||0);if(De){const be=new c.P(W?(q+V)/2:pe,K?(R+O)/2:ye);return _.center=He(M,be).wrap(),_.zoom+=c.at(De),_}if(this._helper._latRange){const be=le/2;ye-be<O&&(xe=O+be),ye+be>R&&(xe=R-be)}if(T){const be=(V+q)/2;let Ce=pe;this._helper._renderWorldCopies&&(Ce=c.W(pe,be-M/2,be+M/2));const ke=ne/2;Ce-ke<V&&(ge=V+ke),Ce+ke>q&&(ge=q-ke)}if(ge!==void 0||xe!==void 0){const be=new c.P(ge??pe,xe??ye);_.center=He(M,be).wrap()}return _},this.applyConstrain=(u,p)=>this._helper.applyConstrain(u,p),this._helper=new ol({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,p)=>this.defaultConstrain(u,p)},n),this._coveringTilesDetailsProvider=new Xl}clone(){const n=new Kn;return n.apply(this,!1),n}apply(n,u,p){this._helper.apply(n,u,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const u=[new c.bc(0,n)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new c.P(0,0)),_=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),M=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),O=Math.floor(Math.min(p.x,_.x,T.x,M.x)),R=Math.floor(Math.max(p.x,_.x,T.x,M.x)),V=1;for(let q=O-V;q<=R+V;q++)q!==0&&u.push(new c.bc(q,n))}return u}getCameraFrustum(){return ji.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const u=this.screenPointToLocation(this.centerPoint,n),p=n?n.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(n,u){const p=c.as(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(u,p),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),M=c.a9.fromLngLat(n),O=new c.a9(M.x-(_.x-T.x),M.y-(_.y-T.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,u){return u?this.coordinatePoint(c.a9.fromLngLat(n),u.getElevationForLngLat(n,this),this._pixelMatrix3D):this.coordinatePoint(c.a9.fromLngLat(n))}screenPointToLocation(n,u){var p;return(p=this.screenPointToMercatorCoordinate(n,u))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(n,u){if(u){const p=u.pointCoordinate(n);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,u){const p=u||0,_=[n.x,n.y,0,1],T=[n.x,n.y,1,1];c.aH(_,_,this._pixelMatrixInverse),c.aH(T,T,this._pixelMatrixInverse);const M=_[3],O=T[3],R=_[1]/M,V=T[1]/O,q=_[2]/M,K=T[2]/O,W=q===K?0:(p-q)/(K-q);return new c.a9(c.G.number(_[0]/M,T[0]/O,W)/this.worldSize,c.G.number(R,V,W)/this.worldSize,p)}coordinatePoint(n,u=0,p=this._pixelMatrix){const _=[n.x*this.worldSize,n.y*this.worldSize,u,1];return c.aH(_,_,p),new c.P(_[0]/_[3],_[1]/_[3])}getBounds(){const n=Math.max(0,this._helper._height/2-_t(this));return new Lr().extend(this.screenPointToLocation(new c.P(0,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(n,u){return u?u.pointCoordinate(n)!=null:n.y>this.height/2-_t(this)}calculatePosMatrix(n,u=!1,p){var _;const T=(_=n.key)!==null&&_!==void 0?_:c.bd(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),M=u?this._alignedPosMatrixCache:this._posMatrixCache;if(M.has(T)){const V=M.get(T);return p?V.f32:V.f64}const O=ot(n,this.worldSize);c.S(O,u?this._alignedProjMatrix:this._viewProjMatrix,O);const R={f64:O,f32:new Float32Array(O)};return M.set(T,R),p?R.f32:R.f64}calculateFogMatrix(n){const u=n.key,p=this._fogMatrixCacheF32;if(p.has(u))return p.get(u);const _=ot(n,this.worldSize);return c.S(_,this._fogMatrix,_),p.set(u,new Float32Array(_)),p.get(u)}calculateCenterFromCameraLngLatAlt(n,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,p,_)}_calculateNearFarZIfNeeded(n,u,p){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=n-_*this._helper._pixelPerMeter/Math.cos(u),M=_<0?T:n,O=Math.PI/2+this.pitchInRadians,R=c.ap(this.fov)*(Math.abs(Math.cos(c.ap(this.roll)))*this.height+Math.abs(Math.sin(c.ap(this.roll)))*this.width)/this.height*(.5+p.y/this.height),V=Math.sin(R)*M/Math.sin(c.an(Math.PI-O-R,.01,Math.PI-.01)),q=_t(this),K=Math.atan(q/this._helper.cameraToCenterDistance),W=c.ap(.75),ne=K>W?2*K*(.5+p.y/(2*q)):W,le=Math.sin(ne)*M/Math.sin(c.an(Math.PI-O-ne,.01,Math.PI-.01)),pe=Math.min(V,le);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*pe+M),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,u=Ue(this.worldSize,this.center),p=u.x,_=u.y;this._helper._pixelPerMeter=c.as(1,this.center.lat)*this.worldSize;const T=c.ap(Math.min(this.pitch,Ze)),M=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let O;this._calculateNearFarZIfNeeded(M,T,n),O=new Float64Array(16),c.be(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aB(this._invProjMatrix,O),O[8]=2*-n.x/this._helper._width,O[9]=2*n.y/this._helper._height,this._projectionMatrix=c.bf(O),c.Q(O,O,[1,-1,1]),c.O(O,O,[0,0,-this._helper.cameraToCenterDistance]),c.bg(O,O,-this.rollInRadians),c.bh(O,O,this.pitchInRadians),c.bg(O,O,-this.bearingInRadians),c.O(O,O,[-p,-_,0]),this._mercatorMatrix=c.Q([],O,[this.worldSize,this.worldSize,this.worldSize]),c.Q(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),c.O(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=c.aB([],O);const R=[0,0,-1,1];c.aH(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),c.be(this._fogMatrix,this.fovInRadians,this.width/this.height,M,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,c.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.O(this._fogMatrix,this._fogMatrix,[-p,-_,0]),c.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const V=this._helper._width%2/2,q=this._helper._height%2/2,K=Math.cos(this.bearingInRadians),W=Math.sin(-this.bearingInRadians),ne=p-Math.round(p)+K*V+W*q,le=_-Math.round(_)+K*q+W*V,pe=new Float64Array(O);if(c.O(pe,pe,[ne>.5?ne-1:ne,le>.5?le-1:le,0]),this._alignedProjMatrix=pe,O=c.aB(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new c.P(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.aH(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return Ie(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,u){const p=c.a9.fromLngLat(n),_=[p.x*this.worldSize,p.y*this.worldSize,u,1];return c.aH(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(n){const{overscaledTileID:u,aligned:p,applyTerrainMatrix:_}=n,T=this._helper.getMercatorTileCoordinates(u),M=u?this.calculatePosMatrix(u,p,!0):null;let O;return O=u&&u.terrainRttPosMatrix32f&&_?u.terrainRttPosMatrix32f:M||c.bi(),{mainMatrix:O,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,u,p){return 1}transformLightDirection(n){return c.b1(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,u,p,_){const T=this.calculatePosMatrix(p);let M;_?(M=[n,u,_(n,u),1],c.aH(M,M,T)):(M=[n,u,0,1],Ya(M,M,T));const O=M[3];return{point:new c.P(M[0]/O,M[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(n){for(const u of n)this.calculatePosMatrix(u)}getMatrixForModel(n,u){const p=c.a9.fromLngLat(n,u),_=p.meterInMercatorCoordinateUnits(),T=c.bj();return c.O(T,T,[p.x,p.y,p.z]),c.bg(T,T,Math.PI),c.bh(T,T,Math.PI/2),c.Q(T,T,[-_,_,_]),T}getProjectionDataForCustomLayer(n=!0){const u=new c.a2(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:n}),_=ot(u,this.worldSize);c.S(_,this._viewProjMatrix,_),p.tileMercatorCoords=[0,0,1,1];const T=[c.a5,c.a5,this.worldSize/this._helper.pixelsPerMeter],M=c.bk();return c.Q(M,_,T),p.fallbackMatrix=M,p.mainMatrix=M,p}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function Ni(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function th(w){if(w.useSlerp)if(w.k<1){const n=c.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),u=c.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),p=new Float64Array(4);c.bm(p,n,u,w.k);const _=c.bn(p);w.tr.setRoll(_.roll),w.tr.setPitch(_.pitch),w.tr.setBearing(_.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(c.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(c.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(c.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Wl(w,n,u,p,_){const T=_.padding,M=Ue(_.worldSize,u.getNorthWest()),O=Ue(_.worldSize,u.getNorthEast()),R=Ue(_.worldSize,u.getSouthEast()),V=Ue(_.worldSize,u.getSouthWest()),q=c.ap(-p),K=M.rotate(q),W=O.rotate(q),ne=R.rotate(q),le=V.rotate(q),pe=new c.P(Math.max(K.x,W.x,le.x,ne.x),Math.max(K.y,W.y,le.y,ne.y)),ye=new c.P(Math.min(K.x,W.x,le.x,ne.x),Math.min(K.y,W.y,le.y,ne.y)),ge=pe.sub(ye),xe=(_.width-(T.left+T.right+n.left+n.right))/ge.x,De=(_.height-(T.top+T.bottom+n.top+n.bottom))/ge.y;if(De<0||xe<0)return void Ni();const be=Math.min(c.at(_.scale*Math.min(xe,De)),w.maxZoom),Ce=c.P.convert(w.offset),ke=new c.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(c.ap(p)),Se=Ce.add(ke).mult(_.scale/c.aq(be));return{center:He(_.worldSize,M.add(R).div(2).sub(Se)),zoom:be,bearing:p}}class Kl{get useGlobeControls(){return!1}handlePanInertia(n,u){const p=n.mag(),_=Math.abs(_t(u));return{easingOffset:n.mult(Math.min(.75*_/p,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(n,u){n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta),n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta)}handleMapControlsPan(n,u,p){n.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(p,n.around)}cameraForBoxAndBearing(n,u,p,_,T){return Wl(n,u,p,_,T)}handleJumpToCenterZoom(n,u){n.zoom!==(u.zoom!==void 0?+u.zoom:n.zoom)&&n.setZoom(+u.zoom),u.center!==void 0&&n.setCenter(c.V.convert(u.center))}handleEaseTo(n,u){const p=n.zoom,_=n.padding,T={roll:n.roll,pitch:n.pitch,bearing:n.bearing},M={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},O=u.zoom!==void 0,R=!n.isPaddingEqual(u.padding);let V=!1;const q=O?+u.zoom:n.zoom;let K=n.centerPoint.add(u.offsetAsPoint);const W=n.screenPointToLocation(K),{center:ne,zoom:le}=n.applyConstrain(c.V.convert(u.center||W),q??p);Ho(n,ne);const pe=Ue(n.worldSize,W),ye=Ue(n.worldSize,ne).sub(pe),ge=c.aq(le-p);return V=le!==p,{easeFunc:xe=>{if(V&&n.setZoom(c.G.number(p,le,xe)),c.bo(T,M)||th({startEulerAngles:T,endEulerAngles:M,tr:n,k:xe,useSlerp:T.roll!=M.roll}),R&&(n.interpolatePadding(_,u.padding,xe),K=n.centerPoint.add(u.offsetAsPoint)),u.around)n.setLocationAtPoint(u.around,u.aroundPoint);else{const De=c.aq(n.zoom-p),be=le>p?Math.min(2,ge):Math.max(.5,ge),Ce=Math.pow(be,1-xe),ke=He(n.worldSize,pe.add(ye.mult(xe*Ce)).mult(De));n.setLocationAtPoint(n.renderWorldCopies?ke.wrap():ke,K)}},isZooming:V,elevationCenter:ne}}handleFlyTo(n,u){const p=u.zoom!==void 0,_=n.zoom,T=n.applyConstrain(c.V.convert(u.center||u.locationAtOffset),p?+u.zoom:_),M=T.center,O=T.zoom;Ho(n,M);const R=Ue(n.worldSize,u.locationAtOffset),V=Ue(n.worldSize,M).sub(R),q=V.mag(),K=c.aq(O-_);let W;if(u.minZoom!==void 0){const ne=Math.min(+u.minZoom,_,O),le=n.applyConstrain(M,ne).zoom;W=c.aq(le-_)}return{easeFunc:(ne,le,pe,ye)=>{n.setZoom(ne===1?O:_+c.at(le));const ge=ne===1?M:He(n.worldSize,R.add(V.mult(pe)).mult(le));n.setLocationAtPoint(n.renderWorldCopies?ge.wrap():ge,ye)},scaleOfZoom:K,targetCenter:M,scaleOfMinZoom:W,pixelPathLength:q}}}class $r{constructor(n,u,p){this.blendFunction=n,this.blendColor=u,this.mask=p}}$r.Replace=[1,0],$r.disabled=new $r($r.Replace,c.bp.transparent,[!1,!1,!1,!1]),$r.unblended=new $r($r.Replace,c.bp.transparent,[!0,!0,!0,!0]),$r.alphaBlended=new $r([1,771],c.bp.transparent,[!0,!0,!0,!0]);const sl=2305;class xr{constructor(n,u,p){this.enable=n,this.mode=u,this.frontFace=p}}xr.disabled=new xr(!1,1029,sl),xr.backCCW=new xr(!0,1029,sl),xr.frontCCW=new xr(!0,1028,sl);class fr{constructor(n,u,p){this.func=n,this.mask=u,this.range=p}}fr.ReadOnly=!1,fr.ReadWrite=!0,fr.disabled=new fr(519,fr.ReadOnly,[0,1]);const Ql=7680;class Mr{constructor(n,u,p,_,T,M){this.test=n,this.ref=u,this.mask=p,this.fail=_,this.depthFail=T,this.pass=M}}Mr.disabled=new Mr({func:519,mask:0},0,0,Ql,Ql,Ql);const rh=new WeakMap;function Wa(w){var n;if(rh.has(w))return rh.get(w);{const u=(n=w.getParameter(w.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return rh.set(w,u),u}}class ll{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const u=n.context,p=u.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const _=new c.aW;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const T=new c.aY;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Wr(u.createVertexBuffer(_,Xa.members),u.createIndexBuffer(T),c.aX.simpleSegment(0,0,_.length,T.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(p.TEXTURE1);const M=p.createTexture();p.bindTexture(p.TEXTURE_2D,M),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(M),Wa(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,u){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,u=n.gl;n.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,u){const p=this._cachedRenderContext.context,_=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:c.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,_.TRIANGLES,fr.disabled,Mr.disabled,$r.unblended,xr.disabled,((T,M)=>({u_input:T,u_output_expected:M}))(n,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Wa(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const T=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Wa(n)){const u=n.clientWaitSync(this._readbackQueue.sync,0,0);if(u===n.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ll._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let u=0;return u+=n[0]/256,u+=n[1]/65536,u+=n[2]/16777216,n[3]<127&&(u=-u),u/128}}const cl=c.a5/128;function dm(w,n){const u=w.granularity!==void 0?Math.max(w.granularity,1):1,p=u+(w.generateBorders?2:0),_=u+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),T=p+1,M=_+1,O=w.generateBorders?-1:0,R=w.generateBorders||w.extendToNorthPole?-1:0,V=u+(w.generateBorders?1:0),q=u+(w.generateBorders||w.extendToSouthPole?1:0),K=T*M,W=p*_*6,ne=T*M>65536;if(ne&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const le=ne||n==="32bit",pe=new Int16Array(2*K);let ye=0;for(let De=R;De<=q;De++)for(let be=O;be<=V;be++){let Ce=be/u*c.a5;be===-1&&(Ce=-cl),be===u+1&&(Ce=c.a5+cl);let ke=De/u*c.a5;De===-1&&(ke=w.extendToNorthPole?c.br:-cl),De===u+1&&(ke=w.extendToSouthPole?c.bs:c.a5+cl),pe[ye++]=Ce,pe[ye++]=ke}const ge=le?new Uint32Array(W):new Uint16Array(W);let xe=0;for(let De=0;De<_;De++)for(let be=0;be<p;be++){const Ce=be+1+De*T,ke=be+(De+1)*T,Se=be+1+(De+1)*T;ge[xe++]=be+De*T,ge[xe++]=ke,ge[xe++]=Ce,ge[xe++]=Ce,ge[xe++]=ke,ge[xe++]=Se}return{vertices:pe.buffer.slice(0),indices:ge.buffer.slice(0),uses32bitIndices:le}}const nh=new c.aV({fill:new c.bt(128,2),line:new c.bt(512,0),tile:new c.bt(128,32),stencil:new c.bt(128,1),circle:3});class Rd{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return pn.projectionGlobe}get vertexShaderPreludeCode(){return pn.projectionMercator.vertexSource}get subdivisionGranularity(){return nh}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new ll(n));const u=c.X(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(u,p),T=H();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=T);const M=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bv(M))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,u,p,_,T){const M=(T==="stencil"?nh.stencil:nh.tile).getGranularityForZoomLevel(u.z);return this._getMesh(n,{granularity:M,generateBorders:p,extendToNorthPole:u.y===0&&_,extendToSouthPole:u.y===(1<<u.z)-1&&_})}_getMesh(n,u){const p=this._getMeshKey(u);if(p in this._tileMeshCache)return this._tileMeshCache[p];const _=(function(T,M){const O=dm(M,"16bit"),R=c.aW.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),V=c.aY.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new Wr(T.createVertexBuffer(R,Xa.members),T.createIndexBuffer(V),c.aX.simpleSegment(0,0,R.length,V.length))})(n,u);return this._tileMeshCache[p]=_,_}recalculate(n){}hasTransition(){const n=H();let u=!1;return u=u||(n-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const _y=new c.t({type:new c.D(c.u.projection.type)});class Ld extends c.E{constructor(n){super(),this._transitionable=new c.x(_y,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0)),this._mercatorProjection=new ai,this._verticalPerspectiveProjection=new Rd}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof c.bw){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,u,p,_,T){return this.currentProjection.getMeshFromTileID(n,u,p,_,T)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function Fi(w){const n=Jl(w.worldSize,w.center.lat);return 2*Math.PI*n}function Yo(w,n,u,p,_){const T=1/(1<<_),M=n/c.a5*T+p*T,O=c.bz((w/c.a5*T+u*T)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI,V=Math.cos(R),q=new Float64Array(3);return q[0]=Math.sin(O)*V,q[1]=Math.sin(R),q[2]=Math.cos(O)*V,q}function gn(w){return(function(n,u){const p=Math.cos(u),_=new Float64Array(3);return _[0]=Math.sin(n)*p,_[1]=Math.sin(u),_[2]=Math.cos(n)*p,_})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Jl(w,n){return w/(2*Math.PI)/Math.cos(n*Math.PI/180)}function ih(w){const n=Math.asin(w[1])/Math.PI*180,u=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(u>1e-6){const p=w[0]/u,_=Math.acos(w[2]/u),T=(p>0?_:-_)/Math.PI*180;return new c.V(c.W(T,-180,180),n)}return new c.V(0,n)}function ah(w){return Math.cos(w*Math.PI/180)}function In(w,n){const u=ah(w),p=ah(n);return c.at(p/u)}function pm(w,n){const u=w.rotate(n.bearingInRadians),p=n.zoom+In(n.center.lat,0),_=c.bu(1/ah(n.center.lat),1/ah(Math.min(Math.abs(n.center.lat),60)),c.bx(p,7,3,0,1)),T=360/Fi({worldSize:n.worldSize,center:{lat:n.center.lat}});return new c.V(n.center.lng-u.x*T*_,c.an(n.center.lat+u.y*T,-c.ao,c.ao))}function Tf(w){const n=.5*w,u=Math.sin(n),p=Math.cos(n);return Math.log(u+p)-Math.log(p-u)}function mm(w,n,u,p){const _=w.lat+u*p;if(Math.abs(u)>1){const T=(Math.sign(w.lat+u)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,M=Math.abs(w.lat+u)*Math.PI/180,O=Tf(T+p*(M-T)),R=Tf(T),V=Tf(M);return new c.V(w.lng+n*((O-R)/(V-R)),_)}return new c.V(w.lng+n*p,_)}class by{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,u,p,_){const T=`${n.z}_${n.x}_${n.y}_${_?.terrain?"t":""}`,M=this._cache.get(T);if(M)return M;const O=this._cachePrevious.get(T);if(O)return this._cache.set(T,O),O;const R=this._boundingVolumeFactory(n,u,p,_);return this._cache.set(T,R),this._hadAnyChanges=!0,R}}class Kc{constructor(n,u,p,_){this.min=p,this.max=_,this.points=n,this.planes=u}static fromAabb(n,u){const p=[];for(let _=0;_<8;_++)p.push([1&~_?n[0]:u[0],(_>>1&1)==1?u[1]:n[1],(_>>2&1)==1?u[2]:n[2]]);return new Kc(p,[[-1,0,0,u[0]],[1,0,0,-n[0]],[0,-1,0,u[1]],[0,1,0,-n[1]],[0,0,-1,u[2]],[0,0,1,-n[2]]],n,u)}static fromCenterSizeAngles(n,u,p){const _=c.bB([],p[0],p[1],p[2]),T=c.bC([],[u[0],0,0],_),M=c.bC([],[0,u[1],0],_),O=c.bC([],[0,0,u[2]],_),R=[...n],V=[...n];for(let K=0;K<8;K++)for(let W=0;W<3;W++){const ne=n[W]+T[W]*(1&~K?-1:1)+M[W]*((K>>1&1)==1?1:-1)+O[W]*((K>>2&1)==1?1:-1);R[W]=Math.min(R[W],ne),V[W]=Math.max(V[W],ne)}const q=[];for(let K=0;K<8;K++){const W=[...n];c.b0(W,W,c.a$([],T,1&~K?-1:1)),c.b0(W,W,c.a$([],M,(K>>1&1)==1?1:-1)),c.b0(W,W,c.a$([],O,(K>>2&1)==1?1:-1)),q.push(W)}return new Kc(q,[[...T,-c.b5(T,q[0])],[...M,-c.b5(M,q[0])],[...O,-c.b5(O,q[0])],[-T[0],-T[1],-T[2],-c.b5(T,q[7])],[-M[0],-M[1],-M[2],-c.b5(M,q[7])],[-O[0],-O[1],-O[2],-c.b5(O,q[7])]],R,V)}intersectsFrustum(n){let u=!0;const p=this.points.length,_=this.planes.length,T=n.planes.length,M=n.points.length;for(let O=0;O<T;O++){const R=n.planes[O];let V=0;for(let q=0;q<p;q++){const K=this.points[q];R[0]*K[0]+R[1]*K[1]+R[2]*K[2]+R[3]>=0&&V++}if(V===0)return 0;V<p&&(u=!1)}if(u)return 2;for(let O=0;O<_;O++){const R=this.planes[O];let V=0;for(let q=0;q<M;q++){const K=n.points[q];R[0]*K[0]+R[1]*K[1]+R[2]*K[2]+R[3]>=0&&V++}if(V===0)return 0}return 1}intersectsPlane(n){const u=this.points.length;let p=0;for(let _=0;_<u;_++){const T=this.points[_];n[0]*T[0]+n[1]*T[1]+n[2]*T[2]+n[3]>=0&&p++}return p===u?2:p===0?0:1}}function Ef(w,n,u){const p=w-n;return p<0?-p:Math.max(0,p-u)}function Qc(w,n,u,p,_){const T=w-u;let M;return M=T<0?Math.min(-T,1+T-_):T>1?Math.min(Math.max(T-_,0),1-T):0,Math.max(M,Ef(n,p,_))}class Bd{constructor(){this._boundingVolumeCache=new by(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,u,p,_){const T=1<<p.z,M=1/T,O=p.x/T,R=p.y/T;let V=2;return V=Math.min(V,Qc(n,u,O,R,M)),V=Math.min(V,Qc(n,u,O+.5,-R-M,M)),V=Math.min(V,Qc(n,u,O+.5,2-R-M,M)),V}getWrap(n,u,p){const _=1<<u.z,T=1/_,M=u.x/_,O=Ef(n.x,M,T),R=Ef(n.x,M-1,T),V=Ef(n.x,M+1,T),q=Math.min(O,R,V);return q===V?1:q===R?-1:0}allowVariableZoom(n,u){return ar(n,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,u,p,_){return this._boundingVolumeCache.getTileBoundingVolume(n,u,p,_)}_computeTileBoundingVolume(n,u,p,_){var T,M;let O=0,R=0;if(_?.terrain){const V=new c.a2(n.z,u,n.z,n.x,n.y),q=_.terrain.getMinMaxElevation(V);O=(T=q.minElevation)!==null&&T!==void 0?T:Math.min(0,p),R=(M=q.maxElevation)!==null&&M!==void 0?M:Math.max(0,p)}if(O/=c.bE,R/=c.bE,O+=1,R+=1,n.z<=0)return Kc.fromAabb([-R,-R,-R],[R,R,R]);if(n.z===1)return Kc.fromAabb([n.x===0?-R:0,n.y===0?0:-R,-R],[n.x===0?0:R,n.y===0?R:0,R]);{const V=[Yo(0,0,n.x,n.y,n.z),Yo(c.a5,0,n.x,n.y,n.z),Yo(c.a5,c.a5,n.x,n.y,n.z),Yo(0,c.a5,n.x,n.y,n.z)],q=[];for(const Qe of V)q.push(c.a$([],Qe,R));if(R!==O)for(const Qe of V)q.push(c.a$([],Qe,O));n.y===0&&q.push([0,1,0]),n.y===(1<<n.z)-1&&q.push([0,-1,0]);const K=[1,1,1],W=[-1,-1,-1];for(const Qe of q)for(let Je=0;Je<3;Je++)K[Je]=Math.min(K[Je],Qe[Je]),W[Je]=Math.max(W[Je],Qe[Je]);const ne=Yo(c.a5/2,c.a5/2,n.x,n.y,n.z),le=c.b4([],[0,1,0],ne);c.b3(le,le);const pe=c.b4([],ne,le);c.b3(pe,pe);const ye=c.b4([],V[2],V[1]);c.b3(ye,ye);const ge=c.b4([],V[0],V[3]);c.b3(ge,ge),q.push(c.a$([],ne,R)),n.y>=(1<<n.z)/2&&q.push(c.a$([],Yo(c.a5/2,0,n.x,n.y,n.z),R)),n.y<(1<<n.z)/2&&q.push(c.a$([],Yo(c.a5/2,c.a5,n.x,n.y,n.z),R));const xe=oh(ne,q),De=oh(pe,q),be=[-ne[0],-ne[1],-ne[2],xe.max],Ce=[ne[0],ne[1],ne[2],-xe.min],ke=[-pe[0],-pe[1],-pe[2],De.max],Se=[pe[0],pe[1],pe[2],-De.min],je=[...ye,0],et=[...ge,0],Xe=[];return n.y===0?Xe.push(c.bD(et,je,be),c.bD(et,je,Ce)):Xe.push(c.bD(ke,je,be),c.bD(ke,je,Ce),c.bD(ke,et,be),c.bD(ke,et,Ce)),n.y===(1<<n.z)-1?Xe.push(c.bD(et,je,be),c.bD(et,je,Ce)):Xe.push(c.bD(Se,je,be),c.bD(Se,je,Ce),c.bD(Se,et,be),c.bD(Se,et,Ce)),new Kc(Xe,[be,Ce,ke,Se,je,et],K,W)}}}function oh(w,n){let u=1/0,p=-1/0;for(const _ of n){const T=c.b5(w,_);u=Math.min(u,T),p=Math.max(p,T)}return{min:u,max:p}}class Jc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,p){return this._helper.interpolatePadding(n,u,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u){this._helper.resize(n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(n){this._cachedClippingPlane=c.bF(),this._projectionMatrix=c.bj(),this._globeViewProjMatrix32f=c.bi(),this._globeViewProjMatrixNoCorrection=c.bj(),this._globeViewProjMatrixNoCorrectionInverted=c.bj(),this._globeProjMatrixInverted=c.bj(),this._cameraPosition=c.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(u,p)=>{const _=c.an(u.lat,-c.ao,c.ao),T=c.an(+p,this.minZoom+In(0,_),this.maxZoom);return{center:new c.V(u.lng,_),zoom:T}},this.applyConstrain=(u,p)=>this._helper.applyConstrain(u,p),this._helper=new ol({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,p)=>this.defaultConstrain(u,p)},n),this._coveringTilesDetailsProvider=new Bd}clone(){const n=new Jc;return n.apply(this,!1),n}apply(n,u,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(n,u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=c.bA();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:u,applyGlobeMatrix:p}=n,_=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const u=this.pitchInRadians,p=this.cameraToCenterDistance/n,_=Math.sin(u)*p,T=Math.cos(u)*p+1,M=1/Math.sqrt(_*_+T*T)*1;let O=-_,R=T;const V=Math.sqrt(O*O+R*R);O/=V,R/=V;const q=[0,O,R];c.bG(q,q,[0,0,0],-this.bearingInRadians),c.bH(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),c.bI(q,q,[0,0,0],this.center.lng*Math.PI/180);const K=1/c.b7(q);return c.a$(q,q,K),[...q,-M*K]}isLocationOccluded(n){return!this.isSurfacePointVisible(gn(n))}transformLightDirection(n){const u=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,_=Math.cos(p),T=[Math.sin(u)*_,Math.sin(p),Math.cos(u)*_],M=[T[2],0,-T[0]],O=[0,0,0];c.b4(O,M,T),c.b3(M,M),c.b3(O,O);const R=[0,0,0];return c.b3(R,[M[0]*n[0]+O[0]*n[1]+T[0]*n[2],M[1]*n[0]+O[1]*n[1]+T[1]*n[2],M[2]*n[0]+O[2]*n[1]+T[2]*n[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,u,p){const _=(function(O,R,V){const q=1/(1<<V.z);return new c.a9(O/c.a5*q+V.x*q,R/c.a5*q+V.y*q)})(n,u,p.canonical),T=(M=_.y,[c.bz(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-M*Math.PI*2))-.5*Math.PI]);var M;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(n,u,p,_){const T=p.canonical,M=Yo(n,u,T.x,T.y,T.z),O=1+(_?_(n,u):0)/c.bE,R=[M[0]*O,M[1]*O,M[2]*O,1];c.aH(R,R,this._globeViewProjMatrixNoCorrection);const V=this._cachedClippingPlane,q=V[0]*M[0]+V[1]*M[1]+V[2]*M[2]+V[3]<0;return{point:new c.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=Jl(this.worldSize,this.center.lat),u=c.bk(),p=c.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),c.be(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;u[8]=2*-_.x/this._helper._width,u[9]=2*_.y/this._helper._height,this._projectionMatrix=c.bf(u),this._globeProjMatrixInverted=c.bk(),c.aB(this._globeProjMatrixInverted,u),c.O(u,u,[0,0,-this.cameraToCenterDistance]),c.bg(u,u,this.rollInRadians),c.bh(u,u,-this.pitchInRadians),c.bg(u,u,this.bearingInRadians),c.O(u,u,[0,0,-n]);const T=c.bA();T[0]=n,T[1]=n,T[2]=n,c.bh(p,u,this.center.lat*Math.PI/180),c.bJ(p,p,-this.center.lng*Math.PI/180),c.Q(p,p,T),this._globeViewProjMatrixNoCorrection=p,c.bh(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bJ(u,u,-this.center.lng*Math.PI/180),c.Q(u,u,T),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=c.bk(),c.aB(this._globeViewProjMatrixNoCorrectionInverted,p);const M=c.bA();this._cameraPosition=c.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/n,c.bG(this._cameraPosition,this._cameraPosition,M,-this.rollInRadians),c.bH(this._cameraPosition,this._cameraPosition,M,this.pitchInRadians),c.bG(this._cameraPosition,this._cameraPosition,M,-this.bearingInRadians),c.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bH(this._cameraPosition,this._cameraPosition,M,-this.center.lat*Math.PI/180),c.bI(this._cameraPosition,this._cameraPosition,M,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const O=c.bf(this._globeViewProjMatrixNoCorrectionInverted);c.Q(O,O,[1,1,-1]),this._cachedFrustum=ji.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){c.w("calculateFogMatrix is not supported on globe projection.");const u=c.bk();return c.ar(u),u}getVisibleUnwrappedCoordinates(n){return[new c.bc(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=gn(n);c.a$(p,p,1+u/c.bE);const _=c.bF();return c.aH(_,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(n){}getBounds(){const n=.5*this.width,u=.5*this.height,p=[new c.P(0,0),new c.P(n,0),new c.P(this.width,0),new c.P(this.width,u),new c.P(this.width,this.height),new c.P(n,this.height),new c.P(0,this.height),new c.P(0,u)],_=[];for(const K of p)_.push(this.unprojectScreenPoint(K));let T=0,M=0,O=0,R=0;const V=this.center;for(const K of _){const W=c.bK(V.lng,K.lng),ne=c.bK(V.lat,K.lat);W<M&&(M=W),W>T&&(T=W),ne<R&&(R=ne),ne>O&&(O=ne)}const q=[V.lng+M,V.lat+R,V.lng+T,V.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new Lr(q)}calculateCenterFromCameraLngLatAlt(n,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,p,_)}setLocationAtPoint(n,u){const p=gn(this.unprojectScreenPoint(u)),_=gn(n),T=c.bA();c.bL(T);const M=c.bA();c.bI(M,p,T,-this.center.lng*Math.PI/180),c.bH(M,M,T,this.center.lat*Math.PI/180);const O=_[0]*_[0]+_[2]*_[2],R=M[0]*M[0];if(O<R)return;const V=Math.sqrt(O-R),q=-V,K=c.bM(_[0],_[2],M[0],V),W=c.bM(_[0],_[2],M[0],q),ne=c.bA();c.bI(ne,_,T,-K);const le=c.bM(ne[1],ne[2],M[1],M[2]),pe=c.bA();c.bI(pe,_,T,-W);const ye=c.bM(pe[1],pe[2],M[1],M[2]),ge=.5*Math.PI,xe=le>=-ge&&le<=ge,De=ye>=-ge&&ye<=ge;let be,Ce;if(xe&&De){const et=this.center.lng*Math.PI/180,Xe=this.center.lat*Math.PI/180;c.bN(K,et)+c.bN(le,Xe)<c.bN(W,et)+c.bN(ye,Xe)?(be=K,Ce=le):(be=W,Ce=ye)}else if(xe)be=K,Ce=le;else{if(!De)return;be=W,Ce=ye}const ke=be/Math.PI*180,Se=Ce/Math.PI*180,je=this.center.lat;this.setCenter(new c.V(ke,c.an(Se,-90,90))),this.setZoom(this.zoom+In(je,this.center.lat))}locationToScreenPoint(n,u){const p=gn(n);if(u){const _=u.getElevationForLngLatZoom(n,this._helper._tileZoom);c.a$(p,p,1+_/c.bE)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(n){const u=c.bF();return c.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new c.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,u){if(u){const p=u.pointCoordinate(n);if(p)return p}return c.a9.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,u){var p;return(p=this.screenPointToMercatorCoordinate(n,u))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(n,u){const p=this._cameraPosition,_=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(p,_)}getRayDirectionFromPixel(n){const u=c.bF();u[0]=n.x/this.width*2-1,u[1]=-1*(n.y/this.height*2-1),u[2]=1,u[3]=1,c.aH(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const p=c.bA();p[0]=u[0]-this._cameraPosition[0],p[1]=u[1]-this._cameraPosition[1],p[2]=u[2]-this._cameraPosition[2];const _=c.bA();return c.b3(_,p),_}isSurfacePointVisible(n){const u=this._cachedClippingPlane;return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const u=c.bF();return c.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(n,u){const p=c.b5(n,u),_=c.bA(),T=c.bA();c.a$(T,u,p),c.b2(_,n,T);const M=1-c.b5(_,_);if(M<0)return null;const O=c.b5(n,n)-1,R=-p+(p<0?1:-1)*Math.sqrt(M),V=O/R,q=R;return{tMin:Math.min(V,q),tMax:Math.max(V,q)}}unprojectScreenPoint(n){const u=this._cameraPosition,p=this.getRayDirectionFromPixel(n),_=this.rayPlanetIntersection(u,p);if(_){const q=c.bA();c.b0(q,u,[p[0]*_.tMin,p[1]*_.tMin,p[2]*_.tMin]);const K=c.bA();return c.b3(K,q),ih(K)}const T=this._cachedClippingPlane,M=T[0]*p[0]+T[1]*p[1]+T[2]*p[2],O=-c.bb(T,u)/M,R=c.bA();if(O>0)c.b0(R,u,[p[0]*O,p[1]*O,p[2]*O]);else{const q=c.bA();c.b0(q,u,[2*p[0],2*p[1],2*p[2]]);const K=c.bb(this._cachedClippingPlane,q);c.b2(R,q,[this._cachedClippingPlane[0]*K,this._cachedClippingPlane[1]*K,this._cachedClippingPlane[2]*K])}const V=(function(q){const K=c.bA();return K[0]=q[0]*-q[3],K[1]=q[1]*-q[3],K[2]=q[2]*-q[3],{center:K,radius:Math.sqrt(1-q[3]*q[3])}})(T);return ih((function(q,K,W){const ne=c.bA();c.b2(ne,W,q);const le=c.bA();return c.by(le,q,ne,K/c.b9(ne)),le})(V.center,V.radius,R))}getMatrixForModel(n,u){const p=c.V.convert(n),_=1/c.bE,T=c.bj();return c.bJ(T,T,p.lng/180*Math.PI),c.bh(T,T,-p.lat/180*Math.PI),c.O(T,T,[0,0,1+u/c.bE]),c.bh(T,T,.5*Math.PI),c.Q(T,T,[_,_,_]),T}getProjectionDataForCustomLayer(n=!0){const u=this.getProjectionData({overscaledTileID:new c.a2(0,0,0,0,0),applyGlobeMatrix:n});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(n){}}class eu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,p){return this._helper.interpolatePadding(n,u,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,p=!0){this._helper.resize(n,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,u){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(n){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(u,p)=>this.currentTransform.defaultConstrain(u,p),this.applyConstrain=(u,p)=>this._helper.applyConstrain(u,p),this._helper=new ol({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,p)=>this.defaultConstrain(u,p)},n),this._globeness=1,this._mercatorTransform=new Kn,this._verticalPerspectiveTransform=new Jc}clone(){const n=new eu;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this,!1),n}apply(n,u){this._helper.apply(n,u),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const u=this._mercatorTransform.getProjectionData(n),p=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:u.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return c.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,u,p){const _=this._mercatorTransform.getPitchedTextCorrection(n,u,p),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,u,p);return c.bu(_,T,this._globeness)}projectTileCoordinates(n,u,p,_){return this.currentTransform.projectTileCoordinates(n,u,p,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){return this.currentTransform.lngLatToCameraDepth(n,u)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(n,u,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,p,_)}setLocationAtPoint(n,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,u),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(n,u),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(n,u){return this.currentTransform.locationToScreenPoint(n,u)}screenPointToMercatorCoordinate(n,u){return this.currentTransform.screenPointToMercatorCoordinate(n,u)}screenPointToLocation(n,u){return this.currentTransform.screenPointToLocation(n,u)}isPointOnMapSurface(n,u){return this.currentTransform.isPointOnMapSurface(n,u)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,u){return this.currentTransform.getMatrixForModel(n,u)}getProjectionDataForCustomLayer(n=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return u;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return p.fallbackMatrix=u.mainMatrix,p}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class jn{get useGlobeControls(){return!0}handlePanInertia(n,u){const p=pm(n,u);return Math.abs(p.lng-u.center.lng)>180&&(p.lng=u.center.lng+179.5*Math.sign(p.lng-u.center.lng)),{easingCenter:p,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,u){const p=n.around,_=u.screenPointToLocation(p);n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta);const T=u.zoom;n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta);const M=u.zoom-T;if(M===0)return;const O=c.bK(u.center.lng,_.lng),R=O/(Math.abs(O/180)+1),V=c.bK(u.center.lat,_.lat),q=u.getRayDirectionFromPixel(p),K=u.cameraPosition,W=-1*c.b5(K,q),ne=c.bA();c.b0(ne,K,[q[0]*W,q[1]*W,q[2]*W]);const le=c.b7(ne)-1,pe=Math.exp(.5*-Math.max(le-.3,0)),ye=Jl(u.worldSize,u.center.lat)/Math.min(u.width,u.height),ge=c.bx(ye,.9,.5,1,.25),xe=(1-c.aq(-M))*Math.min(pe,ge),De=u.center.lat,be=u.zoom,Ce=new c.V(u.center.lng+R*xe,c.an(u.center.lat+V*xe,-c.ao,c.ao));u.setLocationAtPoint(_,p);const ke=u.center,Se=c.bx(Math.abs(O),45,85,0,1),je=c.bx(ye,.75,.35,0,1),et=Math.pow(Math.max(Se,je),.25),Xe=c.bK(ke.lng,Ce.lng),Qe=c.bK(ke.lat,Ce.lat);u.setCenter(new c.V(ke.lng+Xe*et,ke.lat+Qe*et).wrap()),u.setZoom(be+In(De,u.center.lat))}handleMapControlsPan(n,u,p){if(!n.panDelta)return;const _=u.center.lat,T=u.zoom;u.setCenter(pm(n.panDelta,u).wrap()),u.setZoom(T+In(_,u.center.lat))}cameraForBoxAndBearing(n,u,p,_,T){const M=Wl(n,u,p,_,T),O=u.left/T.width*2-1,R=(T.width-u.right)/T.width*2-1,V=u.top/T.height*-2+1,q=(T.height-u.bottom)/T.height*-2+1,K=c.bK(p.getWest(),p.getEast())<0,W=K?p.getEast():p.getWest(),ne=K?p.getWest():p.getEast(),le=Math.max(p.getNorth(),p.getSouth()),pe=Math.min(p.getNorth(),p.getSouth()),ye=W+.5*c.bK(W,ne),ge=le+.5*c.bK(le,pe),xe=T.clone();xe.setCenter(M.center),xe.setBearing(M.bearing),xe.setPitch(0),xe.setRoll(0),xe.setZoom(M.zoom);const De=xe.modelViewProjectionMatrix,be=[gn(p.getNorthWest()),gn(p.getNorthEast()),gn(p.getSouthWest()),gn(p.getSouthEast()),gn(new c.V(ne,ge)),gn(new c.V(W,ge)),gn(new c.V(ye,le)),gn(new c.V(ye,pe))],Ce=gn(M.center);let ke=Number.POSITIVE_INFINITY;for(const Se of be)O<0&&(ke=jn.getLesserNonNegativeNonNull(ke,jn.solveVectorScale(Se,Ce,De,"x",O))),R>0&&(ke=jn.getLesserNonNegativeNonNull(ke,jn.solveVectorScale(Se,Ce,De,"x",R))),V>0&&(ke=jn.getLesserNonNegativeNonNull(ke,jn.solveVectorScale(Se,Ce,De,"y",V))),q<0&&(ke=jn.getLesserNonNegativeNonNull(ke,jn.solveVectorScale(Se,Ce,De,"y",q)));if(Number.isFinite(ke)&&ke!==0)return M.zoom=xe.zoom+c.at(ke),M;Ni()}handleJumpToCenterZoom(n,u){const p=n.center.lat,_=n.applyConstrain(u.center?c.V.convert(u.center):n.center,n.zoom).center;n.setCenter(_.wrap());const T=u.zoom!==void 0?+u.zoom:n.zoom+In(p,_.lat);n.zoom!==T&&n.setZoom(T)}handleEaseTo(n,u){const p=n.zoom,_=n.center,T=n.padding,M={roll:n.roll,pitch:n.pitch,bearing:n.bearing},O={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},R=u.zoom!==void 0,V=!n.isPaddingEqual(u.padding);let q=!1;const K=u.center?c.V.convert(u.center):_,W=n.applyConstrain(K,p).center;Ho(n,W);const ne=n.clone();ne.setCenter(W),ne.setZoom(R?+u.zoom:p+In(_.lat,K.lat)),ne.setBearing(u.bearing);const le=new c.P(c.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));ne.setLocationAtPoint(W,le);const pe=(u.offset&&u.offsetAsPoint.mag())>0?ne.center:W,ye=R?+u.zoom:p+In(_.lat,pe.lat),ge=p+In(_.lat,0),xe=ye+In(pe.lat,0),De=c.bK(_.lng,pe.lng),be=c.bK(_.lat,pe.lat),Ce=c.aq(xe-ge);return q=ye!==p,{easeFunc:ke=>{if(c.bo(M,O)||th({startEulerAngles:M,endEulerAngles:O,tr:n,k:ke,useSlerp:M.roll!=O.roll}),V&&n.interpolatePadding(T,u.padding,ke),u.around)c.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(u.around,u.aroundPoint);else{const Se=xe>ge?Math.min(2,Ce):Math.max(.5,Ce),je=Math.pow(Se,1-ke),et=mm(_,De,be,ke*je);n.setCenter(et.wrap())}if(q){const Se=c.G.number(ge,xe,ke)+In(0,n.center.lat);n.setZoom(Se)}},isZooming:q,elevationCenter:pe}}handleFlyTo(n,u){const p=u.zoom!==void 0,_=n.center,T=n.zoom,M=n.padding,O=!n.isPaddingEqual(u.padding),R=n.applyConstrain(c.V.convert(u.center||u.locationAtOffset),T).center,V=p?+u.zoom:n.zoom+In(n.center.lat,R.lat),q=n.clone();q.setCenter(R),q.setZoom(V),q.setBearing(u.bearing);const K=new c.P(c.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));q.setLocationAtPoint(R,K);const W=q.center;Ho(n,W);const ne=(function(be,Ce,ke){const Se=gn(Ce),je=gn(ke),et=c.b5(Se,je),Xe=Math.acos(et),Qe=Fi(be);return Xe/(2*Math.PI)*Qe})(n,_,W),le=T+In(_.lat,0),pe=V+In(W.lat,0),ye=c.aq(pe-le);let ge;if(typeof u.minZoom=="number"){const be=+u.minZoom+In(W.lat,0),Ce=Math.min(be,le,pe)+In(0,W.lat),ke=n.applyConstrain(W,Ce).zoom+In(W.lat,0);ge=c.aq(ke-le)}const xe=c.bK(_.lng,W.lng),De=c.bK(_.lat,W.lat);return{easeFunc:(be,Ce,ke,Se)=>{const je=mm(_,xe,De,ke);O&&n.interpolatePadding(M,u.padding,be);const et=be===1?W:je;n.setCenter(et.wrap());const Xe=le+c.at(Ce);n.setZoom(be===1?V:Xe+In(0,et.lat))},scaleOfZoom:ye,targetCenter:W,scaleOfMinZoom:ge,pixelPathLength:ne}}static solveVectorScale(n,u,p,_,T){const M=_==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],O=[p[3],p[7],p[11],p[15]],R=n[0]*M[0]+n[1]*M[1]+n[2]*M[2],V=n[0]*O[0]+n[1]*O[1]+n[2]*O[2],q=u[0]*M[0]+u[1]*M[1]+u[2]*M[2],K=u[0]*O[0]+u[1]*O[1]+u[2]*O[2];return q+T*V===R+T*K||O[3]*(R-q)+M[3]*(K-V)+R*K==q*V?null:(q+M[3]-T*K-T*O[3])/(q-R-T*K+T*V)}static getLesserNonNegativeNonNull(n,u){return u!==null&&u>=0&&u<n?u:n}}class tu{constructor(n){this._globe=n,this._mercatorCameraHelper=new Kl,this._verticalPerspectiveCameraHelper=new jn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,u){return this.currentHelper.handlePanInertia(n,u)}handleMapControlsRollPitchBearingZoom(n,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,u)}handleMapControlsPan(n,u,p){this.currentHelper.handleMapControlsPan(n,u,p)}cameraForBoxAndBearing(n,u,p,_,T){return this.currentHelper.cameraForBoxAndBearing(n,u,p,_,T)}handleJumpToCenterZoom(n,u){this.currentHelper.handleJumpToCenterZoom(n,u)}handleEaseTo(n,u){return this.currentHelper.handleEaseTo(n,u)}handleFlyTo(n,u){return this.currentHelper.handleFlyTo(n,u)}}const ru=(w,n)=>c.B(w,n&&n.filter((u=>u.identifier!=="source.canvas"))),nu=c.bO();class ul extends c.E{constructor(n,u={}){var p,_;super(),this._rtlPluginLoaded=()=>{for(const M in this.tileManagers){const O=this.tileManagers[M].getSource().type;O!=="vector"&&O!=="geojson"||this.tileManagers[M].reload()}},this.map=n,this.dispatcher=new er(pt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",((M,O)=>this.getGlyphs(M,O))),this.dispatcher.registerMessageHandler("GI",((M,O)=>this.getImages(M,O))),this.dispatcher.registerMessageHandler("GDA",((M,O)=>this.getDashes(M,O))),this.imageManager=new Te,this.imageManager.setEventedParent(this);const T=((p=n._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new it(n._requestManager,u.localIdeographFontFamily,T),this.lineAtlas=new ct(256,512),this.crossTileSymbolIndex=new ii,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",c.bP()),ie().on(rl,this._rtlPluginLoaded),this.on("data",(M=>{if(M.dataType!=="source"||M.sourceDataType!=="metadata")return;const O=this.tileManagers[M.sourceId];if(!O)return;const R=O.getSource();if(R&&R.vectorLayerIds)for(const V in this._layers){const q=this._layers[V];q.source===R.id&&this._validateLayer(q)}}))}_setInitialValues(){var n;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new c.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((n=this.crossTileSymbolIndex)===null||n===void 0?void 0:n.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(n,u){var p,_,T;this._checkLoaded();const M=u===null?(T=(_=(p=this.stylesheet.state)===null||p===void 0?void 0:p[n])===null||_===void 0?void 0:_.default)!==null&&T!==void 0?T:null:u;if(c.bR(M,this._globalState[n]))return this;this._globalState[n]=M,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const u=[];for(const p in n)!c.bR(this._globalState[p],n[p].default)&&(u.push(p),this._globalState[p]=n[p].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(n){if(n.length===0)return;const u=new Set,p={};for(const _ of n){p[_]=this._globalState[_];for(const T in this._layers){const M=this._layers[T],O=M.getLayoutAffectingGlobalStateRefs(),R=M.getPaintAffectingGlobalStateRefs(),V=M.getVisibilityAffectingGlobalStateRefs();if(O.has(_)&&u.add(M.source),R.has(_))for(const{name:q,value:K}of R.get(_))this._updatePaintProperty(M,q,K);V?.has(_)&&(M.recalculateVisibility(),this._updateLayer(M))}}this.dispatcher.broadcast("UGS",p);for(const _ in this.tileManagers)u.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(n,u={},p){this.fire(new c.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const _=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;c.j(_,this._loadStyleRequest).then((M=>{this._loadStyleRequest=null,this._load(M.data,u,p)})).catch((M=>{this._loadStyleRequest=null,M&&!T.signal.aborted&&this.fire(new c.k(M))}))}loadJSON(n,u={},p){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,G.frameAsync(this._frameRequest,this.map._ownerWindow).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(n,u,p)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(nu,{validate:!1})}_load(n,u,p){var _,T;let M=u.transformStyle?u.transformStyle(p,n):n;if(!u.validate||!ru(this,c.C(M))){M=Object.assign({},M),this._loaded=!0,this.stylesheet=M;for(const O in M.sources)this.addSource(O,M.sources[O],{validate:!1});M.sprite?this._loadSprite(M.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(M.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new qe(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var n,u,p;const _=c.bS(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",_),this._order=_.map((T=>T.id)),this._layers={},this._serializedLayers=null;for(const T of _){const M=c.bT(T,this._globalState);if(M.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=M,c.bU(M)&&this.tileManagers[M.source]){const O=(p=(u=T.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&p!==void 0?p:M.paint.get("raster-fade-duration");this.tileManagers[M.source].setRasterFadeDuration(O)}}}_loadSprite(n,u=!1,p=void 0){this.imageManager.setLoaded(!1);const _=new AbortController;let T;this._spriteRequest=_,(function(M,O,R,V){return c._(this,void 0,void 0,(function*(){const q=mt(M),K=R>1?"@2x":"",W={},ne={};for(const{id:le,url:pe}of q){const ye=O.transformRequest(zt(pe,K,".json"),"SpriteJSON");W[le]=c.j(ye,V);const ge=O.transformRequest(zt(pe,K,".png"),"SpriteImage");ne[le]=ze.getImage(ge,V)}return yield Promise.all([...Object.values(W),...Object.values(ne)]),(function(le,pe){return c._(this,void 0,void 0,(function*(){const ye={};for(const ge in le){ye[ge]={};const xe=G.getImageCanvasContext((yield pe[ge]).data),De=(yield le[ge]).data;for(const be in De){const{width:Ce,height:ke,x:Se,y:je,sdf:et,pixelRatio:Xe,stretchX:Qe,stretchY:Je,content:Ct,textFitWidth:Dt,textFitHeight:vt}=De[be];ye[ge][be]={data:null,pixelRatio:Xe,sdf:et,stretchX:Qe,stretchY:Je,content:Ct,textFitWidth:Dt,textFitHeight:vt,spriteData:{width:Ce,height:ke,x:Se,y:je,context:xe}}}}return ye}))})(W,ne)}))})(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((M=>{if(this._spriteRequest=null,M)for(const O in M){this._spritesImagesIds[O]=[];const R=this._spritesImagesIds[O]?this._spritesImagesIds[O].filter((V=>!(V in M))):[];for(const V of R)this.imageManager.removeImage(V),this._changedImages[V]=!0;for(const V in M[O]){const q=O==="default"?V:`${O}:${V}`;this._spritesImagesIds[O].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,M[O][V],!1):this.imageManager.addImage(q,M[O][V]),u&&(this._changedImages[q]=!0)}}})).catch((M=>{this._spriteRequest=null,T=M,_.signal.aborted||this.fire(new c.k(T))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),p&&p(T)}))}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(n){const u=this.tileManagers[n.source];if(!u)return;const p=n.sourceLayer;if(!p)return;const _=u.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new c.k(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.tileManagers)if(!this.tileManagers[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,u=!1){const p=this._serializedAllLayers();if(!n||n.length===0)return Object.values(u?c.bV(p):p);const _=[];for(const T of n)if(p[T]){const M=u?c.bV(p[T]):p[T];_.push(M)}return _}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const _=this._layers[p];_.type!=="custom"&&(n[p]=_.serialize())}return n}hasTransitions(){var n,u,p;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const _ in this.tileManagers)if(this.tileManagers[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(u){const _=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(_.length||T.length)&&this._updateWorkerLayers(_,T);for(const M in this._updatedSources){const O=this._updatedSources[M];if(O==="reload")this._reloadSource(M);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(M)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const p={};for(const _ in this.tileManagers){const T=this.tileManagers[_];p[_]=T.used,T.used=!1}for(const _ of this._order){const T=this._layers[_];T.recalculate(n,this._availableImages),!T.isHidden(n.zoom)&&T.source&&(this.tileManagers[T.source].used=!0)}for(const _ in p){const T=this.tileManagers[_];!!p[_]!=!!T.used&&T.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,u&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,u={}){var p;this._checkLoaded();const _=this.serialize();if(n=u.transformStyle?u.transformStyle(_,n):n,((p=u.validate)===null||p===void 0||p)&&ru(this,c.C(n)))return!1;(n=c.bV(n)).layers=c.bS(n.layers);const T=c.bW(_,n),M=this._getOperationsToPerform(T);if(M.unimplemented.length>0)throw new Error(`Unimplemented: ${M.unimplemented.join(", ")}.`);if(M.operations.length===0)return!1;for(const O of M.operations)O();return this.stylesheet=n,this._serializedLayers=null,this.fire(new c.l("style.load",{style:this})),!0}_getOperationsToPerform(n){const u=[],p=[];for(const _ of n)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":u.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":u.push((()=>{}));break;default:p.push(_.command)}return{operations:u,unimplemented:p}}addImage(n,u){if(this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u,p={}){if(this._checkLoaded(),this.tileManagers[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.C.source,`sources.${n}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const _=this.tileManagers[n]=new Ur(n,u,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:n}))),_.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new c.k(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const u=this.tileManagers[n];delete this.tileManagers[n],delete this._updatedSources[n],u.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const p=this.tileManagers[n].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(n){return this.tileManagers[n]&&this.tileManagers[n].getSource()}addLayer(n,u,p={}){this._checkLoaded();const _=n.id;if(this.getLayer(_))return void this.fire(new c.k(new Error(`Layer "${_}" already exists on this map.`)));let T;if(n.type==="custom"){if(ru(this,c.bX(n)))return;T=c.bT(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(_,n.source),n=c.bV(n),n=c.e(n,{source:_})),this._validate(c.C.layer,`layers.${_}`,n,{arrayIndex:-1},p))return;T=c.bT(n,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:_}})}const M=u?this._order.indexOf(u):this._order.length;if(u&&M===-1)this.fire(new c.k(new Error(`Cannot add layer "${_}" before non-existing layer "${u}".`)));else{if(this._order.splice(M,0,_),this._layerOrderChanged=!0,this._layers[_]=T,this._removedLayers[_]&&T.source&&T.type!=="custom"){const O=this._removedLayers[_];delete this._removedLayers[_],O.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.tileManagers[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const p=this._order.indexOf(n);this._order.splice(p,1);const _=u?this._order.indexOf(u):this._order.length;u&&_===-1?this.fire(new c.k(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(_,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,p){this._checkLoaded();const _=this.getLayer(n);_?_.minzoom===u&&_.maxzoom===p||(u!=null&&(_.minzoom=u),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u,p={}){this._checkLoaded();const _=this.getLayer(n);if(_){if(!c.bR(_.filter,u))return u==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(c.C.filter,`layers.${_.id}.filter`,u,null,p)||(_.setFilter(c.bV(u)),this._updateLayer(_)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.bV(this.getLayer(n).filter)}setLayoutProperty(n,u,p,_={}){this._checkLoaded();const T=this.getLayer(n);T?c.bR(T.getLayoutProperty(u),p)||(T.setLayoutProperty(u,p,_),this._updateLayer(T)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const p=this.getLayer(n);if(p)return p.getLayoutProperty(u);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,p,_={}){this._checkLoaded();const T=this.getLayer(n);T?c.bR(T.getPaintProperty(u),p)||this._updatePaintProperty(T,u,p,_):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,u,p,_={}){n.setPaintProperty(u,p,_)&&this._updateLayer(n),c.bU(n)&&u==="raster-fade-duration"&&this.tileManagers[n.source].setRasterFadeDuration(p),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const p=n.source,_=n.sourceLayer,T=this.tileManagers[p];if(T===void 0)return void this.fire(new c.k(new Error(`The source '${p}' does not exist in the map's style.`)));const M=T.getSource().type;M==="geojson"&&_?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||_?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(_,n.id,u)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const p=n.source,_=this.tileManagers[p];if(_===void 0)return void this.fire(new c.k(new Error(`The source '${p}' does not exist in the map's style.`)));const T=_.getSource().type,M=T==="vector"?n.sourceLayer:void 0;T!=="vector"||M?u&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(M,n.id,u):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,p=n.sourceLayer,_=this.tileManagers[u];if(_!==void 0)return _.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,n.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=c.bY(this.tileManagers,(T=>T.serialize())),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,_=this.stylesheet;return c.bZ({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:n,layers:u,terrain:p},(T=>T!==void 0))}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.tileManagers[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.tileManagers[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=M=>this._layers[M].type==="fill-extrusion",p={},_=[];for(let M=this._order.length-1;M>=0;M--){const O=this._order[M];if(u(O)){p[O]=M;for(const R of n){const V=R[O];if(V)for(const q of V)_.push(q)}}}_.sort(((M,O)=>O.intersectionZ-M.intersectionZ));const T=[];for(let M=this._order.length-1;M>=0;M--){const O=this._order[M];if(u(O))for(let R=_.length-1;R>=0;R--){const V=_[R].feature;if(p[V.layer.id]<M)break;T.push(V),_.pop()}else for(const R of n){const V=R[O];if(V)for(const q of V)T.push(q.feature)}}return T}queryRenderedFeatures(n,u,p){u&&u.filter&&this._validate(c.C.filter,"queryRenderedFeatures.filter",u.filter,null,u);const _={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const V of u.layers){const q=this._layers[V];if(!q)return this.fire(new c.k(new Error(`The layer '${V}' does not exist in the map's style and cannot be queried for features.`))),[];_[q.source]=!0}}const T=[];u.availableImages=this._availableImages;const M=this._serializedAllLayers(),O=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,R=Object.assign(Object.assign({},u),{layers:O,globalState:this._globalState});for(const V in this.tileManagers)u.layers&&!_[V]||T.push(Mn(this.tileManagers[V],this._layers,M,n,R,p,this.map.terrain?(q,K,W)=>this.map.terrain.getElevation(q,K,W):void 0));return this.placement&&T.push((function(V,q,K,W,ne,le,pe){const ye={},ge=le.queryRenderedSymbols(W),xe=[];for(const De of Object.keys(ge).map(Number))xe.push(pe[De]);xe.sort(cr);for(const De of xe){const be=De.featureIndex.lookupSymbolFeatures(ge[De.bucketInstanceId],q,De.bucketIndex,De.sourceLayerIndex,{filterSpec:ne.filter,globalState:ne.globalState},ne.layers,ne.availableImages,V);for(const Ce in be){const ke=ye[Ce]=ye[Ce]||[],Se=be[Ce];Se.sort(((je,et)=>{const Xe=De.featureSortOrder;if(Xe){const Qe=Xe.indexOf(je.featureIndex);return Xe.indexOf(et.featureIndex)-Qe}return et.featureIndex-je.featureIndex}));for(const je of Se)ke.push(je)}}return(function(De,be,Ce){for(const ke in De)for(const Se of De[ke])Xr(Se,Ce[be[ke].source]);return De})(ye,V,K)})(this._layers,M,this.tileManagers,n,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(n,u){u?.filter&&this._validate(c.C.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.tileManagers[n];return p?(function(_,T){const M=_.getRenderableIds().map((V=>_.getTileByID(V))),O=[],R={};for(let V=0;V<M.length;V++){const q=M[V],K=q.tileID.canonical.key;R[K]||(R[K]=!0,q.querySourceFeatures(O,T))}return O})(p,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,u={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const M in n)if(!c.bR(n[M],p[M])){_=!0;break}if(!_)return;const T={now:H(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(T)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.stylesheet.projection=n,this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,u={}){this._checkLoaded();const p=this.getSky();let _=!1;if(!n&&!p)return;if(n&&!p)_=!0;else if(!n&&p)_=!0;else for(const M in n)if(!c.bR(n[M],p[M])){_=!0;break}if(!_)return;const T={now:H(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,u),this.sky.updateTransitions(T)}_setProjectionInternal(n){const u=(function(p,_){const T={constrainOverride:_};if(Array.isArray(p)){const M=new Ld({type:p});return{projection:M,transform:new eu(T),cameraHelper:new tu(M)}}switch(p){case"mercator":return{projection:new ai,transform:new Kn(T),cameraHelper:new Kl};case"globe":{const M=new Ld({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:M,transform:new eu(T),cameraHelper:new tu(M)}}case"vertical-perspective":return{projection:new Rd,transform:new Jc(T),cameraHelper:new jn};default:return c.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new ai,transform:new Kn(T),cameraHelper:new Kl}}})(n,this.map.transformConstrain);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const p in this.tileManagers)this.tileManagers[p].reload()}_validate(n,u,p,_,T={}){return(!T||T.validate!==!1)&&ru(this,n.call(c.C,c.e({key:u,style:this.serialize(),value:p,styleSpec:c.u},_)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ie().off(rl,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.tileManagers){const p=this.tileManagers[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.tileManagers[n].clearTiles()}_reloadSource(n){this.tileManagers[n].resume(),this.tileManagers[n].reload()}_updateSources(n){for(const u in this.tileManagers)this.tileManagers[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.tileManagers)this._reloadSource(n)}_updatePlacement(n,u,p,_,T=!1){let M=!1,O=!1;const R={};for(const V of this._order){const q=this._layers[V];if(q.type!=="symbol")continue;if(!R[q.source]){const W=this.tileManagers[q.source];R[q.source]=W.getRenderableIds(!0).map((ne=>W.getTileByID(ne))).sort(((ne,le)=>le.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(le.tileID)?-1:1)))}const K=this.crossTileSymbolIndex.addLayer(q,R[q.source],n.center.lng);M=M||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(H(),n.zoom))&&(this.pauseablePlacement=new Wc(n,this.map.terrain,this._order,T,u,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(H()),O=!0),M&&this.pauseablePlacement.placement.setStale()),O||M)for(const V of this._order){const q=this._layers[V];q.type==="symbol"&&this.placement.updateLayerOpacities(q,R[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(H())}_releaseSymbolFadeTiles(){for(const n in this.tileManagers)this.tileManagers[n].releaseSymbolFadeTiles()}getImages(n,u){return c._(this,void 0,void 0,(function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const _=this.tileManagers[u.source];return _&&_.setDependencies(u.tileID.key,u.type,u.icons),p}))}getGlyphs(n,u){return c._(this,void 0,void 0,(function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),_=this.tileManagers[u.source];return _&&_.setDependencies(u.tileID.key,u.type,[""]),p}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,u={}){this._checkLoaded(),n&&this._validate(c.C.glyphs,"glyphs",n,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,u){return c._(this,void 0,void 0,(function*(){const p={};for(const[_,T]of Object.entries(u.dashes))p[_]=this.lineAtlas.getDash(T.dasharray,T.round);return p}))}addSprite(n,u,p={},_){this._checkLoaded();const T=[{id:n,url:u}],M=[...mt(this.stylesheet.sprite),...T];this._validate(c.C.sprite,"sprite",M,null,p)||(this.stylesheet.sprite=M,this._loadSprite(T,!0,_))}removeSprite(n){this._checkLoaded();const u=mt(this.stylesheet.sprite);if(u.find((p=>p.id===n))){if(this._spritesImagesIds[n])for(const p of this._spritesImagesIds[n])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex((p=>p.id===n)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return mt(this.stylesheet.sprite)}setSprite(n,u={},p){this._checkLoaded(),n&&this._validate(c.C.sprite,"sprite",n,null,u)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,p):(this._unloadSprite(),p&&p(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const n in this.tileManagers){const u=this.tileManagers[n];u.setEventedParent(null),u.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const n in this._layers){const u=this._layers[n];u.setEventedParent(null),u.onRemove&&u.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var gm=c.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class sh{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,p,_,T,M,O,R,V){this.context=n;let q=this.boundPaintVertexBuffers.length!==_.length;for(let K=0;!q&&K<_.length;K++)this.boundPaintVertexBuffers[K]!==_[K]&&(q=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||q||this.boundIndexBuffer!==T||this.boundVertexOffset!==M||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==V?this.freshBind(u,p,_,T,M,O,R,V):(n.bindVertexArray.set(this.vao),O&&O.bind(),T&&T.dynamicDraw&&T.bind(),R&&R.bind(),V&&V.bind())}freshBind(n,u,p,_,T,M,O,R){const V=n.numAttributes,q=this.context,K=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,u.enableAttributes(K,n);for(const W of p)W.enableAttributes(K,n);M&&M.enableAttributes(K,n),O&&O.enableAttributes(K,n),R&&R.enableAttributes(K,n),u.bind(),u.setVertexAttribPointers(K,n,T);for(const W of p)W.bind(),W.setVertexAttribPointers(K,n,T);M&&(M.bind(),M.setVertexAttribPointers(K,n,T)),_&&_.bind(),O&&(O.bind(),O.setVertexAttribPointers(K,n,T)),R&&(R.bind(),R.setVertexAttribPointers(K,n,T)),q.currentNumAttributes=V}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ym=(w,n,u,p,_)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:n,u_fog_color:u?u.properties.get("fog-color"):c.bp.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:u?u.calculateFogBlendOpacity(p):0,u_horizon_color:u?u.properties.get("horizon-color"):c.bp.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),xo={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Af(w){const n=[];for(let u=0;u<w.length;u++){if(w[u]===null)continue;const p=w[u].split(" ");n.push(p.pop())}return n}class vm{constructor(n,u,p,_,T,M,O,R,V=[]){const q=n.gl;this.program=q.createProgram();const K=Af(u.staticAttributes),W=p?p.getBinderAttributes():[],ne=K.concat(W),le=pn.prelude.staticUniforms?Af(pn.prelude.staticUniforms):[],pe=O.staticUniforms?Af(O.staticUniforms):[],ye=u.staticUniforms?Af(u.staticUniforms):[],ge=p?p.getBinderUniforms():[],xe=le.concat(pe).concat(ye).concat(ge),De=[];for(const Xe of xe)De.indexOf(Xe)<0&&De.push(Xe);const be=p?p.defines():[];Wa(q)&&be.unshift("#version 300 es"),T&&be.push("#define OVERDRAW_INSPECTOR;"),M&&be.push("#define TERRAIN3D;"),R&&be.push(R),V&&be.push(...V);let Ce=be.concat(pn.prelude.fragmentSource,O.fragmentSource,u.fragmentSource).join(`
`),ke=be.concat(pn.prelude.vertexSource,O.vertexSource,u.vertexSource).join(`
`);Wa(q)||(Ce=(function(Xe){return Xe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Ce),ke=(function(Xe){return Xe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ke));const Se=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Se,Ce),q.compileShader(Se),!q.getShaderParameter(Se,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(Se)}`);q.attachShader(this.program,Se);const je=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(je,ke),q.compileShader(je),!q.getShaderParameter(je,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(je)}`);q.attachShader(this.program,je),this.attributes={};const et={};this.numAttributes=ne.length;for(let Xe=0;Xe<this.numAttributes;Xe++)ne[Xe]&&(q.bindAttribLocation(this.program,Xe,ne[Xe]),this.attributes[ne[Xe]]=Xe);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(je),q.deleteShader(Se);for(let Xe=0;Xe<De.length;Xe++){const Qe=De[Xe];if(Qe&&!et[Qe]){const Je=q.getUniformLocation(this.program,Qe);Je&&(et[Qe]=Je)}}this.fixedUniforms=_(n,et),this.terrainUniforms=((Xe,Qe)=>({u_depth:new c.b_(Xe,Qe.u_depth),u_terrain:new c.b_(Xe,Qe.u_terrain),u_terrain_dim:new c.bq(Xe,Qe.u_terrain_dim),u_terrain_matrix:new c.c0(Xe,Qe.u_terrain_matrix),u_terrain_unpack:new c.c1(Xe,Qe.u_terrain_unpack),u_terrain_exaggeration:new c.bq(Xe,Qe.u_terrain_exaggeration)}))(n,et),this.projectionUniforms=((Xe,Qe)=>({u_projection_matrix:new c.c0(Xe,Qe.u_projection_matrix),u_projection_tile_mercator_coords:new c.c1(Xe,Qe.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.c1(Xe,Qe.u_projection_clipping_plane),u_projection_transition:new c.bq(Xe,Qe.u_projection_transition),u_projection_fallback_matrix:new c.c0(Xe,Qe.u_projection_fallback_matrix)}))(n,et),this.binderUniforms=p?p.getUniforms(n,et):[]}draw(n,u,p,_,T,M,O,R,V,q,K,W,ne,le,pe,ye,ge,xe,De){const be=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(_),n.setColorMode(T),n.setCullFace(M),R){n.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,R.depthTexture),n.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,R.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(R[ke])}if(V)for(const ke in V)this.projectionUniforms[xo[ke]].set(V[ke]);if(O)for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(O[ke]);ye&&ye.setUniforms(n,this.binderUniforms,le,{zoom:pe});let Ce=0;switch(u){case be.LINES:Ce=2;break;case be.TRIANGLES:Ce=3;break;case be.LINE_STRIP:Ce=1}for(const ke of ne.get()){const Se=ke.vaos||(ke.vaos={});(Se[q]||(Se[q]=new sh)).bind(n,this,K,ye?ye.getPaintVertexBuffers():[],W,ke.vertexOffset,ge,xe,De),be.drawElements(u,ke.primitiveLength*Ce,be.UNSIGNED_SHORT,ke.primitiveOffset*Ce*2)}}}function _m(w,n,u){const p=1/c.aN(u,1,n.transform.tileZoom),_=Math.pow(2,u.tileID.overscaledZ),T=u.tileSize*Math.pow(2,n.transform.tileZoom)/_,M=T*(u.tileID.canonical.x+u.tileID.wrap*_),O=T*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[M>>16,O>>16],u_pixel_coord_lower:[65535&M,65535&O]}}const Mf=(w,n,u,p)=>{const _=w.style.light,T=_.properties.get("position"),M=[T.x,T.y,T.z],O=c.c4();_.properties.get("anchor")==="viewport"&&c.c5(O,w.transform.bearingInRadians),c.c6(M,M,O);const R=w.transform.transformLightDirection(M),V=_.properties.get("color");return{u_lightpos:M,u_lightpos_globe:R,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[V.r,V.g,V.b],u_vertical_gradient:+n,u_opacity:u,u_fill_translate:p}},Pf=(w,n,u,p,_,T,M)=>c.e(Mf(w,n,u,p),_m(T,w,M),{u_height_factor:-Math.pow(2,_.overscaledZ)/M.tileSize/8}),ec=(w,n,u,p)=>c.e(_m(n,w,u),{u_fill_translate:p}),iu=(w,n)=>({u_world:w,u_fill_translate:n}),bm=(w,n,u,p,_)=>c.e(ec(w,n,u,_),{u_world:p}),lh=(w,n,u,p,_)=>{const T=w.transform;let M,O,R=0;if(u.paint.get("circle-pitch-alignment")==="map"){const V=c.aN(n,1,T.zoom);M=!0,O=[V,V],R=V/(c.a5*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*_}else M=!1,O=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+M,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:R,u_translate:p}},hl=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),jd=w=>({u_viewport_size:[w.width,w.height]}),ch=(w,n=1)=>({u_color:w,u_overlay:0,u_overlay_scale:n}),fl=(w,n,u,p)=>{const _=c.aN(w,1,n)/(c.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:c.aN(w,1,n),u_intensity:u,u_globe_extrude_scale:_}},Nd=(w,n,u,p)=>{const _=c.N();c.c7(_,0,w.width,w.height,0,0,1);const T=w.context.gl;return{u_matrix:_,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:n.paint.get("heatmap-opacity")}},uh=(w,n,u)=>{const p=u.paint.get("hillshade-accent-color");let _;switch(u.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const T=u.getIlluminationProperties();for(let M=0;M<T.directionRadians.length;M++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[M]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:xy(0,n.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:p,u_method:_,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},xm=(w,n)=>{const u=n.stride,p=c.N();return c.c7(p,0,c.a5,-c.a5,0,0,1),c.O(p,p,[0,-c.a5,0]),{u_matrix:p,u_image:1,u_dimension:[u,u],u_zoom:w.overscaledZ,u_unpack:n.getUnpackVector()}};function xy(w,n){const u=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new c.a9(0,p/u).toLngLat().lat,new c.a9(0,(p+1)/u).toLngLat().lat]}const wm=(w,n,u=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:w.paint.get("color-relief-opacity")}),hh=(w,n,u,p)=>{const _=w.transform;return{u_translation:fh(w,n,u),u_ratio:p/c.aN(n,1,_.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Sm=(w,n,u,p,_)=>c.e(hh(w,n,u,p),{u_image:0,u_image_height:_}),Fd=(w,n,u,p,_)=>{const T=w.transform,M=Ka(n,T);return{u_translation:fh(w,n,u),u_texsize:n.imageAtlasTexture.size,u_ratio:p/c.aN(n,1,T.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[M,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Wi=(w,n,u,p,_)=>{const T=Ka(n,w.transform);return c.e(hh(w,n,u,p),{u_tileratio:T,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},dl=(w,n,u,p,_,T)=>{const M=Ka(n,w.transform);return c.e(hh(w,n,u,p),{u_image:0,u_image_height:T,u_tileratio:M,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image_dash:1,u_mix:_.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function Ka(w,n){return 1/c.aN(w,1,n.tileZoom)}function fh(w,n,u){return c.aO(w.transform,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Cf=(w,n,u,p,_)=>{return{u_tl_parent:w,u_scale_parent:n,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(M=p.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(T=p.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Df(p.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var T,M};function Df(w){w*=Math.PI/180;const n=Math.sin(w),u=Math.cos(w);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const dh=(w,n,u,p,_,T,M,O,R,V,q,K,W)=>{const ne=M.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pitch:ne.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ne.width/ne.height,u_fade_change:M.options.fadeDuration?M.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:R,u_is_text:+q,u_pitch_with_map:+p,u_is_along_line:_,u_is_variable_anchor:T,u_texsize:K,u_texture:0,u_translation:V,u_pitched_scale:W}},If=(w,n,u,p,_,T,M,O,R,V,q,K,W,ne)=>{const le=M.transform;return c.e(dh(w,n,u,p,_,T,M,O,R,V,q,K,ne),{u_gamma_scale:p?Math.cos(le.pitch*Math.PI/180)*le.cameraToCenterDistance:1,u_device_pixel_ratio:M.pixelRatio,u_is_halo:1})},Qa=(w,n,u,p,_,T,M,O,R,V,q,K,W)=>c.e(If(w,n,u,p,_,T,M,O,R,V,!0,q,0,W),{u_texsize_icon:K,u_texture_icon:1}),ph=(w,n)=>({u_opacity:w,u_color:n}),mh=(w,n,u,p,_)=>c.e((function(T,M,O,R){const V=O.imageManager.getPattern(T.from.toString()),q=O.imageManager.getPattern(T.to.toString()),{width:K,height:W}=O.imageManager.getPixelSize(),ne=Math.pow(2,R.tileID.overscaledZ),le=R.tileSize*Math.pow(2,O.transform.tileZoom)/ne,pe=le*(R.tileID.canonical.x+R.tileID.wrap*ne),ye=le*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[K,W],u_mix:M.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:M.fromScale,u_scale_b:M.toScale,u_tile_units_to_pixels:1/c.aN(R,1,O.transform.tileZoom),u_pixel_coord_upper:[pe>>16,ye>>16],u_pixel_coord_lower:[65535&pe,65535&ye]}})(u,_,n,p),{u_opacity:w}),Of=(w,n)=>{},Tm={fillExtrusion:(w,n)=>({u_lightpos:new c.c2(w,n.u_lightpos),u_lightpos_globe:new c.c2(w,n.u_lightpos_globe),u_lightintensity:new c.bq(w,n.u_lightintensity),u_lightcolor:new c.c2(w,n.u_lightcolor),u_vertical_gradient:new c.bq(w,n.u_vertical_gradient),u_opacity:new c.bq(w,n.u_opacity),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillExtrusionPattern:(w,n)=>({u_lightpos:new c.c2(w,n.u_lightpos),u_lightpos_globe:new c.c2(w,n.u_lightpos_globe),u_lightintensity:new c.bq(w,n.u_lightintensity),u_lightcolor:new c.c2(w,n.u_lightcolor),u_vertical_gradient:new c.bq(w,n.u_vertical_gradient),u_height_factor:new c.bq(w,n.u_height_factor),u_opacity:new c.bq(w,n.u_opacity),u_fill_translate:new c.c3(w,n.u_fill_translate),u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade)}),fill:(w,n)=>({u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillPattern:(w,n)=>({u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillOutline:(w,n)=>({u_world:new c.c3(w,n.u_world),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillOutlinePattern:(w,n)=>({u_world:new c.c3(w,n.u_world),u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade),u_fill_translate:new c.c3(w,n.u_fill_translate)}),circle:(w,n)=>({u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_scale_with_map:new c.b_(w,n.u_scale_with_map),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_extrude_scale:new c.c3(w,n.u_extrude_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_globe_extrude_scale:new c.bq(w,n.u_globe_extrude_scale),u_translate:new c.c3(w,n.u_translate)}),collisionBox:(w,n)=>({u_pixel_extrude_scale:new c.c3(w,n.u_pixel_extrude_scale)}),collisionCircle:(w,n)=>({u_viewport_size:new c.c3(w,n.u_viewport_size)}),debug:(w,n)=>({u_color:new c.b$(w,n.u_color),u_overlay:new c.b_(w,n.u_overlay),u_overlay_scale:new c.bq(w,n.u_overlay_scale)}),depth:Of,clippingMask:Of,heatmap:(w,n)=>({u_extrude_scale:new c.bq(w,n.u_extrude_scale),u_intensity:new c.bq(w,n.u_intensity),u_globe_extrude_scale:new c.bq(w,n.u_globe_extrude_scale)}),heatmapTexture:(w,n)=>({u_matrix:new c.c0(w,n.u_matrix),u_world:new c.c3(w,n.u_world),u_image:new c.b_(w,n.u_image),u_color_ramp:new c.b_(w,n.u_color_ramp),u_opacity:new c.bq(w,n.u_opacity)}),hillshade:(w,n)=>({u_image:new c.b_(w,n.u_image),u_latrange:new c.c3(w,n.u_latrange),u_exaggeration:new c.bq(w,n.u_exaggeration),u_altitudes:new c.c9(w,n.u_altitudes),u_azimuths:new c.c9(w,n.u_azimuths),u_accent:new c.b$(w,n.u_accent),u_method:new c.b_(w,n.u_method),u_shadows:new c.c8(w,n.u_shadows),u_highlights:new c.c8(w,n.u_highlights)}),hillshadePrepare:(w,n)=>({u_matrix:new c.c0(w,n.u_matrix),u_image:new c.b_(w,n.u_image),u_dimension:new c.c3(w,n.u_dimension),u_zoom:new c.bq(w,n.u_zoom),u_unpack:new c.c1(w,n.u_unpack)}),colorRelief:(w,n)=>({u_image:new c.b_(w,n.u_image),u_unpack:new c.c1(w,n.u_unpack),u_dimension:new c.c3(w,n.u_dimension),u_elevation_stops:new c.b_(w,n.u_elevation_stops),u_color_stops:new c.b_(w,n.u_color_stops),u_color_ramp_size:new c.b_(w,n.u_color_ramp_size),u_opacity:new c.bq(w,n.u_opacity)}),line:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels)}),lineGradient:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_image_height:new c.bq(w,n.u_image_height)}),linePattern:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_texsize:new c.c3(w,n.u_texsize),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_image:new c.b_(w,n.u_image),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade)}),lineSDF:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_mix:new c.bq(w,n.u_mix),u_tileratio:new c.bq(w,n.u_tileratio),u_crossfade_from:new c.bq(w,n.u_crossfade_from),u_crossfade_to:new c.bq(w,n.u_crossfade_to),u_lineatlas_width:new c.bq(w,n.u_lineatlas_width),u_lineatlas_height:new c.bq(w,n.u_lineatlas_height)}),lineGradientSDF:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_image_height:new c.bq(w,n.u_image_height),u_tileratio:new c.bq(w,n.u_tileratio),u_crossfade_from:new c.bq(w,n.u_crossfade_from),u_crossfade_to:new c.bq(w,n.u_crossfade_to),u_image_dash:new c.b_(w,n.u_image_dash),u_mix:new c.bq(w,n.u_mix),u_lineatlas_width:new c.bq(w,n.u_lineatlas_width),u_lineatlas_height:new c.bq(w,n.u_lineatlas_height)}),raster:(w,n)=>({u_tl_parent:new c.c3(w,n.u_tl_parent),u_scale_parent:new c.bq(w,n.u_scale_parent),u_buffer_scale:new c.bq(w,n.u_buffer_scale),u_fade_t:new c.bq(w,n.u_fade_t),u_opacity:new c.bq(w,n.u_opacity),u_image0:new c.b_(w,n.u_image0),u_image1:new c.b_(w,n.u_image1),u_brightness_low:new c.bq(w,n.u_brightness_low),u_brightness_high:new c.bq(w,n.u_brightness_high),u_saturation_factor:new c.bq(w,n.u_saturation_factor),u_contrast_factor:new c.bq(w,n.u_contrast_factor),u_spin_weights:new c.c2(w,n.u_spin_weights),u_coords_top:new c.c1(w,n.u_coords_top),u_coords_bottom:new c.c1(w,n.u_coords_bottom)}),symbolIcon:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texture:new c.b_(w,n.u_texture),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),symbolSDF:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texture:new c.b_(w,n.u_texture),u_gamma_scale:new c.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_is_halo:new c.b_(w,n.u_is_halo),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),symbolTextAndIcon:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texsize_icon:new c.c3(w,n.u_texsize_icon),u_texture:new c.b_(w,n.u_texture),u_texture_icon:new c.b_(w,n.u_texture_icon),u_gamma_scale:new c.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_is_halo:new c.b_(w,n.u_is_halo),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),background:(w,n)=>({u_opacity:new c.bq(w,n.u_opacity),u_color:new c.b$(w,n.u_color)}),backgroundPattern:(w,n)=>({u_opacity:new c.bq(w,n.u_opacity),u_image:new c.b_(w,n.u_image),u_pattern_tl_a:new c.c3(w,n.u_pattern_tl_a),u_pattern_br_a:new c.c3(w,n.u_pattern_br_a),u_pattern_tl_b:new c.c3(w,n.u_pattern_tl_b),u_pattern_br_b:new c.c3(w,n.u_pattern_br_b),u_texsize:new c.c3(w,n.u_texsize),u_mix:new c.bq(w,n.u_mix),u_pattern_size_a:new c.c3(w,n.u_pattern_size_a),u_pattern_size_b:new c.c3(w,n.u_pattern_size_b),u_scale_a:new c.bq(w,n.u_scale_a),u_scale_b:new c.bq(w,n.u_scale_b),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bq(w,n.u_tile_units_to_pixels)}),terrain:(w,n)=>({u_texture:new c.b_(w,n.u_texture),u_ele_delta:new c.bq(w,n.u_ele_delta),u_fog_matrix:new c.c0(w,n.u_fog_matrix),u_fog_color:new c.b$(w,n.u_fog_color),u_fog_ground_blend:new c.bq(w,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bq(w,n.u_fog_ground_blend_opacity),u_horizon_color:new c.b$(w,n.u_horizon_color),u_horizon_fog_blend:new c.bq(w,n.u_horizon_fog_blend),u_is_globe_mode:new c.bq(w,n.u_is_globe_mode)}),terrainDepth:(w,n)=>({u_ele_delta:new c.bq(w,n.u_ele_delta)}),terrainCoords:(w,n)=>({u_texture:new c.b_(w,n.u_texture),u_terrain_coords_id:new c.bq(w,n.u_terrain_coords_id),u_ele_delta:new c.bq(w,n.u_ele_delta)}),projectionErrorMeasurement:(w,n)=>({u_input:new c.bq(w,n.u_input),u_output_expected:new c.bq(w,n.u_output_expected)}),atmosphere:(w,n)=>({u_sun_pos:new c.c2(w,n.u_sun_pos),u_atmosphere_blend:new c.bq(w,n.u_atmosphere_blend),u_globe_position:new c.c2(w,n.u_globe_position),u_globe_radius:new c.bq(w,n.u_globe_radius),u_inv_proj_matrix:new c.c0(w,n.u_inv_proj_matrix)}),sky:(w,n)=>({u_sky_color:new c.b$(w,n.u_sky_color),u_horizon_color:new c.b$(w,n.u_horizon_color),u_horizon:new c.c3(w,n.u_horizon),u_horizon_normal:new c.c3(w,n.u_horizon_normal),u_sky_horizon_blend:new c.bq(w,n.u_sky_horizon_blend),u_sky_blend:new c.bq(w,n.u_sky_blend)})};class tc{constructor(n,u,p){this.context=n;const _=n.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const rc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ud{constructor(n,u,p,_){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=_,this.context=n;const T=n.gl;this.buffer=T.createBuffer(),n.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let p=0;p<this.attributes.length;p++){const _=u.attributes[this.attributes[p].name];_!==void 0&&n.enableVertexAttribArray(_)}}setVertexAttribPointers(n,u,p){for(let _=0;_<this.attributes.length;_++){const T=this.attributes[_],M=u.attributes[T.name];M!==void 0&&n.vertexAttribPointer(M,T.components,n[rc[T.type]],!1,this.itemSize,T.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zr{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Xo extends zr{getDefault(){return c.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class gh extends zr{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class yh extends zr{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class zf extends zr{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class nc extends zr{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class vh extends zr{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class au extends zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Sa extends zr{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Vd extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class kf extends zr{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ta extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class Wo extends zr{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Ui extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class As extends zr{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class ic extends zr{getDefault(){return c.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class ac extends zr{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class _h extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class pl extends zr{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Ja extends zr{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Gd extends zr{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class ou extends zr{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class pr extends zr{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Rf extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Ea extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Lf extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Aa extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Em extends zr{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Bf extends zr{getDefault(){return null}set(n){var u;if(n===this.current&&!this.dirty)return;const p=this.gl;Wa(p)?p.bindVertexArray(n):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class ml extends zr{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class qd extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class jf extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class gl extends zr{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class su extends gl{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Vi extends gl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class yl extends gl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const vl="Framebuffer is not complete";class oc{constructor(n,u,p,_,T){this.context=n,this.width=u,this.height=p;const M=n.gl,O=this.framebuffer=M.createFramebuffer();if(this.colorAttachment=new su(n,O),_)this.depthAttachment=T?new yl(n,O):new Vi(n,O);else if(T)throw new Error("Stencil cannot be set without depth");if(M.checkFramebufferStatus(M.FRAMEBUFFER)!==M.FRAMEBUFFER_COMPLETE)throw new Error(vl)}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class _l{constructor(n){var u,p;if(this.gl=n,this.clearColor=new Xo(this),this.clearDepth=new gh(this),this.clearStencil=new yh(this),this.colorMask=new zf(this),this.depthMask=new nc(this),this.stencilMask=new vh(this),this.stencilFunc=new au(this),this.stencilOp=new Sa(this),this.stencilTest=new Vd(this),this.depthRange=new kf(this),this.depthTest=new Ta(this),this.depthFunc=new Wo(this),this.blend=new Ui(this),this.blendFunc=new As(this),this.blendColor=new ic(this),this.blendEquation=new ac(this),this.cullFace=new _h(this),this.cullFaceSide=new pl(this),this.frontFace=new Ja(this),this.program=new Gd(this),this.activeTexture=new ou(this),this.viewport=new pr(this),this.bindFramebuffer=new Rf(this),this.bindRenderbuffer=new Ea(this),this.bindTexture=new Lf(this),this.bindVertexBuffer=new Aa(this),this.bindElementBuffer=new Em(this),this.bindVertexArray=new Bf(this),this.pixelStoreUnpack=new ml(this),this.pixelStoreUnpackPremultiplyAlpha=new qd(this),this.pixelStoreUnpackFlipY=new jf(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Wa(n)){this.HALF_FLOAT=n.HALF_FLOAT;const _=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=n.RGBA16F)!==null&&u!==void 0?u:_?.RGBA16F_EXT,this.RGB16F=(p=n.RGB16F)!==null&&p!==void 0?p:_?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const _=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new tc(this,n,u)}createVertexBuffer(n,u,p){return new Ud(this,n,u,p)}createRenderbuffer(n,u,p){const _=this.gl,T=_.createRenderbuffer();return this.bindRenderbuffer.set(T),_.renderbufferStorage(_.RENDERBUFFER,n,u,p),this.bindRenderbuffer.set(null),T}createFramebuffer(n,u,p,_){return new oc(this,n,u,p,_)}clear({color:n,depth:u,stencil:p}){const _=this.gl;let T=0;n&&(T|=_.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(T|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(T|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),_.clear(T)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.bR(n.blendFunction,$r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Wa(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var u;return Wa(this.gl)?this.gl.deleteVertexArray(n):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let oi;function ui(w,n,u,p,_){const T=w.context,M=w.transform,O=T.gl,R=w.useProgram("collisionBox"),V=[];let q=0,K=0;for(let ge=0;ge<p.length;ge++){const xe=p[ge],De=n.getTile(xe).getBucket(u);if(!De)continue;const be=_?De.textCollisionBox:De.iconCollisionBox,Ce=De.collisionCircleArray;Ce.length>0&&(V.push({circleArray:Ce,circleOffset:K,coord:xe}),q+=Ce.length/4,K=q),be&&R.draw(T,O.LINES,fr.disabled,Mr.disabled,w.colorModeForRenderPass(),xr.disabled,hl(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(xe),M.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,w.transform.zoom,null,null,be.collisionVertexBuffer)}if(!_||!V.length)return;const W=w.useProgram("collisionCircle"),ne=new c.ca;ne.resize(4*q),ne._trim();let le=0;for(const ge of V)for(let xe=0;xe<ge.circleArray.length/4;xe++){const De=4*xe,be=ge.circleArray[De+0],Ce=ge.circleArray[De+1],ke=ge.circleArray[De+2],Se=ge.circleArray[De+3];ne.emplace(le++,be,Ce,ke,Se,0),ne.emplace(le++,be,Ce,ke,Se,1),ne.emplace(le++,be,Ce,ke,Se,2),ne.emplace(le++,be,Ce,ke,Se,3)}(!oi||oi.length<2*q)&&(oi=(function(ge){const xe=2*ge,De=new c.cc;De.resize(xe),De._trim();for(let be=0;be<xe;be++){const Ce=6*be;De.uint16[Ce+0]=4*be+0,De.uint16[Ce+1]=4*be+1,De.uint16[Ce+2]=4*be+2,De.uint16[Ce+3]=4*be+2,De.uint16[Ce+4]=4*be+3,De.uint16[Ce+5]=4*be+0}return De})(q));const pe=T.createIndexBuffer(oi,!0),ye=T.createVertexBuffer(ne,c.cb.members,!0);for(const ge of V){const xe=jd(w.transform);W.draw(T,O.TRIANGLES,fr.disabled,Mr.disabled,w.colorModeForRenderPass(),xr.disabled,xe,w.style.map.terrain&&w.style.map.terrain.getTerrainData(ge.coord),null,u.id,ye,pe,c.aX.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,w.transform.zoom,null,null,null)}ye.destroy(),pe.destroy()}const Ko=c.ar(new Float32Array(16));function Qo(w,n,u,p,_,T){const{horizontalAlign:M,verticalAlign:O}=c.aS(w);return new c.P((-(M-.5)*n/_+p[0])*T,(-(O-.5)*u/_+p[1])*T)}function Ki(w,n,u,p,_,T){const M=n.tileAnchorPoint.add(new c.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let O=p.mult(T);u||(O=O.rotate(-_));const R=M.add(O);return hr(R.x,R.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(u){const O=Ar(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(w),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return w.add(p.rotate(R))}return w.add(p)}function Ms(w,n,u,p,_,T,M,O,R,V,q,K){const W=w.text.placedSymbolArray,ne=w.text.dynamicLayoutVertexArray,le=w.icon.dynamicLayoutVertexArray,pe={};ne.clear();for(let ye=0;ye<W.length;ye++){const ge=W.get(ye),xe=ge.hidden||!ge.crossTileID||w.allowVerticalPlacement&&!ge.placedOrientation?null:p[ge.crossTileID];if(xe){const De=new c.P(ge.anchorX,ge.anchorY),be={getElevation:K,width:_.width,height:_.height,pitchedLabelPlaneMatrix:T,pitchWithMap:u,transform:_,tileAnchorPoint:De,translation:V,unwrappedTileID:q},Ce=u?Hc(De.x,De.y,be):Ar(De.x,De.y,be),ke=$l(_.cameraToCenterDistance,Ce.signedDistanceFromCamera);let Se=c.aA(w.textSizeData,O,ge)*ke/c.aM;u&&(Se*=w.tilePixelRatio/M);const{width:je,height:et,anchor:Xe,textOffset:Qe,textBoxScale:Je}=xe,Ct=Qo(Xe,je,et,Qe,Je,Se),Dt=_.getPitchedTextCorrection(De.x+V[0],De.y+V[1],q),vt=Ki(Ce.point,be,n,Ct,-_.bearingInRadians,Dt),kt=w.allowVerticalPlacement&&ge.placedOrientation===c.az.vertical?Math.PI/2:0;for(let sr=0;sr<ge.numGlyphs;sr++)c.aG(ne,vt,kt);R&&ge.associatedIconIndex>=0&&(pe[ge.associatedIconIndex]={shiftedAnchor:vt,angle:kt})}else Zo(ge.numGlyphs,ne)}if(R){le.clear();const ye=w.icon.placedSymbolArray;for(let ge=0;ge<ye.length;ge++){const xe=ye.get(ge);if(xe.hidden)Zo(xe.numGlyphs,le);else{const De=pe[ge];if(De)for(let be=0;be<xe.numGlyphs;be++)c.aG(le,De.shiftedAnchor,De.angle);else Zo(xe.numGlyphs,le)}}w.icon.dynamicLayoutVertexBuffer.updateData(le)}w.text.dynamicLayoutVertexBuffer.updateData(ne)}function $d(w,n,u){return u.iconsInText&&n?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function sc(w,n,u,p,_,T,M,O,R,V,q,K,W){const ne=w.context,le=ne.gl,pe=w.transform,ye=O==="map",ge=R==="map",xe=O!=="viewport"&&u.layout.get("symbol-placement")!=="point",De=ye&&!ge&&!xe,be=!u.layout.get("symbol-sort-key").isConstant();let Ce=!1;const ke=w.getDepthModeForSublayer(0,fr.ReadOnly),Se=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),je=[],et=pe.getCircleRadiusCorrection();for(const Xe of p){const Qe=n.getTile(Xe),Je=Qe.getBucket(u);if(!Je)continue;const Ct=_?Je.text:Je.icon;if(!Ct||!Ct.segments.get().length||!Ct.hasVisibleVertices)continue;const Dt=Ct.programConfigurations.get(u.id),vt=_||Je.sdfIcons,kt=_?Je.textSizeData:Je.iconSizeData,sr=ge||pe.pitch!==0,jr=w.useProgram($d(vt,_,Je),Dt),nn=c.ay(kt,pe.zoom),Qr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Xe);let un,Zr,Tn,hn,fi=[0,0],zn=null;if(_)Zr=Qe.glyphAtlasTexture,Tn=le.LINEAR,un=Qe.glyphAtlasTexture.size,Je.iconsInText&&(fi=Qe.imageAtlasTexture.size,zn=Qe.imageAtlasTexture,hn=sr||w.options.rotating||w.options.zooming||kt.kind==="composite"||kt.kind==="camera"?le.LINEAR:le.NEAREST);else{const Gr=u.layout.get("icon-size").constantOr(0)!==1||Je.iconsNeedLinear;Zr=Qe.imageAtlasTexture,Tn=vt||w.options.rotating||w.options.zooming||Gr||sr?le.LINEAR:le.NEAREST,un=Qe.imageAtlasTexture.size}const kn=c.aN(Qe,1,w.transform.zoom),di=ba(ye,w.transform,kn),hs=c.N();c.aB(hs,di);const fs=xf(ge,ye,w.transform,kn),Po=c.aO(pe,Qe,T,M),ta=pe.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),gc=Se&&Je.hasTextData(),yu=u.layout.get("icon-text-fit")!=="none"&&gc&&Je.hasIconData();if(xe){const Gr=w.style.map.terrain?($n,Qn)=>w.style.map.terrain.getElevation(Xe,$n,Qn):null,Jr=u.layout.get("text-rotation-alignment")==="map";Ss(Je,w,_,di,hs,ge,V,Jr,Xe.toUnwrapped(),pe.width,pe.height,Po,Gr)}const Co=_&&Se||yu,ra=xe||Co?Ko:ge?di:w.transform.clipSpaceToPixelsMatrix,Ia=vt&&u.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ao;ao=vt?Je.iconsInText?Qa(kt.kind,nn,De,ge,xe,Co,w,ra,fs,Po,un,fi,et):If(kt.kind,nn,De,ge,xe,Co,w,ra,fs,Po,_,un,0,et):dh(kt.kind,nn,De,ge,xe,Co,w,ra,fs,Po,_,un,et);const oo={program:jr,buffers:Ct,uniformValues:ao,projectionData:ta,atlasTexture:Zr,atlasTextureIcon:zn,atlasInterpolation:Tn,atlasInterpolationIcon:hn,isSDF:vt,hasHalo:Ia};if(be&&Je.canOverlap){Ce=!0;const Gr=Ct.segments.get();for(const Jr of Gr)je.push({segments:new c.aX([Jr]),sortKey:Jr.sortKey,state:oo,terrainData:Qr})}else je.push({segments:Ct.segments,sortKey:0,state:oo,terrainData:Qr})}Ce&&je.sort(((Xe,Qe)=>Xe.sortKey-Qe.sortKey));for(const Xe of je){const Qe=Xe.state;if(ne.activeTexture.set(le.TEXTURE0),Qe.atlasTexture.bind(Qe.atlasInterpolation,le.CLAMP_TO_EDGE),Qe.atlasTextureIcon&&(ne.activeTexture.set(le.TEXTURE1),Qe.atlasTextureIcon&&Qe.atlasTextureIcon.bind(Qe.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),Qe.isSDF){const Je=Qe.uniformValues;Qe.hasHalo&&(Je.u_is_halo=1,lu(Qe.buffers,Xe.segments,u,w,Qe.program,ke,q,K,Je,Qe.projectionData,Xe.terrainData)),Je.u_is_halo=0}lu(Qe.buffers,Xe.segments,u,w,Qe.program,ke,q,K,Qe.uniformValues,Qe.projectionData,Xe.terrainData)}}function lu(w,n,u,p,_,T,M,O,R,V,q){const K=p.context;_.draw(K,K.gl.TRIANGLES,T,M,O,xr.backCCW,R,q,V,u.id,w.layoutVertexBuffer,w.indexBuffer,n,u.paint,p.transform.zoom,w.programConfigurations.get(u.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Zd(w,n,u,p,_){const T=w.context,M=T.gl,O=Mr.disabled,R=new $r([M.ONE,M.ONE],c.bp.transparent,[!0,!0,!0,!0]),V=n.getBucket(u);if(!V)return;const q=p.key;let K=u.heatmapFbos.get(q);K||(K=Kr(T,n.tileSize,n.tileSize),u.heatmapFbos.set(q,K)),T.bindFramebuffer.set(K.framebuffer),T.viewport.set([0,0,n.tileSize,n.tileSize]),T.clear({color:c.bp.transparent});const W=V.programConfigurations.get(u.id),ne=w.useProgram("heatmap",W,!_),le=w.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pe=w.style.map.terrain.getTerrainData(p);ne.draw(T,M.TRIANGLES,fr.disabled,O,R,xr.disabled,fl(n,w.transform.zoom,u.paint.get("heatmap-intensity"),1),pe,le,u.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,u.paint,w.transform.zoom,W)}function hi(w,n,u,p,_){const T=w.context,M=T.gl,O=w.transform;T.setColorMode(w.colorModeForRenderPass());const R=Sr(T,n),V=u.key,q=n.heatmapFbos.get(V);if(!q)return;T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,q.colorAttachment.get()),T.activeTexture.set(M.TEXTURE1),R.bind(M.LINEAR,M.CLAMP_TO_EDGE);const K=O.getProjectionData({overscaledTileID:u,applyTerrainMatrix:_,applyGlobeMatrix:!p});w.useProgram("heatmapTexture").draw(T,M.TRIANGLES,fr.disabled,Mr.disabled,w.colorModeForRenderPass(),xr.disabled,Nd(w,n,0,1),null,K,n.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,n.paint,O.zoom),q.destroy(),n.heatmapFbos.delete(V)}function Kr(w,n,u){var p,_;const T=w.gl,M=T.createTexture();T.bindTexture(T.TEXTURE_2D,M),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const O=(p=w.HALF_FLOAT)!==null&&p!==void 0?p:T.UNSIGNED_BYTE,R=(_=w.RGBA16F)!==null&&_!==void 0?_:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,R,n,u,0,T.RGBA,O,null);const V=w.createFramebuffer(n,u,!1,!1);return V.colorAttachment.set(M),V}function Sr(w,n){return n.colorRampTexture||(n.colorRampTexture=new c.T(w,n.colorRamp,w.gl.RGBA)),n.colorRampTexture}function Ps(w,n,u,p,_,T,M,O){let R=256;if(_.stepInterpolant){const V=n.getSource().maxzoom,q=M.canonical.z===V?Math.ceil(1<<w.transform.maxZoom-M.canonical.z):1;R=c.an(c.ce(T.maxLineLength/c.a5*1024*q),256,u.maxTextureSize)}return O.gradient=c.cf({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:O.gradient||void 0,clips:T.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new c.T(u,O.gradient,p.RGBA),O.version=_.gradientVersion,O.texture}function Ma(w,n,u,p,_){w.activeTexture.set(n.TEXTURE0),u.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),p.updatePaintBuffers(_)}function wn(w,n,u,p,_,T){(_||w.lineAtlas.dirty)&&(n.activeTexture.set(u.TEXTURE0),w.lineAtlas.bind(n)),p.updatePaintBuffers(T)}function Qi(w,n,u,p,_,T,M){const O=T.gradients[_.id];let R=O.texture;_.gradientVersion!==O.version&&(R=Ps(w,n,u,p,_,T,M,O)),u.activeTexture.set(p.TEXTURE0),R.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE)}function Ji(w,n,u,p,_,T,M,O,R){const V=T.gradients[_.id];let q=V.texture;_.gradientVersion!==V.version&&(q=Ps(w,n,u,p,_,T,M,V)),u.activeTexture.set(p.TEXTURE0),q.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE),u.activeTexture.set(p.TEXTURE1),w.lineAtlas.bind(u),O.updatePaintBuffers(R)}function bh(w,n,u,p,_){if(!u||!p||!p.imageAtlas)return;const T=p.imageAtlas.patternPositions;let M=T[u.to.toString()],O=T[u.from.toString()];if(!M&&O&&(M=O),!O&&M&&(O=M),!M||!O){const R=_.getPaintProperty(n);M=T[R],O=T[R]}M&&O&&w.setConstantPatternPositions(M,O)}function Jo(w,n,u,p,_,T,M,O){const R=w.context.gl,V="fill-pattern",q=u.paint.get(V),K=q&&q.constantOr(1),W=u.getCrossfadeParameters();let ne,le,pe,ye,ge;const xe=w.transform,De=u.paint.get("fill-translate"),be=u.paint.get("fill-translate-anchor");M?(le=K&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=R.LINES):(le=K?"fillPattern":"fill",ne=R.TRIANGLES);const Ce=q.constantOr(null);for(const ke of p){const Se=n.getTile(ke);if(K&&!Se.patternsLoaded())continue;const je=Se.getBucket(u);if(!je)continue;const et=je.programConfigurations.get(u.id),Xe=w.useProgram(le,et),Qe=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ke);K&&(w.context.activeTexture.set(R.TEXTURE0),Se.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),et.updatePaintBuffers(W)),bh(et,V,Ce,Se,u);const Je=xe.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Ct=c.aO(xe,Se,De,be);if(M){ye=je.indexBuffer2,ge=je.segments2;const vt=[R.drawingBufferWidth,R.drawingBufferHeight];pe=le==="fillOutlinePattern"&&K?bm(w,W,Se,vt,Ct):iu(vt,Ct)}else ye=je.indexBuffer,ge=je.segments,pe=K?ec(w,W,Se,Ct):{u_fill_translate:Ct};const Dt=w.stencilModeForClipping(ke);Xe.draw(w.context,ne,_,Dt,T,xr.backCCW,pe,Qe,Je,u.id,je.layoutVertexBuffer,ye,ge,u.paint,w.transform.zoom,et)}}function es(w,n,u,p,_,T,M,O){const R=w.context,V=R.gl,q="fill-extrusion-pattern",K=u.paint.get(q),W=K.constantOr(1),ne=u.getCrossfadeParameters(),le=u.paint.get("fill-extrusion-opacity"),pe=K.constantOr(null),ye=w.transform;for(const ge of p){const xe=n.getTile(ge),De=xe.getBucket(u);if(!De)continue;const be=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ge),Ce=De.programConfigurations.get(u.id),ke=w.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Ce);W&&(w.context.activeTexture.set(V.TEXTURE0),xe.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),Ce.updatePaintBuffers(ne));const Se=ye.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!O,applyTerrainMatrix:!0});bh(Ce,q,pe,xe,u);const je=c.aO(ye,xe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),et=u.paint.get("fill-extrusion-vertical-gradient"),Xe=W?Pf(w,et,le,je,ge,ne,xe):Mf(w,et,le,je);ke.draw(R,R.gl.TRIANGLES,_,T,M,xr.backCCW,Xe,be,Se,u.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,u.paint,w.transform.zoom,Ce,w.style.map.terrain&&De.centroidVertexBuffer)}}function ts(w,n,u,p,_,T,M,O,R){var V;const q=w.style.projection,K=w.context,W=w.transform,ne=K.gl,le=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],pe=w.useProgram("hillshade",null,!1,le),ye=!w.options.moving;for(const ge of p){const xe=n.getTile(ge),De=xe.fbo;if(!De)continue;const be=q.getMeshFromTileID(K,ge.canonical,O,!0,"raster"),Ce=(V=w.style.map.terrain)===null||V===void 0?void 0:V.getTerrainData(ge);K.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_2D,De.colorAttachment.get());const ke=W.getProjectionData({overscaledTileID:ge,aligned:ye,applyGlobeMatrix:!R,applyTerrainMatrix:!0});pe.draw(K,ne.TRIANGLES,T,_[ge.overscaledZ],M,xr.backCCW,uh(w,xe,u),Ce,ke,u.id,be.vertexBuffer,be.indexBuffer,be.segments)}}function Cs(w,n,u,p,_,T,M,O,R){var V;const q=w.style.projection,K=w.context,W=w.transform,ne=K.gl,le=w.useProgram("colorRelief"),pe=!w.options.moving;let ye=!0,ge=0;for(const xe of p){const De=n.getTile(xe),be=De.dem;if(ye){const Xe=ne.getParameter(ne.MAX_TEXTURE_SIZE),{elevationTexture:Qe,colorTexture:Je}=u.getColorRampTextures(K,Xe,be.getUnpackVector());K.activeTexture.set(ne.TEXTURE1),Qe.bind(ne.NEAREST,ne.CLAMP_TO_EDGE),K.activeTexture.set(ne.TEXTURE4),Je.bind(ne.LINEAR,ne.CLAMP_TO_EDGE),ye=!1,ge=Qe.size[0]}if(!be||!be.data)continue;const Ce=be.stride,ke=be.getPixels();if(K.activeTexture.set(ne.TEXTURE0),K.pixelStoreUnpackPremultiplyAlpha.set(!1),De.demTexture=De.demTexture||w.getTileTexture(Ce),De.demTexture){const Xe=De.demTexture;Xe.update(ke,{premultiply:!1}),Xe.bind(ne.LINEAR,ne.CLAMP_TO_EDGE)}else De.demTexture=new c.T(K,ke,ne.RGBA,{premultiply:!1}),De.demTexture.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const Se=q.getMeshFromTileID(K,xe.canonical,O,!0,"raster"),je=(V=w.style.map.terrain)===null||V===void 0?void 0:V.getTerrainData(xe),et=W.getProjectionData({overscaledTileID:xe,aligned:pe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});le.draw(K,ne.TRIANGLES,T,_[xe.overscaledZ],M,xr.backCCW,wm(u,De.dem,ge),je,et,u.id,Se.vertexBuffer,Se.indexBuffer,Se.segments)}}const Ds=[new c.P(0,0),new c.P(c.a5,0),new c.P(c.a5,c.a5),new c.P(0,c.a5)];function eo(w,n,u,p,_,T,M,O,R=!1,V=!1){const q=p[p.length-1].overscaledZ,K=w.context,W=K.gl,ne=w.useProgram("raster"),le=w.transform,pe=w.style.projection,ye=w.colorModeForRenderPass(),ge=!w.options.moving,xe=u.paint.get("raster-opacity"),De=u.paint.get("raster-resampling"),be=u.paint.get("raster-fade-duration"),Ce=!!w.style.map.terrain;for(const ke of p){const Se=w.getDepthModeForSublayer(ke.overscaledZ-q,xe===1?fr.ReadWrite:fr.ReadOnly,W.LESS),je=n.getTile(ke),et=De==="nearest"?W.NEAREST:W.LINEAR;K.activeTexture.set(W.TEXTURE0),je.texture.bind(et,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),K.activeTexture.set(W.TEXTURE1);const{parentTile:Xe,parentScaleBy:Qe,parentTopLeft:Je,fadeValues:Ct}=rs(je,n,be,Ce);je.fadeOpacity=Ct.tileOpacity,Xe?(Xe.fadeOpacity=Ct.parentTileOpacity,Xe.texture.bind(et,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST)):je.texture.bind(et,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),je.texture.useMipmap&&K.extTextureFilterAnisotropic&&w.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Dt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ke),vt=le.getProjectionData({overscaledTileID:ke,aligned:ge,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),kt=Cf(Je,Qe,Ct.fadeMix,u,O),sr=pe.getMeshFromTileID(K,ke.canonical,T,M,"raster");ne.draw(K,W.TRIANGLES,Se,_?_[ke.overscaledZ]:Mr.disabled,ye,R?xr.frontCCW:xr.backCCW,kt,Dt,vt,u.id,sr.vertexBuffer,sr.indexBuffer,sr.segments)}}function rs(w,n,u,p){const _={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||p)return _;if(w.fadingParentID){const T=n.getLoadedTile(w.fadingParentID);if(!T)return _;const M=Math.pow(2,T.tileID.overscaledZ-w.tileID.overscaledZ),O=[w.tileID.canonical.x*M%1,w.tileID.canonical.y*M%1],R=(function(V,q,K){const W=H(),ne=(W-q.timeAdded)/K,le=V.fadingDirection===we.Incoming,pe=c.an((W-V.timeAdded)/K,0,1),ye=c.an(1-ne,0,1),ge=le?pe:ye;return{tileOpacity:ge,parentTileOpacity:le?ye:pe,fadeMix:{opacity:1,mix:1-ge}}})(w,T,u);return{parentTile:T,parentScaleBy:M,parentTopLeft:O,fadeValues:R}}if(w.selfFading){const T=(function(M,O){const R=(H()-M.timeAdded)/O,V=c.an(R,0,1);return{tileOpacity:V,fadeMix:{opacity:V,mix:0}}})(w,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return _}const Is=new c.bp(1,0,0,1),ns=new c.bp(0,1,0,1),Nf=new c.bp(0,0,1,1),Ff=new c.bp(1,0,1,1),Pa=new c.bp(0,1,1,1);function cu(w,n,u,p){qn(w,0,n+u/2,w.transform.width,u,p)}function Os(w,n,u,p){qn(w,n-u/2,0,u,w.transform.height,p)}function qn(w,n,u,p,_,T){const M=w.context,O=M.gl;O.enable(O.SCISSOR_TEST),O.scissor(n*w.pixelRatio,u*w.pixelRatio,p*w.pixelRatio,_*w.pixelRatio),M.clear({color:T}),O.disable(O.SCISSOR_TEST)}function xh(w,n,u){const p=w.context,_=p.gl,T=w.useProgram("debug"),M=fr.disabled,O=Mr.disabled,R=w.colorModeForRenderPass(),V="$debug",q=w.style.map.terrain&&w.style.map.terrain.getTerrainData(u);p.activeTexture.set(_.TEXTURE0);const K=n.getTileByID(u.key).latestRawTileData,W=Math.floor((K&&K.byteLength||0)/1024),ne=n.getTile(u).tileSize,le=512/Math.min(ne,512)*(u.overscaledZ/w.transform.zoom)*.5;let pe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(pe+=` => ${u.overscaledZ}`),(function(ge,xe){ge.initDebugOverlayCanvas();const De=ge.debugOverlayCanvas,be=ge.context.gl,Ce=ge.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,De.width,De.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(xe,5,5),Ce.strokeText(xe,5,5),ge.debugOverlayTexture.update(De),ge.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)})(w,`${pe} ${W}kB`);const ye=w.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(p,_.TRIANGLES,M,O,$r.alphaBlended,xr.disabled,ch(c.bp.transparent,le),null,ye,V,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),T.draw(p,_.LINE_STRIP,M,O,R,xr.disabled,ch(c.bp.red),q,ye,V,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Uf(w,n,u,p){const{isRenderingGlobe:_}=p,T=w.context,M=T.gl,O=w.transform,R=w.colorModeForRenderPass(),V=w.getDepthModeFor3D(),q=w.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,w.width,w.height]);for(const K of u){const W=n.getTerrainMesh(K.tileID),ne=w.renderToTexture.getTexture(K),le=n.getTerrainData(K.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,ne.texture);const pe=n.getMeshFrameDelta(O.zoom),ye=O.calculateFogMatrix(K.tileID.toUnwrapped()),ge=ym(pe,ye,w.style.sky,O.pitch,_),xe=O.getProjectionData({overscaledTileID:K.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(T,M.TRIANGLES,V,Mr.disabled,R,xr.backCCW,ge,le,xe,"terrain",W.vertexBuffer,W.indexBuffer,W.segments)}}function Hd(w,n){if(!n.mesh){const u=new c.aW;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const p=new c.aY;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),n.mesh=new Wr(w.createVertexBuffer(u,Xa.members),w.createIndexBuffer(p),c.aX.simpleSegment(0,0,u.length,p.length))}return n.mesh}class Am{constructor(n,u){this.context=new _l(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ur.maxOverzooming+Ur.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ii}resize(n,u,p){if(this.width=Math.floor(n*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const n=this.context,u=new c.aW;u.emplaceBack(0,0),u.emplaceBack(c.a5,0),u.emplaceBack(0,c.a5),u.emplaceBack(c.a5,c.a5),this.tileExtentBuffer=n.createVertexBuffer(u,Xa.members),this.tileExtentSegments=c.aX.simpleSegment(0,0,4,2);const p=new c.aW;p.emplaceBack(0,0),p.emplaceBack(c.a5,0),p.emplaceBack(0,c.a5),p.emplaceBack(c.a5,c.a5),this.debugBuffer=n.createVertexBuffer(p,Xa.members),this.debugSegments=c.aX.simpleSegment(0,0,4,5);const _=new c.ch;_.emplaceBack(0,0,0,0),_.emplaceBack(c.a5,0,c.a5,0),_.emplaceBack(0,c.a5,0,c.a5),_.emplaceBack(c.a5,c.a5,c.a5,c.a5),this.rasterBoundsBuffer=n.createVertexBuffer(_,gm.members),this.rasterBoundsSegments=c.aX.simpleSegment(0,0,4,2);const T=new c.aW;T.emplaceBack(0,0),T.emplaceBack(c.a5,0),T.emplaceBack(0,c.a5),T.emplaceBack(c.a5,c.a5),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(T,Xa.members),this.rasterBoundsSegmentsPosOnly=c.aX.simpleSegment(0,0,4,5);const M=new c.aW;M.emplaceBack(0,0),M.emplaceBack(1,0),M.emplaceBack(0,1),M.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(M,Xa.members),this.viewportSegments=c.aX.simpleSegment(0,0,4,2);const O=new c.ci;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(O);const R=new c.aY;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(R);const V=this.context.gl;this.stencilClearMode=new Mr({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO),this.tileExtentMesh=new Wr(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=c.N();c.c7(p,0,this.width,this.height,0,0,1),c.Q(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const _={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(n,u.TRIANGLES,fr.disabled,this.stencilClearMode,$r.disabled,xr.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u,p){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source,this.nextStencilID+u.length>256&&this.clearStencil();const _=this.context;_.setColorMode($r.disabled),_.setDepthMode(fr.disabled);const T={};for(const M of u)T[M.key]=this.nextStencilID++;this._renderTileMasks(T,u,p,!0),this._renderTileMasks(T,u,p,!1),this._tileClippingMaskIDs=T}_renderTileMasks(n,u,p,_){const T=this.context,M=T.gl,O=this.style.projection,R=this.transform,V=this.useProgram("clippingMask");for(const q of u){const K=n[q.key],W=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),ne=O.getMeshFromTileID(this.context,q.canonical,_,!0,"stencil"),le=R.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!p,applyTerrainMatrix:!0});V.draw(T,M.TRIANGLES,fr.disabled,new Mr({func:M.ALWAYS,mask:0},K,255,M.KEEP,M.KEEP,M.REPLACE),$r.disabled,p?xr.disabled:xr.backCCW,null,W,le,"$clipping",ne.vertexBuffer,ne.indexBuffer,ne.segments)}}_renderTilesDepthBuffer(){const n=this.context,u=n.gl,p=this.style.projection,_=this.transform,T=this.useProgram("depth"),M=this.getDepthModeFor3D(),O=fn(_,{tileSize:_.tileSize});for(const R of O){const V=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),q=p.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),K=_.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(n,u.TRIANGLES,M,Mr.disabled,$r.disabled,xr.backCCW,null,V,K,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new Mr({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new Mr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const u=this.context.gl,p=n.sort(((M,O)=>O.overscaledZ-M.overscaledZ)),_=p[p.length-1].overscaledZ,T=p[0].overscaledZ-_+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const M={};for(let O=0;O<T;O++)M[O+_]=new Mr({func:u.GEQUAL,mask:255},O+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=T,[M,p]}return[{[_]:Mr.disabled},p]}stencilConfigForOverlapTwoPass(n){const u=this.context.gl,p=n.sort(((M,O)=>O.overscaledZ-M.overscaledZ)),_=p[p.length-1].overscaledZ,T=p[0].overscaledZ-_+1;if(this.clearStencil(),T>1){const M={},O={};for(let R=0;R<T;R++)M[R+_]=new Mr({func:u.GREATER,mask:255},T+1+R,255,u.KEEP,u.KEEP,u.REPLACE),O[R+_]=new Mr({func:u.GREATER,mask:255},1+R,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*T+1,[M,O,p]}return this.nextStencilID=3,[{[_]:new Mr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[_]:new Mr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new $r([n.CONSTANT_COLOR,n.ONE],new c.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$r.unblended:$r.alphaBlended}getDepthModeForSublayer(n,u,p){if(!this.opaquePassEnabledForLayer())return fr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new fr(p||this.context.gl.LEQUAL,u,[_,_])}getDepthModeFor3D(){return new fr(this.context.gl.LEQUAL,fr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){var p,_;this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(H()),this.imageManager.beginFrame();const T=this.style._order,M=this.style.tileManagers,O={},R={},V={},q={isRenderingToTexture:!1,isRenderingGlobe:((p=n.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const W in M){const ne=M[W];ne.used&&ne.prepare(this.context),O[W]=ne.getVisibleCoordinates(!1),R[W]=O[W].slice().reverse(),V[W]=ne.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<T.length;W++)if(this.style._layers[T[W]].is3D()){this.opaquePassCutoff=W;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const W of T){const ne=this.style._layers[W];if(!ne.hasOffscreenPass()||ne.isHidden(this.transform.zoom))continue;const le=R[ne.source];(ne.type==="custom"||le.length)&&this.renderLayer(this,M[ne.source],ne,le,q)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:W=>this.useProgram(W)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.bp.black:c.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(W,ne){const le=W.context,pe=le.gl,ye=((ke,Se,je)=>{const et=Math.cos(Se.rollInRadians),Xe=Math.sin(Se.rollInRadians),Qe=_t(Se),Je=Se.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ke.properties.get("sky-color"),u_horizon_color:ke.properties.get("horizon-color"),u_horizon:[(Se.width/2-Qe*Xe)*je,(Se.height/2+Qe*et)*je],u_horizon_normal:[-Xe,et],u_sky_horizon_blend:ke.properties.get("sky-horizon-blend")*Se.height/2*je,u_sky_blend:Je}})(ne,W.style.map.transform,W.pixelRatio),ge=new fr(pe.LEQUAL,fr.ReadWrite,[0,1]),xe=Mr.disabled,De=W.colorModeForRenderPass(),be=W.useProgram("sky"),Ce=Hd(le,ne);be.draw(le,pe.TRIANGLES,ge,xe,De,xr.disabled,ye,null,void 0,"sky",Ce.vertexBuffer,Ce.indexBuffer,Ce.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[T[this.currentLayer]],ne=M[W.source],le=O[W.source];this._renderTileClippingMasks(W,le,!1),this.renderLayer(this,ne,W,le,q)}this.renderPass="translucent";let K=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const W=this.style._layers[T[this.currentLayer]],ne=M[W.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(W,q))continue;this.opaquePassEnabledForLayer()||K||(K=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const le=(W.type==="symbol"?V:R)[W.source];this._renderTileClippingMasks(W,O[W.source],!!this.renderToTexture),this.renderLayer(this,ne,W,le,q)}if(q.isRenderingGlobe&&(function(W,ne,le){const pe=W.context,ye=pe.gl,ge=W.useProgram("atmosphere"),xe=new fr(ye.LEQUAL,fr.ReadOnly,[0,1]),De=W.transform,be=(function(Je,Ct){const Dt=Je.properties.get("position"),vt=[-Dt.x,-Dt.y,-Dt.z],kt=c.ar(new Float64Array(16));return Je.properties.get("anchor")==="map"&&(c.bg(kt,kt,Ct.rollInRadians),c.bh(kt,kt,-Ct.pitchInRadians),c.bg(kt,kt,Ct.bearingInRadians),c.bh(kt,kt,Ct.center.lat*Math.PI/180),c.bJ(kt,kt,-Ct.center.lng*Math.PI/180)),c.cg(vt,vt,kt),vt})(le,W.transform),Ce=De.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ke=ne.properties.get("atmosphere-blend")*Ce.projectionTransition;if(ke===0)return;const Se=Jl(De.worldSize,De.center.lat),je=De.inverseProjectionMatrix,et=new Float64Array(4);et[3]=1,c.aH(et,et,De.modelViewProjectionMatrix),et[0]/=et[3],et[1]/=et[3],et[2]/=et[3],et[3]=1,c.aH(et,et,je),et[0]/=et[3],et[1]/=et[3],et[2]/=et[3],et[3]=1;const Xe=((Je,Ct,Dt,vt,kt)=>({u_sun_pos:Je,u_atmosphere_blend:Ct,u_globe_position:Dt,u_globe_radius:vt,u_inv_proj_matrix:kt}))(be,ke,[et[0],et[1],et[2]],Se,je),Qe=Hd(pe,ne);ge.draw(pe,ye.TRIANGLES,xe,Mr.disabled,$r.alphaBlended,xr.disabled,Xe,null,null,"atmosphere",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const W=(function(ne,le){let pe=null;const ye=Object.values(ne._layers).flatMap((be=>be.source&&!be.isHidden(le)?[ne.tileManagers[be.source]]:[])),ge=ye.filter((be=>be.getSource().type==="vector")),xe=ye.filter((be=>be.getSource().type!=="vector")),De=be=>{(!pe||pe.getSource().maxzoom<be.getSource().maxzoom)&&(pe=be)};return ge.forEach((be=>De(be))),pe||xe.forEach((be=>De(be))),pe})(this.style,this.transform.zoom);W&&(function(ne,le,pe){for(let ye=0;ye<pe.length;ye++)xh(ne,le,pe[ye])})(this,W,W.getVisibleCoordinates())}this.options.showPadding&&(function(W){const ne=W.transform.padding;cu(W,W.transform.height-(ne.top||0),3,Is),cu(W,ne.bottom||0,3,ns),Os(W,ne.left||0,3,Nf),Os(W,W.transform.width-(ne.right||0),3,Ff);const le=W.transform.centerPoint;(function(pe,ye,ge,xe){qn(pe,ye-1,ge-10,2,20,xe),qn(pe,ye-10,ge-1,20,2,xe)})(W,le.x,W.transform.height-le.y,Pa)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=n?!c.cj(u,p):!c.ck(u,p)),_||(_=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(c.cl(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(T,M){const O=T.context,R=O.gl,V=T.transform,q=$r.unblended,K=new fr(R.LEQUAL,fr.ReadWrite,[0,1]),W=M.tileManager.getRenderableTiles(),ne=T.useProgram("terrainDepth");O.bindFramebuffer.set(M.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:c.bp.transparent,depth:1});for(const le of W){const pe=M.getTerrainMesh(le.tileID),ye=M.getTerrainData(le.tileID),ge=V.getProjectionData({overscaledTileID:le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),xe={u_ele_delta:M.getMeshFrameDelta(V.zoom)};ne.draw(O,R.TRIANGLES,K,Mr.disabled,q,xr.backCCW,xe,ye,ge,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain),(function(T,M){const O=T.context,R=O.gl,V=T.transform,q=$r.unblended,K=new fr(R.LEQUAL,fr.ReadWrite,[0,1]),W=M.getCoordsTexture(),ne=M.tileManager.getRenderableTiles(),le=T.useProgram("terrainCoords");O.bindFramebuffer.set(M.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:c.bp.transparent,depth:1}),M.coordsIndex=[];for(const pe of ne){const ye=M.getTerrainMesh(pe.tileID),ge=M.getTerrainData(pe.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,W.texture);const xe={u_terrain_coords_id:(255-M.coordsIndex.length)/255,u_texture:0,u_ele_delta:M.getMeshFrameDelta(V.zoom)},De=V.getProjectionData({overscaledTileID:pe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});le.draw(O,R.TRIANGLES,K,Mr.disabled,q,xr.backCCW,xe,ge,De,"terrain",ye.vertexBuffer,ye.indexBuffer,ye.segments),M.coordsIndex.push(pe.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain))}renderLayer(n,u,p,_,T){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(_||[]).length)&&(this.id=p.id,c.cm(p)?(function(M,O,R,V,q,K){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:W}=K,ne=Mr.disabled,le=M.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(pe,ye,ge,xe,De,be,Ce,ke,Se){const je=ye.transform,et=ye.style.map.terrain,Xe=De==="map",Qe=be==="map";for(const Je of pe){const Ct=xe.getTile(Je),Dt=Ct.getBucket(ge);if(!Dt||!Dt.text||!Dt.text.segments.get().length)continue;const vt=c.ay(Dt.textSizeData,je.zoom),kt=c.aN(Ct,1,ye.transform.zoom),sr=ba(Xe,ye.transform,kt),jr=ge.layout.get("icon-text-fit")!=="none"&&Dt.hasIconData();if(vt){const nn=Math.pow(2,je.zoom-Ct.tileID.overscaledZ),Qr=et?(un,Zr)=>et.getElevation(Je,un,Zr):null;Ms(Dt,Xe,Qe,Se,je,sr,nn,vt,jr,c.aO(je,Ct,Ce,ke),Je.toUnwrapped(),Qr)}}})(V,M,R,O,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),q),R.paint.get("icon-opacity").constantOr(1)!==0&&sc(M,O,R,V,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),ne,le,W),R.paint.get("text-opacity").constantOr(1)!==0&&sc(M,O,R,V,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),ne,le,W),O.map.showCollisionBoxes&&(ui(M,O,R,V,!0),ui(M,O,R,V,!1))})(n,u,p,_,this.style.placement.variableOffsets,T):c.cn(p)?(function(M,O,R,V,q){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:K}=q,W=R.paint.get("circle-opacity"),ne=R.paint.get("circle-stroke-width"),le=R.paint.get("circle-stroke-opacity"),pe=!R.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(ne.constantOr(1)===0||le.constantOr(1)===0))return;const ye=M.context,ge=ye.gl,xe=M.transform,De=M.getDepthModeForSublayer(0,fr.ReadOnly),be=Mr.disabled,Ce=M.colorModeForRenderPass(),ke=[],Se=xe.getCircleRadiusCorrection();for(let je=0;je<V.length;je++){const et=V[je],Xe=O.getTile(et),Qe=Xe.getBucket(R);if(!Qe)continue;const Je=R.paint.get("circle-translate"),Ct=R.paint.get("circle-translate-anchor"),Dt=c.aO(xe,Xe,Je,Ct),vt=Qe.programConfigurations.get(R.id),kt=M.useProgram("circle",vt),sr=Qe.layoutVertexBuffer,jr=Qe.indexBuffer,nn=M.style.map.terrain&&M.style.map.terrain.getTerrainData(et),Qr={programConfiguration:vt,program:kt,layoutVertexBuffer:sr,indexBuffer:jr,uniformValues:lh(M,Xe,R,Dt,Se),terrainData:nn,projectionData:xe.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!K,applyTerrainMatrix:!0})};if(pe){const un=Qe.segments.get();for(const Zr of un)ke.push({segments:new c.aX([Zr]),sortKey:Zr.sortKey,state:Qr})}else ke.push({segments:Qe.segments,sortKey:0,state:Qr})}pe&&ke.sort(((je,et)=>je.sortKey-et.sortKey));for(const je of ke){const{programConfiguration:et,program:Xe,layoutVertexBuffer:Qe,indexBuffer:Je,uniformValues:Ct,terrainData:Dt,projectionData:vt}=je.state;Xe.draw(ye,ge.TRIANGLES,De,be,Ce,xr.backCCW,Ct,Dt,vt,R.id,Qe,Je,je.segments,R.paint,M.transform.zoom,et)}})(n,u,p,_,T):c.co(p)?(function(M,O,R,V,q){if(R.paint.get("heatmap-opacity")===0)return;const K=M.context,{isRenderingToTexture:W,isRenderingGlobe:ne}=q;if(M.style.map.terrain){for(const le of V){const pe=O.getTile(le);O.hasRenderableParent(le)||(M.renderPass==="offscreen"?Zd(M,pe,R,le,ne):M.renderPass==="translucent"&&hi(M,R,le,W,ne))}K.viewport.set([0,0,M.width,M.height])}else M.renderPass==="offscreen"?(function(le,pe,ye,ge){const xe=le.context,De=xe.gl,be=le.transform,Ce=Mr.disabled,ke=new $r([De.ONE,De.ONE],c.bp.transparent,[!0,!0,!0,!0]);(function(Se,je,et){const Xe=Se.gl;Se.activeTexture.set(Xe.TEXTURE1),Se.viewport.set([0,0,je.width/4,je.height/4]);let Qe=et.heatmapFbos.get(c.cd);Qe?(Xe.bindTexture(Xe.TEXTURE_2D,Qe.colorAttachment.get()),Se.bindFramebuffer.set(Qe.framebuffer)):(Qe=Kr(Se,je.width/4,je.height/4),et.heatmapFbos.set(c.cd,Qe))})(xe,le,ye),xe.clear({color:c.bp.transparent});for(let Se=0;Se<ge.length;Se++){const je=ge[Se];if(pe.hasRenderableParent(je))continue;const et=pe.getTile(je),Xe=et.getBucket(ye);if(!Xe)continue;const Qe=Xe.programConfigurations.get(ye.id),Je=le.useProgram("heatmap",Qe),Ct=be.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Dt=be.getCircleRadiusCorrection();Je.draw(xe,De.TRIANGLES,fr.disabled,Ce,ke,xr.backCCW,fl(et,be.zoom,ye.paint.get("heatmap-intensity"),Dt),null,Ct,ye.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,ye.paint,be.zoom,Qe)}xe.viewport.set([0,0,le.width,le.height])})(M,O,R,V):M.renderPass==="translucent"&&(function(le,pe){const ye=le.context,ge=ye.gl;ye.setColorMode(le.colorModeForRenderPass());const xe=pe.heatmapFbos.get(c.cd);xe&&(ye.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,xe.colorAttachment.get()),ye.activeTexture.set(ge.TEXTURE1),Sr(ye,pe).bind(ge.LINEAR,ge.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(ye,ge.TRIANGLES,fr.disabled,Mr.disabled,le.colorModeForRenderPass(),xr.disabled,Nd(le,pe,0,1),null,null,pe.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,pe.paint,le.transform.zoom))})(M,R)})(n,u,p,_,T):c.cp(p)?(function(M,O,R,V,q){if(M.renderPass!=="translucent")return;const{isRenderingToTexture:K}=q,W=R.paint.get("line-opacity"),ne=R.paint.get("line-width");if(W.constantOr(1)===0||ne.constantOr(1)===0)return;const le=M.getDepthModeForSublayer(0,fr.ReadOnly),pe=M.colorModeForRenderPass(),ye=R.paint.get("line-dasharray"),ge=ye.constantOr(1),xe=R.paint.get("line-pattern"),De=xe.constantOr(1),be=R.paint.get("line-gradient"),Ce=R.getCrossfadeParameters();let ke;ke=De?"linePattern":ge&&be?"lineGradientSDF":ge?"lineSDF":be?"lineGradient":"line";const Se=M.context,je=Se.gl,et=M.transform;let Xe=!0;for(const Qe of V){const Je=O.getTile(Qe);if(De&&!Je.patternsLoaded())continue;const Ct=Je.getBucket(R);if(!Ct)continue;const Dt=Ct.programConfigurations.get(R.id),vt=M.context.program.get(),kt=M.useProgram(ke,Dt),sr=Xe||kt.program!==vt,jr=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Qe),nn=xe.constantOr(null),Qr=ye&&ye.constantOr(null);if(nn&&Je.imageAtlas){const fi=Je.imageAtlas,zn=fi.patternPositions[nn.to.toString()],kn=fi.patternPositions[nn.from.toString()];zn&&kn&&Dt.setConstantPatternPositions(zn,kn)}else if(Qr){const fi=R.layout.get("line-cap")==="round",zn=M.lineAtlas.getDash(Qr.to,fi),kn=M.lineAtlas.getDash(Qr.from,fi);Dt.setConstantDashPositions(zn,kn)}const un=et.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Zr=et.getPixelScale();let Tn;De?(Tn=Fd(M,Je,R,Zr,Ce),Ma(Se,je,Je,Dt,Ce)):ge&&be?(Tn=dl(M,Je,R,Zr,Ce,Ct.lineClipsArray.length),Ji(M,O,Se,je,R,Ct,Qe,Dt,Ce)):ge?(Tn=Wi(M,Je,R,Zr,Ce),wn(M,Se,je,Dt,sr,Ce)):be?(Tn=Sm(M,Je,R,Zr,Ct.lineClipsArray.length),Qi(M,O,Se,je,R,Ct,Qe)):Tn=hh(M,Je,R,Zr);const hn=M.stencilModeForClipping(Qe);kt.draw(Se,je.TRIANGLES,le,hn,pe,xr.disabled,Tn,jr,un,R.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,R.paint,M.transform.zoom,Dt,Ct.layoutVertexBuffer2),Xe=!1}})(n,u,p,_,T):c.cq(p)?(function(M,O,R,V,q){const K=R.paint.get("fill-color"),W=R.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const{isRenderingToTexture:ne}=q,le=M.colorModeForRenderPass(),pe=R.paint.get("fill-pattern"),ye=M.opaquePassEnabledForLayer()&&!pe.constantOr(1)&&K.constantOr(c.bp.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(M.renderPass===ye){const ge=M.getDepthModeForSublayer(1,M.renderPass==="opaque"?fr.ReadWrite:fr.ReadOnly);Jo(M,O,R,V,ge,le,!1,ne)}if(M.renderPass==="translucent"&&R.paint.get("fill-antialias")){const ge=M.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,fr.ReadOnly);Jo(M,O,R,V,ge,le,!0,ne)}})(n,u,p,_,T):c.cr(p)?(function(M,O,R,V,q){const K=R.paint.get("fill-extrusion-opacity");if(K===0)return;const{isRenderingToTexture:W}=q;if(M.renderPass==="translucent"){const ne=new fr(M.context.gl.LEQUAL,fr.ReadWrite,M.depthRangeFor3D);if(K!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))es(M,O,R,V,ne,Mr.disabled,$r.disabled,W),es(M,O,R,V,ne,M.stencilModeFor3D(),M.colorModeForRenderPass(),W);else{const le=M.colorModeForRenderPass();es(M,O,R,V,ne,Mr.disabled,le,W)}}})(n,u,p,_,T):c.cs(p)?(function(M,O,R,V,q){if(M.renderPass!=="offscreen"&&M.renderPass!=="translucent")return;const{isRenderingToTexture:K}=q,W=M.context,ne=M.style.projection.useSubdivision,le=M.getDepthModeForSublayer(0,fr.ReadOnly),pe=M.colorModeForRenderPass();if(M.renderPass==="offscreen")(function(ye,ge,xe,De,be,Ce,ke){const Se=ye.context,je=Se.gl;for(const et of xe){const Xe=ge.getTile(et),Qe=Xe.dem;if(!Qe||!Qe.data||!Xe.needsHillshadePrepare)continue;const Je=Qe.dim,Ct=Qe.stride,Dt=Qe.getPixels();if(Se.activeTexture.set(je.TEXTURE1),Se.pixelStoreUnpackPremultiplyAlpha.set(!1),Xe.demTexture=Xe.demTexture||ye.getTileTexture(Ct),Xe.demTexture){const kt=Xe.demTexture;kt.update(Dt,{premultiply:!1}),kt.bind(je.NEAREST,je.CLAMP_TO_EDGE)}else Xe.demTexture=new c.T(Se,Dt,je.RGBA,{premultiply:!1}),Xe.demTexture.bind(je.NEAREST,je.CLAMP_TO_EDGE);Se.activeTexture.set(je.TEXTURE0);let vt=Xe.fbo;if(!vt){const kt=new c.T(Se,{width:Je,height:Je,data:null},je.RGBA);kt.bind(je.LINEAR,je.CLAMP_TO_EDGE),vt=Xe.fbo=Se.createFramebuffer(Je,Je,!0,!1),vt.colorAttachment.set(kt.texture)}Se.bindFramebuffer.set(vt.framebuffer),Se.viewport.set([0,0,Je,Je]),ye.useProgram("hillshadePrepare").draw(Se,je.TRIANGLES,be,Ce,ke,xr.disabled,xm(Xe.tileID,Qe),null,null,De.id,ye.rasterBoundsBuffer,ye.quadTriangleIndexBuffer,ye.rasterBoundsSegments),Xe.needsHillshadePrepare=!1}})(M,O,V,R,le,Mr.disabled,pe),W.viewport.set([0,0,M.width,M.height]);else if(M.renderPass==="translucent")if(ne){const[ye,ge,xe]=M.stencilConfigForOverlapTwoPass(V);ts(M,O,R,xe,ye,le,pe,!1,K),ts(M,O,R,xe,ge,le,pe,!0,K)}else{const[ye,ge]=M.getStencilConfigForOverlapAndUpdateStencilID(V);ts(M,O,R,ge,ye,le,pe,!1,K)}})(n,u,p,_,T):c.ct(p)?(function(M,O,R,V,q){if(M.renderPass!=="translucent"||!V.length)return;const{isRenderingToTexture:K}=q,W=M.style.projection.useSubdivision,ne=M.getDepthModeForSublayer(0,fr.ReadOnly),le=M.colorModeForRenderPass();if(W){const[pe,ye,ge]=M.stencilConfigForOverlapTwoPass(V);Cs(M,O,R,ge,pe,ne,le,!1,K),Cs(M,O,R,ge,ye,ne,le,!0,K)}else{const[pe,ye]=M.getStencilConfigForOverlapAndUpdateStencilID(V);Cs(M,O,R,ye,pe,ne,le,!1,K)}})(n,u,p,_,T):c.bU(p)?(function(M,O,R,V,q){if(M.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!V.length)return;const{isRenderingToTexture:K}=q,W=O.getSource(),ne=M.style.projection.useSubdivision;if(W instanceof _a)eo(M,O,R,V,null,!1,!1,W.tileCoords,W.flippedWindingOrder,K);else if(ne){const[le,pe,ye]=M.stencilConfigForOverlapTwoPass(V);eo(M,O,R,ye,le,!1,!0,Ds,!1,K),eo(M,O,R,ye,pe,!0,!0,Ds,!1,K)}else{const[le,pe]=M.getStencilConfigForOverlapAndUpdateStencilID(V);eo(M,O,R,pe,le,!1,!0,Ds,!1,K)}})(n,u,p,_,T):c.cu(p)?(function(M,O,R,V,q){const K=R.paint.get("background-color"),W=R.paint.get("background-opacity");if(W===0)return;const{isRenderingToTexture:ne}=q,le=M.context,pe=le.gl,ye=M.style.projection,ge=M.transform,xe=ge.tileSize,De=R.paint.get("background-pattern");if(M.isPatternMissing(De))return;const be=!De&&K.a===1&&W===1&&M.opaquePassEnabledForLayer()?"opaque":"translucent";if(M.renderPass!==be)return;const Ce=Mr.disabled,ke=M.getDepthModeForSublayer(0,be==="opaque"?fr.ReadWrite:fr.ReadOnly),Se=M.colorModeForRenderPass(),je=M.useProgram(De?"backgroundPattern":"background"),et=V||fn(ge,{tileSize:xe,terrain:M.style.map.terrain});De&&(le.activeTexture.set(pe.TEXTURE0),M.imageManager.bind(M.context));const Xe=R.getCrossfadeParameters();for(const Qe of et){const Je=ge.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),Ct=De?mh(W,M,De,{tileID:Qe,tileSize:xe},Xe):ph(W,K),Dt=M.style.map.terrain&&M.style.map.terrain.getTerrainData(Qe),vt=ye.getMeshFromTileID(le,Qe.canonical,!1,!0,"raster");je.draw(le,pe.TRIANGLES,ke,Ce,Se,xr.backCCW,Ct,Dt,Je,R.id,vt.vertexBuffer,vt.indexBuffer,vt.segments)}})(n,0,p,_,T):c.cv(p)&&(function(M,O,R,V){const{isRenderingGlobe:q}=V,K=M.context,W=R.implementation,ne=M.style.projection,le=M.transform,pe=le.getProjectionDataForCustomLayer(q),ye={farZ:le.farZ,nearZ:le.nearZ,fov:le.fov*Math.PI/180,modelViewProjectionMatrix:le.modelViewProjectionMatrix,projectionMatrix:le.projectionMatrix,shaderData:{variantName:ne.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ne.shaderPreludeCode.vertexSource}`,define:ne.shaderDefine},defaultProjectionData:pe},ge=W.renderingMode?W.renderingMode:"2d";if(M.renderPass==="offscreen"){const xe=W.prerender;xe&&(M.setCustomLayerDefaults(),K.setColorMode(M.colorModeForRenderPass()),xe.call(W,K.gl,ye),K.setDirty(),M.setBaseState())}else if(M.renderPass==="translucent"){M.setCustomLayerDefaults(),K.setColorMode(M.colorModeForRenderPass()),K.setStencilMode(Mr.disabled);const xe=ge==="3d"?M.getDepthModeFor3D():M.getDepthModeForSublayer(0,fr.ReadOnly);K.setDepthMode(xe),W.render(K.gl,ye),K.setDirty(),M.setBaseState(),K.bindFramebuffer.set(null)}})(n,0,p,T))}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!u||!p}useProgram(n,u,p=!1,_=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,M=this.style.projection,O=p?pn.projectionMercator:M.shaderPreludeCode,R=p?Dn:M.shaderDefine,V=n+(u?u.cacheKey:"")+`/${p?Bi:M.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[V]||(this.cache[V]=new vm(this.context,pn[n],u,Tm[n],this._showOverdrawInspector,T,O,R,_)),this.cache[V]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var n,u;if(this._tileTextures){for(const p in this._tileTextures){const _=this._tileTextures[p];if(_)for(const T of _)T.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((n=this.tileExtentMesh.vertexBuffer)===null||n===void 0||n.destroy()),this.tileExtentMesh&&((u=this.tileExtentMesh.indexBuffer)===null||u===void 0||u.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const p in this.cache){const _=this.cache[p];_&&_.program&&this.context.gl.deleteProgram(_.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:u}=this.context.gl;return this.width!==n||this.height!==u}}function Yd(w,n){let u,p=!1,_=null,T=null;const M=()=>{_=null,p&&(w.apply(T,u),_=setTimeout(M,n),p=!1)};return(...O)=>(p=!0,T=this,u=O,_||M(),_)}class Nn{constructor(n){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(p=_)})),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const p=u.join("/");let _=p;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${p}`);let T=window.location.hash.replace(_,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let M=window.location.href.replace(/(#.+)?$/,T);M=M.replace("&&","&"),window.history.replaceState(window.history.state,null,M)},this._updateHash=Yd(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,_),M=Math.round(u.lng*T)/T,O=Math.round(u.lat*T)/T,R=this._map.getBearing(),V=this._map.getPitch();let q="";if(q+=n?`/${M}/${O}/${p}`:`${p}/${O}/${M}`,(R||V)&&(q+="/"+Math.round(10*R)/10),V&&(q+=`/${Math.round(V)}`),this._hashName){const K=this._hashName;let W=!1;const ne=window.location.hash.slice(1).split("&").map((le=>{const pe=le.split("=")[0];return pe===K?(W=!0,`${pe}=${q}`):le})).filter((le=>le));return W||ne.push(`${K}=${q}`),`#${ne.join("&")}`}return`#${q}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new c.V(+n[2],+n[1])}catch{return!1}const u=+n[0],p=+(n[3]||0),_=+(n[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&p>=-180&&p<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const is={linearity:.3,easing:c.cw(0,0,.3,1)},uu=c.e({deceleration:2500,maxSpeed:1400},is),Ci=c.e({deceleration:20,maxSpeed:1400},is),Ca=c.e({deceleration:1e3,maxSpeed:360},is),lc=c.e({deceleration:1e3,maxSpeed:90},is),Di=c.e({deceleration:1e3,maxSpeed:360},is);class wy{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:H(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=H();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)u.zoom+=T.zoomDelta||0,u.bearing+=T.bearingDelta||0,u.pitch+=T.pitchDelta||0,u.roll+=T.rollDelta||0,T.panDelta&&u.pan._add(T.panDelta),T.around&&(u.around=T.around),T.pinchAround&&(u.pinchAround=T.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(u.pan.mag()){const T=wh(u.pan.mag(),p,c.e({},uu,n||{})),M=u.pan.mult(T.amount/u.pan.mag()),O=this._map.cameraHelper.handlePanInertia(M,this._map.transform);_.center=O.easingCenter,_.offset=O.easingOffset,hu(_,T)}if(u.zoom){const T=wh(u.zoom,p,Ci),M=c.cx(this._map.transform.zoom+T.amount,this._map.getZoomSnap(),T.amount);_.zoom=M,hu(_,T)}if(u.bearing){const T=wh(u.bearing,p,Ca);_.bearing=this._map.transform.bearing+c.an(T.amount,-179,179),hu(_,T)}if(u.pitch){const T=wh(u.pitch,p,lc);_.pitch=this._map.transform.pitch+T.amount,hu(_,T)}if(u.roll){const T=wh(u.roll,p,Di);_.roll=this._map.transform.roll+c.an(T.amount,-179,179),hu(_,T)}if(_.zoom||_.bearing){const T=u.pinchAround===void 0?u.around:u.pinchAround;_.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),c.e(_,{noMoveStart:!0})}}function hu(w,n){(!w.duration||w.duration<n.duration)&&(w.duration=n.duration,w.easing=n.easing)}function wh(w,n,u){const{maxSpeed:p,linearity:_,deceleration:T}=u,M=c.an(w*_/(n/1e3),-p,p),O=Math.abs(M)/(T*_);return{easing:u.easing,duration:1e3*O,amount:M*(O/2)}}class si extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,p,_={}){p=p instanceof MouseEvent?p:new MouseEvent(n,p);const T=U.mousePos(u.getCanvas(),p),M=u.unproject(T);super(n,c.e({point:T,lngLat:M,originalEvent:p},_)),this._defaultPrevented=!1,this.target=u}}class wo extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,p){const _=n==="touchend"?p.changedTouches:p.touches,T=U.touchPos(u.getCanvasContainer(),_),M=T.map((R=>u.unproject(R))),O=T.reduce(((R,V,q,K)=>R.add(V.div(K.length))),new c.P(0,0));super(n,{points:T,point:O,lngLats:M,lngLat:u.unproject(O),originalEvent:p}),this._defaultPrevented=!1}}class Vf extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}}class Gf{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Vf(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new si(n.type,this._map,n))}mouseup(n){this._map.fire(new si(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new si(n.type,this._map,n))}dblclick(n){return this._firePreventable(new si(n.type,this._map,n))}mouseover(n){this._map.fire(new si(n.type,this._map,n))}mouseout(n){this._map.fire(new si(n.type,this._map,n))}touchstart(n){return this._firePreventable(new wo(n.type,this._map,n))}touchmove(n){this._map.fire(new wo(n.type,this._map,n))}touchend(n){this._map.fire(new wo(n.type,this._map,n))}touchcancel(n){this._map.fire(new wo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mm{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new si(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new si(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class So{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(c.P.convert(n),this._map.terrain)}}class bl{constructor(n,u){this._map=n,this._tr=new So(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&n.button===0&&(U.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=U.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const T=Math.min(_.x,p.x),M=Math.max(_.x,p.x),O=Math.min(_.y,p.y),R=Math.max(_.y,p.y);U.setTransform(this._box,`translate(${T}px,${O}px)`),this._box.style.width=M-T+"px",this._box.style.height=R-O+"px"}mouseupWindow(n,u){if(!this._active||n.button!==0)return;const p=this._startPos,_=u;if(this.reset(),U.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:n})),{cameraAnimation:T=>T.fitScreenCoordinates(p,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new c.l(n,{originalEvent:u}))}}function ea(w,n){if(w.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${n.length}`);const u={};for(let p=0;p<w.length;p++)u[w[p].identifier]=n[p];return u}class Lt{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=(function(_){const T=new c.P(0,0);for(const M of _)T._add(M);return T.div(_.length)})(u),this.touches=ea(p,u)))}touchmove(n,u,p){if(this.aborted||!this.centroid)return;const _=ea(p,u);for(const T in this.touches){const M=_[T];(!M||M.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(n,u,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Sh{constructor(n){this.singleTap=new Lt(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,p){this.singleTap.touchstart(n,u,p)}touchmove(n,u,p){this.singleTap.touchmove(n,u,p)}touchend(n,u,p){const _=this.singleTap.touchend(n,u,p);if(_){const T=n.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(_)<30;if(T&&M||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class qf{constructor(n){this._tr=new So(n),this._zoomIn=new Sh({numTouches:1,numTaps:2}),this._zoomOut=new Sh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,p){this._zoomIn.touchstart(n,u,p),this._zoomOut.touchstart(n,u,p)}touchmove(n,u,p){this._zoomIn.touchmove(n,u,p),this._zoomOut.touchmove(n,u,p)}touchend(n,u,p){const _=this._zoomIn.touchend(n,u,p),T=this._zoomOut.touchend(n,u,p),M=this._tr;return _?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:c.cx(M.zoom+1,O.getZoomSnap()),around:M.unproject(_)},{originalEvent:n})}):T?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:c.cx(M.zoom-1,O.getZoomSnap()),around:M.unproject(T)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class to{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const u=this._moveFunction(...n);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(n,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const _=Array.isArray(u)?u[0]:u;return!this._moved&&_.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(p,_))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&U.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const To=0,fu=2,$f={[To]:1,[fu]:2};class as{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const u=U.mouseButton(n);this._eventButton=u}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!(function(u,p){const _=$f[p];return u.buttons===void 0||(u.buttons&_)!==_})(n,this._eventButton)}isValidEndEvent(n){return U.mouseButton(n)===this._eventButton}}class cc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class Th{constructor(n=new as({checkCorrectEvent:()=>!0}),u=new cc){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(n,u,p){return n instanceof MouseEvent?u(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?p(n):void 0}startMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.startMove(u)),(u=>this.oneFingerTouchMoveStateManager.startMove(u)))}endMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.endMove(u)),(u=>this.oneFingerTouchMoveStateManager.endMove(u)))}isValidStartEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidStartEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u)))}isValidMoveEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidMoveEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u)))}isValidEndEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidEndEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u)))}}const os=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=n=>{n.preventDefault()}};class Zf{constructor(n,u){this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,u,p){return this._calculateTransform(n,u,p)}touchmove(n,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return n.preventDefault(),this._calculateTransform(n,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,u,p){this._calculateTransform(n,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,p){p.length>0&&(this._active=!0);const _=ea(p,u),T=new c.P(0,0),M=new c.P(0,0);let O=0;for(const V in _){const q=_[V],K=this._touches[V];K&&(T._add(q),M._add(q.sub(K)),O++,_[V]=q)}if(this._touches=_,this._shouldBePrevented(O)||!M.mag())return;const R=M.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Eh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,p){if(!this._firstTwoTouches)return;n.preventDefault();const[_,T]=this._firstTwoTouches,M=ss(p,u,_),O=ss(p,u,T);if(!M||!O)return;const R=this._aroundCenter?null:M.add(O).div(2);return this._move([M,O],R,n)}touchend(n,u,p){if(!this._firstTwoTouches)return;const[_,T]=this._firstTwoTouches,M=ss(p,u,_),O=ss(p,u,T);M&&O||(this._active&&U.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ss(w,n,u){for(let p=0;p<w.length;p++)if(w[p].identifier===u)return n[p]}function Xd(w,n){return Math.log(w/n)/Math.LN2}class ls extends Eh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Xd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xd(this._distance,p),pinchAround:u}}}function Hf(w,n){return 180*w.angleWith(n)/Math.PI}class Ah extends Eh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u,p){const _=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Hf(this._vector,_),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,p=Hf(n,this._startVector);return Math.abs(p)<u}}function cs(w){return Math.abs(w.y)>Math.abs(w.x)}class zs extends Eh{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,p){super.touchstart(n,u,p),this._currentTouchCount=p.length}_start(n){this._lastPoints=n,cs(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=n[0].sub(this._lastPoints[0]),T=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,T,p.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(_.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,p){if(this._valid!==void 0)return this._valid;const _=n.mag()>=2,T=u.mag()>=2;if(!_&&!T)return;if(!_||!T)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const M=n.y>0==u.y>0;return cs(n)&&cs(u)&&M}}const ro={panStep:100,bearingStep:15,pitchStep:10};class Vr{constructor(n){this._tr=new So(n);const u=ro;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,p=0,_=0,T=0,M=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),T=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),T=1);break;case 38:n.shiftKey?_=1:(n.preventDefault(),M=-1);break;case 40:n.shiftKey?_=-1:(n.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:O=>{const R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:Wd,zoom:u?c.cx(R.zoom+u*(n.shiftKey?2:1),O.getZoomSnap()):R.zoom,bearing:R.bearing+p*this._bearingStep,pitch:R.pitch+_*this._pitchStep,offset:[-T*this._panStep,-M*this._panStep],center:R.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wd(w){return w*(2-w)}const ks=4.000244140625,xl=1/450;class Mh{constructor(n,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=n,this._tr=new So(n),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=xl}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=H(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%ks==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(_*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=U.mousePos(this._map.getCanvas(),n),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(c.V.convert(p.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>ks?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&R!==0&&(R=1/R);const V=typeof this._targetZoom!="number"?n.scale:c.aq(this._targetZoom),q=n.applyConstrain(n.getCameraLngLat(),c.at(V*R)).zoom,K=this._map.getZoomSnap();if(this._type==="wheel"&&K>0){const W=c.cx(n.zoom,K);this._targetZoom=c.cx(q,K,q-W)}else this._targetZoom=q;this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,p=this._startZoom,_=this._easing;let T,M=!1;if(this._type==="wheel"&&p&&_){const O=H()-this._lastWheelEventTime,R=Math.min((O+5)/200,1),V=_(R);T=c.G.number(p,u,V),R<1?this._frameId||(this._frameId=!0):M=!0}else T=u,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!M,zoomDelta:T-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=c.cz;if(this._prevEase){const p=this._prevEase,_=(H()-p.start)/p.duration,T=p.easing(_+.01)-p.easing(_),M=.27/Math.sqrt(T*T+1e-4)*.01,O=Math.sqrt(.0729-M*M);u=c.cw(M,O,.25,1)}return this._prevEase={start:H(),duration:n,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Yf{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class uc{constructor(n){this._tr=new So(n),this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:c.cx(this._tr.zoom+(n.shiftKey?-1:1),p.getZoomSnap()),around:this._tr.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ph{constructor(){this._tap=new Sh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,u,p){if(!this._swipePoint)if(this._tapTime){const _=u[0],T=n.timeStamp-this._tapTime<500,M=this._tapPoint.dist(_)<30;T&&M?p.length>0&&(this._swipePoint=_,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(n,u,p)}touchmove(n,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=u[0],T=_.y-this._swipePoint.y;return this._swipePoint=_,n.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(n,u,p)}touchend(n,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const _=this._tap.touchend(n,u,p);_&&(this._tapTime=n.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kd{constructor(n,u,p){this._el=n,this._mousePan=u,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Da{constructor(n,u,p,_){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=u,this._mousePitch=p,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class hc{constructor(n,u,p,_){this._el=n,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Bt{constructor(n,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=U.create("div","maplibregl-cooperative-gesture-screen",n);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=u,this._container.appendChild(_);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=p,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(U.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,u){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:n,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Gt=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class no extends c.l{}function du(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Ch{get _ownerDocument(){var n;return((n=this._el)===null||n===void 0?void 0:n.ownerDocument)||document}get _ownerWindow(){var n,u;return((u=(n=this._el)===null||n===void 0?void 0:n.ownerDocument)===null||u===void 0?void 0:u.defaultView)||window}constructor(n,u){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,T)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const M=_.type==="renderFrame"?void 0:_,O={needsRenderFrame:!1},R={},V={};for(const{handlerName:W,handler:ne,allowed:le}of this._handlers){if(!ne.isEnabled())continue;let pe;if(this._blockedByActive(V,le,W))ne.reset();else if(ne[T||_.type]){if(c.cA(_,T||_.type)){const ye=U.mousePos(this._map.getCanvas(),_);pe=ne[T||_.type](_,ye)}else if(c.cB(_,T||_.type)){const ye=this._getMapTouches(_.touches),ge=U.touchPos(this._map.getCanvas(),ye);pe=ne[T||_.type](_,ge,ye)}else c.cC(T||_.type)||(pe=ne[T||_.type](_));this.mergeHandlerResult(O,R,pe,W,M),pe&&pe.needsRenderFrame&&this._triggerRenderFrame()}(pe||ne.isActive())&&(V[W]=ne)}const q={};for(const W in this._previousActiveHandlers)V[W]||(q[W]=M);this._previousActiveHandlers=V,(Object.keys(q).length||du(O))&&(this._changes.push([O,R,q]),this._triggerRenderFrame()),(Object.keys(V).length||du(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:K}=O;K&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],K(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new wy(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(const[_,T,M]of this._listeners)U.addEventListener(_,T,_===this._ownerDocument?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[n,u,p]of this._listeners)U.removeEventListener(n,u,n===this._ownerDocument?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Gf(u,n));const _=u.boxZoom=new bl(u,n);this._add("boxZoom",_),n.interactive&&n.boxZoom&&_.enable();const T=u.cooperativeGestures=new Bt(u,n.cooperativeGestures);this._add("cooperativeGestures",T),n.cooperativeGestures&&T.enable();const M=new qf(u),O=new uc(u);u.doubleClickZoom=new Yf(O,M),this._add("tapZoom",M),this._add("clickZoom",O),n.interactive&&n.doubleClickZoom&&u.doubleClickZoom.enable();const R=new Ph;this._add("tapDragZoom",R);const V=u.touchPitch=new zs(u);this._add("touchPitch",V),n.interactive&&n.touchPitch&&u.touchPitch.enable(n.touchPitch);const q=()=>u.project(u.getCenter()),K=(function({enable:be,clickTolerance:Ce,aroundCenter:ke=!0,minPixelCenterThreshold:Se=100,rotateDegreesPerPixelMoved:je=.8},et){const Xe=new as({checkCorrectEvent:Qe=>U.mouseButton(Qe)===0&&Qe.ctrlKey||U.mouseButton(Qe)===2&&!Qe.ctrlKey});return new to({clickTolerance:Ce,move:(Qe,Je)=>{const Ct=et();if(ke&&Math.abs(Ct.y-Qe.y)>Se)return{bearingDelta:c.cy(new c.P(Qe.x,Je.y),Je,Ct)};let Dt=(Je.x-Qe.x)*je;return ke&&Je.y<Ct.y&&(Dt=-Dt),{bearingDelta:Dt}},moveStateManager:Xe,enable:be,assignEvents:os})})(n,q),W=(function({enable:be,clickTolerance:Ce,pitchDegreesPerPixelMoved:ke=-.5}){const Se=new as({checkCorrectEvent:je=>U.mouseButton(je)===0&&je.ctrlKey||U.mouseButton(je)===2});return new to({clickTolerance:Ce,move:(je,et)=>({pitchDelta:(et.y-je.y)*ke}),moveStateManager:Se,enable:be,assignEvents:os})})(n),ne=(function({enable:be,clickTolerance:Ce,rollDegreesPerPixelMoved:ke=.3},Se){const je=new as({checkCorrectEvent:et=>U.mouseButton(et)===2&&et.ctrlKey});return new to({clickTolerance:Ce,move:(et,Xe)=>{const Qe=Se();let Je=(Xe.x-et.x)*ke;return Xe.y<Qe.y&&(Je=-Je),{rollDelta:Je}},moveStateManager:je,enable:be,assignEvents:os})})(n,q);u.dragRotate=new Da(n,K,W,ne),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",W,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ne,["mousePitch"]),n.interactive&&n.dragRotate&&u.dragRotate.enable();const le=(function({enable:be,clickTolerance:Ce}){const ke=new as({checkCorrectEvent:Se=>U.mouseButton(Se)===0&&!Se.ctrlKey});return new to({clickTolerance:Ce,move:(Se,je)=>({around:je,panDelta:je.sub(Se)}),activateOnStart:!0,moveStateManager:ke,enable:be,assignEvents:os})})(n),pe=new Zf(n,u);u.dragPan=new Kd(p,le,pe),this._add("mousePan",le),this._add("touchPan",pe,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&u.dragPan.enable(n.dragPan);const ye=new Ah,ge=new ls;u.touchZoomRotate=new hc(p,ge,ye,R),this._add("touchRotate",ye,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&u.touchZoomRotate.enable(n.touchZoomRotate),this._add("blockableMapEvent",new Mm(u));const xe=u.scrollZoom=new Mh(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",xe,["mousePan"]),n.interactive&&n.scrollZoom&&u.scrollZoom.enable(n.scrollZoom);const De=u.keyboard=new Vr(u);this._add("keyboard",De),n.interactive&&n.keyboard&&u.keyboard.enable()}_add(n,u,p){this._handlers.push({handlerName:n,handler:u,allowed:p}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gt(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,u,p){for(const _ in n)if(_!==p&&(!u||u.indexOf(_)<0))return!0;return!1}_getMapTouches(n){const u=[];for(const p of n)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(n,u,p,_,T){if(!p)return;c.e(n,p);const M={handlerName:_,originalEvent:p.originalEvent||T};p.zoomDelta!==void 0&&(u.zoom=M),p.panDelta!==void 0&&(u.drag=M),p.rollDelta!==void 0&&(u.roll=M),p.pitchDelta!==void 0&&(u.pitch=M),p.bearingDelta!==void 0&&(u.rotate=M)}_applyChanges(){const n={},u={},p={};for(const[_,T,M]of this._changes)_.panDelta&&(n.panDelta=(n.panDelta||new c.P(0,0))._add(_.panDelta)),_.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(n.rollDelta=(n.rollDelta||0)+_.rollDelta),_.around!==void 0&&(n.around=_.around),_.pinchAround!==void 0&&(n.pinchAround=_.pinchAround),_.noInertia&&(n.noInertia=_.noInertia),c.e(u,T),c.e(p,M);this._updateMapTransform(n,u,p),this._changes=[]}_updateMapTransform(n,u,p){const _=this._map,T=_._getTransformForUpdate(),M=_.terrain;if(!(du(n)||M&&this._terrainMovement))return this._fireEvents(u,p,!0);_._stop(!0);let{panDelta:O,zoomDelta:R,bearingDelta:V,pitchDelta:q,rollDelta:K,around:W,pinchAround:ne}=n;ne!==void 0&&(W=ne),W=W||_.transform.centerPoint,M&&!T.isPointOnMapSurface(W)&&(W=T.centerPoint);const le={panDelta:O,zoomDelta:R,rollDelta:K,pitchDelta:q,bearingDelta:V,around:W};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(W)&&(W=T.centerPoint);const pe=W.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(O?W.sub(O):W);this._handleMapControls({terrain:M,tr:T,deltasForHelper:le,preZoomAroundLoc:pe,combinedEventsInProgress:u,panDelta:O}),_._applyUpdatedTransform(T),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,p,!0)}_handleMapControls({terrain:n,tr:u,deltasForHelper:p,preZoomAroundLoc:_,combinedEventsInProgress:T,panDelta:M}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(p,u),n)return O.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(p,u,_)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&M?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(M))):O.handleMapControlsPan(p,u,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(p,u,_));O.handleMapControlsPan(p,u,_)}_fireEvents(n,u,p){const _=Gt(this._eventsInProgress),T=Gt(n),M={};for(const K in n){const{originalEvent:W}=n[K];this._eventsInProgress[K]||(M[`${K}start`]=W),this._eventsInProgress[K]=n[K]}!_&&T&&this._fireEvent("movestart",T.originalEvent);for(const K in M)this._fireEvent(K,M[K]);T&&this._fireEvent("move",T.originalEvent);for(const K in n){const{originalEvent:W}=n[K];this._fireEvent(K,W)}const O={};let R;for(const K in this._eventsInProgress){const{handlerName:W,originalEvent:ne}=this._eventsInProgress[K];this._handlersById[W].isActive()||(delete this._eventsInProgress[K],R=u[W]||ne,O[`${K}end`]=R)}for(const K in O)this._fireEvent(K,O[K]);const V=Gt(this._eventsInProgress),q=(_||T)&&!V;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const K=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&K.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(K)}if(p&&q){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=ne=>ne!==0&&-this._bearingSnap<ne&&ne<this._bearingSnap;!K||!K.essential&&G.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:R})),W(this._map.getBearing())&&this._map.resetNorth()):(W(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new c.l(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((n=>{delete this._frameId,this.handleEvent(new no("renderFrame",{timeStamp:n})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Fn extends c.E{constructor(n,u,p){super(),this._renderFrameCallback=()=>{const _=Math.min((H()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=p.bearingSnap,this._zoomSnap=p.zoomSnap,this.cameraHelper=u,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(n,u){n.apply(this.transform,!0),this.transform=n,this.cameraHelper=u}getCenter(){return new c.V(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,u){return this.jumpTo({elevation:n},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,u,p){return n=c.P.convert(n).mult(-1),this.panTo(this.transform.center,c.e({offset:n},u),p)}panTo(n,u,p){return this.easeTo(c.e({center:n},u),p)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,p){return this.easeTo(c.e({zoom:n},u),p)}zoomIn(n,u){return this.zoomTo(c.cx(this.getZoom()+1,this._zoomSnap),n,u),this}zoomOut(n,u){return this.zoomTo(c.cx(this.getZoom()-1,this._zoomSnap),n,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,u){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)).fire(new c.l("moveend",u))),this}getBearing(){return this.transform.bearing}setZoomSnap(n){return this._zoomSnap=n,this}getZoomSnap(){return this._zoomSnap}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,p){return this.easeTo(c.e({bearing:n},u),p)}resetNorth(n,u){return this.rotateTo(0,c.e({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}getRoll(){return this.transform.roll}setRoll(n,u){return this.jumpTo({roll:n},u),this}cameraForBounds(n,u){n=Lr.convert(n).adjustAntiMeridian();const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,u)}_cameraForBoxAndBearing(n,u,p,_){const T={top:0,bottom:0,right:0,left:0};if(typeof(_=c.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const V=_.padding;_.padding={top:V,bottom:V,right:V,left:V}}const M=c.e(T,_.padding);_.padding=M;const O=this.transform,R=new Lr(n,u);return this.cameraHelper.cameraForBoxAndBearing(_,M,R,p,O)}fitBounds(n,u,p){return this._fitInternal(this.cameraForBounds(n,u),u,p)}fitScreenCoordinates(n,u,p,_,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(n)),this.transform.screenPointToLocation(c.P.convert(u)),p,_),_,T)}_fitInternal(n,u,p){return n?(delete(u=c.e(n,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(n,u){this.stop();const p=this._getTransformForUpdate();let _=!1,T=!1,M=!1;const O=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,n);const R=p.zoom!==O;return"elevation"in n&&p.elevation!==+n.elevation&&p.setElevation(+n.elevation),"bearing"in n&&p.bearing!==+n.bearing&&(_=!0,p.setBearing(+n.bearing)),"pitch"in n&&p.pitch!==+n.pitch&&(T=!0,p.setPitch(+n.pitch)),"roll"in n&&p.roll!==+n.roll&&(M=!0,p.setRoll(+n.roll)),n.padding==null||p.isPaddingEqual(n.padding)||p.setPadding(n.padding),this._applyUpdatedTransform(p),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)),R&&this.fire(new c.l("zoomstart",u)).fire(new c.l("zoom",u)).fire(new c.l("zoomend",u)),_&&this.fire(new c.l("rotatestart",u)).fire(new c.l("rotate",u)).fire(new c.l("rotateend",u)),T&&this.fire(new c.l("pitchstart",u)).fire(new c.l("pitch",u)).fire(new c.l("pitchend",u)),M&&this.fire(new c.l("rollstart",u)).fire(new c.l("roll",u)).fire(new c.l("rollend",u)),this.fire(new c.l("moveend",u))}calculateCameraOptionsFromTo(n,u,p,_=0){const T=c.a9.fromLngLat(n,u),M=c.a9.fromLngLat(p,_),O=M.x-T.x,R=M.y-T.y,V=M.z-T.z,q=Math.hypot(O,R,V);if(q===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(O,R),W=c.at(this.transform.cameraToCenterDistance/q/this.transform.tileSize),ne=180*Math.atan2(O,-R)/Math.PI;let le=180*Math.acos(K/q)/Math.PI;return le=V<0?90-le:90+le,{center:M.toLngLat(),elevation:_,zoom:W,pitch:le,bearing:ne}}calculateCameraOptionsFromCameraLngLatAltRotation(n,u,p,_,T){const M=this.transform.calculateCenterFromCameraLngLatAlt(n,u,p,_);return{center:M.center,elevation:M.elevation,zoom:M.zoom,bearing:p,pitch:_,roll:T}}easeTo(n,u){this._stop(!1,n.easeId),((n=c.e({offset:[0,0],duration:500,easing:c.cz},n)).animate===!1||!n.essential&&G.prefersReducedMotion)&&(n.duration=0);const p=this._getTransformForUpdate(),_=this.getBearing(),T=p.pitch,M=p.roll,O="bearing"in n?this._normalizeBearing(n.bearing,_):_,R="pitch"in n?+n.pitch:T,V="roll"in n?this._normalizeBearing(n.roll,M):M,q="padding"in n?n.padding:p.padding,K=c.P.convert(n.offset);let W,ne;n.around&&(W=c.V.convert(n.around),ne=p.locationToScreenPoint(W));const le={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},pe=this.cameraHelper.handleEaseTo(p,{bearing:O,pitch:R,roll:V,padding:q,around:W,aroundPoint:ne,offsetAsPoint:K,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||_!==O,this._pitching=this._pitching||R!==T,this._rolling=this._rolling||V!==M,this._padding=!p.isPaddingEqual(q),this._zooming=this._zooming||pe.isZooming,this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,le),this.terrain&&this._prepareElevation(pe.elevationCenter),this._ease((ye=>{pe.easeFunc(ye),this.terrain&&!n.freezeElevation&&this._updateElevation(ye),this._applyUpdatedTransform(p),this._fireMoveEvents(u)}),(ye=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u,ye)}),n),this}_prepareEase(n,u,p={}){this._moving=!0,u||p.moving||this.fire(new c.l("movestart",n)),this._zooming&&!p.zooming&&this.fire(new c.l("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new c.l("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new c.l("pitchstart",n)),this._rolling&&!p.rolling&&this.fire(new c.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(p-(u-(p*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.setElevation(c.G.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const u=n.getCameraLngLat(),p=n.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(u,n.zoom):0;if(p<_){const T=this.calculateCameraOptionsFromTo(u,_,n.center,n.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(n){const u=[];if(u.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&u.push((_=>this.transformCameraUpdate(_))),!u.length)return;const p=n.clone();for(const _ of u){const T=p.clone(),{center:M,zoom:O,roll:R,pitch:V,bearing:q,elevation:K}=_(T);M&&T.setCenter(M),K!==void 0&&T.setElevation(K),O!==void 0&&T.setZoom(O),R!==void 0&&T.setRoll(R),V!==void 0&&T.setPitch(V),q!==void 0&&T.setBearing(q),p.apply(T,!1)}this.transform.apply(p,!1)}_fireMoveEvents(n){this.fire(new c.l("move",n)),this._zooming&&this.fire(new c.l("zoom",n)),this._rotating&&this.fire(new c.l("rotate",n)),this._pitching&&this.fire(new c.l("pitch",n)),this._rolling&&this.fire(new c.l("roll",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,_=this._rotating,T=this._pitching,M=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new c.l("zoomend",n)),_&&this.fire(new c.l("rotateend",n)),T&&this.fire(new c.l("pitchend",n)),M&&this.fire(new c.l("rollend",n)),this.fire(new c.l("moveend",n))}flyTo(n,u){if(!n.essential&&G.prefersReducedMotion){const Je=c.U(n,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Je,u)}this.stop(),n=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.cz},n);const p=this._getTransformForUpdate(),_=p.bearing,T=p.pitch,M=p.roll,O=p.padding,R="bearing"in n?this._normalizeBearing(n.bearing,_):_,V="pitch"in n?+n.pitch:T,q="roll"in n?this._normalizeBearing(n.roll,M):M,K="padding"in n?n.padding:p.padding,W=c.P.convert(n.offset);let ne=p.centerPoint.add(W);const le=p.screenPointToLocation(ne),pe=this.cameraHelper.handleFlyTo(p,{bearing:R,pitch:V,roll:q,padding:K,locationAtOffset:le,offsetAsPoint:W,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let ye=n.curve;const ge=Math.max(p.width,p.height),xe=ge/pe.scaleOfZoom,De=pe.pixelPathLength;typeof pe.scaleOfMinZoom=="number"&&(ye=Math.sqrt(ge/pe.scaleOfMinZoom/De*2));const be=ye*ye;function Ce(Je){const Ct=(xe*xe-ge*ge+(Je?-1:1)*be*be*De*De)/(2*(Je?xe:ge)*be*De);return Math.log(Math.sqrt(Ct*Ct+1)-Ct)}function ke(Je){return(Math.exp(Je)-Math.exp(-Je))/2}function Se(Je){return(Math.exp(Je)+Math.exp(-Je))/2}const je=Ce(!1);let et=function(Je){return Se(je)/Se(je+ye*Je)},Xe=function(Je){return ge*((Se(je)*(ke(Ct=je+ye*Je)/Se(Ct))-ke(je))/be)/De;var Ct},Qe=(Ce(!0)-je)/ye;if(Math.abs(De)<2e-6||!isFinite(Qe)){if(Math.abs(ge-xe)<1e-6)return this.easeTo(n,u);const Je=xe<ge?-1:1;Qe=Math.abs(Math.log(xe/ge))/ye,Xe=()=>0,et=Ct=>Math.exp(Je*ye*Ct)}return n.duration="duration"in n?+n.duration:1e3*Qe/("screenSpeed"in n?+n.screenSpeed/ye:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=_!==R,this._pitching=V!==T,this._rolling=q!==M,this._padding=!p.isPaddingEqual(K),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(pe.targetCenter),this._ease((Je=>{const Ct=Je*Qe,Dt=1/et(Ct),vt=Xe(Ct);this._rotating&&p.setBearing(c.G.number(_,R,Je)),this._pitching&&p.setPitch(c.G.number(T,V,Je)),this._rolling&&p.setRoll(c.G.number(M,q,Je)),this._padding&&(p.interpolatePadding(O,K,Je),ne=p.centerPoint.add(W)),pe.easeFunc(Je,Dt,vt,ne),this.terrain&&!n.freezeElevation&&this._updateElevation(Je),this._applyUpdatedTransform(p),this._fireMoveEvents(u)}),(()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,u)}return n||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(n,u,p){p.animate===!1||p.duration===0?(n(1),u()):(this._easeStart=H(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,u){n=c.W(n,-180,180);const p=Math.abs(n-u);return Math.abs(n-360-u)<p&&(n-=360),Math.abs(n+360-u)<p&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLat(c.V.convert(n),this.transform):null}}const Sn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class On{constructor(n=Sn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=U.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=U.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const p=this._map._getUIString(`AttributionControl.${u}`);n.title=p,n.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const u=this._map.style.tileManagers;for(const _ in u){const T=u[_];if(T.used||T.usedForTerrain){const M=T.getSource();M.attribution&&n.indexOf(M.attribution)<0&&n.push(M.attribution)}}n=n.filter((_=>String(_).trim())),n.sort(((_,T)=>_.length-T.length)),n=n.filter(((_,T)=>{for(let M=T+1;M<n.length;M++)if(n[M].indexOf(_)>=0)return!1;return!0}));const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=U.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Dh{constructor(n={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=U.create("div","maplibregl-ctrl");const u=U.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){U.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Rs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const _ of p)if(_.id===n)return void(_.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var br=c.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Br extends c.E{constructor(n){super(),this._lastTilesetChange=H(),this.tileManager=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(n,u){this.tileManager.update(n,u),this._renderableTilesKeys=[];const p={};for(const _ of fn(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.tileManager._source.calculateTileZoom}))p[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),c.c7(_.terrainRttPosMatrix32f,0,c.a5,c.a5,0,0,1),this._tiles[_.key]=new Oe(_,this.tileSize),this._lastTilesetChange=H());for(const _ in this._tiles)p[_]||delete this._tiles[_]}freeRtt(n){for(const u in this._tiles){const p=this._tiles[u];(!n||p.tileID.equals(n)||p.tileID.isChildOf(n)||n.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((n=>this.getTileByID(n)))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,u){return u?this._getTerrainCoordsForTileRanges(n,u):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const u={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID,T=n.clone(),M=c.bk();if(_.canonical.equals(n.canonical))c.c7(M,0,c.a5,c.a5,0,0,1);else if(_.canonical.isChildOf(n.canonical)){const O=_.canonical.z-n.canonical.z,R=_.canonical.x-(_.canonical.x>>O<<O),V=_.canonical.y-(_.canonical.y>>O<<O),q=c.a5>>O;c.c7(M,0,q,q,0,0,1),c.O(M,M,[-R*q,-V*q,0])}else{if(!n.canonical.isChildOf(_.canonical))continue;{const O=n.canonical.z-_.canonical.z,R=n.canonical.x-(n.canonical.x>>O<<O),V=n.canonical.y-(n.canonical.y>>O<<O),q=c.a5>>O;c.c7(M,0,c.a5,c.a5,0,0,1),c.O(M,M,[R*q,V*q,0]),c.Q(M,M,[1/2**O,1/2**O,0])}}T.terrainRttPosMatrix32f=new Float32Array(M),u[p]=T}return u}_getTerrainCoordsForTileRanges(n,u){const p={};for(const _ of this._renderableTilesKeys){const T=this._tiles[_].tileID;if(!this._isWithinTileRanges(T,u))continue;const M=n.clone(),O=c.bk();if(T.canonical.z===n.canonical.z){const R=n.canonical.x-T.canonical.x+n.wrap*(1<<n.canonical.z),V=n.canonical.y-T.canonical.y;c.c7(O,0,c.a5,c.a5,0,0,1),c.O(O,O,[R*c.a5,V*c.a5,0])}else if(T.canonical.z>n.canonical.z){const R=T.canonical.z-n.canonical.z,V=T.canonical.x-(T.canonical.x>>R<<R)+n.wrap*(1<<T.canonical.z),q=T.canonical.y-(T.canonical.y>>R<<R),K=n.canonical.x-(T.canonical.x>>R),W=n.canonical.y-(T.canonical.y>>R),ne=c.a5>>R;c.c7(O,0,ne,ne,0,0,1),c.O(O,O,[-V*ne+K*c.a5,-q*ne+W*c.a5,0])}else{const R=n.canonical.z-T.canonical.z,V=n.canonical.x-(n.canonical.x>>R<<R)+n.wrap*(1<<n.canonical.z),q=n.canonical.y-(n.canonical.y>>R<<R),K=(n.canonical.x>>R)-T.canonical.x,W=(n.canonical.y>>R)-T.canonical.y,ne=c.a5<<R;c.c7(O,0,ne,ne,0,0,1),c.O(O,O,[V*c.a5+K*ne,q*c.a5+W*ne,0])}M.terrainRttPosMatrix32f=new Float32Array(O),p[_]=M}return p}getSourceTile(n,u){const p=this.tileManager._source;let _=n.overscaledZ-this.deltaZoom;if(_>p.maxzoom&&(_=p.maxzoom),_<p.minzoom)return;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(_).key);let T=this.findTileInCaches(this._sourceTileCache[n.key]);if(!T?.dem&&u)for(;_>=p.minzoom&&!T?.dem;)T=this.findTileInCaches(n.scaledTo(_--).key);return T}findTileInCaches(n){let u=this.tileManager.getTileByID(n);return u||(u=this.tileManager._outOfViewCache.getByKey(n),u)}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,u){const p=u[n.canonical.z];return!!p&&(n.wrap>p.minWrap||n.wrap<p.maxWrap||n.canonical.x>=p.minTileXWrapped&&n.canonical.x<=p.maxTileXWrapped&&n.canonical.y>=p.minTileY&&n.canonical.y<=p.maxTileY)}}class vr{constructor(n,u,p){this._meshCache={},this.painter=n,this.tileManager=new Br(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,p,_=c.a5){var T;const M=n.normalizeCoordinates(u,p,_);if(!M)return 0;const O=this.getTerrainData(M.tileID),R=(T=O.tile)===null||T===void 0?void 0:T.dem;if(!R)return 0;const V=c.cD([],[M.x/_*c.a5,M.y/_*c.a5],O.u_terrain_matrix),q=[V[0]*R.dim,V[1]*R.dim],K=Math.floor(q[0]),W=Math.floor(q[1]),ne=q[0]-K,le=q[1]-W;return R.get(K,W)*(1-ne)*(1-le)+R.get(K+1,W)*ne*(1-le)+R.get(K,W+1)*(1-ne)*le+R.get(K+1,W+1)*ne*le}getElevationForLngLatZoom(n,u){if(!c.cE(u,n.wrap()))return 0;const{tileID:p,mercatorX:_,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(n,u);return this.getElevation(p,_%c.a5,T%c.a5,c.a5)}getElevationForLngLat(n,u){const p=fn(u,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let _=0;for(const T of p)T.canonical.z>_&&(_=Math.min(T.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(n,_)}getElevation(n,u,p,_=c.a5){return this.getDEMElevation(n,u,p,_)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const _=this.painter.context,T=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(_,T,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(_,new c.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ar([])}const u=this.tileManager.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const _=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new c.T(_,u.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),u.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u.toString()+u.tileID.key+n.key;if(p&&!this._demMatrixCache[p]){const _=this.tileManager.getSource().maxzoom;let T=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=_?T=n.canonical.z-_:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=n.canonical.x-(n.canonical.x>>T<<T),O=n.canonical.y-(n.canonical.y>>T<<T),R=c.cF(new Float64Array(16),[1/(c.a5<<T),1/(c.a5<<T),0]);c.O(R,R,[M*c.a5,O*c.a5,0]),this._demMatrixCache[n.key]={matrix:R,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,p=u.width/devicePixelRatio,_=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(u.context,{width:p,height:_,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,_,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,_))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,M=0;T<this._coordsTextureSize;T++)for(let O=0;O<this._coordsTextureSize;O++,M+=4)u[M+0]=255&O,u[M+1]=255&T,u[M+2]=O>>8<<4|T>>8,u[M+3]=0;const p=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),_=new c.T(n,p,n.gl.RGBA,{premultiply:!1});return _.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,_=p.gl,T=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),M=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(T,O-M-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const R=u[0]+(u[2]>>4<<8),V=u[1]+((15&u[2])<<8),q=this.coordsIndex[255-u[3]],K=q&&this.tileManager.getTileByID(q);if(!K)return null;const W=this._coordsTextureSize,ne=(1<<K.tileID.canonical.z)*W;return new c.a9((K.tileID.canonical.x*W+R)/ne+K.tileID.wrap,(K.tileID.canonical.y*W+V)/ne,this.getElevation(K.tileID,R,V,W))}depthAtPoint(n){const u=new Uint8Array(4),p=this.painter.context,_=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(n){var u;const p=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,_=p&&n.canonical.y===0,T=p&&n.canonical.y===(1<<n.canonical.z)-1,M=`m_${_?"n":""}_${T?"s":""}`;if(this._meshCache[M])return this._meshCache[M];const O=this.painter.context,R=new c.cG,V=new c.aY,q=this.meshSize,K=c.a5/q,W=q*q;for(let Se=0;Se<=q;Se++)for(let je=0;je<=q;je++)R.emplaceBack(je*K,Se*K,0);for(let Se=0;Se<W;Se+=q+1)for(let je=0;je<q;je++)V.emplaceBack(je+Se,q+je+Se+1,q+je+Se+2),V.emplaceBack(je+Se,q+je+Se+2,je+Se+1);const ne=R.length,le=ne+(q+1),pe=(q+1)*q,ye=_?c.br:0,ge=_?0:1,xe=T?c.bs:c.a5,De=T?0:1;for(let Se=0;Se<=q;Se++)R.emplaceBack(Se*K,ye,ge);for(let Se=0;Se<=q;Se++)R.emplaceBack(Se*K,xe,De);for(let Se=0;Se<q;Se++)V.emplaceBack(pe+Se,le+Se,le+Se+1),V.emplaceBack(pe+Se,le+Se+1,pe+Se+1),V.emplaceBack(0+Se,ne+Se+1,ne+Se),V.emplaceBack(0+Se,0+Se+1,ne+Se+1);const be=R.length,Ce=be+2*(q+1);for(const Se of[0,1])for(let je=0;je<=q;je++)for(const et of[0,1])R.emplaceBack(Se*c.a5,je*K,et);for(let Se=0;Se<2*q;Se+=2)V.emplaceBack(be+Se,be+Se+1,be+Se+3),V.emplaceBack(be+Se,be+Se+3,be+Se+2),V.emplaceBack(Ce+Se,Ce+Se+3,Ce+Se+1),V.emplaceBack(Ce+Se,Ce+Se+2,Ce+Se+3);const ke=new Wr(O.createVertexBuffer(R,br.members),O.createIndexBuffer(V),c.aX.simpleSegment(0,0,R.length,V.length));return this._meshCache[M]=ke,ke}getMeshFrameDelta(n){return 2*Math.PI*c.bE/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,u){var p;if(!c.cE(u,n.wrap()))return 0;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(n,u);return(p=this.getMinMaxElevation(_).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(n,u){const p=c.a9.fromLngLat(n.wrap()),_=(1<<u)*c.a5,T=p.x*_,M=p.y*_,O=Math.floor(T/c.a5),R=Math.floor(M/c.a5);return{tileID:new c.a2(u,0,u,O,R),mercatorX:T,mercatorY:M}}}class yn{constructor(n,u,p){this._context=n,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:n,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>n.id!==u)),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((n=>!n.inUse))===!1}}const io={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Eo{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new yn(n.context,30,u.tileManager.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){var p,_;this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=n._order.filter((T=>!n._layers[T].isHidden(u))),this._coordsAscending={};for(const T in n.tileManagers){this._coordsAscending[T]={};const M=n.tileManagers[T].getVisibleCoordinates(),O=n.tileManagers[T].getSource(),R=O instanceof _a?O.terrainTileRanges:null;for(const V of M){const q=this.terrain.tileManager.getTerrainCoords(V,R);for(const K in q)this._coordsAscending[T][K]||(this._coordsAscending[T][K]=[]),this._coordsAscending[T][K].push(q[K])}}this._rttFingerprints={};for(const T of n._order){const M=n._layers[T],O=M.source;if(io[M.type]&&!this._rttFingerprints[O]){this._rttFingerprints[O]={};const R=(_=(p=n.tileManagers[O])===null||p===void 0?void 0:p.getState().revision)!==null&&_!==void 0?_:0;for(const V in this._coordsAscending[O])this._rttFingerprints[O][V]=`${this._coordsAscending[O][V].map((q=>q.key)).sort().join()}#${R}`}}for(const T of this._renderableTiles)for(const M in this._rttFingerprints){const O=this._rttFingerprints[M][T.tileID.key];O&&O!==T.rttFingerprint[M]&&(T.rtt=[])}}renderLayer(n,u){if(n.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),_=n.type,T=this.painter,M=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(io[_]&&(this._prevType&&io[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(n.id),!M))return!0;if(io[this._prevType]||io[_]&&M){this._prevType=_;const O=this._stacks.length-1,R=this._stacks[O]||[];for(const V of this._renderableTiles){if(this.pool.isFull()&&(Uf(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(V),V.rtt[O]){const K=this.pool.getObjectForId(V.rtt[O].id);if(K.stamp===V.rtt[O].stamp){this.pool.useObject(K);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),V.rtt[O]={id:q.id,stamp:q.stamp},T.context.bindFramebuffer.set(q.fbo.framebuffer),T.context.clear({color:c.bp.transparent,stencil:0}),T.currentStencilSource=void 0;for(let K=0;K<R.length;K++){const W=T.style._layers[R[K]],ne=W.source?this._coordsAscending[W.source][V.tileID.key]:[V.tileID];T.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),T._renderTileClippingMasks(W,ne,!0),T.renderLayer(T,T.style.tileManagers[W.source],W,ne,p),W.source&&(V.rttFingerprint[W.source]=this._rttFingerprints[W.source][V.tileID.key])}}return Uf(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),io[_]}return!1}}const fc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Drag to rotate map, click to reset north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},dc=A,Ls={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:Sn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Qd={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class cn{constructor(n,u,p=!1){this.mousedown=T=>{this.startMove(T,U.mousePos(this.element,T)),U.addEventListener(window,"mousemove",this.mousemove),U.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,U.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),U.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=U.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const _=new Th;this._rotatePitchHandler=new to({clickTolerance:3,move:(T,M)=>{const O=u.getBoundingClientRect(),R=new c.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:c.cy(new c.P(T.x,M.y),M,R),pitchDelta:p?-.5*(M.y-T.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=n,U.addEventListener(u,"mousedown",this.mousedown),U.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(u,"touchcancel",this.reset)}startMove(n,u){this._rotatePitchHandler.dragStart(n,u),U.disableDrag()}move(n,u){const p=this.map,{bearingDelta:_,pitchDelta:T}=this._rotatePitchHandler.dragMove(n,u)||{};_&&p.setBearing(p.getBearing()+_),T&&p.setPitch(p.getPitch()+T)}off(){const n=this.element;U.removeEventListener(n,"mousedown",this.mousedown),U.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.removeEventListener(window,"touchend",this.touchend),U.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){U.enableDrag(),U.removeEventListener(window,"mousemove",this.mousemove),U.removeEventListener(window,"mouseup",this.mouseup),U.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.removeEventListener(window,"touchend",this.touchend)}}let Ao;function pu(w,n,u,p=!1){if(p||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const _=new c.V(w.lng,w.lat);if(w=new c.V(w.lng,w.lat),n){const T=new c.V(w.lng-360,w.lat),M=new c.V(w.lng+360,w.lat),O=u.locationToScreenPoint(w).distSqr(n);u.locationToScreenPoint(T).distSqr(n)<O?w=T:u.locationToScreenPoint(M).distSqr(n)<O&&(w=M)}for(;Math.abs(w.lng-u.center.lng)>180;){const T=u.locationToScreenPoint(w);if(T.x>=0&&T.y>=0&&T.x<=u.width&&T.y<=u.height)break;w.lng>u.center.lng?w.lng-=360:w.lng+=360}return w.lng!==_.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(w))?w:_}const mu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ih(w,n,u){const p=w.classList;for(const _ in mu)p.remove(`maplibregl-${u}-anchor-${_}`);p.add(`maplibregl-${u}-anchor-${n}`)}class Oh extends c.E{constructor(n){if(super(),this._onClick=u=>{this.fire(new c.l("click",{originalEvent:u}))},this._onKeyPress=u=>{const p=u.code,_=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=pu(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),U.setTransform(this._element,`${mu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${_}`),G.frameAsync(new AbortController,this._map._ownerWindow).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=c.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div");const u=U.createNS("http://www.w3.org/2000/svg","svg"),p=41,_=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${_}px`),u.setAttributeNS(null,"viewBox",`0 0 ${_} ${p}`);const T=U.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const M=U.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"fill-rule","nonzero");const O=U.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ge of R){const xe=U.createNS("http://www.w3.org/2000/svg","ellipse");xe.setAttributeNS(null,"opacity","0.04"),xe.setAttributeNS(null,"cx","10.5"),xe.setAttributeNS(null,"cy","5.80029008"),xe.setAttributeNS(null,"rx",ge.rx),xe.setAttributeNS(null,"ry",ge.ry),O.appendChild(xe)}const V=U.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);const q=U.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(q);const K=U.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const W=U.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(W);const ne=U.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ne.setAttributeNS(null,"fill","#FFFFFF");const le=U.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=U.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const ye=U.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),le.appendChild(pe),le.appendChild(ye),M.appendChild(O),M.appendChild(V),M.appendChild(K),M.appendChild(ne),M.appendChild(le),u.appendChild(M),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),Ih(this._element,this._anchor,"marker"),this._element.addEventListener("click",this._onClick),n&&n.className)for(const u of n.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.V.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const _=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var u,p;const _=(u=this._map)===null||u===void 0?void 0:u.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!_||T){const ne=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ne&&(this._element.style.opacity=ne))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const M=this._map,O=M.terrain.depthAtPoint(this._pos),R=M.terrain.getElevationForLngLat(this._lngLat,M.transform);if(M.transform.lngLatToCameraDepth(this._lngLat,R)-O<.006)return void(this._element.style.opacity=this._opacity);const V=-this._offset.y/M.transform.pixelsPerMeter,q=Math.sin(M.getPitch()*Math.PI/180)*V,K=M.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),W=M.transform.lngLatToCameraDepth(this._lngLat,R+q)-K>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=c.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,u){return(this._opacity===void 0||n===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const zh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let wl=0,Bs=!1;const Ti={maxWidth:100,unit:"metric"};function vn(w,n,u){const p=u&&u.maxWidth||100,_=w._container.clientHeight/2,T=w._container.clientWidth/2,M=w.unproject([T-p/2,_]),O=w.unproject([T+p/2,_]),R=Math.round(w.project(O).x-w.project(M).x),V=Math.min(p,R,w._container.clientWidth),q=M.distanceTo(O);if(u&&u.unit==="imperial"){const K=3.2808*q;K>5280?us(n,V,K/5280,w._getUIString("ScaleControl.Miles")):us(n,V,K,w._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?us(n,V,q/1852,w._getUIString("ScaleControl.NauticalMiles")):q>=1e3?us(n,V,q/1e3,w._getUIString("ScaleControl.Kilometers")):us(n,V,q,w._getUIString("ScaleControl.Meters"))}function us(w,n,u,p){const _=(function(T){const M=Math.pow(10,`${Math.floor(T)}`.length-1);let O=T/M;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(R){const V=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*V)/V})(O),M*O})(u);w.style.width=n*(_/u)+"px",w.innerHTML=`${_}&nbsp;${p}`}const pc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},mc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function gu(w){if(w){if(typeof w=="number"){const n=Math.round(Math.abs(w)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,w),"top-left":new c.P(n,n),"top-right":new c.P(-n,n),bottom:new c.P(0,-w),"bottom-left":new c.P(n,-n),"bottom-right":new c.P(-n,-n),left:new c.P(w,0),right:new c.P(-w,0)}}if(w instanceof c.P||Array.isArray(w)){const n=c.P.convert(w);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.P.convert(w.center||[0,0]),top:c.P.convert(w.top||[0,0]),"top-left":c.P.convert(w["top-left"]||[0,0]),"top-right":c.P.convert(w["top-right"]||[0,0]),bottom:c.P.convert(w.bottom||[0,0]),"bottom-left":c.P.convert(w["bottom-left"]||[0,0]),"bottom-right":c.P.convert(w["bottom-right"]||[0,0]),left:c.P.convert(w.left||[0,0]),right:c.P.convert(w.right||[0,0])}}return gu(new c.P(0,0))}const Mo=A;y.AJAXError=c.cJ,y.EXTENT=c.a5,y.Event=c.l,y.Evented=c.E,y.LngLat=c.V,y.MercatorCoordinate=c.a9,y.Point=c.P,y.addProtocol=c.cK,y.config=c.c,y.removeProtocol=c.cL,y.AttributionControl=On,y.BoxZoomHandler=bl,y.CanvasSource=xs,y.CooperativeGesturesHandler=Bt,y.DoubleClickZoomHandler=Yf,y.DragPanHandler=Kd,y.DragRotateHandler=Da,y.EdgeInsets=xa,y.FullscreenControl=class extends c.E{constructor(w={}){var n;super(),this._onFullscreenChange=()=>{var u;let p=window.document.fullscreenElement||window.document.webkitFullscreenElement;for(;!((u=p?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,this._pseudo=(n=w.pseudo)!==null&&n!==void 0&&n,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){U.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=U.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);U.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){this._pseudo?this._togglePseudoFullScreen():window.document.exitFullscreen?window.document.exitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._pseudo?this._togglePseudoFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},y.GeoJSONSource=ni,y.GeolocateControl=class extends c.E{constructor(w){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const u=new c.V(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,_=this._map.getBearing(),T=c.e({bearing:_},this.options.fitBoundsOptions),M=Lr.fromLngLat(u,p);this._map.fitBounds(M,T,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const u=new c.V(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Bs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this._geolocateButton=U.create("button","maplibregl-ctrl-geolocate",this._container),U.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Oh({element:this._dotElement}),this._circleElement=U.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Oh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{const p=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},zh,w)}onAdd(w){return this._map=w,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(n=!1){if(Ao!==void 0&&!n)return Ao;if(window.navigator.permissions===void 0)return Ao=!!window.navigator.geolocation,Ao;try{Ao=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ao=!!window.navigator.geolocation}return Ao}))})().then((n=>this._finishSetupUI(n))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,wl=0,Bs=!1}_isOutOfMapMaxBounds(w){const n=this._map.getMaxBounds(),u=w.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const n=this._map.project(w),u=this._map.unproject([n.x+100,n.y]),p=w.distanceTo(u)/100,_=2*this._accuracy/p;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":wl--,Bs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),wl++,wl>1?(w={maximumAge:6e5,timeout:0},Bs=!0):(w=this.options.positionOptions,Bs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},y.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const n=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=U.create("button","maplibregl-ctrl-globe",this._container),U.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._map.on("projectiontransition",this._updateGlobeIcon),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._map.off("projectiontransition",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},y.Hash=Nn,y.ImageSource=_a,y.KeyboardHandler=Vr,y.LngLatBounds=Lr,y.LogoControl=Dh,y.Map=class extends Fn{get _ownerWindow(){var w,n;return((n=(w=this._container)===null||w===void 0?void 0:w.ownerDocument)===null||n===void 0?void 0:n.defaultView)||window}constructor(w){var n,u;c.cH.mark(c.cI.create);const p=Object.assign(Object.assign(Object.assign({},Ls),w),{canvasContextAttributes:Object.assign(Object.assign({},Ls.canvasContextAttributes),w.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new Kn,T=new Kl;p.minZoom!==void 0&&_.setMinZoom(p.minZoom),p.maxZoom!==void 0&&_.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&_.setMinPitch(p.minPitch),p.maxPitch!==void 0&&_.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&_.setRenderWorldCopies(p.renderWorldCopies),p.transformConstrain!==null&&_.setConstrainOverride(p.transformConstrain),super(_,T,{bearingSnap:p.bearingSnap,zoomSnap:p.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Rs,this._controls=[],this._mapId=c.af(),this._lostContextStyle={style:null,images:null},this._contextLost=O=>{if(O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy(),this._lostContextStyle=this._getStyleAndImages(),this.style){for(const R of Object.values(this.style._layers))if(R.type==="custom"&&console.warn(`Custom layer with id '${R.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),R._listeners)for(const[V]of Object.entries(R._listeners))console.warn(`Custom layer with id '${R.id}' had event listeners for event '${V}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this.style.destroy(),this.style=null,this.fire(new c.l("webglcontextlost",{originalEvent:O}))}else this.fire(new c.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new c.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._zoomSnap=p.zoomSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},fc),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this._zoomLevelsToOverscale=p.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=p.transformCameraUpdate,this.transformConstrain=p.transformConstrain,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,p.reduceMotion!==void 0&&(G.prefersReducedMotion=p.reduceMotion),this._imageQueueHandle=ze.addThrottleControl((()=>this.isMoving())),this._requestManager=new Ke(p.transformRequest),this._container=this._resolveContainer(p.container),p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new Ch(this,p),this._hash=p.hash&&new Nn(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,c.e({},p.fitBoundsOptions,{duration:0}))));const M=typeof p.style=="string"||((u=(n=p.style)===null||n===void 0?void 0:n.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,M),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new On(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new Dh,p.logoPosition),this.on("style.load",(()=>{if(M||this._resizeTransform(),this.transform.unmodified){const O=c.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}})),this.on("data",(O=>{this._update(O.dataType==="style"),this.fire(new c.l(`${O.dataType}data`,O))})),this.on("dataloading",(O=>{this.fire(new c.l(`${O.dataType}dataloading`,O))})),this.on("dataabort",(O=>{this.fire(new c.l("sourcedataabort",O))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,n){return this.style.setGlobalStateProperty(w,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,n){if(n===void 0&&(n=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=w.onAdd(this);this._controls.push(w);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(w);return n>-1&&this._controls.splice(n,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return fn(this.transform,w)}calculateCameraOptionsFromTo(w,n,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLat(u,this.transform)),super.calculateCameraOptionsFromTo(w,n,u,p)}resize(w,n=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(n);const u=!this._moving;return u&&(this.stop(),this.fire(new c.l("movestart",w)).fire(new c.l("move",w))),this.fire(new c.l("resize",w)),u&&this.fire(new c.l("moveend",w)),this}_resizeInternal(w=!0){const[n,u]=this._containerDimensions(),p=this._getClampedPixelRatio(n,u);if(this._resizeCanvas(n,u,p),this.painter.resize(n,u,p),this.painter.overLimit()){const _=this.painter.context.gl;this._maxCanvasSize=[_.drawingBufferWidth,_.drawingBufferHeight];const T=this._getClampedPixelRatio(n,u);this._resizeCanvas(n,u,T),this.painter.resize(n,u,T)}this._resizeTransform(w)}_resizeTransform(w=!0){var n;const[u,p]=this._containerDimensions();this.transform.resize(u,p,w),(n=this._requestedCameraState)===null||n===void 0||n.resize(u,p,w)}_getClampedPixelRatio(w,n){const{0:u,1:p}=this._maxCanvasSize,_=this.getPixelRatio(),T=w*_,M=n*_;return Math.min(T>u?u/T:1,M>p?p/M:1)*_}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Lr.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const n=this.transform.zoom,u=this._getTransformForUpdate();return u.setMinZoom(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.zoom&&this.fire(new c.l("zoomstart")).fire(new c.l("zoom")).fire(new c.l("zoomend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const n=this.transform.zoom,u=this._getTransformForUpdate();return u.setMaxZoom(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.zoom&&this.fire(new c.l("zoomstart")).fire(new c.l("zoom")).fire(new c.l("zoomend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch){const n=this.transform.pitch,u=this._getTransformForUpdate();return u.setMinPitch(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.pitch&&this.fire(new c.l("pitchstart")).fire(new c.l("pitch")).fire(new c.l("pitchend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch){const n=this.transform.pitch,u=this._getTransformForUpdate();return u.setMaxPitch(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.pitch&&this.fire(new c.l("pitchstart")).fire(new c.l("pitch")).fire(new c.l("pitchend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(c.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(c.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,n,u){if(w==="mouseenter"||w==="mouseover"){let p=!1;return{layers:n,listener:u,delegates:{mousemove:T=>{const M=n.filter((R=>this.getLayer(R))),O=M.length!==0?this.queryRenderedFeatures(T.point,{layers:M}):[];O.length?p||(p=!0,u.call(this,new si(w,this,T.originalEvent,{features:O}))):p=!1},mouseout:()=>{p=!1}}}}if(w==="mouseleave"||w==="mouseout"){let p=!1;return{layers:n,listener:u,delegates:{mousemove:M=>{const O=n.filter((R=>this.getLayer(R)));(O.length!==0?this.queryRenderedFeatures(M.point,{layers:O}):[]).length?p=!0:p&&(p=!1,u.call(this,new si(w,this,M.originalEvent)))},mouseout:M=>{p&&(p=!1,u.call(this,new si(w,this,M.originalEvent)))}}}}{const p=_=>{const T=n.filter((O=>this.getLayer(O))),M=T.length!==0?this.queryRenderedFeatures(_.point,{layers:T}):[];M.length&&(_.features=M,u.call(this,_),delete _.features)};return{layers:n,listener:u,delegates:{[w]:p}}}}_saveDelegatedListener(w,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(n)}_removeDelegatedListener(w,n,u){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const p=this._delegatedListeners[w];for(let _=0;_<p.length;_++){const T=p[_];if(T.listener===u&&T.layers.length===n.length&&T.layers.every((M=>n.includes(M)))){for(const M in T.delegates)this.off(M,T.delegates[M]);return void p.splice(_,1)}}}on(w,n,u){if(u===void 0)return super.on(w,n);const p=typeof n=="string"?[n]:n,_=this._createDelegatedListener(w,p,u);this._saveDelegatedListener(w,_);for(const T in _.delegates)this.on(T,_.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(w,p,u)}}}once(w,n,u){if(u===void 0)return super.once(w,n);const p=typeof n=="string"?[n]:n,_=this._createDelegatedListener(w,p,u);for(const T in _.delegates){const M=_.delegates[T];_.delegates[T]=(...O)=>{this._removeDelegatedListener(w,p,u),M(...O)}}this._saveDelegatedListener(w,_);for(const T in _.delegates)this.once(T,_.delegates[T]);return this}off(w,n,u){return u===void 0?super.off(w,n):(this._removeDelegatedListener(w,typeof n=="string"?[n]:n,u),this)}queryRenderedFeatures(w,n){if(!this.style)return[];let u;const p=w instanceof c.P||Array.isArray(w),_=p?w:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(p?{}:w)||{},_ instanceof c.P||typeof _[0]=="number")u=[c.P.convert(_)];else{const T=c.P.convert(_[0]),M=c.P.convert(_[1]);u=[T,new c.P(M.x,T.y),M,new c.P(T.x,M.y),T]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(w,n){return this.style.querySourceFeatures(w,n)}setStyle(w,n){return(n=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(w,n))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const n=this._locale[w];if(n==null)throw new Error(`Missing UI string '${w}'`);return n}_updateStyle(w,n){var u,p;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,n)));const _=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new ul(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,n,_):this.style.loadJSON(w,n,_),this):((p=(u=this.style)===null||u===void 0?void 0:u.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ul(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,n){if(typeof w=="string"){const u=this._requestManager.transformRequest(w,"Style");c.j(u,new AbortController).then((p=>{this._updateDiff(p.data,n)})).catch((p=>{p&&this.fire(new c.k(p))}))}else typeof w=="object"&&this._updateDiff(w,n)}_updateDiff(w,n){try{this.style.setState(w,n)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(w,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(w,n){return this._lazyInitEmptyStyle(),this.style.addSource(w,n),this._update(!0)}isSourceLoaded(w){const n=this.style&&this.style.tileManagers[w];if(n!==void 0)return n.loaded();this.fire(new c.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const n=this.style.tileManagers[w.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&n.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===w.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===w.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vr(this.painter,n,w),this.painter.renderToTexture=new Eo(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var p;u.dataType==="style"?this.terrain.tileManager.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=u.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:w})),this}getTerrain(){var w,n;return(n=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const n of Object.values(w))if(!n.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,n,u){if(u){const p=this.getSource(u);if(!p)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);p.calculateTileZoom=Qt(Math.max(1,w),Math.max(1,n))}else for(const p in this.style.tileManagers)this.style.tileManagers[p].getSource().calculateTileZoom=Qt(Math.max(1,w),Math.max(1,n));return this._update(!0),this}refreshTiles(w,n){const u=this.style.tileManagers[w];if(!u)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);n===void 0?u.reload(!0):u.refreshTiles(n.map((p=>new c.ac(p.z,p.x,p.y))))}addImage(w,n,u={}){const{pixelRatio:p=1,sdf:_=!1,stretchX:T,stretchY:M,content:O,textFitWidth:R,textFitHeight:V}=u;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||c.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:K,data:W}=n,ne=n;return this.style.addImage(w,{data:new c.R({width:q,height:K},new Uint8Array(W)),pixelRatio:p,stretchX:T,stretchY:M,content:O,textFitWidth:R,textFitHeight:V,sdf:_,version:0,userImage:ne}),ne.onAdd&&ne.onAdd(this,w),this}}{const{width:q,height:K,data:W}=G.getImageData(n);this.style.addImage(w,{data:new c.R({width:q,height:K},W),pixelRatio:p,stretchX:T,stretchY:M,content:O,textFitWidth:R,textFitHeight:V,sdf:_,version:0})}}updateImage(w,n){const u=this.style.getImage(w);if(!u)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||c.b(n)?G.getImageData(n):n,{width:_,height:T,data:M}=p;if(_===void 0||T===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==u.data.width||T!==u.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(n instanceof HTMLImageElement||c.b(n));return u.data.replace(M,O),this.style.updateImage(w,u),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return ze.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,n){return this._lazyInitEmptyStyle(),this.style.addLayer(w,n),this._update(!0)}moveLayer(w,n){return this.style.moveLayer(w,n),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,n,u){return this.style.setLayerZoomRange(w,n,u),this._update(!0)}setFilter(w,n,u={}){return this.style.setFilter(w,n,u),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,n,u,p={}){return this.style.setPaintProperty(w,n,u,p),this._update(!0)}getPaintProperty(w,n){return this.style.getPaintProperty(w,n)}setLayoutProperty(w,n,u,p={}){return this.style.setLayoutProperty(w,n,u,p),this._update(!0)}getLayoutProperty(w,n){return this.style.getLayoutProperty(w,n)}setGlyphs(w,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,n,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,n,u,(p=>{p||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,n,(u=>{u||this._update(!0)})),this}setLight(w,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,n){return this.style.setFeatureState(w,n),this._update()}removeFeatureState(w,n){return this.style.removeFeatureState(w,n),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,n=0;return this._container&&(w=this._container.clientWidth||400,n=this._container.clientHeight||300),[w,n]}_setupResizeObserver(){var w;let n=!1;const u=Yd((_=>{this._trackResize&&!this._removed&&(this.resize(_),this.redraw())}),50),p=(w=this._ownerWindow.ResizeObserver)!==null&&w!==void 0?w:ResizeObserver;this._resizeObserver=new p((_=>{n?u(_):n=!0})),this._resizeObserver.observe(this._container)}_resolveContainer(w){if(typeof w=="string"){const n=document.getElementById(w);if(!n)throw new Error(`Container '${w}' not found.`);return n}if(w instanceof HTMLElement||w&&typeof w=="object"&&w.nodeType===1)return w;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const n=this._canvasContainer=U.create("div","maplibregl-canvas-container",w);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=U.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const _=this._controlContainer=U.create("div","maplibregl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((M=>{T[M]=U.create("div",`maplibregl-ctrl-${M} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,n,u){this._canvas.width=Math.floor(u*w),this._canvas.height=Math.floor(u*n),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",(p=>{n={requestedAttributes:w},p&&(n.statusMessage=p.statusMessage,n.type=p.type)}),{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!u){const p="Failed to initialize WebGL";throw n?(n.message=p,new Error(JSON.stringify(n))):new Error(p)}this.painter=new Am(u,this.transform),oe.testSupport(u)}migrateProjection(w,n){super.migrateProjection(w,n),this.painter.transform=w,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var n,u,p,_,T;const M=this._idleTriggered?this._fadeDuration:0,O=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,W=H();this.style.zoomHistory.update(K,W);const ne=new c.H(K,{now:W,fadeDuration:M,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),le=ne.crossFadingFactor();le===1&&le===this._crossFadingFactor||(R=!0,this._crossFadingFactor=le),this.style.update(ne)}const V=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==O;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||V)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,M,this._crossSourceCollisions,V),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:M,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cH.mark(c.cI.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,c.cH.mark(c.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),ze.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),U.remove(this._canvasContainer),U.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cH.remove(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,G.frame(this._frameRequest,(w=>{c.cH.recordStartOfFrameAt(w),this._frameRequest=null;try{this._render(w)}catch(n){if(!c.Z(n)&&!(function(u){return u.message===vl})(n))throw n}}),(()=>{}),this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return dc}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},y.MapMouseEvent=si,y.MapTouchEvent=wo,y.MapWheelEvent=Vf,y.Marker=Oh,y.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const n=this._map.getZoom(),u=n===this._map.getMaxZoom(),p=n===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);n.title=p,n.setAttribute("aria-label",p)},this.options=c.e({},Qd,w),this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(n=>this._map.zoomIn({},{originalEvent:n}))),U.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(n=>this._map.zoomOut({},{originalEvent:n}))),U.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})})),this._compassIcon=U.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cn(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,n){const u=U.create("button",w,this._container);return u.type="button",u.addEventListener("click",n),u}},y.Popup=class extends c.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=U.create("div","maplibregl-popup",this._map.getContainer()),this._tip=U.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const M of this.options.className.split(" "))this._container.classList.add(M);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=pu(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const u=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const _=gu(this.options.offset);if(!p){const M=this._container.offsetWidth,O=this._container.offsetHeight,R=(function(q){var K,W,ne,le;return q?{top:(K=q.top)!==null&&K!==void 0?K:0,right:(W=q.right)!==null&&W!==void 0?W:0,bottom:(ne=q.bottom)!==null&&ne!==void 0?ne:0,left:(le=q.left)!==null&&le!==void 0?le:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let V;V=u.y+_.bottom.y<O+R.top?["top"]:u.y>this._map.transform.height-O-R.bottom?["bottom"]:[],u.x<M/2+R.left?V.push("left"):u.x>this._map.transform.width-M/2-R.right&&V.push("right"),p=V.length===0?"bottom":V.join("-")}let T=u.add(_[p]);this.options.subpixelPositioning||(T=T.round()),U.setTransform(this._container,`${mu[p]} translate(${T.x}px,${T.y}px)`),Ih(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(pc),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=c.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const n=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=w;p=u.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}setPadding(w){this.options.padding=w,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=U.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(mc);w&&w.focus()}},y.RasterDEMTileSource=Uo,y.RasterTileSource=bs,y.ScaleControl=class{constructor(w){this._onMove=()=>{vn(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,vn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ti),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},y.ScrollZoomHandler=Mh,y.Style=ul,y.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=U.create("button","maplibregl-ctrl-terrain",this._container),U.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){U.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},y.TwoFingersTouchPitchHandler=zs,y.TwoFingersTouchRotateHandler=Ah,y.TwoFingersTouchZoomHandler=ls,y.TwoFingersTouchZoomRotateHandler=hc,y.VectorTileSource=tl,y.VideoSource=$c,y.addSourceType=(w,n)=>c._(void 0,void 0,void 0,(function*(){if(Xu(w))throw new Error(`A source type called "${w}" already exists.`);((u,p)=>{ws[u]=p})(w,n)})),y.clearPrewarmedResources=function(){const w=Ft;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(wt),Ft=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},y.createTileMesh=dm,y.getMaxParallelImageRequests=function(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS},y.getRTLTextPluginStatus=function(){return ie().getRTLTextPluginStatus()},y.getVersion=function(){return Mo},y.getWorkerCount=function(){return jt.workerCount},y.getWorkerUrl=function(){return c.c.WORKER_URL},y.importScriptInWorkers=function(w){return mr().broadcast("IS",w)},y.isTimeFrozen=function(){return Z.isFrozen()},y.now=H,y.prewarm=function(){pt().acquire(wt)},y.restoreNow=function(){Z.restoreNow()},y.setMaxParallelImageRequests=function(w){c.c.MAX_PARALLEL_IMAGE_REQUESTS=w},y.setNow=function(w){Z.setNow(w)},y.setRTLTextPlugin=function(w,n){return ie().setRTLTextPlugin(w,n)},y.setWorkerCount=function(w){jt.workerCount=w},y.setWorkerUrl=function(w){c.c.WORKER_URL=w}}));var g=i;return g}))})(Q_)),Q_.exports}var t6=e6();const Bc=Vl(t6);var Ys=Uint8Array,Vg=Uint16Array,r6=Int32Array,XD=new Ys([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),WD=new Ys([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),n6=new Ys([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),KD=function(e,t){for(var i=new Vg(31),a=0;a<31;++a)i[a]=t+=1<<e[a-1];for(var d=new r6(i[30]),a=1;a<30;++a)for(var g=i[a];g<i[a+1];++g)d[g]=g-i[a]<<5|a;return{b:i,r:d}},QD=KD(XD,2),JD=QD.b,i6=QD.r;JD[28]=258,i6[258]=28;var a6=KD(WD,0),o6=a6.b,r2=new Vg(32768);for(var Xn=0;Xn<32768;++Xn){var vd=(Xn&43690)>>1|(Xn&21845)<<1;vd=(vd&52428)>>2|(vd&13107)<<2,vd=(vd&61680)>>4|(vd&3855)<<4,r2[Xn]=((vd&65280)>>8|(vd&255)<<8)>>1}var R0=(function(e,t,i){for(var a=e.length,d=0,g=new Vg(t);d<a;++d)e[d]&&++g[e[d]-1];var y=new Vg(t);for(d=1;d<t;++d)y[d]=y[d-1]+g[d-1]<<1;var c;if(i){c=new Vg(1<<t);var A=15-t;for(d=0;d<a;++d)if(e[d])for(var P=d<<4|e[d],C=t-e[d],I=y[e[d]-1]++<<C,B=I|(1<<C)-1;I<=B;++I)c[r2[I]>>A]=P}else for(c=new Vg(a),d=0;d<a;++d)e[d]&&(c[d]=r2[y[e[d]-1]++]>>15-e[d]);return c}),av=new Ys(288);for(var Xn=0;Xn<144;++Xn)av[Xn]=8;for(var Xn=144;Xn<256;++Xn)av[Xn]=9;for(var Xn=256;Xn<280;++Xn)av[Xn]=7;for(var Xn=280;Xn<288;++Xn)av[Xn]=8;var eI=new Ys(32);for(var Xn=0;Xn<32;++Xn)eI[Xn]=5;var s6=R0(av,9,1),l6=R0(eI,5,1),m1=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Lc=function(e,t,i){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&i},g1=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},c6=function(e){return(e+7)/8|0},u6=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new Ys(e.subarray(t,i))},h6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hs=function(e,t,i){var a=new Error(t||h6[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Hs),!i)throw a;return a},cS=function(e,t,i,a){var d=e.length,g=0;if(!d||t.f&&!t.l)return i||new Ys(0);var y=!i,c=y||t.i!=2,A=t.i;y&&(i=new Ys(d*3));var P=function(mr){var At=i.length;if(mr>At){var Mn=new Ys(Math.max(At*2,mr));Mn.set(i),i=Mn}},C=t.f||0,I=t.p||0,B=t.b||0,G=t.l,Z=t.d,H=t.m,U=t.n,oe=d*8;do{if(!G){C=Lc(e,I,1);var ce=Lc(e,I+1,3);if(I+=3,ce)if(ce==1)G=s6,Z=l6,H=9,U=5;else if(ce==2){var Me=Lc(e,I,31)+257,ze=Lc(e,I+10,15)+4,Ke=Me+Lc(e,I+5,31)+1;I+=14;for(var mt=new Ys(Ke),zt=new Ys(19),Ge=0;Ge<ze;++Ge)zt[n6[Ge]]=Lc(e,I+Ge*3,7);I+=ze*3;for(var Te=m1(zt),dt=(1<<Te)-1,It=R0(zt,Te,1),Ge=0;Ge<Ke;){var Rt=It[Lc(e,I,dt)];I+=Rt&15;var fe=Rt>>4;if(fe<16)mt[Ge++]=fe;else{var Ve=0,it=0;for(fe==16?(it=3+Lc(e,I,3),I+=2,Ve=mt[Ge-1]):fe==17?(it=3+Lc(e,I,7),I+=3):fe==18&&(it=11+Lc(e,I,127),I+=7);it--;)mt[Ge++]=Ve}}var Mt=mt.subarray(0,Me),Be=mt.subarray(Me);H=m1(Mt),U=m1(Be),G=R0(Mt,H,1),Z=R0(Be,U,1)}else Hs(1);else{var fe=c6(I)+4,ve=e[fe-4]|e[fe-3]<<8,Ee=fe+ve;if(Ee>d){A&&Hs(0);break}c&&P(B+ve),i.set(e.subarray(fe,Ee),B),t.b=B+=ve,t.p=I=Ee*8,t.f=C;continue}if(I>oe){A&&Hs(0);break}}c&&P(B+131072);for(var yt=(1<<H)-1,Ae=(1<<U)-1,qe=I;;qe=I){var Ve=G[g1(e,I)&yt],ct=Ve>>4;if(I+=Ve&15,I>oe){A&&Hs(0);break}if(Ve||Hs(2),ct<256)i[B++]=ct;else if(ct==256){qe=I,G=null;break}else{var wt=ct-254;if(ct>264){var Ge=ct-257,jt=XD[Ge];wt=Lc(e,I,(1<<jt)-1)+JD[Ge],I+=jt}var $t=Z[g1(e,I)&Ae],Ft=$t>>4;$t||Hs(3),I+=$t&15;var Be=o6[Ft];if(Ft>3){var jt=WD[Ft];Be+=g1(e,I)&(1<<jt)-1,I+=jt}if(I>oe){A&&Hs(0);break}c&&P(B+131072);var Tr=B+wt;if(B<Be){var pt=g-Be,er=Math.min(Be,Tr);for(pt+B<0&&Hs(3);B<er;++B)i[B]=a[pt+B]}for(;B<Tr;++B)i[B]=i[B-Be]}}t.l=G,t.p=qe,t.b=B,t.f=C,G&&(C=1,t.m=H,t.d=Z,t.n=U)}while(!C);return B!=i.length&&y?u6(i,0,B):i.subarray(0,B)},f6=new Ys(0),d6=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Hs(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=(e[10]|e[11]<<8)+2);for(var a=(t>>3&1)+(t>>4&1);a>0;a-=!e[i++]);return i+(t&2)},p6=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},m6=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Hs(6,"invalid zlib data"),(e[1]>>5&1)==1&&Hs(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function g6(e,t){return cS(e,{i:2},t,t)}function y6(e,t){var i=d6(e);return i+8>e.length&&Hs(6,"invalid gzip data"),cS(e.subarray(i,-8),{i:2},new Ys(p6(e)),t)}function v6(e,t){return cS(e.subarray(m6(e),-4),{i:2},t,t)}function _6(e,t){return e[0]==31&&e[1]==139&&e[2]==8?y6(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?g6(e,t):v6(e,t)}var b6=typeof TextDecoder<"u"&&new TextDecoder,x6=0;try{b6.decode(f6,{stream:!0}),x6=1}catch{}var w6=Object.defineProperty,S6=Math.pow,An=(e,t)=>w6(e,"name",{value:t,configurable:!0}),da=(e,t,i)=>new Promise((a,d)=>{var g=A=>{try{c(i.next(A))}catch(P){d(P)}},y=A=>{try{c(i.throw(A))}catch(P){d(P)}},c=A=>A.done?a(A.value):Promise.resolve(A.value).then(g,y);c((i=i.apply(e,t)).next())});An((e,t)=>{let i=!1,a="",d=L.GridLayer.extend({createTile:An((g,y)=>{let c=document.createElement("img"),A=new AbortController,P=A.signal;return c.cancel=()=>{A.abort()},i||(e.getHeader().then(C=>{C.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):C.tileType===2?a="image/png":C.tileType===3?a="image/jpeg":C.tileType===4?a="image/webp":C.tileType===5&&(a="image/avif")}),i=!0),e.getZxy(g.z,g.x,g.y,P).then(C=>{if(C){let I=new Blob([C.data],{type:a}),B=window.URL.createObjectURL(I);c.src=B}else c.style.display="none";c.cancel=void 0,y(void 0,c)}).catch(C=>{if(C.name!=="AbortError")throw C}),c},"createTile"),_removeTile:An(function(g){let y=this._tiles[g];y&&(y.el.cancel&&y.el.cancel(),y.el.width=0,y.el.height=0,y.el.deleted=!0,L.DomUtil.remove(y.el),delete this._tiles[g],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(g)}))},"_removeTile")});return new d(t)},"leafletRasterLayer");var T6=An(e=>(t,i)=>{if(i instanceof AbortController)return e(t,i);let a=new AbortController;return e(t,a).then(d=>i(void 0,d.data,d.cacheControl||"",d.expires||""),d=>i(d)).catch(d=>i(d)),{cancel:An(()=>a.abort(),"cancel")}},"v3compat"),tI=class{constructor(t){this.tilev4=An((i,a)=>da(this,null,function*(){if(i.type==="json"){let G=i.url.substr(10),Z=this.tiles.get(G);if(Z||(Z=new Wg(G),this.tiles.set(G,Z)),this.metadata){let U=yield Z.getTileJson(i.url);return a.signal.throwIfAborted(),{data:U}}let H=yield Z.getHeader();return a.signal.throwIfAborted(),(H.minLon>=H.maxLon||H.minLat>=H.maxLat)&&console.error(`Bounds of PMTiles archive ${H.minLon},${H.minLat},${H.maxLon},${H.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:H.minZoom,maxzoom:H.maxZoom,bounds:[H.minLon,H.minLat,H.maxLon,H.maxLat]}}}let d=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),g=i.url.match(d);if(!g)throw new Error("Invalid PMTiles protocol URL");let y=g[1],c=this.tiles.get(y);c||(c=new Wg(y),this.tiles.set(y,c));let A=g[2],P=g[3],C=g[4],I=yield c.getHeader(),B=yield c?.getZxy(+A,+P,+C,a.signal);if(a.signal.throwIfAborted(),B)return{data:new Uint8Array(B.data),cacheControl:B.cacheControl,expires:B.expires};if(I.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=T6(this.tilev4),this.tiles=new Map,this.metadata=t?.metadata||!1,this.errorOnMissingTile=t?.errorOnMissingTile||!1}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};An(tI,"Protocol");var uS=tI;function rI(e,t){return(t>>>0)*4294967296+(e>>>0)}An(rI,"toNum");function nI(e,t){let i=t.buf,a=i[t.pos++],d=(a&112)>>4;if(a<128||(a=i[t.pos++],d|=(a&127)<<3,a<128)||(a=i[t.pos++],d|=(a&127)<<10,a<128)||(a=i[t.pos++],d|=(a&127)<<17,a<128)||(a=i[t.pos++],d|=(a&127)<<24,a<128)||(a=i[t.pos++],d|=(a&1)<<31,a<128))return rI(e,d);throw new Error("Expected varint not more than 10 bytes")}An(nI,"readVarintRemainder");function Fg(e){let t=e.buf,i=t[e.pos++],a=i&127;return i<128||(i=t[e.pos++],a|=(i&127)<<7,i<128)||(i=t[e.pos++],a|=(i&127)<<14,i<128)||(i=t[e.pos++],a|=(i&127)<<21,i<128)?a:(i=t[e.pos],a|=(i&15)<<28,nI(a,e))}An(Fg,"readVarint");function hS(e,t,i,a,d){return d===0?a!==0?[e-1-i,e-1-t]:[i,t]:[t,i]}An(hS,"rotate");function iI(e,t,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(t>=1<<e||i>=1<<e)throw new Error("tile x/y outside zoom level bounds");let a=((1<<e)*(1<<e)-1)/3,d=e-1,[g,y]=[t,i];for(let c=1<<d;c>0;c>>=1){let A=g&c,P=y&c;a+=(3*A^P)*(1<<d),[g,y]=hS(c,g,y,A,P),d--}return a}An(iI,"zxyToTileId");function aI(e){let t=3*e+1;return t<4294967296?31-Math.clz32(t):63-Math.clz32(t/4294967296)}An(aI,"tileIdToZ");function E6(e){let t=aI(e)>>1;if(t>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let i=((1<<t)*(1<<t)-1)/3,a=e-i,d=0,g=0,y=1<<t;for(let c=1;c<y;c<<=1){let A=c&a/2,P=c&(a^A);[d,g]=hS(c,d,g,A,P),a=a/2,d+=A,g+=P}return[t,d,g]}An(E6,"tileIdToZxy");var A6=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(A6||{});function ex(e,t){return da(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return _6(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let a=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw new Error("Compression method not supported")})}An(ex,"defaultDecompress");var M6=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e[e.Mlt=6]="Mlt",e))(M6||{});function oI(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":e===6?".mlt":""}An(oI,"tileTypeExt");var P6=127;function sI(e,t){let i=0,a=e.length-1;for(;i<=a;){let d=a+i>>1,g=t-e[d].tileId;if(g>0)i=d+1;else if(g<0)a=d-1;else return e[d]}return a>=0&&(e[a].runLength===0||t-e[a].tileId<e[a].runLength)?e[a]:null}An(sI,"findTile");var C6=class{constructor(t){this.file=t}getKey(){return this.file.name}getBytes(t,i){return da(this,null,function*(){return{data:yield this.file.slice(t,t+i).arrayBuffer()}})}};An(C6,"FileSource");var lI=class{constructor(t,i=new Headers){var a,d;this.url=t,this.customHeaders=i,this.mustReload=!1;let g="";"navigator"in globalThis&&(g=(d=(a=globalThis.navigator)==null?void 0:a.userAgent)!=null?d:"");let y=g.indexOf("Windows")>-1,c=/Chrome|Chromium|Edg|OPR|Brave/.test(g);this.chromeWindowsNoCache=!1,y&&c&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,i,a,d){return da(this,null,function*(){let g,y;a?y=a:(g=new AbortController,y=g.signal);let c=new Headers(this.customHeaders);c.set("range",`bytes=${t}-${t+i-1}`);let A;this.mustReload?A="reload":this.chromeWindowsNoCache&&(A="no-store");let P=yield fetch(this.url,{signal:y,cache:A,headers:c});if(t===0&&P.status===416){let B=P.headers.get("Content-Range");if(!B||!B.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let G=+B.substr(8);P=yield fetch(this.url,{signal:y,cache:"reload",headers:{range:`bytes=0-${G-1}`}})}let C=P.headers.get("Etag");if(C!=null&&C.startsWith("W/")&&(C=null),P.status===416||d&&C&&C!==d)throw this.mustReload=!0,new n2(`Server returned non-matching ETag ${d} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(P.status>=300)throw new Error(`Bad response code: ${P.status}`);let I=P.headers.get("Content-Length");if(P.status===200&&(!I||+I>i))throw g&&g.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield P.arrayBuffer(),etag:C||void 0,cacheControl:P.headers.get("Cache-Control")||void 0,expires:P.headers.get("Expires")||void 0}})}};An(lI,"FetchSource");var D6=lI;function Rl(e,t){let i=e.getUint32(t+4,!0),a=e.getUint32(t+0,!0);return i*S6(2,32)+a}An(Rl,"getUint64");function cI(e,t){let i=new DataView(e),a=i.getUint8(7);if(a>3)throw new Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:Rl(i,8),rootDirectoryLength:Rl(i,16),jsonMetadataOffset:Rl(i,24),jsonMetadataLength:Rl(i,32),leafDirectoryOffset:Rl(i,40),leafDirectoryLength:Rl(i,48),tileDataOffset:Rl(i,56),tileDataLength:Rl(i,64),numAddressedTiles:Rl(i,72),numTileEntries:Rl(i,80),numTileContents:Rl(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:t}}An(cI,"bytesToHeader");function fS(e){let t={buf:new Uint8Array(e),pos:0},i=Fg(t),a=[],d=0;for(let g=0;g<i;g++){let y=Fg(t);a.push({tileId:d+y,offset:0,length:0,runLength:1}),d+=y}for(let g=0;g<i;g++)a[g].runLength=Fg(t);for(let g=0;g<i;g++)a[g].length=Fg(t);for(let g=0;g<i;g++){let y=Fg(t);y===0&&g>0?a[g].offset=a[g-1].offset+a[g-1].length:a[g].offset=y-1}return a}An(fS,"deserializeIndex");var uI=class extends Error{};An(uI,"EtagMismatch");var n2=uI;function dS(e,t){return da(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let a=i.data.slice(0,P6),d=cI(a,i.etag),g=i.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),y=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,c=fS(yield t(g,d.internalCompression));return[d,[y,c.length,c]]})}An(dS,"getHeaderAndRoot");function pS(e,t,i,a,d){return da(this,null,function*(){let g=yield e.getBytes(i,a,void 0,d.etag),y=yield t(g.data,d.internalCompression),c=fS(y);if(c.length===0)throw new Error("Empty directory is invalid");return c})}An(pS,"getDirectory");var I6=class{constructor(t=100,i=!0,a=ex){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=a}getHeader(t){return da(this,null,function*(){let i=t.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,a.data;let d=yield dS(t,this.decompress);return d[1]&&this.cache.set(d[1][0],{lastUsed:this.counter++,data:d[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:d[0]}),this.prune(),d[0]})}getDirectory(t,i,a,d){return da(this,null,function*(){let g=`${t.getKey()}|${d.etag||""}|${i}|${a}`,y=this.cache.get(g);if(y)return y.lastUsed=this.counter++,y.data;let c=yield pS(t,this.decompress,i,a,d);return this.cache.set(g,{lastUsed:this.counter++,data:c}),this.prune(),c})}prune(){if(this.cache.size>this.maxCacheEntries){let t=1/0,i;this.cache.forEach((a,d)=>{a.lastUsed<t&&(t=a.lastUsed,i=d)}),i&&this.cache.delete(i)}}invalidate(t){return da(this,null,function*(){this.cache.delete(t.getKey())})}};An(I6,"ResolvedValueCache");var hI=class{constructor(t=100,i=!0,a=ex){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=a}getHeader(t){return da(this,null,function*(){let i=t.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,yield a.data;let d=new Promise((g,y)=>{dS(t,this.decompress).then(c=>{c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:Promise.resolve(c[1][2])}),g(c[0]),this.prune()}).catch(c=>{y(c)})});return this.cache.set(i,{lastUsed:this.counter++,data:d}),d})}getDirectory(t,i,a,d){return da(this,null,function*(){let g=`${t.getKey()}|${d.etag||""}|${i}|${a}`,y=this.cache.get(g);if(y)return y.lastUsed=this.counter++,yield y.data;let c=new Promise((A,P)=>{pS(t,this.decompress,i,a,d).then(C=>{A(C),this.prune()}).catch(C=>{P(C)})});return this.cache.set(g,{lastUsed:this.counter++,data:c}),c})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,i;this.cache.forEach((a,d)=>{a.lastUsed<t&&(t=a.lastUsed,i=d)}),i&&this.cache.delete(i)}}invalidate(t){return da(this,null,function*(){let i=t.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(t.getKey());let a=new Promise((d,g)=>{this.getHeader(t).then(y=>{d(),this.invalidations.delete(i)}).catch(y=>{g(y)})});this.invalidations.set(i,a)})}};An(hI,"SharedPromiseCache");var O6=hI,fI=class{constructor(t,i,a){typeof t=="string"?this.source=new D6(t):this.source=t,a?this.decompress=a:this.decompress=ex,i?this.cache=i:this.cache=new O6}getHeader(){return da(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,i,a,d){return da(this,null,function*(){let g=iI(t,i,a),y=yield this.cache.getHeader(this.source);if(t<y.minZoom||t>y.maxZoom)return;let c=y.rootDirectoryOffset,A=y.rootDirectoryLength;for(let P=0;P<=3;P++){let C=yield this.cache.getDirectory(this.source,c,A,y),I=sI(C,g);if(I){if(I.runLength>0){let B=yield this.source.getBytes(y.tileDataOffset+I.offset,I.length,d,y.etag);return{data:yield this.decompress(B.data,y.tileCompression),cacheControl:B.cacheControl,expires:B.expires}}c=y.leafDirectoryOffset+I.offset,A=I.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(t,i,a,d){return da(this,null,function*(){try{return yield this.getZxyAttempt(t,i,a,d)}catch(g){if(g instanceof n2)return this.cache.invalidate(this.source),yield this.getZxyAttempt(t,i,a,d);throw g}})}getMetadataAttempt(){return da(this,null,function*(){let t=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength,void 0,t.etag),a=yield this.decompress(i.data,t.internalCompression),d=new TextDecoder("utf-8");return JSON.parse(d.decode(a))})}getMetadata(){return da(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof n2)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw t}})}getTileJson(t){return da(this,null,function*(){let i=yield this.getHeader(),a=yield this.getMetadata(),d=oI(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${t}/{z}/{x}/{y}${d}`],vector_layers:a.vector_layers,attribution:a.attribution,description:a.description,name:a.name,version:a.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};An(fI,"PMTiles");var Wg=fI;const i2=["Angul","Balangir","Balasore","Bargarh","Bhadrak","Boudh","Cuttack","Deogarh","Dhenkanal","Gajapati","Ganjam","Jagatsinghpur","Jajpur","Jharsuguda","Kalahandi","Kandhamal","Kendrapara","Kendujhar","Khordha","Koraput","Malkangiri","Mayurbhanj","Nabarangpur","Nayagarh","Nuapada","Puri","Rayagada","Sambalpur","Subarnapur","Sundargarh"],sb={Anugul:"Angul",Baleshwar:"Balasore",Baudh:"Boudh",Debagarh:"Deogarh",Jagatsinghapur:"Jagatsinghpur",Jajapura:"Jajpur",Keonjhar:"Kendujhar",Khurda:"Khordha",Nabrangpur:"Nabarangpur",Sonepur:"Subarnapur"};let z6=new uS;Bc.addProtocol("pmtiles",z6.tile);const LE="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/odisha_pop_data.pmtiles",k6=({activeLayer:e,selectedYear:t="2025",onDistrictClick:i,gender:a="All",region:d="All",onResetClick:g,initialBasemap:y="grey",onDataLoad:c,targetDistrict:A})=>{const P=X.useRef(null),C=X.useRef(null),I=X.useRef(null),[B]=X.useState(null),G=X.useRef(5),Z=X.useRef(i),H=X.useRef(g),U=X.useRef(c),oe=X.useRef(""),ce=X.useRef(new Map);X.useEffect(()=>{const Ge=C.current;if(!Ge)return;let Te=null;if(!A||A==="Odisha"||A==="All Districts"){Ge.getLayer("selected-district-outline")&&(Ge.setFilter("selected-district-outline",["==","fid",""]),Ge.setPaintProperty("selected-district-outline","line-opacity",0));return}for(const dt of ce.current.values()){const Rt=(dt.properties?.district_name||dt.properties?.NAME||dt.properties?.name)?.trim();if((sb[Rt]||Rt)?.toLowerCase()===A.trim().toLowerCase()){Te=dt;break}}if(Te&&Ge.getLayer("selected-district-outline")&&(Ge.moveLayer("selected-district-outline"),Ge.setFilter("selected-district-outline",["==","fid",Te.properties.fid]),Ge.setPaintProperty("selected-district-outline","line-opacity",1)),Te?.geometry){const dt=new Bc.LngLatBounds,It=Rt=>{typeof Rt[0]=="number"?dt.extend(Rt):Rt.forEach(It)};It(Te.geometry.coordinates),dt.isEmpty()||(Ge.fitBounds(dt,{padding:80,duration:1500,essential:!0}),i?.({...Te.properties,bounds:dt.toArray()}))}},[A]),X.useEffect(()=>{Z.current=i,H.current=g,U.current=c},[i,g,c]);const fe={dark:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"carto-dark":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CARTO"}},layers:[{id:"carto-dark-layer",type:"raster",source:"carto-dark",minzoom:0,maxzoom:22}]},grey:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-grey":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-grey-layer",type:"raster",source:"esri-grey",minzoom:0,maxzoom:22}]},satellite:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-satellite":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri, Maxar, Earthstar Geographics"}},layers:[{id:"background",type:"background",paint:{"background-color":"#000"}},{id:"esri-satellite-layer",type:"raster",source:"esri-satellite",minzoom:0,maxzoom:22}]}},[ve,Ee]=X.useState(y),[Me,ze]=X.useState(!1),Ke=Ge=>{if(console.log("Setting up population layer for style:",ve),Ge.getSource("population-source")||Ge.addSource("population-source",{type:"vector",url:`pmtiles://${LE}`}),!Ge.getLayer("districts-fill")){let Te=["get",`pop_${t}_sum`],dt=[0,1e6,2e6];a==="Male"?Te=["get",`male_${t}`]:a==="Female"&&(Te=["get",`female_${t}`]),a!=="All"&&(dt=[0,50,100]),Ge.addLayer({id:"selected-district-outline",type:"line",source:"population-source","source-layer":"zcta",paint:{"line-color":"#EF4444","line-width":3,"line-opacity":0},filter:["==","fid",""]}),Ge.addLayer({id:"districts-fill",type:"fill",source:"population-source","source-layer":"zcta",paint:{"fill-color":["interpolate",["linear"],Te,dt[0],"#FEF2E8",dt[1],"#F58220",dt[2],"#D66B12"],"fill-opacity":.9,"fill-outline-color":"#FFFFFF"},layout:{visibility:e==="population"?"visible":"none"}}),Ge.addLayer({id:"districts-border",type:"line",source:"population-source","source-layer":"zcta",paint:{"line-color":"#FFFFFF","line-width":.8,"line-opacity":.8},layout:{visibility:e==="population"?"visible":"none"}}),Ge.on("click","districts-fill",It=>{if(It.features&&It.features.length>0){const Ve=It.features[0].properties;Z.current&&Z.current(Ve)}}),Ge.on("mouseenter","districts-fill",()=>{Ge.getCanvas().style.cursor="pointer"}),Ge.on("mouseleave","districts-fill",()=>{Ge.getCanvas().style.cursor=""})}};X.useEffect(()=>{if(!P.current)return;const Ge=new Bc.Map({container:P.current,style:fe[ve],center:[85.8245,20.2961],zoom:5,attributionControl:!1,interactive:!0});return Ge.scrollZoom.disable(),Ge.on("load",async()=>{Ge.resize();try{const dt=await new Wg(LE).getHeader();if(dt.minLon!==void 0){const It=[[dt.minLon,dt.minLat],[dt.maxLon,dt.maxLat]];I.current=It,Ge.fitBounds(It,{padding:60,duration:0})}}catch(Te){console.warn("Could not auto-center from PMTiles header",Te)}Ke(Ge),Ge.on("zoom",()=>{const Te=Ge.getZoom(),dt=Te<G.current;Te<4.8&&dt&&H.current&&H.current(),G.current=Te}),Ge.on("idle",()=>{const Te=Ge.getSource("population-source"),dt=Ge.getLayer("districts-fill");if(Te&&dt){const It=Ge.querySourceFeatures("population-source",{sourceLayer:"zcta"});if(It&&It.length>0&&U.current){const Rt=ce.current;let Ve=!1;if(It.forEach(it=>{const Mt=it.properties?.district_name||it.properties?.NAME||it.properties?.name;Mt&&!Rt.has(Mt)&&(Rt.set(Mt,it),Ve=!0)}),Ve){const it=Array.from(Rt.values());it.sort((yt,Ae)=>{const qe=yt.properties?.district_name||yt.properties?.NAME||yt.properties?.name||"",ct=Ae.properties?.district_name||Ae.properties?.NAME||Ae.properties?.name||"";return qe.localeCompare(ct)});const Mt=it.map(yt=>yt.properties),Be=JSON.stringify(Mt);Be!==oe.current&&(oe.current=Be,U.current(Mt))}}}})}),C.current=Ge,()=>{C.current?.remove(),C.current=null}},[]),X.useEffect(()=>{const Ge=C.current;if(!Ge)return;const Te=()=>{Ge.isStyleLoaded()?(console.log("Style fully loaded for:",ve),Ge.resize(),Ke(Ge),["esri-satellite-layer","carto-dark-layer","esri-grey-layer"].some(Rt=>Ge.getLayer(Rt))&&(Ge.getLayer("districts-fill")&&Ge.moveLayer("districts-fill"),Ge.getLayer("districts-border")&&Ge.moveLayer("districts-border"))):setTimeout(Te,50)};return Ge.once("style.load",Te),Ge.setStyle(fe[ve]),()=>{Ge.off("style.load",Te)}},[ve]),X.useEffect(()=>{C.current?.getLayer("districts-fill")&&C.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none"),C.current?.getLayer("districts-border")&&C.current.setLayoutProperty("districts-border","visibility",e==="population"?"visible":"none")},[e]),X.useEffect(()=>{if(C.current?.getLayer("districts-fill")){let Ge,Te;if(a==="Male"?(Ge=`male_${t}`,Te=[45,50,55]):a==="Female"?(Ge=`female_${t}`,Te=[45,50,55]):(Ge=`pop_${t}_sum`,Te=[1e5,1e6,25e5]),B&&B[Ge]){const dt=B[Ge];if(dt.min!==void 0&&dt.max!==void 0){const It=Number(dt.min),Rt=Number(dt.max);Te=[It,It+(Rt-It)/2,Rt]}}C.current.setPaintProperty("districts-fill","fill-color",["interpolate",["linear"],["get",Ge],Te[0],"#FEF2E8",Te[1],"#F58220",Te[2],"#D66B12"]),C.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none")}},[t,a,e,B]),X.useEffect(()=>{if(C.current?.getLayer("districts-fill")){const Ge=d==="All"?null:["==",["get","region"],d];C.current.setFilter("districts-fill",Ge),C.current?.getLayer("districts-border")&&C.current.setFilter("districts-border",Ge)}},[d]);const mt=()=>{g&&g(),C.current&&I.current?C.current.fitBounds(I.current,{padding:60,duration:1e3,essential:!0}):C.current&&C.current.flyTo({center:[85.8245,20.2961],zoom:5,duration:1e3})},zt=[{id:"grey",label:"Grey Canvas"},{id:"dark",label:"Dark Matter"},{id:"satellite",label:"Satellite"}];return re.jsxs("div",{className:"relative w-full h-full bg-slate-50",children:[re.jsx("div",{ref:P,className:"w-full h-full"}),re.jsx("div",{className:"absolute top-5 right-5 z-20 flex flex-col gap-2",children:re.jsxs("div",{className:"relative",children:[re.jsx("button",{onClick:()=>ze(!Me),className:"bg-white/90 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Change Basemap",children:re.jsx(B4,{className:"w-4 h-4"})}),Me&&re.jsx("div",{className:"absolute right-0 top-full mt-2 w-40 bg-white/90 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:zt.map(Ge=>re.jsx("button",{onClick:()=>{Ee(Ge.id),ze(!1)},className:`w-full px-4 py-2 text-left text-[11px] font-bold transition-colors flex items-center justify-between ${ve===Ge.id?"bg-orange-50 text-primary":"text-gray-600 hover:bg-gray-50"}`,children:Ge.label},Ge.id))})]})}),re.jsxs("div",{className:"absolute bottom-5 right-5 flex flex-col gap-2 z-20",children:[re.jsx("button",{onClick:mt,className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Reset View",children:re.jsx(R4,{className:"w-4 h-4"})}),re.jsx("button",{onClick:()=>C.current?.zoomIn(),className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Zoom In",children:re.jsx(q4,{className:"w-4 h-4"})}),re.jsx("button",{onClick:()=>C.current?.zoomOut(),className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Zoom Out",children:re.jsx(V4,{className:"w-4 h-4"})})]})]})},R6=({currentView:e,onViewChange:t,onDistrictChange:i,onDataChange:a,onDataLoad:d})=>{const[g,y]=X.useState("population"),[c,A]=X.useState("2025"),[P,C]=X.useState("All"),[I]=X.useState("All"),[B,G]=X.useState(null),[Z,H]=X.useState("All Districts");X.useEffect(()=>{if(B){const Te=B.district_name||B.NAME||B.name||"Selected Area",dt=sb[Te]||Te;H(dt),i&&i(dt),a&&a(B)}else i&&i("Odisha"),a&&a(null)},[B,i,a]);const[U,oe]=X.useState(null),[ce,fe]=X.useState(!0);X.useEffect(()=>{const Te=()=>{(window.scrollY>10||window.pageYOffset>10||document.documentElement.scrollTop>10)&&fe(!1)};return window.addEventListener("scroll",Te,{passive:!0}),()=>window.removeEventListener("scroll",Te)},[]);const[ve,Ee]=X.useState({layer:"population",year:"2025",gender:"All",region:"All",district:"All Districts"}),Me=[{id:"population",label:"Population Density"},{id:"lulc",label:"Land Use / Cover"},{id:"nightlight",label:"Night Lights"},{id:"buildup",label:"Built-up Area"}],ze=["All","Male","Female"],Ke=()=>{Ee({layer:g,year:c,gender:P,region:I,district:Z}),oe(null)},mt=Te=>{const dt=typeof Te=="string"?parseFloat(Te):Te;return isNaN(dt)||dt===null||dt===void 0?"0":dt>=1e6?(dt/1e6).toFixed(2)+"M":dt>=1e3?(dt/1e3).toFixed(1)+"k":Math.floor(dt).toString()},Ge=(()=>{const Te={name:"Odisha",pop:"47M",literacy:"73%",male:"51%",female:"49%"};if(!B)return Te;const dt=ve.year,It=`pop_${dt}_sum`,Rt=B[`Literacy_${dt}`]!==void 0?`Literacy_${dt}`:`literacy_${dt}`,Ve=`male_${dt}`,it=`female_${dt}`;return{name:B.district_name||B.NAME||B.name||"Selected Area",pop:B[It]!==void 0?mt(B[It]):Te.pop,literacy:B[Rt]!==void 0?B[Rt]+"%":Te.literacy,male:B[Ve]!==void 0?B[Ve]+"%":Te.male,female:B[it]!==void 0?B[it]+"%":Te.female}})();return re.jsxs("div",{className:"flex flex-col bg-[#F8FAFC]",children:[re.jsx("div",{className:"px-4 lg:px-6 py-4 z-[100]",children:re.jsxs("div",{className:"max-w-[1600px] mx-auto bg-white rounded-2xl shadow-sm border border-gray-100 p-5 lg:p-6 transition-all hover:shadow-md",children:[re.jsx("style",{dangerouslySetInnerHTML:{__html:`
                input[type=range]::-webkit-slider-thumb {
                    appearance: none;
                    height: 18px;
                    width: 18px;
                    border-radius: 50%;
                    background: #F58220;
                    cursor: pointer;
                    border: 3px solid white;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    margin-top: -6px;
                }
                input[type=range]::-moz-range-thumb {
                    height: 18px;
                    width: 18px;
                    border-radius: 50%;
                    background: #F58220;
                    cursor: pointer;
                    border: 3px solid white;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }
                input[type=range]::-webkit-slider-runnable-track {
                    width: 100%;
                    height: 6px;
                    cursor: pointer;
                    background: #E5E7EB;
                    border-radius: 3px;
                }
            `}}),re.jsxs("div",{className:"flex flex-wrap lg:flex-nowrap items-center gap-4 lg:gap-8 overflow-visible",children:[re.jsxs("div",{className:"relative flex-1 min-w-[140px] lg:max-w-[200px]",children:[re.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"District"}),re.jsxs("button",{onClick:()=>oe(U==="district"?null:"district"),className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[re.jsx("span",{className:"truncate",children:Z}),re.jsx(k0,{className:`w-3.5 h-3.5 ml-2 transition-transform ${U==="district"?"rotate-180":""}`})]}),U==="district"&&re.jsxs("div",{className:"absolute left-0 top-full mt-2 w-full max-h-[300px] overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 z-[50] animate-in fade-in slide-in-from-top-2",children:[re.jsx("button",{onClick:()=>{H("All Districts"),oe(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${Z==="All Districts"?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:"All Districts"}),i2.sort().map(Te=>re.jsx("button",{onClick:()=>{H(Te),oe(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${Z===Te?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:Te},Te))]})]}),re.jsxs("div",{className:"relative flex-1 min-w-[140px] lg:max-w-[220px]",children:[re.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"Layers"}),re.jsxs("button",{onClick:()=>oe(U==="layer"?null:"layer"),className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[re.jsx("span",{children:Me.find(Te=>Te.id===g)?.label}),re.jsx(k0,{className:`w-3.5 h-3.5 ml-2 transition-transform ${U==="layer"?"rotate-180":""}`})]}),U==="layer"&&re.jsx("div",{className:"absolute left-0 top-full mt-2 w-full bg-white/80 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 z-[50] animate-in fade-in slide-in-from-top-2",children:Me.map(Te=>re.jsx("button",{onClick:()=>{y(Te.id),oe(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${g===Te.id?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:Te.label},Te.id))})]}),re.jsxs("div",{className:"flex-1 min-w-[140px] w-full lg:w-auto",children:[re.jsxs("div",{className:"flex justify-between items-center mb-2",children:[re.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-70",children:"Time Period"}),re.jsx("span",{className:"text-sm font-black text-[#F58220]",children:c})]}),re.jsx("input",{type:"range",min:"2012",max:"2025",value:c,onChange:Te=>A(Te.target.value),className:"w-full appearance-none bg-transparent"}),re.jsxs("div",{className:"flex justify-between mt-1",children:[re.jsx("span",{className:"text-[9px] font-bold text-gray-400",children:"2012"}),re.jsx("span",{className:"text-[9px] font-bold text-gray-400",children:"2025"})]})]}),re.jsxs("div",{className:"flex-1 min-w-[200px] lg:max-w-[300px]",children:[re.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"Gender"}),re.jsx("div",{className:"flex items-center gap-2",children:ze.map(Te=>re.jsx("button",{onClick:()=>C(Te),className:`px-3 py-1 rounded-full text-[12px] font-bold tracking-wide transition-all ${P===Te?Te==="Male"?"bg-blue-50 text-blue-600 ring-1 ring-blue-100":Te==="Female"?"bg-green-50 text-green-600 ring-1 ring-green-100":"bg-orange-50 text-[#F58220] ring-1 ring-orange-100":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"}`,children:Te},Te))})]}),re.jsx("button",{onClick:Ke,className:"w-full lg:w-auto lg:self-end mb-0.5 px-8 h-10 bg-[#F58220] hover:bg-[#D66B12] text-white rounded-xl shadow-lg shadow-orange-500/20 transition-all font-black text-[11px] uppercase tracking-widest flex items-center justify-center gap-2 group active:scale-95 whitespace-nowrap",children:"Search"})]})]})}),re.jsx("div",{className:"flex-1 px-4 lg:px-6 pb-4",children:re.jsxs("div",{className:"w-full max-w-[1600px] mx-auto flex flex-col lg:flex-row gap-4",children:[re.jsxs("div",{className:"w-full h-[450px] lg:flex-1 relative overflow-hidden lg:h-[70vh] bg-white rounded-2xl shadow-sm border border-gray-100 group",children:[re.jsx(k6,{activeLayer:ve.layer,selectedYear:ve.year,gender:ve.gender,region:ve.region,targetDistrict:ve.district,onResetClick:()=>{G(null),H("All Districts"),Ee(Te=>({...Te,district:"All Districts"}))},onDistrictClick:Te=>{const dt=Te.district_name||Te.NAME||Te.name||"Selected Area",It=sb[dt]||dt;G(Te),Ee(Rt=>({...Rt,district:It}))},onDataLoad:Te=>{d&&d(Te)}}),re.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(#000000_1px,transparent_1px)] [background-size:24px_24px] opacity-[0.03] group-hover:opacity-[0.05] transition-opacity"}),re.jsxs("div",{className:"absolute bottom-5 left-5 bg-white/60 backdrop-blur-md rounded-lg shadow-lg border border-gray-200 p-4 min-w-[200px] z-[50]",children:[re.jsx("h4",{className:"text-[10px] font-bold text-gray-500 uppercase mb-3 tracking-wide",children:"Population Density (per km)"}),re.jsxs("div",{className:"space-y-2",children:[re.jsxs("div",{className:"flex items-center gap-3",children:[re.jsx("span",{className:"w-4 h-4 rounded bg-[#D66B12]"}),re.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"> 1000 (High)"})]}),re.jsxs("div",{className:"flex items-center gap-3",children:[re.jsx("span",{className:"w-4 h-4 rounded bg-[#F58220]"}),re.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"500 - 1000 (Medium)"})]}),re.jsxs("div",{className:"flex items-center gap-3",children:[re.jsx("span",{className:"w-4 h-4 rounded bg-[#FEF2E8]"}),re.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"< 500 (Low)"})]})]})]})]}),re.jsxs("div",{className:"w-full lg:w-80 h-auto lg:h-[70vh] bg-white border border-gray-100 rounded-2xl flex flex-col z-20 shadow-sm flex-shrink-0 overflow-hidden transition-all hover:shadow-md",children:[re.jsx("div",{className:"p-6 border-b border-gray-100 flex justify-between items-start bg-gray-50/30",children:re.jsxs("div",{children:[re.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:Ge.name}),re.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5 mt-1 font-medium",children:[re.jsx(HD,{className:"w-3 h-3"})," District Analysis"]})]})}),re.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-8",children:[re.jsx("div",{className:"grid",children:re.jsxs("div",{className:"bg-orange-50/50 p-4 rounded-xl border border-orange-100/50 hover:bg-orange-50 hover:border-orange-200 transition-all group/stat",children:[re.jsx("p",{className:"text-[10px] uppercase font-bold text-primary mb-1 tracking-wide opacity-70",children:"Total Pop."}),re.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ge.pop})]})}),re.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[re.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100/50 hover:bg-blue-50 hover:border-blue-200 transition-all group/stat",children:[re.jsx("p",{className:"text-[10px] uppercase font-bold text-[#3B82F6] mb-1 tracking-wide opacity-70",children:"Literacy"}),re.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ge.literacy})]}),re.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-100/50 hover:bg-gray-50 hover:border-gray-200 transition-all group/stat",children:[re.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 tracking-wide opacity-70",children:"Male"}),re.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ge.male})]}),re.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-100/50 hover:bg-gray-50 hover:border-gray-200 transition-all group/stat",children:[re.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 tracking-wide opacity-70",children:"Female"}),re.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ge.female})]})]})]})]})]})}),ce&&re.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-bounce pointer-events-none",children:re.jsx("div",{className:"bg-[#F58220] text-white p-2 rounded-full shadow-lg shadow-orange-500/30 w-10 h-10 flex items-center justify-center",children:re.jsx(C4,{className:"w-5 h-5"})})})]})};function dI(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var d=e.length;for(t=0;t<d;t++)e[t]&&(i=dI(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function Wn(){for(var e,t,i=0,a="",d=arguments.length;i<d;i++)(e=arguments[i])&&(t=dI(e))&&(a&&(a+=" "),a+=t);return a}var L6=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function mS(e){if(typeof e!="string")return!1;var t=L6;return t.includes(e)}var B6=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],j6=new Set(B6);function pI(e){return typeof e!="string"?!1:j6.has(e)}function mI(e){return typeof e=="string"&&e.startsWith("data-")}function Vc(e){if(typeof e!="object"||e===null)return{};var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(pI(i)||mI(i))&&(t[i]=e[i]);return t}function tx(e){if(e==null)return null;if(X.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Vc(t)}return typeof e=="object"&&!Array.isArray(e)?Vc(e):null}function Nl(e){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(pI(i)||mI(i)||mS(i))&&(t[i]=e[i]);return t}function N6(e){return e==null?null:X.isValidElement(e)?Nl(e.props):typeof e=="object"&&!Array.isArray(e)?Nl(e):null}var F6=["children","width","height","viewBox","className","style","title","desc"];function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},a2.apply(null,arguments)}function U6(e,t){if(e==null)return{};var i,a,d=V6(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function V6(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var gI=X.forwardRef((e,t)=>{var{children:i,width:a,height:d,viewBox:g,className:y,style:c,title:A,desc:P}=e,C=U6(e,F6),I=g||{width:a,height:d,x:0,y:0},B=Wn("recharts-surface",y);return X.createElement("svg",a2({},Nl(C),{className:B,width:a,height:d,style:c,viewBox:"".concat(I.x," ").concat(I.y," ").concat(I.width," ").concat(I.height),ref:t}),X.createElement("title",null,A),X.createElement("desc",null,P),i)}),G6=["children","className"];function o2(){return o2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},o2.apply(null,arguments)}function q6(e,t){if(e==null)return{};var i,a,d=$6(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function $6(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var Gu=X.forwardRef((e,t)=>{var{children:i,className:a}=e,d=q6(e,G6),g=Wn("recharts-layer",a);return X.createElement("g",o2({className:g},Nl(d),{ref:t}),i)}),Z6=X.createContext(null);function xi(e){return function(){return e}}const s2=Math.PI,l2=2*s2,Vp=1e-6,H6=l2-Vp;function yI(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function Y6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return yI;const i=10**t;return function(a){this._+=a[0];for(let d=1,g=a.length;d<g;++d)this._+=Math.round(arguments[d]*i)/i+a[d]}}class X6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?yI:Y6(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,a,d){this._append`Q${+t},${+i},${this._x1=+a},${this._y1=+d}`}bezierCurveTo(t,i,a,d,g,y){this._append`C${+t},${+i},${+a},${+d},${this._x1=+g},${this._y1=+y}`}arcTo(t,i,a,d,g){if(t=+t,i=+i,a=+a,d=+d,g=+g,g<0)throw new Error(`negative radius: ${g}`);let y=this._x1,c=this._y1,A=a-t,P=d-i,C=y-t,I=c-i,B=C*C+I*I;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(B>Vp)if(!(Math.abs(I*A-P*C)>Vp)||!g)this._append`L${this._x1=t},${this._y1=i}`;else{let G=a-y,Z=d-c,H=A*A+P*P,U=G*G+Z*Z,oe=Math.sqrt(H),ce=Math.sqrt(B),fe=g*Math.tan((s2-Math.acos((H+B-U)/(2*oe*ce)))/2),ve=fe/ce,Ee=fe/oe;Math.abs(ve-1)>Vp&&this._append`L${t+ve*C},${i+ve*I}`,this._append`A${g},${g},0,0,${+(I*G>C*Z)},${this._x1=t+Ee*A},${this._y1=i+Ee*P}`}}arc(t,i,a,d,g,y){if(t=+t,i=+i,a=+a,y=!!y,a<0)throw new Error(`negative radius: ${a}`);let c=a*Math.cos(d),A=a*Math.sin(d),P=t+c,C=i+A,I=1^y,B=y?d-g:g-d;this._x1===null?this._append`M${P},${C}`:(Math.abs(this._x1-P)>Vp||Math.abs(this._y1-C)>Vp)&&this._append`L${P},${C}`,a&&(B<0&&(B=B%l2+l2),B>H6?this._append`A${a},${a},0,1,${I},${t-c},${i-A}A${a},${a},0,1,${I},${this._x1=P},${this._y1=C}`:B>Vp&&this._append`A${a},${a},0,${+(B>=s2)},${I},${this._x1=t+a*Math.cos(g)},${this._y1=i+a*Math.sin(g)}`)}rect(t,i,a,d){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${a=+a}v${+d}h${-a}Z`}toString(){return this._}}function vI(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);t=a}return e},()=>new X6(t)}function gS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _I(e){this._context=e}_I.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rx(e){return new _I(e)}function bI(e){return e[0]}function xI(e){return e[1]}function wI(e,t){var i=xi(!0),a=null,d=rx,g=null,y=vI(c);e=typeof e=="function"?e:e===void 0?bI:xi(e),t=typeof t=="function"?t:t===void 0?xI:xi(t);function c(A){var P,C=(A=gS(A)).length,I,B=!1,G;for(a==null&&(g=d(G=y())),P=0;P<=C;++P)!(P<C&&i(I=A[P],P,A))===B&&((B=!B)?g.lineStart():g.lineEnd()),B&&g.point(+e(I,P,A),+t(I,P,A));if(G)return g=null,G+""||null}return c.x=function(A){return arguments.length?(e=typeof A=="function"?A:xi(+A),c):e},c.y=function(A){return arguments.length?(t=typeof A=="function"?A:xi(+A),c):t},c.defined=function(A){return arguments.length?(i=typeof A=="function"?A:xi(!!A),c):i},c.curve=function(A){return arguments.length?(d=A,a!=null&&(g=d(a)),c):d},c.context=function(A){return arguments.length?(A==null?a=g=null:g=d(a=A),c):a},c}function M_(e,t,i){var a=null,d=xi(!0),g=null,y=rx,c=null,A=vI(P);e=typeof e=="function"?e:e===void 0?bI:xi(+e),t=typeof t=="function"?t:xi(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?xI:xi(+i);function P(I){var B,G,Z,H=(I=gS(I)).length,U,oe=!1,ce,fe=new Array(H),ve=new Array(H);for(g==null&&(c=y(ce=A())),B=0;B<=H;++B){if(!(B<H&&d(U=I[B],B,I))===oe)if(oe=!oe)G=B,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),Z=B-1;Z>=G;--Z)c.point(fe[Z],ve[Z]);c.lineEnd(),c.areaEnd()}oe&&(fe[B]=+e(U,B,I),ve[B]=+t(U,B,I),c.point(a?+a(U,B,I):fe[B],i?+i(U,B,I):ve[B]))}if(ce)return c=null,ce+""||null}function C(){return wI().defined(d).curve(y).context(g)}return P.x=function(I){return arguments.length?(e=typeof I=="function"?I:xi(+I),a=null,P):e},P.x0=function(I){return arguments.length?(e=typeof I=="function"?I:xi(+I),P):e},P.x1=function(I){return arguments.length?(a=I==null?null:typeof I=="function"?I:xi(+I),P):a},P.y=function(I){return arguments.length?(t=typeof I=="function"?I:xi(+I),i=null,P):t},P.y0=function(I){return arguments.length?(t=typeof I=="function"?I:xi(+I),P):t},P.y1=function(I){return arguments.length?(i=I==null?null:typeof I=="function"?I:xi(+I),P):i},P.lineX0=P.lineY0=function(){return C().x(e).y(t)},P.lineY1=function(){return C().x(e).y(i)},P.lineX1=function(){return C().x(a).y(t)},P.defined=function(I){return arguments.length?(d=typeof I=="function"?I:xi(!!I),P):d},P.curve=function(I){return arguments.length?(y=I,g!=null&&(c=y(g)),P):y},P.context=function(I){return arguments.length?(I==null?g=c=null:c=y(g=I),P):g},P}class SI{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function W6(e){return new SI(e,!0)}function K6(e){return new SI(e,!1)}function lb(){}function cb(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function TI(e){this._context=e}TI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:cb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:cb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Q6(e){return new TI(e)}function EI(e){this._context=e}EI.prototype={areaStart:lb,areaEnd:lb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:cb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J6(e){return new EI(e)}function AI(e){this._context=e}AI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:cb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function eL(e){return new AI(e)}function MI(e){this._context=e}MI.prototype={areaStart:lb,areaEnd:lb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function tL(e){return new MI(e)}function BE(e){return e<0?-1:1}function jE(e,t,i){var a=e._x1-e._x0,d=t-e._x1,g=(e._y1-e._y0)/(a||d<0&&-0),y=(i-e._y1)/(d||a<0&&-0),c=(g*d+y*a)/(a+d);return(BE(g)+BE(y))*Math.min(Math.abs(g),Math.abs(y),.5*Math.abs(c))||0}function NE(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function y1(e,t,i){var a=e._x0,d=e._y0,g=e._x1,y=e._y1,c=(g-a)/3;e._context.bezierCurveTo(a+c,d+c*t,g-c,y-c*i,g,y)}function ub(e){this._context=e}ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:y1(this,this._t0,NE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,y1(this,NE(this,i=jE(this,e,t)),i);break;default:y1(this,this._t0,i=jE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function PI(e){this._context=new CI(e)}(PI.prototype=Object.create(ub.prototype)).point=function(e,t){ub.prototype.point.call(this,t,e)};function CI(e){this._context=e}CI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,a,d,g){this._context.bezierCurveTo(t,e,a,i,g,d)}};function rL(e){return new ub(e)}function nL(e){return new PI(e)}function DI(e){this._context=e}DI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var a=FE(e),d=FE(t),g=0,y=1;y<i;++g,++y)this._context.bezierCurveTo(a[0][g],d[0][g],a[1][g],d[1][g],e[y],t[y]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function FE(e){var t,i=e.length-1,a,d=new Array(i),g=new Array(i),y=new Array(i);for(d[0]=0,g[0]=2,y[0]=e[0]+2*e[1],t=1;t<i-1;++t)d[t]=1,g[t]=4,y[t]=4*e[t]+2*e[t+1];for(d[i-1]=2,g[i-1]=7,y[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)a=d[t]/g[t-1],g[t]-=a,y[t]-=a*y[t-1];for(d[i-1]=y[i-1]/g[i-1],t=i-2;t>=0;--t)d[t]=(y[t]-d[t+1])/g[t];for(g[i-1]=(e[i]+d[i-1])/2,t=0;t<i-1;++t)g[t]=2*e[t+1]-d[t+1];return[d,g]}function iL(e){return new DI(e)}function nx(e,t){this._context=e,this._t=t}nx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function aL(e){return new nx(e,.5)}function oL(e){return new nx(e,0)}function sL(e){return new nx(e,1)}function Jp(e,t){if((y=e.length)>1)for(var i=1,a,d,g=e[t[0]],y,c=g.length;i<y;++i)for(d=g,g=e[t[i]],a=0;a<c;++a)g[a][1]+=g[a][0]=isNaN(d[a][1])?d[a][0]:d[a][1]}function c2(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function lL(e,t){return e[t]}function cL(e){const t=[];return t.key=e,t}function uL(){var e=xi([]),t=c2,i=Jp,a=lL;function d(g){var y=Array.from(e.apply(this,arguments),cL),c,A=y.length,P=-1,C;for(const I of g)for(c=0,++P;c<A;++c)(y[c][P]=[0,+a(I,y[c].key,P,g)]).data=I;for(c=0,C=gS(t(y));c<A;++c)y[C[c]].index=c;return i(y,C),y}return d.keys=function(g){return arguments.length?(e=typeof g=="function"?g:xi(Array.from(g)),d):e},d.value=function(g){return arguments.length?(a=typeof g=="function"?g:xi(+g),d):a},d.order=function(g){return arguments.length?(t=g==null?c2:typeof g=="function"?g:xi(Array.from(g)),d):t},d.offset=function(g){return arguments.length?(i=g??Jp,d):i},d}function hL(e,t){if((a=e.length)>0){for(var i,a,d=0,g=e[0].length,y;d<g;++d){for(y=i=0;i<a;++i)y+=e[i][d][1]||0;if(y)for(i=0;i<a;++i)e[i][d][1]/=y}Jp(e,t)}}function fL(e,t){if((d=e.length)>0){for(var i=0,a=e[t[0]],d,g=a.length;i<g;++i){for(var y=0,c=0;y<d;++y)c+=e[y][i][1]||0;a[i][1]+=a[i][0]=-c/2}Jp(e,t)}}function dL(e,t){if(!(!((y=e.length)>0)||!((g=(d=e[t[0]]).length)>0))){for(var i=0,a=1,d,g,y;a<g;++a){for(var c=0,A=0,P=0;c<y;++c){for(var C=e[t[c]],I=C[a][1]||0,B=C[a-1][1]||0,G=(I-B)/2,Z=0;Z<c;++Z){var H=e[t[Z]],U=H[a][1]||0,oe=H[a-1][1]||0;G+=U-oe}A+=I,P+=G*I}d[a-1][1]+=d[a-1][0]=i,A&&(i-=P/A)}d[a-1][1]+=d[a-1][0]=i,Jp(e,t)}}var v1={},_1={},UE;function pL(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==="__proto__"}e.isUnsafeProperty=t})(_1)),_1}var b1={},VE;function II(){return VE||(VE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}e.isDeepKey=t})(b1)),b1}var x1={},GE;function yS(){return GE||(GE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="string"||typeof i=="symbol"?i:Object.is(i?.valueOf?.(),-0)?"-0":String(i)}e.toKey=t})(x1)),x1}var w1={},S1={},qE;function mL(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){if(i==null)return"";if(typeof i=="string")return i;if(Array.isArray(i))return i.map(t).join(",");const a=String(i);return a==="0"&&Object.is(Number(i),-0)?"-0":a}e.toString=t})(S1)),S1}var $E;function vS(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mL(),i=yS();function a(d){if(Array.isArray(d))return d.map(i.toKey);if(typeof d=="symbol")return[d];d=t.toString(d);const g=[],y=d.length;if(y===0)return g;let c=0,A="",P="",C=!1;for(d.charCodeAt(0)===46&&(g.push(""),c++);c<y;){const I=d[c];P?I==="\\"&&c+1<y?(c++,A+=d[c]):I===P?P="":A+=I:C?I==='"'||I==="'"?P=I:I==="]"?(C=!1,g.push(A),A=""):A+=I:I==="["?(C=!0,A&&(g.push(A),A="")):I==="."?A&&(g.push(A),A=""):A+=I,c++}return A&&g.push(A),g}e.toPath=a})(w1)),w1}var ZE;function _S(){return ZE||(ZE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pL(),i=II(),a=yS(),d=vS();function g(c,A,P){if(c==null)return P;switch(typeof A){case"string":{if(t.isUnsafeProperty(A))return P;const C=c[A];return C===void 0?i.isDeepKey(A)?g(c,d.toPath(A),P):P:C}case"number":case"symbol":{typeof A=="number"&&(A=a.toKey(A));const C=c[A];return C===void 0?P:C}default:{if(Array.isArray(A))return y(c,A,P);if(Object.is(A?.valueOf(),-0)?A="-0":A=String(A),t.isUnsafeProperty(A))return P;const C=c[A];return C===void 0?P:C}}}function y(c,A,P){if(A.length===0)return P;let C=c;for(let I=0;I<A.length;I++){if(C==null||t.isUnsafeProperty(A[I]))return P;C=C[A[I]]}return C===void 0?P:C}e.get=g})(v1)),v1}var T1,HE;function gL(){return HE||(HE=1,T1=_S().get),T1}var yL=gL();const ix=Vl(yL);var vL=4;function wd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vL,i=10**t,a=Math.round(e*i)/i;return Object.is(a,-0)?0:a}function Va(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return e.reduce((d,g,y)=>{var c=i[y-1];return typeof c=="string"?d+c+g:c!==void 0?d+wd(c)+g:d+g},"")}var Bl=e=>e===0?0:e>0?1:-1,qu=e=>typeof e=="number"&&e!=+e,em=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Jt=e=>(typeof e=="number"||e instanceof Number)&&!qu(e),$u=e=>Jt(e)||typeof e=="string",_L=0,N0=e=>{var t=++_L;return"".concat(e||"").concat(t)},Ed=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Jt(t)&&typeof t!="string")return a;var g;if(em(t)){if(i==null)return a;var y=t.indexOf("%");g=i*parseFloat(t.slice(0,y))/100}else g=+t;return qu(g)&&(g=a),d&&i!=null&&g>i&&(g=i),g},OI=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,i={},a=0;a<t;a++)if(!i[String(e[a])])i[String(e[a])]=!0;else return!0;return!1};function ju(e,t,i){return Jt(e)&&Jt(t)?wd(e+i*(t-e)):t}function zI(e,t,i){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):ix(a,t))===i)}var yo=e=>e===null||typeof e>"u",bS=e=>yo(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function ms(e){return e!=null}function oy(){}var kI=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,xS=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(X.isValidElement(e)&&(i=e.props),typeof i!="object"&&typeof i!="function")return null;var a={};return Object.keys(i).forEach(d=>{mS(d)&&(a[d]=(g=>i[d](i,g)))}),a},bL=(e,t,i)=>a=>(e(t,i,a),null),xL=(e,t,i)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(d=>{var g=e[d];mS(d)&&typeof g=="function"&&(a||(a={}),a[d]=bL(g,t,i))}),a};function YE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function wL(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(i),!0).forEach(function(a){SL(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function SL(e,t,i){return(t=TL(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function TL(e){var t=EL(e,"string");return typeof t=="symbol"?t:t+""}function EL(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function el(e,t){var i=wL({},e),a=t,d=Object.keys(t),g=d.reduce((y,c)=>(y[c]===void 0&&a[c]!==void 0&&(y[c]=a[c]),y),i);return g}var E1={},A1={},XE;function AL(){return XE||(XE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a){const d=new Map;for(let g=0;g<i.length;g++){const y=i[g],c=a(y,g,i);d.has(c)||d.set(c,y)}return Array.from(d.values())}e.uniqBy=t})(A1)),A1}var M1={},WE;function ML(){return WE||(WE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a){return function(...d){return i.apply(this,d.slice(0,a))}}e.ary=t})(M1)),M1}var P1={},KE;function RI(){return KE||(KE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i}e.identity=t})(P1)),P1}var C1={},D1={},I1={},QE;function PL(){return QE||(QE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Number.isSafeInteger(i)&&i>=0}e.isLength=t})(I1)),I1}var JE;function wS(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PL();function i(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=i})(D1)),D1}var O1={},eA;function CL(){return eA||(eA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="object"&&i!==null}e.isObjectLike=t})(O1)),O1}var tA;function DL(){return tA||(tA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wS(),i=CL();function a(d){return i.isObjectLike(d)&&t.isArrayLike(d)}e.isArrayLikeObject=a})(C1)),C1}var z1={},k1={},rA;function IL(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_S();function i(a){return function(d){return t.get(d,a)}}e.property=i})(k1)),k1}var R1={},L1={},B1={},j1={},nA;function LI(){return nA||(nA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i!==null&&(typeof i=="object"||typeof i=="function")}e.isObject=t})(j1)),j1}var N1={},iA;function BI(){return iA||(iA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null||typeof i!="object"&&typeof i!="function"}e.isPrimitive=t})(N1)),N1}var F1={},aA;function jI(){return aA||(aA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a){return i===a||Number.isNaN(i)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(F1)),F1}var oA;function OL(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LI(),i=BI(),a=jI();function d(C,I,B){return typeof B!="function"?d(C,I,()=>{}):g(C,I,function G(Z,H,U,oe,ce,fe){const ve=B(Z,H,U,oe,ce,fe);return ve!==void 0?!!ve:g(Z,H,G,fe)},new Map)}function g(C,I,B,G){if(I===C)return!0;switch(typeof I){case"object":return y(C,I,B,G);case"function":return Object.keys(I).length>0?g(C,{...I},B,G):a.isEqualsSameValueZero(C,I);default:return t.isObject(C)?typeof I=="string"?I==="":!0:a.isEqualsSameValueZero(C,I)}}function y(C,I,B,G){if(I==null)return!0;if(Array.isArray(I))return A(C,I,B,G);if(I instanceof Map)return c(C,I,B,G);if(I instanceof Set)return P(C,I,B,G);const Z=Object.keys(I);if(C==null||i.isPrimitive(C))return Z.length===0;if(Z.length===0)return!0;if(G?.has(I))return G.get(I)===C;G?.set(I,C);try{for(let H=0;H<Z.length;H++){const U=Z[H];if(!i.isPrimitive(C)&&!(U in C)||I[U]===void 0&&C[U]!==void 0||I[U]===null&&C[U]!==null||!B(C[U],I[U],U,C,I,G))return!1}return!0}finally{G?.delete(I)}}function c(C,I,B,G){if(I.size===0)return!0;if(!(C instanceof Map))return!1;for(const[Z,H]of I.entries()){const U=C.get(Z);if(B(U,H,Z,C,I,G)===!1)return!1}return!0}function A(C,I,B,G){if(I.length===0)return!0;if(!Array.isArray(C))return!1;const Z=new Set;for(let H=0;H<I.length;H++){const U=I[H];let oe=!1;for(let ce=0;ce<C.length;ce++){if(Z.has(ce))continue;const fe=C[ce];let ve=!1;if(B(fe,U,H,C,I,G)&&(ve=!0),ve){Z.add(ce),oe=!0;break}}if(!oe)return!1}return!0}function P(C,I,B,G){return I.size===0?!0:C instanceof Set?A([...C],[...I],B,G):!1}e.isMatchWith=d,e.isSetMatch=P})(B1)),B1}var sA;function NI(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OL();function i(a,d){return t.isMatchWith(a,d,()=>{})}e.isMatch=i})(L1)),L1}var U1={},V1={},G1={},lA;function zL(){return lA||(lA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Object.getOwnPropertySymbols(i).filter(a=>Object.prototype.propertyIsEnumerable.call(i,a))}e.getSymbols=t})(G1)),G1}var q1={},cA;function SS(){return cA||(cA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}e.getTag=t})(q1)),q1}var $1={},uA;function FI(){return uA||(uA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",i="[object String]",a="[object Number]",d="[object Boolean]",g="[object Arguments]",y="[object Symbol]",c="[object Date]",A="[object Map]",P="[object Set]",C="[object Array]",I="[object Function]",B="[object ArrayBuffer]",G="[object Object]",Z="[object Error]",H="[object DataView]",U="[object Uint8Array]",oe="[object Uint8ClampedArray]",ce="[object Uint16Array]",fe="[object Uint32Array]",ve="[object BigUint64Array]",Ee="[object Int8Array]",Me="[object Int16Array]",ze="[object Int32Array]",Ke="[object BigInt64Array]",mt="[object Float32Array]",zt="[object Float64Array]";e.argumentsTag=g,e.arrayBufferTag=B,e.arrayTag=C,e.bigInt64ArrayTag=Ke,e.bigUint64ArrayTag=ve,e.booleanTag=d,e.dataViewTag=H,e.dateTag=c,e.errorTag=Z,e.float32ArrayTag=mt,e.float64ArrayTag=zt,e.functionTag=I,e.int16ArrayTag=Me,e.int32ArrayTag=ze,e.int8ArrayTag=Ee,e.mapTag=A,e.numberTag=a,e.objectTag=G,e.regexpTag=t,e.setTag=P,e.stringTag=i,e.symbolTag=y,e.uint16ArrayTag=ce,e.uint32ArrayTag=fe,e.uint8ArrayTag=U,e.uint8ClampedArrayTag=oe})($1)),$1}var Z1={},hA;function kL(){return hA||(hA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}e.isTypedArray=t})(Z1)),Z1}var fA;function UI(){return fA||(fA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zL(),i=SS(),a=FI(),d=BI(),g=kL();function y(C,I){return c(C,void 0,C,new Map,I)}function c(C,I,B,G=new Map,Z=void 0){const H=Z?.(C,I,B,G);if(H!==void 0)return H;if(d.isPrimitive(C))return C;if(G.has(C))return G.get(C);if(Array.isArray(C)){const U=new Array(C.length);G.set(C,U);for(let oe=0;oe<C.length;oe++)U[oe]=c(C[oe],oe,B,G,Z);return Object.hasOwn(C,"index")&&(U.index=C.index),Object.hasOwn(C,"input")&&(U.input=C.input),U}if(C instanceof Date)return new Date(C.getTime());if(C instanceof RegExp){const U=new RegExp(C.source,C.flags);return U.lastIndex=C.lastIndex,U}if(C instanceof Map){const U=new Map;G.set(C,U);for(const[oe,ce]of C)U.set(oe,c(ce,oe,B,G,Z));return U}if(C instanceof Set){const U=new Set;G.set(C,U);for(const oe of C)U.add(c(oe,void 0,B,G,Z));return U}if(typeof Buffer<"u"&&Buffer.isBuffer(C))return C.subarray();if(g.isTypedArray(C)){const U=new(Object.getPrototypeOf(C)).constructor(C.length);G.set(C,U);for(let oe=0;oe<C.length;oe++)U[oe]=c(C[oe],oe,B,G,Z);return U}if(C instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&C instanceof SharedArrayBuffer)return C.slice(0);if(C instanceof DataView){const U=new DataView(C.buffer.slice(0),C.byteOffset,C.byteLength);return G.set(C,U),A(U,C,B,G,Z),U}if(typeof File<"u"&&C instanceof File){const U=new File([C],C.name,{type:C.type});return G.set(C,U),A(U,C,B,G,Z),U}if(typeof Blob<"u"&&C instanceof Blob){const U=new Blob([C],{type:C.type});return G.set(C,U),A(U,C,B,G,Z),U}if(C instanceof Error){const U=new C.constructor;return G.set(C,U),U.message=C.message,U.name=C.name,U.stack=C.stack,U.cause=C.cause,A(U,C,B,G,Z),U}if(C instanceof Boolean){const U=new Boolean(C.valueOf());return G.set(C,U),A(U,C,B,G,Z),U}if(C instanceof Number){const U=new Number(C.valueOf());return G.set(C,U),A(U,C,B,G,Z),U}if(C instanceof String){const U=new String(C.valueOf());return G.set(C,U),A(U,C,B,G,Z),U}if(typeof C=="object"&&P(C)){const U=Object.create(Object.getPrototypeOf(C));return G.set(C,U),A(U,C,B,G,Z),U}return C}function A(C,I,B=C,G,Z){const H=[...Object.keys(I),...t.getSymbols(I)];for(let U=0;U<H.length;U++){const oe=H[U],ce=Object.getOwnPropertyDescriptor(C,oe);(ce==null||ce.writable)&&(C[oe]=c(I[oe],oe,B,G,Z))}}function P(C){switch(i.getTag(C)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=y,e.cloneDeepWithImpl=c,e.copyProperties=A})(V1)),V1}var dA;function RL(){return dA||(dA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UI();function i(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=i})(U1)),U1}var pA;function LL(){return pA||(pA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NI(),i=RL();function a(d){return d=i.cloneDeep(d),g=>t.isMatch(g,d)}e.matches=a})(R1)),R1}var H1={},Y1={},X1={},mA;function BL(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UI(),i=SS(),a=FI();function d(g,y){return t.cloneDeepWith(g,(c,A,P,C)=>{const I=y?.(c,A,P,C);if(I!==void 0)return I;if(typeof g=="object"){if(i.getTag(g)===a.objectTag&&typeof g.constructor!="function"){const B={};return C.set(g,B),t.copyProperties(B,g,P,C),B}switch(Object.prototype.toString.call(g)){case a.numberTag:case a.stringTag:case a.booleanTag:{const B=new g.constructor(g?.valueOf());return t.copyProperties(B,g),B}case a.argumentsTag:{const B={};return t.copyProperties(B,g),B.length=g.length,B[Symbol.iterator]=g[Symbol.iterator],B}default:return}}})}e.cloneDeepWith=d})(X1)),X1}var gA;function jL(){return gA||(gA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BL();function i(a){return t.cloneDeepWith(a)}e.cloneDeep=i})(Y1)),Y1}var W1={},K1={},yA;function VI(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function i(a,d=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<d;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=i})(K1)),K1}var Q1={},vA;function NL(){return vA||(vA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SS();function i(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=i})(Q1)),Q1}var _A;function FL(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=II(),i=VI(),a=NL(),d=vS();function g(y,c){let A;if(Array.isArray(c)?A=c:typeof c=="string"&&t.isDeepKey(c)&&y?.[c]==null?A=d.toPath(c):A=[c],A.length===0)return!1;let P=y;for(let C=0;C<A.length;C++){const I=A[C];if((P==null||!Object.hasOwn(P,I))&&!((Array.isArray(P)||a.isArguments(P))&&i.isIndex(I)&&I<P.length))return!1;P=P[I]}return!0}e.has=g})(W1)),W1}var bA;function UL(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NI(),i=yS(),a=jL(),d=_S(),g=FL();function y(c,A){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=i.toKey(c);break}}return A=a.cloneDeep(A),function(P){const C=d.get(P,c);return C===void 0?g.has(P,c):A===void 0?C===void 0:t.isMatch(C,A)}}e.matchesProperty=y})(H1)),H1}var xA;function VL(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RI(),i=IL(),a=LL(),d=UL();function g(y){if(y==null)return t.identity;switch(typeof y){case"function":return y;case"object":return Array.isArray(y)&&y.length===2?d.matchesProperty(y[0],y[1]):a.matches(y);case"string":case"symbol":case"number":return i.property(y)}}e.iteratee=g})(z1)),z1}var wA;function GL(){return wA||(wA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AL(),i=ML(),a=RI(),d=DL(),g=VL();function y(c,A=a.identity){return d.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.ary(g.iteratee(A),1)):[]}e.uniqBy=y})(E1)),E1}var J1,SA;function qL(){return SA||(SA=1,J1=GL().uniqBy),J1}var $L=qL();const TA=Vl($L);function ZL(e,t,i){return t===!0?TA(e,i):typeof t=="function"?TA(e,t):e}var ew={exports:{}},tw={},rw={exports:{}},nw={};var EA;function HL(){if(EA)return nw;EA=1;var e=ny();function t(I,B){return I===B&&(I!==0||1/I===1/B)||I!==I&&B!==B}var i=typeof Object.is=="function"?Object.is:t,a=e.useState,d=e.useEffect,g=e.useLayoutEffect,y=e.useDebugValue;function c(I,B){var G=B(),Z=a({inst:{value:G,getSnapshot:B}}),H=Z[0].inst,U=Z[1];return g(function(){H.value=G,H.getSnapshot=B,A(H)&&U({inst:H})},[I,G,B]),d(function(){return A(H)&&U({inst:H}),I(function(){A(H)&&U({inst:H})})},[I]),y(G),G}function A(I){var B=I.getSnapshot;I=I.value;try{var G=B();return!i(I,G)}catch{return!0}}function P(I,B){return B()}var C=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P:c;return nw.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:C,nw}var AA;function YL(){return AA||(AA=1,rw.exports=HL()),rw.exports}var MA;function XL(){if(MA)return tw;MA=1;var e=ny(),t=YL();function i(P,C){return P===C&&(P!==0||1/P===1/C)||P!==P&&C!==C}var a=typeof Object.is=="function"?Object.is:i,d=t.useSyncExternalStore,g=e.useRef,y=e.useEffect,c=e.useMemo,A=e.useDebugValue;return tw.useSyncExternalStoreWithSelector=function(P,C,I,B,G){var Z=g(null);if(Z.current===null){var H={hasValue:!1,value:null};Z.current=H}else H=Z.current;Z=c(function(){function oe(Me){if(!ce){if(ce=!0,fe=Me,Me=B(Me),G!==void 0&&H.hasValue){var ze=H.value;if(G(ze,Me))return ve=ze}return ve=Me}if(ze=ve,a(fe,Me))return ze;var Ke=B(Me);return G!==void 0&&G(ze,Ke)?(fe=Me,ze):(fe=Me,ve=Ke)}var ce=!1,fe,ve,Ee=I===void 0?null:I;return[function(){return oe(C())},Ee===null?void 0:function(){return oe(Ee())}]},[C,I,B,G]);var U=d(P,Z[0],Z[1]);return y(function(){H.hasValue=!0,H.value=U},[U]),A(U),U},tw}var PA;function WL(){return PA||(PA=1,ew.exports=XL()),ew.exports}var KL=WL(),TS=X.createContext(null),QL=e=>e,pa=()=>{var e=X.useContext(TS);return e?e.store.dispatch:QL},J_=()=>{},JL=()=>J_,eB=(e,t)=>e===t;function dr(e){var t=X.useContext(TS),i=X.useMemo(()=>t?a=>{if(a!=null)return e(a)}:J_,[t,e]);return KL.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:JL,t?t.store.getState:J_,t?t.store.getState:J_,i,eB)}function tB(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function rB(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function nB(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(i=>typeof i=="function")){const i=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${i}]`)}}var CA=e=>Array.isArray(e)?e:[e];function iB(e){const t=Array.isArray(e[0])?e[0]:e;return nB(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function aB(e,t){const i=[],{length:a}=e;for(let d=0;d<a;d++)i.push(e[d].apply(null,t));return i}var oB=class{constructor(e){this.value=e}deref(){return this.value}},sB=typeof WeakRef<"u"?WeakRef:oB,lB=0,DA=1;function P_(){return{s:lB,v:void 0,o:null,p:null}}function GI(e,t={}){let i=P_();const{resultEqualityCheck:a}=t;let d,g=0;function y(){let c=i;const{length:A}=arguments;for(let I=0,B=A;I<B;I++){const G=arguments[I];if(typeof G=="function"||typeof G=="object"&&G!==null){let Z=c.o;Z===null&&(c.o=Z=new WeakMap);const H=Z.get(G);H===void 0?(c=P_(),Z.set(G,c)):c=H}else{let Z=c.p;Z===null&&(c.p=Z=new Map);const H=Z.get(G);H===void 0?(c=P_(),Z.set(G,c)):c=H}}const P=c;let C;if(c.s===DA)C=c.v;else if(C=e.apply(null,arguments),g++,a){const I=d?.deref?.()??d;I!=null&&a(I,C)&&(C=I,g!==0&&g--),d=typeof C=="object"&&C!==null||typeof C=="function"?new sB(C):C}return P.s=DA,P.v=C,C}return y.clearCache=()=>{i=P_(),y.resetResultsCount()},y.resultsCount=()=>g,y.resetResultsCount=()=>{g=0},y}function cB(e,...t){const i=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...d)=>{let g=0,y=0,c,A={},P=d.pop();typeof P=="object"&&(A=P,P=d.pop()),tB(P,`createSelector expects an output function after the inputs, but received: [${typeof P}]`);const C={...i,...A},{memoize:I,memoizeOptions:B=[],argsMemoize:G=GI,argsMemoizeOptions:Z=[]}=C,H=CA(B),U=CA(Z),oe=iB(d),ce=I(function(){return g++,P.apply(null,arguments)},...H),fe=G(function(){y++;const Ee=aB(oe,arguments);return c=ce.apply(null,Ee),c},...U);return Object.assign(fe,{resultFunc:P,memoizedResultFunc:ce,dependencies:oe,dependencyRecomputations:()=>y,resetDependencyRecomputations:()=>{y=0},lastResult:()=>c,recomputations:()=>g,resetRecomputations:()=>{g=0},memoize:I,argsMemoize:G})};return Object.assign(a,{withTypes:()=>a}),a}var ut=cB(GI),uB=Object.assign((e,t=ut)=>{rB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const i=Object.keys(e),a=i.map(g=>e[g]);return t(a,(...g)=>g.reduce((y,c,A)=>(y[i[A]]=c,y),{}))},{withTypes:()=>uB}),iw={},aw={},ow={},IA;function hB(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const i=(a,d,g)=>{if(a!==d){const y=t(a),c=t(d);if(y===c&&y===0){if(a<d)return g==="desc"?1:-1;if(a>d)return g==="desc"?-1:1}return g==="desc"?c-y:y-c}return 0};e.compareValues=i})(ow)),ow}var sw={},lw={},OA;function qI(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="symbol"||i instanceof Symbol}e.isSymbol=t})(lw)),lw}var zA;function fB(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qI(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function d(g,y){return Array.isArray(g)?!1:typeof g=="number"||typeof g=="boolean"||g==null||t.isSymbol(g)?!0:typeof g=="string"&&(a.test(g)||!i.test(g))||y!=null&&Object.hasOwn(y,g)}e.isKey=d})(sw)),sw}var kA;function dB(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hB(),i=fB(),a=vS();function d(g,y,c,A){if(g==null)return[];c=A?void 0:c,Array.isArray(g)||(g=Object.values(g)),Array.isArray(y)||(y=y==null?[null]:[y]),y.length===0&&(y=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(G=>String(G));const P=(G,Z)=>{let H=G;for(let U=0;U<Z.length&&H!=null;++U)H=H[Z[U]];return H},C=(G,Z)=>Z==null||G==null?Z:typeof G=="object"&&"key"in G?Object.hasOwn(Z,G.key)?Z[G.key]:P(Z,G.path):typeof G=="function"?G(Z):Array.isArray(G)?P(Z,G):typeof Z=="object"?Z[G]:Z,I=y.map(G=>(Array.isArray(G)&&G.length===1&&(G=G[0]),G==null||typeof G=="function"||Array.isArray(G)||i.isKey(G)?G:{key:G,path:a.toPath(G)}));return g.map(G=>({original:G,criteria:I.map(Z=>C(Z,G))})).slice().sort((G,Z)=>{for(let H=0;H<I.length;H++){const U=t.compareValues(G.criteria[H],Z.criteria[H],c[H]);if(U!==0)return U}return 0}).map(G=>G.original)}e.orderBy=d})(aw)),aw}var cw={},RA;function pB(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a=1){const d=[],g=Math.floor(a),y=(c,A)=>{for(let P=0;P<c.length;P++){const C=c[P];Array.isArray(C)&&A<g?y(C,A+1):d.push(C)}};return y(i,0),d}e.flatten=t})(cw)),cw}var uw={},LA;function $I(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VI(),i=wS(),a=LI(),d=jI();function g(y,c,A){return a.isObject(A)&&(typeof c=="number"&&i.isArrayLike(A)&&t.isIndex(c)&&c<A.length||typeof c=="string"&&c in A)?d.isEqualsSameValueZero(A[c],y):!1}e.isIterateeCall=g})(uw)),uw}var BA;function mB(){return BA||(BA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dB(),i=pB(),a=$I();function d(g,...y){const c=y.length;return c>1&&a.isIterateeCall(g,y[0],y[1])?y=[]:c>2&&a.isIterateeCall(y[0],y[1],y[2])&&(y=[y[0]]),t.orderBy(g,i.flatten(y),["asc"])}e.sortBy=d})(iw)),iw}var hw,jA;function gB(){return jA||(jA=1,hw=mB().sortBy),hw}var yB=gB();const ax=Vl(yB);var ZI=e=>e.legend.settings,vB=e=>e.legend.size,_B=e=>e.legend.payload;ut([_B,ZI],(e,t)=>{var{itemSorter:i}=t,a=e.flat(1);return i?ax(a,i):a});var C_=1;function bB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,i]=X.useState({height:0,left:0,top:0,width:0}),a=X.useCallback(d=>{if(d!=null){var g=d.getBoundingClientRect(),y={height:g.height,left:g.left,top:g.top,width:g.width};(Math.abs(y.height-t.height)>C_||Math.abs(y.left-t.left)>C_||Math.abs(y.top-t.top)>C_||Math.abs(y.width-t.width)>C_)&&i({height:y.height,left:y.left,top:y.top,width:y.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function Ua(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var xB=typeof Symbol=="function"&&Symbol.observable||"@@observable",NA=xB,fw=()=>Math.random().toString(36).substring(7).split("").join("."),wB={INIT:`@@redux/INIT${fw()}`,REPLACE:`@@redux/REPLACE${fw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${fw()}`},hb=wB;function ES(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function HI(e,t,i){if(typeof e!="function")throw new Error(Ua(2));if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Ua(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Ua(1));return i(HI)(e,t)}let a=e,d=t,g=new Map,y=g,c=0,A=!1;function P(){y===g&&(y=new Map,g.forEach((U,oe)=>{y.set(oe,U)}))}function C(){if(A)throw new Error(Ua(3));return d}function I(U){if(typeof U!="function")throw new Error(Ua(4));if(A)throw new Error(Ua(5));let oe=!0;P();const ce=c++;return y.set(ce,U),function(){if(oe){if(A)throw new Error(Ua(6));oe=!1,P(),y.delete(ce),g=null}}}function B(U){if(!ES(U))throw new Error(Ua(7));if(typeof U.type>"u")throw new Error(Ua(8));if(typeof U.type!="string")throw new Error(Ua(17));if(A)throw new Error(Ua(9));try{A=!0,d=a(d,U)}finally{A=!1}return(g=y).forEach(ce=>{ce()}),U}function G(U){if(typeof U!="function")throw new Error(Ua(10));a=U,B({type:hb.REPLACE})}function Z(){const U=I;return{subscribe(oe){if(typeof oe!="object"||oe===null)throw new Error(Ua(11));function ce(){const ve=oe;ve.next&&ve.next(C())}return ce(),{unsubscribe:U(ce)}},[NA](){return this}}}return B({type:hb.INIT}),{dispatch:B,subscribe:I,getState:C,replaceReducer:G,[NA]:Z}}function SB(e){Object.keys(e).forEach(t=>{const i=e[t];if(typeof i(void 0,{type:hb.INIT})>"u")throw new Error(Ua(12));if(typeof i(void 0,{type:hb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ua(13))})}function YI(e){const t=Object.keys(e),i={};for(let g=0;g<t.length;g++){const y=t[g];typeof e[y]=="function"&&(i[y]=e[y])}const a=Object.keys(i);let d;try{SB(i)}catch(g){d=g}return function(y={},c){if(d)throw d;let A=!1;const P={};for(let C=0;C<a.length;C++){const I=a[C],B=i[I],G=y[I],Z=B(G,c);if(typeof Z>"u")throw c&&c.type,new Error(Ua(14));P[I]=Z,A=A||Z!==G}return A=A||a.length!==Object.keys(y).length,A?P:y}}function fb(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,i)=>(...a)=>t(i(...a)))}function TB(...e){return t=>(i,a)=>{const d=t(i,a);let g=()=>{throw new Error(Ua(15))};const y={getState:d.getState,dispatch:(A,...P)=>g(A,...P)},c=e.map(A=>A(y));return g=fb(...c)(d.dispatch),{...d,dispatch:g}}}function XI(e){return ES(e)&&"type"in e&&typeof e.type=="string"}var WI=Symbol.for("immer-nothing"),FA=Symbol.for("immer-draftable"),jo=Symbol.for("immer-state");function jc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ws=Object,Kg=Ws.getPrototypeOf,db="constructor",ox="prototype",u2="configurable",pb="enumerable",eb="writable",F0="value",of=e=>!!e&&!!e[jo];function Gc(e){return e?KI(e)||lx(e)||!!e[FA]||!!e[db]?.[FA]||cx(e)||ux(e):!1}var EB=Ws[ox][db].toString(),UA=new WeakMap;function KI(e){if(!e||!AS(e))return!1;const t=Kg(e);if(t===null||t===Ws[ox])return!0;const i=Ws.hasOwnProperty.call(t,db)&&t[db];if(i===Object)return!0;if(!Ug(i))return!1;let a=UA.get(i);return a===void 0&&(a=Function.toString.call(i),UA.set(i,a)),a===EB}function sx(e,t,i=!0){ov(e)===0?(i?Reflect.ownKeys(e):Ws.keys(e)).forEach(d=>{t(d,e[d],e)}):e.forEach((a,d)=>t(d,a,e))}function ov(e){const t=e[jo];return t?t.type_:lx(e)?1:cx(e)?2:ux(e)?3:0}var VA=(e,t,i=ov(e))=>i===2?e.has(t):Ws[ox].hasOwnProperty.call(e,t),h2=(e,t,i=ov(e))=>i===2?e.get(t):e[t],mb=(e,t,i,a=ov(e))=>{a===2?e.set(t,i):a===3?e.add(i):e[t]=i};function AB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var lx=Array.isArray,cx=e=>e instanceof Map,ux=e=>e instanceof Set,AS=e=>typeof e=="object",Ug=e=>typeof e=="function",dw=e=>typeof e=="boolean";function MB(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Kh=e=>e.copy_||e.base_,MS=e=>e.modified_?e.copy_:e.base_;function f2(e,t){if(cx(e))return new Map(e);if(ux(e))return new Set(e);if(lx(e))return Array[ox].slice.call(e);const i=KI(e);if(t===!0||t==="class_only"&&!i){const a=Ws.getOwnPropertyDescriptors(e);delete a[jo];let d=Reflect.ownKeys(a);for(let g=0;g<d.length;g++){const y=d[g],c=a[y];c[eb]===!1&&(c[eb]=!0,c[u2]=!0),(c.get||c.set)&&(a[y]={[u2]:!0,[eb]:!0,[pb]:c[pb],[F0]:e[y]})}return Ws.create(Kg(e),a)}else{const a=Kg(e);if(a!==null&&i)return{...e};const d=Ws.create(a);return Ws.assign(d,e)}}function PS(e,t=!1){return hx(e)||of(e)||!Gc(e)||(ov(e)>1&&Ws.defineProperties(e,{set:D_,add:D_,clear:D_,delete:D_}),Ws.freeze(e),t&&sx(e,(i,a)=>{PS(a,!0)},!1)),e}function PB(){jc(2)}var D_={[F0]:PB};function hx(e){return e===null||!AS(e)?!0:Ws.isFrozen(e)}var gb="MapSet",d2="Patches",GA="ArrayMethods",QI={};function tm(e){const t=QI[e];return t||jc(0,e),t}var qA=e=>!!QI[e],U0,JI=()=>U0,CB=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:qA(gb)?tm(gb):void 0,arrayMethodsPlugin_:qA(GA)?tm(GA):void 0});function $A(e,t){t&&(e.patchPlugin_=tm(d2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function p2(e){m2(e),e.drafts_.forEach(DB),e.drafts_=null}function m2(e){e===U0&&(U0=e.parent_)}var ZA=e=>U0=CB(U0,e);function DB(e){const t=e[jo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function HA(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];if(e!==void 0&&e!==i){i[jo].modified_&&(p2(t),jc(4)),Gc(e)&&(e=YA(t,e));const{patchPlugin_:d}=t;d&&d.generateReplacementPatches_(i[jo].base_,e,t)}else e=YA(t,i);return IB(t,e,!0),p2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==WI?e:void 0}function YA(e,t){if(hx(t))return t;const i=t[jo];if(!i)return yb(t,e.handledSet_,e);if(!fx(i,e))return t;if(!i.modified_)return i.base_;if(!i.finalized_){const{callbacks_:a}=i;if(a)for(;a.length>0;)a.pop()(e);rO(i,e)}return i.copy_}function IB(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&PS(t,i)}function eO(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var fx=(e,t)=>e.scope_===t,OB=[];function tO(e,t,i,a){const d=Kh(e),g=e.type_;if(a!==void 0&&h2(d,a,g)===t){mb(d,a,i,g);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;sx(d,(A,P)=>{if(of(P)){const C=c.get(P)||[];C.push(A),c.set(P,C)}})}const y=e.draftLocations_.get(t)??OB;for(const c of y)mb(d,c,i,g)}function zB(e,t,i){e.callbacks_.push(function(d){const g=t;if(!g||!fx(g,d))return;d.mapSetPlugin_?.fixSetContents(g);const y=MS(g);tO(e,g.draft_??g,y,i),rO(g,d)})}function rO(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const d=a.getPath(e);d&&a.generatePatches_(e,d,t)}eO(e)}}function kB(e,t,i){const{scope_:a}=e;if(of(i)){const d=i[jo];fx(d,a)&&d.callbacks_.push(function(){tb(e);const y=MS(d);tO(e,i,y,t)})}else Gc(i)&&e.callbacks_.push(function(){const g=Kh(e);e.type_===3?g.has(i)&&yb(i,a.handledSet_,a):h2(g,t,e.type_)===i&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&yb(h2(e.copy_,t,e.type_),a.handledSet_,a)})}function yb(e,t,i){return!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1||of(e)||t.has(e)||!Gc(e)||hx(e)||(t.add(e),sx(e,(a,d)=>{if(of(d)){const g=d[jo];if(fx(g,i)){const y=MS(g);mb(e,a,y,e.type_),eO(g)}}else Gc(d)&&yb(d,t,i)})),e}function RB(e,t){const i=lx(e),a={type_:i?1:0,scope_:t?t.scope_:JI(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let d=a,g=vb;i&&(d=[a],g=V0);const{revoke:y,proxy:c}=Proxy.revocable(d,g);return a.draft_=c,a.revoke_=y,[c,a]}var vb={get(e,t){if(t===jo)return e;let i=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&i?.isArrayOperationMethod(t))return i.createMethodInterceptor(e,t);const d=Kh(e);if(!VA(d,t,e.type_))return LB(e,d,t);const g=d[t];if(e.finalized_||!Gc(g)||a&&e.operationMethod&&i?.isMutatingArrayMethod(e.operationMethod)&&MB(t))return g;if(g===pw(e.base_,t)){tb(e);const y=e.type_===1?+t:t,c=y2(e.scope_,g,e,y);return e.copy_[y]=c}return g},has(e,t){return t in Kh(e)},ownKeys(e){return Reflect.ownKeys(Kh(e))},set(e,t,i){const a=nO(Kh(e),t);if(a?.set)return a.set.call(e.draft_,i),!0;if(!e.modified_){const d=pw(Kh(e),t),g=d?.[jo];if(g&&g.base_===i)return e.copy_[t]=i,e.assigned_.set(t,!1),!0;if(AB(i,d)&&(i!==void 0||VA(e.base_,t,e.type_)))return!0;tb(e),g2(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_.set(t,!0),kB(e,t,i)),!0},deleteProperty(e,t){return tb(e),pw(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),g2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=Kh(e),a=Reflect.getOwnPropertyDescriptor(i,t);return a&&{[eb]:!0,[u2]:e.type_!==1||t!=="length",[pb]:a[pb],[F0]:i[t]}},defineProperty(){jc(11)},getPrototypeOf(e){return Kg(e.base_)},setPrototypeOf(){jc(12)}},V0={};for(let e in vb){let t=vb[e];V0[e]=function(){const i=arguments;return i[0]=i[0][0],t.apply(this,i)}}V0.deleteProperty=function(e,t){return V0.set.call(this,e,t,void 0)};V0.set=function(e,t,i){return vb.set.call(this,e[0],t,i,e[0])};function pw(e,t){const i=e[jo];return(i?Kh(i):e)[t]}function LB(e,t,i){const a=nO(t,i);return a?F0 in a?a[F0]:a.get?.call(e.draft_):void 0}function nO(e,t){if(!(t in e))return;let i=Kg(e);for(;i;){const a=Object.getOwnPropertyDescriptor(i,t);if(a)return a;i=Kg(i)}}function g2(e){e.modified_||(e.modified_=!0,e.parent_&&g2(e.parent_))}function tb(e){e.copy_||(e.assigned_=new Map,e.copy_=f2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var BB=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(i,a,d)=>{if(Ug(i)&&!Ug(a)){const y=a;a=i;const c=this;return function(P=y,...C){return c.produce(P,I=>a.call(this,I,...C))}}Ug(a)||jc(6),d!==void 0&&!Ug(d)&&jc(7);let g;if(Gc(i)){const y=ZA(this),c=y2(y,i,void 0);let A=!0;try{g=a(c),A=!1}finally{A?p2(y):m2(y)}return $A(y,d),HA(g,y)}else if(!i||!AS(i)){if(g=a(i),g===void 0&&(g=i),g===WI&&(g=void 0),this.autoFreeze_&&PS(g,!0),d){const y=[],c=[];tm(d2).generateReplacementPatches_(i,g,{patches_:y,inversePatches_:c}),d(y,c)}return g}else jc(1,i)},this.produceWithPatches=(i,a)=>{if(Ug(i))return(c,...A)=>this.produceWithPatches(c,P=>i(P,...A));let d,g;return[this.produce(i,a,(c,A)=>{d=c,g=A}),d,g]},dw(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),dw(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),dw(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Gc(t)||jc(8),of(t)&&(t=Uc(t));const i=ZA(this),a=y2(i,t,void 0);return a[jo].isManual_=!0,m2(i),a}finishDraft(t,i){const a=t&&t[jo];(!a||!a.isManual_)&&jc(9);const{scope_:d}=a;return $A(d,i),HA(void 0,d)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,i){let a;for(a=i.length-1;a>=0;a--){const g=i[a];if(g.path.length===0&&g.op==="replace"){t=g.value;break}}a>-1&&(i=i.slice(a+1));const d=tm(d2).applyPatches_;return of(t)?d(t,i):this.produce(t,g=>d(g,i))}};function y2(e,t,i,a){const[d,g]=cx(t)?tm(gb).proxyMap_(t,i):ux(t)?tm(gb).proxySet_(t,i):RB(t,i);return(i?.scope_??JI()).drafts_.push(d),g.callbacks_=i?.callbacks_??[],g.key_=a,i&&a!==void 0?zB(i,g,a):g.callbacks_.push(function(A){A.mapSetPlugin_?.fixSetContents(g);const{patchPlugin_:P}=A;g.modified_&&P&&P.generatePatches_(g,[],A)}),d}function Uc(e){return of(e)||jc(10,e),iO(e)}function iO(e){if(!Gc(e)||hx(e))return e;const t=e[jo];let i,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=f2(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else i=f2(e,!0);return sx(i,(d,g)=>{mb(i,d,iO(g))},a),t&&(t.finalized_=!1),i}var jB=new BB,aO=jB.produce;function oO(e){return({dispatch:i,getState:a})=>d=>g=>typeof g=="function"?g(i,a,e):d(g)}var NB=oO(),FB=oO,UB=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fb:fb.apply(null,arguments)};function Fl(e,t){function i(...a){if(t){let d=t(...a);if(!d)throw new Error(Ks(0));return{type:e,payload:d.payload,..."meta"in d&&{meta:d.meta},..."error"in d&&{error:d.error}}}return{type:e,payload:a[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=a=>XI(a)&&a.type===e,i}var sO=class D0 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,D0.prototype)}static get[Symbol.species](){return D0}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new D0(...t[0].concat(this)):new D0(...t.concat(this))}};function XA(e){return Gc(e)?aO(e,()=>{}):e}function I_(e,t,i){return e.has(t)?e.get(t):e.set(t,i(t)).get(t)}function VB(e){return typeof e=="boolean"}var GB=()=>function(t){const{thunk:i=!0,immutableCheck:a=!0,serializableCheck:d=!0,actionCreatorCheck:g=!0}=t??{};let y=new sO;return i&&(VB(i)?y.push(NB):y.push(FB(i.extraArgument))),y},lO="RTK_autoBatch",ei=()=>e=>({payload:e,meta:{[lO]:!0}}),WA=e=>t=>{setTimeout(t,e)},cO=(e={type:"raf"})=>t=>(...i)=>{const a=t(...i);let d=!0,g=!1,y=!1;const c=new Set,A=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WA(10):e.type==="callback"?e.queueNotification:WA(e.timeout),P=()=>{y=!1,g&&(g=!1,c.forEach(C=>C()))};return Object.assign({},a,{subscribe(C){const I=()=>d&&C(),B=a.subscribe(I);return c.add(C),()=>{B(),c.delete(C)}},dispatch(C){try{return d=!C?.meta?.[lO],g=!d,g&&(y||(y=!0,A(P))),a.dispatch(C)}finally{d=!0}}})},qB=e=>function(i){const{autoBatch:a=!0}=i??{};let d=new sO(e);return a&&d.push(cO(typeof a=="object"?a:void 0)),d};function $B(e){const t=GB(),{reducer:i=void 0,middleware:a,devTools:d=!0,preloadedState:g=void 0,enhancers:y=void 0}=e||{};let c;if(typeof i=="function")c=i;else if(ES(i))c=YI(i);else throw new Error(Ks(1));let A;typeof a=="function"?A=a(t):A=t();let P=fb;d&&(P=UB({trace:!1,...typeof d=="object"&&d}));const C=TB(...A),I=qB(C);let B=typeof y=="function"?y(I):I();const G=P(...B);return HI(c,g,G)}function uO(e){const t={},i=[];let a;const d={addCase(g,y){const c=typeof g=="string"?g:g.type;if(!c)throw new Error(Ks(28));if(c in t)throw new Error(Ks(29));return t[c]=y,d},addAsyncThunk(g,y){return y.pending&&(t[g.pending.type]=y.pending),y.rejected&&(t[g.rejected.type]=y.rejected),y.fulfilled&&(t[g.fulfilled.type]=y.fulfilled),y.settled&&i.push({matcher:g.settled,reducer:y.settled}),d},addMatcher(g,y){return i.push({matcher:g,reducer:y}),d},addDefaultCase(g){return a=g,d}};return e(d),[t,i,a]}function ZB(e){return typeof e=="function"}function HB(e,t){let[i,a,d]=uO(t),g;if(ZB(e))g=()=>XA(e());else{const c=XA(e);g=()=>c}function y(c=g(),A){let P=[i[A.type],...a.filter(({matcher:C})=>C(A)).map(({reducer:C})=>C)];return P.filter(C=>!!C).length===0&&(P=[d]),P.reduce((C,I)=>{if(I)if(of(C)){const G=I(C,A);return G===void 0?C:G}else{if(Gc(C))return aO(C,B=>I(B,A));{const B=I(C,A);if(B===void 0){if(C===null)return C;throw Error("A case reducer on a non-draftable value must not return undefined")}return B}}return C},c)}return y.getInitialState=g,y}var YB="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",XB=(e=21)=>{let t="",i=e;for(;i--;)t+=YB[Math.random()*64|0];return t},WB=Symbol.for("rtk-slice-createasyncthunk");function KB(e,t){return`${e}/${t}`}function QB({creators:e}={}){const t=e?.asyncThunk?.[WB];return function(a){const{name:d,reducerPath:g=d}=a;if(!d)throw new Error(Ks(11));const y=(typeof a.reducers=="function"?a.reducers(ej()):a.reducers)||{},c=Object.keys(y),A={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},P={addCase(fe,ve){const Ee=typeof fe=="string"?fe:fe.type;if(!Ee)throw new Error(Ks(12));if(Ee in A.sliceCaseReducersByType)throw new Error(Ks(13));return A.sliceCaseReducersByType[Ee]=ve,P},addMatcher(fe,ve){return A.sliceMatchers.push({matcher:fe,reducer:ve}),P},exposeAction(fe,ve){return A.actionCreators[fe]=ve,P},exposeCaseReducer(fe,ve){return A.sliceCaseReducersByName[fe]=ve,P}};c.forEach(fe=>{const ve=y[fe],Ee={reducerName:fe,type:KB(d,fe),createNotation:typeof a.reducers=="function"};rj(ve)?ij(Ee,ve,P,t):tj(Ee,ve,P)});function C(){const[fe={},ve=[],Ee=void 0]=typeof a.extraReducers=="function"?uO(a.extraReducers):[a.extraReducers],Me={...fe,...A.sliceCaseReducersByType};return HB(a.initialState,ze=>{for(let Ke in Me)ze.addCase(Ke,Me[Ke]);for(let Ke of A.sliceMatchers)ze.addMatcher(Ke.matcher,Ke.reducer);for(let Ke of ve)ze.addMatcher(Ke.matcher,Ke.reducer);Ee&&ze.addDefaultCase(Ee)})}const I=fe=>fe,B=new Map,G=new WeakMap;let Z;function H(fe,ve){return Z||(Z=C()),Z(fe,ve)}function U(){return Z||(Z=C()),Z.getInitialState()}function oe(fe,ve=!1){function Ee(ze){let Ke=ze[fe];return typeof Ke>"u"&&ve&&(Ke=I_(G,Ee,U)),Ke}function Me(ze=I){const Ke=I_(B,ve,()=>new WeakMap);return I_(Ke,ze,()=>{const mt={};for(const[zt,Ge]of Object.entries(a.selectors??{}))mt[zt]=JB(Ge,ze,()=>I_(G,ze,U),ve);return mt})}return{reducerPath:fe,getSelectors:Me,get selectors(){return Me(Ee)},selectSlice:Ee}}const ce={name:d,reducer:H,actions:A.actionCreators,caseReducers:A.sliceCaseReducersByName,getInitialState:U,...oe(g),injectInto(fe,{reducerPath:ve,...Ee}={}){const Me=ve??g;return fe.inject({reducerPath:Me,reducer:H},Ee),{...ce,...oe(Me,!0)}}};return ce}}function JB(e,t,i,a){function d(g,...y){let c=t(g);return typeof c>"u"&&a&&(c=i()),e(c,...y)}return d.unwrapped=e,d}var vs=QB();function ej(){function e(t,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...i}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...i){return t(...i)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:i}},asyncThunk:e}}function tj({type:e,reducerName:t,createNotation:i},a,d){let g,y;if("reducer"in a){if(i&&!nj(a))throw new Error(Ks(17));g=a.reducer,y=a.prepare}else g=a;d.addCase(e,g).exposeCaseReducer(t,g).exposeAction(t,y?Fl(e,y):Fl(e))}function rj(e){return e._reducerDefinitionType==="asyncThunk"}function nj(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ij({type:e,reducerName:t},i,a,d){if(!d)throw new Error(Ks(18));const{payloadCreator:g,fulfilled:y,pending:c,rejected:A,settled:P,options:C}=i,I=d(e,g,C);a.exposeAction(t,I),y&&a.addCase(I.fulfilled,y),c&&a.addCase(I.pending,c),A&&a.addCase(I.rejected,A),P&&a.addMatcher(I.settled,P),a.exposeCaseReducer(t,{fulfilled:y||O_,pending:c||O_,rejected:A||O_,settled:P||O_})}function O_(){}var aj="task",hO="listener",fO="completed",CS="cancelled",oj=`task-${CS}`,sj=`task-${fO}`,v2=`${hO}-${CS}`,lj=`${hO}-${fO}`,dx=class{constructor(e){this.code=e,this.message=`${aj} ${CS} (reason: ${e})`}name="TaskAbortError";message},DS=(e,t)=>{if(typeof e!="function")throw new TypeError(Ks(32))},_b=()=>{},dO=(e,t=_b)=>(e.catch(t),e),pO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Xp=e=>{if(e.aborted)throw new dx(e.reason)};function mO(e,t){let i=_b;return new Promise((a,d)=>{const g=()=>d(new dx(e.reason));if(e.aborted){g();return}i=pO(e,g),t.finally(()=>i()).then(a,d)}).finally(()=>{i=_b})}var cj=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(i){return{status:i instanceof dx?"cancelled":"rejected",error:i}}finally{t?.()}},bb=e=>t=>dO(mO(e,t).then(i=>(Xp(e),i))),gO=e=>{const t=bb(e);return i=>t(new Promise(a=>setTimeout(a,i)))},{assign:Hg}=Object,KA={},px="listenerMiddleware",uj=(e,t)=>{const i=a=>pO(e,()=>a.abort(e.reason));return(a,d)=>{DS(a);const g=new AbortController;i(g);const y=cj(async()=>{Xp(e),Xp(g.signal);const c=await a({pause:bb(g.signal),delay:gO(g.signal),signal:g.signal});return Xp(g.signal),c},()=>g.abort(sj));return d?.autoJoin&&t.push(y.catch(_b)),{result:bb(e)(y),cancel(){g.abort(oj)}}}},hj=(e,t)=>{const i=async(a,d)=>{Xp(t);let g=()=>{};const c=[new Promise((A,P)=>{let C=e({predicate:a,effect:(I,B)=>{B.unsubscribe(),A([I,B.getState(),B.getOriginalState()])}});g=()=>{C(),P()}})];d!=null&&c.push(new Promise(A=>setTimeout(A,d,null)));try{const A=await mO(t,Promise.race(c));return Xp(t),A}finally{g()}};return(a,d)=>dO(i(a,d))},yO=e=>{let{type:t,actionCreator:i,matcher:a,predicate:d,effect:g}=e;if(t)d=Fl(t).match;else if(i)t=i.type,d=i.match;else if(a)d=a;else if(!d)throw new Error(Ks(21));return DS(g),{predicate:d,type:t,effect:g}},vO=Hg(e=>{const{type:t,predicate:i,effect:a}=yO(e);return{id:XB(),effect:a,type:t,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(Ks(22))}}},{withTypes:()=>vO}),QA=(e,t)=>{const{type:i,effect:a,predicate:d}=yO(t);return Array.from(e.values()).find(g=>(typeof i=="string"?g.type===i:g.predicate===d)&&g.effect===a)},_2=e=>{e.pending.forEach(t=>{t.abort(v2)})},fj=(e,t)=>()=>{for(const i of t.keys())_2(i);e.clear()},JA=(e,t,i)=>{try{e(t,i)}catch(a){setTimeout(()=>{throw a},0)}},_O=Hg(Fl(`${px}/add`),{withTypes:()=>_O}),dj=Fl(`${px}/removeAll`),bO=Hg(Fl(`${px}/remove`),{withTypes:()=>bO}),pj=(...e)=>{console.error(`${px}/error`,...e)},sv=(e={})=>{const t=new Map,i=new Map,a=G=>{const Z=i.get(G)??0;i.set(G,Z+1)},d=G=>{const Z=i.get(G)??1;Z===1?i.delete(G):i.set(G,Z-1)},{extra:g,onError:y=pj}=e;DS(y);const c=G=>(G.unsubscribe=()=>t.delete(G.id),t.set(G.id,G),Z=>{G.unsubscribe(),Z?.cancelActive&&_2(G)}),A=G=>{const Z=QA(t,G)??vO(G);return c(Z)};Hg(A,{withTypes:()=>A});const P=G=>{const Z=QA(t,G);return Z&&(Z.unsubscribe(),G.cancelActive&&_2(Z)),!!Z};Hg(P,{withTypes:()=>P});const C=async(G,Z,H,U)=>{const oe=new AbortController,ce=hj(A,oe.signal),fe=[];try{G.pending.add(oe),a(G),await Promise.resolve(G.effect(Z,Hg({},H,{getOriginalState:U,condition:(ve,Ee)=>ce(ve,Ee).then(Boolean),take:ce,delay:gO(oe.signal),pause:bb(oe.signal),extra:g,signal:oe.signal,fork:uj(oe.signal,fe),unsubscribe:G.unsubscribe,subscribe:()=>{t.set(G.id,G)},cancelActiveListeners:()=>{G.pending.forEach((ve,Ee,Me)=>{ve!==oe&&(ve.abort(v2),Me.delete(ve))})},cancel:()=>{oe.abort(v2),G.pending.delete(oe)},throwIfCancelled:()=>{Xp(oe.signal)}})))}catch(ve){ve instanceof dx||JA(y,ve,{raisedBy:"effect"})}finally{await Promise.all(fe),oe.abort(lj),d(G),G.pending.delete(oe)}},I=fj(t,i);return{middleware:G=>Z=>H=>{if(!XI(H))return Z(H);if(_O.match(H))return A(H.payload);if(dj.match(H)){I();return}if(bO.match(H))return P(H.payload);let U=G.getState();const oe=()=>{if(U===KA)throw new Error(Ks(23));return U};let ce;try{if(ce=Z(H),t.size>0){const fe=G.getState(),ve=Array.from(t.values());for(const Ee of ve){let Me=!1;try{Me=Ee.predicate(H,fe,U)}catch(ze){Me=!1,JA(y,ze,{raisedBy:"predicate"})}Me&&C(Ee,H,G,oe)}}}finally{U=KA}return ce},startListening:A,stopListening:P,clearListeners:I}};function Ks(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mj={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xO=vs({name:"chartLayout",initialState:mj,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var i,a,d,g;e.margin.top=(i=t.payload.top)!==null&&i!==void 0?i:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(d=t.payload.bottom)!==null&&d!==void 0?d:0,e.margin.left=(g=t.payload.left)!==null&&g!==void 0?g:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:gj,setLayout:yj,setChartSize:vj,setScale:_j}=xO.actions,bj=xO.reducer;function wO(e,t,i){return Array.isArray(e)&&e&&t+i!==0?e.slice(t,i+1):e}function Fr(e){return Number.isFinite(e)}function Zu(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function eM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Gg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?eM(Object(i),!0).forEach(function(a){xj(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function xj(e,t,i){return(t=wj(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function wj(e){var t=Sj(e,"string");return typeof t=="symbol"?t:t+""}function Sj(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $a(e,t,i){return yo(e)||yo(t)?i:$u(t)?ix(e,t,i):typeof t=="function"?t(e):i}var Tj=(e,t,i)=>{if(t&&i){var{width:a,height:d}=i,{align:g,verticalAlign:y,layout:c}=t;if((c==="vertical"||c==="horizontal"&&y==="middle")&&g!=="center"&&Jt(e[g]))return Gg(Gg({},e),{},{[g]:e[g]+(a||0)});if((c==="horizontal"||c==="vertical"&&g==="center")&&y!=="middle"&&Jt(e[y]))return Gg(Gg({},e),{},{[y]:e[y]+(d||0)})}return e},Yu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",SO=(e,t,i,a)=>{if(a)return e.map(c=>c.coordinate);var d,g,y=e.map(c=>(c.coordinate===t&&(d=!0),c.coordinate===i&&(g=!0),c.coordinate));return d||y.push(t),g||y.push(i),y},TO=(e,t,i)=>{if(!e)return null;var{duplicateDomain:a,type:d,range:g,scale:y,realScaleType:c,isCategorical:A,categoricalDomain:P,tickCount:C,ticks:I,niceTicks:B,axisType:G}=e;if(!y)return null;var Z=c==="scaleBand"&&y.bandwidth?y.bandwidth()/2:2,H=d==="category"&&y.bandwidth?y.bandwidth()/Z:0;if(H=G==="angleAxis"&&g&&g.length>=2?Bl(g[0]-g[1])*2*H:H,I||B){var U=(I||B||[]).map((oe,ce)=>{var fe=a?a.indexOf(oe):oe,ve=y.map(fe);return Fr(ve)?{coordinate:ve+H,value:oe,offset:H,index:ce}:null}).filter(ms);return U}return A&&P?P.map((oe,ce)=>{var fe=y.map(oe);return Fr(fe)?{coordinate:fe+H,value:oe,index:ce,offset:H}:null}).filter(ms):y.ticks&&C!=null?y.ticks(C).map((oe,ce)=>{var fe=y.map(oe);return Fr(fe)?{coordinate:fe+H,value:oe,index:ce,offset:H}:null}).filter(ms):y.domain().map((oe,ce)=>{var fe=y.map(oe);return Fr(fe)?{coordinate:fe+H,value:a?a[oe]:oe,index:ce,offset:H}:null}).filter(ms)},Ej=e=>{var t,i=e.length;if(!(i<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var d=0;d<a;++d)for(var g=0,y=0,c=0;c<i;++c){var A=e[c],P=A?.[d];if(P!=null){var C=P[1],I=P[0],B=qu(C)?I:C;B>=0?(P[0]=g,g+=B,P[1]=g):(P[0]=y,y+=B,P[1]=y)}}}},Aj=e=>{var t,i=e.length;if(!(i<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var d=0;d<a;++d)for(var g=0,y=0;y<i;++y){var c=e[y],A=c?.[d];if(A!=null){var P=qu(A[1])?A[0]:A[1];P>=0?(A[0]=g,g+=P,A[1]=g):(A[0]=0,A[1]=0)}}}},Mj={sign:Ej,expand:hL,none:Jp,silhouette:fL,wiggle:dL,positive:Aj},Pj=(e,t,i)=>{var a,d=(a=Mj[i])!==null&&a!==void 0?a:Jp,g=uL().keys(t).value((c,A)=>Number($a(c,A,0))).order(c2).offset(d),y=g(e);return y.forEach((c,A)=>{c.forEach((P,C)=>{var I=$a(e[C],t[A],0);Array.isArray(I)&&I.length===2&&Jt(I[0])&&Jt(I[1])&&(P[0]=I[0],P[1]=I[1])})}),y};function Cj(e){return e==null?void 0:String(e)}function tM(e){var{axis:t,ticks:i,bandSize:a,entry:d,index:g,dataKey:y}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!yo(d[t.dataKey])){var c=zI(i,"value",d[t.dataKey]);if(c)return c.coordinate+a/2}return i!=null&&i[g]?i[g].coordinate+a/2:null}var A=$a(d,yo(y)?t.dataKey:y),P=t.scale.map(A);return Jt(P)?P:null}var Dj=e=>{var t=e.flat(2).filter(Jt);return[Math.min(...t),Math.max(...t)]},Ij=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Oj=(e,t,i)=>{if(e!=null)return Ij(Object.keys(e).reduce((a,d)=>{var g=e[d];if(!g)return a;var{stackedData:y}=g,c=y.reduce((A,P)=>{var C=wO(P,t,i),I=Dj(C);return!Fr(I[0])||!Fr(I[1])?A:[Math.min(A[0],I[0]),Math.max(A[1],I[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]))},rM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xb=(e,t,i)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!i||a>0)return a}if(e&&t&&t.length>=2){for(var d=ax(t,C=>C.coordinate),g=1/0,y=1,c=d.length;y<c;y++){var A=d[y],P=d[y-1];g=Math.min((A?.coordinate||0)-(P?.coordinate||0),g)}return g===1/0?0:g}return i?void 0:0};function iM(e){var{tooltipEntrySettings:t,dataKey:i,payload:a,value:d,name:g}=e;return Gg(Gg({},t),{},{dataKey:i,payload:a,value:d,name:g})}function EO(e,t){if(e)return String(e);if(typeof t=="string")return t}var zj=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},kj=(e,t)=>t==="centric"?e.angle:e.radius,df=e=>e.layout.width,pf=e=>e.layout.height,Rj=e=>e.layout.scale,AO=e=>e.layout.margin,mx=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),gx=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Lj="data-recharts-item-index",Bj="data-recharts-item-id",lv=60;function aM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function z_(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aM(Object(i),!0).forEach(function(a){jj(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function jj(e,t,i){return(t=Nj(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Nj(e){var t=Fj(e,"string");return typeof t=="symbol"?t:t+""}function Fj(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uj=e=>e.brush.height;function Vj(e){var t=gx(e);return t.reduce((i,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var d=typeof a.width=="number"?a.width:lv;return i+d}return i},0)}function Gj(e){var t=gx(e);return t.reduce((i,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var d=typeof a.width=="number"?a.width:lv;return i+d}return i},0)}function qj(e){var t=mx(e);return t.reduce((i,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?i+a.height:i,0)}function $j(e){var t=mx(e);return t.reduce((i,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?i+a.height:i,0)}var Za=ut([df,pf,AO,Uj,Vj,Gj,qj,$j,ZI,vB],(e,t,i,a,d,g,y,c,A,P)=>{var C={left:(i.left||0)+d,right:(i.right||0)+g},I={top:(i.top||0)+y,bottom:(i.bottom||0)+c},B=z_(z_({},I),C),G=B.bottom;B.bottom+=a,B=Tj(B,A,P);var Z=e-B.left-B.right,H=t-B.top-B.bottom;return z_(z_({brushBottom:G},B),{},{width:Math.max(Z,0),height:Math.max(H,0)})}),Zj=ut(Za,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),MO=ut(df,pf,(e,t)=>({x:0,y:0,width:e,height:t})),Hj=X.createContext(null),_s=()=>X.useContext(Hj)!=null,yx=e=>e.brush,vx=ut([yx,Za,AO],(e,t,i)=>({height:e.height,x:Jt(e.x)?e.x:t.left,y:Jt(e.y)?e.y:t.top+t.height+t.brushBottom-(i?.bottom||0),width:Jt(e.width)?e.width:t.width})),mw={},gw={},yw={},oM;function Yj(){return oM||(oM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a,{signal:d,edges:g}={}){let y,c=null;const A=g!=null&&g.includes("leading"),P=g==null||g.includes("trailing"),C=()=>{c!==null&&(i.apply(y,c),y=void 0,c=null)},I=()=>{P&&C(),H()};let B=null;const G=()=>{B!=null&&clearTimeout(B),B=setTimeout(()=>{B=null,I()},a)},Z=()=>{B!==null&&(clearTimeout(B),B=null)},H=()=>{Z(),y=void 0,c=null},U=()=>{C()},oe=function(...ce){if(d?.aborted)return;y=this,c=ce;const fe=B==null;G(),A&&fe&&C()};return oe.schedule=G,oe.cancel=H,oe.flush=U,d?.addEventListener("abort",H,{once:!0}),oe}e.debounce=t})(yw)),yw}var sM;function Xj(){return sM||(sM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yj();function i(a,d=0,g={}){typeof g!="object"&&(g={});const{leading:y=!1,trailing:c=!0,maxWait:A}=g,P=Array(2);y&&(P[0]="leading"),c&&(P[1]="trailing");let C,I=null;const B=t.debounce(function(...H){C=a.apply(this,H),I=null},d,{edges:P}),G=function(...H){return A!=null&&(I===null&&(I=Date.now()),Date.now()-I>=A)?(C=a.apply(this,H),I=Date.now(),B.cancel(),B.schedule(),C):(B.apply(this,H),C)},Z=()=>(B.flush(),C);return G.cancel=B.cancel,G.flush=Z,G}e.debounce=i})(gw)),gw}var lM;function Wj(){return lM||(lM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xj();function i(a,d=0,g={}){const{leading:y=!0,trailing:c=!0}=g;return t.debounce(a,d,{leading:y,maxWait:d,trailing:c})}e.throttle=i})(mw)),mw}var vw,cM;function Kj(){return cM||(cM=1,vw=Wj().throttle),vw}var Qj=Kj();const Jj=Vl(Qj);var wb=function(t,i){for(var a=arguments.length,d=new Array(a>2?a-2:0),g=2;g<a;g++)d[g-2]=arguments[g];if(typeof console<"u"&&console.warn&&(i===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(i===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=0;console.warn(i.replace(/%s/g,()=>d[y++]))}},Nu={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},PO=(e,t,i)=>{var{width:a=Nu.width,height:d=Nu.height,aspect:g,maxHeight:y}=i,c=em(a)?e:Number(a),A=em(d)?t:Number(d);return g&&g>0&&(c?A=c/g:A&&(c=A*g),y&&A!=null&&A>y&&(A=y)),{calculatedWidth:c,calculatedHeight:A}},e8={width:0,height:0,overflow:"visible"},t8={width:0,overflowX:"visible"},r8={height:0,overflowY:"visible"},n8={},i8=e=>{var{width:t,height:i}=e,a=em(t),d=em(i);return a&&d?e8:a?t8:d?r8:n8};function a8(e){var{width:t,height:i,aspect:a}=e,d=t,g=i;return d===void 0&&g===void 0?(d=Nu.width,g=Nu.height):d===void 0?d=a&&a>0?void 0:Nu.width:g===void 0&&(g=a&&a>0?void 0:Nu.height),{width:d,height:g}}function b2(){return b2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},b2.apply(null,arguments)}function uM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function hM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?uM(Object(i),!0).forEach(function(a){o8(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function o8(e,t,i){return(t=s8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s8(e){var t=l8(e,"string");return typeof t=="symbol"?t:t+""}function l8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CO=X.createContext(Nu.initialDimension);function c8(e){return Zu(e.width)&&Zu(e.height)}function DO(e){var{children:t,width:i,height:a}=e,d=X.useMemo(()=>({width:i,height:a}),[i,a]);return c8(d)?X.createElement(CO.Provider,{value:d},t):null}var IS=()=>X.useContext(CO),u8=X.forwardRef((e,t)=>{var{aspect:i,initialDimension:a=Nu.initialDimension,width:d,height:g,minWidth:y=Nu.minWidth,minHeight:c,maxHeight:A,children:P,debounce:C=Nu.debounce,id:I,className:B,onResize:G,style:Z={}}=e,H=X.useRef(null),U=X.useRef();U.current=G,X.useImperativeHandle(t,()=>H.current);var[oe,ce]=X.useState({containerWidth:a.width,containerHeight:a.height}),fe=X.useCallback((Ke,mt)=>{ce(zt=>{var Ge=Math.round(Ke),Te=Math.round(mt);return zt.containerWidth===Ge&&zt.containerHeight===Te?zt:{containerWidth:Ge,containerHeight:Te}})},[]);X.useEffect(()=>{if(H.current==null||typeof ResizeObserver>"u")return oy;var Ke=Te=>{var dt,It=Te[0];if(It!=null){var{width:Rt,height:Ve}=It.contentRect;fe(Rt,Ve),(dt=U.current)===null||dt===void 0||dt.call(U,Rt,Ve)}};C>0&&(Ke=Jj(Ke,C,{trailing:!0,leading:!1}));var mt=new ResizeObserver(Ke),{width:zt,height:Ge}=H.current.getBoundingClientRect();return fe(zt,Ge),mt.observe(H.current),()=>{mt.disconnect()}},[fe,C]);var{containerWidth:ve,containerHeight:Ee}=oe;wb(!i||i>0,"The aspect(%s) must be greater than zero.",i);var{calculatedWidth:Me,calculatedHeight:ze}=PO(ve,Ee,{width:d,height:g,aspect:i,maxHeight:A});return wb(Me!=null&&Me>0||ze!=null&&ze>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Me,ze,d,g,y,c,i),X.createElement("div",{id:I?"".concat(I):void 0,className:Wn("recharts-responsive-container",B),style:hM(hM({},Z),{},{width:d,height:g,minWidth:y,minHeight:c,maxHeight:A}),ref:H},X.createElement("div",{style:i8({width:d,height:g})},X.createElement(DO,{width:Me,height:ze},P)))}),_w=X.forwardRef((e,t)=>{var i=IS();if(Zu(i.width)&&Zu(i.height))return e.children;var{width:a,height:d}=a8({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:g,calculatedHeight:y}=PO(void 0,void 0,{width:a,height:d,aspect:e.aspect,maxHeight:e.maxHeight});return Jt(g)&&Jt(y)?X.createElement(DO,{width:g,height:y},e.children):X.createElement(u8,b2({},e,{width:a,height:d,ref:t}))});function OS(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var _x=()=>{var e,t=_s(),i=dr(Zj),a=dr(vx),d=(e=dr(yx))===null||e===void 0?void 0:e.padding;return!t||!a||!d?i:{width:a.width-d.left-d.right,height:a.height-d.top-d.bottom,x:d.left,y:d.top}},h8={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},IO=()=>{var e;return(e=dr(Za))!==null&&e!==void 0?e:h8},OO=()=>dr(df),zO=()=>dr(pf),ri=e=>e.layout.layoutType,sy=()=>dr(ri),zS=()=>{var e=sy();if(e==="horizontal"||e==="vertical")return e},kO=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},f8=()=>{var e=sy();return e!==void 0},cv=e=>{var t=pa(),i=_s(),{width:a,height:d}=e,g=IS(),y=a,c=d;return g&&(y=g.width>0?g.width:a,c=g.height>0?g.height:d),X.useEffect(()=>{!i&&Zu(y)&&Zu(c)&&t(vj({width:y,height:c}))},[t,i,y,c]),null},RO=Symbol.for("immer-nothing"),fM=Symbol.for("immer-draftable"),Qs=Symbol.for("immer-state");function Nc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var G0=Object.getPrototypeOf;function Qg(e){return!!e&&!!e[Qs]}function rm(e){return e?LO(e)||Array.isArray(e)||!!e[fM]||!!e.constructor?.[fM]||uv(e)||xx(e):!1}var d8=Object.prototype.constructor.toString(),dM=new WeakMap;function LO(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(i===Object)return!0;if(typeof i!="function")return!1;let a=dM.get(i);return a===void 0&&(a=Function.toString.call(i),dM.set(i,a)),a===d8}function Sb(e,t,i=!0){bx(e)===0?(i?Reflect.ownKeys(e):Object.keys(e)).forEach(d=>{t(d,e[d],e)}):e.forEach((a,d)=>t(d,a,e))}function bx(e){const t=e[Qs];return t?t.type_:Array.isArray(e)?1:uv(e)?2:xx(e)?3:0}function x2(e,t){return bx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function BO(e,t,i){const a=bx(e);a===2?e.set(t,i):a===3?e.add(i):e[t]=i}function p8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function uv(e){return e instanceof Map}function xx(e){return e instanceof Set}function Gp(e){return e.copy_||e.base_}function w2(e,t){if(uv(e))return new Map(e);if(xx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=LO(e);if(t===!0||t==="class_only"&&!i){const a=Object.getOwnPropertyDescriptors(e);delete a[Qs];let d=Reflect.ownKeys(a);for(let g=0;g<d.length;g++){const y=d[g],c=a[y];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(a[y]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[y]})}return Object.create(G0(e),a)}else{const a=G0(e);if(a!==null&&i)return{...e};const d=Object.create(a);return Object.assign(d,e)}}function kS(e,t=!1){return wx(e)||Qg(e)||!rm(e)||(bx(e)>1&&Object.defineProperties(e,{set:k_,add:k_,clear:k_,delete:k_}),Object.freeze(e),t&&Object.values(e).forEach(i=>kS(i,!0))),e}function m8(){Nc(2)}var k_={value:m8};function wx(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var g8={};function nm(e){const t=g8[e];return t||Nc(0,e),t}var q0;function jO(){return q0}function y8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pM(e,t){t&&(nm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function S2(e){T2(e),e.drafts_.forEach(v8),e.drafts_=null}function T2(e){e===q0&&(q0=e.parent_)}function mM(e){return q0=y8(q0,e)}function v8(e){const t=e[Qs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gM(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[Qs].modified_&&(S2(t),Nc(4)),rm(e)&&(e=Tb(t,e),t.parent_||Eb(t,e)),t.patches_&&nm("Patches").generateReplacementPatches_(i[Qs].base_,e,t.patches_,t.inversePatches_)):e=Tb(t,i,[]),S2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==RO?e:void 0}function Tb(e,t,i){if(wx(t))return t;const a=e.immer_.shouldUseStrictIteration(),d=t[Qs];if(!d)return Sb(t,(g,y)=>yM(e,d,t,g,y,i),a),t;if(d.scope_!==e)return t;if(!d.modified_)return Eb(e,d.base_,!0),d.base_;if(!d.finalized_){d.finalized_=!0,d.scope_.unfinalizedDrafts_--;const g=d.copy_;let y=g,c=!1;d.type_===3&&(y=new Set(g),g.clear(),c=!0),Sb(y,(A,P)=>yM(e,d,g,A,P,i,c),a),Eb(e,g,!1),i&&e.patches_&&nm("Patches").generatePatches_(d,i,e.patches_,e.inversePatches_)}return d.copy_}function yM(e,t,i,a,d,g,y){if(d==null||typeof d!="object"&&!y)return;const c=wx(d);if(!(c&&!y)){if(Qg(d)){const A=g&&t&&t.type_!==3&&!x2(t.assigned_,a)?g.concat(a):void 0,P=Tb(e,d,A);if(BO(i,a,P),Qg(P))e.canAutoFreeze_=!1;else return}else y&&i.add(d);if(rm(d)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===d&&c)return;Tb(e,d),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(uv(i)?i.has(a):Object.prototype.propertyIsEnumerable.call(i,a))&&Eb(e,d)}}}function Eb(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&kS(t,i)}function _8(e,t){const i=Array.isArray(e),a={type_:i?1:0,scope_:t?t.scope_:jO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let d=a,g=RS;i&&(d=[a],g=$0);const{revoke:y,proxy:c}=Proxy.revocable(d,g);return a.draft_=c,a.revoke_=y,c}var RS={get(e,t){if(t===Qs)return e;const i=Gp(e);if(!x2(i,t))return b8(e,i,t);const a=i[t];return e.finalized_||!rm(a)?a:a===bw(e.base_,t)?(xw(e),e.copy_[t]=A2(a,e)):a},has(e,t){return t in Gp(e)},ownKeys(e){return Reflect.ownKeys(Gp(e))},set(e,t,i){const a=NO(Gp(e),t);if(a?.set)return a.set.call(e.draft_,i),!0;if(!e.modified_){const d=bw(Gp(e),t),g=d?.[Qs];if(g&&g.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(p8(i,d)&&(i!==void 0||x2(e.base_,t)))return!0;xw(e),E2(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return bw(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,xw(e),E2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=Gp(e),a=Reflect.getOwnPropertyDescriptor(i,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:i[t]}},defineProperty(){Nc(11)},getPrototypeOf(e){return G0(e.base_)},setPrototypeOf(){Nc(12)}},$0={};Sb(RS,(e,t)=>{$0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$0.deleteProperty=function(e,t){return $0.set.call(this,e,t,void 0)};$0.set=function(e,t,i){return RS.set.call(this,e[0],t,i,e[0])};function bw(e,t){const i=e[Qs];return(i?Gp(i):e)[t]}function b8(e,t,i){const a=NO(t,i);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function NO(e,t){if(!(t in e))return;let i=G0(e);for(;i;){const a=Object.getOwnPropertyDescriptor(i,t);if(a)return a;i=G0(i)}}function E2(e){e.modified_||(e.modified_=!0,e.parent_&&E2(e.parent_))}function xw(e){e.copy_||(e.copy_=w2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var x8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,i,a)=>{if(typeof t=="function"&&typeof i!="function"){const g=i;i=t;const y=this;return function(A=g,...P){return y.produce(A,C=>i.call(this,C,...P))}}typeof i!="function"&&Nc(6),a!==void 0&&typeof a!="function"&&Nc(7);let d;if(rm(t)){const g=mM(this),y=A2(t,void 0);let c=!0;try{d=i(y),c=!1}finally{c?S2(g):T2(g)}return pM(g,a),gM(d,g)}else if(!t||typeof t!="object"){if(d=i(t),d===void 0&&(d=t),d===RO&&(d=void 0),this.autoFreeze_&&kS(d,!0),a){const g=[],y=[];nm("Patches").generateReplacementPatches_(t,d,g,y),a(g,y)}return d}else Nc(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(y,...c)=>this.produceWithPatches(y,A=>t(A,...c));let a,d;return[this.produce(t,i,(y,c)=>{a=y,d=c}),a,d]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){rm(e)||Nc(8),Qg(e)&&(e=w8(e));const t=mM(this),i=A2(e,void 0);return i[Qs].isManual_=!0,T2(t),i}finishDraft(e,t){const i=e&&e[Qs];(!i||!i.isManual_)&&Nc(9);const{scope_:a}=i;return pM(a,t),gM(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const d=t[i];if(d.path.length===0&&d.op==="replace"){e=d.value;break}}i>-1&&(t=t.slice(i+1));const a=nm("Patches").applyPatches_;return Qg(e)?a(e,t):this.produce(e,d=>a(d,t))}};function A2(e,t){const i=uv(e)?nm("MapSet").proxyMap_(e,t):xx(e)?nm("MapSet").proxySet_(e,t):_8(e,t);return(t?t.scope_:jO()).drafts_.push(i),i}function w8(e){return Qg(e)||Nc(10,e),FO(e)}function FO(e){if(!rm(e)||wx(e))return e;const t=e[Qs];let i,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=w2(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else i=w2(e,!0);return Sb(i,(d,g)=>{BO(i,d,FO(g))},a),t&&(t.finalized_=!1),i}var S8=new x8;S8.produce;var T8={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},UO=vs({name:"legend",initialState:T8,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:ei()},replaceLegendPayload:{reducer(e,t){var{prev:i,next:a}=t.payload,d=Uc(e).payload.indexOf(i);d>-1&&(e.payload[d]=a)},prepare:ei()},removeLegendPayload:{reducer(e,t){var i=Uc(e).payload.indexOf(t.payload);i>-1&&e.payload.splice(i,1)},prepare:ei()}}}),{setLegendSize:kK,setLegendSettings:RK,addLegendPayload:E8,replaceLegendPayload:A8,removeLegendPayload:M8}=UO.actions,P8=UO.reducer;function M2(){return M2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},M2.apply(null,arguments)}function vM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function w0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(i),!0).forEach(function(a){C8(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function C8(e,t,i){return(t=D8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function D8(e){var t=I8(e,"string");return typeof t=="symbol"?t:t+""}function I8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O8(e){return Array.isArray(e)&&$u(e[0])&&$u(e[1])?e.join(" ~ "):e}var zg={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},z8=e=>{var{separator:t=zg.separator,contentStyle:i,itemStyle:a,labelStyle:d=zg.labelStyle,payload:g,formatter:y,itemSorter:c,wrapperClassName:A,labelClassName:P,label:C,labelFormatter:I,accessibilityLayer:B=zg.accessibilityLayer}=e,G=()=>{if(g&&g.length){var Ee={padding:0,margin:0},Me=(c?ax(g,c):g).map((ze,Ke)=>{if(ze.type==="none")return null;var mt=ze.formatter||y||O8,{value:zt,name:Ge}=ze,Te=zt,dt=Ge;if(mt){var It=mt(zt,Ge,ze,Ke,g);if(Array.isArray(It))[Te,dt]=It;else if(It!=null)Te=It;else return null}var Rt=w0(w0({},zg.itemStyle),{},{color:ze.color||zg.itemStyle.color},a);return X.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Ke),style:Rt},$u(dt)?X.createElement("span",{className:"recharts-tooltip-item-name"},dt):null,$u(dt)?X.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,X.createElement("span",{className:"recharts-tooltip-item-value"},Te),X.createElement("span",{className:"recharts-tooltip-item-unit"},ze.unit||""))});return X.createElement("ul",{className:"recharts-tooltip-item-list",style:Ee},Me)}return null},Z=w0(w0({},zg.contentStyle),i),H=w0({margin:0},d),U=!yo(C),oe=U?C:"",ce=Wn("recharts-default-tooltip",A),fe=Wn("recharts-tooltip-label",P);U&&I&&g!==void 0&&g!==null&&(oe=I(C,g));var ve=B?{role:"status","aria-live":"assertive"}:{};return X.createElement("div",M2({className:ce,style:Z},ve),X.createElement("p",{className:fe,style:H},X.isValidElement(oe)?oe:"".concat(oe)),G())},S0="recharts-tooltip-wrapper",k8={visibility:"hidden"};function R8(e){var{coordinate:t,translateX:i,translateY:a}=e;return Wn(S0,{["".concat(S0,"-right")]:Jt(i)&&t&&Jt(t.x)&&i>=t.x,["".concat(S0,"-left")]:Jt(i)&&t&&Jt(t.x)&&i<t.x,["".concat(S0,"-bottom")]:Jt(a)&&t&&Jt(t.y)&&a>=t.y,["".concat(S0,"-top")]:Jt(a)&&t&&Jt(t.y)&&a<t.y})}function _M(e){var{allowEscapeViewBox:t,coordinate:i,key:a,offset:d,position:g,reverseDirection:y,tooltipDimension:c,viewBox:A,viewBoxDimension:P}=e;if(g&&Jt(g[a]))return g[a];var C=i[a]-c-(d>0?d:0),I=i[a]+d;if(t[a])return y[a]?C:I;var B=A[a];if(B==null)return 0;if(y[a]){var G=C,Z=B;return G<Z?Math.max(I,B):Math.max(C,B)}if(P==null)return 0;var H=I+c,U=B+P;return H>U?Math.max(C,B):Math.max(I,B)}function L8(e){var{translateX:t,translateY:i,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function B8(e){var{allowEscapeViewBox:t,coordinate:i,offsetTop:a,offsetLeft:d,position:g,reverseDirection:y,tooltipBox:c,useTranslate3d:A,viewBox:P}=e,C,I,B;return c.height>0&&c.width>0&&i?(I=_M({allowEscapeViewBox:t,coordinate:i,key:"x",offset:d,position:g,reverseDirection:y,tooltipDimension:c.width,viewBox:P,viewBoxDimension:P.width}),B=_M({allowEscapeViewBox:t,coordinate:i,key:"y",offset:a,position:g,reverseDirection:y,tooltipDimension:c.height,viewBox:P,viewBoxDimension:P.height}),C=L8({translateX:I,translateY:B,useTranslate3d:A})):C=k8,{cssProperties:C,cssClasses:R8({translateX:I,translateY:B,coordinate:i})}}function bM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function R_(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?bM(Object(i),!0).forEach(function(a){P2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function P2(e,t,i){return(t=j8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function j8(e){var t=N8(e,"string");return typeof t=="symbol"?t:t+""}function N8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class F8 extends X.PureComponent{constructor(){super(...arguments),P2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),P2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var i,a,d,g;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&i!==void 0?i:0,y:(d=(g=this.props.coordinate)===null||g===void 0?void 0:g.y)!==null&&d!==void 0?d:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,i;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:i,animationDuration:a,animationEasing:d,children:g,coordinate:y,hasPayload:c,isAnimationActive:A,offset:P,position:C,reverseDirection:I,useTranslate3d:B,viewBox:G,wrapperStyle:Z,lastBoundingBox:H,innerRef:U,hasPortalFromProps:oe}=this.props,ce=typeof P=="number"?P:P.x,fe=typeof P=="number"?P:P.y,{cssClasses:ve,cssProperties:Ee}=B8({allowEscapeViewBox:i,coordinate:y,offsetLeft:ce,offsetTop:fe,position:C,reverseDirection:I,tooltipBox:{height:H.height,width:H.width},useTranslate3d:B,viewBox:G}),Me=oe?{}:R_(R_({transition:A&&t?"transform ".concat(a,"ms ").concat(d):void 0},Ee),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),ze=R_(R_({},Me),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},Z);return X.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:ve,style:ze,ref:U},g)}}var VO=()=>{var e;return(e=dr(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function C2(){return C2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},C2.apply(null,arguments)}function xM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function wM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(i),!0).forEach(function(a){U8(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function U8(e,t,i){return(t=V8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function V8(e){var t=G8(e,"string");return typeof t=="symbol"?t:t+""}function G8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SM={curveBasisClosed:J6,curveBasisOpen:eL,curveBasis:Q6,curveBumpX:W6,curveBumpY:K6,curveLinearClosed:tL,curveLinear:rx,curveMonotoneX:rL,curveMonotoneY:nL,curveNatural:iL,curveStep:aL,curveStepAfter:sL,curveStepBefore:oL},Ab=e=>Fr(e.x)&&Fr(e.y),TM=e=>e.base!=null&&Ab(e.base)&&Ab(e),T0=e=>e.x,E0=e=>e.y,q8=(e,t)=>{if(typeof e=="function")return e;var i="curve".concat(bS(e));if((i==="curveMonotone"||i==="curveBump")&&t){var a=SM["".concat(i).concat(t==="vertical"?"Y":"X")];if(a)return a}return SM[i]||rx},EM={connectNulls:!1,type:"linear"},$8=e=>{var{type:t=EM.type,points:i=[],baseLine:a,layout:d,connectNulls:g=EM.connectNulls}=e,y=q8(t,d),c=g?i.filter(Ab):i;if(Array.isArray(a)){var A,P=i.map((Z,H)=>wM(wM({},Z),{},{base:a[H]}));d==="vertical"?A=M_().y(E0).x1(T0).x0(Z=>Z.base.x):A=M_().x(T0).y1(E0).y0(Z=>Z.base.y);var C=A.defined(TM).curve(y),I=g?P.filter(TM):P;return C(I)}var B;d==="vertical"&&Jt(a)?B=M_().y(E0).x1(T0).x0(a):Jt(a)?B=M_().x(T0).y1(E0).y0(a):B=wI().x(T0).y(E0);var G=B.defined(Ab).curve(y);return G(c)},rb=e=>{var{className:t,points:i,path:a,pathRef:d}=e,g=sy();if((!i||!i.length)&&!a)return null;var y={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||g,connectNulls:e.connectNulls},c=i&&i.length?$8(y):a;return X.createElement("path",C2({},Vc(e),xS(e),{className:Wn("recharts-curve",t),d:c===null?void 0:c,ref:d}))},Z8=["x","y","top","left","width","height","className"];function D2(){return D2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},D2.apply(null,arguments)}function AM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function H8(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(i),!0).forEach(function(a){Y8(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Y8(e,t,i){return(t=X8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function X8(e){var t=W8(e,"string");return typeof t=="symbol"?t:t+""}function W8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K8(e,t){if(e==null)return{};var i,a,d=Q8(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function Q8(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var J8=(e,t,i,a,d,g)=>"M".concat(e,",").concat(d,"v").concat(a,"M").concat(g,",").concat(t,"h").concat(i),eN=e=>{var{x:t=0,y:i=0,top:a=0,left:d=0,width:g=0,height:y=0,className:c}=e,A=K8(e,Z8),P=H8({x:t,y:i,top:a,left:d,width:g,height:y},A);return!Jt(t)||!Jt(i)||!Jt(g)||!Jt(y)||!Jt(a)||!Jt(d)?null:X.createElement("path",D2({},Nl(P),{className:Wn("recharts-cross",c),d:J8(t,i,g,y,a,d)}))};function tN(e,t,i,a){var d=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-d:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-d,width:e==="horizontal"?a:i.width-1,height:e==="horizontal"?i.height-1:a}}function MM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function PM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?MM(Object(i),!0).forEach(function(a){rN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):MM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function rN(e,t,i){return(t=nN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function nN(e){var t=iN(e,"string");return typeof t=="symbol"?t:t+""}function iN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aN=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),oN=(e,t,i)=>e.map(a=>"".concat(aN(a)," ").concat(t,"ms ").concat(i)).join(","),sN=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((i,a)=>i.filter(d=>a.includes(d))),Z0=(e,t)=>Object.keys(t).reduce((i,a)=>PM(PM({},i),{},{[a]:e(a,t[a])}),{});function CM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Zi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?CM(Object(i),!0).forEach(function(a){lN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function lN(e,t,i){return(t=cN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function cN(e){var t=uN(e,"string");return typeof t=="symbol"?t:t+""}function uN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mb=(e,t,i)=>e+(t-e)*i,I2=e=>{var{from:t,to:i}=e;return t!==i},GO=(e,t,i)=>{var a=Z0((d,g)=>{if(I2(g)){var[y,c]=e(g.from,g.to,g.velocity);return Zi(Zi({},g),{},{from:y,velocity:c})}return g},t);return i<1?Z0((d,g)=>I2(g)&&a[d]!=null?Zi(Zi({},g),{},{velocity:Mb(g.velocity,a[d].velocity,i),from:Mb(g.from,a[d].from,i)}):g,t):GO(e,a,i-1)};function hN(e,t,i,a,d,g){var y,c=a.reduce((B,G)=>Zi(Zi({},B),{},{[G]:{from:e[G],velocity:0,to:t[G]}}),{}),A=()=>Z0((B,G)=>G.from,c),P=()=>!Object.values(c).filter(I2).length,C=null,I=B=>{y||(y=B);var G=B-y,Z=G/i.dt;c=GO(i,c,Z),d(Zi(Zi(Zi({},e),t),A())),y=B,P()||(C=g.setTimeout(I))};return()=>(C=g.setTimeout(I),()=>{var B;(B=C)===null||B===void 0||B()})}function fN(e,t,i,a,d,g,y){var c=null,A=d.reduce((I,B)=>{var G=e[B],Z=t[B];return G==null||Z==null?I:Zi(Zi({},I),{},{[B]:[G,Z]})},{}),P,C=I=>{P||(P=I);var B=(I-P)/a,G=Z0((H,U)=>Mb(...U,i(B)),A);if(g(Zi(Zi(Zi({},e),t),G)),B<1)c=y.setTimeout(C);else{var Z=Z0((H,U)=>Mb(...U,i(1)),A);g(Zi(Zi(Zi({},e),t),Z))}};return()=>(c=y.setTimeout(C),()=>{var I;(I=c)===null||I===void 0||I()})}const dN=(e,t,i,a,d,g)=>{var y=sN(e,t);return i==null?()=>(d(Zi(Zi({},e),t)),()=>{}):i.isStepper===!0?hN(e,t,i,y,d,g):fN(e,t,i,a,y,d,g)};var Pb=1e-4,qO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],$O=(e,t)=>e.map((i,a)=>i*t**a).reduce((i,a)=>i+a),DM=(e,t)=>i=>{var a=qO(e,t);return $O(a,i)},pN=(e,t)=>i=>{var a=qO(e,t),d=[...a.map((g,y)=>g*y).slice(1),0];return $O(d,i)},mN=e=>{var t,i=e.split("(");if(i.length!==2||i[0]!=="cubic-bezier")return null;var a=(t=i[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var d=a.map(g=>parseFloat(g));return[d[0],d[1],d[2],d[3]]},gN=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(i.length===1)switch(i[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var d=mN(i[0]);if(d)return d}}return i.length===4?i:[0,0,1,1]},yN=(e,t,i,a)=>{var d=DM(e,i),g=DM(t,a),y=pN(e,i),c=P=>P>1?1:P<0?0:P,A=P=>{for(var C=P>1?1:P,I=C,B=0;B<8;++B){var G=d(I)-C,Z=y(I);if(Math.abs(G-C)<Pb||Z<Pb)return g(I);I=c(I-G/Z)}return g(I)};return A.isStepper=!1,A},IM=function(){return yN(...gN(...arguments))},vN=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:i=100,damping:a=8,dt:d=17}=t,g=(y,c,A)=>{var P=-(y-c)*i,C=A*a,I=A+(P-C)*d/1e3,B=A*d/1e3+y;return Math.abs(B-c)<Pb&&Math.abs(I)<Pb?[c,0]:[B,I]};return g.isStepper=!0,g.dt=d,g},_N=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return IM(e);case"spring":return vN();default:if(e.split("(")[0]==="cubic-bezier")return IM(e)}return typeof e=="function"?e:null};function bN(e){var t,i=()=>null,a=!1,d=null,g=y=>{if(!a){if(Array.isArray(y)){if(!y.length)return;var c=y,[A,...P]=c;if(typeof A=="number"){d=e.setTimeout(g.bind(null,P),A);return}g(A),d=e.setTimeout(g.bind(null,P));return}typeof y=="string"&&(t=y,i(t)),typeof y=="object"&&(t=y,i(t)),typeof y=="function"&&y()}};return{stop:()=>{a=!0},start:y=>{a=!1,d&&(d(),d=null),g(y)},subscribe:y=>(i=y,()=>{i=()=>null}),getTimeoutController:()=>e}}class xN{setTimeout(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),d=null,g=y=>{y-a>=i?t(y):typeof requestAnimationFrame=="function"&&(d=requestAnimationFrame(g))};return d=requestAnimationFrame(g),()=>{d!=null&&cancelAnimationFrame(d)}}}function wN(){return bN(new xN)}var SN=X.createContext(wN);function TN(e,t){var i=X.useContext(SN);return X.useMemo(()=>t??i(e),[e,t,i])}var EN=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),hv={isSsr:EN()},AN={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},OM={t:0},ww={t:1};function ZO(e){var t=el(e,AN),{isActive:i,canBegin:a,duration:d,easing:g,begin:y,onAnimationEnd:c,onAnimationStart:A,children:P}=t,C=i==="auto"?!hv.isSsr:i,I=TN(t.animationId,t.animationManager),[B,G]=X.useState(C?OM:ww),Z=X.useRef(null);return X.useEffect(()=>{C||G(ww)},[C]),X.useEffect(()=>{if(!C||!a)return oy;var H=dN(OM,ww,_N(g),d,G,I.getTimeoutController()),U=()=>{Z.current=H()};return I.start([A,y,U,d,c]),()=>{I.stop(),Z.current&&Z.current(),c()}},[C,a,d,g,y,A,c,I]),P(B.t)}function HO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",i=X.useRef(N0(t)),a=X.useRef(e);return a.current!==e&&(i.current=N0(t),a.current=e),i.current}var MN=["radius"],PN=["radius"],zM,kM,RM,LM,BM,jM,NM,FM,UM,VM;function GM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function qM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GM(Object(i),!0).forEach(function(a){CN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function CN(e,t,i){return(t=DN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function DN(e){var t=IN(e,"string");return typeof t=="symbol"?t:t+""}function IN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Cb.apply(null,arguments)}function $M(e,t){if(e==null)return{};var i,a,d=ON(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function ON(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function Ou(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ZM=(e,t,i,a,d)=>{var g=wd(i),y=wd(a),c=Math.min(Math.abs(g)/2,Math.abs(y)/2),A=y>=0?1:-1,P=g>=0?1:-1,C=y>=0&&g>=0||y<0&&g<0?1:0,I;if(c>0&&Array.isArray(d)){for(var B=[0,0,0,0],G=0,Z=4;G<Z;G++){var H,U=(H=d[G])!==null&&H!==void 0?H:0;B[G]=U>c?c:U}I=Va(zM||(zM=Ou(["M",",",""])),e,t+A*B[0]),B[0]>0&&(I+=Va(kM||(kM=Ou(["A ",",",",0,0,",",",",",""])),B[0],B[0],C,e+P*B[0],t)),I+=Va(RM||(RM=Ou(["L ",",",""])),e+i-P*B[1],t),B[1]>0&&(I+=Va(LM||(LM=Ou(["A ",",",",0,0,",`,
        `,",",""])),B[1],B[1],C,e+i,t+A*B[1])),I+=Va(BM||(BM=Ou(["L ",",",""])),e+i,t+a-A*B[2]),B[2]>0&&(I+=Va(jM||(jM=Ou(["A ",",",",0,0,",`,
        `,",",""])),B[2],B[2],C,e+i-P*B[2],t+a)),I+=Va(NM||(NM=Ou(["L ",",",""])),e+P*B[3],t+a),B[3]>0&&(I+=Va(FM||(FM=Ou(["A ",",",",0,0,",`,
        `,",",""])),B[3],B[3],C,e,t+a-A*B[3])),I+="Z"}else if(c>0&&d===+d&&d>0){var oe=Math.min(c,d);I=Va(UM||(UM=Ou(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+A*oe,oe,oe,C,e+P*oe,t,e+i-P*oe,t,oe,oe,C,e+i,t+A*oe,e+i,t+a-A*oe,oe,oe,C,e+i-P*oe,t+a,e+P*oe,t+a,oe,oe,C,e,t+a-A*oe)}else I=Va(VM||(VM=Ou(["M ",","," h "," v "," h "," Z"])),e,t,i,a,-i);return I},HM={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zN=e=>{var t=el(e,HM),i=X.useRef(null),[a,d]=X.useState(-1);X.useEffect(()=>{if(i.current&&i.current.getTotalLength)try{var it=i.current.getTotalLength();it&&d(it)}catch{}},[]);var{x:g,y,width:c,height:A,radius:P,className:C}=t,{animationEasing:I,animationDuration:B,animationBegin:G,isAnimationActive:Z,isUpdateAnimationActive:H}=t,U=X.useRef(c),oe=X.useRef(A),ce=X.useRef(g),fe=X.useRef(y),ve=X.useMemo(()=>({x:g,y,width:c,height:A,radius:P}),[g,y,c,A,P]),Ee=HO(ve,"rectangle-");if(g!==+g||y!==+y||c!==+c||A!==+A||c===0||A===0)return null;var Me=Wn("recharts-rectangle",C);if(!H){var ze=Nl(t),{radius:Ke}=ze,mt=$M(ze,MN);return X.createElement("path",Cb({},mt,{x:wd(g),y:wd(y),width:wd(c),height:wd(A),radius:typeof P=="number"?P:void 0,className:Me,d:ZM(g,y,c,A,P)}))}var zt=U.current,Ge=oe.current,Te=ce.current,dt=fe.current,It="0px ".concat(a===-1?1:a,"px"),Rt="".concat(a,"px 0px"),Ve=oN(["strokeDasharray"],B,typeof I=="string"?I:HM.animationEasing);return X.createElement(ZO,{animationId:Ee,key:Ee,canBegin:a>0,duration:B,easing:I,isActive:H,begin:G},it=>{var Mt=ju(zt,c,it),Be=ju(Ge,A,it),yt=ju(Te,g,it),Ae=ju(dt,y,it);i.current&&(U.current=Mt,oe.current=Be,ce.current=yt,fe.current=Ae);var qe;Z?it>0?qe={transition:Ve,strokeDasharray:Rt}:qe={strokeDasharray:It}:qe={strokeDasharray:Rt};var ct=Nl(t),{radius:wt}=ct,jt=$M(ct,PN);return X.createElement("path",Cb({},jt,{radius:typeof P=="number"?P:void 0,className:Me,d:ZM(yt,Ae,Mt,Be,P),ref:i,style:qM(qM({},qe),t.style)}))})};function YM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function XM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YM(Object(i),!0).forEach(function(a){kN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function kN(e,t,i){return(t=RN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function RN(e){var t=LN(e,"string");return typeof t=="symbol"?t:t+""}function LN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Db=Math.PI/180,BN=e=>e*180/Math.PI,qa=(e,t,i,a)=>({x:e+Math.cos(-Db*a)*i,y:t+Math.sin(-Db*a)*i}),jN=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(i-(a.top||0)-(a.bottom||0)))/2},NN=(e,t)=>{var{x:i,y:a}=e,{x:d,y:g}=t;return Math.sqrt((i-d)**2+(a-g)**2)},FN=(e,t)=>{var{x:i,y:a}=e,{cx:d,cy:g}=t,y=NN({x:i,y:a},{x:d,y:g});if(y<=0)return{radius:y,angle:0};var c=(i-d)/y,A=Math.acos(c);return a>g&&(A=2*Math.PI-A),{radius:y,angle:BN(A),angleInRadian:A}},UN=e=>{var{startAngle:t,endAngle:i}=e,a=Math.floor(t/360),d=Math.floor(i/360),g=Math.min(a,d);return{startAngle:t-g*360,endAngle:i-g*360}},VN=(e,t)=>{var{startAngle:i,endAngle:a}=t,d=Math.floor(i/360),g=Math.floor(a/360),y=Math.min(d,g);return e+y*360},GN=(e,t)=>{var{chartX:i,chartY:a}=e,{radius:d,angle:g}=FN({x:i,y:a},t),{innerRadius:y,outerRadius:c}=t;if(d<y||d>c||d===0)return null;var{startAngle:A,endAngle:P}=UN(t),C=g,I;if(A<=P){for(;C>P;)C-=360;for(;C<A;)C+=360;I=C>=A&&C<=P}else{for(;C>A;)C-=360;for(;C<P;)C+=360;I=C>=P&&C<=A}return I?XM(XM({},t),{},{radius:d,angle:VN(C,t)}):null};function YO(e){var{cx:t,cy:i,radius:a,startAngle:d,endAngle:g}=e,y=qa(t,i,a,d),c=qa(t,i,a,g);return{points:[y,c],cx:t,cy:i,radius:a,startAngle:d,endAngle:g}}var WM,KM,QM,JM,eP,tP,rP;function O2(){return O2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},O2.apply(null,arguments)}function $p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var qN=(e,t)=>{var i=Bl(t-e),a=Math.min(Math.abs(t-e),359.999);return i*a},L_=e=>{var{cx:t,cy:i,radius:a,angle:d,sign:g,isExternal:y,cornerRadius:c,cornerIsExternal:A}=e,P=c*(y?1:-1)+a,C=Math.asin(c/P)/Db,I=A?d:d+g*C,B=qa(t,i,P,I),G=qa(t,i,a,I),Z=A?d-g*C:d,H=qa(t,i,P*Math.cos(C*Db),Z);return{center:B,circleTangency:G,lineTangency:H,theta:C}},XO=e=>{var{cx:t,cy:i,innerRadius:a,outerRadius:d,startAngle:g,endAngle:y}=e,c=qN(g,y),A=g+c,P=qa(t,i,d,g),C=qa(t,i,d,A),I=Va(WM||(WM=$p(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),P.x,P.y,d,d,+(Math.abs(c)>180),+(g>A),C.x,C.y);if(a>0){var B=qa(t,i,a,g),G=qa(t,i,a,A);I+=Va(KM||(KM=$p(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),G.x,G.y,a,a,+(Math.abs(c)>180),+(g<=A),B.x,B.y)}else I+=Va(QM||(QM=$p(["L ",","," Z"])),t,i);return I},$N=e=>{var{cx:t,cy:i,innerRadius:a,outerRadius:d,cornerRadius:g,forceCornerRadius:y,cornerIsExternal:c,startAngle:A,endAngle:P}=e,C=Bl(P-A),{circleTangency:I,lineTangency:B,theta:G}=L_({cx:t,cy:i,radius:d,angle:A,sign:C,cornerRadius:g,cornerIsExternal:c}),{circleTangency:Z,lineTangency:H,theta:U}=L_({cx:t,cy:i,radius:d,angle:P,sign:-C,cornerRadius:g,cornerIsExternal:c}),oe=c?Math.abs(A-P):Math.abs(A-P)-G-U;if(oe<0)return y?Va(JM||(JM=$p(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),B.x,B.y,g,g,g*2,g,g,-g*2):XO({cx:t,cy:i,innerRadius:a,outerRadius:d,startAngle:A,endAngle:P});var ce=Va(eP||(eP=$p(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),B.x,B.y,g,g,+(C<0),I.x,I.y,d,d,+(oe>180),+(C<0),Z.x,Z.y,g,g,+(C<0),H.x,H.y);if(a>0){var{circleTangency:fe,lineTangency:ve,theta:Ee}=L_({cx:t,cy:i,radius:a,angle:A,sign:C,isExternal:!0,cornerRadius:g,cornerIsExternal:c}),{circleTangency:Me,lineTangency:ze,theta:Ke}=L_({cx:t,cy:i,radius:a,angle:P,sign:-C,isExternal:!0,cornerRadius:g,cornerIsExternal:c}),mt=c?Math.abs(A-P):Math.abs(A-P)-Ee-Ke;if(mt<0&&g===0)return"".concat(ce,"L").concat(t,",").concat(i,"Z");ce+=Va(tP||(tP=$p(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),ze.x,ze.y,g,g,+(C<0),Me.x,Me.y,a,a,+(mt>180),+(C>0),fe.x,fe.y,g,g,+(C<0),ve.x,ve.y)}else ce+=Va(rP||(rP=$p(["L",",","Z"])),t,i);return ce},ZN={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},HN=e=>{var t=el(e,ZN),{cx:i,cy:a,innerRadius:d,outerRadius:g,cornerRadius:y,forceCornerRadius:c,cornerIsExternal:A,startAngle:P,endAngle:C,className:I}=t;if(g<d||P===C)return null;var B=Wn("recharts-sector",I),G=g-d,Z=Ed(y,G,0,!0),H;return Z>0&&Math.abs(P-C)<360?H=$N({cx:i,cy:a,innerRadius:d,outerRadius:g,cornerRadius:Math.min(Z,G/2),forceCornerRadius:c,cornerIsExternal:A,startAngle:P,endAngle:C}):H=XO({cx:i,cy:a,innerRadius:d,outerRadius:g,startAngle:P,endAngle:C}),X.createElement("path",O2({},Nl(t),{className:B,d:H}))};function YN(e,t,i){if(e==="horizontal")return[{x:t.x,y:i.top},{x:t.x,y:i.top+i.height}];if(e==="vertical")return[{x:i.left,y:t.y},{x:i.left+i.width,y:t.y}];if(kI(t)){if(e==="centric"){var{cx:a,cy:d,innerRadius:g,outerRadius:y,angle:c}=t,A=qa(a,d,g,c),P=qa(a,d,y,c);return[{x:A.x,y:A.y},{x:P.x,y:P.y}]}return YO(t)}}var Sw={},Tw={},Ew={},nP;function XN(){return nP||(nP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qI();function i(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=i})(Ew)),Ew}var iP;function WN(){return iP||(iP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XN();function i(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=i})(Tw)),Tw}var aP;function KN(){return aP||(aP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$I(),i=WN();function a(d,g,y){y&&typeof y!="number"&&t.isIterateeCall(d,g,y)&&(g=y=void 0),d=i.toFinite(d),g===void 0?(g=d,d=0):g=i.toFinite(g),y=y===void 0?d<g?1:-1:i.toFinite(y);const c=Math.max(Math.ceil((g-d)/(y||1)),0),A=new Array(c);for(let P=0;P<c;P++)A[P]=d,d+=y;return A}e.range=a})(Sw)),Sw}var Aw,oP;function QN(){return oP||(oP=1,Aw=KN().range),Aw}var JN=QN();const WO=Vl(JN);function Sd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function eF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function LS(e){let t,i,a;e.length!==2?(t=Sd,i=(c,A)=>Sd(e(c),A),a=(c,A)=>e(c)-A):(t=e===Sd||e===eF?e:tF,i=e,a=e);function d(c,A,P=0,C=c.length){if(P<C){if(t(A,A)!==0)return C;do{const I=P+C>>>1;i(c[I],A)<0?P=I+1:C=I}while(P<C)}return P}function g(c,A,P=0,C=c.length){if(P<C){if(t(A,A)!==0)return C;do{const I=P+C>>>1;i(c[I],A)<=0?P=I+1:C=I}while(P<C)}return P}function y(c,A,P=0,C=c.length){const I=d(c,A,P,C-1);return I>P&&a(c[I-1],A)>-a(c[I],A)?I-1:I}return{left:d,center:y,right:g}}function tF(){return 0}function KO(e){return e===null?NaN:+e}function*rF(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const nF=LS(Sd),fv=nF.right;LS(KO).center;class sP extends Map{constructor(t,i=oF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[a,d]of t)this.set(a,d)}get(t){return super.get(lP(this,t))}has(t){return super.has(lP(this,t))}set(t,i){return super.set(iF(this,t),i)}delete(t){return super.delete(aF(this,t))}}function lP({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):i}function iF({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function aF({_intern:e,_key:t},i){const a=t(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function oF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function sF(e=Sd){if(e===Sd)return QO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const a=e(t,i);return a||a===0?a:(e(i,i)===0)-(e(t,t)===0)}}function QO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const lF=Math.sqrt(50),cF=Math.sqrt(10),uF=Math.sqrt(2);function Ib(e,t,i){const a=(t-e)/Math.max(0,i),d=Math.floor(Math.log10(a)),g=a/Math.pow(10,d),y=g>=lF?10:g>=cF?5:g>=uF?2:1;let c,A,P;return d<0?(P=Math.pow(10,-d)/y,c=Math.round(e*P),A=Math.round(t*P),c/P<e&&++c,A/P>t&&--A,P=-P):(P=Math.pow(10,d)*y,c=Math.round(e/P),A=Math.round(t/P),c*P<e&&++c,A*P>t&&--A),A<c&&.5<=i&&i<2?Ib(e,t,i*2):[c,A,P]}function z2(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const a=t<e,[d,g,y]=a?Ib(t,e,i):Ib(e,t,i);if(!(g>=d))return[];const c=g-d+1,A=new Array(c);if(a)if(y<0)for(let P=0;P<c;++P)A[P]=(g-P)/-y;else for(let P=0;P<c;++P)A[P]=(g-P)*y;else if(y<0)for(let P=0;P<c;++P)A[P]=(d+P)/-y;else for(let P=0;P<c;++P)A[P]=(d+P)*y;return A}function k2(e,t,i){return t=+t,e=+e,i=+i,Ib(e,t,i)[2]}function R2(e,t,i){t=+t,e=+e,i=+i;const a=t<e,d=a?k2(t,e,i):k2(e,t,i);return(a?-1:1)*(d<0?1/-d:d)}function cP(e,t){let i;for(const a of e)a!=null&&(i<a||i===void 0&&a>=a)&&(i=a);return i}function uP(e,t){let i;for(const a of e)a!=null&&(i>a||i===void 0&&a>=a)&&(i=a);return i}function JO(e,t,i=0,a=1/0,d){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(e.length-1,a)),!(i<=t&&t<=a))return e;for(d=d===void 0?QO:sF(d);a>i;){if(a-i>600){const A=a-i+1,P=t-i+1,C=Math.log(A),I=.5*Math.exp(2*C/3),B=.5*Math.sqrt(C*I*(A-I)/A)*(P-A/2<0?-1:1),G=Math.max(i,Math.floor(t-P*I/A+B)),Z=Math.min(a,Math.floor(t+(A-P)*I/A+B));JO(e,t,G,Z,d)}const g=e[t];let y=i,c=a;for(A0(e,i,t),d(e[a],g)>0&&A0(e,i,a);y<c;){for(A0(e,y,c),++y,--c;d(e[y],g)<0;)++y;for(;d(e[c],g)>0;)--c}d(e[i],g)===0?A0(e,i,c):(++c,A0(e,c,a)),c<=t&&(i=c+1),t<=c&&(a=c-1)}return e}function A0(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}function hF(e,t,i){if(e=Float64Array.from(rF(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return uP(e);if(t>=1)return cP(e);var a,d=(a-1)*t,g=Math.floor(d),y=cP(JO(e,g).subarray(0,g+1)),c=uP(e.subarray(g+1));return y+(c-y)*(d-g)}}function fF(e,t,i=KO){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+i(e[0],0,e);if(t>=1)return+i(e[a-1],a-1,e);var a,d=(a-1)*t,g=Math.floor(d),y=+i(e[g],g,e),c=+i(e[g+1],g+1,e);return y+(c-y)*(d-g)}}function dF(e,t,i){e=+e,t=+t,i=(d=arguments.length)<2?(t=e,e=0,1):d<3?1:+i;for(var a=-1,d=Math.max(0,Math.ceil((t-e)/i))|0,g=new Array(d);++a<d;)g[a]=e+a*i;return g}function ql(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function mf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const L2=Symbol("implicit");function BS(){var e=new sP,t=[],i=[],a=L2;function d(g){let y=e.get(g);if(y===void 0){if(a!==L2)return a;e.set(g,y=t.push(g)-1)}return i[y%i.length]}return d.domain=function(g){if(!arguments.length)return t.slice();t=[],e=new sP;for(const y of g)e.has(y)||e.set(y,t.push(y)-1);return d},d.range=function(g){return arguments.length?(i=Array.from(g),d):i.slice()},d.unknown=function(g){return arguments.length?(a=g,d):a},d.copy=function(){return BS(t,i).unknown(a)},ql.apply(d,arguments),d}function jS(){var e=BS().unknown(void 0),t=e.domain,i=e.range,a=0,d=1,g,y,c=!1,A=0,P=0,C=.5;delete e.unknown;function I(){var B=t().length,G=d<a,Z=G?d:a,H=G?a:d;g=(H-Z)/Math.max(1,B-A+P*2),c&&(g=Math.floor(g)),Z+=(H-Z-g*(B-A))*C,y=g*(1-A),c&&(Z=Math.round(Z),y=Math.round(y));var U=dF(B).map(function(oe){return Z+g*oe});return i(G?U.reverse():U)}return e.domain=function(B){return arguments.length?(t(B),I()):t()},e.range=function(B){return arguments.length?([a,d]=B,a=+a,d=+d,I()):[a,d]},e.rangeRound=function(B){return[a,d]=B,a=+a,d=+d,c=!0,I()},e.bandwidth=function(){return y},e.step=function(){return g},e.round=function(B){return arguments.length?(c=!!B,I()):c},e.padding=function(B){return arguments.length?(A=Math.min(1,P=+B),I()):A},e.paddingInner=function(B){return arguments.length?(A=Math.min(1,B),I()):A},e.paddingOuter=function(B){return arguments.length?(P=+B,I()):P},e.align=function(B){return arguments.length?(C=Math.max(0,Math.min(1,B)),I()):C},e.copy=function(){return jS(t(),[a,d]).round(c).paddingInner(A).paddingOuter(P).align(C)},ql.apply(I(),arguments)}function e3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return e3(t())},e}function pF(){return e3(jS.apply(null,arguments).paddingInner(1))}function NS(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function t3(e,t){var i=Object.create(e.prototype);for(var a in t)i[a]=t[a];return i}function dv(){}var H0=.7,Ob=1/H0,Yg="\\s*([+-]?\\d+)\\s*",Y0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Uu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mF=/^#([0-9a-f]{3,8})$/,gF=new RegExp(`^rgb\\(${Yg},${Yg},${Yg}\\)$`),yF=new RegExp(`^rgb\\(${Uu},${Uu},${Uu}\\)$`),vF=new RegExp(`^rgba\\(${Yg},${Yg},${Yg},${Y0}\\)$`),_F=new RegExp(`^rgba\\(${Uu},${Uu},${Uu},${Y0}\\)$`),bF=new RegExp(`^hsl\\(${Y0},${Uu},${Uu}\\)$`),xF=new RegExp(`^hsla\\(${Y0},${Uu},${Uu},${Y0}\\)$`),hP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};NS(dv,X0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fP,formatHex:fP,formatHex8:wF,formatHsl:SF,formatRgb:dP,toString:dP});function fP(){return this.rgb().formatHex()}function wF(){return this.rgb().formatHex8()}function SF(){return r3(this).formatHsl()}function dP(){return this.rgb().formatRgb()}function X0(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=mF.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?pP(t):i===3?new gs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?B_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?B_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gF.exec(e))?new gs(t[1],t[2],t[3],1):(t=yF.exec(e))?new gs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vF.exec(e))?B_(t[1],t[2],t[3],t[4]):(t=_F.exec(e))?B_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bF.exec(e))?yP(t[1],t[2]/100,t[3]/100,1):(t=xF.exec(e))?yP(t[1],t[2]/100,t[3]/100,t[4]):hP.hasOwnProperty(e)?pP(hP[e]):e==="transparent"?new gs(NaN,NaN,NaN,0):null}function pP(e){return new gs(e>>16&255,e>>8&255,e&255,1)}function B_(e,t,i,a){return a<=0&&(e=t=i=NaN),new gs(e,t,i,a)}function TF(e){return e instanceof dv||(e=X0(e)),e?(e=e.rgb(),new gs(e.r,e.g,e.b,e.opacity)):new gs}function B2(e,t,i,a){return arguments.length===1?TF(e):new gs(e,t,i,a??1)}function gs(e,t,i,a){this.r=+e,this.g=+t,this.b=+i,this.opacity=+a}NS(gs,B2,t3(dv,{brighter(e){return e=e==null?Ob:Math.pow(Ob,e),new gs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?H0:Math.pow(H0,e),new gs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gs(Wp(this.r),Wp(this.g),Wp(this.b),zb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mP,formatHex:mP,formatHex8:EF,formatRgb:gP,toString:gP}));function mP(){return`#${Zp(this.r)}${Zp(this.g)}${Zp(this.b)}`}function EF(){return`#${Zp(this.r)}${Zp(this.g)}${Zp(this.b)}${Zp((isNaN(this.opacity)?1:this.opacity)*255)}`}function gP(){const e=zb(this.opacity);return`${e===1?"rgb(":"rgba("}${Wp(this.r)}, ${Wp(this.g)}, ${Wp(this.b)}${e===1?")":`, ${e})`}`}function zb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Wp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zp(e){return e=Wp(e),(e<16?"0":"")+e.toString(16)}function yP(e,t,i,a){return a<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Fc(e,t,i,a)}function r3(e){if(e instanceof Fc)return new Fc(e.h,e.s,e.l,e.opacity);if(e instanceof dv||(e=X0(e)),!e)return new Fc;if(e instanceof Fc)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,d=Math.min(t,i,a),g=Math.max(t,i,a),y=NaN,c=g-d,A=(g+d)/2;return c?(t===g?y=(i-a)/c+(i<a)*6:i===g?y=(a-t)/c+2:y=(t-i)/c+4,c/=A<.5?g+d:2-g-d,y*=60):c=A>0&&A<1?0:y,new Fc(y,c,A,e.opacity)}function AF(e,t,i,a){return arguments.length===1?r3(e):new Fc(e,t,i,a??1)}function Fc(e,t,i,a){this.h=+e,this.s=+t,this.l=+i,this.opacity=+a}NS(Fc,AF,t3(dv,{brighter(e){return e=e==null?Ob:Math.pow(Ob,e),new Fc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?H0:Math.pow(H0,e),new Fc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*t,d=2*i-a;return new gs(Mw(e>=240?e-240:e+120,d,a),Mw(e,d,a),Mw(e<120?e+240:e-120,d,a),this.opacity)},clamp(){return new Fc(vP(this.h),j_(this.s),j_(this.l),zb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=zb(this.opacity);return`${e===1?"hsl(":"hsla("}${vP(this.h)}, ${j_(this.s)*100}%, ${j_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vP(e){return e=(e||0)%360,e<0?e+360:e}function j_(e){return Math.max(0,Math.min(1,e||0))}function Mw(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const FS=e=>()=>e;function MF(e,t){return function(i){return e+i*t}}function PF(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(a){return Math.pow(e+a*t,i)}}function CF(e){return(e=+e)==1?n3:function(t,i){return i-t?PF(t,i,e):FS(isNaN(t)?i:t)}}function n3(e,t){var i=t-e;return i?MF(e,i):FS(isNaN(e)?t:e)}const _P=(function e(t){var i=CF(t);function a(d,g){var y=i((d=B2(d)).r,(g=B2(g)).r),c=i(d.g,g.g),A=i(d.b,g.b),P=n3(d.opacity,g.opacity);return function(C){return d.r=y(C),d.g=c(C),d.b=A(C),d.opacity=P(C),d+""}}return a.gamma=e,a})(1);function DF(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,a=t.slice(),d;return function(g){for(d=0;d<i;++d)a[d]=e[d]*(1-g)+t[d]*g;return a}}function IF(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function OF(e,t){var i=t?t.length:0,a=e?Math.min(i,e.length):0,d=new Array(a),g=new Array(i),y;for(y=0;y<a;++y)d[y]=ly(e[y],t[y]);for(;y<i;++y)g[y]=t[y];return function(c){for(y=0;y<a;++y)g[y]=d[y](c);return g}}function zF(e,t){var i=new Date;return e=+e,t=+t,function(a){return i.setTime(e*(1-a)+t*a),i}}function kb(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function kF(e,t){var i={},a={},d;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(d in t)d in e?i[d]=ly(e[d],t[d]):a[d]=t[d];return function(g){for(d in i)a[d]=i[d](g);return a}}var j2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pw=new RegExp(j2.source,"g");function RF(e){return function(){return e}}function LF(e){return function(t){return e(t)+""}}function BF(e,t){var i=j2.lastIndex=Pw.lastIndex=0,a,d,g,y=-1,c=[],A=[];for(e=e+"",t=t+"";(a=j2.exec(e))&&(d=Pw.exec(t));)(g=d.index)>i&&(g=t.slice(i,g),c[y]?c[y]+=g:c[++y]=g),(a=a[0])===(d=d[0])?c[y]?c[y]+=d:c[++y]=d:(c[++y]=null,A.push({i:y,x:kb(a,d)})),i=Pw.lastIndex;return i<t.length&&(g=t.slice(i),c[y]?c[y]+=g:c[++y]=g),c.length<2?A[0]?LF(A[0].x):RF(t):(t=A.length,function(P){for(var C=0,I;C<t;++C)c[(I=A[C]).i]=I.x(P);return c.join("")})}function ly(e,t){var i=typeof t,a;return t==null||i==="boolean"?FS(t):(i==="number"?kb:i==="string"?(a=X0(t))?(t=a,_P):BF:t instanceof X0?_P:t instanceof Date?zF:IF(t)?DF:Array.isArray(t)?OF:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?kF:kb)(e,t)}function US(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function jF(e,t){t===void 0&&(t=e,e=ly);for(var i=0,a=t.length-1,d=t[0],g=new Array(a<0?0:a);i<a;)g[i]=e(d,d=t[++i]);return function(y){var c=Math.max(0,Math.min(a-1,Math.floor(y*=a)));return g[c](y-c)}}function NF(e){return function(){return e}}function Rb(e){return+e}var bP=[0,1];function Lo(e){return e}function N2(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:NF(isNaN(t)?NaN:.5)}function FF(e,t){var i;return e>t&&(i=e,e=t,t=i),function(a){return Math.max(e,Math.min(t,a))}}function UF(e,t,i){var a=e[0],d=e[1],g=t[0],y=t[1];return d<a?(a=N2(d,a),g=i(y,g)):(a=N2(a,d),g=i(g,y)),function(c){return g(a(c))}}function VF(e,t,i){var a=Math.min(e.length,t.length)-1,d=new Array(a),g=new Array(a),y=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++y<a;)d[y]=N2(e[y],e[y+1]),g[y]=i(t[y],t[y+1]);return function(c){var A=fv(e,c,1,a)-1;return g[A](d[A](c))}}function pv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Sx(){var e=bP,t=bP,i=ly,a,d,g,y=Lo,c,A,P;function C(){var B=Math.min(e.length,t.length);return y!==Lo&&(y=FF(e[0],e[B-1])),c=B>2?VF:UF,A=P=null,I}function I(B){return B==null||isNaN(B=+B)?g:(A||(A=c(e.map(a),t,i)))(a(y(B)))}return I.invert=function(B){return y(d((P||(P=c(t,e.map(a),kb)))(B)))},I.domain=function(B){return arguments.length?(e=Array.from(B,Rb),C()):e.slice()},I.range=function(B){return arguments.length?(t=Array.from(B),C()):t.slice()},I.rangeRound=function(B){return t=Array.from(B),i=US,C()},I.clamp=function(B){return arguments.length?(y=B?!0:Lo,C()):y!==Lo},I.interpolate=function(B){return arguments.length?(i=B,C()):i},I.unknown=function(B){return arguments.length?(g=B,I):g},function(B,G){return a=B,d=G,C()}}function VS(){return Sx()(Lo,Lo)}function GF(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Lb(e,t){if(!isFinite(e)||e===0)return null;var i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function Jg(e){return e=Lb(Math.abs(e)),e?e[1]:NaN}function qF(e,t){return function(i,a){for(var d=i.length,g=[],y=0,c=e[0],A=0;d>0&&c>0&&(A+c+1>a&&(c=Math.max(1,a-A)),g.push(i.substring(d-=c,d+c)),!((A+=c+1)>a));)c=e[y=(y+1)%e.length];return g.reverse().join(t)}}function $F(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var ZF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function W0(e){if(!(t=ZF.exec(e)))throw new Error("invalid format: "+e);var t;return new GS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}W0.prototype=GS.prototype;function GS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}GS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function HF(e){e:for(var t=e.length,i=1,a=-1,d;i<t;++i)switch(e[i]){case".":a=d=i;break;case"0":a===0&&(a=i),d=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(d+1):e}var Bb;function YF(e,t){var i=Lb(e,t);if(!i)return Bb=void 0,e.toPrecision(t);var a=i[0],d=i[1],g=d-(Bb=Math.max(-8,Math.min(8,Math.floor(d/3)))*3)+1,y=a.length;return g===y?a:g>y?a+new Array(g-y+1).join("0"):g>0?a.slice(0,g)+"."+a.slice(g):"0."+new Array(1-g).join("0")+Lb(e,Math.max(0,t+g-1))[0]}function xP(e,t){var i=Lb(e,t);if(!i)return e+"";var a=i[0],d=i[1];return d<0?"0."+new Array(-d).join("0")+a:a.length>d+1?a.slice(0,d+1)+"."+a.slice(d+1):a+new Array(d-a.length+2).join("0")}const wP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:GF,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xP(e*100,t),r:xP,s:YF,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function SP(e){return e}var TP=Array.prototype.map,EP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function XF(e){var t=e.grouping===void 0||e.thousands===void 0?SP:qF(TP.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",d=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?SP:$F(TP.call(e.numerals,String)),y=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",A=e.nan===void 0?"NaN":e.nan+"";function P(I,B){I=W0(I);var G=I.fill,Z=I.align,H=I.sign,U=I.symbol,oe=I.zero,ce=I.width,fe=I.comma,ve=I.precision,Ee=I.trim,Me=I.type;Me==="n"?(fe=!0,Me="g"):wP[Me]||(ve===void 0&&(ve=12),Ee=!0,Me="g"),(oe||G==="0"&&Z==="=")&&(oe=!0,G="0",Z="=");var ze=(B&&B.prefix!==void 0?B.prefix:"")+(U==="$"?i:U==="#"&&/[boxX]/.test(Me)?"0"+Me.toLowerCase():""),Ke=(U==="$"?a:/[%p]/.test(Me)?y:"")+(B&&B.suffix!==void 0?B.suffix:""),mt=wP[Me],zt=/[defgprs%]/.test(Me);ve=ve===void 0?6:/[gprs]/.test(Me)?Math.max(1,Math.min(21,ve)):Math.max(0,Math.min(20,ve));function Ge(Te){var dt=ze,It=Ke,Rt,Ve,it;if(Me==="c")It=mt(Te)+It,Te="";else{Te=+Te;var Mt=Te<0||1/Te<0;if(Te=isNaN(Te)?A:mt(Math.abs(Te),ve),Ee&&(Te=HF(Te)),Mt&&+Te==0&&H!=="+"&&(Mt=!1),dt=(Mt?H==="("?H:c:H==="-"||H==="("?"":H)+dt,It=(Me==="s"&&!isNaN(Te)&&Bb!==void 0?EP[8+Bb/3]:"")+It+(Mt&&H==="("?")":""),zt){for(Rt=-1,Ve=Te.length;++Rt<Ve;)if(it=Te.charCodeAt(Rt),48>it||it>57){It=(it===46?d+Te.slice(Rt+1):Te.slice(Rt))+It,Te=Te.slice(0,Rt);break}}}fe&&!oe&&(Te=t(Te,1/0));var Be=dt.length+Te.length+It.length,yt=Be<ce?new Array(ce-Be+1).join(G):"";switch(fe&&oe&&(Te=t(yt+Te,yt.length?ce-It.length:1/0),yt=""),Z){case"<":Te=dt+Te+It+yt;break;case"=":Te=dt+yt+Te+It;break;case"^":Te=yt.slice(0,Be=yt.length>>1)+dt+Te+It+yt.slice(Be);break;default:Te=yt+dt+Te+It;break}return g(Te)}return Ge.toString=function(){return I+""},Ge}function C(I,B){var G=Math.max(-8,Math.min(8,Math.floor(Jg(B)/3)))*3,Z=Math.pow(10,-G),H=P((I=W0(I),I.type="f",I),{suffix:EP[8+G/3]});return function(U){return H(Z*U)}}return{format:P,formatPrefix:C}}var N_,qS,i3;WF({thousands:",",grouping:[3],currency:["$",""]});function WF(e){return N_=XF(e),qS=N_.format,i3=N_.formatPrefix,N_}function KF(e){return Math.max(0,-Jg(Math.abs(e)))}function QF(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jg(t)/3)))*3-Jg(Math.abs(e)))}function JF(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jg(t)-Jg(e))+1}function a3(e,t,i,a){var d=R2(e,t,i),g;switch(a=W0(a??",f"),a.type){case"s":{var y=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(g=QF(d,y))&&(a.precision=g),i3(a,y)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(g=JF(d,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=g-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(g=KF(d))&&(a.precision=g-(a.type==="%")*2);break}}return qS(a)}function Pd(e){var t=e.domain;return e.ticks=function(i){var a=t();return z2(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var d=t();return a3(d[0],d[d.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=t(),d=0,g=a.length-1,y=a[d],c=a[g],A,P,C=10;for(c<y&&(P=y,y=c,c=P,P=d,d=g,g=P);C-- >0;){if(P=k2(y,c,i),P===A)return a[d]=y,a[g]=c,t(a);if(P>0)y=Math.floor(y/P)*P,c=Math.ceil(c/P)*P;else if(P<0)y=Math.ceil(y*P)/P,c=Math.floor(c*P)/P;else break;A=P}return e},e}function $S(){var e=VS();return e.copy=function(){return pv(e,$S())},ql.apply(e,arguments),Pd(e)}function o3(e){var t;function i(a){return a==null||isNaN(a=+a)?t:a}return i.invert=i,i.domain=i.range=function(a){return arguments.length?(e=Array.from(a,Rb),i):e.slice()},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return o3(e).unknown(t)},e=arguments.length?Array.from(e,Rb):[0,1],Pd(i)}function s3(e,t){e=e.slice();var i=0,a=e.length-1,d=e[i],g=e[a],y;return g<d&&(y=i,i=a,a=y,y=d,d=g,g=y),e[i]=t.floor(d),e[a]=t.ceil(g),e}function AP(e){return Math.log(e)}function MP(e){return Math.exp(e)}function e9(e){return-Math.log(-e)}function t9(e){return-Math.exp(-e)}function r9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function n9(e){return e===10?r9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function i9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function PP(e){return(t,i)=>-e(-t,i)}function ZS(e){const t=e(AP,MP),i=t.domain;let a=10,d,g;function y(){return d=i9(a),g=n9(a),i()[0]<0?(d=PP(d),g=PP(g),e(e9,t9)):e(AP,MP),t}return t.base=function(c){return arguments.length?(a=+c,y()):a},t.domain=function(c){return arguments.length?(i(c),y()):i()},t.ticks=c=>{const A=i();let P=A[0],C=A[A.length-1];const I=C<P;I&&([P,C]=[C,P]);let B=d(P),G=d(C),Z,H;const U=c==null?10:+c;let oe=[];if(!(a%1)&&G-B<U){if(B=Math.floor(B),G=Math.ceil(G),P>0){for(;B<=G;++B)for(Z=1;Z<a;++Z)if(H=B<0?Z/g(-B):Z*g(B),!(H<P)){if(H>C)break;oe.push(H)}}else for(;B<=G;++B)for(Z=a-1;Z>=1;--Z)if(H=B>0?Z/g(-B):Z*g(B),!(H<P)){if(H>C)break;oe.push(H)}oe.length*2<U&&(oe=z2(P,C,U))}else oe=z2(B,G,Math.min(G-B,U)).map(g);return I?oe.reverse():oe},t.tickFormat=(c,A)=>{if(c==null&&(c=10),A==null&&(A=a===10?"s":","),typeof A!="function"&&(!(a%1)&&(A=W0(A)).precision==null&&(A.trim=!0),A=qS(A)),c===1/0)return A;const P=Math.max(1,a*c/t.ticks().length);return C=>{let I=C/g(Math.round(d(C)));return I*a<a-.5&&(I*=a),I<=P?A(C):""}},t.nice=()=>i(s3(i(),{floor:c=>g(Math.floor(d(c))),ceil:c=>g(Math.ceil(d(c)))})),t}function l3(){const e=ZS(Sx()).domain([1,10]);return e.copy=()=>pv(e,l3()).base(e.base()),ql.apply(e,arguments),e}function CP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function DP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function HS(e){var t=1,i=e(CP(t),DP(t));return i.constant=function(a){return arguments.length?e(CP(t=+a),DP(t)):t},Pd(i)}function c3(){var e=HS(Sx());return e.copy=function(){return pv(e,c3()).constant(e.constant())},ql.apply(e,arguments)}function IP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function a9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function o9(e){return e<0?-e*e:e*e}function YS(e){var t=e(Lo,Lo),i=1;function a(){return i===1?e(Lo,Lo):i===.5?e(a9,o9):e(IP(i),IP(1/i))}return t.exponent=function(d){return arguments.length?(i=+d,a()):i},Pd(t)}function XS(){var e=YS(Sx());return e.copy=function(){return pv(e,XS()).exponent(e.exponent())},ql.apply(e,arguments),e}function s9(){return XS.apply(null,arguments).exponent(.5)}function OP(e){return Math.sign(e)*e*e}function l9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function u3(){var e=VS(),t=[0,1],i=!1,a;function d(g){var y=l9(e(g));return isNaN(y)?a:i?Math.round(y):y}return d.invert=function(g){return e.invert(OP(g))},d.domain=function(g){return arguments.length?(e.domain(g),d):e.domain()},d.range=function(g){return arguments.length?(e.range((t=Array.from(g,Rb)).map(OP)),d):t.slice()},d.rangeRound=function(g){return d.range(g).round(!0)},d.round=function(g){return arguments.length?(i=!!g,d):i},d.clamp=function(g){return arguments.length?(e.clamp(g),d):e.clamp()},d.unknown=function(g){return arguments.length?(a=g,d):a},d.copy=function(){return u3(e.domain(),t).round(i).clamp(e.clamp()).unknown(a)},ql.apply(d,arguments),Pd(d)}function h3(){var e=[],t=[],i=[],a;function d(){var y=0,c=Math.max(1,t.length);for(i=new Array(c-1);++y<c;)i[y-1]=fF(e,y/c);return g}function g(y){return y==null||isNaN(y=+y)?a:t[fv(i,y)]}return g.invertExtent=function(y){var c=t.indexOf(y);return c<0?[NaN,NaN]:[c>0?i[c-1]:e[0],c<i.length?i[c]:e[e.length-1]]},g.domain=function(y){if(!arguments.length)return e.slice();e=[];for(let c of y)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(Sd),d()},g.range=function(y){return arguments.length?(t=Array.from(y),d()):t.slice()},g.unknown=function(y){return arguments.length?(a=y,g):a},g.quantiles=function(){return i.slice()},g.copy=function(){return h3().domain(e).range(t).unknown(a)},ql.apply(g,arguments)}function f3(){var e=0,t=1,i=1,a=[.5],d=[0,1],g;function y(A){return A!=null&&A<=A?d[fv(a,A,0,i)]:g}function c(){var A=-1;for(a=new Array(i);++A<i;)a[A]=((A+1)*t-(A-i)*e)/(i+1);return y}return y.domain=function(A){return arguments.length?([e,t]=A,e=+e,t=+t,c()):[e,t]},y.range=function(A){return arguments.length?(i=(d=Array.from(A)).length-1,c()):d.slice()},y.invertExtent=function(A){var P=d.indexOf(A);return P<0?[NaN,NaN]:P<1?[e,a[0]]:P>=i?[a[i-1],t]:[a[P-1],a[P]]},y.unknown=function(A){return arguments.length&&(g=A),y},y.thresholds=function(){return a.slice()},y.copy=function(){return f3().domain([e,t]).range(d).unknown(g)},ql.apply(Pd(y),arguments)}function WS(){var e=[.5],t=[0,1],i,a=1;function d(g){return g!=null&&g<=g?t[fv(e,g,0,a)]:i}return d.domain=function(g){return arguments.length?(e=Array.from(g),a=Math.min(e.length,t.length-1),d):e.slice()},d.range=function(g){return arguments.length?(t=Array.from(g),a=Math.min(e.length,t.length-1),d):t.slice()},d.invertExtent=function(g){var y=t.indexOf(g);return[e[y-1],e[y]]},d.unknown=function(g){return arguments.length?(i=g,d):i},d.copy=function(){return WS().domain(e).range(t).unknown(i)},ql.apply(d,arguments)}const Cw=new Date,Dw=new Date;function Hi(e,t,i,a){function d(g){return e(g=arguments.length===0?new Date:new Date(+g)),g}return d.floor=g=>(e(g=new Date(+g)),g),d.ceil=g=>(e(g=new Date(g-1)),t(g,1),e(g),g),d.round=g=>{const y=d(g),c=d.ceil(g);return g-y<c-g?y:c},d.offset=(g,y)=>(t(g=new Date(+g),y==null?1:Math.floor(y)),g),d.range=(g,y,c)=>{const A=[];if(g=d.ceil(g),c=c==null?1:Math.floor(c),!(g<y)||!(c>0))return A;let P;do A.push(P=new Date(+g)),t(g,c),e(g);while(P<g&&g<y);return A},d.filter=g=>Hi(y=>{if(y>=y)for(;e(y),!g(y);)y.setTime(y-1)},(y,c)=>{if(y>=y)if(c<0)for(;++c<=0;)for(;t(y,-1),!g(y););else for(;--c>=0;)for(;t(y,1),!g(y););}),i&&(d.count=(g,y)=>(Cw.setTime(+g),Dw.setTime(+y),e(Cw),e(Dw),Math.floor(i(Cw,Dw))),d.every=g=>(g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?d.filter(a?y=>a(y)%g===0:y=>d.count(0,y)%g===0):d)),d}const jb=Hi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);jb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hi(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):jb);jb.range;const Jh=1e3,jl=Jh*60,ef=jl*60,sf=ef*24,KS=sf*7,zP=sf*30,Iw=sf*365,Hp=Hi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Jh)},(e,t)=>(t-e)/Jh,e=>e.getUTCSeconds());Hp.range;const QS=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jh)},(e,t)=>{e.setTime(+e+t*jl)},(e,t)=>(t-e)/jl,e=>e.getMinutes());QS.range;const JS=Hi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jl)},(e,t)=>(t-e)/jl,e=>e.getUTCMinutes());JS.range;const eT=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jh-e.getMinutes()*jl)},(e,t)=>{e.setTime(+e+t*ef)},(e,t)=>(t-e)/ef,e=>e.getHours());eT.range;const tT=Hi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ef)},(e,t)=>(t-e)/ef,e=>e.getUTCHours());tT.range;const mv=Hi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jl)/sf,e=>e.getDate()-1);mv.range;const Tx=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sf,e=>e.getUTCDate()-1);Tx.range;const d3=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sf,e=>Math.floor(e/sf));d3.range;function om(e){return Hi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*jl)/KS)}const Ex=om(0),Nb=om(1),c9=om(2),u9=om(3),ey=om(4),h9=om(5),f9=om(6);Ex.range;Nb.range;c9.range;u9.range;ey.range;h9.range;f9.range;function sm(e){return Hi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/KS)}const Ax=sm(0),Fb=sm(1),d9=sm(2),p9=sm(3),ty=sm(4),m9=sm(5),g9=sm(6);Ax.range;Fb.range;d9.range;p9.range;ty.range;m9.range;g9.range;const rT=Hi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rT.range;const nT=Hi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());nT.range;const lf=Hi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());lf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});lf.range;const cf=Hi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());cf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});cf.range;function p3(e,t,i,a,d,g){const y=[[Hp,1,Jh],[Hp,5,5*Jh],[Hp,15,15*Jh],[Hp,30,30*Jh],[g,1,jl],[g,5,5*jl],[g,15,15*jl],[g,30,30*jl],[d,1,ef],[d,3,3*ef],[d,6,6*ef],[d,12,12*ef],[a,1,sf],[a,2,2*sf],[i,1,KS],[t,1,zP],[t,3,3*zP],[e,1,Iw]];function c(P,C,I){const B=C<P;B&&([P,C]=[C,P]);const G=I&&typeof I.range=="function"?I:A(P,C,I),Z=G?G.range(P,+C+1):[];return B?Z.reverse():Z}function A(P,C,I){const B=Math.abs(C-P)/I,G=LS(([,,U])=>U).right(y,B);if(G===y.length)return e.every(R2(P/Iw,C/Iw,I));if(G===0)return jb.every(Math.max(R2(P,C,I),1));const[Z,H]=y[B/y[G-1][2]<y[G][2]/B?G-1:G];return Z.every(H)}return[c,A]}const[y9,v9]=p3(cf,nT,Ax,d3,tT,JS),[_9,b9]=p3(lf,rT,Ex,mv,eT,QS);function Ow(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function M0(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function x9(e){var t=e.dateTime,i=e.date,a=e.time,d=e.periods,g=e.days,y=e.shortDays,c=e.months,A=e.shortMonths,P=P0(d),C=C0(d),I=P0(g),B=C0(g),G=P0(y),Z=C0(y),H=P0(c),U=C0(c),oe=P0(A),ce=C0(A),fe={a:it,A:Mt,b:Be,B:yt,c:null,d:NP,e:NP,f:q9,g:e7,G:r7,H:U9,I:V9,j:G9,L:m3,m:$9,M:Z9,p:Ae,q:qe,Q:VP,s:GP,S:H9,u:Y9,U:X9,V:W9,w:K9,W:Q9,x:null,X:null,y:J9,Y:t7,Z:n7,"%":UP},ve={a:ct,A:wt,b:jt,B:$t,c:null,d:FP,e:FP,f:s7,g:y7,G:_7,H:i7,I:a7,j:o7,L:y3,m:l7,M:c7,p:Ft,q:Tr,Q:VP,s:GP,S:u7,u:h7,U:f7,V:d7,w:p7,W:m7,x:null,X:null,y:g7,Y:v7,Z:b7,"%":UP},Ee={a:zt,A:Ge,b:Te,B:dt,c:It,d:BP,e:BP,f:B9,g:LP,G:RP,H:jP,I:jP,j:z9,L:L9,m:O9,M:k9,p:mt,q:I9,Q:N9,s:F9,S:R9,u:A9,U:M9,V:P9,w:E9,W:C9,x:Rt,X:Ve,y:LP,Y:RP,Z:D9,"%":j9};fe.x=Me(i,fe),fe.X=Me(a,fe),fe.c=Me(t,fe),ve.x=Me(i,ve),ve.X=Me(a,ve),ve.c=Me(t,ve);function Me(pt,er){return function(mr){var At=[],Mn=-1,cr=0,Xr=pt.length,ln,Lr,va;for(mr instanceof Date||(mr=new Date(+mr));++Mn<Xr;)pt.charCodeAt(Mn)===37&&(At.push(pt.slice(cr,Mn)),(Lr=kP[ln=pt.charAt(++Mn)])!=null?ln=pt.charAt(++Mn):Lr=ln==="e"?" ":"0",(va=er[ln])&&(ln=va(mr,Lr)),At.push(ln),cr=Mn+1);return At.push(pt.slice(cr,Mn)),At.join("")}}function ze(pt,er){return function(mr){var At=M0(1900,void 0,1),Mn=Ke(At,pt,mr+="",0),cr,Xr;if(Mn!=mr.length)return null;if("Q"in At)return new Date(At.Q);if("s"in At)return new Date(At.s*1e3+("L"in At?At.L:0));if(er&&!("Z"in At)&&(At.Z=0),"p"in At&&(At.H=At.H%12+At.p*12),At.m===void 0&&(At.m="q"in At?At.q:0),"V"in At){if(At.V<1||At.V>53)return null;"w"in At||(At.w=1),"Z"in At?(cr=zw(M0(At.y,0,1)),Xr=cr.getUTCDay(),cr=Xr>4||Xr===0?Fb.ceil(cr):Fb(cr),cr=Tx.offset(cr,(At.V-1)*7),At.y=cr.getUTCFullYear(),At.m=cr.getUTCMonth(),At.d=cr.getUTCDate()+(At.w+6)%7):(cr=Ow(M0(At.y,0,1)),Xr=cr.getDay(),cr=Xr>4||Xr===0?Nb.ceil(cr):Nb(cr),cr=mv.offset(cr,(At.V-1)*7),At.y=cr.getFullYear(),At.m=cr.getMonth(),At.d=cr.getDate()+(At.w+6)%7)}else("W"in At||"U"in At)&&("w"in At||(At.w="u"in At?At.u%7:"W"in At?1:0),Xr="Z"in At?zw(M0(At.y,0,1)).getUTCDay():Ow(M0(At.y,0,1)).getDay(),At.m=0,At.d="W"in At?(At.w+6)%7+At.W*7-(Xr+5)%7:At.w+At.U*7-(Xr+6)%7);return"Z"in At?(At.H+=At.Z/100|0,At.M+=At.Z%100,zw(At)):Ow(At)}}function Ke(pt,er,mr,At){for(var Mn=0,cr=er.length,Xr=mr.length,ln,Lr;Mn<cr;){if(At>=Xr)return-1;if(ln=er.charCodeAt(Mn++),ln===37){if(ln=er.charAt(Mn++),Lr=Ee[ln in kP?er.charAt(Mn++):ln],!Lr||(At=Lr(pt,mr,At))<0)return-1}else if(ln!=mr.charCodeAt(At++))return-1}return At}function mt(pt,er,mr){var At=P.exec(er.slice(mr));return At?(pt.p=C.get(At[0].toLowerCase()),mr+At[0].length):-1}function zt(pt,er,mr){var At=G.exec(er.slice(mr));return At?(pt.w=Z.get(At[0].toLowerCase()),mr+At[0].length):-1}function Ge(pt,er,mr){var At=I.exec(er.slice(mr));return At?(pt.w=B.get(At[0].toLowerCase()),mr+At[0].length):-1}function Te(pt,er,mr){var At=oe.exec(er.slice(mr));return At?(pt.m=ce.get(At[0].toLowerCase()),mr+At[0].length):-1}function dt(pt,er,mr){var At=H.exec(er.slice(mr));return At?(pt.m=U.get(At[0].toLowerCase()),mr+At[0].length):-1}function It(pt,er,mr){return Ke(pt,t,er,mr)}function Rt(pt,er,mr){return Ke(pt,i,er,mr)}function Ve(pt,er,mr){return Ke(pt,a,er,mr)}function it(pt){return y[pt.getDay()]}function Mt(pt){return g[pt.getDay()]}function Be(pt){return A[pt.getMonth()]}function yt(pt){return c[pt.getMonth()]}function Ae(pt){return d[+(pt.getHours()>=12)]}function qe(pt){return 1+~~(pt.getMonth()/3)}function ct(pt){return y[pt.getUTCDay()]}function wt(pt){return g[pt.getUTCDay()]}function jt(pt){return A[pt.getUTCMonth()]}function $t(pt){return c[pt.getUTCMonth()]}function Ft(pt){return d[+(pt.getUTCHours()>=12)]}function Tr(pt){return 1+~~(pt.getUTCMonth()/3)}return{format:function(pt){var er=Me(pt+="",fe);return er.toString=function(){return pt},er},parse:function(pt){var er=ze(pt+="",!1);return er.toString=function(){return pt},er},utcFormat:function(pt){var er=Me(pt+="",ve);return er.toString=function(){return pt},er},utcParse:function(pt){var er=ze(pt+="",!0);return er.toString=function(){return pt},er}}}var kP={"-":"",_:" ",0:"0"},ma=/^\s*\d+/,w9=/^%/,S9=/[\\^$*+?|[\]().{}]/g;function an(e,t,i){var a=e<0?"-":"",d=(a?-e:e)+"",g=d.length;return a+(g<i?new Array(i-g+1).join(t)+d:d)}function T9(e){return e.replace(S9,"\\$&")}function P0(e){return new RegExp("^(?:"+e.map(T9).join("|")+")","i")}function C0(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function E9(e,t,i){var a=ma.exec(t.slice(i,i+1));return a?(e.w=+a[0],i+a[0].length):-1}function A9(e,t,i){var a=ma.exec(t.slice(i,i+1));return a?(e.u=+a[0],i+a[0].length):-1}function M9(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.U=+a[0],i+a[0].length):-1}function P9(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.V=+a[0],i+a[0].length):-1}function C9(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.W=+a[0],i+a[0].length):-1}function RP(e,t,i){var a=ma.exec(t.slice(i,i+4));return a?(e.y=+a[0],i+a[0].length):-1}function LP(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function D9(e,t,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function I9(e,t,i){var a=ma.exec(t.slice(i,i+1));return a?(e.q=a[0]*3-3,i+a[0].length):-1}function O9(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.m=a[0]-1,i+a[0].length):-1}function BP(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.d=+a[0],i+a[0].length):-1}function z9(e,t,i){var a=ma.exec(t.slice(i,i+3));return a?(e.m=0,e.d=+a[0],i+a[0].length):-1}function jP(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.H=+a[0],i+a[0].length):-1}function k9(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.M=+a[0],i+a[0].length):-1}function R9(e,t,i){var a=ma.exec(t.slice(i,i+2));return a?(e.S=+a[0],i+a[0].length):-1}function L9(e,t,i){var a=ma.exec(t.slice(i,i+3));return a?(e.L=+a[0],i+a[0].length):-1}function B9(e,t,i){var a=ma.exec(t.slice(i,i+6));return a?(e.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function j9(e,t,i){var a=w9.exec(t.slice(i,i+1));return a?i+a[0].length:-1}function N9(e,t,i){var a=ma.exec(t.slice(i));return a?(e.Q=+a[0],i+a[0].length):-1}function F9(e,t,i){var a=ma.exec(t.slice(i));return a?(e.s=+a[0],i+a[0].length):-1}function NP(e,t){return an(e.getDate(),t,2)}function U9(e,t){return an(e.getHours(),t,2)}function V9(e,t){return an(e.getHours()%12||12,t,2)}function G9(e,t){return an(1+mv.count(lf(e),e),t,3)}function m3(e,t){return an(e.getMilliseconds(),t,3)}function q9(e,t){return m3(e,t)+"000"}function $9(e,t){return an(e.getMonth()+1,t,2)}function Z9(e,t){return an(e.getMinutes(),t,2)}function H9(e,t){return an(e.getSeconds(),t,2)}function Y9(e){var t=e.getDay();return t===0?7:t}function X9(e,t){return an(Ex.count(lf(e)-1,e),t,2)}function g3(e){var t=e.getDay();return t>=4||t===0?ey(e):ey.ceil(e)}function W9(e,t){return e=g3(e),an(ey.count(lf(e),e)+(lf(e).getDay()===4),t,2)}function K9(e){return e.getDay()}function Q9(e,t){return an(Nb.count(lf(e)-1,e),t,2)}function J9(e,t){return an(e.getFullYear()%100,t,2)}function e7(e,t){return e=g3(e),an(e.getFullYear()%100,t,2)}function t7(e,t){return an(e.getFullYear()%1e4,t,4)}function r7(e,t){var i=e.getDay();return e=i>=4||i===0?ey(e):ey.ceil(e),an(e.getFullYear()%1e4,t,4)}function n7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+an(t/60|0,"0",2)+an(t%60,"0",2)}function FP(e,t){return an(e.getUTCDate(),t,2)}function i7(e,t){return an(e.getUTCHours(),t,2)}function a7(e,t){return an(e.getUTCHours()%12||12,t,2)}function o7(e,t){return an(1+Tx.count(cf(e),e),t,3)}function y3(e,t){return an(e.getUTCMilliseconds(),t,3)}function s7(e,t){return y3(e,t)+"000"}function l7(e,t){return an(e.getUTCMonth()+1,t,2)}function c7(e,t){return an(e.getUTCMinutes(),t,2)}function u7(e,t){return an(e.getUTCSeconds(),t,2)}function h7(e){var t=e.getUTCDay();return t===0?7:t}function f7(e,t){return an(Ax.count(cf(e)-1,e),t,2)}function v3(e){var t=e.getUTCDay();return t>=4||t===0?ty(e):ty.ceil(e)}function d7(e,t){return e=v3(e),an(ty.count(cf(e),e)+(cf(e).getUTCDay()===4),t,2)}function p7(e){return e.getUTCDay()}function m7(e,t){return an(Fb.count(cf(e)-1,e),t,2)}function g7(e,t){return an(e.getUTCFullYear()%100,t,2)}function y7(e,t){return e=v3(e),an(e.getUTCFullYear()%100,t,2)}function v7(e,t){return an(e.getUTCFullYear()%1e4,t,4)}function _7(e,t){var i=e.getUTCDay();return e=i>=4||i===0?ty(e):ty.ceil(e),an(e.getUTCFullYear()%1e4,t,4)}function b7(){return"+0000"}function UP(){return"%"}function VP(e){return+e}function GP(e){return Math.floor(+e/1e3)}var kg,_3,b3;x7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function x7(e){return kg=x9(e),_3=kg.format,kg.parse,b3=kg.utcFormat,kg.utcParse,kg}function w7(e){return new Date(e)}function S7(e){return e instanceof Date?+e:+new Date(+e)}function iT(e,t,i,a,d,g,y,c,A,P){var C=VS(),I=C.invert,B=C.domain,G=P(".%L"),Z=P(":%S"),H=P("%I:%M"),U=P("%I %p"),oe=P("%a %d"),ce=P("%b %d"),fe=P("%B"),ve=P("%Y");function Ee(Me){return(A(Me)<Me?G:c(Me)<Me?Z:y(Me)<Me?H:g(Me)<Me?U:a(Me)<Me?d(Me)<Me?oe:ce:i(Me)<Me?fe:ve)(Me)}return C.invert=function(Me){return new Date(I(Me))},C.domain=function(Me){return arguments.length?B(Array.from(Me,S7)):B().map(w7)},C.ticks=function(Me){var ze=B();return e(ze[0],ze[ze.length-1],Me??10)},C.tickFormat=function(Me,ze){return ze==null?Ee:P(ze)},C.nice=function(Me){var ze=B();return(!Me||typeof Me.range!="function")&&(Me=t(ze[0],ze[ze.length-1],Me??10)),Me?B(s3(ze,Me)):C},C.copy=function(){return pv(C,iT(e,t,i,a,d,g,y,c,A,P))},C}function T7(){return ql.apply(iT(_9,b9,lf,rT,Ex,mv,eT,QS,Hp,_3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function E7(){return ql.apply(iT(y9,v9,cf,nT,Ax,Tx,tT,JS,Hp,b3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mx(){var e=0,t=1,i,a,d,g,y=Lo,c=!1,A;function P(I){return I==null||isNaN(I=+I)?A:y(d===0?.5:(I=(g(I)-i)*d,c?Math.max(0,Math.min(1,I)):I))}P.domain=function(I){return arguments.length?([e,t]=I,i=g(e=+e),a=g(t=+t),d=i===a?0:1/(a-i),P):[e,t]},P.clamp=function(I){return arguments.length?(c=!!I,P):c},P.interpolator=function(I){return arguments.length?(y=I,P):y};function C(I){return function(B){var G,Z;return arguments.length?([G,Z]=B,y=I(G,Z),P):[y(0),y(1)]}}return P.range=C(ly),P.rangeRound=C(US),P.unknown=function(I){return arguments.length?(A=I,P):A},function(I){return g=I,i=I(e),a=I(t),d=i===a?0:1/(a-i),P}}function Cd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function x3(){var e=Pd(Mx()(Lo));return e.copy=function(){return Cd(e,x3())},mf.apply(e,arguments)}function w3(){var e=ZS(Mx()).domain([1,10]);return e.copy=function(){return Cd(e,w3()).base(e.base())},mf.apply(e,arguments)}function S3(){var e=HS(Mx());return e.copy=function(){return Cd(e,S3()).constant(e.constant())},mf.apply(e,arguments)}function aT(){var e=YS(Mx());return e.copy=function(){return Cd(e,aT()).exponent(e.exponent())},mf.apply(e,arguments)}function A7(){return aT.apply(null,arguments).exponent(.5)}function T3(){var e=[],t=Lo;function i(a){if(a!=null&&!isNaN(a=+a))return t((fv(e,a,1)-1)/(e.length-1))}return i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let d of a)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Sd),i},i.interpolator=function(a){return arguments.length?(t=a,i):t},i.range=function(){return e.map((a,d)=>t(d/(e.length-1)))},i.quantiles=function(a){return Array.from({length:a+1},(d,g)=>hF(e,g/a))},i.copy=function(){return T3(t).domain(e)},mf.apply(i,arguments)}function Px(){var e=0,t=.5,i=1,a=1,d,g,y,c,A,P=Lo,C,I=!1,B;function G(H){return isNaN(H=+H)?B:(H=.5+((H=+C(H))-g)*(a*H<a*g?c:A),P(I?Math.max(0,Math.min(1,H)):H))}G.domain=function(H){return arguments.length?([e,t,i]=H,d=C(e=+e),g=C(t=+t),y=C(i=+i),c=d===g?0:.5/(g-d),A=g===y?0:.5/(y-g),a=g<d?-1:1,G):[e,t,i]},G.clamp=function(H){return arguments.length?(I=!!H,G):I},G.interpolator=function(H){return arguments.length?(P=H,G):P};function Z(H){return function(U){var oe,ce,fe;return arguments.length?([oe,ce,fe]=U,P=jF(H,[oe,ce,fe]),G):[P(0),P(.5),P(1)]}}return G.range=Z(ly),G.rangeRound=Z(US),G.unknown=function(H){return arguments.length?(B=H,G):B},function(H){return C=H,d=H(e),g=H(t),y=H(i),c=d===g?0:.5/(g-d),A=g===y?0:.5/(y-g),a=g<d?-1:1,G}}function E3(){var e=Pd(Px()(Lo));return e.copy=function(){return Cd(e,E3())},mf.apply(e,arguments)}function A3(){var e=ZS(Px()).domain([.1,1,10]);return e.copy=function(){return Cd(e,A3()).base(e.base())},mf.apply(e,arguments)}function M3(){var e=HS(Px());return e.copy=function(){return Cd(e,M3()).constant(e.constant())},mf.apply(e,arguments)}function oT(){var e=YS(Px());return e.copy=function(){return Cd(e,oT()).exponent(e.exponent())},mf.apply(e,arguments)}function M7(){return oT.apply(null,arguments).exponent(.5)}const I0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:jS,scaleDiverging:E3,scaleDivergingLog:A3,scaleDivergingPow:oT,scaleDivergingSqrt:M7,scaleDivergingSymlog:M3,scaleIdentity:o3,scaleImplicit:L2,scaleLinear:$S,scaleLog:l3,scaleOrdinal:BS,scalePoint:pF,scalePow:XS,scaleQuantile:h3,scaleQuantize:f3,scaleRadial:u3,scaleSequential:x3,scaleSequentialLog:w3,scaleSequentialPow:aT,scaleSequentialQuantile:T3,scaleSequentialSqrt:A7,scaleSequentialSymlog:S3,scaleSqrt:s9,scaleSymlog:c3,scaleThreshold:WS,scaleTime:T7,scaleUtc:E7,tickFormat:a3},Symbol.toStringTag,{value:"Module"}));var gf=e=>e.chartData,P3=ut([gf],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),C3=(e,t,i,a)=>a?P3(e):gf(e),P7=(e,t,i)=>i?P3(e):gf(e);function uf(e){if(Array.isArray(e)&&e.length===2){var[t,i]=e;if(Fr(t)&&Fr(i))return!0}return!1}function qP(e,t,i){return i?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function D3(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[i,a]=e,d,g;if(Fr(i))d=i;else if(typeof i=="function")return;if(Fr(a))g=a;else if(typeof a=="function")return;var y=[d,g];if(uf(y))return y}}function C7(e,t,i){if(!(!i&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,i);if(uf(a))return qP(a,t,i)}catch{}if(Array.isArray(e)&&e.length===2){var[d,g]=e,y,c;if(d==="auto")t!=null&&(y=Math.min(...t));else if(Jt(d))y=d;else if(typeof d=="function")try{t!=null&&(y=d(t?.[0]))}catch{}else if(typeof d=="string"&&rM.test(d)){var A=rM.exec(d);if(A==null||A[1]==null||t==null)y=void 0;else{var P=+A[1];y=t[0]-P}}else y=t?.[0];if(g==="auto")t!=null&&(c=Math.max(...t));else if(Jt(g))c=g;else if(typeof g=="function")try{t!=null&&(c=g(t?.[1]))}catch{}else if(typeof g=="string"&&nM.test(g)){var C=nM.exec(g);if(C==null||C[1]==null||t==null)c=void 0;else{var I=+C[1];c=t[1]+I}}else c=t?.[1];var B=[y,c];if(uf(B))return t==null?B:qP(B,t,i)}}}var cy=1e9,D7={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},lT,ti=!0,Ul="[DecimalError] ",Kp=Ul+"Invalid argument: ",sT=Ul+"Exponent out of range: ",uy=Math.floor,qp=Math.pow,I7=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xs,fa=1e7,Yn=7,I3=9007199254740991,Ub=uy(I3/Yn),Ht={};Ht.absoluteValue=Ht.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ht.comparedTo=Ht.cmp=function(e){var t,i,a,d,g=this;if(e=new g.constructor(e),g.s!==e.s)return g.s||-e.s;if(g.e!==e.e)return g.e>e.e^g.s<0?1:-1;for(a=g.d.length,d=e.d.length,t=0,i=a<d?a:d;t<i;++t)if(g.d[t]!==e.d[t])return g.d[t]>e.d[t]^g.s<0?1:-1;return a===d?0:a>d^g.s<0?1:-1};Ht.decimalPlaces=Ht.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Yn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Ht.dividedBy=Ht.div=function(e){return rf(this,new this.constructor(e))};Ht.dividedToIntegerBy=Ht.idiv=function(e){var t=this,i=t.constructor;return Bn(rf(t,new i(e),0,1),i.precision)};Ht.equals=Ht.eq=function(e){return!this.cmp(e)};Ht.exponent=function(){return Ri(this)};Ht.greaterThan=Ht.gt=function(e){return this.cmp(e)>0};Ht.greaterThanOrEqualTo=Ht.gte=function(e){return this.cmp(e)>=0};Ht.isInteger=Ht.isint=function(){return this.e>this.d.length-2};Ht.isNegative=Ht.isneg=function(){return this.s<0};Ht.isPositive=Ht.ispos=function(){return this.s>0};Ht.isZero=function(){return this.s===0};Ht.lessThan=Ht.lt=function(e){return this.cmp(e)<0};Ht.lessThanOrEqualTo=Ht.lte=function(e){return this.cmp(e)<1};Ht.logarithm=Ht.log=function(e){var t,i=this,a=i.constructor,d=a.precision,g=d+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Xs))throw Error(Ul+"NaN");if(i.s<1)throw Error(Ul+(i.s?"NaN":"-Infinity"));return i.eq(Xs)?new a(0):(ti=!1,t=rf(K0(i,g),K0(e,g),g),ti=!0,Bn(t,d))};Ht.minus=Ht.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?k3(t,e):O3(t,(e.s=-e.s,e))};Ht.modulo=Ht.mod=function(e){var t,i=this,a=i.constructor,d=a.precision;if(e=new a(e),!e.s)throw Error(Ul+"NaN");return i.s?(ti=!1,t=rf(i,e,0,1).times(e),ti=!0,i.minus(t)):Bn(new a(i),d)};Ht.naturalExponential=Ht.exp=function(){return z3(this)};Ht.naturalLogarithm=Ht.ln=function(){return K0(this)};Ht.negated=Ht.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ht.plus=Ht.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?O3(t,e):k3(t,(e.s=-e.s,e))};Ht.precision=Ht.sd=function(e){var t,i,a,d=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Kp+e);if(t=Ri(d)+1,a=d.d.length-1,i=a*Yn+1,a=d.d[a],a){for(;a%10==0;a/=10)i--;for(a=d.d[0];a>=10;a/=10)i++}return e&&t>i?t:i};Ht.squareRoot=Ht.sqrt=function(){var e,t,i,a,d,g,y,c=this,A=c.constructor;if(c.s<1){if(!c.s)return new A(0);throw Error(Ul+"NaN")}for(e=Ri(c),ti=!1,d=Math.sqrt(+c),d==0||d==1/0?(t=Fu(c.d),(t.length+e)%2==0&&(t+="0"),d=Math.sqrt(t),e=uy((e+1)/2)-(e<0||e%2),d==1/0?t="5e"+e:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new A(t)):a=new A(d.toString()),i=A.precision,d=y=i+3;;)if(g=a,a=g.plus(rf(c,g,y+2)).times(.5),Fu(g.d).slice(0,y)===(t=Fu(a.d)).slice(0,y)){if(t=t.slice(y-3,y+1),d==y&&t=="4999"){if(Bn(g,i+1,0),g.times(g).eq(c)){a=g;break}}else if(t!="9999")break;y+=4}return ti=!0,Bn(a,i)};Ht.times=Ht.mul=function(e){var t,i,a,d,g,y,c,A,P,C=this,I=C.constructor,B=C.d,G=(e=new I(e)).d;if(!C.s||!e.s)return new I(0);for(e.s*=C.s,i=C.e+e.e,A=B.length,P=G.length,A<P&&(g=B,B=G,G=g,y=A,A=P,P=y),g=[],y=A+P,a=y;a--;)g.push(0);for(a=P;--a>=0;){for(t=0,d=A+a;d>a;)c=g[d]+G[a]*B[d-a-1]+t,g[d--]=c%fa|0,t=c/fa|0;g[d]=(g[d]+t)%fa|0}for(;!g[--y];)g.pop();return t?++i:g.shift(),e.d=g,e.e=i,ti?Bn(e,I.precision):e};Ht.toDecimalPlaces=Ht.todp=function(e,t){var i=this,a=i.constructor;return i=new a(i),e===void 0?i:(Hu(e,0,cy),t===void 0?t=a.rounding:Hu(t,0,8),Bn(i,e+Ri(i)+1,t))};Ht.toExponential=function(e,t){var i,a=this,d=a.constructor;return e===void 0?i=im(a,!0):(Hu(e,0,cy),t===void 0?t=d.rounding:Hu(t,0,8),a=Bn(new d(a),e+1,t),i=im(a,!0,e+1)),i};Ht.toFixed=function(e,t){var i,a,d=this,g=d.constructor;return e===void 0?im(d):(Hu(e,0,cy),t===void 0?t=g.rounding:Hu(t,0,8),a=Bn(new g(d),e+Ri(d)+1,t),i=im(a.abs(),!1,e+Ri(a)+1),d.isneg()&&!d.isZero()?"-"+i:i)};Ht.toInteger=Ht.toint=function(){var e=this,t=e.constructor;return Bn(new t(e),Ri(e)+1,t.rounding)};Ht.toNumber=function(){return+this};Ht.toPower=Ht.pow=function(e){var t,i,a,d,g,y,c=this,A=c.constructor,P=12,C=+(e=new A(e));if(!e.s)return new A(Xs);if(c=new A(c),!c.s){if(e.s<1)throw Error(Ul+"Infinity");return c}if(c.eq(Xs))return c;if(a=A.precision,e.eq(Xs))return Bn(c,a);if(t=e.e,i=e.d.length-1,y=t>=i,g=c.s,y){if((i=C<0?-C:C)<=I3){for(d=new A(Xs),t=Math.ceil(a/Yn+4),ti=!1;i%2&&(d=d.times(c),ZP(d.d,t)),i=uy(i/2),i!==0;)c=c.times(c),ZP(c.d,t);return ti=!0,e.s<0?new A(Xs).div(d):Bn(d,a)}}else if(g<0)throw Error(Ul+"NaN");return g=g<0&&e.d[Math.max(t,i)]&1?-1:1,c.s=1,ti=!1,d=e.times(K0(c,a+P)),ti=!0,d=z3(d),d.s=g,d};Ht.toPrecision=function(e,t){var i,a,d=this,g=d.constructor;return e===void 0?(i=Ri(d),a=im(d,i<=g.toExpNeg||i>=g.toExpPos)):(Hu(e,1,cy),t===void 0?t=g.rounding:Hu(t,0,8),d=Bn(new g(d),e,t),i=Ri(d),a=im(d,e<=i||i<=g.toExpNeg,e)),a};Ht.toSignificantDigits=Ht.tosd=function(e,t){var i=this,a=i.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Hu(e,1,cy),t===void 0?t=a.rounding:Hu(t,0,8)),Bn(new a(i),e,t)};Ht.toString=Ht.valueOf=Ht.val=Ht.toJSON=Ht[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ri(e),i=e.constructor;return im(e,t<=i.toExpNeg||t>=i.toExpPos)};function O3(e,t){var i,a,d,g,y,c,A,P,C=e.constructor,I=C.precision;if(!e.s||!t.s)return t.s||(t=new C(e)),ti?Bn(t,I):t;if(A=e.d,P=t.d,y=e.e,d=t.e,A=A.slice(),g=y-d,g){for(g<0?(a=A,g=-g,c=P.length):(a=P,d=y,c=A.length),y=Math.ceil(I/Yn),c=y>c?y+1:c+1,g>c&&(g=c,a.length=1),a.reverse();g--;)a.push(0);a.reverse()}for(c=A.length,g=P.length,c-g<0&&(g=c,a=P,P=A,A=a),i=0;g;)i=(A[--g]=A[g]+P[g]+i)/fa|0,A[g]%=fa;for(i&&(A.unshift(i),++d),c=A.length;A[--c]==0;)A.pop();return t.d=A,t.e=d,ti?Bn(t,I):t}function Hu(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Kp+e)}function Fu(e){var t,i,a,d=e.length-1,g="",y=e[0];if(d>0){for(g+=y,t=1;t<d;t++)a=e[t]+"",i=Yn-a.length,i&&(g+=_d(i)),g+=a;y=e[t],a=y+"",i=Yn-a.length,i&&(g+=_d(i))}else if(y===0)return"0";for(;y%10===0;)y/=10;return g+y}var rf=(function(){function e(a,d){var g,y=0,c=a.length;for(a=a.slice();c--;)g=a[c]*d+y,a[c]=g%fa|0,y=g/fa|0;return y&&a.unshift(y),a}function t(a,d,g,y){var c,A;if(g!=y)A=g>y?1:-1;else for(c=A=0;c<g;c++)if(a[c]!=d[c]){A=a[c]>d[c]?1:-1;break}return A}function i(a,d,g){for(var y=0;g--;)a[g]-=y,y=a[g]<d[g]?1:0,a[g]=y*fa+a[g]-d[g];for(;!a[0]&&a.length>1;)a.shift()}return function(a,d,g,y){var c,A,P,C,I,B,G,Z,H,U,oe,ce,fe,ve,Ee,Me,ze,Ke,mt=a.constructor,zt=a.s==d.s?1:-1,Ge=a.d,Te=d.d;if(!a.s)return new mt(a);if(!d.s)throw Error(Ul+"Division by zero");for(A=a.e-d.e,ze=Te.length,Ee=Ge.length,G=new mt(zt),Z=G.d=[],P=0;Te[P]==(Ge[P]||0);)++P;if(Te[P]>(Ge[P]||0)&&--A,g==null?ce=g=mt.precision:y?ce=g+(Ri(a)-Ri(d))+1:ce=g,ce<0)return new mt(0);if(ce=ce/Yn+2|0,P=0,ze==1)for(C=0,Te=Te[0],ce++;(P<Ee||C)&&ce--;P++)fe=C*fa+(Ge[P]||0),Z[P]=fe/Te|0,C=fe%Te|0;else{for(C=fa/(Te[0]+1)|0,C>1&&(Te=e(Te,C),Ge=e(Ge,C),ze=Te.length,Ee=Ge.length),ve=ze,H=Ge.slice(0,ze),U=H.length;U<ze;)H[U++]=0;Ke=Te.slice(),Ke.unshift(0),Me=Te[0],Te[1]>=fa/2&&++Me;do C=0,c=t(Te,H,ze,U),c<0?(oe=H[0],ze!=U&&(oe=oe*fa+(H[1]||0)),C=oe/Me|0,C>1?(C>=fa&&(C=fa-1),I=e(Te,C),B=I.length,U=H.length,c=t(I,H,B,U),c==1&&(C--,i(I,ze<B?Ke:Te,B))):(C==0&&(c=C=1),I=Te.slice()),B=I.length,B<U&&I.unshift(0),i(H,I,U),c==-1&&(U=H.length,c=t(Te,H,ze,U),c<1&&(C++,i(H,ze<U?Ke:Te,U))),U=H.length):c===0&&(C++,H=[0]),Z[P++]=C,c&&H[0]?H[U++]=Ge[ve]||0:(H=[Ge[ve]],U=1);while((ve++<Ee||H[0]!==void 0)&&ce--)}return Z[0]||Z.shift(),G.e=A,Bn(G,y?g+Ri(G)+1:g)}})();function z3(e,t){var i,a,d,g,y,c,A=0,P=0,C=e.constructor,I=C.precision;if(Ri(e)>16)throw Error(sT+Ri(e));if(!e.s)return new C(Xs);for(ti=!1,c=I,y=new C(.03125);e.abs().gte(.1);)e=e.times(y),P+=5;for(a=Math.log(qp(2,P))/Math.LN10*2+5|0,c+=a,i=d=g=new C(Xs),C.precision=c;;){if(d=Bn(d.times(e),c),i=i.times(++A),y=g.plus(rf(d,i,c)),Fu(y.d).slice(0,c)===Fu(g.d).slice(0,c)){for(;P--;)g=Bn(g.times(g),c);return C.precision=I,t==null?(ti=!0,Bn(g,I)):g}g=y}}function Ri(e){for(var t=e.e*Yn,i=e.d[0];i>=10;i/=10)t++;return t}function kw(e,t,i){if(t>e.LN10.sd())throw ti=!0,i&&(e.precision=i),Error(Ul+"LN10 precision limit exceeded");return Bn(new e(e.LN10),t)}function _d(e){for(var t="";e--;)t+="0";return t}function K0(e,t){var i,a,d,g,y,c,A,P,C,I=1,B=10,G=e,Z=G.d,H=G.constructor,U=H.precision;if(G.s<1)throw Error(Ul+(G.s?"NaN":"-Infinity"));if(G.eq(Xs))return new H(0);if(t==null?(ti=!1,P=U):P=t,G.eq(10))return t==null&&(ti=!0),kw(H,P);if(P+=B,H.precision=P,i=Fu(Z),a=i.charAt(0),g=Ri(G),Math.abs(g)<15e14){for(;a<7&&a!=1||a==1&&i.charAt(1)>3;)G=G.times(e),i=Fu(G.d),a=i.charAt(0),I++;g=Ri(G),a>1?(G=new H("0."+i),g++):G=new H(a+"."+i.slice(1))}else return A=kw(H,P+2,U).times(g+""),G=K0(new H(a+"."+i.slice(1)),P-B).plus(A),H.precision=U,t==null?(ti=!0,Bn(G,U)):G;for(c=y=G=rf(G.minus(Xs),G.plus(Xs),P),C=Bn(G.times(G),P),d=3;;){if(y=Bn(y.times(C),P),A=c.plus(rf(y,new H(d),P)),Fu(A.d).slice(0,P)===Fu(c.d).slice(0,P))return c=c.times(2),g!==0&&(c=c.plus(kw(H,P+2,U).times(g+""))),c=rf(c,new H(I),P),H.precision=U,t==null?(ti=!0,Bn(c,U)):c;c=A,d+=2}}function $P(e,t){var i,a,d;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(i<0&&(i=a),i+=+t.slice(a+1),t=t.substring(0,a)):i<0&&(i=t.length),a=0;t.charCodeAt(a)===48;)++a;for(d=t.length;t.charCodeAt(d-1)===48;)--d;if(t=t.slice(a,d),t){if(d-=a,i=i-a-1,e.e=uy(i/Yn),e.d=[],a=(i+1)%Yn,i<0&&(a+=Yn),a<d){for(a&&e.d.push(+t.slice(0,a)),d-=Yn;a<d;)e.d.push(+t.slice(a,a+=Yn));t=t.slice(a),a=Yn-t.length}else a-=d;for(;a--;)t+="0";if(e.d.push(+t),ti&&(e.e>Ub||e.e<-Ub))throw Error(sT+i)}else e.s=0,e.e=0,e.d=[0];return e}function Bn(e,t,i){var a,d,g,y,c,A,P,C,I=e.d;for(y=1,g=I[0];g>=10;g/=10)y++;if(a=t-y,a<0)a+=Yn,d=t,P=I[C=0];else{if(C=Math.ceil((a+1)/Yn),g=I.length,C>=g)return e;for(P=g=I[C],y=1;g>=10;g/=10)y++;a%=Yn,d=a-Yn+y}if(i!==void 0&&(g=qp(10,y-d-1),c=P/g%10|0,A=t<0||I[C+1]!==void 0||P%g,A=i<4?(c||A)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||A||i==6&&(a>0?d>0?P/qp(10,y-d):0:I[C-1])%10&1||i==(e.s<0?8:7))),t<1||!I[0])return A?(g=Ri(e),I.length=1,t=t-g-1,I[0]=qp(10,(Yn-t%Yn)%Yn),e.e=uy(-t/Yn)||0):(I.length=1,I[0]=e.e=e.s=0),e;if(a==0?(I.length=C,g=1,C--):(I.length=C+1,g=qp(10,Yn-a),I[C]=d>0?(P/qp(10,y-d)%qp(10,d)|0)*g:0),A)for(;;)if(C==0){(I[0]+=g)==fa&&(I[0]=1,++e.e);break}else{if(I[C]+=g,I[C]!=fa)break;I[C--]=0,g=1}for(a=I.length;I[--a]===0;)I.pop();if(ti&&(e.e>Ub||e.e<-Ub))throw Error(sT+Ri(e));return e}function k3(e,t){var i,a,d,g,y,c,A,P,C,I,B=e.constructor,G=B.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new B(e),ti?Bn(t,G):t;if(A=e.d,I=t.d,a=t.e,P=e.e,A=A.slice(),y=P-a,y){for(C=y<0,C?(i=A,y=-y,c=I.length):(i=I,a=P,c=A.length),d=Math.max(Math.ceil(G/Yn),c)+2,y>d&&(y=d,i.length=1),i.reverse(),d=y;d--;)i.push(0);i.reverse()}else{for(d=A.length,c=I.length,C=d<c,C&&(c=d),d=0;d<c;d++)if(A[d]!=I[d]){C=A[d]<I[d];break}y=0}for(C&&(i=A,A=I,I=i,t.s=-t.s),c=A.length,d=I.length-c;d>0;--d)A[c++]=0;for(d=I.length;d>y;){if(A[--d]<I[d]){for(g=d;g&&A[--g]===0;)A[g]=fa-1;--A[g],A[d]+=fa}A[d]-=I[d]}for(;A[--c]===0;)A.pop();for(;A[0]===0;A.shift())--a;return A[0]?(t.d=A,t.e=a,ti?Bn(t,G):t):new B(0)}function im(e,t,i){var a,d=Ri(e),g=Fu(e.d),y=g.length;return t?(i&&(a=i-y)>0?g=g.charAt(0)+"."+g.slice(1)+_d(a):y>1&&(g=g.charAt(0)+"."+g.slice(1)),g=g+(d<0?"e":"e+")+d):d<0?(g="0."+_d(-d-1)+g,i&&(a=i-y)>0&&(g+=_d(a))):d>=y?(g+=_d(d+1-y),i&&(a=i-d-1)>0&&(g=g+"."+_d(a))):((a=d+1)<y&&(g=g.slice(0,a)+"."+g.slice(a)),i&&(a=i-y)>0&&(d+1===y&&(g+="."),g+=_d(a))),e.s<0?"-"+g:g}function ZP(e,t){if(e.length>t)return e.length=t,!0}function R3(e){var t,i,a;function d(g){var y=this;if(!(y instanceof d))return new d(g);if(y.constructor=d,g instanceof d){y.s=g.s,y.e=g.e,y.d=(g=g.d)?g.slice():g;return}if(typeof g=="number"){if(g*0!==0)throw Error(Kp+g);if(g>0)y.s=1;else if(g<0)g=-g,y.s=-1;else{y.s=0,y.e=0,y.d=[0];return}if(g===~~g&&g<1e7){y.e=0,y.d=[g];return}return $P(y,g.toString())}else if(typeof g!="string")throw Error(Kp+g);if(g.charCodeAt(0)===45?(g=g.slice(1),y.s=-1):y.s=1,I7.test(g))$P(y,g);else throw Error(Kp+g)}if(d.prototype=Ht,d.ROUND_UP=0,d.ROUND_DOWN=1,d.ROUND_CEIL=2,d.ROUND_FLOOR=3,d.ROUND_HALF_UP=4,d.ROUND_HALF_DOWN=5,d.ROUND_HALF_EVEN=6,d.ROUND_HALF_CEIL=7,d.ROUND_HALF_FLOOR=8,d.clone=R3,d.config=d.set=O7,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(i=a[t++])||(e[i]=this[i]);return d.config(e),d}function O7(e){if(!e||typeof e!="object")throw Error(Ul+"Object expected");var t,i,a,d=["precision",1,cy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<d.length;t+=3)if((a=e[i=d[t]])!==void 0)if(uy(a)===a&&a>=d[t+1]&&a<=d[t+2])this[i]=a;else throw Error(Kp+i+": "+a);if((a=e[i="LN10"])!==void 0)if(a==Math.LN10)this[i]=new this(a);else throw Error(Kp+i+": "+a);return this}var lT=R3(D7);Xs=new lT(1);const bn=lT;function L3(e){var t;return e===0?t=1:t=Math.floor(new bn(e).abs().log(10).toNumber())+1,t}function B3(e,t,i){for(var a=new bn(e),d=0,g=[];a.lt(t)&&d<1e5;)g.push(a.toNumber()),a=a.add(i),d++;return g}var j3=e=>{var[t,i]=e,[a,d]=[t,i];return t>i&&([a,d]=[i,t]),[a,d]},N3=(e,t,i)=>{if(e.lte(0))return new bn(0);var a=L3(e.toNumber()),d=new bn(10).pow(a),g=e.div(d),y=a!==1?.05:.1,c=new bn(Math.ceil(g.div(y).toNumber())).add(i).mul(y),A=c.mul(d);return t?new bn(A.toNumber()):new bn(Math.ceil(A.toNumber()))},z7=(e,t,i)=>{var a=new bn(1),d=new bn(e);if(!d.isint()&&i){var g=Math.abs(e);g<1?(a=new bn(10).pow(L3(e)-1),d=new bn(Math.floor(d.div(a).toNumber())).mul(a)):g>1&&(d=new bn(Math.floor(e)))}else e===0?d=new bn(Math.floor((t-1)/2)):i||(d=new bn(Math.floor(e)));for(var y=Math.floor((t-1)/2),c=[],A=0;A<t;A++)c.push(d.add(new bn(A-y).mul(a)).toNumber());return c},F3=function(t,i,a,d){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((i-t)/(a-1)))return{step:new bn(0),tickMin:new bn(0),tickMax:new bn(0)};var y=N3(new bn(i).sub(t).div(a-1),d,g),c;t<=0&&i>=0?c=new bn(0):(c=new bn(t).add(i).div(2),c=c.sub(new bn(c).mod(y)));var A=Math.ceil(c.sub(t).div(y).toNumber()),P=Math.ceil(new bn(i).sub(c).div(y).toNumber()),C=A+P+1;return C>a?F3(t,i,a,d,g+1):(C<a&&(P=i>0?P+(a-C):P,A=i>0?A:A+(a-C)),{step:y,tickMin:c.sub(new bn(A).mul(y)),tickMax:c.add(new bn(P).mul(y))})},k7=function(t){var[i,a]=t,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,y=Math.max(d,2),[c,A]=j3([i,a]);if(c===-1/0||A===1/0){var P=A===1/0?[c,...Array(d-1).fill(1/0)]:[...Array(d-1).fill(-1/0),A];return i>a?P.reverse():P}if(c===A)return z7(c,d,g);var{step:C,tickMin:I,tickMax:B}=F3(c,A,y,g,0),G=B3(I,B.add(new bn(.1).mul(C)),C);return i>a?G.reverse():G},R7=function(t,i){var[a,d]=t,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[y,c]=j3([a,d]);if(y===-1/0||c===1/0)return[a,d];if(y===c)return[y];var A=Math.max(i,2),P=N3(new bn(c).sub(y).div(A-1),g,0),C=[...B3(new bn(y),new bn(c),P),c];return g===!1&&(C=C.map(I=>Math.round(I))),a>d?C.reverse():C},L7=e=>e.rootProps.barCategoryGap,Cx=e=>e.rootProps.stackOffset,U3=e=>e.rootProps.reverseStackOrder,cT=e=>e.options.chartName,uT=e=>e.rootProps.syncId,V3=e=>e.rootProps.syncMethod,hT=e=>e.options.eventEmitter,B7=e=>e.rootProps.baseValue,Bo={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Up={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},zu={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Dx=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Ix(e,t,i){if(i!=="auto")return i;if(e!=null)return Yu(e,t)?"category":"number"}function HP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Vb(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(i),!0).forEach(function(a){j7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function j7(e,t,i){return(t=N7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function N7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YP={allowDataOverflow:Up.allowDataOverflow,allowDecimals:Up.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Up.angleAxisId,includeHidden:!1,name:void 0,reversed:Up.reversed,scale:Up.scale,tick:Up.tick,tickCount:void 0,ticks:void 0,type:Up.type,unit:void 0},XP={allowDataOverflow:zu.allowDataOverflow,allowDecimals:zu.allowDecimals,allowDuplicatedCategory:zu.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zu.radiusAxisId,includeHidden:zu.includeHidden,name:void 0,reversed:zu.reversed,scale:zu.scale,tick:zu.tick,tickCount:zu.tickCount,ticks:void 0,type:zu.type,unit:void 0},U7=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},fT=ut([U7,kO],(e,t)=>{var i;if(e!=null)return e;var a=(i=Ix(t,"angleAxis",YP.type))!==null&&i!==void 0?i:"category";return Vb(Vb({},YP),{},{type:a})}),V7=(e,t)=>e.polarAxis.radiusAxis[t],dT=ut([V7,kO],(e,t)=>{var i;if(e!=null)return e;var a=(i=Ix(t,"radiusAxis",XP.type))!==null&&i!==void 0?i:"category";return Vb(Vb({},XP),{},{type:a})}),Ox=e=>e.polarOptions,pT=ut([df,pf,Za],jN),G3=ut([Ox,pT],(e,t)=>{if(e!=null)return Ed(e.innerRadius,t,0)}),q3=ut([Ox,pT],(e,t)=>{if(e!=null)return Ed(e.outerRadius,t,t*.8)}),G7=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:i}=e;return[t,i]},$3=ut([Ox],G7);ut([fT,$3],Dx);var Z3=ut([pT,G3,q3],(e,t,i)=>{if(!(e==null||t==null||i==null))return[t,i]});ut([dT,Z3],Dx);var H3=ut([ri,Ox,G3,q3,df,pf],(e,t,i,a,d,g)=>{if(!(e!=="centric"&&e!=="radial"||t==null||i==null||a==null)){var{cx:y,cy:c,startAngle:A,endAngle:P}=t;return{cx:Ed(y,d,d/2),cy:Ed(c,g,g/2),innerRadius:i,outerRadius:a,startAngle:A,endAngle:P,clockWise:!1}}}),ga=(e,t)=>t,zx=(e,t,i)=>i;function mT(e){return e?.id}function Y3(e,t,i){var{chartData:a=[]}=t,{allowDuplicatedCategory:d,dataKey:g}=i,y=new Map;return e.forEach(c=>{var A,P=(A=c.data)!==null&&A!==void 0?A:a;if(!(P==null||P.length===0)){var C=mT(c);P.forEach((I,B)=>{var G=g==null||d?B:String($a(I,g,null)),Z=$a(I,c.dataKey,0),H;y.has(G)?H=y.get(G):H={},Object.assign(H,{[C]:Z}),y.set(G,H)})}}),Array.from(y.values())}function gT(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var kx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Rx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function q7(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return!1}var ya=e=>{var t=ri(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},hy=e=>e.tooltip.settings.axisId;function $7(e){if(e in I0)return I0[e]();var t="scale".concat(bS(e));if(t in I0)return I0[t]()}function WP(e){var t=e.ticks,i=e.bandwidth,a=e.range(),d=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(g){function y(){return g.apply(this,arguments)}return y.toString=function(){return g.toString()},y})(()=>d),rangeMin:()=>d[0],rangeMax:()=>d[1],isInRange(g){var y=d[0],c=d[1];return y<=c?g>=y&&g<=c:g>=c&&g<=y},bandwidth:i?()=>i.call(e):void 0,ticks:t?g=>t.call(e,g):void 0,map:(g,y)=>{var c=e(g);if(c!=null){if(e.bandwidth&&y!==null&&y!==void 0&&y.position){var A=e.bandwidth();switch(y.position){case"middle":c+=A/2;break;case"end":c+=A;break}}return c}}}}function KP(e,t,i){if(typeof e=="function")return WP(e.copy().domain(t).range(i));if(e!=null){var a=$7(e);if(a!=null)return a.domain(t).range(i),WP(a)}}var Z7=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!uf(t)){for(var i,a,d=0;d<t.length;d++){var g=t[d];Fr(g)&&((i===void 0||g<i)&&(i=g),(a===void 0||g>a)&&(a=g))}return i!==void 0&&a!==void 0?[i,a]:void 0}return t}default:return t}};function QP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Gb(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QP(Object(i),!0).forEach(function(a){H7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function H7(e,t,i){return(t=Y7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Y7(e){var t=X7(e,"string");return typeof t=="symbol"?t:t+""}function X7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F2=[0,"auto"],ua={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},X3=(e,t)=>e.cartesianAxis.xAxis[t],yf=(e,t)=>{var i=X3(e,t);return i??ua},ha={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:F2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:lv},W3=(e,t)=>e.cartesianAxis.yAxis[t],vf=(e,t)=>{var i=W3(e,t);return i??ha},W7={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},yT=(e,t)=>{var i=e.cartesianAxis.zAxis[t];return i??W7},No=(e,t,i)=>{switch(t){case"xAxis":return yf(e,i);case"yAxis":return vf(e,i);case"zAxis":return yT(e,i);case"angleAxis":return fT(e,i);case"radiusAxis":return dT(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},K7=(e,t,i)=>{switch(t){case"xAxis":return yf(e,i);case"yAxis":return vf(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},gv=(e,t,i)=>{switch(t){case"xAxis":return yf(e,i);case"yAxis":return vf(e,i);case"angleAxis":return fT(e,i);case"radiusAxis":return dT(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},K3=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Q3(e,t){return i=>{switch(e){case"xAxis":return"xAxisId"in i&&i.xAxisId===t;case"yAxis":return"yAxisId"in i&&i.yAxisId===t;case"zAxis":return"zAxisId"in i&&i.zAxisId===t;case"angleAxis":return"angleAxisId"in i&&i.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in i&&i.radiusAxisId===t;default:return!1}}}var J3=e=>e.graphicalItems.cartesianItems,Q7=ut([ga,zx],Q3),ez=(e,t,i)=>e.filter(i).filter(a=>t?.includeHidden===!0?!0:!a.hide),yv=ut([J3,No,Q7],ez,{memoizeOptions:{resultEqualityCheck:Rx}}),tz=ut([yv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(gT)),rz=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),J7=ut([yv],rz),nz=e=>e.map(t=>t.data).filter(Boolean).flat(1),eU=ut([yv],nz,{memoizeOptions:{resultEqualityCheck:Rx}}),iz=(e,t)=>{var{chartData:i=[],dataStartIndex:a,dataEndIndex:d}=t;return e.length>0?e:i.slice(a,d+1)},vT=ut([eU,C3],iz),az=(e,t,i)=>t?.dataKey!=null?e.map(a=>({value:$a(a,t.dataKey)})):i.length>0?i.map(a=>a.dataKey).flatMap(a=>e.map(d=>({value:$a(d,a)}))):e.map(a=>({value:a})),Lx=ut([vT,No,yv],az);function oz(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function nb(e){if($u(e)||e instanceof Date){var t=Number(e);if(Fr(t))return t}}function JP(e){if(Array.isArray(e)){var t=[nb(e[0]),nb(e[1])];return uf(t)?t:void 0}var i=nb(e);if(i!=null)return[i,i]}function hf(e){return e.map(nb).filter(ms)}function tU(e,t,i){return!i||typeof t!="number"||qu(t)?[]:i.length?hf(i.flatMap(a=>{var d=$a(e,a.dataKey),g,y;if(Array.isArray(d)?[g,y]=d:g=y=d,!(!Fr(g)||!Fr(y)))return[t-g,t+y]})):[]}var Yi=e=>{var t=ya(e),i=hy(e);return gv(e,t,i)},vv=ut([Yi],e=>e?.dataKey),rU=ut([tz,C3,Yi],Y3),sz=(e,t,i,a)=>{var d={},g=t.reduce((y,c)=>{if(c.stackId==null)return y;var A=y[c.stackId];return A==null&&(A=[]),A.push(c),y[c.stackId]=A,y},d);return Object.fromEntries(Object.entries(g).map(y=>{var[c,A]=y,P=a?[...A].reverse():A,C=P.map(mT);return[c,{stackedData:Pj(e,C,i),graphicalItems:P}]}))},lz=ut([rU,tz,Cx,U3],sz),cz=(e,t,i,a)=>{var{dataStartIndex:d,dataEndIndex:g}=t;if(a==null&&i!=="zAxis"){var y=Oj(e,d,g);if(!(y!=null&&y[0]===0&&y[1]===0))return y}},nU=ut([No],e=>e.allowDataOverflow),_T=e=>{var t;if(e==null||!("domain"in e))return F2;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var i=hf(e.ticks);return[Math.min(...i),Math.max(...i)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:F2},uz=ut([No],_T),hz=ut([uz,nU],D3),iU=ut([lz,gf,ga,hz],cz,{memoizeOptions:{resultEqualityCheck:kx}}),bT=e=>e.errorBars,aU=(e,t,i)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>oz(i,a)),qb=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var d=i.filter(Boolean);if(d.length!==0){var g=d.flat(),y=Math.min(...g),c=Math.max(...g);return[y,c]}},fz=(e,t,i,a,d)=>{var g,y;if(i.length>0&&e.forEach(c=>{i.forEach(A=>{var P,C,I=(P=a[A.id])===null||P===void 0?void 0:P.filter(oe=>oz(d,oe)),B=$a(c,(C=t.dataKey)!==null&&C!==void 0?C:A.dataKey),G=tU(c,B,I);if(G.length>=2){var Z=Math.min(...G),H=Math.max(...G);(g==null||Z<g)&&(g=Z),(y==null||H>y)&&(y=H)}var U=JP(B);U!=null&&(g=g==null?U[0]:Math.min(g,U[0]),y=y==null?U[1]:Math.max(y,U[1]))})}),t?.dataKey!=null&&e.forEach(c=>{var A=JP($a(c,t.dataKey));A!=null&&(g=g==null?A[0]:Math.min(g,A[0]),y=y==null?A[1]:Math.max(y,A[1]))}),Fr(g)&&Fr(y))return[g,y]},oU=ut([vT,No,J7,bT,ga],fz,{memoizeOptions:{resultEqualityCheck:kx}});function sU(e){var{value:t}=e;if($u(t)||t instanceof Date)return t}var lU=(e,t,i)=>{var a=e.map(sU).filter(d=>d!=null);return i&&(t.dataKey==null||t.allowDuplicatedCategory&&OI(a))?WO(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},dz=e=>e.referenceElements.dots,fy=(e,t,i)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===i:a.yAxisId===i),cU=ut([dz,ga,zx],fy),pz=e=>e.referenceElements.areas,uU=ut([pz,ga,zx],fy),mz=e=>e.referenceElements.lines,hU=ut([mz,ga,zx],fy),gz=(e,t)=>{if(e!=null){var i=hf(e.map(a=>t==="xAxis"?a.x:a.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},fU=ut(cU,ga,gz),yz=(e,t)=>{if(e!=null){var i=hf(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},dU=ut([uU,ga],yz);function pU(e){var t;if(e.x!=null)return hf([e.x]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return i==null||i.length===0?[]:hf(i)}function mU(e){var t;if(e.y!=null)return hf([e.y]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return i==null||i.length===0?[]:hf(i)}var vz=(e,t)=>{if(e!=null){var i=e.flatMap(a=>t==="xAxis"?pU(a):mU(a));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},gU=ut([hU,ga],vz),yU=ut(fU,gU,dU,(e,t,i)=>qb(e,i,t)),_z=(e,t,i,a,d,g,y,c)=>{if(i!=null)return i;var A=y==="vertical"&&c==="xAxis"||y==="horizontal"&&c==="yAxis",P=A?qb(a,g,d):qb(g,d);return C7(t,P,e.allowDataOverflow)},vU=ut([No,uz,hz,iU,oU,yU,ri,ga],_z,{memoizeOptions:{resultEqualityCheck:kx}}),_U=[0,1],bz=(e,t,i,a,d,g,y)=>{if(!((e==null||i==null||i.length===0)&&y===void 0)){var{dataKey:c,type:A}=e,P=Yu(t,g);if(P&&c==null){var C;return WO(0,(C=i?.length)!==null&&C!==void 0?C:0)}return A==="category"?lU(a,e,P):d==="expand"?_U:y}},xT=ut([No,ri,vT,Lx,Cx,ga,vU],bz);function bU(e){return e in I0}var xz=(e,t,i)=>{if(e!=null){var{scale:a,type:d}=e;if(a==="auto")return d==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!t)?"point":d==="category"?"band":"linear";if(typeof a=="string"){var g="scale".concat(bS(a));return bU(g)?g:"point"}}},dy=ut([No,K3,cT],xz);function wT(e,t,i,a){if(!(i==null||a==null))return typeof e.scale=="function"?KP(e.scale,i,a):KP(t,i,a)}var wz=(e,t,i)=>{var a=_T(t);if(!(i!=="auto"&&i!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&uf(e))return k7(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&uf(e))return R7(e,t.tickCount,t.allowDecimals)}},ST=ut([xT,gv,dy],wz),Sz=(e,t,i,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&uf(t)&&Array.isArray(i)&&i.length>0){var d,g,y=t[0],c=(d=i[0])!==null&&d!==void 0?d:0,A=t[1],P=(g=i[i.length-1])!==null&&g!==void 0?g:0;return[Math.min(y,c),Math.max(A,P)]}return t},xU=ut([No,xT,ST,ga],Sz),wU=ut(Lx,No,(e,t)=>{if(!(!t||t.type!=="number")){var i=1/0,a=Array.from(hf(e.map(I=>I.value))).sort((I,B)=>I-B),d=a[0],g=a[a.length-1];if(d==null||g==null)return 1/0;var y=g-d;if(y===0)return 1/0;for(var c=0;c<a.length-1;c++){var A=a[c],P=a[c+1];if(!(A==null||P==null)){var C=P-A;i=Math.min(i,C)}}return i/y}}),Tz=ut(wU,ri,L7,Za,(e,t,i,a,d)=>d,(e,t,i,a,d)=>{if(!Fr(e))return 0;var g=t==="vertical"?a.height:a.width;if(d==="gap")return e*g/2;if(d==="no-gap"){var y=Ed(i,e*g),c=e*g/2;return c-y-(c-y)/g*y}return 0}),SU=(e,t,i)=>{var a=yf(e,t);return a==null||typeof a.padding!="string"?0:Tz(e,"xAxis",t,i,a.padding)},TU=(e,t,i)=>{var a=vf(e,t);return a==null||typeof a.padding!="string"?0:Tz(e,"yAxis",t,i,a.padding)},EU=ut(yf,SU,(e,t)=>{var i,a;if(e==null)return{left:0,right:0};var{padding:d}=e;return typeof d=="string"?{left:t,right:t}:{left:((i=d.left)!==null&&i!==void 0?i:0)+t,right:((a=d.right)!==null&&a!==void 0?a:0)+t}}),AU=ut(vf,TU,(e,t)=>{var i,a;if(e==null)return{top:0,bottom:0};var{padding:d}=e;return typeof d=="string"?{top:t,bottom:t}:{top:((i=d.top)!==null&&i!==void 0?i:0)+t,bottom:((a=d.bottom)!==null&&a!==void 0?a:0)+t}}),MU=ut([Za,EU,vx,yx,(e,t,i)=>i],(e,t,i,a,d)=>{var{padding:g}=a;return d?[g.left,i.width-g.right]:[e.left+t.left,e.left+e.width-t.right]}),PU=ut([Za,ri,AU,vx,yx,(e,t,i)=>i],(e,t,i,a,d,g)=>{var{padding:y}=d;return g?[a.height-y.bottom,y.top]:t==="horizontal"?[e.top+e.height-i.bottom,e.top+i.top]:[e.top+i.top,e.top+e.height-i.bottom]}),_v=(e,t,i,a)=>{var d;switch(t){case"xAxis":return MU(e,i,a);case"yAxis":return PU(e,i,a);case"zAxis":return(d=yT(e,i))===null||d===void 0?void 0:d.range;case"angleAxis":return $3(e);case"radiusAxis":return Z3(e,i);default:return}},Ez=ut([No,_v],Dx),CU=ut([dy,xU],Z7),Bx=ut([No,dy,CU,Ez],wT);ut([yv,bT,ga],aU);function Az(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var jx=(e,t)=>t,Nx=(e,t,i)=>i,DU=ut(mx,jx,Nx,(e,t,i)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===i).sort(Az)),IU=ut(gx,jx,Nx,(e,t,i)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===i).sort(Az)),Mz=(e,t)=>({width:e.width,height:t.height}),OU=(e,t)=>{var i=typeof t.width=="number"?t.width:lv;return{width:i,height:e.height}},zU=ut(Za,yf,Mz),kU=(e,t,i)=>{switch(t){case"top":return e.top;case"bottom":return i-e.bottom;default:return 0}},RU=(e,t,i)=>{switch(t){case"left":return e.left;case"right":return i-e.right;default:return 0}},LU=ut(pf,Za,DU,jx,Nx,(e,t,i,a,d)=>{var g={},y;return i.forEach(c=>{var A=Mz(t,c);y==null&&(y=kU(t,a,e));var P=a==="top"&&!d||a==="bottom"&&d;g[c.id]=y-Number(P)*A.height,y+=(P?-1:1)*A.height}),g}),BU=ut(df,Za,IU,jx,Nx,(e,t,i,a,d)=>{var g={},y;return i.forEach(c=>{var A=OU(t,c);y==null&&(y=RU(t,a,e));var P=a==="left"&&!d||a==="right"&&d;g[c.id]=y-Number(P)*A.width,y+=(P?-1:1)*A.width}),g}),jU=(e,t)=>{var i=yf(e,t);if(i!=null)return LU(e,i.orientation,i.mirror)},NU=ut([Za,yf,jU,(e,t)=>t],(e,t,i,a)=>{if(t!=null){var d=i?.[a];return d==null?{x:e.left,y:0}:{x:e.left,y:d}}}),FU=(e,t)=>{var i=vf(e,t);if(i!=null)return BU(e,i.orientation,i.mirror)},UU=ut([Za,vf,FU,(e,t)=>t],(e,t,i,a)=>{if(t!=null){var d=i?.[a];return d==null?{x:0,y:e.top}:{x:d,y:e.top}}}),VU=ut(Za,vf,(e,t)=>{var i=typeof t.width=="number"?t.width:lv;return{width:i,height:e.height}}),Pz=(e,t,i,a)=>{if(i!=null){var{allowDuplicatedCategory:d,type:g,dataKey:y}=i,c=Yu(e,a),A=t.map(P=>P.value);if(y&&c&&g==="category"&&d&&OI(A))return A}},TT=ut([ri,Lx,No,ga],Pz),Cz=(e,t,i,a)=>{if(!(i==null||i.dataKey==null)){var{type:d,scale:g}=i,y=Yu(e,a);if(y&&(d==="number"||g!=="auto"))return t.map(c=>c.value)}},ET=ut([ri,Lx,gv,ga],Cz),eC=ut([ri,K7,dy,Bx,TT,ET,_v,ST,ga],(e,t,i,a,d,g,y,c,A)=>{if(t!=null){var P=Yu(e,A);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:A,categoricalDomain:g,duplicateDomain:d,isCategorical:P,niceTicks:c,range:y,realScaleType:i,scale:a}}}),GU=(e,t,i,a,d,g,y,c,A)=>{if(!(t==null||a==null)){var P=Yu(e,A),{type:C,ticks:I,tickCount:B}=t,G=i==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,Z=C==="category"&&a.bandwidth?a.bandwidth()/G:0;Z=A==="angleAxis"&&g!=null&&g.length>=2?Bl(g[0]-g[1])*2*Z:Z;var H=I||d;return H?H.map((U,oe)=>{var ce=y?y.indexOf(U):U,fe=a.map(ce);return Fr(fe)?{index:oe,coordinate:fe+Z,value:U,offset:Z}:null}).filter(ms):P&&c?c.map((U,oe)=>{var ce=a.map(U);return Fr(ce)?{coordinate:ce+Z,value:U,index:oe,offset:Z}:null}).filter(ms):a.ticks?a.ticks(B).map((U,oe)=>{var ce=a.map(U);return Fr(ce)?{coordinate:ce+Z,value:U,index:oe,offset:Z}:null}).filter(ms):a.domain().map((U,oe)=>{var ce=a.map(U);return Fr(ce)?{coordinate:ce+Z,value:y?y[U]:U,index:oe,offset:Z}:null}).filter(ms)}},Dz=ut([ri,gv,dy,Bx,ST,_v,TT,ET,ga],GU),qU=(e,t,i,a,d,g,y)=>{if(!(t==null||i==null||a==null||a[0]===a[1])){var c=Yu(e,y),{tickCount:A}=t,P=0;return P=y==="angleAxis"&&a?.length>=2?Bl(a[0]-a[1])*2*P:P,c&&g?g.map((C,I)=>{var B=i.map(C);return Fr(B)?{coordinate:B+P,value:C,index:I,offset:P}:null}).filter(ms):i.ticks?i.ticks(A).map((C,I)=>{var B=i.map(C);return Fr(B)?{coordinate:B+P,value:C,index:I,offset:P}:null}).filter(ms):i.domain().map((C,I)=>{var B=i.map(C);return Fr(B)?{coordinate:B+P,value:d?d[C]:C,index:I,offset:P}:null}).filter(ms)}},Iz=ut([ri,gv,Bx,_v,TT,ET,ga],qU),Oz=ut(No,Bx,(e,t)=>{if(!(e==null||t==null))return Gb(Gb({},e),{},{scale:t})}),$U=ut([No,dy,xT,Ez],wT);ut((e,t,i)=>yT(e,i),$U,(e,t)=>{if(!(e==null||t==null))return Gb(Gb({},e),{},{scale:t})});var ZU=ut([ri,mx,gx],(e,t,i)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return i.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),zz=e=>e.options.defaultTooltipEventType,kz=e=>e.options.validateTooltipEventTypes;function Rz(e,t,i){if(e==null)return t;var a=e?"axis":"item";return i==null?t:i.includes(a)?a:t}function AT(e,t){var i=zz(e),a=kz(e);return Rz(t,i,a)}function HU(e){return dr(t=>AT(t,e))}var Lz=(e,t)=>{var i,a=Number(t);if(!(qu(a)||t==null))return a>=0?e==null||(i=e[a])===null||i===void 0?void 0:i.value:void 0},YU=e=>e.tooltip.settings,xd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},XU={itemInteraction:{click:xd,hover:xd},axisInteraction:{click:xd,hover:xd},keyboardInteraction:xd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Bz=vs({name:"tooltip",initialState:XU,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:ei()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:i,next:a}=t.payload,d=Uc(e).tooltipItemPayloads.indexOf(i);d>-1&&(e.tooltipItemPayloads[d]=a)},prepare:ei()},removeTooltipEntrySettings:{reducer(e,t){var i=Uc(e).tooltipItemPayloads.indexOf(t.payload);i>-1&&e.tooltipItemPayloads.splice(i,1)},prepare:ei()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:WU,replaceTooltipEntrySettings:KU,removeTooltipEntrySettings:QU,setTooltipSettingsState:JU,setActiveMouseOverItemIndex:eV,mouseLeaveItem:LK,mouseLeaveChart:jz,setActiveClickItemIndex:BK,setMouseOverAxisIndex:Nz,setMouseClickAxisIndex:tV,setSyncInteraction:U2,setKeyboardInteraction:V2}=Bz.actions,rV=Bz.reducer;function tC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function F_(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(i),!0).forEach(function(a){nV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function nV(e,t,i){return(t=iV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iV(e){var t=aV(e,"string");return typeof t=="symbol"?t:t+""}function aV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oV(e,t,i){return t==="axis"?i==="click"?e.axisInteraction.click:e.axisInteraction.hover:i==="click"?e.itemInteraction.click:e.itemInteraction.hover}function sV(e){return e.index!=null}var Fz=(e,t,i,a)=>{if(t==null)return xd;var d=oV(e,t,i);if(d==null)return xd;if(d.active)return d;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var g=e.settings.active===!0;if(sV(d)){if(g)return F_(F_({},d),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return F_(F_({},xd),{},{coordinate:d.coordinate})};function lV(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var i=Number(e);return Number.isFinite(i)?i:void 0}function cV(e,t){var i=lV(e),a=t[0],d=t[1];if(i===void 0)return!1;var g=Math.min(a,d),y=Math.max(a,d);return i>=g&&i<=y}function uV(e,t,i){if(i==null||t==null)return!0;var a=$a(e,t);return a==null||!uf(i)?!0:cV(a,i)}var MT=(e,t,i,a)=>{var d=e?.index;if(d==null)return null;var g=Number(d);if(!Fr(g))return d;var y=0,c=1/0;t.length>0&&(c=t.length-1);var A=Math.max(y,Math.min(g,c)),P=t[A];return P==null||uV(P,i,a)?String(A):null},Uz=(e,t,i,a,d,g,y)=>{if(g!=null){var c=y[0],A=c?.getPosition(g);if(A!=null)return A;var P=d?.[Number(g)];if(P)return i==="horizontal"?{x:P.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:P.coordinate}}},Vz=(e,t,i,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var d;if(i==="hover"?d=e.itemInteraction.hover.graphicalItemId:d=e.itemInteraction.click.graphicalItemId,d==null&&a!=null){var g=e.tooltipItemPayloads[0];return g!=null?[g]:[]}return e.tooltipItemPayloads.filter(y=>{var c;return((c=y.settings)===null||c===void 0?void 0:c.graphicalItemId)===d})},Gz=e=>e.options.tooltipPayloadSearcher,py=e=>e.tooltip;function rC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function nC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(i),!0).forEach(function(a){hV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function hV(e,t,i){return(t=fV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fV(e){var t=dV(e,"string");return typeof t=="symbol"?t:t+""}function dV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pV(e,t){return e??t}var qz=(e,t,i,a,d,g,y)=>{if(!(t==null||g==null)){var{chartData:c,computedData:A,dataStartIndex:P,dataEndIndex:C}=i,I=[];return e.reduce((B,G)=>{var Z,{dataDefinedOnItem:H,settings:U}=G,oe=pV(H,c),ce=Array.isArray(oe)?wO(oe,P,C):oe,fe=(Z=U?.dataKey)!==null&&Z!==void 0?Z:a,ve=U?.nameKey,Ee;if(a&&Array.isArray(ce)&&!Array.isArray(ce[0])&&y==="axis"?Ee=zI(ce,a,d):Ee=g(ce,t,A,ve),Array.isArray(Ee))Ee.forEach(ze=>{var Ke=nC(nC({},U),{},{name:ze.name,unit:ze.unit,color:void 0,fill:void 0});B.push(iM({tooltipEntrySettings:Ke,dataKey:ze.dataKey,payload:ze.payload,value:$a(ze.payload,ze.dataKey),name:ze.name}))});else{var Me;B.push(iM({tooltipEntrySettings:U,dataKey:fe,payload:Ee,value:$a(Ee,fe),name:(Me=$a(Ee,ve))!==null&&Me!==void 0?Me:U?.name}))}return B},I)}},PT=ut([Yi,K3,cT],xz),mV=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),gV=ut([ya,hy],Q3),my=ut([mV,Yi,gV],ez,{memoizeOptions:{resultEqualityCheck:Rx}}),yV=ut([my],e=>e.filter(gT)),vV=ut([my],nz,{memoizeOptions:{resultEqualityCheck:Rx}}),gy=ut([vV,gf],iz),_V=ut([yV,gf,Yi],Y3),CT=ut([gy,Yi,my],az),$z=ut([Yi],_T),bV=ut([Yi],e=>e.allowDataOverflow),Zz=ut([$z,bV],D3),xV=ut([my],e=>e.filter(gT)),wV=ut([_V,xV,Cx,U3],sz),SV=ut([wV,gf,ya,Zz],cz),TV=ut([my],rz),EV=ut([gy,Yi,TV,bT,ya],fz,{memoizeOptions:{resultEqualityCheck:kx}}),AV=ut([dz,ya,hy],fy),MV=ut([AV,ya],gz),PV=ut([pz,ya,hy],fy),CV=ut([PV,ya],yz),DV=ut([mz,ya,hy],fy),IV=ut([DV,ya],vz),OV=ut([MV,IV,CV],qb),zV=ut([Yi,$z,Zz,SV,EV,OV,ri,ya],_z),bv=ut([Yi,ri,gy,CT,Cx,ya,zV],bz),kV=ut([bv,Yi,PT],wz),RV=ut([Yi,bv,kV,ya],Sz),Hz=e=>{var t=ya(e),i=hy(e),a=!1;return _v(e,t,i,a)},Yz=ut([Yi,Hz],Dx),Xz=ut([Yi,PT,RV,Yz],wT),LV=ut([ri,CT,Yi,ya],Pz),BV=ut([ri,CT,Yi,ya],Cz),jV=(e,t,i,a,d,g,y,c)=>{if(t){var{type:A}=t,P=Yu(e,c);if(a){var C=i==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,I=A==="category"&&a.bandwidth?a.bandwidth()/C:0;return I=c==="angleAxis"&&d!=null&&d?.length>=2?Bl(d[0]-d[1])*2*I:I,P&&y?y.map((B,G)=>{var Z=a.map(B);return Fr(Z)?{coordinate:Z+I,value:B,index:G,offset:I}:null}).filter(ms):a.domain().map((B,G)=>{var Z=a.map(B);return Fr(Z)?{coordinate:Z+I,value:g?g[B]:B,index:G,offset:I}:null}).filter(ms)}}},_f=ut([ri,Yi,PT,Xz,Hz,LV,BV,ya],jV),DT=ut([zz,kz,YU],(e,t,i)=>Rz(i.shared,e,t)),Wz=e=>e.tooltip.settings.trigger,IT=e=>e.tooltip.settings.defaultIndex,xv=ut([py,DT,Wz,IT],Fz),Q0=ut([xv,gy,vv,bv],MT),Kz=ut([_f,Q0],Lz),NV=ut([xv],e=>{if(e)return e.dataKey});ut([xv],e=>{if(e)return e.graphicalItemId});var Qz=ut([py,DT,Wz,IT],Vz),FV=ut([df,pf,ri,Za,_f,IT,Qz],Uz),UV=ut([xv,FV],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),VV=ut([xv],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),GV=ut([Qz,Q0,gf,vv,Kz,Gz,DT],qz),qV=ut([GV],e=>{if(e!=null){var t=e.map(i=>i.payload).filter(i=>i!=null);return Array.from(new Set(t))}});function iC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function aC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(i),!0).forEach(function(a){$V(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function $V(e,t,i){return(t=ZV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ZV(e){var t=HV(e,"string");return typeof t=="symbol"?t:t+""}function HV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YV=()=>dr(Yi),XV=()=>{var e=YV(),t=dr(_f),i=dr(Xz);return xb(!e||!i?void 0:aC(aC({},e),{},{scale:i}),t)};function oC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Rg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(i),!0).forEach(function(a){WV(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function WV(e,t,i){return(t=KV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function KV(e){var t=QV(e,"string");return typeof t=="symbol"?t:t+""}function QV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JV=(e,t,i,a)=>{var d=t.find(g=>g&&g.index===i);if(d){if(e==="horizontal")return{x:d.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:d.coordinate}}return{x:0,y:0}},eG=(e,t,i,a)=>{var d=t.find(P=>P&&P.index===i);if(d){if(e==="centric"){var g=d.coordinate,{radius:y}=a;return Rg(Rg(Rg({},a),qa(a.cx,a.cy,y,g)),{},{angle:g,radius:y})}var c=d.coordinate,{angle:A}=a;return Rg(Rg(Rg({},a),qa(a.cx,a.cy,c,A)),{},{angle:A,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function tG(e,t){var{chartX:i,chartY:a}=e;return i>=t.left&&i<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var Jz=(e,t,i,a,d)=>{var g,y=(g=t?.length)!==null&&g!==void 0?g:0;if(y<=1||e==null)return 0;if(a==="angleAxis"&&d!=null&&Math.abs(Math.abs(d[1]-d[0])-360)<=1e-6)for(var c=0;c<y;c++){var A,P,C,I,B,G=c>0?(A=i[c-1])===null||A===void 0?void 0:A.coordinate:(P=i[y-1])===null||P===void 0?void 0:P.coordinate,Z=(C=i[c])===null||C===void 0?void 0:C.coordinate,H=c>=y-1?(I=i[0])===null||I===void 0?void 0:I.coordinate:(B=i[c+1])===null||B===void 0?void 0:B.coordinate,U=void 0;if(!(G==null||Z==null||H==null))if(Bl(Z-G)!==Bl(H-Z)){var oe=[];if(Bl(H-Z)===Bl(d[1]-d[0])){U=H;var ce=Z+d[1]-d[0];oe[0]=Math.min(ce,(ce+G)/2),oe[1]=Math.max(ce,(ce+G)/2)}else{U=G;var fe=H+d[1]-d[0];oe[0]=Math.min(Z,(fe+Z)/2),oe[1]=Math.max(Z,(fe+Z)/2)}var ve=[Math.min(Z,(U+Z)/2),Math.max(Z,(U+Z)/2)];if(e>ve[0]&&e<=ve[1]||e>=oe[0]&&e<=oe[1]){var Ee;return(Ee=i[c])===null||Ee===void 0?void 0:Ee.index}}else{var Me=Math.min(G,H),ze=Math.max(G,H);if(e>(Me+Z)/2&&e<=(ze+Z)/2){var Ke;return(Ke=i[c])===null||Ke===void 0?void 0:Ke.index}}}else if(t)for(var mt=0;mt<y;mt++){var zt=t[mt];if(zt!=null){var Ge=t[mt+1],Te=t[mt-1];if(mt===0&&Ge!=null&&e<=(zt.coordinate+Ge.coordinate)/2||mt===y-1&&Te!=null&&e>(zt.coordinate+Te.coordinate)/2||mt>0&&mt<y-1&&Te!=null&&Ge!=null&&e>(zt.coordinate+Te.coordinate)/2&&e<=(zt.coordinate+Ge.coordinate)/2)return zt.index}}return-1},ek=()=>dr(cT),OT=(e,t)=>t,tk=(e,t,i)=>i,zT=(e,t,i,a)=>a,rG=ut(_f,e=>ax(e,t=>t.coordinate)),kT=ut([py,OT,tk,zT],Fz),RT=ut([kT,gy,vv,bv],MT),nG=(e,t,i)=>{if(t!=null){var a=py(e);return t==="axis"?i==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:i==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},rk=ut([py,OT,tk,zT],Vz),$b=ut([df,pf,ri,Za,_f,zT,rk],Uz),iG=ut([kT,$b],(e,t)=>{var i;return(i=e.coordinate)!==null&&i!==void 0?i:t}),nk=ut([_f,RT],Lz),aG=ut([rk,RT,gf,vv,nk,Gz,OT],qz),oG=ut([kT,RT],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),sG=(e,t,i,a,d,g,y)=>{if(!(!e||!i||!a||!d)&&tG(e,y)){var c=zj(e,t),A=Jz(c,g,d,i,a),P=JV(t,d,A,e);return{activeIndex:String(A),activeCoordinate:P}}},lG=(e,t,i,a,d,g,y)=>{if(!(!e||!a||!d||!g||!i)){var c=GN(e,i);if(c){var A=kj(c,t),P=Jz(A,y,g,a,d),C=eG(t,g,P,c);return{activeIndex:String(P),activeCoordinate:C}}}},cG=(e,t,i,a,d,g,y,c)=>{if(!(!e||!t||!a||!d||!g))return t==="horizontal"||t==="vertical"?sG(e,t,a,d,g,y,c):lG(e,t,i,a,d,g,y)},uG=ut(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,i)=>i,(e,t,i)=>{if(t!=null){var a=e[t];if(a!=null)return i?a.panoramaElement:a.element}}),hG=ut(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(Bo)),i=Array.from(new Set(t));return i.sort((a,d)=>a-d)},{memoizeOptions:{resultEqualityCheck:q7}});function sC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function lC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(i),!0).forEach(function(a){fG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function fG(e,t,i){return(t=dG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function dG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mG={},gG={zIndexMap:Object.values(Bo).reduce((e,t)=>lC(lC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),mG)},yG=new Set(Object.values(Bo));function vG(e){return yG.has(e)}var ik=vs({name:"zIndex",initialState:gG,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]?e.zIndexMap[i].consumers+=1:e.zIndexMap[i]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ei()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(e.zIndexMap[i].consumers-=1,e.zIndexMap[i].consumers<=0&&!vG(i)&&delete e.zIndexMap[i])},prepare:ei()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i,element:a,isPanorama:d}=t.payload;e.zIndexMap[i]?d?e.zIndexMap[i].panoramaElement=a:e.zIndexMap[i].element=a:e.zIndexMap[i]={consumers:0,element:d?void 0:a,panoramaElement:d?a:void 0}},prepare:ei()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(t.payload.isPanorama?e.zIndexMap[i].panoramaElement=void 0:e.zIndexMap[i].element=void 0)},prepare:ei()}}}),{registerZIndexPortal:_G,unregisterZIndexPortal:bG,registerZIndexPortalElement:xG,unregisterZIndexPortalElement:wG}=ik.actions,SG=ik.reducer;function bf(e){var{zIndex:t,children:i}=e,a=f8(),d=a&&t!==void 0&&t!==0,g=_s(),y=pa();X.useLayoutEffect(()=>d?(y(_G({zIndex:t})),()=>{y(bG({zIndex:t}))}):oy,[y,t,d]);var c=dr(A=>uG(A,t,g));return d?c?$D.createPortal(i,c):null:i}function G2(){return G2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},G2.apply(null,arguments)}function cC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function U_(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(i),!0).forEach(function(a){TG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function TG(e,t,i){return(t=EG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function EG(e){var t=AG(e,"string");return typeof t=="symbol"?t:t+""}function AG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MG(e){var{cursor:t,cursorComp:i,cursorProps:a}=e;return X.isValidElement(t)?X.cloneElement(t,a):X.createElement(i,a)}function PG(e){var t,{coordinate:i,payload:a,index:d,offset:g,tooltipAxisBandSize:y,layout:c,cursor:A,tooltipEventType:P,chartName:C}=e,I=i,B=a,G=d;if(!A||!I||C!=="ScatterChart"&&P!=="axis")return null;var Z,H,U;if(C==="ScatterChart")Z=I,H=eN,U=Bo.cursorLine;else if(C==="BarChart")Z=tN(c,I,g,y),H=zN,U=Bo.cursorRectangle;else if(c==="radial"&&kI(I)){var{cx:oe,cy:ce,radius:fe,startAngle:ve,endAngle:Ee}=YO(I);Z={cx:oe,cy:ce,startAngle:ve,endAngle:Ee,innerRadius:fe,outerRadius:fe},H=HN,U=Bo.cursorLine}else Z={points:YN(c,I,g)},H=rb,U=Bo.cursorLine;var Me=typeof A=="object"&&"className"in A?A.className:void 0,ze=U_(U_(U_(U_({stroke:"#ccc",pointerEvents:"none"},g),Z),tx(A)),{},{payload:B,payloadIndex:G,className:Wn("recharts-tooltip-cursor",Me)});return X.createElement(bf,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:U},X.createElement(MG,{cursor:A,cursorComp:H,cursorProps:ze}))}function CG(e){var t=XV(),i=IO(),a=sy(),d=ek();return t==null||i==null||a==null||d==null?null:X.createElement(PG,G2({},e,{offset:i,layout:a,tooltipAxisBandSize:t,chartName:d}))}var ak=X.createContext(null),DG=()=>X.useContext(ak),Rw={exports:{}},uC;function IG(){return uC||(uC=1,(function(e){var t=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function d(A,P,C){this.fn=A,this.context=P,this.once=C||!1}function g(A,P,C,I,B){if(typeof C!="function")throw new TypeError("The listener must be a function");var G=new d(C,I||A,B),Z=i?i+P:P;return A._events[Z]?A._events[Z].fn?A._events[Z]=[A._events[Z],G]:A._events[Z].push(G):(A._events[Z]=G,A._eventsCount++),A}function y(A,P){--A._eventsCount===0?A._events=new a:delete A._events[P]}function c(){this._events=new a,this._eventsCount=0}c.prototype.eventNames=function(){var P=[],C,I;if(this._eventsCount===0)return P;for(I in C=this._events)t.call(C,I)&&P.push(i?I.slice(1):I);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(C)):P},c.prototype.listeners=function(P){var C=i?i+P:P,I=this._events[C];if(!I)return[];if(I.fn)return[I.fn];for(var B=0,G=I.length,Z=new Array(G);B<G;B++)Z[B]=I[B].fn;return Z},c.prototype.listenerCount=function(P){var C=i?i+P:P,I=this._events[C];return I?I.fn?1:I.length:0},c.prototype.emit=function(P,C,I,B,G,Z){var H=i?i+P:P;if(!this._events[H])return!1;var U=this._events[H],oe=arguments.length,ce,fe;if(U.fn){switch(U.once&&this.removeListener(P,U.fn,void 0,!0),oe){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,C),!0;case 3:return U.fn.call(U.context,C,I),!0;case 4:return U.fn.call(U.context,C,I,B),!0;case 5:return U.fn.call(U.context,C,I,B,G),!0;case 6:return U.fn.call(U.context,C,I,B,G,Z),!0}for(fe=1,ce=new Array(oe-1);fe<oe;fe++)ce[fe-1]=arguments[fe];U.fn.apply(U.context,ce)}else{var ve=U.length,Ee;for(fe=0;fe<ve;fe++)switch(U[fe].once&&this.removeListener(P,U[fe].fn,void 0,!0),oe){case 1:U[fe].fn.call(U[fe].context);break;case 2:U[fe].fn.call(U[fe].context,C);break;case 3:U[fe].fn.call(U[fe].context,C,I);break;case 4:U[fe].fn.call(U[fe].context,C,I,B);break;default:if(!ce)for(Ee=1,ce=new Array(oe-1);Ee<oe;Ee++)ce[Ee-1]=arguments[Ee];U[fe].fn.apply(U[fe].context,ce)}}return!0},c.prototype.on=function(P,C,I){return g(this,P,C,I,!1)},c.prototype.once=function(P,C,I){return g(this,P,C,I,!0)},c.prototype.removeListener=function(P,C,I,B){var G=i?i+P:P;if(!this._events[G])return this;if(!C)return y(this,G),this;var Z=this._events[G];if(Z.fn)Z.fn===C&&(!B||Z.once)&&(!I||Z.context===I)&&y(this,G);else{for(var H=0,U=[],oe=Z.length;H<oe;H++)(Z[H].fn!==C||B&&!Z[H].once||I&&Z[H].context!==I)&&U.push(Z[H]);U.length?this._events[G]=U.length===1?U[0]:U:y(this,G)}return this},c.prototype.removeAllListeners=function(P){var C;return P?(C=i?i+P:P,this._events[C]&&y(this,C)):(this._events=new a,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c})(Rw)),Rw.exports}var OG=IG();const zG=Vl(OG);var J0=new zG,q2="recharts.syncEvent.tooltip",hC="recharts.syncEvent.brush",kG=(e,t)=>{if(t&&Array.isArray(e)){var i=Number.parseInt(t,10);if(!qu(i))return e[i]}},RG={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},ok=vs({name:"options",initialState:RG,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),LG=ok.reducer,{createEventEmitter:BG}=ok.actions;function jG(e){return e.tooltip.syncInteraction}var NG={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},sk=vs({name:"chartData",initialState:NG,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:i,endIndex:a}=t.payload;i!=null&&(e.dataStartIndex=i),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:fC,setDataStartEndIndexes:FG,setComputedData:jK}=sk.actions,UG=sk.reducer,VG=["x","y"];function dC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Lg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(i),!0).forEach(function(a){GG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function GG(e,t,i){return(t=qG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qG(e){var t=$G(e,"string");return typeof t=="symbol"?t:t+""}function $G(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZG(e,t){if(e==null)return{};var i,a,d=HG(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function HG(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function YG(){var e=dr(uT),t=dr(hT),i=pa(),a=dr(V3),d=dr(_f),g=sy(),y=_x(),c=dr(A=>A.rootProps.className);X.useEffect(()=>{if(e==null)return oy;var A=(P,C,I)=>{if(t!==I&&e===P){if(a==="index"){var B;if(y&&C!==null&&C!==void 0&&(B=C.payload)!==null&&B!==void 0&&B.coordinate&&C.payload.sourceViewBox){var G=C.payload.coordinate,{x:Z,y:H}=G,U=ZG(G,VG),{x:oe,y:ce,width:fe,height:ve}=C.payload.sourceViewBox,Ee=Lg(Lg({},U),{},{x:y.x+(fe?(Z-oe)/fe:0)*y.width,y:y.y+(ve?(H-ce)/ve:0)*y.height});i(Lg(Lg({},C),{},{payload:Lg(Lg({},C.payload),{},{coordinate:Ee})}))}else i(C);return}if(d!=null){var Me;if(typeof a=="function"){var ze={activeTooltipIndex:C.payload.index==null?void 0:Number(C.payload.index),isTooltipActive:C.payload.active,activeIndex:C.payload.index==null?void 0:Number(C.payload.index),activeLabel:C.payload.label,activeDataKey:C.payload.dataKey,activeCoordinate:C.payload.coordinate},Ke=a(d,ze);Me=d[Ke]}else a==="value"&&(Me=d.find(Ve=>String(Ve.value)===C.payload.label));var{coordinate:mt}=C.payload;if(Me==null||C.payload.active===!1||mt==null||y==null){i(U2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:zt,y:Ge}=mt,Te=Math.min(zt,y.x+y.width),dt=Math.min(Ge,y.y+y.height),It={x:g==="horizontal"?Me.coordinate:Te,y:g==="horizontal"?dt:Me.coordinate},Rt=U2({active:C.payload.active,coordinate:It,dataKey:C.payload.dataKey,index:String(Me.index),label:C.payload.label,sourceViewBox:C.payload.sourceViewBox,graphicalItemId:C.payload.graphicalItemId});i(Rt)}}};return J0.on(q2,A),()=>{J0.off(q2,A)}},[c,i,t,e,a,d,g,y])}function XG(){var e=dr(uT),t=dr(hT),i=pa();X.useEffect(()=>{if(e==null)return oy;var a=(d,g,y)=>{t!==y&&e===d&&i(FG(g))};return J0.on(hC,a),()=>{J0.off(hC,a)}},[i,t,e])}function WG(){var e=pa();X.useEffect(()=>{e(BG())},[e]),YG(),XG()}function KG(e,t,i,a,d,g){var y=dr(G=>nG(G,e,t)),c=dr(hT),A=dr(uT),P=dr(V3),C=dr(jG),I=C?.active,B=_x();X.useEffect(()=>{if(!I&&A!=null&&c!=null){var G=U2({active:g,coordinate:i,dataKey:y,index:d,label:typeof a=="number"?String(a):a,sourceViewBox:B,graphicalItemId:void 0});J0.emit(q2,A,G,c)}},[I,i,y,d,a,c,A,P,g,B])}function pC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function mC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(i),!0).forEach(function(a){QG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function QG(e,t,i){return(t=JG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function JG(e){var t=eq(e,"string");return typeof t=="symbol"?t:t+""}function eq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tq(e){return e.dataKey}function rq(e,t){return X.isValidElement(e)?X.cloneElement(e,t):typeof e=="function"?X.createElement(e,t):X.createElement(z8,t)}var gC=[],nq={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function yC(e){var t,i,a=el(e,nq),{active:d,allowEscapeViewBox:g,animationDuration:y,animationEasing:c,content:A,filterNull:P,isAnimationActive:C,offset:I,payloadUniqBy:B,position:G,reverseDirection:Z,useTranslate3d:H,wrapperStyle:U,cursor:oe,shared:ce,trigger:fe,defaultIndex:ve,portal:Ee,axisId:Me}=a,ze=pa(),Ke=typeof ve=="number"?String(ve):ve;X.useEffect(()=>{ze(JU({shared:ce,trigger:fe,axisId:Me,active:d,defaultIndex:Ke}))},[ze,ce,fe,Me,d,Ke]);var mt=_x(),zt=VO(),Ge=HU(ce),{activeIndex:Te,isActive:dt}=(t=dr(Ft=>oG(Ft,Ge,fe,Ke)))!==null&&t!==void 0?t:{},It=dr(Ft=>aG(Ft,Ge,fe,Ke)),Rt=dr(Ft=>nk(Ft,Ge,fe,Ke)),Ve=dr(Ft=>iG(Ft,Ge,fe,Ke)),it=It,Mt=DG(),Be=(i=d??dt)!==null&&i!==void 0?i:!1,[yt,Ae]=bB([it,Be]),qe=Ge==="axis"?Rt:void 0;KG(Ge,fe,Ve,qe,Te,Be);var ct=Ee??Mt;if(ct==null||mt==null||Ge==null)return null;var wt=it??gC;Be||(wt=gC),P&&wt.length&&(wt=ZL(wt.filter(Ft=>Ft.value!=null&&(Ft.hide!==!0||a.includeHidden)),B,tq));var jt=wt.length>0,$t=X.createElement(F8,{allowEscapeViewBox:g,animationDuration:y,animationEasing:c,isAnimationActive:C,active:Be,coordinate:Ve,hasPayload:jt,offset:I,position:G,reverseDirection:Z,useTranslate3d:H,viewBox:mt,wrapperStyle:U,lastBoundingBox:yt,innerRef:Ae,hasPortalFromProps:!!Ee},rq(A,mC(mC({},a),{},{payload:wt,label:qe,active:Be,activeIndex:Te,coordinate:Ve,accessibilityLayer:zt})));return X.createElement(X.Fragment,null,$D.createPortal($t,ct),Be&&X.createElement(CG,{cursor:oe,tooltipEventType:Ge,coordinate:Ve,payload:wt,index:Te}))}function iq(e,t,i){return(t=aq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function aq(e){var t=oq(e,"string");return typeof t=="symbol"?t:t+""}function oq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sq{constructor(t){iq(this,"cache",new Map),this.maxSize=t}get(t){var i=this.cache.get(t);return i!==void 0&&(this.cache.delete(t),this.cache.set(t,i)),i}set(t,i){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,i)}clear(){this.cache.clear()}size(){return this.cache.size}}function vC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function lq(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(i),!0).forEach(function(a){cq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function cq(e,t,i){return(t=uq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function uq(e){var t=hq(e,"string");return typeof t=="symbol"?t:t+""}function hq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fq={cacheSize:2e3,enableCache:!0},lk=lq({},fq),_C=new sq(lk.cacheSize),dq={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},bC="recharts_measurement_span";function pq(e,t){var i=t.fontSize||"",a=t.fontFamily||"",d=t.fontWeight||"",g=t.fontStyle||"",y=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(i,"|").concat(a,"|").concat(d,"|").concat(g,"|").concat(y,"|").concat(c)}var xC=(e,t)=>{try{var i=document.getElementById(bC);i||(i=document.createElement("span"),i.setAttribute("id",bC),i.setAttribute("aria-hidden","true"),document.body.appendChild(i)),Object.assign(i.style,dq,t),i.textContent="".concat(e);var a=i.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},L0=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||hv.isSsr)return{width:0,height:0};if(!lk.enableCache)return xC(t,i);var a=pq(t,i),d=_C.get(a);if(d)return d;var g=xC(t,i);return _C.set(a,g),g},ck;function mq(e,t,i){return(t=gq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gq(e){var t=yq(e,"string");return typeof t=="symbol"?t:t+""}function yq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,vq=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,_q=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},xq=["cm","mm","pt","pc","in","Q","px"];function wq(e){return xq.includes(e)}var qg="NaN";function Sq(e,t){return e*bq[t]}class Ga{static parse(t){var i,[,a,d]=(i=_q.exec(t))!==null&&i!==void 0?i:[];return a==null?Ga.NaN:new Ga(parseFloat(a),d??"")}constructor(t,i){this.num=t,this.unit=i,this.num=t,this.unit=i,qu(t)&&(this.unit=""),i!==""&&!vq.test(i)&&(this.num=NaN,this.unit=""),wq(i)&&(this.num=Sq(t,i),this.unit="px")}add(t){return this.unit!==t.unit?new Ga(NaN,""):new Ga(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ga(NaN,""):new Ga(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ga(NaN,""):new Ga(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ga(NaN,""):new Ga(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qu(this.num)}}ck=Ga;mq(Ga,"NaN",new ck(NaN,""));function uk(e){if(e==null||e.includes(qg))return qg;for(var t=e;t.includes("*")||t.includes("/");){var i,[,a,d,g]=(i=wC.exec(t))!==null&&i!==void 0?i:[],y=Ga.parse(a??""),c=Ga.parse(g??""),A=d==="*"?y.multiply(c):y.divide(c);if(A.isNaN())return qg;t=t.replace(wC,A.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var P,[,C,I,B]=(P=SC.exec(t))!==null&&P!==void 0?P:[],G=Ga.parse(C??""),Z=Ga.parse(B??""),H=I==="+"?G.add(Z):G.subtract(Z);if(H.isNaN())return qg;t=t.replace(SC,H.toString())}return t}var TC=/\(([^()]*)\)/;function Tq(e){for(var t=e,i;(i=TC.exec(t))!=null;){var[,a]=i;t=t.replace(TC,uk(a))}return t}function Eq(e){var t=e.replace(/\s+/g,"");return t=Tq(t),t=uk(t),t}function Aq(e){try{return Eq(e)}catch{return qg}}function Lw(e){var t=Aq(e.slice(5,-1));return t===qg?"":t}var Mq=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Pq=["dx","dy","angle","className","breakAll"];function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},$2.apply(null,arguments)}function EC(e,t){if(e==null)return{};var i,a,d=Cq(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function Cq(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var hk=/[ \f\n\r\t\v\u2028\u2029]+/,fk=e=>{var{children:t,breakAll:i,style:a}=e;try{var d=[];yo(t)||(i?d=t.toString().split(""):d=t.toString().split(hk));var g=d.map(c=>({word:c,width:L0(c,a).width})),y=i?0:L0("",a).width;return{wordsWithComputedWidth:g,spaceWidth:y}}catch{return null}};function Dq(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var dk=(e,t,i,a)=>e.reduce((d,g)=>{var{word:y,width:c}=g,A=d[d.length-1];if(A&&c!=null&&(t==null||a||A.width+c+i<Number(t)))A.words.push(y),A.width+=c+i;else{var P={words:[y],width:c};d.push(P)}return d},[]),pk=e=>e.reduce((t,i)=>t.width>i.width?t:i),Iq="",AC=(e,t,i,a,d,g,y,c)=>{var A=e.slice(0,t),P=fk({breakAll:i,style:a,children:A+Iq});if(!P)return[!1,[]];var C=dk(P.wordsWithComputedWidth,g,y,c),I=C.length>d||pk(C).width>Number(g);return[I,C]},Oq=(e,t,i,a,d)=>{var{maxLines:g,children:y,style:c,breakAll:A}=e,P=Jt(g),C=String(y),I=dk(t,a,i,d);if(!P||d)return I;var B=I.length>g||pk(I).width>Number(a);if(!B)return I;for(var G=0,Z=C.length-1,H=0,U;G<=Z&&H<=C.length-1;){var oe=Math.floor((G+Z)/2),ce=oe-1,[fe,ve]=AC(C,ce,A,c,g,a,i,d),[Ee]=AC(C,oe,A,c,g,a,i,d);if(!fe&&!Ee&&(G=oe+1),fe&&Ee&&(Z=oe-1),!fe&&Ee){U=ve;break}H++}return U||I},MC=e=>{var t=yo(e)?[]:e.toString().split(hk);return[{words:t,width:void 0}]},zq=e=>{var{width:t,scaleToFit:i,children:a,style:d,breakAll:g,maxLines:y}=e;if((t||i)&&!hv.isSsr){var c,A,P=fk({breakAll:g,children:a,style:d});if(P){var{wordsWithComputedWidth:C,spaceWidth:I}=P;c=C,A=I}else return MC(a);return Oq({breakAll:g,children:a,maxLines:y,style:d},c,A,t,!!i)}return MC(a)},mk="#808080",kq={angle:0,breakAll:!1,capHeight:"0.71em",fill:mk,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},LT=X.forwardRef((e,t)=>{var i=el(e,kq),{x:a,y:d,lineHeight:g,capHeight:y,fill:c,scaleToFit:A,textAnchor:P,verticalAnchor:C}=i,I=EC(i,Mq),B=X.useMemo(()=>zq({breakAll:I.breakAll,children:I.children,maxLines:I.maxLines,scaleToFit:A,style:I.style,width:I.width}),[I.breakAll,I.children,I.maxLines,A,I.style,I.width]),{dx:G,dy:Z,angle:H,className:U,breakAll:oe}=I,ce=EC(I,Pq);if(!$u(a)||!$u(d)||B.length===0)return null;var fe=Number(a)+(Jt(G)?G:0),ve=Number(d)+(Jt(Z)?Z:0);if(!Fr(fe)||!Fr(ve))return null;var Ee;switch(C){case"start":Ee=Lw("calc(".concat(y,")"));break;case"middle":Ee=Lw("calc(".concat((B.length-1)/2," * -").concat(g," + (").concat(y," / 2))"));break;default:Ee=Lw("calc(".concat(B.length-1," * -").concat(g,")"));break}var Me=[],ze=B[0];if(A&&ze!=null){var Ke=ze.width,{width:mt}=I;Me.push("scale(".concat(Jt(mt)&&Jt(Ke)?mt/Ke:1,")"))}return H&&Me.push("rotate(".concat(H,", ").concat(fe,", ").concat(ve,")")),Me.length&&(ce.transform=Me.join(" ")),X.createElement("text",$2({},Nl(ce),{ref:t,x:fe,y:ve,className:Wn("recharts-text",U),textAnchor:P,fill:c.includes("url")?mk:c}),B.map((zt,Ge)=>{var Te=zt.words.join(oe?"":" ");return X.createElement("tspan",{x:fe,dy:Ge===0?Ee:g,key:"".concat(Te,"-").concat(Ge)},Te)}))});LT.displayName="Text";function PC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function ku(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(i),!0).forEach(function(a){Rq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):PC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Rq(e,t,i){return(t=Lq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Lq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jq=e=>{var{viewBox:t,position:i,offset:a=0,parentViewBox:d}=e,{x:g,y,height:c,upperWidth:A,lowerWidth:P}=OS(t),C=g,I=g+(A-P)/2,B=(C+I)/2,G=(A+P)/2,Z=C+A/2,H=c>=0?1:-1,U=H*a,oe=H>0?"end":"start",ce=H>0?"start":"end",fe=A>=0?1:-1,ve=fe*a,Ee=fe>0?"end":"start",Me=fe>0?"start":"end",ze=d;if(i==="top"){var Ke={x:C+A/2,y:y-U,horizontalAnchor:"middle",verticalAnchor:oe};return ze&&(Ke.height=Math.max(y-ze.y,0),Ke.width=A),Ke}if(i==="bottom"){var mt={x:I+P/2,y:y+c+U,horizontalAnchor:"middle",verticalAnchor:ce};return ze&&(mt.height=Math.max(ze.y+ze.height-(y+c),0),mt.width=P),mt}if(i==="left"){var zt={x:B-ve,y:y+c/2,horizontalAnchor:Ee,verticalAnchor:"middle"};return ze&&(zt.width=Math.max(zt.x-ze.x,0),zt.height=c),zt}if(i==="right"){var Ge={x:B+G+ve,y:y+c/2,horizontalAnchor:Me,verticalAnchor:"middle"};return ze&&(Ge.width=Math.max(ze.x+ze.width-Ge.x,0),Ge.height=c),Ge}var Te=ze?{width:G,height:c}:{};return i==="insideLeft"?ku({x:B+ve,y:y+c/2,horizontalAnchor:Me,verticalAnchor:"middle"},Te):i==="insideRight"?ku({x:B+G-ve,y:y+c/2,horizontalAnchor:Ee,verticalAnchor:"middle"},Te):i==="insideTop"?ku({x:C+A/2,y:y+U,horizontalAnchor:"middle",verticalAnchor:ce},Te):i==="insideBottom"?ku({x:I+P/2,y:y+c-U,horizontalAnchor:"middle",verticalAnchor:oe},Te):i==="insideTopLeft"?ku({x:C+ve,y:y+U,horizontalAnchor:Me,verticalAnchor:ce},Te):i==="insideTopRight"?ku({x:C+A-ve,y:y+U,horizontalAnchor:Ee,verticalAnchor:ce},Te):i==="insideBottomLeft"?ku({x:I+ve,y:y+c-U,horizontalAnchor:Me,verticalAnchor:oe},Te):i==="insideBottomRight"?ku({x:I+P-ve,y:y+c-U,horizontalAnchor:Ee,verticalAnchor:oe},Te):i&&typeof i=="object"&&(Jt(i.x)||em(i.x))&&(Jt(i.y)||em(i.y))?ku({x:g+Ed(i.x,G),y:y+Ed(i.y,c),horizontalAnchor:"end",verticalAnchor:"end"},Te):ku({x:Z,y:y+c/2,horizontalAnchor:"middle",verticalAnchor:"middle"},Te)},Nq=["labelRef"],Fq=["content"];function CC(e,t){if(e==null)return{};var i,a,d=Uq(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function Uq(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function DC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function O0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(i),!0).forEach(function(a){Vq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Vq(e,t,i){return(t=Gq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Gq(e){var t=qq(e,"string");return typeof t=="symbol"?t:t+""}function qq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qh(){return Qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Qh.apply(null,arguments)}var gk=X.createContext(null),$q=e=>{var{x:t,y:i,upperWidth:a,lowerWidth:d,width:g,height:y,children:c}=e,A=X.useMemo(()=>({x:t,y:i,upperWidth:a,lowerWidth:d,width:g,height:y}),[t,i,a,d,g,y]);return X.createElement(gk.Provider,{value:A},c)},yk=()=>{var e=X.useContext(gk),t=_x();return e||(t?OS(t):void 0)},Zq=X.createContext(null),Hq=()=>{var e=X.useContext(Zq),t=dr(H3);return e||t},Yq=e=>{var{value:t,formatter:i}=e,a=yo(e.children)?t:e.children;return typeof i=="function"?i(a):a},BT=e=>e!=null&&typeof e=="function",Xq=(e,t)=>{var i=Bl(t-e),a=Math.min(Math.abs(t-e),360);return i*a},Wq=(e,t,i,a,d)=>{var{offset:g,className:y}=e,{cx:c,cy:A,innerRadius:P,outerRadius:C,startAngle:I,endAngle:B,clockWise:G}=d,Z=(P+C)/2,H=Xq(I,B),U=H>=0?1:-1,oe,ce;switch(t){case"insideStart":oe=I+U*g,ce=G;break;case"insideEnd":oe=B-U*g,ce=!G;break;case"end":oe=B+U*g,ce=G;break;default:throw new Error("Unsupported position ".concat(t))}ce=H<=0?ce:!ce;var fe=qa(c,A,Z,oe),ve=qa(c,A,Z,oe+(ce?1:-1)*359),Ee="M".concat(fe.x,",").concat(fe.y,`
    A`).concat(Z,",").concat(Z,",0,1,").concat(ce?0:1,`,
    `).concat(ve.x,",").concat(ve.y),Me=yo(e.id)?N0("recharts-radial-line-"):e.id;return X.createElement("text",Qh({},a,{dominantBaseline:"central",className:Wn("recharts-radial-bar-label",y)}),X.createElement("defs",null,X.createElement("path",{id:Me,d:Ee})),X.createElement("textPath",{xlinkHref:"#".concat(Me)},i))},Kq=(e,t,i)=>{var{cx:a,cy:d,innerRadius:g,outerRadius:y,startAngle:c,endAngle:A}=e,P=(c+A)/2;if(i==="outside"){var{x:C,y:I}=qa(a,d,y+t,P);return{x:C,y:I,textAnchor:C>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"end"};var B=(g+y)/2,{x:G,y:Z}=qa(a,d,B,P);return{x:G,y:Z,textAnchor:"middle",verticalAnchor:"middle"}},ib=e=>e!=null&&"cx"in e&&Jt(e.cx),Qq={angle:0,offset:5,zIndex:Bo.label,position:"middle",textBreakAll:!1};function Jq(e){if(!ib(e))return e;var{cx:t,cy:i,outerRadius:a}=e,d=a*2;return{x:t-a,y:i-a,width:d,upperWidth:d,lowerWidth:d,height:d}}function bd(e){var t=el(e,Qq),{viewBox:i,parentViewBox:a,position:d,value:g,children:y,content:c,className:A="",textBreakAll:P,labelRef:C}=t,I=Hq(),B=yk(),G=d==="center"?B:I??B,Z,H,U;i==null?Z=G:ib(i)?Z=i:Z=OS(i);var oe=Jq(Z);if(!Z||yo(g)&&yo(y)&&!X.isValidElement(c)&&typeof c!="function")return null;var ce=O0(O0({},t),{},{viewBox:Z});if(X.isValidElement(c)){var{labelRef:fe}=ce,ve=CC(ce,Nq);return X.cloneElement(c,ve)}if(typeof c=="function"){var{content:Ee}=ce,Me=CC(ce,Fq);if(H=X.createElement(c,Me),X.isValidElement(H))return H}else H=Yq(t);var ze=Nl(t);if(ib(Z)){if(d==="insideStart"||d==="insideEnd"||d==="end")return Wq(t,d,H,ze,Z);U=Kq(Z,t.offset,t.position)}else{if(!oe)return null;var Ke=jq({viewBox:oe,position:d,offset:t.offset,parentViewBox:ib(a)?void 0:a});U=O0(O0({x:Ke.x,y:Ke.y,textAnchor:Ke.horizontalAnchor,verticalAnchor:Ke.verticalAnchor},Ke.width!==void 0?{width:Ke.width}:{}),Ke.height!==void 0?{height:Ke.height}:{})}return X.createElement(bf,{zIndex:t.zIndex},X.createElement(LT,Qh({ref:C,className:Wn("recharts-label",A)},ze,U,{textAnchor:Dq(ze.textAnchor)?ze.textAnchor:U.textAnchor,breakAll:P}),H))}bd.displayName="Label";var e$=(e,t,i)=>{if(!e)return null;var a={viewBox:t,labelRef:i};return e===!0?X.createElement(bd,Qh({key:"label-implicit"},a)):$u(e)?X.createElement(bd,Qh({key:"label-implicit",value:e},a)):X.isValidElement(e)?e.type===bd?X.cloneElement(e,O0({key:"label-implicit"},a)):X.createElement(bd,Qh({key:"label-implicit",content:e},a)):BT(e)?X.createElement(bd,Qh({key:"label-implicit",content:e},a)):e&&typeof e=="object"?X.createElement(bd,Qh({},e,{key:"label-implicit"},a)):null};function t$(e){var{label:t,labelRef:i}=e,a=yk();return e$(t,a,i)||null}var Bw={},jw={},IC;function r$(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i[i.length-1]}e.last=t})(jw)),jw}var Nw={},OC;function n$(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Array.isArray(i)?i:Array.from(i)}e.toArray=t})(Nw)),Nw}var zC;function i$(){return zC||(zC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r$(),i=n$(),a=wS();function d(g){if(a.isArrayLike(g))return t.last(i.toArray(g))}e.last=d})(Bw)),Bw}var Fw,kC;function a$(){return kC||(kC=1,Fw=i$().last),Fw}var o$=a$();const s$=Vl(o$);var l$=["valueAccessor"],c$=["dataKey","clockWise","id","textBreakAll","zIndex"];function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Zb.apply(null,arguments)}function RC(e,t){if(e==null)return{};var i,a,d=u$(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function u$(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var h$=e=>Array.isArray(e.value)?s$(e.value):e.value,vk=X.createContext(void 0),f$=vk.Provider,_k=X.createContext(void 0);_k.Provider;function d$(){return X.useContext(vk)}function p$(){return X.useContext(_k)}function ab(e){var{valueAccessor:t=h$}=e,i=RC(e,l$),{dataKey:a,clockWise:d,id:g,textBreakAll:y,zIndex:c}=i,A=RC(i,c$),P=d$(),C=p$(),I=P||C;return!I||!I.length?null:X.createElement(bf,{zIndex:c??Bo.label},X.createElement(Gu,{className:"recharts-label-list"},I.map((B,G)=>{var Z,H=yo(a)?t(B,G):$a(B.payload,a),U=yo(g)?{}:{id:"".concat(g,"-").concat(G)};return X.createElement(bd,Zb({key:"label-".concat(G)},Nl(B),A,U,{fill:(Z=i.fill)!==null&&Z!==void 0?Z:B.fill,parentViewBox:B.parentViewBox,value:H,textBreakAll:y,viewBox:B.viewBox,index:G,zIndex:0}))})))}ab.displayName="LabelList";function m$(e){var{label:t}=e;return t?t===!0?X.createElement(ab,{key:"labelList-implicit"}):X.isValidElement(t)||BT(t)?X.createElement(ab,{key:"labelList-implicit",content:t}):typeof t=="object"?X.createElement(ab,Zb({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Z2.apply(null,arguments)}var bk=e=>{var{cx:t,cy:i,r:a,className:d}=e,g=Wn("recharts-dot",d);return Jt(t)&&Jt(i)&&Jt(a)?X.createElement("circle",Z2({},Vc(e),xS(e),{className:g,cx:t,cy:i,r:a})):null},g$={radiusAxis:{},angleAxis:{}},xk=vs({name:"polarAxis",initialState:g$,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:NK,removeRadiusAxis:FK,addAngleAxis:UK,removeAngleAxis:VK}=xk.actions,y$=xk.reducer;function v$(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var wk=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0;function _$(e){var{tooltipEntrySettings:t}=e,i=pa(),a=_s(),d=X.useRef(null);return X.useLayoutEffect(()=>{a||(d.current===null?i(WU(t)):d.current!==t&&i(KU({prev:d.current,next:t})),d.current=t)},[t,i,a]),X.useLayoutEffect(()=>()=>{d.current&&(i(QU(d.current)),d.current=null)},[i]),null}function b$(e){var{legendPayload:t}=e,i=pa(),a=_s(),d=X.useRef(null);return X.useLayoutEffect(()=>{a||(d.current===null?i(E8(t)):d.current!==t&&i(A8({prev:d.current,next:t})),d.current=t)},[i,a,t]),X.useLayoutEffect(()=>()=>{d.current&&(i(M8(d.current)),d.current=null)},[i]),null}var Uw,x$=()=>{var[e]=X.useState(()=>N0("uid-"));return e},w$=(Uw=B5.useId)!==null&&Uw!==void 0?Uw:x$;function S$(e,t){var i=w$();return t||(e?"".concat(e,"-").concat(i):i)}var T$=X.createContext(void 0),E$=e=>{var{id:t,type:i,children:a}=e,d=S$("recharts-".concat(i),t);return X.createElement(T$.Provider,{value:d},a(d))},A$={cartesianItems:[],polarItems:[]},Sk=vs({name:"graphicalItems",initialState:A$,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:ei()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:i,next:a}=t.payload,d=Uc(e).cartesianItems.indexOf(i);d>-1&&(e.cartesianItems[d]=a)},prepare:ei()},removeCartesianGraphicalItem:{reducer(e,t){var i=Uc(e).cartesianItems.indexOf(t.payload);i>-1&&e.cartesianItems.splice(i,1)},prepare:ei()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:ei()},removePolarGraphicalItem:{reducer(e,t){var i=Uc(e).polarItems.indexOf(t.payload);i>-1&&e.polarItems.splice(i,1)},prepare:ei()}}}),{addCartesianGraphicalItem:M$,replaceCartesianGraphicalItem:P$,removeCartesianGraphicalItem:C$,addPolarGraphicalItem:GK,removePolarGraphicalItem:qK}=Sk.actions,D$=Sk.reducer,I$=e=>{var t=pa(),i=X.useRef(null);return X.useLayoutEffect(()=>{i.current===null?t(M$(e)):i.current!==e&&t(P$({prev:i.current,next:e})),i.current=e},[t,e]),X.useLayoutEffect(()=>()=>{i.current&&(t(C$(i.current)),i.current=null)},[t]),null},O$=X.memo(I$),z$=["points"];function LC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Vw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(i),!0).forEach(function(a){k$(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):LC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function k$(e,t,i){return(t=R$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function R$(e){var t=L$(e,"string");return typeof t=="symbol"?t:t+""}function L$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hb(){return Hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Hb.apply(null,arguments)}function B$(e,t){if(e==null)return{};var i,a,d=j$(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function j$(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function N$(e){var{option:t,dotProps:i,className:a}=e;if(X.isValidElement(t))return X.cloneElement(t,i);if(typeof t=="function")return t(i);var d=Wn(a,typeof t!="boolean"?t.className:""),g=i??{},{points:y}=g,c=B$(g,z$);return X.createElement(bk,Hb({},c,{className:d}))}function F$(e,t){return e==null?!1:t?!0:e.length===1}function U$(e){var{points:t,dot:i,className:a,dotClassName:d,dataKey:g,baseProps:y,needClip:c,clipPathId:A,zIndex:P=Bo.scatter}=e;if(!F$(t,i))return null;var C=wk(i),I=N6(i),B=t.map((Z,H)=>{var U,oe,ce=Vw(Vw(Vw({r:3},y),I),{},{index:H,cx:(U=Z.x)!==null&&U!==void 0?U:void 0,cy:(oe=Z.y)!==null&&oe!==void 0?oe:void 0,dataKey:g,value:Z.value,payload:Z.payload,points:t});return X.createElement(N$,{key:"dot-".concat(H),option:i,dotProps:ce,className:d})}),G={};return c&&A!=null&&(G.clipPath="url(#clipPath-".concat(C?"":"dots-").concat(A,")")),X.createElement(bf,{zIndex:P},X.createElement(Gu,Hb({className:a},G),B))}function BC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function jC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(i),!0).forEach(function(a){V$(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function V$(e,t,i){return(t=G$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function G$(e){var t=q$(e,"string");return typeof t=="symbol"?t:t+""}function q$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tk=0,$$={xAxis:{},yAxis:{},zAxis:{}},Ek=vs({name:"cartesianAxis",initialState:$$,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:ei()},replaceXAxis:{reducer(e,t){var{prev:i,next:a}=t.payload;e.xAxis[i.id]!==void 0&&(i.id!==a.id&&delete e.xAxis[i.id],e.xAxis[a.id]=a)},prepare:ei()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:ei()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:ei()},replaceYAxis:{reducer(e,t){var{prev:i,next:a}=t.payload;e.yAxis[i.id]!==void 0&&(i.id!==a.id&&delete e.yAxis[i.id],e.yAxis[a.id]=a)},prepare:ei()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:ei()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:ei()},replaceZAxis:{reducer(e,t){var{prev:i,next:a}=t.payload;e.zAxis[i.id]!==void 0&&(i.id!==a.id&&delete e.zAxis[i.id],e.zAxis[a.id]=a)},prepare:ei()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:ei()},updateYAxisWidth(e,t){var{id:i,width:a}=t.payload,d=e.yAxis[i];if(d){var g,y=d.widthHistory||[];if(y.length===3&&y[0]===y[2]&&a===y[1]&&a!==d.width&&Math.abs(a-((g=y[0])!==null&&g!==void 0?g:0))<=1)return;var c=[...y,a].slice(-3);e.yAxis[i]=jC(jC({},d),{},{width:a,widthHistory:c})}}}}),{addXAxis:Z$,replaceXAxis:H$,removeXAxis:Y$,addYAxis:X$,replaceYAxis:W$,removeYAxis:K$,addZAxis:$K,replaceZAxis:ZK,removeZAxis:HK,updateYAxisWidth:Q$}=Ek.actions,J$=Ek.reducer,eZ=ut([Za],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),tZ=ut([eZ,df,pf],(e,t,i)=>{if(!(!e||t==null||i==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,i-e.top-e.bottom)}}),jT=()=>dr(tZ),rZ=()=>dr(qV);function NC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Gw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(i),!0).forEach(function(a){nZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function nZ(e,t,i){return(t=iZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iZ(e){var t=aZ(e,"string");return typeof t=="symbol"?t:t+""}function aZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oZ=e=>{var{point:t,childIndex:i,mainColor:a,activeDot:d,dataKey:g,clipPath:y}=e;if(d===!1||t.x==null||t.y==null)return null;var c={index:i,dataKey:g,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},A=Gw(Gw(Gw({},c),tx(d)),xS(d)),P;return X.isValidElement(d)?P=X.cloneElement(d,A):typeof d=="function"?P=d(A):P=X.createElement(bk,A),X.createElement(Gu,{className:"recharts-active-dot",clipPath:y},P)};function FC(e){var{points:t,mainColor:i,activeDot:a,itemDataKey:d,clipPath:g,zIndex:y=Bo.activeDot}=e,c=dr(Q0),A=rZ();if(t==null||A==null)return null;var P=t.find(C=>A.includes(C.payload));return yo(P)?null:X.createElement(bf,{zIndex:y},X.createElement(oZ,{point:P,childIndex:Number(c),mainColor:i,dataKey:d,activeDot:a,clipPath:g}))}var sZ=e=>{var{chartData:t}=e,i=pa(),a=_s();return X.useEffect(()=>a?()=>{}:(i(fC(t)),()=>{i(fC(void 0))}),[t,i,a]),null},UC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Ak=vs({name:"brush",initialState:UC,reducers:{setBrushSettings(e,t){return t.payload==null?UC:t.payload}}}),{setBrushSettings:YK}=Ak.actions,lZ=Ak.reducer;function cZ(e){return(e%180+180)%180}var uZ=function(t){var{width:i,height:a}=t,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=cZ(d),y=g*Math.PI/180,c=Math.atan(a/i),A=y>c&&y<Math.PI-c?a/Math.sin(y):i/Math.cos(y);return Math.abs(A)},hZ={dots:[],areas:[],lines:[]},Mk=vs({name:"referenceElements",initialState:hZ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var i=Uc(e).dots.findIndex(a=>a===t.payload);i!==-1&&e.dots.splice(i,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var i=Uc(e).areas.findIndex(a=>a===t.payload);i!==-1&&e.areas.splice(i,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var i=Uc(e).lines.findIndex(a=>a===t.payload);i!==-1&&e.lines.splice(i,1)}}}),{addDot:XK,removeDot:WK,addArea:KK,removeArea:QK,addLine:JK,removeLine:eQ}=Mk.actions,fZ=Mk.reducer,dZ=X.createContext(void 0),pZ=e=>{var{children:t}=e,[i]=X.useState("".concat(N0("recharts"),"-clip")),a=jT();if(a==null)return null;var{x:d,y:g,width:y,height:c}=a;return X.createElement(dZ.Provider,{value:i},X.createElement("defs",null,X.createElement("clipPath",{id:i},X.createElement("rect",{x:d,y:g,height:c,width:y}))),t)};function Pk(e,t){if(t<1)return[];if(t===1)return e;for(var i=[],a=0;a<e.length;a+=t){var d=e[a];d!==void 0&&i.push(d)}return i}function mZ(e,t,i){var a={width:e.width+t.width,height:e.height+t.height};return uZ(a,i)}function gZ(e,t,i){var a=i==="width",{x:d,y:g,width:y,height:c}=e;return t===1?{start:a?d:g,end:a?d+y:g+c}:{start:a?d+y:g+c,end:a?d:g}}function ev(e,t,i,a,d){if(e*t<e*a||e*t>e*d)return!1;var g=i();return e*(t-e*g/2-a)>=0&&e*(t+e*g/2-d)<=0}function yZ(e,t){return Pk(e,t+1)}function vZ(e,t,i,a,d){for(var g=(a||[]).slice(),{start:y,end:c}=t,A=0,P=1,C=y,I=function(){var Z=a?.[A];if(Z===void 0)return{v:Pk(a,P)};var H=A,U,oe=()=>(U===void 0&&(U=i(Z,H)),U),ce=Z.coordinate,fe=A===0||ev(e,ce,oe,C,c);fe||(A=0,C=y,P+=1),fe&&(C=ce+e*(oe()/2+d),A+=P)},B;P<=g.length;)if(B=I(),B)return B.v;return[]}function _Z(e,t,i,a,d){var g=(a||[]).slice(),y=g.length;if(y===0)return[];for(var{start:c,end:A}=t,P=1;P<=y;P++){for(var C=(y-1)%P,I=c,B=!0,G=function(){var ve=a[H];if(ve==null)return 0;var Ee=H,Me,ze=()=>(Me===void 0&&(Me=i(ve,Ee)),Me),Ke=ve.coordinate,mt=H===C||ev(e,Ke,ze,I,A);if(!mt)return B=!1,1;mt&&(I=Ke+e*(ze()/2+d))},Z,H=C;H<y&&(Z=G(),!(Z!==0&&Z===1));H+=P);if(B){for(var U=[],oe=C;oe<y;oe+=P){var ce=a[oe];ce!=null&&U.push(ce)}return U}}return[]}function VC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function mo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(i),!0).forEach(function(a){bZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):VC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function bZ(e,t,i){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function xZ(e){var t=wZ(e,"string");return typeof t=="symbol"?t:t+""}function wZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SZ(e,t,i,a,d){for(var g=(a||[]).slice(),y=g.length,{start:c}=t,{end:A}=t,P=function(B){var G=g[B];if(G==null)return 1;var Z=G,H,U=()=>(H===void 0&&(H=i(G,B)),H);if(B===y-1){var oe=e*(Z.coordinate+e*U()/2-A);g[B]=Z=mo(mo({},Z),{},{tickCoord:oe>0?Z.coordinate-oe*e:Z.coordinate})}else g[B]=Z=mo(mo({},Z),{},{tickCoord:Z.coordinate});if(Z.tickCoord!=null){var ce=ev(e,Z.tickCoord,U,c,A);ce&&(A=Z.tickCoord-e*(U()/2+d),g[B]=mo(mo({},Z),{},{isShow:!0}))}},C=y-1;C>=0;C--)P(C);return g}function TZ(e,t,i,a,d,g){var y=(a||[]).slice(),c=y.length,{start:A,end:P}=t;if(g){var C=a[c-1];if(C!=null){var I=i(C,c-1),B=e*(C.coordinate+e*I/2-P);if(y[c-1]=C=mo(mo({},C),{},{tickCoord:B>0?C.coordinate-B*e:C.coordinate}),C.tickCoord!=null){var G=ev(e,C.tickCoord,()=>I,A,P);G&&(P=C.tickCoord-e*(I/2+d),y[c-1]=mo(mo({},C),{},{isShow:!0}))}}}for(var Z=g?c-1:c,H=function(ce){var fe=y[ce];if(fe==null)return 1;var ve=fe,Ee,Me=()=>(Ee===void 0&&(Ee=i(fe,ce)),Ee);if(ce===0){var ze=e*(ve.coordinate-e*Me()/2-A);y[ce]=ve=mo(mo({},ve),{},{tickCoord:ze<0?ve.coordinate-ze*e:ve.coordinate})}else y[ce]=ve=mo(mo({},ve),{},{tickCoord:ve.coordinate});if(ve.tickCoord!=null){var Ke=ev(e,ve.tickCoord,Me,A,P);Ke&&(A=ve.tickCoord+e*(Me()/2+d),y[ce]=mo(mo({},ve),{},{isShow:!0}))}},U=0;U<Z;U++)H(U);return y}function NT(e,t,i){var{tick:a,ticks:d,viewBox:g,minTickGap:y,orientation:c,interval:A,tickFormatter:P,unit:C,angle:I}=e;if(!d||!d.length||!a)return[];if(Jt(A)||hv.isSsr){var B;return(B=yZ(d,Jt(A)?A:0))!==null&&B!==void 0?B:[]}var G=[],Z=c==="top"||c==="bottom"?"width":"height",H=C&&Z==="width"?L0(C,{fontSize:t,letterSpacing:i}):{width:0,height:0},U=(Ee,Me)=>{var ze=typeof P=="function"?P(Ee.value,Me):Ee.value;return Z==="width"?mZ(L0(ze,{fontSize:t,letterSpacing:i}),H,I):L0(ze,{fontSize:t,letterSpacing:i})[Z]},oe=d[0],ce=d[1],fe=d.length>=2&&oe!=null&&ce!=null?Bl(ce.coordinate-oe.coordinate):1,ve=gZ(g,fe,Z);return A==="equidistantPreserveStart"?vZ(fe,ve,U,d,y):A==="equidistantPreserveEnd"?_Z(fe,ve,U,d,y):(A==="preserveStart"||A==="preserveStartEnd"?G=TZ(fe,ve,U,d,y,A==="preserveStartEnd"):G=SZ(fe,ve,U,d,y),G.filter(Ee=>Ee.isShow))}var EZ=e=>{var{ticks:t,label:i,labelGapWithTick:a=5,tickSize:d=0,tickMargin:g=0}=e,y=0;if(t){Array.from(t).forEach(C=>{if(C){var I=C.getBoundingClientRect();I.width>y&&(y=I.width)}});var c=i?i.getBoundingClientRect().width:0,A=d+g,P=y+A+c+(i?a:0);return Math.round(P)}return 0},AZ=["axisLine","width","height","className","hide","ticks","axisType"];function MZ(e,t){if(e==null)return{};var i,a,d=PZ(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function PZ(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},am.apply(null,arguments)}function GC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function wi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(i),!0).forEach(function(a){CZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function CZ(e,t,i){return(t=DZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function DZ(e){var t=IZ(e,"string");return typeof t=="symbol"?t:t+""}function IZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nf={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Bo.axis};function OZ(e){var{x:t,y:i,width:a,height:d,orientation:g,mirror:y,axisLine:c,otherSvgProps:A}=e;if(!c)return null;var P=wi(wi(wi({},A),Vc(c)),{},{fill:"none"});if(g==="top"||g==="bottom"){var C=+(g==="top"&&!y||g==="bottom"&&y);P=wi(wi({},P),{},{x1:t,y1:i+C*d,x2:t+a,y2:i+C*d})}else{var I=+(g==="left"&&!y||g==="right"&&y);P=wi(wi({},P),{},{x1:t+I*a,y1:i,x2:t+I*a,y2:i+d})}return X.createElement("line",am({},P,{className:Wn("recharts-cartesian-axis-line",ix(c,"className"))}))}function zZ(e,t,i,a,d,g,y,c,A){var P,C,I,B,G,Z,H=c?-1:1,U=e.tickSize||y,oe=Jt(e.tickCoord)?e.tickCoord:e.coordinate;switch(g){case"top":P=C=e.coordinate,B=i+ +!c*d,I=B-H*U,Z=I-H*A,G=oe;break;case"left":I=B=e.coordinate,C=t+ +!c*a,P=C-H*U,G=P-H*A,Z=oe;break;case"right":I=B=e.coordinate,C=t+ +c*a,P=C+H*U,G=P+H*A,Z=oe;break;default:P=C=e.coordinate,B=i+ +c*d,I=B+H*U,Z=I+H*A,G=oe;break}return{line:{x1:P,y1:I,x2:C,y2:B},tick:{x:G,y:Z}}}function kZ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function RZ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function LZ(e){var{option:t,tickProps:i,value:a}=e,d,g=Wn(i.className,"recharts-cartesian-axis-tick-value");if(X.isValidElement(t))d=X.cloneElement(t,wi(wi({},i),{},{className:g}));else if(typeof t=="function")d=t(wi(wi({},i),{},{className:g}));else{var y="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(y=Wn(y,v$(t))),d=X.createElement(LT,am({},i,{className:y}),a)}return d}var BZ=X.forwardRef((e,t)=>{var{ticks:i=[],tick:a,tickLine:d,stroke:g,tickFormatter:y,unit:c,padding:A,tickTextProps:P,orientation:C,mirror:I,x:B,y:G,width:Z,height:H,tickSize:U,tickMargin:oe,fontSize:ce,letterSpacing:fe,getTicksConfig:ve,events:Ee,axisType:Me}=e,ze=NT(wi(wi({},ve),{},{ticks:i}),ce,fe),Ke=kZ(C,I),mt=RZ(C,I),zt=Vc(ve),Ge=tx(a),Te={};typeof d=="object"&&(Te=d);var dt=wi(wi({},zt),{},{fill:"none"},Te),It=ze.map(it=>wi({entry:it},zZ(it,B,G,Z,H,C,U,I,oe))),Rt=It.map(it=>{var{entry:Mt,line:Be}=it;return X.createElement(Gu,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Mt.value,"-").concat(Mt.coordinate,"-").concat(Mt.tickCoord)},d&&X.createElement("line",am({},dt,Be,{className:Wn("recharts-cartesian-axis-tick-line",ix(d,"className"))})))}),Ve=It.map((it,Mt)=>{var Be,yt,{entry:Ae,tick:qe}=it,ct=wi(wi(wi(wi({verticalAnchor:mt},zt),{},{textAnchor:Ke,stroke:"none",fill:g},qe),{},{index:Mt,payload:Ae,visibleTicksCount:ze.length,tickFormatter:y,padding:A},P),{},{angle:(Be=(yt=P?.angle)!==null&&yt!==void 0?yt:zt.angle)!==null&&Be!==void 0?Be:0}),wt=wi(wi({},ct),Ge);return X.createElement(Gu,am({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Ae.value,"-").concat(Ae.coordinate,"-").concat(Ae.tickCoord)},xL(Ee,Ae,Mt)),a&&X.createElement(LZ,{option:a,tickProps:wt,value:"".concat(typeof y=="function"?y(Ae.value,Mt):Ae.value).concat(c||"")}))});return X.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(Me,"-ticks")},Ve.length>0&&X.createElement(bf,{zIndex:Bo.label},X.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(Me,"-tick-labels"),ref:t},Ve)),Rt.length>0&&X.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(Me,"-tick-lines")},Rt))}),jZ=X.forwardRef((e,t)=>{var{axisLine:i,width:a,height:d,className:g,hide:y,ticks:c,axisType:A}=e,P=MZ(e,AZ),[C,I]=X.useState(""),[B,G]=X.useState(""),Z=X.useRef(null);X.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var U;return EZ({ticks:Z.current,label:(U=e.labelRef)===null||U===void 0?void 0:U.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var H=X.useCallback(U=>{if(U){var oe=U.getElementsByClassName("recharts-cartesian-axis-tick-value");Z.current=oe;var ce=oe[0];if(ce){var fe=window.getComputedStyle(ce),ve=fe.fontSize,Ee=fe.letterSpacing;(ve!==C||Ee!==B)&&(I(ve),G(Ee))}}},[C,B]);return y||a!=null&&a<=0||d!=null&&d<=0?null:X.createElement(bf,{zIndex:e.zIndex},X.createElement(Gu,{className:Wn("recharts-cartesian-axis",g)},X.createElement(OZ,{x:e.x,y:e.y,width:a,height:d,orientation:e.orientation,mirror:e.mirror,axisLine:i,otherSvgProps:Vc(e)}),X.createElement(BZ,{ref:H,axisType:A,events:P,fontSize:C,getTicksConfig:e,height:e.height,letterSpacing:B,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),X.createElement($q,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},X.createElement(t$,{label:e.label,labelRef:e.labelRef}),e.children)))}),FT=X.forwardRef((e,t)=>{var i=el(e,nf);return X.createElement(jZ,am({},i,{ref:t}))});FT.displayName="CartesianAxis";var NZ=["x1","y1","x2","y2","key"],FZ=["offset"],UZ=["xAxisId","yAxisId"],VZ=["xAxisId","yAxisId"];function qC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function go(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(i),!0).forEach(function(a){GZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function GZ(e,t,i){return(t=qZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qZ(e){var t=$Z(e,"string");return typeof t=="symbol"?t:t+""}function $Z(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Yp.apply(null,arguments)}function Yb(e,t){if(e==null)return{};var i,a,d=ZZ(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function ZZ(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var HZ=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:i,x:a,y:d,width:g,height:y,ry:c}=e;return X.createElement("rect",{x:a,y:d,ry:c,width:g,height:y,stroke:"none",fill:t,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function Ck(e){var{option:t,lineItemProps:i}=e,a;if(X.isValidElement(t))a=X.cloneElement(t,i);else if(typeof t=="function")a=t(i);else{var d,{x1:g,y1:y,x2:c,y2:A,key:P}=i,C=Yb(i,NZ),I=(d=Vc(C))!==null&&d!==void 0?d:{},{offset:B}=I,G=Yb(I,FZ);a=X.createElement("line",Yp({},G,{x1:g,y1:y,x2:c,y2:A,fill:"none",key:P}))}return a}function YZ(e){var{x:t,width:i,horizontal:a=!0,horizontalPoints:d}=e;if(!a||!d||!d.length)return null;var{xAxisId:g,yAxisId:y}=e,c=Yb(e,UZ),A=d.map((P,C)=>{var I=go(go({},c),{},{x1:t,y1:P,x2:t+i,y2:P,key:"line-".concat(C),index:C});return X.createElement(Ck,{key:"line-".concat(C),option:a,lineItemProps:I})});return X.createElement("g",{className:"recharts-cartesian-grid-horizontal"},A)}function XZ(e){var{y:t,height:i,vertical:a=!0,verticalPoints:d}=e;if(!a||!d||!d.length)return null;var{xAxisId:g,yAxisId:y}=e,c=Yb(e,VZ),A=d.map((P,C)=>{var I=go(go({},c),{},{x1:P,y1:t,x2:P,y2:t+i,key:"line-".concat(C),index:C});return X.createElement(Ck,{option:a,lineItemProps:I,key:"line-".concat(C)})});return X.createElement("g",{className:"recharts-cartesian-grid-vertical"},A)}function WZ(e){var{horizontalFill:t,fillOpacity:i,x:a,y:d,width:g,height:y,horizontalPoints:c,horizontal:A=!0}=e;if(!A||!t||!t.length||c==null)return null;var P=c.map(I=>Math.round(I+d-d)).sort((I,B)=>I-B);d!==P[0]&&P.unshift(0);var C=P.map((I,B)=>{var G=P[B+1],Z=G==null,H=Z?d+y-I:G-I;if(H<=0)return null;var U=B%t.length;return X.createElement("rect",{key:"react-".concat(B),y:I,x:a,height:H,width:g,stroke:"none",fill:t[U],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},C)}function KZ(e){var{vertical:t=!0,verticalFill:i,fillOpacity:a,x:d,y:g,width:y,height:c,verticalPoints:A}=e;if(!t||!i||!i.length)return null;var P=A.map(I=>Math.round(I+d-d)).sort((I,B)=>I-B);d!==P[0]&&P.unshift(0);var C=P.map((I,B)=>{var G=P[B+1],Z=G==null,H=Z?d+y-I:G-I;if(H<=0)return null;var U=B%i.length;return X.createElement("rect",{key:"react-".concat(B),x:I,y:g,width:H,height:c,stroke:"none",fill:i[U],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return X.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},C)}var QZ=(e,t)=>{var{xAxis:i,width:a,height:d,offset:g}=e;return SO(NT(go(go(go({},nf),i),{},{ticks:TO(i),viewBox:{x:0,y:0,width:a,height:d}})),g.left,g.left+g.width,t)},JZ=(e,t)=>{var{yAxis:i,width:a,height:d,offset:g}=e;return SO(NT(go(go(go({},nf),i),{},{ticks:TO(i),viewBox:{x:0,y:0,width:a,height:d}})),g.top,g.top+g.height,t)},eH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Bo.grid};function Dk(e){var t=OO(),i=zO(),a=IO(),d=go(go({},el(e,eH)),{},{x:Jt(e.x)?e.x:a.left,y:Jt(e.y)?e.y:a.top,width:Jt(e.width)?e.width:a.width,height:Jt(e.height)?e.height:a.height}),{xAxisId:g,yAxisId:y,x:c,y:A,width:P,height:C,syncWithTicks:I,horizontalValues:B,verticalValues:G}=d,Z=_s(),H=dr(mt=>eC(mt,"xAxis",g,Z)),U=dr(mt=>eC(mt,"yAxis",y,Z));if(!Zu(P)||!Zu(C)||!Jt(c)||!Jt(A))return null;var oe=d.verticalCoordinatesGenerator||QZ,ce=d.horizontalCoordinatesGenerator||JZ,{horizontalPoints:fe,verticalPoints:ve}=d;if((!fe||!fe.length)&&typeof ce=="function"){var Ee=B&&B.length,Me=ce({yAxis:U?go(go({},U),{},{ticks:Ee?B:U.ticks}):void 0,width:t??P,height:i??C,offset:a},Ee?!0:I);wb(Array.isArray(Me),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Me,"]")),Array.isArray(Me)&&(fe=Me)}if((!ve||!ve.length)&&typeof oe=="function"){var ze=G&&G.length,Ke=oe({xAxis:H?go(go({},H),{},{ticks:ze?G:H.ticks}):void 0,width:t??P,height:i??C,offset:a},ze?!0:I);wb(Array.isArray(Ke),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Ke,"]")),Array.isArray(Ke)&&(ve=Ke)}return X.createElement(bf,{zIndex:d.zIndex},X.createElement("g",{className:"recharts-cartesian-grid"},X.createElement(HZ,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),X.createElement(WZ,Yp({},d,{horizontalPoints:fe})),X.createElement(KZ,Yp({},d,{verticalPoints:ve})),X.createElement(YZ,Yp({},d,{offset:a,horizontalPoints:fe,xAxis:H,yAxis:U})),X.createElement(XZ,Yp({},d,{offset:a,verticalPoints:ve,xAxis:H,yAxis:U}))))}Dk.displayName="CartesianGrid";var tH={},Ik=vs({name:"errorBars",initialState:tH,reducers:{addErrorBar:(e,t)=>{var{itemId:i,errorBar:a}=t.payload;e[i]||(e[i]=[]),e[i].push(a)},replaceErrorBar:(e,t)=>{var{itemId:i,prev:a,next:d}=t.payload;e[i]&&(e[i]=e[i].map(g=>g.dataKey===a.dataKey&&g.direction===a.direction?d:g))},removeErrorBar:(e,t)=>{var{itemId:i,errorBar:a}=t.payload;e[i]&&(e[i]=e[i].filter(d=>d.dataKey!==a.dataKey||d.direction!==a.direction))}}}),{addErrorBar:tQ,replaceErrorBar:rQ,removeErrorBar:nQ}=Ik.actions,rH=Ik.reducer;function Ok(e,t){var i,a,d=dr(P=>yf(P,e)),g=dr(P=>vf(P,t)),y=(i=d?.allowDataOverflow)!==null&&i!==void 0?i:ua.allowDataOverflow,c=(a=g?.allowDataOverflow)!==null&&a!==void 0?a:ha.allowDataOverflow,A=y||c;return{needClip:A,needClipX:y,needClipY:c}}function nH(e){var{xAxisId:t,yAxisId:i,clipPathId:a}=e,d=jT(),{needClipX:g,needClipY:y,needClip:c}=Ok(t,i);if(!c||!d)return null;var{x:A,y:P,width:C,height:I}=d;return X.createElement("clipPath",{id:"clipPath-".concat(a)},X.createElement("rect",{x:g?A:A-C/2,y:y?P:P-I/2,width:g?C:C*2,height:y?I:I*2}))}function iH(e){var t=tx(e),i=3,a=2;if(t!=null){var{r:d,strokeWidth:g}=t,y=Number(d),c=Number(g);return(Number.isNaN(y)||y<0)&&(y=i),(Number.isNaN(c)||c<0)&&(c=a),{r:y,strokeWidth:c}}return{r:i,strokeWidth:a}}var qw={exports:{}},$w={};var $C;function aH(){if($C)return $w;$C=1;var e=ny();function t(A,P){return A===P&&(A!==0||1/A===1/P)||A!==A&&P!==P}var i=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,d=e.useRef,g=e.useEffect,y=e.useMemo,c=e.useDebugValue;return $w.useSyncExternalStoreWithSelector=function(A,P,C,I,B){var G=d(null);if(G.current===null){var Z={hasValue:!1,value:null};G.current=Z}else Z=G.current;G=y(function(){function U(Ee){if(!oe){if(oe=!0,ce=Ee,Ee=I(Ee),B!==void 0&&Z.hasValue){var Me=Z.value;if(B(Me,Ee))return fe=Me}return fe=Ee}if(Me=fe,i(ce,Ee))return Me;var ze=I(Ee);return B!==void 0&&B(Me,ze)?(ce=Ee,Me):(ce=Ee,fe=ze)}var oe=!1,ce,fe,ve=C===void 0?null:C;return[function(){return U(P())},ve===null?void 0:function(){return U(ve())}]},[P,C,I,B]);var H=a(A,G[0],G[1]);return g(function(){Z.hasValue=!0,Z.value=H},[H]),c(H),H},$w}var ZC;function oH(){return ZC||(ZC=1,qw.exports=aH()),qw.exports}oH();function sH(e){e()}function lH(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sH(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){const i=[];let a=e;for(;a;)i.push(a),a=a.next;return i},subscribe(i){let a=!0;const d=t={callback:i,next:null,prev:t};return d.prev?d.prev.next=d:e=d,function(){!a||e===null||(a=!1,d.next?d.next.prev=d.prev:t=d.prev,d.prev?d.prev.next=d.next:e=d.next)}}}}var HC={notify(){},get:()=>[]};function cH(e,t){let i,a=HC,d=0,g=!1;function y(H){C();const U=a.subscribe(H);let oe=!1;return()=>{oe||(oe=!0,U(),I())}}function c(){a.notify()}function A(){Z.onStateChange&&Z.onStateChange()}function P(){return g}function C(){d++,i||(i=e.subscribe(A),a=lH())}function I(){d--,i&&d===0&&(i(),i=void 0,a.clear(),a=HC)}function B(){g||(g=!0,C())}function G(){g&&(g=!1,I())}const Z={addNestedSub:y,notifyNestedSubs:c,handleChangeWrapper:A,isSubscribed:P,trySubscribe:B,tryUnsubscribe:G,getListeners:()=>a};return Z}var uH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hH=uH(),fH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dH=fH(),pH=()=>hH||dH?X.useLayoutEffect:X.useEffect,mH=pH();function YC(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function gH(e,t){if(YC(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(let d=0;d<i.length;d++)if(!Object.prototype.hasOwnProperty.call(t,i[d])||!YC(e[i[d]],t[i[d]]))return!1;return!0}var yH=Symbol.for("react-redux-context"),vH=typeof globalThis<"u"?globalThis:{};function _H(){if(!X.createContext)return{};const e=vH[yH]??=new Map;let t=e.get(X.createContext);return t||(t=X.createContext(null),e.set(X.createContext,t)),t}var bH=_H();function xH(e){const{children:t,context:i,serverState:a,store:d}=e,g=X.useMemo(()=>{const A=cH(d);return{store:d,subscription:A,getServerState:a?()=>a:void 0}},[d,a]),y=X.useMemo(()=>d.getState(),[d]);mH(()=>{const{subscription:A}=g;return A.onStateChange=A.notifyNestedSubs,A.trySubscribe(),y!==d.getState()&&A.notifyNestedSubs(),()=>{A.tryUnsubscribe(),A.onStateChange=void 0}},[g,y]);const c=i||bH;return X.createElement(c.Provider,{value:g},t)}var wH=xH,SH=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function TH(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function UT(e,t){var i=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of i)if(SH.has(a)){if(e[a]==null&&t[a]==null)continue;if(!gH(e[a],t[a]))return!1}else if(!TH(e[a],t[a]))return!1;return!0}function VT(e,t){var i,a;return(i=(a=e.graphicalItems.cartesianItems.find(d=>d.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&i!==void 0?i:Tk}function GT(e,t){var i,a;return(i=(a=e.graphicalItems.cartesianItems.find(d=>d.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&i!==void 0?i:Tk}var zk=(e,t,i)=>Oz(e,"xAxis",VT(e,t),i),kk=(e,t,i)=>Iz(e,"xAxis",VT(e,t),i),Rk=(e,t,i)=>Oz(e,"yAxis",GT(e,t),i),Lk=(e,t,i)=>Iz(e,"yAxis",GT(e,t),i),EH=ut([ri,zk,Rk,kk,Lk],(e,t,i,a,d)=>Yu(e,"xAxis")?xb(t,a,!1):xb(i,d,!1)),AH=(e,t)=>t,Bk=ut([J3,AH],(e,t)=>e.filter(i=>i.type==="area").find(i=>i.id===t)),jk=e=>{var t=ri(e),i=Yu(t,"xAxis");return i?"yAxis":"xAxis"},MH=(e,t)=>{var i=jk(e);return i==="yAxis"?GT(e,t):VT(e,t)},PH=(e,t,i)=>lz(e,jk(e),MH(e,t),i),CH=ut([Bk,PH],(e,t)=>{var i;if(!(e==null||t==null)){var{stackId:a}=e,d=mT(e);if(!(a==null||d==null)){var g=(i=t[a])===null||i===void 0?void 0:i.stackedData,y=g?.find(c=>c.key===d);if(y!=null)return y.map(c=>[c[0],c[1]])}}}),DH=ut([ri,zk,Rk,kk,Lk,CH,P7,EH,Bk,B7],(e,t,i,a,d,g,y,c,A,P)=>{var{chartData:C,dataStartIndex:I,dataEndIndex:B}=y;if(!(A==null||e!=="horizontal"&&e!=="vertical"||t==null||i==null||a==null||d==null||a.length===0||d.length===0||c==null)){var{data:G}=A,Z;if(G&&G.length>0?Z=G:Z=C?.slice(I,B+1),Z!=null)return XH({layout:e,xAxis:t,yAxis:i,xAxisTicks:a,yAxisTicks:d,dataStartIndex:I,areaSettings:A,stackedData:g,displayedData:Z,chartBaseValue:P,bandSize:c})}}),IH=["id"],OH=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Qp(){return Qp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Qp.apply(null,arguments)}function Nk(e,t){if(e==null)return{};var i,a,d=zH(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function zH(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function XC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function $g(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(i),!0).forEach(function(a){kH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):XC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function kH(e,t,i){return(t=RH(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function RH(e){var t=LH(e,"string");return typeof t=="symbol"?t:t+""}function LH(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xb(e,t){return e&&e!=="none"?e:t}var BH=e=>{var{dataKey:t,name:i,stroke:a,fill:d,legendType:g,hide:y}=e;return[{inactive:y,dataKey:t,type:g,color:Xb(a,d),value:EO(i,t),payload:e}]},jH=X.memo(e=>{var{dataKey:t,data:i,stroke:a,strokeWidth:d,fill:g,name:y,hide:c,unit:A,tooltipType:P,id:C}=e,I={dataDefinedOnItem:i,getPosition:oy,settings:{stroke:a,strokeWidth:d,fill:g,dataKey:t,nameKey:void 0,name:EO(y,t),hide:c,type:P,color:Xb(a,g),unit:A,graphicalItemId:C}};return X.createElement(_$,{tooltipEntrySettings:I})});function NH(e){var{clipPathId:t,points:i,props:a}=e,{needClip:d,dot:g,dataKey:y}=a,c=Vc(a);return X.createElement(U$,{points:i,dot:g,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:y,baseProps:c,needClip:d,clipPathId:t})}function FH(e){var{showLabels:t,children:i,points:a}=e,d=a.map(g=>{var y,c,A={x:(y=g.x)!==null&&y!==void 0?y:0,y:(c=g.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return $g($g({},A),{},{value:g.value,payload:g.payload,parentViewBox:void 0,viewBox:A,fill:void 0})});return X.createElement(f$,{value:t?d:void 0},i)}function WC(e){var{points:t,baseLine:i,needClip:a,clipPathId:d,props:g}=e,{layout:y,type:c,stroke:A,connectNulls:P,isRange:C}=g,{id:I}=g,B=Nk(g,IH),G=Vc(B),Z=Nl(B);return X.createElement(X.Fragment,null,t?.length>1&&X.createElement(Gu,{clipPath:a?"url(#clipPath-".concat(d,")"):void 0},X.createElement(rb,Qp({},Z,{id:I,points:t,connectNulls:P,type:c,baseLine:i,layout:y,stroke:"none",className:"recharts-area-area"})),A!=="none"&&X.createElement(rb,Qp({},G,{className:"recharts-area-curve",layout:y,type:c,connectNulls:P,fill:"none",points:t})),A!=="none"&&C&&X.createElement(rb,Qp({},G,{className:"recharts-area-curve",layout:y,type:c,connectNulls:P,fill:"none",points:i}))),X.createElement(NH,{points:t,props:B,clipPathId:d}))}function UH(e){var t,i,{alpha:a,baseLine:d,points:g,strokeWidth:y}=e,c=(t=g[0])===null||t===void 0?void 0:t.y,A=(i=g[g.length-1])===null||i===void 0?void 0:i.y;if(!Fr(c)||!Fr(A))return null;var P=a*Math.abs(c-A),C=Math.max(...g.map(I=>I.x||0));return Jt(d)?C=Math.max(d,C):d&&Array.isArray(d)&&d.length&&(C=Math.max(...d.map(I=>I.x||0),C)),Jt(C)?X.createElement("rect",{x:0,y:c<A?c:c-P,width:C+(y?parseInt("".concat(y),10):1),height:Math.floor(P)}):null}function VH(e){var t,i,{alpha:a,baseLine:d,points:g,strokeWidth:y}=e,c=(t=g[0])===null||t===void 0?void 0:t.x,A=(i=g[g.length-1])===null||i===void 0?void 0:i.x;if(!Fr(c)||!Fr(A))return null;var P=a*Math.abs(c-A),C=Math.max(...g.map(I=>I.y||0));return Jt(d)?C=Math.max(d,C):d&&Array.isArray(d)&&d.length&&(C=Math.max(...d.map(I=>I.y||0),C)),Jt(C)?X.createElement("rect",{x:c<A?c:c-P,y:0,width:P,height:Math.floor(C+(y?parseInt("".concat(y),10):1))}):null}function GH(e){var{alpha:t,layout:i,points:a,baseLine:d,strokeWidth:g}=e;return i==="vertical"?X.createElement(UH,{alpha:t,points:a,baseLine:d,strokeWidth:g}):X.createElement(VH,{alpha:t,points:a,baseLine:d,strokeWidth:g})}function qH(e){var{needClip:t,clipPathId:i,props:a,previousPointsRef:d,previousBaselineRef:g}=e,{points:y,baseLine:c,isAnimationActive:A,animationBegin:P,animationDuration:C,animationEasing:I,onAnimationStart:B,onAnimationEnd:G}=a,Z=X.useMemo(()=>({points:y,baseLine:c}),[y,c]),H=HO(Z,"recharts-area-"),U=zS(),[oe,ce]=X.useState(!1),fe=!oe,ve=X.useCallback(()=>{typeof G=="function"&&G(),ce(!1)},[G]),Ee=X.useCallback(()=>{typeof B=="function"&&B(),ce(!0)},[B]);if(U==null)return null;var Me=d.current,ze=g.current;return X.createElement(FH,{showLabels:fe,points:y},a.children,X.createElement(ZO,{animationId:H,begin:P,duration:C,isActive:A,easing:I,onAnimationEnd:ve,onAnimationStart:Ee,key:H},Ke=>{if(Me){var mt=Me.length/y.length,zt=Ke===1?y:y.map((Te,dt)=>{var It=Math.floor(dt*mt);if(Me[It]){var Rt=Me[It];return $g($g({},Te),{},{x:ju(Rt.x,Te.x,Ke),y:ju(Rt.y,Te.y,Ke)})}return Te}),Ge;return Jt(c)?Ge=ju(ze,c,Ke):yo(c)||qu(c)?Ge=ju(ze,0,Ke):Ge=c.map((Te,dt)=>{var It=Math.floor(dt*mt);if(Array.isArray(ze)&&ze[It]){var Rt=ze[It];return $g($g({},Te),{},{x:ju(Rt.x,Te.x,Ke),y:ju(Rt.y,Te.y,Ke)})}return Te}),Ke>0&&(d.current=zt,g.current=Ge),X.createElement(WC,{points:zt,baseLine:Ge,needClip:t,clipPathId:i,props:a})}return Ke>0&&(d.current=y,g.current=c),X.createElement(Gu,null,A&&X.createElement("defs",null,X.createElement("clipPath",{id:"animationClipPath-".concat(i)},X.createElement(GH,{alpha:Ke,points:y,baseLine:c,layout:U,strokeWidth:a.strokeWidth}))),X.createElement(Gu,{clipPath:"url(#animationClipPath-".concat(i,")")},X.createElement(WC,{points:y,baseLine:c,needClip:t,clipPathId:i,props:a})))}),X.createElement(m$,{label:a.label}))}function $H(e){var{needClip:t,clipPathId:i,props:a}=e,d=X.useRef(null),g=X.useRef();return X.createElement(qH,{needClip:t,clipPathId:i,props:a,previousPointsRef:d,previousBaselineRef:g})}class ZH extends X.PureComponent{render(){var{hide:t,dot:i,points:a,className:d,top:g,left:y,needClip:c,xAxisId:A,yAxisId:P,width:C,height:I,id:B,baseLine:G,zIndex:Z}=this.props;if(t)return null;var H=Wn("recharts-area",d),U=B,{r:oe,strokeWidth:ce}=iH(i),fe=wk(i),ve=oe*2+ce,Ee=c?"url(#clipPath-".concat(fe?"":"dots-").concat(U,")"):void 0;return X.createElement(bf,{zIndex:Z},X.createElement(Gu,{className:H},c&&X.createElement("defs",null,X.createElement(nH,{clipPathId:U,xAxisId:A,yAxisId:P}),!fe&&X.createElement("clipPath",{id:"clipPath-dots-".concat(U)},X.createElement("rect",{x:y-ve/2,y:g-ve/2,width:C+ve,height:I+ve}))),X.createElement($H,{needClip:c,clipPathId:U,props:this.props})),X.createElement(FC,{points:a,mainColor:Xb(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Ee}),this.props.isRange&&Array.isArray(G)&&X.createElement(FC,{points:G,mainColor:Xb(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Ee}))}}var Fk={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Bo.area};function HH(e){var t,i=el(e,Fk),{activeDot:a,animationBegin:d,animationDuration:g,animationEasing:y,connectNulls:c,dot:A,fill:P,fillOpacity:C,hide:I,isAnimationActive:B,legendType:G,stroke:Z,xAxisId:H,yAxisId:U}=i,oe=Nk(i,OH),ce=sy(),fe=ek(),{needClip:ve}=Ok(H,U),Ee=_s(),{points:Me,isRange:ze,baseLine:Ke}=(t=dr(It=>DH(It,e.id,Ee)))!==null&&t!==void 0?t:{},mt=jT();if(ce!=="horizontal"&&ce!=="vertical"||mt==null||fe!=="AreaChart"&&fe!=="ComposedChart")return null;var{height:zt,width:Ge,x:Te,y:dt}=mt;return!Me||!Me.length?null:X.createElement(ZH,Qp({},oe,{activeDot:a,animationBegin:d,animationDuration:g,animationEasing:y,baseLine:Ke,connectNulls:c,dot:A,fill:P,fillOpacity:C,height:zt,hide:I,layout:ce,isAnimationActive:B==="auto"?!hv.isSsr:B,isRange:ze,legendType:G,needClip:ve,points:Me,stroke:Z,width:Ge,left:Te,top:dt,xAxisId:H,yAxisId:U}))}var YH=(e,t,i,a,d)=>{var g=i??t;if(Jt(g))return g;var y=e==="horizontal"?d:a,c=y.scale.domain();if(y.type==="number"){var A=Math.max(c[0],c[1]),P=Math.min(c[0],c[1]);return g==="dataMin"?P:g==="dataMax"||A<0?A:Math.max(Math.min(c[0],c[1]),0)}return g==="dataMin"?c[0]:g==="dataMax"?c[1]:c[0]};function XH(e){var{areaSettings:{connectNulls:t,baseValue:i,dataKey:a},stackedData:d,layout:g,chartBaseValue:y,xAxis:c,yAxis:A,displayedData:P,dataStartIndex:C,xAxisTicks:I,yAxisTicks:B,bandSize:G}=e,Z=d&&d.length,H=YH(g,y,i,c,A),U=g==="horizontal",oe=!1,ce=P.map((ve,Ee)=>{var Me,ze,Ke,mt;if(Z)mt=d[C+Ee];else{var zt=$a(ve,a);Array.isArray(zt)?(mt=zt,oe=!0):mt=[H,zt]}var Ge=(Me=(ze=mt)===null||ze===void 0?void 0:ze[1])!==null&&Me!==void 0?Me:null,Te=Ge==null||Z&&!t&&$a(ve,a)==null;if(U){var dt;return{x:tM({axis:c,ticks:I,bandSize:G,entry:ve,index:Ee}),y:Te?null:(dt=A.scale.map(Ge))!==null&&dt!==void 0?dt:null,value:mt,payload:ve}}return{x:Te?null:(Ke=c.scale.map(Ge))!==null&&Ke!==void 0?Ke:null,y:tM({axis:A,ticks:B,bandSize:G,entry:ve,index:Ee}),value:mt,payload:ve}}),fe;return Z||oe?fe=ce.map(ve=>{var Ee,Me=Array.isArray(ve.value)?ve.value[0]:null;if(U){var ze;return{x:ve.x,y:Me!=null&&ve.y!=null&&(ze=A.scale.map(Me))!==null&&ze!==void 0?ze:null,payload:ve.payload}}return{x:Me!=null&&(Ee=c.scale.map(Me))!==null&&Ee!==void 0?Ee:null,y:ve.y,payload:ve.payload}}):fe=U?A.scale.map(H):c.scale.map(H),{points:ce,baseLine:fe??0,isRange:oe}}function WH(e){var t=el(e,Fk),i=_s();return X.createElement(E$,{id:t.id,type:"area"},a=>X.createElement(X.Fragment,null,X.createElement(b$,{legendPayload:BH(t)}),X.createElement(jH,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),X.createElement(O$,{type:"area",id:a,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:Cj(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:i,connectNulls:t.connectNulls}),X.createElement(HH,Qp({},t,{id:a}))))}var z0=X.memo(WH,UT);z0.displayName="Area";var KH=["domain","range"],QH=["domain","range"];function KC(e,t){if(e==null)return{};var i,a,d=JH(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function JH(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function QC(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function Uk(e,t){if(e===t)return!0;var{domain:i,range:a}=e,d=KC(e,KH),{domain:g,range:y}=t,c=KC(t,QH);return!QC(i,g)||!QC(a,y)?!1:UT(d,c)}var eY=["type"],tY=["dangerouslySetInnerHTML","ticks","scale"],rY=["id","scale"];function H2(){return H2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},H2.apply(null,arguments)}function JC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function eD(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(i),!0).forEach(function(a){nY(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function nY(e,t,i){return(t=iY(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iY(e){var t=aY(e,"string");return typeof t=="symbol"?t:t+""}function aY(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y2(e,t){if(e==null)return{};var i,a,d=oY(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function oY(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function sY(e){var t=pa(),i=X.useRef(null),a=zS(),{type:d}=e,g=Y2(e,eY),y=Ix(a,"xAxis",d),c=X.useMemo(()=>{if(y!=null)return eD(eD({},g),{},{type:y})},[g,y]);return X.useLayoutEffect(()=>{c!=null&&(i.current===null?t(Z$(c)):i.current!==c&&t(H$({prev:i.current,next:c})),i.current=c)},[c,t]),X.useLayoutEffect(()=>()=>{i.current&&(t(Y$(i.current)),i.current=null)},[t]),null}var lY=e=>{var{xAxisId:t,className:i}=e,a=dr(MO),d=_s(),g="xAxis",y=dr(oe=>Dz(oe,g,t,d)),c=dr(oe=>zU(oe,t)),A=dr(oe=>NU(oe,t)),P=dr(oe=>X3(oe,t));if(c==null||A==null||P==null)return null;var{dangerouslySetInnerHTML:C,ticks:I,scale:B}=e,G=Y2(e,tY),{id:Z,scale:H}=P,U=Y2(P,rY);return X.createElement(FT,H2({},G,U,{x:A.x,y:A.y,width:c.width,height:c.height,className:Wn("recharts-".concat(g," ").concat(g),i),viewBox:a,ticks:y,axisType:g}))},cY={allowDataOverflow:ua.allowDataOverflow,allowDecimals:ua.allowDecimals,allowDuplicatedCategory:ua.allowDuplicatedCategory,angle:ua.angle,axisLine:nf.axisLine,height:ua.height,hide:!1,includeHidden:ua.includeHidden,interval:ua.interval,label:!1,minTickGap:ua.minTickGap,mirror:ua.mirror,orientation:ua.orientation,padding:ua.padding,reversed:ua.reversed,scale:ua.scale,tick:ua.tick,tickCount:ua.tickCount,tickLine:nf.tickLine,tickSize:nf.tickSize,type:ua.type,xAxisId:0},uY=e=>{var t=el(e,cY);return X.createElement(X.Fragment,null,X.createElement(sY,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),X.createElement(lY,t))},Vk=X.memo(uY,Uk);Vk.displayName="XAxis";var hY=["type"],fY=["dangerouslySetInnerHTML","ticks","scale"],dY=["id","scale"];function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},X2.apply(null,arguments)}function tD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function rD(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tD(Object(i),!0).forEach(function(a){pY(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function pY(e,t,i){return(t=mY(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mY(e){var t=gY(e,"string");return typeof t=="symbol"?t:t+""}function gY(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W2(e,t){if(e==null)return{};var i,a,d=yY(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function yY(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function vY(e){var t=pa(),i=X.useRef(null),a=zS(),{type:d}=e,g=W2(e,hY),y=Ix(a,"yAxis",d),c=X.useMemo(()=>{if(y!=null)return rD(rD({},g),{},{type:y})},[y,g]);return X.useLayoutEffect(()=>{c!=null&&(i.current===null?t(X$(c)):i.current!==c&&t(W$({prev:i.current,next:c})),i.current=c)},[c,t]),X.useLayoutEffect(()=>()=>{i.current&&(t(K$(i.current)),i.current=null)},[t]),null}function _Y(e){var{yAxisId:t,className:i,width:a,label:d}=e,g=X.useRef(null),y=X.useRef(null),c=dr(MO),A=_s(),P=pa(),C="yAxis",I=dr(Me=>VU(Me,t)),B=dr(Me=>UU(Me,t)),G=dr(Me=>Dz(Me,C,t,A)),Z=dr(Me=>W3(Me,t));if(X.useLayoutEffect(()=>{if(!(a!=="auto"||!I||BT(d)||X.isValidElement(d)||Z==null)){var Me=g.current;if(Me){var ze=Me.getCalculatedWidth();Math.round(I.width)!==Math.round(ze)&&P(Q$({id:t,width:ze}))}}},[G,I,P,d,t,a,Z]),I==null||B==null||Z==null)return null;var{dangerouslySetInnerHTML:H,ticks:U,scale:oe}=e,ce=W2(e,fY),{id:fe,scale:ve}=Z,Ee=W2(Z,dY);return X.createElement(FT,X2({},ce,Ee,{ref:g,labelRef:y,x:B.x,y:B.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:I.width,height:I.height,className:Wn("recharts-".concat(C," ").concat(C),i),viewBox:c,ticks:G,axisType:C}))}var bY={allowDataOverflow:ha.allowDataOverflow,allowDecimals:ha.allowDecimals,allowDuplicatedCategory:ha.allowDuplicatedCategory,angle:ha.angle,axisLine:nf.axisLine,hide:!1,includeHidden:ha.includeHidden,interval:ha.interval,label:!1,minTickGap:ha.minTickGap,mirror:ha.mirror,orientation:ha.orientation,padding:ha.padding,reversed:ha.reversed,scale:ha.scale,tick:ha.tick,tickCount:ha.tickCount,tickLine:nf.tickLine,tickSize:nf.tickSize,type:ha.type,width:ha.width,yAxisId:0},xY=e=>{var t=el(e,bY);return X.createElement(X.Fragment,null,X.createElement(vY,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),X.createElement(_Y,t))},Gk=X.memo(xY,Uk);Gk.displayName="YAxis";var wY=(e,t)=>t,qT=ut([wY,ri,H3,ya,Yz,_f,rG,Za],cG),$T=e=>{var t=e.currentTarget.getBoundingClientRect(),i=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/i),chartY:Math.round((e.clientY-t.top)/a)}},qk=Fl("mouseClick"),$k=sv();$k.startListening({actionCreator:qk,effect:(e,t)=>{var i=e.payload,a=qT(t.getState(),$T(i));a?.activeIndex!=null&&t.dispatch(tV({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var K2=Fl("mouseMove"),Zk=sv(),V_=null;Zk.startListening({actionCreator:K2,effect:(e,t)=>{var i=e.payload;V_!==null&&cancelAnimationFrame(V_);var a=$T(i);V_=requestAnimationFrame(()=>{var d=t.getState(),g=AT(d,d.tooltip.settings.shared);if(g==="axis"){var y=qT(d,a);y?.activeIndex!=null?t.dispatch(Nz({activeIndex:y.activeIndex,activeDataKey:void 0,activeCoordinate:y.activeCoordinate})):t.dispatch(jz())}V_=null})}});function SY(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var nD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Hk=vs({name:"rootProps",initialState:nD,reducers:{updateOptions:(e,t)=>{var i;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(i=t.payload.barGap)!==null&&i!==void 0?i:nD.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),TY=Hk.reducer,{updateOptions:EY}=Hk.actions,AY=null,MY={updatePolarOptions:(e,t)=>t.payload},Yk=vs({name:"polarOptions",initialState:AY,reducers:MY}),{updatePolarOptions:iQ}=Yk.actions,PY=Yk.reducer,Xk=Fl("keyDown"),Wk=Fl("focus"),ZT=sv();ZT.startListening({actionCreator:Xk,effect:(e,t)=>{var i=t.getState(),a=i.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:d}=i.tooltip,g=e.payload;if(!(g!=="ArrowRight"&&g!=="ArrowLeft"&&g!=="Enter")){var y=MT(d,gy(i),vv(i),bv(i)),c=y==null?-1:Number(y);if(!(!Number.isFinite(c)||c<0)){var A=_f(i);if(g==="Enter"){var P=$b(i,"axis","hover",String(d.index));t.dispatch(V2({active:!d.active,activeIndex:d.index,activeCoordinate:P}));return}var C=ZU(i),I=C==="left-to-right"?1:-1,B=g==="ArrowRight"?1:-1,G=c+B*I;if(!(A==null||G>=A.length||G<0)){var Z=$b(i,"axis","hover",String(G));t.dispatch(V2({active:!0,activeIndex:G.toString(),activeCoordinate:Z}))}}}}}});ZT.startListening({actionCreator:Wk,effect:(e,t)=>{var i=t.getState(),a=i.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:d}=i.tooltip;if(!d.active&&d.index==null){var g="0",y=$b(i,"axis","hover",String(g));t.dispatch(V2({active:!0,activeIndex:g,activeCoordinate:y}))}}}});var Ll=Fl("externalEvent"),Kk=sv(),Zw=new Map;Kk.startListening({actionCreator:Ll,effect:(e,t)=>{var{handler:i,reactEvent:a}=e.payload;if(i!=null){a.persist();var d=a.type,g=Zw.get(d);g!==void 0&&cancelAnimationFrame(g);var y=requestAnimationFrame(()=>{try{var c=t.getState(),A={activeCoordinate:UV(c),activeDataKey:NV(c),activeIndex:Q0(c),activeLabel:Kz(c),activeTooltipIndex:Q0(c),isTooltipActive:VV(c)};i(A,a)}finally{Zw.delete(d)}});Zw.set(d,y)}}});var CY=ut([py],e=>e.tooltipItemPayloads),DY=ut([CY,(e,t)=>t,(e,t,i)=>i],(e,t,i)=>{if(t!=null){var a=e.find(g=>g.settings.graphicalItemId===i);if(a!=null){var{getPosition:d}=a;if(d!=null)return d(t)}}}),Qk=Fl("touchMove"),Jk=sv();Jk.startListening({actionCreator:Qk,effect:(e,t)=>{var i=e.payload;if(!(i.touches==null||i.touches.length===0)){var a=t.getState(),d=AT(a,a.tooltip.settings.shared);if(d==="axis"){var g=i.touches[0];if(g==null)return;var y=qT(a,$T({clientX:g.clientX,clientY:g.clientY,currentTarget:i.currentTarget}));y?.activeIndex!=null&&t.dispatch(Nz({activeIndex:y.activeIndex,activeDataKey:void 0,activeCoordinate:y.activeCoordinate}))}else if(d==="item"){var c,A=i.touches[0];if(document.elementFromPoint==null||A==null)return;var P=document.elementFromPoint(A.clientX,A.clientY);if(!P||!P.getAttribute)return;var C=P.getAttribute(Lj),I=(c=P.getAttribute(Bj))!==null&&c!==void 0?c:void 0,B=my(a).find(H=>H.id===I);if(C==null||B==null||I==null)return;var{dataKey:G}=B,Z=DY(a,C,I);t.dispatch(eV({activeDataKey:G,activeIndex:C,activeCoordinate:Z,activeGraphicalItemId:I}))}}}});var IY=YI({brush:lZ,cartesianAxis:J$,chartData:UG,errorBars:rH,graphicalItems:D$,layout:bj,legend:P8,options:LG,polarAxis:y$,polarOptions:PY,referenceElements:fZ,rootProps:TY,tooltip:rV,zIndex:SG}),OY=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return $B({reducer:IY,preloadedState:t,middleware:a=>{var d;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((d="es6")!==null&&d!==void 0?d:"")}).concat([$k.middleware,Zk.middleware,ZT.middleware,Kk.middleware,Jk.middleware])},enhancers:a=>{var d=a;return typeof a=="function"&&(d=a()),d.concat(cO({type:"raf"}))},devTools:{serialize:{replacer:SY},name:"recharts-".concat(i)}})};function zY(e){var{preloadedState:t,children:i,reduxStoreName:a}=e,d=_s(),g=X.useRef(null);if(d)return i;g.current==null&&(g.current=OY(t,a));var y=TS;return X.createElement(wH,{context:y,store:g.current},i)}function kY(e){var{layout:t,margin:i}=e,a=pa(),d=_s();return X.useEffect(()=>{d||(a(yj(t)),a(gj(i)))},[a,d,t,i]),null}var RY=X.memo(kY,UT);function LY(e){var t=pa();return X.useEffect(()=>{t(EY(e))},[t,e]),null}function iD(e){var{zIndex:t,isPanorama:i}=e,a=X.useRef(null),d=pa();return X.useLayoutEffect(()=>(a.current&&d(xG({zIndex:t,element:a.current,isPanorama:i})),()=>{d(wG({zIndex:t,isPanorama:i}))}),[d,t,i]),X.createElement("g",{tabIndex:-1,ref:a})}function aD(e){var{children:t,isPanorama:i}=e,a=dr(hG);if(!a||a.length===0)return t;var d=a.filter(y=>y<0),g=a.filter(y=>y>0);return X.createElement(X.Fragment,null,d.map(y=>X.createElement(iD,{key:y,zIndex:y,isPanorama:i})),t,g.map(y=>X.createElement(iD,{key:y,zIndex:y,isPanorama:i})))}var BY=["children"];function jY(e,t){if(e==null)return{};var i,a,d=NY(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function NY(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function Wb(){return Wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Wb.apply(null,arguments)}var FY={width:"100%",height:"100%",display:"block"},UY=X.forwardRef((e,t)=>{var i=OO(),a=zO(),d=VO();if(!Zu(i)||!Zu(a))return null;var{children:g,otherAttributes:y,title:c,desc:A}=e,P,C;return y!=null&&(typeof y.tabIndex=="number"?P=y.tabIndex:P=d?0:void 0,typeof y.role=="string"?C=y.role:C=d?"application":void 0),X.createElement(gI,Wb({},y,{title:c,desc:A,role:C,tabIndex:P,width:i,height:a,style:FY,ref:t}),g)}),VY=e=>{var{children:t}=e,i=dr(vx);if(!i)return null;var{width:a,height:d,y:g,x:y}=i;return X.createElement(gI,{width:a,height:d,x:y,y:g},t)},oD=X.forwardRef((e,t)=>{var{children:i}=e,a=jY(e,BY),d=_s();return d?X.createElement(VY,null,X.createElement(aD,{isPanorama:!0},i)):X.createElement(UY,Wb({ref:t},a),X.createElement(aD,{isPanorama:!1},i))});function GY(){var e=pa(),[t,i]=X.useState(null),a=dr(Rj);return X.useEffect(()=>{if(t!=null){var d=t.getBoundingClientRect(),g=d.width/t.offsetWidth;Fr(g)&&g!==a&&e(_j(g))}},[t,e,a]),i}function sD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function qY(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sD(Object(i),!0).forEach(function(a){$Y(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function $Y(e,t,i){return(t=ZY(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ZY(e){var t=HY(e,"string");return typeof t=="symbol"?t:t+""}function HY(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Td.apply(null,arguments)}var YY=()=>(WG(),null);function Kb(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var XY=X.forwardRef((e,t)=>{var i,a,d=X.useRef(null),[g,y]=X.useState({containerWidth:Kb((i=e.style)===null||i===void 0?void 0:i.width),containerHeight:Kb((a=e.style)===null||a===void 0?void 0:a.height)}),c=X.useCallback((P,C)=>{y(I=>{var B=Math.round(P),G=Math.round(C);return I.containerWidth===B&&I.containerHeight===G?I:{containerWidth:B,containerHeight:G}})},[]),A=X.useCallback(P=>{if(typeof t=="function"&&t(P),P!=null&&typeof ResizeObserver<"u"){var{width:C,height:I}=P.getBoundingClientRect();c(C,I);var B=Z=>{var H=Z[0];if(H!=null){var{width:U,height:oe}=H.contentRect;c(U,oe)}},G=new ResizeObserver(B);G.observe(P),d.current=G}},[t,c]);return X.useEffect(()=>()=>{var P=d.current;P?.disconnect()},[c]),X.createElement(X.Fragment,null,X.createElement(cv,{width:g.containerWidth,height:g.containerHeight}),X.createElement("div",Td({ref:A},e)))}),WY=X.forwardRef((e,t)=>{var{width:i,height:a}=e,[d,g]=X.useState({containerWidth:Kb(i),containerHeight:Kb(a)}),y=X.useCallback((A,P)=>{g(C=>{var I=Math.round(A),B=Math.round(P);return C.containerWidth===I&&C.containerHeight===B?C:{containerWidth:I,containerHeight:B}})},[]),c=X.useCallback(A=>{if(typeof t=="function"&&t(A),A!=null){var{width:P,height:C}=A.getBoundingClientRect();y(P,C)}},[t,y]);return X.createElement(X.Fragment,null,X.createElement(cv,{width:d.containerWidth,height:d.containerHeight}),X.createElement("div",Td({ref:c},e)))}),KY=X.forwardRef((e,t)=>{var{width:i,height:a}=e;return X.createElement(X.Fragment,null,X.createElement(cv,{width:i,height:a}),X.createElement("div",Td({ref:t},e)))}),QY=X.forwardRef((e,t)=>{var{width:i,height:a}=e;return typeof i=="string"||typeof a=="string"?X.createElement(WY,Td({},e,{ref:t})):typeof i=="number"&&typeof a=="number"?X.createElement(KY,Td({},e,{width:i,height:a,ref:t})):X.createElement(X.Fragment,null,X.createElement(cv,{width:i,height:a}),X.createElement("div",Td({ref:t},e)))});function JY(e){return e?XY:QY}var eX=X.forwardRef((e,t)=>{var{children:i,className:a,height:d,onClick:g,onContextMenu:y,onDoubleClick:c,onMouseDown:A,onMouseEnter:P,onMouseLeave:C,onMouseMove:I,onMouseUp:B,onTouchEnd:G,onTouchMove:Z,onTouchStart:H,style:U,width:oe,responsive:ce,dispatchTouchEvents:fe=!0}=e,ve=X.useRef(null),Ee=pa(),[Me,ze]=X.useState(null),[Ke,mt]=X.useState(null),zt=GY(),Ge=IS(),Te=Ge?.width>0?Ge.width:oe,dt=Ge?.height>0?Ge.height:d,It=X.useCallback(pt=>{zt(pt),typeof t=="function"&&t(pt),ze(pt),mt(pt),pt!=null&&(ve.current=pt)},[zt,t,ze,mt]),Rt=X.useCallback(pt=>{Ee(qk(pt)),Ee(Ll({handler:g,reactEvent:pt}))},[Ee,g]),Ve=X.useCallback(pt=>{Ee(K2(pt)),Ee(Ll({handler:P,reactEvent:pt}))},[Ee,P]),it=X.useCallback(pt=>{Ee(jz()),Ee(Ll({handler:C,reactEvent:pt}))},[Ee,C]),Mt=X.useCallback(pt=>{Ee(K2(pt)),Ee(Ll({handler:I,reactEvent:pt}))},[Ee,I]),Be=X.useCallback(()=>{Ee(Wk())},[Ee]),yt=X.useCallback(pt=>{Ee(Xk(pt.key))},[Ee]),Ae=X.useCallback(pt=>{Ee(Ll({handler:y,reactEvent:pt}))},[Ee,y]),qe=X.useCallback(pt=>{Ee(Ll({handler:c,reactEvent:pt}))},[Ee,c]),ct=X.useCallback(pt=>{Ee(Ll({handler:A,reactEvent:pt}))},[Ee,A]),wt=X.useCallback(pt=>{Ee(Ll({handler:B,reactEvent:pt}))},[Ee,B]),jt=X.useCallback(pt=>{Ee(Ll({handler:H,reactEvent:pt}))},[Ee,H]),$t=X.useCallback(pt=>{fe&&Ee(Qk(pt)),Ee(Ll({handler:Z,reactEvent:pt}))},[Ee,fe,Z]),Ft=X.useCallback(pt=>{Ee(Ll({handler:G,reactEvent:pt}))},[Ee,G]),Tr=JY(ce);return X.createElement(ak.Provider,{value:Me},X.createElement(Z6.Provider,{value:Ke},X.createElement(Tr,{width:Te??U?.width,height:dt??U?.height,className:Wn("recharts-wrapper",a),style:qY({position:"relative",cursor:"default",width:Te,height:dt},U),onClick:Rt,onContextMenu:Ae,onDoubleClick:qe,onFocus:Be,onKeyDown:yt,onMouseDown:ct,onMouseEnter:Ve,onMouseLeave:it,onMouseMove:Mt,onMouseUp:wt,onTouchEnd:Ft,onTouchMove:$t,onTouchStart:jt,ref:It},X.createElement(YY,null),i)))}),tX=["width","height","responsive","children","className","style","compact","title","desc"];function rX(e,t){if(e==null)return{};var i,a,d=nX(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function nX(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var iX=X.forwardRef((e,t)=>{var{width:i,height:a,responsive:d,children:g,className:y,style:c,compact:A,title:P,desc:C}=e,I=rX(e,tX),B=Vc(I);return A?X.createElement(X.Fragment,null,X.createElement(cv,{width:i,height:a}),X.createElement(oD,{otherAttributes:B,title:P,desc:C},g)):X.createElement(eX,{className:y,style:c,width:i,height:a,responsive:d??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},X.createElement(oD,{otherAttributes:B,title:P,desc:C,ref:t},X.createElement(pZ,null,g)))});function Q2(){return Q2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Q2.apply(null,arguments)}var aX={top:5,right:5,bottom:5,left:5},oX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:aX,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},sX=X.forwardRef(function(t,i){var a,d=el(t.categoricalChartProps,oX),{chartName:g,defaultTooltipEventType:y,validateTooltipEventTypes:c,tooltipPayloadSearcher:A,categoricalChartProps:P}=t,C={chartName:g,defaultTooltipEventType:y,validateTooltipEventTypes:c,tooltipPayloadSearcher:A,eventEmitter:void 0};return X.createElement(zY,{preloadedState:{options:C},reduxStoreName:(a=P.id)!==null&&a!==void 0?a:g},X.createElement(sZ,{chartData:P.data}),X.createElement(RY,{layout:d.layout,margin:d.margin}),X.createElement(LY,{baseValue:d.baseValue,accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className,reverseStackOrder:d.reverseStackOrder}),X.createElement(iX,Q2({},d,{ref:i})))}),lX=["axis"],Hw=X.forwardRef((e,t)=>X.createElement(sX,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lX,tooltipPayloadSearcher:kG,categoricalChartProps:e,ref:t}));let cX=new uS;Bc.addProtocol("pmtiles",cX.tile);const lD="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/unfpa_od_population_data.pmtiles",uX=({activeLayer:e,selectedYear:t="2023",onDistrictClick:i,gender:a="All",region:d="All",onBoundsChange:g})=>{const y=X.useRef(null),c=X.useRef(null),A=X.useRef(null),[P]=X.useState(null),C=X.useRef(i),I=X.useRef(g);X.useEffect(()=>{C.current=i,I.current=g},[i,g]);const B={version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-satellite":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri, Maxar, Earthstar Geographics"}},layers:[{id:"background",type:"background",paint:{"background-color":"#000"}},{id:"esri-satellite-layer",type:"raster",source:"esri-satellite",minzoom:0,maxzoom:22}]},G=H=>{if(H.getSource("population-source")||H.addSource("population-source",{type:"vector",url:`pmtiles://${lD}`}),!H.getLayer("districts-fill")){let U=["get",`pop_${t}_sum`],oe=[0,1e6,2e6];a==="Male"?U=["get",`male_${t}`]:a==="Female"&&(U=["get",`female_${t}`]),a!=="All"&&(oe=[0,50,100]),H.addLayer({id:"districts-fill",type:"fill",source:"population-source","source-layer":"zcta",paint:{"fill-color":["interpolate",["linear"],U,oe[0],"#FEF2E8",oe[1],"#F58220",oe[2],"#D66B12"],"fill-opacity":.9,"fill-outline-color":"#FFFFFF"},layout:{visibility:e==="population"?"visible":"none"}}),H.addLayer({id:"districts-border",type:"line",source:"population-source","source-layer":"zcta",paint:{"line-color":"#FFFFFF","line-width":.8,"line-opacity":.8},layout:{visibility:e==="population"?"visible":"none"}}),H.addLayer({id:"districts-interactive",type:"fill",source:"population-source","source-layer":"zcta",paint:{"fill-opacity":0,"fill-color":"#FFFFFF"}}),H.on("click","districts-interactive",ce=>{if(ce.features&&ce.features.length>0){const fe=ce.features[0],ve=fe.properties;if(C.current&&C.current(ve),fe.geometry){const Ee=new Bc.LngLatBounds,Me=ze=>{Array.isArray(ze[0])?ze.forEach(Ke=>Me(Ke)):Ee.extend(ze)};Me(fe.geometry.coordinates),Ee.isEmpty()||(console.log("Broadcasting bounds:",Ee.toArray()),H.fitBounds(Ee,{padding:80,duration:1200,essential:!0}),I.current&&I.current(Ee.toArray()))}}}),H.on("mouseenter","districts-interactive",()=>{H.getCanvas().style.cursor="pointer"}),H.on("mouseleave","districts-interactive",()=>{H.getCanvas().style.cursor=""})}};X.useEffect(()=>{if(!y.current)return;const H=new Bc.Map({container:y.current,style:B,center:[85.8245,20.2961],zoom:5,attributionControl:!1,interactive:!0});return H.on("load",async()=>{H.resize();try{const oe=await new Wg(lD).getHeader();if(oe.minLon!==void 0){const ce=[[oe.minLon,oe.minLat],[oe.maxLon,oe.maxLat]];A.current=ce,H.fitBounds(ce,{padding:40,duration:0})}}catch(U){console.warn("Could not auto-center from PMTiles header",U)}G(H)}),c.current=H,()=>{c.current?.remove(),c.current=null}},[]),X.useEffect(()=>{c.current?.getLayer("districts-fill")&&c.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none"),c.current?.getLayer("districts-border")&&c.current.setLayoutProperty("districts-border","visibility",e==="population"?"visible":"none")},[e]),X.useEffect(()=>{if(c.current?.getLayer("districts-fill")){let H,U;if(a==="Male"?(H=`male_${t}`,U=[45,50,55]):a==="Female"?(H=`female_${t}`,U=[45,50,55]):(H=`pop_${t}_sum`,U=[1e5,1e6,25e5]),P&&P[H]){const oe=P[H];if(oe.min!==void 0&&oe.max!==void 0){const ce=Number(oe.min),fe=Number(oe.max);U=[ce,ce+(fe-ce)/2,fe]}}c.current.setPaintProperty("districts-fill","fill-color",["interpolate",["linear"],["get",H],U[0],"#FEF2E8",U[1],"#F58220",U[2],"#D66B12"]),c.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none")}},[t,a,e,P]),X.useEffect(()=>{if(c.current?.getLayer("districts-fill")){const H=d==="All"?null:["==",["get","region"],d];c.current.setFilter("districts-fill",H),c.current?.getLayer("districts-border")&&c.current.setFilter("districts-border",H)}},[d]);const Z=()=>{c.current&&A.current&&(c.current.fitBounds(A.current,{padding:40,duration:1e3}),I.current&&I.current(null))};return re.jsxs("div",{className:"relative w-full h-full bg-black",children:[re.jsx("div",{ref:y,className:"w-full h-full"}),re.jsx("button",{onClick:Z,className:"absolute top-4 right-4 z-10 p-2 bg-white/10 backdrop-blur-md border border-white/20 rounded-lg text-white hover:bg-white/20 transition-all shadow-lg",title:"Reset View",children:re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[re.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),re.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})})]})};function Ha(e){return(t,...i)=>hX(e,t,i)}function yy(e,t){return Ha(e5(e,t).get)}const{apply:hX,getOwnPropertyDescriptor:e5,getPrototypeOf:HT,ownKeys:fX}=Reflect,{iterator:wv,toStringTag:dX}=Symbol,pX=Object,{create:YT,defineProperty:mX}=pX,gX=Array,yX=gX.prototype,t5=yX[wv],vX=Ha(t5),r5=ArrayBuffer,_X=r5.prototype;yy(_X,"byteLength");const cD=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:null;cD&&yy(cD.prototype,"byteLength");const n5=HT(Uint8Array);n5.from;const Fo=n5.prototype;Fo[wv];Ha(Fo.keys);Ha(Fo.values);Ha(Fo.entries);Ha(Fo.set);Ha(Fo.reverse);Ha(Fo.fill);Ha(Fo.copyWithin);Ha(Fo.sort);Ha(Fo.slice);Ha(Fo.subarray);yy(Fo,"buffer");yy(Fo,"byteOffset");yy(Fo,"length");yy(Fo,dX);const bX=Uint8Array,i5=Uint16Array,XT=Uint32Array,xX=Float32Array,tv=HT([][wv]()),a5=Ha(tv.next),wX=Ha((function*(){})().next),SX=HT(tv),TX=DataView.prototype,EX=Ha(TX.getUint16),WT=WeakMap,o5=WT.prototype,s5=Ha(o5.get),AX=Ha(o5.set),l5=new WT,MX=YT(null,{next:{value:function(){const t=s5(l5,this);return a5(t)}},[wv]:{value:function(){return this}}});function PX(e){if(e[wv]===t5&&tv.next===a5)return e;const t=YT(MX);return AX(l5,t,vX(e)),t}const CX=new WT,DX=YT(SX,{next:{value:function(){const t=s5(CX,this);return wX(t)},writable:!0,configurable:!0}});for(const e of fX(tv))e!=="next"&&mX(DX,e,e5(tv,e));const c5=new r5(4),IX=new xX(c5),OX=new XT(c5),Ru=new i5(512),Lu=new bX(512);for(let e=0;e<256;++e){const t=e-127;t<-24?(Ru[e]=0,Ru[e|256]=32768,Lu[e]=24,Lu[e|256]=24):t<-14?(Ru[e]=1024>>-t-14,Ru[e|256]=1024>>-t-14|32768,Lu[e]=-t-1,Lu[e|256]=-t-1):t<=15?(Ru[e]=t+15<<10,Ru[e|256]=t+15<<10|32768,Lu[e]=13,Lu[e|256]=13):t<128?(Ru[e]=31744,Ru[e|256]=64512,Lu[e]=24,Lu[e|256]=24):(Ru[e]=31744,Ru[e|256]=64512,Lu[e]=13,Lu[e|256]=13)}const KT=new XT(2048);for(let e=1;e<1024;++e){let t=e<<13,i=0;for(;(t&8388608)===0;)t<<=1,i-=8388608;t&=-8388609,i+=947912704,KT[e]=t|i}for(let e=1024;e<2048;++e)KT[e]=939524096+(e-1024<<13);const vy=new XT(64);for(let e=1;e<31;++e)vy[e]=e<<23;vy[31]=1199570944;vy[32]=2147483648;for(let e=33;e<63;++e)vy[e]=2147483648+(e-32<<23);vy[63]=3347054592;const u5=new i5(64);for(let e=1;e<64;++e)e!==32&&(u5[e]=1024);function zX(e){const t=e>>10;return OX[0]=KT[u5[t]+(e&1023)]+vy[t],IX[0]}function h5(e,t,...i){return zX(EX(e,t,...PX(i)))}var G_={exports:{}},uD;function kX(){if(uD)return G_.exports;uD=1;function e(t,i,a){const d=a&&a.debug||!1;d&&console.log("[xml-utils] getting "+i+" in "+t);const g=typeof t=="object"?t.outer:t,y=g.slice(0,g.indexOf(">")+1),c=['"',"'"];for(let A=0;A<c.length;A++){const P=c[A],C=i+"\\="+P+"([^"+P+"]*)"+P;d&&console.log("[xml-utils] pattern:",C);const B=new RegExp(C).exec(y);if(d&&console.log("[xml-utils] match:",B),B)return B[1]}}return G_.exports=e,G_.exports.default=e,G_.exports}var RX=kX();const Yw=Vl(RX);var q_={exports:{}},$_={exports:{}},Z_={exports:{}},hD;function LX(){if(hD)return Z_.exports;hD=1;function e(t,i,a){const g=new RegExp(i).exec(t.slice(a));return g?a+g.index:-1}return Z_.exports=e,Z_.exports.default=e,Z_.exports}var H_={exports:{}},fD;function BX(){if(fD)return H_.exports;fD=1;function e(t,i,a){const g=new RegExp(i).exec(t.slice(a));return g?a+g.index+g[0].length-1:-1}return H_.exports=e,H_.exports.default=e,H_.exports}var Y_={exports:{}},dD;function jX(){if(dD)return Y_.exports;dD=1;function e(t,i){const a=new RegExp(i,"g"),d=t.match(a);return d?d.length:0}return Y_.exports=e,Y_.exports.default=e,Y_.exports}var pD;function NX(){if(pD)return $_.exports;pD=1;const e=LX(),t=BX(),i=jX();function a(d,g,y){const c=y&&y.debug||!1,A=!(y&&typeof y.nested===!1),P=y&&y.startIndex||0;c&&console.log("[xml-utils] starting findTagByName with",g," and ",y);const C=e(d,`<${g}[ 
>/]`,P);if(c&&console.log("[xml-utils] start:",C),C===-1)return;const I=d.slice(C+g.length);let B=t(I,"^[^<]*[ /]>",0);const G=B!==-1&&I[B-1]==="/";if(c&&console.log("[xml-utils] selfClosing:",G),G===!1)if(A){let oe=0,ce=1,fe=0;for(;(B=t(I,"[ /]"+g+">",oe))!==-1;){const ve=I.substring(oe,B+1);if(ce+=i(ve,"<"+g+`[ 
	>]`),fe+=i(ve,"</"+g+">"),fe>=ce)break;oe=B}}else B=t(I,"[ /]"+g+">",0);const Z=C+g.length+B+1;if(c&&console.log("[xml-utils] end:",Z),Z===-1)return;const H=d.slice(C,Z);let U;return G?U=null:U=H.slice(H.indexOf(">")+1,H.lastIndexOf("<")),{inner:U,outer:H,start:C,end:Z}}return $_.exports=a,$_.exports.default=a,$_.exports}var mD;function FX(){if(mD)return q_.exports;mD=1;const e=NX();function t(i,a,d){const g=[],y=d&&d.debug||!1,c=d&&typeof d.nested=="boolean"?d.nested:!0;let A=d&&d.startIndex||0,P;for(;P=e(i,a,{debug:y,startIndex:A});)c?A=P.start+1+a.length:A=P.end,g.push(P);return y&&console.log("findTagsByName found",g.length,"tags"),g}return q_.exports=t,q_.exports.default=t,q_.exports}var UX=FX();const VX=Vl(UX),B0={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},Bu={};for(const e in B0)B0.hasOwnProperty(e)&&(Bu[B0[e]]=parseInt(e,10));const GX=[Bu.BitsPerSample,Bu.ExtraSamples,Bu.SampleFormat,Bu.StripByteCounts,Bu.StripOffsets,Bu.StripRowCounts,Bu.TileByteCounts,Bu.TileOffsets,Bu.SubIFDs],Xw={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},Er={};for(const e in Xw)Xw.hasOwnProperty(e)&&(Er[Xw[e]]=parseInt(e,10));const Zs={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,CMYK:5,YCbCr:6,CIELab:8},qX={Unspecified:0},aQ={AddCompression:1},oQ={None:0,Deflate:1,Zstandard:2},$X={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};function ZX(e,t){const{width:i,height:a}=e,d=new Uint8Array(i*a*3);let g;for(let y=0,c=0;y<e.length;++y,c+=3)g=256-e[y]/t*256,d[c]=g,d[c+1]=g,d[c+2]=g;return d}function HX(e,t){const{width:i,height:a}=e,d=new Uint8Array(i*a*3);let g;for(let y=0,c=0;y<e.length;++y,c+=3)g=e[y]/t*256,d[c]=g,d[c+1]=g,d[c+2]=g;return d}function YX(e,t){const{width:i,height:a}=e,d=new Uint8Array(i*a*3),g=t.length/3,y=t.length/3*2;for(let c=0,A=0;c<e.length;++c,A+=3){const P=e[c];d[A]=t[P]/65536*256,d[A+1]=t[P+g]/65536*256,d[A+2]=t[P+y]/65536*256}return d}function XX(e){const{width:t,height:i}=e,a=new Uint8Array(t*i*3);for(let d=0,g=0;d<e.length;d+=4,g+=3){const y=e[d],c=e[d+1],A=e[d+2],P=e[d+3];a[g]=255*((255-y)/256)*((255-P)/256),a[g+1]=255*((255-c)/256)*((255-P)/256),a[g+2]=255*((255-A)/256)*((255-P)/256)}return a}function WX(e){const{width:t,height:i}=e,a=new Uint8ClampedArray(t*i*3);for(let d=0,g=0;d<e.length;d+=3,g+=3){const y=e[d],c=e[d+1],A=e[d+2];a[g]=y+1.402*(A-128),a[g+1]=y-.34414*(c-128)-.71414*(A-128),a[g+2]=y+1.772*(c-128)}return a}const KX=.95047,QX=1,JX=1.08883;function eW(e){const{width:t,height:i}=e,a=new Uint8Array(t*i*3);for(let d=0,g=0;d<e.length;d+=3,g+=3){const y=e[d+0],c=e[d+1]<<24>>24,A=e[d+2]<<24>>24;let P=(y+16)/116,C=c/500+P,I=P-A/200,B,G,Z;C=KX*(C*C*C>.008856?C*C*C:(C-16/116)/7.787),P=QX*(P*P*P>.008856?P*P*P:(P-16/116)/7.787),I=JX*(I*I*I>.008856?I*I*I:(I-16/116)/7.787),B=C*3.2406+P*-1.5372+I*-.4986,G=C*-.9689+P*1.8758+I*.0415,Z=C*.0557+P*-.204+I*1.057,B=B>.0031308?1.055*B**(1/2.4)-.055:12.92*B,G=G>.0031308?1.055*G**(1/2.4)-.055:12.92*G,Z=Z>.0031308?1.055*Z**(1/2.4)-.055:12.92*Z,a[g]=Math.max(0,Math.min(1,B))*255,a[g+1]=Math.max(0,Math.min(1,G))*255,a[g+2]=Math.max(0,Math.min(1,Z))*255}return a}const tW="modulepreload",rW=function(e){return"/unfpa-dashboard/"+e},gD={},Dd=function(t,i,a){let d=Promise.resolve();if(i&&i.length>0){let A=function(P){return Promise.all(P.map(C=>Promise.resolve(C).then(I=>({status:"fulfilled",value:I}),I=>({status:"rejected",reason:I}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),c=y?.nonce||y?.getAttribute("nonce");d=A(i.map(P=>{if(P=rW(P),P in gD)return;gD[P]=!0;const C=P.endsWith(".css"),I=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${P}"]${I}`))return;const B=document.createElement("link");if(B.rel=C?"stylesheet":tW,C||(B.as="script"),B.crossOrigin="",B.href=P,c&&B.setAttribute("nonce",c),document.head.appendChild(B),C)return new Promise((G,Z)=>{B.addEventListener("load",G),B.addEventListener("error",()=>Z(new Error(`Unable to preload CSS for ${P}`)))})}))}function g(y){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=y,window.dispatchEvent(c),!c.defaultPrevented)throw y}return d.then(y=>{for(const c of y||[])c.status==="rejected"&&g(c.reason);return t().catch(g)})},f5=new Map;function Id(e,t){Array.isArray(e)||(e=[e]),e.forEach(i=>f5.set(i,t))}async function d5(e){const t=f5.get(e.Compression);if(!t)throw new Error(`Unknown compression method identifier: ${e.Compression}`);const i=await t();return new i(e)}Id([void 0,1],()=>Dd(()=>import("./raw-in9isEBO.js"),__vite__mapDeps([0,1])).then(e=>e.default));Id(5,()=>Dd(()=>import("./lzw-_aCqfs4w.js"),__vite__mapDeps([2,1])).then(e=>e.default));Id(6,()=>{throw new Error("old style JPEG compression is not supported.")});Id(7,()=>Dd(()=>import("./jpeg-vtRboCKw.js"),__vite__mapDeps([3,1])).then(e=>e.default));Id([8,32946],()=>Dd(()=>import("./deflate-B9JhHpvg.js"),__vite__mapDeps([4,5,1])).then(e=>e.default));Id(32773,()=>Dd(()=>import("./packbits-DDWKfGV_.js"),__vite__mapDeps([6,1])).then(e=>e.default));Id(34887,()=>Dd(()=>import("./lerc-ChTYi2NF.js"),__vite__mapDeps([7,5,1])).then(async e=>(await e.zstd.init(),e)).then(e=>e.default));Id(50001,()=>Dd(()=>import("./webimage-DBgUwIbt.js"),__vite__mapDeps([8,1])).then(e=>e.default));function Fx(e,t,i,a=1){return new(Object.getPrototypeOf(e)).constructor(t*i*a)}function nW(e,t,i,a,d){const g=t/a,y=i/d;return e.map(c=>{const A=Fx(c,a,d);for(let P=0;P<d;++P){const C=Math.min(Math.round(y*P),i-1);for(let I=0;I<a;++I){const B=Math.min(Math.round(g*I),t-1),G=c[C*t+B];A[P*a+I]=G}}return A})}function Xg(e,t,i){return(1-i)*e+i*t}function iW(e,t,i,a,d){const g=t/a,y=i/d;return e.map(c=>{const A=Fx(c,a,d);for(let P=0;P<d;++P){const C=y*P,I=Math.floor(C),B=Math.min(Math.ceil(C),i-1);for(let G=0;G<a;++G){const Z=g*G,H=Z%1,U=Math.floor(Z),oe=Math.min(Math.ceil(Z),t-1),ce=c[I*t+U],fe=c[I*t+oe],ve=c[B*t+U],Ee=c[B*t+oe],Me=Xg(Xg(ce,fe,H),Xg(ve,Ee,H),C%1);A[P*a+G]=Me}}return A})}function aW(e,t,i,a,d,g="nearest"){switch(g.toLowerCase()){case"nearest":return nW(e,t,i,a,d);case"bilinear":case"linear":return iW(e,t,i,a,d);default:throw new Error(`Unsupported resampling method: '${g}'`)}}function oW(e,t,i,a,d,g){const y=t/a,c=i/d,A=Fx(e,a,d,g);for(let P=0;P<d;++P){const C=Math.min(Math.round(c*P),i-1);for(let I=0;I<a;++I){const B=Math.min(Math.round(y*I),t-1);for(let G=0;G<g;++G){const Z=e[C*t*g+B*g+G];A[P*a*g+I*g+G]=Z}}}return A}function sW(e,t,i,a,d,g){const y=t/a,c=i/d,A=Fx(e,a,d,g);for(let P=0;P<d;++P){const C=c*P,I=Math.floor(C),B=Math.min(Math.ceil(C),i-1);for(let G=0;G<a;++G){const Z=y*G,H=Z%1,U=Math.floor(Z),oe=Math.min(Math.ceil(Z),t-1);for(let ce=0;ce<g;++ce){const fe=e[I*t*g+U*g+ce],ve=e[I*t*g+oe*g+ce],Ee=e[B*t*g+U*g+ce],Me=e[B*t*g+oe*g+ce],ze=Xg(Xg(fe,ve,H),Xg(Ee,Me,H),C%1);A[P*a*g+G*g+ce]=ze}}}return A}function lW(e,t,i,a,d,g,y="nearest"){switch(y.toLowerCase()){case"nearest":return oW(e,t,i,a,d,g);case"bilinear":case"linear":return sW(e,t,i,a,d,g);default:throw new Error(`Unsupported resampling method: '${y}'`)}}function cW(e,t,i){let a=0;for(let d=t;d<i;++d)a+=e[d];return a}function J2(e,t,i){switch(e){case 1:if(t<=8)return new Uint8Array(i);if(t<=16)return new Uint16Array(i);if(t<=32)return new Uint32Array(i);break;case 2:if(t===8)return new Int8Array(i);if(t===16)return new Int16Array(i);if(t===32)return new Int32Array(i);break;case 3:switch(t){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i)}break}throw Error("Unsupported data format/bitsPerSample")}function uW(e,t){return(e===1||e===2)&&t<=32&&t%8===0?!1:!(e===3&&(t===16||t===32||t===64))}function hW(e,t,i,a,d,g,y){const c=new DataView(e),A=i===2?y*g:y*g*a,P=i===2?1:a,C=J2(t,d,A),I=parseInt("1".repeat(d),2);if(t===1){let B;i===1?B=a*d:B=d;let G=g*B;(G&7)!==0&&(G=G+7&-8);for(let Z=0;Z<y;++Z){const H=Z*G;for(let U=0;U<g;++U){const oe=H+U*P*d;for(let ce=0;ce<P;++ce){const fe=oe+ce*d,ve=(Z*g+U)*P+ce,Ee=Math.floor(fe/8),Me=fe%8;if(Me+d<=8)C[ve]=c.getUint8(Ee)>>8-d-Me&I;else if(Me+d<=16)C[ve]=c.getUint16(Ee)>>16-d-Me&I;else if(Me+d<=24){const ze=c.getUint16(Ee)<<8|c.getUint8(Ee+2);C[ve]=ze>>24-d-Me&I}else C[ve]=c.getUint32(Ee)>>32-d-Me&I}}}}return C.buffer}class fW{constructor(t,i,a,d,g,y){this.fileDirectory=t,this.geoKeys=i,this.dataView=a,this.littleEndian=d,this.tiles=g?{}:null,this.isTiled=!t.StripOffsets;const c=t.PlanarConfiguration;if(this.planarConfiguration=typeof c>"u"?1:c,this.planarConfiguration!==1&&this.planarConfiguration!==2)throw new Error("Invalid planar configuration.");this.source=y}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return typeof this.fileDirectory.SamplesPerPixel<"u"?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:typeof this.fileDirectory.RowsPerStrip<"u"?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let i=0;i<this.fileDirectory.BitsPerSample.length;++i)t+=this.getSampleByteSize(i);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const i=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,a=this.fileDirectory.BitsPerSample[t];switch(i){case 1:if(a<=8)return DataView.prototype.getUint8;if(a<=16)return DataView.prototype.getUint16;if(a<=32)return DataView.prototype.getUint32;break;case 2:if(a<=8)return DataView.prototype.getInt8;if(a<=16)return DataView.prototype.getInt16;if(a<=32)return DataView.prototype.getInt32;break;case 3:switch(a){case 16:return function(d,g){return h5(this,d,g)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,i){const a=this.getSampleFormat(t),d=this.getBitsPerSample(t);return J2(a,d,i)}async getTileOrStrip(t,i,a,d,g){const y=Math.ceil(this.getWidth()/this.getTileWidth()),c=Math.ceil(this.getHeight()/this.getTileHeight());let A;const{tiles:P}=this;this.planarConfiguration===1?A=i*y+t:this.planarConfiguration===2&&(A=a*y*c+i*y+t);let C,I;this.isTiled?(C=this.fileDirectory.TileOffsets[A],I=this.fileDirectory.TileByteCounts[A]):(C=this.fileDirectory.StripOffsets[A],I=this.fileDirectory.StripByteCounts[A]);const B=(await this.source.fetch([{offset:C,length:I}],g))[0];let G;return P===null||!P[A]?(G=(async()=>{let Z=await d.decode(this.fileDirectory,B);const H=this.getSampleFormat(),U=this.getBitsPerSample();return uW(H,U)&&(Z=hW(Z,H,this.planarConfiguration,this.getSamplesPerPixel(),U,this.getTileWidth(),this.getBlockHeight(i))),Z})(),P!==null&&(P[A]=G)):G=P[A],{x:t,y:i,sample:a,data:await G}}async _readRaster(t,i,a,d,g,y,c,A,P){const C=this.getTileWidth(),I=this.getTileHeight(),B=this.getWidth(),G=this.getHeight(),Z=Math.max(Math.floor(t[0]/C),0),H=Math.min(Math.ceil(t[2]/C),Math.ceil(B/C)),U=Math.max(Math.floor(t[1]/I),0),oe=Math.min(Math.ceil(t[3]/I),Math.ceil(G/I)),ce=t[2]-t[0];let fe=this.getBytesPerPixel();const ve=[],Ee=[];for(let Ke=0;Ke<i.length;++Ke)this.planarConfiguration===1?ve.push(cW(this.fileDirectory.BitsPerSample,0,i[Ke])/8):ve.push(0),Ee.push(this.getReaderForSample(i[Ke]));const Me=[],{littleEndian:ze}=this;for(let Ke=U;Ke<oe;++Ke)for(let mt=Z;mt<H;++mt){let zt;this.planarConfiguration===1&&(zt=this.getTileOrStrip(mt,Ke,0,g,P));for(let Ge=0;Ge<i.length;++Ge){const Te=Ge,dt=i[Ge];this.planarConfiguration===2&&(fe=this.getSampleByteSize(dt),zt=this.getTileOrStrip(mt,Ke,dt,g,P));const It=zt.then(Rt=>{const Ve=Rt.data,it=new DataView(Ve),Mt=this.getBlockHeight(Rt.y),Be=Rt.y*I,yt=Rt.x*C,Ae=Be+Mt,qe=(Rt.x+1)*C,ct=Ee[Te],wt=Math.min(Mt,Mt-(Ae-t[3]),G-Be),jt=Math.min(C,C-(qe-t[2]),B-yt);for(let $t=Math.max(0,t[1]-Be);$t<wt;++$t)for(let Ft=Math.max(0,t[0]-yt);Ft<jt;++Ft){const Tr=($t*C+Ft)*fe,pt=ct.call(it,Tr+ve[Te],ze);let er;d?(er=($t+Be-t[1])*ce*i.length+(Ft+yt-t[0])*i.length+Te,a[er]=pt):(er=($t+Be-t[1])*ce+Ft+yt-t[0],a[Te][er]=pt)}});Me.push(It)}}if(await Promise.all(Me),y&&t[2]-t[0]!==y||c&&t[3]-t[1]!==c){let Ke;return d?Ke=lW(a,t[2]-t[0],t[3]-t[1],y,c,i.length,A):Ke=aW(a,t[2]-t[0],t[3]-t[1],y,c,A),Ke.width=y,Ke.height=c,Ke}return a.width=y||t[2]-t[0],a.height=c||t[3]-t[1],a}async readRasters({window:t,samples:i=[],interleave:a,pool:d=null,width:g,height:y,resampleMethod:c,fillValue:A,signal:P}={}){const C=t||[0,0,this.getWidth(),this.getHeight()];if(C[0]>C[2]||C[1]>C[3])throw new Error("Invalid subsets");const I=C[2]-C[0],B=C[3]-C[1],G=I*B,Z=this.getSamplesPerPixel();if(!i||!i.length)for(let ce=0;ce<Z;++ce)i.push(ce);else for(let ce=0;ce<i.length;++ce)if(i[ce]>=Z)return Promise.reject(new RangeError(`Invalid sample index '${i[ce]}'.`));let H;if(a){const ce=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,fe=Math.max.apply(null,this.fileDirectory.BitsPerSample);H=J2(ce,fe,G*i.length),A&&H.fill(A)}else{H=[];for(let ce=0;ce<i.length;++ce){const fe=this.getArrayForSample(i[ce],G);Array.isArray(A)&&ce<A.length?fe.fill(A[ce]):A&&!Array.isArray(A)&&fe.fill(A),H.push(fe)}}const U=d||await d5(this.fileDirectory);return await this._readRaster(C,i,H,a,U,g,y,c,P)}async readRGB({window:t,interleave:i=!0,pool:a=null,width:d,height:g,resampleMethod:y,enableAlpha:c=!1,signal:A}={}){const P=t||[0,0,this.getWidth(),this.getHeight()];if(P[0]>P[2]||P[1]>P[3])throw new Error("Invalid subsets");const C=this.fileDirectory.PhotometricInterpretation;if(C===Zs.RGB){let oe=[0,1,2];if(this.fileDirectory.ExtraSamples!==qX.Unspecified&&c){oe=[];for(let ce=0;ce<this.fileDirectory.BitsPerSample.length;ce+=1)oe.push(ce)}return this.readRasters({window:t,interleave:i,samples:oe,pool:a,width:d,height:g,resampleMethod:y,signal:A})}let I;switch(C){case Zs.WhiteIsZero:case Zs.BlackIsZero:case Zs.Palette:I=[0];break;case Zs.CMYK:I=[0,1,2,3];break;case Zs.YCbCr:case Zs.CIELab:I=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const B={window:P,interleave:!0,samples:I,pool:a,width:d,height:g,resampleMethod:y,signal:A},{fileDirectory:G}=this,Z=await this.readRasters(B),H=2**this.fileDirectory.BitsPerSample[0];let U;switch(C){case Zs.WhiteIsZero:U=ZX(Z,H);break;case Zs.BlackIsZero:U=HX(Z,H);break;case Zs.Palette:U=YX(Z,G.ColorMap);break;case Zs.CMYK:U=XX(Z);break;case Zs.YCbCr:U=WX(Z);break;case Zs.CIELab:U=eW(Z);break;default:throw new Error("Unsupported photometric interpretation.")}if(!i){const oe=new Uint8Array(U.length/3),ce=new Uint8Array(U.length/3),fe=new Uint8Array(U.length/3);for(let ve=0,Ee=0;ve<U.length;ve+=3,++Ee)oe[Ee]=U[ve],ce[Ee]=U[ve+1],fe[Ee]=U[ve+2];U=[oe,ce,fe]}return U.width=Z.width,U.height=Z.height,U}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let i=0;i<this.fileDirectory.ModelTiepoint.length;i+=6)t.push({i:this.fileDirectory.ModelTiepoint[i],j:this.fileDirectory.ModelTiepoint[i+1],k:this.fileDirectory.ModelTiepoint[i+2],x:this.fileDirectory.ModelTiepoint[i+3],y:this.fileDirectory.ModelTiepoint[i+4],z:this.fileDirectory.ModelTiepoint[i+5]});return t}getGDALMetadata(t=null){const i={};if(!this.fileDirectory.GDAL_METADATA)return null;const a=this.fileDirectory.GDAL_METADATA;let d=VX(a,"Item");t===null?d=d.filter(g=>Yw(g,"sample")===void 0):d=d.filter(g=>Number(Yw(g,"sample"))===t);for(let g=0;g<d.length;++g){const y=d[g];i[Yw(y,"name")]=y.inner}return i}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,i=this.fileDirectory.ModelTransformation;if(t&&t.length===6)return[t[3],t[4],t[5]];if(i)return[i[3],i[7],i[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const i=this.fileDirectory.ModelPixelScale,a=this.fileDirectory.ModelTransformation;if(i)return[i[0],-i[1],i[2]];if(a)return a[1]===0&&a[4]===0?[a[0],-a[5],a[10]]:[Math.sqrt(a[0]*a[0]+a[4]*a[4]),-Math.sqrt(a[1]*a[1]+a[5]*a[5]),a[10]];if(t){const[d,g,y]=t.getResolution();return[d*t.getWidth()/this.getWidth(),g*t.getHeight()/this.getHeight(),y*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return this.geoKeys.GTRasterTypeGeoKey===1}getBoundingBox(t=!1){const i=this.getHeight(),a=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[d,g,y,c,A,P,C,I]=this.fileDirectory.ModelTransformation,G=[[0,0],[0,i],[a,0],[a,i]].map(([U,oe])=>[c+d*U+g*oe,I+A*U+P*oe]),Z=G.map(U=>U[0]),H=G.map(U=>U[1]);return[Math.min(...Z),Math.min(...H),Math.max(...Z),Math.max(...H)]}else{const d=this.getOrigin(),g=this.getResolution(),y=d[0],c=d[1],A=y+g[0]*a,P=c+g[1]*i;return[Math.min(y,A),Math.min(c,P),Math.max(y,A),Math.max(c,P)]}}}class dW{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,i){const a=this.getUint32(t,i),d=this.getUint32(t+4,i);let g;if(i){if(g=a+2**32*d,!Number.isSafeInteger(g))throw new Error(`${g} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return g}if(g=2**32*a+d,!Number.isSafeInteger(g))throw new Error(`${g} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return g}getInt64(t,i){let a=0;const d=(this._dataView.getUint8(t+(i?7:0))&128)>0;let g=!0;for(let y=0;y<8;y++){let c=this._dataView.getUint8(t+(i?y:7-y));d&&(g?c!==0&&(c=~(c-1)&255,g=!1):c=~c&255),a+=c*256**y}return d&&(a=-a),a}getUint8(t,i){return this._dataView.getUint8(t,i)}getInt8(t,i){return this._dataView.getInt8(t,i)}getUint16(t,i){return this._dataView.getUint16(t,i)}getInt16(t,i){return this._dataView.getInt16(t,i)}getUint32(t,i){return this._dataView.getUint32(t,i)}getInt32(t,i){return this._dataView.getInt32(t,i)}getFloat16(t,i){return h5(this._dataView,t,i)}getFloat32(t,i){return this._dataView.getFloat32(t,i)}getFloat64(t,i){return this._dataView.getFloat64(t,i)}}class pW{constructor(t,i,a,d){this._dataView=new DataView(t),this._sliceOffset=i,this._littleEndian=a,this._bigTiff=d}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,i){return this.sliceOffset<=t&&this.sliceTop>=t+i}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const i=this.readUint32(t),a=this.readUint32(t+4);let d;if(this._littleEndian){if(d=i+2**32*a,!Number.isSafeInteger(d))throw new Error(`${d} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return d}if(d=2**32*i+a,!Number.isSafeInteger(d))throw new Error(`${d} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return d}readInt64(t){let i=0;const a=(this._dataView.getUint8(t+(this._littleEndian?7:0))&128)>0;let d=!0;for(let g=0;g<8;g++){let y=this._dataView.getUint8(t+(this._littleEndian?g:7-g));a&&(d?y!==0&&(y=~(y-1)&255,d=!1):y=~y&255),i+=y*256**g}return a&&(i=-i),i}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const mW=typeof navigator<"u"&&navigator.hardwareConcurrency||2;class gW{constructor(t=mW,i){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=i?Promise.resolve(i):new Promise(a=>{Dd(()=>import("./decoder-tqM1uIvc.js"),[]).then(d=>{a(d.create)})}),this._awaitingDecoder.then(a=>{this._awaitingDecoder=null,this.workers=[];for(let d=0;d<t;d++)this.workers.push({worker:a(),idle:!0})}))}async decode(t,i){return this._awaitingDecoder&&await this._awaitingDecoder,this.size===0?d5(t).then(a=>a.decode(t,i)):new Promise(a=>{const d=this.workers.find(c=>c.idle)||this.workers[Math.floor(Math.random()*this.size)];d.idle=!1;const g=this.messageId++,y=c=>{c.data.id===g&&(d.idle=!0,a(c.data.decoded),d.worker.removeEventListener("message",y))};d.worker.addEventListener("message",y),d.worker.postMessage({fileDirectory:t,buffer:i,id:g},[i])})}destroy(){this.workers&&(this.workers.forEach(t=>{t.worker.terminate()}),this.workers=null)}}const yD=`\r
\r
`;function p5(e){if(typeof Object.fromEntries<"u")return Object.fromEntries(e);const t={};for(const[i,a]of e)t[i.toLowerCase()]=a;return t}function yW(e){const t=e.split(`\r
`).map(i=>{const a=i.split(":").map(d=>d.trim());return a[0]=a[0].toLowerCase(),a});return p5(t)}function vW(e){const[t,...i]=e.split(";").map(d=>d.trim()),a=i.map(d=>d.split("="));return{type:t,params:p5(a)}}function eS(e){let t,i,a;return e&&([,t,i,a]=e.match(/bytes (\d+)-(\d+)\/(\d+)/),t=parseInt(t,10),i=parseInt(i,10),a=parseInt(a,10)),{start:t,end:i,total:a}}function _W(e,t){let i=null;const a=new TextDecoder("ascii"),d=[],g=`--${t}`,y=`${g}--`;for(let c=0;c<10;++c)a.decode(new Uint8Array(e,c,g.length))===g&&(i=c);if(i===null)throw new Error("Could not find initial boundary");for(;i<e.byteLength;){const c=a.decode(new Uint8Array(e,i,Math.min(g.length+1024,e.byteLength-i)));if(c.length===0||c.startsWith(y))break;if(!c.startsWith(g))throw new Error("Part does not start with boundary");const A=c.substr(g.length+2);if(A.length===0)break;const P=A.indexOf(yD),C=yW(A.substr(0,P)),{start:I,end:B,total:G}=eS(C["content-range"]),Z=i+g.length+P+yD.length,H=parseInt(B,10)+1-parseInt(I,10);d.push({headers:C,data:e.slice(Z,Z+H),offset:I,length:H,fileSize:G}),i=Z+H+4}return d}class m5{async fetch(t,i=void 0){return Promise.all(t.map(a=>this.fetchSlice(a,i)))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}let bW=class extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if(typeof this.onEviction=="function")for(const[i,a]of t)this.onEviction(i,a.value)}_deleteIfExpired(t,i){return typeof i.expiry=="number"&&i.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(t,i.value),this.delete(t)):!1}_getOrDeleteIfExpired(t,i){if(this._deleteIfExpired(t,i)===!1)return i.value}_getItemValue(t,i){return i.expiry?this._getOrDeleteIfExpired(t,i):i.value}_peek(t,i){const a=i.get(t);return this._getItemValue(t,a)}_set(t,i){this.cache.set(t,i),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,i){this.oldCache.delete(t),this._set(t,i)}*_entriesAscending(){for(const t of this.oldCache){const[i,a]=t;this.cache.has(i)||this._deleteIfExpired(i,a)===!1&&(yield t)}for(const t of this.cache){const[i,a]=t;this._deleteIfExpired(i,a)===!1&&(yield t)}}get(t){if(this.cache.has(t)){const i=this.cache.get(t);return this._getItemValue(t,i)}if(this.oldCache.has(t)){const i=this.oldCache.get(t);if(this._deleteIfExpired(t,i)===!1)return this._moveToRecent(t,i),i.value}}set(t,i,{maxAge:a=this.maxAge}={}){const d=typeof a=="number"&&a!==Number.POSITIVE_INFINITY?Date.now()+a:void 0;return this.cache.has(t)?this.cache.set(t,{value:i,expiry:d}):this._set(t,{value:i,expiry:d}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):this.oldCache.has(t)?!this._deleteIfExpired(t,this.oldCache.get(t)):!1}peek(t){if(this.cache.has(t))return this._peek(t,this.cache);if(this.oldCache.has(t))return this._peek(t,this.oldCache)}delete(t){const i=this.cache.delete(t);return i&&this._size--,this.oldCache.delete(t)||i}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const i=[...this._entriesAscending()],a=i.length-t;a<0?(this.cache=new Map(i),this.oldCache=new Map,this._size=i.length):(a>0&&this._emitEvictions(i.slice(0,a)),this.oldCache=new Map(i.slice(a)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[i,a]=t;this._deleteIfExpired(i,a)===!1&&(yield[i,a.value])}for(const t of this.oldCache){const[i,a]=t;this.cache.has(i)||this._deleteIfExpired(i,a)===!1&&(yield[i,a.value])}}*entriesDescending(){let t=[...this.cache];for(let i=t.length-1;i>=0;--i){const a=t[i],[d,g]=a;this._deleteIfExpired(d,g)===!1&&(yield[d,g.value])}t=[...this.oldCache];for(let i=t.length-1;i>=0;--i){const a=t[i],[d,g]=a;this.cache.has(d)||this._deleteIfExpired(d,g)===!1&&(yield[d,g.value])}}*entriesAscending(){for(const[t,i]of this._entriesAscending())yield[t,i.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const i of this.oldCache.keys())this.cache.has(i)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,i=this){for(const[a,d]of this.entriesAscending())t.call(i,d,a,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}};async function xW(e){return new Promise(t=>setTimeout(t,e))}function wW(e,t){const i=Array.isArray(e)?e:Array.from(e),a=Array.isArray(t)?t:Array.from(t);return i.map((d,g)=>[d,a[g]])}class ry extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,ry),this.name="AbortError"}}class SW extends Error{constructor(t,i){super(i),this.errors=t,this.message=i,this.name="AggregateError"}}const TW=SW;class EW{constructor(t,i,a=null){this.offset=t,this.length=i,this.data=a}get top(){return this.offset+this.length}}class vD{constructor(t,i,a){this.offset=t,this.length=i,this.blockIds=a}}class AW extends m5{constructor(t,{blockSize:i=65536,cacheSize:a=100}={}){super(),this.source=t,this.blockSize=i,this.blockCache=new bW({maxSize:a,onEviction:(d,g)=>{this.evictedBlocks.set(d,g)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,i){const a=[],d=[],g=[];this.evictedBlocks.clear();for(const{offset:B,length:G}of t){let Z=B+G;const{fileSize:H}=this;H!==null&&(Z=Math.min(Z,H));const U=Math.floor(B/this.blockSize)*this.blockSize;for(let oe=U;oe<Z;oe+=this.blockSize){const ce=Math.floor(oe/this.blockSize);!this.blockCache.has(ce)&&!this.blockRequests.has(ce)&&(this.blockIdsToFetch.add(ce),d.push(ce)),this.blockRequests.has(ce)&&a.push(this.blockRequests.get(ce)),g.push(ce)}}await xW(),this.fetchBlocks(i);const y=[];for(const B of d)this.blockRequests.has(B)&&y.push(this.blockRequests.get(B));await Promise.allSettled(a),await Promise.allSettled(y);const c=[],A=g.filter(B=>this.abortedBlockIds.has(B)||!this.blockCache.has(B));if(A.forEach(B=>this.blockIdsToFetch.add(B)),A.length>0&&i&&!i.aborted){this.fetchBlocks(null);for(const B of A){const G=this.blockRequests.get(B);if(!G)throw new Error(`Block ${B} is not in the block requests`);c.push(G)}await Promise.allSettled(c)}if(i&&i.aborted)throw new ry("Request was aborted");const P=g.map(B=>this.blockCache.get(B)||this.evictedBlocks.get(B)),C=P.filter(B=>!B);if(C.length)throw new TW(C,"Request failed");const I=new Map(wW(g,P));return this.readSliceData(t,I)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const i=this.groupBlocks(this.blockIdsToFetch),a=this.source.fetch(i,t);for(let d=0;d<i.length;++d){const g=i[d];for(const y of g.blockIds)this.blockRequests.set(y,(async()=>{try{const c=(await a)[d],A=y*this.blockSize,P=A-c.offset,C=Math.min(P+this.blockSize,c.data.byteLength),I=c.data.slice(P,C),B=new EW(A,I.byteLength,I,y);this.blockCache.set(y,B),this.abortedBlockIds.delete(y)}catch(c){if(c.name==="AbortError")c.signal=t,this.blockCache.delete(y),this.abortedBlockIds.add(y);else throw c}finally{this.blockRequests.delete(y)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const i=Array.from(t).sort((y,c)=>y-c);if(i.length===0)return[];let a=[],d=null;const g=[];for(const y of i)d===null||d+1===y?(a.push(y),d=y):(g.push(new vD(a[0]*this.blockSize,a.length*this.blockSize,a)),a=[y],d=y);return g.push(new vD(a[0]*this.blockSize,a.length*this.blockSize,a)),g}readSliceData(t,i){return t.map(a=>{let d=a.offset+a.length;this.fileSize!==null&&(d=Math.min(this.fileSize,d));const g=Math.floor(a.offset/this.blockSize),y=Math.floor(d/this.blockSize),c=new ArrayBuffer(a.length),A=new Uint8Array(c);for(let P=g;P<=y;++P){const C=i.get(P),I=C.offset-a.offset,B=C.top-d;let G=0,Z=0,H;I<0?G=-I:I>0&&(Z=I),B<0?H=C.length-G:H=d-C.offset-G;const U=new Uint8Array(C.data,G,H);A.set(U,Z)}return c})}}class QT{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class JT{constructor(t){this.url=t}async request({headers:t,signal:i}={}){throw new Error("request is not implemented")}}class MW extends QT{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class PW extends JT{constructor(t,i){super(t),this.credentials=i}async request({headers:t,signal:i}={}){const a=await fetch(this.url,{headers:t,credentials:this.credentials,signal:i});return new MW(a)}}class CW extends QT{constructor(t,i){super(),this.xhr=t,this.data=i}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class DW extends JT{constructRequest(t,i){return new Promise((a,d)=>{const g=new XMLHttpRequest;g.open("GET",this.url),g.responseType="arraybuffer";for(const[y,c]of Object.entries(t))g.setRequestHeader(y,c);g.onload=()=>{const y=g.response;a(new CW(g,y))},g.onerror=d,g.onabort=()=>d(new ry("Request aborted")),g.send(),i&&(i.aborted&&g.abort(),i.addEventListener("abort",()=>g.abort()))})}async request({headers:t,signal:i}={}){return await this.constructRequest(t,i)}}const Ww={};class IW extends QT{constructor(t,i){super(),this.response=t,this.dataPromise=i}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class OW extends JT{constructor(t){super(t),this.parsedUrl=Ww.parse(this.url),this.httpApi=(this.parsedUrl.protocol==="http:",Ww)}constructRequest(t,i){return new Promise((a,d)=>{const g=this.httpApi.get({...this.parsedUrl,headers:t},y=>{const c=new Promise(A=>{const P=[];y.on("data",C=>{P.push(C)}),y.on("end",()=>{const C=Buffer.concat(P).buffer;A(C)}),y.on("error",d)});a(new IW(y,c))});g.on("error",d),i&&(i.aborted&&g.destroy(new ry("Request aborted")),i.addEventListener("abort",()=>g.destroy(new ry("Request aborted"))))})}async request({headers:t,signal:i}={}){return await this.constructRequest(t,i)}}class eE extends m5{constructor(t,i,a,d){super(),this.client=t,this.headers=i,this.maxRanges=a,this.allowFullFile=d,this._fileSize=null}async fetch(t,i){return this.maxRanges>=t.length?this.fetchSlices(t,i):(this.maxRanges>0&&t.length>1,Promise.all(t.map(a=>this.fetchSlice(a,i))))}async fetchSlices(t,i){const a=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:d,length:g})=>`${d}-${d+g}`).join(",")}`},signal:i});if(a.ok)if(a.status===206){const{type:d,params:g}=vW(a.getHeader("content-type"));if(d==="multipart/byteranges"){const I=_W(await a.getData(),g.boundary);return this._fileSize=I[0].fileSize||null,I}const y=await a.getData(),{start:c,end:A,total:P}=eS(a.getHeader("content-range"));this._fileSize=P||null;const C=[{data:y,offset:c,length:A-c}];if(t.length>1){const I=await Promise.all(t.slice(1).map(B=>this.fetchSlice(B,i)));return C.concat(I)}return C}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const d=await a.getData();return this._fileSize=d.byteLength,[{data:d,offset:0,length:d.byteLength}]}else throw new Error("Error fetching data.")}async fetchSlice(t,i){const{offset:a,length:d}=t,g=await this.client.request({headers:{...this.headers,Range:`bytes=${a}-${a+d}`},signal:i});if(g.ok)if(g.status===206){const y=await g.getData(),{total:c}=eS(g.getHeader("content-range"));return this._fileSize=c||null,{data:y,offset:a,length:d}}else{if(!this.allowFullFile)throw new Error("Server responded with full file");const y=await g.getData();return this._fileSize=y.byteLength,{data:y,offset:0,length:y.byteLength}}else throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function tE(e,{blockSize:t,cacheSize:i}){return t===null?e:new AW(e,{blockSize:t,cacheSize:i})}function zW(e,{headers:t={},credentials:i,maxRanges:a=0,allowFullFile:d=!1,...g}={}){const y=new PW(e,i),c=new eE(y,t,a,d);return tE(c,g)}function kW(e,{headers:t={},maxRanges:i=0,allowFullFile:a=!1,...d}={}){const g=new DW(e),y=new eE(g,t,i,a);return tE(y,d)}function RW(e,{headers:t={},maxRanges:i=0,allowFullFile:a=!1,...d}={}){const g=new OW(e),y=new eE(g,t,i,a);return tE(y,d)}function LW(e,{forceXHR:t=!1,...i}={}){return typeof fetch=="function"&&!t?zW(e,i):typeof XMLHttpRequest<"u"?kW(e,i):RW(e,i)}function tS(e){switch(e){case Er.BYTE:case Er.ASCII:case Er.SBYTE:case Er.UNDEFINED:return 1;case Er.SHORT:case Er.SSHORT:return 2;case Er.LONG:case Er.SLONG:case Er.FLOAT:case Er.IFD:return 4;case Er.RATIONAL:case Er.SRATIONAL:case Er.DOUBLE:case Er.LONG8:case Er.SLONG8:case Er.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${e}`)}}function BW(e){const t=e.GeoKeyDirectory;if(!t)return null;const i={};for(let a=4;a<=t[3]*4;a+=4){const d=$X[t[a]],g=t[a+1]?B0[t[a+1]]:null,y=t[a+2],c=t[a+3];let A=null;if(!g)A=c;else{if(A=e[g],typeof A>"u"||A===null)throw new Error(`Could not get value of geoKey '${d}'.`);typeof A=="string"?A=A.substring(c,c+y-1):A.subarray&&(A=A.subarray(c,c+y),y===1&&(A=A[0]))}i[d]=A}return i}function Bg(e,t,i,a){let d=null,g=null;const y=tS(t);switch(t){case Er.BYTE:case Er.ASCII:case Er.UNDEFINED:d=new Uint8Array(i),g=e.readUint8;break;case Er.SBYTE:d=new Int8Array(i),g=e.readInt8;break;case Er.SHORT:d=new Uint16Array(i),g=e.readUint16;break;case Er.SSHORT:d=new Int16Array(i),g=e.readInt16;break;case Er.LONG:case Er.IFD:d=new Uint32Array(i),g=e.readUint32;break;case Er.SLONG:d=new Int32Array(i),g=e.readInt32;break;case Er.LONG8:case Er.IFD8:d=new Array(i),g=e.readUint64;break;case Er.SLONG8:d=new Array(i),g=e.readInt64;break;case Er.RATIONAL:d=new Uint32Array(i*2),g=e.readUint32;break;case Er.SRATIONAL:d=new Int32Array(i*2),g=e.readInt32;break;case Er.FLOAT:d=new Float32Array(i),g=e.readFloat32;break;case Er.DOUBLE:d=new Float64Array(i),g=e.readFloat64;break;default:throw new RangeError(`Invalid field type: ${t}`)}if(t===Er.RATIONAL||t===Er.SRATIONAL)for(let c=0;c<i;c+=2)d[c]=g.call(e,a+c*y),d[c+1]=g.call(e,a+(c*y+4));else for(let c=0;c<i;++c)d[c]=g.call(e,a+c*y);return t===Er.ASCII?new TextDecoder("utf-8").decode(d):d}class jW{constructor(t,i,a){this.fileDirectory=t,this.geoKeyDirectory=i,this.nextIFDByteOffset=a}}class X_ extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class NW{async readRasters(t={}){const{window:i,width:a,height:d}=t;let{resX:g,resY:y,bbox:c}=t;const A=await this.getImage();let P=A;const C=await this.getImageCount(),I=A.getBoundingBox();if(i&&c)throw new Error('Both "bbox" and "window" passed.');if(a||d){if(i){const[Z,H]=A.getOrigin(),[U,oe]=A.getResolution();c=[Z+i[0]*U,H+i[1]*oe,Z+i[2]*U,H+i[3]*oe]}const G=c||I;if(a){if(g)throw new Error("Both width and resX passed");g=(G[2]-G[0])/a}if(d){if(y)throw new Error("Both width and resY passed");y=(G[3]-G[1])/d}}if(g||y){const G=[];for(let Z=0;Z<C;++Z){const H=await this.getImage(Z),{SubfileType:U,NewSubfileType:oe}=H.fileDirectory;(Z===0||U===2||oe&1)&&G.push(H)}G.sort((Z,H)=>Z.getWidth()-H.getWidth());for(let Z=0;Z<G.length;++Z){const H=G[Z],U=(I[2]-I[0])/H.getWidth(),oe=(I[3]-I[1])/H.getHeight();if(P=H,g&&g>U||y&&y>oe)break}}let B=i;if(c){const[G,Z]=A.getOrigin(),[H,U]=P.getResolution(A);B=[Math.round((c[0]-G)/H),Math.round((c[1]-Z)/U),Math.round((c[2]-G)/H),Math.round((c[3]-Z)/U)],B=[Math.min(B[0],B[2]),Math.min(B[1],B[3]),Math.max(B[0],B[2]),Math.max(B[1],B[3])]}return P.readRasters({...t,window:B})}}class rE extends NW{constructor(t,i,a,d,g={}){super(),this.source=t,this.littleEndian=i,this.bigTiff=a,this.firstIFDOffset=d,this.cache=g.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,i){const a=this.bigTiff?4048:1024;return new pW((await this.source.fetch([{offset:t,length:typeof i<"u"?i:a}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const i=this.bigTiff?20:12,a=this.bigTiff?8:2;let d=await this.getSlice(t);const g=this.bigTiff?d.readUint64(t):d.readUint16(t),y=g*i+(this.bigTiff?16:6);d.covers(t,y)||(d=await this.getSlice(t,y));const c={};let A=t+(this.bigTiff?8:2);for(let I=0;I<g;A+=i,++I){const B=d.readUint16(A),G=d.readUint16(A+2),Z=this.bigTiff?d.readUint64(A+4):d.readUint32(A+4);let H,U;const oe=tS(G),ce=A+(this.bigTiff?12:8);if(oe*Z<=(this.bigTiff?8:4))H=Bg(d,G,Z,ce);else{const fe=d.readOffset(ce),ve=tS(G)*Z;if(d.covers(fe,ve))H=Bg(d,G,Z,fe);else{const Ee=await this.getSlice(fe,ve);H=Bg(Ee,G,Z,fe)}}Z===1&&GX.indexOf(B)===-1&&!(G===Er.RATIONAL||G===Er.SRATIONAL)?U=H[0]:U=H,c[B0[B]]=U}const P=BW(c),C=d.readOffset(t+a+i*g);return new jW(c,P,C)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(t===0)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(i){throw i instanceof X_?new X_(t):i}return this.ifdRequests[t]=(async()=>{const i=await this.ifdRequests[t-1];if(i.nextIFDByteOffset===0)throw new X_(t);return this.parseFileDirectoryAt(i.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const i=await this.requestIFD(t);return new fW(i.fileDirectory,i.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,i=!0;for(;i;)try{await this.requestIFD(t),++t}catch(a){if(a instanceof X_)i=!1;else throw a}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const i="GDAL_STRUCTURAL_METADATA_SIZE=",a=i.length+100;let d=await this.getSlice(t,a);if(i===Bg(d,Er.ASCII,i.length,t)){const y=Bg(d,Er.ASCII,a,t).split(`
`)[0],c=Number(y.split("=")[1].split(" ")[0])+y.length;c>a&&(d=await this.getSlice(t,c));const A=Bg(d,Er.ASCII,c,t);this.ghostValues={},A.split(`
`).filter(P=>P.length>0).map(P=>P.split("=")).forEach(([P,C])=>{this.ghostValues[P]=C})}return this.ghostValues}static async fromSource(t,i,a){const d=(await t.fetch([{offset:0,length:1024}],a))[0],g=new dW(d),y=g.getUint16(0,0);let c;if(y===18761)c=!0;else if(y===19789)c=!1;else throw new TypeError("Invalid byte order value.");const A=g.getUint16(2,c);let P;if(A===42)P=!1;else if(A===43){if(P=!0,g.getUint16(4,c)!==8)throw new Error("Unsupported offset byte-size.")}else throw new TypeError("Invalid magic number.");const C=P?g.getUint64(8,c):g.getUint32(4,c);return new rE(t,c,P,C,i)}close(){return typeof this.source.close=="function"?this.source.close():!1}}async function FW(e,t={},i){return rE.fromSource(LW(e,t),i)}class nE extends Map{#r=0;#e=new Map;#t=new Map;#i;#o;#a;constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof t.maxAge=="number"&&t.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.#i=t.maxSize,this.#o=t.maxAge||Number.POSITIVE_INFINITY,this.#a=t.onEviction}get __oldCache(){return this.#t}#s(t){if(typeof this.#a=="function")for(const[i,a]of t)this.#a(i,a.value)}#n(t,i){return typeof i.expiry=="number"&&i.expiry<=Date.now()?(typeof this.#a=="function"&&this.#a(t,i.value),this.delete(t)):!1}#f(t,i){if(this.#n(t,i)===!1)return i.value}#c(t,i){return i.expiry?this.#f(t,i):i.value}#u(t,i){const a=i.get(t);return this.#c(t,a)}#h(t,i){this.#e.set(t,i),this.#r++,this.#r>=this.#i&&(this.#r=0,this.#s(this.#t),this.#t=this.#e,this.#e=new Map)}#d(t,i){this.#t.delete(t),this.#h(t,i)}*#l(){for(const t of this.#t){const[i,a]=t;this.#e.has(i)||this.#n(i,a)===!1&&(yield t)}for(const t of this.#e){const[i,a]=t;this.#n(i,a)===!1&&(yield t)}}get(t){if(this.#e.has(t)){const i=this.#e.get(t);return this.#c(t,i)}if(this.#t.has(t)){const i=this.#t.get(t);if(this.#n(t,i)===!1)return this.#d(t,i),i.value}}set(t,i,{maxAge:a=this.#o}={}){const d=typeof a=="number"&&a!==Number.POSITIVE_INFINITY?Date.now()+a:void 0;return this.#e.has(t)?this.#e.set(t,{value:i,expiry:d}):this.#h(t,{value:i,expiry:d}),this}has(t){return this.#e.has(t)?!this.#n(t,this.#e.get(t)):this.#t.has(t)?!this.#n(t,this.#t.get(t)):!1}peek(t){if(this.#e.has(t))return this.#u(t,this.#e);if(this.#t.has(t))return this.#u(t,this.#t)}expiresIn(t){const i=this.#e.get(t)??this.#t.get(t);if(i)return i.expiry?i.expiry-Date.now():Number.POSITIVE_INFINITY}delete(t){const i=this.#e.delete(t);return i&&this.#r--,this.#t.delete(t)||i}clear(){this.#e.clear(),this.#t.clear(),this.#r=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const i=[...this.#l()],a=i.length-t;a<0?(this.#e=new Map(i),this.#t=new Map,this.#r=i.length):(a>0&&this.#s(i.slice(0,a)),this.#t=new Map(i.slice(a)),this.#e=new Map,this.#r=0),this.#i=t}evict(t=1){const i=Number(t);if(!i||i<=0)return;const a=[...this.#l()],d=Math.trunc(Math.min(i,Math.max(a.length-1,0)));d<=0||(this.#s(a.slice(0,d)),this.#t=new Map(a.slice(d)),this.#e=new Map,this.#r=0)}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.#e){const[i,a]=t;this.#n(i,a)===!1&&(yield[i,a.value])}for(const t of this.#t){const[i,a]=t;this.#e.has(i)||this.#n(i,a)===!1&&(yield[i,a.value])}}*entriesDescending(){let t=[...this.#e];for(let i=t.length-1;i>=0;--i){const a=t[i],[d,g]=a;this.#n(d,g)===!1&&(yield[d,g.value])}t=[...this.#t];for(let i=t.length-1;i>=0;--i){const a=t[i],[d,g]=a;this.#e.has(d)||this.#n(d,g)===!1&&(yield[d,g.value])}}*entriesAscending(){for(const[t,i]of this.#l())yield[t,i.value]}get size(){if(!this.#r)return this.#t.size;let t=0;for(const i of this.#t.keys())this.#e.has(i)||t++;return Math.min(this.#r+t,this.#i)}get maxSize(){return this.#i}get maxAge(){return this.#o}entries(){return this.entriesAscending()}forEach(t,i=this){for(const[a,d]of this.entriesAscending())t.call(i,d,a,this)}get[Symbol.toStringTag](){return"QuickLRU"}toString(){return`QuickLRU(${this.size}/${this.maxSize})`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}var Kw={exports:{}},_D;function UW(){return _D||(_D=1,(function(e,t){var i=(function(){var a={},d=Math.PI/180,g=180/Math.PI,y=6378137,c=20037508342789244e-9;function A(C){return Number(C)===C&&C%1!==0}function P(C){if(C=C||{},this.size=C.size||256,this.expansion=C.antimeridian===!0?2:1,!a[this.size]){var I=this.size,B=a[this.size]={};B.Bc=[],B.Cc=[],B.zc=[],B.Ac=[];for(var G=0;G<30;G++)B.Bc.push(I/360),B.Cc.push(I/(2*Math.PI)),B.zc.push(I/2),B.Ac.push(I),I*=2}this.Bc=a[this.size].Bc,this.Cc=a[this.size].Cc,this.zc=a[this.size].zc,this.Ac=a[this.size].Ac}return P.prototype.px=function(C,I){if(A(I)){var B=this.size*Math.pow(2,I),G=B/2,Z=B/360,H=B/(2*Math.PI),U=B,oe=Math.min(Math.max(Math.sin(d*C[1]),-.9999),.9999),ce=G+C[0]*Z,fe=G+.5*Math.log((1+oe)/(1-oe))*-H;return ce>U*this.expansion&&(ce=U*this.expansion),fe>U&&(fe=U),[ce,fe]}else{var G=this.zc[I],oe=Math.min(Math.max(Math.sin(d*C[1]),-.9999),.9999),ce=Math.round(G+C[0]*this.Bc[I]),fe=Math.round(G+.5*Math.log((1+oe)/(1-oe))*-this.Cc[I]);return ce>this.Ac[I]*this.expansion&&(ce=this.Ac[I]*this.expansion),fe>this.Ac[I]&&(fe=this.Ac[I]),[ce,fe]}},P.prototype.ll=function(C,I){if(A(I)){var B=this.size*Math.pow(2,I),G=B/360,Z=B/(2*Math.PI),H=B/2,U=(C[1]-H)/-Z,oe=(C[0]-H)/G,ce=g*(2*Math.atan(Math.exp(U))-.5*Math.PI);return[oe,ce]}else{var U=(C[1]-this.zc[I])/-this.Cc[I],oe=(C[0]-this.zc[I])/this.Bc[I],ce=g*(2*Math.atan(Math.exp(U))-.5*Math.PI);return[oe,ce]}},P.prototype.bbox=function(C,I,B,G,Z){G&&(I=Math.pow(2,B)-1-I);var H=[C*this.size,(+I+1)*this.size],U=[(+C+1)*this.size,I*this.size],oe=this.ll(H,B).concat(this.ll(U,B));return Z==="900913"?this.convert(oe,"900913"):oe},P.prototype.xyz=function(C,I,B,G){G==="900913"&&(C=this.convert(C,"WGS84"));var Z=[C[0],C[1]],H=[C[2],C[3]],U=this.px(Z,I),oe=this.px(H,I),ce=[Math.floor(U[0]/this.size),Math.floor((oe[0]-1)/this.size)],fe=[Math.floor(oe[1]/this.size),Math.floor((U[1]-1)/this.size)],ve={minX:Math.min.apply(Math,ce)<0?0:Math.min.apply(Math,ce),minY:Math.min.apply(Math,fe)<0?0:Math.min.apply(Math,fe),maxX:Math.max.apply(Math,ce),maxY:Math.max.apply(Math,fe)};if(B){var Ee={minY:Math.pow(2,I)-1-ve.maxY,maxY:Math.pow(2,I)-1-ve.minY};ve.minY=Ee.minY,ve.maxY=Ee.maxY}return ve},P.prototype.convert=function(C,I){return I==="900913"?this.forward(C.slice(0,2)).concat(this.forward(C.slice(2,4))):this.inverse(C.slice(0,2)).concat(this.inverse(C.slice(2,4)))},P.prototype.forward=function(C){var I=[y*C[0]*d,y*Math.log(Math.tan(Math.PI*.25+.5*C[1]*d))];return I[0]>c&&(I[0]=c),I[0]<-c&&(I[0]=-c),I[1]>c&&(I[1]=c),I[1]<-c&&(I[1]=-c),I},P.prototype.inverse=function(C){return[C[0]*g/y,(Math.PI*.5-2*Math.atan(Math.exp(-C[1]/y)))*g]},P})();e.exports=i})(Kw)),Kw.exports}var VW=UW();const GW=Vl(VW),g5=256,qW=2*20037508342789244e-9,rS=new GW({size:g5,antimeridian:!0}),$W=({x:e,y:t,z:i})=>rS.bbox(e,t,i,!1,"900913"),ZW=([e,t,i,a])=>[...rS.inverse([e,t]),...rS.inverse([i,a])],HW=e=>Math.log2(qW/(g5*e)),iE=3600*1e3;let Qw;const bD=new nE({maxSize:16,maxAge:iE}),xD=new nE({maxSize:16,maxAge:iE}),wD=new nE({maxSize:1024,maxAge:iE}),y5=e=>{Qw===void 0&&(Qw=new gW);const t=g=>{const y=bD.get(g);if(y)return y;{const c=FW(g);return bD.set(g,c),c}},i=async()=>{const g=xD.get(e);if(g)return g;{const y=await t(e),c=await y.getImage(),A=c.getGDALMetadata(0),P=c.fileDirectory,C=c.fileDirectory?.Artist,I=ZW(c.getBoundingBox()),B=[],G=await y.getImageCount();for(let H=0;H<G;H++){const U=await y.getImage(H),oe=HW(U.getResolution(c)[0]),ce=!!(U.fileDirectory.NewSubfileType&1),fe=!!(U.fileDirectory.NewSubfileType&4);B.push({zoom:oe,isOverview:ce,isMask:fe})}const Z={offset:A?.OFFSET!==void 0?parseFloat(A.OFFSET):0,scale:A?.SCALE!==void 0?parseFloat(A.SCALE):1,noData:c.getGDALNoData()??void 0,photometricInterpretation:P?.PhotometricInterpretation,bitsPerSample:P?.BitsPerSample,colorMap:P?.ColorMap,artist:C,bbox:I,images:B};return xD.set(e,Z),Z}};return{getTilejson:async g=>{const{artist:y,images:c,bbox:A}=await i(),P=c.map(C=>C.zoom);return{tilejson:"2.2.0",tiles:[g+"/{z}/{x}/{y}"],attribution:y,minzoom:Math.round(Math.min(...P)),maxzoom:Math.round(Math.max(...P)),bounds:A}},getMetadata:i,getRawTile:async({z:g,x:y,y:c},A=256)=>{const P=`${e}/${A}/${g}/${y}/${c}`,C=wD.get(P);if(C)return C;{const I=await t(e),{noData:B}=await i(),G=B===void 0||isNaN(B)?1/0:B,Z=I.readRasters({bbox:$W({x:y,y:c,z:g}),width:A,height:A,interleave:!0,resampleMethod:"nearest",pool:Qw,fillValue:G});return wD.set(P,Z),Z}}}},v5={BrewerYlGn3:["#f7fcb9","#addd8e","#31a354"],BrewerYlGn4:["#ffffcc","#c2e699","#78c679","#238443"],BrewerYlGn5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],BrewerYlGn6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],BrewerYlGn7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],BrewerYlGn9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],BrewerYlGnBu3:["#edf8b1","#7fcdbb","#2c7fb8"],BrewerYlGnBu4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],BrewerYlGnBu5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],BrewerYlGnBu7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],BrewerYlGnBu9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],BrewerGnBu3:["#e0f3db","#a8ddb5","#43a2ca"],BrewerGnBu4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],BrewerGnBu5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],BrewerGnBu7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],BrewerGnBu9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],BrewerBuGn3:["#e5f5f9","#99d8c9","#2ca25f"],BrewerBuGn4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],BrewerBuGn5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],BrewerBuGn7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],BrewerBuGn9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],BrewerPuBuGn3:["#ece2f0","#a6bddb","#1c9099"],BrewerPuBuGn4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],BrewerPuBuGn5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],BrewerPuBuGn7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],BrewerPuBuGn9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],BrewerPuBu3:["#ece7f2","#a6bddb","#2b8cbe"],BrewerPuBu4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],BrewerPuBu5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],BrewerPuBu7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],BrewerPuBu9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BrewerBuPu3:["#e0ecf4","#9ebcda","#8856a7"],BrewerBuPu4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],BrewerBuPu5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],BrewerBuPu6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],BrewerBuPu7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],BrewerBuPu9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],BrewerRdPu3:["#fde0dd","#fa9fb5","#c51b8a"],BrewerRdPu4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],BrewerRdPu5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],BrewerRdPu6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],BrewerRdPu7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],BrewerRdPu9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],BrewerPuRd3:["#e7e1ef","#c994c7","#dd1c77"],BrewerPuRd4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],BrewerPuRd5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],BrewerPuRd6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],BrewerPuRd7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],BrewerPuRd9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],BrewerOrRd3:["#fee8c8","#fdbb84","#e34a33"],BrewerOrRd4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],BrewerOrRd5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],BrewerOrRd6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],BrewerOrRd7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],BrewerOrRd9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],BrewerYlOrRd3:["#ffeda0","#feb24c","#f03b20"],BrewerYlOrRd4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],BrewerYlOrRd5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],BrewerYlOrRd7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],BrewerYlOrRd9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],BrewerYlOrBr3:["#fff7bc","#fec44f","#d95f0e"],BrewerYlOrBr4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],BrewerYlOrBr5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],BrewerYlOrBr6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],BrewerYlOrBr7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],BrewerYlOrBr9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],BrewerPurples3:["#efedf5","#bcbddc","#756bb1"],BrewerPurples4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],BrewerPurples5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],BrewerPurples6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],BrewerPurples7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],BrewerPurples9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],BrewerBlues3:["#deebf7","#9ecae1","#3182bd"],BrewerBlues4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],BrewerBlues5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],BrewerBlues6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],BrewerBlues7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],BrewerBlues9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],BrewerGreens3:["#e5f5e0","#a1d99b","#31a354"],BrewerGreens4:["#edf8e9","#bae4b3","#74c476","#238b45"],BrewerGreens5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],BrewerGreens6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],BrewerGreens7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],BrewerGreens9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],BrewerOranges3:["#fee6ce","#fdae6b","#e6550d"],BrewerOranges4:["#feedde","#fdbe85","#fd8d3c","#d94701"],BrewerOranges5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],BrewerOranges6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],BrewerOranges7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],BrewerOranges9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BrewerReds3:["#fee0d2","#fc9272","#de2d26"],BrewerReds4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],BrewerReds5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],BrewerReds6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],BrewerReds7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],BrewerReds9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],BrewerGreys3:["#f0f0f0","#bdbdbd","#636363"],BrewerGreys4:["#f7f7f7","#cccccc","#969696","#525252"],BrewerGreys5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],BrewerGreys6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],BrewerGreys7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],BrewerGreys9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],BrewerPuOr3:["#f1a340","#f7f7f7","#998ec3"],BrewerPuOr4:["#e66101","#fdb863","#b2abd2","#5e3c99"],BrewerPuOr5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],BrewerPuOr6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],BrewerPuOr7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],BrewerPuOr8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],BrewerPuOr10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerPuOr11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],BrewerBrBG3:["#d8b365","#f5f5f5","#5ab4ac"],BrewerBrBG4:["#a6611a","#dfc27d","#80cdc1","#018571"],BrewerBrBG5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],BrewerBrBG6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],BrewerBrBG8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],BrewerBrBG10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerBrBG11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],BrewerPRGn3:["#af8dc3","#f7f7f7","#7fbf7b"],BrewerPRGn4:["#7b3294","#c2a5cf","#a6dba0","#008837"],BrewerPRGn5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],BrewerPRGn6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],BrewerPRGn8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],BrewerPRGn10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPRGn11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],BrewerPiYG3:["#e9a3c9","#f7f7f7","#a1d76a"],BrewerPiYG4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],BrewerPiYG5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],BrewerPiYG6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],BrewerPiYG8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],BrewerPiYG10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerPiYG11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],BrewerRdBu3:["#ef8a62","#f7f7f7","#67a9cf"],BrewerRdBu4:["#ca0020","#f4a582","#92c5de","#0571b0"],BrewerRdBu5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],BrewerRdBu6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],BrewerRdBu8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],BrewerRdBu10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdBu11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],BrewerRdGy3:["#ef8a62","#ffffff","#999999"],BrewerRdGy4:["#ca0020","#f4a582","#bababa","#404040"],BrewerRdGy5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],BrewerRdGy6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],BrewerRdGy8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],BrewerRdGy10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdGy11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],BrewerRdYlBu3:["#fc8d59","#ffffbf","#91bfdb"],BrewerRdYlBu4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],BrewerRdYlBu5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],BrewerRdYlBu6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],BrewerRdYlBu8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],BrewerRdYlBu10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerRdYlBu11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrewerSpectral3:["#fc8d59","#ffffbf","#99d594"],BrewerSpectral4:["#d7191c","#fdae61","#abdda4","#2b83ba"],BrewerSpectral5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],BrewerSpectral6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],BrewerSpectral7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],BrewerSpectral8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],BrewerSpectral10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerSpectral11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],BrewerRdYlGn3:["#fc8d59","#ffffbf","#91cf60"],BrewerRdYlGn4:["#d7191c","#fdae61","#a6d96a","#1a9641"],BrewerRdYlGn5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],BrewerRdYlGn6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],BrewerRdYlGn8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],BrewerRdYlGn10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerRdYlGn11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],BrewerAccent3:["#7fc97f","#beaed4","#fdc086"],BrewerAccent4:["#7fc97f","#beaed4","#fdc086","#ffff99"],BrewerAccent5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],BrewerAccent6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],BrewerAccent7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],BrewerAccent8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],BrewerDark23:["#1b9e77","#d95f02","#7570b3"],BrewerDark24:["#1b9e77","#d95f02","#7570b3","#e7298a"],BrewerDark25:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],BrewerDark26:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],BrewerDark27:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],BrewerDark28:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],BrewerPaired3:["#a6cee3","#1f78b4","#b2df8a"],BrewerPaired4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],BrewerPaired5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],BrewerPaired6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],BrewerPaired7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],BrewerPaired8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],BrewerPaired9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],BrewerPaired10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],BrewerPaired11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],BrewerPaired12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],BrewerPastel13:["#fbb4ae","#b3cde3","#ccebc5"],BrewerPastel14:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],BrewerPastel15:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],BrewerPastel16:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],BrewerPastel17:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],BrewerPastel18:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],BrewerPastel19:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],BrewerPastel23:["#b3e2cd","#fdcdac","#cbd5e8"],BrewerPastel24:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],BrewerPastel25:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],BrewerPastel26:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],BrewerPastel27:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],BrewerPastel28:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],BrewerSet13:["#e41a1c","#377eb8","#4daf4a"],BrewerSet14:["#e41a1c","#377eb8","#4daf4a","#984ea3"],BrewerSet15:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],BrewerSet16:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],BrewerSet17:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],BrewerSet18:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],BrewerSet19:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],BrewerSet23:["#66c2a5","#fc8d62","#8da0cb"],BrewerSet24:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],BrewerSet25:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],BrewerSet26:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],BrewerSet27:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],BrewerSet28:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],BrewerSet33:["#8dd3c7","#ffffb3","#bebada"],BrewerSet34:["#8dd3c7","#ffffb3","#bebada","#fb8072"],BrewerSet35:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],BrewerSet36:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],BrewerSet37:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],BrewerSet38:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],BrewerSet39:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],BrewerSet310:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],BrewerSet311:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],BrewerSet312:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],CartoBurg:["#ffc6c4","#f4a3a8","#e38191","#cc607d","#ad466c","#8b3058","#672044"],CartoBurgYl:["#fbe6c5","#f5ba98","#ee8a82","#dc7176","#c8586c","#9c3f5d","#70284a"],CartoRedOr:["#f6d2a9","#f5b78e","#f19c7c","#ea8171","#dd686c","#ca5268","#b13f64"],CartoOrYel:["#ecda9a","#efc47e","#f3ad6a","#f7945d","#f97b57","#f66356","#ee4d5a"],CartoPeach:["#fde0c5","#facba6","#f8b58b","#f59e72","#f2855d","#ef6a4c","#eb4a40"],CartoPinkYl:["#fef6b5","#ffdd9a","#ffc285","#ffa679","#fa8a76","#f16d7a","#e15383"],CartoMint:["#e4f1e1","#b4d9cc","#89c0b6","#63a6a0","#448c8a","#287274","#0d585f"],CartoBluGrn:["#c4e6c3","#96d2a4","#6dbc90","#4da284","#36877a","#266b6e","#1d4f60"],CartoDarkMint:["#d2fbd4","#a5dbc2","#7bbcb0","#559c9e","#3a7c89","#235d72","#123f5a"],CartoEmrld:["#d3f2a3","#97e196","#6cc08b","#4c9b82","#217a79","#105965","#074050"],CartoBluYl:["#f7feae","#b7e6a5","#7ccba2","#46aea0","#089099","#00718b","#045275"],CartoTeal:["#d1eeea","#a8dbd9","#85c4c9","#68abb8","#4f90a6","#3b738f","#2a5674"],CartoTealGrn:["#b0f2bc","#89e8ac","#67dba5","#4cc8a3","#38b2a3","#2c98a0","#257d98"],CartoPurp:["#f3e0f7","#e4c7f1","#d1afe8","#b998dd","#9f82ce","#826dba","#63589f"],CartoPurpOr:["#f9ddda","#f2b9c4","#e597b9","#ce78b3","#ad5fad","#834ba0","#573b88"],CartoSunset:["#f3e79b","#fac484","#f8a07e","#eb7f86","#ce6693","#a059a0","#5c53a5"],CartoMagenta:["#f3cbd3","#eaa9bd","#dd88ac","#ca699d","#b14d8e","#91357d","#6c2167"],CartoSunsetDark:["#fcde9c","#faa476","#f0746e","#e34f6f","#dc3977","#b9257a","#7c1d6f"],CartoBrwnYl:["#ede5cf","#e0c2a2","#d39c83","#c1766f","#a65461","#813753","#541f3f"],CartoArmyRose:["#798234","#a3ad62","#d0d3a2","#fdfbe4","#f0c6c3","#df91a3","#d46780"],CartoFall:["#3d5941","#778868","#b5b991","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoGeyser:["#008080","#70a494","#b4c8a8","#f6edbd","#edbb8a","#de8a5a","#ca562c"],CartoTemps:["#009392","#39b185","#9ccb86","#e9e29c","#eeb479","#e88471","#cf597e"],CartoTealRose:["#009392","#72aaa1","#b1c7b3","#f1eac8","#e5b9ad","#d98994","#d0587e"],CartoTropic:["#009B9E","#42B7B9","#A7D3D4","#F1F1F1","#E4C1D9","#D691C1","#C75DAB"],CartoEarth:["#A16928","#bd925a","#d6bd8d","#edeac2","#b5c8b8","#79a7ac","#2887a1"]},YW=Object.keys(v5);function XW(e){return YW.includes(e)}const WW=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,KW=e=>{const t=WW.exec(e);if(t!==null)return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)];throw new Error(`Cannot parse hex color "${e}"`)},QW=(e,t,i)=>Array.from({length:i},(a,d)=>e+d*(t-e)/(i-1)),JW=(e,t,i)=>Array.from({length:i-1},(a,d)=>e+(d+1)*(t-e)/i),eK=({colorScheme:e,customColors:t,min:i,max:a,isReverse:d=!1,isContinuous:g=!1})=>{let y;if(e)if(XW(e))y=v5[e];else throw new Error(`"${e}" is not a supported color scheme`);else if(t&&t.length>=2)y=t;else throw new Error("You must provide a colorScheme or an array of at least 2 customColors");const c=y.map(KW),A=d?c.reverse():c;if(g){const P=QW(i,a,A.length);return $S(P,A).clamp(!0)}else{const P=JW(i,a,A.length);return WS(P,A)}},Ad=256,tK=(e,{offset:t,scale:i,noData:a,colorScale:d})=>{const g=Ad*Ad,y=e.length/g,c=new Uint8ClampedArray(g*4),A=eK(d);for(let P=0;P<g;P++){const C=t+e[P*y]*i;if(C===a||isNaN(C)||C===1/0)c[4*P]=0,c[4*P+1]=0,c[4*P+2]=0,c[4*P+3]=0;else{const I=A(C);c[4*P]=I[0],c[4*P+1]=I[1],c[4*P+2]=I[2],c[4*P+3]=255}}return c},Js=Ad*Ad,lm=e=>e.length/Js;function rK(e,t,i){const a=new Uint8ClampedArray(Js*4),d=lm(e);let g;for(let y=0;y<Js;y++)g=255-e[y*d]/t*255,a[y*4]=g,a[y*4+1]=g,a[y*4+2]=g,a[y*4+3]=e[y*d]===i?0:255;return a}function nK(e,t,i){const a=new Uint8ClampedArray(Js*4),d=lm(e);let g;for(let y=0;y<Js;y++)g=e[y*d]/t*255,a[y*4]=g,a[y*4+1]=g,a[y*4+2]=g,a[y*4+3]=e[y*d]===i?0:255;return a}function iK(e,t){const i=new Uint8ClampedArray(Js*4),a=lm(e);for(let d=0;d<Js;d++)i[d*4]=e[d*a],i[d*4+1]=e[d*a+1],i[d*4+2]=e[d*a+2],i[d*4+3]=e[d*a]===t&&e[d*a+1]===t&&e[d*a+2]===t?0:255;return i}function aK(e,t,i){const a=new Uint8ClampedArray(Js*4),d=lm(e),g=t.length/3,y=t.length/3*2;for(let c=0;c<Js;c++){const A=e[c*d];a[c*4]=t[A]/65536*256,a[c*4+1]=t[A+g]/65536*256,a[c*4+2]=t[A+y]/65536*256,a[c*4+3]=e[c*d]===i?0:255}return a}function oK(e,t){const i=new Uint8ClampedArray(Js*4),a=lm(e);for(let d=0;d<e.length;d++){const g=e[d*a],y=e[d*a+1],c=e[d*a+2],A=e[d*a+3];i[d*4]=255*((255-g)/256)*((255-A)/256),i[d*4+1]=255*((255-y)/256)*((255-A)/256),i[d*4+2]=255*((255-c)/256)*((255-A)/256),i[d*4+3]=g===t&&y===t&&c===t&&A===t?0:255}return i}function sK(e,t){const i=new Uint8ClampedArray(Js*4),a=lm(e);for(let d=0;d<Js;d++){const g=e[d*a],y=e[d*a+1],c=e[d*a+2];i[d*4]=g+1.402*(c-128),i[d*4+1]=g-.34414*(y-128)-.71414*(c-128),i[d*4+2]=g+1.772*(y-128),i[d*4+3]=g===t&&y==t&&c==t?0:255}return i}const lK=.95047,cK=1,uK=1.08883;function hK(e,t){const i=new Uint8ClampedArray(Js),a=lm(e);for(let d=0;d<e.length;d++){const g=e[d*a],y=e[d*a+1]<<24>>24,c=e[d*a+2]<<24>>24;let A=(g+16)/116,P=y/500+A,C=A-c/200,I,B,G;P=lK*(P*P*P>.008856?P*P*P:(P-16/116)/7.787),A=cK*(A*A*A>.008856?A*A*A:(A-16/116)/7.787),C=uK*(C*C*C>.008856?C*C*C:(C-16/116)/7.787),I=P*3.2406+A*-1.5372+C*-.4986,B=P*-.9689+A*1.8758+C*.0415,G=P*.0557+A*-.204+C*1.057,I=I>.0031308?1.055*I**(1/2.4)-.055:12.92*I,B=B>.0031308?1.055*B**(1/2.4)-.055:12.92*B,G=G>.0031308?1.055*G**(1/2.4)-.055:12.92*G,i[4*d]=Math.max(0,Math.min(1,I))*255,i[4*d+1]=Math.max(0,Math.min(1,B))*255,i[4*d+2]=Math.max(0,Math.min(1,G))*255,i[d*4+3]=g===t&&y==t&&c==t?0:255}return i}var Wh;(function(e){e[e.WhiteIsZero=0]="WhiteIsZero",e[e.BlackIsZero=1]="BlackIsZero",e[e.RGB=2]="RGB",e[e.Palette=3]="Palette",e[e.TransparencyMask=4]="TransparencyMask",e[e.CMYK=5]="CMYK",e[e.YCbCr=6]="YCbCr",e[e.CIELab=8]="CIELab",e[e.ICCLab=9]="ICCLab"})(Wh||(Wh={}));const fK=(e,{noData:t,photometricInterpretation:i,bitsPerSample:a,colorMap:d})=>{const g=a&&a[0]?2**a[0]:NaN,y=t??0;let c;switch(i){case Wh.WhiteIsZero:c=rK(e,g,y);break;case Wh.BlackIsZero:c=nK(e,g,y);break;case Wh.RGB:c=iK(e,y);break;case Wh.Palette:if(d)c=aK(e,d,y);else throw new Error("colorMap for paletted image not found.");break;case Wh.CMYK:c=oK(e,y);break;case Wh.YCbCr:c=sK(e,y);break;case Wh.CIELab:c=hK(e,y);break;default:throw new Error("Unsupported photometric interpretation.")}return c},dK=(e,{offset:t,scale:i,noData:a})=>{const d=Ad*Ad,g=e.length/d,y=new Uint8ClampedArray(d*4),c=-1e4,A=.1;for(let P=0;P<d;P++){const C=t+e[P*g]*i,B=((C==a?0:C)-c)/A;y[4*P]=Math.floor(B/256/256)%256,y[4*P+1]=Math.floor(B/256)%256,y[4*P+2]=B%256,y[4*P+3]=255}return y},SD={},pK={get:e=>SD[e],set:(e,t)=>{SD[e]=t}},mK=async e=>{const t=new RegExp(/cog:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),i=e.match(t);if(!i)throw new Error(`Invalid COG protocol URL '${e}'`);const a=i[1].split("#"),d=a[0];a.shift();const g=a.join("#")??"",y=parseInt(i[2]),c=parseInt(i[3]),A=parseInt(i[4]),P=y5(d),C=await P.getRawTile({z:y,x:c,y:A}),I=await P.getMetadata();let B;const G=pK.get(d);if(G!==void 0)B=G(C,I);else if(g.startsWith("dem"))B=dK(C,I);else if(g.startsWith("color")){const Z=g.split("color").pop()?.substring(1);if(Z){const H=Z.match(/\[("#([0-9a-fA-F]{3,6})"(,(\s)?)?)+]/)?.[0];let U="",oe=[],ce,fe,ve;H?(oe=JSON.parse(H),[ce,fe,ve]=Z.replace(`${H},`,"").split(",")):[U,ce,fe,ve]=Z.split(",");const Ee=parseFloat(ce),Me=parseFloat(fe),ze=ve?.includes("-")||!1,Ke=ve?.includes("c")||!1;B=tK(C,{...I,colorScale:{colorScheme:U,customColors:oe,min:Ee,max:Me,isReverse:ze,isContinuous:Ke}})}else throw new Error("Color params are not defined")}else B=fK(C,I);return await createImageBitmap(new ImageData(B,Ad,Ad))},gK=async e=>{if(e.type=="json"){const t=e.url.replace("cog://","").split("#")[0];return{data:await y5(t).getTilejson(e.url)}}else{if(e.type=="image")return{data:await mK(e.url)};throw new Error(`Unsupported request type '${e.type}'`)}},Jw="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/unfpa_od_population_data.pmtiles",yK={buildup:{urls:{2011:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/Data/lulc_2011_builtup.tif",2024:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/Data/lulc_2024_builtup.tif"},params:'#color:["#fee0d2","#fcbba1","#fc9272","#ef3b2c","#67000d"],0,3000,c'},nightlight:{urls:{2012:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/Data/NTL_2012.tif",2024:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/Data/NTL_2024.tif"},params:'#color:["#e0f7fa", "#b2ebf2", "#80deea", "#4dd0e1", "#26c6da"],0,20,c'},urbansprawl:{urls:{2011:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/Data/anugul_built_up_vector_2010.pmtiles",2024:"https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/Data/anugul_built_up_vector_2025.pmtiles"},params:'#color:["#fee0d2","#fcbba1","#fc9272","#ef3b2c","#67000d"],0,3000,c'}};let TD=!1;function vK({targetBounds:e,activeLayer:t="buildup",year1:i,year2:a,resetTrigger:d}){const g=X.useRef(null),y=X.useRef(null),c=X.useRef(null),A=[85.0985,20.9517],P=6,C=X.useRef(null),I=X.useRef(null),B=X.useRef(null),[G,Z]=X.useState(null),[H,U]=X.useState(!1),oe=t==="nightlight"?"nightlight":t==="urbansprawl"?"urbansprawl":"buildup",ce=yK[oe],fe=Object.keys(ce.urls).sort();let ve=i;(!ve||!ce.urls[ve])&&(ve=fe[0]);let Ee=a;(!Ee||!ce.urls[Ee])&&(Ee=fe[fe.length-1]);const Me=Te=>{const dt=ce.urls[Te];return oe==="urbansprawl"?`pmtiles://${dt}`:`cog://${dt}${ce.params}`},ze=Me(ve),Ke=Me(Ee),mt=X.useRef({left:ze,right:Ke});X.useEffect(()=>{mt.current={left:ze,right:Ke}},[ze,Ke]),X.useEffect(()=>{const Te=()=>{g.current&&Z(g.current.clientWidth/2)};return Te(),window.addEventListener("resize",Te),()=>window.removeEventListener("resize",Te)},[]),X.useEffect(()=>{if(!TD){try{Bc.addProtocol.toString().includes("cog")||Bc.addProtocol("cog",gK);const Te=new uS;Bc.addProtocol("pmtiles",Te.tile)}catch{}TD=!0}},[]);const zt=()=>{if(C.current){const Te={padding:20,duration:1200};I.current?.fitBounds(C.current,Te)}else I.current?.flyTo({center:A,zoom:P})},Ge=async(Te,dt,It,Rt)=>{const Ve=`main-source-${dt}`,it=`main-layer-${dt}`;if(Te.getLayer(it)&&Te.removeLayer(it),Te.getSource(Ve)&&Te.removeSource(Ve),Rt==="raster")Te.addSource(Ve,{type:"raster",url:It,tileSize:256}),Te.addLayer({id:it,type:"raster",source:Ve,paint:{"raster-opacity":1}});else{Te.addSource(Ve,{type:"vector",url:It});const Mt=It.replace("pmtiles://","");try{const yt=await new Wg(Mt).getMetadata();let Ae="layer";yt&&yt.vector_layers&&yt.vector_layers.length>0&&(Ae=yt.vector_layers[0].id),Te.getSource(Ve)&&Te.addLayer({id:it,type:"fill",source:Ve,"source-layer":Ae,paint:{"fill-color":"#F58220","fill-opacity":.6,"fill-outline-color":"#ffffff"}},"vector-fill-"+dt)}catch(Be){console.error("Failed to load vector metadata",Be)}}};return X.useEffect(()=>{I.current&&I.current.remove(),B.current&&B.current.remove();const Te={version:8,sources:{"esri-satellite":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"background",type:"background",paint:{"background-color":"#000000"}},{id:"esri-satellite-layer",type:"raster",source:"esri-satellite",minzoom:0,maxzoom:22}]};(async()=>{try{const it=await new Wg(Jw).getHeader();it.minLon!==void 0&&(C.current=[[it.minLon,it.minLat],[it.maxLon,it.maxLat]],I.current&&I.current.fitBounds(C.current,{duration:0,padding:40}),B.current&&B.current.fitBounds(C.current,{duration:0,padding:40}))}catch(Ve){console.warn("Failed to fetch PMTiles metadata",Ve)}})(),y.current&&(I.current=new Bc.Map({container:y.current,style:Te,center:A,zoom:P,attributionControl:!1}),I.current.on("load",()=>{I.current?.resize(),C.current&&I.current?.fitBounds(C.current,{duration:0,padding:20}),Ge(I.current,"left",mt.current.left,oe==="urbansprawl"?"vector":"raster"),I.current?.getSource("leftVector")||(I.current?.addSource("leftVector",{type:"vector",url:`pmtiles://${Jw}`}),I.current?.addLayer({id:"vector-fill-left",type:"fill",source:"leftVector","source-layer":"zcta",paint:{"fill-color":"transparent","fill-opacity":0}}),I.current?.addLayer({id:"vector-outline-left",type:"line",source:"leftVector","source-layer":"zcta",paint:{"line-color":"#ff0000","line-width":2}})),I.current?.resize()})),c.current&&(B.current=new Bc.Map({container:c.current,style:Te,center:A,zoom:P,attributionControl:!1}),B.current.on("load",()=>{B.current?.resize(),C.current&&B.current?.fitBounds(C.current,{duration:0,padding:20}),Ge(B.current,"right",mt.current.right,oe==="urbansprawl"?"vector":"raster"),B.current?.getSource("rightVector")||(B.current?.addSource("rightVector",{type:"vector",url:`pmtiles://${Jw}`}),B.current?.addLayer({id:"vector-fill-right",type:"fill",source:"rightVector","source-layer":"zcta",paint:{"fill-color":"transparent","fill-opacity":0}}),B.current?.addLayer({id:"vector-outline-right",type:"line",source:"rightVector","source-layer":"zcta",paint:{"line-color":"#ff0000","line-width":2}})),B.current?.resize()}));let It=!1;const Rt=(Ve,it)=>{const Mt=()=>{It||(It=!0,it.jumpTo({center:Ve.getCenter(),zoom:Ve.getZoom(),bearing:Ve.getBearing(),pitch:Ve.getPitch()}),It=!1)};Ve.on("move",Mt)};return I.current&&B.current&&(Rt(I.current,B.current),Rt(B.current,I.current)),()=>{try{I.current&&(I.current.remove(),I.current=null)}catch(Ve){console.warn("Left map cleanup error",Ve)}try{B.current&&(B.current.remove(),B.current=null)}catch(Ve){console.warn("Right map cleanup error",Ve)}}},[]),X.useEffect(()=>{if(!I.current||!B.current)return;const Te=oe==="urbansprawl"?"vector":"raster";Ge(I.current,"left",ze,Te),Ge(B.current,"right",Ke,Te)},[ze,Ke,oe]),X.useEffect(()=>{if(I.current)if(e){const Te={padding:40,duration:1200};I.current.fitBounds(e,Te)}else zt()},[e,d]),X.useEffect(()=>{const Te=It=>{if(!H)return;const Rt="touches"in It?It.touches[0].clientX:It.clientX;if(g.current){const Ve=g.current.getBoundingClientRect(),it=Math.max(0,Math.min(Ve.width,Rt-Ve.left));Z(it)}},dt=()=>U(!1);return H&&(window.addEventListener("mousemove",Te),window.addEventListener("mouseup",dt),window.addEventListener("touchmove",Te),window.addEventListener("touchend",dt)),()=>{window.removeEventListener("mousemove",Te),window.removeEventListener("mouseup",dt),window.removeEventListener("touchmove",Te),window.removeEventListener("touchend",dt)}},[H]),X.useEffect(()=>{!I.current||!B.current||(I.current.resize(),B.current.resize())},[G]),re.jsx("div",{className:"relative w-full rounded-lg",children:re.jsxs("div",{ref:g,className:"relative w-full h-[500px] overflow-hidden select-none rounded-lg",children:[re.jsx("div",{className:"absolute top-4 left-4 z-30 bg-white text-gray-800 px-3 py-1 rounded-md text-sm font-medium shadow",children:ve}),re.jsx("div",{className:"absolute top-4 right-4 z-30 bg-white text-gray-800 px-3 py-1 rounded-md text-sm font-medium shadow",children:Ee}),re.jsx("div",{ref:y,className:"relative w-full h-[500px] overflow-hidden select-none"}),re.jsx("div",{ref:c,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",clipPath:`inset(0 0 0 ${G}px)`,pointerEvents:"none",overflow:"hidden"}}),G!==null&&re.jsx("div",{onMouseDown:()=>U(!0),onTouchStart:()=>U(!0),className:"absolute top-0 bottom-0 w-1 bg-[#F58220] z-20 flex items-center justify-center cursor-ew-resize hover:scale-110 transition-transform active:scale-110",style:{left:`${G}px`,transform:"translateX(-50%)"},children:re.jsx("div",{className:"absolute w-8 h-8 rounded-full bg-[#F58220] border-[3px] border-white shadow-lg flex items-center justify-center",children:re.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:re.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M8 9l4-4 4 4m0 6l-4 4-4-4",transform:"rotate(90 12 12)"})})})})]})})}const _K=({selectedDistrict:e="Odisha",data:t,allDistrictsData:i})=>{const[a,d]=X.useState(2011),[g,y]=X.useState(2024),[c,A]=X.useState("buildup"),[P,C]=X.useState("Density"),[I,B]=X.useState("What"),[G,Z]=X.useState(!1),[H,U]=X.useState(null),[oe,ce]=X.useState(0);jg.useEffect(()=>{t&&t.bounds?U(t.bounds):(!t||e==="Odisha")&&(U(null),ce(Be=>Be+1))},[t,e]);const fe=jg.useMemo(()=>{if(!i)return new Map;const Be=new Map;return i.forEach(yt=>{const Ae=yt.district_name||yt.NAME||yt.name,qe=sb[Ae]||Ae;qe&&Be.set(qe,yt)}),Be},[i]),ve=(Be,yt)=>{const Ae=parseInt(yt);if(e===Be&&t){const ct=t[`pop_${yt}_sum`];if(ct!=null)return typeof ct=="string"?parseFloat(ct):ct}if(fe.has(Be)){const wt=fe.get(Be)[`pop_${yt}_sum`];if(wt!=null)return typeof wt=="string"?parseFloat(wt):wt}if(Ae>2024){let ct=0;if(e===Be&&t){const wt=t.pop_2024_sum;wt&&(ct=typeof wt=="string"?parseFloat(wt):wt)}if(!ct&&fe.has(Be)){const jt=fe.get(Be).pop_2024_sum;jt&&(ct=typeof jt=="string"?parseFloat(jt):jt)}if(ct>0){const wt=Ae-2024,jt=Be.length%10/2e3;return ct*Math.pow(1.012+jt,wt)}}return 8e5+(Be.length+parseInt(yt))*5e4},Ee=jg.useMemo(()=>{let Be=[];if(i&&i.length>0){const yt=i[0],Ae=Object.keys(yt).filter(qe=>/^pop_\d{4}_sum$/.test(qe)).map(qe=>qe.split("_")[1]).sort();Ae.length>0&&(Be=Ae)}return Be},[i]),Me=jg.useMemo(()=>i2.map(yt=>{const Ae=yt.length,qe=Ee.map(wt=>({year:wt,value:ve(yt,wt)})),ct=qe[qe.length-1]?.value||0;return{name:yt,latestPop:ct,population:(ct/1e6).toFixed(2)+"M",density:(400+Ae*50).toFixed(0)+"/km",migration:"+"+(5+Ae*2).toFixed(1)+"k",growth:"+"+(1.2+Ae*.3).toFixed(1)+"%",trendData:qe}}).sort((yt,Ae)=>Ae.latestPop-yt.latestPop).map((yt,Ae)=>({...yt,rank:Ae+1})),[Ee,i,t,e]),ze=(Be,yt)=>{const qe=(Be-2020)*25e3,ct=Math.abs(12e5+qe+(yt==="population"?0:-5e5)),wt=yt==="population"?ct:ct/1e3,jt=((wt-(yt==="population"?12e5:700))/(yt==="population"?12e5:700)*100).toFixed(1);return{value:yt==="population"?(wt/1e6).toFixed(2)+"M":Math.round(wt).toLocaleString(),growth:`${parseFloat(jt)>0?"+":""}${jt}%`,subMetric:yt==="population"?"Total Population":yt==="nightlight"?"Light Intensity":"Units",rawGrowth:parseFloat(jt)}},Ke=ze(a,c),mt=ze(g,c),zt=(mt.rawGrowth-Ke.rawGrowth).toFixed(1),Ge=Me.findIndex(Be=>Be.name===e);let Te=[];if(Ge===-1||Ge<10)Te=Me.slice(0,10);else{const Be=Me.slice(0,4),yt=Ge,Ae=Math.min(Me.length,yt+6),qe=Me.slice(yt,Ae);Te=[...Be,{isSeparator:!0},...qe]}const dt=(Be,yt)=>{if(!t)return yt;const Ae=`pop_${Be}_sum`,qe=t[Ae];if(qe==null)return yt;const ct=typeof qe=="string"?parseFloat(qe):qe;return ct>1e3?ct/1e6:ct},Rt=(()=>{const Be=["2013","2015","2017","2019","2020","2021","2022","2023","2024","2025","2026","2027","2028","2029","2030"],yt={2013:45.2,2015:46.2,2017:47.2,2019:48.2,2020:50.5,2021:52.8,2022:55.1,2023:57.3,2024:59.5};let Ae=Be;if(t){const ct=Object.keys(t).filter(wt=>/^pop_\d{4}_sum$/.test(wt)).map(wt=>wt.split("_")[1]).sort();ct.length>0&&(Ae=ct)}return t?Ae.map(qe=>{const ct=dt(qe,0);return{year:qe,pop:ct,popActual:parseInt(qe)<=2025?ct:null,popProjected:parseInt(qe)>=2025?ct:null}}).filter(qe=>qe.pop>0):Ae.map(qe=>({year:qe,pop:yt[qe]||0,popActual:parseInt(qe)<=2024?yt[qe]:null,popProjected:parseInt(qe)>=2024?yt[qe]||60+(parseInt(qe)-2024)*.5:null}))})(),Ve={buildup:[2011,2024],nightlight:[2012,2024],urbansprawl:[2011,2024]},it=Ve[c]||[];jg.useEffect(()=>{const Be=Ve[c];Be&&(d(Be[0]),y(Be[Be.length-1]))},[c]);const Mt={What:[{title:"1",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"2",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"3",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."}],How:[{title:"1",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"2",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"3",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."}],Why:[{title:"1",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"2",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"3",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."}]};return re.jsx("div",{className:"bg-white min-h-[500px]",children:re.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-4 lg:px-6 py-10 space-y-12",children:[re.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:re.jsxs("div",{children:[re.jsxs("h2",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[re.jsx(HD,{className:"w-6 h-6 text-black"}),"Comparative Analysis - ",e," ",e==="Odisha"?"State":"District"]}),re.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:["Visualizing spatiotemporal changes in ",e," ",e==="Odisha"?"State":"District","."]})]})}),re.jsx("section",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden",children:re.jsxs("div",{className:"bg-gray-50 p-6 md:p-8",children:[re.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[re.jsxs("div",{className:"space-y-1.5",children:[re.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Metric Layer"}),re.jsxs("div",{className:"relative",children:[re.jsxs("select",{value:c,onChange:Be=>A(Be.target.value),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:[re.jsx("option",{value:"buildup",children:"Built-up Area"}),re.jsx("option",{value:"urbansprawl",children:"Urban Sprawl"}),re.jsx("option",{value:"nightlight",children:"Night Lights"})]}),re.jsx(k0,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),re.jsxs("div",{className:"space-y-1.5",children:[re.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Year 1 (Baseline)"}),re.jsxs("div",{className:"relative",children:[re.jsx("select",{value:a,onChange:Be=>d(parseInt(Be.target.value)),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:it.map(Be=>re.jsx("option",{value:Be,children:Be},Be))}),re.jsx(k0,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),re.jsxs("div",{className:"space-y-1.5",children:[re.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Year 2 (Current)"}),re.jsxs("div",{className:"relative",children:[re.jsx("select",{value:g,onChange:Be=>y(parseInt(Be.target.value)),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:it.map(Be=>re.jsx("option",{value:Be,children:Be},Be))}),re.jsx(k0,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),re.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 relative mb-8",children:[re.jsx("div",{className:"hidden md:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full border border-gray-200 z-10 items-center justify-center shadow-sm text-[10px] font-bold text-gray-400",children:"VS"}),re.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm relative overflow-hidden group hover:border-gray-300 transition-colors",children:[re.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:re.jsx(z4,{className:"w-20 h-20 text-gray-500"})}),re.jsxs("div",{className:"relative z-10",children:[re.jsxs("p",{className:"text-xs text-gray-500 font-bold uppercase mb-2",children:[a," Baseline"]}),re.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[re.jsx("span",{className:"text-2xl font-bold text-gray-900",children:Ke.value}),re.jsx("span",{className:"text-xs text-gray-500 font-medium",children:Ke.subMetric})]}),re.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold bg-gray-100 text-gray-600",children:"Ref."})]})]}),re.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm relative overflow-hidden group hover:border-primary/50 transition-colors",children:[re.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:re.jsx(Z4,{className:"w-20 h-20 text-primary"})}),re.jsxs("div",{className:"relative z-10",children:[re.jsxs("p",{className:"text-xs text-primary font-bold uppercase mb-2",children:[g," Current"]}),re.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[re.jsx("span",{className:"text-2xl font-bold text-gray-900",children:mt.value}),re.jsx("span",{className:"text-xs text-gray-500 font-medium",children:mt.subMetric})]}),re.jsx("div",{className:"flex items-center gap-2",children:re.jsxs("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold ${parseFloat(zt)>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[parseFloat(zt)>=0?"+":"",zt,"% Change"]})})]})]})]}),re.jsx("div",{className:"relative w-full h-[500px] rounded-xl overflow-hidden shadow-sm border border-gray-200 select-none group",children:re.jsx(vK,{targetBounds:H,activeLayer:c,year1:a.toString(),year2:g.toString(),resetTrigger:oe})})]})}),re.jsxs("div",{className:"space-y-6",children:[re.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:re.jsxs("div",{children:[re.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[re.jsx(kE,{className:"w-6 h-6 text-black"}),"Population Projections - ",e]}),re.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:["Long-term demographic forecasting and growth trajectory modeling for ",e," ",e==="Odisha"?"State":"District","."]})]})}),re.jsx("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8",children:re.jsx("div",{className:"h-72 w-full",children:re.jsx(_w,{width:"100%",height:"100%",children:re.jsxs(Hw,{data:Rt,children:[re.jsxs("defs",{children:[re.jsxs("linearGradient",{id:"colorPop",x1:"0",y1:"0",x2:"0",y2:"1",children:[re.jsx("stop",{offset:"5%",stopColor:"#F58220",stopOpacity:.3}),re.jsx("stop",{offset:"95%",stopColor:"#F58220",stopOpacity:0})]}),re.jsxs("linearGradient",{id:"colorPopProj",x1:"0",y1:"0",x2:"0",y2:"1",children:[re.jsx("stop",{offset:"5%",stopColor:"#F58220",stopOpacity:.1}),re.jsx("stop",{offset:"95%",stopColor:"#F58220",stopOpacity:0})]})]}),re.jsx(Dk,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",strokeOpacity:.5}),re.jsx(Vk,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#6B7280"},dy:10}),re.jsx(Gk,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#6B7280"},tickFormatter:Be=>`${Be}M`}),re.jsx(yC,{cursor:{stroke:"#F58220",strokeWidth:1,strokeDasharray:"4 4"},content:({active:Be,payload:yt,label:Ae})=>{if(Be&&yt&&yt.length){let qe=yt[0];if(yt.length>1){const $t=yt.find(Ft=>Ft.name==="Population");$t&&(qe=$t)}if(!qe)return null;const ct=qe.value,wt=typeof ct=="number"?ct.toFixed(2)+"M":ct,jt=qe.name==="Projected"?"Projected ":"Population";return re.jsxs("div",{className:"bg-white border-0 shadow-xl rounded-2xl p-3 md:p-4 min-w-[150px]",children:[re.jsx("p",{className:"text-gray-500 text-[10px] font-bold uppercase tracking-widest mb-1",children:Ae}),re.jsxs("p",{className:"text-[#F58220] text-[12px] font-black",children:[jt," : ",wt]})]})}return null}}),re.jsx(z0,{type:"monotone",dataKey:"popActual",stroke:"#F58220",strokeWidth:4,fill:"url(#colorPop)",fillOpacity:1,activeDot:{r:6,strokeWidth:0,fill:"#D66B12"},color:"#F58220",name:"Population",connectNulls:!1}),re.jsx(z0,{type:"monotone",dataKey:"popProjected",stroke:"#F58220",strokeWidth:3,strokeDasharray:"5 5",fill:"url(#colorPopProj)",fillOpacity:1,activeDot:{r:6,strokeWidth:0,fill:"#D66B12"},color:"#F58220",name:"Projected",connectNulls:!1})]})})})})]}),re.jsxs("div",{className:"space-y-6",children:[re.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[re.jsxs("div",{children:[re.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[re.jsx(kE,{className:"w-6 h-6 text-black"}),"Change Analysis Summary"]}),re.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]}),re.jsx("div",{className:"flex bg-gray-50 p-1 rounded-xl border border-gray-200 shadow-inner",children:["What","How","Why"].map(Be=>re.jsx("button",{onClick:()=>B(Be),className:`px-6 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${I===Be?"bg-[#F58220] text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:Be},Be))})]}),re.jsxs("section",{className:"bg-gray-50 border rounded-2xl p-6 md:p-8",children:[re.jsx("div",{className:"mb-8",children:re.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300 key={activeTab}",children:[I==="What"&&re.jsxs(re.Fragment,{children:[re.jsx("h4",{className:"font-bold font-black mb-3 uppercase text-xs tracking-wider",children:"What Changed?"}),re.jsxs("p",{className:"text-gray-600 leading-relaxed text-sm",children:["Rapid urbanization in the northern corridors has led to a ",re.jsx("span",{className:"font-semibold text-gray-900",children:"15% increase"})," in built-up areas, replacing traditional agricultural zones."]})]}),I==="How"&&re.jsxs(re.Fragment,{children:[re.jsx("h4",{className:"font-bold font-black mb-3 uppercase text-xs tracking-wider",children:"How it happened?"}),re.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:"Infrastructure expansion, specifically the new ring road project, catalyzed residential development. Satellite data shows clear linear growth patterns."})]}),I==="Why"&&re.jsxs(re.Fragment,{children:[re.jsx("h4",{className:"font-bold font-black mb-3 uppercase text-xs tracking-wider",children:"Why it matters?"}),re.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:"This shift places pressure on existing water infrastructure and demands immediate upgrades to the electrical grid to support 2030 targets."})]})]})}),re.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 pt-6 border-t border-blue-200/50 h-[500px]",children:[re.jsx("div",{className:"w-full lg:w-3/4 rounded-2xl overflow-hidden border border-gray-200 shadow-sm relative",children:re.jsx(uX,{activeLayer:"buildup",selectedYear:"2025",onBoundsChange:U})}),re.jsx("div",{className:"w-full lg:w-1/4 flex flex-col gap-4 overflow-y-auto pr-1 custom-scrollbar",children:Mt[I].map((Be,yt)=>re.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all animate-in fade-in slide-in-from-right-4 duration-500",style:{animationDelay:`${yt*100}ms`},children:[re.jsx("h4",{className:"font-bold text-xs uppercase tracking-wide text-gray-500 mb-2",children:Be.title}),re.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:Be.desc})]},yt))})]})]})]}),re.jsxs("div",{className:"space-y-6",children:[re.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[re.jsxs("div",{children:[re.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[re.jsx(Y4,{className:"w-6 h-6 text-black"}),"Regional Performance Matrix"]}),re.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]}),re.jsx("div",{className:"flex bg-gray-50 p-1 rounded-xl border border-gray-200 shadow-inner",children:["Density","Growth","Urbanization","Migration"].map(Be=>re.jsx("button",{onClick:()=>C(Be),className:`px-4 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${P===Be?"bg-[#F58220] text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:Be},Be))})]}),re.jsxs("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8 overflow-hidden",children:[re.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100",children:re.jsxs("table",{className:"w-full text-sm",children:[re.jsx("thead",{className:"bg-gray-50 text-gray-500 uppercase text-[10px] font-bold tracking-wider",children:re.jsxs("tr",{children:[re.jsx("th",{className:"px-6 py-4 text-center w-20",children:"Rank"}),re.jsx("th",{className:"px-6 py-4 text-left",children:"District Name"}),re.jsx("th",{className:"px-6 py-4 text-right",children:"Total Population"}),re.jsx("th",{className:"px-6 py-4 text-right",children:"Urban Density"}),re.jsx("th",{className:"px-6 py-4 text-right",children:"Migration Net"}),re.jsx("th",{className:"px-6 py-4 text-right",children:"YoY Growth"}),re.jsx("th",{className:"px-6 py-4 text-center",children:"Trend"})]})}),re.jsx("tbody",{className:"divide-y divide-gray-50",children:Te.map((Be,yt)=>Be.isSeparator?re.jsx("tr",{className:"bg-gray-50/50",children:re.jsx("td",{colSpan:7,className:"px-6 py-2 text-center text-xs font-medium text-gray-400 tracking-widest uppercase",children:"..."})},`separator-${yt}`):re.jsxs("tr",{className:`transition-all group cursor-pointer ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"bg-[#F58220] shadow-md":"hover:bg-gray-50"}`,children:[re.jsxs("td",{className:`px-6 py-4 text-center font-bold transition-colors first:rounded-l-xl last:rounded-r-xl ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-400 group-hover:text-primary"}`,children:["#",Be.rank]}),re.jsx("td",{className:`px-6 py-4 font-bold ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-900"}`,children:Be.name}),re.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Be.population}),re.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Be.density}),re.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-secondary"}`,children:Be.migration}),re.jsx("td",{className:"px-6 py-4 text-right first:rounded-l-xl last:rounded-r-xl",children:re.jsx("span",{className:`px-2 py-1 rounded ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"bg-white/20 text-white font-bold":"text-green-600 bg-green-50/50 font-bold"}`,children:Be.growth})}),re.jsx("td",{className:"px-6 py-4 first:rounded-l-xl last:rounded-r-xl",children:re.jsx("div",{className:"h-10 w-24 mx-auto",children:re.jsx(_w,{width:"100%",height:"100%",children:re.jsxs(Hw,{data:Be.trendData,children:[re.jsx(yC,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",padding:"4px 8px",fontSize:"10px"},cursor:{stroke:e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"#fff":"#F58220",strokeWidth:1}}),re.jsx("defs",{children:re.jsxs("linearGradient",{id:`gradient-${Be.rank}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[re.jsx("stop",{offset:"5%",stopColor:e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:.5}),re.jsx("stop",{offset:"95%",stopColor:e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:0})]})}),re.jsx(z0,{type:"monotone",dataKey:"value",stroke:e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"#fff":"#F58220",strokeWidth:1.5,fill:`url(#gradient-${Be.rank})`})]})})})})]},Be.rank))})]})}),re.jsx("div",{className:"mt-4 text-center border-t border-gray-50 pt-4",children:re.jsx("button",{onClick:()=>Z(!0),className:"text-xs font-bold text-primary hover:underline flex items-center justify-center gap-1 mx-auto",children:"View Full Dataset"})})]})]}),G&&re.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 animate-in fade-in duration-200",children:re.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-in zoom-in-95 duration-200 overflow-hidden",children:[re.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[re.jsxs("div",{children:[re.jsx("h3",{className:"text-xl font-black text-gray-900 tracking-tight",children:"Full Regional Dataset"}),re.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Comprehensive performance metrics for all ",i2.length," districts."]})]}),re.jsx("button",{onClick:()=>Z(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500",children:re.jsx(lS,{className:"w-5 h-5"})})]}),re.jsx("div",{className:"overflow-auto custom-scrollbar h-[calc(90vh-80px)]",children:re.jsxs("table",{className:"w-full text-sm",children:[re.jsx("thead",{className:"bg-gray-100 text-gray-500 uppercase text-[10px] font-bold tracking-wider sticky top-0 z-50 shadow-sm",children:re.jsxs("tr",{children:[re.jsx("th",{className:"px-6 py-4 text-center w-20 bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Rank"}),re.jsx("th",{className:"px-6 py-4 text-left bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"District"}),re.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Total Pop."}),re.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Density"}),re.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Migration"}),re.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Growth"}),re.jsx("th",{className:"px-6 py-4 text-center bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Trend"})]})}),re.jsx("tbody",{className:"divide-y divide-gray-50",children:Me.map(Be=>re.jsxs("tr",{className:`transition-all group ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"bg-[#F58220] shadow-md":"hover:bg-gray-50"}`,children:[re.jsxs("td",{className:`px-6 py-4 text-center font-bold transition-colors first:rounded-l-xl last:rounded-r-xl ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-400"}`,children:["#",Be.rank]}),re.jsx("td",{className:`px-6 py-4 font-bold text-left ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-900"}`,children:Be.name}),re.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Be.population}),re.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Be.density}),re.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"text-white":"text-secondary"}`,children:Be.migration}),re.jsx("td",{className:"px-6 py-4 text-right first:rounded-l-xl last:rounded-r-xl",children:re.jsx("span",{className:`px-2 py-1 rounded ${e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"bg-white/20 text-white font-bold":"text-green-600 bg-green-50/50 font-bold"}`,children:Be.growth})}),re.jsx("td",{className:"px-6 py-4 text-center first:rounded-l-xl last:rounded-r-xl",children:re.jsx("div",{className:"h-8 w-24 mx-auto",children:re.jsx(_w,{width:"100%",height:"100%",children:re.jsxs(Hw,{data:Be.trendData,children:[re.jsx("defs",{children:re.jsxs("linearGradient",{id:`gradient-modal-${Be.rank}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[re.jsx("stop",{offset:"5%",stopColor:e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:.5}),re.jsx("stop",{offset:"95%",stopColor:e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:0})]})}),re.jsx(z0,{type:"monotone",dataKey:"value",stroke:e?.trim().toLowerCase()===Be.name.trim().toLowerCase()?"#fff":"#F58220",strokeWidth:1.5,fill:`url(#gradient-modal-${Be.rank})`})]})})})})]},Be.rank))})]})})]})}),re.jsxs("div",{className:"space-y-6",children:[re.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:re.jsxs("div",{children:[re.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[re.jsx(I4,{className:"w-6 h-6 text-black"}),"Critical Insights & Recommendations"]}),re.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]})}),re.jsx("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8",children:re.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[re.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border-t border-gray-200",children:[re.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Resource Stress"}),re.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:["Water stress levels projected to rise by ",re.jsx("strong",{children:"20%"})," in urban pockets by 2026 due to the current density trajectory. Immediate aquifer recharge implementation recommended."]})]}),re.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border border-gray-200",children:[re.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Housing Capacity"}),re.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:[re.jsx("strong",{children:"Migration inflow"})," is currently exceeding housing development capacity in Sector 4 by a factor of 1.5x, leading to potential unregulated settlement expansion."]})]}),re.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border border-gray-200",children:[re.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Infrastructure Load"}),re.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:["Energy grid loads are peaking at ",re.jsx("strong",{children:"92%"})," capacity during summer months. Grid modernization required before 2026 to avoid brownouts."]})]})]})})]})]})})},Ux=({children:e,title:t})=>re.jsx("div",{className:"relative min-h-screen bg-white",children:re.jsxs("div",{className:"w-full max-w-[1600px] mx-auto px-4 lg:px-6 pt-2 pb-8",children:[re.jsxs("div",{className:"flex justify-between items-center mb-10",children:[t&&re.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:t}),re.jsx(Zg,{to:"/",className:"p-2 text-gray-400 hover:text-orange-500 transition-colors group",title:"Close and return to dashboard",children:re.jsx(lS,{className:"w-6 h-6"})})]}),re.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e})]})}),bK=()=>re.jsx(Ux,{title:"About the Project",children:re.jsx("div",{className:"w-full",children:re.jsxs("div",{className:"text-gray-600 text-sm leading-relaxed space-y-6",children:[re.jsx("p",{children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),re.jsx("p",{children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."}),re.jsx("p",{children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum. Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})})}),xK=()=>re.jsx(Ux,{title:"Our Methodology",children:re.jsxs("div",{className:"w-full",children:[re.jsxs("div",{className:"mb-12",children:[re.jsx("div",{className:"flex items-center gap-3 mb-6",children:re.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Overview"})}),re.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:"The Demographic Intelligence Unit (DIU) employs a multi-source data fusion approach combining census data, satellite imagery, and administrative records to generate high-resolution demographic estimates and projections for Odisha's 30 districts."})]}),re.jsxs("div",{className:"flex flex-col gap-16 mb-20",children:[re.jsx("div",{className:"space-y-16",children:re.jsxs("div",{children:[re.jsx("div",{className:"flex items-center gap-3 mb-6",children:re.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Data Sources"})}),re.jsx("ul",{className:"space-y-4 pl-4",children:[{title:"Census of India 2011",desc:"Baseline population, household, and demographic indicators"},{title:"Sample Registration System",desc:"Vital statistics and growth rates"},{title:"Satellite Imagery (Sentinel-2, Landsat-8)",desc:"High-resolution land cover and environmental data"},{title:"VIIRS Nighttime Lights",desc:"Proxy for economic activity and electrification"},{title:"OpenStreetMap",desc:"Road networks and infrastructure mapping"},{title:"Microsoft Building Footprints",desc:"AI-derived building density and expansion metrics"}].map((e,t)=>re.jsxs("li",{className:"flex items-start gap-3",children:[re.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-gray-400 flex-shrink-0"}),re.jsxs("div",{children:[re.jsxs("span",{className:"font-bold text-gray-900 text-sm",children:[e.title,": "]}),re.jsx("span",{className:"text-sm text-gray-600",children:e.desc})]})]},t))})]})}),re.jsxs("div",{children:[re.jsx("div",{className:"flex items-center gap-3 mb-10",children:re.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Methodology Steps"})}),re.jsx("div",{className:"space-y-6",children:[{step:"01",title:"Data Collection & Preprocessing",desc:"We begin by aggregating multi-source data including census records, satellite imagery, and administrative datasets. This involves standardization, cleaning, and geocoding to ensure all data layers are spatially aligned. Satellite imagery undergoes atmospheric correction and cloud masking to produce analysis-ready data products."},{step:"02",title:"Feature Extraction",desc:"Key demographic indicators are derived from geospatial data. We extract spectral indices (NDVI, NDBI, NDWI), building footprints, road density, and nighttime light intensity at district and sub-district levels. These features serve as the primary predictor variables for our models."},{step:"03",title:"Population Modeling",desc:"Machine learning models, primarily Random Forest and XGBoost, are trained on ground-truth census data to establish relationships between satellite-derived features and population density. These models are then used to estimate inter-censal population figures with high spatial resolution."},{step:"04",title:"Projection & Validation",desc:"Future population scenarios (2024-2036) are generated using a cohort-component method combined with spatial disaggregation. The results undergo rigorous cross-validation against administrative records and sample surveys to ensure statistical reliability and minimize error margins."}].map((e,t)=>re.jsxs("div",{className:"flex gap-6 p-8 bg-[#F9FAFB] rounded-2xl group hover:bg-[#FFF4EB] transition-colors duration-300",children:[re.jsx("div",{className:"flex-shrink-0",children:re.jsx("span",{className:"text-3xl font-black text-gray-300 group-hover:text-[#F58220] transition-colors duration-300",children:e.step})}),re.jsxs("div",{className:"pt-1",children:[re.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:e.title}),re.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.desc})]})]},t))})]}),re.jsxs("div",{children:[re.jsx("div",{className:"flex items-center gap-3 mb-6",children:re.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Technology Stack"})}),re.jsx("div",{className:"flex flex-wrap gap-2",children:["Google Earth Engine","Python","QGIS","PostgreSQL","PostGIS","TensorFlow","Leaflet.js","R Statistical","Azure Cloud"].map(e=>re.jsx("span",{className:"px-3 py-1.5 bg-gray-50 text-gray-600 text-[11px] font-bold rounded-lg border border-gray-200 hover:border-gray-300 hover:bg-[#FFF4EB] transition-colors cursor-default",children:e},e))})]}),re.jsxs("div",{children:[re.jsx("div",{className:"flex items-center gap-3 mb-6",children:re.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Validation & Accuracy"})}),re.jsxs("div",{className:"rounded-2xl p-8 bg-[#F9FAFB]",children:[re.jsx("p",{className:"text-sm font-bold mb-4 opacity-80 uppercase tracking-wide text-[10px]",children:"Model Validation Metrics"}),re.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-12",children:[re.jsx("ul",{className:"space-y-3 flex-1",children:["Leave-one-out cross-validation at district level","Comparison with Sample Registration System estimates"].map((e,t)=>re.jsxs("li",{className:"flex items-start gap-3 text-sm font-medium",children:[re.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-600 mt-1.5 flex-shrink-0"}),e]},t))}),re.jsxs("ul",{className:"space-y-3 flex-1",children:[["Ground-truthing in selected blocks"].map((e,t)=>re.jsxs("li",{className:"flex items-start gap-3 text-sm font-medium",children:[re.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-600 mt-1.5 flex-shrink-0"}),e]},t)),re.jsxs("li",{className:"flex items-start gap-3 text-sm font-medium",children:[re.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-600 mt-1.5 flex-shrink-0"}),"Target MAPE: < 5%"]})]})]})]})]})]})]})}),wK=()=>re.jsx(Ux,{title:"Advanced Analytics",children:re.jsx("div",{className:"w-full",children:re.jsxs("div",{className:"space-y-8",children:[re.jsx("div",{className:"mb-8",children:re.jsx("p",{className:"text-gray-500 text-sm",children:"Research publications and demographic insights from DIU studies"})}),re.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[{title:"Population Dynamics in Eastern Odisha",date:"Nov 2024",desc:"Analysis of demographic shifts in coastal districts with focus on migration patterns and urbanization trends.",tags:["Migration","Urbanization"]},{title:"Building Footprint Expansion Analysis",date:"Oct 2024",desc:"Satellite-based assessment of construction growth across 30 districts using Google Earth Engine algorithms.",tags:["Remote Sensing","GEE"]},{title:"Infrastructure-Population Correlation Study",date:"Sep 2024",desc:"Statistical analysis of road network expansion and its impact on population distribution and growth rates.",tags:["Infrastructure","Statistics"]},{title:"Urban-Rural Classification Framework",date:"Aug 2024",desc:"Development of multi-criteria classification system for settlement categorization using ML algorithms.",tags:["Machine Learning","Classification"]},{title:"Nighttime Lights as Development Proxy",date:"Jul 2024",desc:"Using VIIRS nighttime light data to estimate economic activity and electrification progress.",tags:["VIIRS","Economy"]},{title:"Gender-Disaggregated Demographic Analysis",date:"Jun 2024",desc:"Deep dive into sex ratio variations across districts with policy recommendations.",tags:["Gender","Policy"]}].map((e,t)=>re.jsxs("div",{className:"bg-[#F9FAFB] rounded-2xl border border-gray-100 shadow-sm overflow-hidden hover:shadow-md transition-all group flex flex-col h-full",children:[re.jsxs("div",{className:"bg-[#FFF4EB] p-6 relative overflow-hidden",children:[re.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/40 rounded-full blur-2xl -mr-10 -mt-10"}),re.jsx("h3",{className:"text-lg font-bold text-[#D66B12] mb-2 leading-snug relative z-10",children:e.title}),re.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-xs font-medium relative z-10",children:[re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[re.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),re.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),re.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),re.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),e.date]})]}),re.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[re.jsx("p",{className:"text-sm text-gray-600 leading-relaxed mb-6 flex-grow",children:e.desc}),re.jsx("div",{className:"flex flex-wrap gap-2 mt-auto",children:e.tags.map(i=>re.jsx("span",{className:"px-3 py-1 bg-white text-gray-600 text-[10px] font-bold uppercase tracking-wider rounded-lg border border-gray-100 shadow-sm",children:i},i))})]})]},t))})]})})}),SK=()=>re.jsx(Ux,{title:"Data Catalog",children:re.jsx("div",{className:"w-full",children:re.jsxs("div",{className:"space-y-12",children:[re.jsxs("div",{className:"space-y-6",children:[re.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:re.jsxs("div",{children:[re.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Available Datasets"}),re.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Download raw datasets for your own analysis. All datasets are provided under Open Government Data License."})]})}),re.jsx("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8 overflow-hidden",children:re.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100",children:re.jsxs("table",{className:"w-full text-sm text-left",children:[re.jsx("thead",{className:"bg-gray-50 text-gray-500 uppercase text-[10px] font-bold tracking-wider",children:re.jsxs("tr",{children:[re.jsx("th",{scope:"col",className:"px-6 py-4",children:"Dataset"}),re.jsx("th",{scope:"col",className:"px-6 py-4",children:"Format"}),re.jsx("th",{scope:"col",className:"px-6 py-4",children:"Size"}),re.jsx("th",{scope:"col",className:"px-6 py-4",children:"Updated"}),re.jsx("th",{scope:"col",className:"px-6 py-4 text-right",children:"Action"})]})}),re.jsx("tbody",{className:"divide-y divide-gray-50",children:[{title:"District Population 2011-2036",desc:"Annual population estimates and projections for all 30 districts",format:"CSV",size:"2.4 MB",updated:"Dec 2024"},{title:"Building Footprints",desc:"AI-derived building polygons with area and type classification",format:"GeoJSON",size:"156 MB",updated:"Nov 2024"},{title:"Road Network",desc:"Complete road network with classification (NH/SH/District/Rural)",format:"Shapefile",size:"45 MB",updated:"Oct 2024"},{title:"Nighttime Lights Index",desc:"Monthly VIIRS nighttime light composites 2012-2024",format:"GeoTIFF",size:"89 MB",updated:"Nov 2024"},{title:"Urban-Rural Classification",desc:"Settlement classification with supporting indicators",format:"CSV",size:"0.5 MB",updated:"Dec 2024"},{title:"Administrative Boundaries",desc:"District and block level administrative boundaries",format:"Shapefile",size:"12 MB",updated:"2024"}].map((e,t)=>re.jsxs("tr",{className:"bg-gray-50 hover:bg-gray-50 transition-colors group",children:[re.jsxs("td",{className:"px-6 py-5",children:[re.jsx("div",{className:"font-bold text-gray-900 text-sm mb-0.5",children:e.title}),re.jsx("div",{className:"text-xs text-gray-500 font-medium",children:e.desc})]}),re.jsx("td",{className:"px-6 py-5",children:re.jsx("span",{className:"bg-blue-50 text-[#F58220] text-[10px] font-black px-2.5 py-1 rounded-md uppercase tracking-wide border border-blue-100",children:e.format})}),re.jsx("td",{className:"px-6 py-5 font-bold text-gray-600 text-xs",children:e.size}),re.jsx("td",{className:"px-6 py-5 font-bold text-gray-500 text-xs",children:e.updated}),re.jsx("td",{className:"px-6 py-5 text-right",children:re.jsxs("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-[#F58220] hover:bg-[#D66B12]  text-white rounded-lg text-xs font-bold transition-all shadow-sm active:scale-95 group-hover:shadow-md",children:[re.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[re.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),re.jsx("polyline",{points:"7 10 12 15 17 10"}),re.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),"Download"]})})]},t))})]})})})]}),re.jsxs("div",{className:"space-y-6",children:[re.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:re.jsxs("div",{children:[re.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"API Access"}),re.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Programmatic access to DIU data is available through our REST API."})]})}),re.jsxs("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8",children:[re.jsx("p",{className:"text-sm text-gray-500 font-medium mb-6 leading-relaxed",children:"Contact the DIU team for API credentials and documentation."}),re.jsxs("div",{className:"bg-orange-50/50 rounded-xl border border-orange-100 p-4 font-mono text-xs text-orange-800 overflow-x-auto flex items-center gap-4",children:[re.jsx("span",{className:"font-black text-orange-600 bg-orange-100 px-2 py-0.5 rounded text-[10px]",children:"GET"}),re.jsx("span",{children:"/api/v1/districts/{district_id}/population?year=2024"})]})]})]})]})})}),TK=()=>{const[e,t]=X.useState("Demographics"),[i,a]=X.useState("Odisha"),[d,g]=X.useState(null),[y,c]=X.useState([]);return re.jsxs(re.Fragment,{children:[re.jsx(R6,{currentView:e,onViewChange:t,onDistrictChange:a,onDataChange:g,onDataLoad:c}),re.jsx(_K,{selectedDistrict:i,data:d,allDistrictsData:y})]})},EK=()=>re.jsx(h4,{basename:"/unfpa-dashboard",children:re.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[re.jsx(K4,{}),re.jsxs("div",{className:"flex-1",children:[re.jsxs(UR,{children:[re.jsx(Ng,{path:"/",element:re.jsx(TK,{})}),re.jsx(Ng,{path:"/about",element:re.jsx(bK,{})}),re.jsx(Ng,{path:"/methodology",element:re.jsx(xK,{})}),re.jsx(Ng,{path:"/analytics",element:re.jsx(wK,{})}),re.jsx(Ng,{path:"/catalog",element:re.jsx(SK,{})})]}),re.jsx(Q4,{})]})]})});G5.createRoot(document.getElementById("root")).render(re.jsx(X.StrictMode,{children:re.jsx(EK,{})}));export{aQ as L,oQ as a,Vl as g};
