function rR(e,t){for(var i=0;i<t.length;i++){const l=t[i];if(typeof l!="string"&&!Array.isArray(l)){for(const m in l)if(m!=="default"&&!(m in e)){const v=Object.getOwnPropertyDescriptor(l,m);v&&Object.defineProperty(e,m,v.get?v:{enumerable:!0,get:()=>l[m]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))l(m);new MutationObserver(m=>{for(const v of m)if(v.type==="childList")for(const _ of v.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&l(_)}).observe(document,{childList:!0,subtree:!0});function i(m){const v={};return m.integrity&&(v.integrity=m.integrity),m.referrerPolicy&&(v.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?v.credentials="include":m.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function l(m){if(m.ep)return;m.ep=!0;const v=i(m);fetch(m.href,v)}})();function ef(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ob={exports:{}},ev={};var yT;function nR(){if(yT)return ev;yT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(l,m,v){var _=null;if(v!==void 0&&(_=""+v),m.key!==void 0&&(_=""+m.key),"key"in m){v={};for(var c in m)c!=="key"&&(v[c]=m[c])}else v=m;return m=v.ref,{$$typeof:e,type:l,key:_,ref:m!==void 0?m:null,props:v}}return ev.Fragment=t,ev.jsx=i,ev.jsxs=i,ev}var vT;function iR(){return vT||(vT=1,Ob.exports=nR()),Ob.exports}var le=iR(),Ib={exports:{}},wr={};var _T;function aR(){if(_T)return wr;_T=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),_=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),F=Symbol.iterator;function $(De){return De===null||typeof De!="object"?null:(De=F&&De[F]||De["@@iterator"],typeof De=="function"?De:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,q={};function he(De,lt,Mt){this.props=De,this.context=lt,this.refs=q,this.updater=Mt||Y}he.prototype.isReactComponent={},he.prototype.setState=function(De,lt){if(typeof De!="object"&&typeof De!="function"&&De!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,De,lt,"setState")},he.prototype.forceUpdate=function(De){this.updater.enqueueForceUpdate(this,De,"forceUpdate")};function ye(){}ye.prototype=he.prototype;function ge(De,lt,Mt){this.props=De,this.context=lt,this.refs=q,this.updater=Mt||Y}var Te=ge.prototype=new ye;Te.constructor=ge,K(Te,he.prototype),Te.isPureReactComponent=!0;var ke=Array.isArray;function Pe(){}var Re={H:null,A:null,T:null,S:null},ot=Object.prototype.hasOwnProperty;function bt(De,lt,Mt){var zt=Mt.ref;return{$$typeof:e,type:De,key:lt,ref:zt!==void 0?zt:null,props:Mt}}function kt(De,lt){return bt(De.type,lt,De.props)}function We(De){return typeof De=="object"&&De!==null&&De.$$typeof===e}function Ve(De){var lt={"=":"=0",":":"=2"};return"$"+De.replace(/[=:]/g,function(Mt){return lt[Mt]})}var Ot=/\/+/g;function Ue(De,lt){return typeof De=="object"&&De!==null&&De.key!=null?Ve(""+De.key):lt.toString(36)}function Je(De){switch(De.status){case"fulfilled":return De.value;case"rejected":throw De.reason;default:switch(typeof De.status=="string"?De.then(Pe,Pe):(De.status="pending",De.then(function(lt){De.status==="pending"&&(De.status="fulfilled",De.value=lt)},function(lt){De.status==="pending"&&(De.status="rejected",De.reason=lt)})),De.status){case"fulfilled":return De.value;case"rejected":throw De.reason}}throw De}function Le(De,lt,Mt,zt,qt){var Yt=typeof De;(Yt==="undefined"||Yt==="boolean")&&(De=null);var Gt=!1;if(De===null)Gt=!0;else switch(Yt){case"bigint":case"string":case"number":Gt=!0;break;case"object":switch(De.$$typeof){case e:case t:Gt=!0;break;case D:return Gt=De._init,Le(Gt(De._payload),lt,Mt,zt,qt)}}if(Gt)return qt=qt(De),Gt=zt===""?"."+Ue(De,0):zt,ke(qt)?(Mt="",Gt!=null&&(Mt=Gt.replace(Ot,"$&/")+"/"),Le(qt,lt,Mt,"",function(or){return or})):qt!=null&&(We(qt)&&(qt=kt(qt,Mt+(qt.key==null||De&&De.key===qt.key?"":(""+qt.key).replace(Ot,"$&/")+"/")+Gt)),lt.push(qt)),1;Gt=0;var Ar=zt===""?".":zt+":";if(ke(De))for(var mt=0;mt<De.length;mt++)zt=De[mt],Yt=Ar+Ue(zt,mt),Gt+=Le(zt,lt,Mt,Yt,qt);else if(mt=$(De),typeof mt=="function")for(De=mt.call(De),mt=0;!(zt=De.next()).done;)zt=zt.value,Yt=Ar+Ue(zt,mt++),Gt+=Le(zt,lt,Mt,Yt,qt);else if(Yt==="object"){if(typeof De.then=="function")return Le(Je(De),lt,Mt,zt,qt);throw lt=String(De),Error("Objects are not valid as a React child (found: "+(lt==="[object Object]"?"object with keys {"+Object.keys(De).join(", ")+"}":lt)+"). If you meant to render a collection of children, use an array instead.")}return Gt}function Ge(De,lt,Mt){if(De==null)return De;var zt=[],qt=0;return Le(De,zt,"","",function(Yt){return lt.call(Mt,Yt,qt++)}),zt}function st(De){if(De._status===-1){var lt=De._result;lt=lt(),lt.then(function(Mt){(De._status===0||De._status===-1)&&(De._status=1,De._result=Mt)},function(Mt){(De._status===0||De._status===-1)&&(De._status=2,De._result=Mt)}),De._status===-1&&(De._status=0,De._result=lt)}if(De._status===1)return De._result.default;throw De._result}var pt=typeof reportError=="function"?reportError:function(De){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var lt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof De=="object"&&De!==null&&typeof De.message=="string"?String(De.message):String(De),error:De});if(!window.dispatchEvent(lt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",De);return}console.error(De)},Rt={map:Ge,forEach:function(De,lt,Mt){Ge(De,function(){lt.apply(this,arguments)},Mt)},count:function(De){var lt=0;return Ge(De,function(){lt++}),lt},toArray:function(De){return Ge(De,function(lt){return lt})||[]},only:function(De){if(!We(De))throw Error("React.Children.only expected to receive a single React element child.");return De}};return wr.Activity=z,wr.Children=Rt,wr.Component=he,wr.Fragment=i,wr.Profiler=m,wr.PureComponent=ge,wr.StrictMode=l,wr.Suspense=M,wr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Re,wr.__COMPILER_RUNTIME={__proto__:null,c:function(De){return Re.H.useMemoCache(De)}},wr.cache=function(De){return function(){return De.apply(null,arguments)}},wr.cacheSignal=function(){return null},wr.cloneElement=function(De,lt,Mt){if(De==null)throw Error("The argument must be a React element, but you passed "+De+".");var zt=K({},De.props),qt=De.key;if(lt!=null)for(Yt in lt.key!==void 0&&(qt=""+lt.key),lt)!ot.call(lt,Yt)||Yt==="key"||Yt==="__self"||Yt==="__source"||Yt==="ref"&&lt.ref===void 0||(zt[Yt]=lt[Yt]);var Yt=arguments.length-2;if(Yt===1)zt.children=Mt;else if(1<Yt){for(var Gt=Array(Yt),Ar=0;Ar<Yt;Ar++)Gt[Ar]=arguments[Ar+2];zt.children=Gt}return bt(De.type,qt,zt)},wr.createContext=function(De){return De={$$typeof:_,_currentValue:De,_currentValue2:De,_threadCount:0,Provider:null,Consumer:null},De.Provider=De,De.Consumer={$$typeof:v,_context:De},De},wr.createElement=function(De,lt,Mt){var zt,qt={},Yt=null;if(lt!=null)for(zt in lt.key!==void 0&&(Yt=""+lt.key),lt)ot.call(lt,zt)&&zt!=="key"&&zt!=="__self"&&zt!=="__source"&&(qt[zt]=lt[zt]);var Gt=arguments.length-2;if(Gt===1)qt.children=Mt;else if(1<Gt){for(var Ar=Array(Gt),mt=0;mt<Gt;mt++)Ar[mt]=arguments[mt+2];qt.children=Ar}if(De&&De.defaultProps)for(zt in Gt=De.defaultProps,Gt)qt[zt]===void 0&&(qt[zt]=Gt[zt]);return bt(De,Yt,qt)},wr.createRef=function(){return{current:null}},wr.forwardRef=function(De){return{$$typeof:c,render:De}},wr.isValidElement=We,wr.lazy=function(De){return{$$typeof:D,_payload:{_status:-1,_result:De},_init:st}},wr.memo=function(De,lt){return{$$typeof:P,type:De,compare:lt===void 0?null:lt}},wr.startTransition=function(De){var lt=Re.T,Mt={};Re.T=Mt;try{var zt=De(),qt=Re.S;qt!==null&&qt(Mt,zt),typeof zt=="object"&&zt!==null&&typeof zt.then=="function"&&zt.then(Pe,pt)}catch(Yt){pt(Yt)}finally{lt!==null&&Mt.types!==null&&(lt.types=Mt.types),Re.T=lt}},wr.unstable_useCacheRefresh=function(){return Re.H.useCacheRefresh()},wr.use=function(De){return Re.H.use(De)},wr.useActionState=function(De,lt,Mt){return Re.H.useActionState(De,lt,Mt)},wr.useCallback=function(De,lt){return Re.H.useCallback(De,lt)},wr.useContext=function(De){return Re.H.useContext(De)},wr.useDebugValue=function(){},wr.useDeferredValue=function(De,lt){return Re.H.useDeferredValue(De,lt)},wr.useEffect=function(De,lt){return Re.H.useEffect(De,lt)},wr.useEffectEvent=function(De){return Re.H.useEffectEvent(De)},wr.useId=function(){return Re.H.useId()},wr.useImperativeHandle=function(De,lt,Mt){return Re.H.useImperativeHandle(De,lt,Mt)},wr.useInsertionEffect=function(De,lt){return Re.H.useInsertionEffect(De,lt)},wr.useLayoutEffect=function(De,lt){return Re.H.useLayoutEffect(De,lt)},wr.useMemo=function(De,lt){return Re.H.useMemo(De,lt)},wr.useOptimistic=function(De,lt){return Re.H.useOptimistic(De,lt)},wr.useReducer=function(De,lt,Mt){return Re.H.useReducer(De,lt,Mt)},wr.useRef=function(De){return Re.H.useRef(De)},wr.useState=function(De){return Re.H.useState(De)},wr.useSyncExternalStore=function(De,lt,Mt){return Re.H.useSyncExternalStore(De,lt,Mt)},wr.useTransition=function(){return Re.H.useTransition()},wr.version="19.2.4",wr}var xT;function Fg(){return xT||(xT=1,Ib.exports=aR()),Ib.exports}var H=Fg();const b0=ef(H),oR=rR({__proto__:null,default:b0},[H]);var zb={exports:{}},tv={},kb={exports:{}},Rb={};var bT;function sR(){return bT||(bT=1,(function(e){function t(Le,Ge){var st=Le.length;Le.push(Ge);e:for(;0<st;){var pt=st-1>>>1,Rt=Le[pt];if(0<m(Rt,Ge))Le[pt]=Ge,Le[st]=Rt,st=pt;else break e}}function i(Le){return Le.length===0?null:Le[0]}function l(Le){if(Le.length===0)return null;var Ge=Le[0],st=Le.pop();if(st!==Ge){Le[0]=st;e:for(var pt=0,Rt=Le.length,De=Rt>>>1;pt<De;){var lt=2*(pt+1)-1,Mt=Le[lt],zt=lt+1,qt=Le[zt];if(0>m(Mt,st))zt<Rt&&0>m(qt,Mt)?(Le[pt]=qt,Le[zt]=st,pt=zt):(Le[pt]=Mt,Le[lt]=st,pt=lt);else if(zt<Rt&&0>m(qt,st))Le[pt]=qt,Le[zt]=st,pt=zt;else break e}}return Ge}function m(Le,Ge){var st=Le.sortIndex-Ge.sortIndex;return st!==0?st:Le.id-Ge.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var _=Date,c=_.now();e.unstable_now=function(){return _.now()-c}}var M=[],P=[],D=1,z=null,F=3,$=!1,Y=!1,K=!1,q=!1,he=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;function Te(Le){for(var Ge=i(P);Ge!==null;){if(Ge.callback===null)l(P);else if(Ge.startTime<=Le)l(P),Ge.sortIndex=Ge.expirationTime,t(M,Ge);else break;Ge=i(P)}}function ke(Le){if(K=!1,Te(Le),!Y)if(i(M)!==null)Y=!0,Pe||(Pe=!0,Ve());else{var Ge=i(P);Ge!==null&&Je(ke,Ge.startTime-Le)}}var Pe=!1,Re=-1,ot=5,bt=-1;function kt(){return q?!0:!(e.unstable_now()-bt<ot)}function We(){if(q=!1,Pe){var Le=e.unstable_now();bt=Le;var Ge=!0;try{e:{Y=!1,K&&(K=!1,ye(Re),Re=-1),$=!0;var st=F;try{t:{for(Te(Le),z=i(M);z!==null&&!(z.expirationTime>Le&&kt());){var pt=z.callback;if(typeof pt=="function"){z.callback=null,F=z.priorityLevel;var Rt=pt(z.expirationTime<=Le);if(Le=e.unstable_now(),typeof Rt=="function"){z.callback=Rt,Te(Le),Ge=!0;break t}z===i(M)&&l(M),Te(Le)}else l(M);z=i(M)}if(z!==null)Ge=!0;else{var De=i(P);De!==null&&Je(ke,De.startTime-Le),Ge=!1}}break e}finally{z=null,F=st,$=!1}Ge=void 0}}finally{Ge?Ve():Pe=!1}}}var Ve;if(typeof ge=="function")Ve=function(){ge(We)};else if(typeof MessageChannel<"u"){var Ot=new MessageChannel,Ue=Ot.port2;Ot.port1.onmessage=We,Ve=function(){Ue.postMessage(null)}}else Ve=function(){he(We,0)};function Je(Le,Ge){Re=he(function(){Le(e.unstable_now())},Ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ot=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return F},e.unstable_next=function(Le){switch(F){case 1:case 2:case 3:var Ge=3;break;default:Ge=F}var st=F;F=Ge;try{return Le()}finally{F=st}},e.unstable_requestPaint=function(){q=!0},e.unstable_runWithPriority=function(Le,Ge){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var st=F;F=Le;try{return Ge()}finally{F=st}},e.unstable_scheduleCallback=function(Le,Ge,st){var pt=e.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?pt+st:pt):st=pt,Le){case 1:var Rt=-1;break;case 2:Rt=250;break;case 5:Rt=1073741823;break;case 4:Rt=1e4;break;default:Rt=5e3}return Rt=st+Rt,Le={id:D++,callback:Ge,priorityLevel:Le,startTime:st,expirationTime:Rt,sortIndex:-1},st>pt?(Le.sortIndex=st,t(P,Le),i(M)===null&&Le===i(P)&&(K?(ye(Re),Re=-1):K=!0,Je(ke,st-pt))):(Le.sortIndex=Rt,t(M,Le),Y||$||(Y=!0,Pe||(Pe=!0,Ve()))),Le},e.unstable_shouldYield=kt,e.unstable_wrapCallback=function(Le){var Ge=F;return function(){var st=F;F=Ge;try{return Le.apply(this,arguments)}finally{F=st}}}})(Rb)),Rb}var wT;function lR(){return wT||(wT=1,kb.exports=sR()),kb.exports}var Lb={exports:{}},ho={};var ST;function uR(){if(ST)return ho;ST=1;var e=Fg();function t(M){var P="https://react.dev/errors/"+M;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)P+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+M+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},m=Symbol.for("react.portal");function v(M,P,D){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:z==null?null:""+z,children:M,containerInfo:P,implementation:D}}var _=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(M,P){if(M==="font")return"";if(typeof P=="string")return P==="use-credentials"?P:""}return ho.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,ho.createPortal=function(M,P){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)throw Error(t(299));return v(M,P,null,D)},ho.flushSync=function(M){var P=_.T,D=l.p;try{if(_.T=null,l.p=2,M)return M()}finally{_.T=P,l.p=D,l.d.f()}},ho.preconnect=function(M,P){typeof M=="string"&&(P?(P=P.crossOrigin,P=typeof P=="string"?P==="use-credentials"?P:"":void 0):P=null,l.d.C(M,P))},ho.prefetchDNS=function(M){typeof M=="string"&&l.d.D(M)},ho.preinit=function(M,P){if(typeof M=="string"&&P&&typeof P.as=="string"){var D=P.as,z=c(D,P.crossOrigin),F=typeof P.integrity=="string"?P.integrity:void 0,$=typeof P.fetchPriority=="string"?P.fetchPriority:void 0;D==="style"?l.d.S(M,typeof P.precedence=="string"?P.precedence:void 0,{crossOrigin:z,integrity:F,fetchPriority:$}):D==="script"&&l.d.X(M,{crossOrigin:z,integrity:F,fetchPriority:$,nonce:typeof P.nonce=="string"?P.nonce:void 0})}},ho.preinitModule=function(M,P){if(typeof M=="string")if(typeof P=="object"&&P!==null){if(P.as==null||P.as==="script"){var D=c(P.as,P.crossOrigin);l.d.M(M,{crossOrigin:D,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0})}}else P==null&&l.d.M(M)},ho.preload=function(M,P){if(typeof M=="string"&&typeof P=="object"&&P!==null&&typeof P.as=="string"){var D=P.as,z=c(D,P.crossOrigin);l.d.L(M,D,{crossOrigin:z,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0,type:typeof P.type=="string"?P.type:void 0,fetchPriority:typeof P.fetchPriority=="string"?P.fetchPriority:void 0,referrerPolicy:typeof P.referrerPolicy=="string"?P.referrerPolicy:void 0,imageSrcSet:typeof P.imageSrcSet=="string"?P.imageSrcSet:void 0,imageSizes:typeof P.imageSizes=="string"?P.imageSizes:void 0,media:typeof P.media=="string"?P.media:void 0})}},ho.preloadModule=function(M,P){if(typeof M=="string")if(P){var D=c(P.as,P.crossOrigin);l.d.m(M,{as:typeof P.as=="string"&&P.as!=="script"?P.as:void 0,crossOrigin:D,integrity:typeof P.integrity=="string"?P.integrity:void 0})}else l.d.m(M)},ho.requestFormReset=function(M){l.d.r(M)},ho.unstable_batchedUpdates=function(M,P){return M(P)},ho.useFormState=function(M,P,D){return _.H.useFormState(M,P,D)},ho.useFormStatus=function(){return _.H.useHostTransitionStatus()},ho.version="19.2.4",ho}var TT;function cP(){if(TT)return Lb.exports;TT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Lb.exports=uR(),Lb.exports}var ET;function cR(){if(ET)return tv;ET=1;var e=lR(),t=Fg(),i=cP();function l(s){var h="https://react.dev/errors/"+s;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function v(s){var h=s,g=s;if(s.alternate)for(;h.return;)h=h.return;else{s=h;do h=s,(h.flags&4098)!==0&&(g=h.return),s=h.return;while(s)}return h.tag===3?g:null}function _(s){if(s.tag===13){var h=s.memoizedState;if(h===null&&(s=s.alternate,s!==null&&(h=s.memoizedState)),h!==null)return h.dehydrated}return null}function c(s){if(s.tag===31){var h=s.memoizedState;if(h===null&&(s=s.alternate,s!==null&&(h=s.memoizedState)),h!==null)return h.dehydrated}return null}function M(s){if(v(s)!==s)throw Error(l(188))}function P(s){var h=s.alternate;if(!h){if(h=v(s),h===null)throw Error(l(188));return h!==s?null:s}for(var g=s,S=h;;){var I=g.return;if(I===null)break;var j=I.alternate;if(j===null){if(S=I.return,S!==null){g=S;continue}break}if(I.child===j.child){for(j=I.child;j;){if(j===g)return M(I),s;if(j===S)return M(I),h;j=j.sibling}throw Error(l(188))}if(g.return!==S.return)g=I,S=j;else{for(var Q=!1,ce=I.child;ce;){if(ce===g){Q=!0,g=I,S=j;break}if(ce===S){Q=!0,S=I,g=j;break}ce=ce.sibling}if(!Q){for(ce=j.child;ce;){if(ce===g){Q=!0,g=j,S=I;break}if(ce===S){Q=!0,S=j,g=I;break}ce=ce.sibling}if(!Q)throw Error(l(189))}}if(g.alternate!==S)throw Error(l(190))}if(g.tag!==3)throw Error(l(188));return g.stateNode.current===g?s:h}function D(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s;for(s=s.child;s!==null;){if(h=D(s),h!==null)return h;s=s.sibling}return null}var z=Object.assign,F=Symbol.for("react.element"),$=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),ye=Symbol.for("react.consumer"),ge=Symbol.for("react.context"),Te=Symbol.for("react.forward_ref"),ke=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Re=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),bt=Symbol.for("react.activity"),kt=Symbol.for("react.memo_cache_sentinel"),We=Symbol.iterator;function Ve(s){return s===null||typeof s!="object"?null:(s=We&&s[We]||s["@@iterator"],typeof s=="function"?s:null)}var Ot=Symbol.for("react.client.reference");function Ue(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ot?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case K:return"Fragment";case he:return"Profiler";case q:return"StrictMode";case ke:return"Suspense";case Pe:return"SuspenseList";case bt:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case Y:return"Portal";case ge:return s.displayName||"Context";case ye:return(s._context.displayName||"Context")+".Consumer";case Te:var h=s.render;return s=s.displayName,s||(s=h.displayName||h.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Re:return h=s.displayName||null,h!==null?h:Ue(s.type)||"Memo";case ot:h=s._payload,s=s._init;try{return Ue(s(h))}catch{}}return null}var Je=Array.isArray,Le=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},pt=[],Rt=-1;function De(s){return{current:s}}function lt(s){0>Rt||(s.current=pt[Rt],pt[Rt]=null,Rt--)}function Mt(s,h){Rt++,pt[Rt]=s.current,s.current=h}var zt=De(null),qt=De(null),Yt=De(null),Gt=De(null);function Ar(s,h){switch(Mt(Yt,h),Mt(qt,s),Mt(zt,null),h.nodeType){case 9:case 11:s=(s=h.documentElement)&&(s=s.namespaceURI)?yc(s):0;break;default:if(s=h.tagName,h=h.namespaceURI)h=yc(h),s=Ly(h,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}lt(zt),Mt(zt,s)}function mt(){lt(zt),lt(qt),lt(Yt)}function or(s){s.memoizedState!==null&&Mt(Gt,s);var h=zt.current,g=Ly(h,s.type);h!==g&&(Mt(qt,s),Mt(zt,g))}function mr(s){qt.current===s&&(lt(zt),lt(qt)),Gt.current===s&&(lt(Gt),xp._currentValue=st)}var Et,An;function ur(s){if(Et===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);Et=h&&h[1]||"",An=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+s+An}var Wr=!1;function sn(s,h){if(!s||Wr)return"";Wr=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(ut){var nt=ut}Reflect.construct(s,[],St)}else{try{St.call()}catch(ut){nt=ut}s.call(St.prototype)}}else{try{throw Error()}catch(ut){nt=ut}(St=s())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(ut){if(ut&&nt&&typeof ut.stack=="string")return[ut.stack,nt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=S.DetermineComponentFrameRoot(),Q=j[0],ce=j[1];if(Q&&ce){var ze=Q.split(`
`),rt=ce.split(`
`);for(I=S=0;S<ze.length&&!ze[S].includes("DetermineComponentFrameRoot");)S++;for(;I<rt.length&&!rt[I].includes("DetermineComponentFrameRoot");)I++;if(S===ze.length||I===rt.length)for(S=ze.length-1,I=rt.length-1;1<=S&&0<=I&&ze[S]!==rt[I];)I--;for(;1<=S&&0<=I;S--,I--)if(ze[S]!==rt[I]){if(S!==1||I!==1)do if(S--,I--,0>I||ze[S]!==rt[I]){var gt=`
`+ze[S].replace(" at new "," at ");return s.displayName&&gt.includes("<anonymous>")&&(gt=gt.replace("<anonymous>",s.displayName)),gt}while(1<=S&&0<=I);break}}}finally{Wr=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?ur(g):""}function Rr(s,h){switch(s.tag){case 26:case 27:case 5:return ur(s.type);case 16:return ur("Lazy");case 13:return s.child!==h&&h!==null?ur("Suspense Fallback"):ur("Suspense");case 19:return ur("SuspenseList");case 0:case 15:return sn(s.type,!1);case 11:return sn(s.type.render,!1);case 1:return sn(s.type,!0);case 31:return ur("Activity");default:return""}}function ya(s){try{var h="",g=null;do h+=Rr(s,g),g=s,s=s.return;while(s);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var Ys=Object.prototype.hasOwnProperty,ys=e.unstable_scheduleCallback,No=e.unstable_cancelCallback,go=e.unstable_shouldYield,ju=e.unstable_requestPaint,ri=e.unstable_now,va=e.unstable_getCurrentPriorityLevel,Nu=e.unstable_ImmediatePriority,vs=e.unstable_UserBlockingPriority,_s=e.unstable_NormalPriority,Bc=e.unstable_LowPriority,Ks=e.unstable_IdlePriority,Be=e.log,ee=e.unstable_setDisableYieldValue,ne=null,ae=null;function be(s){if(typeof Be=="function"&&ee(s),ae&&typeof ae.setStrictMode=="function")try{ae.setStrictMode(ne,s)}catch{}}var Ce=Math.clz32?Math.clz32:Fe,He=Math.log,$e=Math.LN2;function Fe(s){return s>>>=0,s===0?32:31-(He(s)/$e|0)|0}var Ze=256,vt=262144,at=4194304;function Me(s){var h=s&42;if(h!==0)return h;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Bt(s,h,g){var S=s.pendingLanes;if(S===0)return 0;var I=0,j=s.suspendedLanes,Q=s.pingedLanes;s=s.warmLanes;var ce=S&134217727;return ce!==0?(S=ce&~j,S!==0?I=Me(S):(Q&=ce,Q!==0?I=Me(Q):g||(g=ce&~s,g!==0&&(I=Me(g))))):(ce=S&~j,ce!==0?I=Me(ce):Q!==0?I=Me(Q):g||(g=S&~s,g!==0&&(I=Me(g)))),I===0?0:h!==0&&h!==I&&(h&j)===0&&(j=I&-I,g=h&-h,j>=g||j===32&&(g&4194048)!==0)?h:I}function nr(s,h){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&h)===0}function Wt(s,h){switch(s){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var s=at;return at<<=1,(at&62914560)===0&&(at=4194304),s}function er(s){for(var h=[],g=0;31>g;g++)h.push(s);return h}function ir(s,h){s.pendingLanes|=h,h!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function hn(s,h,g,S,I,j){var Q=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var ce=s.entanglements,ze=s.expirationTimes,rt=s.hiddenUpdates;for(g=Q&~g;0<g;){var gt=31-Ce(g),St=1<<gt;ce[gt]=0,ze[gt]=-1;var nt=rt[gt];if(nt!==null)for(rt[gt]=null,gt=0;gt<nt.length;gt++){var ut=nt[gt];ut!==null&&(ut.lane&=-536870913)}g&=~St}S!==0&&Mn(s,S,0),j!==0&&I===0&&s.tag!==0&&(s.suspendedLanes|=j&~(Q&~h))}function Mn(s,h,g){s.pendingLanes|=h,s.suspendedLanes&=~h;var S=31-Ce(h);s.entangledLanes|=h,s.entanglements[S]=s.entanglements[S]|1073741824|g&261930}function xn(s,h){var g=s.entangledLanes|=h;for(s=s.entanglements;g;){var S=31-Ce(g),I=1<<S;I&h|s[S]&h&&(s[S]|=h),g&=~I}}function wi(s,h){var g=h&-h;return g=(g&42)!==0?1:fn(g),(g&(s.suspendedLanes|h))!==0?0:g}function fn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function wt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Dr(){var s=Ge.p;return s!==0?s:(s=window.event,s===void 0?32:W_(s.type))}function an(s,h){var g=Ge.p;try{return Ge.p=s,h()}finally{Ge.p=g}}var Wi=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Wi,At="__reactProps$"+Wi,Kt="__reactContainer$"+Wi,cr="__reactEvents$"+Wi,_a="__reactListeners$"+Wi,hf="__reactHandles$"+Wi,Bo="__reactResources$"+Wi,hr="__reactMarker$"+Wi;function Bl(s){delete s[Fr],delete s[At],delete s[cr],delete s[_a],delete s[hf]}function Fo(s){var h=s[Fr];if(h)return h;for(var g=s.parentNode;g;){if(h=g[Kt]||g[Fr]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(s=tg(s);s!==null;){if(g=s[Fr])return g;s=tg(s)}return h}s=g,g=s.parentNode}return null}function xs(s){if(s=s[Fr]||s[Kt]){var h=s.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return s}return null}function Uo(s){var h=s.tag;if(h===5||h===26||h===27||h===6)return s.stateNode;throw Error(l(33))}function Vo(s){var h=s[Bo];return h||(h=s[Bo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Cn(s){s[hr]=!0}var Bu=new Set,Mi={};function Tr(s,h){bs(s,h),bs(s+"Capture",h)}function bs(s,h){for(Mi[s]=h,s=0;s<h.length;s++)Bu.add(h[s])}var Fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Uu={},Qs={};function yo(s){return Ys.call(Qs,s)?!0:Ys.call(Uu,s)?!1:Fu.test(s)?Qs[s]=!0:(Uu[s]=!0,!1)}function Fc(s,h,g){if(yo(h))if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){s.removeAttribute(h);return}}s.setAttribute(h,""+g)}}function qo(s,h,g){if(g===null)s.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttribute(h,""+g)}}function Za(s,h,g,S){if(S===null)s.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(h,g,""+S)}}function Or(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function xd(s){var h=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Yp(s,h,g){var S=Object.getOwnPropertyDescriptor(s.constructor.prototype,h);if(!s.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var I=S.get,j=S.set;return Object.defineProperty(s,h,{configurable:!0,get:function(){return I.call(this)},set:function(Q){g=""+Q,j.call(this,Q)}}),Object.defineProperty(s,h,{enumerable:S.enumerable}),{getValue:function(){return g},setValue:function(Q){g=""+Q},stopTracking:function(){s._valueTracker=null,delete s[h]}}}}function Fl(s){if(!s._valueTracker){var h=xd(s)?"checked":"value";s._valueTracker=Yp(s,h,""+s[h])}}function bd(s){if(!s)return!1;var h=s._valueTracker;if(!h)return!0;var g=h.getValue(),S="";return s&&(S=xd(s)?s.checked?"true":"false":s.value),s=S,s!==g?(h.setValue(s),!0):!1}function Uc(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Kp=/[\n"\\]/g;function Ri(s){return s.replace(Kp,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Vc(s,h,g,S,I,j,Q,ce){s.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?s.type=Q:s.removeAttribute("type"),h!=null?Q==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+Or(h)):s.value!==""+Or(h)&&(s.value=""+Or(h)):Q!=="submit"&&Q!=="reset"||s.removeAttribute("value"),h!=null?qc(s,Q,Or(h)):g!=null?qc(s,Q,Or(g)):S!=null&&s.removeAttribute("value"),I==null&&j!=null&&(s.defaultChecked=!!j),I!=null&&(s.checked=I&&typeof I!="function"&&typeof I!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?s.name=""+Or(ce):s.removeAttribute("name")}function ff(s,h,g,S,I,j,Q,ce){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.type=j),h!=null||g!=null){if(!(j!=="submit"&&j!=="reset"||h!=null)){Fl(s);return}g=g!=null?""+Or(g):"",h=h!=null?""+Or(h):g,ce||h===s.value||(s.value=h),s.defaultValue=h}S=S??I,S=typeof S!="function"&&typeof S!="symbol"&&!!S,s.checked=ce?s.checked:!!S,s.defaultChecked=!!S,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(s.name=Q),Fl(s)}function qc(s,h,g){h==="number"&&Uc(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function Js(s,h,g,S){if(s=s.options,h){h={};for(var I=0;I<g.length;I++)h["$"+g[I]]=!0;for(g=0;g<s.length;g++)I=h.hasOwnProperty("$"+s[g].value),s[g].selected!==I&&(s[g].selected=I),I&&S&&(s[g].defaultSelected=!0)}else{for(g=""+Or(g),h=null,I=0;I<s.length;I++){if(s[I].value===g){s[I].selected=!0,S&&(s[I].defaultSelected=!0);return}h!==null||s[I].disabled||(h=s[I])}h!==null&&(h.selected=!0)}}function Qp(s,h,g){if(h!=null&&(h=""+Or(h),h!==s.value&&(s.value=h),g==null)){s.defaultValue!==h&&(s.defaultValue=h);return}s.defaultValue=g!=null?""+Or(g):""}function Vu(s,h,g,S){if(h==null){if(S!=null){if(g!=null)throw Error(l(92));if(Je(S)){if(1<S.length)throw Error(l(93));S=S[0]}g=S}g==null&&(g=""),h=g}g=Or(h),s.defaultValue=g,S=s.textContent,S===g&&S!==""&&S!==null&&(s.value=S),Fl(s)}function ws(s,h){if(h){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=h;return}}s.textContent=h}var Jp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(s,h,g){var S=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="":S?s.setProperty(h,g):typeof g!="number"||g===0||Jp.has(h)?h==="float"?s.cssFloat=g:s[h]=(""+g).trim():s[h]=g+"px"}function df(s,h,g){if(h!=null&&typeof h!="object")throw Error(l(62));if(s=s.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?s.setProperty(S,""):S==="float"?s.cssFloat="":s[S]="");for(var I in h)S=h[I],h.hasOwnProperty(I)&&g[I]!==S&&Ul(s,I,S)}else for(var j in h)h.hasOwnProperty(j)&&Ul(s,j,h[j])}function Vl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(s){return qu.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function vo(){}var wd=null;function Gc(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ni=null,Vn=null;function dn(s){var h=xs(s);if(h&&(s=h.stateNode)){var g=s[At]||null;e:switch(s=h.stateNode,h.type){case"input":if(Vc(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Ri(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var S=g[h];if(S!==s&&S.form===s.form){var I=S[At]||null;if(!I)throw Error(l(90));Vc(S,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(h=0;h<g.length;h++)S=g[h],S.form===s.form&&bd(S)}break e;case"textarea":Qp(s,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&Js(s,!!g.multiple,h,!1)}}}var tr=!1;function Xr(s,h,g){if(tr)return s(h,g);tr=!0;try{var S=s(h);return S}finally{if(tr=!1,(ni!==null||Vn!==null)&&(ip(),ni&&(h=ni,s=Vn,Vn=ni=null,dn(h),s)))for(h=0;h<s.length;h++)dn(s[h])}}function Ha(s,h){var g=s.stateNode;if(g===null)return null;var S=g[At]||null;if(S===null)return null;g=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(s=s.type,S=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!S;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(l(231,h,typeof g));return g}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Li=!1;if(Pn)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){Li=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{Li=!1}var xa=null,Go=null,pn=null;function tl(){if(pn)return pn;var s,h=Go,g=h.length,S,I="value"in xa?xa.value:xa.textContent,j=I.length;for(s=0;s<g&&h[s]===I[s];s++);var Q=g-s;for(S=1;S<=Q&&h[g-S]===I[j-S];S++);return pn=I.slice(s,1<S?1-S:void 0)}function ba(s){var h=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&h===13&&(s=13)):s=h,s===10&&(s=13),32<=s||s===13?s:0}function ql(){return!0}function ji(){return!1}function Yn(s){function h(g,S,I,j,Q){this._reactName=g,this._targetInst=I,this.type=S,this.nativeEvent=j,this.target=Q,this.currentTarget=null;for(var ce in s)s.hasOwnProperty(ce)&&(g=s[ce],this[ce]=g?g(j):j[ce]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?ql:ji,this.isPropagationStopped=ji,this}return z(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),h}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$c=Yn(Ni),Gl=z({},Ni,{view:0,detail:0}),$l=Yn(Gl),Gr,rl,br,fr=z({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==br&&(br&&s.type==="mousemove"?(Gr=s.screenX-br.screenX,rl=s.screenY-br.screenY):rl=Gr=0,br=s),Gr)},movementY:function(s){return"movementY"in s?s.movementY:rl}}),Zl=Yn(fr),Er=z({},fr,{dataTransfer:0}),Zc=Yn(Er),Wa=z({},Gl,{relatedTarget:0}),nl=Yn(Wa),il=z({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),em=Yn(il),Hc=z({},Ni,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Sd=Yn(Hc),ey=z({},Ni,{data:0}),Td=Yn(ey),Bi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hl(s){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(s):(s=mn[s])?!!h[s]:!1}function Wc(){return Hl}var Xc=z({},Gl,{key:function(s){if(s.key){var h=Bi[s.key]||s.key;if(h!=="Unidentified")return h}return s.type==="keypress"?(s=ba(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?$o[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wc,charCode:function(s){return s.type==="keypress"?ba(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ba(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Dn=Yn(Xc),tm=z({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pf=Yn(tm),rm=z({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wc}),ty=Yn(rm),Gu=z({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),mf=Yn(Gu),$u=z({},fr,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ed=Yn($u),Yc=z({},Ni,{newState:0,oldState:0}),Zu=Yn(Yc),Hu=[9,13,27,32],jn=Pn&&"CompositionEvent"in window,Wu=null;Pn&&"documentMode"in document&&(Wu=document.documentMode);var Xu=Pn&&"TextEvent"in window&&!Wu,Yu=Pn&&(!jn||Wu&&8<Wu&&11>=Wu),al=" ",nm=!1;function Kc(s,h){switch(s){case"keyup":return Hu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function im(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var _o=!1;function gf(s,h){switch(s){case"compositionend":return im(h);case"keypress":return h.which!==32?null:(nm=!0,al);case"textInput":return s=h.data,s===al&&nm?null:s;default:return null}}function am(s,h){if(_o)return s==="compositionend"||!jn&&Kc(s,h)?(s=tl(),pn=Go=xa=null,_o=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Yu&&h.locale!=="ko"?null:h.data;default:return null}}var om={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h==="input"?!!om[s.type]:h==="textarea"}function vf(s,h,g,S){ni?Vn?Vn.push(S):Vn=[S]:ni=S,h=lp(h,"onChange"),0<h.length&&(g=new $c("onChange","change",null,g,S),s.push({event:g,listeners:h}))}var Wl=null,Ku=null;function sm(s){z_(s,0)}function Qc(s){var h=Uo(s);if(bd(h))return s}function ol(s,h){if(s==="change")return h}var Ad=!1;if(Pn){var Jc;if(Pn){var sl="oninput"in document;if(!sl){var Md=document.createElement("div");Md.setAttribute("oninput","return;"),sl=typeof Md.oninput=="function"}Jc=sl}else Jc=!1;Ad=Jc&&(!document.documentMode||9<document.documentMode)}function eh(){Wl&&(Wl.detachEvent("onpropertychange",lm),Ku=Wl=null)}function lm(s){if(s.propertyName==="value"&&Qc(Ku)){var h=[];vf(h,Ku,s,Gc(s)),Xr(sm,h)}}function ry(s,h,g){s==="focusin"?(eh(),Wl=h,Ku=g,Wl.attachEvent("onpropertychange",lm)):s==="focusout"&&eh()}function um(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Qc(Ku)}function th(s,h){if(s==="click")return Qc(h)}function cm(s,h){if(s==="input"||s==="change")return Qc(h)}function Cd(s,h){return s===h&&(s!==0||1/s===1/h)||s!==s&&h!==h}var Xi=typeof Object.is=="function"?Object.is:Cd;function ll(s,h){if(Xi(s,h))return!0;if(typeof s!="object"||s===null||typeof h!="object"||h===null)return!1;var g=Object.keys(s),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var I=g[S];if(!Ys.call(h,I)||!Xi(s[I],h[I]))return!1}return!0}function Xa(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function rh(s,h){var g=Xa(s);s=0;for(var S;g;){if(g.nodeType===3){if(S=s+g.textContent.length,s<=h&&S>=h)return{node:g,offset:h-s};s=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Xa(g)}}function _f(s,h){return s&&h?s===h?!0:s&&s.nodeType===3?!1:h&&h.nodeType===3?_f(s,h.parentNode):"contains"in s?s.contains(h):s.compareDocumentPosition?!!(s.compareDocumentPosition(h)&16):!1:!1}function xf(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var h=Uc(s.document);h instanceof s.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)s=h.contentWindow;else break;h=Uc(s.document)}return h}function nh(s){var h=s&&s.nodeName&&s.nodeName.toLowerCase();return h&&(h==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||h==="textarea"||s.contentEditable==="true")}var bf=Pn&&"documentMode"in document&&11>=document.documentMode,Ya=null,ih=null,ah=null,wf=!1;function hm(s,h,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;wf||Ya==null||Ya!==Uc(S)||(S=Ya,"selectionStart"in S&&nh(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),ah&&ll(ah,S)||(ah=S,S=lp(ih,"onSelect"),0<S.length&&(h=new $c("onSelect","select",null,h,g),s.push({event:h,listeners:S}),h.target=Ya)))}function Xl(s,h){var g={};return g[s.toLowerCase()]=h.toLowerCase(),g["Webkit"+s]="webkit"+h,g["Moz"+s]="moz"+h,g}var Yl={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionrun:Xl("Transition","TransitionRun"),transitionstart:Xl("Transition","TransitionStart"),transitioncancel:Xl("Transition","TransitionCancel"),transitionend:Xl("Transition","TransitionEnd")},Pd={},Ir={};Pn&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Yl.animationend.animation,delete Yl.animationiteration.animation,delete Yl.animationstart.animation),"TransitionEvent"in window||delete Yl.transitionend.transition);function Zo(s){if(Pd[s])return Pd[s];if(!Yl[s])return s;var h=Yl[s],g;for(g in h)if(h.hasOwnProperty(g)&&g in Ir)return Pd[s]=h[g];return s}var oh=Zo("animationend"),sh=Zo("animationiteration"),Sf=Zo("animationstart"),Kl=Zo("transitionrun"),lh=Zo("transitionstart"),Qu=Zo("transitioncancel"),wa=Zo("transitionend"),Dd=new Map,Tf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tf.push("scrollEnd");function Sa(s,h){Dd.set(s,h),Tr(h,[s])}var Ho=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Fi=[],Ss=0,Ql=0;function Jl(){for(var s=Ss,h=Ql=Ss=0;h<s;){var g=Fi[h];Fi[h++]=null;var S=Fi[h];Fi[h++]=null;var I=Fi[h];Fi[h++]=null;var j=Fi[h];if(Fi[h++]=null,S!==null&&I!==null){var Q=S.pending;Q===null?I.next=I:(I.next=Q.next,Q.next=I),S.pending=I}j!==0&&Od(g,I,j)}}function uh(s,h,g,S){Fi[Ss++]=s,Fi[Ss++]=h,Fi[Ss++]=g,Fi[Ss++]=S,Ql|=S,s.lanes|=S,s=s.alternate,s!==null&&(s.lanes|=S)}function ul(s,h,g,S){return uh(s,h,g,S),Ju(s)}function Ka(s,h){return uh(s,null,null,h),Ju(s)}function Od(s,h,g){s.lanes|=g;var S=s.alternate;S!==null&&(S.lanes|=g);for(var I=!1,j=s.return;j!==null;)j.childLanes|=g,S=j.alternate,S!==null&&(S.childLanes|=g),j.tag===22&&(s=j.stateNode,s===null||s._visibility&1||(I=!0)),s=j,j=j.return;return s.tag===3?(j=s.stateNode,I&&h!==null&&(I=31-Ce(g),s=j.hiddenUpdates,S=s[I],S===null?s[I]=[h]:S.push(h),h.lane=g|536870912),j):null}function Ju(s){if(50<np)throw np=0,xy=null,Error(l(185));for(var h=s.return;h!==null;)s=h,h=s.return;return s.tag===3?s.stateNode:null}var pr={};function Ef(s,h,g,S){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(s,h,g,S){return new Ef(s,h,g,S)}function Af(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ea(s,h){var g=s.alternate;return g===null?(g=Ta(s.tag,h,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=h,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,h=s.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function fm(s,h){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=h,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,h=g.dependencies,s.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),s}function Mf(s,h,g,S,I,j){var Q=0;if(S=s,typeof s=="function")Af(s)&&(Q=1);else if(typeof s=="string")Q=sg(s,g,zt.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case bt:return s=Ta(31,g,h,I),s.elementType=bt,s.lanes=j,s;case K:return cl(g.children,I,j,h);case q:Q=8,I|=24;break;case he:return s=Ta(12,g,h,I|2),s.elementType=he,s.lanes=j,s;case ke:return s=Ta(13,g,h,I),s.elementType=ke,s.lanes=j,s;case Pe:return s=Ta(19,g,h,I),s.elementType=Pe,s.lanes=j,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case ge:Q=10;break e;case ye:Q=9;break e;case Te:Q=11;break e;case Re:Q=14;break e;case ot:Q=16,S=null;break e}Q=29,g=Error(l(130,s===null?"null":typeof s,"")),S=null}return h=Ta(Q,g,h,I),h.elementType=s,h.type=S,h.lanes=j,h}function cl(s,h,g,S){return s=Ta(7,s,S,h),s.lanes=g,s}function Id(s,h,g){return s=Ta(6,s,null,h),s.lanes=g,s}function Cf(s){var h=Ta(18,null,null,0);return h.stateNode=s,h}function hl(s,h,g){return h=Ta(4,s.children!==null?s.children:[],s.key,h),h.lanes=g,h.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},h}var ec=new WeakMap;function Ui(s,h){if(typeof s=="object"&&s!==null){var g=ec.get(s);return g!==void 0?g:(h={value:s,source:h,stack:ya(h)},ec.set(s,h),h)}return{value:s,source:h,stack:ya(h)}}var fl=[],dl=0,eu=null,pl=0,ai=[],ui=0,Wo=null,Xo=1,Yi="";function Ts(s,h){fl[dl++]=pl,fl[dl++]=eu,eu=s,pl=h}function zd(s,h,g){ai[ui++]=Xo,ai[ui++]=Yi,ai[ui++]=Wo,Wo=s;var S=Xo;s=Yi;var I=32-Ce(S)-1;S&=~(1<<I),g+=1;var j=32-Ce(h)+I;if(30<j){var Q=I-I%5;j=(S&(1<<Q)-1).toString(32),S>>=Q,I-=Q,Xo=1<<32-Ce(h)+I|g<<I|S,Yi=j+s}else Xo=1<<j|g<<I|S,Yi=s}function tu(s){s.return!==null&&(Ts(s,1),zd(s,1,0))}function tc(s){for(;s===eu;)eu=fl[--dl],fl[dl]=null,pl=fl[--dl],fl[dl]=null;for(;s===Wo;)Wo=ai[--ui],ai[ui]=null,Yi=ai[--ui],ai[ui]=null,Xo=ai[--ui],ai[ui]=null}function kd(s,h){ai[ui++]=Xo,ai[ui++]=Yi,ai[ui++]=Wo,Xo=h.id,Yi=h.overflow,Wo=s}var ci=null,Yr=null,Sr=!1,Es=null,Aa=!1,bn=Error(l(519));function Ki(s){var h=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw As(Ui(h,s)),bn}function Qi(s){var h=s.stateNode,g=s.type,S=s.memoizedProps;switch(h[Fr]=s,h[At]=S,g){case"dialog":Pr("cancel",h),Pr("close",h);break;case"iframe":case"object":case"embed":Pr("load",h);break;case"video":case"audio":for(g=0;g<gc.length;g++)Pr(gc[g],h);break;case"source":Pr("error",h);break;case"img":case"image":case"link":Pr("error",h),Pr("load",h);break;case"details":Pr("toggle",h);break;case"input":Pr("invalid",h),ff(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Pr("invalid",h);break;case"textarea":Pr("invalid",h),Vu(h,S.value,S.defaultValue,S.children)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||S.suppressHydrationWarning===!0||ky(h.textContent,g)?(S.popover!=null&&(Pr("beforetoggle",h),Pr("toggle",h)),S.onScroll!=null&&Pr("scroll",h),S.onScrollEnd!=null&&Pr("scrollend",h),S.onClick!=null&&(h.onclick=vo),h=!0):h=!1,h||Ki(s,!0)}function ch(s){for(ci=s.return;ci;)switch(ci.tag){case 5:case 31:case 13:Aa=!1;return;case 27:case 3:Aa=!0;return;default:ci=ci.return}}function Yo(s){if(s!==ci)return!1;if(!Sr)return ch(s),Sr=!0,!1;var h=s.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||Qm(s.type,s.memoizedProps)),g=!g),g&&Yr&&Ki(s),ch(s),h===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));Yr=Oi(s)}else if(h===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(317));Yr=Oi(s)}else h===27?(h=Yr,_c(s.type)?(s=Ra,Ra=null,Yr=s):Yr=h):Yr=ci?Oo(s.stateNode.nextSibling):null;return!0}function Ko(){Yr=ci=null,Sr=!1}function Qo(){var s=Es;return s!==null&&(so===null?so=s:so.push.apply(so,s),Es=null),s}function As(s){Es===null?Es=[s]:Es.push(s)}var Ms=De(null),Qa=null,Jo=null;function Cs(s,h,g){Mt(Ms,h._currentValue),h._currentValue=g}function es(s){s._currentValue=Ms.current,lt(Ms)}function Pf(s,h,g){for(;s!==null;){var S=s.alternate;if((s.childLanes&h)!==h?(s.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),s===g)break;s=s.return}}function Df(s,h,g,S){var I=s.child;for(I!==null&&(I.return=s);I!==null;){var j=I.dependencies;if(j!==null){var Q=I.child;j=j.firstContext;e:for(;j!==null;){var ce=j;j=I;for(var ze=0;ze<h.length;ze++)if(ce.context===h[ze]){j.lanes|=g,ce=j.alternate,ce!==null&&(ce.lanes|=g),Pf(j.return,g,s),S||(Q=null);break e}j=ce.next}}else if(I.tag===18){if(Q=I.return,Q===null)throw Error(l(341));Q.lanes|=g,j=Q.alternate,j!==null&&(j.lanes|=g),Pf(Q,g,s),Q=null}else Q=I.child;if(Q!==null)Q.return=I;else for(Q=I;Q!==null;){if(Q===s){Q=null;break}if(I=Q.sibling,I!==null){I.return=Q.return,Q=I;break}Q=Q.return}I=Q}}function Ma(s,h,g,S){s=null;for(var I=h,j=!1;I!==null;){if(!j){if((I.flags&524288)!==0)j=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var Q=I.alternate;if(Q===null)throw Error(l(387));if(Q=Q.memoizedProps,Q!==null){var ce=I.type;Xi(I.pendingProps.value,Q.value)||(s!==null?s.push(ce):s=[ce])}}else if(I===Gt.current){if(Q=I.alternate,Q===null)throw Error(l(387));Q.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(s!==null?s.push(xp):s=[xp])}I=I.return}s!==null&&Df(h,s,g,S),h.flags|=262144}function rc(s){for(s=s.firstContext;s!==null;){if(!Xi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ps(s){Qa=s,Jo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function qn(s){return Of(Qa,s)}function hh(s,h){return Qa===null&&Ps(s),Of(s,h)}function Of(s,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},Jo===null){if(s===null)throw Error(l(308));Jo=h,s.dependencies={lanes:0,firstContext:h},s.flags|=524288}else Jo=Jo.next=h;return g}var Rd=typeof AbortController<"u"?AbortController:function(){var s=[],h=this.signal={aborted:!1,addEventListener:function(g,S){s.push(S)}};this.abort=function(){h.aborted=!0,s.forEach(function(g){return g()})}},dm=e.unstable_scheduleCallback,Ld=e.unstable_NormalPriority,Nn={$$typeof:ge,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ts(){return{controller:new Rd,data:new Map,refCount:0}}function nc(s){s.refCount--,s.refCount===0&&dm(Ld,function(){s.controller.abort()})}var Ci=null,Ca=0,ru=0,Pi=null;function ny(s,h){if(Ci===null){var g=Ci=[];Ca=0,ru=Py(),Pi={status:"pending",value:void 0,then:function(S){g.push(S)}}}return Ca++,h.then(ic,ic),h}function ic(){if(--Ca===0&&Ci!==null){Pi!==null&&(Pi.status="fulfilled");var s=Ci;Ci=null,ru=0,Pi=null;for(var h=0;h<s.length;h++)(0,s[h])()}}function fh(s,h){var g=[],S={status:"pending",value:null,reason:null,then:function(I){g.push(I)}};return s.then(function(){S.status="fulfilled",S.value=h;for(var I=0;I<g.length;I++)(0,g[I])(h)},function(I){for(S.status="rejected",S.reason=I,I=0;I<g.length;I++)(0,g[I])(void 0)}),S}var oi=Le.S;Le.S=function(s,h){g_=ri(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&ny(s,h),oi!==null&&oi(s,h)};var xo=De(null);function If(){var s=xo.current;return s!==null?s:vn.pooledCache}function zf(s,h){h===null?Mt(xo,xo.current):Mt(xo,h.pool)}function pm(){var s=If();return s===null?null:{parent:Nn._currentValue,pool:s}}var bo=Error(l(460)),ml=Error(l(474)),Ji=Error(l(542)),Lt={then:function(){}};function dh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function kf(s,h,g){switch(g=s[g],g===void 0?s.push(h):g!==h&&(h.then(vo,vo),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,Rf(s),s;default:if(typeof h.status=="string")h.then(vo,vo);else{if(s=vn,s!==null&&100<s.shellSuspendCounter)throw Error(l(482));s=h,s.status="pending",s.then(function(S){if(h.status==="pending"){var I=h;I.status="fulfilled",I.value=S}},function(S){if(h.status==="pending"){var I=h;I.status="rejected",I.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw s=h.reason,Rf(s),s}throw wo=h,bo}}function Ja(s){try{var h=s._init;return h(s._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(wo=g,bo):g}}var wo=null;function ac(){if(wo===null)throw Error(l(459));var s=wo;return wo=null,s}function Rf(s){if(s===bo||s===Ji)throw Error(l(483))}var rs=null,nu=0;function ph(s){var h=nu;return nu+=1,rs===null&&(rs=[]),kf(rs,s,h)}function ns(s,h){h=h.props.ref,s.ref=h!==void 0?h:null}function Lf(s,h){throw h.$$typeof===F?Error(l(525)):(s=Object.prototype.toString.call(h),Error(l(31,s==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":s)))}function mh(s){function h(qe,Ne){if(s){var tt=qe.deletions;tt===null?(qe.deletions=[Ne],qe.flags|=16):tt.push(Ne)}}function g(qe,Ne){if(!s)return null;for(;Ne!==null;)h(qe,Ne),Ne=Ne.sibling;return null}function S(qe){for(var Ne=new Map;qe!==null;)qe.key!==null?Ne.set(qe.key,qe):Ne.set(qe.index,qe),qe=qe.sibling;return Ne}function I(qe,Ne){return qe=Ea(qe,Ne),qe.index=0,qe.sibling=null,qe}function j(qe,Ne,tt){return qe.index=tt,s?(tt=qe.alternate,tt!==null?(tt=tt.index,tt<Ne?(qe.flags|=67108866,Ne):tt):(qe.flags|=67108866,Ne)):(qe.flags|=1048576,Ne)}function Q(qe){return s&&qe.alternate===null&&(qe.flags|=67108866),qe}function ce(qe,Ne,tt,_t){return Ne===null||Ne.tag!==6?(Ne=Id(tt,qe.mode,_t),Ne.return=qe,Ne):(Ne=I(Ne,tt),Ne.return=qe,Ne)}function ze(qe,Ne,tt,_t){var rr=tt.type;return rr===K?gt(qe,Ne,tt.props.children,_t,tt.key):Ne!==null&&(Ne.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===ot&&Ja(rr)===Ne.type)?(Ne=I(Ne,tt.props),ns(Ne,tt),Ne.return=qe,Ne):(Ne=Mf(tt.type,tt.key,tt.props,null,qe.mode,_t),ns(Ne,tt),Ne.return=qe,Ne)}function rt(qe,Ne,tt,_t){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==tt.containerInfo||Ne.stateNode.implementation!==tt.implementation?(Ne=hl(tt,qe.mode,_t),Ne.return=qe,Ne):(Ne=I(Ne,tt.children||[]),Ne.return=qe,Ne)}function gt(qe,Ne,tt,_t,rr){return Ne===null||Ne.tag!==7?(Ne=cl(tt,qe.mode,_t,rr),Ne.return=qe,Ne):(Ne=I(Ne,tt),Ne.return=qe,Ne)}function St(qe,Ne,tt){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=Id(""+Ne,qe.mode,tt),Ne.return=qe,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case $:return tt=Mf(Ne.type,Ne.key,Ne.props,null,qe.mode,tt),ns(tt,Ne),tt.return=qe,tt;case Y:return Ne=hl(Ne,qe.mode,tt),Ne.return=qe,Ne;case ot:return Ne=Ja(Ne),St(qe,Ne,tt)}if(Je(Ne)||Ve(Ne))return Ne=cl(Ne,qe.mode,tt,null),Ne.return=qe,Ne;if(typeof Ne.then=="function")return St(qe,ph(Ne),tt);if(Ne.$$typeof===ge)return St(qe,hh(qe,Ne),tt);Lf(qe,Ne)}return null}function nt(qe,Ne,tt,_t){var rr=Ne!==null?Ne.key:null;if(typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint")return rr!==null?null:ce(qe,Ne,""+tt,_t);if(typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case $:return tt.key===rr?ze(qe,Ne,tt,_t):null;case Y:return tt.key===rr?rt(qe,Ne,tt,_t):null;case ot:return tt=Ja(tt),nt(qe,Ne,tt,_t)}if(Je(tt)||Ve(tt))return rr!==null?null:gt(qe,Ne,tt,_t,null);if(typeof tt.then=="function")return nt(qe,Ne,ph(tt),_t);if(tt.$$typeof===ge)return nt(qe,Ne,hh(qe,tt),_t);Lf(qe,tt)}return null}function ut(qe,Ne,tt,_t,rr){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return qe=qe.get(tt)||null,ce(Ne,qe,""+_t,rr);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case $:return qe=qe.get(_t.key===null?tt:_t.key)||null,ze(Ne,qe,_t,rr);case Y:return qe=qe.get(_t.key===null?tt:_t.key)||null,rt(Ne,qe,_t,rr);case ot:return _t=Ja(_t),ut(qe,Ne,tt,_t,rr)}if(Je(_t)||Ve(_t))return qe=qe.get(tt)||null,gt(Ne,qe,_t,rr,null);if(typeof _t.then=="function")return ut(qe,Ne,tt,ph(_t),rr);if(_t.$$typeof===ge)return ut(qe,Ne,tt,hh(Ne,_t),rr);Lf(Ne,_t)}return null}function $t(qe,Ne,tt,_t){for(var rr=null,Hr=null,Xt=Ne,yr=Ne=0,ar=null;Xt!==null&&yr<tt.length;yr++){Xt.index>yr?(ar=Xt,Xt=null):ar=Xt.sibling;var Nr=nt(qe,Xt,tt[yr],_t);if(Nr===null){Xt===null&&(Xt=ar);break}s&&Xt&&Nr.alternate===null&&h(qe,Xt),Ne=j(Nr,Ne,yr),Hr===null?rr=Nr:Hr.sibling=Nr,Hr=Nr,Xt=ar}if(yr===tt.length)return g(qe,Xt),Sr&&Ts(qe,yr),rr;if(Xt===null){for(;yr<tt.length;yr++)Xt=St(qe,tt[yr],_t),Xt!==null&&(Ne=j(Xt,Ne,yr),Hr===null?rr=Xt:Hr.sibling=Xt,Hr=Xt);return Sr&&Ts(qe,yr),rr}for(Xt=S(Xt);yr<tt.length;yr++)ar=ut(Xt,qe,yr,tt[yr],_t),ar!==null&&(s&&ar.alternate!==null&&Xt.delete(ar.key===null?yr:ar.key),Ne=j(ar,Ne,yr),Hr===null?rr=ar:Hr.sibling=ar,Hr=ar);return s&&Xt.forEach(function(Au){return h(qe,Au)}),Sr&&Ts(qe,yr),rr}function lr(qe,Ne,tt,_t){if(tt==null)throw Error(l(151));for(var rr=null,Hr=null,Xt=Ne,yr=Ne=0,ar=null,Nr=tt.next();Xt!==null&&!Nr.done;yr++,Nr=tt.next()){Xt.index>yr?(ar=Xt,Xt=null):ar=Xt.sibling;var Au=nt(qe,Xt,Nr.value,_t);if(Au===null){Xt===null&&(Xt=ar);break}s&&Xt&&Au.alternate===null&&h(qe,Xt),Ne=j(Au,Ne,yr),Hr===null?rr=Au:Hr.sibling=Au,Hr=Au,Xt=ar}if(Nr.done)return g(qe,Xt),Sr&&Ts(qe,yr),rr;if(Xt===null){for(;!Nr.done;yr++,Nr=tt.next())Nr=St(qe,Nr.value,_t),Nr!==null&&(Ne=j(Nr,Ne,yr),Hr===null?rr=Nr:Hr.sibling=Nr,Hr=Nr);return Sr&&Ts(qe,yr),rr}for(Xt=S(Xt);!Nr.done;yr++,Nr=tt.next())Nr=ut(Xt,qe,yr,Nr.value,_t),Nr!==null&&(s&&Nr.alternate!==null&&Xt.delete(Nr.key===null?yr:Nr.key),Ne=j(Nr,Ne,yr),Hr===null?rr=Nr:Hr.sibling=Nr,Hr=Nr);return s&&Xt.forEach(function(t0){return h(qe,t0)}),Sr&&Ts(qe,yr),rr}function tn(qe,Ne,tt,_t){if(typeof tt=="object"&&tt!==null&&tt.type===K&&tt.key===null&&(tt=tt.props.children),typeof tt=="object"&&tt!==null){switch(tt.$$typeof){case $:e:{for(var rr=tt.key;Ne!==null;){if(Ne.key===rr){if(rr=tt.type,rr===K){if(Ne.tag===7){g(qe,Ne.sibling),_t=I(Ne,tt.props.children),_t.return=qe,qe=_t;break e}}else if(Ne.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===ot&&Ja(rr)===Ne.type){g(qe,Ne.sibling),_t=I(Ne,tt.props),ns(_t,tt),_t.return=qe,qe=_t;break e}g(qe,Ne);break}else h(qe,Ne);Ne=Ne.sibling}tt.type===K?(_t=cl(tt.props.children,qe.mode,_t,tt.key),_t.return=qe,qe=_t):(_t=Mf(tt.type,tt.key,tt.props,null,qe.mode,_t),ns(_t,tt),_t.return=qe,qe=_t)}return Q(qe);case Y:e:{for(rr=tt.key;Ne!==null;){if(Ne.key===rr)if(Ne.tag===4&&Ne.stateNode.containerInfo===tt.containerInfo&&Ne.stateNode.implementation===tt.implementation){g(qe,Ne.sibling),_t=I(Ne,tt.children||[]),_t.return=qe,qe=_t;break e}else{g(qe,Ne);break}else h(qe,Ne);Ne=Ne.sibling}_t=hl(tt,qe.mode,_t),_t.return=qe,qe=_t}return Q(qe);case ot:return tt=Ja(tt),tn(qe,Ne,tt,_t)}if(Je(tt))return $t(qe,Ne,tt,_t);if(Ve(tt)){if(rr=Ve(tt),typeof rr!="function")throw Error(l(150));return tt=rr.call(tt),lr(qe,Ne,tt,_t)}if(typeof tt.then=="function")return tn(qe,Ne,ph(tt),_t);if(tt.$$typeof===ge)return tn(qe,Ne,hh(qe,tt),_t);Lf(qe,tt)}return typeof tt=="string"&&tt!==""||typeof tt=="number"||typeof tt=="bigint"?(tt=""+tt,Ne!==null&&Ne.tag===6?(g(qe,Ne.sibling),_t=I(Ne,tt),_t.return=qe,qe=_t):(g(qe,Ne),_t=Id(tt,qe.mode,_t),_t.return=qe,qe=_t),Q(qe)):g(qe,Ne)}return function(qe,Ne,tt,_t){try{nu=0;var rr=tn(qe,Ne,tt,_t);return rs=null,rr}catch(Xt){if(Xt===bo||Xt===Ji)throw Xt;var Hr=Ta(29,Xt,null,qe.mode);return Hr.lanes=_t,Hr.return=qe,Hr}}}var is=mh(!0),jd=mh(!1),as=!1;function jf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gh(s,h){s=s.updateQueue,h.updateQueue===s&&(h.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function os(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ds(s,h,g){var S=s.updateQueue;if(S===null)return null;if(S=S.shared,(Jr&2)!==0){var I=S.pending;return I===null?h.next=h:(h.next=I.next,I.next=h),S.pending=h,h=Ju(s),Od(s,null,g),h}return uh(s,S,h,g),Ju(s)}function eo(s,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var S=h.lanes;S&=s.pendingLanes,g|=S,h.lanes=g,xn(s,g)}}function Ur(s,h){var g=s.updateQueue,S=s.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var I=null,j=null;if(g=g.firstBaseUpdate,g!==null){do{var Q={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};j===null?I=j=Q:j=j.next=Q,g=g.next}while(g!==null);j===null?I=j=h:j=j.next=h}else I=j=h;g={baseState:S.baseState,firstBaseUpdate:I,lastBaseUpdate:j,shared:S.shared,callbacks:S.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=h:s.next=h,g.lastBaseUpdate=h}var Nd=!1;function Os(){if(Nd){var s=Pi;if(s!==null)throw s}}function gl(s,h,g,S){Nd=!1;var I=s.updateQueue;as=!1;var j=I.firstBaseUpdate,Q=I.lastBaseUpdate,ce=I.shared.pending;if(ce!==null){I.shared.pending=null;var ze=ce,rt=ze.next;ze.next=null,Q===null?j=rt:Q.next=rt,Q=ze;var gt=s.alternate;gt!==null&&(gt=gt.updateQueue,ce=gt.lastBaseUpdate,ce!==Q&&(ce===null?gt.firstBaseUpdate=rt:ce.next=rt,gt.lastBaseUpdate=ze))}if(j!==null){var St=I.baseState;Q=0,gt=rt=ze=null,ce=j;do{var nt=ce.lane&-536870913,ut=nt!==ce.lane;if(ut?(Cr&nt)===nt:(S&nt)===nt){nt!==0&&nt===ru&&(Nd=!0),gt!==null&&(gt=gt.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var $t=s,lr=ce;nt=h;var tn=g;switch(lr.tag){case 1:if($t=lr.payload,typeof $t=="function"){St=$t.call(tn,St,nt);break e}St=$t;break e;case 3:$t.flags=$t.flags&-65537|128;case 0:if($t=lr.payload,nt=typeof $t=="function"?$t.call(tn,St,nt):$t,nt==null)break e;St=z({},St,nt);break e;case 2:as=!0}}nt=ce.callback,nt!==null&&(s.flags|=64,ut&&(s.flags|=8192),ut=I.callbacks,ut===null?I.callbacks=[nt]:ut.push(nt))}else ut={lane:nt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},gt===null?(rt=gt=ut,ze=St):gt=gt.next=ut,Q|=nt;if(ce=ce.next,ce===null){if(ce=I.shared.pending,ce===null)break;ut=ce,ce=ut.next,ut.next=null,I.lastBaseUpdate=ut,I.shared.pending=null}}while(!0);gt===null&&(ze=St),I.baseState=ze,I.firstBaseUpdate=rt,I.lastBaseUpdate=gt,j===null&&(I.shared.lanes=0),yu|=Q,s.lanes=Q,s.memoizedState=St}}function yh(s,h){if(typeof s!="function")throw Error(l(191,s));s.call(h)}function Nf(s,h){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)yh(g[s],h)}var iu=De(null),vh=De(0);function Bd(s,h){s=gu,Mt(vh,s),Mt(iu,h),gu=s|h.baseLanes}function Pa(){Mt(vh,gu),Mt(iu,iu.current)}function au(){gu=vh.current,lt(iu),lt(vh)}var jt=De(null),Ut=null;function to(s){var h=s.alternate;Mt(On,On.current&1),Mt(jt,s),Ut===null&&(h===null||iu.current!==null||h.memoizedState!==null)&&(Ut=s)}function oc(s){Mt(On,On.current),Mt(jt,s),Ut===null&&(Ut=s)}function _h(s){s.tag===22?(Mt(On,On.current),Mt(jt,s),Ut===null&&(Ut=s)):Bn()}function Bn(){Mt(On,On.current),Mt(jt,jt.current)}function wn(s){lt(jt),Ut===s&&(Ut=null),lt(On)}var On=De(0);function xh(s){for(var h=s;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||na(g)||Tn(g)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Is=0,xr=null,Lr=null,vr=null,gn=!1,ro=!1,So=!1,ou=0,su=0,zs=null,Fd=0;function ln(){throw Error(l(321))}function To(s,h){if(h===null)return!1;for(var g=0;g<h.length&&g<s.length;g++)if(!Xi(s[g],h[g]))return!1;return!0}function sc(s,h,g,S,I,j){return Is=j,xr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Le.H=s===null||s.memoizedState===null?Qr:Gn,So=!1,j=g(S,I),So=!1,ro&&(j=bh(h,g,S,I)),lc(s),j}function lc(s){Le.H=Vr;var h=Lr!==null&&Lr.next!==null;if(Is=0,vr=Lr=xr=null,gn=!1,su=0,zs=null,h)throw Error(l(300));s===null||di||(s=s.dependencies,s!==null&&rc(s)&&(di=!0))}function bh(s,h,g,S){xr=s;var I=0;do{if(ro&&(zs=null),su=0,ro=!1,25<=I)throw Error(l(301));if(I+=1,vr=Lr=null,s.updateQueue!=null){var j=s.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}Le.H=Kn,j=h(g,S)}while(ro);return j}function wh(){var s=Le.H,h=s.useState()[0];return h=typeof h.then=="function"?lu(h):h,s=s.useState()[0],(Lr!==null?Lr.memoizedState:null)!==s&&(xr.flags|=1024),h}function Sh(){var s=ou!==0;return ou=0,s}function yl(s,h,g){h.updateQueue=s.updateQueue,h.flags&=-2053,s.lanes&=~g}function ks(s){if(gn){for(s=s.memoizedState;s!==null;){var h=s.queue;h!==null&&(h.pending=null),s=s.next}gn=!1}Is=0,vr=Lr=xr=null,ro=!1,su=ou=0,zs=null}function Si(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?xr.memoizedState=vr=s:vr=vr.next=s,vr}function yn(){if(Lr===null){var s=xr.alternate;s=s!==null?s.memoizedState:null}else s=Lr.next;var h=vr===null?xr.memoizedState:vr.next;if(h!==null)vr=h,Lr=s;else{if(s===null)throw xr.alternate===null?Error(l(467)):Error(l(310));Lr=s,s={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},vr===null?xr.memoizedState=vr=s:vr=vr.next=s}return vr}function ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(s){var h=su;return su+=1,zs===null&&(zs=[]),s=kf(zs,s,h),h=xr,(vr===null?h.memoizedState:vr.next)===null&&(h=h.alternate,Le.H=h===null||h.memoizedState===null?Qr:Gn),s}function uu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return lu(s);if(s.$$typeof===ge)return qn(s)}throw Error(l(438,String(s)))}function uc(s){var h=null,g=xr.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var S=xr.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(I){return I.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=ss(),xr.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(s),S=0;S<s;S++)g[S]=kt;return h.index++,g}function Eo(s,h){return typeof h=="function"?h(s):h}function w(s){var h=yn();return n(h,Lr,s)}function n(s,h,g){var S=s.queue;if(S===null)throw Error(l(311));S.lastRenderedReducer=g;var I=s.baseQueue,j=S.pending;if(j!==null){if(I!==null){var Q=I.next;I.next=j.next,j.next=Q}h.baseQueue=I=j,S.pending=null}if(j=s.baseState,I===null)s.memoizedState=j;else{h=I.next;var ce=Q=null,ze=null,rt=h,gt=!1;do{var St=rt.lane&-536870913;if(St!==rt.lane?(Cr&St)===St:(Is&St)===St){var nt=rt.revertLane;if(nt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),St===ru&&(gt=!0);else if((Is&nt)===nt){rt=rt.next,nt===ru&&(gt=!0);continue}else St={lane:0,revertLane:rt.revertLane,gesture:null,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},ze===null?(ce=ze=St,Q=j):ze=ze.next=St,xr.lanes|=nt,yu|=nt;St=rt.action,So&&g(j,St),j=rt.hasEagerState?rt.eagerState:g(j,St)}else nt={lane:St,revertLane:rt.revertLane,gesture:rt.gesture,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},ze===null?(ce=ze=nt,Q=j):ze=ze.next=nt,xr.lanes|=St,yu|=St;rt=rt.next}while(rt!==null&&rt!==h);if(ze===null?Q=j:ze.next=ce,!Xi(j,s.memoizedState)&&(di=!0,gt&&(g=Pi,g!==null)))throw g;s.memoizedState=j,s.baseState=Q,s.baseQueue=ze,S.lastRenderedState=j}return I===null&&(S.lanes=0),[s.memoizedState,S.dispatch]}function u(s){var h=yn(),g=h.queue;if(g===null)throw Error(l(311));g.lastRenderedReducer=s;var S=g.dispatch,I=g.pending,j=h.memoizedState;if(I!==null){g.pending=null;var Q=I=I.next;do j=s(j,Q.action),Q=Q.next;while(Q!==I);Xi(j,h.memoizedState)||(di=!0),h.memoizedState=j,h.baseQueue===null&&(h.baseState=j),g.lastRenderedState=j}return[j,S]}function d(s,h,g){var S=xr,I=yn(),j=Sr;if(j){if(g===void 0)throw Error(l(407));g=g()}else g=h();var Q=!Xi((Lr||I).memoizedState,g);if(Q&&(I.memoizedState=g,di=!0),I=I.queue,Qe(A.bind(null,S,I,s),[s]),I.getSnapshot!==h||Q||vr!==null&&vr.memoizedState.tag&1){if(S.flags|=2048,we(9,{destroy:void 0},T.bind(null,S,I,g,h),null),vn===null)throw Error(l(349));j||(Is&127)!==0||y(S,h,g)}return g}function y(s,h,g){s.flags|=16384,s={getSnapshot:h,value:g},h=xr.updateQueue,h===null?(h=ss(),xr.updateQueue=h,h.stores=[s]):(g=h.stores,g===null?h.stores=[s]:g.push(s))}function T(s,h,g,S){h.value=g,h.getSnapshot=S,O(h)&&R(s)}function A(s,h,g){return g(function(){O(h)&&R(s)})}function O(s){var h=s.getSnapshot;s=s.value;try{var g=h();return!Xi(s,g)}catch{return!0}}function R(s){var h=Ka(s,2);h!==null&&uo(h,s,2)}function U(s){var h=Si();if(typeof s=="function"){var g=s;if(s=g(),So){be(!0);try{g()}finally{be(!1)}}}return h.memoizedState=h.baseState=s,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:s},h}function V(s,h,g,S){return s.baseState=g,n(s,Lr,typeof S=="function"?S:Eo)}function X(s,h,g,S,I){if(Da(s))throw Error(l(485));if(s=h.action,s!==null){var j={payload:I,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){j.listeners.push(Q)}};Le.T!==null?g(!0):j.isTransition=!1,S(j),g=h.pending,g===null?(j.next=h.pending=j,W(h,j)):(j.next=g.next,h.pending=g.next=j)}}function W(s,h){var g=h.action,S=h.payload,I=s.state;if(h.isTransition){var j=Le.T,Q={};Le.T=Q;try{var ce=g(I,S),ze=Le.S;ze!==null&&ze(Q,ce),re(s,h,ce)}catch(rt){fe(s,h,rt)}finally{j!==null&&Q.types!==null&&(j.types=Q.types),Le.T=j}}else try{j=g(I,S),re(s,h,j)}catch(rt){fe(s,h,rt)}}function re(s,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){oe(s,h,S)},function(S){return fe(s,h,S)}):oe(s,h,g)}function oe(s,h,g){h.status="fulfilled",h.value=g,me(h),s.state=g,h=s.pending,h!==null&&(g=h.next,g===h?s.pending=null:(g=g.next,h.next=g,W(s,g)))}function fe(s,h,g){var S=s.pending;if(s.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=g,me(h),h=h.next;while(h!==S)}s.action=null}function me(s){s=s.listeners;for(var h=0;h<s.length;h++)(0,s[h])()}function pe(s,h){return h}function xe(s,h){if(Sr){var g=vn.formState;if(g!==null){e:{var S=xr;if(Sr){if(Yr){t:{for(var I=Yr,j=Aa;I.nodeType!==8;){if(!j){I=null;break t}if(I=Oo(I.nextSibling),I===null){I=null;break t}}j=I.data,I=j==="F!"||j==="F"?I:null}if(I){Yr=Oo(I.nextSibling),S=I.data==="F!";break e}}Ki(S)}S=!1}S&&(h=g[0])}}return g=Si(),g.memoizedState=g.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pe,lastRenderedState:h},g.queue=S,g=cc.bind(null,xr,S),S.dispatch=g,S=U(!1),j=ta.bind(null,xr,!1,S.queue),S=Si(),I={state:h,dispatch:null,action:s,pending:null},S.queue=I,g=X.bind(null,xr,I,j,g),I.dispatch=g,S.memoizedState=s,[h,g,!1]}function Ae(s){var h=yn();return _e(h,Lr,s)}function _e(s,h,g){if(h=n(s,h,pe)[0],s=w(Eo)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=lu(h)}catch(Q){throw Q===bo?Ji:Q}else S=h;h=yn();var I=h.queue,j=I.dispatch;return g!==h.memoizedState&&(xr.flags|=2048,we(9,{destroy:void 0},Ee.bind(null,I,g),null)),[S,j,s]}function Ee(s,h){s.action=h}function Oe(s){var h=yn(),g=Lr;if(g!==null)return _e(h,g,s);yn(),h=h.memoizedState,g=yn();var S=g.queue.dispatch;return g.memoizedState=s,[h,S,!1]}function we(s,h,g,S){return s={tag:s,create:g,deps:S,inst:h,next:null},h=xr.updateQueue,h===null&&(h=ss(),xr.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=s.next=s:(S=g.next,g.next=s,s.next=S,h.lastEffect=s),s}function je(){return yn().memoizedState}function et(s,h,g,S){var I=Si();xr.flags|=s,I.memoizedState=we(1|h,{destroy:void 0},g,S===void 0?null:S)}function Xe(s,h,g,S){var I=yn();S=S===void 0?null:S;var j=I.memoizedState.inst;Lr!==null&&S!==null&&To(S,Lr.memoizedState.deps)?I.memoizedState=we(h,j,g,S):(xr.flags|=s,I.memoizedState=we(1|h,j,g,S))}function Ke(s,h){et(8390656,8,s,h)}function Qe(s,h){Xe(2048,8,s,h)}function Ct(s){xr.flags|=4;var h=xr.updateQueue;if(h===null)h=ss(),xr.updateQueue=h,h.events=[s];else{var g=h.events;g===null?h.events=[s]:g.push(s)}}function Pt(s){var h=yn().memoizedState;return Ct({ref:h,nextImpl:s}),function(){if((Jr&2)!==0)throw Error(l(440));return h.impl.apply(void 0,arguments)}}function yt(s,h){return Xe(4,2,s,h)}function It(s,h){return Xe(4,4,s,h)}function sr(s,h){if(typeof h=="function"){s=s();var g=h(s);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return s=s(),h.current=s,function(){h.current=null}}function jr(s,h,g){g=g!=null?g.concat([s]):null,Xe(4,4,sr.bind(null,h,s),g)}function rn(){}function Kr(s,h){var g=yn();h=h===void 0?null:h;var S=g.memoizedState;return h!==null&&To(h,S[1])?S[0]:(g.memoizedState=[s,h],s)}function un(s,h){var g=yn();h=h===void 0?null:h;var S=g.memoizedState;if(h!==null&&To(h,S[1]))return S[0];if(S=s(),So){be(!0);try{s()}finally{be(!1)}}return g.memoizedState=[S,h],S}function $r(s,h,g){return g===void 0||(Is&1073741824)!==0&&(Cr&261930)===0?s.memoizedState=h:(s.memoizedState=g,s=v_(),xr.lanes|=s,yu|=s,g)}function Sn(s,h,g,S){return Xi(g,h)?g:iu.current!==null?(s=$r(s,g,S),Xi(s,h)||(di=!0),s):(Is&42)===0||(Is&1073741824)!==0&&(Cr&261930)===0?(di=!0,s.memoizedState=g):(s=v_(),xr.lanes|=s,yu|=s,h)}function cn(s,h,g,S,I){var j=Ge.p;Ge.p=j!==0&&8>j?j:8;var Q=Le.T,ce={};Le.T=ce,ta(s,!1,h,g);try{var ze=I(),rt=Le.S;if(rt!==null&&rt(ce,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var gt=fh(ze,S);Mo(s,h,gt,lo(s))}else Mo(s,h,S,lo(s))}catch(St){Mo(s,h,{then:function(){},status:"rejected",reason:St},lo())}finally{Ge.p=j,Q!==null&&ce.types!==null&&(Q.types=ce.types),Le.T=Q}}function hi(){}function In(s,h,g,S){if(s.tag!==5)throw Error(l(476));var I=zn(s).queue;cn(s,I,h,st,g===null?hi:function(){return fi(s),g(S)})}function zn(s){var h=s.memoizedState;if(h!==null)return h;h={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:st},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:g},next:null},s.memoizedState=h,s=s.alternate,s!==null&&(s.memoizedState=h),h}function fi(s){var h=zn(s);h.next===null&&(h=s.alternate.memoizedState),Mo(s,h.next.queue,{},lo())}function ls(){return qn(xp)}function us(){return yn().memoizedState}function Ao(){return yn().memoizedState}function ea(s){for(var h=s.return;h!==null;){switch(h.tag){case 24:case 3:var g=lo();s=os(g);var S=Ds(h,s,g);S!==null&&(uo(S,h,g),eo(S,h,g)),h={cache:ts()},s.payload=h;return}h=h.return}}function cu(s,h,g){var S=lo();g={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Da(s)?no(h,g):(g=ul(s,h,g,S),g!==null&&(uo(g,s,S),io(g,h,S)))}function cc(s,h,g){var S=lo();Mo(s,h,g,S)}function Mo(s,h,g,S){var I={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Da(s))no(h,I);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=h.lastRenderedReducer,j!==null))try{var Q=h.lastRenderedState,ce=j(Q,g);if(I.hasEagerState=!0,I.eagerState=ce,Xi(ce,Q))return uh(s,h,I,0),vn===null&&Jl(),!1}catch{}if(g=ul(s,h,I,S),g!==null)return uo(g,s,S),io(g,h,S),!0}return!1}function ta(s,h,g,S){if(S={lane:2,revertLane:Py(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Da(s)){if(h)throw Error(l(479))}else h=ul(s,g,S,2),h!==null&&uo(h,s,2)}function Da(s){var h=s.alternate;return s===xr||h!==null&&h===xr}function no(s,h){ro=gn=!0;var g=s.pending;g===null?h.next=h:(h.next=g.next,g.next=h),s.pending=h}function io(s,h,g){if((g&4194048)!==0){var S=h.lanes;S&=s.pendingLanes,g|=S,h.lanes=g,xn(s,g)}}var Vr={readContext:qn,use:uu,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};Vr.useEffectEvent=ln;var Qr={readContext:qn,use:uu,useCallback:function(s,h){return Si().memoizedState=[s,h===void 0?null:h],s},useContext:qn,useEffect:Ke,useImperativeHandle:function(s,h,g){g=g!=null?g.concat([s]):null,et(4194308,4,sr.bind(null,h,s),g)},useLayoutEffect:function(s,h){return et(4194308,4,s,h)},useInsertionEffect:function(s,h){et(4,2,s,h)},useMemo:function(s,h){var g=Si();h=h===void 0?null:h;var S=s();if(So){be(!0);try{s()}finally{be(!1)}}return g.memoizedState=[S,h],S},useReducer:function(s,h,g){var S=Si();if(g!==void 0){var I=g(h);if(So){be(!0);try{g(h)}finally{be(!1)}}}else I=h;return S.memoizedState=S.baseState=I,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:I},S.queue=s,s=s.dispatch=cu.bind(null,xr,s),[S.memoizedState,s]},useRef:function(s){var h=Si();return s={current:s},h.memoizedState=s},useState:function(s){s=U(s);var h=s.queue,g=cc.bind(null,xr,h);return h.dispatch=g,[s.memoizedState,g]},useDebugValue:rn,useDeferredValue:function(s,h){var g=Si();return $r(g,s,h)},useTransition:function(){var s=U(!1);return s=cn.bind(null,xr,s.queue,!0,!1),Si().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,h,g){var S=xr,I=Si();if(Sr){if(g===void 0)throw Error(l(407));g=g()}else{if(g=h(),vn===null)throw Error(l(349));(Cr&127)!==0||y(S,h,g)}I.memoizedState=g;var j={value:g,getSnapshot:h};return I.queue=j,Ke(A.bind(null,S,j,s),[s]),S.flags|=2048,we(9,{destroy:void 0},T.bind(null,S,j,g,h),null),g},useId:function(){var s=Si(),h=vn.identifierPrefix;if(Sr){var g=Yi,S=Xo;g=(S&~(1<<32-Ce(S)-1)).toString(32)+g,h="_"+h+"R_"+g,g=ou++,0<g&&(h+="H"+g.toString(32)),h+="_"}else g=Fd++,h="_"+h+"r_"+g.toString(32)+"_";return s.memoizedState=h},useHostTransitionStatus:ls,useFormState:xe,useActionState:xe,useOptimistic:function(s){var h=Si();h.memoizedState=h.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=ta.bind(null,xr,!0,g),g.dispatch=h,[s,h]},useMemoCache:uc,useCacheRefresh:function(){return Si().memoizedState=ea.bind(null,xr)},useEffectEvent:function(s){var h=Si(),g={impl:s};return h.memoizedState=g,function(){if((Jr&2)!==0)throw Error(l(440));return g.impl.apply(void 0,arguments)}}},Gn={readContext:qn,use:uu,useCallback:Kr,useContext:qn,useEffect:Qe,useImperativeHandle:jr,useInsertionEffect:yt,useLayoutEffect:It,useMemo:un,useReducer:w,useRef:je,useState:function(){return w(Eo)},useDebugValue:rn,useDeferredValue:function(s,h){var g=yn();return Sn(g,Lr.memoizedState,s,h)},useTransition:function(){var s=w(Eo)[0],h=yn().memoizedState;return[typeof s=="boolean"?s:lu(s),h]},useSyncExternalStore:d,useId:us,useHostTransitionStatus:ls,useFormState:Ae,useActionState:Ae,useOptimistic:function(s,h){var g=yn();return V(g,Lr,s,h)},useMemoCache:uc,useCacheRefresh:Ao};Gn.useEffectEvent=Pt;var Kn={readContext:qn,use:uu,useCallback:Kr,useContext:qn,useEffect:Qe,useImperativeHandle:jr,useInsertionEffect:yt,useLayoutEffect:It,useMemo:un,useReducer:u,useRef:je,useState:function(){return u(Eo)},useDebugValue:rn,useDeferredValue:function(s,h){var g=yn();return Lr===null?$r(g,s,h):Sn(g,Lr.memoizedState,s,h)},useTransition:function(){var s=u(Eo)[0],h=yn().memoizedState;return[typeof s=="boolean"?s:lu(s),h]},useSyncExternalStore:d,useId:us,useHostTransitionStatus:ls,useFormState:Oe,useActionState:Oe,useOptimistic:function(s,h){var g=yn();return Lr!==null?V(g,Lr,s,h):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:uc,useCacheRefresh:Ao};Kn.useEffectEvent=Pt;function Bf(s,h,g,S){h=s.memoizedState,g=g(S,h),g=g==null?h:z({},h,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var Ff={enqueueSetState:function(s,h,g){s=s._reactInternals;var S=lo(),I=os(S);I.payload=h,g!=null&&(I.callback=g),h=Ds(s,I,S),h!==null&&(uo(h,s,S),eo(h,s,S))},enqueueReplaceState:function(s,h,g){s=s._reactInternals;var S=lo(),I=os(S);I.tag=1,I.payload=h,g!=null&&(I.callback=g),h=Ds(s,I,S),h!==null&&(uo(h,s,S),eo(h,s,S))},enqueueForceUpdate:function(s,h){s=s._reactInternals;var g=lo(),S=os(g);S.tag=2,h!=null&&(S.callback=h),h=Ds(s,S,g),h!==null&&(uo(h,s,g),eo(h,s,g))}};function vl(s,h,g,S,I,j,Q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(S,j,Q):h.prototype&&h.prototype.isPureReactComponent?!ll(g,S)||!ll(I,j):!0}function mm(s,h,g,S){s=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==s&&Ff.enqueueReplaceState(h,h.state,null)}function _l(s,h){var g=h;if("ref"in h){g={};for(var S in h)S!=="ref"&&(g[S]=h[S])}if(s=s.defaultProps){g===h&&(g=z({},g));for(var I in s)g[I]===void 0&&(g[I]=s[I])}return g}function Uf(s){Ho(s)}function Rs(s){console.error(s)}function Ls(s){Ho(s)}function Co(s,h){try{var g=s.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function Vf(s,h,g){try{var S=s.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function Th(s,h,g){return g=os(g),g.tag=3,g.payload={element:null},g.callback=function(){Co(s,h)},g}function Eh(s){return s=os(s),s.tag=3,s}function Ah(s,h,g,S){var I=g.type.getDerivedStateFromError;if(typeof I=="function"){var j=S.value;s.payload=function(){return I(j)},s.callback=function(){Vf(h,g,S)}}var Q=g.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(s.callback=function(){Vf(h,g,S),typeof I!="function"&&(vu===null?vu=new Set([this]):vu.add(this));var ce=S.stack;this.componentDidCatch(S.value,{componentStack:ce!==null?ce:""})})}function gm(s,h,g,S,I){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=g.alternate,h!==null&&Ma(h,g,I,!0),g=jt.current,g!==null){switch(g.tag){case 31:case 13:return Ut===null?ap():g.alternate===null&&$n===0&&($n=3),g.flags&=-257,g.flags|=65536,g.lanes=I,S===Lt?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([S]):h.add(S),Um(s,S,I)),!1;case 22:return g.flags|=65536,S===Lt?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([S]):g.add(S)),Um(s,S,I)),!1}throw Error(l(435,g.tag))}return Um(s,S,I),ap(),!1}if(Sr)return h=jt.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=I,S!==bn&&(s=Error(l(422),{cause:S}),As(Ui(s,g)))):(S!==bn&&(h=Error(l(423),{cause:S}),As(Ui(h,g))),s=s.current.alternate,s.flags|=65536,I&=-I,s.lanes|=I,S=Ui(S,g),I=Th(s.stateNode,S,I),Ur(s,I),$n!==4&&($n=2)),!1;var j=Error(l(520),{cause:S});if(j=Ui(j,g),tp===null?tp=[j]:tp.push(j),$n!==4&&($n=2),h===null)return!0;S=Ui(S,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,s=I&-I,g.lanes|=s,s=Th(g.stateNode,S,s),Ur(g,s),!1;case 1:if(h=g.type,j=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(vu===null||!vu.has(j))))return g.flags|=65536,I&=-I,g.lanes|=I,I=Eh(I),Ah(I,s,g,S),Ur(g,I),!1}g=g.return}while(g!==null);return!1}var ym=Error(l(461)),di=!1;function Ti(s,h,g,S){h.child=s===null?jd(h,null,g,S):is(h,s.child,g,S)}function t_(s,h,g,S,I){g=g.render;var j=h.ref;if("ref"in S){var Q={};for(var ce in S)ce!=="ref"&&(Q[ce]=S[ce])}else Q=S;return Ps(h),S=sc(s,h,g,Q,j,I),ce=Sh(),s!==null&&!di?(yl(s,h,I),bl(s,h,I)):(Sr&&ce&&tu(h),h.flags|=1,Ti(s,h,S,I),h.child)}function vm(s,h,g,S,I){if(s===null){var j=g.type;return typeof j=="function"&&!Af(j)&&j.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=j,iy(s,h,j,S,I)):(s=Mf(g.type,null,S,h,h.mode,I),s.ref=h.ref,s.return=h,h.child=s)}if(j=s.child,!qd(s,I)){var Q=j.memoizedProps;if(g=g.compare,g=g!==null?g:ll,g(Q,S)&&s.ref===h.ref)return bl(s,h,I)}return h.flags|=1,s=Ea(j,S),s.ref=h.ref,s.return=h,h.child=s}function iy(s,h,g,S,I){if(s!==null){var j=s.memoizedProps;if(ll(j,S)&&s.ref===h.ref)if(di=!1,h.pendingProps=S=j,qd(s,I))(s.flags&131072)!==0&&(di=!0);else return h.lanes=s.lanes,bl(s,h,I)}return oy(s,h,g,S,I)}function ay(s,h,g,S){var I=S.children,j=s!==null?s.memoizedState:null;if(s===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(j=j!==null?j.baseLanes|g:g,s!==null){for(S=h.child=s.child,I=0;S!==null;)I=I|S.lanes|S.childLanes,S=S.sibling;S=I&~j}else S=0,h.child=null;return r_(s,h,j,g,S)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},s!==null&&zf(h,j!==null?j.cachePool:null),j!==null?Bd(h,j):Pa(),_h(h);else return S=h.lanes=536870912,r_(s,h,j!==null?j.baseLanes|g:g,g,S)}else j!==null?(zf(h,j.cachePool),Bd(h,j),Bn(),h.memoizedState=null):(s!==null&&zf(h,null),Pa(),Bn());return Ti(s,h,I,g),h.child}function xl(s,h){return s!==null&&s.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function r_(s,h,g,S,I){var j=If();return j=j===null?null:{parent:Nn._currentValue,pool:j},h.memoizedState={baseLanes:g,cachePool:j},s!==null&&zf(h,null),Pa(),_h(h),s!==null&&Ma(s,h,S,!0),h.childLanes=I,null}function hu(s,h){return h=Sm({mode:h.mode,children:h.children},s.mode),h.ref=s.ref,s.child=h,h.return=s,h}function Ud(s,h,g){return is(h,s.child,null,g),s=hu(h,h.pendingProps),s.flags|=2,wn(h),h.memoizedState=null,s}function _m(s,h,g){var S=h.pendingProps,I=(h.flags&128)!==0;if(h.flags&=-129,s===null){if(Sr){if(S.mode==="hidden")return s=hu(h,S),h.lanes=536870912,xl(null,s);if(oc(h),(s=Yr)?(s=xc(s,Aa),s=s!==null&&s.data==="&"?s:null,s!==null&&(h.memoizedState={dehydrated:s,treeContext:Wo!==null?{id:Xo,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},g=Cf(s),g.return=h,h.child=g,ci=h,Yr=null)):s=null,s===null)throw Ki(h);return h.lanes=536870912,null}return hu(h,S)}var j=s.memoizedState;if(j!==null){var Q=j.dehydrated;if(oc(h),I)if(h.flags&256)h.flags&=-257,h=Ud(s,h,g);else if(h.memoizedState!==null)h.child=s.child,h.flags|=128,h=null;else throw Error(l(558));else if(di||Ma(s,h,g,!1),I=(g&s.childLanes)!==0,di||I){if(S=vn,S!==null&&(Q=wi(S,g),Q!==0&&Q!==j.retryLane))throw j.retryLane=Q,Ka(s,Q),uo(S,s,Q),ym;ap(),h=Ud(s,h,g)}else s=j.treeContext,Yr=Oo(Q.nextSibling),ci=h,Sr=!0,Es=null,Aa=!1,s!==null&&kd(h,s),h=hu(h,S),h.flags|=4096;return h}return s=Ea(s.child,{mode:S.mode,children:S.children}),s.ref=h.ref,h.child=s,s.return=h,s}function xm(s,h){var g=h.ref;if(g===null)s!==null&&s.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(l(284));(s===null||s.ref!==g)&&(h.flags|=4194816)}}function oy(s,h,g,S,I){return Ps(h),g=sc(s,h,g,S,void 0,I),S=Sh(),s!==null&&!di?(yl(s,h,I),bl(s,h,I)):(Sr&&S&&tu(h),h.flags|=1,Ti(s,h,g,I),h.child)}function n_(s,h,g,S,I,j){return Ps(h),h.updateQueue=null,g=bh(h,S,g,I),lc(s),S=Sh(),s!==null&&!di?(yl(s,h,j),bl(s,h,j)):(Sr&&S&&tu(h),h.flags|=1,Ti(s,h,g,j),h.child)}function i_(s,h,g,S,I){if(Ps(h),h.stateNode===null){var j=pr,Q=g.contextType;typeof Q=="object"&&Q!==null&&(j=qn(Q)),j=new g(S,j),h.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Ff,h.stateNode=j,j._reactInternals=h,j=h.stateNode,j.props=S,j.state=h.memoizedState,j.refs={},jf(h),Q=g.contextType,j.context=typeof Q=="object"&&Q!==null?qn(Q):pr,j.state=h.memoizedState,Q=g.getDerivedStateFromProps,typeof Q=="function"&&(Bf(h,g,Q,S),j.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(Q=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),Q!==j.state&&Ff.enqueueReplaceState(j,j.state,null),gl(h,S,j,I),Os(),j.state=h.memoizedState),typeof j.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(s===null){j=h.stateNode;var ce=h.memoizedProps,ze=_l(g,ce);j.props=ze;var rt=j.context,gt=g.contextType;Q=pr,typeof gt=="object"&&gt!==null&&(Q=qn(gt));var St=g.getDerivedStateFromProps;gt=typeof St=="function"||typeof j.getSnapshotBeforeUpdate=="function",ce=h.pendingProps!==ce,gt||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ce||rt!==Q)&&mm(h,j,S,Q),as=!1;var nt=h.memoizedState;j.state=nt,gl(h,S,j,I),Os(),rt=h.memoizedState,ce||nt!==rt||as?(typeof St=="function"&&(Bf(h,g,St,S),rt=h.memoizedState),(ze=as||vl(h,g,ze,S,nt,rt,Q))?(gt||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=rt),j.props=S,j.state=rt,j.context=Q,S=ze):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{j=h.stateNode,gh(s,h),Q=h.memoizedProps,gt=_l(g,Q),j.props=gt,St=h.pendingProps,nt=j.context,rt=g.contextType,ze=pr,typeof rt=="object"&&rt!==null&&(ze=qn(rt)),ce=g.getDerivedStateFromProps,(rt=typeof ce=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Q!==St||nt!==ze)&&mm(h,j,S,ze),as=!1,nt=h.memoizedState,j.state=nt,gl(h,S,j,I),Os();var ut=h.memoizedState;Q!==St||nt!==ut||as||s!==null&&s.dependencies!==null&&rc(s.dependencies)?(typeof ce=="function"&&(Bf(h,g,ce,S),ut=h.memoizedState),(gt=as||vl(h,g,gt,S,nt,ut,ze)||s!==null&&s.dependencies!==null&&rc(s.dependencies))?(rt||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(S,ut,ze),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(S,ut,ze)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||Q===s.memoizedProps&&nt===s.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Q===s.memoizedProps&&nt===s.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=ut),j.props=S,j.state=ut,j.context=ze,S=gt):(typeof j.componentDidUpdate!="function"||Q===s.memoizedProps&&nt===s.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Q===s.memoizedProps&&nt===s.memoizedState||(h.flags|=1024),S=!1)}return j=S,xm(s,h),S=(h.flags&128)!==0,j||S?(j=h.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:j.render(),h.flags|=1,s!==null&&S?(h.child=is(h,s.child,null,I),h.child=is(h,null,g,I)):Ti(s,h,g,I),h.memoizedState=j.state,s=h.child):s=bl(s,h,I),s}function a_(s,h,g,S){return Ko(),h.flags|=256,Ti(s,h,g,S),h.child}var bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vd(s){return{baseLanes:s,cachePool:pm()}}function wm(s,h,g){return s=s!==null?s.childLanes&~g:0,h&&(s|=Vi),s}function sy(s,h,g){var S=h.pendingProps,I=!1,j=(h.flags&128)!==0,Q;if((Q=j)||(Q=s!==null&&s.memoizedState===null?!1:(On.current&2)!==0),Q&&(I=!0,h.flags&=-129),Q=(h.flags&32)!==0,h.flags&=-33,s===null){if(Sr){if(I?to(h):Bn(),(s=Yr)?(s=xc(s,Aa),s=s!==null&&s.data!=="&"?s:null,s!==null&&(h.memoizedState={dehydrated:s,treeContext:Wo!==null?{id:Xo,overflow:Yi}:null,retryLane:536870912,hydrationErrors:null},g=Cf(s),g.return=h,h.child=g,ci=h,Yr=null)):s=null,s===null)throw Ki(h);return Tn(s)?h.lanes=32:h.lanes=536870912,null}var ce=S.children;return S=S.fallback,I?(Bn(),I=h.mode,ce=Sm({mode:"hidden",children:ce},I),S=cl(S,I,g,null),ce.return=h,S.return=h,ce.sibling=S,h.child=ce,S=h.child,S.memoizedState=Vd(g),S.childLanes=wm(s,Q,g),h.memoizedState=bm,xl(null,S)):(to(h),ly(h,ce))}var ze=s.memoizedState;if(ze!==null&&(ce=ze.dehydrated,ce!==null)){if(j)h.flags&256?(to(h),h.flags&=-257,h=Tm(s,h,g)):h.memoizedState!==null?(Bn(),h.child=s.child,h.flags|=128,h=null):(Bn(),ce=S.fallback,I=h.mode,S=Sm({mode:"visible",children:S.children},I),ce=cl(ce,I,g,null),ce.flags|=2,S.return=h,ce.return=h,S.sibling=ce,h.child=S,is(h,s.child,null,g),S=h.child,S.memoizedState=Vd(g),S.childLanes=wm(s,Q,g),h.memoizedState=bm,h=xl(null,S));else if(to(h),Tn(ce)){if(Q=ce.nextSibling&&ce.nextSibling.dataset,Q)var rt=Q.dgst;Q=rt,S=Error(l(419)),S.stack="",S.digest=Q,As({value:S,source:null,stack:null}),h=Tm(s,h,g)}else if(di||Ma(s,h,g,!1),Q=(g&s.childLanes)!==0,di||Q){if(Q=vn,Q!==null&&(S=wi(Q,g),S!==0&&S!==ze.retryLane))throw ze.retryLane=S,Ka(s,S),uo(Q,s,S),ym;na(ce)||ap(),h=Tm(s,h,g)}else na(ce)?(h.flags|=192,h.child=s.child,h=null):(s=ze.treeContext,Yr=Oo(ce.nextSibling),ci=h,Sr=!0,Es=null,Aa=!1,s!==null&&kd(h,s),h=ly(h,S.children),h.flags|=4096);return h}return I?(Bn(),ce=S.fallback,I=h.mode,ze=s.child,rt=ze.sibling,S=Ea(ze,{mode:"hidden",children:S.children}),S.subtreeFlags=ze.subtreeFlags&65011712,rt!==null?ce=Ea(rt,ce):(ce=cl(ce,I,g,null),ce.flags|=2),ce.return=h,S.return=h,S.sibling=ce,h.child=S,xl(null,S),S=h.child,ce=s.child.memoizedState,ce===null?ce=Vd(g):(I=ce.cachePool,I!==null?(ze=Nn._currentValue,I=I.parent!==ze?{parent:ze,pool:ze}:I):I=pm(),ce={baseLanes:ce.baseLanes|g,cachePool:I}),S.memoizedState=ce,S.childLanes=wm(s,Q,g),h.memoizedState=bm,xl(s.child,S)):(to(h),g=s.child,s=g.sibling,g=Ea(g,{mode:"visible",children:S.children}),g.return=h,g.sibling=null,s!==null&&(Q=h.deletions,Q===null?(h.deletions=[s],h.flags|=16):Q.push(s)),h.child=g,h.memoizedState=null,g)}function ly(s,h){return h=Sm({mode:"visible",children:h},s.mode),h.return=s,s.child=h}function Sm(s,h){return s=Ta(22,s,null,h),s.lanes=0,s}function Tm(s,h,g){return is(h,s.child,null,g),s=ly(h,h.pendingProps.children),s.flags|=2,h.memoizedState=null,s}function uy(s,h,g){s.lanes|=h;var S=s.alternate;S!==null&&(S.lanes|=h),Pf(s.return,h,g)}function cy(s,h,g,S,I,j){var Q=s.memoizedState;Q===null?s.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:I,treeForkCount:j}:(Q.isBackwards=h,Q.rendering=null,Q.renderingStartTime=0,Q.last=S,Q.tail=g,Q.tailMode=I,Q.treeForkCount=j)}function Em(s,h,g){var S=h.pendingProps,I=S.revealOrder,j=S.tail;S=S.children;var Q=On.current,ce=(Q&2)!==0;if(ce?(Q=Q&1|2,h.flags|=128):Q&=1,Mt(On,Q),Ti(s,h,S,g),S=Sr?pl:0,!ce&&s!==null&&(s.flags&128)!==0)e:for(s=h.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&uy(s,g,h);else if(s.tag===19)uy(s,g,h);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===h)break e;for(;s.sibling===null;){if(s.return===null||s.return===h)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(I){case"forwards":for(g=h.child,I=null;g!==null;)s=g.alternate,s!==null&&xh(s)===null&&(I=g),g=g.sibling;g=I,g===null?(I=h.child,h.child=null):(I=g.sibling,g.sibling=null),cy(h,!1,I,g,j,S);break;case"backwards":case"unstable_legacy-backwards":for(g=null,I=h.child,h.child=null;I!==null;){if(s=I.alternate,s!==null&&xh(s)===null){h.child=I;break}s=I.sibling,I.sibling=g,g=I,I=s}cy(h,!0,g,null,j,S);break;case"together":cy(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function bl(s,h,g){if(s!==null&&(h.dependencies=s.dependencies),yu|=h.lanes,(g&h.childLanes)===0)if(s!==null){if(Ma(s,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(s!==null&&h.child!==s.child)throw Error(l(153));if(h.child!==null){for(s=h.child,g=Ea(s,s.pendingProps),h.child=g,g.return=h;s.sibling!==null;)s=s.sibling,g=g.sibling=Ea(s,s.pendingProps),g.return=h;g.sibling=null}return h.child}function qd(s,h){return(s.lanes&h)!==0?!0:(s=s.dependencies,!!(s!==null&&rc(s)))}function Gd(s,h,g){switch(h.tag){case 3:Ar(h,h.stateNode.containerInfo),Cs(h,Nn,s.memoizedState.cache),Ko();break;case 27:case 5:or(h);break;case 4:Ar(h,h.stateNode.containerInfo);break;case 10:Cs(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,oc(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(to(h),h.flags|=128,null):(g&h.child.childLanes)!==0?sy(s,h,g):(to(h),s=bl(s,h,g),s!==null?s.sibling:null);to(h);break;case 19:var I=(s.flags&128)!==0;if(S=(g&h.childLanes)!==0,S||(Ma(s,h,g,!1),S=(g&h.childLanes)!==0),I){if(S)return Em(s,h,g);h.flags|=128}if(I=h.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Mt(On,On.current),S)break;return null;case 22:return h.lanes=0,ay(s,h,g,h.pendingProps);case 24:Cs(h,Nn,s.memoizedState.cache)}return bl(s,h,g)}function ra(s,h,g){if(s!==null)if(s.memoizedProps!==h.pendingProps)di=!0;else{if(!qd(s,g)&&(h.flags&128)===0)return di=!1,Gd(s,h,g);di=(s.flags&131072)!==0}else di=!1,Sr&&(h.flags&1048576)!==0&&zd(h,pl,h.index);switch(h.lanes=0,h.tag){case 16:e:{var S=h.pendingProps;if(s=Ja(h.elementType),h.type=s,typeof s=="function")Af(s)?(S=_l(s,S),h.tag=1,h=i_(null,h,s,S,g)):(h.tag=0,h=oy(null,h,s,S,g));else{if(s!=null){var I=s.$$typeof;if(I===Te){h.tag=11,h=t_(null,h,s,S,g);break e}else if(I===Re){h.tag=14,h=vm(null,h,s,S,g);break e}}throw h=Ue(s)||s,Error(l(306,h,""))}}return h;case 0:return oy(s,h,h.type,h.pendingProps,g);case 1:return S=h.type,I=_l(S,h.pendingProps),i_(s,h,S,I,g);case 3:e:{if(Ar(h,h.stateNode.containerInfo),s===null)throw Error(l(387));S=h.pendingProps;var j=h.memoizedState;I=j.element,gh(s,h),gl(h,S,null,g);var Q=h.memoizedState;if(S=Q.cache,Cs(h,Nn,S),S!==j.cache&&Df(h,[Nn],g,!0),Os(),S=Q.element,j.isDehydrated)if(j={element:S,isDehydrated:!1,cache:Q.cache},h.updateQueue.baseState=j,h.memoizedState=j,h.flags&256){h=a_(s,h,S,g);break e}else if(S!==I){I=Ui(Error(l(424)),h),As(I),h=a_(s,h,S,g);break e}else for(s=h.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Yr=Oo(s.firstChild),ci=h,Sr=!0,Es=null,Aa=!0,g=jd(h,null,S,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ko(),S===I){h=bl(s,h,g);break e}Ti(s,h,S,g)}h=h.child}return h;case 26:return xm(s,h),s===null?(g=Vy(h.type,null,h.pendingProps,null))?h.memoizedState=g:Sr||(g=h.type,s=h.pendingProps,S=hp(Yt.current).createElement(g),S[Fr]=h,S[At]=s,Ai(S,g,s),Cn(S),h.stateNode=S):h.memoizedState=Vy(h.type,s.memoizedProps,h.pendingProps,s.memoizedState),null;case 27:return or(h),s===null&&Sr&&(S=h.stateNode=B_(h.type,h.pendingProps,Yt.current),ci=h,Aa=!0,I=Yr,_c(h.type)?(Ra=I,Yr=Oo(S.firstChild)):Yr=I),Ti(s,h,h.pendingProps.children,g),xm(s,h),s===null&&(h.flags|=4194304),h.child;case 5:return s===null&&Sr&&((I=S=Yr)&&(S=Di(S,h.type,h.pendingProps,Aa),S!==null?(h.stateNode=S,ci=h,Yr=Oo(S.firstChild),Aa=!1,I=!0):I=!1),I||Ki(h)),or(h),I=h.type,j=h.pendingProps,Q=s!==null?s.memoizedProps:null,S=j.children,Qm(I,j)?S=null:Q!==null&&Qm(I,Q)&&(h.flags|=32),h.memoizedState!==null&&(I=sc(s,h,wh,null,null,g),xp._currentValue=I),xm(s,h),Ti(s,h,S,g),h.child;case 6:return s===null&&Sr&&((s=g=Yr)&&(g=Fs(g,h.pendingProps,Aa),g!==null?(h.stateNode=g,ci=h,Yr=null,s=!0):s=!1),s||Ki(h)),null;case 13:return sy(s,h,g);case 4:return Ar(h,h.stateNode.containerInfo),S=h.pendingProps,s===null?h.child=is(h,null,S,g):Ti(s,h,S,g),h.child;case 11:return t_(s,h,h.type,h.pendingProps,g);case 7:return Ti(s,h,h.pendingProps,g),h.child;case 8:return Ti(s,h,h.pendingProps.children,g),h.child;case 12:return Ti(s,h,h.pendingProps.children,g),h.child;case 10:return S=h.pendingProps,Cs(h,h.type,S.value),Ti(s,h,S.children,g),h.child;case 9:return I=h.type._context,S=h.pendingProps.children,Ps(h),I=qn(I),S=S(I),h.flags|=1,Ti(s,h,S,g),h.child;case 14:return vm(s,h,h.type,h.pendingProps,g);case 15:return iy(s,h,h.type,h.pendingProps,g);case 19:return Em(s,h,g);case 31:return _m(s,h,g);case 22:return ay(s,h,g,h.pendingProps);case 24:return Ps(h),S=qn(Nn),s===null?(I=If(),I===null&&(I=vn,j=ts(),I.pooledCache=j,j.refCount++,j!==null&&(I.pooledCacheLanes|=g),I=j),h.memoizedState={parent:S,cache:I},jf(h),Cs(h,Nn,I)):((s.lanes&g)!==0&&(gh(s,h),gl(h,null,null,g),Os()),I=s.memoizedState,j=h.memoizedState,I.parent!==S?(I={parent:S,cache:S},h.memoizedState=I,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=I),Cs(h,Nn,S)):(S=j.cache,Cs(h,Nn,S),S!==I.cache&&Df(h,[Nn],g,!0))),Ti(s,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(l(156,h.tag))}function wl(s){s.flags|=4}function $d(s,h,g,S,I){if((h=(s.mode&32)!==0)&&(h=!1),h){if(s.flags|=16777216,(I&335544128)===I)if(s.stateNode.complete)s.flags|=8192;else if(wy())s.flags|=8192;else throw wo=Lt,ml}else s.flags&=-16777217}function o_(s,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!lg(h))if(wy())s.flags|=8192;else throw wo=Lt,ml}function Zd(s,h){h!==null&&(s.flags|=4),s.flags&16384&&(h=s.tag!==22?Qt():536870912,s.lanes|=h,Oh|=h)}function Hd(s,h){if(!Sr)switch(s.tailMode){case"hidden":h=s.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||s.tail===null?s.tail=null:s.tail.sibling=null:S.sibling=null}}function kn(s){var h=s.alternate!==null&&s.alternate.child===s.child,g=0,S=0;if(h)for(var I=s.child;I!==null;)g|=I.lanes|I.childLanes,S|=I.subtreeFlags&65011712,S|=I.flags&65011712,I.return=s,I=I.sibling;else for(I=s.child;I!==null;)g|=I.lanes|I.childLanes,S|=I.subtreeFlags,S|=I.flags,I.return=s,I=I.sibling;return s.subtreeFlags|=S,s.childLanes=g,h}function s_(s,h,g){var S=h.pendingProps;switch(tc(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(h),null;case 1:return kn(h),null;case 3:return g=h.stateNode,S=null,s!==null&&(S=s.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),es(Nn),mt(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Yo(h)?wl(h):s===null||s.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,Qo())),kn(h),null;case 26:var I=h.type,j=h.memoizedState;return s===null?(wl(h),j!==null?(kn(h),o_(h,j)):(kn(h),$d(h,I,null,S,g))):j?j!==s.memoizedState?(wl(h),kn(h),o_(h,j)):(kn(h),h.flags&=-16777217):(s=s.memoizedProps,s!==S&&wl(h),kn(h),$d(h,I,s,S,g)),null;case 27:if(mr(h),g=Yt.current,I=h.type,s!==null&&h.stateNode!=null)s.memoizedProps!==S&&wl(h);else{if(!S){if(h.stateNode===null)throw Error(l(166));return kn(h),null}s=zt.current,Yo(h)?Qi(h):(s=B_(I,S,g),h.stateNode=s,wl(h))}return kn(h),null;case 5:if(mr(h),I=h.type,s!==null&&h.stateNode!=null)s.memoizedProps!==S&&wl(h);else{if(!S){if(h.stateNode===null)throw Error(l(166));return kn(h),null}if(j=zt.current,Yo(h))Qi(h);else{var Q=hp(Yt.current);switch(j){case 1:j=Q.createElementNS("http://www.w3.org/2000/svg",I);break;case 2:j=Q.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;default:switch(I){case"svg":j=Q.createElementNS("http://www.w3.org/2000/svg",I);break;case"math":j=Q.createElementNS("http://www.w3.org/1998/Math/MathML",I);break;case"script":j=Q.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof S.is=="string"?Q.createElement("select",{is:S.is}):Q.createElement("select"),S.multiple?j.multiple=!0:S.size&&(j.size=S.size);break;default:j=typeof S.is=="string"?Q.createElement(I,{is:S.is}):Q.createElement(I)}}j[Fr]=h,j[At]=S;e:for(Q=h.child;Q!==null;){if(Q.tag===5||Q.tag===6)j.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===h)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===h)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}h.stateNode=j;e:switch(Ai(j,I,S),I){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&wl(h)}}return kn(h),$d(h,h.type,s===null?null:s.memoizedProps,h.pendingProps,g),null;case 6:if(s&&h.stateNode!=null)s.memoizedProps!==S&&wl(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(l(166));if(s=Yt.current,Yo(h)){if(s=h.stateNode,g=h.memoizedProps,S=null,I=ci,I!==null)switch(I.tag){case 27:case 5:S=I.memoizedProps}s[Fr]=h,s=!!(s.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||ky(s.nodeValue,g)),s||Ki(h,!0)}else s=hp(s).createTextNode(S),s[Fr]=h,h.stateNode=s}return kn(h),null;case 31:if(g=h.memoizedState,s===null||s.memoizedState!==null){if(S=Yo(h),g!==null){if(s===null){if(!S)throw Error(l(318));if(s=h.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(l(557));s[Fr]=h}else Ko(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;kn(h),s=!1}else g=Qo(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),s=!0;if(!s)return h.flags&256?(wn(h),h):(wn(h),null);if((h.flags&128)!==0)throw Error(l(558))}return kn(h),null;case 13:if(S=h.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I=Yo(h),S!==null&&S.dehydrated!==null){if(s===null){if(!I)throw Error(l(318));if(I=h.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(l(317));I[Fr]=h}else Ko(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;kn(h),I=!1}else I=Qo(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=I),I=!0;if(!I)return h.flags&256?(wn(h),h):(wn(h),null)}return wn(h),(h.flags&128)!==0?(h.lanes=g,h):(g=S!==null,s=s!==null&&s.memoizedState!==null,g&&(S=h.child,I=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(I=S.alternate.memoizedState.cachePool.pool),j=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(j=S.memoizedState.cachePool.pool),j!==I&&(S.flags|=2048)),g!==s&&g&&(h.child.flags|=8192),Zd(h,h.updateQueue),kn(h),null);case 4:return mt(),s===null&&Iy(h.stateNode.containerInfo),kn(h),null;case 10:return es(h.type),kn(h),null;case 19:if(lt(On),S=h.memoizedState,S===null)return kn(h),null;if(I=(h.flags&128)!==0,j=S.rendering,j===null)if(I)Hd(S,!1);else{if($n!==0||s!==null&&(s.flags&128)!==0)for(s=h.child;s!==null;){if(j=xh(s),j!==null){for(h.flags|=128,Hd(S,!1),s=j.updateQueue,h.updateQueue=s,Zd(h,s),h.subtreeFlags=0,s=g,g=h.child;g!==null;)fm(g,s),g=g.sibling;return Mt(On,On.current&1|2),Sr&&Ts(h,S.treeForkCount),h.child}s=s.sibling}S.tail!==null&&ri()>rp&&(h.flags|=128,I=!0,Hd(S,!1),h.lanes=4194304)}else{if(!I)if(s=xh(j),s!==null){if(h.flags|=128,I=!0,s=s.updateQueue,h.updateQueue=s,Zd(h,s),Hd(S,!0),S.tail===null&&S.tailMode==="hidden"&&!j.alternate&&!Sr)return kn(h),null}else 2*ri()-S.renderingStartTime>rp&&g!==536870912&&(h.flags|=128,I=!0,Hd(S,!1),h.lanes=4194304);S.isBackwards?(j.sibling=h.child,h.child=j):(s=S.last,s!==null?s.sibling=j:h.child=j,S.last=j)}return S.tail!==null?(s=S.tail,S.rendering=s,S.tail=s.sibling,S.renderingStartTime=ri(),s.sibling=null,g=On.current,Mt(On,I?g&1|2:g&1),Sr&&Ts(h,S.treeForkCount),s):(kn(h),null);case 22:case 23:return wn(h),au(),S=h.memoizedState!==null,s!==null?s.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(g&536870912)!==0&&(h.flags&128)===0&&(kn(h),h.subtreeFlags&6&&(h.flags|=8192)):kn(h),g=h.updateQueue,g!==null&&Zd(h,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==g&&(h.flags|=2048),s!==null&&lt(xo),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),es(Nn),kn(h),null;case 25:return null;case 30:return null}throw Error(l(156,h.tag))}function db(s,h){switch(tc(h),h.tag){case 1:return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 3:return es(Nn),mt(),s=h.flags,(s&65536)!==0&&(s&128)===0?(h.flags=s&-65537|128,h):null;case 26:case 27:case 5:return mr(h),null;case 31:if(h.memoizedState!==null){if(wn(h),h.alternate===null)throw Error(l(340));Ko()}return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 13:if(wn(h),s=h.memoizedState,s!==null&&s.dehydrated!==null){if(h.alternate===null)throw Error(l(340));Ko()}return s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 19:return lt(On),null;case 4:return mt(),null;case 10:return es(h.type),null;case 22:case 23:return wn(h),au(),s!==null&&lt(xo),s=h.flags,s&65536?(h.flags=s&-65537|128,h):null;case 24:return es(Nn),null;case 25:return null;default:return null}}function Am(s,h){switch(tc(h),h.tag){case 3:es(Nn),mt();break;case 26:case 27:case 5:mr(h);break;case 4:mt();break;case 31:h.memoizedState!==null&&wn(h);break;case 13:wn(h);break;case 19:lt(On);break;case 10:es(h.type);break;case 22:case 23:wn(h),au(),s!==null&&lt(xo);break;case 24:es(Nn)}}function qf(s,h){try{var g=h.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var I=S.next;g=I;do{if((g.tag&s)===s){S=void 0;var j=g.create,Q=g.inst;S=j(),Q.destroy=S}g=g.next}while(g!==I)}}catch(ce){en(h,h.return,ce)}}function fu(s,h,g){try{var S=h.updateQueue,I=S!==null?S.lastEffect:null;if(I!==null){var j=I.next;S=j;do{if((S.tag&s)===s){var Q=S.inst,ce=Q.destroy;if(ce!==void 0){Q.destroy=void 0,I=h;var ze=g,rt=ce;try{rt()}catch(gt){en(I,ze,gt)}}}S=S.next}while(S!==j)}}catch(gt){en(h,h.return,gt)}}function l_(s){var h=s.updateQueue;if(h!==null){var g=s.stateNode;try{Nf(h,g)}catch(S){en(s,s.return,S)}}}function u_(s,h,g){g.props=_l(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(S){en(s,h,S)}}function Wd(s,h){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var S=s.stateNode;break;case 30:S=s.stateNode;break;default:S=s.stateNode}typeof g=="function"?s.refCleanup=g(S):g.current=S}}catch(I){en(s,h,I)}}function Po(s,h){var g=s.ref,S=s.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(I){en(s,h,I)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(I){en(s,h,I)}else g.current=null}function Mm(s){var h=s.type,g=s.memoizedProps,S=s.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break e;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(I){en(s,s.return,I)}}function Cm(s,h,g){try{var S=s.stateNode;j_(S,s.type,g,h),S[At]=h}catch(I){en(s,s.return,I)}}function hc(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&_c(s.type)||s.tag===4}function Mh(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||hc(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&_c(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function hy(s,h,g){var S=s.tag;if(S===5||S===6)s=s.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(s),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=vo));else if(S!==4&&(S===27&&_c(s.type)&&(g=s.stateNode,h=null),s=s.child,s!==null))for(hy(s,h,g),s=s.sibling;s!==null;)hy(s,h,g),s=s.sibling}function Pm(s,h,g){var S=s.tag;if(S===5||S===6)s=s.stateNode,h?g.insertBefore(s,h):g.appendChild(s);else if(S!==4&&(S===27&&_c(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(Pm(s,h,g),s=s.sibling;s!==null;)Pm(s,h,g),s=s.sibling}function c_(s){var h=s.stateNode,g=s.memoizedProps;try{for(var S=s.type,I=h.attributes;I.length;)h.removeAttributeNode(I[0]);Ai(h,S,g),h[Fr]=s,h[At]=g}catch(j){en(s,s.return,j)}}var du=!1,pi=!1,fy=!1,h_=typeof WeakSet=="function"?WeakSet:Set,mi=null;function pb(s,h){if(s=s.containerInfo,cp=wc,s=xf(s),nh(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var I=S.anchorOffset,j=S.focusNode;S=S.focusOffset;try{g.nodeType,j.nodeType}catch{g=null;break e}var Q=0,ce=-1,ze=-1,rt=0,gt=0,St=s,nt=null;t:for(;;){for(var ut;St!==g||I!==0&&St.nodeType!==3||(ce=Q+I),St!==j||S!==0&&St.nodeType!==3||(ze=Q+S),St.nodeType===3&&(Q+=St.nodeValue.length),(ut=St.firstChild)!==null;)nt=St,St=ut;for(;;){if(St===s)break t;if(nt===g&&++rt===I&&(ce=Q),nt===j&&++gt===S&&(ze=Q),(ut=St.nextSibling)!==null)break;St=nt,nt=St.parentNode}St=ut}g=ce===-1||ze===-1?null:{start:ce,end:ze}}else g=null}g=g||{start:0,end:0}}else g=null;for(Ry={focusedElem:s,selectionRange:g},wc=!1,mi=h;mi!==null;)if(h=mi,s=h.child,(h.subtreeFlags&1028)!==0&&s!==null)s.return=h,mi=s;else for(;mi!==null;){switch(h=mi,j=h.alternate,s=h.flags,h.tag){case 0:if((s&4)!==0&&(s=h.updateQueue,s=s!==null?s.events:null,s!==null))for(g=0;g<s.length;g++)I=s[g],I.ref.impl=I.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&j!==null){s=void 0,g=h,I=j.memoizedProps,j=j.memoizedState,S=g.stateNode;try{var $t=_l(g.type,I);s=S.getSnapshotBeforeUpdate($t,j),S.__reactInternalSnapshotBeforeUpdate=s}catch(lr){en(g,g.return,lr)}}break;case 3:if((s&1024)!==0){if(s=h.stateNode.containerInfo,g=s.nodeType,g===9)El(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":El(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(l(163))}if(s=h.sibling,s!==null){s.return=h.return,mi=s;break}mi=h.return}}function dy(s,h,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:oo(s,g),S&4&&qf(5,g);break;case 1:if(oo(s,g),S&4)if(s=g.stateNode,h===null)try{s.componentDidMount()}catch(Q){en(g,g.return,Q)}else{var I=_l(g.type,h.memoizedProps);h=h.memoizedState;try{s.componentDidUpdate(I,h,s.__reactInternalSnapshotBeforeUpdate)}catch(Q){en(g,g.return,Q)}}S&64&&l_(g),S&512&&Wd(g,g.return);break;case 3:if(oo(s,g),S&64&&(s=g.updateQueue,s!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{Nf(s,h)}catch(Q){en(g,g.return,Q)}}break;case 27:h===null&&S&4&&c_(g);case 26:case 5:oo(s,g),h===null&&S&4&&Mm(g),S&512&&Wd(g,g.return);break;case 12:oo(s,g);break;case 31:oo(s,g),S&4&&Xd(s,g);break;case 13:oo(s,g),S&4&&Yd(s,g),S&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=Ty.bind(null,g),yi(s,g))));break;case 22:if(S=g.memoizedState!==null||du,!S){h=h!==null&&h.memoizedState!==null||pi,I=du;var j=pi;du=S,(pi=h)&&!j?pu(s,g,(g.subtreeFlags&8772)!==0):oo(s,g),du=I,pi=j}break;case 30:break;default:oo(s,g)}}function Gf(s){var h=s.alternate;h!==null&&(s.alternate=null,Gf(h)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(h=s.stateNode,h!==null&&Bl(h)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Fn=null,zr=!1;function ao(s,h,g){for(g=g.child;g!==null;)py(s,h,g),g=g.sibling}function py(s,h,g){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(ne,g)}catch{}switch(g.tag){case 26:pi||Po(g,h),ao(s,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:pi||Po(g,h);var S=Fn,I=zr;_c(g.type)&&(Fn=g.stateNode,zr=!1),ao(s,h,g),fp(g.stateNode),Fn=S,zr=I;break;case 5:pi||Po(g,h);case 6:if(S=Fn,I=zr,Fn=null,ao(s,h,g),Fn=S,zr=I,Fn!==null)if(zr)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(g.stateNode)}catch(j){en(g,h,j)}else try{Fn.removeChild(g.stateNode)}catch(j){en(g,h,j)}break;case 18:Fn!==null&&(zr?(s=Fn,N_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),od(s)):N_(Fn,g.stateNode));break;case 4:S=Fn,I=zr,Fn=g.stateNode.containerInfo,zr=!0,ao(s,h,g),Fn=S,zr=I;break;case 0:case 11:case 14:case 15:fu(2,g,h),pi||fu(4,g,h),ao(s,h,g);break;case 1:pi||(Po(g,h),S=g.stateNode,typeof S.componentWillUnmount=="function"&&u_(g,h,S)),ao(s,h,g);break;case 21:ao(s,h,g);break;case 22:pi=(S=pi)||g.memoizedState!==null,ao(s,h,g),pi=S;break;default:ao(s,h,g)}}function Xd(s,h){if(h.memoizedState===null&&(s=h.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{od(s)}catch(g){en(h,h.return,g)}}}function Yd(s,h){if(h.memoizedState===null&&(s=h.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{od(s)}catch(g){en(h,h.return,g)}}function Kd(s){switch(s.tag){case 31:case 13:case 19:var h=s.stateNode;return h===null&&(h=s.stateNode=new h_),h;case 22:return s=s.stateNode,h=s._retryCache,h===null&&(h=s._retryCache=new h_),h;default:throw Error(l(435,s.tag))}}function Qd(s,h){var g=Kd(s);h.forEach(function(S){if(!g.has(S)){g.add(S);var I=yb.bind(null,s,S);S.then(I,I)}})}function Oa(s,h){var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var I=g[S],j=s,Q=h,ce=Q;e:for(;ce!==null;){switch(ce.tag){case 27:if(_c(ce.type)){Fn=ce.stateNode,zr=!1;break e}break;case 5:Fn=ce.stateNode,zr=!1;break e;case 3:case 4:Fn=ce.stateNode.containerInfo,zr=!0;break e}ce=ce.return}if(Fn===null)throw Error(l(160));py(j,Q,I),Fn=null,zr=!1,j=I.alternate,j!==null&&(j.return=null),I.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Dm(h,s),h=h.sibling}var Ia=null;function Dm(s,h){var g=s.alternate,S=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Oa(h,s),Ei(s),S&4&&(fu(3,s,s.return),qf(3,s),fu(5,s,s.return));break;case 1:Oa(h,s),Ei(s),S&512&&(pi||g===null||Po(g,g.return)),S&64&&du&&(s=s.updateQueue,s!==null&&(S=s.callbacks,S!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var I=Ia;if(Oa(h,s),Ei(s),S&512&&(pi||g===null||Po(g,g.return)),S&4){var j=g!==null?g.memoizedState:null;if(S=s.memoizedState,g===null)if(S===null)if(s.stateNode===null){e:{S=s.type,g=s.memoizedProps,I=I.ownerDocument||I;t:switch(S){case"title":j=I.getElementsByTagName("title")[0],(!j||j[hr]||j[Fr]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=I.createElement(S),I.head.insertBefore(j,I.querySelector("head > title"))),Ai(j,S,g),j[Fr]=s,Cn(j),S=j;break e;case"link":var Q=pp("link","href",I).get(S+(g.href||""));if(Q){for(var ce=0;ce<Q.length;ce++)if(j=Q[ce],j.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&j.getAttribute("rel")===(g.rel==null?null:g.rel)&&j.getAttribute("title")===(g.title==null?null:g.title)&&j.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){Q.splice(ce,1);break t}}j=I.createElement(S),Ai(j,S,g),I.head.appendChild(j);break;case"meta":if(Q=pp("meta","content",I).get(S+(g.content||""))){for(ce=0;ce<Q.length;ce++)if(j=Q[ce],j.getAttribute("content")===(g.content==null?null:""+g.content)&&j.getAttribute("name")===(g.name==null?null:g.name)&&j.getAttribute("property")===(g.property==null?null:g.property)&&j.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&j.getAttribute("charset")===(g.charSet==null?null:g.charSet)){Q.splice(ce,1);break t}}j=I.createElement(S),Ai(j,S,g),I.head.appendChild(j);break;default:throw Error(l(468,S))}j[Fr]=s,Cn(j),S=j}s.stateNode=S}else mp(I,s.type,s.stateNode);else s.stateNode=Lh(I,S,s.memoizedProps);else j!==S?(j===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):j.count--,S===null?mp(I,s.type,s.stateNode):Lh(I,S,s.memoizedProps)):S===null&&s.stateNode!==null&&Cm(s,s.memoizedProps,g.memoizedProps)}break;case 27:Oa(h,s),Ei(s),S&512&&(pi||g===null||Po(g,g.return)),g!==null&&S&4&&Cm(s,s.memoizedProps,g.memoizedProps);break;case 5:if(Oa(h,s),Ei(s),S&512&&(pi||g===null||Po(g,g.return)),s.flags&32){I=s.stateNode;try{ws(I,"")}catch($t){en(s,s.return,$t)}}S&4&&s.stateNode!=null&&(I=s.memoizedProps,Cm(s,I,g!==null?g.memoizedProps:I)),S&1024&&(fy=!0);break;case 6:if(Oa(h,s),Ei(s),S&4){if(s.stateNode===null)throw Error(l(162));S=s.memoizedProps,g=s.stateNode;try{g.nodeValue=S}catch($t){en(s,s.return,$t)}}break;case 3:if(dp=null,I=Ia,Ia=bu(h.containerInfo),Oa(h,s),Ia=I,Ei(s),S&4&&g!==null&&g.memoizedState.isDehydrated)try{od(h.containerInfo)}catch($t){en(s,s.return,$t)}fy&&(fy=!1,Jd(s));break;case 4:S=Ia,Ia=bu(s.stateNode.containerInfo),Oa(h,s),Ei(s),Ia=S;break;case 12:Oa(h,s),Ei(s);break;case 31:Oa(h,s),Ei(s),S&4&&(S=s.updateQueue,S!==null&&(s.updateQueue=null,Qd(s,S)));break;case 13:Oa(h,s),Ei(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(zm=ri()),S&4&&(S=s.updateQueue,S!==null&&(s.updateQueue=null,Qd(s,S)));break;case 22:I=s.memoizedState!==null;var ze=g!==null&&g.memoizedState!==null,rt=du,gt=pi;if(du=rt||I,pi=gt||ze,Oa(h,s),pi=gt,du=rt,Ei(s),S&8192)e:for(h=s.stateNode,h._visibility=I?h._visibility&-2:h._visibility|1,I&&(g===null||ze||du||pi||js(s)),g=null,h=s;;){if(h.tag===5||h.tag===26){if(g===null){ze=g=h;try{if(j=ze.stateNode,I)Q=j.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{ce=ze.stateNode;var St=ze.memoizedProps.style,nt=St!=null&&St.hasOwnProperty("display")?St.display:null;ce.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch($t){en(ze,ze.return,$t)}}}else if(h.tag===6){if(g===null){ze=h;try{ze.stateNode.nodeValue=I?"":ze.memoizedProps}catch($t){en(ze,ze.return,$t)}}}else if(h.tag===18){if(g===null){ze=h;try{var ut=ze.stateNode;I?qr(ut,!0):qr(ze.stateNode,!1)}catch($t){en(ze,ze.return,$t)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===s)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=s.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Qd(s,g))));break;case 19:Oa(h,s),Ei(s),S&4&&(S=s.updateQueue,S!==null&&(s.updateQueue=null,Qd(s,S)));break;case 30:break;case 21:break;default:Oa(h,s),Ei(s)}}function Ei(s){var h=s.flags;if(h&2){try{for(var g,S=s.return;S!==null;){if(hc(S)){g=S;break}S=S.return}if(g==null)throw Error(l(160));switch(g.tag){case 27:var I=g.stateNode,j=Mh(s);Pm(s,j,I);break;case 5:var Q=g.stateNode;g.flags&32&&(ws(Q,""),g.flags&=-33);var ce=Mh(s);Pm(s,ce,Q);break;case 3:case 4:var ze=g.stateNode.containerInfo,rt=Mh(s);hy(s,rt,ze);break;default:throw Error(l(161))}}catch(gt){en(s,s.return,gt)}s.flags&=-3}h&4096&&(s.flags&=-4097)}function Jd(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var h=s;Jd(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),s=s.sibling}}function oo(s,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)dy(s,h.alternate,h),h=h.sibling}function js(s){for(s=s.child;s!==null;){var h=s;switch(h.tag){case 0:case 11:case 14:case 15:fu(4,h,h.return),js(h);break;case 1:Po(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&u_(h,h.return,g),js(h);break;case 27:fp(h.stateNode);case 26:case 5:Po(h,h.return),js(h);break;case 22:h.memoizedState===null&&js(h);break;case 30:js(h);break;default:js(h)}s=s.sibling}}function pu(s,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,I=s,j=h,Q=j.flags;switch(j.tag){case 0:case 11:case 15:pu(I,j,g),qf(4,j);break;case 1:if(pu(I,j,g),S=j,I=S.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(rt){en(S,S.return,rt)}if(S=j,I=S.updateQueue,I!==null){var ce=S.stateNode;try{var ze=I.shared.hiddenCallbacks;if(ze!==null)for(I.shared.hiddenCallbacks=null,I=0;I<ze.length;I++)yh(ze[I],ce)}catch(rt){en(S,S.return,rt)}}g&&Q&64&&l_(j),Wd(j,j.return);break;case 27:c_(j);case 26:case 5:pu(I,j,g),g&&S===null&&Q&4&&Mm(j),Wd(j,j.return);break;case 12:pu(I,j,g);break;case 31:pu(I,j,g),g&&Q&4&&Xd(I,j);break;case 13:pu(I,j,g),g&&Q&4&&Yd(I,j);break;case 22:j.memoizedState===null&&pu(I,j,g),Wd(j,j.return);break;case 30:break;default:pu(I,j,g)}h=h.sibling}}function Om(s,h){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(s=h.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&nc(g))}function mu(s,h){s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&nc(s))}function Ns(s,h,g,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)my(s,h,g,S),h=h.sibling}function my(s,h,g,S){var I=h.flags;switch(h.tag){case 0:case 11:case 15:Ns(s,h,g,S),I&2048&&qf(9,h);break;case 1:Ns(s,h,g,S);break;case 3:Ns(s,h,g,S),I&2048&&(s=null,h.alternate!==null&&(s=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==s&&(h.refCount++,s!=null&&nc(s)));break;case 12:if(I&2048){Ns(s,h,g,S),s=h.stateNode;try{var j=h.memoizedProps,Q=j.id,ce=j.onPostCommit;typeof ce=="function"&&ce(Q,h.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ze){en(h,h.return,ze)}}else Ns(s,h,g,S);break;case 31:Ns(s,h,g,S);break;case 13:Ns(s,h,g,S);break;case 23:break;case 22:j=h.stateNode,Q=h.alternate,h.memoizedState!==null?j._visibility&2?Ns(s,h,g,S):Ch(s,h):j._visibility&2?Ns(s,h,g,S):(j._visibility|=2,Sl(s,h,g,S,(h.subtreeFlags&10256)!==0||!1)),I&2048&&Om(Q,h);break;case 24:Ns(s,h,g,S),I&2048&&mu(h.alternate,h);break;default:Ns(s,h,g,S)}}function Sl(s,h,g,S,I){for(I=I&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var j=s,Q=h,ce=g,ze=S,rt=Q.flags;switch(Q.tag){case 0:case 11:case 15:Sl(j,Q,ce,ze,I),qf(8,Q);break;case 23:break;case 22:var gt=Q.stateNode;Q.memoizedState!==null?gt._visibility&2?Sl(j,Q,ce,ze,I):Ch(j,Q):(gt._visibility|=2,Sl(j,Q,ce,ze,I)),I&&rt&2048&&Om(Q.alternate,Q);break;case 24:Sl(j,Q,ce,ze,I),I&&rt&2048&&mu(Q.alternate,Q);break;default:Sl(j,Q,ce,ze,I)}h=h.sibling}}function Ch(s,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=s,S=h,I=S.flags;switch(S.tag){case 22:Ch(g,S),I&2048&&Om(S.alternate,S);break;case 24:Ch(g,S),I&2048&&mu(S.alternate,S);break;default:Ch(g,S)}h=h.sibling}}var $f=8192;function Ph(s,h,g){if(s.subtreeFlags&$f)for(s=s.child;s!==null;)f_(s,h,g),s=s.sibling}function f_(s,h,g){switch(s.tag){case 26:Ph(s,h,g),s.flags&$f&&s.memoizedState!==null&&$y(g,Ia,s.memoizedState,s.memoizedProps);break;case 5:Ph(s,h,g);break;case 3:case 4:var S=Ia;Ia=bu(s.stateNode.containerInfo),Ph(s,h,g),Ia=S;break;case 22:s.memoizedState===null&&(S=s.alternate,S!==null&&S.memoizedState!==null?(S=$f,$f=16777216,Ph(s,h,g),$f=S):Ph(s,h,g));break;default:Ph(s,h,g)}}function d_(s){var h=s.alternate;if(h!==null&&(s=h.child,s!==null)){h.child=null;do h=s.sibling,s.sibling=null,s=h;while(s!==null)}}function ep(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];mi=S,Zf(S,s)}d_(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)p_(s),s=s.sibling}function p_(s){switch(s.tag){case 0:case 11:case 15:ep(s),s.flags&2048&&fu(9,s,s.return);break;case 3:ep(s);break;case 12:ep(s);break;case 22:var h=s.stateNode;s.memoizedState!==null&&h._visibility&2&&(s.return===null||s.return.tag!==13)?(h._visibility&=-3,Im(s)):ep(s);break;default:ep(s)}}function Im(s){var h=s.deletions;if((s.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];mi=S,Zf(S,s)}d_(s)}for(s=s.child;s!==null;){switch(h=s,h.tag){case 0:case 11:case 15:fu(8,h,h.return),Im(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,Im(h));break;default:Im(h)}s=s.sibling}}function Zf(s,h){for(;mi!==null;){var g=mi;switch(g.tag){case 0:case 11:case 15:fu(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:nc(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,mi=S;else e:for(g=s;mi!==null;){S=mi;var I=S.sibling,j=S.return;if(Gf(S),S===g){mi=null;break e}if(I!==null){I.return=j,mi=I;break e}mi=j}}}var mb={getCacheForType:function(s){var h=qn(Nn),g=h.data.get(s);return g===void 0&&(g=s(),h.data.set(s,g)),g},cacheSignal:function(){return qn(Nn).controller.signal}},m_=typeof WeakMap=="function"?WeakMap:Map,Jr=0,vn=null,Mr=null,Cr=0,on=0,za=null,cs=!1,fc=!1,gy=!1,gu=0,$n=0,yu=0,Dh=0,yy=0,Vi=0,Oh=0,tp=null,so=null,vy=!1,zm=0,g_=0,rp=1/0,Hf=null,vu=null,gi=0,_u=null,Wf=null,hs=0,_y=0,km=null,y_=null,np=0,xy=null;function lo(){return(Jr&2)!==0&&Cr!==0?Cr&-Cr:Le.T!==null?Py():Dr()}function v_(){if(Vi===0)if((Cr&536870912)===0||Sr){var s=vt;vt<<=1,(vt&3932160)===0&&(vt=262144),Vi=s}else Vi=536870912;return s=jt.current,s!==null&&(s.flags|=32),Vi}function uo(s,h,g){(s===vn&&(on===2||on===9)||s.cancelPendingCommit!==null)&&(Yf(s,0),dc(s,Cr,Vi,!1)),ir(s,g),((Jr&2)===0||s!==vn)&&(s===vn&&((Jr&2)===0&&(Dh|=g),$n===4&&dc(s,Cr,Vi,!1)),Bs(s))}function si(s,h,g){if((Jr&6)!==0)throw Error(l(327));var S=!g&&(h&127)===0&&(h&s.expiredLanes)===0||nr(s,h),I=S?Kf(s,h):jm(s,h,!0),j=S;do{if(I===0){fc&&!S&&dc(s,h,0,!1);break}else{if(g=s.current.alternate,j&&!gb(g)){I=jm(s,h,!1),j=!1;continue}if(I===2){if(j=h,s.errorRecoveryDisabledLanes&j)var Q=0;else Q=s.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){h=Q;e:{var ce=s;I=tp;var ze=ce.current.memoizedState.isDehydrated;if(ze&&(Yf(ce,Q).flags|=256),Q=jm(ce,Q,!1),Q!==2){if(gy&&!ze){ce.errorRecoveryDisabledLanes|=j,Dh|=j,I=4;break e}j=so,so=I,j!==null&&(so===null?so=j:so.push.apply(so,j))}I=Q}if(j=!1,I!==2)continue}}if(I===1){Yf(s,0),dc(s,h,0,!0);break}e:{switch(S=s,j=I,j){case 0:case 1:throw Error(l(345));case 4:if((h&4194048)!==h)break;case 6:dc(S,h,Vi,!cs);break e;case 2:so=null;break;case 3:case 5:break;default:throw Error(l(329))}if((h&62914560)===h&&(I=zm+300-ri(),10<I)){if(dc(S,h,Vi,!cs),Bt(S,0,!0)!==0)break e;hs=h,S.timeoutHandle=eg(Xf.bind(null,S,g,so,Hf,vy,h,Vi,Dh,Oh,cs,j,"Throttled",-0,0),I);break e}Xf(S,g,so,Hf,vy,h,Vi,Dh,Oh,cs,j,null,-0,0)}}break}while(!0);Bs(s)}function Xf(s,h,g,S,I,j,Q,ce,ze,rt,gt,St,nt,ut){if(s.timeoutHandle=-1,St=h.subtreeFlags,St&8192||(St&16785408)===16785408){St={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vo},f_(h,j,St);var $t=(j&62914560)===j?zm-ri():(j&4194048)===j?g_-ri():0;if($t=V_(St,$t),$t!==null){hs=j,s.cancelPendingCommit=$t(S_.bind(null,s,h,j,g,S,I,Q,ce,ze,gt,St,null,nt,ut)),dc(s,j,Q,!rt);return}}S_(s,h,j,g,S,I,Q,ce,ze)}function gb(s){for(var h=s;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var I=g[S],j=I.getSnapshot;I=I.value;try{if(!Xi(j(),I))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function dc(s,h,g,S){h&=~yy,h&=~Dh,s.suspendedLanes|=h,s.pingedLanes&=~h,S&&(s.warmLanes|=h),S=s.expirationTimes;for(var I=h;0<I;){var j=31-Ce(I),Q=1<<j;S[j]=-1,I&=~Q}g!==0&&Mn(s,g,h)}function ip(){return(Jr&6)===0?(Do(0),!1):!0}function Rm(){if(Mr!==null){if(on===0)var s=Mr.return;else s=Mr,Jo=Qa=null,ks(s),rs=null,nu=0,s=Mr;for(;s!==null;)Am(s.alternate,s),s=s.return;Mr=null}}function Yf(s,h){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,jy(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),hs=0,Rm(),vn=s,Mr=g=Ea(s.current,null),Cr=h,on=0,za=null,cs=!1,fc=nr(s,h),gy=!1,Oh=Vi=yy=Dh=yu=$n=0,so=tp=null,vy=!1,(h&8)!==0&&(h|=h&32);var S=s.entangledLanes;if(S!==0)for(s=s.entanglements,S&=h;0<S;){var I=31-Ce(S),j=1<<I;h|=s[I],S&=~j}return gu=h,Jl(),g}function by(s,h){xr=null,Le.H=Vr,h===bo||h===Ji?(h=ac(),on=3):h===ml?(h=ac(),on=4):on=h===ym?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,za=h,Mr===null&&($n=1,Co(s,Ui(h,s.current)))}function wy(){var s=jt.current;return s===null?!0:(Cr&4194048)===Cr?Ut===null:(Cr&62914560)===Cr||(Cr&536870912)!==0?s===Ut:!1}function Ih(){var s=Le.H;return Le.H=Vr,s===null?Vr:s}function Lm(){var s=Le.A;return Le.A=mb,s}function ap(){$n=4,cs||(Cr&4194048)!==Cr&&jt.current!==null||(fc=!0),(yu&134217727)===0&&(Dh&134217727)===0||vn===null||dc(vn,Cr,Vi,!1)}function jm(s,h,g){var S=Jr;Jr|=2;var I=Ih(),j=Lm();(vn!==s||Cr!==h)&&(Hf=null,Yf(s,h)),h=!1;var Q=$n;e:do try{if(on!==0&&Mr!==null){var ce=Mr,ze=za;switch(on){case 8:Rm(),Q=6;break e;case 3:case 2:case 9:case 6:jt.current===null&&(h=!0);var rt=on;if(on=0,za=null,Qf(s,ce,ze,rt),g&&fc){Q=0;break e}break;default:rt=on,on=0,za=null,Qf(s,ce,ze,rt)}}Nm(),Q=$n;break}catch(gt){by(s,gt)}while(!0);return h&&s.shellSuspendCounter++,Jo=Qa=null,Jr=S,Le.H=I,Le.A=j,Mr===null&&(vn=null,Cr=0,Jl()),Q}function Nm(){for(;Mr!==null;)x_(Mr)}function Kf(s,h){var g=Jr;Jr|=2;var S=Ih(),I=Lm();vn!==s||Cr!==h?(Hf=null,rp=ri()+500,Yf(s,h)):fc=nr(s,h);e:do try{if(on!==0&&Mr!==null){h=Mr;var j=za;t:switch(on){case 1:on=0,za=null,Qf(s,h,j,1);break;case 2:case 9:if(dh(j)){on=0,za=null,b_(h);break}h=function(){on!==2&&on!==9||vn!==s||(on=7),Bs(s)},j.then(h,h);break e;case 3:on=7;break e;case 4:on=5;break e;case 7:dh(j)?(on=0,za=null,b_(h)):(on=0,za=null,Qf(s,h,j,7));break;case 5:var Q=null;switch(Mr.tag){case 26:Q=Mr.memoizedState;case 5:case 27:var ce=Mr;if(Q?lg(Q):ce.stateNode.complete){on=0,za=null;var ze=ce.sibling;if(ze!==null)Mr=ze;else{var rt=ce.return;rt!==null?(Mr=rt,Bm(rt)):Mr=null}break t}}on=0,za=null,Qf(s,h,j,5);break;case 6:on=0,za=null,Qf(s,h,j,6);break;case 8:Rm(),$n=6;break e;default:throw Error(l(462))}}__();break}catch(gt){by(s,gt)}while(!0);return Jo=Qa=null,Le.H=S,Le.A=I,Jr=g,Mr!==null?0:(vn=null,Cr=0,Jl(),$n)}function __(){for(;Mr!==null&&!go();)x_(Mr)}function x_(s){var h=ra(s.alternate,s,gu);s.memoizedProps=s.pendingProps,h===null?Bm(s):Mr=h}function b_(s){var h=s,g=h.alternate;switch(h.tag){case 15:case 0:h=n_(g,h,h.pendingProps,h.type,void 0,Cr);break;case 11:h=n_(g,h,h.pendingProps,h.type.render,h.ref,Cr);break;case 5:ks(h);default:Am(g,h),h=Mr=fm(h,gu),h=ra(g,h,gu)}s.memoizedProps=s.pendingProps,h===null?Bm(s):Mr=h}function Qf(s,h,g,S){Jo=Qa=null,ks(h),rs=null,nu=0;var I=h.return;try{if(gm(s,I,h,g,Cr)){$n=1,Co(s,Ui(g,s.current)),Mr=null;return}}catch(j){if(I!==null)throw Mr=I,j;$n=1,Co(s,Ui(g,s.current)),Mr=null;return}h.flags&32768?(Sr||S===1?s=!0:fc||(Cr&536870912)!==0?s=!1:(cs=s=!0,(S===2||S===9||S===3||S===6)&&(S=jt.current,S!==null&&S.tag===13&&(S.flags|=16384))),w_(h,s)):Bm(h)}function Bm(s){var h=s;do{if((h.flags&32768)!==0){w_(h,cs);return}s=h.return;var g=s_(h.alternate,h,gu);if(g!==null){Mr=g;return}if(h=h.sibling,h!==null){Mr=h;return}Mr=h=s}while(h!==null);$n===0&&($n=5)}function w_(s,h){do{var g=db(s.alternate,s);if(g!==null){g.flags&=32767,Mr=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(s=s.sibling,s!==null)){Mr=s;return}Mr=s=g}while(s!==null);$n=6,Mr=null}function S_(s,h,g,S,I,j,Q,ce,ze){s.cancelPendingCommit=null;do Fm();while(gi!==0);if((Jr&6)!==0)throw Error(l(327));if(h!==null){if(h===s.current)throw Error(l(177));if(j=h.lanes|h.childLanes,j|=Ql,hn(s,g,j,Q,ce,ze),s===vn&&(Mr=vn=null,Cr=0),Wf=h,_u=s,hs=g,_y=j,km=I,y_=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,P_(_s,function(){return C_(),null})):(s.callbackNode=null,s.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=Le.T,Le.T=null,I=Ge.p,Ge.p=2,Q=Jr,Jr|=4;try{pb(s,h,g)}finally{Jr=Q,Ge.p=I,Le.T=S}}gi=1,T_(),E_(),A_()}}function T_(){if(gi===1){gi=0;var s=_u,h=Wf,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=Le.T,Le.T=null;var S=Ge.p;Ge.p=2;var I=Jr;Jr|=4;try{Dm(h,s);var j=Ry,Q=xf(s.containerInfo),ce=j.focusedElem,ze=j.selectionRange;if(Q!==ce&&ce&&ce.ownerDocument&&_f(ce.ownerDocument.documentElement,ce)){if(ze!==null&&nh(ce)){var rt=ze.start,gt=ze.end;if(gt===void 0&&(gt=rt),"selectionStart"in ce)ce.selectionStart=rt,ce.selectionEnd=Math.min(gt,ce.value.length);else{var St=ce.ownerDocument||document,nt=St&&St.defaultView||window;if(nt.getSelection){var ut=nt.getSelection(),$t=ce.textContent.length,lr=Math.min(ze.start,$t),tn=ze.end===void 0?lr:Math.min(ze.end,$t);!ut.extend&&lr>tn&&(Q=tn,tn=lr,lr=Q);var qe=rh(ce,lr),Ne=rh(ce,tn);if(qe&&Ne&&(ut.rangeCount!==1||ut.anchorNode!==qe.node||ut.anchorOffset!==qe.offset||ut.focusNode!==Ne.node||ut.focusOffset!==Ne.offset)){var tt=St.createRange();tt.setStart(qe.node,qe.offset),ut.removeAllRanges(),lr>tn?(ut.addRange(tt),ut.extend(Ne.node,Ne.offset)):(tt.setEnd(Ne.node,Ne.offset),ut.addRange(tt))}}}}for(St=[],ut=ce;ut=ut.parentNode;)ut.nodeType===1&&St.push({element:ut,left:ut.scrollLeft,top:ut.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<St.length;ce++){var _t=St[ce];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}wc=!!cp,Ry=cp=null}finally{Jr=I,Ge.p=S,Le.T=g}}s.current=h,gi=2}}function E_(){if(gi===2){gi=0;var s=_u,h=Wf,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=Le.T,Le.T=null;var S=Ge.p;Ge.p=2;var I=Jr;Jr|=4;try{dy(s,h.alternate,h)}finally{Jr=I,Ge.p=S,Le.T=g}}gi=3}}function A_(){if(gi===4||gi===3){gi=0,ju();var s=_u,h=Wf,g=hs,S=y_;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?gi=5:(gi=0,Wf=_u=null,M_(s,s.pendingLanes));var I=s.pendingLanes;if(I===0&&(vu=null),wt(g),h=h.stateNode,ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(ne,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=Le.T,I=Ge.p,Ge.p=2,Le.T=null;try{for(var j=s.onRecoverableError,Q=0;Q<S.length;Q++){var ce=S[Q];j(ce.value,{componentStack:ce.stack})}}finally{Le.T=h,Ge.p=I}}(hs&3)!==0&&Fm(),Bs(s),I=s.pendingLanes,(g&261930)!==0&&(I&42)!==0?s===xy?np++:(np=0,xy=s):np=0,Do(0)}}function M_(s,h){(s.pooledCacheLanes&=h)===0&&(h=s.pooledCache,h!=null&&(s.pooledCache=null,nc(h)))}function Fm(){return T_(),E_(),A_(),C_()}function C_(){if(gi!==5)return!1;var s=_u,h=_y;_y=0;var g=wt(hs),S=Le.T,I=Ge.p;try{Ge.p=32>g?32:g,Le.T=null,g=km,km=null;var j=_u,Q=hs;if(gi=0,Wf=_u=null,hs=0,(Jr&6)!==0)throw Error(l(331));var ce=Jr;if(Jr|=4,p_(j.current),my(j,j.current,Q,g),Jr=ce,Do(0,!1),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(ne,j)}catch{}return!0}finally{Ge.p=I,Le.T=S,M_(s,h)}}function Sy(s,h,g){h=Ui(g,h),h=Th(s.stateNode,h,2),s=Ds(s,h,2),s!==null&&(ir(s,2),Bs(s))}function en(s,h,g){if(s.tag===3)Sy(s,s,g);else for(;h!==null;){if(h.tag===3){Sy(h,s,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(vu===null||!vu.has(S))){s=Ui(g,s),g=Eh(2),S=Ds(h,g,2),S!==null&&(Ah(g,S,h,s),ir(S,2),Bs(S));break}}h=h.return}}function Um(s,h,g){var S=s.pingCache;if(S===null){S=s.pingCache=new m_;var I=new Set;S.set(h,I)}else I=S.get(h),I===void 0&&(I=new Set,S.set(h,I));I.has(g)||(gy=!0,I.add(g),s=pc.bind(null,s,h,g),h.then(s,s))}function pc(s,h,g){var S=s.pingCache;S!==null&&S.delete(h),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,vn===s&&(Cr&g)===g&&($n===4||$n===3&&(Cr&62914560)===Cr&&300>ri()-zm?(Jr&2)===0&&Yf(s,0):yy|=g,Oh===Cr&&(Oh=0)),Bs(s)}function op(s,h){h===0&&(h=Qt()),s=Ka(s,h),s!==null&&(ir(s,h),Bs(s))}function Ty(s){var h=s.memoizedState,g=0;h!==null&&(g=h.retryLane),op(s,g)}function yb(s,h){var g=0;switch(s.tag){case 31:case 13:var S=s.stateNode,I=s.memoizedState;I!==null&&(g=I.retryLane);break;case 19:S=s.stateNode;break;case 22:S=s.stateNode._retryCache;break;default:throw Error(l(314))}S!==null&&S.delete(h),op(s,g)}function P_(s,h){return ys(s,h)}var Vm=null,Jf=null,Ey=!1,qm=!1,Ay=!1,xu=0;function Bs(s){s!==Jf&&s.next===null&&(Jf===null?Vm=Jf=s:Jf=Jf.next=s),qm=!0,Ey||(Ey=!0,Cy())}function Do(s,h){if(!Ay&&qm){Ay=!0;do for(var g=!1,S=Vm;S!==null;){if(s!==0){var I=S.pendingLanes;if(I===0)var j=0;else{var Q=S.suspendedLanes,ce=S.pingedLanes;j=(1<<31-Ce(42|s)+1)-1,j&=I&~(Q&~ce),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(g=!0,sp(S,j))}else j=Cr,j=Bt(S,S===vn?j:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(j&3)===0||nr(S,j)||(g=!0,sp(S,j));S=S.next}while(g);Ay=!1}}function mc(){My()}function My(){qm=Ey=!1;var s=0;xu!==0&&Jm()&&(s=xu);for(var h=ri(),g=null,S=Vm;S!==null;){var I=S.next,j=Gm(S,h);j===0?(S.next=null,g===null?Vm=I:g.next=I,I===null&&(Jf=g)):(g=S,(s!==0||(j&3)!==0)&&(qm=!0)),S=I}gi!==0&&gi!==5||Do(s),xu!==0&&(xu=0)}function Gm(s,h){for(var g=s.suspendedLanes,S=s.pingedLanes,I=s.expirationTimes,j=s.pendingLanes&-62914561;0<j;){var Q=31-Ce(j),ce=1<<Q,ze=I[Q];ze===-1?((ce&g)===0||(ce&S)!==0)&&(I[Q]=Wt(ce,h)):ze<=h&&(s.expiredLanes|=ce),j&=~ce}if(h=vn,g=Cr,g=Bt(s,s===h?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),S=s.callbackNode,g===0||s===h&&(on===2||on===9)||s.cancelPendingCommit!==null)return S!==null&&S!==null&&No(S),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||nr(s,g)){if(h=g&-g,h===s.callbackPriority)return h;switch(S!==null&&No(S),wt(g)){case 2:case 8:g=vs;break;case 32:g=_s;break;case 268435456:g=Ks;break;default:g=_s}return S=D_.bind(null,s),g=ys(g,S),s.callbackPriority=h,s.callbackNode=g,h}return S!==null&&S!==null&&No(S),s.callbackPriority=2,s.callbackNode=null,2}function D_(s,h){if(gi!==0&&gi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(Fm()&&s.callbackNode!==g)return null;var S=Cr;return S=Bt(s,s===vn?S:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),S===0?null:(si(s,S,h),Gm(s,ri()),s.callbackNode!=null&&s.callbackNode===g?D_.bind(null,s):null)}function sp(s,h){if(Fm())return null;si(s,h,!0)}function Cy(){By(function(){(Jr&6)!==0?ys(Nu,mc):My()})}function Py(){if(xu===0){var s=ru;s===0&&(s=Ze,Ze<<=1,(Ze&261888)===0&&(Ze=256)),xu=s}return xu}function $m(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:gr(""+s)}function Zm(s,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,s.id&&g.setAttribute("form",s.id),h.parentNode.insertBefore(g,h),s=new FormData(s),g.parentNode.removeChild(g),s}function ed(s,h,g,S,I){if(h==="submit"&&g&&g.stateNode===I){var j=$m((I[At]||null).action),Q=S.submitter;Q&&(h=(h=Q[At]||null)?$m(h.formAction):Q.getAttribute("formAction"),h!==null&&(j=h,Q=null));var ce=new $c("action","action",null,S,I);s.push({event:ce,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(xu!==0){var ze=Q?Zm(I,Q):new FormData(I);In(g,{pending:!0,data:ze,method:I.method,action:j},null,ze)}}else typeof j=="function"&&(ce.preventDefault(),ze=Q?Zm(I,Q):new FormData(I),In(g,{pending:!0,data:ze,method:I.method,action:j},j,ze))},currentTarget:I}]})}}for(var Hm=0;Hm<Tf.length;Hm++){var Wm=Tf[Hm],Dy=Wm.toLowerCase(),O_=Wm[0].toUpperCase()+Wm.slice(1);Sa(Dy,"on"+O_)}Sa(oh,"onAnimationEnd"),Sa(sh,"onAnimationIteration"),Sa(Sf,"onAnimationStart"),Sa("dblclick","onDoubleClick"),Sa("focusin","onFocus"),Sa("focusout","onBlur"),Sa(Kl,"onTransitionRun"),Sa(lh,"onTransitionStart"),Sa(Qu,"onTransitionCancel"),Sa(wa,"onTransitionEnd"),bs("onMouseEnter",["mouseout","mouseover"]),bs("onMouseLeave",["mouseout","mouseover"]),bs("onPointerEnter",["pointerout","pointerover"]),bs("onPointerLeave",["pointerout","pointerover"]),Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gc));function z_(s,h){h=(h&4)!==0;for(var g=0;g<s.length;g++){var S=s[g],I=S.event;S=S.listeners;e:{var j=void 0;if(h)for(var Q=S.length-1;0<=Q;Q--){var ce=S[Q],ze=ce.instance,rt=ce.currentTarget;if(ce=ce.listener,ze!==j&&I.isPropagationStopped())break e;j=ce,I.currentTarget=rt;try{j(I)}catch(gt){Ho(gt)}I.currentTarget=null,j=ze}else for(Q=0;Q<S.length;Q++){if(ce=S[Q],ze=ce.instance,rt=ce.currentTarget,ce=ce.listener,ze!==j&&I.isPropagationStopped())break e;j=ce,I.currentTarget=rt;try{j(I)}catch(gt){Ho(gt)}I.currentTarget=null,j=ze}}}}function Pr(s,h){var g=h[cr];g===void 0&&(g=h[cr]=new Set);var S=s+"__bubble";g.has(S)||(Ym(h,s,2,!1),g.add(S))}function Oy(s,h,g){var S=0;h&&(S|=4),Ym(g,s,S,h)}var Xm="_reactListening"+Math.random().toString(36).slice(2);function Iy(s){if(!s[Xm]){s[Xm]=!0,Bu.forEach(function(g){g!=="selectionchange"&&(I_.has(g)||Oy(g,!1,s),Oy(g,!0,s))});var h=s.nodeType===9?s:s.ownerDocument;h===null||h[Xm]||(h[Xm]=!0,Oy("selectionchange",!1,h))}}function Ym(s,h,g,S){switch(W_(h)){case 2:var I=vb;break;case 8:I=Xy;break;default:I=bp}g=I.bind(null,h,g,s),I=void 0,!Li||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(I=!0),S?I!==void 0?s.addEventListener(h,g,{capture:!0,passive:I}):s.addEventListener(h,g,!0):I!==void 0?s.addEventListener(h,g,{passive:I}):s.addEventListener(h,g,!1)}function Tl(s,h,g,S,I){var j=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Q=S.tag;if(Q===3||Q===4){var ce=S.stateNode.containerInfo;if(ce===I)break;if(Q===4)for(Q=S.return;Q!==null;){var ze=Q.tag;if((ze===3||ze===4)&&Q.stateNode.containerInfo===I)return;Q=Q.return}for(;ce!==null;){if(Q=Fo(ce),Q===null)return;if(ze=Q.tag,ze===5||ze===6||ze===26||ze===27){S=j=Q;continue e}ce=ce.parentNode}}S=S.return}Xr(function(){var rt=j,gt=Gc(g),St=[];e:{var nt=Dd.get(s);if(nt!==void 0){var ut=$c,$t=s;switch(s){case"keypress":if(ba(g)===0)break e;case"keydown":case"keyup":ut=Dn;break;case"focusin":$t="focus",ut=nl;break;case"focusout":$t="blur",ut=nl;break;case"beforeblur":case"afterblur":ut=nl;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Zl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=ty;break;case oh:case sh:case Sf:ut=em;break;case wa:ut=mf;break;case"scroll":case"scrollend":ut=$l;break;case"wheel":ut=Ed;break;case"copy":case"cut":case"paste":ut=Sd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=pf;break;case"toggle":case"beforetoggle":ut=Zu}var lr=(h&4)!==0,tn=!lr&&(s==="scroll"||s==="scrollend"),qe=lr?nt!==null?nt+"Capture":null:nt;lr=[];for(var Ne=rt,tt;Ne!==null;){var _t=Ne;if(tt=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||tt===null||qe===null||(_t=Ha(Ne,qe),_t!=null&&lr.push(td(Ne,_t,tt))),tn)break;Ne=Ne.return}0<lr.length&&(nt=new ut(nt,$t,null,g,gt),St.push({event:nt,listeners:lr}))}}if((h&7)===0){e:{if(nt=s==="mouseover"||s==="pointerover",ut=s==="mouseout"||s==="pointerout",nt&&g!==wd&&($t=g.relatedTarget||g.fromElement)&&(Fo($t)||$t[Kt]))break e;if((ut||nt)&&(nt=gt.window===gt?gt:(nt=gt.ownerDocument)?nt.defaultView||nt.parentWindow:window,ut?($t=g.relatedTarget||g.toElement,ut=rt,$t=$t?Fo($t):null,$t!==null&&(tn=v($t),lr=$t.tag,$t!==tn||lr!==5&&lr!==27&&lr!==6)&&($t=null)):(ut=null,$t=rt),ut!==$t)){if(lr=Zl,_t="onMouseLeave",qe="onMouseEnter",Ne="mouse",(s==="pointerout"||s==="pointerover")&&(lr=pf,_t="onPointerLeave",qe="onPointerEnter",Ne="pointer"),tn=ut==null?nt:Uo(ut),tt=$t==null?nt:Uo($t),nt=new lr(_t,Ne+"leave",ut,g,gt),nt.target=tn,nt.relatedTarget=tt,_t=null,Fo(gt)===rt&&(lr=new lr(qe,Ne+"enter",$t,g,gt),lr.target=tt,lr.relatedTarget=tn,_t=lr),tn=_t,ut&&$t)t:{for(lr=k_,qe=ut,Ne=$t,tt=0,_t=qe;_t;_t=lr(_t))tt++;_t=0;for(var rr=Ne;rr;rr=lr(rr))_t++;for(;0<tt-_t;)qe=lr(qe),tt--;for(;0<_t-tt;)Ne=lr(Ne),_t--;for(;tt--;){if(qe===Ne||Ne!==null&&qe===Ne.alternate){lr=qe;break t}qe=lr(qe),Ne=lr(Ne)}lr=null}else lr=null;ut!==null&&zy(St,nt,ut,lr,!1),$t!==null&&tn!==null&&zy(St,tn,$t,lr,!0)}}e:{if(nt=rt?Uo(rt):window,ut=nt.nodeName&&nt.nodeName.toLowerCase(),ut==="select"||ut==="input"&&nt.type==="file")var Hr=ol;else if(yf(nt))if(Ad)Hr=cm;else{Hr=um;var Xt=ry}else ut=nt.nodeName,!ut||ut.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?rt&&Vl(rt.elementType)&&(Hr=ol):Hr=th;if(Hr&&(Hr=Hr(s,rt))){vf(St,Hr,g,gt);break e}Xt&&Xt(s,nt,rt),s==="focusout"&&rt&&nt.type==="number"&&rt.memoizedProps.value!=null&&qc(nt,"number",nt.value)}switch(Xt=rt?Uo(rt):window,s){case"focusin":(yf(Xt)||Xt.contentEditable==="true")&&(Ya=Xt,ih=rt,ah=null);break;case"focusout":ah=ih=Ya=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,hm(St,g,gt);break;case"selectionchange":if(bf)break;case"keydown":case"keyup":hm(St,g,gt)}var yr;if(jn)e:{switch(s){case"compositionstart":var ar="onCompositionStart";break e;case"compositionend":ar="onCompositionEnd";break e;case"compositionupdate":ar="onCompositionUpdate";break e}ar=void 0}else _o?Kc(s,g)&&(ar="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(ar="onCompositionStart");ar&&(Yu&&g.locale!=="ko"&&(_o||ar!=="onCompositionStart"?ar==="onCompositionEnd"&&_o&&(yr=tl()):(xa=gt,Go="value"in xa?xa.value:xa.textContent,_o=!0)),Xt=lp(rt,ar),0<Xt.length&&(ar=new Td(ar,s,null,g,gt),St.push({event:ar,listeners:Xt}),yr?ar.data=yr:(yr=im(g),yr!==null&&(ar.data=yr)))),(yr=Xu?gf(s,g):am(s,g))&&(ar=lp(rt,"onBeforeInput"),0<ar.length&&(Xt=new Td("onBeforeInput","beforeinput",null,g,gt),St.push({event:Xt,listeners:ar}),Xt.data=yr)),ed(St,s,rt,g,gt)}z_(St,h)})}function td(s,h,g){return{instance:s,listener:h,currentTarget:g}}function lp(s,h){for(var g=h+"Capture",S=[];s!==null;){var I=s,j=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||j===null||(I=Ha(s,g),I!=null&&S.unshift(td(s,I,j)),I=Ha(s,h),I!=null&&S.push(td(s,I,j))),s.tag===3)return S;s=s.return}return[]}function k_(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function zy(s,h,g,S,I){for(var j=h._reactName,Q=[];g!==null&&g!==S;){var ce=g,ze=ce.alternate,rt=ce.stateNode;if(ce=ce.tag,ze!==null&&ze===S)break;ce!==5&&ce!==26&&ce!==27||rt===null||(ze=rt,I?(rt=Ha(g,j),rt!=null&&Q.unshift(td(g,rt,ze))):I||(rt=Ha(g,j),rt!=null&&Q.push(td(g,rt,ze)))),g=g.return}Q.length!==0&&s.push({event:h,listeners:Q})}var R_=/\r\n?/g,L_=/\u0000|\uFFFD/g;function up(s){return(typeof s=="string"?s:""+s).replace(R_,`
`).replace(L_,"")}function ky(s,h){return h=up(h),up(s)===h}function Zr(s,h,g,S,I,j){switch(g){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||ws(s,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&ws(s,""+S);break;case"className":qo(s,"class",S);break;case"tabIndex":qo(s,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":qo(s,g,S);break;case"style":df(s,S,j);break;case"data":if(h!=="object"){qo(s,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||g!=="href")){s.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){s.removeAttribute(g);break}S=gr(""+S),s.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(g==="formAction"?(h!=="input"&&Zr(s,h,"name",I.name,I,null),Zr(s,h,"formEncType",I.formEncType,I,null),Zr(s,h,"formMethod",I.formMethod,I,null),Zr(s,h,"formTarget",I.formTarget,I,null)):(Zr(s,h,"encType",I.encType,I,null),Zr(s,h,"method",I.method,I,null),Zr(s,h,"target",I.target,I,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){s.removeAttribute(g);break}S=gr(""+S),s.setAttribute(g,S);break;case"onClick":S!=null&&(s.onclick=vo);break;case"onScroll":S!=null&&Pr("scroll",s);break;case"onScrollEnd":S!=null&&Pr("scrollend",s);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(l(61));if(g=S.__html,g!=null){if(I.children!=null)throw Error(l(60));s.innerHTML=g}}break;case"multiple":s.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":s.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){s.removeAttribute("xlink:href");break}g=gr(""+S),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,""+S):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":S===!0?s.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?s.setAttribute(g,S):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?s.setAttribute(g,S):s.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?s.removeAttribute(g):s.setAttribute(g,S);break;case"popover":Pr("beforetoggle",s),Pr("toggle",s),Fc(s,"popover",S);break;case"xlinkActuate":Za(s,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Za(s,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Za(s,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Za(s,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Za(s,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Za(s,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Za(s,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Za(s,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Za(s,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Fc(s,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=el.get(g)||g,Fc(s,g,S))}}function Km(s,h,g,S,I,j){switch(g){case"style":df(s,S,j);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(l(61));if(g=S.__html,g!=null){if(I.children!=null)throw Error(l(60));s.innerHTML=g}}break;case"children":typeof S=="string"?ws(s,S):(typeof S=="number"||typeof S=="bigint")&&ws(s,""+S);break;case"onScroll":S!=null&&Pr("scroll",s);break;case"onScrollEnd":S!=null&&Pr("scrollend",s);break;case"onClick":S!=null&&(s.onclick=vo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mi.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(I=g.endsWith("Capture"),h=g.slice(2,I?g.length-7:void 0),j=s[At]||null,j=j!=null?j[g]:null,typeof j=="function"&&s.removeEventListener(h,j,I),typeof S=="function")){typeof j!="function"&&j!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(h,S,I);break e}g in s?s[g]=S:S===!0?s.setAttribute(g,""):Fc(s,g,S)}}}function Ai(s,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pr("error",s),Pr("load",s);var S=!1,I=!1,j;for(j in g)if(g.hasOwnProperty(j)){var Q=g[j];if(Q!=null)switch(j){case"src":S=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,h));default:Zr(s,h,j,Q,g,null)}}I&&Zr(s,h,"srcSet",g.srcSet,g,null),S&&Zr(s,h,"src",g.src,g,null);return;case"input":Pr("invalid",s);var ce=j=Q=I=null,ze=null,rt=null;for(S in g)if(g.hasOwnProperty(S)){var gt=g[S];if(gt!=null)switch(S){case"name":I=gt;break;case"type":Q=gt;break;case"checked":ze=gt;break;case"defaultChecked":rt=gt;break;case"value":j=gt;break;case"defaultValue":ce=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(l(137,h));break;default:Zr(s,h,S,gt,g,null)}}ff(s,j,ce,ze,rt,Q,I,!1);return;case"select":Pr("invalid",s),S=Q=j=null;for(I in g)if(g.hasOwnProperty(I)&&(ce=g[I],ce!=null))switch(I){case"value":j=ce;break;case"defaultValue":Q=ce;break;case"multiple":S=ce;default:Zr(s,h,I,ce,g,null)}h=j,g=Q,s.multiple=!!S,h!=null?Js(s,!!S,h,!1):g!=null&&Js(s,!!S,g,!0);return;case"textarea":Pr("invalid",s),j=I=S=null;for(Q in g)if(g.hasOwnProperty(Q)&&(ce=g[Q],ce!=null))switch(Q){case"value":S=ce;break;case"defaultValue":I=ce;break;case"children":j=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(l(91));break;default:Zr(s,h,Q,ce,g,null)}Vu(s,S,I,j);return;case"option":for(ze in g)g.hasOwnProperty(ze)&&(S=g[ze],S!=null)&&(ze==="selected"?s.selected=S&&typeof S!="function"&&typeof S!="symbol":Zr(s,h,ze,S,g,null));return;case"dialog":Pr("beforetoggle",s),Pr("toggle",s),Pr("cancel",s),Pr("close",s);break;case"iframe":case"object":Pr("load",s);break;case"video":case"audio":for(S=0;S<gc.length;S++)Pr(gc[S],s);break;case"image":Pr("error",s),Pr("load",s);break;case"details":Pr("toggle",s);break;case"embed":case"source":case"link":Pr("error",s),Pr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in g)if(g.hasOwnProperty(rt)&&(S=g[rt],S!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,h));default:Zr(s,h,rt,S,g,null)}return;default:if(Vl(h)){for(gt in g)g.hasOwnProperty(gt)&&(S=g[gt],S!==void 0&&Km(s,h,gt,S,g,void 0));return}}for(ce in g)g.hasOwnProperty(ce)&&(S=g[ce],S!=null&&Zr(s,h,ce,S,g,null))}function j_(s,h,g,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,j=null,Q=null,ce=null,ze=null,rt=null,gt=null;for(ut in g){var St=g[ut];if(g.hasOwnProperty(ut)&&St!=null)switch(ut){case"checked":break;case"value":break;case"defaultValue":ze=St;default:S.hasOwnProperty(ut)||Zr(s,h,ut,null,S,St)}}for(var nt in S){var ut=S[nt];if(St=g[nt],S.hasOwnProperty(nt)&&(ut!=null||St!=null))switch(nt){case"type":j=ut;break;case"name":I=ut;break;case"checked":rt=ut;break;case"defaultChecked":gt=ut;break;case"value":Q=ut;break;case"defaultValue":ce=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(l(137,h));break;default:ut!==St&&Zr(s,h,nt,ut,S,St)}}Vc(s,Q,ce,ze,rt,gt,j,I);return;case"select":ut=Q=ce=nt=null;for(j in g)if(ze=g[j],g.hasOwnProperty(j)&&ze!=null)switch(j){case"value":break;case"multiple":ut=ze;default:S.hasOwnProperty(j)||Zr(s,h,j,null,S,ze)}for(I in S)if(j=S[I],ze=g[I],S.hasOwnProperty(I)&&(j!=null||ze!=null))switch(I){case"value":nt=j;break;case"defaultValue":ce=j;break;case"multiple":Q=j;default:j!==ze&&Zr(s,h,I,j,S,ze)}h=ce,g=Q,S=ut,nt!=null?Js(s,!!g,nt,!1):!!S!=!!g&&(h!=null?Js(s,!!g,h,!0):Js(s,!!g,g?[]:"",!1));return;case"textarea":ut=nt=null;for(ce in g)if(I=g[ce],g.hasOwnProperty(ce)&&I!=null&&!S.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Zr(s,h,ce,null,S,I)}for(Q in S)if(I=S[Q],j=g[Q],S.hasOwnProperty(Q)&&(I!=null||j!=null))switch(Q){case"value":nt=I;break;case"defaultValue":ut=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(l(91));break;default:I!==j&&Zr(s,h,Q,I,S,j)}Qp(s,nt,ut);return;case"option":for(var $t in g)nt=g[$t],g.hasOwnProperty($t)&&nt!=null&&!S.hasOwnProperty($t)&&($t==="selected"?s.selected=!1:Zr(s,h,$t,null,S,nt));for(ze in S)nt=S[ze],ut=g[ze],S.hasOwnProperty(ze)&&nt!==ut&&(nt!=null||ut!=null)&&(ze==="selected"?s.selected=nt&&typeof nt!="function"&&typeof nt!="symbol":Zr(s,h,ze,nt,S,ut));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lr in g)nt=g[lr],g.hasOwnProperty(lr)&&nt!=null&&!S.hasOwnProperty(lr)&&Zr(s,h,lr,null,S,nt);for(rt in S)if(nt=S[rt],ut=g[rt],S.hasOwnProperty(rt)&&nt!==ut&&(nt!=null||ut!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(l(137,h));break;default:Zr(s,h,rt,nt,S,ut)}return;default:if(Vl(h)){for(var tn in g)nt=g[tn],g.hasOwnProperty(tn)&&nt!==void 0&&!S.hasOwnProperty(tn)&&Km(s,h,tn,void 0,S,nt);for(gt in S)nt=S[gt],ut=g[gt],!S.hasOwnProperty(gt)||nt===ut||nt===void 0&&ut===void 0||Km(s,h,gt,nt,S,ut);return}}for(var qe in g)nt=g[qe],g.hasOwnProperty(qe)&&nt!=null&&!S.hasOwnProperty(qe)&&Zr(s,h,qe,null,S,nt);for(St in S)nt=S[St],ut=g[St],!S.hasOwnProperty(St)||nt===ut||nt==null&&ut==null||Zr(s,h,St,nt,S,ut)}function ka(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rd(){if(typeof performance.getEntriesByType=="function"){for(var s=0,h=0,g=performance.getEntriesByType("resource"),S=0;S<g.length;S++){var I=g[S],j=I.transferSize,Q=I.initiatorType,ce=I.duration;if(j&&ce&&ka(Q)){for(Q=0,ce=I.responseEnd,S+=1;S<g.length;S++){var ze=g[S],rt=ze.startTime;if(rt>ce)break;var gt=ze.transferSize,St=ze.initiatorType;gt&&ka(St)&&(ze=ze.responseEnd,Q+=gt*(ze<ce?1:(ce-rt)/(ze-rt)))}if(--S,h+=8*(j+Q)/(I.duration/1e3),s++,10<s)break}}if(0<s)return h/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var cp=null,Ry=null;function hp(s){return s.nodeType===9?s:s.ownerDocument}function yc(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ly(s,h){if(s===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&h==="foreignObject"?0:s}function Qm(s,h){return s==="textarea"||s==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var vc=null;function Jm(){var s=window.event;return s&&s.type==="popstate"?s===vc?!1:(vc=s,!0):(vc=null,!1)}var eg=typeof setTimeout=="function"?setTimeout:void 0,jy=typeof clearTimeout=="function"?clearTimeout:void 0,Ny=typeof Promise=="function"?Promise:void 0,By=typeof queueMicrotask=="function"?queueMicrotask:typeof Ny<"u"?function(s){return Ny.resolve(null).then(s).catch(Fy)}:eg;function Fy(s){setTimeout(function(){throw s})}function _c(s){return s==="head"}function N_(s,h){var g=h,S=0;do{var I=g.nextSibling;if(s.removeChild(g),I&&I.nodeType===8)if(g=I.data,g==="/$"||g==="/&"){if(S===0){s.removeChild(I),od(h);return}S--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")S++;else if(g==="html")fp(s.ownerDocument.documentElement);else if(g==="head"){g=s.ownerDocument.head,fp(g);for(var j=g.firstChild;j;){var Q=j.nextSibling,ce=j.nodeName;j[hr]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&j.rel.toLowerCase()==="stylesheet"||g.removeChild(j),j=Q}}else g==="body"&&fp(s.ownerDocument.body);g=I}while(g);od(h)}function qr(s,h){var g=s;s=0;do{var S=g.nextSibling;if(g.nodeType===1?h?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(h?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),S&&S.nodeType===8)if(g=S.data,g==="/$"){if(s===0)break;s--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||s++;g=S}while(g)}function El(s){var h=s.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":El(g),Bl(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function Di(s,h,g,S){for(;s.nodeType===1;){var I=g;if(s.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(S){if(!s[hr])switch(h){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(j=s.getAttribute("rel"),j==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(j!==I.rel||s.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||s.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||s.getAttribute("title")!==(I.title==null?null:I.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(j=s.getAttribute("src"),(j!==(I.src==null?null:I.src)||s.getAttribute("type")!==(I.type==null?null:I.type)||s.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&j&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(h==="input"&&s.type==="hidden"){var j=I.name==null?null:""+I.name;if(I.type==="hidden"&&s.getAttribute("name")===j)return s}else return s;if(s=Oo(s.nextSibling),s===null)break}return null}function Fs(s,h,g){if(h==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=Oo(s.nextSibling),s===null))return null;return s}function xc(s,h){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=Oo(s.nextSibling),s===null))return null;return s}function na(s){return s.data==="$?"||s.data==="$~"}function Tn(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function yi(s,h){var g=s.ownerDocument;if(s.data==="$~")s._reactRetry=h;else if(s.data!=="$?"||g.readyState!=="loading")h();else{var S=function(){h(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),s._reactRetry=S}}function Oo(s){for(;s!=null;s=s.nextSibling){var h=s.nodeType;if(h===1||h===3)break;if(h===8){if(h=s.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return s}var Ra=null;function Oi(s){s=s.nextSibling;for(var h=0;s;){if(s.nodeType===8){var g=s.data;if(g==="/$"||g==="/&"){if(h===0)return Oo(s.nextSibling);h--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||h++}s=s.nextSibling}return null}function tg(s){s=s.previousSibling;for(var h=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(h===0)return s;h--}else g!=="/$"&&g!=="/&"||h++}s=s.previousSibling}return null}function B_(s,h,g){switch(h=hp(g),s){case"html":if(s=h.documentElement,!s)throw Error(l(452));return s;case"head":if(s=h.head,!s)throw Error(l(453));return s;case"body":if(s=h.body,!s)throw Error(l(454));return s;default:throw Error(l(451))}}function fp(s){for(var h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Bl(s)}var kr=new Map,La=new Set;function bu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Al=Ge.d;Ge.d={f:F_,r:U_,D:ia,C:Us,L:ng,m:aa,X:ig,S:bc,M:Uy};function F_(){var s=Al.f(),h=ip();return s||h}function U_(s){var h=xs(s);h!==null&&h.tag===5&&h.type==="form"?fi(h):Al.r(s)}var zh=typeof document>"u"?null:document;function rg(s,h,g){var S=zh;if(S&&typeof h=="string"&&h){var I=Ri(h);I='link[rel="'+s+'"][href="'+I+'"]',typeof g=="string"&&(I+='[crossorigin="'+g+'"]'),La.has(I)||(La.add(I),s={rel:s,crossOrigin:g,href:h},S.querySelector(I)===null&&(h=S.createElement("link"),Ai(h,"link",s),Cn(h),S.head.appendChild(h)))}}function ia(s){Al.D(s),rg("dns-prefetch",s,null)}function Us(s,h){Al.C(s,h),rg("preconnect",s,h)}function ng(s,h,g){Al.L(s,h,g);var S=zh;if(S&&s&&h){var I='link[rel="preload"][as="'+Ri(h)+'"]';h==="image"&&g&&g.imageSrcSet?(I+='[imagesrcset="'+Ri(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(I+='[imagesizes="'+Ri(g.imageSizes)+'"]')):I+='[href="'+Ri(s)+'"]';var j=I;switch(h){case"style":j=kh(s);break;case"script":j=Rh(s)}kr.has(j)||(s=z({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:s,as:h},g),kr.set(j,s),S.querySelector(I)!==null||h==="style"&&S.querySelector(nd(j))||h==="script"&&S.querySelector(id(j))||(h=S.createElement("link"),Ai(h,"link",s),Cn(h),S.head.appendChild(h)))}}function aa(s,h){Al.m(s,h);var g=zh;if(g&&s){var S=h&&typeof h.as=="string"?h.as:"script",I='link[rel="modulepreload"][as="'+Ri(S)+'"][href="'+Ri(s)+'"]',j=I;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=Rh(s)}if(!kr.has(j)&&(s=z({rel:"modulepreload",href:s},h),kr.set(j,s),g.querySelector(I)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(id(j)))return}S=g.createElement("link"),Ai(S,"link",s),Cn(S),g.head.appendChild(S)}}}function bc(s,h,g){Al.S(s,h,g);var S=zh;if(S&&s){var I=Vo(S).hoistableStyles,j=kh(s);h=h||"default";var Q=I.get(j);if(!Q){var ce={loading:0,preload:null};if(Q=S.querySelector(nd(j)))ce.loading=5;else{s=z({rel:"stylesheet",href:s,"data-precedence":h},g),(g=kr.get(j))&&og(s,g);var ze=Q=S.createElement("link");Cn(ze),Ai(ze,"link",s),ze._p=new Promise(function(rt,gt){ze.onload=rt,ze.onerror=gt}),ze.addEventListener("load",function(){ce.loading|=1}),ze.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,ad(Q,h,S)}Q={type:"stylesheet",instance:Q,count:1,state:ce},I.set(j,Q)}}}function ig(s,h){Al.X(s,h);var g=zh;if(g&&s){var S=Vo(g).hoistableScripts,I=Rh(s),j=S.get(I);j||(j=g.querySelector(id(I)),j||(s=z({src:s,async:!0},h),(h=kr.get(I))&&Gy(s,h),j=g.createElement("script"),Cn(j),Ai(j,"link",s),g.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},S.set(I,j))}}function Uy(s,h){Al.M(s,h);var g=zh;if(g&&s){var S=Vo(g).hoistableScripts,I=Rh(s),j=S.get(I);j||(j=g.querySelector(id(I)),j||(s=z({src:s,async:!0,type:"module"},h),(h=kr.get(I))&&Gy(s,h),j=g.createElement("script"),Cn(j),Ai(j,"link",s),g.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},S.set(I,j))}}function Vy(s,h,g,S){var I=(I=Yt.current)?bu(I):null;if(!I)throw Error(l(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=kh(g.href),g=Vo(I).hoistableStyles,S=g.get(h),S||(S={type:"style",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=kh(g.href);var j=Vo(I).hoistableStyles,Q=j.get(s);if(Q||(I=I.ownerDocument||I,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(s,Q),(j=I.querySelector(nd(s)))&&!j._p&&(Q.instance=j,Q.state.loading=5),kr.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},kr.set(s,g),j||ag(I,s,g,Q.state))),h&&S===null)throw Error(l(528,""));return Q}if(h&&S!==null)throw Error(l(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Rh(g),g=Vo(I).hoistableScripts,S=g.get(h),S||(S={type:"script",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,s))}}function kh(s){return'href="'+Ri(s)+'"'}function nd(s){return'link[rel="stylesheet"]['+s+"]"}function qy(s){return z({},s,{"data-precedence":s.precedence,precedence:null})}function ag(s,h,g,S){s.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=s.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Ai(h,"link",g),Cn(h),s.head.appendChild(h))}function Rh(s){return'[src="'+Ri(s)+'"]'}function id(s){return"script[async]"+s}function Lh(s,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var S=s.querySelector('style[data-href~="'+Ri(g.href)+'"]');if(S)return h.instance=S,Cn(S),S;var I=z({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(s.ownerDocument||s).createElement("style"),Cn(S),Ai(S,"style",I),ad(S,g.precedence,s),h.instance=S;case"stylesheet":I=kh(g.href);var j=s.querySelector(nd(I));if(j)return h.state.loading|=4,h.instance=j,Cn(j),j;S=qy(g),(I=kr.get(I))&&og(S,I),j=(s.ownerDocument||s).createElement("link"),Cn(j);var Q=j;return Q._p=new Promise(function(ce,ze){Q.onload=ce,Q.onerror=ze}),Ai(j,"link",S),h.state.loading|=4,ad(j,g.precedence,s),h.instance=j;case"script":return j=Rh(g.src),(I=s.querySelector(id(j)))?(h.instance=I,Cn(I),I):(S=g,(I=kr.get(j))&&(S=z({},g),Gy(S,I)),s=s.ownerDocument||s,I=s.createElement("script"),Cn(I),Ai(I,"link",S),s.head.appendChild(I),h.instance=I);case"void":return null;default:throw Error(l(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,ad(S,g.precedence,s));return h.instance}function ad(s,h,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=S.length?S[S.length-1]:null,j=I,Q=0;Q<S.length;Q++){var ce=S[Q];if(ce.dataset.precedence===h)j=ce;else if(j!==I)break}j?j.parentNode.insertBefore(s,j.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(s,h.firstChild))}function og(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.title==null&&(s.title=h.title)}function Gy(s,h){s.crossOrigin==null&&(s.crossOrigin=h.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=h.referrerPolicy),s.integrity==null&&(s.integrity=h.integrity)}var dp=null;function pp(s,h,g){if(dp===null){var S=new Map,I=dp=new Map;I.set(g,S)}else I=dp,S=I.get(g),S||(S=new Map,I.set(g,S));if(S.has(s))return S;for(S.set(s,null),g=g.getElementsByTagName(s),I=0;I<g.length;I++){var j=g[I];if(!(j[hr]||j[Fr]||s==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=j.getAttribute(h)||"";Q=s+Q;var ce=S.get(Q);ce?ce.push(j):S.set(Q,[j])}}return S}function mp(s,h,g){s=s.ownerDocument||s,s.head.insertBefore(g,h==="title"?s.querySelector("head > title"):null)}function sg(s,h,g){if(g===1||h.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(s=h.disabled,typeof h.precedence=="string"&&s==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function lg(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function $y(s,h,g,S){if(g.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var I=kh(S.href),j=h.querySelector(nd(I));if(j){h=j._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(s.count++,s=yp.bind(s),h.then(s,s)),g.state.loading|=4,g.instance=j,Cn(j);return}j=h.ownerDocument||h,S=qy(S),(I=kr.get(I))&&og(S,I),j=j.createElement("link"),Cn(j);var Q=j;Q._p=new Promise(function(ce,ze){Q.onload=ce,Q.onerror=ze}),Ai(j,"link",S),g.instance=j}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(g,h),(h=g.state.preload)&&(g.state.loading&3)===0&&(s.count++,g=yp.bind(s),h.addEventListener("load",g),h.addEventListener("error",g))}}var gp=0;function V_(s,h){return s.stylesheets&&s.count===0&&_p(s,s.stylesheets),0<s.count||0<s.imgCount?function(g){var S=setTimeout(function(){if(s.stylesheets&&_p(s,s.stylesheets),s.unsuspend){var j=s.unsuspend;s.unsuspend=null,j()}},6e4+h);0<s.imgBytes&&gp===0&&(gp=62500*rd());var I=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&_p(s,s.stylesheets),s.unsuspend)){var j=s.unsuspend;s.unsuspend=null,j()}},(s.imgBytes>gp?50:800)+h);return s.unsuspend=g,function(){s.unsuspend=null,clearTimeout(S),clearTimeout(I)}}:null}function yp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_p(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var vp=null;function _p(s,h){s.stylesheets=null,s.unsuspend!==null&&(s.count++,vp=new Map,h.forEach(q_,s),vp=null,yp.call(s))}function q_(s,h){if(!(h.state.loading&4)){var g=vp.get(s);if(g)var S=g.get(null);else{g=new Map,vp.set(s,g);for(var I=s.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<I.length;j++){var Q=I[j];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(g.set(Q.dataset.precedence,Q),S=Q)}S&&g.set(null,S)}I=h.instance,Q=I.getAttribute("data-precedence"),j=g.get(Q)||S,j===S&&g.set(null,I),g.set(Q,I),this.count++,S=yp.bind(this),I.addEventListener("load",S),I.addEventListener("error",S),j?j.parentNode.insertBefore(I,j.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(I,s.firstChild)),h.state.loading|=4}}var xp={$$typeof:ge,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function G_(s,h,g,S,I,j,Q,ce,ze){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=S,this.onUncaughtError=I,this.onCaughtError=j,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function $_(s,h,g,S,I,j,Q,ce,ze,rt,gt,St){return s=new G_(s,h,g,Q,ze,rt,gt,St,ce),h=1,j===!0&&(h|=24),j=Ta(3,null,null,h),s.current=j,j.stateNode=s,h=ts(),h.refCount++,s.pooledCache=h,h.refCount++,j.memoizedState={element:S,isDehydrated:g,cache:h},jf(j),s}function Z_(s){return s?(s=pr,s):pr}function ug(s,h,g,S,I,j){I=Z_(I),S.context===null?S.context=I:S.pendingContext=I,S=os(h),S.payload={element:g},j=j===void 0?null:j,j!==null&&(S.callback=j),g=Ds(s,S,h),g!==null&&(uo(g,s,h),eo(g,s,h))}function Zy(s,h){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<h?g:h}}function Hy(s,h){Zy(s,h),(s=s.alternate)&&Zy(s,h)}function H_(s){if(s.tag===13||s.tag===31){var h=Ka(s,67108864);h!==null&&uo(h,s,67108864),Hy(s,67108864)}}function Wy(s){if(s.tag===13||s.tag===31){var h=lo();h=fn(h);var g=Ka(s,h);g!==null&&uo(g,s,h),Hy(s,h)}}var wc=!0;function vb(s,h,g,S){var I=Le.T;Le.T=null;var j=Ge.p;try{Ge.p=2,bp(s,h,g,S)}finally{Ge.p=j,Le.T=I}}function Xy(s,h,g,S){var I=Le.T;Le.T=null;var j=Ge.p;try{Ge.p=8,bp(s,h,g,S)}finally{Ge.p=j,Le.T=I}}function bp(s,h,g,S){if(wc){var I=cg(S);if(I===null)Tl(s,h,S,wu,g),Y_(s,S);else if(_b(I,s,h,g,S))S.stopPropagation();else if(Y_(s,S),h&4&&-1<X_.indexOf(s)){for(;I!==null;){var j=xs(I);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var Q=Me(j.pendingLanes);if(Q!==0){var ce=j;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Q;){var ze=1<<31-Ce(Q);ce.entanglements[1]|=ze,Q&=~ze}Bs(j),(Jr&6)===0&&(rp=ri()+500,Do(0))}}break;case 31:case 13:ce=Ka(j,2),ce!==null&&uo(ce,j,2),ip(),Hy(j,2)}if(j=cg(S),j===null&&Tl(s,h,S,wu,g),j===I)break;I=j}I!==null&&S.stopPropagation()}else Tl(s,h,S,null,g)}}function cg(s){return s=Gc(s),hg(s)}var wu=null;function hg(s){if(wu=null,s=Fo(s),s!==null){var h=v(s);if(h===null)s=null;else{var g=h.tag;if(g===13){if(s=_(h),s!==null)return s;s=null}else if(g===31){if(s=c(h),s!==null)return s;s=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;s=null}else h!==s&&(s=null)}}return wu=s,null}function W_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(va()){case Nu:return 2;case vs:return 8;case _s:case Bc:return 32;case Ks:return 268435456;default:return 32}default:return 32}}var jh=!1,Su=null,Tu=null,Eu=null,wp=new Map,Sp=new Map,Ml=[],X_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y_(s,h){switch(s){case"focusin":case"focusout":Su=null;break;case"dragenter":case"dragleave":Tu=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":wp.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sp.delete(h.pointerId)}}function Tp(s,h,g,S,I,j){return s===null||s.nativeEvent!==j?(s={blockedOn:h,domEventName:g,eventSystemFlags:S,nativeEvent:j,targetContainers:[I]},h!==null&&(h=xs(h),h!==null&&H_(h)),s):(s.eventSystemFlags|=S,h=s.targetContainers,I!==null&&h.indexOf(I)===-1&&h.push(I),s)}function _b(s,h,g,S,I){switch(h){case"focusin":return Su=Tp(Su,s,h,g,S,I),!0;case"dragenter":return Tu=Tp(Tu,s,h,g,S,I),!0;case"mouseover":return Eu=Tp(Eu,s,h,g,S,I),!0;case"pointerover":var j=I.pointerId;return wp.set(j,Tp(wp.get(j)||null,s,h,g,S,I)),!0;case"gotpointercapture":return j=I.pointerId,Sp.set(j,Tp(Sp.get(j)||null,s,h,g,S,I)),!0}return!1}function K_(s){var h=Fo(s.target);if(h!==null){var g=v(h);if(g!==null){if(h=g.tag,h===13){if(h=_(g),h!==null){s.blockedOn=h,an(s.priority,function(){Wy(g)});return}}else if(h===31){if(h=c(g),h!==null){s.blockedOn=h,an(s.priority,function(){Wy(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function fg(s){if(s.blockedOn!==null)return!1;for(var h=s.targetContainers;0<h.length;){var g=cg(s.nativeEvent);if(g===null){g=s.nativeEvent;var S=new g.constructor(g.type,g);wd=S,g.target.dispatchEvent(S),wd=null}else return h=xs(g),h!==null&&H_(h),s.blockedOn=g,!1;h.shift()}return!0}function Yy(s,h,g){fg(s)&&g.delete(h)}function xb(){jh=!1,Su!==null&&fg(Su)&&(Su=null),Tu!==null&&fg(Tu)&&(Tu=null),Eu!==null&&fg(Eu)&&(Eu=null),wp.forEach(Yy),Sp.forEach(Yy)}function Sc(s,h){s.blockedOn===h&&(s.blockedOn=null,jh||(jh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xb)))}var dg=null;function Q_(s){dg!==s&&(dg=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){dg===s&&(dg=null);for(var h=0;h<s.length;h+=3){var g=s[h],S=s[h+1],I=s[h+2];if(typeof S!="function"){if(hg(S||g)===null)continue;break}var j=xs(g);j!==null&&(s.splice(h,3),h-=3,In(j,{pending:!0,data:I,method:g.method,action:S},S,I))}}))}function od(s){function h(ze){return Sc(ze,s)}Su!==null&&Sc(Su,s),Tu!==null&&Sc(Tu,s),Eu!==null&&Sc(Eu,s),wp.forEach(h),Sp.forEach(h);for(var g=0;g<Ml.length;g++){var S=Ml[g];S.blockedOn===s&&(S.blockedOn=null)}for(;0<Ml.length&&(g=Ml[0],g.blockedOn===null);)K_(g),g.blockedOn===null&&Ml.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var I=g[S],j=g[S+1],Q=I[At]||null;if(typeof j=="function")Q||Q_(g);else if(Q){var ce=null;if(j&&j.hasAttribute("formAction")){if(I=j,Q=j[At]||null)ce=Q.formAction;else if(hg(I)!==null)continue}else ce=Q.action;typeof ce=="function"?g[S+1]=ce:(g.splice(S,3),S-=3),Q_(g)}}}function pg(){function s(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(Q){return I=Q})},focusReset:"manual",scroll:"manual"})}function h(){I!==null&&(I(),I=null),S||setTimeout(g,20)}function g(){if(!S&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,I=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(g,100),function(){S=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),I!==null&&(I(),I=null)}}}function mg(s){this._internalRoot=s}gg.prototype.render=mg.prototype.render=function(s){var h=this._internalRoot;if(h===null)throw Error(l(409));var g=h.current,S=lo();ug(g,S,s,h,null,null)},gg.prototype.unmount=mg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var h=s.containerInfo;ug(s.current,2,null,s,null,null),ip(),h[Kt]=null}};function gg(s){this._internalRoot=s}gg.prototype.unstable_scheduleHydration=function(s){if(s){var h=Dr();s={blockedOn:null,target:s,priority:h};for(var g=0;g<Ml.length&&h!==0&&h<Ml[g].priority;g++);Ml.splice(g,0,s),g===0&&K_(s)}};var J_=t.version;if(J_!=="19.2.4")throw Error(l(527,J_,"19.2.4"));Ge.findDOMNode=function(s){var h=s._reactInternals;if(h===void 0)throw typeof s.render=="function"?Error(l(188)):(s=Object.keys(s).join(","),Error(l(268,s)));return s=P(h),s=s!==null?D(s):null,s=s===null?null:s.stateNode,s};var e0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Le,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ep=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ep.isDisabled&&Ep.supportsFiber)try{ne=Ep.inject(e0),ae=Ep}catch{}}return tv.createRoot=function(s,h){if(!m(s))throw Error(l(299));var g=!1,S="",I=Uf,j=Rs,Q=Ls;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(I=h.onUncaughtError),h.onCaughtError!==void 0&&(j=h.onCaughtError),h.onRecoverableError!==void 0&&(Q=h.onRecoverableError)),h=$_(s,1,!1,null,null,g,S,null,I,j,Q,pg),s[Kt]=h.current,Iy(s),new mg(h)},tv.hydrateRoot=function(s,h,g){if(!m(s))throw Error(l(299));var S=!1,I="",j=Uf,Q=Rs,ce=Ls,ze=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(I=g.identifierPrefix),g.onUncaughtError!==void 0&&(j=g.onUncaughtError),g.onCaughtError!==void 0&&(Q=g.onCaughtError),g.onRecoverableError!==void 0&&(ce=g.onRecoverableError),g.formState!==void 0&&(ze=g.formState)),h=$_(s,1,!0,h,g??null,S,I,ze,j,Q,ce,pg),h.context=Z_(null),g=h.current,S=lo(),S=fn(S),I=os(S),I.callback=null,Ds(g,I,S),g=S,h.current.lanes=g,ir(h,g),Bs(h),s[Kt]=h.current,Iy(s),new gg(h)},tv.version="19.2.4",tv}var AT;function hR(){if(AT)return zb.exports;AT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zb.exports=cR(),zb.exports}var fR=hR();var MT="popstate";function dR(e={}){function t(l,m){let{pathname:v,search:_,hash:c}=l.location;return _w("",{pathname:v,search:_,hash:c},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function i(l,m){return typeof m=="string"?m:yv(m)}return mR(t,i,null,e)}function li(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ic(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pR(){return Math.random().toString(36).substring(2,10)}function CT(e,t){return{usr:e.state,key:e.key,idx:t}}function _w(e,t,i=null,l){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ug(t):t,state:i,key:t&&t.key||l||pR()}}function yv({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ug(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let l=e.indexOf("?");l>=0&&(t.search=e.substring(l),e=e.substring(0,l)),e&&(t.pathname=e)}return t}function mR(e,t,i,l={}){let{window:m=document.defaultView,v5Compat:v=!1}=l,_=m.history,c="POP",M=null,P=D();P==null&&(P=0,_.replaceState({..._.state,idx:P},""));function D(){return(_.state||{idx:null}).idx}function z(){c="POP";let q=D(),he=q==null?null:q-P;P=q,M&&M({action:c,location:K.location,delta:he})}function F(q,he){c="PUSH";let ye=_w(K.location,q,he);P=D()+1;let ge=CT(ye,P),Te=K.createHref(ye);try{_.pushState(ge,"",Te)}catch(ke){if(ke instanceof DOMException&&ke.name==="DataCloneError")throw ke;m.location.assign(Te)}v&&M&&M({action:c,location:K.location,delta:1})}function $(q,he){c="REPLACE";let ye=_w(K.location,q,he);P=D();let ge=CT(ye,P),Te=K.createHref(ye);_.replaceState(ge,"",Te),v&&M&&M({action:c,location:K.location,delta:0})}function Y(q){return gR(q)}let K={get action(){return c},get location(){return e(m,_)},listen(q){if(M)throw new Error("A history only accepts one active listener");return m.addEventListener(MT,z),M=q,()=>{m.removeEventListener(MT,z),M=null}},createHref(q){return t(m,q)},createURL:Y,encodeLocation(q){let he=Y(q);return{pathname:he.pathname,search:he.search,hash:he.hash}},push:F,replace:$,go(q){return _.go(q)}};return K}function gR(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),li(i,"No window.location.(origin|href) available to create URL");let l=typeof e=="string"?e:yv(e);return l=l.replace(/ $/,"%20"),!t&&l.startsWith("//")&&(l=i+l),new URL(l,i)}function hP(e,t,i="/"){return yR(e,t,i,!1)}function yR(e,t,i,l){let m=typeof t=="string"?Ug(t):t,v=Hh(m.pathname||"/",i);if(v==null)return null;let _=fP(e);vR(_);let c=null;for(let M=0;c==null&&M<_.length;++M){let P=PR(v);c=MR(_[M],P,l)}return c}function fP(e,t=[],i=[],l="",m=!1){let v=(_,c,M=m,P)=>{let D={relativePath:P===void 0?_.path||"":P,caseSensitive:_.caseSensitive===!0,childrenIndex:c,route:_};if(D.relativePath.startsWith("/")){if(!D.relativePath.startsWith(l)&&M)return;li(D.relativePath.startsWith(l),`Absolute route path "${D.relativePath}" nested under path "${l}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),D.relativePath=D.relativePath.slice(l.length)}let z=Gh([l,D.relativePath]),F=i.concat(D);_.children&&_.children.length>0&&(li(_.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${z}".`),fP(_.children,t,F,z,M)),!(_.path==null&&!_.index)&&t.push({path:z,score:ER(z,_.index),routesMeta:F})};return e.forEach((_,c)=>{if(_.path===""||!_.path?.includes("?"))v(_,c);else for(let M of dP(_.path))v(_,c,!0,M)}),t}function dP(e){let t=e.split("/");if(t.length===0)return[];let[i,...l]=t,m=i.endsWith("?"),v=i.replace(/\?$/,"");if(l.length===0)return m?[v,""]:[v];let _=dP(l.join("/")),c=[];return c.push(..._.map(M=>M===""?v:[v,M].join("/"))),m&&c.push(..._),c.map(M=>e.startsWith("/")&&M===""?"/":M)}function vR(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:AR(t.routesMeta.map(l=>l.childrenIndex),i.routesMeta.map(l=>l.childrenIndex)))}var _R=/^:[\w-]+$/,xR=3,bR=2,wR=1,SR=10,TR=-2,PT=e=>e==="*";function ER(e,t){let i=e.split("/"),l=i.length;return i.some(PT)&&(l+=TR),t&&(l+=bR),i.filter(m=>!PT(m)).reduce((m,v)=>m+(_R.test(v)?xR:v===""?wR:SR),l)}function AR(e,t){return e.length===t.length&&e.slice(0,-1).every((l,m)=>l===t[m])?e[e.length-1]-t[t.length-1]:0}function MR(e,t,i=!1){let{routesMeta:l}=e,m={},v="/",_=[];for(let c=0;c<l.length;++c){let M=l[c],P=c===l.length-1,D=v==="/"?t:t.slice(v.length)||"/",z=I0({path:M.relativePath,caseSensitive:M.caseSensitive,end:P},D),F=M.route;if(!z&&P&&i&&!l[l.length-1].route.index&&(z=I0({path:M.relativePath,caseSensitive:M.caseSensitive,end:!1},D)),!z)return null;Object.assign(m,z.params),_.push({params:m,pathname:Gh([v,z.pathname]),pathnameBase:zR(Gh([v,z.pathnameBase])),route:F}),z.pathnameBase!=="/"&&(v=Gh([v,z.pathnameBase]))}return _}function I0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,l]=CR(e.path,e.caseSensitive,e.end),m=t.match(i);if(!m)return null;let v=m[0],_=v.replace(/(.)\/+$/,"$1"),c=m.slice(1);return{params:l.reduce((P,{paramName:D,isOptional:z},F)=>{if(D==="*"){let Y=c[F]||"";_=v.slice(0,v.length-Y.length).replace(/(.)\/+$/,"$1")}const $=c[F];return z&&!$?P[D]=void 0:P[D]=($||"").replace(/%2F/g,"/"),P},{}),pathname:v,pathnameBase:_,pattern:e}}function CR(e,t=!1,i=!0){Ic(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let l=[],m="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,c,M)=>(l.push({paramName:c,isOptional:M!=null}),M?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(l.push({paramName:"*"}),m+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?m+="\\/*$":e!==""&&e!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,t?void 0:"i"),l]}function PR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ic(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Hh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,l=e.charAt(i);return l&&l!=="/"?null:e.slice(i)||"/"}var DR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function OR(e,t="/"){let{pathname:i,search:l="",hash:m=""}=typeof e=="string"?Ug(e):e,v;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?v=DT(i.substring(1),"/"):v=DT(i,t)):v=t,{pathname:v,search:kR(l),hash:RR(m)}}function DT(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(m=>{m===".."?i.length>1&&i.pop():m!=="."&&i.push(m)}),i.length>1?i.join("/"):"/"}function jb(e,t,i,l){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(l)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IR(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function pP(e){let t=IR(e);return t.map((i,l)=>l===t.length-1?i.pathname:i.pathnameBase)}function mP(e,t,i,l=!1){let m;typeof e=="string"?m=Ug(e):(m={...e},li(!m.pathname||!m.pathname.includes("?"),jb("?","pathname","search",m)),li(!m.pathname||!m.pathname.includes("#"),jb("#","pathname","hash",m)),li(!m.search||!m.search.includes("#"),jb("#","search","hash",m)));let v=e===""||m.pathname==="",_=v?"/":m.pathname,c;if(_==null)c=i;else{let z=t.length-1;if(!l&&_.startsWith("..")){let F=_.split("/");for(;F[0]==="..";)F.shift(),z-=1;m.pathname=F.join("/")}c=z>=0?t[z]:"/"}let M=OR(m,c),P=_&&_!=="/"&&_.endsWith("/"),D=(v||_===".")&&i.endsWith("/");return!M.pathname.endsWith("/")&&(P||D)&&(M.pathname+="/"),M}var Gh=e=>e.join("/").replace(/\/\/+/g,"/"),zR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,LR=class{constructor(e,t,i,l=!1){this.status=e,this.statusText=t||"",this.internal=l,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function jR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function NR(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var gP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function yP(e,t){let i=e;if(typeof i!="string"||!DR.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let l=i,m=!1;if(gP)try{let v=new URL(window.location.href),_=i.startsWith("//")?new URL(v.protocol+i):new URL(i),c=Hh(_.pathname,t);_.origin===v.origin&&c!=null?i=c+_.search+_.hash:m=!0}catch{Ic(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:l,isExternal:m,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vP=["POST","PUT","PATCH","DELETE"];new Set(vP);var BR=["GET",...vP];new Set(BR);var Vg=H.createContext(null);Vg.displayName="DataRouter";var Tx=H.createContext(null);Tx.displayName="DataRouterState";var FR=H.createContext(!1),_P=H.createContext({isTransitioning:!1});_P.displayName="ViewTransition";var UR=H.createContext(new Map);UR.displayName="Fetchers";var VR=H.createContext(null);VR.displayName="Await";var jl=H.createContext(null);jl.displayName="Navigation";var Rv=H.createContext(null);Rv.displayName="Location";var tf=H.createContext({outlet:null,matches:[],isDataRoute:!1});tf.displayName="Route";var v2=H.createContext(null);v2.displayName="RouteError";var xP="REACT_ROUTER_ERROR",qR="REDIRECT",GR="ROUTE_ERROR_RESPONSE";function $R(e){if(e.startsWith(`${xP}:${qR}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function ZR(e){if(e.startsWith(`${xP}:${GR}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new LR(t.status,t.statusText,t.data)}catch{}}function HR(e,{relative:t}={}){li(Lv(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:l}=H.useContext(jl),{hash:m,pathname:v,search:_}=jv(e,{relative:t}),c=v;return i!=="/"&&(c=v==="/"?i:Gh([i,v])),l.createHref({pathname:c,search:_,hash:m})}function Lv(){return H.useContext(Rv)!=null}function yd(){return li(Lv(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Rv).location}var bP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wP(e){H.useContext(jl).static||H.useLayoutEffect(e)}function WR(){let{isDataRoute:e}=H.useContext(tf);return e?sL():XR()}function XR(){li(Lv(),"useNavigate() may be used only in the context of a <Router> component.");let e=H.useContext(Vg),{basename:t,navigator:i}=H.useContext(jl),{matches:l}=H.useContext(tf),{pathname:m}=yd(),v=JSON.stringify(pP(l)),_=H.useRef(!1);return wP(()=>{_.current=!0}),H.useCallback((M,P={})=>{if(Ic(_.current,bP),!_.current)return;if(typeof M=="number"){i.go(M);return}let D=mP(M,JSON.parse(v),m,P.relative==="path");e==null&&t!=="/"&&(D.pathname=D.pathname==="/"?t:Gh([t,D.pathname])),(P.replace?i.replace:i.push)(D,P.state,P)},[t,i,v,m,e])}H.createContext(null);function jv(e,{relative:t}={}){let{matches:i}=H.useContext(tf),{pathname:l}=yd(),m=JSON.stringify(pP(i));return H.useMemo(()=>mP(e,JSON.parse(m),l,t==="path"),[e,m,l,t])}function YR(e,t){return SP(e,t)}function SP(e,t,i,l,m){li(Lv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:v}=H.useContext(jl),{matches:_}=H.useContext(tf),c=_[_.length-1],M=c?c.params:{},P=c?c.pathname:"/",D=c?c.pathnameBase:"/",z=c&&c.route;{let ye=z&&z.path||"";EP(P,!z||ye.endsWith("*")||ye.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${P}" (under <Route path="${ye}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ye}"> to <Route path="${ye==="/"?"*":`${ye}/*`}">.`)}let F=yd(),$;if(t){let ye=typeof t=="string"?Ug(t):t;li(D==="/"||ye.pathname?.startsWith(D),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${D}" but pathname "${ye.pathname}" was given in the \`location\` prop.`),$=ye}else $=F;let Y=$.pathname||"/",K=Y;if(D!=="/"){let ye=D.replace(/^\//,"").split("/");K="/"+Y.replace(/^\//,"").split("/").slice(ye.length).join("/")}let q=hP(e,{pathname:K});Ic(z||q!=null,`No routes matched location "${$.pathname}${$.search}${$.hash}" `),Ic(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${$.pathname}${$.search}${$.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let he=tL(q&&q.map(ye=>Object.assign({},ye,{params:Object.assign({},M,ye.params),pathname:Gh([D,v.encodeLocation?v.encodeLocation(ye.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ye.pathname]),pathnameBase:ye.pathnameBase==="/"?D:Gh([D,v.encodeLocation?v.encodeLocation(ye.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ye.pathnameBase])})),_,i,l,m);return t&&he?H.createElement(Rv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...$},navigationType:"POP"}},he):he}function KR(){let e=oL(),t=jR(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,l="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:l},v={padding:"2px 4px",backgroundColor:l},_=null;return console.error("Error handled by React Router default ErrorBoundary:",e),_=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:v},"ErrorBoundary")," or"," ",H.createElement("code",{style:v},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),i?H.createElement("pre",{style:m},i):null,_)}var QR=H.createElement(KR,null),TP=class extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const i=ZR(e.digest);i&&(e=i)}let t=e!==void 0?H.createElement(tf.Provider,{value:this.props.routeContext},H.createElement(v2.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?H.createElement(JR,{error:e},t):t}};TP.contextType=FR;var Nb=new WeakMap;function JR({children:e,error:t}){let{basename:i}=H.useContext(jl);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let l=$R(t.digest);if(l){let m=Nb.get(t);if(m)throw m;let v=yP(l.location,i);if(gP&&!Nb.get(t))if(v.isExternal||l.reloadDocument)window.location.href=v.absoluteURL||v.to;else{const _=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(v.to,{replace:l.replace}));throw Nb.set(t,_),_}return H.createElement("meta",{httpEquiv:"refresh",content:`0;url=${v.absoluteURL||v.to}`})}}return e}function eL({routeContext:e,match:t,children:i}){let l=H.useContext(Vg);return l&&l.static&&l.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(tf.Provider,{value:e},i)}function tL(e,t=[],i=null,l=null,m=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let v=e,_=i?.errors;if(_!=null){let D=v.findIndex(z=>z.route.id&&_?.[z.route.id]!==void 0);li(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(_).join(",")}`),v=v.slice(0,Math.min(v.length,D+1))}let c=!1,M=-1;if(i)for(let D=0;D<v.length;D++){let z=v[D];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(M=D),z.route.id){let{loaderData:F,errors:$}=i,Y=z.route.loader&&!F.hasOwnProperty(z.route.id)&&(!$||$[z.route.id]===void 0);if(z.route.lazy||Y){c=!0,M>=0?v=v.slice(0,M+1):v=[v[0]];break}}}let P=i&&l?(D,z)=>{l(D,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:NR(i.matches),errorInfo:z})}:void 0;return v.reduceRight((D,z,F)=>{let $,Y=!1,K=null,q=null;i&&($=_&&z.route.id?_[z.route.id]:void 0,K=z.route.errorElement||QR,c&&(M<0&&F===0?(EP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,q=null):M===F&&(Y=!0,q=z.route.hydrateFallbackElement||null)));let he=t.concat(v.slice(0,F+1)),ye=()=>{let ge;return $?ge=K:Y?ge=q:z.route.Component?ge=H.createElement(z.route.Component,null):z.route.element?ge=z.route.element:ge=D,H.createElement(eL,{match:z,routeContext:{outlet:D,matches:he,isDataRoute:i!=null},children:ge})};return i&&(z.route.ErrorBoundary||z.route.errorElement||F===0)?H.createElement(TP,{location:i.location,revalidation:i.revalidation,component:K,error:$,children:ye(),routeContext:{outlet:null,matches:he,isDataRoute:!0},onError:P}):ye()},null)}function _2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rL(e){let t=H.useContext(Vg);return li(t,_2(e)),t}function nL(e){let t=H.useContext(Tx);return li(t,_2(e)),t}function iL(e){let t=H.useContext(tf);return li(t,_2(e)),t}function x2(e){let t=iL(e),i=t.matches[t.matches.length-1];return li(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function aL(){return x2("useRouteId")}function oL(){let e=H.useContext(v2),t=nL("useRouteError"),i=x2("useRouteError");return e!==void 0?e:t.errors?.[i]}function sL(){let{router:e}=rL("useNavigate"),t=x2("useNavigate"),i=H.useRef(!1);return wP(()=>{i.current=!0}),H.useCallback(async(m,v={})=>{Ic(i.current,bP),i.current&&(typeof m=="number"?await e.navigate(m):await e.navigate(m,{fromRouteId:t,...v}))},[e,t])}var OT={};function EP(e,t,i){!t&&!OT[e]&&(OT[e]=!0,Ic(!1,i))}H.memo(lL);function lL({routes:e,future:t,state:i,onError:l}){return SP(e,void 0,i,l,t)}function Tg(e){li(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uL({basename:e="/",children:t=null,location:i,navigationType:l="POP",navigator:m,static:v=!1,unstable_useTransitions:_}){li(!Lv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),M=H.useMemo(()=>({basename:c,navigator:m,static:v,unstable_useTransitions:_,future:{}}),[c,m,v,_]);typeof i=="string"&&(i=Ug(i));let{pathname:P="/",search:D="",hash:z="",state:F=null,key:$="default"}=i,Y=H.useMemo(()=>{let K=Hh(P,c);return K==null?null:{location:{pathname:K,search:D,hash:z,state:F,key:$},navigationType:l}},[c,P,D,z,F,$,l]);return Ic(Y!=null,`<Router basename="${c}"> is not able to match the URL "${P}${D}${z}" because it does not start with the basename, so the <Router> won't render anything.`),Y==null?null:H.createElement(jl.Provider,{value:M},H.createElement(Rv.Provider,{children:t,value:Y}))}function cL({children:e,location:t}){return YR(xw(e),t)}function xw(e,t=[]){let i=[];return H.Children.forEach(e,(l,m)=>{if(!H.isValidElement(l))return;let v=[...t,m];if(l.type===H.Fragment){i.push.apply(i,xw(l.props.children,v));return}li(l.type===Tg,`[${typeof l.type=="string"?l.type:l.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),li(!l.props.index||!l.props.children,"An index route cannot have child routes.");let _={id:l.props.id||v.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,middleware:l.props.middleware,loader:l.props.loader,action:l.props.action,hydrateFallbackElement:l.props.hydrateFallbackElement,HydrateFallback:l.props.HydrateFallback,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.hasErrorBoundary===!0||l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(_.children=xw(l.props.children,v)),i.push(_)}),i}var w0="get",S0="application/x-www-form-urlencoded";function Ex(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function hL(e){return Ex(e)&&e.tagName.toLowerCase()==="button"}function fL(e){return Ex(e)&&e.tagName.toLowerCase()==="form"}function dL(e){return Ex(e)&&e.tagName.toLowerCase()==="input"}function pL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mL(e,t){return e.button===0&&(!t||t==="_self")&&!pL(e)}var i0=null;function gL(){if(i0===null)try{new FormData(document.createElement("form"),0),i0=!1}catch{i0=!0}return i0}var yL=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bb(e){return e!=null&&!yL.has(e)?(Ic(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${S0}"`),null):e}function vL(e,t){let i,l,m,v,_;if(fL(e)){let c=e.getAttribute("action");l=c?Hh(c,t):null,i=e.getAttribute("method")||w0,m=Bb(e.getAttribute("enctype"))||S0,v=new FormData(e)}else if(hL(e)||dL(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let M=e.getAttribute("formaction")||c.getAttribute("action");if(l=M?Hh(M,t):null,i=e.getAttribute("formmethod")||c.getAttribute("method")||w0,m=Bb(e.getAttribute("formenctype"))||Bb(c.getAttribute("enctype"))||S0,v=new FormData(c,e),!gL()){let{name:P,type:D,value:z}=e;if(D==="image"){let F=P?`${P}.`:"";v.append(`${F}x`,"0"),v.append(`${F}y`,"0")}else P&&v.append(P,z)}}else{if(Ex(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=w0,l=null,m=S0,_=e}return v&&m==="text/plain"&&(_=v,v=void 0),{action:l,method:i.toLowerCase(),encType:m,formData:v,body:_}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function b2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _L(e,t,i,l){let m=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${l}`:m.pathname=`${m.pathname}.${l}`:m.pathname==="/"?m.pathname=`_root.${l}`:t&&Hh(m.pathname,t)==="/"?m.pathname=`${t.replace(/\/$/,"")}/_root.${l}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${l}`,m}async function xL(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bL(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function wL(e,t,i){let l=await Promise.all(e.map(async m=>{let v=t.routes[m.route.id];if(v){let _=await xL(v,i);return _.links?_.links():[]}return[]}));return AL(l.flat(1).filter(bL).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function IT(e,t,i,l,m,v){let _=(M,P)=>i[P]?M.route.id!==i[P].route.id:!0,c=(M,P)=>i[P].pathname!==M.pathname||i[P].route.path?.endsWith("*")&&i[P].params["*"]!==M.params["*"];return v==="assets"?t.filter((M,P)=>_(M,P)||c(M,P)):v==="data"?t.filter((M,P)=>{let D=l.routes[M.route.id];if(!D||!D.hasLoader)return!1;if(_(M,P)||c(M,P))return!0;if(M.route.shouldRevalidate){let z=M.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:M.params,defaultShouldRevalidate:!0});if(typeof z=="boolean")return z}return!0}):[]}function SL(e,t,{includeHydrateFallback:i}={}){return TL(e.map(l=>{let m=t.routes[l.route.id];if(!m)return[];let v=[m.module];return m.clientActionModule&&(v=v.concat(m.clientActionModule)),m.clientLoaderModule&&(v=v.concat(m.clientLoaderModule)),i&&m.hydrateFallbackModule&&(v=v.concat(m.hydrateFallbackModule)),m.imports&&(v=v.concat(m.imports)),v}).flat(1))}function TL(e){return[...new Set(e)]}function EL(e){let t={},i=Object.keys(e).sort();for(let l of i)t[l]=e[l];return t}function AL(e,t){let i=new Set;return new Set(t),e.reduce((l,m)=>{let v=JSON.stringify(EL(m));return i.has(v)||(i.add(v),l.push({key:v,link:m})),l},[])}function AP(){let e=H.useContext(Vg);return b2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ML(){let e=H.useContext(Tx);return b2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var w2=H.createContext(void 0);w2.displayName="FrameworkContext";function MP(){let e=H.useContext(w2);return b2(e,"You must render this element inside a <HydratedRouter> element"),e}function CL(e,t){let i=H.useContext(w2),[l,m]=H.useState(!1),[v,_]=H.useState(!1),{onFocus:c,onBlur:M,onMouseEnter:P,onMouseLeave:D,onTouchStart:z}=t,F=H.useRef(null);H.useEffect(()=>{if(e==="render"&&_(!0),e==="viewport"){let K=he=>{he.forEach(ye=>{_(ye.isIntersecting)})},q=new IntersectionObserver(K,{threshold:.5});return F.current&&q.observe(F.current),()=>{q.disconnect()}}},[e]),H.useEffect(()=>{if(l){let K=setTimeout(()=>{_(!0)},100);return()=>{clearTimeout(K)}}},[l]);let $=()=>{m(!0)},Y=()=>{m(!1),_(!1)};return i?e!=="intent"?[v,F,{}]:[v,F,{onFocus:rv(c,$),onBlur:rv(M,Y),onMouseEnter:rv(P,$),onMouseLeave:rv(D,Y),onTouchStart:rv(z,$)}]:[!1,F,{}]}function rv(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function PL({page:e,...t}){let{router:i}=AP(),l=H.useMemo(()=>hP(i.routes,e,i.basename),[i.routes,e,i.basename]);return l?H.createElement(OL,{page:e,matches:l,...t}):null}function DL(e){let{manifest:t,routeModules:i}=MP(),[l,m]=H.useState([]);return H.useEffect(()=>{let v=!1;return wL(e,t,i).then(_=>{v||m(_)}),()=>{v=!0}},[e,t,i]),l}function OL({page:e,matches:t,...i}){let l=yd(),{future:m,manifest:v,routeModules:_}=MP(),{basename:c}=AP(),{loaderData:M,matches:P}=ML(),D=H.useMemo(()=>IT(e,t,P,v,l,"data"),[e,t,P,v,l]),z=H.useMemo(()=>IT(e,t,P,v,l,"assets"),[e,t,P,v,l]),F=H.useMemo(()=>{if(e===l.pathname+l.search+l.hash)return[];let K=new Set,q=!1;if(t.forEach(ye=>{let ge=v.routes[ye.route.id];!ge||!ge.hasLoader||(!D.some(Te=>Te.route.id===ye.route.id)&&ye.route.id in M&&_[ye.route.id]?.shouldRevalidate||ge.hasClientLoader?q=!0:K.add(ye.route.id))}),K.size===0)return[];let he=_L(e,c,m.unstable_trailingSlashAwareDataRequests,"data");return q&&K.size>0&&he.searchParams.set("_routes",t.filter(ye=>K.has(ye.route.id)).map(ye=>ye.route.id).join(",")),[he.pathname+he.search]},[c,m.unstable_trailingSlashAwareDataRequests,M,l,v,D,t,e,_]),$=H.useMemo(()=>SL(z,v),[z,v]),Y=DL(z);return H.createElement(H.Fragment,null,F.map(K=>H.createElement("link",{key:K,rel:"prefetch",as:"fetch",href:K,...i})),$.map(K=>H.createElement("link",{key:K,rel:"modulepreload",href:K,...i})),Y.map(({key:K,link:q})=>H.createElement("link",{key:K,nonce:i.nonce,...q,crossOrigin:q.crossOrigin??i.crossOrigin})))}function IL(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var zL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zL&&(window.__reactRouterVersion="7.13.0")}catch{}function kL({basename:e,children:t,unstable_useTransitions:i,window:l}){let m=H.useRef();m.current==null&&(m.current=dR({window:l,v5Compat:!0}));let v=m.current,[_,c]=H.useState({action:v.action,location:v.location}),M=H.useCallback(P=>{i===!1?c(P):H.startTransition(()=>c(P))},[i]);return H.useLayoutEffect(()=>v.listen(M),[v,M]),H.createElement(uL,{basename:e,children:t,location:_.location,navigationType:_.action,navigator:v,unstable_useTransitions:i})}var CP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Og=H.forwardRef(function({onClick:t,discover:i="render",prefetch:l="none",relative:m,reloadDocument:v,replace:_,state:c,target:M,to:P,preventScrollReset:D,viewTransition:z,unstable_defaultShouldRevalidate:F,...$},Y){let{basename:K,unstable_useTransitions:q}=H.useContext(jl),he=typeof P=="string"&&CP.test(P),ye=yP(P,K);P=ye.to;let ge=HR(P,{relative:m}),[Te,ke,Pe]=CL(l,$),Re=NL(P,{replace:_,state:c,target:M,preventScrollReset:D,relative:m,viewTransition:z,unstable_defaultShouldRevalidate:F,unstable_useTransitions:q});function ot(kt){t&&t(kt),kt.defaultPrevented||Re(kt)}let bt=H.createElement("a",{...$,...Pe,href:ye.absoluteURL||ge,onClick:ye.isExternal||v?t:ot,ref:IL(Y,ke),target:M,"data-discover":!he&&i==="render"?"true":void 0});return Te&&!he?H.createElement(H.Fragment,null,bt,H.createElement(PL,{page:ge})):bt});Og.displayName="Link";var RL=H.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:l="",end:m=!1,style:v,to:_,viewTransition:c,children:M,...P},D){let z=jv(_,{relative:P.relative}),F=yd(),$=H.useContext(Tx),{navigator:Y,basename:K}=H.useContext(jl),q=$!=null&&qL(z)&&c===!0,he=Y.encodeLocation?Y.encodeLocation(z).pathname:z.pathname,ye=F.pathname,ge=$&&$.navigation&&$.navigation.location?$.navigation.location.pathname:null;i||(ye=ye.toLowerCase(),ge=ge?ge.toLowerCase():null,he=he.toLowerCase()),ge&&K&&(ge=Hh(ge,K)||ge);const Te=he!=="/"&&he.endsWith("/")?he.length-1:he.length;let ke=ye===he||!m&&ye.startsWith(he)&&ye.charAt(Te)==="/",Pe=ge!=null&&(ge===he||!m&&ge.startsWith(he)&&ge.charAt(he.length)==="/"),Re={isActive:ke,isPending:Pe,isTransitioning:q},ot=ke?t:void 0,bt;typeof l=="function"?bt=l(Re):bt=[l,ke?"active":null,Pe?"pending":null,q?"transitioning":null].filter(Boolean).join(" ");let kt=typeof v=="function"?v(Re):v;return H.createElement(Og,{...P,"aria-current":ot,className:bt,ref:D,style:kt,to:_,viewTransition:c},typeof M=="function"?M(Re):M)});RL.displayName="NavLink";var LL=H.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:l,replace:m,state:v,method:_=w0,action:c,onSubmit:M,relative:P,preventScrollReset:D,viewTransition:z,unstable_defaultShouldRevalidate:F,...$},Y)=>{let{unstable_useTransitions:K}=H.useContext(jl),q=UL(),he=VL(c,{relative:P}),ye=_.toLowerCase()==="get"?"get":"post",ge=typeof c=="string"&&CP.test(c),Te=ke=>{if(M&&M(ke),ke.defaultPrevented)return;ke.preventDefault();let Pe=ke.nativeEvent.submitter,Re=Pe?.getAttribute("formmethod")||_,ot=()=>q(Pe||ke.currentTarget,{fetcherKey:t,method:Re,navigate:i,replace:m,state:v,relative:P,preventScrollReset:D,viewTransition:z,unstable_defaultShouldRevalidate:F});K&&i!==!1?H.startTransition(()=>ot()):ot()};return H.createElement("form",{ref:Y,method:ye,action:he,onSubmit:l?M:Te,...$,"data-discover":!ge&&e==="render"?"true":void 0})});LL.displayName="Form";function jL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PP(e){let t=H.useContext(Vg);return li(t,jL(e)),t}function NL(e,{target:t,replace:i,state:l,preventScrollReset:m,relative:v,viewTransition:_,unstable_defaultShouldRevalidate:c,unstable_useTransitions:M}={}){let P=WR(),D=yd(),z=jv(e,{relative:v});return H.useCallback(F=>{if(mL(F,t)){F.preventDefault();let $=i!==void 0?i:yv(D)===yv(z),Y=()=>P(e,{replace:$,state:l,preventScrollReset:m,relative:v,viewTransition:_,unstable_defaultShouldRevalidate:c});M?H.startTransition(()=>Y()):Y()}},[D,P,z,i,l,t,e,m,v,_,c,M])}var BL=0,FL=()=>`__${String(++BL)}__`;function UL(){let{router:e}=PP("useSubmit"),{basename:t}=H.useContext(jl),i=aL(),l=e.fetch,m=e.navigate;return H.useCallback(async(v,_={})=>{let{action:c,method:M,encType:P,formData:D,body:z}=vL(v,t);if(_.navigate===!1){let F=_.fetcherKey||FL();await l(F,i,_.action||c,{unstable_defaultShouldRevalidate:_.unstable_defaultShouldRevalidate,preventScrollReset:_.preventScrollReset,formData:D,body:z,formMethod:_.method||M,formEncType:_.encType||P,flushSync:_.flushSync})}else await m(_.action||c,{unstable_defaultShouldRevalidate:_.unstable_defaultShouldRevalidate,preventScrollReset:_.preventScrollReset,formData:D,body:z,formMethod:_.method||M,formEncType:_.encType||P,replace:_.replace,state:_.state,fromRouteId:i,flushSync:_.flushSync,viewTransition:_.viewTransition})},[l,m,t,i])}function VL(e,{relative:t}={}){let{basename:i}=H.useContext(jl),l=H.useContext(tf);li(l,"useFormAction must be used inside a RouteContext");let[m]=l.matches.slice(-1),v={...jv(e||".",{relative:t})},_=yd();if(e==null){v.search=_.search;let c=new URLSearchParams(v.search),M=c.getAll("index");if(M.some(D=>D==="")){c.delete("index"),M.filter(z=>z).forEach(z=>c.append("index",z));let D=c.toString();v.search=D?`?${D}`:""}}return(!e||e===".")&&m.route.index&&(v.search=v.search?v.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(v.pathname=v.pathname==="/"?i:Gh([i,v.pathname])),yv(v)}function qL(e,{relative:t}={}){let i=H.useContext(_P);li(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=PP("useViewTransitionState"),m=jv(e,{relative:t});if(!i.isTransitioning)return!1;let v=Hh(i.currentLocation.pathname,l)||i.currentLocation.pathname,_=Hh(i.nextLocation.pathname,l)||i.nextLocation.pathname;return I0(m.pathname,_)!=null||I0(m.pathname,v)!=null}var DP=cP();const GL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$L=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,l)=>l?l.toUpperCase():i.toLowerCase()),zT=e=>{const t=$L(e);return t.charAt(0).toUpperCase()+t.slice(1)},OP=(...e)=>e.filter((t,i,l)=>!!t&&t.trim()!==""&&l.indexOf(t)===i).join(" ").trim(),ZL=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var HL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const WL=H.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:m="",children:v,iconNode:_,...c},M)=>H.createElement("svg",{ref:M,...HL,width:t,height:t,stroke:e,strokeWidth:l?Number(i)*24/Number(t):i,className:OP("lucide",m),...!v&&!ZL(c)&&{"aria-hidden":"true"},...c},[..._.map(([P,D])=>H.createElement(P,D)),...Array.isArray(v)?v:[v]]));const ps=(e,t)=>{const i=H.forwardRef(({className:l,...m},v)=>H.createElement(WL,{ref:v,iconNode:t,className:OP(`lucide-${GL(zT(e))}`,`lucide-${e}`,l),...m}));return i.displayName=zT(e),i};const XL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],kT=ps("chart-line",XL);const YL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ig=ps("chevron-down",YL);const KL=[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]],QL=ps("chevrons-down",KL);const JL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],e3=ps("circle-alert",JL);const t3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],r3=ps("clock",t3);const n3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],i3=ps("house",n3);const a3=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],o3=ps("layers",a3);const s3=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],IP=ps("map",s3);const l3=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],u3=ps("menu",l3);const c3=[["path",{d:"M5 12h14",key:"1ays0h"}]],h3=ps("minus",c3);const f3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],d3=ps("plus",f3);const p3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],m3=ps("trending-up",p3);const g3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],y3=ps("trophy",g3);const v3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],S2=ps("x",v3),_3="/unfpa-dashboard/assets/undp-BN7dWDkM.png",x3=()=>{const[e,t]=H.useState(!1),i=yd(),l=[{label:"Home",path:"/"},{label:"About",path:"/about"},{label:"Methodology",path:"/methodology"},{label:"Analytics",path:"/analytics"},{label:"Data Catalog",path:"/catalog"}];return le.jsxs("header",{className:"w-full h-16 relative z-50 bg-white border-b border-gray-200 shadow-sm flex items-center justify-between px-6",children:[le.jsx("div",{className:"flex items-center gap-4",children:le.jsxs(Og,{to:"/",className:"flex items-center gap-4 hover:opacity-90 transition-opacity",children:[le.jsx("img",{src:_3,alt:"UNFPA Logo",className:"h-8 w-auto object-contain"}),le.jsxs("div",{className:"flex flex-col",children:[le.jsx("span",{className:"font-bold text-[15px] text-gray-900 leading-tight tracking-tight",children:"Odisha Demographic & Data Intelligence Platform"}),le.jsx("span",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mt-1",children:"UNFPA India (Odisha State Office) initiative"})]})]})}),le.jsxs("div",{className:"flex items-center gap-8",children:[le.jsx("nav",{className:"hidden md:flex items-center gap-8 text-sm font-bold text-gray-600",children:l.map(m=>{const v=i.pathname===m.path;return le.jsx(Og,{to:m.path,className:`transition-colors py-2 font-[400] ${v?"text-orange-500":"hover:text-orange-500 text-gray-600"}`,children:m.label},m.path)})}),le.jsxs("div",{className:"flex md:hidden items-center z-[100]",children:[le.jsx("button",{onClick:()=>t(!e),className:`p-2 rounded-lg transition-all relative z-[110] ${e?"text-[#26412C]":"text-gray-600 hover:bg-gray-100"}`,children:e?le.jsx(S2,{className:"w-8 h-8"}):le.jsx(u3,{className:"w-6 h-6"})}),e&&le.jsx("div",{className:"fixed inset-0 bg-white z-[100] flex flex-col items-center justify-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:le.jsx("nav",{className:"flex flex-col gap-8 text-center",children:l.map(m=>le.jsx(Og,{to:m.path,onClick:()=>t(!1),className:"text-4xl font-[400] tracking-tighter transition-all text-black hover:text-orange-500 leading-none active:scale-95",children:m.label.toUpperCase()},m.label))})})]})]})]})},b3=()=>le.jsx("footer",{className:"mt-5 pt-10 pb-10 border-t border-gray-300 bg-white text-center",children:le.jsx("div",{className:"max-w-7xl mx-auto px-6",children:le.jsx("p",{className:"text-[14px]  font-[400]",children:" 2026 mistEO. All rights reserved."})})});var T0={exports:{}};var w3=T0.exports,RT;function S3(){return RT||(RT=1,(function(e,t){(function(i,l){e.exports=l()})(w3,(function(){var i={},l={};function m(_,c,M){if(l[_]=M,_==="index"){var P="var sharedModule = {}; ("+l.shared+")(sharedModule); ("+l.worker+")(sharedModule);",D={};return l.shared(D),l.index(i,D),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}m("shared",["exports"],(function(_){function c(o,r,a,f){return new(a||(a=Promise))((function(p,x){function b(k){try{C(f.next(k))}catch(N){x(N)}}function E(k){try{C(f.throw(k))}catch(N){x(N)}}function C(k){var N;k.done?p(k.value):(N=k.value,N instanceof a?N:new a((function(B){B(N)}))).then(b,E)}C((f=f.apply(o,r||[])).next())}))}function M(o,r){this.x=o,this.y=r}function P(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var D,z;typeof SuppressedError=="function"&&SuppressedError,M.prototype={clone(){return new M(this.x,this.y)},add(o){return this.clone()._add(o)},sub(o){return this.clone()._sub(o)},multByPoint(o){return this.clone()._multByPoint(o)},divByPoint(o){return this.clone()._divByPoint(o)},mult(o){return this.clone()._mult(o)},div(o){return this.clone()._div(o)},rotate(o){return this.clone()._rotate(o)},rotateAround(o,r){return this.clone()._rotateAround(o,r)},matMult(o){return this.clone()._matMult(o)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(o){return this.x===o.x&&this.y===o.y},dist(o){return Math.sqrt(this.distSqr(o))},distSqr(o){const r=o.x-this.x,a=o.y-this.y;return r*r+a*a},angle(){return Math.atan2(this.y,this.x)},angleTo(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith(o){return this.angleWithSep(o.x,o.y)},angleWithSep(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult(o){const r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add(o){return this.x+=o.x,this.y+=o.y,this},_sub(o){return this.x-=o.x,this.y-=o.y,this},_mult(o){return this.x*=o,this.y*=o,this},_div(o){return this.x/=o,this.y/=o,this},_multByPoint(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint(o){return this.x/=o.x,this.y/=o.y,this},_unit(){return this._div(this.mag()),this},_perp(){const o=this.y;return this.y=this.x,this.x=-o,this},_rotate(o){const r=Math.cos(o),a=Math.sin(o),f=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=f,this},_rotateAround(o,r){const a=Math.cos(o),f=Math.sin(o),p=r.y+f*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-f*(this.y-r.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:M},M.convert=function(o){if(o instanceof M)return o;if(Array.isArray(o))return new M(+o[0],+o[1]);if(o.x!==void 0&&o.y!==void 0)return new M(+o.x,+o.y);throw new Error("Expected [x, y] or {x, y} point format")};var F=(function(){if(z)return D;function o(r,a,f,p){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=a,this.p2x=f,this.p2y=p}return z=1,D=o,o.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,a){if(a===void 0&&(a=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,p=0;p<8;p++){var x=this.sampleCurveX(f)-r;if(Math.abs(x)<a)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var E=0,C=1;for(f=r,p=0;p<20&&(x=this.sampleCurveX(f),!(Math.abs(x-r)<a));p++)r>x?E=f:C=f,f=.5*(C-E)+E;return f},solve:function(r,a){return this.sampleCurveY(this.solveCurveX(r,a))}},D})(),$=P(F);let Y,K;function q(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function he(){if(K==null&&(K=!1,q())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let f=0;f<25;f++){const p=4*f;r.fillStyle=`rgb(${p},${p+1},${p+2})`,r.fillRect(f%5,Math.floor(f/5),1,1)}const a=r.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&a[f]!==f){K=!0;break}}}return K||!1}var ye=1e-6,ge=typeof Float32Array<"u"?Float32Array:Array;function Te(){var o=new ge(9);return ge!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function ke(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Pe(){var o=new ge(3);return ge!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function Re(o){var r=o[0],a=o[1],f=o[2];return Math.sqrt(r*r+a*a+f*f)}function ot(o,r,a){var f=new ge(3);return f[0]=o,f[1]=r,f[2]=a,f}function bt(o,r,a){return o[0]=r[0]+a[0],o[1]=r[1]+a[1],o[2]=r[2]+a[2],o}function kt(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o}function We(o,r,a){var f=r[0],p=r[1],x=r[2],b=a[0],E=a[1],C=a[2];return o[0]=p*C-x*E,o[1]=x*b-f*C,o[2]=f*E-p*b,o}var Ve,Ot=Re;function Ue(o,r,a){var f=r[0],p=r[1],x=r[2],b=r[3];return o[0]=a[0]*f+a[4]*p+a[8]*x+a[12]*b,o[1]=a[1]*f+a[5]*p+a[9]*x+a[13]*b,o[2]=a[2]*f+a[6]*p+a[10]*x+a[14]*b,o[3]=a[3]*f+a[7]*p+a[11]*x+a[15]*b,o}function Je(){var o=new ge(4);return ge!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function Le(o,r,a,f){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;r*=x,f*=x,a*=x;var b=Math.sin(r),E=Math.cos(r),C=Math.sin(a),k=Math.cos(a),N=Math.sin(f),B=Math.cos(f);switch(p){case"xyz":o[0]=b*k*B+E*C*N,o[1]=E*C*B-b*k*N,o[2]=E*k*N+b*C*B,o[3]=E*k*B-b*C*N;break;case"xzy":o[0]=b*k*B-E*C*N,o[1]=E*C*B-b*k*N,o[2]=E*k*N+b*C*B,o[3]=E*k*B+b*C*N;break;case"yxz":o[0]=b*k*B+E*C*N,o[1]=E*C*B-b*k*N,o[2]=E*k*N-b*C*B,o[3]=E*k*B+b*C*N;break;case"yzx":o[0]=b*k*B+E*C*N,o[1]=E*C*B+b*k*N,o[2]=E*k*N-b*C*B,o[3]=E*k*B-b*C*N;break;case"zxy":o[0]=b*k*B-E*C*N,o[1]=E*C*B+b*k*N,o[2]=E*k*N+b*C*B,o[3]=E*k*B-b*C*N;break;case"zyx":o[0]=b*k*B-E*C*N,o[1]=E*C*B+b*k*N,o[2]=E*k*N-b*C*B,o[3]=E*k*B+b*C*N;break;default:throw new Error("Unknown angle order "+p)}return o}function Ge(){var o=new ge(2);return ge!=Float32Array&&(o[0]=0,o[1]=0),o}function st(o,r){var a=new ge(2);return a[0]=o,a[1]=r,a}Pe(),Ve=new ge(4),ge!=Float32Array&&(Ve[0]=0,Ve[1]=0,Ve[2]=0,Ve[3]=0),Pe(),ot(1,0,0),ot(0,1,0),Je(),Je(),Te(),Ge();const pt=8192;function Rt(o,r,a){return r*(pt/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}function De(o,r){return(o%r+r)%r}function lt(o,r,a){return o*(1-a)+r*a}function Mt(o){if(o<=0)return 0;if(o>=1)return 1;const r=o*o,a=r*o;return 4*(o<.5?a:3*(o-r)+a-.75)}function zt(o,r,a,f){const p=new $(o,r,a,f);return x=>p.solve(x)}const qt=zt(.25,.1,.25,1);function Yt(o,r,a){return Math.min(a,Math.max(r,o))}function Gt(o,r,a){const f=a-r,p=((o-r)%f+f)%f+r;return p===r?a:p}function Ar(o,...r){for(const a of r)for(const f in a)o[f]=a[f];return o}let mt=1;function or(o,r,a){const f={};for(const p in o)f[p]=r.call(this,o[p],p,o);return f}function mr(o,r,a){const f={};for(const p in o)r.call(this,o[p],p,o)&&(f[p]=o[p]);return f}function Et(o){return Array.isArray(o)?o.map(Et):typeof o=="object"&&o?or(o,Et):o}const An={};function ur(o){An[o]||(typeof console<"u"&&console.warn(o),An[o]=!0)}function Wr(o,r,a){return(a.y-o.y)*(r.x-o.x)>(r.y-o.y)*(a.x-o.x)}function sn(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let Rr=null;function ya(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Ys="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ys(o,r,a,f,p){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(o,{timestamp:0});try{const b=x?.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const E=b.startsWith("BGR"),C=new Uint8ClampedArray(f*p*4);if(yield x.copyTo(C,(function(k,N,B,G,Z){const J=4*Math.max(-N,0),te=(Math.max(0,B)-B)*G*4+J,ie=4*G,ue=Math.max(0,N),ve=Math.max(0,B);return{rect:{x:ue,y:ve,width:Math.min(k.width,N+G)-ue,height:Math.min(k.height,B+Z)-ve},layout:[{offset:te,stride:ie}]}})(o,r,a,f,p)),E)for(let k=0;k<C.length;k+=4){const N=C[k];C[k]=C[k+2],C[k+2]=N}return C}finally{x.close()}}))}let No,go;function ju(o,r,a,f){return o.addEventListener(r,a,f),{unsubscribe:()=>{o.removeEventListener(r,a,f)}}}function ri(o){return o*Math.PI/180}function va(o){return o/Math.PI*180}const Nu={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},vs={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},_s="AbortError";class Bc extends Error{constructor(r=_s){super(r instanceof Error?r.message:r),this.name=_s,r instanceof Error&&r.stack&&(this.stack=r.stack)}}function Ks(o){return o.name===_s}const Be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ee(o){return Be.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const ne="global-dispatcher";class ae extends Error{constructor(r,a,f,p){super(`AJAXError: ${a} (${r}): ${f}`),this.status=r,this.statusText=a,this.url=f,this.body=p}}const be=()=>sn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ce=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const f=ee(o.url);if(f)return f(o,r);if(sn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:ne},r)}if(!(/^file:/.test(a=o.url)||/^file:/.test(be())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,p){return c(this,void 0,void 0,(function*(){const x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:be(),signal:p.signal});let b,E;f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{b=yield fetch(x)}catch(k){throw Ks(k)?k:new ae(0,k.message,f.url,new Blob)}if(!b.ok){const k=yield b.blob();throw new ae(b.status,b.statusText,f.url,k)}E=f.type==="arrayBuffer"||f.type==="image"?b.arrayBuffer():f.type==="json"?b.json():b.text();const C=yield E;return p.signal.throwIfAborted(),{data:C,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}}))})(o,r);if(sn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:ne},r)}var a;return(function(f,p){return new Promise(((x,b)=>{var E;const C=new XMLHttpRequest;C.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(C.responseType="arraybuffer");for(const k in f.headers)C.setRequestHeader(k,f.headers[k]);f.type==="json"&&(C.responseType="text",!((E=f.headers)===null||E===void 0)&&E.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=f.credentials==="include",C.onerror=()=>{b(new Error(C.statusText))},C.onload=()=>{if(!p.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let k=C.response;if(f.type==="json")try{k=JSON.parse(C.response)}catch(N){return void b(N)}x({data:k,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const k=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});b(new ae(C.status,C.statusText,f.url,k))}},p.signal.addEventListener("abort",(()=>{C.abort(),b(new Bc(p.signal.reason))})),C.send(f.body)}))})(o,r)};function He(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),a=window.location;return r.protocol===a.protocol&&r.host===a.host}function $e(o,r,a){a[o]&&a[o].indexOf(r)!==-1||(a[o]=a[o]||[],a[o].push(r))}function Fe(o,r,a){if(a&&a[o]){const f=a[o].indexOf(r);f!==-1&&a[o].splice(f,1)}}class Ze{constructor(r,a={}){Ar(this,a),this.type=r}}class vt extends Ze{constructor(r,a={}){super("error",Ar({error:r},a))}}class at{on(r,a){return this._listeners=this._listeners||{},$e(r,a,this._listeners),{unsubscribe:()=>{this.off(r,a)}}}off(r,a){return Fe(r,a,this._listeners),Fe(r,a,this._oneTimeListeners),this}once(r,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},$e(r,a,this._oneTimeListeners),this):new Promise((f=>this.once(r,f)))}fire(r,a){typeof r=="string"&&(r=new Ze(r,a||{}));const f=r.type;if(this.listens(f)){r.target=this;const p=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of p)E.call(this,r);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of x)Fe(f,E,this._oneTimeListeners),E.call(this,r);const b=this._eventedParent;b&&(Ar(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(r))}else r instanceof vt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Bt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nr(o,r){const a={};for(const f in o)f!=="ref"&&(a[f]=o[f]);return Bt.forEach((f=>{f in r&&(a[f]=r[f])})),a}function Wt(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let a=0;a<o.length;a++)if(!Wt(o[a],r[a]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const a in o)if(!Wt(o[a],r[a]))return!1;return!0}return o===r}function Qt(o,r){o.push(r)}function er(o,r,a){Qt(a,{command:"addSource",args:[o,r[o]]})}function ir(o,r,a){Qt(r,{command:"removeSource",args:[o]}),a[o]=!0}function hn(o,r,a,f){ir(o,a,f),er(o,r,a)}function Mn(o,r,a){let f;for(f in o[a])if(Object.prototype.hasOwnProperty.call(o[a],f)&&f!=="data"&&!Wt(o[a][f],r[a][f]))return!1;for(f in r[a])if(Object.prototype.hasOwnProperty.call(r[a],f)&&f!=="data"&&!Wt(o[a][f],r[a][f]))return!1;return!0}function xn(o,r,a,f,p,x){o=o||{},r=r||{};for(const b in o)Object.prototype.hasOwnProperty.call(o,b)&&(Wt(o[b],r[b])||a.push({command:x,args:[f,b,r[b],p]}));for(const b in r)Object.prototype.hasOwnProperty.call(r,b)&&!Object.prototype.hasOwnProperty.call(o,b)&&(Wt(o[b],r[b])||a.push({command:x,args:[f,b,r[b],p]}))}function wi(o){return o.id}function fn(o,r){return o[r.id]=r,o}class wt{constructor(r,a,f,p){this.message=(r?`${r}: `:"")+f,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function Dr(o,...r){for(const a of r)for(const f in a)o[f]=a[f];return o}class an extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}class Wi{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[f,p]of a)this.bindings[f]=p}concat(r){return new Wi(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Fr={kind:"null"},At={kind:"number"},Kt={kind:"string"},cr={kind:"boolean"},_a={kind:"color"},hf={kind:"projectionDefinition"},Bo={kind:"object"},hr={kind:"value"},Bl={kind:"collator"},Fo={kind:"formatted"},xs={kind:"padding"},Uo={kind:"colorArray"},Vo={kind:"numberArray"},Cn={kind:"resolvedImage"},Bu={kind:"variableAnchorOffsetCollection"};function Mi(o,r){return{kind:"array",itemType:o,N:r}}function Tr(o){if(o.kind==="array"){const r=Tr(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const bs=[Fr,At,Kt,cr,_a,hf,Fo,Bo,Mi(hr),xs,Vo,Uo,Cn,Bu];function Fu(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Fu(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const a of bs)if(!Fu(a,r))return null}}return`Expected ${Tr(o)} but found ${Tr(r)} instead.`}function Uu(o,r){return r.some((a=>a.kind===o.kind))}function Qs(o,r){return r.some((a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o))}function yo(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Fc=.96422,qo=.82521,Za=4/29,Or=6/29,xd=3*Or*Or,Yp=Or*Or*Or,Fl=Math.PI/180,bd=180/Math.PI;function Uc(o){return(o%=360)<0&&(o+=360),o}function Kp([o,r,a,f]){let p,x;const b=Vc((.2225045*(o=Ri(o))+.7168786*(r=Ri(r))+.0606169*(a=Ri(a)))/1);o===r&&r===a?p=x=b:(p=Vc((.4360747*o+.3850649*r+.1430804*a)/Fc),x=Vc((.0139322*o+.0971045*r+.7141733*a)/qo));const E=116*b-16;return[E<0?0:E,500*(p-b),200*(b-x),f]}function Ri(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Vc(o){return o>Yp?Math.pow(o,1/3):o/xd+Za}function ff([o,r,a,f]){let p=(o+16)/116,x=isNaN(r)?p:p+r/500,b=isNaN(a)?p:p-a/200;return p=1*Js(p),x=Fc*Js(x),b=qo*Js(b),[qc(3.1338561*x-1.6168667*p-.4906146*b),qc(-.9787684*x+1.9161415*p+.033454*b),qc(.0719453*x-.2289914*p+1.4052427*b),f]}function qc(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function Js(o){return o>Or?o*o*o:xd*(o-Za)}const Qp=Object.hasOwn||function(o,r){return Object.prototype.hasOwnProperty.call(o,r)};function Vu(o,r){return Qp(o,r)?o[r]:void 0}function ws(o){return parseInt(o.padEnd(2,o),16)/255}function Jp(o,r){return Ul(r?o/100:o,0,1)}function Ul(o,r,a){return Math.min(Math.max(r,o),a)}function df(o){return!o.some(Number.isNaN)}const Vl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function el(o,r,a){return o+a*(r-o)}function qu(o,r,a){return o.map(((f,p)=>el(f,r[p],a)))}class gr{constructor(r,a,f,p=1,x=!0){this.r=r,this.g=a,this.b=f,this.a=p,x||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[r,a,f,p]))}static parse(r){if(r instanceof gr)return r;if(typeof r!="string")return;const a=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=Vu(Vl,f);if(p){const[b,E,C]=p;return[b/255,E/255,C/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const b=f.length<6?1:2;let E=1;return[ws(f.slice(E,E+=b)),ws(f.slice(E,E+=b)),ws(f.slice(E,E+=b)),ws(f.slice(E,E+b)||"ff")]}if(f.startsWith("rgb")){const b=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[E,C,k,N,B,G,Z,J,te,ie,ue,ve]=b,se=[N||" ",Z||" ",ie].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const de=[k,G,te].join(""),Se=de==="%%%"?100:de===""?255:0;if(Se){const Ie=[Ul(+C/Se,0,1),Ul(+B/Se,0,1),Ul(+J/Se,0,1),ue?Jp(+ue,ve):1];if(df(Ie))return Ie}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,E,C,k,N,B,G,Z,J]=x,te=[C||" ",N||" ",G].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){const ie=[+E,Ul(+k,0,100),Ul(+B,0,100),Z?Jp(+Z,J):1];if(df(ie))return(function([ue,ve,se,de]){function Se(Ie){const Ye=(Ie+ue/30)%12,ct=ve*Math.min(se,1-se);return se-ct*Math.max(-1,Math.min(Ye-3,9-Ye,1))}return ue=Uc(ue),ve/=100,se/=100,[Se(0),Se(8),Se(4),de]})(ie)}}})(r);return a?new gr(...a,!1):void 0}get rgb(){const{r,g:a,b:f,a:p}=this,x=p||1/0;return this.overwriteGetter("rgb",[r/x,a/x,f/x,p])}get hcl(){return this.overwriteGetter("hcl",(function(r){const[a,f,p,x]=Kp(r),b=Math.sqrt(f*f+p*p);return[Math.round(1e4*b)?Uc(Math.atan2(p,f)*bd):NaN,b,a,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Kp(this.rgb))}overwriteGetter(r,a){return Object.defineProperty(this,r,{value:a}),a}toString(){const[r,a,f,p]=this.rgb;return`rgba(${[r,a,f].map((x=>Math.round(255*x))).join(",")},${p})`}static interpolate(r,a,f,p="rgb"){switch(p){case"rgb":{const[x,b,E,C]=qu(r.rgb,a.rgb,f);return new gr(x,b,E,C,!1)}case"hcl":{const[x,b,E,C]=r.hcl,[k,N,B,G]=a.hcl;let Z,J;if(isNaN(x)||isNaN(k))isNaN(x)?isNaN(k)?Z=NaN:(Z=k,E!==1&&E!==0||(J=N)):(Z=x,B!==1&&B!==0||(J=b));else{let se=k-x;k>x&&se>180?se-=360:k<x&&x-k>180&&(se+=360),Z=x+f*se}const[te,ie,ue,ve]=(function([se,de,Se,Ie]){return se=isNaN(se)?0:se*Fl,ff([Se,Math.cos(se)*de,Math.sin(se)*de,Ie])})([Z,J??el(b,N,f),el(E,B,f),el(C,G,f)]);return new gr(te,ie,ue,ve,!1)}case"lab":{const[x,b,E,C]=ff(qu(r.lab,a.lab,f));return new gr(x,b,E,C,!1)}}}}gr.black=new gr(0,0,0,1),gr.white=new gr(1,1,1,1),gr.transparent=new gr(0,0,0,0),gr.red=new gr(1,0,0,1);class vo{constructor(r,a,f){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const wd=["bottom","center","top"];class Gc{constructor(r,a,f,p,x,b){this.text=r,this.image=a,this.scale=f,this.fontStack=p,this.textColor=x,this.verticalAlign=b}}class ni{constructor(r){this.sections=r}static fromString(r){return new ni([new Gc(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((r=>r.text.length!==0||r.image&&r.image.name.length!==0))}static factory(r){return r instanceof ni?r:ni.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map((r=>r.text)).join("")}}class Vn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Vn)return r;if(typeof r=="number")return new Vn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const a of r)if(typeof a!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Vn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f){return new Vn(qu(r.values,a.values,f))}}class dn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof dn)return r;if(typeof r=="number")return new dn([r]);if(Array.isArray(r)){for(const a of r)if(typeof a!="number")return;return new dn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f){return new dn(qu(r.values,a.values,f))}}class tr{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof tr)return r;if(typeof r=="string"){const f=gr.parse(r);return f?new tr([f]):void 0}if(!Array.isArray(r))return;const a=[];for(const f of r){if(typeof f!="string")return;const p=gr.parse(f);if(!p)return;a.push(p)}return new tr(a)}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f,p="rgb"){const x=[];if(r.values.length!=a.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${a.values.length}), cannot interpolate.`);for(let b=0;b<r.values.length;b++)x.push(gr.interpolate(r.values[b],a.values[b],f,p));return new tr(x)}}class Xr extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const Ha=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Pn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Pn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let a=0;a<r.length;a+=2){const f=r[a],p=r[a+1];if(typeof f!="string"||!Ha.has(f)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Pn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f){const p=r.values,x=a.values;if(p.length!==x.length)throw new Xr(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${a.toString()}`);const b=[];for(let E=0;E<p.length;E+=2){if(p[E]!==x[E])throw new Xr(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${p[E]}, to[${E}]: ${x[E]}`);b.push(p[E]);const[C,k]=p[E+1],[N,B]=x[E+1];b.push([el(C,N,f),el(k,B,f)])}return new Pn(b)}}class Li{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Li({name:r,available:!1}):null}}class ii{constructor(r,a,f){this.from=r,this.to=a,this.transition=f}static interpolate(r,a,f){return new ii(r,a,f)}static parse(r){return r instanceof ii?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new ii(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new ii(r.from,r.to,r.transition):typeof r=="string"?new ii(r,r,1):void 0}}function xa(o,r,a,f){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,r,a,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,r,a,f]:[o,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Go(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ii||o instanceof gr||o instanceof vo||o instanceof ni||o instanceof Vn||o instanceof dn||o instanceof tr||o instanceof Pn||o instanceof Li)return!0;if(Array.isArray(o)){for(const r of o)if(!Go(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!Go(o[r]))return!1;return!0}return!1}function pn(o){if(o===null)return Fr;if(typeof o=="string")return Kt;if(typeof o=="boolean")return cr;if(typeof o=="number")return At;if(o instanceof gr)return _a;if(o instanceof ii)return hf;if(o instanceof vo)return Bl;if(o instanceof ni)return Fo;if(o instanceof Vn)return xs;if(o instanceof dn)return Vo;if(o instanceof tr)return Uo;if(o instanceof Pn)return Bu;if(o instanceof Li)return Cn;if(Array.isArray(o)){const r=o.length;let a;for(const f of o){const p=pn(f);if(a){if(a===p)continue;a=hr;break}a=p}return Mi(a||hr,r)}return Bo}function tl(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof gr||o instanceof ii||o instanceof ni||o instanceof Vn||o instanceof dn||o instanceof tr||o instanceof Pn||o instanceof Li?o.toString():JSON.stringify(o)}class ba{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Go(r[1]))return a.error("invalid value");const f=r[1];let p=pn(f);const x=a.expectedType;return p.kind!=="array"||p.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(p=x),new ba(p,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ql={string:Kt,number:At,boolean:cr,object:Bo};class ji{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let f,p=1;const x=r[0];if(x==="array"){let E,C;if(r.length>2){const k=r[1];if(typeof k!="string"||!(k in ql)||k==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);E=ql[k],p++}else E=hr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);C=r[2],p++}f=Mi(E,C)}else{if(!ql[x])throw new Error(`Types doesn't contain name = ${x}`);f=ql[x]}const b=[];for(;p<r.length;p++){const E=a.parse(r[p],p,hr);if(!E)return null;b.push(E)}return new ji(f,b)}evaluate(r){for(let a=0;a<this.args.length;a++){const f=this.args[a].evaluate(r);if(!Fu(this.type,pn(f)))return f;if(a===this.args.length-1)throw new Xr(`Expected value to be of type ${Tr(this.type)}, but found ${Tr(pn(f))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const Yn={"to-boolean":cr,"to-color":_a,"to-number":At,"to-string":Kt};class Ni{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const f=r[0];if(!Yn[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&r.length!==2)return a.error("Expected one argument.");const p=Yn[f],x=[];for(let b=1;b<r.length;b++){const E=a.parse(r[b],b,hr);if(!E)return null;x.push(E)}return new Ni(p,x)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let a,f;for(const p of this.args){if(a=p.evaluate(r),f=null,a instanceof gr)return a;if(typeof a=="string"){const x=r.parseColor(a);if(x)return x}else if(Array.isArray(a)&&(f=a.length<3||a.length>4?`Invalid rgba value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:xa(a[0],a[1],a[2],a[3]),!f))return new gr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Xr(f||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const f of this.args){a=f.evaluate(r);const p=Vn.parse(a);if(p)return p}throw new Xr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"numberArray":{let a;for(const f of this.args){a=f.evaluate(r);const p=dn.parse(a);if(p)return p}throw new Xr(`Could not parse numberArray from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"colorArray":{let a;for(const f of this.args){a=f.evaluate(r);const p=tr.parse(a);if(p)return p}throw new Xr(`Could not parse colorArray from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const f of this.args){a=f.evaluate(r);const p=Pn.parse(a);if(p)return p}throw new Xr(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const f of this.args){if(a=f.evaluate(r),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new Xr(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return ni.fromString(tl(this.args[0].evaluate(r)));case"resolvedImage":return Li.fromString(tl(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return tl(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const $c=["Unknown","Point","LineString","Polygon"];class Gl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?$c[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let a=this._parseColorCache.get(r);return a||(a=gr.parse(r),this._parseColorCache.set(r,a)),a}}class $l{constructor(r,a,f=[],p,x=new Wi,b=[]){this.registry=r,this.path=f,this.key=f.map((E=>`[${E}]`)).join(""),this.scope=x,this.errors=b,this.expectedType=p,this._isConstant=a}parse(r,a,f,p,x={}){return a?this.concat(a,f,p)._parse(r,x):this._parse(r,x)}_parse(r,a){function f(p,x,b){return b==="assert"?new ji(x,[p]):b==="coerce"?new Ni(x,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[p];if(x){let b=x.parse(r,this);if(!b)return null;if(this.expectedType){const E=this.expectedType,C=b.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||C.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(C.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(C.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(C.kind)||E.kind==="colorArray"&&["value","string","array"].includes(C.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(C.kind))b=f(b,E,a.typeAnnotation||"coerce");else if(this.checkSubtype(E,C))return null}else b=f(b,E,a.typeAnnotation||"assert")}if(!(b instanceof ba)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const E=new Gl;try{b=new ba(b.type,b.evaluate(E))}catch(C){return this.error(C.message),null}}return b}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,f){const p=typeof r=="number"?this.path.concat(r):this.path,x=f?this.scope.concat(f):this.scope;return new $l(this.registry,this._isConstant,p,a||null,x,this.errors)}error(r,...a){const f=`${this.key}${a.map((p=>`[${p}]`)).join("")}`;this.errors.push(new an(f,r))}checkSubtype(r,a){const f=Fu(r,a);return f&&this.error(f),f}}class Gr{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const f=[];for(let x=1;x<r.length-1;x+=2){const b=r[x];if(typeof b!="string")return a.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return a.error("Variable names must contain only alphanumeric characters or '_'.",x);const E=a.parse(r[x+1],x+1);if(!E)return null;f.push([b,E])}const p=a.parse(r[r.length-1],r.length-1,a.expectedType,f);return p?new Gr(f,p):null}outputDefined(){return this.result.outputDefined()}}class rl{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const f=r[1];return a.scope.has(f)?new rl(f,a.scope.get(f)):a.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class br{constructor(r,a,f){this.type=r,this.index=a,this.input=f}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,At),p=a.parse(r[2],2,Mi(a.expectedType||hr));return f&&p?new br(p.type.itemType,f,p):null}evaluate(r){const a=this.index.evaluate(r),f=this.input.evaluate(r);if(a<0)throw new Xr(`Array index out of bounds: ${a} < 0.`);if(a>=f.length)throw new Xr(`Array index out of bounds: ${a} > ${f.length-1}.`);if(a!==Math.floor(a))throw new Xr(`Array index must be an integer, but found ${a} instead.`);return f[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class fr{constructor(r,a){this.type=cr,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,hr),p=a.parse(r[2],2,hr);return f&&p?Uu(f.type,[cr,Kt,At,Fr,hr])?new fr(f,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(f.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!f)return!1;if(!Qs(a,["boolean","string","number","null"]))throw new Xr(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(pn(a))} instead.`);if(!Qs(f,["string","array"]))throw new Xr(`Expected second argument to be of type array or string, but found ${Tr(pn(f))} instead.`);return f.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class Zl{constructor(r,a,f){this.type=At,this.needle=r,this.haystack=a,this.fromIndex=f}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,hr),p=a.parse(r[2],2,hr);if(!f||!p)return null;if(!Uu(f.type,[cr,Kt,At,Fr,hr]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(f.type)} instead`);if(r.length===4){const x=a.parse(r[3],3,At);return x?new Zl(f,p,x):null}return new Zl(f,p)}evaluate(r){const a=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!Qs(a,["boolean","string","number","null"]))throw new Xr(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(pn(a))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(r)),Qs(f,["string"])){const x=f.indexOf(a,p);return x===-1?-1:[...f.slice(0,x)].length}if(Qs(f,["array"]))return f.indexOf(a,p);throw new Xr(`Expected second argument to be of type array or string, but found ${Tr(pn(f))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Er{constructor(r,a,f,p,x,b){this.inputType=r,this.type=a,this.input=f,this.cases=p,this.outputs=x,this.otherwise=b}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let f,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const x={},b=[];for(let k=2;k<r.length-1;k+=2){let N=r[k];const B=r[k+1];Array.isArray(N)||(N=[N]);const G=a.concat(k);if(N.length===0)return G.error("Expected at least one branch label.");for(const J of N){if(typeof J!="number"&&typeof J!="string")return G.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return G.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return G.error("Numeric branch labels must be integer values.");if(f){if(G.checkSubtype(f,pn(J)))return null}else f=pn(J);if(x[String(J)]!==void 0)return G.error("Branch labels must be unique.");x[String(J)]=b.length}const Z=a.parse(B,k,p);if(!Z)return null;p=p||Z.type,b.push(Z)}const E=a.parse(r[1],1,hr);if(!E)return null;const C=a.parse(r[r.length-1],r.length-1,p);return C?E.type.kind!=="value"&&a.concat(1).checkSubtype(f,E.type)?null:new Er(f,p,E,x,b,C):null}evaluate(r){const a=this.input.evaluate(r);return(pn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))&&this.otherwise.outputDefined()}}class Zc{constructor(r,a,f){this.type=r,this.branches=a,this.otherwise=f}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const p=[];for(let b=1;b<r.length-1;b+=2){const E=a.parse(r[b],b,cr);if(!E)return null;const C=a.parse(r[b+1],b+1,f);if(!C)return null;p.push([E,C]),f=f||C.type}const x=a.parse(r[r.length-1],r.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Zc(f,p,x)}evaluate(r){for(const[a,f]of this.branches)if(a.evaluate(r))return f.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,f]of this.branches)r(a),r(f);r(this.otherwise)}outputDefined(){return this.branches.every((([r,a])=>a.outputDefined()))&&this.otherwise.outputDefined()}}class Wa{constructor(r,a,f,p){this.type=r,this.input=a,this.beginIndex=f,this.endIndex=p}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,hr),p=a.parse(r[2],2,At);if(!f||!p)return null;if(!Uu(f.type,[Mi(hr),Kt,hr]))return a.error(`Expected first argument to be of type array or string, but found ${Tr(f.type)} instead`);if(r.length===4){const x=a.parse(r[3],3,At);return x?new Wa(f.type,f,p,x):null}return new Wa(f.type,f,p)}evaluate(r){const a=this.input.evaluate(r),f=this.beginIndex.evaluate(r);let p;if(this.endIndex&&(p=this.endIndex.evaluate(r)),Qs(a,["string"]))return[...a].slice(f,p).join("");if(Qs(a,["array"]))return a.slice(f,p);throw new Xr(`Expected first argument to be of type array or string, but found ${Tr(pn(a))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function nl(o,r){const a=o.length-1;let f,p,x=0,b=a,E=0;for(;x<=b;)if(E=Math.floor((x+b)/2),f=o[E],p=o[E+1],f<=r){if(E===a||r<p)return E;x=E+1}else{if(!(f>r))throw new Xr("Input is not a number.");b=E-1}return 0}class il{constructor(r,a,f){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[p,x]of f)this.labels.push(p),this.outputs.push(x)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const f=a.parse(r[1],1,At);if(!f)return null;const p=[];let x=null;a.expectedType&&a.expectedType.kind!=="value"&&(x=a.expectedType);for(let b=1;b<r.length;b+=2){const E=b===1?-1/0:r[b],C=r[b+1],k=b,N=b+1;if(typeof E!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(p.length&&p[p.length-1][0]>=E)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const B=a.parse(C,N,x);if(!B)return null;x=x||B.type,p.push([E,B])}return new il(x,f,p)}evaluate(r){const a=this.labels,f=this.outputs;if(a.length===1)return f[0].evaluate(r);const p=this.input.evaluate(r);if(p<=a[0])return f[0].evaluate(r);const x=a.length;return p>=a[x-1]?f[x-1].evaluate(r):f[nl(a,p)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function em(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Hc,Sd,ey=(function(){if(Sd)return Hc;function o(r,a,f,p){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=a,this.p2x=f,this.p2y=p}return Sd=1,Hc=o,o.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,a){if(a===void 0&&(a=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,p=0;p<8;p++){var x=this.sampleCurveX(f)-r;if(Math.abs(x)<a)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var E=0,C=1;for(f=r,p=0;p<20&&(x=this.sampleCurveX(f),!(Math.abs(x-r)<a));p++)r>x?E=f:C=f,f=.5*(C-E)+E;return f},solve:function(r,a){return this.sampleCurveY(this.solveCurveX(r,a))}},Hc})(),Td=em(ey);class Bi{constructor(r,a,f,p,x){this.type=r,this.operator=a,this.interpolation=f,this.input=p,this.labels=[],this.outputs=[];for(const[b,E]of x)this.labels.push(b),this.outputs.push(E)}static interpolationFactor(r,a,f,p){let x=0;if(r.name==="exponential")x=$o(a,r.base,f,p);else if(r.name==="linear")x=$o(a,1,f,p);else if(r.name==="cubic-bezier"){const b=r.controlPoints;x=new Td(b[0],b[1],b[2],b[3]).solve($o(a,1,f,p))}return x}static parse(r,a){let[f,p,x,...b]=r;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const k=p[1];if(typeof k!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:k}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const k=p.slice(1);if(k.length!==4||k.some((N=>typeof N!="number"||N<0||N>1)))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:k}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(x=a.parse(x,2,At),!x)return null;const E=[];let C=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||a.expectedType==Uo?a.expectedType&&a.expectedType.kind!=="value"&&(C=a.expectedType):C=_a;for(let k=0;k<b.length;k+=2){const N=b[k],B=b[k+1],G=k+3,Z=k+4;if(typeof N!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',G);if(E.length&&E[E.length-1][0]>=N)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',G);const J=a.parse(B,Z,C);if(!J)return null;C=C||J.type,E.push([N,J])}return yo(C,At)||yo(C,hf)||yo(C,_a)||yo(C,xs)||yo(C,Vo)||yo(C,Uo)||yo(C,Bu)||yo(C,Mi(At))?new Bi(C,f,p,x,E):a.error(`Type ${Tr(C)} is not interpolatable.`)}evaluate(r){const a=this.labels,f=this.outputs;if(a.length===1)return f[0].evaluate(r);const p=this.input.evaluate(r);if(p<=a[0])return f[0].evaluate(r);const x=a.length;if(p>=a[x-1])return f[x-1].evaluate(r);const b=nl(a,p),E=Bi.interpolationFactor(this.interpolation,p,a[b],a[b+1]),C=f[b].evaluate(r),k=f[b+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return el(C,k,E);case"color":return gr.interpolate(C,k,E);case"padding":return Vn.interpolate(C,k,E);case"colorArray":return tr.interpolate(C,k,E);case"numberArray":return dn.interpolate(C,k,E);case"variableAnchorOffsetCollection":return Pn.interpolate(C,k,E);case"array":return qu(C,k,E);case"projectionDefinition":return ii.interpolate(C,k,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return gr.interpolate(C,k,E,"hcl");case"colorArray":return tr.interpolate(C,k,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return gr.interpolate(C,k,E,"lab");case"colorArray":return tr.interpolate(C,k,E,"lab")}}}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function $o(o,r,a,f){const p=f-a,x=o-a;return p===0?0:r===1?x/p:(Math.pow(r,x)-1)/(Math.pow(r,p)-1)}const mn={color:gr.interpolate,number:el,padding:Vn.interpolate,numberArray:dn.interpolate,colorArray:tr.interpolate,variableAnchorOffsetCollection:Pn.interpolate,array:qu};class Hl{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let f=null;const p=a.expectedType;p&&p.kind!=="value"&&(f=p);const x=[];for(const E of r.slice(1)){const C=a.parse(E,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!C)return null;f=f||C.type,x.push(C)}if(!f)throw new Error("No output type");const b=p&&x.some((E=>Fu(p,E.type)));return new Hl(b?hr:f,x)}evaluate(r){let a,f=null,p=0;for(const x of this.args)if(p++,f=x.evaluate(r),f&&f instanceof Li&&!f.available&&(a||(a=f.name),f=null,p===this.args.length&&(f=a)),f!==null)break;return f}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}function Wc(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Xc(o,r,a,f){return f.compare(r,a)===0}function Dn(o,r,a){const f=o!=="=="&&o!=="!=";return class zP{constructor(x,b,E){this.type=cr,this.lhs=x,this.rhs=b,this.collator=E,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");const E=x[0];let C=b.parse(x[1],1,hr);if(!C)return null;if(!Wc(E,C.type))return b.concat(1).error(`"${E}" comparisons are not supported for type '${Tr(C.type)}'.`);let k=b.parse(x[2],2,hr);if(!k)return null;if(!Wc(E,k.type))return b.concat(2).error(`"${E}" comparisons are not supported for type '${Tr(k.type)}'.`);if(C.type.kind!==k.type.kind&&C.type.kind!=="value"&&k.type.kind!=="value")return b.error(`Cannot compare types '${Tr(C.type)}' and '${Tr(k.type)}'.`);f&&(C.type.kind==="value"&&k.type.kind!=="value"?C=new ji(k.type,[C]):C.type.kind!=="value"&&k.type.kind==="value"&&(k=new ji(C.type,[k])));let N=null;if(x.length===4){if(C.type.kind!=="string"&&k.type.kind!=="string"&&C.type.kind!=="value"&&k.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(N=b.parse(x[3],3,Bl),!N)return null}return new zP(C,k,N)}evaluate(x){const b=this.lhs.evaluate(x),E=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const C=pn(b),k=pn(E);if(C.kind!==k.kind||C.kind!=="string"&&C.kind!=="number")throw new Xr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${C.kind}, ${k.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const C=pn(b),k=pn(E);if(C.kind!=="string"||k.kind!=="string")return r(x,b,E)}return this.collator?a(x,b,E,this.collator.evaluate(x)):r(x,b,E)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const tm=Dn("==",(function(o,r,a){return r===a}),Xc),pf=Dn("!=",(function(o,r,a){return r!==a}),(function(o,r,a,f){return!Xc(0,r,a,f)})),rm=Dn("<",(function(o,r,a){return r<a}),(function(o,r,a,f){return f.compare(r,a)<0})),ty=Dn(">",(function(o,r,a){return r>a}),(function(o,r,a,f){return f.compare(r,a)>0})),Gu=Dn("<=",(function(o,r,a){return r<=a}),(function(o,r,a,f){return f.compare(r,a)<=0})),mf=Dn(">=",(function(o,r,a){return r>=a}),(function(o,r,a,f){return f.compare(r,a)>=0}));class $u{constructor(r,a,f){this.type=Bl,this.locale=f,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const f=r[1];if(typeof f!="object"||Array.isArray(f))return a.error("Collator options argument must be an object.");const p=a.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,cr);if(!p)return null;const x=a.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,cr);if(!x)return null;let b=null;return f.locale&&(b=a.parse(f.locale,1,Kt),!b)?null:new $u(p,x,b)}evaluate(r){return new vo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Ed{constructor(r,a,f,p,x){this.type=Kt,this.number=r,this.locale=a,this.currency=f,this.minFractionDigits=p,this.maxFractionDigits=x}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const f=a.parse(r[1],1,At);if(!f)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let x=null;if(p.locale&&(x=a.parse(p.locale,1,Kt),!x))return null;let b=null;if(p.currency&&(b=a.parse(p.currency,1,Kt),!b))return null;let E=null;if(p["min-fraction-digits"]&&(E=a.parse(p["min-fraction-digits"],1,At),!E))return null;let C=null;return p["max-fraction-digits"]&&(C=a.parse(p["max-fraction-digits"],1,At),!C)?null:new Ed(f,x,b,E,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Yc{constructor(r){this.type=Fo,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const f=r[1];if(!Array.isArray(f)&&typeof f=="object")return a.error("First argument must be an image or text section.");const p=[];let x=!1;for(let b=1;b<=r.length-1;++b){const E=r[b];if(x&&typeof E=="object"&&!Array.isArray(E)){x=!1;let C=null;if(E["font-scale"]&&(C=a.parse(E["font-scale"],1,At),!C))return null;let k=null;if(E["text-font"]&&(k=a.parse(E["text-font"],1,Mi(Kt)),!k))return null;let N=null;if(E["text-color"]&&(N=a.parse(E["text-color"],1,_a),!N))return null;let B=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!wd.includes(E["vertical-align"]))return a.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(B=a.parse(E["vertical-align"],1,Kt),!B)return null}const G=p[p.length-1];G.scale=C,G.font=k,G.textColor=N,G.verticalAlign=B}else{const C=a.parse(r[b],1,hr);if(!C)return null;const k=C.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,p.push({content:C,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Yc(p)}evaluate(r){return new ni(this.sections.map((a=>{const f=a.content.evaluate(r);return pn(f)===Cn?new Gc("",f,null,null,null,a.verticalAlign?a.verticalAlign.evaluate(r):null):new Gc(tl(f),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null,a.verticalAlign?a.verticalAlign.evaluate(r):null)})))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor),a.verticalAlign&&r(a.verticalAlign)}outputDefined(){return!1}}class Zu{constructor(r){this.type=Cn,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const f=a.parse(r[1],1,Kt);return f?new Zu(f):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),f=Li.fromString(a);return f&&r.availableImages&&(f.available=r.availableImages.indexOf(a)>-1),f}eachChild(r){r(this.input)}outputDefined(){return!1}}class Hu{constructor(r){this.type=At,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=a.parse(r[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Tr(f.type)} instead.`):new Hu(f):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new Xr(`Expected value to be of type string or array, but found ${Tr(pn(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const jn=8192;function Wu(o,r){const a=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(a*p*jn),Math.round(f*p*jn)]}function Xu(o,r){const a=Math.pow(2,r.z);return[(p=(o[0]/jn+r.x)/a,360*p-180),(f=(o[1]/jn+r.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,p}function Yu(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function al(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function nm(o,r,a){const f=o[0]-r[0],p=o[1]-r[1],x=o[0]-a[0],b=o[1]-a[1];return f*b-x*p==0&&f*x<=0&&p*b<=0}function Kc(o,r,a,f){return(p=[f[0]-a[0],f[1]-a[1]])[0]*(x=[r[0]-o[0],r[1]-o[1]])[1]-p[1]*x[0]!=0&&!(!yf(o,r,a,f)||!yf(a,f,o,r));var p,x}function im(o,r,a){for(const f of a)for(let p=0;p<f.length-1;++p)if(Kc(o,r,f[p],f[p+1]))return!0;return!1}function _o(o,r,a=!1){let f=!1;for(const E of r)for(let C=0;C<E.length-1;C++){if(nm(o,E[C],E[C+1]))return a;(x=E[C])[1]>(p=o)[1]!=(b=E[C+1])[1]>p[1]&&p[0]<(b[0]-x[0])*(p[1]-x[1])/(b[1]-x[1])+x[0]&&(f=!f)}var p,x,b;return f}function gf(o,r){for(const a of r)if(_o(o,a))return!0;return!1}function am(o,r){for(const a of o)if(!_o(a,r))return!1;for(let a=0;a<o.length-1;++a)if(im(o[a],o[a+1],r))return!1;return!0}function om(o,r){for(const a of r)if(am(o,a))return!0;return!1}function yf(o,r,a,f){const p=f[0]-a[0],x=f[1]-a[1],b=(o[0]-a[0])*x-p*(o[1]-a[1]),E=(r[0]-a[0])*x-p*(r[1]-a[1]);return b>0&&E<0||b<0&&E>0}function vf(o,r,a){const f=[];for(let p=0;p<o.length;p++){const x=[];for(let b=0;b<o[p].length;b++){const E=Wu(o[p][b],a);Yu(r,E),x.push(E)}f.push(x)}return f}function Wl(o,r,a){const f=[];for(let p=0;p<o.length;p++){const x=vf(o[p],r,a);f.push(x)}return f}function Ku(o,r,a,f){if(o[0]<a[0]||o[0]>a[2]){const p=.5*f;let x=o[0]-a[0]>p?-f:a[0]-o[0]>p?f:0;x===0&&(x=o[0]-a[2]>p?-f:a[2]-o[0]>p?f:0),o[0]+=x}Yu(r,o)}function sm(o,r,a,f){const p=Math.pow(2,f.z)*jn,x=[f.x*jn,f.y*jn],b=[];for(const E of o)for(const C of E){const k=[C.x+x[0],C.y+x[1]];Ku(k,r,a,p),b.push(k)}return b}function Qc(o,r,a,f){const p=Math.pow(2,f.z)*jn,x=[f.x*jn,f.y*jn],b=[];for(const C of o){const k=[];for(const N of C){const B=[N.x+x[0],N.y+x[1]];Yu(r,B),k.push(B)}b.push(k)}if(r[2]-r[0]<=p/2){(E=r)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const C of b)for(const k of C)Ku(k,r,a,p)}var E;return b}class ol{constructor(r,a){this.type=cr,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Go(r[1])){const f=r[1];if(f.type==="FeatureCollection"){const p=[];for(const x of f.features){const{type:b,coordinates:E}=x.geometry;b==="Polygon"&&p.push(E),b==="MultiPolygon"&&p.push(...E)}if(p.length)return new ol(f,{type:"MultiPolygon",coordinates:p})}else if(f.type==="Feature"){const p=f.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ol(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ol(f,f)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(a,f){const p=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=a.canonicalID();if(f.type==="Polygon"){const E=vf(f.coordinates,x,b),C=sm(a.geometry(),p,x,b);if(!al(p,x))return!1;for(const k of C)if(!_o(k,E))return!1}if(f.type==="MultiPolygon"){const E=Wl(f.coordinates,x,b),C=sm(a.geometry(),p,x,b);if(!al(p,x))return!1;for(const k of C)if(!gf(k,E))return!1}return!0})(r,this.geometries);if(r.geometryType()==="LineString")return(function(a,f){const p=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=a.canonicalID();if(f.type==="Polygon"){const E=vf(f.coordinates,x,b),C=Qc(a.geometry(),p,x,b);if(!al(p,x))return!1;for(const k of C)if(!am(k,E))return!1}if(f.type==="MultiPolygon"){const E=Wl(f.coordinates,x,b),C=Qc(a.geometry(),p,x,b);if(!al(p,x))return!1;for(const k of C)if(!om(k,E))return!1}return!0})(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ad=class{constructor(o=[],r=(a,f)=>a<f?-1:a>f?1:0){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:a}=this,f=r[o];for(;o>0;){const p=o-1>>1,x=r[p];if(a(f,x)>=0)break;r[o]=x,o=p}r[o]=f}_down(o){const{data:r,compare:a}=this,f=this.length>>1,p=r[o];for(;o<f;){let x=1+(o<<1);const b=x+1;if(b<this.length&&a(r[b],r[x])<0&&(x=b),a(r[x],p)>=0)break;r[o]=r[x],o=x}r[o]=p}};function Jc(o,r,a=0,f=o.length-1,p=Md){for(;f>a;){if(f-a>600){const C=f-a+1,k=r-a+1,N=Math.log(C),B=.5*Math.exp(2*N/3),G=.5*Math.sqrt(N*B*(C-B)/C)*(k-C/2<0?-1:1);Jc(o,r,Math.max(a,Math.floor(r-k*B/C+G)),Math.min(f,Math.floor(r+(C-k)*B/C+G)),p)}const x=o[r];let b=a,E=f;for(sl(o,a,r),p(o[f],x)>0&&sl(o,a,f);b<E;){for(sl(o,b,E),b++,E--;p(o[b],x)<0;)b++;for(;p(o[E],x)>0;)E--}p(o[a],x)===0?sl(o,a,E):(E++,sl(o,E,f)),E<=r&&(a=E+1),r<=E&&(f=E-1)}}function sl(o,r,a){const f=o[r];o[r]=o[a],o[a]=f}function Md(o,r){return o<r?-1:o>r?1:0}function eh(o,r){if(o.length<=1)return[o];const a=[];let f,p;for(const x of o){const b=ry(x);b!==0&&(x.area=Math.abs(b),p===void 0&&(p=b<0),p===b<0?(f&&a.push(f),f=[x]):f.push(x))}if(f&&a.push(f),r>1)for(let x=0;x<a.length;x++)a[x].length<=r||(Jc(a[x],r,1,a[x].length-1,lm),a[x]=a[x].slice(0,r));return a}function lm(o,r){return r.area-o.area}function ry(o){let r=0;for(let a,f,p=0,x=o.length,b=x-1;p<x;b=p++)a=o[p],f=o[b],r+=(f.x-a.x)*(a.y+f.y);return r}const um=1/298.257223563,th=um*(2-um),cm=Math.PI/180;class Cd{constructor(r){const a=6378.137*cm*1e3,f=Math.cos(r*cm),p=1/(1-th*(1-f*f)),x=Math.sqrt(p);this.kx=a*x*f,this.ky=a*x*p*(1-th)}distance(r,a){const f=this.wrap(r[0]-a[0])*this.kx,p=(r[1]-a[1])*this.ky;return Math.sqrt(f*f+p*p)}pointOnLine(r,a){let f,p,x,b,E=1/0;for(let C=0;C<r.length-1;C++){let k=r[C][0],N=r[C][1],B=this.wrap(r[C+1][0]-k)*this.kx,G=(r[C+1][1]-N)*this.ky,Z=0;B===0&&G===0||(Z=(this.wrap(a[0]-k)*this.kx*B+(a[1]-N)*this.ky*G)/(B*B+G*G),Z>1?(k=r[C+1][0],N=r[C+1][1]):Z>0&&(k+=B/this.kx*Z,N+=G/this.ky*Z)),B=this.wrap(a[0]-k)*this.kx,G=(a[1]-N)*this.ky;const J=B*B+G*G;J<E&&(E=J,f=k,p=N,x=C,b=Z)}return{point:[f,p],index:x,t:Math.max(0,Math.min(1,b))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Xi(o,r){return r[0]-o[0]}function ll(o){return o[1]-o[0]+1}function Xa(o,r){return o[1]>=o[0]&&o[1]<r}function rh(o,r){if(o[0]>o[1])return[null,null];const a=ll(o);if(r){if(a===2)return[o,null];const p=Math.floor(a/2);return[[o[0],o[0]+p],[o[0]+p,o[1]]]}if(a===1)return[o,null];const f=Math.floor(a/2)-1;return[[o[0],o[0]+f],[o[0]+f+1,o[1]]]}function _f(o,r){if(!Xa(r,o.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let f=r[0];f<=r[1];++f)Yu(a,o[f]);return a}function xf(o){const r=[1/0,1/0,-1/0,-1/0];for(const a of o)for(const f of a)Yu(r,f);return r}function nh(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function bf(o,r,a){if(!nh(o)||!nh(r))return NaN;let f=0,p=0;return o[2]<r[0]&&(f=r[0]-o[2]),o[0]>r[2]&&(f=o[0]-r[2]),o[1]>r[3]&&(p=o[1]-r[3]),o[3]<r[1]&&(p=r[1]-o[3]),a.distance([0,0],[f,p])}function Ya(o,r,a){const f=a.pointOnLine(r,o);return a.distance(o,f.point)}function ih(o,r,a,f,p){const x=Math.min(Ya(o,[a,f],p),Ya(r,[a,f],p)),b=Math.min(Ya(a,[o,r],p),Ya(f,[o,r],p));return Math.min(x,b)}function ah(o,r,a,f,p){if(!Xa(r,o.length)||!Xa(f,a.length))return 1/0;let x=1/0;for(let b=r[0];b<r[1];++b){const E=o[b],C=o[b+1];for(let k=f[0];k<f[1];++k){const N=a[k],B=a[k+1];if(Kc(E,C,N,B))return 0;x=Math.min(x,ih(E,C,N,B,p))}}return x}function wf(o,r,a,f,p){if(!Xa(r,o.length)||!Xa(f,a.length))return NaN;let x=1/0;for(let b=r[0];b<=r[1];++b)for(let E=f[0];E<=f[1];++E)if(x=Math.min(x,p.distance(o[b],a[E])),x===0)return x;return x}function hm(o,r,a){if(_o(o,r,!0))return 0;let f=1/0;for(const p of r){const x=p[0],b=p[p.length-1];if(x!==b&&(f=Math.min(f,Ya(o,[b,x],a)),f===0))return f;const E=a.pointOnLine(p,o);if(f=Math.min(f,a.distance(o,E.point)),f===0)return f}return f}function Xl(o,r,a,f){if(!Xa(r,o.length))return NaN;for(let x=r[0];x<=r[1];++x)if(_o(o[x],a,!0))return 0;let p=1/0;for(let x=r[0];x<r[1];++x){const b=o[x],E=o[x+1];for(const C of a)for(let k=0,N=C.length,B=N-1;k<N;B=k++){const G=C[B],Z=C[k];if(Kc(b,E,G,Z))return 0;p=Math.min(p,ih(b,E,G,Z,f))}}return p}function Yl(o,r){for(const a of o)for(const f of a)if(_o(f,r,!0))return!0;return!1}function Pd(o,r,a,f=1/0){const p=xf(o),x=xf(r);if(f!==1/0&&bf(p,x,a)>=f)return f;if(al(p,x)){if(Yl(o,r))return 0}else if(Yl(r,o))return 0;let b=1/0;for(const E of o)for(let C=0,k=E.length,N=k-1;C<k;N=C++){const B=E[N],G=E[C];for(const Z of r)for(let J=0,te=Z.length,ie=te-1;J<te;ie=J++){const ue=Z[ie],ve=Z[J];if(Kc(B,G,ue,ve))return 0;b=Math.min(b,ih(B,G,ue,ve,a))}}return b}function Ir(o,r,a,f,p,x){if(!x)return;const b=bf(_f(f,x),p,a);b<r&&o.push([b,x,[0,0]])}function Zo(o,r,a,f,p,x,b){if(!x||!b)return;const E=bf(_f(f,x),_f(p,b),a);E<r&&o.push([E,x,b])}function oh(o,r,a,f,p=1/0){let x=Math.min(f.distance(o[0],a[0][0]),p);if(x===0)return x;const b=new Ad([[0,[0,o.length-1],[0,0]]],Xi),E=xf(a);for(;b.length>0;){const C=b.pop();if(C[0]>=x)continue;const k=C[1],N=r?50:100;if(ll(k)<=N){if(!Xa(k,o.length))return NaN;if(r){const B=Xl(o,k,a,f);if(isNaN(B)||B===0)return B;x=Math.min(x,B)}else for(let B=k[0];B<=k[1];++B){const G=hm(o[B],a,f);if(x=Math.min(x,G),x===0)return 0}}else{const B=rh(k,r);Ir(b,x,f,o,E,B[0]),Ir(b,x,f,o,E,B[1])}}return x}function sh(o,r,a,f,p,x=1/0){let b=Math.min(x,p.distance(o[0],a[0]));if(b===0)return b;const E=new Ad([[0,[0,o.length-1],[0,a.length-1]]],Xi);for(;E.length>0;){const C=E.pop();if(C[0]>=b)continue;const k=C[1],N=C[2],B=r?50:100,G=f?50:100;if(ll(k)<=B&&ll(N)<=G){if(!Xa(k,o.length)&&Xa(N,a.length))return NaN;let Z;if(r&&f)Z=ah(o,k,a,N,p),b=Math.min(b,Z);else if(r&&!f){const J=o.slice(k[0],k[1]+1);for(let te=N[0];te<=N[1];++te)if(Z=Ya(a[te],J,p),b=Math.min(b,Z),b===0)return b}else if(!r&&f){const J=a.slice(N[0],N[1]+1);for(let te=k[0];te<=k[1];++te)if(Z=Ya(o[te],J,p),b=Math.min(b,Z),b===0)return b}else Z=wf(o,k,a,N,p),b=Math.min(b,Z)}else{const Z=rh(k,r),J=rh(N,f);Zo(E,b,p,o,a,Z[0],J[0]),Zo(E,b,p,o,a,Z[0],J[1]),Zo(E,b,p,o,a,Z[1],J[0]),Zo(E,b,p,o,a,Z[1],J[1])}}return b}function Sf(o){return o.type==="MultiPolygon"?o.coordinates.map((r=>({type:"Polygon",coordinates:r}))):o.type==="MultiLineString"?o.coordinates.map((r=>({type:"LineString",coordinates:r}))):o.type==="MultiPoint"?o.coordinates.map((r=>({type:"Point",coordinates:r}))):[o]}class Kl{constructor(r,a){this.type=At,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Go(r[1])){const f=r[1];if(f.type==="FeatureCollection")return new Kl(f,f.features.map((p=>Sf(p.geometry))).flat());if(f.type==="Feature")return new Kl(f,Sf(f.geometry));if("type"in f&&"coordinates"in f)return new Kl(f,Sf(f))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(a,f){const p=a.geometry(),x=p.flat().map((C=>Xu([C.x,C.y],a.canonical)));if(p.length===0)return NaN;const b=new Cd(x[0][1]);let E=1/0;for(const C of f){switch(C.type){case"Point":E=Math.min(E,sh(x,!1,[C.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,sh(x,!1,C.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,oh(x,!1,C.coordinates,b,E))}if(E===0)return E}return E})(r,this.geometries);if(r.geometryType()==="LineString")return(function(a,f){const p=a.geometry(),x=p.flat().map((C=>Xu([C.x,C.y],a.canonical)));if(p.length===0)return NaN;const b=new Cd(x[0][1]);let E=1/0;for(const C of f){switch(C.type){case"Point":E=Math.min(E,sh(x,!0,[C.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,sh(x,!0,C.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,oh(x,!0,C.coordinates,b,E))}if(E===0)return E}return E})(r,this.geometries);if(r.geometryType()==="Polygon")return(function(a,f){const p=a.geometry();if(p.length===0||p[0].length===0)return NaN;const x=eh(p,0).map((C=>C.map((k=>k.map((N=>Xu([N.x,N.y],a.canonical))))))),b=new Cd(x[0][0][0][1]);let E=1/0;for(const C of f)for(const k of x){switch(C.type){case"Point":E=Math.min(E,oh([C.coordinates],!1,k,b,E));break;case"LineString":E=Math.min(E,oh(C.coordinates,!0,k,b,E));break;case"Polygon":E=Math.min(E,Pd(k,C.coordinates,b,E))}if(E===0)return E}return E})(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class lh{constructor(r){this.type=hr,this.key=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=r[1];return f==null?a.error("Global state property must be defined."):typeof f!="string"?a.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new lh(f)}evaluate(r){var a;const f=(a=r.globals)===null||a===void 0?void 0:a.globalState;return f&&Object.keys(f).length!==0?Vu(f,this.key):null}eachChild(){}outputDefined(){return!1}}const Qu={"==":tm,"!=":pf,">":ty,"<":rm,">=":mf,"<=":Gu,array:ji,at:br,boolean:ji,case:Zc,coalesce:Hl,collator:$u,format:Yc,image:Zu,in:fr,"index-of":Zl,interpolate:Bi,"interpolate-hcl":Bi,"interpolate-lab":Bi,length:Hu,let:Gr,literal:ba,match:Er,number:ji,"number-format":Ed,object:ji,slice:Wa,step:il,string:ji,"to-boolean":Ni,"to-color":Ni,"to-number":Ni,"to-string":Ni,var:rl,within:ol,distance:Kl,"global-state":lh};class wa{constructor(r,a,f,p){this.name=r,this.type=a,this._evaluate=f,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,a){const f=r[0],p=wa.definitions[f];if(!p)return a.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(p)?p[0]:p.type,b=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,E=b.filter((([k])=>!Array.isArray(k)||k.length===r.length-1));let C=null;for(const[k,N]of E){C=new $l(a.registry,Fi,a.path,null,a.scope);const B=[];let G=!1;for(let Z=1;Z<r.length;Z++){const J=r[Z],te=Array.isArray(k)?k[Z-1]:k.type,ie=C.parse(J,1+B.length,te);if(!ie){G=!0;break}B.push(ie)}if(!G)if(Array.isArray(k)&&k.length!==B.length)C.error(`Expected ${k.length} arguments, but found ${B.length} instead.`);else{for(let Z=0;Z<B.length;Z++){const J=Array.isArray(k)?k[Z]:k.type,te=B[Z];C.concat(Z+1).checkSubtype(J,te.type)}if(C.errors.length===0)return new wa(f,x,N,B)}}if(E.length===1)a.errors.push(...C.errors);else{const k=(E.length?E:b).map((([B])=>{return G=B,Array.isArray(G)?`(${G.map(Tr).join(", ")})`:`(${Tr(G.type)}...)`;var G})).join(" | "),N=[];for(let B=1;B<r.length;B++){const G=a.parse(r[B],1+N.length);if(!G)return null;N.push(Tr(G.type))}a.error(`Expected arguments of type ${k}, but found (${N.join(", ")}) instead.`)}return null}static register(r,a){wa.definitions=a;for(const f in a)r[f]=wa}}function Dd(o,[r,a,f,p]){r=r.evaluate(o),a=a.evaluate(o),f=f.evaluate(o);const x=p?p.evaluate(o):1,b=xa(r,a,f,x);if(b)throw new Xr(b);return new gr(r/255,a/255,f/255,x,!1)}function Tf(o,r){return o in r}function Sa(o,r){const a=r[o];return a===void 0?null:a}function Ho(o){return{type:o}}function Fi(o){if(o instanceof rl)return Fi(o.boundExpression);if(o instanceof wa&&o.name==="error"||o instanceof $u||o instanceof ol||o instanceof Kl||o instanceof lh)return!1;const r=o instanceof Ni||o instanceof ji;let a=!0;return o.eachChild((f=>{a=r?a&&Fi(f):a&&f instanceof ba})),!!a&&Ss(o)&&Jl(o,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ss(o){if(o instanceof wa&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof ol||o instanceof Kl)return!1;let r=!0;return o.eachChild((a=>{r&&!Ss(a)&&(r=!1)})),r}function Ql(o){if(o instanceof wa&&o.name==="feature-state")return!1;let r=!0;return o.eachChild((a=>{r&&!Ql(a)&&(r=!1)})),r}function Jl(o,r){if(o instanceof wa&&r.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild((f=>{a&&!Jl(f,r)&&(a=!1)})),a}function uh(o){return{result:"success",value:o}}function ul(o){return{result:"error",value:o}}function Ka(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Od(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ju(o){return!!o.expression&&o.expression.interpolated}function pr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Ef(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&pn(o)===Bo}function Ta(o){return o}function Af(o,r){const a=o.stops&&typeof o.stops[0][0]=="object",f=a||!(a||o.property!==void 0),p=o.type||(Ju(r)?"exponential":"interval"),x=(function(N){switch(N.type){case"color":return gr.parse;case"padding":return Vn.parse;case"numberArray":return dn.parse;case"colorArray":return tr.parse;default:return null}})(r);if(x&&((o=Dr({},o)).stops&&(o.stops=o.stops.map((N=>[N[0],x(N[1])]))),o.default=x(o.default?o.default:r.default)),o.colorSpace&&(b=o.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var b;const E=(function(N){switch(N){case"exponential":return cl;case"interval":return Mf;case"categorical":return fm;case"identity":return Id;default:throw new Error(`Unknown function type "${N}"`)}})(p);let C,k;if(p==="categorical"){C=Object.create(null);for(const N of o.stops)C[N[0]]=N[1];k=typeof o.stops[0][0]}if(a){const N={},B=[];for(let J=0;J<o.stops.length;J++){const te=o.stops[J],ie=te[0].zoom;N[ie]===void 0&&(N[ie]={zoom:ie,type:o.type,property:o.property,default:o.default,stops:[]},B.push(ie)),N[ie].stops.push([te[0].value,te[1]])}const G=[];for(const J of B)G.push([N[J].zoom,Af(N[J],r)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:Bi.interpolationFactor.bind(void 0,Z),zoomStops:G.map((J=>J[0])),evaluate:({zoom:J},te)=>cl({stops:G,base:o.base},r,J).evaluate(J,te)}}if(f){const N=p==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:Bi.interpolationFactor.bind(void 0,N),zoomStops:o.stops.map((B=>B[0])),evaluate:({zoom:B})=>E(o,r,B,C,k)}}return{kind:"source",evaluate(N,B){const G=B&&B.properties?B.properties[o.property]:void 0;return G===void 0?Ea(o.default,r.default):E(o,r,G,C,k)}}}function Ea(o,r,a){return o!==void 0?o:r!==void 0?r:a!==void 0?a:void 0}function fm(o,r,a,f,p){return Ea(typeof a===p?f[a]:void 0,o.default,r.default)}function Mf(o,r,a){if(pr(a)!=="number")return Ea(o.default,r.default);const f=o.stops.length;if(f===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[f-1][0])return o.stops[f-1][1];const p=nl(o.stops.map((x=>x[0])),a);return o.stops[p][1]}function cl(o,r,a){const f=o.base!==void 0?o.base:1;if(pr(a)!=="number")return Ea(o.default,r.default);const p=o.stops.length;if(p===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const x=nl(o.stops.map((N=>N[0])),a),b=(function(N,B,G,Z){const J=Z-G,te=N-G;return J===0?0:B===1?te/J:(Math.pow(B,te)-1)/(Math.pow(B,J)-1)})(a,f,o.stops[x][0],o.stops[x+1][0]),E=o.stops[x][1],C=o.stops[x+1][1],k=mn[r.type]||Ta;return typeof E.evaluate=="function"?{evaluate(...N){const B=E.evaluate.apply(void 0,N),G=C.evaluate.apply(void 0,N);if(B!==void 0&&G!==void 0)return k(B,G,b,o.colorSpace)}}:k(E,C,b,o.colorSpace)}function Id(o,r,a){switch(r.type){case"color":a=gr.parse(a);break;case"formatted":a=ni.fromString(a.toString());break;case"resolvedImage":a=Li.fromString(a.toString());break;case"padding":a=Vn.parse(a);break;case"colorArray":a=tr.parse(a);break;case"numberArray":a=dn.parse(a);break;default:pr(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0)}return Ea(a,o.default,r.default)}wa.register(Qu,{error:[{kind:"error"},[Kt],(o,[r])=>{throw new Xr(r.evaluate(o))}],typeof:[Kt,[hr],(o,[r])=>Tr(pn(r.evaluate(o)))],"to-rgba":[Mi(At,4),[_a],(o,[r])=>{const[a,f,p,x]=r.evaluate(o).rgb;return[255*a,255*f,255*p,x]}],rgb:[_a,[At,At,At],Dd],rgba:[_a,[At,At,At,At],Dd],has:{type:cr,overloads:[[[Kt],(o,[r])=>Tf(r.evaluate(o),o.properties())],[[Kt,Bo],(o,[r,a])=>Tf(r.evaluate(o),a.evaluate(o))]]},get:{type:hr,overloads:[[[Kt],(o,[r])=>Sa(r.evaluate(o),o.properties())],[[Kt,Bo],(o,[r,a])=>Sa(r.evaluate(o),a.evaluate(o))]]},"feature-state":[hr,[Kt],(o,[r])=>Sa(r.evaluate(o),o.featureState||{})],properties:[Bo,[],o=>o.properties()],"geometry-type":[Kt,[],o=>o.geometryType()],id:[hr,[],o=>o.id()],zoom:[At,[],o=>o.globals.zoom],"heatmap-density":[At,[],o=>o.globals.heatmapDensity||0],elevation:[At,[],o=>o.globals.elevation||0],"line-progress":[At,[],o=>o.globals.lineProgress||0],accumulated:[hr,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[At,Ho(At),(o,r)=>{let a=0;for(const f of r)a+=f.evaluate(o);return a}],"*":[At,Ho(At),(o,r)=>{let a=1;for(const f of r)a*=f.evaluate(o);return a}],"-":{type:At,overloads:[[[At,At],(o,[r,a])=>r.evaluate(o)-a.evaluate(o)],[[At],(o,[r])=>-r.evaluate(o)]]},"/":[At,[At,At],(o,[r,a])=>r.evaluate(o)/a.evaluate(o)],"%":[At,[At,At],(o,[r,a])=>r.evaluate(o)%a.evaluate(o)],ln2:[At,[],()=>Math.LN2],pi:[At,[],()=>Math.PI],e:[At,[],()=>Math.E],"^":[At,[At,At],(o,[r,a])=>Math.pow(r.evaluate(o),a.evaluate(o))],sqrt:[At,[At],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[At,[At],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[At,[At],(o,[r])=>Math.log(r.evaluate(o))],log2:[At,[At],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[At,[At],(o,[r])=>Math.sin(r.evaluate(o))],cos:[At,[At],(o,[r])=>Math.cos(r.evaluate(o))],tan:[At,[At],(o,[r])=>Math.tan(r.evaluate(o))],asin:[At,[At],(o,[r])=>Math.asin(r.evaluate(o))],acos:[At,[At],(o,[r])=>Math.acos(r.evaluate(o))],atan:[At,[At],(o,[r])=>Math.atan(r.evaluate(o))],min:[At,Ho(At),(o,r)=>Math.min(...r.map((a=>a.evaluate(o))))],max:[At,Ho(At),(o,r)=>Math.max(...r.map((a=>a.evaluate(o))))],abs:[At,[At],(o,[r])=>Math.abs(r.evaluate(o))],round:[At,[At],(o,[r])=>{const a=r.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[At,[At],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[At,[At],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[cr,[Kt,hr],(o,[r,a])=>o.properties()[r.value]===a.value],"filter-id-==":[cr,[hr],(o,[r])=>o.id()===r.value],"filter-type-==":[cr,[Kt],(o,[r])=>o.geometryType()===r.value],"filter-<":[cr,[Kt,hr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f<p}],"filter-id-<":[cr,[hr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a<f}],"filter->":[cr,[Kt,hr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f>p}],"filter-id->":[cr,[hr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a>f}],"filter-<=":[cr,[Kt,hr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f<=p}],"filter-id-<=":[cr,[hr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a<=f}],"filter->=":[cr,[Kt,hr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f>=p}],"filter-id->=":[cr,[hr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a>=f}],"filter-has":[cr,[hr],(o,[r])=>r.value in o.properties()],"filter-has-id":[cr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[cr,[Mi(Kt)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[cr,[Mi(hr)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[cr,[Kt,Mi(hr)],(o,[r,a])=>a.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[cr,[Kt,Mi(hr)],(o,[r,a])=>(function(f,p,x,b){for(;x<=b;){const E=x+b>>1;if(p[E]===f)return!0;p[E]>f?b=E-1:x=E+1}return!1})(o.properties()[r.value],a.value,0,a.value.length-1)],all:{type:cr,overloads:[[[cr,cr],(o,[r,a])=>r.evaluate(o)&&a.evaluate(o)],[Ho(cr),(o,r)=>{for(const a of r)if(!a.evaluate(o))return!1;return!0}]]},any:{type:cr,overloads:[[[cr,cr],(o,[r,a])=>r.evaluate(o)||a.evaluate(o)],[Ho(cr),(o,r)=>{for(const a of r)if(a.evaluate(o))return!0;return!1}]]},"!":[cr,[cr],(o,[r])=>!r.evaluate(o)],"is-supported-script":[cr,[Kt],(o,[r])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(r.evaluate(o))}],upcase:[Kt,[Kt],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Kt,[Kt],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Kt,Ho(hr),(o,r)=>r.map((a=>tl(a.evaluate(o)))).join("")],"resolved-locale":[Kt,[Bl],(o,[r])=>r.evaluate(o).resolvedLocale()]});class Cf{constructor(r,a,f){this.expression=r,this._warningHistory={},this._evaluator=new Gl,this._defaultValue=a?(function(p){if(p.type==="color"&&Ef(p.default))return new gr(0,0,0,0);switch(p.type){case"color":return gr.parse(p.default)||null;case"padding":return Vn.parse(p.default)||null;case"numberArray":return dn.parse(p.default)||null;case"colorArray":return tr.parse(p.default)||null;case"variableAnchorOffsetCollection":return Pn.parse(p.default)||null;case"projectionDefinition":return ii.parse(p.default)||null;default:return p.default===void 0?null:p.default}})(a):null,this._enumValues=a&&a.type==="enum"?a.values:null,this._globalState=f}evaluateWithoutErrorHandling(r,a,f,p,x,b){return this._globalState&&(r=ui(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=f,this._evaluator.canonical=p,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(r,a,f,p,x,b){this._globalState&&(r=ui(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=f||null,this._evaluator.canonical=p,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Xr(`Expected value to be one of ${Object.keys(this._enumValues).map((C=>JSON.stringify(C))).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function hl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in Qu}function ec(o,r,a){const f=new $l(Qu,Fi,[],r?(function(x){const b={color:_a,string:Kt,number:At,enum:Kt,boolean:cr,formatted:Fo,padding:xs,numberArray:Vo,colorArray:Uo,projectionDefinition:hf,resolvedImage:Cn,variableAnchorOffsetCollection:Bu};return x.type==="array"?Mi(b[x.value]||hr,x.length):b[x.type]})(r):void 0),p=f.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?uh(new Cf(p,r,a)):ul(f.errors)}class Ui{constructor(r,a,f){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!Ql(a.expression),this.globalStateRefs=ai(a.expression),this._globalState=f}evaluateWithoutErrorHandling(r,a,f,p,x,b){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,a,f,p,x,b)}evaluate(r,a,f,p,x,b){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluate(r,a,f,p,x,b)}}class fl{constructor(r,a,f,p,x){this.kind=r,this.zoomStops=f,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!Ql(a.expression),this.globalStateRefs=ai(a.expression),this.interpolationType=p,this._globalState=x}evaluateWithoutErrorHandling(r,a,f,p,x,b){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,a,f,p,x,b)}evaluate(r,a,f,p,x,b){return this._globalState&&(r=ui(r,this._globalState)),this._styleExpression.evaluate(r,a,f,p,x,b)}interpolationFactor(r,a,f){return this.interpolationType?Bi.interpolationFactor(this.interpolationType,r,a,f):0}}function dl(o,r,a){const f=ec(o,r,a);if(f.result==="error")return f;const p=f.value.expression,x=Ss(p);if(!x&&!Ka(r))return ul([new an("","data expressions not supported")]);const b=Jl(p,["zoom"]);if(!b&&!Od(r))return ul([new an("","zoom expressions not supported")]);const E=pl(p);return E||b?E instanceof an?ul([E]):E instanceof Bi&&!Ju(r)?ul([new an("",'"interpolate" expressions cannot be used with this property')]):uh(E?new fl(x?"camera":"composite",f.value,E.labels,E instanceof Bi?E.interpolation:void 0,a):new Ui(x?"constant":"source",f.value,a)):ul([new an("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class eu{constructor(r,a){this._parameters=r,this._specification=a,Dr(this,Af(this._parameters,this._specification))}static deserialize(r){return new eu(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function pl(o){let r=null;if(o instanceof Gr)r=pl(o.result);else if(o instanceof Hl){for(const a of o.args)if(r=pl(a),r)break}else(o instanceof il||o instanceof Bi)&&o.input instanceof wa&&o.input.name==="zoom"&&(r=o);return r instanceof an||o.eachChild((a=>{const f=pl(a);f instanceof an?r=f:!r&&f?r=new an("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&f&&r!==f&&(r=new an("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r}function ai(o,r=new Set){return o instanceof lh&&r.add(o.key),o.eachChild((a=>{ai(a,r)})),r}function ui(o,r){const{zoom:a,heatmapDensity:f,elevation:p,lineProgress:x,isSupportedScript:b,accumulated:E}=o??{};return{zoom:a,heatmapDensity:f,elevation:p,lineProgress:x,isSupportedScript:b,accumulated:E,globalState:r}}function Wo(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!Wo(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Xo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Yi(o,r){if(o==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Wo(o)||(o=tu(o));const a=ec(o,Xo,r);if(a.result==="error")throw new Error(a.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,p,x)=>a.value.evaluate(f,p,{},x),needGeometry:zd(o),getGlobalStateRefs:()=>ai(a.value.expression)}}function Ts(o,r){return o<r?-1:o>r?1:0}function zd(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(zd(o[r]))return!0;return!1}function tu(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?tc(o[1],o[2],"=="):r==="!="?Yr(tc(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?tc(o[1],o[2],r):r==="any"?(a=o.slice(1),["any"].concat(a.map(tu))):r==="all"?["all"].concat(o.slice(1).map(tu)):r==="none"?["all"].concat(o.slice(1).map(tu).map(Yr)):r==="in"?kd(o[1],o.slice(2)):r==="!in"?Yr(kd(o[1],o.slice(2))):r==="has"?ci(o[1]):r!=="!has"||Yr(ci(o[1]));var a}function tc(o,r,a){switch(o){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,o,r]}}function kd(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some((a=>typeof a!=typeof r[0]))?["filter-in-large",o,["literal",r.sort(Ts)]]:["filter-in-small",o,["literal",r]]}}function ci(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Yr(o){return["!",o]}function Sr(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const x of o)p+=`${Sr(x)},`;return`${p}]`}const a=Object.keys(o).sort();let f="{";for(let p=0;p<a.length;p++)f+=`${JSON.stringify(a[p])}:${Sr(o[a[p]])},`;return`${f}}`}function Es(o){let r="";for(const a of Bt)r+=`/${Sr(o[a])}`;return r}function Aa(o){const r=o.value;return r?[new wt(o.key,r,"constants have been deprecated as of v8")]:[]}function bn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ki(o){if(Array.isArray(o))return o.map(Ki);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const a in o)r[a]=Ki(o[a]);return r}return bn(o)}function Qi(o){const r=o.key,a=o.value,f=o.valueSpec||{},p=o.objectElementValidators||{},x=o.style,b=o.styleSpec,E=o.validateSpec;let C=[];const k=pr(a);if(k!=="object")return[new wt(r,a,`object expected, ${k} found`)];for(const N in a){const B=N.split(".")[0],G=Vu(f,B)||f["*"];let Z;if(Vu(p,B))Z=p[B];else if(Vu(f,B)){if(a[N]===void 0)continue;Z=E}else if(p["*"])Z=p["*"];else{if(!f["*"]){C.push(new wt(r,a[N],`unknown property "${N}"`));continue}Z=E}C=C.concat(Z({key:(r&&`${r}.`)+N,value:a[N],valueSpec:G,style:x,styleSpec:b,object:a,objectKey:N,validateSpec:E},a))}for(const N in f)p[N]||f[N].required&&f[N].default===void 0&&a[N]===void 0&&C.push(new wt(r,a,`missing required property "${N}"`));return C}function ch(o){const r=o.value,a=o.valueSpec,f=o.style,p=o.styleSpec,x=o.key,b=o.arrayElementValidator||o.validateSpec;if(pr(r)!=="array")return[new wt(x,r,`array expected, ${pr(r)} found`)];if(a.length&&r.length!==a.length)return[new wt(x,r,`array length ${a.length} expected, length ${r.length} found`)];let E={type:a.value,values:a.values};p.$version<7&&(E.function=a.function),pr(a.value)==="object"&&(E=a.value);let C=[];for(let k=0;k<r.length;k++)C=C.concat(b({array:r,arrayIndex:k,value:r[k],valueSpec:E,validateSpec:o.validateSpec,style:f,styleSpec:p,key:`${x}[${k}]`}));return C}function Yo(o){const r=o.key,a=o.value,f=o.valueSpec;let p=pr(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new wt(r,a,`number expected, ${p} found`)]:"minimum"in f&&a<f.minimum?[new wt(r,a,`${a} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&a>f.maximum?[new wt(r,a,`${a} is greater than the maximum value ${f.maximum}`)]:[]}function Ko(o){const r=o.valueSpec,a=bn(o.value.type);let f,p,x,b={};const E=a!=="categorical"&&o.value.property===void 0,C=!E,k=pr(o.value.stops)==="array"&&pr(o.value.stops[0])==="array"&&pr(o.value.stops[0][0])==="object",N=Qi({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Z){if(a==="identity")return[new wt(Z.key,Z.value,'identity function may not have a "stops" property')];let J=[];const te=Z.value;return J=J.concat(ch({key:Z.key,value:te,valueSpec:Z.valueSpec,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:B})),pr(te)==="array"&&te.length===0&&J.push(new wt(Z.key,te,"array must have at least one stop")),J},default:function(Z){return Z.validateSpec({key:Z.key,value:Z.value,valueSpec:r,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec})}}});return a==="identity"&&E&&N.push(new wt(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||N.push(new wt(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Ju(o.valueSpec)&&N.push(new wt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(C&&!Ka(o.valueSpec)?N.push(new wt(o.key,o.value,"property functions not supported")):E&&!Od(o.valueSpec)&&N.push(new wt(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!k||o.value.property!==void 0||N.push(new wt(o.key,o.value,'"property" property is required')),N;function B(Z){let J=[];const te=Z.value,ie=Z.key;if(pr(te)!=="array")return[new wt(ie,te,`array expected, ${pr(te)} found`)];if(te.length!==2)return[new wt(ie,te,`array length 2 expected, length ${te.length} found`)];if(k){if(pr(te[0])!=="object")return[new wt(ie,te,`object expected, ${pr(te[0])} found`)];if(te[0].zoom===void 0)return[new wt(ie,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new wt(ie,te,"object stop key must have value")];if(x&&x>bn(te[0].zoom))return[new wt(ie,te[0].zoom,"stop zoom values must appear in ascending order")];bn(te[0].zoom)!==x&&(x=bn(te[0].zoom),p=void 0,b={}),J=J.concat(Qi({key:`${ie}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:Yo,value:G}}))}else J=J.concat(G({key:`${ie}[0]`,value:te[0],validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec},te));return hl(Ki(te[1]))?J.concat([new wt(`${ie}[1]`,te[1],"expressions are not allowed in function stops.")]):J.concat(Z.validateSpec({key:`${ie}[1]`,value:te[1],valueSpec:r,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec}))}function G(Z,J){const te=pr(Z.value),ie=bn(Z.value),ue=Z.value!==null?Z.value:J;if(f){if(te!==f)return[new wt(Z.key,ue,`${te} stop domain type must match previous stop domain type ${f}`)]}else f=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new wt(Z.key,ue,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&a!=="categorical"){let ve=`number expected, ${te} found`;return Ka(r)&&a===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new wt(Z.key,ue,ve)]}return a!=="categorical"||te!=="number"||isFinite(ie)&&Math.floor(ie)===ie?a!=="categorical"&&te==="number"&&p!==void 0&&ie<p?[new wt(Z.key,ue,"stop domain values must appear in ascending order")]:(p=ie,a==="categorical"&&ie in b?[new wt(Z.key,ue,"stop domain values must be unique")]:(b[ie]=!0,[])):[new wt(Z.key,ue,`integer expected, found ${ie}`)]}}function Qo(o){const r=(o.expressionContext==="property"?dl:ec)(Ki(o.value),o.valueSpec);if(r.result==="error")return r.value.map((f=>new wt(`${o.key}${f.key}`,o.value,f.message)));const a=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new wt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Ql(a))return[new wt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Ql(a))return[new wt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!Jl(a,["zoom","feature-state"]))return[new wt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Ss(a))return[new wt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function As(o){const r=o.key,a=o.value,f=pr(a);return f!=="string"?[new wt(r,a,`color expected, ${f} found`)]:gr.parse(String(a))?[]:[new wt(r,a,`color expected, "${a}" found`)]}function Ms(o){const r=o.key,a=o.value,f=o.valueSpec,p=[];return Array.isArray(f.values)?f.values.indexOf(bn(a))===-1&&p.push(new wt(r,a,`expected one of [${f.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(f.values).indexOf(bn(a))===-1&&p.push(new wt(r,a,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function Qa(o){return Wo(Ki(o.value))?Qo(Dr({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Jo(o)}function Jo(o){const r=o.value,a=o.key;if(pr(r)!=="array")return[new wt(a,r,`array expected, ${pr(r)} found`)];const f=o.styleSpec;let p,x=[];if(r.length<1)return[new wt(a,r,"filter array must have at least 1 element")];switch(x=x.concat(Ms({key:`${a}[0]`,value:r[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),bn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&bn(r[1])==="$type"&&x.push(new wt(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&x.push(new wt(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=pr(r[1]),p!=="string"&&x.push(new wt(`${a}[1]`,r[1],`string expected, ${p} found`)));for(let b=2;b<r.length;b++)p=pr(r[b]),bn(r[1])==="$type"?x=x.concat(Ms({key:`${a}[${b}]`,value:r[b],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&x.push(new wt(`${a}[${b}]`,r[b],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let b=1;b<r.length;b++)x=x.concat(Jo({key:`${a}[${b}]`,value:r[b],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=pr(r[1]),r.length!==2?x.push(new wt(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&x.push(new wt(`${a}[1]`,r[1],`string expected, ${p} found`))}return x}function Cs(o,r){const a=o.key,f=o.validateSpec,p=o.style,x=o.styleSpec,b=o.value,E=o.objectKey,C=x[`${r}_${o.layerType}`];if(!C)return[];const k=E.match(/^(.*)-transition$/);if(r==="paint"&&k&&C[k[1]]&&C[k[1]].transition)return f({key:a,value:b,valueSpec:x.transition,style:p,styleSpec:x});const N=o.valueSpec||C[E];if(!N)return[new wt(a,b,`unknown property "${E}"`)];let B;if(pr(b)==="string"&&Ka(N)&&!N.tokens&&(B=/^{([^}]+)}$/.exec(b)))return[new wt(a,b,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const G=[];return o.layerType==="symbol"&&E==="text-font"&&Ef(Ki(b))&&bn(b.type)==="identity"&&G.push(new wt(a,b,'"text-font" does not support identity functions')),G.concat(f({key:o.key,value:b,valueSpec:N,style:p,styleSpec:x,expressionContext:"property",propertyType:r,propertyKey:E}))}function es(o){return Cs(o,"paint")}function Pf(o){return Cs(o,"layout")}function Df(o){let r=[];const a=o.value,f=o.key,p=o.style,x=o.styleSpec;if(pr(a)!=="object")return[new wt(f,a,`object expected, ${pr(a)} found`)];a.type||a.ref||r.push(new wt(f,a,'either "type" or "ref" is required'));let b=bn(a.type);const E=bn(a.ref);if(a.id){const C=bn(a.id);for(let k=0;k<o.arrayIndex;k++){const N=p.layers[k];bn(N.id)===C&&r.push(new wt(f,a.id,`duplicate layer id "${a.id}", previously used at line ${N.id.__line__}`))}}if("ref"in a){let C;["type","source","source-layer","filter","layout"].forEach((k=>{k in a&&r.push(new wt(f,a[k],`"${k}" is prohibited for ref layers`))})),p.layers.forEach((k=>{bn(k.id)===E&&(C=k)})),C?C.ref?r.push(new wt(f,a.ref,"ref cannot reference another ref layer")):b=bn(C.type):r.push(new wt(f,a.ref,`ref layer "${E}" not found`))}else if(b!=="background")if(a.source){const C=p.sources&&p.sources[a.source],k=C&&bn(C.type);C?k==="vector"&&b==="raster"?r.push(new wt(f,a.source,`layer "${a.id}" requires a raster source`)):k!=="raster-dem"&&b==="hillshade"||k!=="raster-dem"&&b==="color-relief"?r.push(new wt(f,a.source,`layer "${a.id}" requires a raster-dem source`)):k==="raster"&&b!=="raster"?r.push(new wt(f,a.source,`layer "${a.id}" requires a vector source`)):k!=="vector"||a["source-layer"]?k==="raster-dem"&&b!=="hillshade"&&b!=="color-relief"?r.push(new wt(f,a.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):b!=="line"||!a.paint||!a.paint["line-gradient"]||k==="geojson"&&C.lineMetrics||r.push(new wt(f,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new wt(f,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new wt(f,a.source,`source "${a.source}" not found`))}else r.push(new wt(f,a,'missing required property "source"'));return r=r.concat(Qi({key:f,value:a,valueSpec:x.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${f}.type`,value:a.type,valueSpec:x.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:Qa,layout:C=>Qi({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":k=>Pf(Dr({layerType:b},k))}}),paint:C=>Qi({layer:a,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":k=>es(Dr({layerType:b},k))}})}})),r}function Ma(o){const r=o.value,a=o.key,f=pr(r);return f!=="string"?[new wt(a,r,`string expected, ${f} found`)]:[]}const rc={promoteId:function({key:o,value:r}){if(pr(r)==="string")return Ma({key:o,value:r});{const a=[];for(const f in r)a.push(...Ma({key:`${o}.${f}`,value:r[f]}));return a}}};function Ps(o){const r=o.value,a=o.key,f=o.styleSpec,p=o.style,x=o.validateSpec;if(!r.type)return[new wt(a,r,'"type" is required')];const b=bn(r.type);let E;switch(b){case"vector":case"raster":return E=Qi({key:a,value:r,valueSpec:f[`source_${b.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:rc,validateSpec:x}),E;case"raster-dem":return E=(function(C){var k;const N=(k=C.sourceName)!==null&&k!==void 0?k:"",B=C.value,G=C.styleSpec,Z=G.source_raster_dem,J=C.style;let te=[];const ie=pr(B);if(B===void 0)return te;if(ie!=="object")return te.push(new wt("source_raster_dem",B,`object expected, ${ie} found`)),te;const ue=bn(B.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],se=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const de in B)!ue&&ve.includes(de)?te.push(new wt(de,B[de],`In "${N}": "${de}" is only valid when "encoding" is set to "custom". ${se} encoding found`)):Z[de]?te=te.concat(C.validateSpec({key:de,value:B[de],valueSpec:Z[de],validateSpec:C.validateSpec,style:J,styleSpec:G})):te.push(new wt(de,B[de],`unknown property "${de}"`));return te})({sourceName:a,value:r,style:o.style,styleSpec:f,validateSpec:x}),E;case"geojson":if(E=Qi({key:a,value:r,valueSpec:f.source_geojson,style:p,styleSpec:f,validateSpec:x,objectElementValidators:rc}),r.cluster)for(const C in r.clusterProperties){const[k,N]=r.clusterProperties[C],B=typeof k=="string"?[k,["accumulated"],["get",C]]:k;E.push(...Qo({key:`${a}.${C}.map`,value:N,expressionContext:"cluster-map"})),E.push(...Qo({key:`${a}.${C}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return E;case"video":return Qi({key:a,value:r,valueSpec:f.source_video,style:p,validateSpec:x,styleSpec:f});case"image":return Qi({key:a,value:r,valueSpec:f.source_image,style:p,validateSpec:x,styleSpec:f});case"canvas":return[new wt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ms({key:`${a}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function qn(o){const r=o.value,a=o.styleSpec,f=a.light,p=o.style;let x=[];const b=pr(r);if(r===void 0)return x;if(b!=="object")return x=x.concat([new wt("light",r,`object expected, ${b} found`)]),x;for(const E in r){const C=E.match(/^(.*)-transition$/);x=x.concat(C&&f[C[1]]&&f[C[1]].transition?o.validateSpec({key:E,value:r[E],valueSpec:a.transition,validateSpec:o.validateSpec,style:p,styleSpec:a}):f[E]?o.validateSpec({key:E,value:r[E],valueSpec:f[E],validateSpec:o.validateSpec,style:p,styleSpec:a}):[new wt(E,r[E],`unknown property "${E}"`)])}return x}function hh(o){const r=o.value,a=o.styleSpec,f=a.sky,p=o.style,x=pr(r);if(r===void 0)return[];if(x!=="object")return[new wt("sky",r,`object expected, ${x} found`)];let b=[];for(const E in r)b=b.concat(f[E]?o.validateSpec({key:E,value:r[E],valueSpec:f[E],style:p,styleSpec:a}):[new wt(E,r[E],`unknown property "${E}"`)]);return b}function Of(o){const r=o.value,a=o.styleSpec,f=a.terrain,p=o.style;let x=[];const b=pr(r);if(r===void 0)return x;if(b!=="object")return x=x.concat([new wt("terrain",r,`object expected, ${b} found`)]),x;for(const E in r)x=x.concat(f[E]?o.validateSpec({key:E,value:r[E],valueSpec:f[E],validateSpec:o.validateSpec,style:p,styleSpec:a}):[new wt(E,r[E],`unknown property "${E}"`)]);return x}function Rd(o){let r=[];const a=o.value,f=o.key;if(Array.isArray(a)){const p=[],x=[];for(const b in a)a[b].id&&p.includes(a[b].id)&&r.push(new wt(f,a,`all the sprites' ids must be unique, but ${a[b].id} is duplicated`)),p.push(a[b].id),a[b].url&&x.includes(a[b].url)&&r.push(new wt(f,a,`all the sprites' URLs must be unique, but ${a[b].url} is duplicated`)),x.push(a[b].url),r=r.concat(Qi({key:`${f}[${b}]`,value:a[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return Ma({key:f,value:a})}function dm(o){return!!o&&o.constructor===Object}function Ld(o){return dm(o.value)?[]:[new wt(o.key,o.value,`object expected, ${pr(o.value)} found`)]}const Nn={"*":()=>[],array:ch,boolean:function(o){const r=o.value,a=o.key,f=pr(r);return f!=="boolean"?[new wt(a,r,`boolean expected, ${f} found`)]:[]},number:Yo,color:As,constants:Aa,enum:Ms,filter:Qa,function:Ko,layer:Df,object:Qi,source:Ps,light:qn,sky:hh,terrain:Of,projection:function(o){const r=o.value,a=o.styleSpec,f=a.projection,p=o.style,x=pr(r);if(r===void 0)return[];if(x!=="object")return[new wt("projection",r,`object expected, ${x} found`)];let b=[];for(const E in r)b=b.concat(f[E]?o.validateSpec({key:E,value:r[E],valueSpec:f[E],style:p,styleSpec:a}):[new wt(E,r[E],`unknown property "${E}"`)]);return b},projectionDefinition:function(o){const r=o.key;let a=o.value;a=a instanceof String?a.valueOf():a;const f=pr(a);return f!=="array"||(function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"})(a)||(function(p){return!!["interpolate","step","literal"].includes(p[0])})(a)?["array","string"].includes(f)?[]:[new wt(r,a,`projection expected, invalid type "${f}" found`)]:[new wt(r,a,`projection expected, invalid array ${JSON.stringify(a)} found`)]},string:Ma,formatted:function(o){return Ma(o).length===0?[]:Qo(o)},resolvedImage:function(o){return Ma(o).length===0?[]:Qo(o)},padding:function(o){const r=o.key,a=o.value;if(pr(a)==="array"){if(a.length<1||a.length>4)return[new wt(r,a,`padding requires 1 to 4 values; ${a.length} values found`)];const f={type:"number"};let p=[];for(let x=0;x<a.length;x++)p=p.concat(o.validateSpec({key:`${r}[${x}]`,value:a[x],validateSpec:o.validateSpec,valueSpec:f}));return p}return Yo({key:r,value:a,valueSpec:{}})},numberArray:function(o){const r=o.key,a=o.value;if(pr(a)==="array"){const f={type:"number"};if(a.length<1)return[new wt(r,a,"array length at least 1 expected, length 0 found")];let p=[];for(let x=0;x<a.length;x++)p=p.concat(o.validateSpec({key:`${r}[${x}]`,value:a[x],validateSpec:o.validateSpec,valueSpec:f}));return p}return Yo({key:r,value:a,valueSpec:{}})},colorArray:function(o){const r=o.key,a=o.value;if(pr(a)==="array"){if(a.length<1)return[new wt(r,a,"array length at least 1 expected, length 0 found")];let f=[];for(let p=0;p<a.length;p++)f=f.concat(As({key:`${r}[${p}]`,value:a[p]}));return f}return As({key:r,value:a})},variableAnchorOffsetCollection:function(o){const r=o.key,a=o.value,f=pr(a),p=o.styleSpec;if(f!=="array"||a.length<1||a.length%2!=0)return[new wt(r,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let b=0;b<a.length;b+=2)x=x.concat(Ms({key:`${r}[${b}]`,value:a[b],valueSpec:p.layout_symbol["text-anchor"]})),x=x.concat(ch({key:`${r}[${b+1}]`,value:a[b+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return x},sprite:Rd,state:Ld,fontFaces:function(o){const r=o.key,a=o.value,f=o.validateSpec,p=o.styleSpec,x=o.style;if(!dm(a))return[new wt(r,a,`object expected, ${pr(a)} found`)];const b=[];for(const E in a){const C=a[E],k=pr(C);if(k==="string")b.push(...Ma({key:`${r}.${E}`,value:C}));else if(k==="array"){const N={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[B,G]of C.entries())b.push(...Qi({key:`${r}.${E}[${B}]`,value:G,valueSpec:N,styleSpec:p,style:x,validateSpec:f}))}else b.push(new wt(`${r}.${E}`,C,`string or array expected, ${k} found`))}return b}};function ts(o){const r=o.value,a=o.valueSpec,f=o.styleSpec;return o.validateSpec=ts,a.expression&&Ef(bn(r))?Ko(o):a.expression&&hl(Ki(r))?Qo(o):a.type&&Nn[a.type]?Nn[a.type](o):Qi(Dr({},o,{valueSpec:a.type?f[a.type]:a}))}function nc(o){const r=o.value,a=o.key,f=Ma(o);return f.length||(r.indexOf("{fontstack}")===-1&&f.push(new wt(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&f.push(new wt(a,r,'"glyphs" url must include a "{range}" token'))),f}function Ci(o,r=Me){let a=[];return a=a.concat(ts({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:ts,objectElementValidators:{glyphs:nc,"*":()=>[]}})),o.constants&&(a=a.concat(Aa({key:"constants",value:o.constants}))),ru(a)}function Ca(o){return function(r){return o(Object.assign({},r,{validateSpec:ts}))}}function ru(o){return[].concat(o).sort(((r,a)=>r.line-a.line))}function Pi(o){return function(...r){return ru(o.apply(this,r))}}Ci.source=Pi(Ca(Ps)),Ci.sprite=Pi(Ca(Rd)),Ci.glyphs=Pi(Ca(nc)),Ci.light=Pi(Ca(qn)),Ci.sky=Pi(Ca(hh)),Ci.terrain=Pi(Ca(Of)),Ci.state=Pi(Ca(Ld)),Ci.layer=Pi(Ca(Df)),Ci.filter=Pi(Ca(Qa)),Ci.paintProperty=Pi(Ca(es)),Ci.layoutProperty=Pi(Ca(Pf));const ny={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class ic{constructor(r,a){this._globalState=a,this.setValue(r)}evaluate(){var r;return(r=this._literalValue)!==null&&r!==void 0?r:this._compiledValue.evaluate({})}setValue(r){if(r==null||r==="visible"||r==="none")return this._literalValue=r==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const a=ec(r,ny,this._globalState);if(a.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(a.value.map((f=>`${f.key}: ${f.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=a.value,this._globalStateRefs=ai(a.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const fh=Me,oi=Ci,xo=oi.light,If=oi.sky,zf=oi.paintProperty,pm=oi.layoutProperty;function bo(o,r){let a=!1;if(r&&r.length)for(const f of r)o.fire(new vt(new Error(f.message))),a=!0;return a}class ml{constructor(r,a,f){const p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const b=new Int32Array(this.arrayBuffer);r=b[0],this.d=(a=b[1])+2*(f=b[2]);for(let C=0;C<this.d*this.d;C++){const k=b[3+C],N=b[3+C+1];p.push(k===N?null:b.subarray(k,N))}const E=b[3+p.length+1];this.keys=b.subarray(b[3+p.length],E),this.bboxes=b.subarray(E),this.insert=this._insertReadonly}else{this.d=a+2*f;for(let b=0;b<this.d*this.d;b++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=r,this.padding=f,this.scale=a/r,this.uid=0;const x=f/a*r;this.min=-x,this.max=r+x}insert(r,a,f,p,x){this._forEachCell(a,f,p,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(a),this.bboxes.push(f),this.bboxes.push(p),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,a,f,p,x,b){this.cells[x].push(b)}query(r,a,f,p,x){const b=this.min,E=this.max;if(r<=b&&a<=b&&E<=f&&E<=p&&!x)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(r,a,f,p,this._queryCell,C,{},x),C}}_queryCell(r,a,f,p,x,b,E,C){const k=this.cells[x];if(k!==null){const N=this.keys,B=this.bboxes;for(let G=0;G<k.length;G++){const Z=k[G];if(E[Z]===void 0){const J=4*Z;(C?C(B[J+0],B[J+1],B[J+2],B[J+3]):r<=B[J+2]&&a<=B[J+3]&&f>=B[J+0]&&p>=B[J+1])?(E[Z]=!0,b.push(N[Z])):E[Z]=!1}}}}_forEachCell(r,a,f,p,x,b,E,C){const k=this._convertToCellCoord(r),N=this._convertToCellCoord(a),B=this._convertToCellCoord(f),G=this._convertToCellCoord(p);for(let Z=k;Z<=B;Z++)for(let J=N;J<=G;J++){const te=this.d*J+Z;if((!C||C(this._convertFromCellCoord(Z),this._convertFromCellCoord(J),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(J+1)))&&x.call(this,r,a,f,p,te,b,E,C))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,a=3+this.cells.length+1+1;let f=0;for(let b=0;b<this.cells.length;b++)f+=this.cells[b].length;const p=new Int32Array(a+f+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let x=a;for(let b=0;b<r.length;b++){const E=r[b];p[3+b]=x,p.set(E,x),x+=E.length}return p[3+r.length]=x,p.set(this.keys,x),x+=this.keys.length,p[3+r.length+1]=x,p.set(this.bboxes,x),x+=this.bboxes.length,p.buffer}static serialize(r,a){const f=r.toArrayBuffer();return a&&a.push(f),{buffer:f}}static deserialize(r){return new ml(r.buffer)}}const Ji={};function Lt(o,r,a={}){if(Ji[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),Ji[o]={klass:r,omit:a.omit||[],shallow:a.shallow||[]}}Lt("Object",Object),Lt("Set",Set),Lt("TransferableGridIndex",ml),Lt("Color",gr),Lt("Error",Error),Lt("AJAXError",ae),Lt("ResolvedImage",Li),Lt("StylePropertyFunction",eu),Lt("StyleExpression",Cf,{omit:["_evaluator"]}),Lt("ZoomDependentExpression",fl),Lt("ZoomConstantExpression",Ui),Lt("CompoundExpression",wa,{omit:["_evaluate"]});for(const o in Qu)Qu[o]._classRegistryKey||Lt(`Expression_${o}`,Qu[o]);function dh(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function kf(o){return o.$name||o.constructor._classRegistryKey}function Ja(o){return!(function(r){if(r===null||typeof r!="object")return!1;const a=kf(r);return!(!a||a==="Object")})(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||dh(o)||ya(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function wo(o,r){if(Ja(o))return(dh(o)||ya(o))&&r&&r.push(o),ArrayBuffer.isView(o)&&r&&r.push(o.buffer),o instanceof ImageData&&r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const x=[];for(const b of o)x.push(wo(b,r));return x}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const a=kf(o);if(!a)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!Ji[a])throw new Error(`${a} is not registered.`);const{klass:f}=Ji[a],p=f.serialize?f.serialize(o,r):{};if(f.serialize){if(r&&p===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in o){if(!o.hasOwnProperty(x)||Ji[a].omit.indexOf(x)>=0)continue;const b=o[x];p[x]=Ji[a].shallow.indexOf(x)>=0?b:wo(b,r)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(p.$name=a),p}function ac(o){if(Ja(o))return o;if(Array.isArray(o))return o.map(ac);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const r=kf(o)||"Object";if(!Ji[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:a}=Ji[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(o);const f=Object.create(a.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const x=o[p];f[p]=Ji[r].shallow.indexOf(p)>=0?x:ac(x)}return f}class Rf{constructor(){this.first=!0}update(r,a){const f=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=a),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=f,!0))}}function rs(o){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))}function nu(o){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))}function ph(o){return/\s/u.test(String.fromCodePoint(o))}function ns(o){for(const r of o)if(nu(r.codePointAt(0)))return!0;return!1}function Lf(o){for(const r of o)if(!jd(r.codePointAt(0)))return!1;return!0}function mh(o){const r=o.map((a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}})).filter((a=>a));return new RegExp(r.join("|"),"u")}const is=mh(["Arab","Dupl","Mong","Ougr","Syrc"]);function jd(o){return!is.test(String.fromCodePoint(o))}function as(o){return!(nu(o)||(r=o,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(r))));var r}const jf=mh(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function gh(o){return jf.test(String.fromCodePoint(o))}function os(o,r){return!(!r&&gh(o)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(o)))}function Ds(o){for(const r of o)if(gh(r.codePointAt(0)))return!0;return!1}const eo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){if(eo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(o,r){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(o.pluginStatus!=="loading")return this.setState(o),o;const a=o.pluginURL,f=new Promise((x=>{this.loadScriptResolve=x}));r(a);const p=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([f,p]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:a};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${a}`)}))}};class Ur{constructor(r,a){this.isSupportedScript=Nd,this.zoom=r,a?(this.now=a.now||0,this.fadeDuration=a.fadeDuration||0,this.zoomHistory=a.zoomHistory||new Rf,this.transition=a.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rf,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,a=r-Math.floor(r),f=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*a}}}function Nd(o){return(function(r,a){for(const f of r)if(!os(f.codePointAt(0),a))return!1;return!0})(o,eo.getRTLTextPluginStatus()==="loaded")}const Os="-transition";class gl{constructor(r,a,f){this.property=r,this.value=a,this.expression=(function(p,x,b){if(Ef(p))return new eu(p,x);if(hl(p)){const E=dl(p,x,b);if(E.result==="error")throw new Error(E.value.map((C=>`${C.key}: ${C.message}`)).join(", "));return E.value}{let E=p;return x.type==="color"&&typeof p=="string"?E=gr.parse(p):x.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?x.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?x.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?E=Pn.parse(p):x.type==="projectionDefinition"&&typeof p=="string"&&(E=ii.parse(p)):E=tr.parse(p):E=dn.parse(p):E=Vn.parse(p),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>E}}})(a===void 0?r.specification.default:a,r.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(r,a,f){return this.property.possiblyEvaluate(this,r,a,f)}}class yh{constructor(r,a){this.property=r,this.value=new gl(r,void 0,a)}transitioned(r,a){return new iu(this.property,this.value,a,Ar({},r.transition,this.transition),r.now)}untransitioned(){return new iu(this.property,this.value,null,{},0)}}class Nf{constructor(r,a){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._globalState=a}getValue(r){return Et(this._values[r].value.value)}setValue(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new yh(this._values[r].property,this._globalState)),this._values[r].value=new gl(this._values[r].property,a===null?void 0:Et(a),this._globalState)}getTransition(r){return Et(this._values[r].transition)}setTransition(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new yh(this._values[r].property,this._globalState)),this._values[r].transition=Et(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const f=this.getValue(a);f!==void 0&&(r[a]=f);const p=this.getTransition(a);p!==void 0&&(r[`${a}${Os}`]=p)}return r}transitioned(r,a){const f=new vh(this._properties);for(const p of Object.keys(this._values))f._values[p]=this._values[p].transitioned(r,a._values[p]);return f}untransitioned(){const r=new vh(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class iu{constructor(r,a,f,p,x){this.property=r,this.value=a,this.begin=x+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=f)}possiblyEvaluate(r,a,f){const p=r.now||0,x=this.value.possiblyEvaluate(r,a,f),b=this.prior;if(b){if(p>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(p<this.begin)return b.possiblyEvaluate(r,a,f);{const E=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(r,a,f),x,Mt(E))}}return x}}class vh{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,f){const p=new au(this._properties);for(const x of Object.keys(this._values))p._values[x]=this._values[x].possiblyEvaluate(r,a,f);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Bd{constructor(r,a){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._globalState=a}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Et(this._values[r].value)}setValue(r,a){this._values[r]=new gl(this._values[r].property,a===null?void 0:Et(a),this._globalState)}serialize(){const r={};for(const a of Object.keys(this._values)){const f=this.getValue(a);f!==void 0&&(r[a]=f)}return r}possiblyEvaluate(r,a,f){const p=new au(this._properties);for(const x of Object.keys(this._values))p._values[x]=this._values[x].possiblyEvaluate(r,a,f);return p}}class Pa{constructor(r,a,f){this.property=r,this.value=a,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,f,p){return this.property.evaluate(this.value,this.parameters,r,a,f,p)}}class au{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class jt{constructor(r){this.specification=r}possiblyEvaluate(r,a){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(a)}interpolate(r,a,f){const p=mn[this.specification.type];return p?p(r,a,f):r}}class Ut{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,f,p){return new Pa(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},f,p)}:r.expression,a)}interpolate(r,a,f){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new Pa(this,{kind:"constant",value:void 0},r.parameters);const p=mn[this.specification.type];if(p){const x=p(r.value.value,a.value.value,f);return new Pa(this,{kind:"constant",value:x},r.parameters)}return r}evaluate(r,a,f,p,x,b){return r.kind==="constant"?r.value:r.evaluate(a,f,p,x,b)}}class to extends Ut{possiblyEvaluate(r,a,f,p){if(r.value===void 0)return new Pa(this,{kind:"constant",value:void 0},a);if(r.expression.kind==="constant"){const x=r.expression.evaluate(a,null,{},f,p),b=r.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,E=this._calculate(b,b,b,a);return new Pa(this,{kind:"constant",value:E},a)}if(r.expression.kind==="camera"){const x=this._calculate(r.expression.evaluate({zoom:a.zoom-1}),r.expression.evaluate({zoom:a.zoom}),r.expression.evaluate({zoom:a.zoom+1}),a);return new Pa(this,{kind:"constant",value:x},a)}return new Pa(this,r.expression,a)}evaluate(r,a,f,p,x,b){if(r.kind==="source"){const E=r.evaluate(a,f,p,x,b);return this._calculate(E,E,E,a)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(a.zoom)-1},f,p),r.evaluate({zoom:Math.floor(a.zoom)},f,p),r.evaluate({zoom:Math.floor(a.zoom)+1},f,p),a):r.value}_calculate(r,a,f,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:f,to:a}}interpolate(r){return r}}class oc{constructor(r){this.specification=r}possiblyEvaluate(r,a,f,p){if(r.value!==void 0){if(r.expression.kind==="constant"){const x=r.expression.evaluate(a,null,{},f,p);return this._calculate(x,x,x,a)}return this._calculate(r.expression.evaluate(new Ur(Math.floor(a.zoom-1),a)),r.expression.evaluate(new Ur(Math.floor(a.zoom),a)),r.expression.evaluate(new Ur(Math.floor(a.zoom+1),a)),a)}}_calculate(r,a,f,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:f,to:a}}interpolate(r){return r}}class _h{constructor(r){this.specification=r}possiblyEvaluate(r,a,f,p){return!!r.expression.evaluate(a,null,{},f,p)}interpolate(){return!1}}class Bn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in r){const f=r[a];f.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new gl(f,void 0,void 0),x=this.defaultTransitionablePropertyValues[a]=new yh(f,void 0);this.defaultTransitioningPropertyValues[a]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}Lt("DataDrivenProperty",Ut),Lt("DataConstantProperty",jt),Lt("CrossFadedDataDrivenProperty",to),Lt("CrossFadedProperty",oc),Lt("ColorRampProperty",_h);class wn extends at{constructor(r,a,f){if(super(),this.id=r.id,this.type=r.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(p,x){return new ic(p,x)})(this.visibility,f),r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter,this._featureFilter=Yi(r.filter,f)),a.layout&&(this._unevaluatedLayout=new Bd(a.layout,f)),a.paint)){this._transitionablePaint=new Nf(a.paint,f);for(const p in r.paint)this.setPaintProperty(p,r.paint[p],{validate:!1});for(const p in r.layout)this.setLayoutProperty(p,r.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new au(a.paint)}}setFilter(r){this.filter=r,this._featureFilter=Yi(r,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}getLayoutAffectingGlobalStateRefs(){const r=new Set;for(const a of this._visibilityExpression.getGlobalStateRefs())r.add(a);if(this._unevaluatedLayout)for(const a in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[a];for(const p of f.getGlobalStateRefs())r.add(p)}for(const a of this._featureFilter.getGlobalStateRefs())r.add(a);return r}getPaintAffectingGlobalStateRefs(){var r;const a=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const p=this._transitionablePaint._values[f].value;for(const x of p.getGlobalStateRefs()){const b=(r=a.get(x))!==null&&r!==void 0?r:[];b.push({name:f,value:p.value}),a.set(x,b)}}return a}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(r,a,f={}){if(a==null||!this._validate(pm,`layers.${this.id}.layout.${r}`,r,a,f))return r==="visibility"?(this.visibility=a,this._visibilityExpression.setValue(a),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(r,a)}getPaintProperty(r){return r.endsWith(Os)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,f={}){if(a!=null&&this._validate(zf,`layers.${this.id}.paint.${r}`,r,a,f))return!1;if(r.endsWith(Os))return this._transitionablePaint.setTransition(r.slice(0,-11),a||void 0),!1;{const p=this._transitionablePaint._values[r],x=p.property.specification["property-type"]==="cross-faded-data-driven",b=p.value.isDataDriven(),E=p.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const C=this._transitionablePaint._values[r].value;return C.isDataDriven()||b||x||this._handleOverridablePaintPropertyUpdate(r,E,C)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,a,f){return!1}isHidden(r=this.minzoom,a=!1){return!!(this.minzoom&&r<(a?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&r>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(r,a){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),mr(r,((a,f)=>!(a===void 0||f==="layout"&&!Object.keys(a).length||f==="paint"&&!Object.keys(a).length)))}_validate(r,a,f,p,x={}){return(!x||x.validate!==!1)&&bo(this,r.call(oi,{key:a,layerType:this.type,objectKey:f,value:p,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof Pa&&Ka(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}let On;var xh={get paint(){return On=On||new Bn({"raster-opacity":new jt(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new jt(Me.paint_raster["raster-saturation"]),"raster-contrast":new jt(Me.paint_raster["raster-contrast"]),"raster-resampling":new jt(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new jt(Me.paint_raster["raster-fade-duration"])})}};class Is extends wn{constructor(r,a){super(r,xh,a)}}const xr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Lr{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gn(o,r=1){let a=0,f=0;return{members:o.map((p=>{const x=xr[p.type].BYTES_PER_ELEMENT,b=a=ro(a,Math.max(r,x)),E=p.components||1;return f=Math.max(f,x),a+=x*E,{name:p.name,type:p.type,components:E,offset:b}})),size:ro(a,Math.max(f,r)),alignment:r}}function ro(o,r){return Math.ceil(o/r)*r}class So extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const f=this.length;return this.resize(f+1),this.emplace(f,r,a)}emplace(r,a,f){const p=2*r;return this.int16[p+0]=a,this.int16[p+1]=f,r}}So.prototype.bytesPerElement=4,Lt("StructArrayLayout2i4",So);class ou extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.int16[x+0]=a,this.int16[x+1]=f,this.int16[x+2]=p,r}}ou.prototype.bytesPerElement=6,Lt("StructArrayLayout3i6",ou);class su extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p){const x=this.length;return this.resize(x+1),this.emplace(x,r,a,f,p)}emplace(r,a,f,p,x){const b=4*r;return this.int16[b+0]=a,this.int16[b+1]=f,this.int16[b+2]=p,this.int16[b+3]=x,r}}su.prototype.bytesPerElement=8,Lt("StructArrayLayout4i8",su);class zs extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,E){const C=6*r;return this.int16[C+0]=a,this.int16[C+1]=f,this.int16[C+2]=p,this.int16[C+3]=x,this.int16[C+4]=b,this.int16[C+5]=E,r}}zs.prototype.bytesPerElement=12,Lt("StructArrayLayout2i4i12",zs);class Fd extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,E){const C=4*r,k=8*r;return this.int16[C+0]=a,this.int16[C+1]=f,this.uint8[k+4]=p,this.uint8[k+5]=x,this.uint8[k+6]=b,this.uint8[k+7]=E,r}}Fd.prototype.bytesPerElement=8,Lt("StructArrayLayout2i4ub8",Fd);class ln extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const f=this.length;return this.resize(f+1),this.emplace(f,r,a)}emplace(r,a,f){const p=2*r;return this.float32[p+0]=a,this.float32[p+1]=f,r}}ln.prototype.bytesPerElement=8,Lt("StructArrayLayout2f8",ln);class To extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,E,C,k,N){const B=this.length;return this.resize(B+1),this.emplace(B,r,a,f,p,x,b,E,C,k,N)}emplace(r,a,f,p,x,b,E,C,k,N,B){const G=10*r;return this.uint16[G+0]=a,this.uint16[G+1]=f,this.uint16[G+2]=p,this.uint16[G+3]=x,this.uint16[G+4]=b,this.uint16[G+5]=E,this.uint16[G+6]=C,this.uint16[G+7]=k,this.uint16[G+8]=N,this.uint16[G+9]=B,r}}To.prototype.bytesPerElement=20,Lt("StructArrayLayout10ui20",To);class sc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,E,C){const k=this.length;return this.resize(k+1),this.emplace(k,r,a,f,p,x,b,E,C)}emplace(r,a,f,p,x,b,E,C,k){const N=8*r;return this.uint16[N+0]=a,this.uint16[N+1]=f,this.uint16[N+2]=p,this.uint16[N+3]=x,this.uint16[N+4]=b,this.uint16[N+5]=E,this.uint16[N+6]=C,this.uint16[N+7]=k,r}}sc.prototype.bytesPerElement=16,Lt("StructArrayLayout8ui16",sc);class lc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,E,C,k,N,B,G){const Z=this.length;return this.resize(Z+1),this.emplace(Z,r,a,f,p,x,b,E,C,k,N,B,G)}emplace(r,a,f,p,x,b,E,C,k,N,B,G,Z){const J=12*r;return this.int16[J+0]=a,this.int16[J+1]=f,this.int16[J+2]=p,this.int16[J+3]=x,this.uint16[J+4]=b,this.uint16[J+5]=E,this.uint16[J+6]=C,this.uint16[J+7]=k,this.int16[J+8]=N,this.int16[J+9]=B,this.int16[J+10]=G,this.int16[J+11]=Z,r}}lc.prototype.bytesPerElement=24,Lt("StructArrayLayout4i4ui4i24",lc);class bh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.float32[x+0]=a,this.float32[x+1]=f,this.float32[x+2]=p,r}}bh.prototype.bytesPerElement=12,Lt("StructArrayLayout3f12",bh);class wh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}wh.prototype.bytesPerElement=4,Lt("StructArrayLayout1ul4",wh);class Sh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,E,C,k){const N=this.length;return this.resize(N+1),this.emplace(N,r,a,f,p,x,b,E,C,k)}emplace(r,a,f,p,x,b,E,C,k,N){const B=10*r,G=5*r;return this.int16[B+0]=a,this.int16[B+1]=f,this.int16[B+2]=p,this.int16[B+3]=x,this.int16[B+4]=b,this.int16[B+5]=E,this.uint32[G+3]=C,this.uint16[B+8]=k,this.uint16[B+9]=N,r}}Sh.prototype.bytesPerElement=20,Lt("StructArrayLayout6i1ul2ui20",Sh);class yl extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,E){const C=6*r;return this.int16[C+0]=a,this.int16[C+1]=f,this.int16[C+2]=p,this.int16[C+3]=x,this.int16[C+4]=b,this.int16[C+5]=E,r}}yl.prototype.bytesPerElement=12,Lt("StructArrayLayout2i2i2i12",yl);class ks extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,a,f,p,x)}emplace(r,a,f,p,x,b){const E=4*r,C=8*r;return this.float32[E+0]=a,this.float32[E+1]=f,this.float32[E+2]=p,this.int16[C+6]=x,this.int16[C+7]=b,r}}ks.prototype.bytesPerElement=16,Lt("StructArrayLayout2f1f2i16",ks);class Si extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,E){const C=16*r,k=4*r,N=8*r;return this.uint8[C+0]=a,this.uint8[C+1]=f,this.float32[k+1]=p,this.float32[k+2]=x,this.int16[N+6]=b,this.int16[N+7]=E,r}}Si.prototype.bytesPerElement=16,Lt("StructArrayLayout2ub2f2i16",Si);class yn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.uint16[x+0]=a,this.uint16[x+1]=f,this.uint16[x+2]=p,r}}yn.prototype.bytesPerElement=6,Lt("StructArrayLayout3ui6",yn);class ss extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,E,C,k,N,B,G,Z,J,te,ie,ue){const ve=this.length;return this.resize(ve+1),this.emplace(ve,r,a,f,p,x,b,E,C,k,N,B,G,Z,J,te,ie,ue)}emplace(r,a,f,p,x,b,E,C,k,N,B,G,Z,J,te,ie,ue,ve){const se=24*r,de=12*r,Se=48*r;return this.int16[se+0]=a,this.int16[se+1]=f,this.uint16[se+2]=p,this.uint16[se+3]=x,this.uint32[de+2]=b,this.uint32[de+3]=E,this.uint32[de+4]=C,this.uint16[se+10]=k,this.uint16[se+11]=N,this.uint16[se+12]=B,this.float32[de+7]=G,this.float32[de+8]=Z,this.uint8[Se+36]=J,this.uint8[Se+37]=te,this.uint8[Se+38]=ie,this.uint32[de+10]=ue,this.int16[se+22]=ve,r}}ss.prototype.bytesPerElement=48,Lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ss);class lu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,E,C,k,N,B,G,Z,J,te,ie,ue,ve,se,de,Se,Ie,Ye,ct,ft,xt,Dt,Tt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,r,a,f,p,x,b,E,C,k,N,B,G,Z,J,te,ie,ue,ve,se,de,Se,Ie,Ye,ct,ft,xt,Dt,Tt)}emplace(r,a,f,p,x,b,E,C,k,N,B,G,Z,J,te,ie,ue,ve,se,de,Se,Ie,Ye,ct,ft,xt,Dt,Tt,dt){const it=32*r,Nt=16*r;return this.int16[it+0]=a,this.int16[it+1]=f,this.int16[it+2]=p,this.int16[it+3]=x,this.int16[it+4]=b,this.int16[it+5]=E,this.int16[it+6]=C,this.int16[it+7]=k,this.uint16[it+8]=N,this.uint16[it+9]=B,this.uint16[it+10]=G,this.uint16[it+11]=Z,this.uint16[it+12]=J,this.uint16[it+13]=te,this.uint16[it+14]=ie,this.uint16[it+15]=ue,this.uint16[it+16]=ve,this.uint16[it+17]=se,this.uint16[it+18]=de,this.uint16[it+19]=Se,this.uint16[it+20]=Ie,this.uint16[it+21]=Ye,this.uint16[it+22]=ct,this.uint32[Nt+12]=ft,this.float32[Nt+13]=xt,this.float32[Nt+14]=Dt,this.uint16[it+30]=Tt,this.uint16[it+31]=dt,r}}lu.prototype.bytesPerElement=64,Lt("StructArrayLayout8i15ui1ul2f2ui64",lu);class uu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}uu.prototype.bytesPerElement=4,Lt("StructArrayLayout1f4",uu);class uc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.uint16[6*r+0]=a,this.float32[x+1]=f,this.float32[x+2]=p,r}}uc.prototype.bytesPerElement=12,Lt("StructArrayLayout1ui2f12",uc);class Eo extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=4*r;return this.uint32[2*r+0]=a,this.uint16[x+2]=f,this.uint16[x+3]=p,r}}Eo.prototype.bytesPerElement=8,Lt("StructArrayLayout1ul2ui8",Eo);class w extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const f=this.length;return this.resize(f+1),this.emplace(f,r,a)}emplace(r,a,f){const p=2*r;return this.uint16[p+0]=a,this.uint16[p+1]=f,r}}w.prototype.bytesPerElement=4,Lt("StructArrayLayout2ui4",w);class n extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}n.prototype.bytesPerElement=2,Lt("StructArrayLayout1ui2",n);class u extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f,p){const x=this.length;return this.resize(x+1),this.emplace(x,r,a,f,p)}emplace(r,a,f,p,x){const b=4*r;return this.float32[b+0]=a,this.float32[b+1]=f,this.float32[b+2]=p,this.float32[b+3]=x,r}}u.prototype.bytesPerElement=16,Lt("StructArrayLayout4f16",u);class d extends Lr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}d.prototype.size=20;class y extends Sh{get(r){return new d(this,r)}}Lt("CollisionBoxArray",y);class T extends Lr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}T.prototype.size=48;class A extends ss{get(r){return new T(this,r)}}Lt("PlacedSymbolArray",A);class O extends Lr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}O.prototype.size=64;class R extends lu{get(r){return new O(this,r)}}Lt("SymbolInstanceArray",R);class U extends uu{getoffsetX(r){return this.float32[1*r+0]}}Lt("GlyphOffsetArray",U);class V extends ou{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}Lt("SymbolLineVertexArray",V);class X extends Lr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}X.prototype.size=12;class W extends uc{get(r){return new X(this,r)}}Lt("TextAnchorOffsetArray",W);class re extends Lr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}re.prototype.size=8;class oe extends Eo{get(r){return new re(this,r)}}Lt("FeatureIndexArray",oe);class fe extends So{}class me extends So{}class pe extends So{}class xe extends zs{}class Ae extends Fd{}class _e extends ln{}class Ee extends To{}class Oe extends sc{}class we extends lc{}class je extends bh{}class et extends wh{}class Xe extends yl{}class Ke extends Si{}class Qe extends yn{}class Ct extends w{}const Pt=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:yt}=Pt;class It{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,a,f,p){const x=this.segments[this.segments.length-1];return r>It.MAX_VERTEX_ARRAY_LENGTH&&ur(`Max vertices per segment is ${It.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${It.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+r>It.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==p?this.createNewSegment(a,f,p):x}createNewSegment(r,a,f){const p={vertexOffset:r.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(p.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(r,a,f){return this.prepareSegment(0,r,a,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,f,p){return new It([{vertexOffset:r,primitiveOffset:a,vertexLength:f,primitiveLength:p,vaos:{},sortKey:0}])}}function sr(o,r){return 256*(o=Yt(Math.floor(o),0,255))+Yt(Math.floor(r),0,255)}It.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lt("SegmentVector",It);const jr=gn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),rn=gn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Kr,un,$r,Sn={exports:{}},cn={exports:{}},hi={exports:{}},In=(function(){if($r)return Sn.exports;$r=1;var o=(Kr||(Kr=1,cn.exports=function(a,f){var p,x,b,E,C,k,N,B;for(x=a.length-(p=3&a.length),b=f,C=3432918353,k=461845907,B=0;B<x;)N=255&a.charCodeAt(B)|(255&a.charCodeAt(++B))<<8|(255&a.charCodeAt(++B))<<16|(255&a.charCodeAt(++B))<<24,++B,b=27492+(65535&(E=5*(65535&(b=(b^=N=(65535&(N=(N=(65535&N)*C+(((N>>>16)*C&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(N=0,p){case 3:N^=(255&a.charCodeAt(B+2))<<16;case 2:N^=(255&a.charCodeAt(B+1))<<8;case 1:b^=N=(65535&(N=(N=(65535&(N^=255&a.charCodeAt(B)))*C+(((N>>>16)*C&65535)<<16)&4294967295)<<15|N>>>17))*k+(((N>>>16)*k&65535)<<16)&4294967295}return b^=a.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),cn.exports),r=(un||(un=1,hi.exports=function(a,f){for(var p,x=a.length,b=f^x,E=0;x>=4;)p=1540483477*(65535&(p=255&a.charCodeAt(E)|(255&a.charCodeAt(++E))<<8|(255&a.charCodeAt(++E))<<16|(255&a.charCodeAt(++E))<<24))+((1540483477*(p>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),x-=4,++E;switch(x){case 3:b^=(255&a.charCodeAt(E+2))<<16;case 2:b^=(255&a.charCodeAt(E+1))<<8;case 1:b=1540483477*(65535&(b^=255&a.charCodeAt(E)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),hi.exports);return Sn.exports=o,Sn.exports.murmur3=o,Sn.exports.murmur2=r,Sn.exports})(),zn=P(In);class fi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,f,p){this.ids.push(ls(r)),this.positions.push(a,f,p)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=ls(r);let f=0,p=this.ids.length-1;for(;f<p;){const b=f+p>>1;this.ids[b]>=a?p=b:f=b+1}const x=[];for(;this.ids[f]===a;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(r,a){const f=new Float64Array(r.ids),p=new Uint32Array(r.positions);return us(f,p,0,f.length-1),a&&a.push(f.buffer,p.buffer),{ids:f,positions:p}}static deserialize(r){const a=new fi;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function ls(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:zn(String(o))}function us(o,r,a,f){for(;a<f;){const p=o[a+f>>1];let x=a-1,b=f+1;for(;;){do x++;while(o[x]<p);do b--;while(o[b]>p);if(x>=b)break;Ao(o,x,b),Ao(r,3*x,3*b),Ao(r,3*x+1,3*b+1),Ao(r,3*x+2,3*b+2)}b-a<f-b?(us(o,r,a,b),a=b+1):(us(o,r,b+1,f),f=b)}}function Ao(o,r,a){const f=o[r];o[r]=o[a],o[a]=f}Lt("FeaturePositionMap",fi);class ea{constructor(r,a){this.gl=r.gl,this.location=a}}class cu extends ea{constructor(r,a){super(r,a),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class cc extends ea{constructor(r,a){super(r,a),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Mo extends ea{constructor(r,a){super(r,a),this.current=gr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const ta=new Float32Array(16);function Da(o){return[sr(255*o.r,255*o.g),sr(255*o.b,255*o.a)]}class no{constructor(r,a,f){this.value=r,this.uniformNames=a.map((p=>`u_${p}`)),this.type=f}setUniform(r,a,f){r.set(f.constantOr(this.value))}getBinding(r,a,f){return this.type==="color"?new Mo(r,a):new cu(r,a)}}class io{constructor(r,a){this.uniformNames=a.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=r.tlbr}setConstantDashPositions(r,a){this.dashTo=[0,r.y,r.height,r.width],this.dashFrom=[0,a.y,a.height,a.width]}setUniform(r,a,f,p){let x=null;p==="u_pattern_to"?x=this.patternTo:p==="u_pattern_from"?x=this.patternFrom:p==="u_dasharray_to"?x=this.dashTo:p==="u_dasharray_from"?x=this.dashFrom:p==="u_pixel_ratio_to"?x=this.pixelRatioTo:p==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&r.set(x)}getBinding(r,a,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new cc(r,a):new cu(r,a)}}class Vr{constructor(r,a,f,p){this.expression=r,this.type=f,this.maxValue=0,this.paintVertexAttributes=a.map((x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new p}populatePaintArray(r,a,f){const p=this.paintVertexArray.length,x=this.expression.evaluate(new Ur(0,f),a,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(r),this._setPaintValue(p,r,x)}updatePaintArray(r,a,f,p,x){const b=this.expression.evaluate(new Ur(0,x),f,p);this._setPaintValue(r,a,b)}_setPaintValue(r,a,f){if(this.type==="color"){const p=Da(f);for(let x=r;x<a;x++)this.paintVertexArray.emplace(x,p[0],p[1])}else{for(let p=r;p<a;p++)this.paintVertexArray.emplace(p,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qr{constructor(r,a,f,p,x,b){this.expression=r,this.uniformNames=a.map((E=>`u_${E}_t`)),this.type=f,this.useIntegerZoom=p,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=a.map((E=>({name:`a_${E}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new b}populatePaintArray(r,a,f){const p=this.expression.evaluate(new Ur(this.zoom,f),a,{},f.canonical,[],f.formattedSection),x=this.expression.evaluate(new Ur(this.zoom+1,f),a,{},f.canonical,[],f.formattedSection),b=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(b,r,p,x)}updatePaintArray(r,a,f,p,x){const b=this.expression.evaluate(new Ur(this.zoom,x),f,p),E=this.expression.evaluate(new Ur(this.zoom+1,x),f,p);this._setPaintValue(r,a,b,E)}_setPaintValue(r,a,f,p){if(this.type==="color"){const x=Da(f),b=Da(p);for(let E=r;E<a;E++)this.paintVertexArray.emplace(E,x[0],x[1],b[0],b[1])}else{for(let x=r;x<a;x++)this.paintVertexArray.emplace(x,f,p);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a){const f=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=Yt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);r.set(p)}getBinding(r,a,f){return new cu(r,a)}}class Gn{constructor(r,a,f,p,x,b){this.expression=r,this.type=a,this.useIntegerZoom=f,this.zoom=p,this.layerId=b,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(r,a,f){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,this.getPositionIds(a),f)}updatePaintArray(r,a,f,p,x){this._setPaintValues(r,a,this.getPositionIds(f),x)}_setPaintValues(r,a,f,p){const x=this.getPositions(p);if(!x||!f)return;const b=x[f.min],E=x[f.mid],C=x[f.max];if(b&&E&&C)for(let k=r;k<a;k++)this.emplace(this.zoomInPaintVertexArray,k,E,b),this.emplace(this.zoomOutPaintVertexArray,k,E,C)}upload(r){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const a=this.getVertexAttributes();this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,a,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,a,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Kn extends Gn{getPositions(r){return r.imagePositions}getPositionIds(r){return r.patterns&&r.patterns[this.layerId]}getVertexAttributes(){return jr.members}emplace(r,a,f,p){r.emplace(a,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],f.pixelRatio,p.pixelRatio)}}class Bf extends Gn{getPositions(r){return r.dashPositions}getPositionIds(r){return r.dashes&&r.dashes[this.layerId]}getVertexAttributes(){return rn.members}emplace(r,a,f,p){r.emplace(a,0,f.y,f.height,f.width,0,p.y,p.height,p.width)}}class Ff{constructor(r,a,f){this.binders={},this._buffers=[];const p=[];for(const x in r.paint._values){if(!f(x))continue;const b=r.paint.get(x);if(!(b instanceof Pa&&Ka(b.property.specification)))continue;const E=mm(x,r.type),C=b.value,k=b.property.specification.type,N=b.property.useIntegerZoom,B=b.property.specification["property-type"],G=B==="cross-faded"||B==="cross-faded-data-driven";if(C.kind==="constant")this.binders[x]=G?new io(C.value,E):new no(C.value,E,k),p.push(`/u_${x}`);else if(C.kind==="source"||G){const Z=_l(x,k,"source");this.binders[x]=G?x==="line-dasharray"?new Bf(C,k,N,a,Z,r.id):new Kn(C,k,N,a,Z,r.id):new Vr(C,E,k,Z),p.push(`/a_${x}`)}else{const Z=_l(x,k,"composite");this.binders[x]=new Qr(C,E,k,N,a,Z),p.push(`/z_${x}`)}}this.cacheKey=p.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof Vr||a instanceof Qr?a.maxValue:0}populatePaintArrays(r,a,f){for(const p in this.binders){const x=this.binders[p];(x instanceof Vr||x instanceof Qr||x instanceof Gn)&&x.populatePaintArray(r,a,f)}}setConstantPatternPositions(r,a){for(const f in this.binders){const p=this.binders[f];p instanceof io&&p.setConstantPatternPositions(r,a)}}setConstantDashPositions(r,a){for(const f in this.binders){const p=this.binders[f];p instanceof io&&p.setConstantDashPositions(r,a)}}updatePaintArrays(r,a,f,p,x){let b=!1;for(const E in r){const C=a.getPositions(E);for(const k of C){const N=f.feature(k.index);for(const B in this.binders){const G=this.binders[B];if((G instanceof Vr||G instanceof Qr||G instanceof Gn)&&G.expression.isStateDependent===!0){const Z=p.paint.get(B);G.expression=Z.value,G.updatePaintArray(k.start,k.end,N,r[E],x),b=!0}}}}return b}defines(){const r=[];for(const a in this.binders){const f=this.binders[a];(f instanceof no||f instanceof io)&&r.push(...f.uniformNames.map((p=>`#define HAS_UNIFORM_${p}`)))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof Vr||f instanceof Qr)for(let p=0;p<f.paintVertexAttributes.length;p++)r.push(f.paintVertexAttributes[p].name);else if(f instanceof Gn){const p=f.getVertexAttributes();for(const x of p)r.push(x.name)}}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof no||f instanceof io||f instanceof Qr)for(const p of f.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,a){const f=[];for(const p in this.binders){const x=this.binders[p];if(x instanceof no||x instanceof io||x instanceof Qr){for(const b of x.uniformNames)if(a[b]){const E=x.getBinding(r,a[b],b);f.push({name:b,property:p,binding:E})}}}return f}setUniforms(r,a,f,p){for(const{name:x,property:b,binding:E}of a)this.binders[b].setUniform(E,p,f.get(b),x)}updatePaintBuffers(r){this._buffers=[];for(const a in this.binders){const f=this.binders[a];if(r&&f instanceof Gn){const p=r.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(f instanceof Vr||f instanceof Qr)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(r){for(const a in this.binders){const f=this.binders[a];(f instanceof Vr||f instanceof Qr||f instanceof Gn)&&f.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof Vr||a instanceof Qr||a instanceof Gn)&&a.destroy()}}}class vl{constructor(r,a,f=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new Ff(p,a,f);this.needsUpload=!1,this._featureMap=new fi,this._bufferOffset=0}populatePaintArrays(r,a,f,p){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(r,a,p);a.id!==void 0&&this._featureMap.add(a.id,f,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,f,p){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(r,this._featureMap,a,x,p)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function mm(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function _l(o,r,a){const f={color:{source:ln,composite:u},number:{source:uu,composite:ln}},p=(function(x){return{"line-pattern":{source:Ee,composite:Ee},"fill-pattern":{source:Ee,composite:Ee},"fill-extrusion-pattern":{source:Ee,composite:Ee},"line-dasharray":{source:Oe,composite:Oe}}[x]})(o);return p&&p[a]||f[r][a]}Lt("ConstantBinder",no),Lt("CrossFadedConstantBinder",io),Lt("SourceExpressionBinder",Vr),Lt("CrossFadedPatternBinder",Kn),Lt("CrossFadedDasharrayBinder",Bf),Lt("CompositeExpressionBinder",Qr),Lt("ProgramConfiguration",Ff,{omit:["_buffers"]}),Lt("ProgramConfigurationSet",vl);const Uf=Math.pow(2,14)-1,Rs=-Uf-1;function Ls(o){const r=pt/o.extent,a=o.loadGeometry();for(let f=0;f<a.length;f++){const p=a[f];for(let x=0;x<p.length;x++){const b=p[x],E=Math.round(b.x*r),C=Math.round(b.y*r);b.x=Yt(E,Rs,Uf),b.y=Yt(C,Rs,Uf),(E<b.x||E>b.x+1||C<b.y||C>b.y+1)&&ur("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Co(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Ls(o):[]}}const Vf=-32768;function Th(o,r,a,f,p){o.emplaceBack(Vf+8*r+f,Vf+8*a+p)}class Eh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new me,this.indexArray=new Qe,this.segments=new It,this.programConfigurations=new vl(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){const p=this.layers[0],x=[];let b=null,E=!1,C=p.type==="heatmap";if(p.type==="circle"){const N=p;b=N.layout.get("circle-sort-key"),E=!b.isConstant(),C=C||N.paint.get("circle-pitch-alignment")==="map"}const k=C?a.subdivisionGranularity.circle:1;for(const{feature:N,id:B,index:G,sourceLayerIndex:Z}of r){const J=this.layers[0]._featureFilter.needGeometry,te=Co(N,J);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),te,f))continue;const ie=E?b.evaluate(te,{},f):void 0,ue={id:B,properties:N.properties,type:N.type,sourceLayerIndex:Z,index:G,geometry:J?te.geometry:Ls(N),patterns:{},sortKey:ie};x.push(ue)}E&&x.sort(((N,B)=>N.sortKey-B.sortKey));for(const N of x){const{geometry:B,index:G,sourceLayerIndex:Z}=N,J=r[G].feature;this.addFeature(N,B,G,f,k),a.featureIndex.insert(J,B,G,Z,this.index)}}update(r,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,yt),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,f,p,x=1){let b;switch(x){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const E=b.length;for(const C of a)for(const k of C){const N=k.x,B=k.y;if(N<0||N>=pt||B<0||B>=pt)continue;const G=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,r.sortKey),Z=G.vertexLength;for(let J=0;J<E;J++)for(let te=0;te<E;te++)Th(this.layoutVertexArray,N,B,b[te],b[J]);for(let J=0;J<E-1;J++)for(let te=0;te<E-1;te++){const ie=Z+J*E+te,ue=Z+(J+1)*E+te;this.indexArray.emplaceBack(ie,ue+1,ie+1),this.indexArray.emplaceBack(ie,ue,ue+1)}G.vertexLength+=E*E,G.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:{},canonical:p})}}function Ah(o,r){for(let a=0;a<o.length;a++)if(xl(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(xl(o,r[a]))return!0;return!!Ti(o,r)}function gm(o,r,a){return!!xl(o,r)||!!vm(r,o,a)}function ym(o,r){if(o.length===1)return ay(r,o[0]);for(let a=0;a<r.length;a++){const f=r[a];for(let p=0;p<f.length;p++)if(xl(o,f[p]))return!0}for(let a=0;a<o.length;a++)if(ay(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(Ti(o,r[a]))return!0;return!1}function di(o,r,a){if(o.length>1){if(Ti(o,r))return!0;for(let f=0;f<r.length;f++)if(vm(r[f],o,a))return!0}for(let f=0;f<o.length;f++)if(vm(o[f],r,a))return!0;return!1}function Ti(o,r){if(o.length===0||r.length===0)return!1;for(let a=0;a<o.length-1;a++){const f=o[a],p=o[a+1];for(let x=0;x<r.length-1;x++)if(t_(f,p,r[x],r[x+1]))return!0}return!1}function t_(o,r,a,f){return Wr(o,a,f)!==Wr(r,a,f)&&Wr(o,r,a)!==Wr(o,r,f)}function vm(o,r,a){const f=a*a;if(r.length===1)return o.distSqr(r[0])<f;for(let p=1;p<r.length;p++)if(iy(o,r[p-1],r[p])<f)return!0;return!1}function iy(o,r,a){const f=r.distSqr(a);if(f===0)return o.distSqr(r);const p=((o.x-r.x)*(a.x-r.x)+(o.y-r.y)*(a.y-r.y))/f;return o.distSqr(p<0?r:p>1?a:a.sub(r)._mult(p)._add(r))}function ay(o,r){let a,f,p,x=!1;for(let b=0;b<o.length;b++){a=o[b];for(let E=0,C=a.length-1;E<a.length;C=E++)f=a[E],p=a[C],f.y>r.y!=p.y>r.y&&r.x<(p.x-f.x)*(r.y-f.y)/(p.y-f.y)+f.x&&(x=!x)}return x}function xl(o,r){let a=!1;for(let f=0,p=o.length-1;f<o.length;p=f++){const x=o[f],b=o[p];x.y>r.y!=b.y>r.y&&r.x<(b.x-x.x)*(r.y-x.y)/(b.y-x.y)+x.x&&(a=!a)}return a}function r_(o,r,a){const f=a[0],p=a[2];if(o.x<f.x&&r.x<f.x||o.x>p.x&&r.x>p.x||o.y<f.y&&r.y<f.y||o.y>p.y&&r.y>p.y)return!1;const x=Wr(o,r,a[0]);return x!==Wr(o,r,a[1])||x!==Wr(o,r,a[2])||x!==Wr(o,r,a[3])}function hu(o,r,a){const f=r.paint.get(o).value;return f.kind==="constant"?f.value:a.programConfigurations.get(r.id).getMaxValue(o)}function Ud(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function _m(o,r,a,f,p){if(!r[0]&&!r[1])return o;const x=M.convert(r)._mult(p);a==="viewport"&&x._rotate(-f);const b=[];for(let E=0;E<o.length;E++)b.push(o[E].sub(x));return b}function xm(o){const r=[];for(let a=0;a<o.length;a++){const f=o[a],p=r.at(-1);(a===0||p&&!f.equals(p))&&r.push(f)}return r}function oy({queryGeometry:o,size:r},a){return gm(o,a,r)}function n_({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p},x){return gm(o,x,r*(a.projectTileCoordinates(x.x,x.y,f,p).signedDistanceFromCamera/a.cameraToCenterDistance))}function i_({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p},x){const b=a.projectTileCoordinates(x.x,x.y,f,p).signedDistanceFromCamera,E=r*(a.cameraToCenterDistance/b);return gm(o,Vd(x,a,f,p),E)}function a_({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p},x){return gm(o,Vd(x,a,f,p),r)}function bm({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p,pitchAlignment:x="map",pitchScale:b="map"},E){const C=x==="map"?b==="map"?oy:n_:b==="map"?i_:a_,k={queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p};for(const N of E)for(const B of N)if(C(k,B))return!0;return!1}function Vd(o,r,a,f){const p=r.projectTileCoordinates(o.x,o.y,a,f).point;return new M((.5*p.x+.5)*r.width,(.5*-p.y+.5)*r.height)}let wm,sy;Lt("CircleBucket",Eh,{omit:["layers"]});var ly={get paint(){return sy=sy||new Bn({"circle-radius":new Ut(Me.paint_circle["circle-radius"]),"circle-color":new Ut(Me.paint_circle["circle-color"]),"circle-blur":new Ut(Me.paint_circle["circle-blur"]),"circle-opacity":new Ut(Me.paint_circle["circle-opacity"]),"circle-translate":new jt(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new jt(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ut(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ut(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ut(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return wm=wm||new Bn({"circle-sort-key":new Ut(Me.layout_circle["circle-sort-key"])})}};class Sm extends wn{constructor(r,a){super(r,ly,a)}createBucket(r){return new Eh(r)}queryRadius(r){const a=r;return hu("circle-radius",this,a)+hu("circle-stroke-width",this,a)+Ud(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b,unwrappedTileID:E,getElevation:C}){const k=_m(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,b),N=this.paint.get("circle-radius").evaluate(a,f)+this.paint.get("circle-stroke-width").evaluate(a,f),B=this.paint.get("circle-pitch-scale"),G=this.paint.get("circle-pitch-alignment");let Z,J;return G==="map"?(Z=k,J=N*b):(Z=(function(te,ie,ue,ve){return te.map((se=>Vd(se,ie,ue,ve)))})(k,x,E,C),J=N),bm({queryGeometry:Z,size:J,transform:x,unwrappedTileID:E,getElevation:C,pitchAlignment:G,pitchScale:B},p)}}class Tm extends Eh{}let uy;Lt("HeatmapBucket",Tm,{omit:["layers"]});var cy={get paint(){return uy=uy||new Bn({"heatmap-radius":new Ut(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ut(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _h(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt(Me.paint_heatmap["heatmap-opacity"])})}};function Em(o,{width:r,height:a},f,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*a*f)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${r*a*f}`)}else p=new Uint8Array(r*a*f);return o.width=r,o.height=a,o.data=p,o}function bl(o,{width:r,height:a},f){if(r===o.width&&a===o.height)return;const p=Em({},{width:r,height:a},f);qd(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,a)},f),o.width=r,o.height=a,o.data=p.data}function qd(o,r,a,f,p,x){if(p.width===0||p.height===0)return r;if(p.width>o.width||p.height>o.height||a.x>o.width-p.width||a.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||f.x>r.width-p.width||f.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const b=o.data,E=r.data;if(b===E)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<p.height;C++){const k=((a.y+C)*o.width+a.x)*x,N=((f.y+C)*r.width+f.x)*x;for(let B=0;B<p.width*x;B++)E[N+B]=b[k+B]}return r}class Gd{constructor(r,a){Em(this,r,1,a)}resize(r){bl(this,r,1)}clone(){return new Gd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,f,p,x){qd(r,a,f,p,x,1)}}class ra{constructor(r,a){Em(this,r,4,a)}resize(r){bl(this,r,4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ra({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,f,p,x){qd(r,a,f,p,x,4)}setPixel(r,a,f){const p=4*(r*this.width+a);this.data[p+0]=Math.round(255*f.r/f.a),this.data[p+1]=Math.round(255*f.g/f.a),this.data[p+2]=Math.round(255*f.b/f.a),this.data[p+3]=Math.round(255*f.a)}}function wl(o){const r={},a=o.resolution||256,f=o.clips?o.clips.length:1,p=o.image||new ra({width:a,height:f});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const x=(b,E,C)=>{r[o.evaluationKey]=C;const k=o.expression.evaluate(r);p.setPixel(b/4/a,E/4,k)};if(o.clips)for(let b=0,E=0;b<f;++b,E+=4*a)for(let C=0,k=0;C<a;C++,k+=4){const N=C/(a-1),{start:B,end:G}=o.clips[b];x(E,k,B*(1-N)+G*N)}else for(let b=0,E=0;b<a;b++,E+=4)x(0,E,b/(a-1));return p}Lt("AlphaImage",Gd),Lt("RGBAImage",ra);const $d="big-fb";class o_ extends wn{createBucket(r){return new Tm(r)}constructor(r,a){super(r,cy,a),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=wl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has($d)&&this.heatmapFbos.delete($d)}queryRadius(r){return hu("heatmap-radius",this,r)}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b,unwrappedTileID:E,getElevation:C}){return bm({queryGeometry:r,size:this.paint.get("heatmap-radius").evaluate(a,f)*b,transform:x,unwrappedTileID:E,getElevation:C},p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Zd;var Hd={get paint(){return Zd=Zd||new Bn({"hillshade-illumination-direction":new jt(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new jt(Me.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new jt(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt(Me.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new jt(Me.paint_hillshade["hillshade-method"])})}};class kn extends wn{constructor(r,a){super(r,Hd,a),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,a=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values;const x=Math.max(r.length,a.length,f.length,p.length);r=r.concat(Array(x-r.length).fill(r.at(-1))),a=a.concat(Array(x-a.length).fill(a.at(-1))),f=f.concat(Array(x-f.length).fill(f.at(-1))),p=p.concat(Array(x-p.length).fill(p.at(-1)));const b=a.map(ri);return{directionRadians:r.map(ri),altitudeRadians:b,shadowColor:p,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let s_;var db={get paint(){return s_=s_||new Bn({"color-relief-opacity":new jt(Me["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new _h(Me["paint_color-relief"]["color-relief-color"])})}};class Am{constructor(r,a,f,p){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(a,p)}update(r,a,f){const{width:p,height:x}=r,b=!(this.size&&this.size[0]===p&&this.size[1]===x||f),{context:E}=this,{gl:C}=E;if(this.useMipmap=!!(a&&a.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!a||a.premultiply!==!1)),b)this.size=[p,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ya(r)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,r):C.texImage2D(C.TEXTURE_2D,0,this.format,p,x,0,this.format,C.UNSIGNED_BYTE,r.data);else{const{x:k,y:N}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||ya(r)?C.texSubImage2D(C.TEXTURE_2D,0,k,N,C.RGBA,C.UNSIGNED_BYTE,r):C.texSubImage2D(C.TEXTURE_2D,0,k,N,p,x,C.RGBA,C.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,a,f){const{context:p}=this,{gl:x}=p;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||r),this.filter=r),a!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class qf{constructor(r,a,f,p=1,x=1,b=1,E=0){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void ur(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const C=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=x,this.blueFactor=b,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<C;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(C,k)]=this.data[this._idx(C-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,C)]=this.data[this._idx(k,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<C;k++)for(let N=0;N<C;N++){const B=this.get(k,N);B>this.max&&(this.max=B),B<this.min&&(this.min=B)}}get(r,a){const f=new Uint8Array(this.data.buffer),p=4*this._idx(r,a);return this.unpack(f[p],f[p+1],f[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${r}, y: ${a}, dim: ${this.dim}`);return(a+1)*this.stride+(r+1)}unpack(r,a,f){return r*this.redFactor+a*this.greenFactor+f*this.blueFactor-this.baseShift}pack(r){return fu(r,this.getUnpackVector())}getPixels(){return new ra({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,a,f){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,x=a*this.dim+this.dim,b=f*this.dim,E=f*this.dim+this.dim;switch(a){case-1:p=x-1;break;case 1:x=p+1}switch(f){case-1:b=E-1;break;case 1:E=b+1}const C=-a*this.dim,k=-f*this.dim;for(let N=b;N<E;N++)for(let B=p;B<x;B++)this.data[this._idx(B,N)]=r.data[this._idx(B+C,N+k)]}}function fu(o,r){const a=r[0],f=r[1],p=r[2],x=r[3],b=Math.min(a,f,p),E=Math.round((o+x)/b);return{r:Math.floor(E*b/a)%256,g:Math.floor(E*b/f)%256,b:Math.floor(E*b/p)%256}}Lt("DEMData",qf);class l_ extends wn{constructor(r,a){super(r,db,a)}_createColorRamp(r){const a={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Ui&&f._styleExpression.expression instanceof Bi){this.colorRampExpression=f;const b=f._styleExpression.expression;a.elevationStops=b.labels,a.colorStops=[];for(const E of a.elevationStops)a.colorStops.push(b.evaluate({globals:{elevation:E}}))}if(a.elevationStops.length<1&&(a.elevationStops=[0],a.colorStops=[gr.transparent]),a.elevationStops.length<2&&(a.elevationStops.push(a.elevationStops[0]+1),a.colorStops.push(a.colorStops[0])),a.elevationStops.length<=r)return a;const p={elevationStops:[],colorStops:[]},x=(a.elevationStops.length-1)/(r-1);for(let b=0;b<a.elevationStops.length-.5;b+=x)p.elevationStops.push(a.elevationStops[Math.round(b)]),p.colorStops.push(a.colorStops[Math.round(b)]);return ur(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${r}, provided: ${a.elevationStops.length}`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(r,a,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const p=this._createColorRamp(a),x=new ra({width:p.colorStops.length,height:1}),b=new ra({width:p.colorStops.length,height:1});for(let E=0;E<p.elevationStops.length;E++){const C=fu(p.elevationStops[E],f);b.setPixel(0,E,new gr(C.r/255,C.g/255,C.b/255,1)),x.setPixel(0,E,p.colorStops[E])}return this.colorRampTextures={elevationTexture:new Am(r,b,r.gl.RGBA),colorTexture:new Am(r,x,r.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const u_=gn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Wd}=u_;function Po(o,r,a){const f=a.patternDependencies;let p=!1;for(const x of r){const b=x.paint.get(`${o}-pattern`);b.isConstant()||(p=!0);const E=b.constantOr(null);E&&(p=!0,f[E.to]=!0,f[E.from]=!0)}return p}function Mm(o,r,a,f,p){const{zoom:x}=f,b=p.patternDependencies;for(const E of r){const C=E.paint.get(`${o}-pattern`).value;if(C.kind!=="constant"){let k=C.evaluate({zoom:x-1},a,{},p.availableImages),N=C.evaluate({zoom:x},a,{},p.availableImages),B=C.evaluate({zoom:x+1},a,{},p.availableImages);k=k&&k.name?k.name:k,N=N&&N.name?N.name:N,B=B&&B.name?B.name:B,b[k]=!0,b[N]=!0,b[B]=!0,a.patterns[E.id]={min:k,mid:N,max:B}}}return a}function Cm(o,r,a,f,p){let x;if(p===(function(b,E,C,k){let N=0;for(let B=E,G=C-k;B<C;B+=k)N+=(b[G]-b[B])*(b[B+1]+b[G+1]),G=B;return N})(o,r,a,f)>0)for(let b=r;b<a;b+=f)x=Oa(b/f|0,o[b],o[b+1],x);else for(let b=a-f;b>=r;b-=f)x=Oa(b/f|0,o[b],o[b+1],x);return x&&ao(x,x.next)&&(Ia(x),x=x.next),x}function hc(o,r){if(!o)return o;r||(r=o);let a,f=o;do if(a=!1,f.steiner||!ao(f,f.next)&&zr(f.prev,f,f.next)!==0)f=f.next;else{if(Ia(f),f=r=f.prev,f===f.next)break;a=!0}while(a||f!==r);return r}function Mh(o,r,a,f,p,x,b){if(!o)return;!b&&x&&(function(C,k,N,B){let G=C;do G.z===0&&(G.z=mi(G.x,G.y,k,N,B)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==C);G.prevZ.nextZ=null,G.prevZ=null,(function(Z){let J,te=1;do{let ie,ue=Z;Z=null;let ve=null;for(J=0;ue;){J++;let se=ue,de=0;for(let Ie=0;Ie<te&&(de++,se=se.nextZ,se);Ie++);let Se=te;for(;de>0||Se>0&&se;)de!==0&&(Se===0||!se||ue.z<=se.z)?(ie=ue,ue=ue.nextZ,de--):(ie=se,se=se.nextZ,Se--),ve?ve.nextZ=ie:Z=ie,ie.prevZ=ve,ve=ie;ue=se}ve.nextZ=null,te*=2}while(J>1)})(G)})(o,f,p,x);let E=o;for(;o.prev!==o.next;){const C=o.prev,k=o.next;if(x?Pm(o,f,p,x):hy(o))r.push(C.i,o.i,k.i),Ia(o),o=k.next,E=k.next;else if((o=k)===E){b?b===1?Mh(o=c_(hc(o),r),r,a,f,p,x,2):b===2&&du(o,r,a,f,p,x):Mh(hc(o),r,a,f,p,x,1);break}}}function hy(o){const r=o.prev,a=o,f=o.next;if(zr(r,a,f)>=0)return!1;const p=r.x,x=a.x,b=f.x,E=r.y,C=a.y,k=f.y,N=Math.min(p,x,b),B=Math.min(E,C,k),G=Math.max(p,x,b),Z=Math.max(E,C,k);let J=f.next;for(;J!==r;){if(J.x>=N&&J.x<=G&&J.y>=B&&J.y<=Z&&Gf(p,E,x,C,b,k,J.x,J.y)&&zr(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function Pm(o,r,a,f){const p=o.prev,x=o,b=o.next;if(zr(p,x,b)>=0)return!1;const E=p.x,C=x.x,k=b.x,N=p.y,B=x.y,G=b.y,Z=Math.min(E,C,k),J=Math.min(N,B,G),te=Math.max(E,C,k),ie=Math.max(N,B,G),ue=mi(Z,J,r,a,f),ve=mi(te,ie,r,a,f);let se=o.prevZ,de=o.nextZ;for(;se&&se.z>=ue&&de&&de.z<=ve;){if(se.x>=Z&&se.x<=te&&se.y>=J&&se.y<=ie&&se!==p&&se!==b&&Gf(E,N,C,B,k,G,se.x,se.y)&&zr(se.prev,se,se.next)>=0||(se=se.prevZ,de.x>=Z&&de.x<=te&&de.y>=J&&de.y<=ie&&de!==p&&de!==b&&Gf(E,N,C,B,k,G,de.x,de.y)&&zr(de.prev,de,de.next)>=0))return!1;de=de.nextZ}for(;se&&se.z>=ue;){if(se.x>=Z&&se.x<=te&&se.y>=J&&se.y<=ie&&se!==p&&se!==b&&Gf(E,N,C,B,k,G,se.x,se.y)&&zr(se.prev,se,se.next)>=0)return!1;se=se.prevZ}for(;de&&de.z<=ve;){if(de.x>=Z&&de.x<=te&&de.y>=J&&de.y<=ie&&de!==p&&de!==b&&Gf(E,N,C,B,k,G,de.x,de.y)&&zr(de.prev,de,de.next)>=0)return!1;de=de.nextZ}return!0}function c_(o,r){let a=o;do{const f=a.prev,p=a.next.next;!ao(f,p)&&py(f,a,a.next,p)&&Kd(f,p)&&Kd(p,f)&&(r.push(f.i,a.i,p.i),Ia(a),Ia(a.next),a=o=p),a=a.next}while(a!==o);return hc(a)}function du(o,r,a,f,p,x){let b=o;do{let E=b.next.next;for(;E!==b.prev;){if(b.i!==E.i&&Fn(b,E)){let C=Qd(b,E);return b=hc(b,b.next),C=hc(C,C.next),Mh(b,r,a,f,p,x,0),void Mh(C,r,a,f,p,x,0)}E=E.next}b=b.next}while(b!==o)}function pi(o,r){let a=o.x-r.x;return a===0&&(a=o.y-r.y,a===0)&&(a=(o.next.y-o.y)/(o.next.x-o.x)-(r.next.y-r.y)/(r.next.x-r.x)),a}function fy(o,r){const a=(function(p,x){let b=x;const E=p.x,C=p.y;let k,N=-1/0;if(ao(p,b))return b;do{if(ao(p,b.next))return b.next;if(C<=b.y&&C>=b.next.y&&b.next.y!==b.y){const te=b.x+(C-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(te<=E&&te>N&&(N=te,k=b.x<b.next.x?b:b.next,te===E))return k}b=b.next}while(b!==x);if(!k)return null;const B=k,G=k.x,Z=k.y;let J=1/0;b=k;do{if(E>=b.x&&b.x>=G&&E!==b.x&&dy(C<Z?E:N,C,G,Z,C<Z?N:E,C,b.x,b.y)){const te=Math.abs(C-b.y)/(E-b.x);Kd(b,p)&&(te<J||te===J&&(b.x>k.x||b.x===k.x&&h_(k,b)))&&(k=b,J=te)}b=b.next}while(b!==B);return k})(o,r);if(!a)return r;const f=Qd(a,o);return hc(f,f.next),hc(a,a.next)}function h_(o,r){return zr(o.prev,o,r.prev)<0&&zr(r.next,o,o.next)<0}function mi(o,r,a,f,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-f)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function pb(o){let r=o,a=o;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==o);return a}function dy(o,r,a,f,p,x,b,E){return(p-b)*(r-E)>=(o-b)*(x-E)&&(o-b)*(f-E)>=(a-b)*(r-E)&&(a-b)*(x-E)>=(p-b)*(f-E)}function Gf(o,r,a,f,p,x,b,E){return!(o===b&&r===E)&&dy(o,r,a,f,p,x,b,E)}function Fn(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!(function(a,f){let p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==f.i&&p.next.i!==f.i&&py(p,p.next,a,f))return!0;p=p.next}while(p!==a);return!1})(o,r)&&(Kd(o,r)&&Kd(r,o)&&(function(a,f){let p=a,x=!1;const b=(a.x+f.x)/2,E=(a.y+f.y)/2;do p.y>E!=p.next.y>E&&p.next.y!==p.y&&b<(p.next.x-p.x)*(E-p.y)/(p.next.y-p.y)+p.x&&(x=!x),p=p.next;while(p!==a);return x})(o,r)&&(zr(o.prev,o,r.prev)||zr(o,r.prev,r))||ao(o,r)&&zr(o.prev,o,o.next)>0&&zr(r.prev,r,r.next)>0)}function zr(o,r,a){return(r.y-o.y)*(a.x-r.x)-(r.x-o.x)*(a.y-r.y)}function ao(o,r){return o.x===r.x&&o.y===r.y}function py(o,r,a,f){const p=Yd(zr(o,r,a)),x=Yd(zr(o,r,f)),b=Yd(zr(a,f,o)),E=Yd(zr(a,f,r));return p!==x&&b!==E||!(p!==0||!Xd(o,a,r))||!(x!==0||!Xd(o,f,r))||!(b!==0||!Xd(a,o,f))||!(E!==0||!Xd(a,r,f))}function Xd(o,r,a){return r.x<=Math.max(o.x,a.x)&&r.x>=Math.min(o.x,a.x)&&r.y<=Math.max(o.y,a.y)&&r.y>=Math.min(o.y,a.y)}function Yd(o){return o>0?1:o<0?-1:0}function Kd(o,r){return zr(o.prev,o,o.next)<0?zr(o,r,o.next)>=0&&zr(o,o.prev,r)>=0:zr(o,r,o.prev)<0||zr(o,o.next,r)<0}function Qd(o,r){const a=Dm(o.i,o.x,o.y),f=Dm(r.i,r.x,r.y),p=o.next,x=r.prev;return o.next=r,r.prev=o,a.next=p,p.prev=a,f.next=a,a.prev=f,x.next=f,f.prev=x,f}function Oa(o,r,a,f){const p=Dm(o,r,a);return f?(p.next=f.next,p.prev=f,f.next.prev=p,f.next=p):(p.prev=p,p.next=p),p}function Ia(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Dm(o,r,a){return{i:o,x:r,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ei{constructor(r,a){if(a>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=a}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class Jd{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}Jd.noSubdivision=new Jd({fill:new Ei(0,0),line:new Ei(0,0),tile:new Ei(0,0),stencil:new Ei(0,0),circle:1}),Lt("SubdivisionGranularityExpression",Ei),Lt("SubdivisionGranularitySetting",Jd);const oo=-32768,js=32767;class pu{constructor(r,a){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=pt/r,this._canonical=a}_getKey(r,a){return(r+=32768)<<16|a+32768}_vertexToIndex(r,a){if(r<-32768||a<-32768||r>32767||a>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(r),p=0|Math.round(a),x=this._getKey(f,p);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,b),this._vertexBuffer.push(f,p),b}_subdivideTrianglesScanline(r){if(this._granularity<2)return(function(p,x){const b=[];for(let E=0;E<x.length;E+=3){const C=x[E],k=x[E+1],N=x[E+2],B=p[2*C],G=p[2*C+1];(p[2*k]-B)*(p[2*N+1]-G)-(p[2*k+1]-G)*(p[2*N]-B)>0?(b.push(C),b.push(N),b.push(k)):(b.push(C),b.push(k),b.push(N))}return b})(this._vertexBuffer,r);const a=[],f=r.length;for(let p=0;p<f;p+=3){const x=[r[p+0],r[p+1],r[p+2]],b=[this._vertexBuffer[2*r[p+0]+0],this._vertexBuffer[2*r[p+0]+1],this._vertexBuffer[2*r[p+1]+0],this._vertexBuffer[2*r[p+1]+1],this._vertexBuffer[2*r[p+2]+0],this._vertexBuffer[2*r[p+2]+1]];let E=1/0,C=1/0,k=-1/0,N=-1/0;for(let te=0;te<3;te++){const ie=b[2*te],ue=b[2*te+1];E=Math.min(E,ie),k=Math.max(k,ie),C=Math.min(C,ue),N=Math.max(N,ue)}if(E===k||C===N)continue;const B=Math.floor(E/this._granularityCellSize),G=Math.ceil(k/this._granularityCellSize),Z=Math.floor(C/this._granularityCellSize),J=Math.ceil(N/this._granularityCellSize);if(B!==G||Z!==J)for(let te=Z;te<J;te++){const ie=this._scanlineGenerateVertexRingForCellRow(te,b,x);Ns(this._vertexBuffer,ie,a)}else a.push(...x)}return a}_scanlineGenerateVertexRingForCellRow(r,a,f){const p=r*this._granularityCellSize,x=p+this._granularityCellSize,b=[];for(let E=0;E<3;E++){const C=a[2*E],k=a[2*E+1],N=a[2*(E+1)%6],B=a[(2*(E+1)+1)%6],G=a[2*(E+2)%6],Z=a[(2*(E+2)+1)%6],J=N-C,te=B-k,ie=J===0,ue=te===0,ve=(p-k)/te,se=(x-k)/te,de=Math.min(ve,se),Se=Math.max(ve,se);if(!ue&&(de>=1||Se<=0)||ue&&(k<p||k>x)){B>=p&&B<=x&&b.push(f[(E+1)%3]);continue}!ue&&de>0&&b.push(this._vertexToIndex(C+J*de,k+te*de));const Ie=C+J*Math.max(de,0),Ye=C+J*Math.min(Se,1);ie||this._generateIntraEdgeVertices(b,C,k,N,B,Ie,Ye),!ue&&Se<1&&b.push(this._vertexToIndex(C+J*Se,k+te*Se)),(ue||B>=p&&B<=x)&&b.push(f[(E+1)%3]),!ue&&(B<=p||B>=x)&&this._generateInterEdgeVertices(b,C,k,N,B,G,Z,Ye,p,x)}return b}_generateIntraEdgeVertices(r,a,f,p,x,b,E){const C=p-a,k=x-f,N=k===0,B=N?Math.min(a,p):Math.min(b,E),G=N?Math.max(a,p):Math.max(b,E),Z=Math.floor(B/this._granularityCellSize)+1,J=Math.ceil(G/this._granularityCellSize)-1;if(N?a<p:b<E)for(let te=Z;te<=J;te++){const ie=te*this._granularityCellSize;r.push(this._vertexToIndex(ie,f+k*(ie-a)/C))}else for(let te=J;te>=Z;te--){const ie=te*this._granularityCellSize;r.push(this._vertexToIndex(ie,f+k*(ie-a)/C))}}_generateInterEdgeVertices(r,a,f,p,x,b,E,C,k,N){const B=x-f,G=b-p,Z=E-x,J=(k-x)/Z,te=(N-x)/Z,ie=Math.min(J,te),ue=Math.max(J,te),ve=p+G*ie;let se=Math.floor(Math.min(ve,C)/this._granularityCellSize)+1,de=Math.ceil(Math.max(ve,C)/this._granularityCellSize)-1,Se=C<ve;const Ie=Z===0;if(Ie&&(E===k||E===N))return;if(Ie||ie>=1||ue<=0){const ct=f-E,ft=b+(a-b)*Math.min((k-E)/ct,(N-E)/ct);se=Math.floor(Math.min(ft,C)/this._granularityCellSize)+1,de=Math.ceil(Math.max(ft,C)/this._granularityCellSize)-1,Se=C<ft}const Ye=B>0?N:k;if(Se)for(let ct=se;ct<=de;ct++)r.push(this._vertexToIndex(ct*this._granularityCellSize,Ye));else for(let ct=de;ct>=se;ct--)r.push(this._vertexToIndex(ct*this._granularityCellSize,Ye))}_generateOutline(r){const a=[];for(const f of r){const p=mu(f,this._granularity,!0),x=this._pointArrayToIndices(p),b=[];for(let E=1;E<x.length;E++)b.push(x[E-1]),b.push(x[E]);a.push(b)}return a}_handlePoles(r){let a=!1,f=!1;this._canonical&&(this._canonical.y===0&&(a=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(a||f)&&this._fillPoles(r,a,f)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let a=0;a<r.length;a+=2){const f=r[a+1];f===oo&&(r[a+1]=-32767),f===js&&(r[a+1]=32766)}}_generatePoleQuad(r,a,f,p,x,b){p>x!=(b===oo)?(r.push(a),r.push(f),r.push(this._vertexToIndex(p,b)),r.push(f),r.push(this._vertexToIndex(x,b)),r.push(this._vertexToIndex(p,b))):(r.push(f),r.push(a),r.push(this._vertexToIndex(p,b)),r.push(this._vertexToIndex(x,b)),r.push(f),r.push(this._vertexToIndex(p,b)))}_fillPoles(r,a,f){const p=this._vertexBuffer,x=pt,b=r.length;for(let E=2;E<b;E+=3){const C=r[E-2],k=r[E-1],N=r[E],B=p[2*C],G=p[2*C+1],Z=p[2*k],J=p[2*k+1],te=p[2*N],ie=p[2*N+1];a&&(G===0&&J===0&&this._generatePoleQuad(r,C,k,B,Z,oo),J===0&&ie===0&&this._generatePoleQuad(r,k,N,Z,te,oo),ie===0&&G===0&&this._generatePoleQuad(r,N,C,te,B,oo)),f&&(G===x&&J===x&&this._generatePoleQuad(r,C,k,B,Z,js),J===x&&ie===x&&this._generatePoleQuad(r,k,N,Z,te,js),ie===x&&G===x&&this._generatePoleQuad(r,N,C,te,B,js))}}_initializeVertices(r){for(let a=0;a<r.length;a+=2)this._vertexToIndex(r[a],r[a+1])}subdividePolygonInternal(r,a){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:p}=(function(E){const C=[],k=[];for(const N of E)if(N.length!==0){N!==E[0]&&C.push(k.length/2);for(let B=0;B<N.length;B++)k.push(N[B].x),k.push(N[B].y)}return{flattened:k,holeIndices:C}})(r);let x;this._initializeVertices(f);try{const E=(function(k,N,B=2){const G=N&&N.length,Z=G?N[0]*B:k.length;let J=Cm(k,0,Z,B,!0);const te=[];if(!J||J.next===J.prev)return te;let ie,ue,ve;if(G&&(J=(function(se,de,Se,Ie){const Ye=[];for(let ct=0,ft=de.length;ct<ft;ct++){const xt=Cm(se,de[ct]*Ie,ct<ft-1?de[ct+1]*Ie:se.length,Ie,!1);xt===xt.next&&(xt.steiner=!0),Ye.push(pb(xt))}Ye.sort(pi);for(let ct=0;ct<Ye.length;ct++)Se=fy(Ye[ct],Se);return Se})(k,N,J,B)),k.length>80*B){ie=k[0],ue=k[1];let se=ie,de=ue;for(let Se=B;Se<Z;Se+=B){const Ie=k[Se],Ye=k[Se+1];Ie<ie&&(ie=Ie),Ye<ue&&(ue=Ye),Ie>se&&(se=Ie),Ye>de&&(de=Ye)}ve=Math.max(se-ie,de-ue),ve=ve!==0?32767/ve:0}return Mh(J,te,B,ie,ue,ve,0),te})(f,p),C=this._convertIndices(f,E);x=this._subdivideTrianglesScanline(C)}catch(E){console.error(E)}let b=[];return a&&(b=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:b}}_convertIndices(r,a){const f=[];for(let p=0;p<a.length;p++)f.push(this._vertexToIndex(r[2*a[p]],r[2*a[p]+1]));return f}_pointArrayToIndices(r){const a=[];for(let f=0;f<r.length;f++){const p=r[f];a.push(this._vertexToIndex(p.x,p.y))}return a}}function Om(o,r,a,f=!0){return new pu(a,r).subdividePolygonInternal(o,f)}function mu(o,r,a=!1){if(!o||o.length<1)return[];if(o.length<2)return[];const f=o[0],p=o[o.length-1],x=a&&(f.x!==p.x||f.y!==p.y);if(r<2)return x?[...o,o[0]]:[...o];const b=Math.floor(pt/r),E=[];E.push(new M(o[0].x,o[0].y));const C=o.length,k=x?C:C-1;for(let N=0;N<k;N++){const B=o[N],G=N<C-1?o[N+1]:o[0],Z=B.x,J=B.y,te=G.x,ie=G.y,ue=Z!==te,ve=J!==ie;if(!ue&&!ve)continue;const se=te-Z,de=ie-J,Se=Math.abs(se),Ie=Math.abs(de);let Ye=Z,ct=J;for(;;){const xt=se>0?(Math.floor(Ye/b)+1)*b:(Math.ceil(Ye/b)-1)*b,Dt=de>0?(Math.floor(ct/b)+1)*b:(Math.ceil(ct/b)-1)*b,Tt=Math.abs(Ye-xt),dt=Math.abs(ct-Dt),it=Math.abs(Ye-te),Nt=Math.abs(ct-ie),Ft=ue?Tt/Se:Number.POSITIVE_INFINITY,Ht=ve?dt/Ie:Number.POSITIVE_INFINITY;if((it<=Tt||!ue)&&(Nt<=dt||!ve))break;if(Ft<Ht&&ue||!ve){Ye=xt,ct+=de*Ft;const Vt=new M(Ye,Math.round(ct));E[E.length-1].x===Vt.x&&E[E.length-1].y===Vt.y||E.push(Vt)}else{Ye+=se*Ht,ct=Dt;const Vt=new M(Math.round(Ye),ct);E[E.length-1].x===Vt.x&&E[E.length-1].y===Vt.y||E.push(Vt)}}const ft=new M(te,ie);E[E.length-1].x===ft.x&&E[E.length-1].y===ft.y||E.push(ft)}return E}function Ns(o,r,a){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,p=o[2*r[0]];for(let C=1;C<r.length;C++){const k=o[2*r[C]];k<p&&(p=k,f=C)}const x=r.length;let b=f,E=(b+1)%x;for(;;){const C=b-1>=0?b-1:x-1,k=(E+1)%x,N=o[2*r[C]],B=o[2*r[k]],G=o[2*r[b]],Z=o[2*r[b]+1],J=o[2*r[E]+1];let te=!1;if(N<B)te=!0;else if(N>B)te=!1;else{const ie=J-Z,ue=-(o[2*r[E]]-G),ve=Z<J?1:-1;((N-G)*ie+(o[2*r[C]+1]-Z)*ue)*ve>((B-G)*ie+(o[2*r[k]+1]-Z)*ue)*ve&&(te=!0)}if(te){const ie=r[C],ue=r[b],ve=r[E];ie!==ue&&ie!==ve&&ue!==ve&&a.push(ve,ue,ie),b--,b<0&&(b=x-1)}else{const ie=r[k],ue=r[b],ve=r[E];ie!==ue&&ie!==ve&&ue!==ve&&a.push(ve,ue,ie),E++,E>=x&&(E=0)}if(C===k)break}}function my(o,r,a,f,p,x,b,E,C){const k=p.length/2,N=b&&E&&C;if(k<It.MAX_VERTEX_ARRAY_LENGTH){const B=r.prepareSegment(k,a,f),G=B.vertexLength;for(let te=0;te<x.length;te+=3)f.emplaceBack(G+x[te],G+x[te+1],G+x[te+2]);let Z,J;B.vertexLength+=k,B.primitiveLength+=x.length/3,N&&(J=b.prepareSegment(k,a,E),Z=J.vertexLength,J.vertexLength+=k);for(let te=0;te<p.length;te+=2)o(p[te],p[te+1]);if(N)for(let te=0;te<C.length;te++){const ie=C[te];for(let ue=1;ue<ie.length;ue+=2)E.emplaceBack(Z+ie[ue-1],Z+ie[ue]);J.primitiveLength+=ie.length/2}}else(function(B,G,Z,J,te,ie){const ue=[];for(let Ie=0;Ie<J.length/2;Ie++)ue.push(-1);const ve={count:0};let se=0,de=B.getOrCreateLatestSegment(G,Z),Se=de.vertexLength;for(let Ie=2;Ie<te.length;Ie+=3){const Ye=te[Ie-2],ct=te[Ie-1],ft=te[Ie];let xt=ue[Ye]<se,Dt=ue[ct]<se,Tt=ue[ft]<se;de.vertexLength+((xt?1:0)+(Dt?1:0)+(Tt?1:0))>It.MAX_VERTEX_ARRAY_LENGTH&&(de=B.createNewSegment(G,Z),se=ve.count,xt=!0,Dt=!0,Tt=!0,Se=0);const dt=Sl(ue,J,ie,ve,Ye,xt,de),it=Sl(ue,J,ie,ve,ct,Dt,de),Nt=Sl(ue,J,ie,ve,ft,Tt,de);Z.emplaceBack(Se+dt-se,Se+it-se,Se+Nt-se),de.primitiveLength++}})(r,a,f,p,x,o),N&&(function(B,G,Z,J,te,ie){const ue=[];for(let Ie=0;Ie<J.length/2;Ie++)ue.push(-1);const ve={count:0};let se=0,de=B.getOrCreateLatestSegment(G,Z),Se=de.vertexLength;for(let Ie=0;Ie<te.length;Ie++){const Ye=te[Ie];for(let ct=1;ct<te[Ie].length;ct+=2){const ft=Ye[ct-1],xt=Ye[ct];let Dt=ue[ft]<se,Tt=ue[xt]<se;de.vertexLength+((Dt?1:0)+(Tt?1:0))>It.MAX_VERTEX_ARRAY_LENGTH&&(de=B.createNewSegment(G,Z),se=ve.count,Dt=!0,Tt=!0,Se=0);const dt=Sl(ue,J,ie,ve,ft,Dt,de),it=Sl(ue,J,ie,ve,xt,Tt,de);Z.emplaceBack(Se+dt-se,Se+it-se),de.primitiveLength++}}})(b,a,E,p,C,o),r.forceNewSegmentOnNextPrepare(),b?.forceNewSegmentOnNextPrepare()}function Sl(o,r,a,f,p,x,b){if(x){const E=f.count;return a(r[2*p],r[2*p+1]),o[p]=f.count,f.count++,b.vertexLength++,E}return o[p]}class Ch{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new pe,this.indexArray=new Qe,this.indexArray2=new Ct,this.programConfigurations=new vl(r.layers,r.zoom),this.segments=new It,this.segments2=new It,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){this.hasDependencies=Po("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),x=!p.isConstant(),b=[];for(const{feature:E,id:C,index:k,sourceLayerIndex:N}of r){const B=this.layers[0]._featureFilter.needGeometry,G=Co(E,B);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),G,f))continue;const Z=x?p.evaluate(G,{},f,a.availableImages):void 0,J={id:C,properties:E.properties,type:E.type,sourceLayerIndex:N,index:k,geometry:B?G.geometry:Ls(E),patterns:{},sortKey:Z};b.push(J)}x&&b.sort(((E,C)=>E.sortKey-C.sortKey));for(const E of b){const{geometry:C,index:k,sourceLayerIndex:N}=E;if(this.hasDependencies){const B=Mm("fill",this.layers,E,{zoom:this.zoom},a);this.patternFeatures.push(B)}else this.addFeature(E,C,k,f,{},a.subdivisionGranularity);a.featureIndex.insert(r[k].feature,C,k,N,this.index)}}update(r,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f})}addFeatures(r,a,f){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,f,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Wd),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,f,p,x,b){for(const E of eh(a,500)){const C=Om(E,p,b.fill.getGranularityForZoomLevel(p.z)),k=this.layoutVertexArray;my(((N,B)=>{k.emplaceBack(N,B)}),this.segments,this.layoutVertexArray,this.indexArray,C.verticesFlattened,C.indicesTriangles,this.segments2,this.indexArray2,C.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,canonical:p})}}let $f,Ph;Lt("FillBucket",Ch,{omit:["layers","patternFeatures"]});var f_={get paint(){return Ph=Ph||new Bn({"fill-antialias":new jt(Me.paint_fill["fill-antialias"]),"fill-opacity":new Ut(Me.paint_fill["fill-opacity"]),"fill-color":new Ut(Me.paint_fill["fill-color"]),"fill-outline-color":new Ut(Me.paint_fill["fill-outline-color"]),"fill-translate":new jt(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new jt(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new to(Me.paint_fill["fill-pattern"])})},get layout(){return $f=$f||new Bn({"fill-sort-key":new Ut(Me.layout_fill["fill-sort-key"])})}};class d_ extends wn{constructor(r,a){super(r,f_,a)}recalculate(r,a){super.recalculate(r,a);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Ch(r)}queryRadius(){return Ud(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:a,transform:f,pixelsToTileUnits:p}){return ym(_m(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,p),a)}isTileClipped(){return!0}}const ep=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),p_=gn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Im}=ep;class Zf{constructor(r,a,f,p,x){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=r,this._geometry=-1,this._keys=p,this._values=x,r.readFields(mb,this,a)}loadGeometry(){const r=this._pbf;r.pos=this._geometry;const a=r.readVarint()+r.pos,f=[];let p,x=1,b=0,E=0,C=0;for(;r.pos<a;){if(b<=0){const k=r.readVarint();x=7&k,b=k>>3}if(b--,x===1||x===2)E+=r.readSVarint(),C+=r.readSVarint(),x===1&&(p&&f.push(p),p=[]),p&&p.push(new M(E,C));else{if(x!==7)throw new Error(`unknown command ${x}`);p&&p.push(p[0].clone())}}return p&&f.push(p),f}bbox(){const r=this._pbf;r.pos=this._geometry;const a=r.readVarint()+r.pos;let f=1,p=0,x=0,b=0,E=1/0,C=-1/0,k=1/0,N=-1/0;for(;r.pos<a;){if(p<=0){const B=r.readVarint();f=7&B,p=B>>3}if(p--,f===1||f===2)x+=r.readSVarint(),b+=r.readSVarint(),x<E&&(E=x),x>C&&(C=x),b<k&&(k=b),b>N&&(N=b);else if(f!==7)throw new Error(`unknown command ${f}`)}return[E,k,C,N]}toGeoJSON(r,a,f){const p=this.extent*Math.pow(2,f),x=this.extent*r,b=this.extent*a,E=this.loadGeometry();function C(G){return[360*(G.x+x)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(G.y+b)/p)*Math.PI))-90]}function k(G){return G.map(C)}let N;if(this.type===1){const G=[];for(const J of E)G.push(J[0]);const Z=k(G);N=G.length===1?{type:"Point",coordinates:Z[0]}:{type:"MultiPoint",coordinates:Z}}else if(this.type===2){const G=E.map(k);N=G.length===1?{type:"LineString",coordinates:G[0]}:{type:"MultiLineString",coordinates:G}}else{if(this.type!==3)throw new Error("unknown feature type");{const G=m_(E),Z=[];for(const J of G)Z.push(J.map(k));N=Z.length===1?{type:"Polygon",coordinates:Z[0]}:{type:"MultiPolygon",coordinates:Z}}}const B={type:"Feature",geometry:N,properties:this.properties};return this.id!=null&&(B.id=this.id),B}}function mb(o,r,a){o===1?r.id=a.readVarint():o===2?(function(f,p){const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=p._keys[f.readVarint()],E=p._values[f.readVarint()];p.properties[b]=E}})(a,r):o===3?r.type=a.readVarint():o===4&&(r._geometry=a.pos)}function m_(o){const r=o.length;if(r<=1)return[o];const a=[];let f,p;for(let x=0;x<r;x++){const b=Jr(o[x]);b!==0&&(p===void 0&&(p=b<0),p===b<0?(f&&a.push(f),f=[o[x]]):f&&f.push(o[x]))}return f&&a.push(f),a}function Jr(o){let r=0;for(let a,f,p=0,x=o.length,b=x-1;p<x;b=p++)a=o[p],f=o[b],r+=(f.x-a.x)*(a.y+f.y);return r}Zf.types=["Unknown","Point","LineString","Polygon"];class vn{constructor(r,a){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Mr,this,a),this.length=this._features.length}feature(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];const a=this._pbf.readVarint()+this._pbf.pos;return new Zf(this._pbf,a,this.extent,this._keys,this._values)}}function Mr(o,r,a){o===15?r.version=a.readVarint():o===1?r.name=a.readString():o===5?r.extent=a.readVarint():o===2?r._features.push(a.pos):o===3?r._keys.push(a.readString()):o===4&&r._values.push((function(f){let p=null;const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=f.readVarint()>>3;p=b===1?f.readString():b===2?f.readFloat():b===3?f.readDouble():b===4?f.readVarint64():b===5?f.readVarint():b===6?f.readSVarint():b===7?f.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p})(a))}class Cr{constructor(r,a){this.layers=r.readFields(on,{},a)}}function on(o,r,a){if(o===3){const f=new vn(a,a.readVarint()+a.pos);f.length&&(r[f.name]=f)}}const za=Math.pow(2,13);function cs(o,r,a,f,p,x,b,E){o.emplaceBack(r,a,2*Math.floor(f*za)+b,p*za*2,x*za*2,Math.round(E))}class fc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new xe,this.centroidVertexArray=new fe,this.indexArray=new Qe,this.programConfigurations=new vl(r.layers,r.zoom),this.segments=new It,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){this.features=[],this.hasDependencies=Po("fill-extrusion",this.layers,a);for(const{feature:p,id:x,index:b,sourceLayerIndex:E}of r){const C=this.layers[0]._featureFilter.needGeometry,k=Co(p,C);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),k,f))continue;const N={id:x,sourceLayerIndex:E,index:b,geometry:C?k.geometry:Ls(p),properties:p.properties,type:p.type,patterns:{}};this.hasDependencies?this.features.push(Mm("fill-extrusion",this.layers,N,{zoom:this.zoom},a)):this.addFeature(N,N.geometry,b,f,{},a.subdivisionGranularity),a.featureIndex.insert(p,N.geometry,b,E,this.index,!0)}}addFeatures(r,a,f){for(const p of this.features){const{geometry:x}=p;this.addFeature(p,x,p.index,a,f,r.subdivisionGranularity)}}update(r,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Im),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,p_.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,a,f,p,x,b){for(const E of eh(a,500)){const C={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(C,p,r,E,b);const N=this.layoutVertexArray.length-k,B=Math.floor(C.x/C.sampleCount),G=Math.floor(C.y/C.sampleCount);for(let Z=0;Z<N;Z++)this.centroidVertexArray.emplaceBack(B,G)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,canonical:p})}processPolygon(r,a,f,p,x){if(p.length<1||$n(p[0]))return;for(const B of p)B.length!==0&&gy(r,B);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=x.fill.getGranularityForZoomLevel(a.z),C=Zf.types[f.type]==="Polygon";for(const B of p){if(B.length===0||$n(B))continue;const G=mu(B,E,C);this._generateSideFaces(G,b)}if(!C)return;const k=Om(p,a,E,!1),N=this.layoutVertexArray;my(((B,G)=>{cs(N,B,G,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(r,a){let f=0;for(let p=1;p<r.length;p++){const x=r[p],b=r[p-1];if(gu(x,b))continue;a.segment.vertexLength+4>It.MAX_VERTEX_ARRAY_LENGTH&&(a.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=x.sub(b)._perp()._unit(),C=b.dist(x);f+C>32768&&(f=0),cs(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,f),cs(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,f),f+=C,cs(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,0,f),cs(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,1,f);const k=a.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),a.segment.vertexLength+=4,a.segment.primitiveLength+=2}}}function gy(o,r){for(let a=0;a<r.length;a++){const f=r[a];a===r.length-1&&r[0].x===f.x&&r[0].y===f.y||(o.x+=f.x,o.y+=f.y,o.sampleCount++)}}function gu(o,r){return o.x===r.x&&(o.x<0||o.x>pt)||o.y===r.y&&(o.y<0||o.y>pt)}function $n(o){return o.every((r=>r.x<0))||o.every((r=>r.x>pt))||o.every((r=>r.y<0))||o.every((r=>r.y>pt))}let yu;Lt("FillExtrusionBucket",fc,{omit:["layers","features"]});var Dh={get paint(){return yu=yu||new Bn({"fill-extrusion-opacity":new jt(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ut(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new to(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ut(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ut(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class yy extends wn{constructor(r,a){super(r,Dh,a)}createBucket(r){return new fc(r)}queryRadius(){return Ud(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b,pixelPosMatrix:E}){const C=_m(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,b),k=this.paint.get("fill-extrusion-height").evaluate(a,f),N=this.paint.get("fill-extrusion-base").evaluate(a,f),B=(function(Z,J){const te=[];for(const ie of Z){const ue=[ie.x,ie.y,0,1];Ue(ue,ue,J),te.push(new M(ue[0]/ue[3],ue[1]/ue[3]))}return te})(C,E),G=(function(Z,J,te,ie){const ue=[],ve=[],se=ie[8]*J,de=ie[9]*J,Se=ie[10]*J,Ie=ie[11]*J,Ye=ie[8]*te,ct=ie[9]*te,ft=ie[10]*te,xt=ie[11]*te;for(const Dt of Z){const Tt=[],dt=[];for(const it of Dt){const Nt=it.x,Ft=it.y,Ht=ie[0]*Nt+ie[4]*Ft+ie[12],Vt=ie[1]*Nt+ie[5]*Ft+ie[13],_r=ie[2]*Nt+ie[6]*Ft+ie[14],Rn=ie[3]*Nt+ie[7]*Ft+ie[15],vi=_r+Se,oa=Rn+Ie,Cl=Ht+Ye,co=Vt+ct,qi=_r+ft,sa=Rn+xt,Qn=new M((Ht+se)/oa,(Vt+de)/oa);Qn.z=vi/oa,Tt.push(Qn);const Gi=new M(Cl/sa,co/sa);Gi.z=qi/sa,dt.push(Gi)}ue.push(Tt),ve.push(dt)}return[ue,ve]})(p,N,k,E);return(function(Z,J,te){let ie=1/0;ym(te,J)&&(ie=Oh(te,J[0]));for(let ue=0;ue<J.length;ue++){const ve=J[ue],se=Z[ue];for(let de=0;de<ve.length-1;de++){const Se=ve[de],Ie=[Se,ve[de+1],se[de+1],se[de],Se];Ah(te,Ie)&&(ie=Math.min(ie,Oh(te,Ie)))}}return ie!==1/0&&ie})(G[0],G[1],B)}}function Vi(o,r){return o.x*r.x+o.y*r.y}function Oh(o,r){if(o.length===1){let a=0;const f=r[a++];let p;for(;!p||f.equals(p);)if(p=r[a++],!p)return 1/0;for(;a<r.length;a++){const x=r[a],b=o[0],E=p.sub(f),C=x.sub(f),k=b.sub(f),N=Vi(E,E),B=Vi(E,C),G=Vi(C,C),Z=Vi(k,E),J=Vi(k,C),te=N*G-B*B,ie=(G*Z-B*J)/te,ue=(N*J-B*Z)/te,ve=f.z*(1-ie-ue)+p.z*ie+x.z*ue;if(isFinite(ve))return ve}return 1/0}{let a=1/0;for(const f of r)a=Math.min(a,f.z);return a}}const tp=gn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:so}=tp,vy=gn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:zm}=vy,g_=Math.cos(Math.PI/180*37.5),rp=Math.pow(2,14)/.5;class Hf{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((a=>{this.gradients[a.id]={}})),this.layoutVertexArray=new Ae,this.layoutVertexArray2=new _e,this.indexArray=new Qe,this.programConfigurations=new vl(r.layers,r.zoom),this.segments=new It,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){this.hasDependencies=Po("line",this.layers,a)||this.hasLineDasharray(this.layers);const p=this.layers[0].layout.get("line-sort-key"),x=!p.isConstant(),b=[];for(const{feature:E,id:C,index:k,sourceLayerIndex:N}of r){const B=this.layers[0]._featureFilter.needGeometry,G=Co(E,B);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),G,f))continue;const Z=x?p.evaluate(G,{},f):void 0,J={id:C,properties:E.properties,type:E.type,sourceLayerIndex:N,index:k,geometry:B?G.geometry:Ls(E),patterns:{},dashes:{},sortKey:Z};b.push(J)}x&&b.sort(((E,C)=>E.sortKey-C.sortKey));for(const E of b){const{geometry:C,index:k,sourceLayerIndex:N}=E;this.hasDependencies?(Po("line",this.layers,a)?Mm("line",this.layers,E,{zoom:this.zoom},a):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,E,this.zoom,a),this.patternFeatures.push(E)):this.addFeature(E,C,k,f,{},{},a.subdivisionGranularity),a.featureIndex.insert(r[k].feature,C,k,N,this.index)}}update(r,a,f,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f,dashPositions:p})}addFeatures(r,a,f,p){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,a,f,p,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,zm)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,so),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,f,p,x,b,E){const C=this.layers[0].layout,k=C.get("line-join").evaluate(r,{}),N=C.get("line-cap"),B=C.get("line-miter-limit"),G=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const Z of a)this.addLine(Z,r,k,N,B,G,p,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,dashPositions:b,canonical:p})}addLine(r,a,f,p,x,b,E,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=mu(r,E?C.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let se=0;se<r.length-1;se++)this.totalDistance+=r[se].dist(r[se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=Zf.types[a.type]==="Polygon";let N=r.length;for(;N>=2&&r[N-1].equals(r[N-2]);)N--;let B=0;for(;B<N-1&&r[B].equals(r[B+1]);)B++;if(N<(k?3:2))return;f==="bevel"&&(x=1.05);const G=this.overscaling<=16?122880/(512*this.overscaling):0,Z=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let J,te,ie,ue,ve;this.e1=this.e2=-1,k&&(J=r[N-2],ve=r[B].sub(J)._unit()._perp());for(let se=B;se<N;se++){if(ie=se===N-1?k?r[B+1]:void 0:r[se+1],ie&&r[se].equals(ie))continue;ve&&(ue=ve),J&&(te=J),J=r[se],ve=ie?ie.sub(J)._unit()._perp():ue,ue=ue||ve;let de=ue.add(ve);de.x===0&&de.y===0||de._unit();const Se=ue.x*ve.x+ue.y*ve.y,Ie=de.x*ve.x+de.y*ve.y,Ye=Ie!==0?1/Ie:1/0,ct=2*Math.sqrt(2-2*Ie),ft=Ie<g_&&te&&ie,xt=ue.x*ve.y-ue.y*ve.x>0;if(ft&&se>B){const dt=J.dist(te);if(dt>2*G){const it=J.sub(J.sub(te)._mult(G/dt)._round());this.updateDistance(te,it),this.addCurrentVertex(it,ue,0,0,Z),te=it}}const Dt=te&&ie;let Tt=Dt?f:k?"butt":p;if(Dt&&Tt==="round"&&(Ye<b?Tt="miter":Ye<=2&&(Tt="fakeround")),Tt==="miter"&&Ye>x&&(Tt="bevel"),Tt==="bevel"&&(Ye>2&&(Tt="flipbevel"),Ye<x&&(Tt="miter")),te&&this.updateDistance(te,J),Tt==="miter")de._mult(Ye),this.addCurrentVertex(J,de,0,0,Z);else if(Tt==="flipbevel"){if(Ye>100)de=ve.mult(-1);else{const dt=Ye*ue.add(ve).mag()/ue.sub(ve).mag();de._perp()._mult(dt*(xt?-1:1))}this.addCurrentVertex(J,de,0,0,Z),this.addCurrentVertex(J,de.mult(-1),0,0,Z)}else if(Tt==="bevel"||Tt==="fakeround"){const dt=-Math.sqrt(Ye*Ye-1),it=xt?dt:0,Nt=xt?0:dt;if(te&&this.addCurrentVertex(J,ue,it,Nt,Z),Tt==="fakeround"){const Ft=Math.round(180*ct/Math.PI/20);for(let Ht=1;Ht<Ft;Ht++){let Vt=Ht/Ft;if(Vt!==.5){const Rn=Vt-.5;Vt+=Vt*Rn*(Vt-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*Rn*Rn+(.848013+Se*(.215638*Se-1.06021)))}const _r=ve.sub(ue)._mult(Vt)._add(ue)._unit()._mult(xt?-1:1);this.addHalfVertex(J,_r.x,_r.y,!1,xt,0,Z)}}ie&&this.addCurrentVertex(J,ve,-it,-Nt,Z)}else if(Tt==="butt")this.addCurrentVertex(J,de,0,0,Z);else if(Tt==="square"){const dt=te?1:-1;this.addCurrentVertex(J,de,dt,dt,Z)}else Tt==="round"&&(te&&(this.addCurrentVertex(J,ue,0,0,Z),this.addCurrentVertex(J,ue,1,1,Z,!0)),ie&&(this.addCurrentVertex(J,ve,-1,-1,Z,!0),this.addCurrentVertex(J,ve,0,0,Z)));if(ft&&se<N-1){const dt=J.dist(ie);if(dt>2*G){const it=J.add(ie.sub(J)._mult(G/dt)._round());this.updateDistance(J,it),this.addCurrentVertex(it,ve,0,0,Z),J=it}}}}addCurrentVertex(r,a,f,p,x,b=!1){const E=a.y*p-a.x,C=-a.y-a.x*p;this.addHalfVertex(r,a.x+a.y*f,a.y-a.x*f,b,!1,f,x),this.addHalfVertex(r,E,C,b,!0,-p,x),this.distance>rp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,a,f,p,x,b))}addHalfVertex({x:r,y:a},f,p,x,b,E,C){const k=.5*(this.lineClips?this.scaledDistance*(rp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(x?1:0),(a<<1)+(b?1:0),Math.round(63*f)+128,Math.round(63*p)+128,1+(E===0?0:E<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),C.primitiveLength++),b?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}hasLineDasharray(r){for(const a of r){const f=a.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(r,a,f,p){for(const x of r){const b=x.paint.get("line-dasharray");if(!b||b.value.kind==="constant")continue;const E=x.layout.get("line-cap")==="round",C={dasharray:b.value.evaluate({zoom:f-1},a,{}),round:E},k={dasharray:b.value.evaluate({zoom:f},a,{}),round:E},N={dasharray:b.value.evaluate({zoom:f+1},a,{}),round:E},B=`${C.dasharray.join(",")},${C.round}`,G=`${k.dasharray.join(",")},${k.round}`,Z=`${N.dasharray.join(",")},${N.round}`;p.dashDependencies[B]=C,p.dashDependencies[G]=k,p.dashDependencies[Z]=N,a.dashes[x.id]={min:B,mid:G,max:Z}}}}let vu,gi;Lt("LineBucket",Hf,{omit:["layers","patternFeatures"]});var _u={get paint(){return gi=gi||new Bn({"line-opacity":new Ut(Me.paint_line["line-opacity"]),"line-color":new Ut(Me.paint_line["line-color"]),"line-translate":new jt(Me.paint_line["line-translate"]),"line-translate-anchor":new jt(Me.paint_line["line-translate-anchor"]),"line-width":new Ut(Me.paint_line["line-width"]),"line-gap-width":new Ut(Me.paint_line["line-gap-width"]),"line-offset":new Ut(Me.paint_line["line-offset"]),"line-blur":new Ut(Me.paint_line["line-blur"]),"line-dasharray":new to(Me.paint_line["line-dasharray"]),"line-pattern":new to(Me.paint_line["line-pattern"]),"line-gradient":new _h(Me.paint_line["line-gradient"])})},get layout(){return vu=vu||new Bn({"line-cap":new jt(Me.layout_line["line-cap"]),"line-join":new Ut(Me.layout_line["line-join"]),"line-miter-limit":new jt(Me.layout_line["line-miter-limit"]),"line-round-limit":new jt(Me.layout_line["line-round-limit"]),"line-sort-key":new Ut(Me.layout_line["line-sort-key"])})}};class Wf extends Ut{possiblyEvaluate(r,a){return a=new Ur(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(r,a)}evaluate(r,a,f,p){return a=Ar({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(r,a,f,p)}}let hs;class _y extends wn{constructor(r,a){super(r,_u,a),this.gradientVersion=0,hs||(hs=new Wf(_u.paint.properties["line-width"].specification),hs.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(a)&&a._styleExpression.expression instanceof il,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,a){super.recalculate(r,a),this.paint._values["line-floorwidth"]=hs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Hf(r)}queryRadius(r){const a=r,f=km(hu("line-width",this,a),hu("line-gap-width",this,a)),p=hu("line-offset",this,a);return f/2+Math.abs(p)+Ud(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b}){const E=_m(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,b),C=b/2*km(this.paint.get("line-width").evaluate(a,f),this.paint.get("line-gap-width").evaluate(a,f)),k=this.paint.get("line-offset").evaluate(a,f);return k&&(p=(function(N,B){const G=[];for(let Z=0;Z<N.length;Z++){const J=xm(N[Z]),te=[];for(let ie=0;ie<J.length;ie++){const ue=J[ie],ve=J[ie-1],se=J[ie+1],de=ie===0?new M(0,0):ue.sub(ve)._unit()._perp(),Se=ie===J.length-1?new M(0,0):se.sub(ue)._unit()._perp(),Ie=de._add(Se)._unit(),Ye=Ie.x*Se.x+Ie.y*Se.y;Ye!==0&&Ie._mult(1/Ye),te.push(Ie._mult(B)._add(ue))}G.push(te)}return G})(p,k*b)),(function(N,B,G){for(let Z=0;Z<B.length;Z++){const J=B[Z];if(N.length>=3){for(let te=0;te<J.length;te++)if(xl(N,J[te]))return!0}if(di(N,J,G))return!0}return!1})(E,p,C)}isTileClipped(){return!0}}function km(o,r){return r>0?r+2*o:o}const y_=gn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),np=gn([{name:"a_projected_pos",components:3,type:"Float32"}],4);gn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const xy=gn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);gn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lo=gn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),v_=gn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function uo(o,r,a){return o.sections.forEach((f=>{f.text=(function(p,x,b){const E=x.layout.get("text-transform").evaluate(b,{});return E==="uppercase"?p=p.toLocaleUpperCase():E==="lowercase"&&(p=p.toLocaleLowerCase()),eo.applyArabicShaping&&(p=eo.applyArabicShaping(p)),p})(f.text,r,a)})),o}gn([{name:"triangle",components:3,type:"Uint16"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gn([{type:"Float32",name:"offsetX"}]),gn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var si=24;const Xf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},gb={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},dc={40:!0};function ip(o,r,a,f,p,x){if("fontStack"in r){const b=a[r.fontStack],E=b&&b[o];return E?E.metrics.advance*r.scale+p:0}{const b=f[r.imageName];return b?b.displaySize[0]*r.scale*si/x+p:0}}function Rm(o,r,a,f){const p=Math.pow(o-r,2);return f?o<r?p/2:2*p:p+Math.abs(a)*a}function Yf(o,r,a){let f=0;return o===10&&(f-=1e4),a&&(f+=150),o!==40&&o!==65288||(f+=50),r!==41&&r!==65289||(f+=50),f}function by(o,r,a,f,p,x){let b=null,E=Rm(r,a,p,x);for(const C of f){const k=Rm(r-C.x,a,p,x)+C.badness;k<=E&&(b=C,E=k)}return{index:o,x:r,priorBreak:b,badness:E}}function wy(o){return o?wy(o.priorBreak).concat(o.index):[]}class Ih{constructor(r="",a=[],f=[]){this.text=r,this.sections=a,this.sectionIndex=f,this.imageSectionID=null}static fromFeature(r,a){const f=new Ih;for(let p=0;p<r.sections.length;p++){const x=r.sections[p];x.image?f.addImageSection(x):f.addTextSection(x,a)}return f}length(){return[...this.text].length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}verticalizePunctuation(){this.text=(function(r){let a="",f={premature:!0,value:void 0};const p=r[Symbol.iterator]();let x=p.next();const b=r[Symbol.iterator]();b.next();let E=b.next();for(;!x.done;)a+=!E.done&&as(E.value.codePointAt(0))&&!Xf[E.value]||!f.premature&&as(f.value.codePointAt(0))&&!Xf[f.value]||!Xf[x.value]?x.value:Xf[x.value],f={value:x.value,premature:!1},x=p.next(),E=b.next();return a})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const r=this.text.match(/^\s*/),a=r?r[0].length:0,f=this.text.match(/\S\s*$/),p=f?f[0].length-1:0;this.text=this.text.substring(a,this.text.length-p),this.sectionIndex=this.sectionIndex.slice(a,this.sectionIndex.length-p)}substring(r,a){const f=[...this.text].slice(r,a).join(""),p=this.sectionIndex.slice(r,a);return new Ih(f,this.sections,p)}toCodeUnitIndex(r){return[...this.text].slice(0,r).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((r,a)=>Math.max(r,this.sections[a].scale)),0)}getMaxImageSize(r){let a=0,f=0;for(let p=0;p<this.length();p++){const x=this.getSection(p);if("imageName"in x){const b=r[x.imageName];if(!b)continue;const E=b.displaySize;a=Math.max(a,E[0]),f=Math.max(f,E[1])}}return{maxImageWidth:a,maxImageHeight:f}}addTextSection(r,a){this.text+=r.text,this.sections.push({scale:r.scale||1,verticalAlign:r.verticalAlign||"bottom",fontStack:r.fontStack||a});const f=this.sections.length-1;this.sectionIndex.push(...[...r.text].map((()=>f)))}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void ur("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push({scale:1,verticalAlign:r.verticalAlign||"bottom",imageName:a}),this.sectionIndex.push(this.sections.length-1)):ur("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(r,a,f,p,x){const b=[],E=this.determineAverageLineWidth(r,a,f,p,x),C=this.hasZeroWidthSpaces();let k=0,N=0;const B=this.text[Symbol.iterator]();let G=B.next();const Z=this.text[Symbol.iterator]();Z.next();let J=Z.next();const te=this.text[Symbol.iterator]();te.next(),te.next();let ie=te.next();for(;!G.done;){const ue=this.getSection(N),ve=G.value.codePointAt(0);if(ph(ve)||(k+=ip(ve,ue,f,p,r,x)),!J.done){const se=rs(ve),de=J.value.codePointAt(0);(gb[ve]||se||"imageName"in ue||!ie.done&&dc[de])&&b.push(by(N+1,k,E,b,Yf(ve,de,se&&C),!1))}N++,G=B.next(),J=Z.next(),ie=te.next()}return wy(by(this.length(),k,E,b,0,!0))}determineAverageLineWidth(r,a,f,p,x){let b=0,E=0;for(const C of this.text){const k=this.getSection(E);b+=ip(C.codePointAt(0),k,f,p,r,x),E++}return b/Math.max(1,Math.ceil(b/a))}}const Lm=4294967296,ap=1/Lm,jm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Nm{constructor(r=new Uint8Array(16)){this.buf=ArrayBuffer.isView(r)?r:new Uint8Array(r),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(r,a,f=this.length){for(;this.pos<f;){const p=this.readVarint(),x=p>>3,b=this.pos;this.type=7&p,r(x,a,this),this.pos===b&&this.skip(p)}return a}readMessage(r,a){return this.readFields(r,a,this.readVarint()+this.pos)}readFixed32(){const r=this.dataView.getUint32(this.pos,!0);return this.pos+=4,r}readSFixed32(){const r=this.dataView.getInt32(this.pos,!0);return this.pos+=4,r}readFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Lm;return this.pos+=8,r}readSFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Lm;return this.pos+=8,r}readFloat(){const r=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,r}readDouble(){const r=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,r}readVarint(r){const a=this.buf;let f,p;return p=a[this.pos++],f=127&p,p<128?f:(p=a[this.pos++],f|=(127&p)<<7,p<128?f:(p=a[this.pos++],f|=(127&p)<<14,p<128?f:(p=a[this.pos++],f|=(127&p)<<21,p<128?f:(p=a[this.pos],f|=(15&p)<<28,(function(x,b,E){const C=E.buf;let k,N;if(N=C[E.pos++],k=(112&N)>>4,N<128||(N=C[E.pos++],k|=(127&N)<<3,N<128)||(N=C[E.pos++],k|=(127&N)<<10,N<128)||(N=C[E.pos++],k|=(127&N)<<17,N<128)||(N=C[E.pos++],k|=(127&N)<<24,N<128)||(N=C[E.pos++],k|=(1&N)<<31,N<128))return Kf(x,k,b);throw new Error("Expected varint not more than 10 bytes")})(f,r,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const r=this.readVarint();return r%2==1?(r+1)/-2:r/2}readBoolean(){return!!this.readVarint()}readString(){const r=this.readVarint()+this.pos,a=this.pos;return this.pos=r,r-a>=12&&jm?jm.decode(this.buf.subarray(a,r)):(function(f,p,x){let b="",E=p;for(;E<x;){const C=f[E];let k,N,B,G=null,Z=C>239?4:C>223?3:C>191?2:1;if(E+Z>x)break;Z===1?C<128&&(G=C):Z===2?(k=f[E+1],(192&k)==128&&(G=(31&C)<<6|63&k,G<=127&&(G=null))):Z===3?(k=f[E+1],N=f[E+2],(192&k)==128&&(192&N)==128&&(G=(15&C)<<12|(63&k)<<6|63&N,(G<=2047||G>=55296&&G<=57343)&&(G=null))):Z===4&&(k=f[E+1],N=f[E+2],B=f[E+3],(192&k)==128&&(192&N)==128&&(192&B)==128&&(G=(15&C)<<18|(63&k)<<12|(63&N)<<6|63&B,(G<=65535||G>=1114112)&&(G=null))),G===null?(G=65533,Z=1):G>65535&&(G-=65536,b+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),b+=String.fromCharCode(G),E+=Z}return b})(this.buf,a,r)}readBytes(){const r=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,r);return this.pos=r,a}readPackedVarint(r=[],a){const f=this.readPackedEnd();for(;this.pos<f;)r.push(this.readVarint(a));return r}readPackedSVarint(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readSVarint());return r}readPackedBoolean(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readBoolean());return r}readPackedFloat(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readFloat());return r}readPackedDouble(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readDouble());return r}readPackedFixed32(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readFixed32());return r}readPackedSFixed32(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readSFixed32());return r}readPackedFixed64(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readFixed64());return r}readPackedSFixed64(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readSFixed64());return r}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(r){const a=7&r;if(a===0)for(;this.buf[this.pos++]>127;);else if(a===2)this.pos=this.readVarint()+this.pos;else if(a===5)this.pos+=4;else{if(a!==1)throw new Error(`Unimplemented type: ${a}`);this.pos+=8}}writeTag(r,a){this.writeVarint(r<<3|a)}realloc(r){let a=this.length||16;for(;a<this.pos+r;)a*=2;if(a!==this.length){const f=new Uint8Array(a);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=a}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeSFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*ap),!0),this.pos+=8}writeSFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*ap),!0),this.pos+=8}writeVarint(r){(r=+r||0)>268435455||r<0?(function(a,f){let p,x;if(a>=0?(p=a%4294967296|0,x=a/4294967296|0):(p=~(-a%4294967296),x=~(-a/4294967296),4294967295^p?p=p+1|0:(p=0,x=x+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(b,E,C){C.buf[C.pos++]=127&b|128,b>>>=7,C.buf[C.pos++]=127&b|128,b>>>=7,C.buf[C.pos++]=127&b|128,b>>>=7,C.buf[C.pos++]=127&b|128,C.buf[C.pos]=127&(b>>>=7)})(p,0,f),(function(b,E){const C=(7&b)<<4;E.buf[E.pos++]|=C|((b>>>=3)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b)))))})(x,f)})(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))}writeSVarint(r){this.writeVarint(r<0?2*-r-1:2*r)}writeBoolean(r){this.writeVarint(+r)}writeString(r){r=String(r),this.realloc(4*r.length),this.pos++;const a=this.pos;this.pos=(function(p,x,b){for(let E,C,k=0;k<x.length;k++){if(E=x.charCodeAt(k),E>55295&&E<57344){if(!C){E>56319||k+1===x.length?(p[b++]=239,p[b++]=191,p[b++]=189):C=E;continue}if(E<56320){p[b++]=239,p[b++]=191,p[b++]=189,C=E;continue}E=C-55296<<10|E-56320|65536,C=null}else C&&(p[b++]=239,p[b++]=191,p[b++]=189,C=null);E<128?p[b++]=E:(E<2048?p[b++]=E>>6|192:(E<65536?p[b++]=E>>12|224:(p[b++]=E>>18|240,p[b++]=E>>12&63|128),p[b++]=E>>6&63|128),p[b++]=63&E|128)}return b})(this.buf,r,this.pos);const f=this.pos-a;f>=128&&__(a,f,this),this.pos=a-1,this.writeVarint(f),this.pos+=f}writeFloat(r){this.realloc(4),this.dataView.setFloat32(this.pos,r,!0),this.pos+=4}writeDouble(r){this.realloc(8),this.dataView.setFloat64(this.pos,r,!0),this.pos+=8}writeBytes(r){const a=r.length;this.writeVarint(a),this.realloc(a);for(let f=0;f<a;f++)this.buf[this.pos++]=r[f]}writeRawMessage(r,a){this.pos++;const f=this.pos;r(a,this);const p=this.pos-f;p>=128&&__(f,p,this),this.pos=f-1,this.writeVarint(p),this.pos+=p}writeMessage(r,a,f){this.writeTag(r,2),this.writeRawMessage(a,f)}writePackedVarint(r,a){a.length&&this.writeMessage(r,x_,a)}writePackedSVarint(r,a){a.length&&this.writeMessage(r,b_,a)}writePackedBoolean(r,a){a.length&&this.writeMessage(r,w_,a)}writePackedFloat(r,a){a.length&&this.writeMessage(r,Qf,a)}writePackedDouble(r,a){a.length&&this.writeMessage(r,Bm,a)}writePackedFixed32(r,a){a.length&&this.writeMessage(r,S_,a)}writePackedSFixed32(r,a){a.length&&this.writeMessage(r,T_,a)}writePackedFixed64(r,a){a.length&&this.writeMessage(r,E_,a)}writePackedSFixed64(r,a){a.length&&this.writeMessage(r,A_,a)}writeBytesField(r,a){this.writeTag(r,2),this.writeBytes(a)}writeFixed32Field(r,a){this.writeTag(r,5),this.writeFixed32(a)}writeSFixed32Field(r,a){this.writeTag(r,5),this.writeSFixed32(a)}writeFixed64Field(r,a){this.writeTag(r,1),this.writeFixed64(a)}writeSFixed64Field(r,a){this.writeTag(r,1),this.writeSFixed64(a)}writeVarintField(r,a){this.writeTag(r,0),this.writeVarint(a)}writeSVarintField(r,a){this.writeTag(r,0),this.writeSVarint(a)}writeStringField(r,a){this.writeTag(r,2),this.writeString(a)}writeFloatField(r,a){this.writeTag(r,5),this.writeFloat(a)}writeDoubleField(r,a){this.writeTag(r,1),this.writeDouble(a)}writeBooleanField(r,a){this.writeVarintField(r,+a)}}function Kf(o,r,a){return a?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function __(o,r,a){const f=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(f);for(let p=a.pos-1;p>=o;p--)a.buf[p+f]=a.buf[p]}function x_(o,r){for(let a=0;a<o.length;a++)r.writeVarint(o[a])}function b_(o,r){for(let a=0;a<o.length;a++)r.writeSVarint(o[a])}function Qf(o,r){for(let a=0;a<o.length;a++)r.writeFloat(o[a])}function Bm(o,r){for(let a=0;a<o.length;a++)r.writeDouble(o[a])}function w_(o,r){for(let a=0;a<o.length;a++)r.writeBoolean(o[a])}function S_(o,r){for(let a=0;a<o.length;a++)r.writeFixed32(o[a])}function T_(o,r){for(let a=0;a<o.length;a++)r.writeSFixed32(o[a])}function E_(o,r){for(let a=0;a<o.length;a++)r.writeFixed64(o[a])}function A_(o,r){for(let a=0;a<o.length;a++)r.writeSFixed64(o[a])}function M_(o,r,a){o===1&&a.readMessage(Fm,r)}function Fm(o,r,a){if(o===3){const{id:f,bitmap:p,width:x,height:b,left:E,top:C,advance:k}=a.readMessage(C_,{});r.push({id:f,bitmap:new Gd({width:x+6,height:b+6},p),metrics:{width:x,height:b,left:E,top:C,advance:k}})}}function C_(o,r,a){o===1?r.id=a.readVarint():o===2?r.bitmap=a.readBytes():o===3?r.width=a.readVarint():o===4?r.height=a.readVarint():o===5?r.left=a.readSVarint():o===6?r.top=a.readSVarint():o===7&&(r.advance=a.readVarint())}function Sy(o){let r=0,a=0;for(const b of o)r+=b.w*b.h,a=Math.max(a,b.w);o.sort(((b,E)=>E.h-b.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let p=0,x=0;for(const b of o)for(let E=f.length-1;E>=0;E--){const C=f[E];if(!(b.w>C.w||b.h>C.h)){if(b.x=C.x,b.y=C.y,x=Math.max(x,b.y+b.h),p=Math.max(p,b.x+b.w),b.w===C.w&&b.h===C.h){const k=f.pop();k&&E<f.length&&(f[E]=k)}else b.h===C.h?(C.x+=b.w,C.w-=b.w):b.w===C.w?(C.y+=b.h,C.h-=b.h):(f.push({x:C.x+b.w,y:C.y,w:C.w-b.w,h:b.h}),C.y+=b.h,C.h-=b.h);break}}return{w:p,h:x,fill:r/(p*x)||0}}class en{constructor(r,{pixelRatio:a,version:f,stretchX:p,stretchY:x,content:b,textFitWidth:E,textFitHeight:C}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=p,this.stretchY=x,this.content=b,this.version=f,this.textFitWidth=E,this.textFitHeight=C}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Um{constructor(r,a){const f={},p={};this.haveRenderCallbacks=[];const x=[];this.addImages(r,f,x),this.addImages(a,p,x);const{w:b,h:E}=Sy(x),C=new ra({width:b||1,height:E||1});for(const k in r){const N=r[k],B=f[k].paddedRect;ra.copy(N.data,C,{x:0,y:0},{x:B.x+1,y:B.y+1},N.data)}for(const k in a){const N=a[k],B=p[k].paddedRect,G=B.x+1,Z=B.y+1,J=N.data.width,te=N.data.height;ra.copy(N.data,C,{x:0,y:0},{x:G,y:Z},N.data),ra.copy(N.data,C,{x:0,y:te-1},{x:G,y:Z-1},{width:J,height:1}),ra.copy(N.data,C,{x:0,y:0},{x:G,y:Z+te},{width:J,height:1}),ra.copy(N.data,C,{x:J-1,y:0},{x:G-1,y:Z},{width:1,height:te}),ra.copy(N.data,C,{x:0,y:0},{x:G+J,y:Z},{width:1,height:te})}this.image=C,this.iconPositions=f,this.patternPositions=p}addImages(r,a,f){for(const p in r){const x=r[p],b={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(b),a[p]=new en(b,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,a){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in r.updatedImages)this.patchUpdatedImage(this.iconPositions[f],r.getImage(f),a),this.patchUpdatedImage(this.patternPositions[f],r.getImage(f),a)}patchUpdatedImage(r,a,f){if(!r||!a||r.version===a.version)return;r.version=a.version;const[p,x]=r.tl;f.update(a.data,void 0,{x:p,y:x})}}var pc;function op(o,r,a,f,p,x,b,E,C,k,N,B,G,Z,J){const te=Ih.fromFeature(o,p);let ie;B===_.az.vertical&&te.verticalizePunctuation();let ue=te.determineLineBreaks(k,x,r,f,Z);const{processBidirectionalText:ve,processStyledBidirectionalText:se}=eo;if(ve&&te.sections.length===1){ie=[],ue=ue.map((Ye=>te.toCodeUnitIndex(Ye)));const Ie=ve(te.toString(),ue);for(const Ye of Ie){const ct=[...Ye].map((()=>0));ie.push(new Ih(Ye,te.sections,ct))}}else if(se){ie=[],ue=ue.map((ft=>te.toCodeUnitIndex(ft)));let Ie=0;const Ye=[];for(const ft of te.text)Ye.push(...Array(ft.length).fill(te.sectionIndex[Ie])),Ie++;const ct=se(te.text,Ye,ue);for(const ft of ct){const xt=[];let Dt="";for(const Tt of ft[0])xt.push(ft[1][Dt.length]),Dt+=Tt;ie.push(new Ih(ft[0],te.sections,xt))}}else ie=(function(Ie,Ye){const ct=[];let ft=0;for(const xt of Ye)ct.push(Ie.substring(ft,xt)),ft=xt;return ft<Ie.length()&&ct.push(Ie.substring(ft,Ie.length())),ct})(te,ue);const de=[],Se={positionedLines:de,text:te.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:B,iconsInText:!1,verticalizable:!1};return(function(Ie,Ye,ct,ft,xt,Dt,Tt,dt,it,Nt,Ft,Ht){let Vt=0,_r=0,Rn=0,vi=0;const oa=dt==="right"?1:dt==="left"?0:.5,Cl=si/Ht;let co=0;for(const Qn of xt){Qn.trim();const Gi=Qn.getMaxScale(),ja={positionedGlyphs:[],lineOffset:0};Ie.positionedLines[co]=ja;const Na=ja.positionedGlyphs;let Io=0;if(!Qn.length()){_r+=Dt,++co;continue}const la=yb(ft,Qn,Cl);let zo=0;for(const Ii of Qn.text){const Un=Qn.getSection(zo),_i=Ii.codePointAt(0),Zn=Vm(it,Ft,_i),zi={glyph:_i,imageName:null,x:Vt,y:_r+-17,vertical:Zn,scale:1,fontStack:"",sectionIndex:Qn.getSectionIndex(zo),metrics:null,rect:null};let Nh;if("fontStack"in Un){if(Nh=Jf(Un,_i,Zn,la,Ye,ct),!Nh)continue;zi.fontStack=Un.fontStack}else{if(Ie.iconsInText=!0,Un.scale*=Cl,Nh=Ey(Un,Zn,Gi,la,ft),!Nh)continue;Io=Math.max(Io,Nh.imageOffset),zi.imageName=Un.imageName}const{rect:Mu,metrics:Jy,baselineOffset:sd}=Nh;zi.y+=sd,zi.scale=Un.scale,zi.metrics=Jy,zi.rect=Mu,Na.push(zi),Zn?(Ie.verticalizable=!0,Vt+=("imageName"in Un?Jy.advance:si)*Un.scale+Nt):Vt+=Jy.advance*Un.scale+Nt,zo++}Na.length!==0&&(Rn=Math.max(Vt-Nt,Rn),qm(Na,0,Na.length-1,oa)),Vt=0,ja.lineOffset=Math.max(Io,(Gi-1)*si);const Pl=Dt*Gi+Io;_r+=Pl,vi=Math.max(Pl,vi),++co}const{horizontalAlign:qi,verticalAlign:sa}=Ty(Tt);(function(Qn,Gi,ja,Na,Io,la,zo,Pl,Ii){const Un=(Gi-ja)*Io;let _i=0;_i=la!==zo?-Pl*Na- -17:-Na*Ii*zo+.5*zo;for(const Zn of Qn)for(const zi of Zn.positionedGlyphs)zi.x+=Un,zi.y+=_i})(Ie.positionedLines,oa,qi,sa,Rn,vi,Dt,_r,xt.length),Ie.top+=-sa*_r,Ie.bottom=Ie.top+_r,Ie.left+=-qi*Rn,Ie.right=Ie.left+Rn})(Se,r,a,f,ie,b,E,C,B,k,G,J),!(function(Ie){for(const Ye of Ie)if(Ye.positionedGlyphs.length!==0)return!1;return!0})(de)&&Se}function Ty(o){let r=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function yb(o,r,a){const f=r.getMaxScale()*si,{maxImageWidth:p,maxImageHeight:x}=r.getMaxImageSize(o),b=Math.max(f,x*a);return{verticalLineContentWidth:Math.max(f,p*a),horizontalLineContentHeight:b}}function P_(o){switch(o){case"top":return 0;case"center":return .5;default:return 1}}function Vm(o,r,a){return!(o===_.az.horizontal||!r&&!nu(a)||r&&(ph(a)||(f=a,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function Jf(o,r,a,f,p,x){const b=x[o.fontStack],E=(function(k,N,B,G){if(k&&k.rect)return k;const Z=N[B.fontStack],J=Z&&Z[G];return J?{rect:null,metrics:J.metrics}:null})(b&&b[r],p,o,r);if(E===null)return null;let C;if(a)C=f.verticalLineContentWidth-o.scale*si;else{const k=P_(o.verticalAlign);C=(f.horizontalLineContentHeight-o.scale*si)*k}return{rect:E.rect,metrics:E.metrics,baselineOffset:C}}function Ey(o,r,a,f,p){const x=p[o.imageName];if(!x)return null;const b=x.paddedRect,E=x.displaySize,C={width:E[0],height:E[1],left:1,top:-3,advance:r?E[1]:E[0]};let k;if(r)k=f.verticalLineContentWidth-E[1]*o.scale;else{const N=P_(o.verticalAlign);k=(f.horizontalLineContentHeight-E[1]*o.scale)*N}return{rect:b,metrics:C,baselineOffset:k,imageOffset:(r?E[0]:E[1])*o.scale-si*a}}function qm(o,r,a,f){if(f===0)return;const p=o[a],x=(o[a].x+p.metrics.advance*p.scale)*f;for(let b=r;b<=a;b++)o[b].x-=x}function Ay(o,r,a){const{horizontalAlign:f,verticalAlign:p}=Ty(a),x=r[0]-o.displaySize[0]*f,b=r[1]-o.displaySize[1]*p;return{image:o,top:b,bottom:b+o.displaySize[1],left:x,right:x+o.displaySize[0]}}function xu(o){var r,a;let f=o.left,p=o.top,x=o.right-f,b=o.bottom-p;const E=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",C=(a=o.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",k=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(C==="proportional"){if(E==="stretchOnly"&&x/b<k||E==="proportional"){const N=Math.ceil(b*k);f*=N/x,x=N}}else if(E==="proportional"&&C==="stretchOnly"&&k!==0&&x/b>k){const N=Math.ceil(x/k);p*=N/b,b=N}return{x1:f,y1:p,x2:f+x,y2:p+b}}function Bs(o,r,a,f,p,x){const b=o.image;let E;if(b.content){const ie=b.content,ue=b.pixelRatio||1;E=[ie[0]/ue,ie[1]/ue,b.displaySize[0]-ie[2]/ue,b.displaySize[1]-ie[3]/ue]}const C=r.left*x,k=r.right*x;let N,B,G,Z;a==="width"||a==="both"?(Z=p[0]+C-f[3],B=p[0]+k+f[1]):(Z=p[0]+(C+k-b.displaySize[0])/2,B=Z+b.displaySize[0]);const J=r.top*x,te=r.bottom*x;return a==="height"||a==="both"?(N=p[1]+J-f[0],G=p[1]+te+f[2]):(N=p[1]+(J+te-b.displaySize[1])/2,G=N+b.displaySize[1]),{image:b,top:N,right:B,bottom:G,left:Z,collisionPadding:E}}Lt("ImagePosition",en),Lt("ImageAtlas",Um),_.az=void 0,(pc=_.az||(_.az={}))[pc.none=0]="none",pc[pc.horizontal=1]="horizontal",pc[pc.vertical=2]="vertical",pc[pc.horizontalOnly=3]="horizontalOnly";const Do=128,mc=32640;function My(o,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Ur(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:p}=a;let x=0;for(;x<f.length&&f[x]<=o;)x++;x=Math.max(0,x-1);let b=x;for(;b<f.length&&f[b]<o+1;)b++;b=Math.min(f.length-1,b);const E=f[x],C=f[b];return a.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:C,interpolationType:p}:{kind:"camera",minZoom:E,maxZoom:C,minSize:a.evaluate(new Ur(E)),maxSize:a.evaluate(new Ur(C)),interpolationType:p}}}function Gm(o,r,a){let f="never";const p=o.get(r);return p?f=p:o.get(a)&&(f="always"),f}const D_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sp(o,r,a,f,p,x,b,E,C,k,N,B,G){const Z=E?Math.min(mc,Math.round(E[0])):0,J=E?Math.min(mc,Math.round(E[1])):0;o.emplaceBack(r,a,Math.round(32*f),Math.round(32*p),x,b,(Z<<1)+(C?1:0),J,16*k,16*N,256*B,256*G)}function Cy(o,r,a){o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a)}function Py(o){for(const r of o.sections)if(Ds(r.text))return!0;return!1}class $m{constructor(r){this.layoutVertexArray=new we,this.indexArray=new Qe,this.programConfigurations=r,this.segments=new It,this.dynamicLayoutVertexArray=new je,this.opacityVertexArray=new et,this.hasVisibleVertices=!1,this.placedSymbolArray=new A}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,f,p){this.isEmpty()||(f&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,y_.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,np.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,D_,!0),this.opacityVertexBuffer.itemSize=1),(f||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Lt("SymbolBuffers",$m);class Zm{constructor(r,a,f){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new f,this.segments=new It,this.collisionVertexArray=new Ke}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,xy.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Lt("CollisionBuffers",Zm);class ed{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((b=>b.id)),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=My(this.zoom,a["text-size"]),this.iconSizeData=My(this.zoom,a["icon-size"]);const f=this.layers[0].layout,p=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=Gm(f,"text-overlap","text-allow-overlap")!=="never"||Gm(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((b=>_.az[b]))),this.stateDependentLayerIds=this.layers.filter((b=>b.isStateDependent())).map((b=>b.id)),this.sourceID=r.sourceID}createArrays(){this.text=new $m(new vl(this.layers,this.zoom,(r=>/^text/.test(r)))),this.icon=new $m(new vl(this.layers,this.zoom,(r=>/^icon/.test(r)))),this.glyphOffsetArray=new U,this.lineVertexArray=new V,this.symbolInstances=new R,this.textAnchorOffsets=new W}calculateGlyphDependencies(r,a,f,p,x){for(const b of r)if(a[b.codePointAt(0)]=!0,(f||p)&&x){const E=Xf[b];E&&(a[E.codePointAt(0)]=!0)}}populate(r,a,f){const p=this.layers[0],x=p.layout,b=x.get("text-font"),E=x.get("text-field"),C=x.get("icon-image"),k=(E.value.kind!=="constant"||E.value.value instanceof ni&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),N=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,B=x.get("symbol-sort-key");if(this.features=[],!k&&!N)return;const G=a.iconDependencies,Z=a.glyphDependencies,J=a.availableImages,te=new Ur(this.zoom);for(const{feature:ie,id:ue,index:ve,sourceLayerIndex:se}of r){const de=p._featureFilter.needGeometry,Se=Co(ie,de);if(!p._featureFilter.filter(te,Se,f))continue;let Ie,Ye;if(de||(Se.geometry=Ls(ie)),k){const ft=p.getValueAndResolveTokens("text-field",Se,f,J),xt=ni.factory(ft),Dt=this.hasRTLText=this.hasRTLText||Py(xt);(!Dt||eo.getRTLTextPluginStatus()==="unavailable"||Dt&&eo.isParsed())&&(Ie=uo(xt,p,Se))}if(N){const ft=p.getValueAndResolveTokens("icon-image",Se,f,J);Ye=ft instanceof Li?ft:Li.fromString(ft)}if(!Ie&&!Ye)continue;const ct=this.sortFeaturesByKey?B.evaluate(Se,{},f):void 0;if(this.features.push({id:ue,text:Ie,icon:Ye,index:ve,sourceLayerIndex:se,geometry:Se.geometry,properties:ie.properties,type:Zf.types[ie.type],sortKey:ct}),Ye&&(G[Ye.name]=!0),Ie){const ft=b.evaluate(Se,{},f).join(","),xt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.az.vertical)>=0;for(const Dt of Ie.sections)if(Dt.image)G[Dt.image.name]=!0;else{const Tt=ns(Ie.toString()),dt=Dt.fontStack||ft,it=Z[dt]=Z[dt]||{};this.calculateGlyphDependencies(Dt.text,it,xt,this.allowVerticalPlacement,Tt)}}}x.get("symbol-placement")==="line"&&(this.features=(function(ie){const ue={},ve={},se=[];let de=0;function Se(ft){se.push(ie[ft]),de++}function Ie(ft,xt,Dt){const Tt=ve[ft];return delete ve[ft],ve[xt]=Tt,se[Tt].geometry[0].pop(),se[Tt].geometry[0]=se[Tt].geometry[0].concat(Dt[0]),Tt}function Ye(ft,xt,Dt){const Tt=ue[xt];return delete ue[xt],ue[ft]=Tt,se[Tt].geometry[0].shift(),se[Tt].geometry[0]=Dt[0].concat(se[Tt].geometry[0]),Tt}function ct(ft,xt,Dt){const Tt=Dt?xt[0][xt[0].length-1]:xt[0][0];return`${ft}:${Tt.x}:${Tt.y}`}for(let ft=0;ft<ie.length;ft++){const xt=ie[ft],Dt=xt.geometry,Tt=xt.text?xt.text.toString():null;if(!Tt){Se(ft);continue}const dt=ct(Tt,Dt),it=ct(Tt,Dt,!0);if(dt in ve&&it in ue&&ve[dt]!==ue[it]){const Nt=Ye(dt,it,Dt),Ft=Ie(dt,it,se[Nt].geometry);delete ue[dt],delete ve[it],ve[ct(Tt,se[Ft].geometry,!0)]=Ft,se[Nt].geometry=null}else dt in ve?Ie(dt,it,Dt):it in ue?Ye(dt,it,Dt):(Se(ft),ue[dt]=de-1,ve[it]=de-1)}return se.filter((ft=>ft.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ie,ue)=>ie.sortKey-ue.sortKey))}update(r,a,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const f=this.lineVertexArray.length;if(r.segment!==void 0){let p=r.dist(a[r.segment+1]),x=r.dist(a[r.segment]);const b={};for(let E=r.segment+1;E<a.length;E++)b[E]={x:a[E].x,y:a[E].y,tileUnitDistanceFromAnchor:p},E<a.length-1&&(p+=a[E+1].dist(a[E]));for(let E=r.segment||0;E>=0;E--)b[E]={x:a[E].x,y:a[E].y,tileUnitDistanceFromAnchor:x},E>0&&(x+=a[E-1].dist(a[E]));for(let E=0;E<a.length;E++){const C=b[E];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(r,a,f,p,x,b,E,C,k,N,B,G){const Z=r.indexArray,J=r.layoutVertexArray,te=r.segments.prepareSegment(4*a.length,J,Z,this.canOverlap?b.sortKey:void 0),ie=this.glyphOffsetArray.length,ue=te.vertexLength,ve=this.allowVerticalPlacement&&E===_.az.vertical?Math.PI/2:0,se=b.text&&b.text.sections;for(let de=0;de<a.length;de++){const{tl:Se,tr:Ie,bl:Ye,br:ct,tex:ft,pixelOffsetTL:xt,pixelOffsetBR:Dt,minFontScaleX:Tt,minFontScaleY:dt,glyphOffset:it,isSDF:Nt,sectionIndex:Ft}=a[de],Ht=te.vertexLength,Vt=it[1];sp(J,C.x,C.y,Se.x,Vt+Se.y,ft.x,ft.y,f,Nt,xt.x,xt.y,Tt,dt),sp(J,C.x,C.y,Ie.x,Vt+Ie.y,ft.x+ft.w,ft.y,f,Nt,Dt.x,xt.y,Tt,dt),sp(J,C.x,C.y,Ye.x,Vt+Ye.y,ft.x,ft.y+ft.h,f,Nt,xt.x,Dt.y,Tt,dt),sp(J,C.x,C.y,ct.x,Vt+ct.y,ft.x+ft.w,ft.y+ft.h,f,Nt,Dt.x,Dt.y,Tt,dt),Cy(r.dynamicLayoutVertexArray,C,ve),Z.emplaceBack(Ht,Ht+2,Ht+1),Z.emplaceBack(Ht+1,Ht+2,Ht+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(it[0]),de!==a.length-1&&Ft===a[de+1].sectionIndex||r.programConfigurations.populatePaintArrays(J.length,b,b.index,{imagePositions:{},canonical:G,formattedSection:se&&se[Ft]})}r.placedSymbolArray.emplaceBack(C.x,C.y,ie,this.glyphOffsetArray.length-ie,ue,k,N,C.segment,f?f[0]:0,f?f[1]:0,p[0],p[1],E,0,!1,0,B)}_addCollisionDebugVertex(r,a,f,p,x,b){return a.emplaceBack(0,0),r.emplaceBack(f.x,f.y,p,x,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(r,a,f,p,x,b,E){const C=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),k=C.vertexLength,N=x.layoutVertexArray,B=x.collisionVertexArray,G=E.anchorX,Z=E.anchorY;this._addCollisionDebugVertex(N,B,b,G,Z,new M(r,a)),this._addCollisionDebugVertex(N,B,b,G,Z,new M(f,a)),this._addCollisionDebugVertex(N,B,b,G,Z,new M(f,p)),this._addCollisionDebugVertex(N,B,b,G,Z,new M(r,p)),C.vertexLength+=4;const J=x.indexArray;J.emplaceBack(k,k+1),J.emplaceBack(k+1,k+2),J.emplaceBack(k+2,k+3),J.emplaceBack(k+3,k),C.primitiveLength+=4}addDebugCollisionBoxes(r,a,f,p){for(let x=r;x<a;x++){const b=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,p?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Zm(Xe,lo.members,Ct),this.iconCollisionBox=new Zm(Xe,lo.members,Ct);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(r,a,f,p,x,b,E,C,k){const N={};for(let B=a;B<f;B++){const G=r.get(B);N.textBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},N.textFeatureIndex=G.featureIndex;break}for(let B=p;B<x;B++){const G=r.get(B);N.verticalTextBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},N.verticalTextFeatureIndex=G.featureIndex;break}for(let B=b;B<E;B++){const G=r.get(B);N.iconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},N.iconFeatureIndex=G.featureIndex;break}for(let B=C;B<k;B++){const G=r.get(B);N.verticalIconBox={x1:G.x1,y1:G.y1,x2:G.x2,y2:G.y2,anchorPointX:G.anchorPointX,anchorPointY:G.anchorPointY},N.verticalIconFeatureIndex=G.featureIndex;break}return N}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const f=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const f=r.placedSymbolArray.get(a),p=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<p;x+=4)r.indexArray.emplaceBack(x,x+2,x+1),r.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),f=Math.cos(r),p=[],x=[],b=[];for(let E=0;E<this.symbolInstances.length;++E){b.push(E);const C=this.symbolInstances.get(E);p.push(0|Math.round(a*C.anchorX+f*C.anchorY)),x.push(C.featureIndex)}return b.sort(((E,C)=>p[E]-p[C]||x[C]-x[E])),b}addToSortKeyRanges(r,a){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===a?f.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const f=this.symbolInstances.get(a);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((p,x,b)=>{p>=0&&b.indexOf(p)===x&&this.addIndicesForPlacedSymbol(this.text,p)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Hm,Wm;Lt("SymbolBucket",ed,{omit:["layers","collisionBoxArray","features","compareText"]}),ed.MAX_GLYPHS=65535,ed.addDynamicAttributes=Cy;var Dy={get paint(){return Wm=Wm||new Bn({"icon-opacity":new Ut(Me.paint_symbol["icon-opacity"]),"icon-color":new Ut(Me.paint_symbol["icon-color"]),"icon-halo-color":new Ut(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ut(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ut(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new jt(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ut(Me.paint_symbol["text-opacity"]),"text-color":new Ut(Me.paint_symbol["text-color"],{runtimeType:_a,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Ut(Me.paint_symbol["text-halo-color"]),"text-halo-width":new Ut(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new Ut(Me.paint_symbol["text-halo-blur"]),"text-translate":new jt(Me.paint_symbol["text-translate"]),"text-translate-anchor":new jt(Me.paint_symbol["text-translate-anchor"])})},get layout(){return Hm=Hm||new Bn({"symbol-placement":new jt(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new jt(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ut(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ut(Me.layout_symbol["icon-size"]),"icon-text-fit":new jt(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ut(Me.layout_symbol["icon-image"]),"icon-rotate":new Ut(Me.layout_symbol["icon-rotate"]),"icon-padding":new Ut(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new jt(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new Ut(Me.layout_symbol["icon-offset"]),"icon-anchor":new Ut(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt(Me.layout_symbol["text-rotation-alignment"]),"text-field":new Ut(Me.layout_symbol["text-field"]),"text-font":new Ut(Me.layout_symbol["text-font"]),"text-size":new Ut(Me.layout_symbol["text-size"]),"text-max-width":new Ut(Me.layout_symbol["text-max-width"]),"text-line-height":new jt(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new Ut(Me.layout_symbol["text-letter-spacing"]),"text-justify":new Ut(Me.layout_symbol["text-justify"]),"text-radial-offset":new Ut(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt(Me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ut(Me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ut(Me.layout_symbol["text-anchor"]),"text-max-angle":new jt(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new jt(Me.layout_symbol["text-writing-mode"]),"text-rotate":new Ut(Me.layout_symbol["text-rotate"]),"text-padding":new jt(Me.layout_symbol["text-padding"]),"text-keep-upright":new jt(Me.layout_symbol["text-keep-upright"]),"text-transform":new Ut(Me.layout_symbol["text-transform"]),"text-offset":new Ut(Me.layout_symbol["text-offset"]),"text-allow-overlap":new jt(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new jt(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new jt(Me.layout_symbol["text-ignore-placement"]),"text-optional":new jt(Me.layout_symbol["text-optional"])})}};class O_{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Fr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Lt("FormatSectionOverride",O_,{omit:["defaultValue"]});class gc extends wn{constructor(r,a){super(r,Dy,a)}recalculate(r,a){if(super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const p=[];for(const x of f)p.indexOf(x)<0&&p.push(x);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,a,f,p){const x=this.layout.get(r).evaluate(a,{},f,p),b=this._unevaluatedLayout._values[r];return b.isDataDriven()||hl(b.value)||!x?x:(function(E,C){return C.replace(/{([^{}]+)}/g,((k,N)=>E&&N in E?String(E[N]):""))})(a.properties,x)}createBucket(r){return new ed(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Dy.paint.overridableProperties){if(!gc.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),f=new O_(a),p=new Cf(f,a.property.specification);let x=null;x=a.value.kind==="constant"||a.value.kind==="source"?new Ui("source",p):new fl("composite",p,a.value.zoomStops),this.paint._values[r]=new Pa(a.property,x,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,f){return!(!this.layout||a.isDataDriven()||f.isDataDriven())&&gc.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const f=r.get("text-field"),p=Dy.paint.properties[a];let x=!1;const b=E=>{for(const C of E)if(p.overrides&&p.overrides.hasOverride(C))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ni)b(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const E=k=>{x||(k instanceof ba&&pn(k.value)===Fo?b(k.value.sections):k instanceof Yc?b(k.sections):k.eachChild(E))},C=f.value;C._styleExpression&&E(C._styleExpression.expression)}return x}}let I_;var z_={get paint(){return I_=I_||new Bn({"background-color":new jt(Me.paint_background["background-color"]),"background-pattern":new oc(Me.paint_background["background-pattern"]),"background-opacity":new jt(Me.paint_background["background-opacity"])})}};class Pr extends wn{constructor(r,a){super(r,z_,a)}}class Oy extends wn{constructor(r,a){super(r,{},a),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Xm{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Iy={once:!0},Ym=63710088e-1;class Tl{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Tl(Gt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,f=this.lat*a,p=r.lat*a,x=Math.sin(f)*Math.sin(p)+Math.cos(f)*Math.cos(p)*Math.cos((r.lng-this.lng)*a);return Ym*Math.acos(Math.min(x,1))}static convert(r){if(r instanceof Tl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Tl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Tl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const td=2*Math.PI*Ym;function lp(o){return td*Math.cos(o*Math.PI/180)}function k_(o){return(180+o)/360}function zy(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function R_(o,r){return o/lp(r)}function L_(o){return 360*o-180}function up(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function ky(o,r){return o*lp(up(r))}class Zr{constructor(r,a,f=0){this.x=+r,this.y=+a,this.z=+f}static fromLngLat(r,a=0){const f=Tl.convert(r);return new Zr(k_(f.lng),zy(f.lat),R_(a,f.lat))}toLngLat(){return new Tl(L_(this.x),up(this.y))}toAltitude(){return ky(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/td*(r=up(this.y),1/Math.cos(r*Math.PI/180));var r}}function Km(o,r,a){var f=2*Math.PI*6378137/256/Math.pow(2,a);return[o*f-2*Math.PI*6378137/2,r*f-2*Math.PI*6378137/2]}class Ai{constructor(r,a,f){if(!(function(p,x,b){return!(p<0||p>25||b<0||b>=Math.pow(2,p)||x<0||x>=Math.pow(2,p))})(r,a,f))throw new Error(`x=${a}, y=${f}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=a,this.y=f,this.key=rd(0,r,r,a,f)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a,f){const p=(b=this.y,E=this.z,C=Km(256*(x=this.x),256*(b=Math.pow(2,E)-b-1),E),k=Km(256*(x+1),256*(b+1),E),C[0]+","+C[1]+","+k[0]+","+k[1]);var x,b,E,C,k;const N=(function(B,G,Z){let J,te="";for(let ie=B;ie>0;ie--)J=1<<ie-1,te+=(G&J?1:0)+(Z&J?2:0);return te})(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,p)}isChildOf(r){const a=this.z-r.z;return a>0&&r.x===this.x>>a&&r.y===this.y>>a}getTilePoint(r){const a=Math.pow(2,this.z);return new M((r.x*a-this.x)*pt,(r.y*a-this.y)*pt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class j_{constructor(r,a){this.wrap=r,this.canonical=a,this.key=rd(r,a.z,a.z,a.x,a.y)}}class ka{constructor(r,a,f,p,x){if(this.terrainRttPosMatrix32f=null,r<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${f}`);this.overscaledZ=r,this.wrap=a,this.canonical=new Ai(f,+p,+x),this.key=rd(a,r,f,p,x)}clone(){return new ka(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-r;return r>this.canonical.z?new ka(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ka(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(r,a){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-r;return r>this.canonical.z?rd(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y):rd(this.wrap*+a,r,r,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(r){if(r.wrap!==this.wrap||this.overscaledZ-r.overscaledZ<=0)return!1;if(r.overscaledZ===0)return this.overscaledZ>0;const a=this.canonical.z-r.canonical.z;return!(a<0)&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new ka(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,f=2*this.canonical.x,p=2*this.canonical.y;return[new ka(a,this.wrap,a,f,p),new ka(a,this.wrap,a,f+1,p),new ka(a,this.wrap,a,f,p+1),new ka(a,this.wrap,a,f+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new ka(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new ka(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new j_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Zr(r.x-this.wrap,r.y))}normalizeCoordinates(r,a,f=8192){if(r>=0&&r<f&&a>=0&&a<f)return{tileID:this,x:r,y:a};const p=Math.floor(r/f),x=Math.floor(a/f),b=r-p*f,E=a-x*f,C=this.canonical.z,k=1<<C,N=this.canonical.y+x;if(N<0||N>=k)return null;let B=this.canonical.x+p,G=this.wrap;return B<0?(G-=Math.ceil(-B/k),B=(B%k+k)%k):B>=k&&(G+=Math.floor(B/k),B%=k),{tileID:new ka(this.overscaledZ,G,C,B,N),x:b,y:E}}}function rd(o,r,a,f,p){(o*=2)<0&&(o=-1*o-1);const x=1<<a;return(x*x*o+x*p+f).toString(36)+a.toString(36)+r.toString(36)}function cp(o,r){return r?o.properties[r]:o.id}function Ry(o,r){const a={id:o.id};if(r.removeAllProperties&&(delete o.removeProperties,delete o.addOrUpdateProperties,delete r.removeProperties),r.removeProperties)for(const f of r.removeProperties){const p=o.addOrUpdateProperties.findIndex((x=>x.key===f));p>-1&&o.addOrUpdateProperties.splice(p,1)}return(o.removeAllProperties||r.removeAllProperties)&&(a.removeAllProperties=!0),(o.removeProperties||r.removeProperties)&&(a.removeProperties=[...o.removeProperties||[],...r.removeProperties||[]]),(o.addOrUpdateProperties||r.addOrUpdateProperties)&&(a.addOrUpdateProperties=[...o.addOrUpdateProperties||[],...r.addOrUpdateProperties||[]]),(o.newGeometry||r.newGeometry)&&(a.newGeometry=r.newGeometry||o.newGeometry),a}function hp(o){var r,a;if(!o)return{};const f={};return f.removeAll=o.removeAll,f.remove=new Set(o.remove||[]),f.add=new Map((r=o.add)===null||r===void 0?void 0:r.map((p=>[p.id,p]))),f.update=new Map((a=o.update)===null||a===void 0?void 0:a.map((p=>[p.id,p]))),f}Lt("CanonicalTileID",Ai),Lt("OverscaledTileID",ka,{omit:["terrainRttPosMatrix32f"]});class yc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(r){return this.minX=Math.min(this.minX,r.x),this.minY=Math.min(this.minY,r.y),this.maxX=Math.max(this.maxX,r.x),this.maxY=Math.max(this.maxY,r.y),this}expandBy(r){return this.minX-=r,this.minY-=r,this.maxX+=r,this.maxY+=r,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(r){return this.expandBy(-r)}map(r){const a=new yc;return a.extend(r(new M(this.minX,this.minY))),a.extend(r(new M(this.maxX,this.minY))),a.extend(r(new M(this.minX,this.maxY))),a.extend(r(new M(this.maxX,this.maxY))),a}static fromPoints(r){const a=new yc;for(const f of r)a.extend(f);return a}contains(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(r){return!this.empty()&&!r.empty()&&r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY}intersects(r){return!this.empty()&&!r.empty()&&r.minX<=this.maxX&&r.maxX>=this.minX&&r.minY<=this.maxY&&r.maxY>=this.minY}}class Ly{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const f=r[a];this._stringToNumber[f]=a,this._numberToString[a]=f}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Qm{constructor(r,a,f,p,x){this.type="Feature",this._vectorTileFeature=r,this._x=f,this._y=p,this._z=a,this.properties=r.properties,this.id=x}projectPoint(r,a,f,p){return[360*(r.x+a)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(r.y+f)/p)*Math.PI))-90]}projectLine(r,a,f,p){return r.map((x=>this.projectPoint(x,a,f,p)))}get geometry(){if(this._geometry)return this._geometry;const r=this._vectorTileFeature,a=r.extent*Math.pow(2,this._z),f=r.extent*this._x,p=r.extent*this._y,x=r.loadGeometry();switch(r.type){case 1:{const b=[];for(const C of x)b.push(C[0]);const E=this.projectLine(b,f,p,a);this._geometry=b.length===1?{type:"Point",coordinates:E[0]}:{type:"MultiPoint",coordinates:E};break}case 2:{const b=x.map((E=>this.projectLine(E,f,p,a)));this._geometry=b.length===1?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b};break}case 3:{const b=m_(x),E=[];for(const C of b)E.push(C.map((k=>this.projectLine(k,f,p,a))));this._geometry=E.length===1?{type:"Polygon",coordinates:E[0]}:{type:"MultiPolygon",coordinates:E};break}default:throw new Error(`unknown feature type: ${r.type}`)}return this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&a!=="_x"&&a!=="_y"&&a!=="_z"&&(r[a]=this[a]);return r}}class vc{_name;dataBuffer;nullabilityBuffer;_size;constructor(r,a,f){this._name=r,this.dataBuffer=a,typeof f=="number"?this._size=f:(this.nullabilityBuffer=f,this._size=f.size())}getValue(r){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(r)?null:this.getValueFromBuffer(r)}has(r){return this.nullabilityBuffer&&this.nullabilityBuffer.get(r)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Jm extends vc{}class eg extends Jm{getValueFromBuffer(r){return this.dataBuffer[r]}}class jy extends Jm{getValueFromBuffer(r){return this.dataBuffer[r]}}class Ny extends vc{delta;constructor(r,a,f,p){super(r,a,p),this.delta=f}}class By extends Ny{constructor(r,a,f,p){super(r,Int32Array.of(a),f,p)}getValueFromBuffer(r){return this.dataBuffer[0]+r*this.delta}}class Fy extends vc{constructor(r,a,f){super(r,Int32Array.of(a),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}class _c{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(r,a,f,p,x=4096){this._name=r,this._geometryVector=a,this._idVector=f,this._propertyVectors=p,this._extent=x}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(r){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((a=>[a.name,a])))),this.propertyVectorsMap.get(r)}*[Symbol.iterator](){const r=this.geometryVector[Symbol.iterator]();let a=0;for(;a<this.numFeatures;){let f;this.idVector&&(f=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(a)):this.idVector.getValue(a));const p=r?.next().value,x={};for(const b of this.propertyVectors){if(!b)continue;const E=b.name,C=b.getValue(a);C!==null&&(x[E]=C)}a++,yield{id:f,geometry:p,properties:x}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const r=[],a=this.geometryVector.getGeometries();for(let f=0;f<this.numFeatures;f++){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(f)):this.idVector.getValue(f));const x={coordinates:a[f],type:this.geometryVector.geometryType(f)},b={};for(const E of this.propertyVectors){if(!E)continue;const C=E.name,k=E.getValue(f);k!==null&&(b[C]=k)}r.push({id:p,geometry:x,properties:b})}return r}containsMaxSaveIntegerValues(r){return r instanceof eg||r instanceof Fy&&r instanceof By||r instanceof jy}}class N_{value;constructor(r){this.value=r}get(){return this.value}set(r){this.value=r}increment(){return this.value++}add(r){this.value+=r}}var qr,El,Di,Fs,xc,na,Tn,yi,Oo,Ra;function Oi(o,r,a){const f=new Int32Array(a);let p=0,x=r.get();for(let b=0;b<f.length;b++){let E=o[x++],C=127&E;E<128||(E=o[x++],C|=(127&E)<<7,E<128||(E=o[x++],C|=(127&E)<<14,E<128||(E=o[x++],C|=(127&E)<<21,E<128||(E=o[x++],C|=(15&E)<<28)))),f[p++]=C}return r.set(x),f}function tg(o,r,a){const f=new BigInt64Array(a);for(let p=0;p<f.length;p++)f[p]=B_(o,r);return f}function B_(o,r){let a=0n,f=0,p=r.get();for(;p<o.length;){const x=o[p++];if(a|=BigInt(127&x)<<BigInt(f),!(128&x))break;if(f+=7,f>=64)throw new Error("Varint too long")}return r.set(p),a}function fp(o,r){let a,f;return f=o[r.get()],r.increment(),a=127&f,f<128?a:(f=o[r.get()],r.increment(),a|=(127&f)<<7,f<128?a:(f=o[r.get()],r.increment(),a|=(127&f)<<14,f<128?a:(f=o[r.get()],r.increment(),a|=(127&f)<<21,f<128?a:(f=o[r.get()],a|=(15&f)<<28,(function(p,x,b){let E,C;if(C=x[b.get()],b.increment(),E=(112&C)>>4,C<128||(C=x[b.get()],b.increment(),E|=(127&C)<<3,C<128)||(C=x[b.get()],b.increment(),E|=(127&C)<<10,C<128)||(C=x[b.get()],b.increment(),E|=(127&C)<<17,C<128)||(C=x[b.get()],b.increment(),E|=(127&C)<<24,C<128)||(C=x[b.get()],b.increment(),E|=(1&C)<<31,C<128))return 4294967296*E+(p>>>0);throw new Error("Expected varint not more than 10 bytes")})(a,o,r)))))}function kr(o){return o>>>1^-(1&o)}function La(o){return o>>1n^-(1n&o)}function bu(o){return o%2==1?(o+1)/-2:o/2}function Al(o,r,a){if(a===void 0){a=0;for(let x=0;x<r;x++)a+=o[x]}const f=new Int32Array(a);let p=0;for(let x=0;x<r;x++){const b=o[x];f.fill(o[x+r],p,p+b),p+=b}return f}function F_(o,r,a){if(a===void 0){a=0;for(let x=0;x<r;x++)a+=Number(o[x])}const f=new BigInt64Array(a);let p=0;for(let x=0;x<r;x++){const b=Number(o[x]);f.fill(o[x+r],p,p+b),p+=b}return f}function U_(o,r,a){const f=new Float64Array(a);let p=0;for(let x=0;x<r;x++){const b=o[x];f.fill(o[x+r],p,p+b),p+=b}return f}function zh(o){const r=o.length/4*4;let a=1;if(r>=4)for(let f=o[0];a<r-4;a+=4)f=o[a]+=f,f=o[a+1]+=f,f=o[a+2]+=f,f=o[a+3]+=f;for(;a!=o.length;)o[a]+=o[a-1],++a}(function(o){o.NONE="NONE",o.DELTA="DELTA",o.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",o.RLE="RLE",o.MORTON="MORTON",o.PDE="PDE"})(qr||(qr={})),(function(o){o.NONE="NONE",o.FAST_PFOR="FAST_PFOR",o.VARINT="VARINT",o.ALP="ALP"})(El||(El={})),(function(o){o.PRESENT="PRESENT",o.DATA="DATA",o.OFFSET="OFFSET",o.LENGTH="LENGTH"})(Di||(Di={}));class rg{_dictionaryType;_offsetType;_lengthType;constructor(r,a,f){this._dictionaryType=r,this._offsetType=a,this._lengthType=f}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function ia(o,r){const a=(function(f,p){const x=f[p.get()],b=Object.values(Di)[x>>4];let E=null;switch(b){case Di.DATA:E=new rg(Object.values(Fs)[15&x]);break;case Di.OFFSET:E=new rg(null,Object.values(xc)[15&x]);break;case Di.LENGTH:E=new rg(null,null,Object.values(na)[15&x])}p.increment();const C=f[p.get()],k=Object.values(qr)[C>>5],N=Object.values(qr)[C>>2&7],B=Object.values(El)[3&C];p.increment();const G=Oi(f,p,2),Z=G[0];return{physicalStreamType:b,logicalStreamType:E,logicalLevelTechnique1:k,logicalLevelTechnique2:N,physicalLevelTechnique:B,numValues:Z,byteLength:G[1],decompressedCount:Z}})(o,r);return a.logicalLevelTechnique1===qr.MORTON?(function(f,p,x){const b=Oi(p,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:f.decompressedCount,numBits:b[0],coordinateShift:b[1]}})(a,o,r):qr.RLE!==a.logicalLevelTechnique1&&qr.RLE!==a.logicalLevelTechnique2||El.NONE===a.physicalLevelTechnique?a:(function(f,p,x){const b=Oi(p,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:b[1],runs:b[0],numRleValues:b[1]}})(a,o,r)}(function(o){o.NONE="NONE",o.SINGLE="SINGLE",o.SHARED="SHARED",o.VERTEX="VERTEX",o.MORTON="MORTON",o.FSST="FSST"})(Fs||(Fs={})),(function(o){o.VERTEX="VERTEX",o.INDEX="INDEX",o.STRING="STRING",o.KEY="KEY"})(xc||(xc={})),(function(o){o.VAR_BINARY="VAR_BINARY",o.GEOMETRIES="GEOMETRIES",o.PARTS="PARTS",o.RINGS="RINGS",o.TRIANGLES="TRIANGLES",o.SYMBOL="SYMBOL",o.DICTIONARY="DICTIONARY"})(na||(na={})),(function(o){o[o.FLAT=0]="FLAT",o[o.CONST=1]="CONST",o[o.SEQUENCE=2]="SEQUENCE",o[o.DICTIONARY=3]="DICTIONARY",o[o.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Tn||(Tn={}));class Us{values;_size;constructor(r,a){this.values=r,this._size=a}get(r){const a=Math.floor(r/8);return(this.values[a]>>r%8&1)==1}set(r,a){const f=Math.floor(r/8);this.values[f]=this.values[f]|(a?1:0)<<r%8}getInt(r){const a=Math.floor(r/8);return this.values[a]>>r%8&1}size(){return this._size}getBuffer(){return this.values}}function ng(o,r,a){if(!r)return o;const f=r.size(),p=new o.constructor(f);let x=0;for(let b=0;b<f;b++)p[b]=r.get(b)?o[x++]:a;return p}function aa(o,r,a,f,p,x){return(function(b,E,C,k,N){switch(E.logicalLevelTechnique1){case qr.DELTA:if(E.logicalLevelTechnique2===qr.RLE){const B=E;if(!N)return(function(G,Z,J){const te=new Int32Array(J);let ie=0,ue=0;for(let ve=0;ve<Z;ve++){const se=G[ve],de=kr(G[ve+Z]);for(let Se=0;Se<se;Se++)ue+=de,te[ie++]=ue}return te})(b,B.runs,B.numRleValues);b=Al(b,B.runs,B.numRleValues)}(function(B){B[0]=kr(B[0]);const G=B.length/4*4;let Z=1;if(G>=4)for(;Z<G-4;Z+=4){const J=B[Z+1],te=B[Z+2],ie=B[Z+3];B[Z]=kr(B[Z])+B[Z-1],B[Z+1]=kr(J)+B[Z],B[Z+2]=kr(te)+B[Z+1],B[Z+3]=kr(ie)+B[Z+2]}for(;Z!=B.length;++Z)B[Z]=kr(B[Z])+B[Z-1]})(b);break;case qr.RLE:b=(function(B,G,Z){return Z?(function(J,te,ie){if(ie===void 0){ie=0;for(let se=0;se<te;se++)ie+=J[se]}const ue=new Int32Array(ie);let ve=0;for(let se=0;se<te;se++){const de=J[se];let Se=J[se+te];Se=kr(Se),ue.fill(Se,ve,ve+de),ve+=de}return ue})(B,G.runs,G.numRleValues):Al(B,G.runs,G.numRleValues)})(b,E,C);break;case qr.MORTON:zh(b);break;case qr.COMPONENTWISE_DELTA:(function(B){if(B.length<2)return;B[0]=kr(B[0]),B[1]=kr(B[1]);const G=B.length/4*4;let Z=2;if(G>=4)for(;Z<G-4;Z+=4){const J=B[Z+1],te=B[Z+2],ie=B[Z+3];B[Z]=kr(B[Z])+B[Z-2],B[Z+1]=kr(J)+B[Z-1],B[Z+2]=kr(te)+B[Z],B[Z+3]=kr(ie)+B[Z+1]}for(;Z!=B.length;Z+=2)B[Z]=kr(B[Z])+B[Z-2],B[Z+1]=kr(B[Z+1])+B[Z-1]})(b);break;case qr.NONE:C&&(function(B){for(let G=0;G<B.length;G++)B[G]=kr(B[G])})(b);break;default:throw new Error(`The specified Logical level technique is not supported: ${E.logicalLevelTechnique1}`)}return N?ng(b,N,0):b})(ig(o,r,a),a,f,0,x)}function bc(o,r,a){return(function(f,p){if(p.logicalLevelTechnique1===qr.DELTA&&p.logicalLevelTechnique2===qr.NONE)return(function(x){const b=new Int32Array(x.length+1);b[0]=0,b[1]=kr(x[0]);let E=b[1];for(let C=2;C!=b.length;++C)E+=kr(x[C-1]),b[C]=b[C-1]+E;return new Uint32Array(b)})(f);if(p.logicalLevelTechnique1===qr.RLE&&p.logicalLevelTechnique2===qr.NONE)return(function(x,b,E){const C=new Int32Array(E+1);C[0]=0;let k=1,N=C[0];for(let B=0;B<b;B++){const G=x[B],Z=x[B+b];for(let J=k;J<k+G;J++)C[J]=Z+N,N=C[J];k+=G}return new Uint32Array(C)})(f,p.runs,p.numRleValues);if(p.logicalLevelTechnique1===qr.NONE&&p.logicalLevelTechnique2===qr.NONE){(function(b){let E=0;for(let C=0;C<b.length;C++)b[C]+=E,E=b[C]})(f);const x=new Uint32Array(p.numValues+1);return x[0]=0,x.set(f,1),x}if(p.logicalLevelTechnique1===qr.DELTA&&p.logicalLevelTechnique2===qr.RLE){const x=(function(b,E,C){const k=new Int32Array(C+1);k[0]=0;let N=1,B=k[0];for(let G=0;G<E;G++){const Z=b[G];let J=b[G+E];J=kr(J);for(let te=N;te<N+Z;te++)k[te]=J+B,B=k[te];N+=Z}return new Uint32Array(k)})(f,p.runs,p.numRleValues);return zh(x),x}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(ig(o,r,a),a)}function ig(o,r,a){const f=a.physicalLevelTechnique;if(f===El.FAST_PFOR)return(function(){throw new Error("FastPFor is not implemented yet.")})();if(f===El.VARINT)return Oi(o,r,a.numValues);if(f===El.NONE){const p=r.get();r.add(a.byteLength);const x=o.subarray(p,r.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function Uy(o,r,a,f){const p=ig(o,r,a);if(p.length===1){const x=p[0];return f?kr(x):x}return f?(function(x){return kr(x[1])})(p):(function(x){return x[1]})(p)}function Vy(o,r,a){return(function(f){if(f.length==2){const p=kr(f[1]);return[p,p]}return[kr(f[2]),kr(f[3])]})(ig(o,r,a))}function kh(o,r,a){return(function(f){if(f.length==2){const p=La(f[1]);return[p,p]}return[La(f[2]),La(f[3])]})(tg(o,r,a.numValues))}function nd(o,r,a,f,p){return(function(x,b,E,C){switch(b.logicalLevelTechnique1){case qr.DELTA:if(b.logicalLevelTechnique2===qr.RLE){const k=b;if(!C)return(function(N,B,G){const Z=new BigInt64Array(G);let J=0,te=0n;for(let ie=0;ie<B;ie++){const ue=Number(N[ie]),ve=La(N[ie+B]);for(let se=0;se<ue;se++)te+=ve,Z[J++]=te}return Z})(x,k.runs,k.numRleValues);x=F_(x,k.runs,k.numRleValues)}(function(k){k[0]=La(k[0]);const N=k.length/4*4;let B=1;if(N>=4)for(;B<N-4;B+=4){const G=k[B+1],Z=k[B+2],J=k[B+3];k[B]=La(k[B])+k[B-1],k[B+1]=La(G)+k[B],k[B+2]=La(Z)+k[B+1],k[B+3]=La(J)+k[B+2]}for(;B!=k.length;++B)k[B]=La(k[B])+k[B-1]})(x);break;case qr.RLE:x=(function(k,N,B){return B?(function(G,Z,J){if(J===void 0){J=0;for(let ue=0;ue<Z;ue++)J+=Number(G[ue])}const te=new BigInt64Array(J);let ie=0;for(let ue=0;ue<Z;ue++){const ve=Number(G[ue]);let se=G[ue+Z];se=La(se),te.fill(se,ie,ie+ve),ie+=ve}return te})(k,N.runs,N.numRleValues):F_(k,N.runs,N.numRleValues)})(x,b,E);break;case qr.NONE:E&&(function(k){for(let N=0;N<k.length;N++)k[N]=La(k[N])})(x);break;default:throw new Error(`The specified Logical level technique is not supported: ${b.logicalLevelTechnique1}`)}return C?ng(x,C,0n):x})(tg(o,r,a.numValues),a,f,p)}function qy(o,r,a,f){const p=tg(o,r,a.numValues);if(p.length===1){const x=p[0];return f?La(x):x}return f?(function(x){return La(x[1])})(p):(function(x){return x[1]})(p)}function ag(o,r,a,f){const p=o.logicalLevelTechnique1;if(p===qr.RLE)return o.runs===1?Tn.CONST:Tn.FLAT;if(p!==qr.DELTA||o.logicalLevelTechnique2!==qr.RLE)return o.numValues===1?Tn.CONST:Tn.FLAT;const x=r instanceof Us?r.size():r;if(o.numRleValues!==x)return Tn.FLAT;if(o.runs===1)return Tn.SEQUENCE;if(o.runs!==2)return o.numValues===1?Tn.CONST:Tn.FLAT;const b=f.get();let E;if(o.physicalLevelTechnique===El.VARINT)E=Oi(a,f,4);else{const C=f.get();E=new Int32Array(a.buffer,a.byteOffset+C,4)}return f.set(b),E[2]===2&&E[3]===2?Tn.SEQUENCE:o.numValues===1?Tn.CONST:Tn.FLAT}class Rh extends Jm{getValueFromBuffer(r){return this.dataBuffer[r]}}class id extends Ny{constructor(r,a,f,p){super(r,BigInt64Array.of(a),f,p)}getValueFromBuffer(r){return this.dataBuffer[0]+BigInt(r)*this.delta}}class Lh{_geometryOffsets;_partOffsets;_ringOffsets;constructor(r,a,f){this._geometryOffsets=r,this._partOffsets=a,this._ringOffsets=f}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function ad(o,r,a){return{x:og(o,r)-a,y:og(o>>1,r)-a}}function og(o,r){let a=0;for(let f=0;f<r;f++)a|=(o&1<<2*f)>>f;return a}(function(o){o[o.POINT=0]="POINT",o[o.LINESTRING=1]="LINESTRING",o[o.POLYGON=2]="POLYGON",o[o.MULTIPOINT=3]="MULTIPOINT",o[o.MULTILINESTRING=4]="MULTILINESTRING",o[o.MULTIPOLYGON=5]="MULTIPOLYGON"})(yi||(yi={})),(function(o){o[o.POINT=0]="POINT",o[o.LINESTRING=1]="LINESTRING",o[o.POLYGON=2]="POLYGON"})(Oo||(Oo={})),(function(o){o[o.MORTON=0]="MORTON",o[o.VEC_2=1]="VEC_2",o[o.VEC_3=2]="VEC_3"})(Ra||(Ra={}));class Gy{createPoint(r){return[[r]]}createMultiPoint(r){return r.map((a=>[a]))}createLineString(r){return[r]}createMultiLineString(r){return r}createPolygon(r,a){return[r].concat(a)}createMultiPolygon(r){return r.flat()}}function dp(o){const r=new Array(o.numGeometries);let a=1,f=1,p=1,x=0;const b=new Gy;let E=0,C=0;const k=o.mortonSettings,N=o.topologyVector,B=N.geometryOffsets,G=N.partOffsets,Z=N.ringOffsets,J=o.vertexOffsets,te=o.containsPolygonGeometry(),ie=o.vertexBuffer;for(let ue=0;ue<o.numGeometries;ue++){const ve=o.geometryType(ue);if(ve===yi.POINT){if(J&&J.length!==0)if(o.vertexBufferType===Ra.VEC_2){const se=2*J[C++],de=new M(ie[se],ie[se+1]);r[x++]=b.createPoint(de)}else{const se=ad(ie[J[C++]],k.numBits,k.coordinateShift),de=new M(se.x,se.y);r[x++]=b.createPoint(de)}else{const se=new M(ie[E++],ie[E++]);r[x++]=b.createPoint(se)}B&&p++,G&&a++,Z&&f++}else if(ve===yi.MULTIPOINT){const se=B[p]-B[p-1];p++;const de=new Array(se);if(J&&J.length!==0){for(let Se=0;Se<se;Se++){const Ie=2*J[C++];de[Se]=new M(ie[Ie],ie[Ie+1])}r[x++]=b.createMultiPoint(de)}else{for(let Se=0;Se<se;Se++){const Ie=ie[E++],Ye=ie[E++];de[Se]=new M(Ie,Ye)}r[x++]=b.createMultiPoint(de)}}else if(ve===yi.LINESTRING){let se,de=0;te?(de=Z[f]-Z[f-1],f++):de=G[a]-G[a-1],a++,J&&J.length!==0?(se=o.vertexBufferType===Ra.VEC_2?$y(ie,J,C,de,!1):gp(ie,J,C,de,!1,k),C+=de):(se=lg(ie,E,de,!1),E+=2*de),r[x++]=b.createLineString(se),B&&p++}else if(ve===yi.POLYGON){const se=G[a]-G[a-1];a++;const de=new Array(se-1);let Se=Z[f]-Z[f-1];if(f++,J&&J.length!==0){const Ie=o.vertexBufferType===Ra.VEC_2?mp(ie,J,C,Se):sg(ie,J,C,Se,0,k);C+=Se;for(let Ye=0;Ye<de.length;Ye++)Se=Z[f]-Z[f-1],f++,de[Ye]=o.vertexBufferType===Ra.VEC_2?mp(ie,J,C,Se):sg(ie,J,C,Se,0,k),C+=Se;r[x++]=b.createPolygon(Ie,de)}else{const Ie=pp(ie,E,Se);E+=2*Se;for(let Ye=0;Ye<de.length;Ye++)Se=Z[f]-Z[f-1],f++,de[Ye]=pp(ie,E,Se),E+=2*Se;r[x++]=b.createPolygon(Ie,de)}B&&p++}else if(ve===yi.MULTILINESTRING){const se=B[p]-B[p-1];p++;const de=new Array(se);if(J&&J.length!==0){for(let Se=0;Se<se;Se++){let Ie=0;te?(Ie=Z[f]-Z[f-1],f++):Ie=G[a]-G[a-1],a++;const Ye=o.vertexBufferType===Ra.VEC_2?$y(ie,J,C,Ie,!1):gp(ie,J,C,Ie,!1,k);de[Se]=Ye,C+=Ie}r[x++]=b.createMultiLineString(de)}else{for(let Se=0;Se<se;Se++){let Ie=0;te?(Ie=Z[f]-Z[f-1],f++):Ie=G[a]-G[a-1],a++,de[Se]=lg(ie,E,Ie,!1),E+=2*Ie}r[x++]=b.createMultiLineString(de)}}else{if(ve!==yi.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const se=B[p]-B[p-1];p++;const de=new Array(se);let Se=0;if(J&&J.length!==0){for(let Ie=0;Ie<se;Ie++){const Ye=G[a]-G[a-1];a++;const ct=new Array(Ye-1);Se=Z[f]-Z[f-1],f++;const ft=o.vertexBufferType===Ra.VEC_2?mp(ie,J,C,Se):sg(ie,J,C,Se,0,k);C+=Se;for(let xt=0;xt<ct.length;xt++)Se=Z[f]-Z[f-1],f++,ct[xt]=o.vertexBufferType===Ra.VEC_2?mp(ie,J,C,Se):sg(ie,J,C,Se,0,k),C+=Se;de[Ie]=b.createPolygon(ft,ct)}r[x++]=b.createMultiPolygon(de)}else{for(let Ie=0;Ie<se;Ie++){const Ye=G[a]-G[a-1];a++;const ct=new Array(Ye-1);Se=Z[f]-Z[f-1],f++;const ft=pp(ie,E,Se);E+=2*Se;for(let xt=0;xt<ct.length;xt++){const Dt=Z[f]-Z[f-1];f++,ct[xt]=pp(ie,E,Dt),E+=2*Dt}de[Ie]=b.createPolygon(ft,ct)}r[x++]=b.createMultiPolygon(de)}}}}return r}function pp(o,r,a){return lg(o,r,a,!0)}function mp(o,r,a,f){return $y(o,r,a,f,!0)}function sg(o,r,a,f,p,x){return gp(o,r,a,f,!0,x)}function lg(o,r,a,f){const p=new Array(f?a+1:a);for(let x=0;x<2*a;x+=2)p[x/2]=new M(o[r+x],o[r+x+1]);return f&&(p[p.length-1]=p[0]),p}function $y(o,r,a,f,p){const x=new Array(p?f+1:f);for(let b=0;b<2*f;b+=2){const E=2*r[a+b/2];x[b/2]=new M(o[E],o[E+1])}return p&&(x[x.length-1]=x[0]),x}function gp(o,r,a,f,p,x){const b=new Array(p?f+1:f);for(let E=0;E<f;E++){const C=ad(o[r[a+E]],x.numBits,x.coordinateShift);b[E]=new M(C.x,C.y)}return p&&(b[b.length-1]=b[0]),b}class V_{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(r,a,f,p,x){this._vertexBufferType=r,this._topologyVector=a,this._vertexOffsets=f,this._vertexBuffer=p,this._mortonSettings=x}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const r=dp(this);let a=0;for(;a<this.numGeometries;)yield{coordinates:r[a],type:this.geometryType(a)},a++}getSimpleEncodedVertex(r){const a=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[a],this.vertexBuffer[a+1]]}getVertex(r){if(this.vertexOffsets&&this.mortonSettings){const f=ad(this.vertexBuffer[this.vertexOffsets[r]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[f.x,f.y]}const a=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[a],this.vertexBuffer[a+1]]}getGeometries(){return dp(this)}get mortonSettings(){return this._mortonSettings}}class yp extends V_{_numGeometries;_geometryType;constructor(r,a,f,p,x,b,E){super(f,p,x,b,E),this._numGeometries=r,this._geometryType=a}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===yi.POLYGON||this._geometryType===yi.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class vp extends V_{_geometryTypes;constructor(r,a,f,p,x,b){super(r,f,p,x,b),this._geometryTypes=a}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let r=0;r<this.numGeometries;r++)if(this.geometryType(r)===yi.POLYGON||this.geometryType(r)===yi.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class _p{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(r,a,f,p){this._triangleOffsets=r,this._indexBuffer=a,this._vertexBuffer=f,this._topologyVector=p}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const r=new Array(this.numGeometries),a=this._topologyVector,f=a.partOffsets,p=a.ringOffsets,x=a.geometryOffsets;let b=0,E=1,C=1,k=1;for(let N=0;N<this.numGeometries;N++)switch(this.geometryType(N)){case yi.POLYGON:{const B=f[E]-f[E-1];E++;const G=[];for(let Z=0;Z<B;Z++){const J=p[C]-p[C-1];C++;const te=[];for(let ie=0;ie<J;ie++){const ue=this._vertexBuffer[b++],ve=this._vertexBuffer[b++];te.push(new M(ue,ve))}te.length>0&&te.push(te[0]),G.push(te)}r[N]=G,x&&k++}break;case yi.MULTIPOLYGON:{const B=x[k]-x[k-1];k++;const G=[];for(let Z=0;Z<B;Z++){const J=f[E]-f[E-1];E++;for(let te=0;te<J;te++){const ie=p[C]-p[C-1];C++;const ue=[];for(let ve=0;ve<ie;ve++){const se=this._vertexBuffer[b++],de=this._vertexBuffer[b++];ue.push(new M(se,de))}ue.length>0&&ue.push(ue[0]),G.push(ue)}}r[N]=G}}return r}[Symbol.iterator](){return null}}function q_(o,r,a,f,p,x){return new xp(o,r,a,f,p,x)}class xp extends _p{_numGeometries;_geometryType;constructor(r,a,f,p,x,b){super(f,p,x,b),this._numGeometries=r,this._geometryType=a}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function G_(o,r,a,f,p){return new $_(o,r,a,f,p)}class $_ extends _p{_geometryTypes;constructor(r,a,f,p,x){super(a,f,p,x),this._geometryTypes=r}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function Z_(o,r,a,f,p){const x=ia(o,a);let b=null,E=null,C=null,k=null;if(ag(x,f,o,a)===Tn.CONST){const ve=Uy(o,a,x,!1);let se=null,de=null,Se=null,Ie=null;for(let Ye=0;Ye<r-1;Ye++){const ct=ia(o,a);switch(ct.physicalStreamType){case Di.LENGTH:switch(ct.logicalStreamType.lengthType){case na.GEOMETRIES:se=bc(o,a,ct);break;case na.PARTS:de=bc(o,a,ct);break;case na.RINGS:Se=bc(o,a,ct);break;case na.TRIANGLES:Ie=bc(o,a,ct)}break;case Di.OFFSET:switch(ct.logicalStreamType.offsetType){case xc.VERTEX:b=aa(o,a,ct,!1);break;case xc.INDEX:k=aa(o,a,ct,!1)}break;case Di.DATA:Fs.VERTEX===ct.logicalStreamType.dictionaryType?E=aa(o,a,ct,!0):(C={numBits:ct.numBits,coordinateShift:ct.coordinateShift},E=aa(o,a,ct,!1))}}return k!==null?se!=null||de!=null?q_(f,ve,Ie,k,E,new Lh(se,de,Se)):q_(f,ve,Ie,k,E):C===null?(function(Ye,ct,ft,xt,Dt){return new yp(Ye,ct,Ra.VEC_2,ft,xt,Dt)})(f,ve,new Lh(se,de,Se),b,E):(function(Ye,ct,ft,xt,Dt,Tt){return new yp(Ye,ct,Ra.MORTON,ft,xt,Dt,Tt)})(f,ve,new Lh(se,de,Se),b,E,C)}const N=aa(o,a,x,!1);let B=null,G=null,Z=null,J=null;for(let ve=0;ve<r-1;ve++){const se=ia(o,a);switch(se.physicalStreamType){case Di.LENGTH:switch(se.logicalStreamType.lengthType){case na.GEOMETRIES:B=aa(o,a,se,!1);break;case na.PARTS:G=aa(o,a,se,!1);break;case na.RINGS:Z=aa(o,a,se,!1);break;case na.TRIANGLES:J=bc(o,a,se)}break;case Di.OFFSET:switch(se.logicalStreamType.offsetType){case xc.VERTEX:b=aa(o,a,se,!1);break;case xc.INDEX:k=aa(o,a,se,!1)}break;case Di.DATA:Fs.VERTEX===se.logicalStreamType.dictionaryType?E=aa(o,a,se,!0):(C={numBits:se.numBits,coordinateShift:se.coordinateShift},E=aa(o,a,se,!1))}}let te=null,ie=null,ue=null;return B!==null?(te=ug(N,B,2),G!==null&&Z!==null?(ie=Zy(N,te,G,!1),ue=(function(ve,se,de,Se){const Ie=new Uint32Array(de[de.length-1]+1);let Ye=0;Ie[0]=Ye;let ct=1,ft=1,xt=0;for(let Dt=0;Dt<ve.length;Dt++){const Tt=ve[Dt],dt=se[Dt+1]-se[Dt];if(Tt!==0&&Tt!==3)for(let it=0;it<dt;it++){const Nt=de[ct]-de[ct-1];ct++;for(let Ft=0;Ft<Nt;Ft++)Ye=Ie[ft++]=Ye+Se[xt++]}else for(let it=0;it<dt;it++)Ie[ft++]=++Ye,ct++}return Ie})(N,te,ie,Z)):G!==null&&(ie=(function(ve,se,de){const Se=new Uint32Array(se[se.length-1]+1);let Ie=0;Se[0]=Ie;let Ye=1,ct=0;for(let ft=0;ft<ve.length;ft++){const xt=ve[ft],Dt=se[ft+1]-se[ft];if(xt===4||xt===1)for(let Tt=0;Tt<Dt;Tt++)Ie=Se[Ye++]=Ie+de[ct++];else for(let Tt=0;Tt<Dt;Tt++)Se[Ye++]=++Ie}return Se})(N,te,G))):G!==null&&Z!==null?(ie=ug(N,G,1),ue=Zy(N,ie,Z,!0)):G!==null&&(ie=ug(N,G,0)),k!==null&&ie===null?G_(N,J,k,E):k!==null?G_(N,J,k,E,new Lh(te,ie,ue)):C===null?(function(ve,se,de,Se){return new vp(Ra.VEC_2,ve,se,de,Se)})(N,new Lh(te,ie,ue),b,E):(function(ve,se,de,Se,Ie){return new vp(Ra.MORTON,ve,se,de,Se,Ie)})(N,new Lh(te,ie,ue),b,E,C)}function ug(o,r,a){const f=new Uint32Array(o.length+1);let p=0;f[0]=p;let x=0;for(let b=0;b<o.length;b++)p=f[b+1]=p+(o[b]>a?r[x++]:1);return f}function Zy(o,r,a,f){const p=new Uint32Array(r[r.length-1]+1);let x=0;p[0]=x;let b=1,E=0;for(let C=0;C<o.length;C++){const k=o[C],N=r[C+1]-r[C];if(k===5||k===2||f&&(k===4||k===1))for(let B=0;B<N;B++)x=p[b++]=x+a[E++];else for(let B=0;B<N;B++)p[b++]=++x}return p}class Hy extends vc{dataVector;constructor(r,a,f){super(r,a.getBuffer(),f),this.dataVector=a}getValueFromBuffer(r){return this.dataVector.get(r)}}class H_ extends Jm{getValueFromBuffer(r){return this.dataBuffer[r]}}class Wy extends vc{constructor(r,a,f){super(r,BigInt64Array.of(a),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}function wc(o,r,a,f,p){const x=(function(b,E,C,k){const N=new Uint8Array(E);let B=0;const G=k.get()+C;for(;B<E&&!(k.get()>=G);){const Z=b[k.increment()];if(Z<=127){const J=Z+3,te=b[k.increment()],ie=Math.min(B+J,E);N.fill(te,B,ie),B=ie}else{const J=256-Z;for(let te=0;te<J&&B<E;te++)N[B++]=b[k.increment()]}}return k.set(G),N})(o,Math.ceil(r/8),a,f);return p?(function(b,E,C){if(!C)return b;const k=C.size(),N=new Us(b,E),B=new Us(new Uint8Array(Math.ceil(k/8)),k);let G=0;for(let Z=0;Z<k;Z++){const J=!!C.get(Z)&&N.get(G++);B.set(Z,J)}return B.getBuffer()})(x,r,p):x}const vb=new TextDecoder;function Xy(o,r,a){return a-r>=12?vb.decode(o.subarray(r,a)):(function(f,p,x){let b="",E=p;for(;E<x;){const C=f[E];let k,N,B,G=null,Z=C>239?4:C>223?3:C>191?2:1;if(E+Z>x)break;Z===1?C<128&&(G=C):Z===2?(k=f[E+1],(192&k)==128&&(G=(31&C)<<6|63&k,G<=127&&(G=null))):Z===3?(k=f[E+1],N=f[E+2],(192&k)==128&&(192&N)==128&&(G=(15&C)<<12|(63&k)<<6|63&N,(G<=2047||G>=55296&&G<=57343)&&(G=null))):Z===4&&(k=f[E+1],N=f[E+2],B=f[E+3],(192&k)==128&&(192&N)==128&&(192&B)==128&&(G=(15&C)<<18|(63&k)<<12|(63&N)<<6|63&B,(G<=65535||G>=1114112)&&(G=null))),G===null?(G=65533,Z=1):G>65535&&(G-=65536,b+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),b+=String.fromCharCode(G),E+=Z}return b})(o,r,a)}class bp extends vc{offsetBuffer;constructor(r,a,f,p){super(r,f,p),this.offsetBuffer=a}}class cg extends bp{textEncoder;constructor(r,a,f,p){super(r,a,f,p??a.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(r){return Xy(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class wu extends bp{indexBuffer;textEncoder;constructor(r,a,f,p,x){super(r,f,p,x??a.length),this.indexBuffer=a,this.indexBuffer=a,this.textEncoder=new TextEncoder}getValueFromBuffer(r){const a=this.indexBuffer[r];return Xy(this.dataBuffer,this.offsetBuffer[a],this.offsetBuffer[a+1])}}class hg extends bp{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(r,a,f,p,x,b,E){super(r,f,p,E),this.indexBuffer=a,this.symbolOffsetBuffer=x,this.symbolTableBuffer=b,this.textEncoder=new TextEncoder}getValueFromBuffer(r){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(f,p,x){const b=[],E=new Array(p.length).fill(0);for(let C=1;C<p.length;C++)E[C]=E[C-1]+p[C-1];for(let C=0;C<x.length;C++)if(x[C]===255)b.push(x[++C]);else{const k=p[x[C]],N=E[x[C]];for(let B=0;B<k;B++)b.push(f[N+B])}return new Uint8Array(b)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const a=this.indexBuffer[r];return Xy(this.decodedDictionary,this.offsetBuffer[a],this.offsetBuffer[a+1])}offsetToLengthBuffer(r){const a=new Uint32Array(r.length-1);let f=r[0];for(let p=1;p<r.length;p++){const x=r[p];a[p-1]=x-f,f=x}return a}}function W_(o,r,a,f,p,x){return a.type==="scalarType"?(function(b,E,C,k,N,B){let G=null,Z=0;if(b===0)return null;if(B.nullable){const te=ia(E,C);Z=te.numValues;const ie=C.get(),ue=wc(E,Z,te.byteLength,C);C.set(ie+te.byteLength),G=new Us(ue,te.numValues)}const J=G??k;switch(N.physicalType){case 4:case 3:return(function(te,ie,ue,ve,se){const de=ia(te,ie),Se=ag(de,se,te,ie),Ie=ve.physicalType===3;if(Se===Tn.FLAT){const Ye=aa(te,ie,de,Ie,0,jh(se)?se:void 0);return new eg(ue.name,Ye,se)}if(Se===Tn.SEQUENCE){const Ye=Vy(te,ie,de);return new By(ue.name,Ye[0],Ye[1],de.numRleValues)}{const Ye=Uy(te,ie,de,Ie);return new Fy(ue.name,Ye,se)}})(E,C,B,N,J);case 9:return(function(te,ie,ue,ve,se){let de=null,Se=null,Ie=null,Ye=null,ct=null,ft=null,xt=null,Dt=null;for(let Tt=0;Tt<ve;Tt++){const dt=ia(ie,ue);if(dt.byteLength!==0)switch(dt.physicalStreamType){case Di.PRESENT:{const it=wc(ie,dt.numValues,dt.byteLength,ue);ft=new Us(it,dt.numValues);break}case Di.OFFSET:Se=aa(ie,ue,dt,!1,0,se!=null||ft!=null?se??ft:void 0);break;case Di.LENGTH:{const it=bc(ie,ue,dt);na.DICTIONARY===dt.logicalStreamType.lengthType?de=it:na.SYMBOL===dt.logicalStreamType.lengthType?Ye=it:xt=it;break}case Di.DATA:{const it=ie.subarray(ue.get(),ue.get()+dt.byteLength);ue.add(dt.byteLength);const Nt=dt.logicalStreamType.dictionaryType;Fs.FSST===Nt?ct=it:Fs.SINGLE===Nt||Fs.SHARED===Nt?Ie=it:Fs.NONE===Nt&&(Dt=it);break}}}return(function(Tt,dt,it,Nt,Ft,Ht,Vt){return dt?new hg(Tt,it,Nt,Ft,Ht,dt,Vt):null})(te,ct,Se,de,Ie,Ye,se??ft)??(function(Tt,dt,it,Nt,Ft){return dt?Ft?new wu(Tt,it,Nt,dt,Ft):new wu(Tt,it,Nt,dt):null})(te,Ie,Se,de,se??ft)??(function(Tt,dt,it,Nt,Ft){if(!dt||!it)return null;if(Nt)return Ft?new wu(Tt,Nt,dt,it,Ft):new wu(Tt,Nt,dt,it);if(Ft&&Ft.size()!==dt.length-1){const Ht=new Int32Array(Ft.size());let Vt=0;for(let _r=0;_r<Ft.size();_r++)Ht[_r]=Ft.get(_r)?Vt++:0;return new wu(Tt,Ht,dt,it,Ft)}return Ft?new cg(Tt,dt,it,Ft):new cg(Tt,dt,it)})(te,xt,Dt,Se,se??ft)})(B.name,E,C,B.nullable?b-1:b,G);case 0:return(function(te,ie,ue,ve,se){const de=ia(te,ie),Se=de.numValues,Ie=ie.get(),Ye=jh(se)?se:void 0,ct=wc(te,Se,de.byteLength,ie,Ye);ie.set(Ie+de.byteLength);const ft=new Us(ct,Se);return new Hy(ue.name,ft,se)})(E,C,B,0,J);case 6:case 5:return(function(te,ie,ue,ve,se){const de=ia(te,ie),Se=ag(de,ve,te,ie),Ie=se.physicalType===5;if(Se===Tn.FLAT){const Ye=nd(te,ie,de,Ie,jh(ve)?ve:void 0);return new Rh(ue.name,Ye,ve)}if(Se===Tn.SEQUENCE){const Ye=kh(te,ie,de);return new id(ue.name,Ye[0],Ye[1],de.numRleValues)}{const Ye=qy(te,ie,de,Ie);return new Wy(ue.name,Ye,ve)}})(E,C,B,J,N);case 7:return(function(te,ie,ue,ve){const se=ia(te,ie),de=jh(ve)?ve:void 0,Se=(function(Ie,Ye,ct,ft){const xt=Ye.get(),Dt=xt+ct*Float32Array.BYTES_PER_ELEMENT,Tt=new Uint8Array(Ie.subarray(xt,Dt)).buffer,dt=new Float32Array(Tt);return Ye.set(Dt),ft?ng(dt,ft,0):dt})(te,ie,se.numValues,de);return new H_(ue.name,Se,ve)})(E,C,B,J);case 8:return(function(te,ie,ue,ve){const se=ia(te,ie),de=jh(ve)?ve:void 0,Se=(function(Ie,Ye,ct,ft){const xt=Ye.get(),Dt=xt+ct*Float64Array.BYTES_PER_ELEMENT,Tt=new Uint8Array(Ie.subarray(xt,Dt)).buffer,dt=new Float64Array(Tt);return Ye.set(Dt),ft?ng(dt,ft,0):dt})(te,ie,se.numValues,de);return new jy(ue.name,Se,ve)})(E,C,B,J);default:throw new Error(`The specified data type for the field is currently not supported: ${N}`)}})(f,o,r,p,a.scalarType,a):f===0?null:(function(b,E,C,k){let N=null,B=null,G=null,Z=null,J=!1;for(;!J;){const ve=ia(b,E);switch(ve.physicalStreamType){case Di.LENGTH:na.DICTIONARY===ve.logicalStreamType.lengthType?N=bc(b,E,ve):G=bc(b,E,ve);break;case Di.DATA:Fs.SINGLE===ve.logicalStreamType.dictionaryType||Fs.SHARED===ve.logicalStreamType.dictionaryType?(B=b.subarray(E.get(),E.get()+ve.byteLength),J=!0):Z=b.subarray(E.get(),E.get()+ve.byteLength),E.add(ve.byteLength)}}const te=C.complexType.children,ie=[];let ue=0;for(const ve of te){const se=Oi(b,E,1)[0];if(se==0)continue;const de=ve.name?`${C.name}${ve.name}`:C.name;if(se!==2||ve.type!=="scalarField"||ve.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Se=ia(b,E),Ie=wc(b,Se.numValues,Se.byteLength,E),Ye=ia(b,E),ct=aa(b,E,Ye,!1,0,Ye.decompressedCount!==k?new Us(Ie,Se.numValues):void 0);ie[ue++]=Z?new hg(de,ct,N,B,G,Z,new Us(Ie,Se.numValues)):new wu(de,ct,N,B,new Us(Ie,Se.numValues))}return ie})(o,r,a,p)}function jh(o){return o instanceof Us}function Su(o){switch(o){case 0:case 1:case 2:case 3:{const r={};r.nullable=!!(1&o),r.columnScope=0;const a={};return a.physicalType=o>1?6:4,a.type="physicalType",r.scalarType=a,r.type="scalarType",r}case 4:{const r={nullable:!1,columnScope:0},a={type:"physicalType",physicalType:0};return r.type="complexType",r.complexType=a,r}case 30:{const r={nullable:!1,columnScope:0},a={type:"physicalType",physicalType:1};return r.type="complexType",r.complexType=a,r}default:return(function(r){let a=null;switch(r){case 10:case 11:a=0;break;case 12:case 13:a=1;break;case 14:case 15:a=2;break;case 16:case 17:a=3;break;case 18:case 19:a=4;break;case 20:case 21:a=5;break;case 22:case 23:a=6;break;case 24:case 25:a=7;break;case 26:case 27:a=8;break;case 28:case 29:a=9;break;default:return null}const f={};f.nullable=!!(1&r),f.columnScope=0;const p={type:"physicalType"};return p.physicalType=a,f.type="scalarType",f.scalarType=p,f})(o)}}function Tu(o){return o>=10}function Eu(o){return o===30}function wp(o){if(o.name==="id")return!1;if(o.type==="scalarType"){const r=o.scalarType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(r.type==="logicalType")return!1}else if(o.type==="complexType"){const r=o.complexType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",o),!1}const Sp=new TextDecoder;function Ml(o,r){const a=Oi(o,r,1)[0];if(a===0)return"";const f=r.get(),p=o.subarray(f,f+a);return r.add(a),Sp.decode(p)}function X_(o,r){const a=Oi(o,r,1)[0]>>>0;if(a<10||a>30)throw new Error(`Unsupported field type code ${a}. Supported: 10-29(scalars), 30(STRUCT)`);const f=Su(a);if(Tu(a)&&(f.name=Ml(o,r)),Eu(a)){const p=Oi(o,r,1)[0]>>>0;f.complexType.children=new Array(p);for(let x=0;x<p;x++)f.complexType.children[x]=X_(o,r)}return(function(p){return{name:p.name,nullable:p.nullable,scalarField:p.scalarType,complexField:p.complexType,type:p.type==="scalarType"?"scalarField":"complexField"}})(f)}function Y_(o,r){const a=Oi(o,r,1)[0]>>>0,f=Su(a);if(!f)throw new Error(`Unsupported column type code ${a}. Supported: 0-3(ID), 4(GEOMETRY), 10-29(scalars), 30(STRUCT)`);if(Tu(a)?f.name=Ml(o,r):a>=0&&a<=3?f.name="id":a===4&&(f.name="geometry"),Eu(a)){const p=Oi(o,r,1)[0]>>>0,x=f.complexType;x.children=new Array(p);for(let b=0;b<p;b++)x.children[b]=X_(o,r)}return f}function Tp(o,r){const a={featureTables:[]},f={};f.name=Ml(o,r);const p=Oi(o,r,1)[0]>>>0,x=Oi(o,r,1)[0]>>>0;f.columns=new Array(x);for(let b=0;b<x;b++)f.columns[b]=Y_(o,r);return a.featureTables.push(f),[a,p]}function _b(o,r,a,f,p,x,b=!1){const E=r.scalarType.physicalType,C=ag(p,x,o,a);if(E===4)switch(C){case Tn.FLAT:{const k=aa(o,a,p,!1);return new eg(f,k,x)}case Tn.SEQUENCE:{const k=Vy(o,a,p);return new By(f,k[0],k[1],p.numRleValues)}case Tn.CONST:{const k=Uy(o,a,p,!1);return new Fy(f,k,x)}}else switch(C){case Tn.FLAT:{if(b){const N=(function(B,G,Z){const J=(function(te,ie,ue){const ve=new Float64Array(ue);for(let se=0;se<ue;se++)ve[se]=fp(te,ie);return ve})(B,G,Z.numValues);return(function(te,ie){switch(ie.logicalLevelTechnique1){case qr.DELTA:return ie.logicalLevelTechnique2===qr.RLE&&(te=U_(te,ie.runs,ie.numRleValues)),(function(ue){ue[0]=bu(ue[0]);const ve=ue.length/4*4;let se=1;if(ve>=4)for(;se<ve-4;se+=4){const de=ue[se+1],Se=ue[se+2],Ie=ue[se+3];ue[se]=bu(ue[se])+ue[se-1],ue[se+1]=bu(de)+ue[se],ue[se+2]=bu(Se)+ue[se+1],ue[se+3]=bu(Ie)+ue[se+2]}for(;se!=ue.length;++se)ue[se]=bu(ue[se])+ue[se-1]})(te),te;case qr.RLE:return(function(ue,ve){return U_(ue,ve.runs,ve.numRleValues)})(te,ie);case qr.NONE:return te;default:throw new Error(`The specified Logical level technique is not supported: ${ie.logicalLevelTechnique1}`)}})(J,Z)})(o,a,p);return new jy(f,N,x)}const k=nd(o,a,p,!1);return new Rh(f,k,x)}case Tn.SEQUENCE:{const k=kh(o,a,p);return new id(f,k[0],k[1],p.numRleValues)}case Tn.CONST:{const k=qy(o,a,p,!1);return new Wy(f,k,x)}}throw new Error("Vector type not supported for id column.")}class K_{constructor(r,a){var f;switch(this._featureData=r,this.properties=this._featureData.properties||{},(f=this._featureData.geometry)===null||f===void 0?void 0:f.type){case yi.POINT:case yi.MULTIPOINT:this.type=1;break;case yi.LINESTRING:case yi.MULTILINESTRING:this.type=2;break;case yi.POLYGON:case yi.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=a,this.id=Number(this._featureData.id)}loadGeometry(){const r=[];for(const a of this._featureData.geometry.coordinates){const f=[];for(const p of a)f.push(new M(p.x,p.y));r.push(f)}return r}}class fg{constructor(r){this.features=[],this.featureTable=r,this.name=r.name,this.extent=r.extent,this.version=2,this.features=r.getFeatures(),this.length=this.features.length}feature(r){return new K_(this.features[r],this.extent)}}class Yy{constructor(r){this.layers={};const a=(function(f,p,x=!0){const b=new N_(0),E=[];for(;b.get()<f.length;){const C=Oi(f,b,1)[0]>>>0,k=b.get()+C;if(k>f.length)throw new Error(`Block overruns tile: ${k} > ${f.length}`);if(Oi(f,b,1)[0]>>>0!=1){b.set(k);continue}const N=Tp(f,b),B=N[1],G=N[0].featureTables[0];let Z=null,J=null;const te=[];let ie=0;for(const ve of G.columns){const se=ve.name;if(se==="id"){let de=null;if(ve.nullable){const Ie=ia(f,b),Ye=b.get(),ct=wc(f,Ie.numValues,Ie.byteLength,b);b.set(Ye+Ie.byteLength),de=new Us(ct,Ie.numValues)}const Se=ia(f,b);ie=Se.decompressedCount,Z=_b(f,ve,b,se,Se,de??ie,x)}else if(se==="geometry"){const de=Oi(f,b,1)[0];if(ie===0){const Se=b.get();ie=ia(f,b).decompressedCount,b.set(Se)}J=Z_(f,de,b,ie)}else{const de=wp(ve)?Oi(f,b,1)[0]:1;if(de===0)continue;const Se=W_(f,b,ve,de,ie);if(Se)if(Array.isArray(Se))for(const Ie of Se)te.push(Ie);else te.push(Se)}}const ue=new _c(G.name,J,Z,te,B);E.push(ue),b.set(k)}return E})(new Uint8Array(r));this.layers=a.reduce(((f,p)=>Object.assign(Object.assign({},f),{[p.name]:new fg(p)})),{})}}class xb{constructor(r,a){this.feature=r,this.type=r.type,this.properties=r.tags?r.tags:{},this.extent=a,"id"in r&&(typeof r.id=="string"?this.id=parseInt(r.id,10):typeof r.id!="number"||isNaN(r.id)||(this.id=r.id))}loadGeometry(){const r=[],a=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const f of a){const p=[];for(const x of f)p.push(new M(x[0],x[1]));r.push(p)}return r}}const Sc="_geojsonTileLayer";function dg(o,r){r.writeVarintField(15,o.version||1),r.writeStringField(1,o.name||""),r.writeVarintField(5,o.extent||4096);const a={keys:[],values:[],keycache:{},valuecache:{}};for(let x=0;x<o.length;x++)a.feature=o.feature(x),r.writeMessage(2,Q_,a);const f=a.keys;for(const x of f)r.writeStringField(3,x);const p=a.values;for(const x of p)r.writeMessage(4,J_,x)}function Q_(o,r){if(!o.feature)return;const a=o.feature;a.id!==void 0&&r.writeVarintField(1,a.id),r.writeMessage(2,od,o),r.writeVarintField(3,a.type),r.writeMessage(4,gg,a)}function od(o,r){for(const a in o.feature?.properties){let f=o.feature.properties[a],p=o.keycache[a];if(f==null)continue;p===void 0&&(o.keys.push(a),p=o.keys.length-1,o.keycache[a]=p),r.writeVarint(p),typeof f!="string"&&typeof f!="boolean"&&typeof f!="number"&&(f=JSON.stringify(f));const x=typeof f+":"+f;let b=o.valuecache[x];b===void 0&&(o.values.push(f),b=o.values.length-1,o.valuecache[x]=b),r.writeVarint(b)}}function pg(o,r){return(r<<3)+(7&o)}function mg(o){return o<<1^o>>31}function gg(o,r){const a=o.loadGeometry(),f=o.type;let p=0,x=0;for(const b of a){let E=1;f===1&&(E=b.length),r.writeVarint(pg(1,E));const C=f===3?b.length-1:b.length;for(let k=0;k<C;k++){k===1&&f!==1&&r.writeVarint(pg(2,C-1));const N=b[k].x-p,B=b[k].y-x;r.writeVarint(mg(N)),r.writeVarint(mg(B)),p+=N,x+=B}o.type===3&&r.writeVarint(pg(7,1))}}function J_(o,r){const a=typeof o;a==="string"?r.writeStringField(1,o):a==="boolean"?r.writeBooleanField(7,o):a==="number"&&(o%1!=0?r.writeDoubleField(3,o):o<0?r.writeSVarintField(6,o):r.writeVarintField(5,o))}class e0{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new ml(pt,16,0),this.grid3D=new ml(pt,16,0),this.featureIndexArray=new oe,this.promoteId=a}insert(r,a,f,p,x,b){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,p,x);const C=b?this.grid3D:this.grid;for(let k=0;k<a.length;k++){const N=a[k],B=[1/0,1/0,-1/0,-1/0];for(let G=0;G<N.length;G++){const Z=N[G];B[0]=Math.min(B[0],Z.x),B[1]=Math.min(B[1],Z.y),B[2]=Math.max(B[2],Z.x),B[3]=Math.max(B[3],Z.y)}B[0]<pt&&B[1]<pt&&B[2]>=0&&B[3]>=0&&C.insert(E,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Cr(new Nm(this.rawTileData)).layers:new Yy(this.rawTileData).layers,this.sourceLayerCoder=new Ly(this.vtLayers?Object.keys(this.vtLayers).sort():[Sc])),this.vtLayers}query(r,a,f,p){this.loadVTLayers();const x=r.params,b=pt/r.tileSize/r.scale,E=Yi(x.filter,x.globalState),C=r.queryGeometry,k=r.queryPadding*b,N=yc.fromPoints(C),B=this.grid.query(N.minX-k,N.minY-k,N.maxX+k,N.maxY+k),G=yc.fromPoints(r.cameraQueryGeometry).expandBy(k),Z=this.grid3D.query(G.minX,G.minY,G.maxX,G.maxY,((ie,ue,ve,se)=>(function(de,Se,Ie,Ye,ct){for(const xt of de)if(Se<=xt.x&&Ie<=xt.y&&Ye>=xt.x&&ct>=xt.y)return!0;const ft=[new M(Se,Ie),new M(Se,ct),new M(Ye,ct),new M(Ye,Ie)];if(de.length>2){for(const xt of ft)if(xl(de,xt))return!0}for(let xt=0;xt<de.length-1;xt++)if(r_(de[xt],de[xt+1],ft))return!0;return!1})(r.cameraQueryGeometry,ie-k,ue-k,ve+k,se+k)));for(const ie of Z)B.push(ie);B.sort(s);const J={};let te;for(let ie=0;ie<B.length;ie++){const ue=B[ie];if(ue===te)continue;te=ue;const ve=this.featureIndexArray.get(ue);let se=null;this.loadMatchingFeature(J,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,E,x.layers,x.availableImages,a,f,p,((de,Se,Ie)=>(se||(se=Ls(de)),Se.queryIntersectsFeature({queryGeometry:C,feature:de,featureState:Ie,geometry:se,zoom:this.z,transform:r.transform,pixelsToTileUnits:b,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation}))))}return J}loadMatchingFeature(r,a,f,p,x,b,E,C,k,N,B){const G=this.bucketLayerIDs[a];if(b&&!G.some((ie=>b.has(ie))))return;const Z=this.sourceLayerCoder.decode(f),J=this.vtLayers[Z].feature(p);if(x.needGeometry){const ie=Co(J,!0);if(!x.filter(new Ur(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!x.filter(new Ur(this.tileID.overscaledZ),J))return;const te=this.getId(J,Z);for(let ie=0;ie<G.length;ie++){const ue=G[ie];if(b&&!b.has(ue))continue;const ve=C[ue];if(!ve)continue;let se={};te&&N&&(se=N.getState(ve.sourceLayer||Sc,te));const de=Ar({},k[ue]);de.paint=Ep(de.paint,ve.paint,J,se,E),de.layout=Ep(de.layout,ve.layout,J,se,E);const Se=!B||B(J,ve,se);if(!Se)continue;const Ie=new Qm(J,this.z,this.x,this.y,te);Ie.layer=de;let Ye=r[ue];Ye===void 0&&(Ye=r[ue]=[]),Ye.push({featureIndex:p,feature:Ie,intersectionZ:Se})}}lookupSymbolFeatures(r,a,f,p,x,b,E,C){const k={};this.loadVTLayers();const N=Yi(x.filterSpec,x.globalState);for(const B of r)this.loadMatchingFeature(k,f,p,B,N,b,E,C,a);return k}hasLayer(r){for(const a of this.bucketLayerIDs)for(const f of a)if(r===f)return!0;return!1}getId(r,a){var f;let p=r.id;return this.promoteId&&(p=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&(!((f=r.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(p=Number(r.properties.cluster_id))),p}}function Ep(o,r,a,f,p){return or(o,((x,b)=>{const E=r instanceof au?r.get(b):null;return E&&E.evaluate?E.evaluate(a,f,p):E}))}function s(o,r){return r-o}function h(o,r,a,f,p){const x=[];for(let b=0;b<o.length;b++){const E=o[b];let C;for(let k=0;k<E.length-1;k++){let N=E[k],B=E[k+1];N.x<r&&B.x<r||(N.x<r?N=new M(r,N.y+(r-N.x)/(B.x-N.x)*(B.y-N.y))._round():B.x<r&&(B=new M(r,N.y+(r-N.x)/(B.x-N.x)*(B.y-N.y))._round()),N.y<a&&B.y<a||(N.y<a?N=new M(N.x+(a-N.y)/(B.y-N.y)*(B.x-N.x),a)._round():B.y<a&&(B=new M(N.x+(a-N.y)/(B.y-N.y)*(B.x-N.x),a)._round()),N.x>=f&&B.x>=f||(N.x>=f?N=new M(f,N.y+(f-N.x)/(B.x-N.x)*(B.y-N.y))._round():B.x>=f&&(B=new M(f,N.y+(f-N.x)/(B.x-N.x)*(B.y-N.y))._round()),N.y>=p&&B.y>=p||(N.y>=p?N=new M(N.x+(p-N.y)/(B.y-N.y)*(B.x-N.x),p)._round():B.y>=p&&(B=new M(N.x+(p-N.y)/(B.y-N.y)*(B.x-N.x),p)._round()),C&&N.equals(C[C.length-1])||(C=[N],x.push(C)),C.push(B)))))}}return x}function g(o,r,a,f,p){switch(r){case 1:return(function(x,b,E,C){const k=[];for(const N of x)for(const B of N){const G=C===0?B.x:B.y;G>=b&&G<=E&&k.push([B])}return k})(o,a,f,p);case 2:return I(o,a,f,p,!1);case 3:return I(o,a,f,p,!0)}return[]}function S(o,r,a,f,p){const x=f===0?j:Q;let b=[];const E=[];for(let N=0;N<o.length-1;N++){const B=o[N],G=o[N+1],Z=f===0?B.x:B.y,J=f===0?G.x:G.y;let te=!1;Z<r?J>r&&b.push(x(B,G,r)):Z>a?J<a&&b.push(x(B,G,a)):b.push(B),J<r&&Z>=r&&(b.push(x(B,G,r)),te=!0),J>a&&Z<=a&&(b.push(x(B,G,a)),te=!0),!p&&te&&(E.push(b),b=[])}const C=o.length-1,k=f===0?o[C].x:o[C].y;return k>=r&&k<=a&&b.push(o[C]),p&&b.length>0&&!b[0].equals(b[b.length-1])&&b.push(new M(b[0].x,b[0].y)),b.length>0&&E.push(b),E}function I(o,r,a,f,p){const x=[];for(const b of o){const E=S(b,r,a,f,p);E.length>0&&x.push(...E)}return x}function j(o,r,a){return new M(a,o.y+(a-o.x)/(r.x-o.x)*(r.y-o.y))}function Q(o,r,a){return new M(o.x+(a-o.y)/(r.y-o.y)*(r.x-o.x),a)}Lt("FeatureIndex",e0,{omit:["rawTileData","sourceLayerCoder"]});class ce extends M{constructor(r,a,f,p){super(r,a),this.angle=f,p!==void 0&&(this.segment=p)}clone(){return new ce(this.x,this.y,this.angle,this.segment)}}function ze(o,r,a,f,p){if(r.segment===void 0||a===0)return!0;let x=r,b=r.segment+1,E=0;for(;E>-a/2;){if(b--,b<0)return!1;E-=o[b].dist(x),x=o[b]}E+=o[b].dist(o[b+1]),b++;const C=[];let k=0;for(;E<a/2;){const N=o[b],B=o[b+1];if(!B)return!1;let G=o[b-1].angleTo(N)-N.angleTo(B);for(G=Math.abs((G+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:E,angleDelta:G}),k+=G;E-C[0].distance>f;)k-=C.shift().angleDelta;if(k>p)return!1;b++,E+=N.dist(B)}return!0}function rt(o){let r=0;for(let a=0;a<o.length-1;a++)r+=o[a].dist(o[a+1]);return r}function gt(o,r,a){return o?.6*r*a:0}function St(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function nt(o,r,a,f,p,x){const b=gt(a,p,x),E=St(a,f)*x;let C=0;const k=rt(o)/2;for(let N=0;N<o.length-1;N++){const B=o[N],G=o[N+1],Z=B.dist(G);if(C+Z>k){const J=(k-C)/Z,te=mn.number(B.x,G.x,J),ie=mn.number(B.y,G.y,J),ue=new ce(te,ie,G.angleTo(B),N);return ue._round(),!b||ze(o,ue,E,b,r)?ue:void 0}C+=Z}}function ut(o,r,a,f,p,x,b,E,C){const k=gt(f,x,b),N=St(f,p),B=N*b,G=o[0].x===0||o[0].x===C||o[0].y===0||o[0].y===C;return r-B<r/4&&(r=B+r/4),$t(o,G?r/2*E%r:(N/2+2*x)*b*E%r,r,k,a,B,G,!1,C)}function $t(o,r,a,f,p,x,b,E,C){const k=x/2,N=rt(o);let B=0,G=r-a,Z=[];for(let J=0;J<o.length-1;J++){const te=o[J],ie=o[J+1],ue=te.dist(ie),ve=ie.angleTo(te);for(;G+a<B+ue;){G+=a;const se=(G-B)/ue,de=mn.number(te.x,ie.x,se),Se=mn.number(te.y,ie.y,se);if(de>=0&&de<C&&Se>=0&&Se<C&&G-k>=0&&G+k<=N){const Ie=new ce(de,Se,ve,J);Ie._round(),f&&!ze(o,Ie,x,f,p)||Z.push(Ie)}}B+=ue}return E||Z.length||b||(Z=$t(o,B/2,a,f,p,x,b,!0,C)),Z}function lr(o,r,a,f){const p=[],x=o.image,b=x.pixelRatio,E=x.paddedRect.w-2,C=x.paddedRect.h-2;let k={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const N=x.stretchX||[[0,E]],B=x.stretchY||[[0,C]],G=(it,Nt)=>it+Nt[1]-Nt[0],Z=N.reduce(G,0),J=B.reduce(G,0),te=E-Z,ie=C-J;let ue=0,ve=Z,se=0,de=J,Se=0,Ie=te,Ye=0,ct=ie;if(x.content&&f){const it=x.content,Nt=it[2]-it[0],Ft=it[3]-it[1];(x.textFitWidth||x.textFitHeight)&&(k=xu(o)),ue=tn(N,0,it[0]),se=tn(B,0,it[1]),ve=tn(N,it[0],it[2]),de=tn(B,it[1],it[3]),Se=it[0]-ue,Ye=it[1]-se,Ie=Nt-ve,ct=Ft-de}const ft=k.x1,xt=k.y1,Dt=k.x2-ft,Tt=k.y2-xt,dt=(it,Nt,Ft,Ht)=>{const Vt=Ne(it.stretch-ue,ve,Dt,ft),_r=tt(it.fixed-Se,Ie,it.stretch,Z),Rn=Ne(Nt.stretch-se,de,Tt,xt),vi=tt(Nt.fixed-Ye,ct,Nt.stretch,J),oa=Ne(Ft.stretch-ue,ve,Dt,ft),Cl=tt(Ft.fixed-Se,Ie,Ft.stretch,Z),co=Ne(Ht.stretch-se,de,Tt,xt),qi=tt(Ht.fixed-Ye,ct,Ht.stretch,J),sa=new M(Vt,Rn),Qn=new M(oa,Rn),Gi=new M(oa,co),ja=new M(Vt,co),Na=new M(_r/b,vi/b),Io=new M(Cl/b,qi/b),la=r*Math.PI/180;if(la){const Ii=Math.sin(la),Un=Math.cos(la),_i=[Un,-Ii,Ii,Un];sa._matMult(_i),Qn._matMult(_i),ja._matMult(_i),Gi._matMult(_i)}const zo=it.stretch+it.fixed,Pl=Nt.stretch+Nt.fixed;return{tl:sa,tr:Qn,bl:ja,br:Gi,tex:{x:x.paddedRect.x+1+zo,y:x.paddedRect.y+1+Pl,w:Ft.stretch+Ft.fixed-zo,h:Ht.stretch+Ht.fixed-Pl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Na,pixelOffsetBR:Io,minFontScaleX:Ie/b/Dt,minFontScaleY:ct/b/Tt,isSDF:a}};if(f&&(x.stretchX||x.stretchY)){const it=qe(N,te,Z),Nt=qe(B,ie,J);for(let Ft=0;Ft<it.length-1;Ft++){const Ht=it[Ft],Vt=it[Ft+1];for(let _r=0;_r<Nt.length-1;_r++)p.push(dt(Ht,Nt[_r],Vt,Nt[_r+1]))}}else p.push(dt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:C+1}));return p}function tn(o,r,a){let f=0;for(const p of o)f+=Math.max(r,Math.min(a,p[1]))-Math.max(r,Math.min(a,p[0]));return f}function qe(o,r,a){const f=[{fixed:-1,stretch:0}];for(const[p,x]of o){const b=f[f.length-1];f.push({fixed:p-b.stretch,stretch:b.stretch}),f.push({fixed:p-b.stretch,stretch:b.stretch+(x-p)})}return f.push({fixed:r+1,stretch:a}),f}function Ne(o,r,a,f){return o/r*a+f}function tt(o,r,a,f){return o-r*a/f}Lt("Anchor",ce);class _t{constructor(r,a,f,p,x,b,E,C,k,N){var B;if(this.boxStartIndex=r.length,k){let G=b.top,Z=b.bottom;const J=b.collisionPadding;J&&(G-=J[1],Z+=J[3]);let te=Z-G;te>0&&(te=Math.max(10,te),this.circleDiameter=te)}else{const G=!((B=b.image)===null||B===void 0)&&B.content&&(b.image.textFitWidth||b.image.textFitHeight)?xu(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};G.y1=G.y1*E-C[0],G.y2=G.y2*E+C[2],G.x1=G.x1*E-C[3],G.x2=G.x2*E+C[1];const Z=b.collisionPadding;if(Z&&(G.x1-=Z[0]*E,G.y1-=Z[1]*E,G.x2+=Z[2]*E,G.y2+=Z[3]*E),N){const J=new M(G.x1,G.y1),te=new M(G.x2,G.y1),ie=new M(G.x1,G.y2),ue=new M(G.x2,G.y2),ve=N*Math.PI/180;J._rotate(ve),te._rotate(ve),ie._rotate(ve),ue._rotate(ve),G.x1=Math.min(J.x,te.x,ie.x,ue.x),G.x2=Math.max(J.x,te.x,ie.x,ue.x),G.y1=Math.min(J.y,te.y,ie.y,ue.y),G.y2=Math.max(J.y,te.y,ie.y,ue.y)}r.emplaceBack(a.x,a.y,G.x1,G.y1,G.x2,G.y2,f,p,x)}this.boxEndIndex=r.length}}class rr{constructor(r=[],a=(f,p)=>f<p?-1:f>p?1:0){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:f}=this,p=a[r];for(;r>0;){const x=r-1>>1,b=a[x];if(f(p,b)>=0)break;a[r]=b,r=x}a[r]=p}_down(r){const{data:a,compare:f}=this,p=this.length>>1,x=a[r];for(;r<p;){let b=1+(r<<1);const E=b+1;if(E<this.length&&f(a[E],a[b])<0&&(b=E),f(a[b],x)>=0)break;a[r]=a[b],r=b}a[r]=x}}function Hr(o,r=1,a=!1){const f=yc.fromPoints(o[0]),p=Math.min(f.width(),f.height());let x=p/2;const b=new rr([],Xt),{minX:E,minY:C,maxX:k,maxY:N}=f;if(p===0)return new M(E,C);for(let Z=E;Z<k;Z+=p)for(let J=C;J<N;J+=p)b.push(new yr(Z+x,J+x,x,o));let B=(function(Z){let J=0,te=0,ie=0;const ue=Z[0];for(let ve=0,se=ue.length,de=se-1;ve<se;de=ve++){const Se=ue[ve],Ie=ue[de],Ye=Se.x*Ie.y-Ie.x*Se.y;te+=(Se.x+Ie.x)*Ye,ie+=(Se.y+Ie.y)*Ye,J+=3*Ye}return new yr(te/J,ie/J,0,Z)})(o),G=b.length;for(;b.length;){const Z=b.pop();(Z.d>B.d||!B.d)&&(B=Z,a&&console.log("found best %d after %d probes",Math.round(1e4*Z.d)/1e4,G)),Z.max-B.d<=r||(x=Z.h/2,b.push(new yr(Z.p.x-x,Z.p.y-x,x,o)),b.push(new yr(Z.p.x+x,Z.p.y-x,x,o)),b.push(new yr(Z.p.x-x,Z.p.y+x,x,o)),b.push(new yr(Z.p.x+x,Z.p.y+x,x,o)),G+=4)}return a&&(console.log(`num probes: ${G}`),console.log(`best distance: ${B.d}`)),B.p}function Xt(o,r){return r.max-o.max}function yr(o,r,a,f){this.p=new M(o,r),this.h=a,this.d=(function(p,x){let b=!1,E=1/0;for(let C=0;C<x.length;C++){const k=x[C];for(let N=0,B=k.length,G=B-1;N<B;G=N++){const Z=k[N],J=k[G];Z.y>p.y!=J.y>p.y&&p.x<(J.x-Z.x)*(p.y-Z.y)/(J.y-Z.y)+Z.x&&(b=!b),E=Math.min(E,iy(p,Z,J))}}return(b?1:-1)*Math.sqrt(E)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var ar;_.aP=void 0,(ar=_.aP||(_.aP={}))[ar.center=1]="center",ar[ar.left=2]="left",ar[ar.right=3]="right",ar[ar.top=4]="top",ar[ar.bottom=5]="bottom",ar[ar["top-left"]=6]="top-left",ar[ar["top-right"]=7]="top-right",ar[ar["bottom-left"]=8]="bottom-left",ar[ar["bottom-right"]=9]="bottom-right";const Nr=Number.POSITIVE_INFINITY;function Au(o,r){return r[1]!==Nr?(function(a,f,p){let x=0,b=0;switch(f=Math.abs(f),p=Math.abs(p),a){case"top-right":case"top-left":case"top":b=p-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-p}switch(a){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,b]})(o,r[0],r[1]):(function(a,f){let p=0,x=0;f<0&&(f=0);const b=f/Math.SQRT2;switch(a){case"top-right":case"top-left":x=b-7;break;case"bottom-right":case"bottom-left":x=7-b;break;case"bottom":x=7-f;break;case"top":x=f-7}switch(a){case"top-right":case"bottom-right":p=-b;break;case"top-left":case"bottom-left":p=b;break;case"left":p=f;break;case"right":p=-f}return[p,x]})(o,r[0])}function t0(o,r,a){var f;const p=o.layout,x=(f=p.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(r,{},a);if(x){const E=x.values,C=[];for(let k=0;k<E.length;k+=2){const N=C[k]=E[k],B=E[k+1].map((G=>G*si));N.startsWith("top")?B[1]-=7:N.startsWith("bottom")&&(B[1]+=7),C[k+1]=B}return new Pn(C)}const b=p.get("text-variable-anchor");if(b){let E;E=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(r,{},a)*si,Nr]:p.get("text-offset").evaluate(r,{},a).map((k=>k*si));const C=[];for(const k of b)C.push(k,Au(k,E));return new Pn(C)}return null}function bb(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Vk(o,r,a,f,p,x,b,E,C,k,N,B){let G=x.textMaxSize.evaluate(r,{});G===void 0&&(G=b);const Z=o.layers[0].layout,J=Z.get("icon-offset").evaluate(r,{},N),te=oT(a.horizontal),ie=b/24,ue=o.tilePixelRatio*ie,ve=o.tilePixelRatio*G/24,se=o.tilePixelRatio*E,de=o.tilePixelRatio*Z.get("symbol-spacing"),Se=Z.get("text-padding")*o.tilePixelRatio,Ie=(function(Ft,Ht,Vt,_r=1){const Rn=Ft.get("icon-padding").evaluate(Ht,{},Vt),vi=Rn&&Rn.values;return[vi[0]*_r,vi[1]*_r,vi[2]*_r,vi[3]*_r]})(Z,r,N,o.tilePixelRatio),Ye=Z.get("text-max-angle")/180*Math.PI,ct=Z.get("text-rotation-alignment")!=="viewport"&&Z.get("symbol-placement")!=="point",ft=Z.get("icon-rotation-alignment")==="map"&&Z.get("symbol-placement")!=="point",xt=Z.get("symbol-placement"),Dt=de/2,Tt=Z.get("icon-text-fit");let dt;f&&Tt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(dt=Bs(f,a.vertical,Tt,Z.get("icon-text-fit-padding"),J,ie)),te&&(f=Bs(f,te,Tt,Z.get("icon-text-fit-padding"),J,ie)));const it=N?B.line.getGranularityForZoomLevel(N.z):1,Nt=(Ft,Ht)=>{Ht.x<0||Ht.x>=pt||Ht.y<0||Ht.y>=pt||(function(Vt,_r,Rn,vi,oa,Cl,co,qi,sa,Qn,Gi,ja,Na,Io,la,zo,Pl,Ii,Un,_i,Zn,zi,Nh,Mu,Jy){const sd=Vt.addToLineVertexArray(_r,Rn);let Ap,yg,vg,_g,cT=0,hT=0,fT=0,dT=0,Pb=-1,Db=-1;const Bh={};let pT=zn("");if(Vt.allowVerticalPlacement&&vi.vertical){const Ba=qi.layout.get("text-rotate").evaluate(Zn,{},Mu)+90;vg=new _t(sa,_r,Qn,Gi,ja,vi.vertical,Na,Io,la,Ba),co&&(_g=new _t(sa,_r,Qn,Gi,ja,co,Pl,Ii,la,Ba))}if(oa){const Ba=qi.layout.get("icon-rotate").evaluate(Zn,{}),Vs=qi.layout.get("icon-text-fit")!=="none",Mp=lr(oa,Ba,Nh,Vs),Pu=co?lr(co,Ba,Nh,Vs):void 0;yg=new _t(sa,_r,Qn,Gi,ja,oa,Pl,Ii,!1,Ba),cT=4*Mp.length;const Cp=Vt.iconSizeData;let Tc=null;Cp.kind==="source"?(Tc=[Do*qi.layout.get("icon-size").evaluate(Zn,{})],Tc[0]>mc&&ur(`${Vt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Cp.kind==="composite"&&(Tc=[Do*zi.compositeIconSizes[0].evaluate(Zn,{},Mu),Do*zi.compositeIconSizes[1].evaluate(Zn,{},Mu)],(Tc[0]>mc||Tc[1]>mc)&&ur(`${Vt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Vt.addSymbols(Vt.icon,Mp,Tc,_i,Un,Zn,_.az.none,_r,sd.lineStartIndex,sd.lineLength,-1,Mu),Pb=Vt.icon.placedSymbolArray.length-1,Pu&&(hT=4*Pu.length,Vt.addSymbols(Vt.icon,Pu,Tc,_i,Un,Zn,_.az.vertical,_r,sd.lineStartIndex,sd.lineLength,-1,Mu),Db=Vt.icon.placedSymbolArray.length-1)}const mT=Object.keys(vi.horizontal);for(const Ba of mT){const Vs=vi.horizontal[Ba];if(!Ap){pT=zn(Vs.text);const Pu=qi.layout.get("text-rotate").evaluate(Zn,{},Mu);Ap=new _t(sa,_r,Qn,Gi,ja,Vs,Na,Io,la,Pu)}const Mp=Vs.positionedLines.length===1;if(fT+=aT(Vt,_r,Vs,Cl,qi,la,Zn,zo,sd,vi.vertical?_.az.horizontal:_.az.horizontalOnly,Mp?mT:[Ba],Bh,Pb,zi,Mu),Mp)break}vi.vertical&&(dT+=aT(Vt,_r,vi.vertical,Cl,qi,la,Zn,zo,sd,_.az.vertical,["vertical"],Bh,Db,zi,Mu));const $k=Ap?Ap.boxStartIndex:Vt.collisionBoxArray.length,Zk=Ap?Ap.boxEndIndex:Vt.collisionBoxArray.length,Hk=vg?vg.boxStartIndex:Vt.collisionBoxArray.length,Wk=vg?vg.boxEndIndex:Vt.collisionBoxArray.length,Xk=yg?yg.boxStartIndex:Vt.collisionBoxArray.length,Yk=yg?yg.boxEndIndex:Vt.collisionBoxArray.length,Kk=_g?_g.boxStartIndex:Vt.collisionBoxArray.length,Qk=_g?_g.boxEndIndex:Vt.collisionBoxArray.length;let Cu=-1;const n0=(Ba,Vs)=>Ba&&Ba.circleDiameter?Math.max(Ba.circleDiameter,Vs):Vs;Cu=n0(Ap,Cu),Cu=n0(vg,Cu),Cu=n0(yg,Cu),Cu=n0(_g,Cu);const gT=Cu>-1?1:0;gT&&(Cu*=Jy/si),Vt.glyphOffsetArray.length>=ed.MAX_GLYPHS&&ur("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Zn.sortKey!==void 0&&Vt.addToSortKeyRanges(Vt.symbolInstances.length,Zn.sortKey);const Jk=t0(qi,Zn,Mu),[eR,tR]=(function(Ba,Vs){const Mp=Ba.length,Pu=Vs?.values;if(Pu?.length>0)for(let Cp=0;Cp<Pu.length;Cp+=2){const Tc=Pu[Cp+1];Ba.emplaceBack(_.aP[Pu[Cp]],Tc[0],Tc[1])}return[Mp,Ba.length]})(Vt.textAnchorOffsets,Jk);Vt.symbolInstances.emplaceBack(_r.x,_r.y,Bh.right>=0?Bh.right:-1,Bh.center>=0?Bh.center:-1,Bh.left>=0?Bh.left:-1,Bh.vertical||-1,Pb,Db,pT,$k,Zk,Hk,Wk,Xk,Yk,Kk,Qk,Qn,fT,dT,cT,hT,gT,0,Na,Cu,eR,tR)})(o,Ht,Ft,a,f,p,dt,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,ue,[Se,Se,Se,Se],ct,C,se,Ie,ft,J,r,x,k,N,b)};if(xt==="line")for(const Ft of h(r.geometry,0,0,pt,pt)){const Ht=mu(Ft,it),Vt=ut(Ht,de,Ye,a.vertical||te,f,24,ve,o.overscaling,pt);for(const _r of Vt)te&&qk(o,te.text,Dt,_r)||Nt(Ht,_r)}else if(xt==="line-center"){for(const Ft of r.geometry)if(Ft.length>1){const Ht=mu(Ft,it),Vt=nt(Ht,Ye,a.vertical||te,f,24,ve);Vt&&Nt(Ht,Vt)}}else if(r.type==="Polygon")for(const Ft of eh(r.geometry,0)){const Ht=Hr(Ft,16);Nt(mu(Ft[0],it,!0),new ce(Ht.x,Ht.y,0))}else if(r.type==="LineString")for(const Ft of r.geometry){const Ht=mu(Ft,it);Nt(Ht,new ce(Ht[0].x,Ht[0].y,0))}else if(r.type==="Point")for(const Ft of r.geometry)for(const Ht of Ft)Nt([Ht],new ce(Ht.x,Ht.y,0))}function aT(o,r,a,f,p,x,b,E,C,k,N,B,G,Z,J){const te=(function(ve,se,de,Se,Ie,Ye,ct,ft){const xt=Se.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,Dt=[];for(const Tt of se.positionedLines)for(const dt of Tt.positionedGlyphs){if(!dt.rect)continue;const it=dt.rect||{};let Nt=4,Ft=!0,Ht=1,Vt=0;const _r=(Ie||ft)&&dt.vertical,Rn=dt.metrics.advance*dt.scale/2;if(ft&&se.verticalizable&&(Vt=Tt.lineOffset/2-(dt.imageName?-(si-dt.metrics.width*dt.scale)/2:(dt.scale-1)*si)),dt.imageName){const Ii=ct[dt.imageName];Ft=Ii.sdf,Ht=Ii.pixelRatio,Nt=1/Ht}const vi=Ie?[dt.x+Rn,dt.y]:[0,0];let oa=Ie?[0,0]:[dt.x+Rn+de[0],dt.y+de[1]-Vt],Cl=[0,0];_r&&(Cl=oa,oa=[0,0]);const co=dt.metrics.isDoubleResolution?2:1,qi=(dt.metrics.left-Nt)*dt.scale-Rn+oa[0],sa=(-dt.metrics.top-Nt)*dt.scale+oa[1],Qn=qi+it.w/co*dt.scale/Ht,Gi=sa+it.h/co*dt.scale/Ht,ja=new M(qi,sa),Na=new M(Qn,sa),Io=new M(qi,Gi),la=new M(Qn,Gi);if(_r){const Ii=new M(-Rn,Rn- -17),Un=-Math.PI/2,_i=12-Rn,Zn=new M(22-_i,-(dt.imageName?_i:0)),zi=new M(...Cl);ja._rotateAround(Un,Ii)._add(Zn)._add(zi),Na._rotateAround(Un,Ii)._add(Zn)._add(zi),Io._rotateAround(Un,Ii)._add(Zn)._add(zi),la._rotateAround(Un,Ii)._add(Zn)._add(zi)}if(xt){const Ii=Math.sin(xt),Un=Math.cos(xt),_i=[Un,-Ii,Ii,Un];ja._matMult(_i),Na._matMult(_i),Io._matMult(_i),la._matMult(_i)}const zo=new M(0,0),Pl=new M(0,0);Dt.push({tl:ja,tr:Na,bl:Io,br:la,tex:it,writingMode:se.writingMode,glyphOffset:vi,sectionIndex:dt.sectionIndex,isSDF:Ft,pixelOffsetTL:zo,pixelOffsetBR:Pl,minFontScaleX:0,minFontScaleY:0})}return Dt})(0,a,E,p,x,b,f,o.allowVerticalPlacement),ie=o.textSizeData;let ue=null;ie.kind==="source"?(ue=[Do*p.layout.get("text-size").evaluate(b,{})],ue[0]>mc&&ur(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ie.kind==="composite"&&(ue=[Do*Z.compositeTextSizes[0].evaluate(b,{},J),Do*Z.compositeTextSizes[1].evaluate(b,{},J)],(ue[0]>mc||ue[1]>mc)&&ur(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,te,ue,E,x,b,k,r,C.lineStartIndex,C.lineLength,G,J);for(const ve of N)B[ve]=o.text.placedSymbolArray.length-1;return 4*te.length}function oT(o){for(const r in o)return o[r];return null}function qk(o,r,a,f){const p=o.compareText;if(r in p){const x=p[r];for(let b=x.length-1;b>=0;b--)if(f.dist(x[b])<a)return!0}else p[r]=[];return p[r].push(f),!1}const sT=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class wb{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,f]=new Uint8Array(r,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=f>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const x=sT[15&f];if(!x)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(r,2,1),[E]=new Uint32Array(r,4,1);return new wb(E,b,x,r)}constructor(r,a=64,f=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=f,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const x=sT.indexOf(this.ArrayType),b=2*r*this.ArrayType.BYTES_PER_ELEMENT,E=r*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-E%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+C,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+b+E+C),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+C,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=r)}add(r,a){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=r,this.coords[this._pos++]=a,f}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Sb(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,a,f,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:b,nodeSize:E}=this,C=[0,x.length-1,0],k=[];for(;C.length;){const N=C.pop()||0,B=C.pop()||0,G=C.pop()||0;if(B-G<=E){for(let ie=G;ie<=B;ie++){const ue=b[2*ie],ve=b[2*ie+1];ue>=r&&ue<=f&&ve>=a&&ve<=p&&k.push(x[ie])}continue}const Z=G+B>>1,J=b[2*Z],te=b[2*Z+1];J>=r&&J<=f&&te>=a&&te<=p&&k.push(x[Z]),(N===0?r<=J:a<=te)&&(C.push(G),C.push(Z-1),C.push(1-N)),(N===0?f>=J:p>=te)&&(C.push(Z+1),C.push(B),C.push(1-N))}return k}within(r,a,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:x,nodeSize:b}=this,E=[0,p.length-1,0],C=[],k=f*f;for(;E.length;){const N=E.pop()||0,B=E.pop()||0,G=E.pop()||0;if(B-G<=b){for(let ie=G;ie<=B;ie++)uT(x[2*ie],x[2*ie+1],r,a)<=k&&C.push(p[ie]);continue}const Z=G+B>>1,J=x[2*Z],te=x[2*Z+1];uT(J,te,r,a)<=k&&C.push(p[Z]),(N===0?r-f<=J:a-f<=te)&&(E.push(G),E.push(Z-1),E.push(1-N)),(N===0?r+f>=J:a+f>=te)&&(E.push(Z+1),E.push(B),E.push(1-N))}return C}}function Sb(o,r,a,f,p,x){if(p-f<=a)return;const b=f+p>>1;lT(o,r,b,f,p,x),Sb(o,r,a,f,b-1,1-x),Sb(o,r,a,b+1,p,1-x)}function lT(o,r,a,f,p,x){for(;p>f;){if(p-f>600){const k=p-f+1,N=a-f+1,B=Math.log(k),G=.5*Math.exp(2*B/3),Z=.5*Math.sqrt(B*G*(k-G)/k)*(N-k/2<0?-1:1);lT(o,r,a,Math.max(f,Math.floor(a-N*G/k+Z)),Math.min(p,Math.floor(a+(k-N)*G/k+Z)),x)}const b=r[2*a+x];let E=f,C=p;for(Ky(o,r,f,a),r[2*p+x]>b&&Ky(o,r,f,p);E<C;){for(Ky(o,r,E,C),E++,C--;r[2*E+x]<b;)E++;for(;r[2*C+x]>b;)C--}r[2*f+x]===b?Ky(o,r,f,C):(C++,Ky(o,r,C,p)),C<=a&&(f=C+1),a<=C&&(p=C-1)}}function Ky(o,r,a,f){Tb(o,a,f),Tb(r,2*a,2*f),Tb(r,2*a+1,2*f+1)}function Tb(o,r,a){const f=o[r];o[r]=o[a],o[a]=f}function uT(o,r,a,f){const p=o-a,x=r-f;return p*p+x*x}var Eb;_.cI=void 0,(Eb=_.cI||(_.cI={})).create="create",Eb.load="load",Eb.fullLoad="fullLoad";let r0=null,Qy=[];const Ab=1e3/60,Mb="loadTime",Cb="fullLoadTime",Gk={mark(o){performance.mark(o)},recordStartOfFrameAt(o){r0!=null&&Qy.push(o-r0),r0=o},resetRuntimeMetrics(){r0=null,Qy=[]},clearInitializationMetrics(){performance.clearMeasures(Mb),performance.clearMeasures(Cb);for(const o in _.cI)performance.clearMarks(_.cI[o])},remove(){this.resetRuntimeMetrics(),this.clearInitializationMetrics()},getPerformanceMetrics(){performance.measure(Mb,_.cI.create,_.cI.load),performance.measure(Cb,_.cI.create,_.cI.fullLoad);const o=performance.getEntriesByName(Mb)[0].duration,r=performance.getEntriesByName(Cb)[0].duration,a=Qy.length;return{loadTimeMs:o,fullLoadTimeMs:r,averageFramesPerSecond:1/(Qy.reduce(((f,p)=>f+p),0)/a/1e3),virtualDroppedFramesCount:Qy.filter((f=>f>Ab)).reduce(((f,p)=>f+(p-Ab)/Ab),0),totalFramesCount:a}}};_.$=q,_.A=ge,_.B=bo,_.C=oi,_.D=jt,_.E=at,_.F=function([o,r,a]){return r+=90,r*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(a),y:o*Math.sin(r)*Math.sin(a),z:o*Math.cos(a)}},_.G=mn,_.H=Ur,_.I=en,_.J=If,_.K=function(o){if(Rr==null){const r=o.navigator?o.navigator.userAgent:null;Rr=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Rr},_.L=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Xm((()=>this.process())),this.subscription=ju(this.target,"message",(a=>this.receive(a)),!1),this.globalScope=sn(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}unregisterMessageHandler(o){delete this.messageHandlers[o]}sendAsync(o,r){return new Promise(((a,f)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=r?ju(r.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[p];const C={id:p,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)}),Iy):null;this.resolveRejects[p]={resolve:C=>{x?.unsubscribe(),a(C)},reject:C=>{x?.unsubscribe(),f(C)}};const b=[],E=Object.assign(Object.assign({},o),{id:p,sourceMapId:this.mapId,origin:location.origin,data:wo(o.data,b)});this.target.postMessage(E,{transfer:b})}))}receive(o){const r=o.data,a=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[a];const f=this.abortControllers[a];return delete this.abortControllers[a],void(f&&f.abort())}if(sn(self)||r.mustQueue)return this.tasks[a]=r,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return c(this,void 0,void 0,(function*(){if(r.type==="<response>"){const p=this.resolveRejects[o];return delete this.resolveRejects[o],p?void(r.error?p.reject(ac(r.error)):p.resolve(ac(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=ac(r.data),f=new AbortController;this.abortControllers[o]=f;try{const p=yield this.messageHandlers[r.type](r.sourceMapId,a,f);this.completeTask(o,null,p)}catch(p){this.completeTask(o,p)}}))}completeTask(o,r,a){const f=[];delete this.abortControllers[o];const p={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?wo(r):null,data:wo(a,f)};this.target.postMessage(p,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},_.M=ne,_.N=function(){var o=new ge(16);return ge!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},_.O=function(o,r,a){var f,p,x,b,E,C,k,N,B,G,Z,J,te=a[0],ie=a[1],ue=a[2];return r===o?(o[12]=r[0]*te+r[4]*ie+r[8]*ue+r[12],o[13]=r[1]*te+r[5]*ie+r[9]*ue+r[13],o[14]=r[2]*te+r[6]*ie+r[10]*ue+r[14],o[15]=r[3]*te+r[7]*ie+r[11]*ue+r[15]):(p=r[1],x=r[2],b=r[3],E=r[4],C=r[5],k=r[6],N=r[7],B=r[8],G=r[9],Z=r[10],J=r[11],o[0]=f=r[0],o[1]=p,o[2]=x,o[3]=b,o[4]=E,o[5]=C,o[6]=k,o[7]=N,o[8]=B,o[9]=G,o[10]=Z,o[11]=J,o[12]=f*te+E*ie+B*ue+r[12],o[13]=p*te+C*ie+G*ue+r[13],o[14]=x*te+k*ie+Z*ue+r[14],o[15]=b*te+N*ie+J*ue+r[15]),o},_.P=M,_.Q=function(o,r,a){var f=a[0],p=a[1],x=a[2];return o[0]=r[0]*f,o[1]=r[1]*f,o[2]=r[2]*f,o[3]=r[3]*f,o[4]=r[4]*p,o[5]=r[5]*p,o[6]=r[6]*p,o[7]=r[7]*p,o[8]=r[8]*x,o[9]=r[9]*x,o[10]=r[10]*x,o[11]=r[11]*x,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},_.R=ra,_.S=function(o,r,a){var f=r[0],p=r[1],x=r[2],b=r[3],E=r[4],C=r[5],k=r[6],N=r[7],B=r[8],G=r[9],Z=r[10],J=r[11],te=r[12],ie=r[13],ue=r[14],ve=r[15],se=a[0],de=a[1],Se=a[2],Ie=a[3];return o[0]=se*f+de*E+Se*B+Ie*te,o[1]=se*p+de*C+Se*G+Ie*ie,o[2]=se*x+de*k+Se*Z+Ie*ue,o[3]=se*b+de*N+Se*J+Ie*ve,o[4]=(se=a[4])*f+(de=a[5])*E+(Se=a[6])*B+(Ie=a[7])*te,o[5]=se*p+de*C+Se*G+Ie*ie,o[6]=se*x+de*k+Se*Z+Ie*ue,o[7]=se*b+de*N+Se*J+Ie*ve,o[8]=(se=a[8])*f+(de=a[9])*E+(Se=a[10])*B+(Ie=a[11])*te,o[9]=se*p+de*C+Se*G+Ie*ie,o[10]=se*x+de*k+Se*Z+Ie*ue,o[11]=se*b+de*N+Se*J+Ie*ve,o[12]=(se=a[12])*f+(de=a[13])*E+(Se=a[14])*B+(Ie=a[15])*te,o[13]=se*p+de*C+Se*G+Ie*ie,o[14]=se*x+de*k+Se*Z+Ie*ue,o[15]=se*b+de*N+Se*J+Ie*ve,o},_.T=Am,_.U=function(o,r){const a={};for(let f=0;f<r.length;f++){const p=r[f];p in o&&(a[p]=o[p])}return a},_.V=Tl,_.W=Gt,_.X=zy,_.Y=k_,_.Z=Ks,_._=c,_.a=Bc,_.a$=kt,_.a0=he,_.a1=ys,_.a2=ka,_.a3=L_,_.a4=up,_.a5=pt,_.a6=function(o,r,a){if(!o)return r||{};if(!r)return o||{};const f=hp(o),p=hp(r);(function(b,E){E.removeAll&&(b.add.clear(),b.update.clear(),b.remove.clear(),E.remove.clear());for(const C of E.remove)b.add.delete(C),b.update.delete(C);for(const[C,k]of E.update){const N=b.update.get(C);N&&(E.update.set(C,Ry(N,k)),b.update.delete(C))}})(f,p);const x={};if((f.removeAll||p.removeAll)&&(x.removeAll=!0),x.remove=new Set([...f.remove,...p.remove]),x.add=new Map([...f.add,...p.add]),x.update=new Map([...f.update,...p.update]),x.remove.size&&x.add.size)for(const b of x.add.keys())x.remove.delete(b);return(function(b){const E={};return b.removeAll&&(E.removeAll=b.removeAll),b.remove&&(E.remove=Array.from(b.remove)),b.add&&(E.add=Array.from(b.add.values())),b.update&&(E.update=Array.from(b.update.values())),E})(x)},_.a7=function(o,r){const a=new Map;if(o==null||o.type==null)return a;if(o.type==="Feature"){const f=cp(o,r);return f==null?void 0:(a.set(f,o),a)}if(o.type==="FeatureCollection"){const f=new Set;for(const p of o.features){const x=cp(p,r);if(x==null||f.has(x))return;f.add(x),a.set(x,p)}return a}},_.a8=function(o,r,a){var f,p;const x=[];if(r.removeAll)o.clear();else if(r.remove)for(const b of r.remove){const E=o.get(b);E&&(x.push(E.geometry),o.delete(b))}if(r.add)for(const b of r.add){const E=cp(b,a);if(E==null)continue;const C=o.get(E);C&&x.push(C.geometry),x.push(b.geometry),o.set(E,b)}if(r.update)for(const b of r.update){const E=o.get(b.id);if(!E)continue;const C=!!b.newGeometry,k=b.removeAllProperties||((f=b.removeProperties)===null||f===void 0?void 0:f.length)>0||((p=b.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0;if(!C&&!k)continue;x.push(E.geometry);const N=Object.assign({},E);if(o.set(b.id,N),C&&(x.push(b.newGeometry),N.geometry=b.newGeometry),k){if(N.properties=b.removeAllProperties?{}:Object.assign({},N.properties||{}),b.removeProperties)for(const B of b.removeProperties)delete N.properties[B];if(b.addOrUpdateProperties)for(const{key:B,value:G}of b.addOrUpdateProperties)N.properties[B]=G}}return x},_.a9=Zr,_.aA=function(o,{uSize:r,uSizeT:a},{lowerSize:f,upperSize:p}){return o.kind==="source"?f/Do:o.kind==="composite"?mn.number(f/Do,p/Do,a):r},_.aB=function(o,r){var a=r[0],f=r[1],p=r[2],x=r[3],b=r[4],E=r[5],C=r[6],k=r[7],N=r[8],B=r[9],G=r[10],Z=r[11],J=r[12],te=r[13],ie=r[14],ue=r[15],ve=a*E-f*b,se=a*C-p*b,de=a*k-x*b,Se=f*C-p*E,Ie=f*k-x*E,Ye=p*k-x*C,ct=N*te-B*J,ft=N*ie-G*J,xt=N*ue-Z*J,Dt=B*ie-G*te,Tt=B*ue-Z*te,dt=G*ue-Z*ie,it=ve*dt-se*Tt+de*Dt+Se*xt-Ie*ft+Ye*ct;return it?(o[0]=(E*dt-C*Tt+k*Dt)*(it=1/it),o[1]=(p*Tt-f*dt-x*Dt)*it,o[2]=(te*Ye-ie*Ie+ue*Se)*it,o[3]=(G*Ie-B*Ye-Z*Se)*it,o[4]=(C*xt-b*dt-k*ft)*it,o[5]=(a*dt-p*xt+x*ft)*it,o[6]=(ie*de-J*Ye-ue*se)*it,o[7]=(N*Ye-G*de+Z*se)*it,o[8]=(b*Tt-E*xt+k*ct)*it,o[9]=(f*xt-a*Tt-x*ct)*it,o[10]=(J*Ie-te*de+ue*ve)*it,o[11]=(B*de-N*Ie-Z*ve)*it,o[12]=(E*ft-b*Dt-C*ct)*it,o[13]=(a*Dt-f*ft+p*ct)*it,o[14]=(te*se-J*Se-ie*ve)*it,o[15]=(N*Se-B*se+G*ve)*it,o):null},_.aC=Ge,_.aD=function(o){var r=o[0],a=o[1];return Math.sqrt(r*r+a*a)},_.aE=function(o){return o[0]=0,o[1]=0,o},_.aF=function(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o},_.aG=Cy,_.aH=Ue,_.aI=function(o,r,a,f){const p=r.y-o.y,x=r.x-o.x,b=f.y-a.y,E=f.x-a.x,C=b*x-E*p;if(C===0)return null;const k=(E*(o.y-a.y)-b*(o.x-a.x))/C;return new M(o.x+k*x,o.y+k*p)},_.aJ=h,_.aK=Ah,_.aL=function(o){let r=1/0,a=1/0,f=-1/0,p=-1/0;for(const x of o)r=Math.min(r,x.x),a=Math.min(a,x.y),f=Math.max(f,x.x),p=Math.max(p,x.y);return[r,a,f,p]},_.aM=si,_.aN=Rt,_.aO=function(o,r,a,f,p=!1){if(!a[0]&&!a[1])return[0,0];const x=p?f==="map"?-o.bearingInRadians:0:f==="viewport"?o.bearingInRadians:0;if(x){const b=Math.sin(x),E=Math.cos(x);a=[a[0]*E-a[1]*b,a[0]*b+a[1]*E]}return[p?a[0]:Rt(r,a[0],o.zoom),p?a[1]:Rt(r,a[1],o.zoom)]},_.aQ=Gm,_.aR=bb,_.aS=Ty,_.aT=wb,_.aU=gn,_.aV=Jd,_.aW=fe,_.aX=It,_.aY=Qe,_.aZ=va,_.a_=ky,_.aa=yc,_.ab=25,_.ac=Ai,_.ad=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise((a=>{r.onloadstart=()=>{a(r)};for(const f of o){const p=window.document.createElement("source");He(f)||(r.crossOrigin="Anonymous"),p.src=f,r.appendChild(p)}}))},_.ae=wt,_.af=function(){return mt++},_.ag=y,_.ah=ed,_.ai=Sc,_.aj=Yi,_.ak=Co,_.al=Qm,_.am=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((a,f,p,x)=>{const b=p||x;return r[f]=!b||b.toLowerCase(),""})),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r},_.an=Yt,_.ao=85.051129,_.ap=ri,_.aq=function(o){return Math.pow(2,o)},_.ar=ke,_.as=R_,_.at=function(o){return Math.log(o)/Math.LN2},_.au=function(o){var r=o[0],a=o[1];return r*r+a*a},_.av=function(o){if(!o.length)return new Set;const r=Math.max(...o.map((C=>C.canonical.z)));let a=1/0,f=-1/0,p=1/0,x=-1/0;const b=[];for(const C of o){const{x:k,y:N,z:B}=C.canonical,G=Math.pow(2,r-B),Z=k*G,J=N*G;b.push({id:C,x:Z,y:J}),Z<a&&(a=Z),Z>f&&(f=Z),J<p&&(p=J),J>x&&(x=J)}const E=new Set;for(const C of b)C.x!==a&&C.x!==f&&C.y!==p&&C.y!==x||E.add(C.id);return E},_.aw=function(o,r){const a=Math.abs(2*o.wrap)-+(o.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return o.overscaledZ-r.overscaledZ||f-a||r.canonical.y-o.canonical.y||r.canonical.x-o.canonical.x},_.ax=class{constructor(o,r){this.max=o,this.onRemove=r,this.reset()}reset(){for(const o in this.data)for(const r of this.data[o])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(o,r,a){const f=o.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const p={value:r,timeout:void 0};if(a!==void 0&&(p.timeout=setTimeout((()=>{this.remove(o,p)}),a)),this.data[f].push(p),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const r=this.data[o].shift();return r.timeout&&clearTimeout(r.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),r.value}getByKey(o){const r=this.data[o];return r?r[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,r){if(!this.has(o))return this;const a=o.wrapped().key,f=r===void 0?0:this.data[a].indexOf(r),p=this.data[a][f];return this.data[a].splice(f,1),p.timeout&&clearTimeout(p.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(p.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(o){const r=[];for(const a in this.data)for(const f of this.data[a])o(f.value)||r.push(f);for(const a of r)this.remove(a.value.tileID,a)}},_.ay=function(o,r){let a=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:x,maxZoom:b}=o,E=p?Yt(Bi.interpolationFactor(p,r,x,b),0,1):0;o.kind==="camera"?f=mn.number(o.minSize,o.maxSize,E):a=E}return{uSizeT:a,uSize:f}},_.b=ya,_.b$=Mo,_.b0=bt,_.b1=function(o){var r=new ge(3);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r},_.b2=function(o,r,a){return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],o},_.b3=function(o,r){var a=r[0],f=r[1],p=r[2],x=a*a+f*f+p*p;return x>0&&(x=1/Math.sqrt(x)),o[0]=r[0]*x,o[1]=r[1]*x,o[2]=r[2]*x,o},_.b4=We,_.b5=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]},_.b6=function(o,r,a){return o[0]=r[0]*a[0],o[1]=r[1]*a[1],o[2]=r[2]*a[2],o[3]=r[3]*a[3],o},_.b7=Re,_.b8=function(o,r,a){const f=r[0]*a[0]+r[1]*a[1]+r[2]*a[2];return f===0?null:(-(o[0]*a[0]+o[1]*a[1]+o[2]*a[2])-a[3])/f},_.b9=Ot,_.bA=function(){return new Float64Array(3)},_.bB=Le,_.bC=function(o,r,a){var f=a[0],p=a[1],x=a[2],b=a[3],E=r[0],C=r[1],k=r[2],N=p*k-x*C,B=x*E-f*k,G=f*C-p*E;return o[0]=E+b*(N+=N)+p*(G+=G)-x*(B+=B),o[1]=C+b*B+x*N-f*G,o[2]=k+b*G+f*B-p*N,o},_.bD=function(o,r,a){const f=(p=[o[0],o[1],o[2],r[0],r[1],r[2],a[0],a[1],a[2]])[0]*((N=p[8])*(b=p[4])-(E=p[5])*(k=p[7]))+p[1]*(-N*(x=p[3])+E*(C=p[6]))+p[2]*(k*x-b*C);var p,x,b,E,C,k,N;if(f===0)return null;const B=We([],[r[0],r[1],r[2]],[a[0],a[1],a[2]]),G=We([],[a[0],a[1],a[2]],[o[0],o[1],o[2]]),Z=We([],[o[0],o[1],o[2]],[r[0],r[1],r[2]]),J=kt([],B,-o[3]);return bt(J,J,kt([],G,-r[3])),bt(J,J,kt([],Z,-a[3])),kt(J,J,1/f),J},_.bE=Ym,_.bF=function(){return new Float64Array(4)},_.bG=function(o,r,a,f){var p=[],x=[];return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],x[0]=p[0]*Math.cos(f)-p[1]*Math.sin(f),x[1]=p[0]*Math.sin(f)+p[1]*Math.cos(f),x[2]=p[2],o[0]=x[0]+a[0],o[1]=x[1]+a[1],o[2]=x[2]+a[2],o},_.bH=function(o,r,a,f){var p=[],x=[];return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],x[0]=p[0],x[1]=p[1]*Math.cos(f)-p[2]*Math.sin(f),x[2]=p[1]*Math.sin(f)+p[2]*Math.cos(f),o[0]=x[0]+a[0],o[1]=x[1]+a[1],o[2]=x[2]+a[2],o},_.bI=function(o,r,a,f){var p=[],x=[];return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],x[0]=p[2]*Math.sin(f)+p[0]*Math.cos(f),x[1]=p[1],x[2]=p[2]*Math.cos(f)-p[0]*Math.sin(f),o[0]=x[0]+a[0],o[1]=x[1]+a[1],o[2]=x[2]+a[2],o},_.bJ=function(o,r,a){var f=Math.sin(a),p=Math.cos(a),x=r[0],b=r[1],E=r[2],C=r[3],k=r[8],N=r[9],B=r[10],G=r[11];return r!==o&&(o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=x*p-k*f,o[1]=b*p-N*f,o[2]=E*p-B*f,o[3]=C*p-G*f,o[8]=x*f+k*p,o[9]=b*f+N*p,o[10]=E*f+B*p,o[11]=C*f+G*p,o},_.bK=function(o,r){const a=De(o,360),f=De(r,360),p=f-a,x=f>a?p-360:p+360;return Math.abs(p)<Math.abs(x)?p:x},_.bL=function(o){return o[0]=0,o[1]=0,o[2]=0,o},_.bM=function(o,r,a,f){const p=Math.sqrt(o*o+r*r),x=Math.sqrt(a*a+f*f);o/=p,r/=p,a/=x,f/=x;const b=Math.acos(o*a+r*f);return-r*a+o*f>0?b:-b},_.bN=function(o,r){const a=De(o,2*Math.PI),f=De(r,2*Math.PI);return Math.min(Math.abs(a-f),Math.abs(a-f+2*Math.PI),Math.abs(a-f-2*Math.PI))},_.bO=function(){const o={},r=Me.$version;for(const a in Me.$root){const f=Me.$root[a];if(f.required){let p=null;p=a==="version"?r:f.type==="array"?[]:{},p!=null&&(o[a]=p)}}return o},_.bP=be,_.bQ=Rf,_.bR=function o(r,a){if(Array.isArray(r)){if(!Array.isArray(a)||r.length!==a.length)return!1;for(let f=0;f<r.length;f++)if(!o(r[f],a[f]))return!1;return!0}if(typeof r=="object"&&r!==null&&a!==null){if(typeof a!="object"||Object.keys(r).length!==Object.keys(a).length)return!1;for(const f in r)if(!o(r[f],a[f]))return!1;return!0}return r===a},_.bS=function(o){o=o.slice();const r=Object.create(null);for(let a=0;a<o.length;a++)r[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=nr(o[a],r[o[a].ref]));return o},_.bT=function(o,r){if(o.type==="custom")return new Oy(o,r);switch(o.type){case"background":return new Pr(o,r);case"circle":return new Sm(o,r);case"color-relief":return new l_(o,r);case"fill":return new d_(o,r);case"fill-extrusion":return new yy(o,r);case"heatmap":return new o_(o,r);case"hillshade":return new kn(o,r);case"line":return new _y(o,r);case"raster":return new Is(o,r);case"symbol":return new gc(o,r)}},_.bU=o=>o.type==="raster",_.bV=Et,_.bW=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let a=[];try{if(!Wt(o.version,r.version))return[{command:"setStyle",args:[r]}];Wt(o.center,r.center)||a.push({command:"setCenter",args:[r.center]}),Wt(o.state,r.state)||a.push({command:"setGlobalState",args:[r.state]}),Wt(o.centerAltitude,r.centerAltitude)||a.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Wt(o.zoom,r.zoom)||a.push({command:"setZoom",args:[r.zoom]}),Wt(o.bearing,r.bearing)||a.push({command:"setBearing",args:[r.bearing]}),Wt(o.pitch,r.pitch)||a.push({command:"setPitch",args:[r.pitch]}),Wt(o.roll,r.roll)||a.push({command:"setRoll",args:[r.roll]}),Wt(o.sprite,r.sprite)||a.push({command:"setSprite",args:[r.sprite]}),Wt(o.glyphs,r.glyphs)||a.push({command:"setGlyphs",args:[r.glyphs]}),Wt(o.transition,r.transition)||a.push({command:"setTransition",args:[r.transition]}),Wt(o.light,r.light)||a.push({command:"setLight",args:[r.light]}),Wt(o.terrain,r.terrain)||a.push({command:"setTerrain",args:[r.terrain]}),Wt(o.sky,r.sky)||a.push({command:"setSky",args:[r.sky]}),Wt(o.projection,r.projection)||a.push({command:"setProjection",args:[r.projection]});const f={},p=[];(function(b,E,C,k){let N;for(N in E=E||{},b=b||{})Object.prototype.hasOwnProperty.call(b,N)&&(Object.prototype.hasOwnProperty.call(E,N)||ir(N,C,k));for(N in E)Object.prototype.hasOwnProperty.call(E,N)&&(Object.prototype.hasOwnProperty.call(b,N)?Wt(b[N],E[N])||(b[N].type==="geojson"&&E[N].type==="geojson"&&Mn(b,E,N)?Qt(C,{command:"setGeoJSONSourceData",args:[N,E[N].data]}):hn(N,E,C,k)):er(N,E,C))})(o.sources,r.sources,p,f);const x=[];o.layers&&o.layers.forEach((b=>{"source"in b&&f[b.source]?a.push({command:"removeLayer",args:[b.id]}):x.push(b)})),a=a.concat(p),(function(b,E,C){E=E||[];const k=(b=b||[]).map(wi),N=E.map(wi),B=b.reduce(fn,{}),G=E.reduce(fn,{}),Z=k.slice(),J=Object.create(null);let te,ie,ue,ve,se;for(let de=0,Se=0;de<k.length;de++)te=k[de],Object.prototype.hasOwnProperty.call(G,te)?Se++:(Qt(C,{command:"removeLayer",args:[te]}),Z.splice(Z.indexOf(te,Se),1));for(let de=0,Se=0;de<N.length;de++)te=N[N.length-1-de],Z[Z.length-1-de]!==te&&(Object.prototype.hasOwnProperty.call(B,te)?(Qt(C,{command:"removeLayer",args:[te]}),Z.splice(Z.lastIndexOf(te,Z.length-Se),1)):Se++,ve=Z[Z.length-de],Qt(C,{command:"addLayer",args:[G[te],ve]}),Z.splice(Z.length-de,0,te),J[te]=!0);for(let de=0;de<N.length;de++)if(te=N[de],ie=B[te],ue=G[te],!J[te]&&!Wt(ie,ue))if(Wt(ie.source,ue.source)&&Wt(ie["source-layer"],ue["source-layer"])&&Wt(ie.type,ue.type)){for(se in xn(ie.layout,ue.layout,C,te,null,"setLayoutProperty"),xn(ie.paint,ue.paint,C,te,null,"setPaintProperty"),Wt(ie.filter,ue.filter)||Qt(C,{command:"setFilter",args:[te,ue.filter]}),Wt(ie.minzoom,ue.minzoom)&&Wt(ie.maxzoom,ue.maxzoom)||Qt(C,{command:"setLayerZoomRange",args:[te,ue.minzoom,ue.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,se)&&se!=="layout"&&se!=="paint"&&se!=="filter"&&se!=="metadata"&&se!=="minzoom"&&se!=="maxzoom"&&(se.indexOf("paint.")===0?xn(ie[se],ue[se],C,te,se.slice(6),"setPaintProperty"):Wt(ie[se],ue[se])||Qt(C,{command:"setLayerProperty",args:[te,se,ue[se]]}));for(se in ue)Object.prototype.hasOwnProperty.call(ue,se)&&!Object.prototype.hasOwnProperty.call(ie,se)&&se!=="layout"&&se!=="paint"&&se!=="filter"&&se!=="metadata"&&se!=="minzoom"&&se!=="maxzoom"&&(se.indexOf("paint.")===0?xn(ie[se],ue[se],C,te,se.slice(6),"setPaintProperty"):Wt(ie[se],ue[se])||Qt(C,{command:"setLayerProperty",args:[te,se,ue[se]]}))}else Qt(C,{command:"removeLayer",args:[te]}),ve=Z[Z.lastIndexOf(te)+1],Qt(C,{command:"addLayer",args:[ue,ve]})})(x,r.layers,a)}catch(f){console.warn("Unable to compute style diff:",f),a=[{command:"setStyle",args:[r]}]}return a},_.bX=function(o){const r=[],a=o.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},_.bY=or,_.bZ=mr,_.b_=class extends ea{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},_.ba=function(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o[3]=r[3]*a,o},_.bb=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]},_.bc=j_,_.bd=rd,_.be=function(o,r,a,f,p){var x=1/Math.tan(r/2);if(o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0){var b=1/(f-p);o[10]=(p+f)*b,o[14]=2*p*f*b}else o[10]=-1,o[14]=-2*f;return o},_.bf=function(o){var r=new ge(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},_.bg=function(o,r,a){var f=Math.sin(a),p=Math.cos(a),x=r[0],b=r[1],E=r[2],C=r[3],k=r[4],N=r[5],B=r[6],G=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=x*p+k*f,o[1]=b*p+N*f,o[2]=E*p+B*f,o[3]=C*p+G*f,o[4]=k*p-x*f,o[5]=N*p-b*f,o[6]=B*p-E*f,o[7]=G*p-C*f,o},_.bh=function(o,r,a){var f=Math.sin(a),p=Math.cos(a),x=r[4],b=r[5],E=r[6],C=r[7],k=r[8],N=r[9],B=r[10],G=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=x*p+k*f,o[5]=b*p+N*f,o[6]=E*p+B*f,o[7]=C*p+G*f,o[8]=k*p-x*f,o[9]=N*p-b*f,o[10]=B*p-E*f,o[11]=G*p-C*f,o},_.bi=function(){const o=new Float32Array(16);return ke(o),o},_.bj=function(){const o=new Float64Array(16);return ke(o),o},_.bk=function(){return new Float64Array(16)},_.bl=function(o,r,a){const f=new Float64Array(4);return Le(f,o,r-90,a),f},_.bm=function(o,r,a,f){var p,x,b,E,C,k=r[0],N=r[1],B=r[2],G=r[3],Z=a[0],J=a[1],te=a[2],ie=a[3];return(x=k*Z+N*J+B*te+G*ie)<0&&(x=-x,Z=-Z,J=-J,te=-te,ie=-ie),1-x>ye?(p=Math.acos(x),b=Math.sin(p),E=Math.sin((1-f)*p)/b,C=Math.sin(f*p)/b):(E=1-f,C=f),o[0]=E*k+C*Z,o[1]=E*N+C*J,o[2]=E*B+C*te,o[3]=E*G+C*ie,o},_.bn=function(o){const r=new Float64Array(9);var a,f,p,x,b,E,C,k,N,B,G,Z,J,te,ie,ue,ve,se;B=(p=(f=o)[0])*(C=p+p),G=(x=f[1])*C,J=(b=f[2])*C,te=b*(k=x+x),ue=(E=f[3])*C,ve=E*k,se=E*(N=b+b),(a=r)[0]=1-(Z=x*k)-(ie=b*N),a[3]=G-se,a[6]=J+ve,a[1]=G+se,a[4]=1-B-ie,a[7]=te-ue,a[2]=J-ve,a[5]=te+ue,a[8]=1-B-Z;const de=va(-Math.asin(Yt(r[2],-1,1)));let Se,Ie;return Math.hypot(r[5],r[8])<.001?(Se=0,Ie=-va(Math.atan2(r[3],r[4]))):(Se=va(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),Ie=va(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:Se,pitch:de+90,bearing:Ie}},_.bo=function(o,r){return o.roll==r.roll&&o.pitch==r.pitch&&o.bearing==r.bearing},_.bp=gr,_.bq=cu,_.br=oo,_.bs=js,_.bt=Ei,_.bu=lt,_.bv=Mt,_.bw=ii,_.bx=function(o,r,a,f,p){return lt(f,p,Yt((o-r)/(a-r),0,1))},_.by=function(o,r,a,f){return o[0]=r[0]+a[0]*f,o[1]=r[1]+a[1]*f,o[2]=r[2]+a[2]*f,o},_.bz=De,_.c=Be,_.c$=class{constructor(o){this.start=`${o}#start`,this.end=`${o}#end`,this.measure=o,performance.mark(this.start)}finish(){performance.mark(this.end);let o=performance.getEntriesByName(this.measure);return o.length===0&&(performance.measure(this.measure,this.start,this.end),o=performance.getEntriesByName(this.measure),performance.clearMarks(this.start),performance.clearMarks(this.end),performance.clearMeasures(this.measure)),o}},_.c0=class extends ea{constructor(o,r){super(o,r),this.current=ta}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},_.c1=cc,_.c2=class extends ea{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},_.c3=class extends ea{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},_.c4=Te,_.c5=function(o,r){var a=Math.sin(r),f=Math.cos(r);return o[0]=f,o[1]=a,o[2]=0,o[3]=-a,o[4]=f,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},_.c6=function(o,r,a){var f=r[0],p=r[1],x=r[2];return o[0]=f*a[0]+p*a[3]+x*a[6],o[1]=f*a[1]+p*a[4]+x*a[7],o[2]=f*a[2]+p*a[5]+x*a[8],o},_.c7=function(o,r,a,f,p,x,b){var E=1/(r-a),C=1/(f-p),k=1/(x-b);return o[0]=-2*E,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*C,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*k,o[11]=0,o[12]=(r+a)*E,o[13]=(p+f)*C,o[14]=(b+x)*k,o[15]=1,o},_.c8=class extends ea{constructor(o,r){super(o,r),this.current=new Array}set(o){if(o!=this.current){this.current=o;const r=new Float32Array(4*o.length);for(let a=0;a<o.length;a++)r[4*a]=o[a].r,r[4*a+1]=o[a].g,r[4*a+2]=o[a].b,r[4*a+3]=o[a].a;this.gl.uniform4fv(this.location,r)}}},_.c9=class extends ea{constructor(o,r){super(o,r),this.current=new Array}set(o){if(o!=this.current){this.current=o;const r=new Float32Array(o);this.gl.uniform1fv(this.location,r)}}},_.cA=function(o,r){var a;if(!vs[r])return!1;const f=o?.target,p=((a=f?.ownerDocument)===null||a===void 0?void 0:a.defaultView)||window;return o instanceof p.MouseEvent||o instanceof p.WheelEvent},_.cB=function(o,r){return Nu[r]&&"touches"in o},_.cC=function(o){return Nu[o]||vs[o]},_.cD=function(o,r,a){var f=r[0],p=r[1];return o[0]=a[0]*f+a[4]*p+a[12],o[1]=a[1]*f+a[5]*p+a[13],o},_.cE=function(o,r){const{x:a,y:f}=Zr.fromLngLat(r);return!(o<0||o>25||f<0||f>=1||a<0||a>=1)},_.cF=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},_.cG=class extends ou{},_.cH=Gk,_.cJ=ae,_.cK=function(o,r){Be.REGISTERED_PROTOCOLS[o]=r},_.cL=function(o){delete Be.REGISTERED_PROTOCOLS[o]},_.cM=function(o,r){const a={};for(let p=0;p<o.length;p++){const x=r&&r[o[p].id]||Es(o[p]);r&&(r[o[p].id]=x);let b=a[x];b||(b=a[x]=[]),b.push(o[p])}const f=[];for(const p in a)f.push(a[p]);return f},_.cN=Lt,_.cO=Ly,_.cP=e0,_.cQ=Um,_.cR=function(o){var r;o.bucket.createArrays(),o.bucket.tilePixelRatio=pt/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const a=o.bucket.layers[0],f=a.layout,p=a._unevaluatedLayout._values,x={layoutIconSize:p["icon-size"].possiblyEvaluate(new Ur(o.bucket.zoom+1),o.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Ur(o.bucket.zoom+1),o.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Ur(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:B}=o.bucket.textSizeData;x.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Ur(N),o.canonical),p["text-size"].possiblyEvaluate(new Ur(B),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:B}=o.bucket.iconSizeData;x.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Ur(N),o.canonical),p["icon-size"].possiblyEvaluate(new Ur(B),o.canonical)]}const b=f.get("text-line-height")*si,E=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",C=f.get("text-keep-upright"),k=f.get("text-size");for(const N of o.bucket.features){const B=f.get("text-font").evaluate(N,{},o.canonical).join(","),G=k.evaluate(N,{},o.canonical),Z=x.layoutTextSize.evaluate(N,{},o.canonical),J=x.layoutIconSize.evaluate(N,{},o.canonical),te={horizontal:{},vertical:void 0},ie=N.text;let ue,ve=[0,0];if(ie){const Se=ie.toString(),Ie=f.get("text-letter-spacing").evaluate(N,{},o.canonical)*si,Ye=Lf(Se)?Ie:0,ct=f.get("text-anchor").evaluate(N,{},o.canonical),ft=t0(a,N,o.canonical);if(!ft){const dt=f.get("text-radial-offset").evaluate(N,{},o.canonical);ve=dt?Au(ct,[dt*si,Nr]):f.get("text-offset").evaluate(N,{},o.canonical).map((it=>it*si))}let xt=E?"center":f.get("text-justify").evaluate(N,{},o.canonical);const Dt=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(N,{},o.canonical)*si:1/0,Tt=()=>{o.bucket.allowVerticalPlacement&&ns(Se)&&(te.vertical=op(ie,o.glyphMap,o.glyphPositions,o.imagePositions,B,Dt,b,ct,"left",Ye,ve,_.az.vertical,!0,Z,G))};if(!E&&ft){const dt=new Set;if(xt==="auto")for(let Nt=0;Nt<ft.values.length;Nt+=2)dt.add(bb(ft.values[Nt]));else dt.add(xt);let it=!1;for(const Nt of dt)if(!te.horizontal[Nt])if(it)te.horizontal[Nt]=te.horizontal[0];else{const Ft=op(ie,o.glyphMap,o.glyphPositions,o.imagePositions,B,Dt,b,"center",Nt,Ye,ve,_.az.horizontal,!1,Z,G);Ft&&(te.horizontal[Nt]=Ft,it=Ft.positionedLines.length===1)}Tt()}else{xt==="auto"&&(xt=bb(ct));const dt=op(ie,o.glyphMap,o.glyphPositions,o.imagePositions,B,Dt,b,ct,xt,Ye,ve,_.az.horizontal,!1,Z,G);dt&&(te.horizontal[xt]=dt),Tt(),ns(Se)&&E&&C&&(te.vertical=op(ie,o.glyphMap,o.glyphPositions,o.imagePositions,B,Dt,b,ct,xt,Ye,ve,_.az.vertical,!1,Z,G))}}let se=!1;if(N.icon&&N.icon.name){const Se=o.imageMap[N.icon.name];Se&&(ue=Ay(o.imagePositions[N.icon.name],f.get("icon-offset").evaluate(N,{},o.canonical),f.get("icon-anchor").evaluate(N,{},o.canonical)),se=!!Se.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=se:o.bucket.sdfIcons!==se&&ur("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Se.pixelRatio!==o.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const de=oT(te.horizontal)||te.vertical;(r=o.bucket).iconsInText||(r.iconsInText=!!de&&de.iconsInText),(de||ue)&&Vk(o.bucket,N,te,ue,o.imageMap,x,Z,J,ve,se,o.canonical,o.subdivisionGranularity)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},_.cS=Ch,_.cT=fc,_.cU=Hf,_.cV=function(o){const r=new Nm;return(function(a,f){for(const p in a.layers)f.writeMessage(3,dg,a.layers[p])})(o,r),r.finish()},_.cW=function(o,r,a,f,p,x){let b=g(o,r,a,p,0);return b=g(b,r,f,x,1),b},_.cX=class{constructor(o){this.maxEntries=o,this.map=new Map}get(o){const r=this.map.get(o);return r!==void 0&&(this.map.delete(o),this.map.set(o,r)),r}set(o,r){if(this.map.has(o))this.map.delete(o);else if(this.map.size>=this.maxEntries){const a=this.map.keys().next().value;this.map.delete(a)}this.map.set(o,r)}clear(){this.map.clear()}},_.cY=Cr,_.cZ=Nm,_.c_=Yy,_.ca=class extends ks{},_.cb=v_,_.cc=class extends yn{},_.cd=$d,_.ce=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},_.cf=wl,_.cg=function(o,r,a){var f=r[0],p=r[1],x=r[2],b=a[3]*f+a[7]*p+a[11]*x+a[15];return o[0]=(a[0]*f+a[4]*p+a[8]*x+a[12])/(b=b||1),o[1]=(a[1]*f+a[5]*p+a[9]*x+a[13])/b,o[2]=(a[2]*f+a[6]*p+a[10]*x+a[14])/b,o},_.ch=class extends su{},_.ci=class extends n{},_.cj=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},_.ck=function(o,r){var a=o[0],f=o[1],p=o[2],x=o[3],b=o[4],E=o[5],C=o[6],k=o[7],N=o[8],B=o[9],G=o[10],Z=o[11],J=o[12],te=o[13],ie=o[14],ue=o[15],ve=r[0],se=r[1],de=r[2],Se=r[3],Ie=r[4],Ye=r[5],ct=r[6],ft=r[7],xt=r[8],Dt=r[9],Tt=r[10],dt=r[11],it=r[12],Nt=r[13],Ft=r[14],Ht=r[15];return Math.abs(a-ve)<=ye*Math.max(1,Math.abs(a),Math.abs(ve))&&Math.abs(f-se)<=ye*Math.max(1,Math.abs(f),Math.abs(se))&&Math.abs(p-de)<=ye*Math.max(1,Math.abs(p),Math.abs(de))&&Math.abs(x-Se)<=ye*Math.max(1,Math.abs(x),Math.abs(Se))&&Math.abs(b-Ie)<=ye*Math.max(1,Math.abs(b),Math.abs(Ie))&&Math.abs(E-Ye)<=ye*Math.max(1,Math.abs(E),Math.abs(Ye))&&Math.abs(C-ct)<=ye*Math.max(1,Math.abs(C),Math.abs(ct))&&Math.abs(k-ft)<=ye*Math.max(1,Math.abs(k),Math.abs(ft))&&Math.abs(N-xt)<=ye*Math.max(1,Math.abs(N),Math.abs(xt))&&Math.abs(B-Dt)<=ye*Math.max(1,Math.abs(B),Math.abs(Dt))&&Math.abs(G-Tt)<=ye*Math.max(1,Math.abs(G),Math.abs(Tt))&&Math.abs(Z-dt)<=ye*Math.max(1,Math.abs(Z),Math.abs(dt))&&Math.abs(J-it)<=ye*Math.max(1,Math.abs(J),Math.abs(it))&&Math.abs(te-Nt)<=ye*Math.max(1,Math.abs(te),Math.abs(Nt))&&Math.abs(ie-Ft)<=ye*Math.max(1,Math.abs(ie),Math.abs(Ft))&&Math.abs(ue-Ht)<=ye*Math.max(1,Math.abs(ue),Math.abs(Ht))},_.cl=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},_.cm=o=>o.type==="symbol",_.cn=o=>o.type==="circle",_.co=o=>o.type==="heatmap",_.cp=o=>o.type==="line",_.cq=o=>o.type==="fill",_.cr=o=>o.type==="fill-extrusion",_.cs=o=>o.type==="hillshade",_.ct=o=>o.type==="color-relief",_.cu=o=>o.type==="background",_.cv=o=>o.type==="custom",_.cw=zt,_.cx=function(o,r,a){if(r<=0)return o;const f=1/r;return a===void 0||Math.abs(a)<1e-10?Math.round(o*f)/f:(a>0?Math.ceil(o*f-1e-9):Math.floor(o*f+1e-10))/f},_.cy=function(o,r,a){const f=st(r.x-a.x,r.y-a.y),p=st(o.x-a.x,o.y-a.y);var x,b;return va(Math.atan2(f[0]*p[1]-f[1]*p[0],(x=f)[0]*(b=p)[0]+x[1]*b[1]))},_.cz=qt,_.d=He,_.d0=function(o,r,a,f,p){return c(this,void 0,void 0,(function*(){if(he())try{return yield ys(o,r,a,f,p)}catch{}return(function(x,b,E,C,k){const N=x.width,B=x.height;No&&go||(No=new OffscreenCanvas(N,B),go=No.getContext("2d",{willReadFrequently:!0})),No.width=N,No.height=B,go.drawImage(x,0,0,N,B);const G=go.getImageData(b,E,C,k);return go.clearRect(0,0,N,B),G.data})(o,r,a,f,p)}))},_.d1=qf,_.d2=P,_.d3=class{constructor(o,r){this.layers={[Sc]:this},this.name=Sc,this.version=r?r.version:1,this.extent=r?r.extent:4096,this.length=o.length,this.features=o}feature(o){return new xb(this.features[o],this.extent)}},_.d4=ec,_.d5=eo,_.e=Ar,_.f=o=>c(void 0,void 0,void 0,(function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),_.g=ee,_.h=o=>new Promise(((r,a)=>{const f=new Image;f.onload=()=>{r(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=Ys}))},f.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});f.src=o.byteLength?URL.createObjectURL(p):Ys})),_.i=sn,_.j=(o,r)=>Ce(Ar(o,{type:"json"}),r),_.k=vt,_.l=Ze,_.m=Ce,_.n=(o,r)=>Ce(Ar(o,{type:"arrayBuffer"}),r),_.o=function(o){return new Nm(o).readFields(M_,[])},_.p=Sy,_.q=function(o){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))},_.r=Gd,_.s=ju,_.t=Bn,_.u=Me,_.v=fh,_.w=ur,_.x=Nf,_.y=xo,_.z=Os})),m("worker",["./shared"],(function(_){class c{constructor(ee,ne){this.keyCache={},ee&&this.replace(ee,ne)}replace(ee,ne){this._layerConfigs={},this._layers={},this.update(ee,[],ne)}update(ee,ne,ae){for(const Ce of ee){this._layerConfigs[Ce.id]=Ce;const He=this._layers[Ce.id]=_.bT(Ce,ae);He._featureFilter=_.aj(He.filter,ae),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of ne)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const be=_.cM(Object.values(this._layerConfigs),this.keyCache);for(const Ce of be){const He=Ce.map((Me=>this._layers[Me.id])),$e=He[0];if($e.isHidden())continue;const Fe=$e.source||"";let Ze=this.familiesBySource[Fe];Ze||(Ze=this.familiesBySource[Fe]={});const vt=$e.sourceLayer||_.ai;let at=Ze[vt];at||(at=Ze[vt]=[]),at.push(He)}}}class M{constructor(ee){const ne={},ae=[];for(const $e in ee){const Fe=ee[$e],Ze=ne[$e]={};for(const vt in Fe){const at=Fe[+vt];if(!at||at.bitmap.width===0||at.bitmap.height===0)continue;const Me={x:0,y:0,w:at.bitmap.width+2,h:at.bitmap.height+2};ae.push(Me),Ze[vt]={rect:Me,metrics:at.metrics}}}const{w:be,h:Ce}=_.p(ae),He=new _.r({width:be||1,height:Ce||1});for(const $e in ee){const Fe=ee[$e];for(const Ze in Fe){const vt=Fe[+Ze];if(!vt||vt.bitmap.width===0||vt.bitmap.height===0)continue;const at=ne[$e][Ze].rect;_.r.copy(vt.bitmap,He,{x:0,y:0},{x:at.x+1,y:at.y+1},vt.bitmap)}}this.image=He,this.positions=ne}}_.cN("GlyphAtlas",M);class P{constructor(ee){this.tileID=new _.a2(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,ne,ae,be,Ce){return _._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new _.ag;const He=new _.cO(Object.keys(ee.layers).sort()),$e=new _.cP(this.tileID,this.promoteId);$e.bucketLayerIDs=[];const Fe={},Ze={featureIndex:$e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ae,subdivisionGranularity:Ce},vt=ne.familiesBySource[this.source];for(const Dr in vt){const an=ee.layers[Dr];if(!an)continue;an.version===1&&_.w(`Vector tile source "${this.source}" layer "${Dr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wi=He.encode(Dr),Fr=[];for(let At=0;At<an.length;At++){const Kt=an.feature(At),cr=$e.getId(Kt,Dr);Fr.push({feature:Kt,id:cr,index:At,sourceLayerIndex:Wi})}for(const At of vt[Dr]){const Kt=At[0];Kt.source!==this.source&&_.w(`layer.source = ${Kt.source} does not equal this.source = ${this.source}`),Kt.isHidden(this.zoom,!0)||(D(At,this.zoom,ae),(Fe[Kt.id]=Kt.createBucket({index:$e.bucketLayerIDs.length,layers:At,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wi,sourceID:this.source})).populate(Fr,Ze,this.tileID.canonical),$e.bucketLayerIDs.push(At.map((cr=>cr.id))))}}const at=_.bY(Ze.glyphDependencies,(Dr=>Object.keys(Dr).map(Number)));this.inFlightDependencies.forEach((Dr=>Dr?.abort())),this.inFlightDependencies=[];let Me=Promise.resolve({});if(Object.keys(at).length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),Me=be.sendAsync({type:"GG",data:{stacks:at,source:this.source,tileID:this.tileID,type:"glyphs"}},Dr)}const Bt=Object.keys(Ze.iconDependencies);let nr=Promise.resolve({});if(Bt.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),nr=be.sendAsync({type:"GI",data:{icons:Bt,source:this.source,tileID:this.tileID,type:"icons"}},Dr)}const Wt=Object.keys(Ze.patternDependencies);let Qt=Promise.resolve({});if(Wt.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),Qt=be.sendAsync({type:"GI",data:{icons:Wt,source:this.source,tileID:this.tileID,type:"patterns"}},Dr)}const er=Ze.dashDependencies;let ir=Promise.resolve({});if(Object.keys(er).length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),ir=be.sendAsync({type:"GDA",data:{dashes:er}},Dr)}const[hn,Mn,xn,wi]=yield Promise.all([Me,nr,Qt,ir]),fn=new M(hn),wt=new _.cQ(Mn,xn);for(const Dr in Fe){const an=Fe[Dr];an instanceof _.ah?(D(an.layers,this.zoom,ae),_.cR({bucket:an,glyphMap:hn,glyphPositions:fn.positions,imageMap:Mn,imagePositions:wt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ze.subdivisionGranularity})):an.hasDependencies&&(an instanceof _.cS||an instanceof _.cT||an instanceof _.cU)&&(D(an.layers,this.zoom,ae),an.addFeatures(Ze,this.tileID.canonical,wt.patternPositions,wi))}return this.status="done",{buckets:Object.values(Fe).filter((Dr=>!Dr.isEmpty())),featureIndex:$e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:fn.image,imageAtlas:wt,dashPositions:wi,glyphMap:this.returnDependencies?hn:null,iconMap:this.returnDependencies?Mn:null,glyphPositions:this.returnDependencies?fn.positions:null}}))}}function D(Be,ee,ne){const ae=new _.H(ee);for(const be of Be)be.recalculate(ae,ne)}class z{constructor(){this.loading={},this.loaded={},this.parsing={}}startLoading(ee,ne){this.loading[ee]=ne}finishLoading(ee){delete this.loading[ee]}abort(ee){const ne=this.loading[ee];ne?.abort&&(ne.abort.abort(),delete this.loading[ee])}setParsing(ee,ne){this.parsing[ee]=ne}consumeParsing(ee){const ne=this.parsing[ee];if(ne)return delete this.parsing[ee],ne}clearParsing(ee){delete this.parsing[ee]}markLoaded(ee,ne){this.loaded[ee]=ne}getLoaded(ee){const ne=this.loaded[ee];if(ne)return ne}removeLoaded(ee){delete this.loaded[ee]}clearLoaded(){this.loaded={}}}class F{constructor(ee,ne,ae,be,Ce){this.type=ee,this.properties=ae||{},this.extent=Ce,this.pointsArray=ne,this.id=be}loadGeometry(){return this.pointsArray.map((ee=>ee.map((ne=>new _.P(ne.x,ne.y)))))}}class ${constructor(ee,ne,ae){this.version=2,this._myFeatures=ee,this.name=ne,this.length=ee.length,this.extent=ae}feature(ee){return this._myFeatures[ee]}}class Y{constructor(){this.layers={}}addLayer(ee){this.layers[ee.name]=ee}}function K(Be){let ee=_.cV(Be);return ee.byteOffset===0&&ee.byteLength===ee.buffer.byteLength||(ee=new Uint8Array(ee)),{vectorTile:Be,rawData:ee.buffer}}function q(Be,ee,ne){const{extent:ae}=Be,be=Math.pow(2,ne.z-ee.z),Ce=(ne.x-ee.x*be)*ae,He=(ne.y-ee.y*be)*ae,$e=[];for(let Fe=0;Fe<Be.length;Fe++){const Ze=Be.feature(Fe);let vt=Ze.loadGeometry();for(const Me of vt)for(const Bt of Me)Bt.x=Bt.x*be-Ce,Bt.y=Bt.y*be-He;const at=128;vt=_.cW(vt,Ze.type,-at,-at,ae+at,ae+at),vt.length!==0&&$e.push(new F(Ze.type,vt,Ze.properties,Ze.id,ae))}return new $($e,Be.name,ae)}class he{constructor(ee,ne,ae){this.actor=ee,this.layerIndex=ne,this.availableImages=ae,this.tileState=new z,this.overzoomedTileResultCache=new _.cX(1e3)}loadVectorTile(ee,ne){return _._(this,void 0,void 0,(function*(){const ae=yield _.n(ee.request,ne);try{return{vectorTile:ee.encoding!=="mlt"?new _.cY(new _.cZ(ae.data)):new _.c_(ae.data),rawData:ae.data,cacheControl:ae.cacheControl,expires:ae.expires}}catch(be){const Ce=new Uint8Array(ae.data);let He=`Unable to parse the tile at ${ee.request.url}, `;throw He+=Ce[0]===31&&Ce[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${be.message}`,new Error(He)}}))}loadTile(ee){return _._(this,void 0,void 0,(function*(){const{uid:ne,overzoomParameters:ae}=ee;ae&&(ee.request=ae.overzoomRequest);const be=this._startRequestTiming(ee),Ce=new P(ee);this.tileState.startLoading(ne,Ce);const He=new AbortController;Ce.abort=He;try{const $e=yield this.loadVectorTile(ee,He);if(this.tileState.finishLoading(ne),!$e)return null;let{vectorTile:Fe,rawData:Ze}=$e;ae&&({vectorTile:Fe,rawData:Ze}=this._getOverzoomTile(ee,$e.vectorTile));const vt=this._getExpiryData($e),at=this._finishRequestTiming(be);Ce.vectorTile=Fe,this.tileState.markLoaded(ne,Ce);const Me={rawData:Ze,cacheControl:vt,resourceTiming:at};this.tileState.setParsing(ne,Me);try{return yield this._parseWorkerTile(Ce,ee,Me)}finally{this.tileState.clearParsing(ne)}}catch($e){throw this.tileState.finishLoading(ne),Ce.status="done",this.tileState.markLoaded(ne,Ce),$e}}))}_parseWorkerTile(ee,ne,ae){return _._(this,void 0,void 0,(function*(){let be=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);if(ae){const{rawData:Ce,cacheControl:He,resourceTiming:$e}=ae;be=_.e({rawTileData:Ce.slice(0),encoding:ne.encoding},be,He,$e)}return be}))}_getExpiryData(ee){const{expires:ne,cacheControl:ae}=ee,be={};return ne&&(be.expires=ne),ae&&(be.cacheControl=ae),be}_startRequestTiming(ee){var ne;if(!((ne=ee.request)===null||ne===void 0)&&ne.collectResourceTiming)return new _.c$(ee.request.url)}_finishRequestTiming(ee){const ne=ee?.finish();return ne?{resourceTiming:JSON.parse(JSON.stringify(ne))}:{}}_getOverzoomTile(ee,ne){const{tileID:ae,source:be,overzoomParameters:Ce}=ee,{maxZoomTileID:He}=Ce,$e=`${He.key}_${ae.key}`,Fe=this.overzoomedTileResultCache.get($e);if(Fe)return Fe;const Ze=new Y,vt=this.layerIndex.familiesBySource[be];for(const Me in vt){const Bt=ne.layers[Me];if(!Bt)continue;const nr=q(Bt,He,ae.canonical);nr.length>0&&Ze.addLayer(nr)}const at=K(Ze);return this.overzoomedTileResultCache.set($e,at),at}reloadTile(ee){return _._(this,void 0,void 0,(function*(){const ne=ee.uid,ae=this.tileState.getLoaded(ne);if(!ae)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ae.showCollisionBoxes=ee.showCollisionBoxes,ae.status==="parsing"){const be=this.tileState.consumeParsing(ne);return yield this._parseWorkerTile(ae,ee,be)}if(ae.status==="done"&&ae.vectorTile)return yield this._parseWorkerTile(ae,ee)}))}abortTile(ee){return _._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return _._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}}class ye{constructor(){this.loaded={}}loadTile(ee){return _._(this,void 0,void 0,(function*(){const{uid:ne,encoding:ae,rawImageData:be,redFactor:Ce,greenFactor:He,blueFactor:$e,baseShift:Fe}=ee,Ze=be.width+2,vt=be.height+2,at=_.b(be)?new _.R({width:Ze,height:vt},yield _.d0(be,-1,-1,Ze,vt)):be,Me=new _.d1(ne,at,ae,Ce,He,$e,Fe);return this.loaded=this.loaded||{},this.loaded[ne]=Me,Me}))}removeTile(ee){const ne=this.loaded,ae=ee.uid;ne&&ne[ae]&&delete ne[ae]}}var ge,Te,ke=(function(){if(Te)return ge;function Be(ne,ae){if(ne.length!==0){ee(ne[0],ae);for(var be=1;be<ne.length;be++)ee(ne[be],!ae)}}function ee(ne,ae){for(var be=0,Ce=0,He=0,$e=ne.length,Fe=$e-1;He<$e;Fe=He++){var Ze=(ne[He][0]-ne[Fe][0])*(ne[Fe][1]+ne[He][1]),vt=be+Ze;Ce+=Math.abs(be)>=Math.abs(Ze)?be-vt+Ze:Ze-vt+be,be=vt}be+Ce>=0!=!!ae&&ne.reverse()}return Te=1,ge=function ne(ae,be){var Ce,He=ae&&ae.type;if(He==="FeatureCollection")for(Ce=0;Ce<ae.features.length;Ce++)ne(ae.features[Ce],be);else if(He==="GeometryCollection")for(Ce=0;Ce<ae.geometries.length;Ce++)ne(ae.geometries[Ce],be);else if(He==="Feature")ne(ae.geometry,be);else if(He==="Polygon")Be(ae.coordinates,be);else if(He==="MultiPolygon")for(Ce=0;Ce<ae.coordinates.length;Ce++)Be(ae.coordinates[Ce],be);return ae}})(),Pe=_.d2(ke);const Re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Be=>Be},ot=Math.fround||(bt=new Float32Array(1),Be=>(bt[0]=+Be,bt[0]));var bt;class kt{constructor(ee){this.options=Object.assign(Object.create(Re),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:ne,minZoom:ae,maxZoom:be}=this.options;ne&&console.time("total time");const Ce=`prepare ${ee.length} points`;ne&&console.time(Ce),this.points=ee;const He=[];for(let Fe=0;Fe<ee.length;Fe++){const Ze=ee[Fe];if(!Ze.geometry)continue;const[vt,at]=Ze.geometry.coordinates,Me=ot(Ot(vt)),Bt=ot(Ue(at));He.push(Me,Bt,1/0,Fe,-1,1),this.options.reduce&&He.push(0)}let $e=this.trees[be+1]=this._createTree(He);ne&&console.timeEnd(Ce);for(let Fe=be;Fe>=ae;Fe--){const Ze=+Date.now();$e=this.trees[Fe]=this._createTree(this._cluster($e,Fe)),ne&&console.log("z%d: %d clusters in %dms",Fe,$e.numItems,+Date.now()-Ze)}return ne&&console.timeEnd("total time"),this}getClusters(ee,ne){let ae=((ee[0]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,ee[1]));let Ce=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ae=-180,Ce=180;else if(ae>Ce){const at=this.getClusters([ae,be,180,He],ne),Me=this.getClusters([-180,be,Ce,He],ne);return at.concat(Me)}const $e=this.trees[this._limitZoom(ne)],Fe=$e.range(Ot(ae),Ue(He),Ot(Ce),Ue(be)),Ze=$e.data,vt=[];for(const at of Fe){const Me=this.stride*at;vt.push(Ze[Me+5]>1?We(Ze,Me,this.clusterProps):this.points[Ze[Me+3]])}return vt}getChildren(ee){const ne=this._getOriginId(ee),ae=this._getOriginZoom(ee),be="No cluster with the specified id.",Ce=this.trees[ae];if(!Ce)throw new Error(be);const He=Ce.data;if(ne*this.stride>=He.length)throw new Error(be);const $e=this.options.radius/(this.options.extent*Math.pow(2,ae-1)),Fe=Ce.within(He[ne*this.stride],He[ne*this.stride+1],$e),Ze=[];for(const vt of Fe){const at=vt*this.stride;He[at+4]===ee&&Ze.push(He[at+5]>1?We(He,at,this.clusterProps):this.points[He[at+3]])}if(Ze.length===0)throw new Error(be);return Ze}getLeaves(ee,ne,ae){const be=[];return this._appendLeaves(be,ee,ne=ne||10,ae=ae||0,0),be}getTile(ee,ne,ae){const be=this.trees[this._limitZoom(ee)],Ce=Math.pow(2,ee),{extent:He,radius:$e}=this.options,Fe=$e/He,Ze=(ae-Fe)/Ce,vt=(ae+1+Fe)/Ce,at={features:[]};return this._addTileFeatures(be.range((ne-Fe)/Ce,Ze,(ne+1+Fe)/Ce,vt),be.data,ne,ae,Ce,at),ne===0&&this._addTileFeatures(be.range(1-Fe/Ce,Ze,1,vt),be.data,Ce,ae,Ce,at),ne===Ce-1&&this._addTileFeatures(be.range(0,Ze,Fe/Ce,vt),be.data,-1,ae,Ce,at),at.features.length?at:null}getClusterExpansionZoom(ee){let ne=this._getOriginZoom(ee)-1;for(;ne<=this.options.maxZoom;){const ae=this.getChildren(ee);if(ne++,ae.length!==1)break;ee=ae[0].properties.cluster_id}return ne}_appendLeaves(ee,ne,ae,be,Ce){const He=this.getChildren(ne);for(const $e of He){const Fe=$e.properties;if(Fe&&Fe.cluster?Ce+Fe.point_count<=be?Ce+=Fe.point_count:Ce=this._appendLeaves(ee,Fe.cluster_id,ae,be,Ce):Ce<be?Ce++:ee.push($e),ee.length===ae)break}return Ce}_createTree(ee){const ne=new _.aT(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ae=0;ae<ee.length;ae+=this.stride)ne.add(ee[ae],ee[ae+1]);return ne.finish(),ne.data=ee,ne}_addTileFeatures(ee,ne,ae,be,Ce,He){for(const $e of ee){const Fe=$e*this.stride,Ze=ne[Fe+5]>1;let vt,at,Me;if(Ze)vt=Ve(ne,Fe,this.clusterProps),at=ne[Fe],Me=ne[Fe+1];else{const Wt=this.points[ne[Fe+3]];vt=Wt.properties;const[Qt,er]=Wt.geometry.coordinates;at=Ot(Qt),Me=Ue(er)}const Bt={type:1,geometry:[[Math.round(this.options.extent*(at*Ce-ae)),Math.round(this.options.extent*(Me*Ce-be))]],tags:vt};let nr;nr=Ze||this.options.generateId?ne[Fe+3]:this.points[ne[Fe+3]].id,nr!==void 0&&(Bt.id=nr),He.features.push(Bt)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ne){const{radius:ae,extent:be,reduce:Ce,minPoints:He}=this.options,$e=ae/(be*Math.pow(2,ne)),Fe=ee.data,Ze=[],vt=this.stride;for(let at=0;at<Fe.length;at+=vt){if(Fe[at+2]<=ne)continue;Fe[at+2]=ne;const Me=Fe[at],Bt=Fe[at+1],nr=ee.within(Fe[at],Fe[at+1],$e),Wt=Fe[at+5];let Qt=Wt;for(const er of nr){const ir=er*vt;Fe[ir+2]>ne&&(Qt+=Fe[ir+5])}if(Qt>Wt&&Qt>=He){let er,ir=Me*Wt,hn=Bt*Wt,Mn=-1;const xn=(at/vt<<5)+(ne+1)+this.points.length;for(const wi of nr){const fn=wi*vt;if(Fe[fn+2]<=ne)continue;Fe[fn+2]=ne;const wt=Fe[fn+5];ir+=Fe[fn]*wt,hn+=Fe[fn+1]*wt,Fe[fn+4]=xn,Ce&&(er||(er=this._map(Fe,at,!0),Mn=this.clusterProps.length,this.clusterProps.push(er)),Ce(er,this._map(Fe,fn)))}Fe[at+4]=xn,Ze.push(ir/Qt,hn/Qt,1/0,xn,-1,Qt),Ce&&Ze.push(Mn)}else{for(let er=0;er<vt;er++)Ze.push(Fe[at+er]);if(Qt>1)for(const er of nr){const ir=er*vt;if(!(Fe[ir+2]<=ne)){Fe[ir+2]=ne;for(let hn=0;hn<vt;hn++)Ze.push(Fe[ir+hn])}}}}return Ze}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ne,ae){if(ee[ne+5]>1){const He=this.clusterProps[ee[ne+6]];return ae?Object.assign({},He):He}const be=this.points[ee[ne+3]].properties,Ce=this.options.map(be);return ae&&Ce===be?Object.assign({},Ce):Ce}}function We(Be,ee,ne){return{type:"Feature",id:Be[ee+3],properties:Ve(Be,ee,ne),geometry:{type:"Point",coordinates:[(ae=Be[ee],360*(ae-.5)),Je(Be[ee+1])]}};var ae}function Ve(Be,ee,ne){const ae=Be[ee+5],be=ae>=1e4?`${Math.round(ae/1e3)}k`:ae>=1e3?Math.round(ae/100)/10+"k":ae,Ce=Be[ee+6],He=Ce===-1?{}:Object.assign({},ne[Ce]);return Object.assign(He,{cluster:!0,cluster_id:Be[ee+3],point_count:ae,point_count_abbreviated:be})}function Ot(Be){return Be/360+.5}function Ue(Be){const ee=Math.sin(Be*Math.PI/180),ne=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ne<0?0:ne>1?1:ne}function Je(Be){const ee=(180-360*Be)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Le(Be,ee,ne,ae){let be=ae;const Ce=ee+(ne-ee>>1);let He,$e=ne-ee;const Fe=Be[ee],Ze=Be[ee+1],vt=Be[ne],at=Be[ne+1];for(let Me=ee+3;Me<ne;Me+=3){const Bt=Ge(Be[Me],Be[Me+1],Fe,Ze,vt,at);if(Bt>be)He=Me,be=Bt;else if(Bt===be){const nr=Math.abs(Me-Ce);nr<$e&&(He=Me,$e=nr)}}be>ae&&(He-ee>3&&Le(Be,ee,He,ae),Be[He+2]=be,ne-He>3&&Le(Be,He,ne,ae))}function Ge(Be,ee,ne,ae,be,Ce){let He=be-ne,$e=Ce-ae;if(He!==0||$e!==0){const Fe=((Be-ne)*He+(ee-ae)*$e)/(He*He+$e*$e);Fe>1?(ne=be,ae=Ce):Fe>0&&(ne+=He*Fe,ae+=$e*Fe)}return He=Be-ne,$e=ee-ae,He*He+$e*$e}function st(Be,ee,ne,ae){const be={type:ee,geom:ne},Ce={id:Be??null,type:be.type,geometry:be.geom,tags:ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(be.type){case"Point":case"MultiPoint":case"LineString":pt(Ce,be.geom);break;case"Polygon":pt(Ce,be.geom[0]);break;case"MultiLineString":for(const He of be.geom)pt(Ce,He);break;case"MultiPolygon":for(const He of be.geom)pt(Ce,He[0])}return Ce}function pt(Be,ee){for(let ne=0;ne<ee.length;ne+=3)Be.minX=Math.min(Be.minX,ee[ne]),Be.minY=Math.min(Be.minY,ee[ne+1]),Be.maxX=Math.max(Be.maxX,ee[ne]),Be.maxY=Math.max(Be.maxY,ee[ne+1])}function Rt(Be,ee){const ne=[];switch(Be.type){case"FeatureCollection":for(let ae=0;ae<Be.features.length;ae++)De(ne,Be.features[ae],ee,ae);break;case"Feature":De(ne,Be,ee);break;default:De(ne,{geometry:Be,properties:void 0},ee)}return ne}function De(Be,ee,ne,ae){if(!ee.geometry)return;if(ee.geometry.type==="GeometryCollection"){for(const $e of ee.geometry.geometries)De(Be,{id:ee.id,geometry:$e,properties:ee.properties},ne,ae);return}if(!ee.geometry.coordinates?.length)return;const Ce=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2);let He=ee.id;switch(ne.promoteId?He=ee.properties?.[ne.promoteId]:ne.generateId&&(He=ae||0),ee.geometry.type){case"Point":{const $e=[];return lt(ee.geometry.coordinates,$e),void Be.push(st(He,ee.geometry.type,$e,ee.properties))}case"MultiPoint":{const $e=[];for(const Fe of ee.geometry.coordinates)lt(Fe,$e);return void Be.push(st(He,ee.geometry.type,$e,ee.properties))}case"LineString":{const $e=[];return Mt(ee.geometry.coordinates,$e,Ce,!1),void Be.push(st(He,ee.geometry.type,$e,ee.properties))}case"MultiLineString":{if(ne.lineMetrics){for(const Fe of ee.geometry.coordinates){const Ze=[];Mt(Fe,Ze,Ce,!1),Be.push(st(He,"LineString",Ze,ee.properties))}return}const $e=[];return zt(ee.geometry.coordinates,$e,Ce,!1),void Be.push(st(He,ee.geometry.type,$e,ee.properties))}case"Polygon":{const $e=[];return zt(ee.geometry.coordinates,$e,Ce,!0),void Be.push(st(He,ee.geometry.type,$e,ee.properties))}case"MultiPolygon":{const $e=[];for(const Fe of ee.geometry.coordinates){const Ze=[];zt(Fe,Ze,Ce,!0),$e.push(Ze)}return void Be.push(st(He,ee.geometry.type,$e,ee.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function lt(Be,ee){ee.push(qt(Be[0]),Yt(Be[1]),0)}function Mt(Be,ee,ne,ae){let be,Ce,He=0;for(let Fe=0;Fe<Be.length;Fe++){const Ze=qt(Be[Fe][0]),vt=Yt(Be[Fe][1]);ee.push(Ze,vt,0),Fe>0&&(He+=ae?(be*vt-Ze*Ce)/2:Math.sqrt(Math.pow(Ze-be,2)+Math.pow(vt-Ce,2))),be=Ze,Ce=vt}const $e=ee.length-3;ee[2]=1,ne>0&&Le(ee,0,$e,ne),ee[$e+2]=1,ee.size=Math.abs(He),ee.start=0,ee.end=ee.size}function zt(Be,ee,ne,ae){for(let be=0;be<Be.length;be++){const Ce=[];Mt(Be[be],Ce,ne,ae),ee.push(Ce)}}function qt(Be){return Be/360+.5}function Yt(Be){const ee=Math.sin(Be*Math.PI/180),ne=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ne<0?0:ne>1?1:ne}function Gt(Be,ee,ne,ae,be,Ce,He,$e){if(ae/=ee,Ce>=(ne/=ee)&&He<ae)return Be;if(He<ne||Ce>=ae)return null;const Fe=[];for(const Ze of Be){const vt=be===0?Ze.minX:Ze.minY,at=be===0?Ze.maxX:Ze.maxY;if(vt>=ne&&at<ae)Fe.push(Ze);else if(!(at<ne||vt>=ae))switch(Ze.type){case"Point":case"MultiPoint":{const Me=[];if(Ar(Ze.geometry,Me,ne,ae,be),!Me.length)continue;Fe.push(st(Ze.id,Me.length===3?"Point":"MultiPoint",Me,Ze.tags));continue}case"LineString":{const Me=[];if(mt(Ze.geometry,Me,ne,ae,be,!1,$e.lineMetrics),!Me.length)continue;if($e.lineMetrics){for(const Bt of Me)Fe.push(st(Ze.id,Ze.type,Bt,Ze.tags));continue}if(Me.length>1){Fe.push(st(Ze.id,"MultiLineString",Me,Ze.tags));continue}Fe.push(st(Ze.id,Ze.type,Me[0],Ze.tags));continue}case"MultiLineString":{const Me=[];if(mr(Ze.geometry,Me,ne,ae,be,!1),!Me.length)continue;if(Me.length===1){Fe.push(st(Ze.id,"LineString",Me[0],Ze.tags));continue}Fe.push(st(Ze.id,Ze.type,Me,Ze.tags));continue}case"Polygon":{const Me=[];if(mr(Ze.geometry,Me,ne,ae,be,!0),!Me.length)continue;Fe.push(st(Ze.id,Ze.type,Me,Ze.tags));continue}case"MultiPolygon":{const Me=[];for(const Bt of Ze.geometry){const nr=[];mr(Bt,nr,ne,ae,be,!0),nr.length&&Me.push(nr)}if(!Me.length)continue;Fe.push(st(Ze.id,Ze.type,Me,Ze.tags));continue}}}return Fe.length?Fe:null}function Ar(Be,ee,ne,ae,be){for(let Ce=0;Ce<Be.length;Ce+=3){const He=Be[Ce+be];He>=ne&&He<=ae&&Et(ee,Be[Ce],Be[Ce+1],Be[Ce+2])}}function mt(Be,ee,ne,ae,be,Ce,He){let $e=or(Be);const Fe=be===0?An:ur;let Ze,vt,at=Be.start;for(let Qt=0;Qt<Be.length-3;Qt+=3){const er=Be[Qt],ir=Be[Qt+1],hn=Be[Qt+2],Mn=Be[Qt+3],xn=Be[Qt+4],wi=be===0?er:ir,fn=be===0?Mn:xn;let wt=!1;He&&(Ze=Math.sqrt(Math.pow(er-Mn,2)+Math.pow(ir-xn,2))),wi<ne?fn>ne&&(vt=Fe($e,er,ir,Mn,xn,ne),He&&($e.start=at+Ze*vt)):wi>ae?fn<ae&&(vt=Fe($e,er,ir,Mn,xn,ae),He&&($e.start=at+Ze*vt)):Et($e,er,ir,hn),fn<ne&&wi>=ne&&(vt=Fe($e,er,ir,Mn,xn,ne),wt=!0),fn>ae&&wi<=ae&&(vt=Fe($e,er,ir,Mn,xn,ae),wt=!0),!Ce&&wt&&(He&&($e.end=at+Ze*vt),ee.push($e),$e=or(Be)),He&&(at+=Ze)}let Me=Be.length-3;const Bt=Be[Me],nr=Be[Me+1],Wt=be===0?Bt:nr;Wt>=ne&&Wt<=ae&&Et($e,Bt,nr,Be[Me+2]),Me=$e.length-3,Ce&&Me>=3&&($e[Me]!==$e[0]||$e[Me+1]!==$e[1])&&Et($e,$e[0],$e[1],$e[2]),$e.length&&ee.push($e)}function or(Be){const ee=[];return ee.size=Be.size,ee.start=Be.start,ee.end=Be.end,ee}function mr(Be,ee,ne,ae,be,Ce){for(const He of Be)mt(He,ee,ne,ae,be,Ce,!1)}function Et(Be,ee,ne,ae){Be.push(ee,ne,ae)}function An(Be,ee,ne,ae,be,Ce){const He=(Ce-ee)/(ae-ee);return Et(Be,Ce,ne+(be-ne)*He,1),He}function ur(Be,ee,ne,ae,be,Ce){const He=(Ce-ne)/(be-ne);return Et(Be,ee+(ae-ee)*He,Ce,1),He}function Wr(Be,ee){const ne=ee.buffer/ee.extent;let ae=Be;const be=Gt(Be,1,-1-ne,ne,0,-1,2,ee),Ce=Gt(Be,1,1-ne,2+ne,0,-1,2,ee);return(be||Ce)&&(ae=Gt(Be,1,-ne,1+ne,0,-1,2,ee)||[],be&&(ae=sn(be,1).concat(ae)),Ce&&(ae=ae.concat(sn(Ce,-1)))),ae}function sn(Be,ee){const ne=[];for(const ae of Be)switch(ae.type){case"Point":case"MultiPoint":case"LineString":{const be=Rr(ae.geometry,ee);ne.push(st(ae.id,ae.type,be,ae.tags));continue}case"MultiLineString":case"Polygon":{const be=[];for(const Ce of ae.geometry)be.push(Rr(Ce,ee));ne.push(st(ae.id,ae.type,be,ae.tags));continue}case"MultiPolygon":{const be=[];for(const Ce of ae.geometry){const He=[];for(const $e of Ce)He.push(Rr($e,ee));be.push(He)}ne.push(st(ae.id,ae.type,be,ae.tags));continue}}return ne}function Rr(Be,ee){const ne=[];ne.size=Be.size,Be.start!==void 0&&(ne.start=Be.start,ne.end=Be.end);for(let ae=0;ae<Be.length;ae+=3)ne.push(Be[ae]+ee,Be[ae+1],Be[ae+2]);return ne}function ya(Be,ee){if(Be.transformed)return Be;const ne=1<<Be.z,ae=Be.x,be=Be.y;for(const Ce of Be.features){if(Ce.type===1){const $e=[];for(let Fe=0;Fe<Ce.geometry.length;Fe+=2)$e.push(Ys(Ce.geometry[Fe],Ce.geometry[Fe+1],ee,ne,ae,be));Ce.geometry=$e;continue}const He=[];for(const $e of Ce.geometry){const Fe=[];for(let Ze=0;Ze<$e.length;Ze+=2)Fe.push(Ys($e[Ze],$e[Ze+1],ee,ne,ae,be));He.push(Fe)}Ce.geometry=He}return Be.transformed=!0,Be}function Ys(Be,ee,ne,ae,be,Ce){return[Math.round(ne*(Be*ae-be)),Math.round(ne*(ee*ae-Ce))]}function ys(Be,ee,ne,ae,be){const Ce=ee===be.maxZoom?0:be.tolerance/((1<<ee)*be.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:Be.length,source:null,x:ne,y:ae,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const $e of Be)No(He,$e,Ce,be);return He}function No(Be,ee,ne,ae){Be.minX=Math.min(Be.minX,ee.minX),Be.minY=Math.min(Be.minY,ee.minY),Be.maxX=Math.max(Be.maxX,ee.maxX),Be.maxY=Math.max(Be.maxY,ee.maxY);let be,Ce=ee.tags||null;switch(ee.type){case"Point":case"MultiPoint":{const He=[];for(let $e=0;$e<ee.geometry.length;$e+=3)He.push(ee.geometry[$e],ee.geometry[$e+1]),Be.numPoints++,Be.numSimplified++;if(!He.length)return;be={type:1,tags:Ce,geometry:He};break}case"LineString":{const He=[];if(go(He,ee.geometry,Be,ne,!1,!1),!He.length)return;if(ae.lineMetrics){Ce={};for(const $e in ee.tags)Ce[$e]=ee.tags[$e];Ce.mapbox_clip_start=ee.geometry.start/ee.geometry.size,Ce.mapbox_clip_end=ee.geometry.end/ee.geometry.size}be={type:2,tags:Ce,geometry:He};break}case"MultiLineString":case"Polygon":{const He=[];for(let $e=0;$e<ee.geometry.length;$e++)go(He,ee.geometry[$e],Be,ne,ee.type==="Polygon",$e===0);if(!He.length)return;be={type:ee.type==="Polygon"?3:2,tags:Ce,geometry:He};break}case"MultiPolygon":{const He=[];for(let $e=0;$e<ee.geometry.length;$e++){const Fe=ee.geometry[$e];for(let Ze=0;Ze<Fe.length;Ze++)go(He,Fe[Ze],Be,ne,!0,Ze===0)}if(!He.length)return;be={type:3,tags:Ce,geometry:He};break}}ee.id!==null&&(be.id=ee.id),Be.features.push(be)}function go(Be,ee,ne,ae,be,Ce){const He=ae*ae;if(ae>0&&ee.size<(be?He:ae))return void(ne.numPoints+=ee.length/3);const $e=[];for(let Fe=0;Fe<ee.length;Fe+=3)(ae===0||ee[Fe+2]>He)&&(ne.numSimplified++,$e.push(ee[Fe],ee[Fe+1])),ne.numPoints++;be&&(function(Fe,Ze){let vt=0;for(let at=0,Me=Fe.length,Bt=Me-2;at<Me;Bt=at,at+=2)vt+=(Fe[at]-Fe[Bt])*(Fe[at+1]+Fe[Bt+1]);if(vt>0===Ze)for(let at=0,Me=Fe.length;at<Me/2;at+=2){const Bt=Fe[at],nr=Fe[at+1];Fe[at]=Fe[Me-2-at],Fe[at+1]=Fe[Me-1-at],Fe[Me-2-at]=Bt,Fe[Me-1-at]=nr}})($e,Ce),Be.push($e)}function ju(Be,ee,ne){const ae=!!ee.newGeometry,be=ee.removeAllProperties||ee.removeProperties?.length>0||ee.addOrUpdateProperties?.length>0;if(ae){let Ce=Rt({type:"FeatureCollection",features:[{type:"Feature",id:Be.id,geometry:ee.newGeometry,properties:be?ri(Be.tags,ee):Be.tags}]},ne);return Ce=Wr(Ce,ne),Ce[0]}if(be){const Ce={...Be};return Ce.tags=ri(Ce.tags,ee),Ce}return null}function ri(Be,ee){if(ee.removeAllProperties)return{};const ne={...Be||{}};if(ee.removeProperties)for(const ae of ee.removeProperties)delete ne[ae];if(ee.addOrUpdateProperties)for(const{key:ae,value:be}of ee.addOrUpdateProperties)ne[ae]=be;return ne}const va={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class Nu{options;tiles;tileCoords;stats={};total=0;source;constructor(ee,ne){const ae=(ne=this.options=Object.assign({},va,ne)).debug;if(ae&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");let be=Rt(ee,ne);this.tiles={},this.tileCoords=[],ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),be=Wr(be,ne),be.length&&this.splitTile(be,0,0,0),ne.updateable&&(this.source=be),ae&&(be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,ne,ae,be,Ce,He,$e){const Fe=[ee,ne,ae,be],Ze=this.options,vt=Ze.debug;for(;Fe.length;){be=Fe.pop(),ae=Fe.pop(),ne=Fe.pop(),ee=Fe.pop();const at=1<<ne,Me=vs(ne,ae,be);let Bt=this.tiles[Me];if(!Bt&&(vt>1&&console.time("creation"),Bt=this.tiles[Me]=ys(ee,ne,ae,be,Ze),this.tileCoords.push({z:ne,x:ae,y:be,id:Me}),vt)){vt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,ae,be,Bt.numFeatures,Bt.numPoints,Bt.numSimplified),console.timeEnd("creation"));const wt=`z${ne}`;this.stats[wt]=(this.stats[wt]||0)+1,this.total++}if(Bt.source=ee,Ce==null){if(ne===Ze.indexMaxZoom||Bt.numPoints<=Ze.indexMaxPoints)continue}else{if(ne===Ze.maxZoom||ne===Ce)continue;if(Ce!=null){const wt=Ce-ne;if(ae!==He>>wt||be!==$e>>wt)continue}}if(Bt.source=null,!ee.length)continue;vt>1&&console.time("clipping");const nr=.5*Ze.buffer/Ze.extent,Wt=.5-nr,Qt=.5+nr,er=1+nr;let ir=null,hn=null,Mn=null,xn=null;const wi=Gt(ee,at,ae-nr,ae+Qt,0,Bt.minX,Bt.maxX,Ze),fn=Gt(ee,at,ae+Wt,ae+er,0,Bt.minX,Bt.maxX,Ze);wi&&(ir=Gt(wi,at,be-nr,be+Qt,1,Bt.minY,Bt.maxY,Ze),hn=Gt(wi,at,be+Wt,be+er,1,Bt.minY,Bt.maxY,Ze)),fn&&(Mn=Gt(fn,at,be-nr,be+Qt,1,Bt.minY,Bt.maxY,Ze),xn=Gt(fn,at,be+Wt,be+er,1,Bt.minY,Bt.maxY,Ze)),vt>1&&console.timeEnd("clipping"),Fe.push(ir||[],ne+1,2*ae,2*be),Fe.push(hn||[],ne+1,2*ae,2*be+1),Fe.push(Mn||[],ne+1,2*ae+1,2*be),Fe.push(xn||[],ne+1,2*ae+1,2*be+1)}}getTile(ee,ne,ae){ee=+ee,ne=+ne,ae=+ae;const be=this.options,{extent:Ce,debug:He}=be;if(ee<0||ee>24)return null;const $e=1<<ee,Fe=vs(ee,ne=ne+$e&$e-1,ae);if(this.tiles[Fe])return ya(this.tiles[Fe],Ce);He>1&&console.log("drilling down to z%d-%d-%d",ee,ne,ae);let Ze,vt=ee,at=ne,Me=ae;for(;!Ze&&vt>0;)vt--,at>>=1,Me>>=1,Ze=this.tiles[vs(vt,at,Me)];return Ze?.source?(He>1&&(console.log("found parent tile z%d-%d-%d",vt,at,Me),console.time("drilling down")),this.splitTile(Ze.source,vt,at,Me,ee,ne,ae),He>1&&console.timeEnd("drilling down"),this.tiles[Fe]?ya(this.tiles[Fe],Ce):null):null}invalidateTiles(ee){const ne=this.options,{debug:ae}=ne;let be=1/0,Ce=-1/0,He=1/0,$e=-1/0;for(const vt of ee)be=Math.min(be,vt.minX),Ce=Math.max(Ce,vt.maxX),He=Math.min(He,vt.minY),$e=Math.max($e,vt.maxY);const Fe=ne.buffer/ne.extent,Ze=new Set;for(const vt in this.tiles){const at=this.tiles[vt],Me=1<<at.z,Bt=(at.x-Fe)/Me,nr=(at.x+1+Fe)/Me,Wt=(at.y-Fe)/Me,Qt=(at.y+1+Fe)/Me;if(Ce<Bt||be>=nr||$e<Wt||He>=Qt)continue;let er=!1;for(const ir of ee)if(ir.maxX>=Bt&&ir.minX<nr&&ir.maxY>=Wt&&ir.minY<Qt){er=!0;break}if(er){if(ae){ae>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",at.z,at.x,at.y,at.numFeatures,at.numPoints,at.numSimplified);const ir=`z${at.z}`;this.stats[ir]=(this.stats[ir]||0)-1,this.total--}delete this.tiles[vt],Ze.add(vt)}}Ze.size&&(this.tileCoords=this.tileCoords.filter((vt=>!Ze.has(vt.id))))}updateData(ee){const ne=this.options,ae=ne.debug;if(!ne.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");const{affected:be,source:Ce}=(function(at,Me,Bt){const nr=(function(Qt){return Qt?{removeAll:Qt.removeAll,remove:new Set(Qt.remove||[]),add:new Map(Qt.add?.map((er=>[er.id,er]))),update:new Map(Qt.update?.map((er=>[er.id,er])))}:{remove:new Set,add:new Map,update:new Map}})(Me);let Wt=[];if(nr.removeAll&&(Wt=at,at=[]),nr.remove.size||nr.add.size){const Qt=[];for(const er of at){const{id:ir}=er;(nr.remove.has(ir)||nr.add.has(ir))&&Qt.push(er)}if(Qt.length){Wt.push(...Qt);const er=new Set(Qt.map((ir=>ir.id)));at=at.filter((ir=>!er.has(ir.id)))}if(nr.add.size){let er=Rt({type:"FeatureCollection",features:Array.from(nr.add.values())},Bt);er=Wr(er,Bt),Wt.push(...er),at.push(...er)}}if(nr.update.size)for(const[Qt,er]of nr.update){const ir=at.findIndex((xn=>xn.id===Qt));if(ir===-1)continue;const hn=at[ir],Mn=ju(hn,er,Bt);Mn&&(Wt.push(hn,Mn),at[ir]=Mn)}return{affected:Wt,source:at}})(this.source,ee,ne);if(!be.length)return;this.source=Ce,ae>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(be),ae>1&&console.timeEnd("invalidating");const[He,$e,Fe]=[0,0,0],Ze=ys(this.source,He,$e,Fe,this.options);Ze.source=this.source;const vt=vs(He,$e,Fe);if(this.tiles[vt]=Ze,this.tileCoords.push({z:He,x:$e,y:Fe,id:vt}),ae){const at=`z${He}`;this.stats[at]=(this.stats[at]||0)+1,this.total++}}}function vs(Be,ee,ne){return 32*((1<<Be)*ne+ee)+Be}class _s{constructor(ee,ne,ae,be=Bc){this._dataUpdateable=new Map,this.actor=ee,this.layerIndex=ne,this.availableImages=ae,this.tileState=new z,this._createGeoJSONIndex=be}loadVectorTile(ee){if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const{z:ne,x:ae,y:be}=ee.tileID.canonical,Ce=this._geoJSONIndex.getTile(ne,ae,be);return Ce?K(new _.d3(Ce.features,{version:2,extent:_.a5})):null}loadTile(ee){return _._(this,void 0,void 0,(function*(){const{uid:ne}=ee,ae=new P(ee);ae.abort=new AbortController;try{const be=this.loadVectorTile(ee);if(!be)return null;const{vectorTile:Ce,rawData:He}=be;ae.vectorTile=Ce,this.tileState.markLoaded(ne,ae);const $e={rawData:He};this.tileState.setParsing(ne,$e);try{return yield this._parseWorkerTile(ae,ee,$e)}finally{this.tileState.clearParsing(ne)}}catch(be){throw ae.status="done",this.tileState.markLoaded(ne,ae),be}}))}_reloadLoadedTile(ee){return _._(this,void 0,void 0,(function*(){const ne=ee.uid,ae=this.tileState.getLoaded(ne);if(!ae)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ae.showCollisionBoxes=ee.showCollisionBoxes,ae.status==="parsing"){const be=this.tileState.consumeParsing(ne);return yield this._parseWorkerTile(ae,ee,be)}if(ae.status==="done"&&ae.vectorTile)return yield this._parseWorkerTile(ae,ee)}))}_parseWorkerTile(ee,ne,ae){return _._(this,void 0,void 0,(function*(){let be=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);if(ae){const{rawData:Ce}=ae;be=_.e({rawTileData:Ce.slice(0)},be)}return be}))}abortTile(ee){return _._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return _._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}loadData(ee){return _._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort();const ae=this._startRequestTiming(ee);this._pendingRequest=new AbortController;try{(!this._pendingData||ee.request||ee.data||ee.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest));const be=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(be,ee),this.tileState.clearLoaded();const Ce={};return ee.request&&(Ce.data=be),this._finishRequestTiming(ae,ee,Ce),Ce}catch(be){if(delete this._pendingRequest,_.Z(be))return{abandoned:!0};throw be}}))}_startRequestTiming(ee){var ne;if(!((ne=ee.request)===null||ne===void 0)&&ne.collectResourceTiming)return new _.c$(ee.request.url)}_finishRequestTiming(ee,ne,ae){const be=ee?.finish();be&&(ae.resourceTiming={[ne.source]:JSON.parse(JSON.stringify(be))})}getData(){return _._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ee){return this.tileState.getLoaded(ee.uid)?this._reloadLoadedTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,ne){return _._(this,void 0,void 0,(function*(){let ae;if(ee.request?ae=yield this.loadGeoJSONFromUrl(ee.request,ee.promoteId,ne):ee.data?ae=this._loadGeoJSONFromObject(ee.data,ee.promoteId):ee.dataDiff&&(ae=this._loadGeoJSONFromDiff(ee.dataDiff,ee.promoteId,ee.source)),delete this._pendingRequest,typeof ae!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);return Pe(ae,!0),ee.filter&&(ae=this._filterGeoJSON(ae,ee.filter)),ae}))}loadGeoJSONFromUrl(ee,ne,ae){return _._(this,void 0,void 0,(function*(){const be=yield _.j(ee,ae);return this._dataUpdateable=_.a7(be.data,ne),be.data}))}_loadGeoJSONFromObject(ee,ne){return this._dataUpdateable=_.a7(ee,ne),ee}_loadGeoJSONFromDiff(ee,ne,ae){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae}`);_.a8(this._dataUpdateable,ee,ne);const be=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(be)}_filterGeoJSON(ee,ne){const ae=_.d4(ne,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map((Ce=>`${Ce.key}: ${Ce.message}`)).join(", "));const be=ee.features.filter((Ce=>ae.value.evaluate({zoom:0},Ce)));return this._toFeatureCollection(be)}_toFeatureCollection(ee){return{type:"FeatureCollection",features:ee}}removeSource(ee){return _._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort()}))}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}function Bc(Be,ee){return ee.cluster?new kt((function({superclusterOptions:ne,clusterProperties:ae}){if(!ae||!ne)return ne;const be={},Ce={},He={accumulated:null,zoom:0},$e={properties:null},Fe=Object.keys(ae);for(const Ze of Fe){const[vt,at]=ae[Ze],Me=_.d4(at),Bt=_.d4(typeof vt=="string"?[vt,["accumulated"],["get",Ze]]:vt);be[Ze]=Me.value,Ce[Ze]=Bt.value}return ne.map=Ze=>{$e.properties=Ze;const vt={};for(const at of Fe)vt[at]=be[at].evaluate(He,$e);return vt},ne.reduce=(Ze,vt)=>{$e.properties=vt;for(const at of Fe)He.accumulated=Ze[at],Ze[at]=Ce[at].evaluate(He,$e)},ne})(ee)).load(Be.features):(function(ne,ae){return new Nu(ne,ae)})(Be,ee.geojsonVtOptions)}class Ks{constructor(ee){this.self=ee,this.actor=new _.L(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ne,ae)=>{if(this.externalWorkerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.externalWorkerSourceTypes[ne]=ae},this.self.addProtocol=_.cK,this.self.removeProtocol=_.cL,this.self.registerRTLTextPlugin=ne=>{_.d5.setMethods(ne)},this.actor.registerMessageHandler("LDT",((ne,ae)=>this._getDEMWorkerSource(ne,ae.source).loadTile(ae))),this.actor.registerMessageHandler("RDT",((ne,ae)=>_._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ne,ae.source).removeTile(ae)})))),this.actor.registerMessageHandler("GCEZ",((ne,ae)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,ae.type,ae.source).getClusterExpansionZoom(ae)})))),this.actor.registerMessageHandler("GCC",((ne,ae)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,ae.type,ae.source).getClusterChildren(ae)})))),this.actor.registerMessageHandler("GCL",((ne,ae)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,ae.type,ae.source).getClusterLeaves(ae)})))),this.actor.registerMessageHandler("LD",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).loadData(ae))),this.actor.registerMessageHandler("GD",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).getData())),this.actor.registerMessageHandler("LT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).loadTile(ae))),this.actor.registerMessageHandler("RT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).reloadTile(ae))),this.actor.registerMessageHandler("AT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).abortTile(ae))),this.actor.registerMessageHandler("RMT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).removeTile(ae))),this.actor.registerMessageHandler("RS",((ne,ae)=>_._(this,void 0,void 0,(function*(){if(!this.workerSources[ne]||!this.workerSources[ne][ae.type]||!this.workerSources[ne][ae.type][ae.source])return;const be=this.workerSources[ne][ae.type][ae.source];delete this.workerSources[ne][ae.type][ae.source],be.removeSource!==void 0&&be.removeSource(ae)})))),this.actor.registerMessageHandler("RM",(ne=>_._(this,void 0,void 0,(function*(){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne],this.globalStates.delete(ne)})))),this.actor.registerMessageHandler("SR",((ne,ae)=>_._(this,void 0,void 0,(function*(){this.referrer=ae})))),this.actor.registerMessageHandler("SRPS",((ne,ae)=>this._syncRTLPluginState(ne,ae))),this.actor.registerMessageHandler("IS",((ne,ae)=>_._(this,void 0,void 0,(function*(){this.self.importScripts(ae)})))),this.actor.registerMessageHandler("SI",((ne,ae)=>this._setImages(ne,ae))),this.actor.registerMessageHandler("UL",((ne,ae)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).update(ae.layers,ae.removedIds,this._getGlobalState(ne))})))),this.actor.registerMessageHandler("UGS",((ne,ae)=>_._(this,void 0,void 0,(function*(){const be=this._getGlobalState(ne);for(const Ce in ae)be[Ce]=ae[Ce]})))),this.actor.registerMessageHandler("SL",((ne,ae)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).replace(ae,this._getGlobalState(ne))}))))}_getGlobalState(ee){let ne=this.globalStates.get(ee);return ne||(ne={},this.globalStates.set(ee,ne)),ne}_setImages(ee,ne){return _._(this,void 0,void 0,(function*(){this.availableImages[ee]=ne;for(const ae in this.workerSources[ee]){const be=this.workerSources[ee][ae];for(const Ce in be)be[Ce].availableImages=ne}}))}_syncRTLPluginState(ee,ne){return _._(this,void 0,void 0,(function*(){return yield _.d5.syncState(ne,this.self.importScripts)}))}_getAvailableImages(ee){let ne=this.availableImages[ee];return ne||(ne=[]),ne}_getLayerIndex(ee){let ne=this.layerIndexes[ee];return ne||(ne=this.layerIndexes[ee]=new c),ne}_getWorkerSource(ee,ne,ae){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ne]||(this.workerSources[ee][ne]={}),!this.workerSources[ee][ne][ae]){const be={sendAsync:(Ce,He)=>(Ce.targetMapId=ee,this.actor.sendAsync(Ce,He))};switch(ne){case"vector":this.workerSources[ee][ne][ae]=new he(be,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][ne][ae]=new _s(be,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][ne][ae]=new this.externalWorkerSourceTypes[ne](be,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][ne][ae]}_getDEMWorkerSource(ee,ne){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ne]||(this.demWorkerSources[ee][ne]=new ye),this.demWorkerSources[ee][ne]}}return _.i(self)&&(self.worker=new Ks(self)),Ks})),m("index",["exports","./shared"],(function(_,c){var M="5.18.0";function P(){var w=new c.A(4);return c.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let D,z,F;const $={frame(w,n,u,d){const y=d||window,T=y.requestAnimationFrame((O=>{A(),n(O)})),{unsubscribe:A}=c.s(w.signal,"abort",(()=>{A(),y.cancelAnimationFrame(T),u(new c.a(w.signal.reason))}),!1)},frameAsync(w,n){return new Promise(((u,d)=>{this.frame(w,u,d,n)}))},getImageData(w,n=0){return this.getImageCanvasContext(w).getImageData(-n,-n,w.width+2*n,w.height+2*n)},getImageCanvasContext(w){const n=window.document.createElement("canvas"),u=n.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return n.width=w.width,n.height=w.height,u.drawImage(w,0,0,w.width,w.height),u},resolveURL:w=>(D||(D=document.createElement("a")),D.href=w,D.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return F!==void 0?F:!!matchMedia&&(z==null&&(z=matchMedia("(prefers-reduced-motion: reduce)")),z.matches)},set prefersReducedMotion(w){F=w}},Y=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function K(){return Y.getCurrentTime()}class q{static testProp(n){if(!q.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in q.docStyle)return n[u];return n[0]}static create(n,u,d){const y=window.document.createElement(n);return u!==void 0&&(y.className=u),d&&d.appendChild(y),y}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){q.docStyle&&q.selectProp&&(q.userSelect=q.docStyle[q.selectProp],q.docStyle[q.selectProp]="none")}static enableDrag(){q.docStyle&&q.selectProp&&(q.docStyle[q.selectProp]=q.userSelect)}static setTransform(n,u){n.style[q.transformProp]=u}static addEventListener(n,u,d,y={}){n.addEventListener(u,d,"passive"in y?y:y.capture)}static removeEventListener(n,u,d,y={}){n.removeEventListener(u,d,"passive"in y?y:y.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",q.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",q.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",q.suppressClickInternal,!0)}),0)}static getScale(n){const u=n.getBoundingClientRect();return{x:u.width/n.offsetWidth||1,y:u.height/n.offsetHeight||1,boundingClientRect:u}}static getPoint(n,u,d){const y=u.boundingClientRect;return new c.P((d.clientX-y.left)/u.x-n.clientLeft,(d.clientY-y.top)/u.y-n.clientTop)}static mousePos(n,u){const d=q.getScale(n);return q.getPoint(n,d,u)}static touchPos(n,u){const d=[],y=q.getScale(n);for(let T=0;T<u.length;T++)d.push(q.getPoint(n,y,u[T]));return d}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const u=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),d=u.querySelectorAll("script");for(const y of d)y.remove();return q.clean(u),u.innerHTML}static isPossiblyDangerous(n,u){const d=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!d.includes("javascript:")&&!d.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const u=n.children;for(const d of u)q.removeAttributes(d),q.clean(d)}static removeAttributes(n){for(const{name:u,value:d}of n.attributes)q.isPossiblyDangerous(u,d)&&n.removeAttribute(u)}}q.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,q.selectProp=q.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),q.transformProp=q.testProp(["transform","WebkitTransform"]);const he={supported:!1,testSupport:function(w){!Te&&ge&&(ke?Pe(w):ye=w)}};let ye,ge,Te=!1,ke=!1;function Pe(w){const n=w.createTexture();w.bindTexture(w.TEXTURE_2D,n);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,ge),w.isContextLost())return;he.supported=!0}catch{}w.deleteTexture(n),Te=!0}var Re;typeof document<"u"&&(ge=document.createElement("img"),ge.onload=()=>{ye&&Pe(ye),ye=null,ke=!0},ge.onerror=()=>{Te=!0,ye=null},ge.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let n,u,d,y;w.resetRequestQueue=()=>{n=[],u=0,d=0,y={}},w.addThrottleControl=R=>{const U=d++;return y[U]=R,U},w.removeThrottleControl=R=>{delete y[R],A()},w.getImage=(R,U,V=!0)=>new Promise(((X,W)=>{he.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),c.e(R,{type:"image"}),n.push({abortController:U,requestParameters:R,supportImageRefresh:V,state:"queued",onError:re=>{W(re)},onSuccess:re=>{X(re)}}),A()}));const T=R=>c._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:U,supportImageRefresh:V,onError:X,onSuccess:W,abortController:re}=R,oe=V===!1&&!c.i(self)&&!c.g(U.url)&&(!U.headers||Object.keys(U.headers).reduce(((pe,xe)=>pe&&xe==="accept"),!0));u++;const fe=oe?O(U,re):c.m(U,re);try{const pe=yield fe;delete R.abortController,R.state="completed",pe.data instanceof HTMLImageElement||c.b(pe.data)?W(pe):pe.data&&W({data:yield(me=pe.data,typeof createImageBitmap=="function"?c.f(me):c.h(me)),cacheControl:pe.cacheControl,expires:pe.expires})}catch(pe){delete R.abortController,X(pe)}finally{u--,A()}var me})),A=()=>{const R=(()=>{for(const U of Object.keys(y))if(y[U]())return!0;return!1})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=u;U<R&&n.length>0;U++){const V=n.shift();V.abortController.signal.aborted?U--:T(V)}},O=(R,U)=>new Promise(((V,X)=>{const W=new Image,re=R.url,oe=R.credentials;oe&&oe==="include"?W.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!c.d(re))&&(W.crossOrigin="anonymous"),U.signal.addEventListener("abort",(()=>{W.src="",X(new c.a(U.signal.reason))})),W.fetchPriority="high",W.onload=()=>{W.onerror=W.onload=null,V({data:W})},W.onerror=()=>{W.onerror=W.onload=null,U.signal.aborted||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},W.src=re}))})(Re||(Re={})),Re.resetRequestQueue();class ot{constructor(n){this._transformRequestFn=n??null}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function bt(w){const n=[];if(typeof w=="string")n.push({id:"default",url:w});else if(w&&w.length>0){const u=[];for(const{id:d,url:y}of w){const T=`${d}${y}`;u.indexOf(T)===-1&&(u.push(T),n.push({id:d,url:y}))}}return n}function kt(w,n,u){try{const d=new URL(w);return d.pathname+=`${n}${u}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function We(w){const{userImage:n}=w;return!!(n&&n.render&&n.render())&&(w.data.replace(new Uint8Array(n.data.buffer)),!0)}class Ve extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const n of Object.keys(this.images))this.removeImage(n);this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,promiseResolve:d}of this.requestors)d(this._getImagesForIds(u));this.requestors=[]}}getImage(n){const u=this.images[n];if(u&&!u.data&&u.spriteData){const d=u.spriteData;u.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),u.spriteData=null}return u}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let d=!0;const y=u.data||u.spriteData;return this._validateStretch(u.stretchX,y&&y.width)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,y&&y.height)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,u){if(!n)return!0;let d=0;for(const y of n){if(y[0]<d||y[1]<y[0]||u<y[1])return!1;d=y[1]}return!0}_validateContent(n,u){if(!n)return!0;if(n.length!==4)return!1;const d=u.spriteData,y=d&&d.width||u.data.width,T=d&&d.height||u.data.height;return!(n[0]<0||y<n[0]||n[1]<0||T<n[1]||n[2]<0||y<n[2]||n[3]<0||T<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,u,d=!0){const y=this.getImage(n);if(d&&(y.data.width!==u.data.width||y.data.height!==u.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=y.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise(((u,d)=>{let y=!0;if(!this.isLoaded())for(const T of n)this.images[T]||(y=!1);this.isLoaded()||y?u(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:u})}))}_getImagesForIds(n){const u={};for(const d of n){let y=this.getImage(d);y||(this.fire(new c.l("styleimagemissing",{id:d})),y=this.getImage(d)),y?u[d]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],d=this.getImage(n);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const y={w:d.data.width+2,h:d.data.height+2,x:0,y:0},T=new c.I(y,d);this.patterns[n]={bin:y,position:T}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const T in this.patterns)n.push(this.patterns[T].bin);const{w:u,h:d}=c.p(n),y=this.atlasImage;y.resize({width:u||1,height:d||1});for(const T in this.patterns){const{bin:A}=this.patterns[T],O=A.x+1,R=A.y+1,U=this.getImage(T).data,V=U.width,X=U.height;c.R.copy(U,y,{x:0,y:0},{x:O,y:R},{width:V,height:X}),c.R.copy(U,y,{x:0,y:X-1},{x:O,y:R-1},{width:V,height:1}),c.R.copy(U,y,{x:0,y:0},{x:O,y:R+X},{width:V,height:1}),c.R.copy(U,y,{x:V-1,y:0},{x:O-1,y:R},{width:1,height:X}),c.R.copy(U,y,{x:0,y:0},{x:O+V,y:R},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.getImage(u);d||c.w(`Image with ID: "${u}" was not found`),We(d)&&this.updateImage(u,d)}}cloneImages(){const n={};for(const u in this.images){const d=this.images[u];n[u]=Object.assign(Object.assign({},d),{data:d.data?d.data.clone():null})}return n}}const Ot=1e20;function Ue(w,n,u,d,y,T,A,O,R){for(let U=n;U<n+d;U++)Je(w,u*T+U,T,y,A,O,R);for(let U=u;U<u+y;U++)Je(w,U*T+n,1,d,A,O,R)}function Je(w,n,u,d,y,T,A){T[0]=0,A[0]=-Ot,A[1]=Ot,y[0]=w[n];for(let O=1,R=0,U=0;O<d;O++){y[O]=w[n+O*u];const V=O*O;do{const X=T[R];U=(y[O]-y[X]+V-X*X)/(O-X)/2}while(U<=A[R]&&--R>-1);R++,T[R]=O,A[R]=U,A[R+1]=Ot}for(let O=0,R=0;O<d;O++){for(;A[R+1]<O;)R++;const U=T[R],V=O-U;w[n+O*u]=y[U]+V*V}}const Le=c.v.layout_symbol["text-font"].default.join(",");class Ge{constructor(n,u,d){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={},this.lang=d}setURL(n){this.url=n}getGlyphs(n){return c._(this,void 0,void 0,(function*(){const u=[];for(const T in n)for(const A of n[T])u.push(this._getAndCacheGlyphsPromise(T,A));const d=yield Promise.all(u),y={};for(const{stack:T,id:A,glyph:O}of d)y[T]||(y[T]={}),y[T][A]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return y}))}_getAndCacheGlyphsPromise(n,u){return c._(this,void 0,void 0,(function*(){let d=this.entries[n];d||(d=this.entries[n]={glyphs:{},requests:{},ranges:{}});let y=d.glyphs[u];return y!==void 0?{stack:n,id:u,glyph:y}:!this.url||this._charUsesLocalIdeographFontFamily(u)?(y=d.glyphs[u]=this._drawGlyph(d,n,u),{stack:n,id:u,glyph:y}):yield this._downloadAndCacheRangePromise(n,u)}))}_downloadAndCacheRangePromise(n,u){return c._(this,void 0,void 0,(function*(){const d=this.entries[n],y=Math.floor(u/256);if(d.ranges[y])return{stack:n,id:u,glyph:null};if(!d.requests[y]){const T=Ge.loadGlyphRange(n,y,this.url,this.requestManager);d.requests[y]=T}try{const T=yield d.requests[y];for(const A in T)d.glyphs[+A]=T[+A];return d.ranges[y]=!0,{stack:n,id:u,glyph:T[u]||null}}catch(T){const A=d.glyphs[u]=this._drawGlyph(d,n,u);return this._warnOnMissingGlyphRange(A,y,u,T),{stack:n,id:u,glyph:A}}}))}_warnOnMissingGlyphRange(n,u,d,y){const T=256*u,A=T+255,O=d.toString(16).padStart(4,"0").toUpperCase();c.w(`Unable to load glyph range ${u}, ${T}-${A}. Rendering codepoint U+${O} locally instead. ${y}`)}_charUsesLocalIdeographFontFamily(n){return!!this.localIdeographFontFamily&&c.q(n)}_drawGlyph(n,u,d){const y=u===Le&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(d),T=y?"ideographTinySDF":"tinySDF";n[T]||(n[T]=this._createTinySDF(y?this.localIdeographFontFamily:u));const A=n[T].draw(String.fromCodePoint(d)),O=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(d));return{id:d,bitmap:new c.r({width:A.width||60,height:A.height||60},A.data),metrics:{width:O?0:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:O?0:A.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(n){const u=n?n.split(","):[];u.push("sans-serif");const d=u.map((y=>/[-\w]+/.test(y)?y:`'${CSS.escape(y)}'`)).join(",");return new Ge.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:this._fontWeight(u[0]),fontStyle:this._fontStyle(u[0]),lang:this.lang})}_fontStyle(n){return/italic/i.test(n)?"italic":/oblique/i.test(n)?"oblique":"normal"}_fontWeight(n){const u={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let d;for(const[y,T]of Object.entries(u))new RegExp(`\\b${y}\\b`,"i").test(n)&&(d=`${T}`);return d}destroy(){for(const n in this.entries){const u=this.entries[n];u.tinySDF&&(u.tinySDF=null),u.ideographTinySDF&&(u.ideographTinySDF=null),u.glyphs={},u.requests={},u.ranges={}}this.entries={}}}Ge.loadGlyphRange=function(w,n,u,d){return c._(this,void 0,void 0,(function*(){const y=256*n,T=y+255,A=d.transformRequest(u.replace("{fontstack}",w).replace("{range}",`${y}-${T}`),"Glyphs"),O=yield c.n(A,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${n}, ${y}-${T}`);const R={};for(const U of c.o(O.data))R[U.id]=U;return R}))},Ge.TinySDF=class{constructor({fontSize:w=24,buffer:n=3,radius:u=8,cutoff:d=.25,fontFamily:y="sans-serif",fontWeight:T="normal",fontStyle:A="normal",lang:O=null}={}){this.buffer=n,this.cutoff=d,this.radius=u,this.lang=O;const R=this.size=w+4*n,U=this._createCanvas(R),V=this.ctx=U.getContext("2d",{willReadFrequently:!0});V.font=`${A} ${T} ${w}px ${y}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(w){const n=document.createElement("canvas");return n.width=n.height=w,n}draw(w){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:y,actualBoundingBoxRight:T}=this.ctx.measureText(w),A=Math.ceil(u),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-y))),R=Math.min(this.size-this.buffer,A+Math.ceil(d)),U=O+2*this.buffer,V=R+2*this.buffer,X=Math.max(U*V,0),W=new Uint8ClampedArray(X),re={data:W,width:U,height:V,glyphWidth:O,glyphHeight:R,glyphTop:A,glyphLeft:0,glyphAdvance:n};if(O===0||R===0)return re;const{ctx:oe,buffer:fe,gridInner:me,gridOuter:pe}=this;this.lang&&(oe.lang=this.lang),oe.clearRect(fe,fe,O,R),oe.fillText(w,fe,fe+A);const xe=oe.getImageData(fe,fe,O,R);pe.fill(Ot,0,X),me.fill(0,0,X);for(let Ae=0;Ae<R;Ae++)for(let _e=0;_e<O;_e++){const Ee=xe.data[4*(Ae*O+_e)+3]/255;if(Ee===0)continue;const Oe=(Ae+fe)*U+_e+fe;if(Ee===1)pe[Oe]=0,me[Oe]=Ot;else{const we=.5-Ee;pe[Oe]=we>0?we*we:0,me[Oe]=we<0?we*we:0}}Ue(pe,0,0,U,V,U,this.f,this.v,this.z),Ue(me,fe,fe,O,R,U,this.f,this.v,this.z);for(let Ae=0;Ae<X;Ae++){const _e=Math.sqrt(pe[Ae])-Math.sqrt(me[Ae]);W[Ae]=Math.round(255-255*(_e/this.radius+this.cutoff))}return re}};class st{constructor(){this.specification=c.u.light.position}possiblyEvaluate(n,u){return c.F(n.expression.evaluate(u))}interpolate(n,u,d){return{x:c.G.number(n.x,u.x,d),y:c.G.number(n.y,u.y,d),z:c.G.number(n.z,u.z,d)}}}let pt;class Rt extends c.E{constructor(n){super(),pt=pt||new c.t({anchor:new c.D(c.u.light.anchor),position:new st,color:new c.D(c.u.light.color),intensity:new c.D(c.u.light.intensity)}),this._transitionable=new c.x(pt,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,u={}){if(!this._validate(c.y,n,u))for(const d in n){const y=n[d];d.endsWith(c.z)?this._transitionable.setTransition(d.slice(0,-c.z.length),y):this._transitionable.setValue(d,y)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,d){return(!d||d.validate!==!1)&&c.B(this,n.call(c.C,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.u}))}}const De=new c.t({"sky-color":new c.D(c.u.sky["sky-color"]),"horizon-color":new c.D(c.u.sky["horizon-color"]),"fog-color":new c.D(c.u.sky["fog-color"]),"fog-ground-blend":new c.D(c.u.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.u.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.u.sky["atmosphere-blend"])});class lt extends c.E{constructor(n){super(),this._transitionable=new c.x(De,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0))}setSky(n,u={}){if(!this._validate(c.J,n,u)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in n){const y=n[d];d.endsWith(c.z)?this._transitionable.setTransition(d.slice(0,-c.z.length),y):this._transitionable.setValue(d,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,d={}){return d?.validate!==!1&&c.B(this,n.call(c.C,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.u})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Mt{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const d=n.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,u)),this.dashEntry[d]}getDashRanges(n,u,d){const y=[];let T=n.length%2==1?-n[n.length-1]*d:0,A=n[0]*d,O=!0;y.push({left:T,right:A,isDash:O,zeroLength:n[0]===0});let R=n[0];for(let U=1;U<n.length;U++){O=!O;const V=n[U];T=R*d,R+=V,A=R*d,y.push({left:T,right:A,isDash:O,zeroLength:V===0})}return y}addRoundDash(n,u,d){const y=u/2;for(let T=-d;T<=d;T++){const A=this.width*(this.nextRow+d+T);let O=0,R=n[O];for(let U=0;U<this.width;U++){U/R.right>1&&(R=n[++O]);const V=Math.abs(U-R.left),X=Math.abs(U-R.right),W=Math.min(V,X);let re;const oe=T/d*(y+1);if(R.isDash){const fe=y-Math.abs(oe);re=Math.sqrt(W*W+fe*fe)}else re=y-Math.sqrt(W*W+oe*oe);this.data[A+U]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(n){for(let O=n.length-1;O>=0;--O){const R=n[O],U=n[O+1];R.zeroLength?n.splice(O,1):U&&U.isDash===R.isDash&&(U.left=R.left,n.splice(O,1))}const u=n[0],d=n[n.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const y=this.width*this.nextRow;let T=0,A=n[T];for(let O=0;O<this.width;O++){O/A.right>1&&(A=n[++T]);const R=Math.abs(O-A.left),U=Math.abs(O-A.right),V=Math.min(R,U);this.data[y+O]=Math.max(0,Math.min(255,(A.isDash?V:-V)+128))}}addDash(n,u){const d=u?7:0,y=2*d+1;if(this.nextRow+y>this.height)return c.w("LineAtlas out of space"),null;let T=0;for(let O=0;O<n.length;O++)T+=n[O];if(T!==0){const O=this.width/T,R=this.getDashRanges(n,this.width,O);u?this.addRoundDash(R,O,d):this.addRegularDash(R)}const A={y:this.nextRow+d,height:2*d,width:T};return this.nextRow+=y,this.dirty=!0,A}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class qt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<qt.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const Yt=Math.floor($.hardwareConcurrency/2);let Gt,Ar;function mt(){return Gt||(Gt=new qt),Gt}qt.workerCount=c.K(globalThis)?Math.max(Math.min(Yt,3),1):1;class or{constructor(n,u){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=u;const d=this.workerPool.acquire(u);for(let y=0;y<d.length;y++){const T=new c.L(d[y],u);T.name=`Worker ${y}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u){const d=[];for(const y of this.actors)d.push(y.sendAsync({type:n,data:u}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,u){for(const d of this.actors)d.registerMessageHandler(n,u)}unregisterMessageHandler(n){for(const u of this.actors)u.unregisterMessageHandler(n)}}function mr(){return Ar||(Ar=new or(mt(),c.M),Ar.registerMessageHandler("GR",((w,n,u)=>c.m(n,u)))),Ar}function Et(w,n){const u=c.N();return c.O(u,u,[1,1,0]),c.Q(u,u,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?c.S(u,u,w.calculatePosMatrix(n.toUnwrapped())):u}function An(w,n,u,d,y,T,A){var O;const R=(function(W,re,oe){if(W)for(const fe of W){const me=re[fe];if(me&&me.source===oe&&me.type==="fill-extrusion")return!0}else for(const fe in re){const me=re[fe];if(me.source===oe&&me.type==="fill-extrusion")return!0}return!1})((O=y?.layers)!==null&&O!==void 0?O:null,n,w.id),U=T.maxPitchScaleFactor(),V=w.tilesIn(d,U,R);V.sort(ur);const X=[];for(const W of V)X.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(n,u,w.getState(),W.queryGeometry,W.cameraQueryGeometry,W.scale,y,T,U,Et(T,W.tileID),A?(re,oe)=>A(W.tileID,re,oe):void 0)});return(function(W,re){for(const oe in W)for(const fe of W[oe])Wr(fe,re);return W})((function(W){const re={},oe={};for(const fe of W){const me=fe.queryResults,pe=fe.wrappedTileID,xe=oe[pe]=oe[pe]||{};for(const Ae in me){const _e=me[Ae],Ee=xe[Ae]=xe[Ae]||{},Oe=re[Ae]=re[Ae]||[];for(const we of _e)Ee[we.featureIndex]||(Ee[we.featureIndex]=!0,Oe.push(we))}}return re})(X),w)}function ur(w,n){const u=w.tileID,d=n.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}function Wr(w,n){const u=w.feature,d=n.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=d}function sn(w,n,u,d){return c._(this,void 0,void 0,(function*(){let y=w;if(w.url?y=(yield c.j(n.transformRequest(w.url,"Source"),u)).data:yield $.frameAsync(u,d),!y)return null;const T=c.U(c.e(y,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in y&&y.vector_layers&&(T.vectorLayerIds=y.vector_layers.map((A=>A.id))),T}))}class Rr{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}extend(n){const u=this._sw,d=this._ne;let y,T;if(n instanceof c.V)y=n,T=n;else{if(!(n instanceof Rr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Rr.convert(n)):this.extend(c.V.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.V.convert(n)):this;if(y=n._sw,T=n._ne,!y||!T)return this}return u||d?(u.lng=Math.min(y.lng,u.lng),u.lat=Math.min(y.lat,u.lat),d.lng=Math.max(T.lng,d.lng),d.lat=Math.max(T.lat,d.lat)):(this._sw=new c.V(y.lng,y.lat),this._ne=new c.V(T.lng,T.lat)),this}getCenter(){return new c.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.V(this.getWest(),this.getNorth())}getSouthEast(){return new c.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:d}=c.V.convert(n);let y=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&y}intersects(n){if(!((n=Rr.convert(n)).getNorth()>=this.getSouth()&&n.getSouth()<=this.getNorth()))return!1;const u=Math.abs(this.getEast()-this.getWest()),d=Math.abs(n.getEast()-n.getWest());if(u>=360||d>=360)return!0;const y=c.W(this.getWest(),-180,180),T=c.W(this.getEast(),-180,180),A=c.W(n.getWest(),-180,180),O=c.W(n.getEast(),-180,180),R=y>T,U=A>O;return!(!R||!U)||(R?O>=y||A<=T:U?T>=A||y<=O:A<=T&&O>=y)}static convert(n){return n instanceof Rr?n:n&&new Rr(n)}static fromLngLat(n,u=0){const d=360*u/40075017,y=d/Math.cos(Math.PI/180*n.lat);return new Rr(new c.V(n.lng-y,n.lat-d),new c.V(n.lng+y,n.lat+d))}adjustAntiMeridian(){const n=new c.V(this._sw.lng,this._sw.lat),u=new c.V(this._ne.lng,this._ne.lat);return new Rr(n,n.lng>u.lng?new c.V(u.lng+360,u.lat):u)}}class ya{constructor(n,u,d){this.bounds=Rr.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),d=Math.floor(c.Y(this.bounds.getWest())*u),y=Math.floor(c.X(this.bounds.getNorth())*u),T=Math.ceil(c.Y(this.bounds.getEast())*u),A=Math.ceil(c.X(this.bounds.getSouth())*u);return n.x>=d&&n.x<T&&n.y>=y&&n.y<A}}class Ys extends c.E{constructor(n,u,d,y){if(super(),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.U(u,["url","scheme","tileSize","promoteId","encoding"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield sn(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),n&&(c.e(this,n),n.bounds&&(this.tileBounds=new ya(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,c.Z(n)||this.fire(new c.k(n))}}))}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(u,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(n)};d.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise(((T,A)=>{n.reloadPromise={resolve:T,reject:A}}))}else n.actor=this.dispatcher.getActor(),y="LT";n.abortController=new AbortController;try{const T=yield n.actor.sendAsync({type:y,data:d},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,T)}catch(T){if(delete n.abortController,n.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(n,null)}}))}_getOverzoomParameters(n){if(n.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const u=n.tileID.scaledTo(this.maxzoom).canonical,d=u.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:u,overzoomRequest:this.map._requestManager.transformRequest(d,"Tile")}}_afterTileLoadWorkerResponse(n,u){if(u&&u.resourceTiming&&(n.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&n.setExpiryData(u),n.loadVectorData(u,this.map.painter),n.reloadPromise){const d=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(d.resolve).catch(d.reject)}}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class ys extends c.E{constructor(n,u,d,y){super(),this.id=n,this.dispatcher=d,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.U(u,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(n=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield sn(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,u&&(c.e(this,u),u.bounds&&(this.tileBounds=new ya(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,c.Z(u)||this.fire(new c.k(u))}}))}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}serialize(){return c.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const d=yield Re.getImage(this.map._requestManager.transformRequest(u,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&n.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const y=this.map.painter.context,T=y.gl,A=d.data;n.texture=this.map.painter.getTileTexture(A.width),n.texture?n.texture.update(A,{useMipmap:!0}):(n.texture=new c.T(y,A,T.RGBA,{useMipmap:!0}),n.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(d){if(delete n.abortController,n.aborted)n.state="unloaded";else if(d)throw n.state="errored",d}}))}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)}))}hasTransition(){return!1}}class No extends ys{constructor(n,u,d,y){super(n,u,d,y),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(u,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const y=yield Re.getImage(d,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(y&&y.data){const T=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&n.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const A=c.b(T)&&c.$()?T:yield this.readImageNow(T),O={type:this.type,uid:n.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const R=yield n.actor.sendAsync({type:"LDT",data:O});n.dem=R,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(y){if(delete n.abortController,n.aborted)n.state="unloaded";else if(y)throw n.state="errored",y}}))}readImageNow(n){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&c.a0()){const u=n.width+2,d=n.height+2;try{return new c.R({width:u,height:d},yield c.a1(n,-1,-1,u,d))}catch{}}return $.getImageData(n,1)}))}_getNeighboringTiles(n){const u=n.canonical,d=Math.pow(2,u.z),y=(u.x-1+d)%d,T=u.x===0?n.wrap-1:n.wrap,A=(u.x+1+d)%d,O=u.x+1===d?n.wrap+1:n.wrap,R={};return R[new c.a2(n.overscaledZ,T,u.z,y,u.y).key]={backfilled:!1},R[new c.a2(n.overscaledZ,O,u.z,A,u.y).key]={backfilled:!1},u.y>0&&(R[new c.a2(n.overscaledZ,T,u.z,y,u.y-1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,O,u.z,A,u.y-1).key]={backfilled:!1}),u.y+1<d&&(R[new c.a2(n.overscaledZ,T,u.z,y,u.y+1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,O,u.z,A,u.y+1).key]={backfilled:!1}),R}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))}))}}function go(w){return w.type==="GeometryCollection"?w.geometries.map((n=>n.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function ju(w){const n=new Rr;let u;switch(w.type){case"FeatureCollection":u=w.features.map((d=>go(d.geometry))).flat(1/0);break;case"Feature":u=go(w.geometry);break;default:u=go(w)}if(u.length==0)return n;for(let d=0;d<u.length-1;d+=2)n.extend([u[d],u[d+1]]);return n}class ri extends c.E{constructor(n,u,d,y){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=d.getActor(),this.setEventedParent(y),this._data=typeof u.data=="string"?{url:u.data}:{geojson:u.data},this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:c.a5,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.a5,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(n){return n*(c.a5/this.tileSize)}_getClusterMaxZoom(n){const u=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${u}"`),u}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(n){this.map=n,this.load()}setData(n,u){this._data=typeof n=="string"?{url:n}:{geojson:n},this._pendingWorkerUpdate={data:n};const d=this._updateWorkerData();return u?d:this}updateData(n,u){this._pendingWorkerUpdate.diff=c.a6(this._pendingWorkerUpdate.diff,n);const d=this._updateWorkerData();return u?d:this}getData(){return c._(this,void 0,void 0,(function*(){const n=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})}))}getBounds(){return c._(this,void 0,void 0,(function*(){return ju(yield this.getData())}))}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,u,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:u,offset:d}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void c.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:n,diff:u}=this._pendingWorkerUpdate,d=this._getLoadGeoJSONParameters(n,u);n!==void 0?this._pendingWorkerUpdate.data=void 0:u&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(d)}))}_getLoadGeoJSONParameters(n,u){const d=c.e({type:this.type},this.workerOptions);return typeof n=="string"?(d.request=this.map._requestManager.transformRequest($.resolveURL(n),"Source"),d.request.collectResourceTiming=this._collectResourceTiming,d):n!==void 0?(d.data=n,d):(u&&(d.dataDiff=u),d)}_dispatchWorkerUpdate(n){return c._(this,void 0,void 0,(function*(){this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const u=yield this.actor.sendAsync({type:"LD",data:n});if(this._isUpdatingWorker=!1,this._removed||u.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));u.data&&(this._data={geojson:u.data});const d=this._applyDiffToSource(n.dataDiff),y=this._getShouldReloadTileOptions(d),T={dataType:"source"};this._applyResourceTiming(T,u),this.fire(new c.l("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},T),{sourceDataType:"content",shouldReloadTileOptions:y})))}catch(u){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(u))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyResourceTiming(n,u){var d;if(!this._collectResourceTiming)return;const y=(d=u.resourceTiming)===null||d===void 0?void 0:d[this.id];if(!y)return;const T=y.slice(0);T?.length&&c.e(n,{resourceTiming:T})}_applyDiffToSource(n){if(!n)return;const u=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const y=c.a7(this._data.geojson,u);if(!y)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:y}}if(!this._data.updateable)return;const d=c.a8(this._data.updateable,n,u);return n.removeAll||this._options.cluster?void 0:d}_getShouldReloadTileOptions(n){if(n)return{affectedBounds:n.filter(Boolean).map((u=>ju(u)))}}shouldReloadTile(n,{affectedBounds:u}){if(n.state==="loading")return!0;if(n.state==="unloaded")return!1;const{buffer:d,extent:y}=this.workerOptions.geojsonVtOptions,T=(function({x:A,y:O,z:R},U=0){const V=c.a3((A-U)/Math.pow(2,R)),X=c.a4((O+1+U)/Math.pow(2,R)),W=c.a3((A+1+U)/Math.pow(2,R)),re=c.a4((O-U)/Math.pow(2,R));return new Rr([V,X],[W,re])})(n.tileID.canonical,d/y);for(const A of u)if(T.intersects(A))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.actor?"RT":"LT";n.actor=this.actor;const d={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const y=yield this.actor.sendAsync({type:u,data:d},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(y,this.map.painter,u==="RT")}))}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class va extends c.E{constructor(n,u,d,y){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=u}load(n){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield Re.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,n&&(this.coordinates=n),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,c.Z(u)||this.fire(new c.k(u))}}))}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const u=n.map(c.a9.fromLngLat);var d;return this.tileID=(function(y){const T=c.aa.fromPoints(y),A=T.width(),O=T.height(),R=Math.max(A,O),U=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),V=Math.pow(2,U);return new c.ac(U,Math.floor((T.minX+T.maxX)/2*V),Math.floor((T.minY+T.maxY)/2*V))})(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map((y=>this.tileID.getTilePoint(y)._round())),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,u=n.gl;this.texture||(this.texture=new c.T(n,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const y in this.tiles){const T=this.tiles[y];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:u,minY:d,maxX:y,maxY:T}=c.aa.fromPoints(n),A={};for(let O=0;O<=c.ab;O++){const R=Math.pow(2,O),U=Math.floor(u*R),V=Math.floor(d*R),X=Math.floor(y*R),W=Math.floor(T*R),re=(U%R+R)%R,oe=X%R,fe=Math.floor(U/R),me=Math.floor(X/R);A[O]={minWrap:fe,maxWrap:me,minTileXWrapped:re,maxTileXWrapped:oe,minTileY:V,maxTileY:W}}return A}}class Nu extends va{constructor(n,u,d,y){super(n,u,d,y),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const u of n.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.ad(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.k(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new c.k(new c.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,u=n.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(n,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const y in this.tiles){const T=this.tiles[y];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class vs extends va{constructor(n,u,d,y){super(n,u,d,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((A=>typeof A!="number"))))||this.fire(new c.k(new c.ae(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.ae(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.k(new c.ae(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.ae(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.ae(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,d=u.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new c.T(u,this.canvas,d.RGBA,{premultiply:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let y=!1;for(const T in this.tiles){const A=this.tiles[T];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,y=!0)}y&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const _s={},Bc=w=>{switch(w){case"geojson":return ri;case"image":return va;case"raster":return ys;case"raster-dem":return No;case"vector":return Ys;case"video":return Nu;case"canvas":return vs}return _s[w]},Ks="RTLPluginLoaded";class Be extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=mr()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return c._(this,arguments,void 0,(function*(u,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=$.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(Ks))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ee=null;function ne(){return ee||(ee=new Be),ee}var ae,be;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(ae||(ae={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(be||(be={}));class Ce{constructor(n,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=c.af(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttFingerprint={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:u,fadingParentID:d,fadeEndTime:y}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=u,this.fadingParentID=d,this.fadeEndTime=y}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=K(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData,this.latestFeatureIndex.encoding=n.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=(function(y,T){const A={};if(!T)return A;for(const O of y){const R=O.layerIds.map((U=>T.getLayer(U))).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map((U=>R.filter((V=>V.id===U))[0])));for(const U of R)A[U.id]=O}}return A})(n.buckets,u?.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const T=this.buckets[y];if(T instanceof c.ah){if(this.hasSymbolBuckets=!0,!d)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const T=this.buckets[y];if(T instanceof c.ah&&T.hasRTLText){this.hasRTLText=!0,ne().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const T=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(T))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new c.ag}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const y=this.buckets[d];y.uploadPending()&&y.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,d,y,T,A,O,R,U,V,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:T,scale:A,tileSize:this.tileSize,pixelPosMatrix:V,transform:R,params:O,queryPadding:this.queryPadding*U,getElevation:X},n,u,d):{}}querySourceFeatures(n,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const y=d.loadVTLayers(),T=u&&u.sourceLayer?u.sourceLayer:"",A=y[c.ai]||y[T];if(!A)return;const O=c.aj(u?.filter,u?.globalState),{z:R,x:U,y:V}=this.tileID.canonical,X={z:R,x:U,y:V};for(let W=0;W<A.length;W++){const re=A.feature(W);if(O.needGeometry){const me=c.ak(re,!0);if(!O.filter(new c.H(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!O.filter(new c.H(this.tileID.overscaledZ),re))continue;const oe=d.getId(re,T),fe=new c.al(re,R,U,V,oe);fe.tile=X,n.push(fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const d=c.am(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let y=!1;if(this.expirationTime>d)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const T=this.expirationTime-u;T?this.expirationTime=d+Math.max(T,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!u.style.hasLayer(y))continue;const T=this.buckets[y],A=T.layers[0].sourceLayer||c.ai,O=d[A],R=n[A];if(!O||!R||Object.keys(R).length===0)continue;T.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const U=u&&u.style&&u.style.getLayer(y);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=K()+n}setDependencies(n,u){const d={};for(const y of u)d[y]=!0;this.dependencies[n]=d}hasDependency(n,u){for(const d of n){const y=this.dependencies[d];if(y){for(const T of u)if(y[T])return!0}}return!1}}class He{constructor(){this.state={},this.stateChanges={},this.deletedStates={},this.revision=0}updateState(n,u,d){const y=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][y]=this.stateChanges[n][y]||{},c.e(this.stateChanges[n][y],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const T in this.state[n])T!==y&&(this.deletedStates[n][T]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][y]===null){this.deletedStates[n][y]={};for(const T in this.state[n][y])d[T]||(this.deletedStates[n][y][T]=null)}else for(const T in d)this.deletedStates[n]&&this.deletedStates[n][y]&&this.deletedStates[n][y][T]===null&&delete this.deletedStates[n][y][T]}removeFeatureState(n,u,d){if(this.deletedStates[n]===null)return;const y=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&u!==void 0)this.deletedStates[n][y]!==null&&(this.deletedStates[n][y]=this.deletedStates[n][y]||{},this.deletedStates[n][y][d]=null);else if(u!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][y])for(d in this.deletedStates[n][y]={},this.stateChanges[n][y])this.deletedStates[n][y][d]=null;else this.deletedStates[n][y]=null;else this.deletedStates[n]=null}getState(n,u){const d=String(u),y=c.e({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const T=this.deletedStates[n][u];if(T===null)return{};for(const A in T)delete y[A]}return y}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const d={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const T={};for(const A in this.stateChanges[y])this.state[y][A]||(this.state[y][A]={}),c.e(this.state[y][A],this.stateChanges[y][A]),T[A]=this.state[y][A];d[y]=T}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const T={};if(this.deletedStates[y]===null)for(const A in this.state[y])T[A]={},this.state[y][A]={};else for(const A in this.deletedStates[y]){if(this.deletedStates[y][A]===null)this.state[y][A]={};else for(const O of Object.keys(this.deletedStates[y][A]))delete this.state[y][A][O];T[A]=this.state[y][A]}d[y]=d[y]||{},c.e(d[y],T)}this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0&&(this.revision++,n.setFeatureState(d,u))}}const $e=89.25;function Fe(w,n){const u=c.an(n.lat,-c.ao,c.ao);return new c.P(c.Y(n.lng)*w,c.X(u)*w)}function Ze(w,n){return new c.a9(n.x/w,n.y/w).toLngLat()}function vt(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(c.ap(90-w.pitch)),Math.tan(c.ap($e-w.pitch)))}function at(w,n){const u=w.canonical,d=n/c.aq(u.z),y=u.x+Math.pow(2,u.z)*w.wrap,T=c.ar(new Float64Array(16));return c.O(T,T,[y*d,u.y*d,0]),c.Q(T,T,[d/c.a5,d/c.a5,1]),T}function Me(w,n,u,d,y){const T=c.a9.fromLngLat(w,n),A=y*c.as(1,w.lat),{x:O,y:R,z:U}=Bt(u,d);return new c.a9(T.x+A*-O,T.y+A*-R,T.z+A*-U)}function Bt(w,n){const u=c.ap(w),d=c.ap(n),y=Math.cos(-u),T=Math.sin(u);return{x:T*Math.sin(d),y:-T*Math.cos(d),z:y}}function nr(w,n,u){const d=n.intersectsFrustum(w);if(!u||d===0)return d;const y=n.intersectsPlane(u);return y===0?0:d===2&&y===2?2:1}function Wt(w,n,u){let d=0;const y=(u-n)/10;for(let T=0;T<10;T++)d+=y*Math.pow(Math.cos(n+(T+.5)/10*(u-n)),w);return d}function Qt(w,n){return function(u,d,y,T,A){const O=2*((w-1)/c.at(Math.cos(c.ap($e-A))/Math.cos(c.ap($e)))-1),R=Math.acos(y/T),U=2*Wt(O-1,0,c.ap(A/2)),V=Math.min(c.ap($e),R+c.ap(A/2)),X=Wt(O-1,Math.min(V,R-c.ap(A/2)),V),W=Math.atan(d/y),re=Math.hypot(d,y);let oe=u;return oe+=c.at(T/re/Math.max(.5,Math.cos(c.ap(A/2)))),oe+=O*c.at(Math.cos(W))/2,oe-=c.at(Math.max(1,X/U/n))/2,oe}}const er=Qt(9.314,3);function ir(w,n){const u=(n.roundZoom?Math.round:Math.floor)(w.zoom+c.at(w.tileSize/n.tileSize));return Math.max(0,u)}function hn(w,n){const u=w.getCameraFrustum(),d=w.getClippingPlane(),y=w.screenPointToMercatorCoordinate(w.getCameraPoint()),T=c.a9.fromLngLat(w.center,w.elevation);y.z=T.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const A=w.getCoveringTilesDetailsProvider(),O=A.allowVariableZoom(w,n),R=ir(w,n),U=n.minzoom||0,V=n.maxzoom!==void 0?n.maxzoom:w.maxZoom,X=Math.min(Math.max(0,R),V),W=Math.pow(2,X),re=[W*y.x,W*y.y,0],oe=[W*T.x,W*T.y,0],fe=Math.hypot(T.x-y.x,T.y-y.y),me=Math.abs(T.z-y.z),pe=Math.hypot(fe,me),xe=Ee=>({zoom:0,x:0,y:0,wrap:Ee,fullyVisible:!1}),Ae=[],_e=[];if(w.renderWorldCopies&&A.allowWorldCopies())for(let Ee=1;Ee<=3;Ee++)Ae.push(xe(-Ee)),Ae.push(xe(Ee));for(Ae.push(xe(0));Ae.length>0;){const Ee=Ae.pop(),Oe=Ee.x,we=Ee.y;let je=Ee.fullyVisible;const et={x:Oe,y:we,z:Ee.zoom},Xe=A.getTileBoundingVolume(et,Ee.wrap,w.elevation,n);if(!je){const Pt=nr(u,Xe,d);if(Pt===0)continue;je=Pt===2}const Ke=A.distanceToTile2d(y.x,y.y,et,Xe);let Qe=R;O&&(Qe=(n.calculateTileZoom||er)(w.zoom+c.at(w.tileSize/n.tileSize),Ke,me,pe,w.fov)),Qe=(n.roundZoom?Math.round:Math.floor)(Qe),Qe=Math.max(0,Qe);const Ct=Math.min(Qe,V);if(Ee.wrap=A.getWrap(T,et,Ee.wrap),Ee.zoom>=Ct){if(Ee.zoom<U)continue;const Pt=X-Ee.zoom,yt=re[0]-.5-(Oe<<Pt),It=re[1]-.5-(we<<Pt),sr=n.reparseOverscaled?Math.max(Ee.zoom,Qe):Ee.zoom;_e.push({tileID:new c.a2(Ee.zoom===V?sr:Ee.zoom,Ee.wrap,Ee.zoom,Oe,we),distanceSq:c.au([oe[0]-.5-Oe,oe[1]-.5-we]),tileDistanceToCamera:Math.sqrt(yt*yt+It*It)})}else for(let Pt=0;Pt<4;Pt++)Ae.push({zoom:Ee.zoom+1,x:(Oe<<1)+Pt%2,y:(we<<1)+(Pt>>1),wrap:Ee.wrap,fullyVisible:je})}return _e.sort(((Ee,Oe)=>Ee.distanceSq-Oe.distanceSq)).map((Ee=>Ee.tileID))}const Mn=c.aa.fromPoints([new c.P(0,0),new c.P(c.a5,c.a5)]);function xn(w){return w==="raster"||w==="image"||w==="video"}function wi(w,n,u,d,y,T,A){if(!n.hasData())return!1;const{tileID:O,fadingRole:R,fadingDirection:U,fadingParentID:V}=n;if(R===ae.Base&&U===be.Incoming&&V)return u[V.key]=V,!0;const X=Math.max(O.overscaledZ-y,T);for(let W=O.overscaledZ-1;W>=X;W--){const re=O.scaledTo(W),oe=w.getLoadedTile(re);if(oe)return n.setCrossFadeLogic({fadingRole:ae.Base,fadingDirection:be.Incoming,fadingParentID:oe.tileID,fadeEndTime:d+A}),oe.setCrossFadeLogic({fadingRole:ae.Parent,fadingDirection:be.Departing,fadeEndTime:d+A}),u[re.key]=re,!0}return!1}function fn(w,n,u,d,y,T){if(!n.hasData())return!1;const A=n.tileID.children(y);let O=wt(w,n,A,u,d,y,T);if(O)return!0;for(const R of A)wt(w,n,R.children(y),u,d,y,T)&&(O=!0);return O}function wt(w,n,u,d,y,T,A){if(u[0].overscaledZ>=T)return!1;let O=!1;for(const R of u){const U=w.getLoadedTile(R);if(!U)continue;const{fadingRole:V,fadingDirection:X,fadingParentID:W}=U;V===ae.Base&&X===be.Departing&&W||(U.setCrossFadeLogic({fadingRole:ae.Base,fadingDirection:be.Departing,fadingParentID:n.tileID,fadeEndTime:y+A}),n.setCrossFadeLogic({fadingRole:ae.Parent,fadingDirection:be.Incoming,fadeEndTime:y+A})),d[R.key]=R,O=!0}return O}function Dr(w,n,u,d){const y=w.tileID;return!!w.selfFading||!w.hasData()&&!!n.has(y)&&(w.setSelfFadeLogic(u+d),!0)}function an(w,n){var u;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let d=n.tileID.canonical.x-w.tileID.canonical.x;const y=n.tileID.canonical.y-w.tileID.canonical.y,T=Math.pow(2,w.tileID.canonical.z),A=n.tileID.key;d===0&&y===0||Math.abs(y)>1||(Math.abs(d)>1&&(Math.abs(d+T)===1?d+=T:Math.abs(d-T)===1&&(d-=T)),n.dem&&w.dem&&(w.dem.backfillBorder(n.dem,d,y),!((u=w.neighboringTiles)===null||u===void 0)&&u[A]&&(w.neighboringTiles[A].backfilled=!0)))}class Wi{constructor(){this._tiles={}}handleWrapJump(n){const u={};for(const d in this._tiles){const y=this._tiles[d];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+n),u[y.tileID.key]=y}this._tiles=u}setFeatureState(n,u){for(const d in this._tiles)this._tiles[d].setFeatureState(n,u)}getAllTiles(){return Object.values(this._tiles)}getAllIds(n=!1){return n?Object.values(this._tiles).map((u=>u.tileID)).sort(c.aw).map((u=>u.key)):Object.keys(this._tiles)}getTileById(n){return this._tiles[n]}setTile(n,u){this._tiles[n]=u}deleteTileById(n){delete this._tiles[n]}getLoadedTile(n){const u=this.getTileById(n.key);return u?.hasData()?u:null}isIdRenderable(n,u=!1){var d;return(d=this.getTileById(n))===null||d===void 0?void 0:d.isRenderable(u)}getRenderableIds(n=0,u){const d=[];for(const y of this.getAllIds())this.isIdRenderable(y,u)&&d.push(this.getTileById(y));return u?d.sort(((y,T)=>{const A=y.tileID,O=T.tileID,R=new c.P(A.canonical.x,A.canonical.y)._rotate(-n),U=new c.P(O.canonical.x,O.canonical.y)._rotate(-n);return A.overscaledZ-O.overscaledZ||U.y-R.y||U.x-R.x})).map((y=>y.tileID.key)):d.map((y=>y.tileID)).sort(c.aw).map((y=>y.key))}}class Fr extends c.E{constructor(n,u,d){super(),this.id=n,this.dispatcher=d,this.on("data",(y=>this._dataHandler(y))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((y,T,A,O)=>{const R=new(Bc(T.type))(y,T,A,O);if(R.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${R.id}`);return R})(n,u,d,this),this._inViewTiles=new Wi,this._outOfViewCache=new c.ax(0,(y=>this._unloadTile(y))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new He,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){for(const u of this._inViewTiles.getAllTiles())u.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n),this._inViewTiles=new Wi}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u,d){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,u,d)}catch(y){n.state="errored",y.status!==404?this._source.fire(new c.k(y,{tile:n})):this.update(this.transform,this.terrain)}}))}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new c.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const u of this._inViewTiles.getAllTiles())u.upload(n),u.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(n){var u;return this._inViewTiles.getRenderableIds((u=this.transform)===null||u===void 0?void 0:u.bearingInRadians,n)}hasRenderableParent(n){const u=n.overscaledZ-1;if(u>=this._source.minzoom){const d=this.getLoadedTile(n.scaledTo(u));if(d)return this._inViewTiles.isIdRenderable(d.tileID.key)}return!1}reload(n,u=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const d of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(d);u&&!this._source.shouldReloadTile(y,u)||(n?this._reloadTile(d,"expired"):y.state!=="errored"&&this._reloadTile(d,"reloading"))}}}_reloadTile(n,u){return c._(this,void 0,void 0,(function*(){const d=this._inViewTiles.getTileById(n);d&&(d.state!=="loading"&&(d.state=u),yield this._loadTile(d,n,u))}))}_tileLoaded(n,u,d){n.timeAdded=K(),n.selfFading&&(n.fadeEndTime=n.timeAdded+this._rasterFadeDuration),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),this.getSource().type==="raster-dem"&&n.dem&&(function(y,T){var A,O;const R=T.getRenderableIds();for(const U of R){if(!y.neighboringTiles||!y.neighboringTiles[U])continue;const V=T.getTileById(U);y.neighboringTiles[U].backfilled||an(y,V),!((O=(A=V.neighboringTiles)===null||A===void 0?void 0:A[y.tileID.key])===null||O===void 0)&&O.backfilled||an(V,y)}})(n,this._inViewTiles),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:n,coord:n.tileID}))}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._inViewTiles.getTileById(n)}_retainLoadedChildren(n,u){const d=this._getLoadedDescendents(u),y=new Set;for(const T of u){const A=d[T.key];if(!A?.length){y.add(T);continue}const O=T.overscaledZ+Fr.maxOverzooming,R=A.filter((X=>X.tileID.overscaledZ<=O));if(!R.length){y.add(T);continue}const U=Math.min(...R.map((X=>X.tileID.overscaledZ))),V=R.filter((X=>X.tileID.overscaledZ===U)).map((X=>X.tileID));for(const X of V)n[X.key]=X;this._areDescendentsComplete(V,U,T.overscaledZ)||y.add(T)}return y}_getLoadedDescendents(n){var u;const d={};for(const y of this._inViewTiles.getAllTiles().filter((T=>T.hasData())))for(const T of n)y.tileID.isChildOf(T)&&(d[u=T.key]||(d[u]=[])).push(y);return d}_areDescendentsComplete(n,u,d){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===u:Math.pow(4,u-d)===n.length}getLoadedTile(n){return this._inViewTiles.getLoadedTile(n)}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,y=Math.floor(u*d*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._outOfViewCache.setMaxSize(T)}handleWrapJump(n){const u=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);this._prevLng=n,u&&(this._inViewTiles.handleWrapJump(u),this._resetTileReloadTimers())}update(n,u){if(!this._sourceLoaded||this._paused)return;let d;this.transform=n,this.terrain=u,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((R=>new c.a2(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y))):(d=hn(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?n.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter((R=>this._source.hasTile(R))))):d=[],this.usedForTerrain&&(d=this._addTerrainIdealTiles(d));const y=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,y&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=ir(n,this._source),A=this._updateRetainedTiles(d,T),O=xn(this._source.type);O&&this._rasterFadeDuration>0&&!u&&(function(R,U,V,X,W,re,oe){const fe=K(),me=c.av(U);for(const pe of U){const xe=R.getTileById(pe.key);xe.fadingDirection!==be.Departing&&xe.fadeOpacity!==0||xe.resetFadeLogic(),wi(R,xe,V,fe,X,W,oe)||fn(R,xe,V,fe,re,oe)||Dr(xe,me,fe,oe)||xe.resetFadeLogic()}})(this._inViewTiles,d,A,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),O?this._cleanUpRasterTiles(A):this._cleanUpVectorTiles(A)}_cleanUpRasterTiles(n){for(const u of this._inViewTiles.getAllIds())n[u]||this._removeTile(u)}_cleanUpVectorTiles(n){for(const u of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(u);n[u]?d.clearSymbolFadeHold():d.hasSymbolBuckets?d.holdingForSymbolFade()?d.symbolFadeFinished()&&this._removeTile(u):d.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(n){const u=[];for(const d of n)if(d.canonical.z>this._source.minzoom){const y=d.scaledTo(d.canonical.z-1);u.push(y);const T=d.scaledTo(Math.max(this._source.minzoom,Math.min(d.canonical.z,5)));u.push(T)}return n.concat(u)}releaseSymbolFadeTiles(){for(const n of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(n).holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){var d;const y=new Set;for(const U of n)this._addTile(U).hasData()||y.add(U);const T=n.reduce(((U,V)=>(U[V.key]=V,U)),{}),A=this._retainLoadedChildren(T,y),O={},R=Math.max(u-Fr.maxUnderzooming,this._source.minzoom);for(const U of A){let V=this._inViewTiles.getTileById(U.key),X=V?.wasRequested();for(let W=U.overscaledZ-1;W>=R;--W){const re=U.scaledTo(W);if(O[re.key])break;if(O[re.key]=!0,V=this.getTile(re),!V&&X&&(V=this._addTile(re)),V){const oe=V.hasData();if((oe||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||X)&&(T[re.key]=re),X=V.wasRequested(),oe)break}}}return T}_addTile(n){let u=this._inViewTiles.getTileById(n.key);if(u)return u;u=this._outOfViewCache.getAndRemove(n),u&&(u.resetFadeLogic(),this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null));const d=u;return u||(u=new Ce(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,n.key,u.state)),u.uses++,this._inViewTiles.setTile(n.key,u),d||this._source.fire(new c.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){this._clearTileReloadTimer(n);const d=u.getExpiryTimeout();d&&(this._timers[n]=setTimeout((()=>{this._reloadTile(n,"expired"),delete this._timers[n]}),d))}_clearTileReloadTimer(n){const u=this._timers[n];u&&(clearTimeout(u),delete this._timers[n])}_resetTileReloadTimers(){for(const n in this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(const n of this._inViewTiles.getAllIds()){const u=this._inViewTiles.getTileById(n);this._setTileReloadTimer(n,u)}}refreshTiles(n){for(const u of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(u);(this._inViewTiles.isIdRenderable(u)||d.state=="errored")&&n.some((y=>y.equals(d.tileID.canonical)))&&this._reloadTile(u,"expired")}}_removeTile(n){const u=this._inViewTiles.getTileById(n);u&&(u.uses--,this._inViewTiles.deleteTileById(n),this._clearTileReloadTimer(n),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._outOfViewCache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged,n.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n of this._inViewTiles.getAllIds())this._removeTile(n);this._outOfViewCache.reset()}tilesIn(n,u,d){const y=[],T=this.transform;if(!T)return y;const A=T.getCoveringTilesDetailsProvider().allowWorldCopies(),O=d?T.getCameraQueryGeometry(n):n,R=re=>T.screenPointToMercatorCoordinate(re,this.terrain),U=this.transformBbox(n,R,!A),V=this.transformBbox(O,R,!A),X=this.getIds(),W=c.aa.fromPoints(V);for(let re=0;re<X.length;re++){const oe=this._inViewTiles.getTileById(X[re]);if(oe.holdingForSymbolFade())continue;const fe=A?[oe.tileID]:[oe.tileID.unwrapTo(-1),oe.tileID.unwrapTo(0)],me=Math.pow(2,T.zoom-oe.tileID.overscaledZ),pe=u*oe.queryPadding*c.a5/oe.tileSize/me;for(const xe of fe){const Ae=W.map((_e=>xe.getTilePoint(new c.a9(_e.x,_e.y))));if(Ae.expandBy(pe),Ae.intersects(Mn)){const _e=U.map((Oe=>xe.getTilePoint(Oe))),Ee=V.map((Oe=>xe.getTilePoint(Oe)));y.push({tile:oe,tileID:A?xe:xe.unwrapTo(0),queryGeometry:_e,cameraQueryGeometry:Ee,scale:me})}}}return y}transformBbox(n,u,d){let y=n.map(u);if(d){const T=c.aa.fromPoints(n);T.shrinkBy(.001*Math.min(T.width(),T.height()));const A=T.map(u);c.aa.fromPoints(y).covers(A)||(y=y.map((O=>O.x>.5?new c.a9(O.x-1,O.y,O.z):O)))}return y}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map((d=>this._inViewTiles.getTileById(d).tileID));return this.transform&&this.transform.populateCache(u),u}hasTransition(){return!!this._source.hasTransition()||!(!xn(this._source.type)||!(function(n,u){if(u<=0)return!1;const d=K();for(const y of n.getAllTiles())if(y.fadeEndTime>=d)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,u,d){this._state.updateState(n=n||c.ai,u,d)}removeFeatureState(n,u,d){this._state.removeFeatureState(n=n||c.ai,u,d)}getFeatureState(n,u){return this._state.getState(n=n||c.ai,u)}setDependencies(n,u,d){const y=this._inViewTiles.getTileById(n);y&&y.setDependencies(u,d)}reloadTilesForDependencies(n,u){for(const d of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(d).hasDependency(n,u)&&this._reloadTile(d,"reloading");this._outOfViewCache.filter((d=>!d.hasDependency(n,u)))}areTilesLoaded(){for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}}Fr.maxUnderzooming=10,Fr.maxOverzooming=3;class At{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.an(n,0,1);let u=1,d=this._distances[u];const y=n*this.paddedLength+this.padding;for(;d<y&&u<this._distances.length;)d=this._distances[++u];const T=u-1,A=this._distances[T],O=d-A,R=O>0?(y-A)/O:0;return this.points[T].mult(1-R).add(this.points[u].mult(R))}}function Kt(w,n){let u=!0;return w==="always"||w!=="never"&&n!=="never"||(u=!1),u}class cr{constructor(n,u,d){const y=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(u/d);for(let A=0;A<this.xCellCount*this.yCellCount;A++)y.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,d,y,T){this._forEachCell(u,d,y,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(y),this.bboxes.push(T)}insertCircle(n,u,d,y){this._forEachCell(u-y,d-y,u+y,d+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(d),this.circles.push(y)}_insertBoxCell(n,u,d,y,T,A){this.boxCells[T].push(A)}_insertCircleCell(n,u,d,y,T,A){this.circleCells[T].push(A)}_query(n,u,d,y,T,A,O){if(d<0||n>this.width||y<0||u>this.height)return[];const R=[];if(n<=0&&u<=0&&this.width<=d&&this.height<=y){if(T)return[{key:null,x1:n,y1:u,x2:d,y2:y}];for(let U=0;U<this.boxKeys.length;U++)R.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const V=this.circles[3*U],X=this.circles[3*U+1],W=this.circles[3*U+2];R.push({key:this.circleKeys[U],x1:V-W,y1:X-W,x2:V+W,y2:X+W})}}else this._forEachCell(n,u,d,y,this._queryCell,R,{hitTest:T,overlapMode:A,seenUids:{box:{},circle:{}}},O);return R}query(n,u,d,y){return this._query(n,u,d,y,!1,null)}hitTest(n,u,d,y,T,A){return this._query(n,u,d,y,!0,T,A).length>0}hitTestCircle(n,u,d,y,T){const A=n-d,O=n+d,R=u-d,U=u+d;if(O<0||A>this.width||U<0||R>this.height)return!1;const V=[];return this._forEachCell(A,R,O,U,this._queryCellCircle,V,{hitTest:!0,overlapMode:y,circle:{x:n,y:u,radius:d},seenUids:{box:{},circle:{}}},T),V.length>0}_queryCell(n,u,d,y,T,A,O,R){const{seenUids:U,hitTest:V,overlapMode:X}=O,W=this.boxCells[T];if(W!==null){const oe=this.bboxes;for(const fe of W)if(!U.box[fe]){U.box[fe]=!0;const me=4*fe,pe=this.boxKeys[fe];if(n<=oe[me+2]&&u<=oe[me+3]&&d>=oe[me+0]&&y>=oe[me+1]&&(!R||R(pe))&&(!V||!Kt(X,pe.overlapMode))&&(A.push({key:pe,x1:oe[me],y1:oe[me+1],x2:oe[me+2],y2:oe[me+3]}),V))return!0}}const re=this.circleCells[T];if(re!==null){const oe=this.circles;for(const fe of re)if(!U.circle[fe]){U.circle[fe]=!0;const me=3*fe,pe=this.circleKeys[fe];if(this._circleAndRectCollide(oe[me],oe[me+1],oe[me+2],n,u,d,y)&&(!R||R(pe))&&(!V||!Kt(X,pe.overlapMode))){const xe=oe[me],Ae=oe[me+1],_e=oe[me+2];if(A.push({key:pe,x1:xe-_e,y1:Ae-_e,x2:xe+_e,y2:Ae+_e}),V)return!0}}}return!1}_queryCellCircle(n,u,d,y,T,A,O,R){const{circle:U,seenUids:V,overlapMode:X}=O,W=this.boxCells[T];if(W!==null){const oe=this.bboxes;for(const fe of W)if(!V.box[fe]){V.box[fe]=!0;const me=4*fe,pe=this.boxKeys[fe];if(this._circleAndRectCollide(U.x,U.y,U.radius,oe[me+0],oe[me+1],oe[me+2],oe[me+3])&&(!R||R(pe))&&!Kt(X,pe.overlapMode))return A.push(!0),!0}}const re=this.circleCells[T];if(re!==null){const oe=this.circles;for(const fe of re)if(!V.circle[fe]){V.circle[fe]=!0;const me=3*fe,pe=this.circleKeys[fe];if(this._circlesCollide(oe[me],oe[me+1],oe[me+2],U.x,U.y,U.radius)&&(!R||R(pe))&&!Kt(X,pe.overlapMode))return A.push(!0),!0}}}_forEachCell(n,u,d,y,T,A,O,R){const U=this._convertToXCellCoord(n),V=this._convertToYCellCoord(u),X=this._convertToXCellCoord(d),W=this._convertToYCellCoord(y);for(let re=U;re<=X;re++)for(let oe=V;oe<=W;oe++)if(T.call(this,n,u,d,y,this.xCellCount*oe+re,A,O,R))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,d,y,T,A){const O=y-n,R=T-u,U=d+A;return U*U>O*O+R*R}_circleAndRectCollide(n,u,d,y,T,A,O){const R=(A-y)/2,U=Math.abs(n-(y+R));if(U>R+d)return!1;const V=(O-T)/2,X=Math.abs(u-(T+V));if(X>V+d)return!1;if(U<=R||X<=V)return!0;const W=U-R,re=X-V;return W*W+re*re<=d*d}}function _a(w,n,u){const d=c.N();if(!w){const{vecSouth:X,vecEast:W}=Bo(n),re=P();re[0]=W[0],re[1]=W[1],re[2]=X[0],re[3]=X[1],y=re,(V=(A=(T=re)[0])*(U=T[3])-(R=T[2])*(O=T[1]))&&(y[0]=U*(V=1/V),y[1]=-O*V,y[2]=-R*V,y[3]=A*V),d[0]=re[0],d[1]=re[1],d[4]=re[2],d[5]=re[3]}var y,T,A,O,R,U,V;return c.Q(d,d,[1/u,1/u,1]),d}function hf(w,n,u,d){if(w){const y=c.N();if(!n){const{vecSouth:T,vecEast:A}=Bo(u);y[0]=A[0],y[1]=A[1],y[4]=T[0],y[5]=T[1]}return c.Q(y,y,[d,d,1]),y}return u.pixelsToClipSpaceMatrix}function Bo(w){const n=Math.cos(w.rollInRadians),u=Math.sin(w.rollInRadians),d=Math.cos(w.pitchInRadians),y=Math.cos(w.bearingInRadians),T=Math.sin(w.bearingInRadians),A=c.aC();A[0]=-y*d*u-T*n,A[1]=-T*d*u+y*n;const O=c.aD(A);O<1e-9?c.aE(A):c.aF(A,A,1/O);const R=c.aC();R[0]=y*d*n-T*u,R[1]=T*d*n+y*u;const U=c.aD(R);return U<1e-9?c.aE(R):c.aF(R,R,1/U),{vecEast:R,vecSouth:A}}function hr(w,n,u,d){let y;d?(y=[w,n,d(w,n),1],c.aH(y,y,u)):(y=[w,n,0,1],Za(y,y,u));const T=y[3];return{point:new c.P(y[0]/T,y[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Bl(w,n){return .5+w/n*.5}function Fo(w,n){return w.x>=-n[0]&&w.x<=n[0]&&w.y>=-n[1]&&w.y<=n[1]}function xs(w,n,u,d,y,T,A,O,R,U,V,X,W){const re=u?w.textSizeData:w.iconSizeData,oe=c.ay(re,n.transform.zoom),fe=[256/n.width*2+1,256/n.height*2+1],me=u?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;me.clear();const pe=w.lineVertexArray,xe=u?w.text.placedSymbolArray:w.icon.placedSymbolArray,Ae=n.transform.width/n.transform.height;let _e=!1;for(let Ee=0;Ee<xe.length;Ee++){const Oe=xe.get(Ee);if(Oe.hidden||Oe.writingMode===c.az.vertical&&!_e){qo(Oe.numGlyphs,me);continue}_e=!1;const we=new c.P(Oe.anchorX,Oe.anchorY),je={getElevation:W,pitchedLabelPlaneMatrix:d,lineVertexArray:pe,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:we,unwrappedTileID:R,width:U,height:V,translation:X},et=Fu(Oe.anchorX,Oe.anchorY,je);if(!Fo(et.point,fe)){qo(Oe.numGlyphs,me);continue}const Xe=Bl(n.transform.cameraToCenterDistance,et.signedDistanceFromCamera),Ke=c.aA(re,oe,Oe),Qe=T?Ke*n.transform.getPitchedTextCorrection(Oe.anchorX,Oe.anchorY,R)/Xe:Ke*Xe,Ct=Cn({projectionContext:je,pitchedLabelPlaneMatrixInverse:y,symbol:Oe,fontSize:Qe,flip:!1,keepUpright:A,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:me,aspectRatio:Ae,rotateToLine:O});_e=Ct.useVertical,(Ct.notEnoughRoom||_e||Ct.needsFlipping&&Cn({projectionContext:je,pitchedLabelPlaneMatrixInverse:y,symbol:Oe,fontSize:Qe,flip:!0,keepUpright:A,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:me,aspectRatio:Ae,rotateToLine:O}).notEnoughRoom)&&qo(Oe.numGlyphs,me)}u?w.text.dynamicLayoutVertexBuffer.updateData(me):w.icon.dynamicLayoutVertexBuffer.updateData(me)}function Uo(w,n,u,d,y,T,A,O){const R=T.glyphStartIndex+T.numGlyphs,U=T.lineStartIndex,V=T.lineStartIndex+T.lineLength,X=n.getoffsetX(T.glyphStartIndex),W=n.getoffsetX(R-1),re=yo(w*X,u,d,y,T.segment,U,V,O,A);if(!re)return null;const oe=yo(w*W,u,d,y,T.segment,U,V,O,A);return oe?O.projectionCache.anyProjectionOccluded?null:{first:re,last:oe}:null}function Vo(w,n,u,d){return w===c.az.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*d?{useVertical:!0}:(w===c.az.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function Cn(w){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:u,symbol:d,fontSize:y,flip:T,keepUpright:A,glyphOffsetArray:O,dynamicLayoutVertexArray:R,aspectRatio:U,rotateToLine:V}=w,X=y/24,W=d.lineOffsetX*X,re=d.lineOffsetY*X;let oe;if(d.numGlyphs>1){const fe=d.glyphStartIndex+d.numGlyphs,me=d.lineStartIndex,pe=d.lineStartIndex+d.lineLength,xe=Uo(X,O,W,re,T,d,V,n);if(!xe)return{notEnoughRoom:!0};const Ae=bs(xe.first.point.x,xe.first.point.y,n,u),_e=bs(xe.last.point.x,xe.last.point.y,n,u);if(A&&!T){const Ee=Vo(d.writingMode,Ae,_e,U);if(Ee)return Ee}oe=[xe.first];for(let Ee=d.glyphStartIndex+1;Ee<fe-1;Ee++){const Oe=yo(X*O.getoffsetX(Ee),W,re,T,d.segment,me,pe,n,V);if(!Oe)return{notEnoughRoom:!0};oe.push(Oe)}oe.push(xe.last)}else{if(A&&!T){const me=Tr(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,pe=d.lineStartIndex+d.segment+1,xe=new c.P(n.lineVertexArray.getx(pe),n.lineVertexArray.gety(pe)),Ae=Tr(xe.x,xe.y,n),_e=Ae.signedDistanceFromCamera>0?Ae.point:Bu(n.tileAnchorPoint,xe,me,1,n),Ee=bs(me.x,me.y,n,u),Oe=bs(_e.x,_e.y,n,u),we=Vo(d.writingMode,Ee,Oe,U);if(we)return we}const fe=yo(X*O.getoffsetX(d.glyphStartIndex),W,re,T,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,n,V);if(!fe||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};oe=[fe]}for(const fe of oe)c.aG(R,fe.point,fe.angle);return{}}function Bu(w,n,u,d,y){const T=w.add(w.sub(n)._unit()),A=Tr(T.x,T.y,y).point,O=u.sub(A);return u.add(O._mult(d/O.mag()))}function Mi(w,n,u){const d=n.projectionCache;if(d.projections[w])return d.projections[w];const y=new c.P(n.lineVertexArray.getx(w),n.lineVertexArray.gety(w)),T=Tr(y.x,y.y,n);if(T.signedDistanceFromCamera>0)return d.projections[w]=T.point,d.anyProjectionOccluded=d.anyProjectionOccluded||T.isOccluded,T.point;const A=w-u.direction;return Bu(u.distanceFromAnchor===0?n.tileAnchorPoint:new c.P(n.lineVertexArray.getx(A),n.lineVertexArray.gety(A)),y,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,n)}function Tr(w,n,u){const d=w+u.translation[0],y=n+u.translation[1];let T;return u.pitchWithMap?(T=hr(d,y,u.pitchedLabelPlaneMatrix,u.getElevation),T.isOccluded=!1):(T=u.transform.projectTileCoordinates(d,y,u.unwrappedTileID,u.getElevation),T.point.x=(.5*T.point.x+.5)*u.width,T.point.y=(.5*-T.point.y+.5)*u.height),T}function bs(w,n,u,d){if(u.pitchWithMap){const y=[w,n,0,1];return c.aH(y,y,d),u.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],u.unwrappedTileID,u.getElevation).point}return{x:w/u.width*2-1,y:1-n/u.height*2}}function Fu(w,n,u){return u.transform.projectTileCoordinates(w,n,u.unwrappedTileID,u.getElevation)}function Uu(w,n,u){return w._unit()._perp()._mult(n*u)}function Qs(w,n,u,d,y,T,A,O,R){if(O.projectionCache.offsets[w])return O.projectionCache.offsets[w];const U=u.add(n);if(w+R.direction<d||w+R.direction>=y)return O.projectionCache.offsets[w]=U,U;const V=Mi(w+R.direction,O,R),X=Uu(V.sub(u),A,R.direction),W=u.add(X),re=V.add(X);return O.projectionCache.offsets[w]=c.aI(T,U,W,re)||U,O.projectionCache.offsets[w]}function yo(w,n,u,d,y,T,A,O,R){const U=d?w-n:w+n;let V=U>0?1:-1,X=0;d&&(V*=-1,X=Math.PI),V<0&&(X+=Math.PI);let W,re=V>0?T+y:T+y+1;O.projectionCache.cachedAnchorPoint?W=O.projectionCache.cachedAnchorPoint:(W=Tr(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=W);let oe,fe,me=W,pe=W,xe=0,Ae=0;const _e=Math.abs(U),Ee=[];let Oe;for(;xe+Ae<=_e;){if(re+=V,re<T||re>=A)return null;xe+=Ae,pe=me,fe=oe;const et={absOffsetX:_e,direction:V,distanceFromAnchor:xe,previousVertex:pe};if(me=Mi(re,O,et),u===0)Ee.push(pe),Oe=me.sub(pe);else{let Xe;const Ke=me.sub(pe);Xe=Ke.mag()===0?Uu(Mi(re+V,O,et).sub(me),u,V):Uu(Ke,u,V),fe||(fe=pe.add(Xe)),oe=Qs(re,Xe,me,T,A,fe,u,O,et),Ee.push(fe),Oe=oe.sub(fe)}Ae=Oe.mag()}const we=Oe._mult((_e-xe)/Ae)._add(fe||pe),je=X+Math.atan2(me.y-pe.y,me.x-pe.x);return Ee.push(we),{point:we,angle:R?je:0,path:Ee}}const Fc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qo(w,n){for(let u=0;u<w;u++){const d=n.length;n.resize(d+4),n.float32.set(Fc,3*d)}}function Za(w,n,u){const d=n[0],y=n[1];return w[0]=u[0]*d+u[4]*y+u[12],w[1]=u[1]*d+u[5]*y+u[13],w[3]=u[3]*d+u[7]*y+u[15],w}const Or=100;class xd{constructor(n,u=new cr(n.width+200,n.height+200,25),d=new cr(n.width+200,n.height+200,25)){this.transform=n,this.grid=u,this.ignoredGrid=d,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Or,this.screenBottomBoundary=n.height+Or,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,d,y,T,A,O,R,U,V,X,W){const re=this.projectAndGetPerspectiveRatio(n.anchorPointX+R[0],n.anchorPointY+R[1],T,V,W),oe=d*re.perspectiveRatio;let fe;if(A||O)fe=this._projectCollisionBox(n,oe,y,T,A,O,R,re,V,X,W);else{const Oe=re.x+(X?X.x*oe:0),we=re.y+(X?X.y*oe:0);fe={allPointsOccluded:!1,box:[Oe+n.x1*oe,we+n.y1*oe,Oe+n.x2*oe,we+n.y2*oe]}}const[me,pe,xe,Ae]=fe.box,_e=A?fe.allPointsOccluded:re.isOccluded;let Ee=_e;return Ee||(Ee=re.perspectiveRatio<this.perspectiveRatioCutoff),Ee||(Ee=!this.isInsideGrid(me,pe,xe,Ae)),Ee||u!=="always"&&this.grid.hitTest(me,pe,xe,Ae,u,U)?{box:[me,pe,xe,Ae],placeable:!1,offscreen:!1,occluded:_e}:{box:[me,pe,xe,Ae],placeable:!0,offscreen:this.isOffscreen(me,pe,xe,Ae),occluded:_e}}placeCollisionCircles(n,u,d,y,T,A,O,R,U,V,X,W,re,oe){const fe=[],me=new c.P(u.anchorX,u.anchorY),pe=this.getPerspectiveRatio(me.x,me.y,A,oe),xe=(U?T*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,A)/pe:T*pe)/c.aM,Ae={getElevation:oe,pitchedLabelPlaneMatrix:O,lineVertexArray:d,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:me,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:re},_e=Uo(xe,y,u.lineOffsetX*xe,u.lineOffsetY*xe,!1,u,!1,Ae);let Ee=!1,Oe=!1,we=!0;if(_e){const je=.5*X*pe+W,et=new c.P(-100,-100),Xe=new c.P(this.screenRightBoundary,this.screenBottomBoundary),Ke=new At,Qe=_e.first,Ct=_e.last;let Pt=[];for(let sr=Qe.path.length-1;sr>=1;sr--)Pt.push(Qe.path[sr]);for(let sr=1;sr<Ct.path.length;sr++)Pt.push(Ct.path[sr]);const yt=2.5*je;if(U){const sr=this.projectPathToScreenSpace(Pt,Ae);Pt=sr.some((jr=>jr.signedDistanceFromCamera<=0))?[]:sr.map((jr=>jr.point))}let It=[];if(Pt.length>0){const sr=Pt[0].clone(),jr=Pt[0].clone();for(let rn=1;rn<Pt.length;rn++)sr.x=Math.min(sr.x,Pt[rn].x),sr.y=Math.min(sr.y,Pt[rn].y),jr.x=Math.max(jr.x,Pt[rn].x),jr.y=Math.max(jr.y,Pt[rn].y);It=sr.x>=et.x&&jr.x<=Xe.x&&sr.y>=et.y&&jr.y<=Xe.y?[Pt]:jr.x<et.x||sr.x>Xe.x||jr.y<et.y||sr.y>Xe.y?[]:c.aJ([Pt],et.x,et.y,Xe.x,Xe.y)}for(const sr of It){Ke.reset(sr,.25*je);let jr=0;jr=Ke.length<=.5*je?1:Math.ceil(Ke.paddedLength/yt)+1;for(let rn=0;rn<jr;rn++){const Kr=rn/Math.max(jr-1,1),un=Ke.lerp(Kr),$r=un.x+Or,Sn=un.y+Or;fe.push($r,Sn,je,0);const cn=$r-je,hi=Sn-je,In=$r+je,zn=Sn+je;if(we=we&&this.isOffscreen(cn,hi,In,zn),Oe=Oe||this.isInsideGrid(cn,hi,In,zn),n!=="always"&&this.grid.hitTestCircle($r,Sn,je,n,V)&&(Ee=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ee}}}}return{circles:!R&&Ee||!Oe||pe<this.perspectiveRatioCutoff?[]:fe,offscreen:we,collisionDetected:Ee}}projectPathToScreenSpace(n,u){const d=(function(y,T){const A=c.N();return c.aB(A,T.pitchedLabelPlaneMatrix),y.map((O=>{const R=hr(O.x,O.y,A,T.getElevation),U=T.transform.projectTileCoordinates(R.point.x,R.point.y,T.unwrappedTileID,T.getElevation);return U.point.x=(.5*U.point.x+.5)*T.width,U.point.y=(.5*-U.point.y+.5)*T.height,U}))})(n,u);return(function(y){let T=0,A=0,O=0,R=0;for(let U=0;U<y.length;U++)y[U].isOccluded?(O=U+1,R=0):(R++,R>A&&(A=R,T=O));return y.slice(T,T+A)})(d)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],d=new c.aa;for(const X of n){const W=new c.P(X.x+Or,X.y+Or);d.extend(W),u.push(W)}const{minX:y,minY:T,maxX:A,maxY:O}=d,R=this.grid.query(y,T,A,O).concat(this.ignoredGrid.query(y,T,A,O)),U={},V={};for(const X of R){const W=X.key;if(U[W.bucketInstanceId]===void 0&&(U[W.bucketInstanceId]={}),U[W.bucketInstanceId][W.featureIndex])continue;const re=[new c.P(X.x1,X.y1),new c.P(X.x2,X.y1),new c.P(X.x2,X.y2),new c.P(X.x1,X.y2)];c.aK(u,re)&&(U[W.bucketInstanceId][W.featureIndex]=!0,V[W.bucketInstanceId]===void 0&&(V[W.bucketInstanceId]=[]),V[W.bucketInstanceId].push(W.featureIndex))}return V}insertCollisionBox(n,u,d,y,T,A){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:T,collisionGroupID:A,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,d,y,T,A){const O=d?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:T,collisionGroupID:A,overlapMode:u};for(let U=0;U<n.length;U+=4)O.insertCircle(R,n[U],n[U+1],n[U+2])}projectAndGetPerspectiveRatio(n,u,d,y,T){if(T){let A;y?(A=[n,u,y(n,u),1],c.aH(A,A,T)):(A=[n,u,0,1],Za(A,A,T));const O=A[3];return{x:(A[0]/O+1)/2*this.transform.width+Or,y:(-A[1]/O+1)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const A=this.transform.projectTileCoordinates(n,u,d,y);return{x:(A.point.x+1)/2*this.transform.width+Or,y:(1-A.point.y)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}}getPerspectiveRatio(n,u,d,y){const T=this.transform.projectTileCoordinates(n,u,d,y);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(n,u,d,y){return d<Or||n>=this.screenRightBoundary||y<Or||u>this.screenBottomBoundary}isInsideGrid(n,u,d,y){return d>=0&&n<this.gridRightBoundary&&y>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=c.ar([]);return c.O(n,n,[-100,-100,0]),n}_projectCollisionBox(n,u,d,y,T,A,O,R,U,V,X){let W=1,re=0,oe=0,fe=1;const me=n.anchorPointX+O[0],pe=n.anchorPointY+O[1];if(A&&!T){const Pt=this.projectAndGetPerspectiveRatio(me+1,pe,y,U,X),yt=Pt.x-R.x,It=Math.atan((Pt.y-R.y)/yt)+(yt<0?Math.PI:0),sr=Math.sin(It),jr=Math.cos(It);W=jr,re=sr,oe=-sr,fe=jr}else if(!A&&T){const Pt=Bo(this.transform);W=Pt.vecEast[0],re=Pt.vecEast[1],oe=Pt.vecSouth[0],fe=Pt.vecSouth[1]}let xe=R.x,Ae=R.y,_e=u;T&&(xe=me,Ae=pe,_e=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),_e*=this.transform.getPitchedTextCorrection(me,pe,y),V||(_e*=c.an(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(xe+=W*V.x*_e+oe*V.y*_e,Ae+=re*V.x*_e+fe*V.y*_e);const Ee=n.x1*_e,Oe=n.x2*_e,we=(Ee+Oe)/2,je=n.y1*_e,et=n.y2*_e,Xe=(je+et)/2,Ke=[{offsetX:Ee,offsetY:je},{offsetX:we,offsetY:je},{offsetX:Oe,offsetY:je},{offsetX:Oe,offsetY:Xe},{offsetX:Oe,offsetY:et},{offsetX:we,offsetY:et},{offsetX:Ee,offsetY:et},{offsetX:Ee,offsetY:Xe}];let Qe=[];for(const{offsetX:Pt,offsetY:yt}of Ke)Qe.push(new c.P(xe+W*Pt+oe*yt,Ae+re*Pt+fe*yt));let Ct=!1;if(T){const Pt=Qe.map((yt=>this.projectAndGetPerspectiveRatio(yt.x,yt.y,y,U,X)));Ct=Pt.some((yt=>!yt.isOccluded)),Qe=Pt.map((yt=>new c.P(yt.x,yt.y)))}else Ct=!0;return{box:c.aL(Qe),allPointsOccluded:!Ct}}}class Yp{constructor(n,u,d,y){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):y&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Fl{constructor(n,u,d,y,T){this.text=new Yp(n?n.text:null,u,d,T),this.icon=new Yp(n?n.icon:null,u,y,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class bd{constructor(n,u,d){this.text=n,this.icon=u,this.skipFade=d}}class Uc{constructor(n,u,d,y,T){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=y,this.tileID=T}}class Kp{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[n]}}function Ri(w,n,u,d,y){const{horizontalAlign:T,verticalAlign:A}=c.aS(w);return new c.P(-(T-.5)*n+d[0]*y,-(A-.5)*u+d[1]*y)}class Vc{constructor(n,u,d,y,T){this.transform=n.clone(),this.terrain=u,this.collisionIndex=new xd(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Kp(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const u=this.terrain;return u?(d,y)=>u.getElevation(n,d,y):null}getBucketParts(n,u,d,y){const T=d.getBucket(u),A=d.latestFeatureIndex;if(!T||!A||u.id!==T.layerIds[0])return;const O=d.collisionBoxArray,R=T.layers[0].layout,U=T.layers[0].paint,V=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),X=d.tileSize/c.a5,W=d.tileID.toUnwrapped(),re=R.get("text-rotation-alignment")==="map",oe=c.aN(d,1,this.transform.zoom),fe=c.aO(this.collisionIndex.transform,d,U.get("text-translate"),U.get("text-translate-anchor")),me=c.aO(this.collisionIndex.transform,d,U.get("icon-translate"),U.get("icon-translate-anchor")),pe=_a(re,this.transform,oe);this.retainedQueryData[T.bucketInstanceId]=new Uc(T.bucketInstanceId,A,T.sourceLayerIndex,T.index,d.tileID);const xe={bucket:T,layout:R,translationText:fe,translationIcon:me,unwrappedTileID:W,pitchedLabelPlaneMatrix:pe,scale:V,textPixelRatio:X,holdingForFade:d.holdingForSymbolFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:c.ay(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(y)for(const Ae of T.sortKeyRanges){const{sortKey:_e,symbolInstanceStart:Ee,symbolInstanceEnd:Oe}=Ae;n.push({sortKey:_e,symbolInstanceStart:Ee,symbolInstanceEnd:Oe,parameters:xe})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:xe})}attemptAnchorPlacement(n,u,d,y,T,A,O,R,U,V,X,W,re,oe,fe,me,pe,xe,Ae,_e){const Ee=c.aP[n.textAnchor],Oe=[n.textOffset0,n.textOffset1],we=Ri(Ee,d,y,Oe,T),je=this.collisionIndex.placeCollisionBox(u,W,R,U,V,O,A,me,X.predicate,Ae,we,_e);if((!xe||this.collisionIndex.placeCollisionBox(xe,W,R,U,V,O,A,pe,X.predicate,Ae,we,_e).placeable)&&je.placeable){let et;if(this.prevPlacement&&this.prevPlacement.variableOffsets[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID].text&&(et=this.prevPlacement.variableOffsets[re.crossTileID].anchor),re.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[re.crossTileID]={textOffset:Oe,width:d,height:y,anchor:Ee,textBoxScale:T,prevAnchor:et},this.markUsedJustification(oe,Ee,re,fe),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,fe,re),this.placedOrientations[re.crossTileID]=fe),{shift:we,placedGlyphBoxes:je}}}placeLayerBucketPart(n,u,d){const{bucket:y,layout:T,translationText:A,translationIcon:O,unwrappedTileID:R,pitchedLabelPlaneMatrix:U,textPixelRatio:V,holdingForFade:X,collisionBoxArray:W,partiallyEvaluatedTextSize:re,collisionGroup:oe}=n.parameters,fe=T.get("text-optional"),me=T.get("icon-optional"),pe=c.aQ(T,"text-overlap","text-allow-overlap"),xe=pe==="always",Ae=c.aQ(T,"icon-overlap","icon-allow-overlap"),_e=Ae==="always",Ee=T.get("text-rotation-alignment")==="map",Oe=T.get("text-pitch-alignment")==="map",we=T.get("icon-text-fit")!=="none",je=T.get("symbol-z-order")==="viewport-y",et=xe&&(_e||!y.hasIconData()||me),Xe=_e&&(xe||!y.hasTextData()||fe);!y.collisionArrays&&W&&y.deserializeCollisionBoxes(W);const Ke=this.retainedQueryData[y.bucketInstanceId].tileID,Qe=this._getTerrainElevationFunc(Ke),Ct=this.transform.getFastPathSimpleProjectionMatrix(Ke),Pt=(yt,It,sr)=>{var jr,rn;if(u[yt.crossTileID])return;if(X)return void(this.placements[yt.crossTileID]=new bd(!1,!1,!1));let Kr=!1,un=!1,$r=!0,Sn=null,cn={box:null,placeable:!1,offscreen:null,occluded:!1},hi={placeable:!1},In=null,zn=null,fi=null,ls=0,us=0,Ao=0;It.textFeatureIndex?ls=It.textFeatureIndex:yt.useRuntimeCollisionCircles&&(ls=yt.featureIndex),It.verticalTextFeatureIndex&&(us=It.verticalTextFeatureIndex);const ea=It.textBox;if(ea){const ta=Vr=>{let Qr=c.az.horizontal;if(y.allowVerticalPlacement&&!Vr&&this.prevPlacement){const Gn=this.prevPlacement.placedOrientations[yt.crossTileID];Gn&&(this.placedOrientations[yt.crossTileID]=Gn,Qr=Gn,this.markUsedOrientation(y,Qr,yt))}return Qr},Da=(Vr,Qr)=>{if(y.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&It.verticalTextBox){for(const Gn of y.writingModes)if(Gn===c.az.vertical?(cn=Qr(),hi=cn):cn=Vr(),cn&&cn.placeable)break}else cn=Vr()},no=yt.textAnchorOffsetStartIndex,io=yt.textAnchorOffsetEndIndex;if(io===no){const Vr=(Qr,Gn)=>{const Kn=this.collisionIndex.placeCollisionBox(Qr,pe,V,Ke,R,Oe,Ee,A,oe.predicate,Qe,void 0,Ct);return Kn&&Kn.placeable&&(this.markUsedOrientation(y,Gn,yt),this.placedOrientations[yt.crossTileID]=Gn),Kn};Da((()=>Vr(ea,c.az.horizontal)),(()=>{const Qr=It.verticalTextBox;return y.allowVerticalPlacement&&yt.numVerticalGlyphVertices>0&&Qr?Vr(Qr,c.az.vertical):{box:null,offscreen:null}})),ta(cn&&cn.placeable)}else{let Vr=c.aP[(rn=(jr=this.prevPlacement)===null||jr===void 0?void 0:jr.variableOffsets[yt.crossTileID])===null||rn===void 0?void 0:rn.anchor];const Qr=(Kn,Bf,Ff)=>{const vl=Kn.x2-Kn.x1,mm=Kn.y2-Kn.y1,_l=yt.textBoxScale,Uf=we&&Ae==="never"?Bf:null;let Rs=null,Ls=pe==="never"?1:2,Co="never";Vr&&Ls++;for(let Vf=0;Vf<Ls;Vf++){for(let Th=no;Th<io;Th++){const Eh=y.textAnchorOffsets.get(Th);if(Vr&&Eh.textAnchor!==Vr)continue;const Ah=this.attemptAnchorPlacement(Eh,Kn,vl,mm,_l,Ee,Oe,V,Ke,R,oe,Co,yt,y,Ff,A,O,Uf,Qe);if(Ah&&(Rs=Ah.placedGlyphBoxes,Rs&&Rs.placeable))return Kr=!0,Sn=Ah.shift,Rs}Vr?Vr=null:Co=pe}return d&&!Rs&&(Rs={box:this.collisionIndex.placeCollisionBox(ea,"always",V,Ke,R,Oe,Ee,A,oe.predicate,Qe,void 0,Ct).box,offscreen:!1,placeable:!1,occluded:!1}),Rs};Da((()=>Qr(ea,It.iconBox,c.az.horizontal)),(()=>{const Kn=It.verticalTextBox;return y.allowVerticalPlacement&&(!cn||!cn.placeable)&&yt.numVerticalGlyphVertices>0&&Kn?Qr(Kn,It.verticalIconBox,c.az.vertical):{box:null,occluded:!0,offscreen:null}})),cn&&(Kr=cn.placeable,$r=cn.offscreen);const Gn=ta(cn&&cn.placeable);if(!Kr&&this.prevPlacement){const Kn=this.prevPlacement.variableOffsets[yt.crossTileID];Kn&&(this.variableOffsets[yt.crossTileID]=Kn,this.markUsedJustification(y,Kn.anchor,yt,Gn))}}}if(In=cn,Kr=In&&In.placeable,$r=In&&In.offscreen,yt.useRuntimeCollisionCircles&&yt.centerJustifiedTextSymbolIndex>=0){const ta=y.text.placedSymbolArray.get(yt.centerJustifiedTextSymbolIndex),Da=c.aA(y.textSizeData,re,ta),no=T.get("text-padding");zn=this.collisionIndex.placeCollisionCircles(pe,ta,y.lineVertexArray,y.glyphOffsetArray,Da,R,U,d,Oe,oe.predicate,yt.collisionCircleDiameter,no,A,Qe),zn.circles.length&&zn.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Kr=xe||zn.circles.length>0&&!zn.collisionDetected,$r=$r&&zn.offscreen}if(It.iconFeatureIndex&&(Ao=It.iconFeatureIndex),It.iconBox){const ta=Da=>this.collisionIndex.placeCollisionBox(Da,Ae,V,Ke,R,Oe,Ee,O,oe.predicate,Qe,we&&Sn?Sn:void 0,Ct);hi&&hi.placeable&&It.verticalIconBox?(fi=ta(It.verticalIconBox),un=fi.placeable):(fi=ta(It.iconBox),un=fi.placeable),$r=$r&&fi.offscreen}const cu=fe||yt.numHorizontalGlyphVertices===0&&yt.numVerticalGlyphVertices===0,cc=me||yt.numIconVertices===0;cu||cc?cc?cu||(un=un&&Kr):Kr=un&&Kr:un=Kr=un&&Kr;const Mo=un&&fi.placeable;if(Kr&&In.placeable&&this.collisionIndex.insertCollisionBox(In.box,pe,T.get("text-ignore-placement"),y.bucketInstanceId,hi&&hi.placeable&&us?us:ls,oe.ID),Mo&&this.collisionIndex.insertCollisionBox(fi.box,Ae,T.get("icon-ignore-placement"),y.bucketInstanceId,Ao,oe.ID),zn&&Kr&&this.collisionIndex.insertCollisionCircles(zn.circles,pe,T.get("text-ignore-placement"),y.bucketInstanceId,ls,oe.ID),d&&this.storeCollisionData(y.bucketInstanceId,sr,It,In,fi,zn),yt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[yt.crossTileID]=new bd((Kr||et)&&!In?.occluded,(un||Xe)&&!fi?.occluded,$r||y.justReloaded),u[yt.crossTileID]=!0};if(je){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const yt=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let It=yt.length-1;It>=0;--It){const sr=yt[It];Pt(y.symbolInstances.get(sr),y.collisionArrays[sr],sr)}}else for(let yt=n.symbolInstanceStart;yt<n.symbolInstanceEnd;yt++)Pt(y.symbolInstances.get(yt),y.collisionArrays[yt],yt);y.justReloaded=!1}storeCollisionData(n,u,d,y,T,A){if(d.textBox||d.iconBox){let O,R;this.collisionBoxArrays.has(n)?O=this.collisionBoxArrays.get(n):(O=new Map,this.collisionBoxArrays.set(n,O)),O.has(u)?R=O.get(u):(R={text:null,icon:null},O.set(u,R)),d.textBox&&(R.text=y.box),d.iconBox&&(R.icon=T.box)}if(A){let O=this.collisionCircleArrays[n];O===void 0&&(O=this.collisionCircleArrays[n]=[]);for(let R=0;R<A.circles.length;R+=4)O.push(A.circles[R+0]-Or),O.push(A.circles[R+1]-Or),O.push(A.circles[R+2]),O.push(A.collisionDetected?1:0)}}markUsedJustification(n,u,d,y){let T;T=y===c.az.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.aR(u)];const A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const O of A)O>=0&&(n.text.placedSymbolArray.get(O).crossTileID=T>=0&&O!==T?0:d.crossTileID)}markUsedOrientation(n,u,d){const y=u===c.az.horizontal||u===c.az.horizontalOnly?u:0,T=u===c.az.vertical?u:0,A=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const O of A)n.text.placedSymbolArray.get(O).placedOrientation=y;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const y=u?u.symbolFadeChange(n):1,T=u?u.opacities:{},A=u?u.variableOffsets:{},O=u?u.placedOrientations:{};for(const R in this.placements){const U=this.placements[R],V=T[R];V?(this.opacities[R]=new Fl(V,y,U.text,U.icon),d=d||U.text!==V.text.placed||U.icon!==V.icon.placed):(this.opacities[R]=new Fl(null,y,U.text,U.icon,U.skipFade),d=d||U.text||U.icon)}for(const R in T){const U=T[R];if(!this.opacities[R]){const V=new Fl(U,y,!1,!1);V.isHidden()||(this.opacities[R]=V,d=d||U.text.placed||U.icon.placed)}}for(const R in A)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=A[R]);for(const R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const d={};for(const y of u){const T=y.getBucket(n);T&&y.latestFeatureIndex&&n.id===T.layerIds[0]&&this.updateBucketOpacities(T,y.tileID,d,y.collisionBoxArray)}}updateBucketOpacities(n,u,d,y){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const T=n.layers[0],A=T.layout,O=new Fl(null,0,!1,!1,!0),R=A.get("text-allow-overlap"),U=A.get("icon-allow-overlap"),V=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=A.get("text-rotation-alignment")==="map",W=A.get("text-pitch-alignment")==="map",re=A.get("icon-text-fit")!=="none",oe=new Fl(null,0,R&&(U||!n.hasIconData()||A.get("icon-optional")),U&&(R||!n.hasTextData()||A.get("text-optional")),!0);!n.collisionArrays&&y&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(y);const fe=(pe,xe,Ae)=>{for(let _e=0;_e<xe/4;_e++)pe.opacityVertexArray.emplaceBack(Ae);pe.hasVisibleVertices=pe.hasVisibleVertices||Ae!==Vl},me=this.collisionBoxArrays.get(n.bucketInstanceId);for(let pe=0;pe<n.symbolInstances.length;pe++){const xe=n.symbolInstances.get(pe),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:_e,crossTileID:Ee}=xe;let Oe=this.opacities[Ee];d[Ee]?Oe=O:Oe||(Oe=oe,this.opacities[Ee]=Oe),d[Ee]=!0;const we=xe.numIconVertices>0,je=this.placedOrientations[xe.crossTileID],et=je===c.az.vertical,Xe=je===c.az.horizontal||je===c.az.horizontalOnly;if(Ae>0||_e>0){const Qe=df(Oe.text);fe(n.text,Ae,et?Vl:Qe),fe(n.text,_e,Xe?Vl:Qe);const Ct=Oe.text.isHidden();[xe.rightJustifiedTextSymbolIndex,xe.centerJustifiedTextSymbolIndex,xe.leftJustifiedTextSymbolIndex].forEach((It=>{It>=0&&(n.text.placedSymbolArray.get(It).hidden=Ct||et?1:0)})),xe.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(xe.verticalPlacedTextSymbolIndex).hidden=Ct||Xe?1:0);const Pt=this.variableOffsets[xe.crossTileID];Pt&&this.markUsedJustification(n,Pt.anchor,xe,je);const yt=this.placedOrientations[xe.crossTileID];yt&&(this.markUsedJustification(n,"left",xe,yt),this.markUsedOrientation(n,yt,xe))}if(we){const Qe=df(Oe.icon),Ct=!(re&&xe.verticalPlacedIconSymbolIndex&&et);xe.placedIconSymbolIndex>=0&&(fe(n.icon,xe.numIconVertices,Ct?Qe:Vl),n.icon.placedSymbolArray.get(xe.placedIconSymbolIndex).hidden=Oe.icon.isHidden()),xe.verticalPlacedIconSymbolIndex>=0&&(fe(n.icon,xe.numVerticalIconVertices,Ct?Vl:Qe),n.icon.placedSymbolArray.get(xe.verticalPlacedIconSymbolIndex).hidden=Oe.icon.isHidden())}const Ke=me&&me.has(pe)?me.get(pe):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Qe=n.collisionArrays[pe];if(Qe){let Ct=new c.P(0,0);if(Qe.textBox||Qe.verticalTextBox){let Pt=!0;if(V){const yt=this.variableOffsets[Ee];yt?(Ct=Ri(yt.anchor,yt.width,yt.height,yt.textOffset,yt.textBoxScale),X&&Ct._rotate(W?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Pt=!1}if(Qe.textBox||Qe.verticalTextBox){let yt;Qe.textBox&&(yt=et),Qe.verticalTextBox&&(yt=Xe),ff(n.textCollisionBox.collisionVertexArray,Oe.text.placed,!Pt||yt,Ke.text,Ct.x,Ct.y)}}if(Qe.iconBox||Qe.verticalIconBox){const Pt=!!(!Xe&&Qe.verticalIconBox);let yt;Qe.iconBox&&(yt=Pt),Qe.verticalIconBox&&(yt=!Pt),ff(n.iconCollisionBox.collisionVertexArray,Oe.icon.placed,yt,Ke.icon,re?Ct.x:0,re?Ct.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function ff(w,n,u,d,y,T){d&&d.length!==0||(d=[0,0,0,0]);const A=d[0]-Or,O=d[1]-Or,R=d[2]-Or,U=d[3]-Or;w.emplaceBack(n?1:0,u?1:0,y||0,T||0,A,O),w.emplaceBack(n?1:0,u?1:0,y||0,T||0,R,O),w.emplaceBack(n?1:0,u?1:0,y||0,T||0,R,U),w.emplaceBack(n?1:0,u?1:0,y||0,T||0,A,U)}const qc=Math.pow(2,25),Js=Math.pow(2,24),Qp=Math.pow(2,17),Vu=Math.pow(2,16),ws=Math.pow(2,9),Jp=Math.pow(2,8),Ul=Math.pow(2,1);function df(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const n=w.placed?1:0,u=Math.floor(127*w.opacity);return u*qc+n*Js+u*Qp+n*Vu+u*ws+n*Jp+u*Ul+n}const Vl=0;class el{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,d,y,T){const A=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(A,y,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort(((O,R)=>O.sortKey-R.sortKey)));this._currentPartIndex<A.length;)if(u.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,T())return!0;return!1}}class qu{constructor(n,u,d,y,T,A,O,R){this.placement=new Vc(n,u,A,O,R),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(n,u,d){const y=K(),T=()=>!this._forceFullPlacement&&K()-y>2;for(;this._currentPlacementIndex>=0;){const A=u[n[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=O)&&(!A.maxzoom||A.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new el(A)),this._inProgressLayer.continuePlacement(d[A.source],this.placement,this._showCollisionBoxes,A,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const gr=512/c.a5/2;class vo{constructor(n,u,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const y=new Map;for(let T=0;T<u.length;T++){const A=u.get(T),O=A.key,R=y.get(O);R?R.push(A):y.set(O,[A])}for(const[T,A]of y){const O={positions:A.map((R=>({x:Math.floor(R.anchorX*gr),y:Math.floor(R.anchorY*gr)}))),crossTileIDs:A.map((R=>R.crossTileID))};if(O.positions.length>128){const R=new c.aT(O.positions.length,16,Uint16Array);for(const{x:U,y:V}of O.positions)R.add(U,V);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[T]=O}}getScaledCoordinates(n,u){const{x:d,y,z:T}=this.tileID.canonical,{x:A,y:O,z:R}=u.canonical,U=gr/Math.pow(2,R-T),V=(O*c.a5+n.anchorY)*U,X=y*c.a5*gr;return{x:Math.floor((A*c.a5+n.anchorX)*U-d*c.a5*gr),y:Math.floor(V-X)}}findMatches(n,u,d){const y=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let T=0;T<n.length;T++){const A=n.get(T);if(A.crossTileID)continue;const O=this._symbolsByKey[A.key];if(!O)continue;const R=this.getScaledCoordinates(A,u);if(O.index){const U=O.index.range(R.x-y,R.y-y,R.x+y,R.y+y).sort();for(const V of U){const X=O.crossTileIDs[V];if(!d[X]){d[X]=!0,A.crossTileID=X;break}}}else if(O.positions)for(let U=0;U<O.positions.length;U++){const V=O.positions[U],X=O.crossTileIDs[U];if(Math.abs(V.x-R.x)<=y&&Math.abs(V.y-R.y)<=y&&!d[X]){d[X]=!0,A.crossTileID=X;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:n})=>n))}}class wd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(u!==0)for(const d in this.indexes){const y=this.indexes[d],T={};for(const A in y){const O=y[A];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+u),T[O.tileID.key]=O}this.indexes[d]=T}this.lng=n}addBucket(n,u,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let T=0;T<u.symbolInstances.length;T++)u.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const y=this.usedCrossTileIDs[n.overscaledZ];for(const T in this.indexes){const A=this.indexes[T];if(Number(T)>n.overscaledZ)for(const O in A){const R=A[O];R.tileID.isChildOf(n)&&R.findMatches(u.symbolInstances,n,y)}else{const O=A[n.scaledTo(Number(T)).key];O&&O.findMatches(u.symbolInstances,n,y)}}for(let T=0;T<u.symbolInstances.length;T++){const A=u.symbolInstances.get(T);A.crossTileID||(A.crossTileID=d.generate(),y[A.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new vo(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const d of u.getCrossTileIDsLists())for(const y of d)delete this.usedCrossTileIDs[n][y]}removeStaleBuckets(n){let u=!1;for(const d in this.indexes){const y=this.indexes[d];for(const T in y)n[y[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,y[T]),delete y[T],u=!0)}return u}}class ni{constructor(){this.layerIndexes={},this.crossTileIDs=new wd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,d){let y=this.layerIndexes[n.id];y===void 0&&(y=this.layerIndexes[n.id]=new Gc);let T=!1;const A={};y.handleWrapJump(d);for(const O of u){const R=O.getBucket(n);R&&n.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(O.tileID,R,this.crossTileIDs)&&(T=!0),A[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(A)&&(T=!0),T}pruneUnusedLayers(n){const u={};n.forEach((d=>{u[d]=!0}));for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}var Vn="void main() {fragColor=vec4(1.0);}";const dn={prelude:tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:tr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:tr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:tr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tr(Vn,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:tr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:tr(Vn,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:tr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:tr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:tr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:tr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:tr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:tr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:tr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:tr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function tr(w,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/in ([\w]+) ([\w]+)/g),y=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=T?T.concat(y):y,O={};return{fragmentSource:w=w.replace(u,((R,U,V,X,W)=>(O[W]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${W}
in ${V} ${X} ${W};
#else
uniform ${V} ${X} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${V} ${X} ${W} = u_${W};
#endif
`))),vertexSource:n=n.replace(u,((R,U,V,X,W)=>{const re=X==="float"?"vec2":"vec4",oe=W.match(/color/)?"color":re;return O[W]?U==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${V} ${re} a_${W};
out ${V} ${X} ${W};
#else
uniform ${V} ${X} u_${W};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${V} ${X} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${oe}(a_${W}, u_${W}_t);
#else
    ${V} ${X} ${W} = u_${W};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${V} ${re} a_${W};
#else
uniform ${V} ${X} u_${W};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${V} ${X} ${W} = a_${W};
#else
    ${V} ${X} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${V} ${X} ${W} = unpack_mix_${oe}(a_${W}, u_${W}_t);
#else
    ${V} ${X} ${W} = u_${W};
#endif
`})),staticAttributes:d,staticUniforms:A}}class Xr{constructor(n,u,d){this.vertexBuffer=n,this.indexBuffer=u,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ha=c.aU([{name:"a_pos",type:"Int16",components:2}]);const Pn="#define PROJECTION_MERCATOR",Li="mercator";class ii{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Li}get shaderDefine(){return Pn}get shaderPreludeCode(){return dn.projectionMercator}get vertexShaderPreludeCode(){return dn.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,u,d,y,T){if(this._cachedMesh)return this._cachedMesh;const A=new c.aW;A.emplaceBack(0,0),A.emplaceBack(c.a5,0),A.emplaceBack(0,c.a5),A.emplaceBack(c.a5,c.a5);const O=n.createVertexBuffer(A,Ha.members),R=c.aX.simpleSegment(0,0,4,2),U=new c.aY;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3);const V=n.createIndexBuffer(U);return this._cachedMesh=new Xr(O,V,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class xa{constructor(n=0,u=0,d=0,y=0){if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=d,this.right=y}interpolate(n,u,d){return u.top!=null&&n.top!=null&&(this.top=c.G.number(n.top,u.top,d)),u.bottom!=null&&n.bottom!=null&&(this.bottom=c.G.number(n.bottom,u.bottom,d)),u.left!=null&&n.left!=null&&(this.left=c.G.number(n.left,u.left,d)),u.right!=null&&n.right!=null&&(this.right=c.G.number(n.right,u.right,d)),this}getCenter(n,u){const d=c.an((this.left+n-this.right)/2,0,n),y=c.an((this.top+u-this.bottom)/2,0,u);return new c.P(d,y)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new xa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Go(w,n){if(!w.renderWorldCopies||w.lngRange)return;const u=n.lng-w.center.lng;n.lng+=u>180?-360:u<-180?360:0}function pn(w){return Math.max(0,Math.floor(w))}class tl{constructor(n,u){var d;this.applyConstrain=(y,T)=>this._constrainOverride!==null?this._constrainOverride(y,T):this._callbacks.defaultConstrain(y,T),this._callbacks=n,this._tileSize=512,this._renderWorldCopies=u?.renderWorldCopies===void 0||!!u?.renderWorldCopies,this._minZoom=u?.minZoom||0,this._maxZoom=u?.maxZoom||22,this._minPitch=u?.minPitch==null?0:u?.minPitch,this._maxPitch=u?.maxPitch==null?60:u?.maxPitch,this._constrainOverride=(d=u?.constrainOverride)!==null&&d!==void 0?d:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=pn(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new xa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,u,d){this._constrainOverride=n.constrainOverride,this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=pn(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new xa(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!d&&n.autoCalculateNearFarZ,u&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get constrainOverride(){return this._constrainOverride}setConstrainOverride(n){n===void 0&&(n=null),this._constrainOverride!==n&&(this._constrainOverride=n,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const u=c.W(n,-180,180)*Math.PI/180;var d,y,T,A,O,R,U,V,X;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=P(),d=this._rotationMatrix,T=-this._bearingInRadians,A=(y=this._rotationMatrix)[0],O=y[1],R=y[2],U=y[3],V=Math.sin(T),X=Math.cos(T),d[0]=A*X+R*V,d[1]=O*X+U*V,d[2]=A*-V+R*X,d[3]=O*-V+U*X)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const u=c.an(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const u=n/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aZ(this._fovInRadians)}setFov(n){n=c.an(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=c.ap(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const u=this.applyConstrain(this._center,n).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=c.aq(u),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,u){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,d){this._unmodified=!1,this._edgeInsets.interpolate(n,u,d),this.constrainInternal(),this._calcMatrices()}resize(n,u,d=!0){this._width=n,this._height=u,d&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Rr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-c.ao,c.ao])}getCameraQueryGeometry(n,u){if(u.length===1)return[u[0],n];{const{minX:d,minY:y,maxX:T,maxY:A}=c.aa.fromPoints(u).extend(n);return[new c.P(d,y),new c.P(T,y),new c.P(T,A),new c.P(d,A),new c.P(d,y)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:u,zoom:d}=this.applyConstrain(this.center,this.zoom);this.setCenter(u),this.setZoom(d),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=c.ar(new Float64Array(16));c.Q(n,n,[this._width/2,-this._height/2,1]),c.O(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=c.ar(new Float64Array(16)),c.Q(n,n,[1,-1,1]),c.O(n,n,[-1,-1,0]),c.Q(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,u,d,y){const T=d!==void 0?d:this.bearing,A=y=y!==void 0?y:this.pitch,{distanceToCenter:O,clampedElevation:R}=this._distanceToCenterFromAltElevationPitch(u,this.elevation,A),{x:U,y:V}=Bt(A,T),X=c.a9.fromLngLat(n,u);let W,re,oe=c.a_(1,X.y),fe=0;do{if(fe+=1,fe>10)break;re=O/oe,W=new c.a9(X.x+U*re,X.y+V*re),oe=1/W.meterInMercatorCoordinateUnits()}while(Math.abs(O-re*oe)>1e-12);return{center:W.toLngLat(),elevation:R,zoom:c.at(this.height/2/Math.tan(this.fovInRadians/2)/re/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const u=1/this.worldSize,d=c.as(1,this.center.lat)*this.worldSize,y=c.a9.fromLngLat(this.center,this.elevation),T=y.x/u,A=y.y/u,O=y.z/u,R=this.pitch,U=this.bearing,{x:V,y:X,z:W}=Bt(R,U),re=this.cameraToCenterDistance,oe=T+re*-V,fe=A+re*-X,me=O+re*W,{distanceToCenter:pe,clampedElevation:xe}=this._distanceToCenterFromAltElevationPitch(me/d,n,R),Ae=pe*d,_e=new c.a9((oe+V*Ae)*u,(fe+X*Ae)*u,0).toLngLat(),Ee=c.as(1,_e.lat),Oe=c.at(this.height/2/Math.tan(this.fovInRadians/2)/pe/Ee/this.tileSize);this._elevation=xe,this._center=_e,this.setZoom(Oe)}_distanceToCenterFromAltElevationPitch(n,u,d){const y=-Math.cos(c.ap(d)),T=n-u;let A,O=u;return y*T>=0||Math.abs(y)<.1?(A=1e4,O=n+A*y):A=-T/y,{distanceToCenter:A,clampedElevation:O}}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return Me(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const u=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/u,n.canonical.y/u,1/u/c.a5,1/u/c.a5]}}class ba{constructor(n,u){this.min=n,this.max=u,this.center=c.a$([],c.b0([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],d=c.b1(this.min),y=c.b1(this.max);for(let T=0;T<u.length;T++)d[T]=u[T]?this.min[T]:this.center[T],y[T]=u[T]?this.center[T]:this.max[T];return y[2]=this.max[2],new ba(d,y)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let u=!0;for(let d=0;d<n.planes.length;d++){const y=this.intersectsPlane(n.planes[d]);if(y===0)return 0;y===1&&(u=!1)}return u?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let u=n[3],d=n[3];for(let y=0;y<3;y++)n[y]>0?(u+=n[y]*this.min[y],d+=n[y]*this.max[y]):(d+=n[y]*this.min[y],u+=n[y]*this.max[y]);return u>=0?2:d<0?0:1}}class ql{distanceToTile2d(n,u,d,y){const T=y.distanceX([n,u]),A=y.distanceY([n,u]);return Math.hypot(T,A)}getWrap(n,u,d){return d}getTileBoundingVolume(n,u,d,y){var T,A;let O=0,R=0;if(y?.terrain){const V=new c.a2(n.z,u,n.z,n.x,n.y),X=y.terrain.getMinMaxElevation(V);O=(T=X.minElevation)!==null&&T!==void 0?T:Math.min(0,d),R=(A=X.maxElevation)!==null&&A!==void 0?A:Math.max(0,d)}const U=1<<n.z;return new ba([u+n.x/U,n.y/U,O],[u+(n.x+1)/U,(n.y+1)/U,R])}allowVariableZoom(n,u){const d=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,y=c.an(78.5-d/2,0,60);return!!u.terrain||n.pitch>y}allowWorldCopies(){return!0}prepareNextFrame(){}}class ji{constructor(n,u,d){this.points=n,this.planes=u,this.aabb=d}static fromInvProjectionMatrix(n,u=1,d=0,y,T){const A=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,d),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((W=>(function(re,oe,fe,me){const pe=c.aH([],re,oe),xe=1/pe[3]/fe*me;return c.b6(pe,pe,[xe,xe,1/pe[3],xe])})(W,n,u,O)));y&&(function(W,re,oe,fe){const me=fe?4:0,pe=fe?0:4;let xe=0;const Ae=[],_e=[];for(let we=0;we<4;we++){const je=c.b2([],W[we+pe],W[we+me]),et=c.b7(je);c.a$(je,je,1/et),Ae.push(et),_e.push(je)}for(let we=0;we<4;we++){const je=c.b8(W[we+me],_e[we],oe);xe=je!==null&&je>=0?Math.max(xe,je):Math.max(xe,Ae[we])}const Ee=(function(we,je){const et=c.b2([],we[je[0]],we[je[1]]),Xe=c.b2([],we[je[2]],we[je[1]]),Ke=[0,0,0,0];return c.b3(Ke,c.b4([],et,Xe)),Ke[3]=-c.b5(Ke,we[je[0]]),Ke})(W,re),Oe=(function(we,je){const et=c.b9(we),Xe=c.ba([],we,1/et),Ke=c.b2([],je,c.a$([],Xe,c.b5(je,Xe))),Qe=c.b9(Ke);if(Qe>0){const Ct=Math.sqrt(1-Xe[3]*Xe[3]),Pt=c.a$([],Xe,-Xe[3]),yt=c.b0([],Pt,c.a$([],Ke,Ct/Qe));return c.bb(je,yt)}return null})(oe,Ee);if(Oe!==null){const we=Oe/c.b5(_e[0],Ee);xe=Math.min(xe,we)}for(let we=0;we<4;we++){const je=Math.min(xe,Ae[we]);W[we+pe]=[W[we+me][0]+_e[we][0]*je,W[we+me][1]+_e[we][1]*je,W[we+me][2]+_e[we][2]*je,1]}})(R,A[0],y,T);const U=A.map((W=>{const re=c.b2([],R[W[0]],R[W[1]]),oe=c.b2([],R[W[2]],R[W[1]]),fe=c.b3([],c.b4([],re,oe)),me=-c.b5(fe,R[W[1]]);return fe.concat(me)})),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],X=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const W of R)for(let re=0;re<3;re++)V[re]=Math.min(V[re],W[re]),X[re]=Math.max(X[re],W[re]);return new ji(R,U,new ba(V,X))}}class Yn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,d){return this._helper.interpolatePadding(n,u,d)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,d=!0){this._helper.resize(n,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,u){}constructor(n){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(u,d)=>{d=c.an(+d,this.minZoom,this.maxZoom);const y={center:new c.V(u.lng,u.lat),zoom:d};let T=this._helper._lngRange;if(!this._helper._renderWorldCopies&&T===null){const _e=179.9999999999;T=[-_e,_e]}const A=this.tileSize*c.aq(y.zoom);let O=0,R=A,U=0,V=A,X=0,W=0;const{x:re,y:oe}=this.size;if(this._helper._latRange){const _e=this._helper._latRange;O=c.X(_e[1])*A,R=c.X(_e[0])*A,R-O<oe&&(X=oe/(R-O))}T&&(U=c.W(c.Y(T[0])*A,0,A),V=c.W(c.Y(T[1])*A,0,A),V<U&&(V+=A),V-U<re&&(W=re/(V-U)));const{x:fe,y:me}=Fe(A,u);let pe,xe;const Ae=Math.max(W||0,X||0);if(Ae){const _e=new c.P(W?(V+U)/2:fe,X?(R+O)/2:me);return y.center=Ze(A,_e).wrap(),y.zoom+=c.at(Ae),y}if(this._helper._latRange){const _e=oe/2;me-_e<O&&(xe=O+_e),me+_e>R&&(xe=R-_e)}if(T){const _e=(U+V)/2;let Ee=fe;this._helper._renderWorldCopies&&(Ee=c.W(fe,_e-A/2,_e+A/2));const Oe=re/2;Ee-Oe<U&&(pe=U+Oe),Ee+Oe>V&&(pe=V-Oe)}if(pe!==void 0||xe!==void 0){const _e=new c.P(pe??fe,xe??me);y.center=Ze(A,_e).wrap()}return y},this.applyConstrain=(u,d)=>this._helper.applyConstrain(u,d),this._helper=new tl({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,d)=>this.defaultConstrain(u,d)},n),this._coveringTilesDetailsProvider=new ql}clone(){const n=new Yn;return n.apply(this,!1),n}apply(n,u,d){this._helper.apply(n,u,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const u=[new c.bc(0,n)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new c.P(0,0)),y=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),A=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),O=Math.floor(Math.min(d.x,y.x,T.x,A.x)),R=Math.floor(Math.max(d.x,y.x,T.x,A.x)),U=1;for(let V=O-U;V<=R+U;V++)V!==0&&u.push(new c.bc(V,n))}return u}getCameraFrustum(){return ji.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const u=this.screenPointToLocation(this.centerPoint,n),d=n?n.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(n,u){const d=c.as(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(u,d),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),A=c.a9.fromLngLat(n),O=new c.a9(A.x-(y.x-T.x),A.y-(y.y-T.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,u){return u?this.coordinatePoint(c.a9.fromLngLat(n),u.getElevationForLngLat(n,this),this._pixelMatrix3D):this.coordinatePoint(c.a9.fromLngLat(n))}screenPointToLocation(n,u){var d;return(d=this.screenPointToMercatorCoordinate(n,u))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(n,u){if(u){const d=u.pointCoordinate(n);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,u){const d=u||0,y=[n.x,n.y,0,1],T=[n.x,n.y,1,1];c.aH(y,y,this._pixelMatrixInverse),c.aH(T,T,this._pixelMatrixInverse);const A=y[3],O=T[3],R=y[1]/A,U=T[1]/O,V=y[2]/A,X=T[2]/O,W=V===X?0:(d-V)/(X-V);return new c.a9(c.G.number(y[0]/A,T[0]/O,W)/this.worldSize,c.G.number(R,U,W)/this.worldSize,d)}coordinatePoint(n,u=0,d=this._pixelMatrix){const y=[n.x*this.worldSize,n.y*this.worldSize,u,1];return c.aH(y,y,d),new c.P(y[0]/y[3],y[1]/y[3])}getBounds(){const n=Math.max(0,this._helper._height/2-vt(this));return new Rr().extend(this.screenPointToLocation(new c.P(0,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(n,u){return u?u.pointCoordinate(n)!=null:n.y>this.height/2-vt(this)}calculatePosMatrix(n,u=!1,d){var y;const T=(y=n.key)!==null&&y!==void 0?y:c.bd(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),A=u?this._alignedPosMatrixCache:this._posMatrixCache;if(A.has(T)){const U=A.get(T);return d?U.f32:U.f64}const O=at(n,this.worldSize);c.S(O,u?this._alignedProjMatrix:this._viewProjMatrix,O);const R={f64:O,f32:new Float32Array(O)};return A.set(T,R),d?R.f32:R.f64}calculateFogMatrix(n){const u=n.key,d=this._fogMatrixCacheF32;if(d.has(u))return d.get(u);const y=at(n,this.worldSize);return c.S(y,this._fogMatrix,y),d.set(u,new Float32Array(y)),d.get(u)}calculateCenterFromCameraLngLatAlt(n,u,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,d,y)}_calculateNearFarZIfNeeded(n,u,d){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=n-y*this._helper._pixelPerMeter/Math.cos(u),A=y<0?T:n,O=Math.PI/2+this.pitchInRadians,R=c.ap(this.fov)*(Math.abs(Math.cos(c.ap(this.roll)))*this.height+Math.abs(Math.sin(c.ap(this.roll)))*this.width)/this.height*(.5+d.y/this.height),U=Math.sin(R)*A/Math.sin(c.an(Math.PI-O-R,.01,Math.PI-.01)),V=vt(this),X=Math.atan(V/this._helper.cameraToCenterDistance),W=c.ap(.75),re=X>W?2*X*(.5+d.y/(2*V)):W,oe=Math.sin(re)*A/Math.sin(c.an(Math.PI-O-re,.01,Math.PI-.01)),fe=Math.min(U,oe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*fe+A),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,u=Fe(this.worldSize,this.center),d=u.x,y=u.y;this._helper._pixelPerMeter=c.as(1,this.center.lat)*this.worldSize;const T=c.ap(Math.min(this.pitch,$e)),A=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let O;this._calculateNearFarZIfNeeded(A,T,n),O=new Float64Array(16),c.be(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aB(this._invProjMatrix,O),O[8]=2*-n.x/this._helper._width,O[9]=2*n.y/this._helper._height,this._projectionMatrix=c.bf(O),c.Q(O,O,[1,-1,1]),c.O(O,O,[0,0,-this._helper.cameraToCenterDistance]),c.bg(O,O,-this.rollInRadians),c.bh(O,O,this.pitchInRadians),c.bg(O,O,-this.bearingInRadians),c.O(O,O,[-d,-y,0]),this._mercatorMatrix=c.Q([],O,[this.worldSize,this.worldSize,this.worldSize]),c.Q(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),c.O(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=c.aB([],O);const R=[0,0,-1,1];c.aH(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),c.be(this._fogMatrix,this.fovInRadians,this.width/this.height,A,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,c.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.O(this._fogMatrix,this._fogMatrix,[-d,-y,0]),c.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const U=this._helper._width%2/2,V=this._helper._height%2/2,X=Math.cos(this.bearingInRadians),W=Math.sin(-this.bearingInRadians),re=d-Math.round(d)+X*U+W*V,oe=y-Math.round(y)+X*V+W*U,fe=new Float64Array(O);if(c.O(fe,fe,[re>.5?re-1:re,oe>.5?oe-1:oe,0]),this._alignedProjMatrix=fe,O=c.aB(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new c.P(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.aH(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return Me(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,u){const d=c.a9.fromLngLat(n),y=[d.x*this.worldSize,d.y*this.worldSize,u,1];return c.aH(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(n){const{overscaledTileID:u,aligned:d,applyTerrainMatrix:y}=n,T=this._helper.getMercatorTileCoordinates(u),A=u?this.calculatePosMatrix(u,d,!0):null;let O;return O=u&&u.terrainRttPosMatrix32f&&y?u.terrainRttPosMatrix32f:A||c.bi(),{mainMatrix:O,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,u,d){return 1}transformLightDirection(n){return c.b1(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,u,d,y){const T=this.calculatePosMatrix(d);let A;y?(A=[n,u,y(n,u),1],c.aH(A,A,T)):(A=[n,u,0,1],Za(A,A,T));const O=A[3];return{point:new c.P(A[0]/O,A[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(n){for(const u of n)this.calculatePosMatrix(u)}getMatrixForModel(n,u){const d=c.a9.fromLngLat(n,u),y=d.meterInMercatorCoordinateUnits(),T=c.bj();return c.O(T,T,[d.x,d.y,d.z]),c.bg(T,T,Math.PI),c.bh(T,T,Math.PI/2),c.Q(T,T,[-y,y,y]),T}getProjectionDataForCustomLayer(n=!0){const u=new c.a2(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:n}),y=at(u,this.worldSize);c.S(y,this._viewProjMatrix,y),d.tileMercatorCoords=[0,0,1,1];const T=[c.a5,c.a5,this.worldSize/this._helper.pixelsPerMeter],A=c.bk();return c.Q(A,y,T),d.fallbackMatrix=A,d.mainMatrix=A,d}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function Ni(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function $c(w){if(w.useSlerp)if(w.k<1){const n=c.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),u=c.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),d=new Float64Array(4);c.bm(d,n,u,w.k);const y=c.bn(d);w.tr.setRoll(y.roll),w.tr.setPitch(y.pitch),w.tr.setBearing(y.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(c.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(c.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(c.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Gl(w,n,u,d,y){const T=y.padding,A=Fe(y.worldSize,u.getNorthWest()),O=Fe(y.worldSize,u.getNorthEast()),R=Fe(y.worldSize,u.getSouthEast()),U=Fe(y.worldSize,u.getSouthWest()),V=c.ap(-d),X=A.rotate(V),W=O.rotate(V),re=R.rotate(V),oe=U.rotate(V),fe=new c.P(Math.max(X.x,W.x,oe.x,re.x),Math.max(X.y,W.y,oe.y,re.y)),me=new c.P(Math.min(X.x,W.x,oe.x,re.x),Math.min(X.y,W.y,oe.y,re.y)),pe=fe.sub(me),xe=(y.width-(T.left+T.right+n.left+n.right))/pe.x,Ae=(y.height-(T.top+T.bottom+n.top+n.bottom))/pe.y;if(Ae<0||xe<0)return void Ni();const _e=Math.min(c.at(y.scale*Math.min(xe,Ae)),w.maxZoom),Ee=c.P.convert(w.offset),Oe=new c.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(c.ap(d)),we=Ee.add(Oe).mult(y.scale/c.aq(_e));return{center:Ze(y.worldSize,A.add(R).div(2).sub(we)),zoom:_e,bearing:d}}class $l{get useGlobeControls(){return!1}handlePanInertia(n,u){const d=n.mag(),y=Math.abs(vt(u));return{easingOffset:n.mult(Math.min(.75*y/d,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(n,u){n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta),n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta)}handleMapControlsPan(n,u,d){n.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(d,n.around)}cameraForBoxAndBearing(n,u,d,y,T){return Gl(n,u,d,y,T)}handleJumpToCenterZoom(n,u){n.zoom!==(u.zoom!==void 0?+u.zoom:n.zoom)&&n.setZoom(+u.zoom),u.center!==void 0&&n.setCenter(c.V.convert(u.center))}handleEaseTo(n,u){const d=n.zoom,y=n.padding,T={roll:n.roll,pitch:n.pitch,bearing:n.bearing},A={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},O=u.zoom!==void 0,R=!n.isPaddingEqual(u.padding);let U=!1;const V=O?+u.zoom:n.zoom;let X=n.centerPoint.add(u.offsetAsPoint);const W=n.screenPointToLocation(X),{center:re,zoom:oe}=n.applyConstrain(c.V.convert(u.center||W),V??d);Go(n,re);const fe=Fe(n.worldSize,W),me=Fe(n.worldSize,re).sub(fe),pe=c.aq(oe-d);return U=oe!==d,{easeFunc:xe=>{if(U&&n.setZoom(c.G.number(d,oe,xe)),c.bo(T,A)||$c({startEulerAngles:T,endEulerAngles:A,tr:n,k:xe,useSlerp:T.roll!=A.roll}),R&&(n.interpolatePadding(y,u.padding,xe),X=n.centerPoint.add(u.offsetAsPoint)),u.around)n.setLocationAtPoint(u.around,u.aroundPoint);else{const Ae=c.aq(n.zoom-d),_e=oe>d?Math.min(2,pe):Math.max(.5,pe),Ee=Math.pow(_e,1-xe),Oe=Ze(n.worldSize,fe.add(me.mult(xe*Ee)).mult(Ae));n.setLocationAtPoint(n.renderWorldCopies?Oe.wrap():Oe,X)}},isZooming:U,elevationCenter:re}}handleFlyTo(n,u){const d=u.zoom!==void 0,y=n.zoom,T=n.applyConstrain(c.V.convert(u.center||u.locationAtOffset),d?+u.zoom:y),A=T.center,O=T.zoom;Go(n,A);const R=Fe(n.worldSize,u.locationAtOffset),U=Fe(n.worldSize,A).sub(R),V=U.mag(),X=c.aq(O-y);let W;if(u.minZoom!==void 0){const re=Math.min(+u.minZoom,y,O),oe=n.applyConstrain(A,re).zoom;W=c.aq(oe-y)}return{easeFunc:(re,oe,fe,me)=>{n.setZoom(re===1?O:y+c.at(oe));const pe=re===1?A:Ze(n.worldSize,R.add(U.mult(fe)).mult(oe));n.setLocationAtPoint(n.renderWorldCopies?pe.wrap():pe,me)},scaleOfZoom:X,targetCenter:A,scaleOfMinZoom:W,pixelPathLength:V}}}class Gr{constructor(n,u,d){this.blendFunction=n,this.blendColor=u,this.mask=d}}Gr.Replace=[1,0],Gr.disabled=new Gr(Gr.Replace,c.bp.transparent,[!1,!1,!1,!1]),Gr.unblended=new Gr(Gr.Replace,c.bp.transparent,[!0,!0,!0,!0]),Gr.alphaBlended=new Gr([1,771],c.bp.transparent,[!0,!0,!0,!0]);const rl=2305;class br{constructor(n,u,d){this.enable=n,this.mode=u,this.frontFace=d}}br.disabled=new br(!1,1029,rl),br.backCCW=new br(!0,1029,rl),br.frontCCW=new br(!0,1028,rl);class fr{constructor(n,u,d){this.func=n,this.mask=u,this.range=d}}fr.ReadOnly=!1,fr.ReadWrite=!0,fr.disabled=new fr(519,fr.ReadOnly,[0,1]);const Zl=7680;class Er{constructor(n,u,d,y,T,A){this.test=n,this.ref=u,this.mask=d,this.fail=y,this.depthFail=T,this.pass=A}}Er.disabled=new Er({func:519,mask:0},0,0,Zl,Zl,Zl);const Zc=new WeakMap;function Wa(w){var n;if(Zc.has(w))return Zc.get(w);{const u=(n=w.getParameter(w.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Zc.set(w,u),u}}class nl{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const u=n.context,d=u.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const y=new c.aW;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const T=new c.aY;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Xr(u.createVertexBuffer(y,Ha.members),u.createIndexBuffer(T),c.aX.simpleSegment(0,0,y.length,T.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(d.TEXTURE1);const A=d.createTexture();d.bindTexture(d.TEXTURE_2D,A),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(A),Wa(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,u){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,u=n.gl;n.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,u){const d=this._cachedRenderContext.context,y=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:c.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,y.TRIANGLES,fr.disabled,Er.disabled,Gr.unblended,br.disabled,((T,A)=>({u_input:T,u_output_expected:A}))(n,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Wa(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const T=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Wa(n)){const u=n.clientWaitSync(this._readbackQueue.sync,0,0);if(u===n.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=nl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let u=0;return u+=n[0]/256,u+=n[1]/65536,u+=n[2]/16777216,n[3]<127&&(u=-u),u/128}}const il=c.a5/128;function em(w,n){const u=w.granularity!==void 0?Math.max(w.granularity,1):1,d=u+(w.generateBorders?2:0),y=u+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),T=d+1,A=y+1,O=w.generateBorders?-1:0,R=w.generateBorders||w.extendToNorthPole?-1:0,U=u+(w.generateBorders?1:0),V=u+(w.generateBorders||w.extendToSouthPole?1:0),X=T*A,W=d*y*6,re=T*A>65536;if(re&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const oe=re||n==="32bit",fe=new Int16Array(2*X);let me=0;for(let Ae=R;Ae<=V;Ae++)for(let _e=O;_e<=U;_e++){let Ee=_e/u*c.a5;_e===-1&&(Ee=-il),_e===u+1&&(Ee=c.a5+il);let Oe=Ae/u*c.a5;Ae===-1&&(Oe=w.extendToNorthPole?c.br:-il),Ae===u+1&&(Oe=w.extendToSouthPole?c.bs:c.a5+il),fe[me++]=Ee,fe[me++]=Oe}const pe=oe?new Uint32Array(W):new Uint16Array(W);let xe=0;for(let Ae=0;Ae<y;Ae++)for(let _e=0;_e<d;_e++){const Ee=_e+1+Ae*T,Oe=_e+(Ae+1)*T,we=_e+1+(Ae+1)*T;pe[xe++]=_e+Ae*T,pe[xe++]=Oe,pe[xe++]=Ee,pe[xe++]=Ee,pe[xe++]=Oe,pe[xe++]=we}return{vertices:fe.buffer.slice(0),indices:pe.buffer.slice(0),uses32bitIndices:oe}}const Hc=new c.aV({fill:new c.bt(128,2),line:new c.bt(512,0),tile:new c.bt(128,32),stencil:new c.bt(128,1),circle:3});class Sd{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return dn.projectionGlobe}get vertexShaderPreludeCode(){return dn.projectionMercator.vertexSource}get subdivisionGranularity(){return Hc}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new nl(n));const u=c.X(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(u,d),T=K();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=T);const A=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bv(A))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,u,d,y,T){const A=(T==="stencil"?Hc.stencil:Hc.tile).getGranularityForZoomLevel(u.z);return this._getMesh(n,{granularity:A,generateBorders:d,extendToNorthPole:u.y===0&&y,extendToSouthPole:u.y===(1<<u.z)-1&&y})}_getMesh(n,u){const d=this._getMeshKey(u);if(d in this._tileMeshCache)return this._tileMeshCache[d];const y=(function(T,A){const O=em(A,"16bit"),R=c.aW.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),U=c.aY.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new Xr(T.createVertexBuffer(R,Ha.members),T.createIndexBuffer(U),c.aX.simpleSegment(0,0,R.length,U.length))})(n,u);return this._tileMeshCache[d]=y,y}recalculate(n){}hasTransition(){const n=K();let u=!1;return u=u||(n-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const ey=new c.t({type:new c.D(c.u.projection.type)});class Td extends c.E{constructor(n){super(),this._transitionable=new c.x(ey,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0)),this._mercatorProjection=new ii,this._verticalPerspectiveProjection=new Sd}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof c.bw){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,u,d,y,T){return this.currentProjection.getMeshFromTileID(n,u,d,y,T)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function Bi(w){const n=Hl(w.worldSize,w.center.lat);return 2*Math.PI*n}function $o(w,n,u,d,y){const T=1/(1<<y),A=n/c.a5*T+d*T,O=c.bz((w/c.a5*T+u*T)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI,U=Math.cos(R),V=new Float64Array(3);return V[0]=Math.sin(O)*U,V[1]=Math.sin(R),V[2]=Math.cos(O)*U,V}function mn(w){return(function(n,u){const d=Math.cos(u),y=new Float64Array(3);return y[0]=Math.sin(n)*d,y[1]=Math.sin(u),y[2]=Math.cos(n)*d,y})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Hl(w,n){return w/(2*Math.PI)/Math.cos(n*Math.PI/180)}function Wc(w){const n=Math.asin(w[1])/Math.PI*180,u=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(u>1e-6){const d=w[0]/u,y=Math.acos(w[2]/u),T=(d>0?y:-y)/Math.PI*180;return new c.V(c.W(T,-180,180),n)}return new c.V(0,n)}function Xc(w){return Math.cos(w*Math.PI/180)}function Dn(w,n){const u=Xc(w),d=Xc(n);return c.at(d/u)}function tm(w,n){const u=w.rotate(n.bearingInRadians),d=n.zoom+Dn(n.center.lat,0),y=c.bu(1/Xc(n.center.lat),1/Xc(Math.min(Math.abs(n.center.lat),60)),c.bx(d,7,3,0,1)),T=360/Bi({worldSize:n.worldSize,center:{lat:n.center.lat}});return new c.V(n.center.lng-u.x*T*y,c.an(n.center.lat+u.y*T,-c.ao,c.ao))}function pf(w){const n=.5*w,u=Math.sin(n),d=Math.cos(n);return Math.log(u+d)-Math.log(d-u)}function rm(w,n,u,d){const y=w.lat+u*d;if(Math.abs(u)>1){const T=(Math.sign(w.lat+u)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,A=Math.abs(w.lat+u)*Math.PI/180,O=pf(T+d*(A-T)),R=pf(T),U=pf(A);return new c.V(w.lng+n*((O-R)/(U-R)),y)}return new c.V(w.lng+n*d,y)}class ty{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,u,d,y){const T=`${n.z}_${n.x}_${n.y}_${y?.terrain?"t":""}`,A=this._cache.get(T);if(A)return A;const O=this._cachePrevious.get(T);if(O)return this._cache.set(T,O),O;const R=this._boundingVolumeFactory(n,u,d,y);return this._cache.set(T,R),this._hadAnyChanges=!0,R}}class Gu{constructor(n,u,d,y){this.min=d,this.max=y,this.points=n,this.planes=u}static fromAabb(n,u){const d=[];for(let y=0;y<8;y++)d.push([1&~y?n[0]:u[0],(y>>1&1)==1?u[1]:n[1],(y>>2&1)==1?u[2]:n[2]]);return new Gu(d,[[-1,0,0,u[0]],[1,0,0,-n[0]],[0,-1,0,u[1]],[0,1,0,-n[1]],[0,0,-1,u[2]],[0,0,1,-n[2]]],n,u)}static fromCenterSizeAngles(n,u,d){const y=c.bB([],d[0],d[1],d[2]),T=c.bC([],[u[0],0,0],y),A=c.bC([],[0,u[1],0],y),O=c.bC([],[0,0,u[2]],y),R=[...n],U=[...n];for(let X=0;X<8;X++)for(let W=0;W<3;W++){const re=n[W]+T[W]*(1&~X?-1:1)+A[W]*((X>>1&1)==1?1:-1)+O[W]*((X>>2&1)==1?1:-1);R[W]=Math.min(R[W],re),U[W]=Math.max(U[W],re)}const V=[];for(let X=0;X<8;X++){const W=[...n];c.b0(W,W,c.a$([],T,1&~X?-1:1)),c.b0(W,W,c.a$([],A,(X>>1&1)==1?1:-1)),c.b0(W,W,c.a$([],O,(X>>2&1)==1?1:-1)),V.push(W)}return new Gu(V,[[...T,-c.b5(T,V[0])],[...A,-c.b5(A,V[0])],[...O,-c.b5(O,V[0])],[-T[0],-T[1],-T[2],-c.b5(T,V[7])],[-A[0],-A[1],-A[2],-c.b5(A,V[7])],[-O[0],-O[1],-O[2],-c.b5(O,V[7])]],R,U)}intersectsFrustum(n){let u=!0;const d=this.points.length,y=this.planes.length,T=n.planes.length,A=n.points.length;for(let O=0;O<T;O++){const R=n.planes[O];let U=0;for(let V=0;V<d;V++){const X=this.points[V];R[0]*X[0]+R[1]*X[1]+R[2]*X[2]+R[3]>=0&&U++}if(U===0)return 0;U<d&&(u=!1)}if(u)return 2;for(let O=0;O<y;O++){const R=this.planes[O];let U=0;for(let V=0;V<A;V++){const X=n.points[V];R[0]*X[0]+R[1]*X[1]+R[2]*X[2]+R[3]>=0&&U++}if(U===0)return 0}return 1}intersectsPlane(n){const u=this.points.length;let d=0;for(let y=0;y<u;y++){const T=this.points[y];n[0]*T[0]+n[1]*T[1]+n[2]*T[2]+n[3]>=0&&d++}return d===u?2:d===0?0:1}}function mf(w,n,u){const d=w-n;return d<0?-d:Math.max(0,d-u)}function $u(w,n,u,d,y){const T=w-u;let A;return A=T<0?Math.min(-T,1+T-y):T>1?Math.min(Math.max(T-y,0),1-T):0,Math.max(A,mf(n,d,y))}class Ed{constructor(){this._boundingVolumeCache=new ty(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,u,d,y){const T=1<<d.z,A=1/T,O=d.x/T,R=d.y/T;let U=2;return U=Math.min(U,$u(n,u,O,R,A)),U=Math.min(U,$u(n,u,O+.5,-R-A,A)),U=Math.min(U,$u(n,u,O+.5,2-R-A,A)),U}getWrap(n,u,d){const y=1<<u.z,T=1/y,A=u.x/y,O=mf(n.x,A,T),R=mf(n.x,A-1,T),U=mf(n.x,A+1,T),V=Math.min(O,R,U);return V===U?1:V===R?-1:0}allowVariableZoom(n,u){return ir(n,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,u,d,y){return this._boundingVolumeCache.getTileBoundingVolume(n,u,d,y)}_computeTileBoundingVolume(n,u,d,y){var T,A;let O=0,R=0;if(y?.terrain){const U=new c.a2(n.z,u,n.z,n.x,n.y),V=y.terrain.getMinMaxElevation(U);O=(T=V.minElevation)!==null&&T!==void 0?T:Math.min(0,d),R=(A=V.maxElevation)!==null&&A!==void 0?A:Math.max(0,d)}if(O/=c.bE,R/=c.bE,O+=1,R+=1,n.z<=0)return Gu.fromAabb([-R,-R,-R],[R,R,R]);if(n.z===1)return Gu.fromAabb([n.x===0?-R:0,n.y===0?0:-R,-R],[n.x===0?0:R,n.y===0?R:0,R]);{const U=[$o(0,0,n.x,n.y,n.z),$o(c.a5,0,n.x,n.y,n.z),$o(c.a5,c.a5,n.x,n.y,n.z),$o(0,c.a5,n.x,n.y,n.z)],V=[];for(const Ke of U)V.push(c.a$([],Ke,R));if(R!==O)for(const Ke of U)V.push(c.a$([],Ke,O));n.y===0&&V.push([0,1,0]),n.y===(1<<n.z)-1&&V.push([0,-1,0]);const X=[1,1,1],W=[-1,-1,-1];for(const Ke of V)for(let Qe=0;Qe<3;Qe++)X[Qe]=Math.min(X[Qe],Ke[Qe]),W[Qe]=Math.max(W[Qe],Ke[Qe]);const re=$o(c.a5/2,c.a5/2,n.x,n.y,n.z),oe=c.b4([],[0,1,0],re);c.b3(oe,oe);const fe=c.b4([],re,oe);c.b3(fe,fe);const me=c.b4([],U[2],U[1]);c.b3(me,me);const pe=c.b4([],U[0],U[3]);c.b3(pe,pe),V.push(c.a$([],re,R)),n.y>=(1<<n.z)/2&&V.push(c.a$([],$o(c.a5/2,0,n.x,n.y,n.z),R)),n.y<(1<<n.z)/2&&V.push(c.a$([],$o(c.a5/2,c.a5,n.x,n.y,n.z),R));const xe=Yc(re,V),Ae=Yc(fe,V),_e=[-re[0],-re[1],-re[2],xe.max],Ee=[re[0],re[1],re[2],-xe.min],Oe=[-fe[0],-fe[1],-fe[2],Ae.max],we=[fe[0],fe[1],fe[2],-Ae.min],je=[...me,0],et=[...pe,0],Xe=[];return n.y===0?Xe.push(c.bD(et,je,_e),c.bD(et,je,Ee)):Xe.push(c.bD(Oe,je,_e),c.bD(Oe,je,Ee),c.bD(Oe,et,_e),c.bD(Oe,et,Ee)),n.y===(1<<n.z)-1?Xe.push(c.bD(et,je,_e),c.bD(et,je,Ee)):Xe.push(c.bD(we,je,_e),c.bD(we,je,Ee),c.bD(we,et,_e),c.bD(we,et,Ee)),new Gu(Xe,[_e,Ee,Oe,we,je,et],X,W)}}}function Yc(w,n){let u=1/0,d=-1/0;for(const y of n){const T=c.b5(w,y);u=Math.min(u,T),d=Math.max(d,T)}return{min:u,max:d}}class Zu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,d){return this._helper.interpolatePadding(n,u,d)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u){this._helper.resize(n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(n){this._cachedClippingPlane=c.bF(),this._projectionMatrix=c.bj(),this._globeViewProjMatrix32f=c.bi(),this._globeViewProjMatrixNoCorrection=c.bj(),this._globeViewProjMatrixNoCorrectionInverted=c.bj(),this._globeProjMatrixInverted=c.bj(),this._cameraPosition=c.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(u,d)=>{const y=c.an(u.lat,-c.ao,c.ao),T=c.an(+d,this.minZoom+Dn(0,y),this.maxZoom);return{center:new c.V(u.lng,y),zoom:T}},this.applyConstrain=(u,d)=>this._helper.applyConstrain(u,d),this._helper=new tl({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,d)=>this.defaultConstrain(u,d)},n),this._coveringTilesDetailsProvider=new Ed}clone(){const n=new Zu;return n.apply(this,!1),n}apply(n,u,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(n,u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=c.bA();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:u,applyGlobeMatrix:d}=n,y=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const u=this.pitchInRadians,d=this.cameraToCenterDistance/n,y=Math.sin(u)*d,T=Math.cos(u)*d+1,A=1/Math.sqrt(y*y+T*T)*1;let O=-y,R=T;const U=Math.sqrt(O*O+R*R);O/=U,R/=U;const V=[0,O,R];c.bG(V,V,[0,0,0],-this.bearingInRadians),c.bH(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),c.bI(V,V,[0,0,0],this.center.lng*Math.PI/180);const X=1/c.b7(V);return c.a$(V,V,X),[...V,-A*X]}isLocationOccluded(n){return!this.isSurfacePointVisible(mn(n))}transformLightDirection(n){const u=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,y=Math.cos(d),T=[Math.sin(u)*y,Math.sin(d),Math.cos(u)*y],A=[T[2],0,-T[0]],O=[0,0,0];c.b4(O,A,T),c.b3(A,A),c.b3(O,O);const R=[0,0,0];return c.b3(R,[A[0]*n[0]+O[0]*n[1]+T[0]*n[2],A[1]*n[0]+O[1]*n[1]+T[1]*n[2],A[2]*n[0]+O[2]*n[1]+T[2]*n[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,u,d){const y=(function(O,R,U){const V=1/(1<<U.z);return new c.a9(O/c.a5*V+U.x*V,R/c.a5*V+U.y*V)})(n,u,d.canonical),T=(A=y.y,[c.bz(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI]);var A;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(n,u,d,y){const T=d.canonical,A=$o(n,u,T.x,T.y,T.z),O=1+(y?y(n,u):0)/c.bE,R=[A[0]*O,A[1]*O,A[2]*O,1];c.aH(R,R,this._globeViewProjMatrixNoCorrection);const U=this._cachedClippingPlane,V=U[0]*A[0]+U[1]*A[1]+U[2]*A[2]+U[3]<0;return{point:new c.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=Hl(this.worldSize,this.center.lat),u=c.bk(),d=c.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),c.be(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;u[8]=2*-y.x/this._helper._width,u[9]=2*y.y/this._helper._height,this._projectionMatrix=c.bf(u),this._globeProjMatrixInverted=c.bk(),c.aB(this._globeProjMatrixInverted,u),c.O(u,u,[0,0,-this.cameraToCenterDistance]),c.bg(u,u,this.rollInRadians),c.bh(u,u,-this.pitchInRadians),c.bg(u,u,this.bearingInRadians),c.O(u,u,[0,0,-n]);const T=c.bA();T[0]=n,T[1]=n,T[2]=n,c.bh(d,u,this.center.lat*Math.PI/180),c.bJ(d,d,-this.center.lng*Math.PI/180),c.Q(d,d,T),this._globeViewProjMatrixNoCorrection=d,c.bh(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bJ(u,u,-this.center.lng*Math.PI/180),c.Q(u,u,T),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=c.bk(),c.aB(this._globeViewProjMatrixNoCorrectionInverted,d);const A=c.bA();this._cameraPosition=c.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/n,c.bG(this._cameraPosition,this._cameraPosition,A,-this.rollInRadians),c.bH(this._cameraPosition,this._cameraPosition,A,this.pitchInRadians),c.bG(this._cameraPosition,this._cameraPosition,A,-this.bearingInRadians),c.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bH(this._cameraPosition,this._cameraPosition,A,-this.center.lat*Math.PI/180),c.bI(this._cameraPosition,this._cameraPosition,A,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const O=c.bf(this._globeViewProjMatrixNoCorrectionInverted);c.Q(O,O,[1,1,-1]),this._cachedFrustum=ji.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){c.w("calculateFogMatrix is not supported on globe projection.");const u=c.bk();return c.ar(u),u}getVisibleUnwrappedCoordinates(n){return[new c.bc(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=mn(n);c.a$(d,d,1+u/c.bE);const y=c.bF();return c.aH(y,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(n){}getBounds(){const n=.5*this.width,u=.5*this.height,d=[new c.P(0,0),new c.P(n,0),new c.P(this.width,0),new c.P(this.width,u),new c.P(this.width,this.height),new c.P(n,this.height),new c.P(0,this.height),new c.P(0,u)],y=[];for(const X of d)y.push(this.unprojectScreenPoint(X));let T=0,A=0,O=0,R=0;const U=this.center;for(const X of y){const W=c.bK(U.lng,X.lng),re=c.bK(U.lat,X.lat);W<A&&(A=W),W>T&&(T=W),re<R&&(R=re),re>O&&(O=re)}const V=[U.lng+A,U.lat+R,U.lng+T,U.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new Rr(V)}calculateCenterFromCameraLngLatAlt(n,u,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,d,y)}setLocationAtPoint(n,u){const d=mn(this.unprojectScreenPoint(u)),y=mn(n),T=c.bA();c.bL(T);const A=c.bA();c.bI(A,d,T,-this.center.lng*Math.PI/180),c.bH(A,A,T,this.center.lat*Math.PI/180);const O=y[0]*y[0]+y[2]*y[2],R=A[0]*A[0];if(O<R)return;const U=Math.sqrt(O-R),V=-U,X=c.bM(y[0],y[2],A[0],U),W=c.bM(y[0],y[2],A[0],V),re=c.bA();c.bI(re,y,T,-X);const oe=c.bM(re[1],re[2],A[1],A[2]),fe=c.bA();c.bI(fe,y,T,-W);const me=c.bM(fe[1],fe[2],A[1],A[2]),pe=.5*Math.PI,xe=oe>=-pe&&oe<=pe,Ae=me>=-pe&&me<=pe;let _e,Ee;if(xe&&Ae){const et=this.center.lng*Math.PI/180,Xe=this.center.lat*Math.PI/180;c.bN(X,et)+c.bN(oe,Xe)<c.bN(W,et)+c.bN(me,Xe)?(_e=X,Ee=oe):(_e=W,Ee=me)}else if(xe)_e=X,Ee=oe;else{if(!Ae)return;_e=W,Ee=me}const Oe=_e/Math.PI*180,we=Ee/Math.PI*180,je=this.center.lat;this.setCenter(new c.V(Oe,c.an(we,-90,90))),this.setZoom(this.zoom+Dn(je,this.center.lat))}locationToScreenPoint(n,u){const d=mn(n);if(u){const y=u.getElevationForLngLatZoom(n,this._helper._tileZoom);c.a$(d,d,1+y/c.bE)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(n){const u=c.bF();return c.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new c.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,u){if(u){const d=u.pointCoordinate(n);if(d)return d}return c.a9.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,u){var d;return(d=this.screenPointToMercatorCoordinate(n,u))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(n,u){const d=this._cameraPosition,y=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(d,y)}getRayDirectionFromPixel(n){const u=c.bF();u[0]=n.x/this.width*2-1,u[1]=-1*(n.y/this.height*2-1),u[2]=1,u[3]=1,c.aH(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const d=c.bA();d[0]=u[0]-this._cameraPosition[0],d[1]=u[1]-this._cameraPosition[1],d[2]=u[2]-this._cameraPosition[2];const y=c.bA();return c.b3(y,d),y}isSurfacePointVisible(n){const u=this._cachedClippingPlane;return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const u=c.bF();return c.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(n,u){const d=c.b5(n,u),y=c.bA(),T=c.bA();c.a$(T,u,d),c.b2(y,n,T);const A=1-c.b5(y,y);if(A<0)return null;const O=c.b5(n,n)-1,R=-d+(d<0?1:-1)*Math.sqrt(A),U=O/R,V=R;return{tMin:Math.min(U,V),tMax:Math.max(U,V)}}unprojectScreenPoint(n){const u=this._cameraPosition,d=this.getRayDirectionFromPixel(n),y=this.rayPlanetIntersection(u,d);if(y){const V=c.bA();c.b0(V,u,[d[0]*y.tMin,d[1]*y.tMin,d[2]*y.tMin]);const X=c.bA();return c.b3(X,V),Wc(X)}const T=this._cachedClippingPlane,A=T[0]*d[0]+T[1]*d[1]+T[2]*d[2],O=-c.bb(T,u)/A,R=c.bA();if(O>0)c.b0(R,u,[d[0]*O,d[1]*O,d[2]*O]);else{const V=c.bA();c.b0(V,u,[2*d[0],2*d[1],2*d[2]]);const X=c.bb(this._cachedClippingPlane,V);c.b2(R,V,[this._cachedClippingPlane[0]*X,this._cachedClippingPlane[1]*X,this._cachedClippingPlane[2]*X])}const U=(function(V){const X=c.bA();return X[0]=V[0]*-V[3],X[1]=V[1]*-V[3],X[2]=V[2]*-V[3],{center:X,radius:Math.sqrt(1-V[3]*V[3])}})(T);return Wc((function(V,X,W){const re=c.bA();c.b2(re,W,V);const oe=c.bA();return c.by(oe,V,re,X/c.b9(re)),oe})(U.center,U.radius,R))}getMatrixForModel(n,u){const d=c.V.convert(n),y=1/c.bE,T=c.bj();return c.bJ(T,T,d.lng/180*Math.PI),c.bh(T,T,-d.lat/180*Math.PI),c.O(T,T,[0,0,1+u/c.bE]),c.bh(T,T,.5*Math.PI),c.Q(T,T,[y,y,y]),T}getProjectionDataForCustomLayer(n=!0){const u=this.getProjectionData({overscaledTileID:new c.a2(0,0,0,0,0),applyGlobeMatrix:n});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(n){}}class Hu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,d){return this._helper.interpolatePadding(n,u,d)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,d=!0){this._helper.resize(n,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,u){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(n){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(u,d)=>this.currentTransform.defaultConstrain(u,d),this.applyConstrain=(u,d)=>this._helper.applyConstrain(u,d),this._helper=new tl({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,d)=>this.defaultConstrain(u,d)},n),this._globeness=1,this._mercatorTransform=new Yn,this._verticalPerspectiveTransform=new Zu}clone(){const n=new Hu;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this,!1),n}apply(n,u){this._helper.apply(n,u),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const u=this._mercatorTransform.getProjectionData(n),d=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:u.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return c.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,u,d){const y=this._mercatorTransform.getPitchedTextCorrection(n,u,d),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,u,d);return c.bu(y,T,this._globeness)}projectTileCoordinates(n,u,d,y){return this.currentTransform.projectTileCoordinates(n,u,d,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){return this.currentTransform.lngLatToCameraDepth(n,u)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(n,u,d,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,d,y)}setLocationAtPoint(n,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,u),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(n,u),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(n,u){return this.currentTransform.locationToScreenPoint(n,u)}screenPointToMercatorCoordinate(n,u){return this.currentTransform.screenPointToMercatorCoordinate(n,u)}screenPointToLocation(n,u){return this.currentTransform.screenPointToLocation(n,u)}isPointOnMapSurface(n,u){return this.currentTransform.isPointOnMapSurface(n,u)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,u){return this.currentTransform.getMatrixForModel(n,u)}getProjectionDataForCustomLayer(n=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return u;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return d.fallbackMatrix=u.mainMatrix,d}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class jn{get useGlobeControls(){return!0}handlePanInertia(n,u){const d=tm(n,u);return Math.abs(d.lng-u.center.lng)>180&&(d.lng=u.center.lng+179.5*Math.sign(d.lng-u.center.lng)),{easingCenter:d,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,u){const d=n.around,y=u.screenPointToLocation(d);n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta);const T=u.zoom;n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta);const A=u.zoom-T;if(A===0)return;const O=c.bK(u.center.lng,y.lng),R=O/(Math.abs(O/180)+1),U=c.bK(u.center.lat,y.lat),V=u.getRayDirectionFromPixel(d),X=u.cameraPosition,W=-1*c.b5(X,V),re=c.bA();c.b0(re,X,[V[0]*W,V[1]*W,V[2]*W]);const oe=c.b7(re)-1,fe=Math.exp(.5*-Math.max(oe-.3,0)),me=Hl(u.worldSize,u.center.lat)/Math.min(u.width,u.height),pe=c.bx(me,.9,.5,1,.25),xe=(1-c.aq(-A))*Math.min(fe,pe),Ae=u.center.lat,_e=u.zoom,Ee=new c.V(u.center.lng+R*xe,c.an(u.center.lat+U*xe,-c.ao,c.ao));u.setLocationAtPoint(y,d);const Oe=u.center,we=c.bx(Math.abs(O),45,85,0,1),je=c.bx(me,.75,.35,0,1),et=Math.pow(Math.max(we,je),.25),Xe=c.bK(Oe.lng,Ee.lng),Ke=c.bK(Oe.lat,Ee.lat);u.setCenter(new c.V(Oe.lng+Xe*et,Oe.lat+Ke*et).wrap()),u.setZoom(_e+Dn(Ae,u.center.lat))}handleMapControlsPan(n,u,d){if(!n.panDelta)return;const y=u.center.lat,T=u.zoom;u.setCenter(tm(n.panDelta,u).wrap()),u.setZoom(T+Dn(y,u.center.lat))}cameraForBoxAndBearing(n,u,d,y,T){const A=Gl(n,u,d,y,T),O=u.left/T.width*2-1,R=(T.width-u.right)/T.width*2-1,U=u.top/T.height*-2+1,V=(T.height-u.bottom)/T.height*-2+1,X=c.bK(d.getWest(),d.getEast())<0,W=X?d.getEast():d.getWest(),re=X?d.getWest():d.getEast(),oe=Math.max(d.getNorth(),d.getSouth()),fe=Math.min(d.getNorth(),d.getSouth()),me=W+.5*c.bK(W,re),pe=oe+.5*c.bK(oe,fe),xe=T.clone();xe.setCenter(A.center),xe.setBearing(A.bearing),xe.setPitch(0),xe.setRoll(0),xe.setZoom(A.zoom);const Ae=xe.modelViewProjectionMatrix,_e=[mn(d.getNorthWest()),mn(d.getNorthEast()),mn(d.getSouthWest()),mn(d.getSouthEast()),mn(new c.V(re,pe)),mn(new c.V(W,pe)),mn(new c.V(me,oe)),mn(new c.V(me,fe))],Ee=mn(A.center);let Oe=Number.POSITIVE_INFINITY;for(const we of _e)O<0&&(Oe=jn.getLesserNonNegativeNonNull(Oe,jn.solveVectorScale(we,Ee,Ae,"x",O))),R>0&&(Oe=jn.getLesserNonNegativeNonNull(Oe,jn.solveVectorScale(we,Ee,Ae,"x",R))),U>0&&(Oe=jn.getLesserNonNegativeNonNull(Oe,jn.solveVectorScale(we,Ee,Ae,"y",U))),V<0&&(Oe=jn.getLesserNonNegativeNonNull(Oe,jn.solveVectorScale(we,Ee,Ae,"y",V)));if(Number.isFinite(Oe)&&Oe!==0)return A.zoom=xe.zoom+c.at(Oe),A;Ni()}handleJumpToCenterZoom(n,u){const d=n.center.lat,y=n.applyConstrain(u.center?c.V.convert(u.center):n.center,n.zoom).center;n.setCenter(y.wrap());const T=u.zoom!==void 0?+u.zoom:n.zoom+Dn(d,y.lat);n.zoom!==T&&n.setZoom(T)}handleEaseTo(n,u){const d=n.zoom,y=n.center,T=n.padding,A={roll:n.roll,pitch:n.pitch,bearing:n.bearing},O={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},R=u.zoom!==void 0,U=!n.isPaddingEqual(u.padding);let V=!1;const X=u.center?c.V.convert(u.center):y,W=n.applyConstrain(X,d).center;Go(n,W);const re=n.clone();re.setCenter(W),re.setZoom(R?+u.zoom:d+Dn(y.lat,X.lat)),re.setBearing(u.bearing);const oe=new c.P(c.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));re.setLocationAtPoint(W,oe);const fe=(u.offset&&u.offsetAsPoint.mag())>0?re.center:W,me=R?+u.zoom:d+Dn(y.lat,fe.lat),pe=d+Dn(y.lat,0),xe=me+Dn(fe.lat,0),Ae=c.bK(y.lng,fe.lng),_e=c.bK(y.lat,fe.lat),Ee=c.aq(xe-pe);return V=me!==d,{easeFunc:Oe=>{if(c.bo(A,O)||$c({startEulerAngles:A,endEulerAngles:O,tr:n,k:Oe,useSlerp:A.roll!=O.roll}),U&&n.interpolatePadding(T,u.padding,Oe),u.around)c.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(u.around,u.aroundPoint);else{const we=xe>pe?Math.min(2,Ee):Math.max(.5,Ee),je=Math.pow(we,1-Oe),et=rm(y,Ae,_e,Oe*je);n.setCenter(et.wrap())}if(V){const we=c.G.number(pe,xe,Oe)+Dn(0,n.center.lat);n.setZoom(we)}},isZooming:V,elevationCenter:fe}}handleFlyTo(n,u){const d=u.zoom!==void 0,y=n.center,T=n.zoom,A=n.padding,O=!n.isPaddingEqual(u.padding),R=n.applyConstrain(c.V.convert(u.center||u.locationAtOffset),T).center,U=d?+u.zoom:n.zoom+Dn(n.center.lat,R.lat),V=n.clone();V.setCenter(R),V.setZoom(U),V.setBearing(u.bearing);const X=new c.P(c.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));V.setLocationAtPoint(R,X);const W=V.center;Go(n,W);const re=(function(_e,Ee,Oe){const we=mn(Ee),je=mn(Oe),et=c.b5(we,je),Xe=Math.acos(et),Ke=Bi(_e);return Xe/(2*Math.PI)*Ke})(n,y,W),oe=T+Dn(y.lat,0),fe=U+Dn(W.lat,0),me=c.aq(fe-oe);let pe;if(typeof u.minZoom=="number"){const _e=+u.minZoom+Dn(W.lat,0),Ee=Math.min(_e,oe,fe)+Dn(0,W.lat),Oe=n.applyConstrain(W,Ee).zoom+Dn(W.lat,0);pe=c.aq(Oe-oe)}const xe=c.bK(y.lng,W.lng),Ae=c.bK(y.lat,W.lat);return{easeFunc:(_e,Ee,Oe,we)=>{const je=rm(y,xe,Ae,Oe);O&&n.interpolatePadding(A,u.padding,_e);const et=_e===1?W:je;n.setCenter(et.wrap());const Xe=oe+c.at(Ee);n.setZoom(_e===1?U:Xe+Dn(0,et.lat))},scaleOfZoom:me,targetCenter:W,scaleOfMinZoom:pe,pixelPathLength:re}}static solveVectorScale(n,u,d,y,T){const A=y==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],O=[d[3],d[7],d[11],d[15]],R=n[0]*A[0]+n[1]*A[1]+n[2]*A[2],U=n[0]*O[0]+n[1]*O[1]+n[2]*O[2],V=u[0]*A[0]+u[1]*A[1]+u[2]*A[2],X=u[0]*O[0]+u[1]*O[1]+u[2]*O[2];return V+T*U===R+T*X||O[3]*(R-V)+A[3]*(X-U)+R*X==V*U?null:(V+A[3]-T*X-T*O[3])/(V-R-T*X+T*U)}static getLesserNonNegativeNonNull(n,u){return u!==null&&u>=0&&u<n?u:n}}class Wu{constructor(n){this._globe=n,this._mercatorCameraHelper=new $l,this._verticalPerspectiveCameraHelper=new jn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,u){return this.currentHelper.handlePanInertia(n,u)}handleMapControlsRollPitchBearingZoom(n,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,u)}handleMapControlsPan(n,u,d){this.currentHelper.handleMapControlsPan(n,u,d)}cameraForBoxAndBearing(n,u,d,y,T){return this.currentHelper.cameraForBoxAndBearing(n,u,d,y,T)}handleJumpToCenterZoom(n,u){this.currentHelper.handleJumpToCenterZoom(n,u)}handleEaseTo(n,u){return this.currentHelper.handleEaseTo(n,u)}handleFlyTo(n,u){return this.currentHelper.handleFlyTo(n,u)}}const Xu=(w,n)=>c.B(w,n&&n.filter((u=>u.identifier!=="source.canvas"))),Yu=c.bO();class al extends c.E{constructor(n,u={}){var d,y;super(),this._rtlPluginLoaded=()=>{for(const A in this.tileManagers){const O=this.tileManagers[A].getSource().type;O!=="vector"&&O!=="geojson"||this.tileManagers[A].reload()}},this.map=n,this.dispatcher=new or(mt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",((A,O)=>this.getGlyphs(A,O))),this.dispatcher.registerMessageHandler("GI",((A,O)=>this.getImages(A,O))),this.dispatcher.registerMessageHandler("GDA",((A,O)=>this.getDashes(A,O))),this.imageManager=new Ve,this.imageManager.setEventedParent(this);const T=((d=n._container)===null||d===void 0?void 0:d.lang)||typeof document<"u"&&((y=document.documentElement)===null||y===void 0?void 0:y.lang)||void 0;this.glyphManager=new Ge(n._requestManager,u.localIdeographFontFamily,T),this.lineAtlas=new Mt(256,512),this.crossTileSymbolIndex=new ni,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",c.bP()),ne().on(Ks,this._rtlPluginLoaded),this.on("data",(A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const O=this.tileManagers[A.sourceId];if(!O)return;const R=O.getSource();if(R&&R.vectorLayerIds)for(const U in this._layers){const V=this._layers[U];V.source===R.id&&this._validateLayer(V)}}))}_setInitialValues(){var n;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new c.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((n=this.crossTileSymbolIndex)===null||n===void 0?void 0:n.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(n,u){var d,y,T;this._checkLoaded();const A=u===null?(T=(y=(d=this.stylesheet.state)===null||d===void 0?void 0:d[n])===null||y===void 0?void 0:y.default)!==null&&T!==void 0?T:null:u;if(c.bR(A,this._globalState[n]))return this;this._globalState[n]=A,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const u=[];for(const d in n)!c.bR(this._globalState[d],n[d].default)&&(u.push(d),this._globalState[d]=n[d].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(n){if(n.length===0)return;const u=new Set,d={};for(const y of n){d[y]=this._globalState[y];for(const T in this._layers){const A=this._layers[T],O=A.getLayoutAffectingGlobalStateRefs(),R=A.getPaintAffectingGlobalStateRefs(),U=A.getVisibilityAffectingGlobalStateRefs();if(O.has(y)&&u.add(A.source),R.has(y))for(const{name:V,value:X}of R.get(y))this._updatePaintProperty(A,V,X);U?.has(y)&&(A.recalculateVisibility(),this._updateLayer(A))}}this.dispatcher.broadcast("UGS",d);for(const y in this.tileManagers)u.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(n,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const y=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;c.j(y,this._loadStyleRequest).then((A=>{this._loadStyleRequest=null,this._load(A.data,u,d)})).catch((A=>{this._loadStyleRequest=null,A&&!T.signal.aborted&&this.fire(new c.k(A))}))}loadJSON(n,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,$.frameAsync(this._frameRequest,this.map._ownerWindow).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(n,u,d)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(Yu,{validate:!1})}_load(n,u,d){var y,T;let A=u.transformStyle?u.transformStyle(d,n):n;if(!u.validate||!Xu(this,c.C(A))){A=Object.assign({},A),this._loaded=!0,this.stylesheet=A;for(const O in A.sources)this.addSource(O,A.sources[O],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs),this._createLayers(),this.light=new Rt(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new lt(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var n,u,d;const y=c.bS(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",y),this._order=y.map((T=>T.id)),this._layers={},this._serializedLayers=null;for(const T of y){const A=c.bT(T,this._globalState);if(A.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=A,c.bU(A)&&this.tileManagers[A.source]){const O=(d=(u=T.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&d!==void 0?d:A.paint.get("raster-fade-duration");this.tileManagers[A.source].setRasterFadeDuration(O)}}}_loadSprite(n,u=!1,d=void 0){this.imageManager.setLoaded(!1);const y=new AbortController;let T;this._spriteRequest=y,(function(A,O,R,U){return c._(this,void 0,void 0,(function*(){const V=bt(A),X=R>1?"@2x":"",W={},re={};for(const{id:oe,url:fe}of V){const me=O.transformRequest(kt(fe,X,".json"),"SpriteJSON");W[oe]=c.j(me,U);const pe=O.transformRequest(kt(fe,X,".png"),"SpriteImage");re[oe]=Re.getImage(pe,U)}return yield Promise.all([...Object.values(W),...Object.values(re)]),(function(oe,fe){return c._(this,void 0,void 0,(function*(){const me={};for(const pe in oe){me[pe]={};const xe=$.getImageCanvasContext((yield fe[pe]).data),Ae=(yield oe[pe]).data;for(const _e in Ae){const{width:Ee,height:Oe,x:we,y:je,sdf:et,pixelRatio:Xe,stretchX:Ke,stretchY:Qe,content:Ct,textFitWidth:Pt,textFitHeight:yt}=Ae[_e];me[pe][_e]={data:null,pixelRatio:Xe,sdf:et,stretchX:Ke,stretchY:Qe,content:Ct,textFitWidth:Pt,textFitHeight:yt,spriteData:{width:Ee,height:Oe,x:we,y:je,context:xe}}}}return me}))})(W,re)}))})(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((A=>{if(this._spriteRequest=null,A)for(const O in A){this._spritesImagesIds[O]=[];const R=this._spritesImagesIds[O]?this._spritesImagesIds[O].filter((U=>!(U in A))):[];for(const U of R)this.imageManager.removeImage(U),this._changedImages[U]=!0;for(const U in A[O]){const V=O==="default"?U:`${O}:${U}`;this._spritesImagesIds[O].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,A[O][U],!1):this.imageManager.addImage(V,A[O][U]),u&&(this._changedImages[V]=!0)}}})).catch((A=>{this._spriteRequest=null,T=A,y.signal.aborted||this.fire(new c.k(T))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),d&&d(T)}))}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(n){const u=this.tileManagers[n.source];if(!u)return;const d=n.sourceLayer;if(!d)return;const y=u.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.k(new Error(`Source layer "${d}" does not exist on source "${y.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.tileManagers)if(!this.tileManagers[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,u=!1){const d=this._serializedAllLayers();if(!n||n.length===0)return Object.values(u?c.bV(d):d);const y=[];for(const T of n)if(d[T]){const A=u?c.bV(d[T]):d[T];y.push(A)}return y}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const u=Object.keys(this._layers);for(const d of u){const y=this._layers[d];y.type!=="custom"&&(n[d]=y.serialize())}return n}hasTransitions(){var n,u,d;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const y in this.tileManagers)if(this.tileManagers[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(u){const y=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(y.length||T.length)&&this._updateWorkerLayers(y,T);for(const A in this._updatedSources){const O=this._updatedSources[A];if(O==="reload")this._reloadSource(A);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const d={};for(const y in this.tileManagers){const T=this.tileManagers[y];d[y]=T.used,T.used=!1}for(const y of this._order){const T=this._layers[y];T.recalculate(n,this._availableImages),!T.isHidden(n.zoom)&&T.source&&(this.tileManagers[T.source].used=!0)}for(const y in d){const T=this.tileManagers[y];!!d[y]!=!!T.used&&T.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,u&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,u={}){var d;this._checkLoaded();const y=this.serialize();if(n=u.transformStyle?u.transformStyle(y,n):n,((d=u.validate)===null||d===void 0||d)&&Xu(this,c.C(n)))return!1;(n=c.bV(n)).layers=c.bS(n.layers);const T=c.bW(y,n),A=this._getOperationsToPerform(T);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const O of A.operations)O();return this.stylesheet=n,this._serializedLayers=null,this.fire(new c.l("style.load",{style:this})),!0}_getOperationsToPerform(n){const u=[],d=[];for(const y of n)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,y.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,y.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,y.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,y.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,y.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,y.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,y.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,y.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,y.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,y.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,y.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,y.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,y.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,y.args)));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setGlobalState":u.push((()=>this.setGlobalState.apply(this,y.args)));break;case"setTransition":u.push((()=>{}));break;default:d.push(y.command)}return{operations:u,unimplemented:d}}addImage(n,u){if(this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u,d={}){if(this._checkLoaded(),this.tileManagers[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.C.source,`sources.${n}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const y=this.tileManagers[n]=new Fr(n,u,this.dispatcher);y.style=this,y.setEventedParent(this,(()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:n}))),y.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new c.k(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const u=this.tileManagers[n];delete this.tileManagers[n],delete this._updatedSources[n],u.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.tileManagers[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(n){return this.tileManagers[n]&&this.tileManagers[n].getSource()}addLayer(n,u,d={}){this._checkLoaded();const y=n.id;if(this.getLayer(y))return void this.fire(new c.k(new Error(`Layer "${y}" already exists on this map.`)));let T;if(n.type==="custom"){if(Xu(this,c.bX(n)))return;T=c.bT(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(y,n.source),n=c.bV(n),n=c.e(n,{source:y})),this._validate(c.C.layer,`layers.${y}`,n,{arrayIndex:-1},d))return;T=c.bT(n,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:y}})}const A=u?this._order.indexOf(u):this._order.length;if(u&&A===-1)this.fire(new c.k(new Error(`Cannot add layer "${y}" before non-existing layer "${u}".`)));else{if(this._order.splice(A,0,y),this._layerOrderChanged=!0,this._layers[y]=T,this._removedLayers[y]&&T.source&&T.type!=="custom"){const O=this._removedLayers[y];delete this._removedLayers[y],O.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.tileManagers[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const d=this._order.indexOf(n);this._order.splice(d,1);const y=u?this._order.indexOf(u):this._order.length;u&&y===-1?this.fire(new c.k(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(y,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,d){this._checkLoaded();const y=this.getLayer(n);y?y.minzoom===u&&y.maxzoom===d||(u!=null&&(y.minzoom=u),d!=null&&(y.maxzoom=d),this._updateLayer(y)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u,d={}){this._checkLoaded();const y=this.getLayer(n);if(y){if(!c.bR(y.filter,u))return u==null?(y.setFilter(void 0),void this._updateLayer(y)):void(this._validate(c.C.filter,`layers.${y.id}.filter`,u,null,d)||(y.setFilter(c.bV(u)),this._updateLayer(y)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.bV(this.getLayer(n).filter)}setLayoutProperty(n,u,d,y={}){this._checkLoaded();const T=this.getLayer(n);T?c.bR(T.getLayoutProperty(u),d)||(T.setLayoutProperty(u,d,y),this._updateLayer(T)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const d=this.getLayer(n);if(d)return d.getLayoutProperty(u);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,d,y={}){this._checkLoaded();const T=this.getLayer(n);T?c.bR(T.getPaintProperty(u),d)||this._updatePaintProperty(T,u,d,y):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,u,d,y={}){n.setPaintProperty(u,d,y)&&this._updateLayer(n),c.bU(n)&&u==="raster-fade-duration"&&this.tileManagers[n.source].setRasterFadeDuration(d),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const d=n.source,y=n.sourceLayer,T=this.tileManagers[d];if(T===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const A=T.getSource().type;A==="geojson"&&y?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||y?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(y,n.id,u)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const d=n.source,y=this.tileManagers[d];if(y===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const T=y.getSource().type,A=T==="vector"?n.sourceLayer:void 0;T!=="vector"||A?u&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(A,n.id,u):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,d=n.sourceLayer,y=this.tileManagers[u];if(y!==void 0)return y.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(d,n.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=c.bY(this.tileManagers,(T=>T.serialize())),u=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,y=this.stylesheet;return c.bZ({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:n,layers:u,terrain:d},(T=>T!==void 0))}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.tileManagers[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.tileManagers[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=A=>this._layers[A].type==="fill-extrusion",d={},y=[];for(let A=this._order.length-1;A>=0;A--){const O=this._order[A];if(u(O)){d[O]=A;for(const R of n){const U=R[O];if(U)for(const V of U)y.push(V)}}}y.sort(((A,O)=>O.intersectionZ-A.intersectionZ));const T=[];for(let A=this._order.length-1;A>=0;A--){const O=this._order[A];if(u(O))for(let R=y.length-1;R>=0;R--){const U=y[R].feature;if(d[U.layer.id]<A)break;T.push(U),y.pop()}else for(const R of n){const U=R[O];if(U)for(const V of U)T.push(V.feature)}}return T}queryRenderedFeatures(n,u,d){u&&u.filter&&this._validate(c.C.filter,"queryRenderedFeatures.filter",u.filter,null,u);const y={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const U of u.layers){const V=this._layers[U];if(!V)return this.fire(new c.k(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];y[V.source]=!0}}const T=[];u.availableImages=this._availableImages;const A=this._serializedAllLayers(),O=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,R=Object.assign(Object.assign({},u),{layers:O,globalState:this._globalState});for(const U in this.tileManagers)u.layers&&!y[U]||T.push(An(this.tileManagers[U],this._layers,A,n,R,d,this.map.terrain?(V,X,W)=>this.map.terrain.getElevation(V,X,W):void 0));return this.placement&&T.push((function(U,V,X,W,re,oe,fe){const me={},pe=oe.queryRenderedSymbols(W),xe=[];for(const Ae of Object.keys(pe).map(Number))xe.push(fe[Ae]);xe.sort(ur);for(const Ae of xe){const _e=Ae.featureIndex.lookupSymbolFeatures(pe[Ae.bucketInstanceId],V,Ae.bucketIndex,Ae.sourceLayerIndex,{filterSpec:re.filter,globalState:re.globalState},re.layers,re.availableImages,U);for(const Ee in _e){const Oe=me[Ee]=me[Ee]||[],we=_e[Ee];we.sort(((je,et)=>{const Xe=Ae.featureSortOrder;if(Xe){const Ke=Xe.indexOf(je.featureIndex);return Xe.indexOf(et.featureIndex)-Ke}return et.featureIndex-je.featureIndex}));for(const je of we)Oe.push(je)}}return(function(Ae,_e,Ee){for(const Oe in Ae)for(const we of Ae[Oe])Wr(we,Ee[_e[Oe].source]);return Ae})(me,U,X)})(this._layers,A,this.tileManagers,n,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(n,u){u?.filter&&this._validate(c.C.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.tileManagers[n];return d?(function(y,T){const A=y.getRenderableIds().map((U=>y.getTileByID(U))),O=[],R={};for(let U=0;U<A.length;U++){const V=A[U],X=V.tileID.canonical.key;R[X]||(R[X]=!0,V.querySourceFeatures(O,T))}return O})(d,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,u={}){this._checkLoaded();const d=this.light.getLight();let y=!1;for(const A in n)if(!c.bR(n[A],d[A])){y=!0;break}if(!y)return;const T={now:K(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(T)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.stylesheet.projection=n,this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,u={}){this._checkLoaded();const d=this.getSky();let y=!1;if(!n&&!d)return;if(n&&!d)y=!0;else if(!n&&d)y=!0;else for(const A in n)if(!c.bR(n[A],d[A])){y=!0;break}if(!y)return;const T={now:K(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,u),this.sky.updateTransitions(T)}_setProjectionInternal(n){const u=(function(d,y){const T={constrainOverride:y};if(Array.isArray(d)){const A=new Td({type:d});return{projection:A,transform:new Hu(T),cameraHelper:new Wu(A)}}switch(d){case"mercator":return{projection:new ii,transform:new Yn(T),cameraHelper:new $l};case"globe":{const A=new Td({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:A,transform:new Hu(T),cameraHelper:new Wu(A)}}case"vertical-perspective":return{projection:new Sd,transform:new Zu(T),cameraHelper:new jn};default:return c.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new ii,transform:new Yn(T),cameraHelper:new $l}}})(n,this.map.transformConstrain);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const d in this.tileManagers)this.tileManagers[d].reload()}_validate(n,u,d,y,T={}){return(!T||T.validate!==!1)&&Xu(this,n.call(c.C,c.e({key:u,style:this.serialize(),value:d,styleSpec:c.u},y)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ne().off(Ks,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.tileManagers){const d=this.tileManagers[u];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.tileManagers[n].clearTiles()}_reloadSource(n){this.tileManagers[n].resume(),this.tileManagers[n].reload()}_updateSources(n){for(const u in this.tileManagers)this.tileManagers[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.tileManagers)this._reloadSource(n)}_updatePlacement(n,u,d,y,T=!1){let A=!1,O=!1;const R={};for(const U of this._order){const V=this._layers[U];if(V.type!=="symbol")continue;if(!R[V.source]){const W=this.tileManagers[V.source];R[V.source]=W.getRenderableIds(!0).map((re=>W.getTileByID(re))).sort(((re,oe)=>oe.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(oe.tileID)?-1:1)))}const X=this.crossTileSymbolIndex.addLayer(V,R[V.source],n.center.lng);A=A||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(K(),n.zoom))&&(this.pauseablePlacement=new qu(n,this.map.terrain,this._order,T,u,d,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(K()),O=!0),A&&this.pauseablePlacement.placement.setStale()),O||A)for(const U of this._order){const V=this._layers[U];V.type==="symbol"&&this.placement.updateLayerOpacities(V,R[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(K())}_releaseSymbolFadeTiles(){for(const n in this.tileManagers)this.tileManagers[n].releaseSymbolFadeTiles()}getImages(n,u){return c._(this,void 0,void 0,(function*(){const d=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const y=this.tileManagers[u.source];return y&&y.setDependencies(u.tileID.key,u.type,u.icons),d}))}getGlyphs(n,u){return c._(this,void 0,void 0,(function*(){const d=yield this.glyphManager.getGlyphs(u.stacks),y=this.tileManagers[u.source];return y&&y.setDependencies(u.tileID.key,u.type,[""]),d}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,u={}){this._checkLoaded(),n&&this._validate(c.C.glyphs,"glyphs",n,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,u){return c._(this,void 0,void 0,(function*(){const d={};for(const[y,T]of Object.entries(u.dashes))d[y]=this.lineAtlas.getDash(T.dasharray,T.round);return d}))}addSprite(n,u,d={},y){this._checkLoaded();const T=[{id:n,url:u}],A=[...bt(this.stylesheet.sprite),...T];this._validate(c.C.sprite,"sprite",A,null,d)||(this.stylesheet.sprite=A,this._loadSprite(T,!0,y))}removeSprite(n){this._checkLoaded();const u=bt(this.stylesheet.sprite);if(u.find((d=>d.id===n))){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;u.splice(u.findIndex((d=>d.id===n)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return bt(this.stylesheet.sprite)}setSprite(n,u={},d){this._checkLoaded(),n&&this._validate(c.C.sprite,"sprite",n,null,u)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const n in this.tileManagers){const u=this.tileManagers[n];u.setEventedParent(null),u.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const n in this._layers){const u=this._layers[n];u.setEventedParent(null),u.onRemove&&u.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var nm=c.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Kc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,d,y,T,A,O,R,U){this.context=n;let V=this.boundPaintVertexBuffers.length!==y.length;for(let X=0;!V&&X<y.length;X++)this.boundPaintVertexBuffers[X]!==y[X]&&(V=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==d||V||this.boundIndexBuffer!==T||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==U?this.freshBind(u,d,y,T,A,O,R,U):(n.bindVertexArray.set(this.vao),O&&O.bind(),T&&T.dynamicDraw&&T.bind(),R&&R.bind(),U&&U.bind())}freshBind(n,u,d,y,T,A,O,R){const U=n.numAttributes,V=this.context,X=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=y,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,u.enableAttributes(X,n);for(const W of d)W.enableAttributes(X,n);A&&A.enableAttributes(X,n),O&&O.enableAttributes(X,n),R&&R.enableAttributes(X,n),u.bind(),u.setVertexAttribPointers(X,n,T);for(const W of d)W.bind(),W.setVertexAttribPointers(X,n,T);A&&(A.bind(),A.setVertexAttribPointers(X,n,T)),y&&y.bind(),O&&(O.bind(),O.setVertexAttribPointers(X,n,T)),R&&(R.bind(),R.setVertexAttribPointers(X,n,T)),V.currentNumAttributes=U}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const im=(w,n,u,d,y)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:n,u_fog_color:u?u.properties.get("fog-color"):c.bp.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:u?u.calculateFogBlendOpacity(d):0,u_horizon_color:u?u.properties.get("horizon-color"):c.bp.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),_o={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function gf(w){const n=[];for(let u=0;u<w.length;u++){if(w[u]===null)continue;const d=w[u].split(" ");n.push(d.pop())}return n}class am{constructor(n,u,d,y,T,A,O,R,U=[]){const V=n.gl;this.program=V.createProgram();const X=gf(u.staticAttributes),W=d?d.getBinderAttributes():[],re=X.concat(W),oe=dn.prelude.staticUniforms?gf(dn.prelude.staticUniforms):[],fe=O.staticUniforms?gf(O.staticUniforms):[],me=u.staticUniforms?gf(u.staticUniforms):[],pe=d?d.getBinderUniforms():[],xe=oe.concat(fe).concat(me).concat(pe),Ae=[];for(const Xe of xe)Ae.indexOf(Xe)<0&&Ae.push(Xe);const _e=d?d.defines():[];Wa(V)&&_e.unshift("#version 300 es"),T&&_e.push("#define OVERDRAW_INSPECTOR;"),A&&_e.push("#define TERRAIN3D;"),R&&_e.push(R),U&&_e.push(...U);let Ee=_e.concat(dn.prelude.fragmentSource,O.fragmentSource,u.fragmentSource).join(`
`),Oe=_e.concat(dn.prelude.vertexSource,O.vertexSource,u.vertexSource).join(`
`);Wa(V)||(Ee=(function(Xe){return Xe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Ee),Oe=(function(Xe){return Xe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Oe));const we=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(we,Ee),V.compileShader(we),!V.getShaderParameter(we,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(we)}`);V.attachShader(this.program,we);const je=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(je,Oe),V.compileShader(je),!V.getShaderParameter(je,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(je)}`);V.attachShader(this.program,je),this.attributes={};const et={};this.numAttributes=re.length;for(let Xe=0;Xe<this.numAttributes;Xe++)re[Xe]&&(V.bindAttribLocation(this.program,Xe,re[Xe]),this.attributes[re[Xe]]=Xe);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(je),V.deleteShader(we);for(let Xe=0;Xe<Ae.length;Xe++){const Ke=Ae[Xe];if(Ke&&!et[Ke]){const Qe=V.getUniformLocation(this.program,Ke);Qe&&(et[Ke]=Qe)}}this.fixedUniforms=y(n,et),this.terrainUniforms=((Xe,Ke)=>({u_depth:new c.b_(Xe,Ke.u_depth),u_terrain:new c.b_(Xe,Ke.u_terrain),u_terrain_dim:new c.bq(Xe,Ke.u_terrain_dim),u_terrain_matrix:new c.c0(Xe,Ke.u_terrain_matrix),u_terrain_unpack:new c.c1(Xe,Ke.u_terrain_unpack),u_terrain_exaggeration:new c.bq(Xe,Ke.u_terrain_exaggeration)}))(n,et),this.projectionUniforms=((Xe,Ke)=>({u_projection_matrix:new c.c0(Xe,Ke.u_projection_matrix),u_projection_tile_mercator_coords:new c.c1(Xe,Ke.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.c1(Xe,Ke.u_projection_clipping_plane),u_projection_transition:new c.bq(Xe,Ke.u_projection_transition),u_projection_fallback_matrix:new c.c0(Xe,Ke.u_projection_fallback_matrix)}))(n,et),this.binderUniforms=d?d.getUniforms(n,et):[]}draw(n,u,d,y,T,A,O,R,U,V,X,W,re,oe,fe,me,pe,xe,Ae){const _e=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(y),n.setColorMode(T),n.setCullFace(A),R){n.activeTexture.set(_e.TEXTURE2),_e.bindTexture(_e.TEXTURE_2D,R.depthTexture),n.activeTexture.set(_e.TEXTURE3),_e.bindTexture(_e.TEXTURE_2D,R.texture);for(const Oe in this.terrainUniforms)this.terrainUniforms[Oe].set(R[Oe])}if(U)for(const Oe in U)this.projectionUniforms[_o[Oe]].set(U[Oe]);if(O)for(const Oe in this.fixedUniforms)this.fixedUniforms[Oe].set(O[Oe]);me&&me.setUniforms(n,this.binderUniforms,oe,{zoom:fe});let Ee=0;switch(u){case _e.LINES:Ee=2;break;case _e.TRIANGLES:Ee=3;break;case _e.LINE_STRIP:Ee=1}for(const Oe of re.get()){const we=Oe.vaos||(Oe.vaos={});(we[V]||(we[V]=new Kc)).bind(n,this,X,me?me.getPaintVertexBuffers():[],W,Oe.vertexOffset,pe,xe,Ae),_e.drawElements(u,Oe.primitiveLength*Ee,_e.UNSIGNED_SHORT,Oe.primitiveOffset*Ee*2)}}}function om(w,n,u){const d=1/c.aN(u,1,n.transform.tileZoom),y=Math.pow(2,u.tileID.overscaledZ),T=u.tileSize*Math.pow(2,n.transform.tileZoom)/y,A=T*(u.tileID.canonical.x+u.tileID.wrap*y),O=T*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[A>>16,O>>16],u_pixel_coord_lower:[65535&A,65535&O]}}const yf=(w,n,u,d)=>{const y=w.style.light,T=y.properties.get("position"),A=[T.x,T.y,T.z],O=c.c4();y.properties.get("anchor")==="viewport"&&c.c5(O,w.transform.bearingInRadians),c.c6(A,A,O);const R=w.transform.transformLightDirection(A),U=y.properties.get("color");return{u_lightpos:A,u_lightpos_globe:R,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+n,u_opacity:u,u_fill_translate:d}},vf=(w,n,u,d,y,T,A)=>c.e(yf(w,n,u,d),om(T,w,A),{u_height_factor:-Math.pow(2,y.overscaledZ)/A.tileSize/8}),Wl=(w,n,u,d)=>c.e(om(n,w,u),{u_fill_translate:d}),Ku=(w,n)=>({u_world:w,u_fill_translate:n}),sm=(w,n,u,d,y)=>c.e(Wl(w,n,u,y),{u_world:d}),Qc=(w,n,u,d,y)=>{const T=w.transform;let A,O,R=0;if(u.paint.get("circle-pitch-alignment")==="map"){const U=c.aN(n,1,T.zoom);A=!0,O=[U,U],R=U/(c.a5*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*y}else A=!1,O=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+A,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:R,u_translate:d}},ol=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Ad=w=>({u_viewport_size:[w.width,w.height]}),Jc=(w,n=1)=>({u_color:w,u_overlay:0,u_overlay_scale:n}),sl=(w,n,u,d)=>{const y=c.aN(w,1,n)/(c.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:c.aN(w,1,n),u_intensity:u,u_globe_extrude_scale:y}},Md=(w,n,u,d)=>{const y=c.N();c.c7(y,0,w.width,w.height,0,0,1);const T=w.context.gl;return{u_matrix:y,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:u,u_color_ramp:d,u_opacity:n.paint.get("heatmap-opacity")}},eh=(w,n,u)=>{const d=u.paint.get("hillshade-accent-color");let y;switch(u.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const T=u.getIlluminationProperties();for(let A=0;A<T.directionRadians.length;A++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[A]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:ry(0,n.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:d,u_method:y,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},lm=(w,n)=>{const u=n.stride,d=c.N();return c.c7(d,0,c.a5,-c.a5,0,0,1),c.O(d,d,[0,-c.a5,0]),{u_matrix:d,u_image:1,u_dimension:[u,u],u_zoom:w.overscaledZ,u_unpack:n.getUnpackVector()}};function ry(w,n){const u=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new c.a9(0,d/u).toLngLat().lat,new c.a9(0,(d+1)/u).toLngLat().lat]}const um=(w,n,u=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:w.paint.get("color-relief-opacity")}),th=(w,n,u,d)=>{const y=w.transform;return{u_translation:rh(w,n,u),u_ratio:d/c.aN(n,1,y.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},cm=(w,n,u,d,y)=>c.e(th(w,n,u,d),{u_image:0,u_image_height:y}),Cd=(w,n,u,d,y)=>{const T=w.transform,A=Xa(n,T);return{u_translation:rh(w,n,u),u_texsize:n.imageAtlasTexture.size,u_ratio:d/c.aN(n,1,T.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[A,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Xi=(w,n,u,d,y)=>{const T=Xa(n,w.transform);return c.e(th(w,n,u,d),{u_tileratio:T,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image:0,u_mix:y.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},ll=(w,n,u,d,y,T)=>{const A=Xa(n,w.transform);return c.e(th(w,n,u,d),{u_image:0,u_image_height:T,u_tileratio:A,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image_dash:1,u_mix:y.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function Xa(w,n){return 1/c.aN(w,1,n.tileZoom)}function rh(w,n,u){return c.aO(w.transform,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const _f=(w,n,u,d,y)=>{return{u_tl_parent:w,u_scale_parent:n,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(A=d.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(T=d.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:xf(d.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var T,A};function xf(w){w*=Math.PI/180;const n=Math.sin(w),u=Math.cos(w);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const nh=(w,n,u,d,y,T,A,O,R,U,V,X,W)=>{const re=A.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:re.width/re.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:R,u_is_text:+V,u_pitch_with_map:+d,u_is_along_line:y,u_is_variable_anchor:T,u_texsize:X,u_texture:0,u_translation:U,u_pitched_scale:W}},bf=(w,n,u,d,y,T,A,O,R,U,V,X,W,re)=>{const oe=A.transform;return c.e(nh(w,n,u,d,y,T,A,O,R,U,V,X,re),{u_gamma_scale:d?Math.cos(oe.pitch*Math.PI/180)*oe.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:1})},Ya=(w,n,u,d,y,T,A,O,R,U,V,X,W)=>c.e(bf(w,n,u,d,y,T,A,O,R,U,!0,V,0,W),{u_texsize_icon:X,u_texture_icon:1}),ih=(w,n)=>({u_opacity:w,u_color:n}),ah=(w,n,u,d,y)=>c.e((function(T,A,O,R){const U=O.imageManager.getPattern(T.from.toString()),V=O.imageManager.getPattern(T.to.toString()),{width:X,height:W}=O.imageManager.getPixelSize(),re=Math.pow(2,R.tileID.overscaledZ),oe=R.tileSize*Math.pow(2,O.transform.tileZoom)/re,fe=oe*(R.tileID.canonical.x+R.tileID.wrap*re),me=oe*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[X,W],u_mix:A.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/c.aN(R,1,O.transform.tileZoom),u_pixel_coord_upper:[fe>>16,me>>16],u_pixel_coord_lower:[65535&fe,65535&me]}})(u,y,n,d),{u_opacity:w}),wf=(w,n)=>{},hm={fillExtrusion:(w,n)=>({u_lightpos:new c.c2(w,n.u_lightpos),u_lightpos_globe:new c.c2(w,n.u_lightpos_globe),u_lightintensity:new c.bq(w,n.u_lightintensity),u_lightcolor:new c.c2(w,n.u_lightcolor),u_vertical_gradient:new c.bq(w,n.u_vertical_gradient),u_opacity:new c.bq(w,n.u_opacity),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillExtrusionPattern:(w,n)=>({u_lightpos:new c.c2(w,n.u_lightpos),u_lightpos_globe:new c.c2(w,n.u_lightpos_globe),u_lightintensity:new c.bq(w,n.u_lightintensity),u_lightcolor:new c.c2(w,n.u_lightcolor),u_vertical_gradient:new c.bq(w,n.u_vertical_gradient),u_height_factor:new c.bq(w,n.u_height_factor),u_opacity:new c.bq(w,n.u_opacity),u_fill_translate:new c.c3(w,n.u_fill_translate),u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade)}),fill:(w,n)=>({u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillPattern:(w,n)=>({u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillOutline:(w,n)=>({u_world:new c.c3(w,n.u_world),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillOutlinePattern:(w,n)=>({u_world:new c.c3(w,n.u_world),u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade),u_fill_translate:new c.c3(w,n.u_fill_translate)}),circle:(w,n)=>({u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_scale_with_map:new c.b_(w,n.u_scale_with_map),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_extrude_scale:new c.c3(w,n.u_extrude_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_globe_extrude_scale:new c.bq(w,n.u_globe_extrude_scale),u_translate:new c.c3(w,n.u_translate)}),collisionBox:(w,n)=>({u_pixel_extrude_scale:new c.c3(w,n.u_pixel_extrude_scale)}),collisionCircle:(w,n)=>({u_viewport_size:new c.c3(w,n.u_viewport_size)}),debug:(w,n)=>({u_color:new c.b$(w,n.u_color),u_overlay:new c.b_(w,n.u_overlay),u_overlay_scale:new c.bq(w,n.u_overlay_scale)}),depth:wf,clippingMask:wf,heatmap:(w,n)=>({u_extrude_scale:new c.bq(w,n.u_extrude_scale),u_intensity:new c.bq(w,n.u_intensity),u_globe_extrude_scale:new c.bq(w,n.u_globe_extrude_scale)}),heatmapTexture:(w,n)=>({u_matrix:new c.c0(w,n.u_matrix),u_world:new c.c3(w,n.u_world),u_image:new c.b_(w,n.u_image),u_color_ramp:new c.b_(w,n.u_color_ramp),u_opacity:new c.bq(w,n.u_opacity)}),hillshade:(w,n)=>({u_image:new c.b_(w,n.u_image),u_latrange:new c.c3(w,n.u_latrange),u_exaggeration:new c.bq(w,n.u_exaggeration),u_altitudes:new c.c9(w,n.u_altitudes),u_azimuths:new c.c9(w,n.u_azimuths),u_accent:new c.b$(w,n.u_accent),u_method:new c.b_(w,n.u_method),u_shadows:new c.c8(w,n.u_shadows),u_highlights:new c.c8(w,n.u_highlights)}),hillshadePrepare:(w,n)=>({u_matrix:new c.c0(w,n.u_matrix),u_image:new c.b_(w,n.u_image),u_dimension:new c.c3(w,n.u_dimension),u_zoom:new c.bq(w,n.u_zoom),u_unpack:new c.c1(w,n.u_unpack)}),colorRelief:(w,n)=>({u_image:new c.b_(w,n.u_image),u_unpack:new c.c1(w,n.u_unpack),u_dimension:new c.c3(w,n.u_dimension),u_elevation_stops:new c.b_(w,n.u_elevation_stops),u_color_stops:new c.b_(w,n.u_color_stops),u_color_ramp_size:new c.b_(w,n.u_color_ramp_size),u_opacity:new c.bq(w,n.u_opacity)}),line:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels)}),lineGradient:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_image_height:new c.bq(w,n.u_image_height)}),linePattern:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_texsize:new c.c3(w,n.u_texsize),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_image:new c.b_(w,n.u_image),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade)}),lineSDF:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_mix:new c.bq(w,n.u_mix),u_tileratio:new c.bq(w,n.u_tileratio),u_crossfade_from:new c.bq(w,n.u_crossfade_from),u_crossfade_to:new c.bq(w,n.u_crossfade_to),u_lineatlas_width:new c.bq(w,n.u_lineatlas_width),u_lineatlas_height:new c.bq(w,n.u_lineatlas_height)}),lineGradientSDF:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_image_height:new c.bq(w,n.u_image_height),u_tileratio:new c.bq(w,n.u_tileratio),u_crossfade_from:new c.bq(w,n.u_crossfade_from),u_crossfade_to:new c.bq(w,n.u_crossfade_to),u_image_dash:new c.b_(w,n.u_image_dash),u_mix:new c.bq(w,n.u_mix),u_lineatlas_width:new c.bq(w,n.u_lineatlas_width),u_lineatlas_height:new c.bq(w,n.u_lineatlas_height)}),raster:(w,n)=>({u_tl_parent:new c.c3(w,n.u_tl_parent),u_scale_parent:new c.bq(w,n.u_scale_parent),u_buffer_scale:new c.bq(w,n.u_buffer_scale),u_fade_t:new c.bq(w,n.u_fade_t),u_opacity:new c.bq(w,n.u_opacity),u_image0:new c.b_(w,n.u_image0),u_image1:new c.b_(w,n.u_image1),u_brightness_low:new c.bq(w,n.u_brightness_low),u_brightness_high:new c.bq(w,n.u_brightness_high),u_saturation_factor:new c.bq(w,n.u_saturation_factor),u_contrast_factor:new c.bq(w,n.u_contrast_factor),u_spin_weights:new c.c2(w,n.u_spin_weights),u_coords_top:new c.c1(w,n.u_coords_top),u_coords_bottom:new c.c1(w,n.u_coords_bottom)}),symbolIcon:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texture:new c.b_(w,n.u_texture),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),symbolSDF:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texture:new c.b_(w,n.u_texture),u_gamma_scale:new c.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_is_halo:new c.b_(w,n.u_is_halo),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),symbolTextAndIcon:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texsize_icon:new c.c3(w,n.u_texsize_icon),u_texture:new c.b_(w,n.u_texture),u_texture_icon:new c.b_(w,n.u_texture_icon),u_gamma_scale:new c.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_is_halo:new c.b_(w,n.u_is_halo),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),background:(w,n)=>({u_opacity:new c.bq(w,n.u_opacity),u_color:new c.b$(w,n.u_color)}),backgroundPattern:(w,n)=>({u_opacity:new c.bq(w,n.u_opacity),u_image:new c.b_(w,n.u_image),u_pattern_tl_a:new c.c3(w,n.u_pattern_tl_a),u_pattern_br_a:new c.c3(w,n.u_pattern_br_a),u_pattern_tl_b:new c.c3(w,n.u_pattern_tl_b),u_pattern_br_b:new c.c3(w,n.u_pattern_br_b),u_texsize:new c.c3(w,n.u_texsize),u_mix:new c.bq(w,n.u_mix),u_pattern_size_a:new c.c3(w,n.u_pattern_size_a),u_pattern_size_b:new c.c3(w,n.u_pattern_size_b),u_scale_a:new c.bq(w,n.u_scale_a),u_scale_b:new c.bq(w,n.u_scale_b),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bq(w,n.u_tile_units_to_pixels)}),terrain:(w,n)=>({u_texture:new c.b_(w,n.u_texture),u_ele_delta:new c.bq(w,n.u_ele_delta),u_fog_matrix:new c.c0(w,n.u_fog_matrix),u_fog_color:new c.b$(w,n.u_fog_color),u_fog_ground_blend:new c.bq(w,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bq(w,n.u_fog_ground_blend_opacity),u_horizon_color:new c.b$(w,n.u_horizon_color),u_horizon_fog_blend:new c.bq(w,n.u_horizon_fog_blend),u_is_globe_mode:new c.bq(w,n.u_is_globe_mode)}),terrainDepth:(w,n)=>({u_ele_delta:new c.bq(w,n.u_ele_delta)}),terrainCoords:(w,n)=>({u_texture:new c.b_(w,n.u_texture),u_terrain_coords_id:new c.bq(w,n.u_terrain_coords_id),u_ele_delta:new c.bq(w,n.u_ele_delta)}),projectionErrorMeasurement:(w,n)=>({u_input:new c.bq(w,n.u_input),u_output_expected:new c.bq(w,n.u_output_expected)}),atmosphere:(w,n)=>({u_sun_pos:new c.c2(w,n.u_sun_pos),u_atmosphere_blend:new c.bq(w,n.u_atmosphere_blend),u_globe_position:new c.c2(w,n.u_globe_position),u_globe_radius:new c.bq(w,n.u_globe_radius),u_inv_proj_matrix:new c.c0(w,n.u_inv_proj_matrix)}),sky:(w,n)=>({u_sky_color:new c.b$(w,n.u_sky_color),u_horizon_color:new c.b$(w,n.u_horizon_color),u_horizon:new c.c3(w,n.u_horizon),u_horizon_normal:new c.c3(w,n.u_horizon_normal),u_sky_horizon_blend:new c.bq(w,n.u_sky_horizon_blend),u_sky_blend:new c.bq(w,n.u_sky_blend)})};class Xl{constructor(n,u,d){this.context=n;const y=n.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pd{constructor(n,u,d,y){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=y,this.context=n;const T=n.gl;this.buffer=T.createBuffer(),n.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let d=0;d<this.attributes.length;d++){const y=u.attributes[this.attributes[d].name];y!==void 0&&n.enableVertexAttribArray(y)}}setVertexAttribPointers(n,u,d){for(let y=0;y<this.attributes.length;y++){const T=this.attributes[y],A=u.attributes[T.name];A!==void 0&&n.vertexAttribPointer(A,T.components,n[Yl[T.type]],!1,this.itemSize,T.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ir{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Zo extends Ir{getDefault(){return c.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class oh extends Ir{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class sh extends Ir{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Sf extends Ir{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Kl extends Ir{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class lh extends Ir{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Qu extends Ir{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class wa extends Ir{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Dd extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class Tf extends Ir{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Sa extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class Ho extends Ir{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Fi extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class Ss extends Ir{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Ql extends Ir{getDefault(){return c.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Jl extends Ir{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class uh extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class ul extends Ir{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Ka extends Ir{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Od extends Ir{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Ju extends Ir{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class pr extends Ir{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ef extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Ta extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Af extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Ea extends Ir{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class fm extends Ir{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Mf extends Ir{getDefault(){return null}set(n){var u;if(n===this.current&&!this.dirty)return;const d=this.gl;Wa(d)?d.bindVertexArray(n):(u=d.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class cl extends Ir{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Id extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Cf extends Ir{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class hl extends Ir{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class ec extends hl{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Ui extends hl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class fl extends hl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const dl="Framebuffer is not complete";class eu{constructor(n,u,d,y,T){this.context=n,this.width=u,this.height=d;const A=n.gl,O=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new ec(n,O),y)this.depthAttachment=T?new fl(n,O):new Ui(n,O);else if(T)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error(dl)}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class pl{constructor(n){var u,d;if(this.gl=n,this.clearColor=new Zo(this),this.clearDepth=new oh(this),this.clearStencil=new sh(this),this.colorMask=new Sf(this),this.depthMask=new Kl(this),this.stencilMask=new lh(this),this.stencilFunc=new Qu(this),this.stencilOp=new wa(this),this.stencilTest=new Dd(this),this.depthRange=new Tf(this),this.depthTest=new Sa(this),this.depthFunc=new Ho(this),this.blend=new Fi(this),this.blendFunc=new Ss(this),this.blendColor=new Ql(this),this.blendEquation=new Jl(this),this.cullFace=new uh(this),this.cullFaceSide=new ul(this),this.frontFace=new Ka(this),this.program=new Od(this),this.activeTexture=new Ju(this),this.viewport=new pr(this),this.bindFramebuffer=new Ef(this),this.bindRenderbuffer=new Ta(this),this.bindTexture=new Af(this),this.bindVertexBuffer=new Ea(this),this.bindElementBuffer=new fm(this),this.bindVertexArray=new Mf(this),this.pixelStoreUnpack=new cl(this),this.pixelStoreUnpackPremultiplyAlpha=new Id(this),this.pixelStoreUnpackFlipY=new Cf(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Wa(n)){this.HALF_FLOAT=n.HALF_FLOAT;const y=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=n.RGBA16F)!==null&&u!==void 0?u:y?.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:y?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const y=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=y?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new Xl(this,n,u)}createVertexBuffer(n,u,d){return new Pd(this,n,u,d)}createRenderbuffer(n,u,d){const y=this.gl,T=y.createRenderbuffer();return this.bindRenderbuffer.set(T),y.renderbufferStorage(y.RENDERBUFFER,n,u,d),this.bindRenderbuffer.set(null),T}createFramebuffer(n,u,d,y){return new eu(this,n,u,d,y)}clear({color:n,depth:u,stencil:d}){const y=this.gl;let T=0;n&&(T|=y.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(T|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d!==void 0&&(T|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),y.clear(T)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.bR(n.blendFunction,Gr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Wa(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var u;return Wa(this.gl)?this.gl.deleteVertexArray(n):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let ai;function ui(w,n,u,d,y){const T=w.context,A=w.transform,O=T.gl,R=w.useProgram("collisionBox"),U=[];let V=0,X=0;for(let pe=0;pe<d.length;pe++){const xe=d[pe],Ae=n.getTile(xe).getBucket(u);if(!Ae)continue;const _e=y?Ae.textCollisionBox:Ae.iconCollisionBox,Ee=Ae.collisionCircleArray;Ee.length>0&&(U.push({circleArray:Ee,circleOffset:X,coord:xe}),V+=Ee.length/4,X=V),_e&&R.draw(T,O.LINES,fr.disabled,Er.disabled,w.colorModeForRenderPass(),br.disabled,ol(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(xe),A.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,_e.layoutVertexBuffer,_e.indexBuffer,_e.segments,null,w.transform.zoom,null,null,_e.collisionVertexBuffer)}if(!y||!U.length)return;const W=w.useProgram("collisionCircle"),re=new c.ca;re.resize(4*V),re._trim();let oe=0;for(const pe of U)for(let xe=0;xe<pe.circleArray.length/4;xe++){const Ae=4*xe,_e=pe.circleArray[Ae+0],Ee=pe.circleArray[Ae+1],Oe=pe.circleArray[Ae+2],we=pe.circleArray[Ae+3];re.emplace(oe++,_e,Ee,Oe,we,0),re.emplace(oe++,_e,Ee,Oe,we,1),re.emplace(oe++,_e,Ee,Oe,we,2),re.emplace(oe++,_e,Ee,Oe,we,3)}(!ai||ai.length<2*V)&&(ai=(function(pe){const xe=2*pe,Ae=new c.cc;Ae.resize(xe),Ae._trim();for(let _e=0;_e<xe;_e++){const Ee=6*_e;Ae.uint16[Ee+0]=4*_e+0,Ae.uint16[Ee+1]=4*_e+1,Ae.uint16[Ee+2]=4*_e+2,Ae.uint16[Ee+3]=4*_e+2,Ae.uint16[Ee+4]=4*_e+3,Ae.uint16[Ee+5]=4*_e+0}return Ae})(V));const fe=T.createIndexBuffer(ai,!0),me=T.createVertexBuffer(re,c.cb.members,!0);for(const pe of U){const xe=Ad(w.transform);W.draw(T,O.TRIANGLES,fr.disabled,Er.disabled,w.colorModeForRenderPass(),br.disabled,xe,w.style.map.terrain&&w.style.map.terrain.getTerrainData(pe.coord),null,u.id,me,fe,c.aX.simpleSegment(0,2*pe.circleOffset,pe.circleArray.length,pe.circleArray.length/2),null,w.transform.zoom,null,null,null)}me.destroy(),fe.destroy()}const Wo=c.ar(new Float32Array(16));function Xo(w,n,u,d,y,T){const{horizontalAlign:A,verticalAlign:O}=c.aS(w);return new c.P((-(A-.5)*n/y+d[0])*T,(-(O-.5)*u/y+d[1])*T)}function Yi(w,n,u,d,y,T){const A=n.tileAnchorPoint.add(new c.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let O=d.mult(T);u||(O=O.rotate(-y));const R=A.add(O);return hr(R.x,R.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(u){const O=Tr(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(w),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return w.add(d.rotate(R))}return w.add(d)}function Ts(w,n,u,d,y,T,A,O,R,U,V,X){const W=w.text.placedSymbolArray,re=w.text.dynamicLayoutVertexArray,oe=w.icon.dynamicLayoutVertexArray,fe={};re.clear();for(let me=0;me<W.length;me++){const pe=W.get(me),xe=pe.hidden||!pe.crossTileID||w.allowVerticalPlacement&&!pe.placedOrientation?null:d[pe.crossTileID];if(xe){const Ae=new c.P(pe.anchorX,pe.anchorY),_e={getElevation:X,width:y.width,height:y.height,pitchedLabelPlaneMatrix:T,pitchWithMap:u,transform:y,tileAnchorPoint:Ae,translation:U,unwrappedTileID:V},Ee=u?Fu(Ae.x,Ae.y,_e):Tr(Ae.x,Ae.y,_e),Oe=Bl(y.cameraToCenterDistance,Ee.signedDistanceFromCamera);let we=c.aA(w.textSizeData,O,pe)*Oe/c.aM;u&&(we*=w.tilePixelRatio/A);const{width:je,height:et,anchor:Xe,textOffset:Ke,textBoxScale:Qe}=xe,Ct=Xo(Xe,je,et,Ke,Qe,we),Pt=y.getPitchedTextCorrection(Ae.x+U[0],Ae.y+U[1],V),yt=Yi(Ee.point,_e,n,Ct,-y.bearingInRadians,Pt),It=w.allowVerticalPlacement&&pe.placedOrientation===c.az.vertical?Math.PI/2:0;for(let sr=0;sr<pe.numGlyphs;sr++)c.aG(re,yt,It);R&&pe.associatedIconIndex>=0&&(fe[pe.associatedIconIndex]={shiftedAnchor:yt,angle:It})}else qo(pe.numGlyphs,re)}if(R){oe.clear();const me=w.icon.placedSymbolArray;for(let pe=0;pe<me.length;pe++){const xe=me.get(pe);if(xe.hidden)qo(xe.numGlyphs,oe);else{const Ae=fe[pe];if(Ae)for(let _e=0;_e<xe.numGlyphs;_e++)c.aG(oe,Ae.shiftedAnchor,Ae.angle);else qo(xe.numGlyphs,oe)}}w.icon.dynamicLayoutVertexBuffer.updateData(oe)}w.text.dynamicLayoutVertexBuffer.updateData(re)}function zd(w,n,u){return u.iconsInText&&n?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function tu(w,n,u,d,y,T,A,O,R,U,V,X,W){const re=w.context,oe=re.gl,fe=w.transform,me=O==="map",pe=R==="map",xe=O!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ae=me&&!pe&&!xe,_e=!u.layout.get("symbol-sort-key").isConstant();let Ee=!1;const Oe=w.getDepthModeForSublayer(0,fr.ReadOnly),we=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),je=[],et=fe.getCircleRadiusCorrection();for(const Xe of d){const Ke=n.getTile(Xe),Qe=Ke.getBucket(u);if(!Qe)continue;const Ct=y?Qe.text:Qe.icon;if(!Ct||!Ct.segments.get().length||!Ct.hasVisibleVertices)continue;const Pt=Ct.programConfigurations.get(u.id),yt=y||Qe.sdfIcons,It=y?Qe.textSizeData:Qe.iconSizeData,sr=pe||fe.pitch!==0,jr=w.useProgram(zd(yt,y,Qe),Pt),rn=c.ay(It,fe.zoom),Kr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Xe);let un,$r,Sn,cn,hi=[0,0],In=null;if(y)$r=Ke.glyphAtlasTexture,Sn=oe.LINEAR,un=Ke.glyphAtlasTexture.size,Qe.iconsInText&&(hi=Ke.imageAtlasTexture.size,In=Ke.imageAtlasTexture,cn=sr||w.options.rotating||w.options.zooming||It.kind==="composite"||It.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const Vr=u.layout.get("icon-size").constantOr(0)!==1||Qe.iconsNeedLinear;$r=Ke.imageAtlasTexture,Sn=yt||w.options.rotating||w.options.zooming||Vr||sr?oe.LINEAR:oe.NEAREST,un=Ke.imageAtlasTexture.size}const zn=c.aN(Ke,1,w.transform.zoom),fi=_a(me,w.transform,zn),ls=c.N();c.aB(ls,fi);const us=hf(pe,me,w.transform,zn),Ao=c.aO(fe,Ke,T,A),ea=fe.getProjectionData({overscaledTileID:Xe,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),cu=we&&Qe.hasTextData(),cc=u.layout.get("icon-text-fit")!=="none"&&cu&&Qe.hasIconData();if(xe){const Vr=w.style.map.terrain?(Gn,Kn)=>w.style.map.terrain.getElevation(Xe,Gn,Kn):null,Qr=u.layout.get("text-rotation-alignment")==="map";xs(Qe,w,y,fi,ls,pe,U,Qr,Xe.toUnwrapped(),fe.width,fe.height,Ao,Vr)}const Mo=y&&we||cc,ta=xe||Mo?Wo:pe?fi:w.transform.clipSpaceToPixelsMatrix,Da=yt&&u.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let no;no=yt?Qe.iconsInText?Ya(It.kind,rn,Ae,pe,xe,Mo,w,ta,us,Ao,un,hi,et):bf(It.kind,rn,Ae,pe,xe,Mo,w,ta,us,Ao,y,un,0,et):nh(It.kind,rn,Ae,pe,xe,Mo,w,ta,us,Ao,y,un,et);const io={program:jr,buffers:Ct,uniformValues:no,projectionData:ea,atlasTexture:$r,atlasTextureIcon:In,atlasInterpolation:Sn,atlasInterpolationIcon:cn,isSDF:yt,hasHalo:Da};if(_e&&Qe.canOverlap){Ee=!0;const Vr=Ct.segments.get();for(const Qr of Vr)je.push({segments:new c.aX([Qr]),sortKey:Qr.sortKey,state:io,terrainData:Kr})}else je.push({segments:Ct.segments,sortKey:0,state:io,terrainData:Kr})}Ee&&je.sort(((Xe,Ke)=>Xe.sortKey-Ke.sortKey));for(const Xe of je){const Ke=Xe.state;if(re.activeTexture.set(oe.TEXTURE0),Ke.atlasTexture.bind(Ke.atlasInterpolation,oe.CLAMP_TO_EDGE),Ke.atlasTextureIcon&&(re.activeTexture.set(oe.TEXTURE1),Ke.atlasTextureIcon&&Ke.atlasTextureIcon.bind(Ke.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),Ke.isSDF){const Qe=Ke.uniformValues;Ke.hasHalo&&(Qe.u_is_halo=1,tc(Ke.buffers,Xe.segments,u,w,Ke.program,Oe,V,X,Qe,Ke.projectionData,Xe.terrainData)),Qe.u_is_halo=0}tc(Ke.buffers,Xe.segments,u,w,Ke.program,Oe,V,X,Ke.uniformValues,Ke.projectionData,Xe.terrainData)}}function tc(w,n,u,d,y,T,A,O,R,U,V){const X=d.context;y.draw(X,X.gl.TRIANGLES,T,A,O,br.backCCW,R,V,U,u.id,w.layoutVertexBuffer,w.indexBuffer,n,u.paint,d.transform.zoom,w.programConfigurations.get(u.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function kd(w,n,u,d,y){const T=w.context,A=T.gl,O=Er.disabled,R=new Gr([A.ONE,A.ONE],c.bp.transparent,[!0,!0,!0,!0]),U=n.getBucket(u);if(!U)return;const V=d.key;let X=u.heatmapFbos.get(V);X||(X=Yr(T,n.tileSize,n.tileSize),u.heatmapFbos.set(V,X)),T.bindFramebuffer.set(X.framebuffer),T.viewport.set([0,0,n.tileSize,n.tileSize]),T.clear({color:c.bp.transparent});const W=U.programConfigurations.get(u.id),re=w.useProgram("heatmap",W,!y),oe=w.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),fe=w.style.map.terrain.getTerrainData(d);re.draw(T,A.TRIANGLES,fr.disabled,O,R,br.disabled,sl(n,w.transform.zoom,u.paint.get("heatmap-intensity"),1),fe,oe,u.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,u.paint,w.transform.zoom,W)}function ci(w,n,u,d,y){const T=w.context,A=T.gl,O=w.transform;T.setColorMode(w.colorModeForRenderPass());const R=Sr(T,n),U=u.key,V=n.heatmapFbos.get(U);if(!V)return;T.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,V.colorAttachment.get()),T.activeTexture.set(A.TEXTURE1),R.bind(A.LINEAR,A.CLAMP_TO_EDGE);const X=O.getProjectionData({overscaledTileID:u,applyTerrainMatrix:y,applyGlobeMatrix:!d});w.useProgram("heatmapTexture").draw(T,A.TRIANGLES,fr.disabled,Er.disabled,w.colorModeForRenderPass(),br.disabled,Md(w,n,0,1),null,X,n.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,n.paint,O.zoom),V.destroy(),n.heatmapFbos.delete(U)}function Yr(w,n,u){var d,y;const T=w.gl,A=T.createTexture();T.bindTexture(T.TEXTURE_2D,A),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const O=(d=w.HALF_FLOAT)!==null&&d!==void 0?d:T.UNSIGNED_BYTE,R=(y=w.RGBA16F)!==null&&y!==void 0?y:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,R,n,u,0,T.RGBA,O,null);const U=w.createFramebuffer(n,u,!1,!1);return U.colorAttachment.set(A),U}function Sr(w,n){return n.colorRampTexture||(n.colorRampTexture=new c.T(w,n.colorRamp,w.gl.RGBA)),n.colorRampTexture}function Es(w,n,u,d,y,T,A,O){let R=256;if(y.stepInterpolant){const U=n.getSource().maxzoom,V=A.canonical.z===U?Math.ceil(1<<w.transform.maxZoom-A.canonical.z):1;R=c.an(c.ce(T.maxLineLength/c.a5*1024*V),256,u.maxTextureSize)}return O.gradient=c.cf({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:O.gradient||void 0,clips:T.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new c.T(u,O.gradient,d.RGBA),O.version=y.gradientVersion,O.texture}function Aa(w,n,u,d,y){w.activeTexture.set(n.TEXTURE0),u.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),d.updatePaintBuffers(y)}function bn(w,n,u,d,y,T){(y||w.lineAtlas.dirty)&&(n.activeTexture.set(u.TEXTURE0),w.lineAtlas.bind(n)),d.updatePaintBuffers(T)}function Ki(w,n,u,d,y,T,A){const O=T.gradients[y.id];let R=O.texture;y.gradientVersion!==O.version&&(R=Es(w,n,u,d,y,T,A,O)),u.activeTexture.set(d.TEXTURE0),R.bind(y.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE)}function Qi(w,n,u,d,y,T,A,O,R){const U=T.gradients[y.id];let V=U.texture;y.gradientVersion!==U.version&&(V=Es(w,n,u,d,y,T,A,U)),u.activeTexture.set(d.TEXTURE0),V.bind(y.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE),u.activeTexture.set(d.TEXTURE1),w.lineAtlas.bind(u),O.updatePaintBuffers(R)}function ch(w,n,u,d,y){if(!u||!d||!d.imageAtlas)return;const T=d.imageAtlas.patternPositions;let A=T[u.to.toString()],O=T[u.from.toString()];if(!A&&O&&(A=O),!O&&A&&(O=A),!A||!O){const R=y.getPaintProperty(n);A=T[R],O=T[R]}A&&O&&w.setConstantPatternPositions(A,O)}function Yo(w,n,u,d,y,T,A,O){const R=w.context.gl,U="fill-pattern",V=u.paint.get(U),X=V&&V.constantOr(1),W=u.getCrossfadeParameters();let re,oe,fe,me,pe;const xe=w.transform,Ae=u.paint.get("fill-translate"),_e=u.paint.get("fill-translate-anchor");A?(oe=X&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",re=R.LINES):(oe=X?"fillPattern":"fill",re=R.TRIANGLES);const Ee=V.constantOr(null);for(const Oe of d){const we=n.getTile(Oe);if(X&&!we.patternsLoaded())continue;const je=we.getBucket(u);if(!je)continue;const et=je.programConfigurations.get(u.id),Xe=w.useProgram(oe,et),Ke=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Oe);X&&(w.context.activeTexture.set(R.TEXTURE0),we.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),et.updatePaintBuffers(W)),ch(et,U,Ee,we,u);const Qe=xe.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Ct=c.aO(xe,we,Ae,_e);if(A){me=je.indexBuffer2,pe=je.segments2;const yt=[R.drawingBufferWidth,R.drawingBufferHeight];fe=oe==="fillOutlinePattern"&&X?sm(w,W,we,yt,Ct):Ku(yt,Ct)}else me=je.indexBuffer,pe=je.segments,fe=X?Wl(w,W,we,Ct):{u_fill_translate:Ct};const Pt=w.stencilModeForClipping(Oe);Xe.draw(w.context,re,y,Pt,T,br.backCCW,fe,Ke,Qe,u.id,je.layoutVertexBuffer,me,pe,u.paint,w.transform.zoom,et)}}function Ko(w,n,u,d,y,T,A,O){const R=w.context,U=R.gl,V="fill-extrusion-pattern",X=u.paint.get(V),W=X.constantOr(1),re=u.getCrossfadeParameters(),oe=u.paint.get("fill-extrusion-opacity"),fe=X.constantOr(null),me=w.transform;for(const pe of d){const xe=n.getTile(pe),Ae=xe.getBucket(u);if(!Ae)continue;const _e=w.style.map.terrain&&w.style.map.terrain.getTerrainData(pe),Ee=Ae.programConfigurations.get(u.id),Oe=w.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Ee);W&&(w.context.activeTexture.set(U.TEXTURE0),xe.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Ee.updatePaintBuffers(re));const we=me.getProjectionData({overscaledTileID:pe,applyGlobeMatrix:!O,applyTerrainMatrix:!0});ch(Ee,V,fe,xe,u);const je=c.aO(me,xe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),et=u.paint.get("fill-extrusion-vertical-gradient"),Xe=W?vf(w,et,oe,je,pe,re,xe):yf(w,et,oe,je);Oe.draw(R,R.gl.TRIANGLES,y,T,A,br.backCCW,Xe,_e,we,u.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,u.paint,w.transform.zoom,Ee,w.style.map.terrain&&Ae.centroidVertexBuffer)}}function Qo(w,n,u,d,y,T,A,O,R){var U;const V=w.style.projection,X=w.context,W=w.transform,re=X.gl,oe=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],fe=w.useProgram("hillshade",null,!1,oe),me=!w.options.moving;for(const pe of d){const xe=n.getTile(pe),Ae=xe.fbo;if(!Ae)continue;const _e=V.getMeshFromTileID(X,pe.canonical,O,!0,"raster"),Ee=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(pe);X.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,Ae.colorAttachment.get());const Oe=W.getProjectionData({overscaledTileID:pe,aligned:me,applyGlobeMatrix:!R,applyTerrainMatrix:!0});fe.draw(X,re.TRIANGLES,T,y[pe.overscaledZ],A,br.backCCW,eh(w,xe,u),Ee,Oe,u.id,_e.vertexBuffer,_e.indexBuffer,_e.segments)}}function As(w,n,u,d,y,T,A,O,R){var U;const V=w.style.projection,X=w.context,W=w.transform,re=X.gl,oe=w.useProgram("colorRelief"),fe=!w.options.moving;let me=!0,pe=0;for(const xe of d){const Ae=n.getTile(xe),_e=Ae.dem;if(me){const Xe=re.getParameter(re.MAX_TEXTURE_SIZE),{elevationTexture:Ke,colorTexture:Qe}=u.getColorRampTextures(X,Xe,_e.getUnpackVector());X.activeTexture.set(re.TEXTURE1),Ke.bind(re.NEAREST,re.CLAMP_TO_EDGE),X.activeTexture.set(re.TEXTURE4),Qe.bind(re.LINEAR,re.CLAMP_TO_EDGE),me=!1,pe=Ke.size[0]}if(!_e||!_e.data)continue;const Ee=_e.stride,Oe=_e.getPixels();if(X.activeTexture.set(re.TEXTURE0),X.pixelStoreUnpackPremultiplyAlpha.set(!1),Ae.demTexture=Ae.demTexture||w.getTileTexture(Ee),Ae.demTexture){const Xe=Ae.demTexture;Xe.update(Oe,{premultiply:!1}),Xe.bind(re.LINEAR,re.CLAMP_TO_EDGE)}else Ae.demTexture=new c.T(X,Oe,re.RGBA,{premultiply:!1}),Ae.demTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const we=V.getMeshFromTileID(X,xe.canonical,O,!0,"raster"),je=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(xe),et=W.getProjectionData({overscaledTileID:xe,aligned:fe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});oe.draw(X,re.TRIANGLES,T,y[xe.overscaledZ],A,br.backCCW,um(u,Ae.dem,pe),je,et,u.id,we.vertexBuffer,we.indexBuffer,we.segments)}}const Ms=[new c.P(0,0),new c.P(c.a5,0),new c.P(c.a5,c.a5),new c.P(0,c.a5)];function Qa(w,n,u,d,y,T,A,O,R=!1,U=!1){const V=d[d.length-1].overscaledZ,X=w.context,W=X.gl,re=w.useProgram("raster"),oe=w.transform,fe=w.style.projection,me=w.colorModeForRenderPass(),pe=!w.options.moving,xe=u.paint.get("raster-opacity"),Ae=u.paint.get("raster-resampling"),_e=u.paint.get("raster-fade-duration"),Ee=!!w.style.map.terrain;for(const Oe of d){const we=w.getDepthModeForSublayer(Oe.overscaledZ-V,xe===1?fr.ReadWrite:fr.ReadOnly,W.LESS),je=n.getTile(Oe),et=Ae==="nearest"?W.NEAREST:W.LINEAR;X.activeTexture.set(W.TEXTURE0),je.texture.bind(et,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),X.activeTexture.set(W.TEXTURE1);const{parentTile:Xe,parentScaleBy:Ke,parentTopLeft:Qe,fadeValues:Ct}=Jo(je,n,_e,Ee);je.fadeOpacity=Ct.tileOpacity,Xe?(Xe.fadeOpacity=Ct.parentTileOpacity,Xe.texture.bind(et,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST)):je.texture.bind(et,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),je.texture.useMipmap&&X.extTextureFilterAnisotropic&&w.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const Pt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Oe),yt=oe.getProjectionData({overscaledTileID:Oe,aligned:pe,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),It=_f(Qe,Ke,Ct.fadeMix,u,O),sr=fe.getMeshFromTileID(X,Oe.canonical,T,A,"raster");re.draw(X,W.TRIANGLES,we,y?y[Oe.overscaledZ]:Er.disabled,me,R?br.frontCCW:br.backCCW,It,Pt,yt,u.id,sr.vertexBuffer,sr.indexBuffer,sr.segments)}}function Jo(w,n,u,d){const y={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||d)return y;if(w.fadingParentID){const T=n.getLoadedTile(w.fadingParentID);if(!T)return y;const A=Math.pow(2,T.tileID.overscaledZ-w.tileID.overscaledZ),O=[w.tileID.canonical.x*A%1,w.tileID.canonical.y*A%1],R=(function(U,V,X){const W=K(),re=(W-V.timeAdded)/X,oe=U.fadingDirection===be.Incoming,fe=c.an((W-U.timeAdded)/X,0,1),me=c.an(1-re,0,1),pe=oe?fe:me;return{tileOpacity:pe,parentTileOpacity:oe?me:fe,fadeMix:{opacity:1,mix:1-pe}}})(w,T,u);return{parentTile:T,parentScaleBy:A,parentTopLeft:O,fadeValues:R}}if(w.selfFading){const T=(function(A,O){const R=(K()-A.timeAdded)/O,U=c.an(R,0,1);return{tileOpacity:U,fadeMix:{opacity:U,mix:0}}})(w,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return y}const Cs=new c.bp(1,0,0,1),es=new c.bp(0,1,0,1),Pf=new c.bp(0,0,1,1),Df=new c.bp(1,0,1,1),Ma=new c.bp(0,1,1,1);function rc(w,n,u,d){qn(w,0,n+u/2,w.transform.width,u,d)}function Ps(w,n,u,d){qn(w,n-u/2,0,u,w.transform.height,d)}function qn(w,n,u,d,y,T){const A=w.context,O=A.gl;O.enable(O.SCISSOR_TEST),O.scissor(n*w.pixelRatio,u*w.pixelRatio,d*w.pixelRatio,y*w.pixelRatio),A.clear({color:T}),O.disable(O.SCISSOR_TEST)}function hh(w,n,u){const d=w.context,y=d.gl,T=w.useProgram("debug"),A=fr.disabled,O=Er.disabled,R=w.colorModeForRenderPass(),U="$debug",V=w.style.map.terrain&&w.style.map.terrain.getTerrainData(u);d.activeTexture.set(y.TEXTURE0);const X=n.getTileByID(u.key).latestRawTileData,W=Math.floor((X&&X.byteLength||0)/1024),re=n.getTile(u).tileSize,oe=512/Math.min(re,512)*(u.overscaledZ/w.transform.zoom)*.5;let fe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(fe+=` => ${u.overscaledZ}`),(function(pe,xe){pe.initDebugOverlayCanvas();const Ae=pe.debugOverlayCanvas,_e=pe.context.gl,Ee=pe.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,Ae.width,Ae.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(xe,5,5),Ee.strokeText(xe,5,5),pe.debugOverlayTexture.update(Ae),pe.debugOverlayTexture.bind(_e.LINEAR,_e.CLAMP_TO_EDGE)})(w,`${fe} ${W}kB`);const me=w.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(d,y.TRIANGLES,A,O,Gr.alphaBlended,br.disabled,Jc(c.bp.transparent,oe),null,me,U,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),T.draw(d,y.LINE_STRIP,A,O,R,br.disabled,Jc(c.bp.red),V,me,U,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Of(w,n,u,d){const{isRenderingGlobe:y}=d,T=w.context,A=T.gl,O=w.transform,R=w.colorModeForRenderPass(),U=w.getDepthModeFor3D(),V=w.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,w.width,w.height]);for(const X of u){const W=n.getTerrainMesh(X.tileID),re=w.renderToTexture.getTexture(X),oe=n.getTerrainData(X.tileID);T.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,re.texture);const fe=n.getMeshFrameDelta(O.zoom),me=O.calculateFogMatrix(X.tileID.toUnwrapped()),pe=im(fe,me,w.style.sky,O.pitch,y),xe=O.getProjectionData({overscaledTileID:X.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(T,A.TRIANGLES,U,Er.disabled,R,br.backCCW,pe,oe,xe,"terrain",W.vertexBuffer,W.indexBuffer,W.segments)}}function Rd(w,n){if(!n.mesh){const u=new c.aW;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const d=new c.aY;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),n.mesh=new Xr(w.createVertexBuffer(u,Ha.members),w.createIndexBuffer(d),c.aX.simpleSegment(0,0,u.length,d.length))}return n.mesh}class dm{constructor(n,u){this.context=new pl(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Fr.maxOverzooming+Fr.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ni}resize(n,u,d){if(this.width=Math.floor(n*d),this.height=Math.floor(u*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const n=this.context,u=new c.aW;u.emplaceBack(0,0),u.emplaceBack(c.a5,0),u.emplaceBack(0,c.a5),u.emplaceBack(c.a5,c.a5),this.tileExtentBuffer=n.createVertexBuffer(u,Ha.members),this.tileExtentSegments=c.aX.simpleSegment(0,0,4,2);const d=new c.aW;d.emplaceBack(0,0),d.emplaceBack(c.a5,0),d.emplaceBack(0,c.a5),d.emplaceBack(c.a5,c.a5),this.debugBuffer=n.createVertexBuffer(d,Ha.members),this.debugSegments=c.aX.simpleSegment(0,0,4,5);const y=new c.ch;y.emplaceBack(0,0,0,0),y.emplaceBack(c.a5,0,c.a5,0),y.emplaceBack(0,c.a5,0,c.a5),y.emplaceBack(c.a5,c.a5,c.a5,c.a5),this.rasterBoundsBuffer=n.createVertexBuffer(y,nm.members),this.rasterBoundsSegments=c.aX.simpleSegment(0,0,4,2);const T=new c.aW;T.emplaceBack(0,0),T.emplaceBack(c.a5,0),T.emplaceBack(0,c.a5),T.emplaceBack(c.a5,c.a5),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(T,Ha.members),this.rasterBoundsSegmentsPosOnly=c.aX.simpleSegment(0,0,4,5);const A=new c.aW;A.emplaceBack(0,0),A.emplaceBack(1,0),A.emplaceBack(0,1),A.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(A,Ha.members),this.viewportSegments=c.aX.simpleSegment(0,0,4,2);const O=new c.ci;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(O);const R=new c.aY;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(R);const U=this.context.gl;this.stencilClearMode=new Er({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.tileExtentMesh=new Xr(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.N();c.c7(d,0,this.width,this.height,0,0,1),c.Q(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const y={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(n,u.TRIANGLES,fr.disabled,this.stencilClearMode,Gr.disabled,br.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u,d){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source,this.nextStencilID+u.length>256&&this.clearStencil();const y=this.context;y.setColorMode(Gr.disabled),y.setDepthMode(fr.disabled);const T={};for(const A of u)T[A.key]=this.nextStencilID++;this._renderTileMasks(T,u,d,!0),this._renderTileMasks(T,u,d,!1),this._tileClippingMaskIDs=T}_renderTileMasks(n,u,d,y){const T=this.context,A=T.gl,O=this.style.projection,R=this.transform,U=this.useProgram("clippingMask");for(const V of u){const X=n[V.key],W=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),re=O.getMeshFromTileID(this.context,V.canonical,y,!0,"stencil"),oe=R.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!d,applyTerrainMatrix:!0});U.draw(T,A.TRIANGLES,fr.disabled,new Er({func:A.ALWAYS,mask:0},X,255,A.KEEP,A.KEEP,A.REPLACE),Gr.disabled,d?br.disabled:br.backCCW,null,W,oe,"$clipping",re.vertexBuffer,re.indexBuffer,re.segments)}}_renderTilesDepthBuffer(){const n=this.context,u=n.gl,d=this.style.projection,y=this.transform,T=this.useProgram("depth"),A=this.getDepthModeFor3D(),O=hn(y,{tileSize:y.tileSize});for(const R of O){const U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),V=d.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),X=y.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(n,u.TRIANGLES,A,Er.disabled,Gr.disabled,br.backCCW,null,U,X,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new Er({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new Er({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const u=this.context.gl,d=n.sort(((A,O)=>O.overscaledZ-A.overscaledZ)),y=d[d.length-1].overscaledZ,T=d[0].overscaledZ-y+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const A={};for(let O=0;O<T;O++)A[O+y]=new Er({func:u.GEQUAL,mask:255},O+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=T,[A,d]}return[{[y]:Er.disabled},d]}stencilConfigForOverlapTwoPass(n){const u=this.context.gl,d=n.sort(((A,O)=>O.overscaledZ-A.overscaledZ)),y=d[d.length-1].overscaledZ,T=d[0].overscaledZ-y+1;if(this.clearStencil(),T>1){const A={},O={};for(let R=0;R<T;R++)A[R+y]=new Er({func:u.GREATER,mask:255},T+1+R,255,u.KEEP,u.KEEP,u.REPLACE),O[R+y]=new Er({func:u.GREATER,mask:255},1+R,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*T+1,[A,O,d]}return this.nextStencilID=3,[{[y]:new Er({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[y]:new Er({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Gr([n.CONSTANT_COLOR,n.ONE],new c.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Gr.unblended:Gr.alphaBlended}getDepthModeForSublayer(n,u,d){if(!this.opaquePassEnabledForLayer())return fr.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new fr(d||this.context.gl.LEQUAL,u,[y,y])}getDepthModeFor3D(){return new fr(this.context.gl.LEQUAL,fr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){var d,y;this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(K()),this.imageManager.beginFrame();const T=this.style._order,A=this.style.tileManagers,O={},R={},U={},V={isRenderingToTexture:!1,isRenderingGlobe:((d=n.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const W in A){const re=A[W];re.used&&re.prepare(this.context),O[W]=re.getVisibleCoordinates(!1),R[W]=O[W].slice().reverse(),U[W]=re.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<T.length;W++)if(this.style._layers[T[W]].is3D()){this.opaquePassCutoff=W;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const W of T){const re=this.style._layers[W];if(!re.hasOffscreenPass()||re.isHidden(this.transform.zoom))continue;const oe=R[re.source];(re.type==="custom"||oe.length)&&this.renderLayer(this,A[re.source],re,oe,V)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:W=>this.useProgram(W)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.bp.black:c.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(W,re){const oe=W.context,fe=oe.gl,me=((Oe,we,je)=>{const et=Math.cos(we.rollInRadians),Xe=Math.sin(we.rollInRadians),Ke=vt(we),Qe=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Oe.properties.get("sky-color"),u_horizon_color:Oe.properties.get("horizon-color"),u_horizon:[(we.width/2-Ke*Xe)*je,(we.height/2+Ke*et)*je],u_horizon_normal:[-Xe,et],u_sky_horizon_blend:Oe.properties.get("sky-horizon-blend")*we.height/2*je,u_sky_blend:Qe}})(re,W.style.map.transform,W.pixelRatio),pe=new fr(fe.LEQUAL,fr.ReadWrite,[0,1]),xe=Er.disabled,Ae=W.colorModeForRenderPass(),_e=W.useProgram("sky"),Ee=Rd(oe,re);_e.draw(oe,fe.TRIANGLES,pe,xe,Ae,br.disabled,me,null,void 0,"sky",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const W=this.style._layers[T[this.currentLayer]],re=A[W.source],oe=O[W.source];this._renderTileClippingMasks(W,oe,!1),this.renderLayer(this,re,W,oe,V)}this.renderPass="translucent";let X=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const W=this.style._layers[T[this.currentLayer]],re=A[W.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(W,V))continue;this.opaquePassEnabledForLayer()||X||(X=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const oe=(W.type==="symbol"?U:R)[W.source];this._renderTileClippingMasks(W,O[W.source],!!this.renderToTexture),this.renderLayer(this,re,W,oe,V)}if(V.isRenderingGlobe&&(function(W,re,oe){const fe=W.context,me=fe.gl,pe=W.useProgram("atmosphere"),xe=new fr(me.LEQUAL,fr.ReadOnly,[0,1]),Ae=W.transform,_e=(function(Qe,Ct){const Pt=Qe.properties.get("position"),yt=[-Pt.x,-Pt.y,-Pt.z],It=c.ar(new Float64Array(16));return Qe.properties.get("anchor")==="map"&&(c.bg(It,It,Ct.rollInRadians),c.bh(It,It,-Ct.pitchInRadians),c.bg(It,It,Ct.bearingInRadians),c.bh(It,It,Ct.center.lat*Math.PI/180),c.bJ(It,It,-Ct.center.lng*Math.PI/180)),c.cg(yt,yt,It),yt})(oe,W.transform),Ee=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Oe=re.properties.get("atmosphere-blend")*Ee.projectionTransition;if(Oe===0)return;const we=Hl(Ae.worldSize,Ae.center.lat),je=Ae.inverseProjectionMatrix,et=new Float64Array(4);et[3]=1,c.aH(et,et,Ae.modelViewProjectionMatrix),et[0]/=et[3],et[1]/=et[3],et[2]/=et[3],et[3]=1,c.aH(et,et,je),et[0]/=et[3],et[1]/=et[3],et[2]/=et[3],et[3]=1;const Xe=((Qe,Ct,Pt,yt,It)=>({u_sun_pos:Qe,u_atmosphere_blend:Ct,u_globe_position:Pt,u_globe_radius:yt,u_inv_proj_matrix:It}))(_e,Oe,[et[0],et[1],et[2]],we,je),Ke=Rd(fe,re);pe.draw(fe,me.TRIANGLES,xe,Er.disabled,Gr.alphaBlended,br.disabled,Xe,null,null,"atmosphere",Ke.vertexBuffer,Ke.indexBuffer,Ke.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const W=(function(re,oe){let fe=null;const me=Object.values(re._layers).flatMap((_e=>_e.source&&!_e.isHidden(oe)?[re.tileManagers[_e.source]]:[])),pe=me.filter((_e=>_e.getSource().type==="vector")),xe=me.filter((_e=>_e.getSource().type!=="vector")),Ae=_e=>{(!fe||fe.getSource().maxzoom<_e.getSource().maxzoom)&&(fe=_e)};return pe.forEach((_e=>Ae(_e))),fe||xe.forEach((_e=>Ae(_e))),fe})(this.style,this.transform.zoom);W&&(function(re,oe,fe){for(let me=0;me<fe.length;me++)hh(re,oe,fe[me])})(this,W,W.getVisibleCoordinates())}this.options.showPadding&&(function(W){const re=W.transform.padding;rc(W,W.transform.height-(re.top||0),3,Cs),rc(W,re.bottom||0,3,es),Ps(W,re.left||0,3,Pf),Ps(W,W.transform.width-(re.right||0),3,Df);const oe=W.transform.centerPoint;(function(fe,me,pe,xe){qn(fe,me-1,pe-10,2,20,xe),qn(fe,me-10,pe-1,20,2,xe)})(W,oe.x,W.transform.height-oe.y,Ma)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=n?!c.cj(u,d):!c.ck(u,d)),y||(y=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(c.cl(u,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(T,A){const O=T.context,R=O.gl,U=T.transform,V=Gr.unblended,X=new fr(R.LEQUAL,fr.ReadWrite,[0,1]),W=A.tileManager.getRenderableTiles(),re=T.useProgram("terrainDepth");O.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:c.bp.transparent,depth:1});for(const oe of W){const fe=A.getTerrainMesh(oe.tileID),me=A.getTerrainData(oe.tileID),pe=U.getProjectionData({overscaledTileID:oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),xe={u_ele_delta:A.getMeshFrameDelta(U.zoom)};re.draw(O,R.TRIANGLES,X,Er.disabled,V,br.backCCW,xe,me,pe,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain),(function(T,A){const O=T.context,R=O.gl,U=T.transform,V=Gr.unblended,X=new fr(R.LEQUAL,fr.ReadWrite,[0,1]),W=A.getCoordsTexture(),re=A.tileManager.getRenderableTiles(),oe=T.useProgram("terrainCoords");O.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:c.bp.transparent,depth:1}),A.coordsIndex=[];for(const fe of re){const me=A.getTerrainMesh(fe.tileID),pe=A.getTerrainData(fe.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,W.texture);const xe={u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(U.zoom)},Ae=U.getProjectionData({overscaledTileID:fe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});oe.draw(O,R.TRIANGLES,X,Er.disabled,V,br.backCCW,xe,pe,Ae,"terrain",me.vertexBuffer,me.indexBuffer,me.segments),A.coordsIndex.push(fe.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain))}renderLayer(n,u,d,y,T){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(y||[]).length)&&(this.id=d.id,c.cm(d)?(function(A,O,R,U,V,X){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:W}=X,re=Er.disabled,oe=A.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(fe,me,pe,xe,Ae,_e,Ee,Oe,we){const je=me.transform,et=me.style.map.terrain,Xe=Ae==="map",Ke=_e==="map";for(const Qe of fe){const Ct=xe.getTile(Qe),Pt=Ct.getBucket(pe);if(!Pt||!Pt.text||!Pt.text.segments.get().length)continue;const yt=c.ay(Pt.textSizeData,je.zoom),It=c.aN(Ct,1,me.transform.zoom),sr=_a(Xe,me.transform,It),jr=pe.layout.get("icon-text-fit")!=="none"&&Pt.hasIconData();if(yt){const rn=Math.pow(2,je.zoom-Ct.tileID.overscaledZ),Kr=et?(un,$r)=>et.getElevation(Qe,un,$r):null;Ts(Pt,Xe,Ke,we,je,sr,rn,yt,jr,c.aO(je,Ct,Ee,Oe),Qe.toUnwrapped(),Kr)}}})(U,A,R,O,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),V),R.paint.get("icon-opacity").constantOr(1)!==0&&tu(A,O,R,U,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),re,oe,W),R.paint.get("text-opacity").constantOr(1)!==0&&tu(A,O,R,U,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),re,oe,W),O.map.showCollisionBoxes&&(ui(A,O,R,U,!0),ui(A,O,R,U,!1))})(n,u,d,y,this.style.placement.variableOffsets,T):c.cn(d)?(function(A,O,R,U,V){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:X}=V,W=R.paint.get("circle-opacity"),re=R.paint.get("circle-stroke-width"),oe=R.paint.get("circle-stroke-opacity"),fe=!R.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(re.constantOr(1)===0||oe.constantOr(1)===0))return;const me=A.context,pe=me.gl,xe=A.transform,Ae=A.getDepthModeForSublayer(0,fr.ReadOnly),_e=Er.disabled,Ee=A.colorModeForRenderPass(),Oe=[],we=xe.getCircleRadiusCorrection();for(let je=0;je<U.length;je++){const et=U[je],Xe=O.getTile(et),Ke=Xe.getBucket(R);if(!Ke)continue;const Qe=R.paint.get("circle-translate"),Ct=R.paint.get("circle-translate-anchor"),Pt=c.aO(xe,Xe,Qe,Ct),yt=Ke.programConfigurations.get(R.id),It=A.useProgram("circle",yt),sr=Ke.layoutVertexBuffer,jr=Ke.indexBuffer,rn=A.style.map.terrain&&A.style.map.terrain.getTerrainData(et),Kr={programConfiguration:yt,program:It,layoutVertexBuffer:sr,indexBuffer:jr,uniformValues:Qc(A,Xe,R,Pt,we),terrainData:rn,projectionData:xe.getProjectionData({overscaledTileID:et,applyGlobeMatrix:!X,applyTerrainMatrix:!0})};if(fe){const un=Ke.segments.get();for(const $r of un)Oe.push({segments:new c.aX([$r]),sortKey:$r.sortKey,state:Kr})}else Oe.push({segments:Ke.segments,sortKey:0,state:Kr})}fe&&Oe.sort(((je,et)=>je.sortKey-et.sortKey));for(const je of Oe){const{programConfiguration:et,program:Xe,layoutVertexBuffer:Ke,indexBuffer:Qe,uniformValues:Ct,terrainData:Pt,projectionData:yt}=je.state;Xe.draw(me,pe.TRIANGLES,Ae,_e,Ee,br.backCCW,Ct,Pt,yt,R.id,Ke,Qe,je.segments,R.paint,A.transform.zoom,et)}})(n,u,d,y,T):c.co(d)?(function(A,O,R,U,V){if(R.paint.get("heatmap-opacity")===0)return;const X=A.context,{isRenderingToTexture:W,isRenderingGlobe:re}=V;if(A.style.map.terrain){for(const oe of U){const fe=O.getTile(oe);O.hasRenderableParent(oe)||(A.renderPass==="offscreen"?kd(A,fe,R,oe,re):A.renderPass==="translucent"&&ci(A,R,oe,W,re))}X.viewport.set([0,0,A.width,A.height])}else A.renderPass==="offscreen"?(function(oe,fe,me,pe){const xe=oe.context,Ae=xe.gl,_e=oe.transform,Ee=Er.disabled,Oe=new Gr([Ae.ONE,Ae.ONE],c.bp.transparent,[!0,!0,!0,!0]);(function(we,je,et){const Xe=we.gl;we.activeTexture.set(Xe.TEXTURE1),we.viewport.set([0,0,je.width/4,je.height/4]);let Ke=et.heatmapFbos.get(c.cd);Ke?(Xe.bindTexture(Xe.TEXTURE_2D,Ke.colorAttachment.get()),we.bindFramebuffer.set(Ke.framebuffer)):(Ke=Yr(we,je.width/4,je.height/4),et.heatmapFbos.set(c.cd,Ke))})(xe,oe,me),xe.clear({color:c.bp.transparent});for(let we=0;we<pe.length;we++){const je=pe[we];if(fe.hasRenderableParent(je))continue;const et=fe.getTile(je),Xe=et.getBucket(me);if(!Xe)continue;const Ke=Xe.programConfigurations.get(me.id),Qe=oe.useProgram("heatmap",Ke),Ct=_e.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Pt=_e.getCircleRadiusCorrection();Qe.draw(xe,Ae.TRIANGLES,fr.disabled,Ee,Oe,br.backCCW,sl(et,_e.zoom,me.paint.get("heatmap-intensity"),Pt),null,Ct,me.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,me.paint,_e.zoom,Ke)}xe.viewport.set([0,0,oe.width,oe.height])})(A,O,R,U):A.renderPass==="translucent"&&(function(oe,fe){const me=oe.context,pe=me.gl;me.setColorMode(oe.colorModeForRenderPass());const xe=fe.heatmapFbos.get(c.cd);xe&&(me.activeTexture.set(pe.TEXTURE0),pe.bindTexture(pe.TEXTURE_2D,xe.colorAttachment.get()),me.activeTexture.set(pe.TEXTURE1),Sr(me,fe).bind(pe.LINEAR,pe.CLAMP_TO_EDGE),oe.useProgram("heatmapTexture").draw(me,pe.TRIANGLES,fr.disabled,Er.disabled,oe.colorModeForRenderPass(),br.disabled,Md(oe,fe,0,1),null,null,fe.id,oe.viewportBuffer,oe.quadTriangleIndexBuffer,oe.viewportSegments,fe.paint,oe.transform.zoom))})(A,R)})(n,u,d,y,T):c.cp(d)?(function(A,O,R,U,V){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:X}=V,W=R.paint.get("line-opacity"),re=R.paint.get("line-width");if(W.constantOr(1)===0||re.constantOr(1)===0)return;const oe=A.getDepthModeForSublayer(0,fr.ReadOnly),fe=A.colorModeForRenderPass(),me=R.paint.get("line-dasharray"),pe=me.constantOr(1),xe=R.paint.get("line-pattern"),Ae=xe.constantOr(1),_e=R.paint.get("line-gradient"),Ee=R.getCrossfadeParameters();let Oe;Oe=Ae?"linePattern":pe&&_e?"lineGradientSDF":pe?"lineSDF":_e?"lineGradient":"line";const we=A.context,je=we.gl,et=A.transform;let Xe=!0;for(const Ke of U){const Qe=O.getTile(Ke);if(Ae&&!Qe.patternsLoaded())continue;const Ct=Qe.getBucket(R);if(!Ct)continue;const Pt=Ct.programConfigurations.get(R.id),yt=A.context.program.get(),It=A.useProgram(Oe,Pt),sr=Xe||It.program!==yt,jr=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ke),rn=xe.constantOr(null),Kr=me&&me.constantOr(null);if(rn&&Qe.imageAtlas){const hi=Qe.imageAtlas,In=hi.patternPositions[rn.to.toString()],zn=hi.patternPositions[rn.from.toString()];In&&zn&&Pt.setConstantPatternPositions(In,zn)}else if(Kr){const hi=R.layout.get("line-cap")==="round",In=A.lineAtlas.getDash(Kr.to,hi),zn=A.lineAtlas.getDash(Kr.from,hi);Pt.setConstantDashPositions(In,zn)}const un=et.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),$r=et.getPixelScale();let Sn;Ae?(Sn=Cd(A,Qe,R,$r,Ee),Aa(we,je,Qe,Pt,Ee)):pe&&_e?(Sn=ll(A,Qe,R,$r,Ee,Ct.lineClipsArray.length),Qi(A,O,we,je,R,Ct,Ke,Pt,Ee)):pe?(Sn=Xi(A,Qe,R,$r,Ee),bn(A,we,je,Pt,sr,Ee)):_e?(Sn=cm(A,Qe,R,$r,Ct.lineClipsArray.length),Ki(A,O,we,je,R,Ct,Ke)):Sn=th(A,Qe,R,$r);const cn=A.stencilModeForClipping(Ke);It.draw(we,je.TRIANGLES,oe,cn,fe,br.disabled,Sn,jr,un,R.id,Ct.layoutVertexBuffer,Ct.indexBuffer,Ct.segments,R.paint,A.transform.zoom,Pt,Ct.layoutVertexBuffer2),Xe=!1}})(n,u,d,y,T):c.cq(d)?(function(A,O,R,U,V){const X=R.paint.get("fill-color"),W=R.paint.get("fill-opacity");if(W.constantOr(1)===0)return;const{isRenderingToTexture:re}=V,oe=A.colorModeForRenderPass(),fe=R.paint.get("fill-pattern"),me=A.opaquePassEnabledForLayer()&&!fe.constantOr(1)&&X.constantOr(c.bp.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(A.renderPass===me){const pe=A.getDepthModeForSublayer(1,A.renderPass==="opaque"?fr.ReadWrite:fr.ReadOnly);Yo(A,O,R,U,pe,oe,!1,re)}if(A.renderPass==="translucent"&&R.paint.get("fill-antialias")){const pe=A.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,fr.ReadOnly);Yo(A,O,R,U,pe,oe,!0,re)}})(n,u,d,y,T):c.cr(d)?(function(A,O,R,U,V){const X=R.paint.get("fill-extrusion-opacity");if(X===0)return;const{isRenderingToTexture:W}=V;if(A.renderPass==="translucent"){const re=new fr(A.context.gl.LEQUAL,fr.ReadWrite,A.depthRangeFor3D);if(X!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))Ko(A,O,R,U,re,Er.disabled,Gr.disabled,W),Ko(A,O,R,U,re,A.stencilModeFor3D(),A.colorModeForRenderPass(),W);else{const oe=A.colorModeForRenderPass();Ko(A,O,R,U,re,Er.disabled,oe,W)}}})(n,u,d,y,T):c.cs(d)?(function(A,O,R,U,V){if(A.renderPass!=="offscreen"&&A.renderPass!=="translucent")return;const{isRenderingToTexture:X}=V,W=A.context,re=A.style.projection.useSubdivision,oe=A.getDepthModeForSublayer(0,fr.ReadOnly),fe=A.colorModeForRenderPass();if(A.renderPass==="offscreen")(function(me,pe,xe,Ae,_e,Ee,Oe){const we=me.context,je=we.gl;for(const et of xe){const Xe=pe.getTile(et),Ke=Xe.dem;if(!Ke||!Ke.data||!Xe.needsHillshadePrepare)continue;const Qe=Ke.dim,Ct=Ke.stride,Pt=Ke.getPixels();if(we.activeTexture.set(je.TEXTURE1),we.pixelStoreUnpackPremultiplyAlpha.set(!1),Xe.demTexture=Xe.demTexture||me.getTileTexture(Ct),Xe.demTexture){const It=Xe.demTexture;It.update(Pt,{premultiply:!1}),It.bind(je.NEAREST,je.CLAMP_TO_EDGE)}else Xe.demTexture=new c.T(we,Pt,je.RGBA,{premultiply:!1}),Xe.demTexture.bind(je.NEAREST,je.CLAMP_TO_EDGE);we.activeTexture.set(je.TEXTURE0);let yt=Xe.fbo;if(!yt){const It=new c.T(we,{width:Qe,height:Qe,data:null},je.RGBA);It.bind(je.LINEAR,je.CLAMP_TO_EDGE),yt=Xe.fbo=we.createFramebuffer(Qe,Qe,!0,!1),yt.colorAttachment.set(It.texture)}we.bindFramebuffer.set(yt.framebuffer),we.viewport.set([0,0,Qe,Qe]),me.useProgram("hillshadePrepare").draw(we,je.TRIANGLES,_e,Ee,Oe,br.disabled,lm(Xe.tileID,Ke),null,null,Ae.id,me.rasterBoundsBuffer,me.quadTriangleIndexBuffer,me.rasterBoundsSegments),Xe.needsHillshadePrepare=!1}})(A,O,U,R,oe,Er.disabled,fe),W.viewport.set([0,0,A.width,A.height]);else if(A.renderPass==="translucent")if(re){const[me,pe,xe]=A.stencilConfigForOverlapTwoPass(U);Qo(A,O,R,xe,me,oe,fe,!1,X),Qo(A,O,R,xe,pe,oe,fe,!0,X)}else{const[me,pe]=A.getStencilConfigForOverlapAndUpdateStencilID(U);Qo(A,O,R,pe,me,oe,fe,!1,X)}})(n,u,d,y,T):c.ct(d)?(function(A,O,R,U,V){if(A.renderPass!=="translucent"||!U.length)return;const{isRenderingToTexture:X}=V,W=A.style.projection.useSubdivision,re=A.getDepthModeForSublayer(0,fr.ReadOnly),oe=A.colorModeForRenderPass();if(W){const[fe,me,pe]=A.stencilConfigForOverlapTwoPass(U);As(A,O,R,pe,fe,re,oe,!1,X),As(A,O,R,pe,me,re,oe,!0,X)}else{const[fe,me]=A.getStencilConfigForOverlapAndUpdateStencilID(U);As(A,O,R,me,fe,re,oe,!1,X)}})(n,u,d,y,T):c.bU(d)?(function(A,O,R,U,V){if(A.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!U.length)return;const{isRenderingToTexture:X}=V,W=O.getSource(),re=A.style.projection.useSubdivision;if(W instanceof va)Qa(A,O,R,U,null,!1,!1,W.tileCoords,W.flippedWindingOrder,X);else if(re){const[oe,fe,me]=A.stencilConfigForOverlapTwoPass(U);Qa(A,O,R,me,oe,!1,!0,Ms,!1,X),Qa(A,O,R,me,fe,!0,!0,Ms,!1,X)}else{const[oe,fe]=A.getStencilConfigForOverlapAndUpdateStencilID(U);Qa(A,O,R,fe,oe,!1,!0,Ms,!1,X)}})(n,u,d,y,T):c.cu(d)?(function(A,O,R,U,V){const X=R.paint.get("background-color"),W=R.paint.get("background-opacity");if(W===0)return;const{isRenderingToTexture:re}=V,oe=A.context,fe=oe.gl,me=A.style.projection,pe=A.transform,xe=pe.tileSize,Ae=R.paint.get("background-pattern");if(A.isPatternMissing(Ae))return;const _e=!Ae&&X.a===1&&W===1&&A.opaquePassEnabledForLayer()?"opaque":"translucent";if(A.renderPass!==_e)return;const Ee=Er.disabled,Oe=A.getDepthModeForSublayer(0,_e==="opaque"?fr.ReadWrite:fr.ReadOnly),we=A.colorModeForRenderPass(),je=A.useProgram(Ae?"backgroundPattern":"background"),et=U||hn(pe,{tileSize:xe,terrain:A.style.map.terrain});Ae&&(oe.activeTexture.set(fe.TEXTURE0),A.imageManager.bind(A.context));const Xe=R.getCrossfadeParameters();for(const Ke of et){const Qe=pe.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),Ct=Ae?ah(W,A,Ae,{tileID:Ke,tileSize:xe},Xe):ih(W,X),Pt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ke),yt=me.getMeshFromTileID(oe,Ke.canonical,!1,!0,"raster");je.draw(oe,fe.TRIANGLES,Oe,Ee,we,br.backCCW,Ct,Pt,Qe,R.id,yt.vertexBuffer,yt.indexBuffer,yt.segments)}})(n,0,d,y,T):c.cv(d)&&(function(A,O,R,U){const{isRenderingGlobe:V}=U,X=A.context,W=R.implementation,re=A.style.projection,oe=A.transform,fe=oe.getProjectionDataForCustomLayer(V),me={farZ:oe.farZ,nearZ:oe.nearZ,fov:oe.fov*Math.PI/180,modelViewProjectionMatrix:oe.modelViewProjectionMatrix,projectionMatrix:oe.projectionMatrix,shaderData:{variantName:re.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${re.shaderPreludeCode.vertexSource}`,define:re.shaderDefine},defaultProjectionData:fe},pe=W.renderingMode?W.renderingMode:"2d";if(A.renderPass==="offscreen"){const xe=W.prerender;xe&&(A.setCustomLayerDefaults(),X.setColorMode(A.colorModeForRenderPass()),xe.call(W,X.gl,me),X.setDirty(),A.setBaseState())}else if(A.renderPass==="translucent"){A.setCustomLayerDefaults(),X.setColorMode(A.colorModeForRenderPass()),X.setStencilMode(Er.disabled);const xe=pe==="3d"?A.getDepthModeFor3D():A.getDepthModeForSublayer(0,fr.ReadOnly);X.setDepthMode(xe),W.render(X.gl,me),X.setDirty(),A.setBaseState(),X.bindFramebuffer.set(null)}})(n,0,d,T))}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!u||!d}useProgram(n,u,d=!1,y=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,A=this.style.projection,O=d?dn.projectionMercator:A.shaderPreludeCode,R=d?Pn:A.shaderDefine,U=n+(u?u.cacheKey:"")+`/${d?Li:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[U]||(this.cache[U]=new am(this.context,dn[n],u,hm[n],this._showOverdrawInspector,T,O,R,y)),this.cache[U]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var n,u;if(this._tileTextures){for(const d in this._tileTextures){const y=this._tileTextures[d];if(y)for(const T of y)T.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((n=this.tileExtentMesh.vertexBuffer)===null||n===void 0||n.destroy()),this.tileExtentMesh&&((u=this.tileExtentMesh.indexBuffer)===null||u===void 0||u.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const d in this.cache){const y=this.cache[d];y&&y.program&&this.context.gl.deleteProgram(y.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:u}=this.context.gl;return this.width!==n||this.height!==u}}function Ld(w,n){let u,d=!1,y=null,T=null;const A=()=>{y=null,d&&(w.apply(T,u),y=setTimeout(A,n),d=!1)};return(...O)=>(d=!0,T=this,u=O,y||A(),y)}class Nn{constructor(n){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(d=y)})),(d&&d[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:d,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const d=u.join("/");let y=d;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${d}`);let T=window.location.hash.replace(y,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let A=window.location.href.replace(/(#.+)?$/,T);A=A.replace("&&","&"),window.history.replaceState(window.history.state,null,A)},this._updateHash=Ld(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,y=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,y),A=Math.round(u.lng*T)/T,O=Math.round(u.lat*T)/T,R=this._map.getBearing(),U=this._map.getPitch();let V="";if(V+=n?`/${A}/${O}/${d}`:`${d}/${O}/${A}`,(R||U)&&(V+="/"+Math.round(10*R)/10),U&&(V+=`/${Math.round(U)}`),this._hashName){const X=this._hashName;let W=!1;const re=window.location.hash.slice(1).split("&").map((oe=>{const fe=oe.split("=")[0];return fe===X?(W=!0,`${fe}=${V}`):oe})).filter((oe=>oe));return W||re.push(`${X}=${V}`),`#${re.join("&")}`}return`#${V}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new c.V(+n[2],+n[1])}catch{return!1}const u=+n[0],d=+(n[3]||0),y=+(n[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&d>=-180&&d<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const ts={linearity:.3,easing:c.cw(0,0,.3,1)},nc=c.e({deceleration:2500,maxSpeed:1400},ts),Ci=c.e({deceleration:20,maxSpeed:1400},ts),Ca=c.e({deceleration:1e3,maxSpeed:360},ts),ru=c.e({deceleration:1e3,maxSpeed:90},ts),Pi=c.e({deceleration:1e3,maxSpeed:360},ts);class ny{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:K(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=K();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)u.zoom+=T.zoomDelta||0,u.bearing+=T.bearingDelta||0,u.pitch+=T.pitchDelta||0,u.roll+=T.rollDelta||0,T.panDelta&&u.pan._add(T.panDelta),T.around&&(u.around=T.around),T.pinchAround&&(u.pinchAround=T.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(u.pan.mag()){const T=fh(u.pan.mag(),d,c.e({},nc,n||{})),A=u.pan.mult(T.amount/u.pan.mag()),O=this._map.cameraHelper.handlePanInertia(A,this._map.transform);y.center=O.easingCenter,y.offset=O.easingOffset,ic(y,T)}if(u.zoom){const T=fh(u.zoom,d,Ci),A=c.cx(this._map.transform.zoom+T.amount,this._map.getZoomSnap(),T.amount);y.zoom=A,ic(y,T)}if(u.bearing){const T=fh(u.bearing,d,Ca);y.bearing=this._map.transform.bearing+c.an(T.amount,-179,179),ic(y,T)}if(u.pitch){const T=fh(u.pitch,d,ru);y.pitch=this._map.transform.pitch+T.amount,ic(y,T)}if(u.roll){const T=fh(u.roll,d,Pi);y.roll=this._map.transform.roll+c.an(T.amount,-179,179),ic(y,T)}if(y.zoom||y.bearing){const T=u.pinchAround===void 0?u.around:u.pinchAround;y.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),c.e(y,{noMoveStart:!0})}}function ic(w,n){(!w.duration||w.duration<n.duration)&&(w.duration=n.duration,w.easing=n.easing)}function fh(w,n,u){const{maxSpeed:d,linearity:y,deceleration:T}=u,A=c.an(w*y/(n/1e3),-d,d),O=Math.abs(A)/(T*y);return{easing:u.easing,duration:1e3*O,amount:A*(O/2)}}class oi extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d,y={}){d=d instanceof MouseEvent?d:new MouseEvent(n,d);const T=q.mousePos(u.getCanvas(),d),A=u.unproject(T);super(n,c.e({point:T,lngLat:A,originalEvent:d},y)),this._defaultPrevented=!1,this.target=u}}class xo extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d){const y=n==="touchend"?d.changedTouches:d.touches,T=q.touchPos(u.getCanvasContainer(),y),A=T.map((R=>u.unproject(R))),O=T.reduce(((R,U,V,X)=>R.add(U.div(X.length))),new c.P(0,0));super(n,{points:T,point:O,lngLats:A,lngLat:u.unproject(O),originalEvent:d}),this._defaultPrevented=!1}}class If extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class zf{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new If(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new oi(n.type,this._map,n))}mouseup(n){this._map.fire(new oi(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new oi(n.type,this._map,n))}dblclick(n){return this._firePreventable(new oi(n.type,this._map,n))}mouseover(n){this._map.fire(new oi(n.type,this._map,n))}mouseout(n){this._map.fire(new oi(n.type,this._map,n))}touchstart(n){return this._firePreventable(new xo(n.type,this._map,n))}touchmove(n){this._map.fire(new xo(n.type,this._map,n))}touchend(n){this._map.fire(new xo(n.type,this._map,n))}touchcancel(n){this._map.fire(new xo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pm{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new oi(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new oi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new oi(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bo{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(c.P.convert(n),this._map.terrain)}}class ml{constructor(n,u){this._map=n,this._tr=new bo(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&n.button===0&&(q.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=d,this._box||(this._box=q.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const T=Math.min(y.x,d.x),A=Math.max(y.x,d.x),O=Math.min(y.y,d.y),R=Math.max(y.y,d.y);q.setTransform(this._box,`translate(${T}px,${O}px)`),this._box.style.width=A-T+"px",this._box.style.height=R-O+"px"}mouseupWindow(n,u){if(!this._active||n.button!==0)return;const d=this._startPos,y=u;if(this.reset(),q.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:n})),{cameraAnimation:T=>T.fitScreenCoordinates(d,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(q.remove(this._box),this._box=null),q.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new c.l(n,{originalEvent:u}))}}function Ji(w,n){if(w.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${n.length}`);const u={};for(let d=0;d<w.length;d++)u[w[d].identifier]=n[d];return u}class Lt{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=(function(y){const T=new c.P(0,0);for(const A of y)T._add(A);return T.div(y.length)})(u),this.touches=Ji(d,u)))}touchmove(n,u,d){if(this.aborted||!this.centroid)return;const y=Ji(d,u);for(const T in this.touches){const A=y[T];(!A||A.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(n,u,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class dh{constructor(n){this.singleTap=new Lt(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,d){this.singleTap.touchstart(n,u,d)}touchmove(n,u,d){this.singleTap.touchmove(n,u,d)}touchend(n,u,d){const y=this.singleTap.touchend(n,u,d);if(y){const T=n.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(y)<30;if(T&&A||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class kf{constructor(n){this._tr=new bo(n),this._zoomIn=new dh({numTouches:1,numTaps:2}),this._zoomOut=new dh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,d){this._zoomIn.touchstart(n,u,d),this._zoomOut.touchstart(n,u,d)}touchmove(n,u,d){this._zoomIn.touchmove(n,u,d),this._zoomOut.touchmove(n,u,d)}touchend(n,u,d){const y=this._zoomIn.touchend(n,u,d),T=this._zoomOut.touchend(n,u,d),A=this._tr;return y?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:c.cx(A.zoom+1,O.getZoomSnap()),around:A.unproject(y)},{originalEvent:n})}):T?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:c.cx(A.zoom-1,O.getZoomSnap()),around:A.unproject(T)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ja{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const u=this._moveFunction(...n);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(n,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,u){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const y=Array.isArray(u)?u[0]:u;return!this._moved&&y.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(d,y))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&q.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const wo=0,ac=2,Rf={[wo]:1,[ac]:2};class rs{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const u=q.mouseButton(n);this._eventButton=u}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!(function(u,d){const y=Rf[d];return u.buttons===void 0||(u.buttons&y)!==y})(n,this._eventButton)}isValidEndEvent(n){return q.mouseButton(n)===this._eventButton}}class nu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class ph{constructor(n=new rs({checkCorrectEvent:()=>!0}),u=new nu){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(n,u,d){return n instanceof MouseEvent?u(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?d(n):void 0}startMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.startMove(u)),(u=>this.oneFingerTouchMoveStateManager.startMove(u)))}endMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.endMove(u)),(u=>this.oneFingerTouchMoveStateManager.endMove(u)))}isValidStartEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidStartEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u)))}isValidMoveEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidMoveEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u)))}isValidEndEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidEndEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u)))}}const ns=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=n=>{n.preventDefault()}};class Lf{constructor(n,u){this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,u,d){return this._calculateTransform(n,u,d)}touchmove(n,u,d){if(this._active){if(!this._shouldBePrevented(d.length))return n.preventDefault(),this._calculateTransform(n,u,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,u,d){this._calculateTransform(n,u,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,d){d.length>0&&(this._active=!0);const y=Ji(d,u),T=new c.P(0,0),A=new c.P(0,0);let O=0;for(const U in y){const V=y[U],X=this._touches[U];X&&(T._add(V),A._add(V.sub(X)),O++,y[U]=V)}if(this._touches=y,this._shouldBePrevented(O)||!A.mag())return;const R=A.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,d){if(!this._firstTwoTouches)return;n.preventDefault();const[y,T]=this._firstTwoTouches,A=is(d,u,y),O=is(d,u,T);if(!A||!O)return;const R=this._aroundCenter?null:A.add(O).div(2);return this._move([A,O],R,n)}touchend(n,u,d){if(!this._firstTwoTouches)return;const[y,T]=this._firstTwoTouches,A=is(d,u,y),O=is(d,u,T);A&&O||(this._active&&q.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function is(w,n,u){for(let d=0;d<w.length;d++)if(w[d].identifier===u)return n[d]}function jd(w,n){return Math.log(w/n)/Math.LN2}class as extends mh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(jd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jd(this._distance,d),pinchAround:u}}}function jf(w,n){return 180*w.angleWith(n)/Math.PI}class gh extends mh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u,d){const y=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:jf(this._vector,y),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,d=jf(n,this._startVector);return Math.abs(d)<u}}function os(w){return Math.abs(w.y)>Math.abs(w.x)}class Ds extends mh{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,d){super.touchstart(n,u,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,os(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=n[0].sub(this._lastPoints[0]),T=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,T,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(y.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,d){if(this._valid!==void 0)return this._valid;const y=n.mag()>=2,T=u.mag()>=2;if(!y&&!T)return;if(!y||!T)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const A=n.y>0==u.y>0;return os(n)&&os(u)&&A}}const eo={panStep:100,bearingStep:15,pitchStep:10};class Ur{constructor(n){this._tr=new bo(n);const u=eo;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,d=0,y=0,T=0,A=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),T=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),T=1);break;case 38:n.shiftKey?y=1:(n.preventDefault(),A=-1);break;case 40:n.shiftKey?y=-1:(n.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:O=>{const R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:Nd,zoom:u?c.cx(R.zoom+u*(n.shiftKey?2:1),O.getZoomSnap()):R.zoom,bearing:R.bearing+d*this._bearingStep,pitch:R.pitch+y*this._pitchStep,offset:[-T*this._panStep,-A*this._panStep],center:R.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Nd(w){return w*(2-w)}const Os=4.000244140625,gl=1/450;class yh{constructor(n,u){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=n,this._tr=new bo(n),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=gl}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=K(),y=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%Os==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(y*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=q.mousePos(this._map.getCanvas(),n),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(c.V.convert(d.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>Os?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&R!==0&&(R=1/R);const U=typeof this._targetZoom!="number"?n.scale:c.aq(this._targetZoom),V=n.applyConstrain(n.getCameraLngLat(),c.at(U*R)).zoom,X=this._map.getZoomSnap();if(this._type==="wheel"&&X>0){const W=c.cx(n.zoom,X);this._targetZoom=c.cx(V,X,V-W)}else this._targetZoom=V;this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,d=this._startZoom,y=this._easing;let T,A=!1;if(this._type==="wheel"&&d&&y){const O=K()-this._lastWheelEventTime,R=Math.min((O+5)/200,1),U=y(R);T=c.G.number(d,u,U),R<1?this._frameId||(this._frameId=!0):A=!0}else T=u,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!A,zoomDelta:T-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=c.cz;if(this._prevEase){const d=this._prevEase,y=(K()-d.start)/d.duration,T=d.easing(y+.01)-d.easing(y),A=.27/Math.sqrt(T*T+1e-4)*.01,O=Math.sqrt(.0729-A*A);u=c.cw(A,O,.25,1)}return this._prevEase={start:K(),duration:n,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Nf{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class iu{constructor(n){this._tr=new bo(n),this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:c.cx(this._tr.zoom+(n.shiftKey?-1:1),d.getZoomSnap()),around:this._tr.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class vh{constructor(){this._tap=new dh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,u,d){if(!this._swipePoint)if(this._tapTime){const y=u[0],T=n.timeStamp-this._tapTime<500,A=this._tapPoint.dist(y)<30;T&&A?d.length>0&&(this._swipePoint=y,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(n,u,d)}touchmove(n,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const y=u[0],T=y.y-this._swipePoint.y;return this._swipePoint=y,n.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(n,u,d)}touchend(n,u,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const y=this._tap.touchend(n,u,d);y&&(this._tapTime=n.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bd{constructor(n,u,d){this._el=n,this._mousePan=u,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Pa{constructor(n,u,d,y){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=u,this._mousePitch=d,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class au{constructor(n,u,d,y){this._el=n,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class jt{constructor(n,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=q.create("div","maplibregl-cooperative-gesture-screen",n);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=u,this._container.appendChild(y);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=d,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(q.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,u){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:n,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ut=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class to extends c.l{}function oc(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class _h{get _ownerDocument(){var n;return((n=this._el)===null||n===void 0?void 0:n.ownerDocument)||document}get _ownerWindow(){var n,u;return((u=(n=this._el)===null||n===void 0?void 0:n.ownerDocument)===null||u===void 0?void 0:u.defaultView)||window}constructor(n,u){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,T)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=y.type==="renderFrame"?void 0:y,O={needsRenderFrame:!1},R={},U={};for(const{handlerName:W,handler:re,allowed:oe}of this._handlers){if(!re.isEnabled())continue;let fe;if(this._blockedByActive(U,oe,W))re.reset();else if(re[T||y.type]){if(c.cA(y,T||y.type)){const me=q.mousePos(this._map.getCanvas(),y);fe=re[T||y.type](y,me)}else if(c.cB(y,T||y.type)){const me=this._getMapTouches(y.touches),pe=q.touchPos(this._map.getCanvas(),me);fe=re[T||y.type](y,pe,me)}else c.cC(T||y.type)||(fe=re[T||y.type](y));this.mergeHandlerResult(O,R,fe,W,A),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()}(fe||re.isActive())&&(U[W]=re)}const V={};for(const W in this._previousActiveHandlers)U[W]||(V[W]=A);this._previousActiveHandlers=U,(Object.keys(V).length||oc(O))&&(this._changes.push([O,R,V]),this._triggerRenderFrame()),(Object.keys(U).length||oc(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=O;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ny(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(const[y,T,A]of this._listeners)q.addEventListener(y,T,y===this._ownerDocument?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[n,u,d]of this._listeners)q.removeEventListener(n,u,n===this._ownerDocument?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new zf(u,n));const y=u.boxZoom=new ml(u,n);this._add("boxZoom",y),n.interactive&&n.boxZoom&&y.enable();const T=u.cooperativeGestures=new jt(u,n.cooperativeGestures);this._add("cooperativeGestures",T),n.cooperativeGestures&&T.enable();const A=new kf(u),O=new iu(u);u.doubleClickZoom=new Nf(O,A),this._add("tapZoom",A),this._add("clickZoom",O),n.interactive&&n.doubleClickZoom&&u.doubleClickZoom.enable();const R=new vh;this._add("tapDragZoom",R);const U=u.touchPitch=new Ds(u);this._add("touchPitch",U),n.interactive&&n.touchPitch&&u.touchPitch.enable(n.touchPitch);const V=()=>u.project(u.getCenter()),X=(function({enable:_e,clickTolerance:Ee,aroundCenter:Oe=!0,minPixelCenterThreshold:we=100,rotateDegreesPerPixelMoved:je=.8},et){const Xe=new rs({checkCorrectEvent:Ke=>q.mouseButton(Ke)===0&&Ke.ctrlKey||q.mouseButton(Ke)===2&&!Ke.ctrlKey});return new Ja({clickTolerance:Ee,move:(Ke,Qe)=>{const Ct=et();if(Oe&&Math.abs(Ct.y-Ke.y)>we)return{bearingDelta:c.cy(new c.P(Ke.x,Qe.y),Qe,Ct)};let Pt=(Qe.x-Ke.x)*je;return Oe&&Qe.y<Ct.y&&(Pt=-Pt),{bearingDelta:Pt}},moveStateManager:Xe,enable:_e,assignEvents:ns})})(n,V),W=(function({enable:_e,clickTolerance:Ee,pitchDegreesPerPixelMoved:Oe=-.5}){const we=new rs({checkCorrectEvent:je=>q.mouseButton(je)===0&&je.ctrlKey||q.mouseButton(je)===2});return new Ja({clickTolerance:Ee,move:(je,et)=>({pitchDelta:(et.y-je.y)*Oe}),moveStateManager:we,enable:_e,assignEvents:ns})})(n),re=(function({enable:_e,clickTolerance:Ee,rollDegreesPerPixelMoved:Oe=.3},we){const je=new rs({checkCorrectEvent:et=>q.mouseButton(et)===2&&et.ctrlKey});return new Ja({clickTolerance:Ee,move:(et,Xe)=>{const Ke=we();let Qe=(Xe.x-et.x)*Oe;return Xe.y<Ke.y&&(Qe=-Qe),{rollDelta:Qe}},moveStateManager:je,enable:_e,assignEvents:ns})})(n,V);u.dragRotate=new Pa(n,X,W,re),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",W,["mouseRotate","mouseRoll"]),this._add("mouseRoll",re,["mousePitch"]),n.interactive&&n.dragRotate&&u.dragRotate.enable();const oe=(function({enable:_e,clickTolerance:Ee}){const Oe=new rs({checkCorrectEvent:we=>q.mouseButton(we)===0&&!we.ctrlKey});return new Ja({clickTolerance:Ee,move:(we,je)=>({around:je,panDelta:je.sub(we)}),activateOnStart:!0,moveStateManager:Oe,enable:_e,assignEvents:ns})})(n),fe=new Lf(n,u);u.dragPan=new Bd(d,oe,fe),this._add("mousePan",oe),this._add("touchPan",fe,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&u.dragPan.enable(n.dragPan);const me=new gh,pe=new as;u.touchZoomRotate=new au(d,pe,me,R),this._add("touchRotate",me,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&u.touchZoomRotate.enable(n.touchZoomRotate),this._add("blockableMapEvent",new pm(u));const xe=u.scrollZoom=new yh(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",xe,["mousePan"]),n.interactive&&n.scrollZoom&&u.scrollZoom.enable(n.scrollZoom);const Ae=u.keyboard=new Ur(u);this._add("keyboard",Ae),n.interactive&&n.keyboard&&u.keyboard.enable()}_add(n,u,d){this._handlers.push({handlerName:n,handler:u,allowed:d}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ut(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,u,d){for(const y in n)if(y!==d&&(!u||u.indexOf(y)<0))return!0;return!1}_getMapTouches(n){const u=[];for(const d of n)this._el.contains(d.target)&&u.push(d);return u}mergeHandlerResult(n,u,d,y,T){if(!d)return;c.e(n,d);const A={handlerName:y,originalEvent:d.originalEvent||T};d.zoomDelta!==void 0&&(u.zoom=A),d.panDelta!==void 0&&(u.drag=A),d.rollDelta!==void 0&&(u.roll=A),d.pitchDelta!==void 0&&(u.pitch=A),d.bearingDelta!==void 0&&(u.rotate=A)}_applyChanges(){const n={},u={},d={};for(const[y,T,A]of this._changes)y.panDelta&&(n.panDelta=(n.panDelta||new c.P(0,0))._add(y.panDelta)),y.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(n.rollDelta=(n.rollDelta||0)+y.rollDelta),y.around!==void 0&&(n.around=y.around),y.pinchAround!==void 0&&(n.pinchAround=y.pinchAround),y.noInertia&&(n.noInertia=y.noInertia),c.e(u,T),c.e(d,A);this._updateMapTransform(n,u,d),this._changes=[]}_updateMapTransform(n,u,d){const y=this._map,T=y._getTransformForUpdate(),A=y.terrain;if(!(oc(n)||A&&this._terrainMovement))return this._fireEvents(u,d,!0);y._stop(!0);let{panDelta:O,zoomDelta:R,bearingDelta:U,pitchDelta:V,rollDelta:X,around:W,pinchAround:re}=n;re!==void 0&&(W=re),W=W||y.transform.centerPoint,A&&!T.isPointOnMapSurface(W)&&(W=T.centerPoint);const oe={panDelta:O,zoomDelta:R,rollDelta:X,pitchDelta:V,bearingDelta:U,around:W};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(W)&&(W=T.centerPoint);const fe=W.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(O?W.sub(O):W);this._handleMapControls({terrain:A,tr:T,deltasForHelper:oe,preZoomAroundLoc:fe,combinedEventsInProgress:u,panDelta:O}),y._applyUpdatedTransform(T),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,d,!0)}_handleMapControls({terrain:n,tr:u,deltasForHelper:d,preZoomAroundLoc:y,combinedEventsInProgress:T,panDelta:A}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(d,u),n)return O.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(d,u,y)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&A?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(A))):O.handleMapControlsPan(d,u,y)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(d,u,y));O.handleMapControlsPan(d,u,y)}_fireEvents(n,u,d){const y=Ut(this._eventsInProgress),T=Ut(n),A={};for(const X in n){const{originalEvent:W}=n[X];this._eventsInProgress[X]||(A[`${X}start`]=W),this._eventsInProgress[X]=n[X]}!y&&T&&this._fireEvent("movestart",T.originalEvent);for(const X in A)this._fireEvent(X,A[X]);T&&this._fireEvent("move",T.originalEvent);for(const X in n){const{originalEvent:W}=n[X];this._fireEvent(X,W)}const O={};let R;for(const X in this._eventsInProgress){const{handlerName:W,originalEvent:re}=this._eventsInProgress[X];this._handlersById[W].isActive()||(delete this._eventsInProgress[X],R=u[W]||re,O[`${X}end`]=R)}for(const X in O)this._fireEvent(X,O[X]);const U=Ut(this._eventsInProgress),V=(y||T)&&!U;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const X=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&X.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(X)}if(d&&V){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;!X||!X.essential&&$.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:R})),W(this._map.getBearing())&&this._map.resetNorth()):(W(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new c.l(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((n=>{delete this._frameId,this.handleEvent(new to("renderFrame",{timeStamp:n})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Bn extends c.E{constructor(n,u,d){super(),this._renderFrameCallback=()=>{const y=Math.min((K()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=d.bearingSnap,this._zoomSnap=d.zoomSnap,this.cameraHelper=u,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(n,u){n.apply(this.transform,!0),this.transform=n,this.cameraHelper=u}getCenter(){return new c.V(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,u){return this.jumpTo({elevation:n},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,u,d){return n=c.P.convert(n).mult(-1),this.panTo(this.transform.center,c.e({offset:n},u),d)}panTo(n,u,d){return this.easeTo(c.e({center:n},u),d)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,d){return this.easeTo(c.e({zoom:n},u),d)}zoomIn(n,u){return this.zoomTo(c.cx(this.getZoom()+1,this._zoomSnap),n,u),this}zoomOut(n,u){return this.zoomTo(c.cx(this.getZoom()-1,this._zoomSnap),n,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,u){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)).fire(new c.l("moveend",u))),this}getBearing(){return this.transform.bearing}setZoomSnap(n){return this._zoomSnap=n,this}getZoomSnap(){return this._zoomSnap}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,d){return this.easeTo(c.e({bearing:n},u),d)}resetNorth(n,u){return this.rotateTo(0,c.e({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}getRoll(){return this.transform.roll}setRoll(n,u){return this.jumpTo({roll:n},u),this}cameraForBounds(n,u){n=Rr.convert(n).adjustAntiMeridian();const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,u)}_cameraForBoxAndBearing(n,u,d,y){const T={top:0,bottom:0,right:0,left:0};if(typeof(y=c.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const U=y.padding;y.padding={top:U,bottom:U,right:U,left:U}}const A=c.e(T,y.padding);y.padding=A;const O=this.transform,R=new Rr(n,u);return this.cameraHelper.cameraForBoxAndBearing(y,A,R,d,O)}fitBounds(n,u,d){return this._fitInternal(this.cameraForBounds(n,u),u,d)}fitScreenCoordinates(n,u,d,y,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(n)),this.transform.screenPointToLocation(c.P.convert(u)),d,y),y,T)}_fitInternal(n,u,d){return n?(delete(u=c.e(n,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(n,u){this.stop();const d=this._getTransformForUpdate();let y=!1,T=!1,A=!1;const O=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,n);const R=d.zoom!==O;return"elevation"in n&&d.elevation!==+n.elevation&&d.setElevation(+n.elevation),"bearing"in n&&d.bearing!==+n.bearing&&(y=!0,d.setBearing(+n.bearing)),"pitch"in n&&d.pitch!==+n.pitch&&(T=!0,d.setPitch(+n.pitch)),"roll"in n&&d.roll!==+n.roll&&(A=!0,d.setRoll(+n.roll)),n.padding==null||d.isPaddingEqual(n.padding)||d.setPadding(n.padding),this._applyUpdatedTransform(d),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)),R&&this.fire(new c.l("zoomstart",u)).fire(new c.l("zoom",u)).fire(new c.l("zoomend",u)),y&&this.fire(new c.l("rotatestart",u)).fire(new c.l("rotate",u)).fire(new c.l("rotateend",u)),T&&this.fire(new c.l("pitchstart",u)).fire(new c.l("pitch",u)).fire(new c.l("pitchend",u)),A&&this.fire(new c.l("rollstart",u)).fire(new c.l("roll",u)).fire(new c.l("rollend",u)),this.fire(new c.l("moveend",u))}calculateCameraOptionsFromTo(n,u,d,y=0){const T=c.a9.fromLngLat(n,u),A=c.a9.fromLngLat(d,y),O=A.x-T.x,R=A.y-T.y,U=A.z-T.z,V=Math.hypot(O,R,U);if(V===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(O,R),W=c.at(this.transform.cameraToCenterDistance/V/this.transform.tileSize),re=180*Math.atan2(O,-R)/Math.PI;let oe=180*Math.acos(X/V)/Math.PI;return oe=U<0?90-oe:90+oe,{center:A.toLngLat(),elevation:y,zoom:W,pitch:oe,bearing:re}}calculateCameraOptionsFromCameraLngLatAltRotation(n,u,d,y,T){const A=this.transform.calculateCenterFromCameraLngLatAlt(n,u,d,y);return{center:A.center,elevation:A.elevation,zoom:A.zoom,bearing:d,pitch:y,roll:T}}easeTo(n,u){this._stop(!1,n.easeId),((n=c.e({offset:[0,0],duration:500,easing:c.cz},n)).animate===!1||!n.essential&&$.prefersReducedMotion)&&(n.duration=0);const d=this._getTransformForUpdate(),y=this.getBearing(),T=d.pitch,A=d.roll,O="bearing"in n?this._normalizeBearing(n.bearing,y):y,R="pitch"in n?+n.pitch:T,U="roll"in n?this._normalizeBearing(n.roll,A):A,V="padding"in n?n.padding:d.padding,X=c.P.convert(n.offset);let W,re;n.around&&(W=c.V.convert(n.around),re=d.locationToScreenPoint(W));const oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},fe=this.cameraHelper.handleEaseTo(d,{bearing:O,pitch:R,roll:U,padding:V,around:W,aroundPoint:re,offsetAsPoint:X,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||y!==O,this._pitching=this._pitching||R!==T,this._rolling=this._rolling||U!==A,this._padding=!d.isPaddingEqual(V),this._zooming=this._zooming||fe.isZooming,this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,oe),this.terrain&&this._prepareElevation(fe.elevationCenter),this._ease((me=>{fe.easeFunc(me),this.terrain&&!n.freezeElevation&&this._updateElevation(me),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(me=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u,me)}),n),this}_prepareEase(n,u,d={}){this._moving=!0,u||d.moving||this.fire(new c.l("movestart",n)),this._zooming&&!d.zooming&&this.fire(new c.l("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new c.l("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new c.l("pitchstart",n)),this._rolling&&!d.rolling&&this.fire(new c.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&u!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(u-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.setElevation(c.G.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const u=n.getCameraLngLat(),d=n.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(u,n.zoom):0;if(d<y){const T=this.calculateCameraOptionsFromTo(u,y,n.center,n.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(n){const u=[];if(u.push((y=>this._elevateCameraIfInsideTerrain(y))),this.transformCameraUpdate&&u.push((y=>this.transformCameraUpdate(y))),!u.length)return;const d=n.clone();for(const y of u){const T=d.clone(),{center:A,zoom:O,roll:R,pitch:U,bearing:V,elevation:X}=y(T);A&&T.setCenter(A),X!==void 0&&T.setElevation(X),O!==void 0&&T.setZoom(O),R!==void 0&&T.setRoll(R),U!==void 0&&T.setPitch(U),V!==void 0&&T.setBearing(V),d.apply(T,!1)}this.transform.apply(d,!1)}_fireMoveEvents(n){this.fire(new c.l("move",n)),this._zooming&&this.fire(new c.l("zoom",n)),this._rotating&&this.fire(new c.l("rotate",n)),this._pitching&&this.fire(new c.l("pitch",n)),this._rolling&&this.fire(new c.l("roll",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const d=this._zooming,y=this._rotating,T=this._pitching,A=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new c.l("zoomend",n)),y&&this.fire(new c.l("rotateend",n)),T&&this.fire(new c.l("pitchend",n)),A&&this.fire(new c.l("rollend",n)),this.fire(new c.l("moveend",n))}flyTo(n,u){if(!n.essential&&$.prefersReducedMotion){const Qe=c.U(n,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Qe,u)}this.stop(),n=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.cz},n);const d=this._getTransformForUpdate(),y=d.bearing,T=d.pitch,A=d.roll,O=d.padding,R="bearing"in n?this._normalizeBearing(n.bearing,y):y,U="pitch"in n?+n.pitch:T,V="roll"in n?this._normalizeBearing(n.roll,A):A,X="padding"in n?n.padding:d.padding,W=c.P.convert(n.offset);let re=d.centerPoint.add(W);const oe=d.screenPointToLocation(re),fe=this.cameraHelper.handleFlyTo(d,{bearing:R,pitch:U,roll:V,padding:X,locationAtOffset:oe,offsetAsPoint:W,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let me=n.curve;const pe=Math.max(d.width,d.height),xe=pe/fe.scaleOfZoom,Ae=fe.pixelPathLength;typeof fe.scaleOfMinZoom=="number"&&(me=Math.sqrt(pe/fe.scaleOfMinZoom/Ae*2));const _e=me*me;function Ee(Qe){const Ct=(xe*xe-pe*pe+(Qe?-1:1)*_e*_e*Ae*Ae)/(2*(Qe?xe:pe)*_e*Ae);return Math.log(Math.sqrt(Ct*Ct+1)-Ct)}function Oe(Qe){return(Math.exp(Qe)-Math.exp(-Qe))/2}function we(Qe){return(Math.exp(Qe)+Math.exp(-Qe))/2}const je=Ee(!1);let et=function(Qe){return we(je)/we(je+me*Qe)},Xe=function(Qe){return pe*((we(je)*(Oe(Ct=je+me*Qe)/we(Ct))-Oe(je))/_e)/Ae;var Ct},Ke=(Ee(!0)-je)/me;if(Math.abs(Ae)<2e-6||!isFinite(Ke)){if(Math.abs(pe-xe)<1e-6)return this.easeTo(n,u);const Qe=xe<pe?-1:1;Ke=Math.abs(Math.log(xe/pe))/me,Xe=()=>0,et=Ct=>Math.exp(Qe*me*Ct)}return n.duration="duration"in n?+n.duration:1e3*Ke/("screenSpeed"in n?+n.screenSpeed/me:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=y!==R,this._pitching=U!==T,this._rolling=V!==A,this._padding=!d.isPaddingEqual(X),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(fe.targetCenter),this._ease((Qe=>{const Ct=Qe*Ke,Pt=1/et(Ct),yt=Xe(Ct);this._rotating&&d.setBearing(c.G.number(y,R,Qe)),this._pitching&&d.setPitch(c.G.number(T,U,Qe)),this._rolling&&d.setRoll(c.G.number(A,V,Qe)),this._padding&&(d.interpolatePadding(O,X,Qe),re=d.centerPoint.add(W)),fe.easeFunc(Qe,Pt,yt,re),this.terrain&&!n.freezeElevation&&this._updateElevation(Qe),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,u)}return n||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(n,u,d){d.animate===!1||d.duration===0?(n(1),u()):(this._easeStart=K(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,u){n=c.W(n,-180,180);const d=Math.abs(n-u);return Math.abs(n-360-u)<d&&(n-=360),Math.abs(n+360-u)<d&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLat(c.V.convert(n),this.transform):null}}const wn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class On{constructor(n=wn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=q.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=q.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const d=this._map._getUIString(`AttributionControl.${u}`);n.title=d,n.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map((y=>typeof y!="string"?"":y))):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const u=this._map.style.tileManagers;for(const y in u){const T=u[y];if(T.used||T.usedForTerrain){const A=T.getSource();A.attribution&&n.indexOf(A.attribution)<0&&n.push(A.attribution)}}n=n.filter((y=>String(y).trim())),n.sort(((y,T)=>y.length-T.length)),n=n.filter(((y,T)=>{for(let A=T+1;A<n.length;A++)if(n[A].indexOf(y)>=0)return!1;return!0}));const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=q.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xh{constructor(n={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const d=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=q.create("div","maplibregl-ctrl");const u=q.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){q.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Is{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const y of d)if(y.id===n)return void(y.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var xr=c.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Lr extends c.E{constructor(n){super(),this._lastTilesetChange=K(),this.tileManager=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(n,u){this.tileManager.update(n,u),this._renderableTilesKeys=[];const d={};for(const y of hn(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.tileManager._source.calculateTileZoom}))d[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),c.c7(y.terrainRttPosMatrix32f,0,c.a5,c.a5,0,0,1),this._tiles[y.key]=new Ce(y,this.tileSize),this._lastTilesetChange=K());for(const y in this._tiles)d[y]||delete this._tiles[y]}freeRtt(n){for(const u in this._tiles){const d=this._tiles[u];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((n=>this.getTileByID(n)))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,u){return u?this._getTerrainCoordsForTileRanges(n,u):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const u={};for(const d of this._renderableTilesKeys){const y=this._tiles[d].tileID,T=n.clone(),A=c.bk();if(y.canonical.equals(n.canonical))c.c7(A,0,c.a5,c.a5,0,0,1);else if(y.canonical.isChildOf(n.canonical)){const O=y.canonical.z-n.canonical.z,R=y.canonical.x-(y.canonical.x>>O<<O),U=y.canonical.y-(y.canonical.y>>O<<O),V=c.a5>>O;c.c7(A,0,V,V,0,0,1),c.O(A,A,[-R*V,-U*V,0])}else{if(!n.canonical.isChildOf(y.canonical))continue;{const O=n.canonical.z-y.canonical.z,R=n.canonical.x-(n.canonical.x>>O<<O),U=n.canonical.y-(n.canonical.y>>O<<O),V=c.a5>>O;c.c7(A,0,c.a5,c.a5,0,0,1),c.O(A,A,[R*V,U*V,0]),c.Q(A,A,[1/2**O,1/2**O,0])}}T.terrainRttPosMatrix32f=new Float32Array(A),u[d]=T}return u}_getTerrainCoordsForTileRanges(n,u){const d={};for(const y of this._renderableTilesKeys){const T=this._tiles[y].tileID;if(!this._isWithinTileRanges(T,u))continue;const A=n.clone(),O=c.bk();if(T.canonical.z===n.canonical.z){const R=n.canonical.x-T.canonical.x+n.wrap*(1<<n.canonical.z),U=n.canonical.y-T.canonical.y;c.c7(O,0,c.a5,c.a5,0,0,1),c.O(O,O,[R*c.a5,U*c.a5,0])}else if(T.canonical.z>n.canonical.z){const R=T.canonical.z-n.canonical.z,U=T.canonical.x-(T.canonical.x>>R<<R)+n.wrap*(1<<T.canonical.z),V=T.canonical.y-(T.canonical.y>>R<<R),X=n.canonical.x-(T.canonical.x>>R),W=n.canonical.y-(T.canonical.y>>R),re=c.a5>>R;c.c7(O,0,re,re,0,0,1),c.O(O,O,[-U*re+X*c.a5,-V*re+W*c.a5,0])}else{const R=n.canonical.z-T.canonical.z,U=n.canonical.x-(n.canonical.x>>R<<R)+n.wrap*(1<<n.canonical.z),V=n.canonical.y-(n.canonical.y>>R<<R),X=(n.canonical.x>>R)-T.canonical.x,W=(n.canonical.y>>R)-T.canonical.y,re=c.a5<<R;c.c7(O,0,re,re,0,0,1),c.O(O,O,[U*c.a5+X*re,V*c.a5+W*re,0])}A.terrainRttPosMatrix32f=new Float32Array(O),d[y]=A}return d}getSourceTile(n,u){const d=this.tileManager._source;let y=n.overscaledZ-this.deltaZoom;if(y>d.maxzoom&&(y=d.maxzoom),y<d.minzoom)return;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(y).key);let T=this.findTileInCaches(this._sourceTileCache[n.key]);if(!T?.dem&&u)for(;y>=d.minzoom&&!T?.dem;)T=this.findTileInCaches(n.scaledTo(y--).key);return T}findTileInCaches(n){let u=this.tileManager.getTileByID(n);return u||(u=this.tileManager._outOfViewCache.getByKey(n),u)}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,u){const d=u[n.canonical.z];return!!d&&(n.wrap>d.minWrap||n.wrap<d.maxWrap||n.canonical.x>=d.minTileXWrapped&&n.canonical.x<=d.maxTileXWrapped&&n.canonical.y>=d.minTileY&&n.canonical.y<=d.maxTileY)}}class vr{constructor(n,u,d){this._meshCache={},this.painter=n,this.tileManager=new Lr(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,d,y=c.a5){var T;const A=n.normalizeCoordinates(u,d,y);if(!A)return 0;const O=this.getTerrainData(A.tileID),R=(T=O.tile)===null||T===void 0?void 0:T.dem;if(!R)return 0;const U=c.cD([],[A.x/y*c.a5,A.y/y*c.a5],O.u_terrain_matrix),V=[U[0]*R.dim,U[1]*R.dim],X=Math.floor(V[0]),W=Math.floor(V[1]),re=V[0]-X,oe=V[1]-W;return R.get(X,W)*(1-re)*(1-oe)+R.get(X+1,W)*re*(1-oe)+R.get(X,W+1)*(1-re)*oe+R.get(X+1,W+1)*re*oe}getElevationForLngLatZoom(n,u){if(!c.cE(u,n.wrap()))return 0;const{tileID:d,mercatorX:y,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(n,u);return this.getElevation(d,y%c.a5,T%c.a5,c.a5)}getElevationForLngLat(n,u){const d=hn(u,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let y=0;for(const T of d)T.canonical.z>y&&(y=Math.min(T.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(n,y)}getElevation(n,u,d,y=c.a5){return this.getDEMElevation(n,u,d,y)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const y=this.painter.context,T=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(y,T,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(y,new c.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ar([])}const u=this.tileManager.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const y=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new c.T(y,u.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),u.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const d=u&&u.toString()+u.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const y=this.tileManager.getSource().maxzoom;let T=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=y?T=n.canonical.z-y:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=n.canonical.x-(n.canonical.x>>T<<T),O=n.canonical.y-(n.canonical.y>>T<<T),R=c.cF(new Float64Array(16),[1/(c.a5<<T),1/(c.a5<<T),0]);c.O(R,R,[A*c.a5,O*c.a5,0]),this._demMatrixCache[n.key]={matrix:R,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,d=u.width/devicePixelRatio,y=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(u.context,{width:d,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(u.context,{width:d,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,y,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,y))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,A=0;T<this._coordsTextureSize;T++)for(let O=0;O<this._coordsTextureSize;O++,A+=4)u[A+0]=255&O,u[A+1]=255&T,u[A+2]=O>>8<<4|T>>8,u[A+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),y=new c.T(n,d,n.gl.RGBA,{premultiply:!1});return y.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),d=this.painter.context,y=d.gl,T=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(T,O-A-1,1,1,y.RGBA,y.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null);const R=u[0]+(u[2]>>4<<8),U=u[1]+((15&u[2])<<8),V=this.coordsIndex[255-u[3]],X=V&&this.tileManager.getTileByID(V);if(!X)return null;const W=this._coordsTextureSize,re=(1<<X.tileID.canonical.z)*W;return new c.a9((X.tileID.canonical.x*W+R)/re+X.tileID.wrap,(X.tileID.canonical.y*W+U)/re,this.getElevation(X.tileID,R,U,W))}depthAtPoint(n){const u=new Uint8Array(4),d=this.painter.context,y=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(n){var u;const d=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,y=d&&n.canonical.y===0,T=d&&n.canonical.y===(1<<n.canonical.z)-1,A=`m_${y?"n":""}_${T?"s":""}`;if(this._meshCache[A])return this._meshCache[A];const O=this.painter.context,R=new c.cG,U=new c.aY,V=this.meshSize,X=c.a5/V,W=V*V;for(let we=0;we<=V;we++)for(let je=0;je<=V;je++)R.emplaceBack(je*X,we*X,0);for(let we=0;we<W;we+=V+1)for(let je=0;je<V;je++)U.emplaceBack(je+we,V+je+we+1,V+je+we+2),U.emplaceBack(je+we,V+je+we+2,je+we+1);const re=R.length,oe=re+(V+1),fe=(V+1)*V,me=y?c.br:0,pe=y?0:1,xe=T?c.bs:c.a5,Ae=T?0:1;for(let we=0;we<=V;we++)R.emplaceBack(we*X,me,pe);for(let we=0;we<=V;we++)R.emplaceBack(we*X,xe,Ae);for(let we=0;we<V;we++)U.emplaceBack(fe+we,oe+we,oe+we+1),U.emplaceBack(fe+we,oe+we+1,fe+we+1),U.emplaceBack(0+we,re+we+1,re+we),U.emplaceBack(0+we,0+we+1,re+we+1);const _e=R.length,Ee=_e+2*(V+1);for(const we of[0,1])for(let je=0;je<=V;je++)for(const et of[0,1])R.emplaceBack(we*c.a5,je*X,et);for(let we=0;we<2*V;we+=2)U.emplaceBack(_e+we,_e+we+1,_e+we+3),U.emplaceBack(_e+we,_e+we+3,_e+we+2),U.emplaceBack(Ee+we,Ee+we+3,Ee+we+1),U.emplaceBack(Ee+we,Ee+we+2,Ee+we+3);const Oe=new Xr(O.createVertexBuffer(R,xr.members),O.createIndexBuffer(U),c.aX.simpleSegment(0,0,R.length,U.length));return this._meshCache[A]=Oe,Oe}getMeshFrameDelta(n){return 2*Math.PI*c.bE/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,u){var d;if(!c.cE(u,n.wrap()))return 0;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(n,u);return(d=this.getMinMaxElevation(y).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=u.dem.min*this.exaggeration,d.maxElevation=u.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(n,u){const d=c.a9.fromLngLat(n.wrap()),y=(1<<u)*c.a5,T=d.x*y,A=d.y*y,O=Math.floor(T/c.a5),R=Math.floor(A/c.a5);return{tileID:new c.a2(u,0,u,O,R),mercatorX:T,mercatorY:A}}}class gn{constructor(n,u,d){this._context=n,this._size=u,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(d.texture),{id:n,fbo:u,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>n.id!==u)),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((n=>!n.inUse))===!1}}const ro={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class So{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new gn(n.context,30,u.tileManager.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){var d,y;this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=n._order.filter((T=>!n._layers[T].isHidden(u))),this._coordsAscending={};for(const T in n.tileManagers){this._coordsAscending[T]={};const A=n.tileManagers[T].getVisibleCoordinates(),O=n.tileManagers[T].getSource(),R=O instanceof va?O.terrainTileRanges:null;for(const U of A){const V=this.terrain.tileManager.getTerrainCoords(U,R);for(const X in V)this._coordsAscending[T][X]||(this._coordsAscending[T][X]=[]),this._coordsAscending[T][X].push(V[X])}}this._rttFingerprints={};for(const T of n._order){const A=n._layers[T],O=A.source;if(ro[A.type]&&!this._rttFingerprints[O]){this._rttFingerprints[O]={};const R=(y=(d=n.tileManagers[O])===null||d===void 0?void 0:d.getState().revision)!==null&&y!==void 0?y:0;for(const U in this._coordsAscending[O])this._rttFingerprints[O][U]=`${this._coordsAscending[O][U].map((V=>V.key)).sort().join()}#${R}`}}for(const T of this._renderableTiles)for(const A in this._rttFingerprints){const O=this._rttFingerprints[A][T.tileID.key];O&&O!==T.rttFingerprint[A]&&(T.rtt=[])}}renderLayer(n,u){if(n.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),y=n.type,T=this.painter,A=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(ro[y]&&(this._prevType&&ro[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(n.id),!A))return!0;if(ro[this._prevType]||ro[y]&&A){this._prevType=y;const O=this._stacks.length-1,R=this._stacks[O]||[];for(const U of this._renderableTiles){if(this.pool.isFull()&&(Of(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(U),U.rtt[O]){const X=this.pool.getObjectForId(U.rtt[O].id);if(X.stamp===U.rtt[O].stamp){this.pool.useObject(X);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),U.rtt[O]={id:V.id,stamp:V.stamp},T.context.bindFramebuffer.set(V.fbo.framebuffer),T.context.clear({color:c.bp.transparent,stencil:0}),T.currentStencilSource=void 0;for(let X=0;X<R.length;X++){const W=T.style._layers[R[X]],re=W.source?this._coordsAscending[W.source][U.tileID.key]:[U.tileID];T.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),T._renderTileClippingMasks(W,re,!0),T.renderLayer(T,T.style.tileManagers[W.source],W,re,d),W.source&&(U.rttFingerprint[W.source]=this._rttFingerprints[W.source][U.tileID.key])}}return Of(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),ro[y]}return!1}}const ou={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Drag to rotate map, click to reset north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},su=M,zs={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:wn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Fd={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ln{constructor(n,u,d=!1){this.mousedown=T=>{this.startMove(T,q.mousePos(this.element,T)),q.addEventListener(window,"mousemove",this.mousemove),q.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,q.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=q.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),q.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=q.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const y=new ph;this._rotatePitchHandler=new Ja({clickTolerance:3,move:(T,A)=>{const O=u.getBoundingClientRect(),R=new c.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:c.cy(new c.P(T.x,A.y),A,R),pitchDelta:d?-.5*(A.y-T.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=n,q.addEventListener(u,"mousedown",this.mousedown),q.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),q.addEventListener(u,"touchcancel",this.reset)}startMove(n,u){this._rotatePitchHandler.dragStart(n,u),q.disableDrag()}move(n,u){const d=this.map,{bearingDelta:y,pitchDelta:T}=this._rotatePitchHandler.dragMove(n,u)||{};y&&d.setBearing(d.getBearing()+y),T&&d.setPitch(d.getPitch()+T)}off(){const n=this.element;q.removeEventListener(n,"mousedown",this.mousedown),q.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.removeEventListener(window,"touchend",this.touchend),q.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){q.enableDrag(),q.removeEventListener(window,"mousemove",this.mousemove),q.removeEventListener(window,"mouseup",this.mouseup),q.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),q.removeEventListener(window,"touchend",this.touchend)}}let To;function sc(w,n,u,d=!1){if(d||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const y=new c.V(w.lng,w.lat);if(w=new c.V(w.lng,w.lat),n){const T=new c.V(w.lng-360,w.lat),A=new c.V(w.lng+360,w.lat),O=u.locationToScreenPoint(w).distSqr(n);u.locationToScreenPoint(T).distSqr(n)<O?w=T:u.locationToScreenPoint(A).distSqr(n)<O&&(w=A)}for(;Math.abs(w.lng-u.center.lng)>180;){const T=u.locationToScreenPoint(w);if(T.x>=0&&T.y>=0&&T.x<=u.width&&T.y<=u.height)break;w.lng>u.center.lng?w.lng-=360:w.lng+=360}return w.lng!==y.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(w))?w:y}const lc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function bh(w,n,u){const d=w.classList;for(const y in lc)d.remove(`maplibregl-${u}-anchor-${y}`);d.add(`maplibregl-${u}-anchor-${n}`)}class wh extends c.E{constructor(n){if(super(),this._onClick=u=>{this.fire(new c.l("click",{originalEvent:u}))},this._onKeyPress=u=>{const d=u.code,y=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=u=>{const d=u.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=sc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),q.setTransform(this._element,`${lc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${y}`),$.frameAsync(new AbortController,this._map._ownerWindow).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=c.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=q.create("div");const u=q.createNS("http://www.w3.org/2000/svg","svg"),d=41,y=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${d}px`),u.setAttributeNS(null,"width",`${y}px`),u.setAttributeNS(null,"viewBox",`0 0 ${y} ${d}`);const T=q.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const A=q.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const O=q.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const pe of R){const xe=q.createNS("http://www.w3.org/2000/svg","ellipse");xe.setAttributeNS(null,"opacity","0.04"),xe.setAttributeNS(null,"cx","10.5"),xe.setAttributeNS(null,"cy","5.80029008"),xe.setAttributeNS(null,"rx",pe.rx),xe.setAttributeNS(null,"ry",pe.ry),O.appendChild(xe)}const U=q.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const V=q.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild(V);const X=q.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const W=q.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(W);const re=q.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");const oe=q.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const fe=q.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#000000"),fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962");const me=q.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),oe.appendChild(fe),oe.appendChild(me),A.appendChild(O),A.appendChild(U),A.appendChild(X),A.appendChild(re),A.appendChild(oe),u.appendChild(A),u.setAttributeNS(null,"height",d*this._scale+"px"),u.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),bh(this._element,this._anchor,"marker"),this._element.addEventListener("click",this._onClick),n&&n.className)for(const u of n.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),q.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.V.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const y=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var u,d;const y=(u=this._map)===null||u===void 0?void 0:u.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!y||T){const re=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==re&&(this._element.style.opacity=re))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const A=this._map,O=A.terrain.depthAtPoint(this._pos),R=A.terrain.getElevationForLngLat(this._lngLat,A.transform);if(A.transform.lngLatToCameraDepth(this._lngLat,R)-O<.006)return void(this._element.style.opacity=this._opacity);const U=-this._offset.y/A.transform.pixelsPerMeter,V=Math.sin(A.getPitch()*Math.PI/180)*U,X=A.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),W=A.transform.lngLatToCameraDepth(this._lngLat,R+V)-X>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=c.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,u){return(this._opacity===void 0||n===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Sh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let yl=0,ks=!1;const Si={maxWidth:100,unit:"metric"};function yn(w,n,u){const d=u&&u.maxWidth||100,y=w._container.clientHeight/2,T=w._container.clientWidth/2,A=w.unproject([T-d/2,y]),O=w.unproject([T+d/2,y]),R=Math.round(w.project(O).x-w.project(A).x),U=Math.min(d,R,w._container.clientWidth),V=A.distanceTo(O);if(u&&u.unit==="imperial"){const X=3.2808*V;X>5280?ss(n,U,X/5280,w._getUIString("ScaleControl.Miles")):ss(n,U,X,w._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ss(n,U,V/1852,w._getUIString("ScaleControl.NauticalMiles")):V>=1e3?ss(n,U,V/1e3,w._getUIString("ScaleControl.Kilometers")):ss(n,U,V,w._getUIString("ScaleControl.Meters"))}function ss(w,n,u,d){const y=(function(T){const A=Math.pow(10,`${Math.floor(T)}`.length-1);let O=T/A;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(R){const U=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*U)/U})(O),A*O})(u);w.style.width=n*(y/u)+"px",w.innerHTML=`${y}&nbsp;${d}`}const lu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},uu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function uc(w){if(w){if(typeof w=="number"){const n=Math.round(Math.abs(w)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,w),"top-left":new c.P(n,n),"top-right":new c.P(-n,n),bottom:new c.P(0,-w),"bottom-left":new c.P(n,-n),"bottom-right":new c.P(-n,-n),left:new c.P(w,0),right:new c.P(-w,0)}}if(w instanceof c.P||Array.isArray(w)){const n=c.P.convert(w);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.P.convert(w.center||[0,0]),top:c.P.convert(w.top||[0,0]),"top-left":c.P.convert(w["top-left"]||[0,0]),"top-right":c.P.convert(w["top-right"]||[0,0]),bottom:c.P.convert(w.bottom||[0,0]),"bottom-left":c.P.convert(w["bottom-left"]||[0,0]),"bottom-right":c.P.convert(w["bottom-right"]||[0,0]),left:c.P.convert(w.left||[0,0]),right:c.P.convert(w.right||[0,0])}}return uc(new c.P(0,0))}const Eo=M;_.AJAXError=c.cJ,_.EXTENT=c.a5,_.Event=c.l,_.Evented=c.E,_.LngLat=c.V,_.MercatorCoordinate=c.a9,_.Point=c.P,_.addProtocol=c.cK,_.config=c.c,_.removeProtocol=c.cL,_.AttributionControl=On,_.BoxZoomHandler=ml,_.CanvasSource=vs,_.CooperativeGesturesHandler=jt,_.DoubleClickZoomHandler=Nf,_.DragPanHandler=Bd,_.DragRotateHandler=Pa,_.EdgeInsets=xa,_.FullscreenControl=class extends c.E{constructor(w={}){var n;super(),this._onFullscreenChange=()=>{var u;let d=window.document.fullscreenElement||window.document.webkitFullscreenElement;for(;!((u=d?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,this._pseudo=(n=w.pseudo)!==null&&n!==void 0&&n,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){q.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=q.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);q.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){this._pseudo?this._togglePseudoFullScreen():window.document.exitFullscreen?window.document.exitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._pseudo?this._togglePseudoFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},_.GeoJSONSource=ri,_.GeolocateControl=class extends c.E{constructor(w){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const u=new c.V(n.coords.longitude,n.coords.latitude),d=n.coords.accuracy,y=this._map.getBearing(),T=c.e({bearing:y},this.options.fitBoundsOptions),A=Rr.fromLngLat(u,d);this._map.fitBounds(A,T,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const u=new c.V(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&ks)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this._geolocateButton=q.create("button","maplibregl-ctrl-geolocate",this._container),q.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new wh({element:this._dotElement}),this._circleElement=q.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{const d=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},Sh,w)}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(n=!1){if(To!==void 0&&!n)return To;if(window.navigator.permissions===void 0)return To=!!window.navigator.geolocation,To;try{To=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{To=!!window.navigator.geolocation}return To}))})().then((n=>this._finishSetupUI(n))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),q.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,yl=0,ks=!1}_isOutOfMapMaxBounds(w){const n=this._map.getMaxBounds(),u=w.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const n=this._map.project(w),u=this._map.unproject([n.x+100,n.y]),d=w.distanceTo(u)/100,y=2*this._accuracy/d;this._circleElement.style.width=`${y.toFixed(2)}px`,this._circleElement.style.height=`${y.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":yl--,ks=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),yl++,yl>1?(w={maximumAge:6e5,timeout:0},ks=!0):(w=this.options.positionOptions,ks=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},_.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const n=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=q.create("button","maplibregl-ctrl-globe",this._container),q.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._map.on("projectiontransition",this._updateGlobeIcon),this._container}onRemove(){q.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._map.off("projectiontransition",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},_.Hash=Nn,_.ImageSource=va,_.KeyboardHandler=Ur,_.LngLatBounds=Rr,_.LogoControl=xh,_.Map=class extends Bn{get _ownerWindow(){var w,n;return((n=(w=this._container)===null||w===void 0?void 0:w.ownerDocument)===null||n===void 0?void 0:n.defaultView)||window}constructor(w){var n,u;c.cH.mark(c.cI.create);const d=Object.assign(Object.assign(Object.assign({},zs),w),{canvasContextAttributes:Object.assign(Object.assign({},zs.canvasContextAttributes),w.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new Yn,T=new $l;d.minZoom!==void 0&&y.setMinZoom(d.minZoom),d.maxZoom!==void 0&&y.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&y.setMinPitch(d.minPitch),d.maxPitch!==void 0&&y.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&y.setRenderWorldCopies(d.renderWorldCopies),d.transformConstrain!==null&&y.setConstrainOverride(d.transformConstrain),super(y,T,{bearingSnap:d.bearingSnap,zoomSnap:d.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Is,this._controls=[],this._mapId=c.af(),this._lostContextStyle={style:null,images:null},this._contextLost=O=>{if(O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy(),this._lostContextStyle=this._getStyleAndImages(),this.style){for(const R of Object.values(this.style._layers))if(R.type==="custom"&&console.warn(`Custom layer with id '${R.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),R._listeners)for(const[U]of Object.entries(R._listeners))console.warn(`Custom layer with id '${R.id}' had event listeners for event '${U}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this.style.destroy(),this.style=null,this.fire(new c.l("webglcontextlost",{originalEvent:O}))}else this.fire(new c.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new c.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._zoomSnap=d.zoomSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ou),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this._zoomLevelsToOverscale=d.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=d.transformCameraUpdate,this.transformConstrain=d.transformConstrain,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,d.reduceMotion!==void 0&&($.prefersReducedMotion=d.reduceMotion),this._imageQueueHandle=Re.addThrottleControl((()=>this.isMoving())),this._requestManager=new ot(d.transformRequest),this._container=this._resolveContainer(d.container),d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new _h(this,d),this._hash=d.hash&&new Nn(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,c.e({},d.fitBoundsOptions,{duration:0}))));const A=typeof d.style=="string"||((u=(n=d.style)===null||n===void 0?void 0:n.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,A),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new On(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new xh,d.logoPosition),this.on("style.load",(()=>{if(A||this._resizeTransform(),this.transform.unmodified){const O=c.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}})),this.on("data",(O=>{this._update(O.dataType==="style"),this.fire(new c.l(`${O.dataType}data`,O))})),this.on("dataloading",(O=>{this.fire(new c.l(`${O.dataType}dataloading`,O))})),this.on("dataabort",(O=>{this.fire(new c.l("sourcedataabort",O))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,n){return this.style.setGlobalStateProperty(w,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,n){if(n===void 0&&(n=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=w.onAdd(this);this._controls.push(w);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(w);return n>-1&&this._controls.splice(n,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return hn(this.transform,w)}calculateCameraOptionsFromTo(w,n,u,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLat(u,this.transform)),super.calculateCameraOptionsFromTo(w,n,u,d)}resize(w,n=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(n);const u=!this._moving;return u&&(this.stop(),this.fire(new c.l("movestart",w)).fire(new c.l("move",w))),this.fire(new c.l("resize",w)),u&&this.fire(new c.l("moveend",w)),this}_resizeInternal(w=!0){const[n,u]=this._containerDimensions(),d=this._getClampedPixelRatio(n,u);if(this._resizeCanvas(n,u,d),this.painter.resize(n,u,d),this.painter.overLimit()){const y=this.painter.context.gl;this._maxCanvasSize=[y.drawingBufferWidth,y.drawingBufferHeight];const T=this._getClampedPixelRatio(n,u);this._resizeCanvas(n,u,T),this.painter.resize(n,u,T)}this._resizeTransform(w)}_resizeTransform(w=!0){var n;const[u,d]=this._containerDimensions();this.transform.resize(u,d,w),(n=this._requestedCameraState)===null||n===void 0||n.resize(u,d,w)}_getClampedPixelRatio(w,n){const{0:u,1:d}=this._maxCanvasSize,y=this.getPixelRatio(),T=w*y,A=n*y;return Math.min(T>u?u/T:1,A>d?d/A:1)*y}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Rr.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const n=this.transform.zoom,u=this._getTransformForUpdate();return u.setMinZoom(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.zoom&&this.fire(new c.l("zoomstart")).fire(new c.l("zoom")).fire(new c.l("zoomend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const n=this.transform.zoom,u=this._getTransformForUpdate();return u.setMaxZoom(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.zoom&&this.fire(new c.l("zoomstart")).fire(new c.l("zoom")).fire(new c.l("zoomend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch){const n=this.transform.pitch,u=this._getTransformForUpdate();return u.setMinPitch(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.pitch&&this.fire(new c.l("pitchstart")).fire(new c.l("pitch")).fire(new c.l("pitchend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch){const n=this.transform.pitch,u=this._getTransformForUpdate();return u.setMaxPitch(w),this._applyUpdatedTransform(u),this._update(),n!==this.transform.pitch&&this.fire(new c.l("pitchstart")).fire(new c.l("pitch")).fire(new c.l("pitchend")).fire(new c.l("movestart")).fire(new c.l("move")).fire(new c.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(c.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(c.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,n,u){if(w==="mouseenter"||w==="mouseover"){let d=!1;return{layers:n,listener:u,delegates:{mousemove:T=>{const A=n.filter((R=>this.getLayer(R))),O=A.length!==0?this.queryRenderedFeatures(T.point,{layers:A}):[];O.length?d||(d=!0,u.call(this,new oi(w,this,T.originalEvent,{features:O}))):d=!1},mouseout:()=>{d=!1}}}}if(w==="mouseleave"||w==="mouseout"){let d=!1;return{layers:n,listener:u,delegates:{mousemove:A=>{const O=n.filter((R=>this.getLayer(R)));(O.length!==0?this.queryRenderedFeatures(A.point,{layers:O}):[]).length?d=!0:d&&(d=!1,u.call(this,new oi(w,this,A.originalEvent)))},mouseout:A=>{d&&(d=!1,u.call(this,new oi(w,this,A.originalEvent)))}}}}{const d=y=>{const T=n.filter((O=>this.getLayer(O))),A=T.length!==0?this.queryRenderedFeatures(y.point,{layers:T}):[];A.length&&(y.features=A,u.call(this,y),delete y.features)};return{layers:n,listener:u,delegates:{[w]:d}}}}_saveDelegatedListener(w,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(n)}_removeDelegatedListener(w,n,u){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const d=this._delegatedListeners[w];for(let y=0;y<d.length;y++){const T=d[y];if(T.listener===u&&T.layers.length===n.length&&T.layers.every((A=>n.includes(A)))){for(const A in T.delegates)this.off(A,T.delegates[A]);return void d.splice(y,1)}}}on(w,n,u){if(u===void 0)return super.on(w,n);const d=typeof n=="string"?[n]:n,y=this._createDelegatedListener(w,d,u);this._saveDelegatedListener(w,y);for(const T in y.delegates)this.on(T,y.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(w,d,u)}}}once(w,n,u){if(u===void 0)return super.once(w,n);const d=typeof n=="string"?[n]:n,y=this._createDelegatedListener(w,d,u);for(const T in y.delegates){const A=y.delegates[T];y.delegates[T]=(...O)=>{this._removeDelegatedListener(w,d,u),A(...O)}}this._saveDelegatedListener(w,y);for(const T in y.delegates)this.once(T,y.delegates[T]);return this}off(w,n,u){return u===void 0?super.off(w,n):(this._removeDelegatedListener(w,typeof n=="string"?[n]:n,u),this)}queryRenderedFeatures(w,n){if(!this.style)return[];let u;const d=w instanceof c.P||Array.isArray(w),y=d?w:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:w)||{},y instanceof c.P||typeof y[0]=="number")u=[c.P.convert(y)];else{const T=c.P.convert(y[0]),A=c.P.convert(y[1]);u=[T,new c.P(A.x,T.y),A,new c.P(T.x,A.y),T]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(w,n){return this.style.querySourceFeatures(w,n)}setStyle(w,n){return(n=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(w,n))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const n=this._locale[w];if(n==null)throw new Error(`Missing UI string '${w}'`);return n}_updateStyle(w,n){var u,d;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,n)));const y=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new al(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,n,y):this.style.loadJSON(w,n,y),this):((d=(u=this.style)===null||u===void 0?void 0:u.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new al(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,n){if(typeof w=="string"){const u=this._requestManager.transformRequest(w,"Style");c.j(u,new AbortController).then((d=>{this._updateDiff(d.data,n)})).catch((d=>{d&&this.fire(new c.k(d))}))}else typeof w=="object"&&this._updateDiff(w,n)}_updateDiff(w,n){try{this.style.setState(w,n)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(w,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(w,n){return this._lazyInitEmptyStyle(),this.style.addSource(w,n),this._update(!0)}isSourceLoaded(w){const n=this.style&&this.style.tileManagers[w];if(n!==void 0)return n.loaded();this.fire(new c.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const n=this.style.tileManagers[w.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&n.reload();for(const u in this.style._layers){const d=this.style._layers[u];d.type==="hillshade"&&d.source===w.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===w.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vr(this.painter,n,w),this.painter.renderToTexture=new So(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var d;u.dataType==="style"?this.terrain.tileManager.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=u.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:w})),this}getTerrain(){var w,n;return(n=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const n of Object.values(w))if(!n.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,n,u){if(u){const d=this.getSource(u);if(!d)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);d.calculateTileZoom=Qt(Math.max(1,w),Math.max(1,n))}else for(const d in this.style.tileManagers)this.style.tileManagers[d].getSource().calculateTileZoom=Qt(Math.max(1,w),Math.max(1,n));return this._update(!0),this}refreshTiles(w,n){const u=this.style.tileManagers[w];if(!u)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);n===void 0?u.reload(!0):u.refreshTiles(n.map((d=>new c.ac(d.z,d.x,d.y))))}addImage(w,n,u={}){const{pixelRatio:d=1,sdf:y=!1,stretchX:T,stretchY:A,content:O,textFitWidth:R,textFitHeight:U}=u;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||c.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:V,height:X,data:W}=n,re=n;return this.style.addImage(w,{data:new c.R({width:V,height:X},new Uint8Array(W)),pixelRatio:d,stretchX:T,stretchY:A,content:O,textFitWidth:R,textFitHeight:U,sdf:y,version:0,userImage:re}),re.onAdd&&re.onAdd(this,w),this}}{const{width:V,height:X,data:W}=$.getImageData(n);this.style.addImage(w,{data:new c.R({width:V,height:X},W),pixelRatio:d,stretchX:T,stretchY:A,content:O,textFitWidth:R,textFitHeight:U,sdf:y,version:0})}}updateImage(w,n){const u=this.style.getImage(w);if(!u)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||c.b(n)?$.getImageData(n):n,{width:y,height:T,data:A}=d;if(y===void 0||T===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==u.data.width||T!==u.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(n instanceof HTMLImageElement||c.b(n));return u.data.replace(A,O),this.style.updateImage(w,u),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Re.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,n){return this._lazyInitEmptyStyle(),this.style.addLayer(w,n),this._update(!0)}moveLayer(w,n){return this.style.moveLayer(w,n),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,n,u){return this.style.setLayerZoomRange(w,n,u),this._update(!0)}setFilter(w,n,u={}){return this.style.setFilter(w,n,u),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,n,u,d={}){return this.style.setPaintProperty(w,n,u,d),this._update(!0)}getPaintProperty(w,n){return this.style.getPaintProperty(w,n)}setLayoutProperty(w,n,u,d={}){return this.style.setLayoutProperty(w,n,u,d),this._update(!0)}getLayoutProperty(w,n){return this.style.getLayoutProperty(w,n)}setGlyphs(w,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,n,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,n,u,(d=>{d||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,n,(u=>{u||this._update(!0)})),this}setLight(w,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,n){return this.style.setFeatureState(w,n),this._update()}removeFeatureState(w,n){return this.style.removeFeatureState(w,n),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,n=0;return this._container&&(w=this._container.clientWidth||400,n=this._container.clientHeight||300),[w,n]}_setupResizeObserver(){var w;let n=!1;const u=Ld((y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())}),50),d=(w=this._ownerWindow.ResizeObserver)!==null&&w!==void 0?w:ResizeObserver;this._resizeObserver=new d((y=>{n?u(y):n=!0})),this._resizeObserver.observe(this._container)}_resolveContainer(w){if(typeof w=="string"){const n=document.getElementById(w);if(!n)throw new Error(`Container '${w}' not found.`);return n}if(w instanceof HTMLElement||w&&typeof w=="object"&&w.nodeType===1)return w;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const n=this._canvasContainer=q.create("div","maplibregl-canvas-container",w);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=q.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),d=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],d);const y=this._controlContainer=q.create("div","maplibregl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((A=>{T[A]=q.create("div",`maplibregl-ctrl-${A} `,y)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,n,u){this._canvas.width=Math.floor(u*w),this._canvas.height=Math.floor(u*n),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",(d=>{n={requestedAttributes:w},d&&(n.statusMessage=d.statusMessage,n.type=d.type)}),{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!u){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new dm(u,this.transform),he.testSupport(u)}migrateProjection(w,n){super.migrateProjection(w,n),this.painter.transform=w,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var n,u,d,y,T;const A=this._idleTriggered?this._fadeDuration:0,O=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const X=this.transform.zoom,W=K();this.style.zoomHistory.update(X,W);const re=new c.H(X,{now:W,fadeDuration:A,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),oe=re.crossFadingFactor();oe===1&&oe===this._crossFadingFactor||(R=!0,this._crossFadingFactor=oe),this.style.update(re)}const U=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==O;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||U)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,A,this._crossSourceCollisions,U),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:A,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cH.mark(c.cI.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,c.cH.mark(c.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),Re.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),q.remove(this._canvasContainer),q.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cH.remove(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,$.frame(this._frameRequest,(w=>{c.cH.recordStartOfFrameAt(w),this._frameRequest=null;try{this._render(w)}catch(n){if(!c.Z(n)&&!(function(u){return u.message===dl})(n))throw n}}),(()=>{}),this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return su}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},_.MapMouseEvent=oi,_.MapTouchEvent=xo,_.MapWheelEvent=If,_.Marker=wh,_.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const n=this._map.getZoom(),u=n===this._map.getMaxZoom(),d=n===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,u)=>{const d=this._map._getUIString(`NavigationControl.${u}`);n.title=d,n.setAttribute("aria-label",d)},this.options=c.e({},Fd,w),this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(n=>this._map.zoomIn({},{originalEvent:n}))),q.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(n=>this._map.zoomOut({},{originalEvent:n}))),q.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})})),this._compassIcon=q.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ln(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){q.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,n){const u=q.create("button",w,this._container);return u.type="button",u.addEventListener("click",n),u}},_.Popup=class extends c.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&q.remove(this._content),this._container&&(q.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=q.create("div","maplibregl-popup",this._map.getContainer()),this._tip=q.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=sc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const u=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor;const y=uc(this.options.offset);if(!d){const A=this._container.offsetWidth,O=this._container.offsetHeight,R=(function(V){var X,W,re,oe;return V?{top:(X=V.top)!==null&&X!==void 0?X:0,right:(W=V.right)!==null&&W!==void 0?W:0,bottom:(re=V.bottom)!==null&&re!==void 0?re:0,left:(oe=V.left)!==null&&oe!==void 0?oe:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let U;U=u.y+y.bottom.y<O+R.top?["top"]:u.y>this._map.transform.height-O-R.bottom?["bottom"]:[],u.x<A/2+R.left?U.push("left"):u.x>this._map.transform.width-A/2-R.right&&U.push("right"),d=U.length===0?"bottom":U.join("-")}let T=u.add(y[d]);this.options.subpixelPositioning||(T=T.round()),q.setTransform(this._container,`${lc[d]} translate(${T.x}px,${T.y}px)`),bh(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(lu),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=c.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const n=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=w;d=u.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=q.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}setPadding(w){this.options.padding=w,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=q.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(uu);w&&w.focus()}},_.RasterDEMTileSource=No,_.RasterTileSource=ys,_.ScaleControl=class{constructor(w){this._onMove=()=>{yn(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,yn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Si),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){q.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},_.ScrollZoomHandler=yh,_.Style=al,_.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=q.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=q.create("button","maplibregl-ctrl-terrain",this._container),q.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){q.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},_.TwoFingersTouchPitchHandler=Ds,_.TwoFingersTouchRotateHandler=gh,_.TwoFingersTouchZoomHandler=as,_.TwoFingersTouchZoomRotateHandler=au,_.VectorTileSource=Ys,_.VideoSource=Nu,_.addSourceType=(w,n)=>c._(void 0,void 0,void 0,(function*(){if(Bc(w))throw new Error(`A source type called "${w}" already exists.`);((u,d)=>{_s[u]=d})(w,n)})),_.clearPrewarmedResources=function(){const w=Gt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(zt),Gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},_.createTileMesh=em,_.getMaxParallelImageRequests=function(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS},_.getRTLTextPluginStatus=function(){return ne().getRTLTextPluginStatus()},_.getVersion=function(){return Eo},_.getWorkerCount=function(){return qt.workerCount},_.getWorkerUrl=function(){return c.c.WORKER_URL},_.importScriptInWorkers=function(w){return mr().broadcast("IS",w)},_.isTimeFrozen=function(){return Y.isFrozen()},_.now=K,_.prewarm=function(){mt().acquire(zt)},_.restoreNow=function(){Y.restoreNow()},_.setMaxParallelImageRequests=function(w){c.c.MAX_PARALLEL_IMAGE_REQUESTS=w},_.setNow=function(w){Y.setNow(w)},_.setRTLTextPlugin=function(w,n){return ne().setRTLTextPlugin(w,n)},_.setWorkerCount=function(w){qt.workerCount=w},_.setWorkerUrl=function(w){c.c.WORKER_URL=w}}));var v=i;return v}))})(T0)),T0.exports}var T3=S3();const md=ef(T3);var Gs=Uint8Array,Mg=Uint16Array,E3=Int32Array,kP=new Gs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),RP=new Gs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),A3=new Gs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),LP=function(e,t){for(var i=new Mg(31),l=0;l<31;++l)i[l]=t+=1<<e[l-1];for(var m=new E3(i[30]),l=1;l<30;++l)for(var v=i[l];v<i[l+1];++v)m[v]=v-i[l]<<5|l;return{b:i,r:m}},jP=LP(kP,2),NP=jP.b,M3=jP.r;NP[28]=258,M3[258]=28;var C3=LP(RP,0),P3=C3.b,bw=new Mg(32768);for(var Wn=0;Wn<32768;++Wn){var ld=(Wn&43690)>>1|(Wn&21845)<<1;ld=(ld&52428)>>2|(ld&13107)<<2,ld=(ld&61680)>>4|(ld&3855)<<4,bw[Wn]=((ld&65280)>>8|(ld&255)<<8)>>1}var mv=(function(e,t,i){for(var l=e.length,m=0,v=new Mg(t);m<l;++m)e[m]&&++v[e[m]-1];var _=new Mg(t);for(m=1;m<t;++m)_[m]=_[m-1]+v[m-1]<<1;var c;if(i){c=new Mg(1<<t);var M=15-t;for(m=0;m<l;++m)if(e[m])for(var P=m<<4|e[m],D=t-e[m],z=_[e[m]-1]++<<D,F=z|(1<<D)-1;z<=F;++z)c[bw[z]>>M]=P}else for(c=new Mg(l),m=0;m<l;++m)e[m]&&(c[m]=bw[_[e[m]-1]++]>>15-e[m]);return c}),Nv=new Gs(288);for(var Wn=0;Wn<144;++Wn)Nv[Wn]=8;for(var Wn=144;Wn<256;++Wn)Nv[Wn]=9;for(var Wn=256;Wn<280;++Wn)Nv[Wn]=7;for(var Wn=280;Wn<288;++Wn)Nv[Wn]=8;var BP=new Gs(32);for(var Wn=0;Wn<32;++Wn)BP[Wn]=5;var D3=mv(Nv,9,1),O3=mv(BP,5,1),Fb=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Du=function(e,t,i){var l=t/8|0;return(e[l]|e[l+1]<<8)>>(t&7)&i},Ub=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},I3=function(e){return(e+7)/8|0},z3=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new Gs(e.subarray(t,i))},k3=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],qs=function(e,t,i){var l=new Error(t||k3[e]);if(l.code=e,Error.captureStackTrace&&Error.captureStackTrace(l,qs),!i)throw l;return l},T2=function(e,t,i,l){var m=e.length,v=0;if(!m||t.f&&!t.l)return i||new Gs(0);var _=!i,c=_||t.i!=2,M=t.i;_&&(i=new Gs(m*3));var P=function(mr){var Et=i.length;if(mr>Et){var An=new Gs(Math.max(Et*2,mr));An.set(i),i=An}},D=t.f||0,z=t.p||0,F=t.b||0,$=t.l,Y=t.d,K=t.m,q=t.n,he=m*8;do{if(!$){D=Du(e,z,1);var ye=Du(e,z+1,3);if(z+=3,ye)if(ye==1)$=D3,Y=O3,K=9,q=5;else if(ye==2){var Pe=Du(e,z,31)+257,Re=Du(e,z+10,15)+4,ot=Pe+Du(e,z+5,31)+1;z+=14;for(var bt=new Gs(ot),kt=new Gs(19),We=0;We<Re;++We)kt[A3[We]]=Du(e,z+We*3,7);z+=Re*3;for(var Ve=Fb(kt),Ot=(1<<Ve)-1,Ue=mv(kt,Ve,1),We=0;We<ot;){var Je=Ue[Du(e,z,Ot)];z+=Je&15;var ge=Je>>4;if(ge<16)bt[We++]=ge;else{var Le=0,Ge=0;for(ge==16?(Ge=3+Du(e,z,3),z+=2,Le=bt[We-1]):ge==17?(Ge=3+Du(e,z,7),z+=3):ge==18&&(Ge=11+Du(e,z,127),z+=7);Ge--;)bt[We++]=Le}}var st=bt.subarray(0,Pe),pt=bt.subarray(Pe);K=Fb(st),q=Fb(pt),$=mv(st,K,1),Y=mv(pt,q,1)}else qs(1);else{var ge=I3(z)+4,Te=e[ge-4]|e[ge-3]<<8,ke=ge+Te;if(ke>m){M&&qs(0);break}c&&P(F+Te),i.set(e.subarray(ge,ke),F),t.b=F+=Te,t.p=z=ke*8,t.f=D;continue}if(z>he){M&&qs(0);break}}c&&P(F+131072);for(var Rt=(1<<K)-1,De=(1<<q)-1,lt=z;;lt=z){var Le=$[Ub(e,z)&Rt],Mt=Le>>4;if(z+=Le&15,z>he){M&&qs(0);break}if(Le||qs(2),Mt<256)i[F++]=Mt;else if(Mt==256){lt=z,$=null;break}else{var zt=Mt-254;if(Mt>264){var We=Mt-257,qt=kP[We];zt=Du(e,z,(1<<qt)-1)+NP[We],z+=qt}var Yt=Y[Ub(e,z)&De],Gt=Yt>>4;Yt||qs(3),z+=Yt&15;var pt=P3[Gt];if(Gt>3){var qt=RP[Gt];pt+=Ub(e,z)&(1<<qt)-1,z+=qt}if(z>he){M&&qs(0);break}c&&P(F+131072);var Ar=F+zt;if(F<pt){var mt=v-pt,or=Math.min(pt,Ar);for(mt+F<0&&qs(3);F<or;++F)i[F]=l[mt+F]}for(;F<Ar;++F)i[F]=i[F-pt]}}t.l=$,t.p=lt,t.b=F,t.f=D,$&&(D=1,t.m=K,t.d=Y,t.n=q)}while(!D);return F!=i.length&&_?z3(i,0,F):i.subarray(0,F)},R3=new Gs(0),L3=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&qs(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=(e[10]|e[11]<<8)+2);for(var l=(t>>3&1)+(t>>4&1);l>0;l-=!e[i++]);return i+(t&2)},j3=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},N3=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&qs(6,"invalid zlib data"),(e[1]>>5&1)==1&&qs(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function B3(e,t){return T2(e,{i:2},t,t)}function F3(e,t){var i=L3(e);return i+8>e.length&&qs(6,"invalid gzip data"),T2(e.subarray(i,-8),{i:2},new Gs(j3(e)),t)}function U3(e,t){return T2(e.subarray(N3(e),-4),{i:2},t,t)}function V3(e,t){return e[0]==31&&e[1]==139&&e[2]==8?F3(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?B3(e,t):U3(e,t)}var q3=typeof TextDecoder<"u"&&new TextDecoder,G3=0;try{q3.decode(R3,{stream:!0}),G3=1}catch{}var $3=Object.defineProperty,Z3=Math.pow,En=(e,t)=>$3(e,"name",{value:t,configurable:!0}),fa=(e,t,i)=>new Promise((l,m)=>{var v=M=>{try{c(i.next(M))}catch(P){m(P)}},_=M=>{try{c(i.throw(M))}catch(P){m(P)}},c=M=>M.done?l(M.value):Promise.resolve(M.value).then(v,_);c((i=i.apply(e,t)).next())});En((e,t)=>{let i=!1,l="",m=L.GridLayer.extend({createTile:En((v,_)=>{let c=document.createElement("img"),M=new AbortController,P=M.signal;return c.cancel=()=>{M.abort()},i||(e.getHeader().then(D=>{D.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):D.tileType===2?l="image/png":D.tileType===3?l="image/jpeg":D.tileType===4?l="image/webp":D.tileType===5&&(l="image/avif")}),i=!0),e.getZxy(v.z,v.x,v.y,P).then(D=>{if(D){let z=new Blob([D.data],{type:l}),F=window.URL.createObjectURL(z);c.src=F}else c.style.display="none";c.cancel=void 0,_(void 0,c)}).catch(D=>{if(D.name!=="AbortError")throw D}),c},"createTile"),_removeTile:En(function(v){let _=this._tiles[v];_&&(_.el.cancel&&_.el.cancel(),_.el.width=0,_.el.height=0,_.el.deleted=!0,L.DomUtil.remove(_.el),delete this._tiles[v],this.fire("tileunload",{tile:_.el,coords:this._keyToTileCoords(v)}))},"_removeTile")});return new m(t)},"leafletRasterLayer");var H3=En(e=>(t,i)=>{if(i instanceof AbortController)return e(t,i);let l=new AbortController;return e(t,l).then(m=>i(void 0,m.data,m.cacheControl||"",m.expires||""),m=>i(m)).catch(m=>i(m)),{cancel:En(()=>l.abort(),"cancel")}},"v3compat"),FP=class{constructor(t){this.tilev4=En((i,l)=>fa(this,null,function*(){if(i.type==="json"){let $=i.url.substr(10),Y=this.tiles.get($);if(Y||(Y=new vv($),this.tiles.set($,Y)),this.metadata){let q=yield Y.getTileJson(i.url);return l.signal.throwIfAborted(),{data:q}}let K=yield Y.getHeader();return l.signal.throwIfAborted(),(K.minLon>=K.maxLon||K.minLat>=K.maxLat)&&console.error(`Bounds of PMTiles archive ${K.minLon},${K.minLat},${K.maxLon},${K.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:K.minZoom,maxzoom:K.maxZoom,bounds:[K.minLon,K.minLat,K.maxLon,K.maxLat]}}}let m=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),v=i.url.match(m);if(!v)throw new Error("Invalid PMTiles protocol URL");let _=v[1],c=this.tiles.get(_);c||(c=new vv(_),this.tiles.set(_,c));let M=v[2],P=v[3],D=v[4],z=yield c.getHeader(),F=yield c?.getZxy(+M,+P,+D,l.signal);if(l.signal.throwIfAborted(),F)return{data:new Uint8Array(F.data),cacheControl:F.cacheControl,expires:F.expires};if(z.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=H3(this.tilev4),this.tiles=new Map,this.metadata=t?.metadata||!1,this.errorOnMissingTile=t?.errorOnMissingTile||!1}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};En(FP,"Protocol");var UP=FP;function VP(e,t){return(t>>>0)*4294967296+(e>>>0)}En(VP,"toNum");function qP(e,t){let i=t.buf,l=i[t.pos++],m=(l&112)>>4;if(l<128||(l=i[t.pos++],m|=(l&127)<<3,l<128)||(l=i[t.pos++],m|=(l&127)<<10,l<128)||(l=i[t.pos++],m|=(l&127)<<17,l<128)||(l=i[t.pos++],m|=(l&127)<<24,l<128)||(l=i[t.pos++],m|=(l&1)<<31,l<128))return VP(e,m);throw new Error("Expected varint not more than 10 bytes")}En(qP,"readVarintRemainder");function Eg(e){let t=e.buf,i=t[e.pos++],l=i&127;return i<128||(i=t[e.pos++],l|=(i&127)<<7,i<128)||(i=t[e.pos++],l|=(i&127)<<14,i<128)||(i=t[e.pos++],l|=(i&127)<<21,i<128)?l:(i=t[e.pos],l|=(i&15)<<28,qP(l,e))}En(Eg,"readVarint");function E2(e,t,i,l,m){return m===0?l!==0?[e-1-i,e-1-t]:[i,t]:[t,i]}En(E2,"rotate");function GP(e,t,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(t>=1<<e||i>=1<<e)throw new Error("tile x/y outside zoom level bounds");let l=((1<<e)*(1<<e)-1)/3,m=e-1,[v,_]=[t,i];for(let c=1<<m;c>0;c>>=1){let M=v&c,P=_&c;l+=(3*M^P)*(1<<m),[v,_]=E2(c,v,_,M,P),m--}return l}En(GP,"zxyToTileId");function $P(e){let t=3*e+1;return t<4294967296?31-Math.clz32(t):63-Math.clz32(t/4294967296)}En($P,"tileIdToZ");function W3(e){let t=$P(e)>>1;if(t>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let i=((1<<t)*(1<<t)-1)/3,l=e-i,m=0,v=0,_=1<<t;for(let c=1;c<_;c<<=1){let M=c&l/2,P=c&(l^M);[m,v]=E2(c,m,v,M,P),l=l/2,m+=M,v+=P}return[t,m,v]}En(W3,"tileIdToZxy");var X3=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(X3||{});function Ax(e,t){return fa(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return V3(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let l=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(l).arrayBuffer()}throw new Error("Compression method not supported")})}En(Ax,"defaultDecompress");var Y3=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e[e.Mlt=6]="Mlt",e))(Y3||{});function ZP(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":e===6?".mlt":""}En(ZP,"tileTypeExt");var K3=127;function HP(e,t){let i=0,l=e.length-1;for(;i<=l;){let m=l+i>>1,v=t-e[m].tileId;if(v>0)i=m+1;else if(v<0)l=m-1;else return e[m]}return l>=0&&(e[l].runLength===0||t-e[l].tileId<e[l].runLength)?e[l]:null}En(HP,"findTile");var Q3=class{constructor(t){this.file=t}getKey(){return this.file.name}getBytes(t,i){return fa(this,null,function*(){return{data:yield this.file.slice(t,t+i).arrayBuffer()}})}};En(Q3,"FileSource");var WP=class{constructor(t,i=new Headers){var l,m;this.url=t,this.customHeaders=i,this.mustReload=!1;let v="";"navigator"in globalThis&&(v=(m=(l=globalThis.navigator)==null?void 0:l.userAgent)!=null?m:"");let _=v.indexOf("Windows")>-1,c=/Chrome|Chromium|Edg|OPR|Brave/.test(v);this.chromeWindowsNoCache=!1,_&&c&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,i,l,m){return fa(this,null,function*(){let v,_;l?_=l:(v=new AbortController,_=v.signal);let c=new Headers(this.customHeaders);c.set("range",`bytes=${t}-${t+i-1}`);let M;this.mustReload?M="reload":this.chromeWindowsNoCache&&(M="no-store");let P=yield fetch(this.url,{signal:_,cache:M,headers:c});if(t===0&&P.status===416){let F=P.headers.get("Content-Range");if(!F||!F.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let $=+F.substr(8);P=yield fetch(this.url,{signal:_,cache:"reload",headers:{range:`bytes=0-${$-1}`}})}let D=P.headers.get("Etag");if(D!=null&&D.startsWith("W/")&&(D=null),P.status===416||m&&D&&D!==m)throw this.mustReload=!0,new ww(`Server returned non-matching ETag ${m} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(P.status>=300)throw new Error(`Bad response code: ${P.status}`);let z=P.headers.get("Content-Length");if(P.status===200&&(!z||+z>i))throw v&&v.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield P.arrayBuffer(),etag:D||void 0,cacheControl:P.headers.get("Cache-Control")||void 0,expires:P.headers.get("Expires")||void 0}})}};En(WP,"FetchSource");var J3=WP;function Dl(e,t){let i=e.getUint32(t+4,!0),l=e.getUint32(t+0,!0);return i*Z3(2,32)+l}En(Dl,"getUint64");function XP(e,t){let i=new DataView(e),l=i.getUint8(7);if(l>3)throw new Error(`Archive is spec version ${l} but this library supports up to spec version 3`);return{specVersion:l,rootDirectoryOffset:Dl(i,8),rootDirectoryLength:Dl(i,16),jsonMetadataOffset:Dl(i,24),jsonMetadataLength:Dl(i,32),leafDirectoryOffset:Dl(i,40),leafDirectoryLength:Dl(i,48),tileDataOffset:Dl(i,56),tileDataLength:Dl(i,64),numAddressedTiles:Dl(i,72),numTileEntries:Dl(i,80),numTileContents:Dl(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:t}}En(XP,"bytesToHeader");function A2(e){let t={buf:new Uint8Array(e),pos:0},i=Eg(t),l=[],m=0;for(let v=0;v<i;v++){let _=Eg(t);l.push({tileId:m+_,offset:0,length:0,runLength:1}),m+=_}for(let v=0;v<i;v++)l[v].runLength=Eg(t);for(let v=0;v<i;v++)l[v].length=Eg(t);for(let v=0;v<i;v++){let _=Eg(t);_===0&&v>0?l[v].offset=l[v-1].offset+l[v-1].length:l[v].offset=_-1}return l}En(A2,"deserializeIndex");var YP=class extends Error{};En(YP,"EtagMismatch");var ww=YP;function M2(e,t){return fa(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let l=i.data.slice(0,K3),m=XP(l,i.etag),v=i.data.slice(m.rootDirectoryOffset,m.rootDirectoryOffset+m.rootDirectoryLength),_=`${e.getKey()}|${m.etag||""}|${m.rootDirectoryOffset}|${m.rootDirectoryLength}`,c=A2(yield t(v,m.internalCompression));return[m,[_,c.length,c]]})}En(M2,"getHeaderAndRoot");function C2(e,t,i,l,m){return fa(this,null,function*(){let v=yield e.getBytes(i,l,void 0,m.etag),_=yield t(v.data,m.internalCompression),c=A2(_);if(c.length===0)throw new Error("Empty directory is invalid");return c})}En(C2,"getDirectory");var ej=class{constructor(t=100,i=!0,l=Ax){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=l}getHeader(t){return fa(this,null,function*(){let i=t.getKey(),l=this.cache.get(i);if(l)return l.lastUsed=this.counter++,l.data;let m=yield M2(t,this.decompress);return m[1]&&this.cache.set(m[1][0],{lastUsed:this.counter++,data:m[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:m[0]}),this.prune(),m[0]})}getDirectory(t,i,l,m){return fa(this,null,function*(){let v=`${t.getKey()}|${m.etag||""}|${i}|${l}`,_=this.cache.get(v);if(_)return _.lastUsed=this.counter++,_.data;let c=yield C2(t,this.decompress,i,l,m);return this.cache.set(v,{lastUsed:this.counter++,data:c}),this.prune(),c})}prune(){if(this.cache.size>this.maxCacheEntries){let t=1/0,i;this.cache.forEach((l,m)=>{l.lastUsed<t&&(t=l.lastUsed,i=m)}),i&&this.cache.delete(i)}}invalidate(t){return fa(this,null,function*(){this.cache.delete(t.getKey())})}};En(ej,"ResolvedValueCache");var KP=class{constructor(t=100,i=!0,l=Ax){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=l}getHeader(t){return fa(this,null,function*(){let i=t.getKey(),l=this.cache.get(i);if(l)return l.lastUsed=this.counter++,yield l.data;let m=new Promise((v,_)=>{M2(t,this.decompress).then(c=>{c[1]&&this.cache.set(c[1][0],{lastUsed:this.counter++,data:Promise.resolve(c[1][2])}),v(c[0]),this.prune()}).catch(c=>{_(c)})});return this.cache.set(i,{lastUsed:this.counter++,data:m}),m})}getDirectory(t,i,l,m){return fa(this,null,function*(){let v=`${t.getKey()}|${m.etag||""}|${i}|${l}`,_=this.cache.get(v);if(_)return _.lastUsed=this.counter++,yield _.data;let c=new Promise((M,P)=>{C2(t,this.decompress,i,l,m).then(D=>{M(D),this.prune()}).catch(D=>{P(D)})});return this.cache.set(v,{lastUsed:this.counter++,data:c}),c})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,i;this.cache.forEach((l,m)=>{l.lastUsed<t&&(t=l.lastUsed,i=m)}),i&&this.cache.delete(i)}}invalidate(t){return fa(this,null,function*(){let i=t.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(t.getKey());let l=new Promise((m,v)=>{this.getHeader(t).then(_=>{m(),this.invalidations.delete(i)}).catch(_=>{v(_)})});this.invalidations.set(i,l)})}};En(KP,"SharedPromiseCache");var tj=KP,QP=class{constructor(t,i,l){typeof t=="string"?this.source=new J3(t):this.source=t,l?this.decompress=l:this.decompress=Ax,i?this.cache=i:this.cache=new tj}getHeader(){return fa(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,i,l,m){return fa(this,null,function*(){let v=GP(t,i,l),_=yield this.cache.getHeader(this.source);if(t<_.minZoom||t>_.maxZoom)return;let c=_.rootDirectoryOffset,M=_.rootDirectoryLength;for(let P=0;P<=3;P++){let D=yield this.cache.getDirectory(this.source,c,M,_),z=HP(D,v);if(z){if(z.runLength>0){let F=yield this.source.getBytes(_.tileDataOffset+z.offset,z.length,m,_.etag);return{data:yield this.decompress(F.data,_.tileCompression),cacheControl:F.cacheControl,expires:F.expires}}c=_.leafDirectoryOffset+z.offset,M=z.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(t,i,l,m){return fa(this,null,function*(){try{return yield this.getZxyAttempt(t,i,l,m)}catch(v){if(v instanceof ww)return this.cache.invalidate(this.source),yield this.getZxyAttempt(t,i,l,m);throw v}})}getMetadataAttempt(){return fa(this,null,function*(){let t=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength,void 0,t.etag),l=yield this.decompress(i.data,t.internalCompression),m=new TextDecoder("utf-8");return JSON.parse(m.decode(l))})}getMetadata(){return fa(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof ww)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw t}})}getTileJson(t){return fa(this,null,function*(){let i=yield this.getHeader(),l=yield this.getMetadata(),m=ZP(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${t}/{z}/{x}/{y}${m}`],vector_layers:l.vector_layers,attribution:l.attribution,description:l.description,name:l.name,version:l.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};En(QP,"PMTiles");var vv=QP;const Sw=["Angul","Balangir","Balasore","Bargarh","Bhadrak","Boudh","Cuttack","Deogarh","Dhenkanal","Gajapati","Ganjam","Jagatsinghpur","Jajpur","Jharsuguda","Kalahandi","Kandhamal","Kendrapara","Kendujhar","Khordha","Koraput","Malkangiri","Mayurbhanj","Nabarangpur","Nayagarh","Nuapada","Puri","Rayagada","Sambalpur","Subarnapur","Sundargarh"],z0={Anugul:"Angul",Baleshwar:"Balasore",Baudh:"Boudh",Debagarh:"Deogarh",Jagatsinghapur:"Jagatsinghpur",Jajapura:"Jajpur",Keonjhar:"Kendujhar",Khurda:"Khordha",Nabrangpur:"Nabarangpur",Sonepur:"Subarnapur"};let rj=new UP;md.addProtocol("pmtiles",rj.tile);const LT="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/odisha_pop_data.pmtiles",nj=({activeLayer:e,selectedYear:t="2023",onDistrictClick:i,gender:l="All",region:m="All",onResetClick:v,initialBasemap:_="grey",onDataLoad:c,targetDistrict:M})=>{const P=H.useRef(null),D=H.useRef(null),z=H.useRef(null),[F]=H.useState(null),$=H.useRef(5),Y=H.useRef(i),K=H.useRef(v),q=H.useRef(c),he=H.useRef(""),ye=H.useRef(new Map);H.useEffect(()=>{const We=D.current;if(!We)return;let Ve=null;if(!M||M==="Odisha"||M==="All Districts"){We.getLayer("selected-district-outline")&&(We.setFilter("selected-district-outline",["==","fid",""]),We.setPaintProperty("selected-district-outline","line-opacity",0));return}for(const Ot of ye.current.values()){const Je=(Ot.properties?.district_name||Ot.properties?.NAME||Ot.properties?.name)?.trim();if((z0[Je]||Je)?.toLowerCase()===M.trim().toLowerCase()){Ve=Ot;break}}if(Ve&&We.getLayer("selected-district-outline")&&(We.moveLayer("selected-district-outline"),We.setFilter("selected-district-outline",["==","fid",Ve.properties.fid]),We.setPaintProperty("selected-district-outline","line-opacity",1)),Ve?.geometry){const Ot=new md.LngLatBounds,Ue=Je=>{typeof Je[0]=="number"?Ot.extend(Je):Je.forEach(Ue)};Ue(Ve.geometry.coordinates),Ot.isEmpty()||(We.fitBounds(Ot,{padding:80,duration:1500,essential:!0}),i?.(Ve.properties))}},[M]),H.useEffect(()=>{Y.current=i,K.current=v,q.current=c},[i,v,c]);const ge={dark:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"carto-dark":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CARTO"}},layers:[{id:"carto-dark-layer",type:"raster",source:"carto-dark",minzoom:0,maxzoom:22}]},grey:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-grey":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-grey-layer",type:"raster",source:"esri-grey",minzoom:0,maxzoom:22}]},satellite:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-satellite":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri, Maxar, Earthstar Geographics"}},layers:[{id:"background",type:"background",paint:{"background-color":"#000"}},{id:"esri-satellite-layer",type:"raster",source:"esri-satellite",minzoom:0,maxzoom:22}]}},[Te,ke]=H.useState(_),[Pe,Re]=H.useState(!1),ot=We=>{if(console.log("Setting up population layer for style:",Te),We.getSource("population-source")||We.addSource("population-source",{type:"vector",url:`pmtiles://${LT}`}),!We.getLayer("districts-fill")){let Ve=["get",`pop_${t}_sum`],Ot=[0,1e6,2e6];l==="Male"?Ve=["get",`male_${t}`]:l==="Female"&&(Ve=["get",`female_${t}`]),l!=="All"&&(Ot=[0,50,100]),We.addLayer({id:"selected-district-outline",type:"line",source:"population-source","source-layer":"zcta",paint:{"line-color":"#EF4444","line-width":3,"line-opacity":0},filter:["==","fid",""]}),We.addLayer({id:"districts-fill",type:"fill",source:"population-source","source-layer":"zcta",paint:{"fill-color":["interpolate",["linear"],Ve,Ot[0],"#FEF2E8",Ot[1],"#F58220",Ot[2],"#D66B12"],"fill-opacity":.9,"fill-outline-color":"#FFFFFF"},layout:{visibility:e==="population"?"visible":"none"}}),We.addLayer({id:"districts-border",type:"line",source:"population-source","source-layer":"zcta",paint:{"line-color":"#FFFFFF","line-width":.8,"line-opacity":.8},layout:{visibility:e==="population"?"visible":"none"}}),We.on("click","districts-fill",Ue=>{if(Ue.features&&Ue.features.length>0){const Le=Ue.features[0].properties;Y.current&&Y.current(Le)}}),We.on("mouseenter","districts-fill",()=>{We.getCanvas().style.cursor="pointer"}),We.on("mouseleave","districts-fill",()=>{We.getCanvas().style.cursor=""})}};H.useEffect(()=>{if(!P.current)return;const We=new md.Map({container:P.current,style:ge[Te],center:[85.8245,20.2961],zoom:5,attributionControl:!1,interactive:!0});return We.scrollZoom.disable(),We.on("load",async()=>{We.resize();try{const Ot=await new vv(LT).getHeader();if(Ot.minLon!==void 0){const Ue=[[Ot.minLon,Ot.minLat],[Ot.maxLon,Ot.maxLat]];z.current=Ue,We.fitBounds(Ue,{padding:60,duration:0})}}catch(Ve){console.warn("Could not auto-center from PMTiles header",Ve)}ot(We),We.on("zoom",()=>{const Ve=We.getZoom(),Ot=Ve<$.current;Ve<4.8&&Ot&&K.current&&K.current(),$.current=Ve}),We.on("idle",()=>{const Ve=We.getSource("population-source"),Ot=We.getLayer("districts-fill");if(Ve&&Ot){const Ue=We.querySourceFeatures("population-source",{sourceLayer:"zcta"});if(Ue&&Ue.length>0&&q.current){const Je=ye.current;let Le=!1;if(Ue.forEach(Ge=>{const st=Ge.properties?.district_name||Ge.properties?.NAME||Ge.properties?.name;st&&!Je.has(st)&&(Je.set(st,Ge),Le=!0)}),Le){const Ge=Array.from(Je.values());Ge.sort((Rt,De)=>{const lt=Rt.properties?.district_name||Rt.properties?.NAME||Rt.properties?.name||"",Mt=De.properties?.district_name||De.properties?.NAME||De.properties?.name||"";return lt.localeCompare(Mt)});const st=Ge.map(Rt=>Rt.properties),pt=JSON.stringify(st);pt!==he.current&&(he.current=pt,q.current(st))}}}})}),D.current=We,()=>{D.current?.remove(),D.current=null}},[]),H.useEffect(()=>{const We=D.current;if(!We)return;const Ve=()=>{We.isStyleLoaded()?(console.log("Style fully loaded for:",Te),We.resize(),ot(We),["esri-satellite-layer","carto-dark-layer","esri-grey-layer"].some(Je=>We.getLayer(Je))&&(We.getLayer("districts-fill")&&We.moveLayer("districts-fill"),We.getLayer("districts-border")&&We.moveLayer("districts-border"))):setTimeout(Ve,50)};return We.once("style.load",Ve),We.setStyle(ge[Te]),()=>{We.off("style.load",Ve)}},[Te]),H.useEffect(()=>{D.current?.getLayer("districts-fill")&&D.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none"),D.current?.getLayer("districts-border")&&D.current.setLayoutProperty("districts-border","visibility",e==="population"?"visible":"none")},[e]),H.useEffect(()=>{if(D.current?.getLayer("districts-fill")){let We,Ve;if(l==="Male"?(We=`male_${t}`,Ve=[45,50,55]):l==="Female"?(We=`female_${t}`,Ve=[45,50,55]):(We=`pop_${t}_sum`,Ve=[1e5,1e6,25e5]),F&&F[We]){const Ot=F[We];if(Ot.min!==void 0&&Ot.max!==void 0){const Ue=Number(Ot.min),Je=Number(Ot.max);Ve=[Ue,Ue+(Je-Ue)/2,Je]}}D.current.setPaintProperty("districts-fill","fill-color",["interpolate",["linear"],["get",We],Ve[0],"#FEF2E8",Ve[1],"#F58220",Ve[2],"#D66B12"]),D.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none")}},[t,l,e,F]),H.useEffect(()=>{if(D.current?.getLayer("districts-fill")){const We=m==="All"?null:["==",["get","region"],m];D.current.setFilter("districts-fill",We),D.current?.getLayer("districts-border")&&D.current.setFilter("districts-border",We)}},[m]);const bt=()=>{v&&v(),D.current&&z.current?D.current.fitBounds(z.current,{padding:60,duration:1e3,essential:!0}):D.current&&D.current.flyTo({center:[85.8245,20.2961],zoom:5,duration:1e3})},kt=[{id:"grey",label:"Grey Canvas"},{id:"dark",label:"Dark Matter"},{id:"satellite",label:"Satellite"}];return le.jsxs("div",{className:"relative w-full h-full bg-slate-50",children:[le.jsx("div",{ref:P,className:"w-full h-full"}),le.jsx("div",{className:"absolute top-5 right-5 z-20 flex flex-col gap-2",children:le.jsxs("div",{className:"relative",children:[le.jsx("button",{onClick:()=>Re(!Pe),className:"bg-white/90 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Change Basemap",children:le.jsx(o3,{className:"w-4 h-4"})}),Pe&&le.jsx("div",{className:"absolute right-0 top-full mt-2 w-40 bg-white/90 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:kt.map(We=>le.jsx("button",{onClick:()=>{ke(We.id),Re(!1)},className:`w-full px-4 py-2 text-left text-[11px] font-bold transition-colors flex items-center justify-between ${Te===We.id?"bg-orange-50 text-primary":"text-gray-600 hover:bg-gray-50"}`,children:We.label},We.id))})]})}),le.jsxs("div",{className:"absolute bottom-5 right-5 flex flex-col gap-2 z-20",children:[le.jsx("button",{onClick:bt,className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Reset View",children:le.jsx(i3,{className:"w-4 h-4"})}),le.jsx("button",{onClick:()=>D.current?.zoomIn(),className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Zoom In",children:le.jsx(d3,{className:"w-4 h-4"})}),le.jsx("button",{onClick:()=>D.current?.zoomOut(),className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Zoom Out",children:le.jsx(h3,{className:"w-4 h-4"})})]})]})},ij=({currentView:e,onViewChange:t,onDistrictChange:i,onDataChange:l,onDataLoad:m})=>{const[v,_]=H.useState("population"),[c,M]=H.useState("2030"),[P,D]=H.useState("All"),[z]=H.useState("All"),[F,$]=H.useState(null),[Y,K]=H.useState("All Districts");H.useEffect(()=>{if(F){const Je=F.district_name||F.NAME||F.name||"Selected Area",Le=z0[Je]||Je;K(Le),i&&i(Le),l&&l(F)}else i&&i("Odisha"),l&&l(null)},[F,i,l]);const[q,he]=H.useState(["2023"]),[ye,ge]=H.useState(null),[Te,ke]=H.useState(!0);H.useEffect(()=>{const Je=()=>{(window.scrollY>10||window.pageYOffset>10||document.documentElement.scrollTop>10)&&ke(!1)};return window.addEventListener("scroll",Je,{passive:!0}),()=>window.removeEventListener("scroll",Je)},[]);const[Pe,Re]=H.useState({layer:"population",year:"2023",gender:"All",region:"All",district:"All Districts"}),ot=[{id:"population",label:"Population Density"},{id:"lulc",label:"Land Use / Cover"},{id:"nightlight",label:"Night Lights"},{id:"buildup",label:"Built-up Area"}],bt=["All","Male","Female"],kt="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/odisha_pop_data.pmtiles";H.useEffect(()=>{(async()=>{try{const Ge=await new vv(kt).getMetadata();if(Ge.vector_layers){const st=Ge.vector_layers.find(pt=>pt.id==="zcta");if(st&&st.fields){const pt=Object.keys(st.fields),Rt=new Set;pt.forEach(lt=>{const Mt=lt.match(/(\d{4})/);Mt&&Rt.add(Mt[1])});const De=Array.from(Rt).sort((lt,Mt)=>Mt.localeCompare(lt));De.length>0&&(he(De),De.includes(c)||M(De[0]))}}}catch(Le){console.error("Error fetching PMTiles metadata:",Le)}})()},[]);const We=()=>{Re({layer:v,year:c,gender:P,region:z,district:Y}),ge(null)},Ve=Je=>{const Le=typeof Je=="string"?parseFloat(Je):Je;return isNaN(Le)||Le===null||Le===void 0?"0":Le>=1e6?(Le/1e6).toFixed(2)+"M":Le>=1e3?(Le/1e3).toFixed(1)+"k":Math.floor(Le).toString()},Ue=(()=>{const Je={name:"Odisha",pop:"47M",literacy:"73%",male:"51%",female:"49%"};if(!F)return Je;const Le=Pe.year,Ge=`pop_${Le}_sum`,st=F[`Literacy_${Le}`]!==void 0?`Literacy_${Le}`:`literacy_${Le}`,pt=`male_${Le}`,Rt=`female_${Le}`;return{name:F.district_name||F.NAME||F.name||"Selected Area",pop:F[Ge]!==void 0?Ve(F[Ge]):Je.pop,literacy:F[st]!==void 0?F[st]+"%":Je.literacy,male:F[pt]!==void 0?F[pt]+"%":Je.male,female:F[Rt]!==void 0?F[Rt]+"%":Je.female}})();return le.jsxs("div",{className:"flex flex-col min-h-screen bg-[#F8FAFC]",children:[le.jsx("div",{className:"px-4 lg:px-6 py-4 z-[100]",children:le.jsxs("div",{className:"max-w-[1600px] mx-auto bg-white rounded-2xl shadow-sm border border-gray-100 p-5 lg:p-6 transition-all hover:shadow-md",children:[le.jsx("style",{dangerouslySetInnerHTML:{__html:`
                input[type=range]::-webkit-slider-thumb {
                    appearance: none;
                    height: 18px;
                    width: 18px;
                    border-radius: 50%;
                    background: #F58220;
                    cursor: pointer;
                    border: 3px solid white;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    margin-top: -6px;
                }
                input[type=range]::-moz-range-thumb {
                    height: 18px;
                    width: 18px;
                    border-radius: 50%;
                    background: #F58220;
                    cursor: pointer;
                    border: 3px solid white;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }
                input[type=range]::-webkit-slider-runnable-track {
                    width: 100%;
                    height: 6px;
                    cursor: pointer;
                    background: #E5E7EB;
                    border-radius: 3px;
                }
            `}}),le.jsxs("div",{className:"flex flex-wrap lg:flex-nowrap items-center gap-4 lg:gap-8 overflow-visible",children:[le.jsxs("div",{className:"relative flex-1 min-w-[80px] lg:max-w-[120px]",children:[le.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"State"}),le.jsxs("button",{className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[le.jsx("span",{children:"Odisha"}),le.jsx(Ig,{className:"w-3.5 h-3.5 ml-2 opacity-50"})]})]}),le.jsxs("div",{className:"relative flex-1 min-w-[140px] lg:max-w-[200px]",children:[le.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"District"}),le.jsxs("button",{onClick:()=>ge(ye==="district"?null:"district"),className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[le.jsx("span",{className:"truncate",children:Y}),le.jsx(Ig,{className:`w-3.5 h-3.5 ml-2 transition-transform ${ye==="district"?"rotate-180":""}`})]}),ye==="district"&&le.jsxs("div",{className:"absolute left-0 top-full mt-2 w-full max-h-[300px] overflow-y-auto custom-scrollbar bg-white/95 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 z-[50] animate-in fade-in slide-in-from-top-2",children:[le.jsx("button",{onClick:()=>{K("All Districts"),ge(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${Y==="All Districts"?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:"All Districts"}),Sw.sort().map(Je=>le.jsx("button",{onClick:()=>{K(Je),ge(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${Y===Je?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:Je},Je))]})]}),le.jsxs("div",{className:"relative flex-1 min-w-[140px] lg:max-w-[220px]",children:[le.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"Layers"}),le.jsxs("button",{onClick:()=>ge(ye==="layer"?null:"layer"),className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[le.jsx("span",{children:ot.find(Je=>Je.id===v)?.label}),le.jsx(Ig,{className:`w-3.5 h-3.5 ml-2 transition-transform ${ye==="layer"?"rotate-180":""}`})]}),ye==="layer"&&le.jsx("div",{className:"absolute left-0 top-full mt-2 w-full bg-white/80 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 z-[50] animate-in fade-in slide-in-from-top-2",children:ot.map(Je=>le.jsx("button",{onClick:()=>{_(Je.id),ge(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${v===Je.id?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:Je.label},Je.id))})]}),le.jsxs("div",{className:"flex-1 min-w-[140px] w-full lg:w-auto",children:[le.jsxs("div",{className:"flex justify-between items-center mb-2",children:[le.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-70",children:"Time Period"}),le.jsx("span",{className:"text-sm font-black text-[#F58220]",children:c})]}),le.jsx("input",{type:"range",min:q[q.length-1],max:q[0],value:c,onChange:Je=>M(Je.target.value),className:"w-full appearance-none bg-transparent"}),le.jsxs("div",{className:"flex justify-between mt-1",children:[le.jsx("span",{className:"text-[9px] font-bold text-gray-400",children:q[q.length-1]}),le.jsx("span",{className:"text-[9px] font-bold text-gray-400",children:q[0]})]})]}),le.jsxs("div",{className:"flex-1 min-w-[200px] lg:max-w-[300px]",children:[le.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"Gender"}),le.jsx("div",{className:"flex bg-gray-50 p-1 rounded-xl border border-gray-200 shadow-inner",children:bt.map(Je=>le.jsx("button",{onClick:()=>D(Je),className:`flex-1 px-4 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${P===Je?"bg-[#F58220] text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:Je},Je))})]}),le.jsx("button",{onClick:We,className:"w-full lg:w-auto lg:self-end mb-0.5 px-8 h-10 bg-[#F58220] hover:bg-[#D66B12] text-white rounded-xl shadow-lg shadow-orange-500/20 transition-all font-black text-[11px] uppercase tracking-widest flex items-center justify-center gap-2 group active:scale-95 whitespace-nowrap",children:"Search"})]})]})}),le.jsx("div",{className:"flex-1 px-4 lg:px-6 pb-4",children:le.jsxs("div",{className:"w-full max-w-[1600px] mx-auto flex flex-col lg:flex-row gap-4",children:[le.jsxs("div",{className:"w-full h-[450px] lg:flex-1 relative overflow-hidden lg:h-[80vh] bg-white rounded-2xl shadow-sm border border-gray-100 group",children:[le.jsx(nj,{activeLayer:Pe.layer,selectedYear:Pe.year,gender:Pe.gender,region:Pe.region,targetDistrict:Pe.district,onResetClick:()=>{$(null),K("All Districts"),Re(Je=>({...Je,district:"All Districts"}))},onDistrictClick:Je=>{const Le=Je.district_name||Je.NAME||Je.name||"Selected Area",Ge=z0[Le]||Le;$(Je),Re(st=>({...st,district:Ge}))},onDataLoad:Je=>{m&&m(Je)}}),le.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(#000000_1px,transparent_1px)] [background-size:24px_24px] opacity-[0.03] group-hover:opacity-[0.05] transition-opacity"})]}),le.jsxs("div",{className:"w-full lg:w-80 h-auto lg:h-[80vh] bg-white border border-gray-100 rounded-2xl flex flex-col z-20 shadow-sm flex-shrink-0 overflow-hidden transition-all hover:shadow-md",children:[le.jsx("div",{className:"p-6 border-b border-gray-100 flex justify-between items-start bg-gray-50/30",children:le.jsxs("div",{children:[le.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:Ue.name}),le.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5 mt-1 font-medium",children:[le.jsx(IP,{className:"w-3 h-3"})," District Analysis"]})]})}),le.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-8",children:[le.jsx("div",{className:"grid",children:le.jsxs("div",{className:"bg-orange-50/50 p-4 rounded-xl border border-orange-100/50 hover:bg-orange-50 hover:border-orange-200 transition-all group/stat",children:[le.jsx("p",{className:"text-[10px] uppercase font-bold text-primary mb-1 tracking-wide opacity-70",children:"Total Pop."}),le.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ue.pop})]})}),le.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[le.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100/50 hover:bg-blue-50 hover:border-blue-200 transition-all group/stat",children:[le.jsx("p",{className:"text-[10px] uppercase font-bold text-[#3B82F6] mb-1 tracking-wide opacity-70",children:"Literacy"}),le.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ue.literacy})]}),le.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-100/50 hover:bg-gray-50 hover:border-gray-200 transition-all group/stat",children:[le.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 tracking-wide opacity-70",children:"Male"}),le.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ue.male})]}),le.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-100/50 hover:bg-gray-50 hover:border-gray-200 transition-all group/stat",children:[le.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 tracking-wide opacity-70",children:"Female"}),le.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:Ue.female})]})]})]})]})]})}),Te&&le.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-bounce pointer-events-none",children:le.jsx("div",{className:"bg-[#F58220] text-white p-2 rounded-full shadow-lg shadow-orange-500/30 w-10 h-10 flex items-center justify-center",children:le.jsx(QL,{className:"w-5 h-5"})})})]})};function JP(e){var t,i,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var m=e.length;for(t=0;t<m;t++)e[t]&&(i=JP(e[t]))&&(l&&(l+=" "),l+=i)}else for(i in e)e[i]&&(l&&(l+=" "),l+=i);return l}function Xn(){for(var e,t,i=0,l="",m=arguments.length;i<m;i++)(e=arguments[i])&&(t=JP(e))&&(l&&(l+=" "),l+=t);return l}var aj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function P2(e){if(typeof e!="string")return!1;var t=aj;return t.includes(e)}var oj=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],sj=new Set(oj);function eD(e){return typeof e!="string"?!1:sj.has(e)}function tD(e){return typeof e=="string"&&e.startsWith("data-")}function Ru(e){if(typeof e!="object"||e===null)return{};var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(eD(i)||tD(i))&&(t[i]=e[i]);return t}function Mx(e){if(e==null)return null;if(H.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ru(t)}return typeof e=="object"&&!Array.isArray(e)?Ru(e):null}function kl(e){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(eD(i)||tD(i)||P2(i))&&(t[i]=e[i]);return t}function lj(e){return e==null?null:H.isValidElement(e)?kl(e.props):typeof e=="object"&&!Array.isArray(e)?kl(e):null}var uj=["children","width","height","viewBox","className","style","title","desc"];function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Tw.apply(null,arguments)}function cj(e,t){if(e==null)return{};var i,l,m=hj(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function hj(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}var rD=H.forwardRef((e,t)=>{var{children:i,width:l,height:m,viewBox:v,className:_,style:c,title:M,desc:P}=e,D=cj(e,uj),z=v||{width:l,height:m,x:0,y:0},F=Xn("recharts-surface",_);return H.createElement("svg",Tw({},kl(D),{className:F,width:l,height:m,style:c,viewBox:"".concat(z.x," ").concat(z.y," ").concat(z.width," ").concat(z.height),ref:t}),H.createElement("title",null,M),H.createElement("desc",null,P),i)}),fj=["children","className"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Ew.apply(null,arguments)}function dj(e,t){if(e==null)return{};var i,l,m=pj(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function pj(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}var zc=H.forwardRef((e,t)=>{var{children:i,className:l}=e,m=dj(e,fj),v=Xn("recharts-layer",l);return H.createElement("g",Ew({className:v},kl(m),{ref:t}),i)}),mj=H.createContext(null);function xi(e){return function(){return e}}const Aw=Math.PI,Mw=2*Aw,Dp=1e-6,gj=Mw-Dp;function nD(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function yj(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nD;const i=10**t;return function(l){this._+=l[0];for(let m=1,v=l.length;m<v;++m)this._+=Math.round(arguments[m]*i)/i+l[m]}}class vj{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nD:yj(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,l,m){this._append`Q${+t},${+i},${this._x1=+l},${this._y1=+m}`}bezierCurveTo(t,i,l,m,v,_){this._append`C${+t},${+i},${+l},${+m},${this._x1=+v},${this._y1=+_}`}arcTo(t,i,l,m,v){if(t=+t,i=+i,l=+l,m=+m,v=+v,v<0)throw new Error(`negative radius: ${v}`);let _=this._x1,c=this._y1,M=l-t,P=m-i,D=_-t,z=c-i,F=D*D+z*z;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(F>Dp)if(!(Math.abs(z*M-P*D)>Dp)||!v)this._append`L${this._x1=t},${this._y1=i}`;else{let $=l-_,Y=m-c,K=M*M+P*P,q=$*$+Y*Y,he=Math.sqrt(K),ye=Math.sqrt(F),ge=v*Math.tan((Aw-Math.acos((K+F-q)/(2*he*ye)))/2),Te=ge/ye,ke=ge/he;Math.abs(Te-1)>Dp&&this._append`L${t+Te*D},${i+Te*z}`,this._append`A${v},${v},0,0,${+(z*$>D*Y)},${this._x1=t+ke*M},${this._y1=i+ke*P}`}}arc(t,i,l,m,v,_){if(t=+t,i=+i,l=+l,_=!!_,l<0)throw new Error(`negative radius: ${l}`);let c=l*Math.cos(m),M=l*Math.sin(m),P=t+c,D=i+M,z=1^_,F=_?m-v:v-m;this._x1===null?this._append`M${P},${D}`:(Math.abs(this._x1-P)>Dp||Math.abs(this._y1-D)>Dp)&&this._append`L${P},${D}`,l&&(F<0&&(F=F%Mw+Mw),F>gj?this._append`A${l},${l},0,1,${z},${t-c},${i-M}A${l},${l},0,1,${z},${this._x1=P},${this._y1=D}`:F>Dp&&this._append`A${l},${l},0,${+(F>=Aw)},${z},${this._x1=t+l*Math.cos(v)},${this._y1=i+l*Math.sin(v)}`)}rect(t,i,l,m){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${l=+l}v${+m}h${-l}Z`}toString(){return this._}}function iD(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const l=Math.floor(i);if(!(l>=0))throw new RangeError(`invalid digits: ${i}`);t=l}return e},()=>new vj(t)}function D2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aD(e){this._context=e}aD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Cx(e){return new aD(e)}function oD(e){return e[0]}function sD(e){return e[1]}function lD(e,t){var i=xi(!0),l=null,m=Cx,v=null,_=iD(c);e=typeof e=="function"?e:e===void 0?oD:xi(e),t=typeof t=="function"?t:t===void 0?sD:xi(t);function c(M){var P,D=(M=D2(M)).length,z,F=!1,$;for(l==null&&(v=m($=_())),P=0;P<=D;++P)!(P<D&&i(z=M[P],P,M))===F&&((F=!F)?v.lineStart():v.lineEnd()),F&&v.point(+e(z,P,M),+t(z,P,M));if($)return v=null,$+""||null}return c.x=function(M){return arguments.length?(e=typeof M=="function"?M:xi(+M),c):e},c.y=function(M){return arguments.length?(t=typeof M=="function"?M:xi(+M),c):t},c.defined=function(M){return arguments.length?(i=typeof M=="function"?M:xi(!!M),c):i},c.curve=function(M){return arguments.length?(m=M,l!=null&&(v=m(l)),c):m},c.context=function(M){return arguments.length?(M==null?l=v=null:v=m(l=M),c):l},c}function a0(e,t,i){var l=null,m=xi(!0),v=null,_=Cx,c=null,M=iD(P);e=typeof e=="function"?e:e===void 0?oD:xi(+e),t=typeof t=="function"?t:xi(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?sD:xi(+i);function P(z){var F,$,Y,K=(z=D2(z)).length,q,he=!1,ye,ge=new Array(K),Te=new Array(K);for(v==null&&(c=_(ye=M())),F=0;F<=K;++F){if(!(F<K&&m(q=z[F],F,z))===he)if(he=!he)$=F,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),Y=F-1;Y>=$;--Y)c.point(ge[Y],Te[Y]);c.lineEnd(),c.areaEnd()}he&&(ge[F]=+e(q,F,z),Te[F]=+t(q,F,z),c.point(l?+l(q,F,z):ge[F],i?+i(q,F,z):Te[F]))}if(ye)return c=null,ye+""||null}function D(){return lD().defined(m).curve(_).context(v)}return P.x=function(z){return arguments.length?(e=typeof z=="function"?z:xi(+z),l=null,P):e},P.x0=function(z){return arguments.length?(e=typeof z=="function"?z:xi(+z),P):e},P.x1=function(z){return arguments.length?(l=z==null?null:typeof z=="function"?z:xi(+z),P):l},P.y=function(z){return arguments.length?(t=typeof z=="function"?z:xi(+z),i=null,P):t},P.y0=function(z){return arguments.length?(t=typeof z=="function"?z:xi(+z),P):t},P.y1=function(z){return arguments.length?(i=z==null?null:typeof z=="function"?z:xi(+z),P):i},P.lineX0=P.lineY0=function(){return D().x(e).y(t)},P.lineY1=function(){return D().x(e).y(i)},P.lineX1=function(){return D().x(l).y(t)},P.defined=function(z){return arguments.length?(m=typeof z=="function"?z:xi(!!z),P):m},P.curve=function(z){return arguments.length?(_=z,v!=null&&(c=_(v)),P):_},P.context=function(z){return arguments.length?(z==null?v=c=null:c=_(v=z),P):v},P}class uD{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function _j(e){return new uD(e,!0)}function xj(e){return new uD(e,!1)}function k0(){}function R0(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function cD(e){this._context=e}cD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:R0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:R0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bj(e){return new cD(e)}function hD(e){this._context=e}hD.prototype={areaStart:k0,areaEnd:k0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:R0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wj(e){return new hD(e)}function fD(e){this._context=e}fD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,l=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,l):this._context.moveTo(i,l);break;case 3:this._point=4;default:R0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Sj(e){return new fD(e)}function dD(e){this._context=e}dD.prototype={areaStart:k0,areaEnd:k0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Tj(e){return new dD(e)}function jT(e){return e<0?-1:1}function NT(e,t,i){var l=e._x1-e._x0,m=t-e._x1,v=(e._y1-e._y0)/(l||m<0&&-0),_=(i-e._y1)/(m||l<0&&-0),c=(v*m+_*l)/(l+m);return(jT(v)+jT(_))*Math.min(Math.abs(v),Math.abs(_),.5*Math.abs(c))||0}function BT(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function Vb(e,t,i){var l=e._x0,m=e._y0,v=e._x1,_=e._y1,c=(v-l)/3;e._context.bezierCurveTo(l+c,m+c*t,v-c,_-c*i,v,_)}function L0(e){this._context=e}L0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Vb(this,this._t0,BT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Vb(this,BT(this,i=NT(this,e,t)),i);break;default:Vb(this,this._t0,i=NT(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function pD(e){this._context=new mD(e)}(pD.prototype=Object.create(L0.prototype)).point=function(e,t){L0.prototype.point.call(this,t,e)};function mD(e){this._context=e}mD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,l,m,v){this._context.bezierCurveTo(t,e,l,i,v,m)}};function Ej(e){return new L0(e)}function Aj(e){return new pD(e)}function gD(e){this._context=e}gD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var l=FT(e),m=FT(t),v=0,_=1;_<i;++v,++_)this._context.bezierCurveTo(l[0][v],m[0][v],l[1][v],m[1][v],e[_],t[_]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function FT(e){var t,i=e.length-1,l,m=new Array(i),v=new Array(i),_=new Array(i);for(m[0]=0,v[0]=2,_[0]=e[0]+2*e[1],t=1;t<i-1;++t)m[t]=1,v[t]=4,_[t]=4*e[t]+2*e[t+1];for(m[i-1]=2,v[i-1]=7,_[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)l=m[t]/v[t-1],v[t]-=l,_[t]-=l*_[t-1];for(m[i-1]=_[i-1]/v[i-1],t=i-2;t>=0;--t)m[t]=(_[t]-m[t+1])/v[t];for(v[i-1]=(e[i]+m[i-1])/2,t=0;t<i-1;++t)v[t]=2*e[t+1]-m[t+1];return[m,v]}function Mj(e){return new gD(e)}function Px(e,t){this._context=e,this._t=t}Px.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function Cj(e){return new Px(e,.5)}function Pj(e){return new Px(e,0)}function Dj(e){return new Px(e,1)}function Up(e,t){if((_=e.length)>1)for(var i=1,l,m,v=e[t[0]],_,c=v.length;i<_;++i)for(m=v,v=e[t[i]],l=0;l<c;++l)v[l][1]+=v[l][0]=isNaN(m[l][1])?m[l][0]:m[l][1]}function Cw(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function Oj(e,t){return e[t]}function Ij(e){const t=[];return t.key=e,t}function zj(){var e=xi([]),t=Cw,i=Up,l=Oj;function m(v){var _=Array.from(e.apply(this,arguments),Ij),c,M=_.length,P=-1,D;for(const z of v)for(c=0,++P;c<M;++c)(_[c][P]=[0,+l(z,_[c].key,P,v)]).data=z;for(c=0,D=D2(t(_));c<M;++c)_[D[c]].index=c;return i(_,D),_}return m.keys=function(v){return arguments.length?(e=typeof v=="function"?v:xi(Array.from(v)),m):e},m.value=function(v){return arguments.length?(l=typeof v=="function"?v:xi(+v),m):l},m.order=function(v){return arguments.length?(t=v==null?Cw:typeof v=="function"?v:xi(Array.from(v)),m):t},m.offset=function(v){return arguments.length?(i=v??Up,m):i},m}function kj(e,t){if((l=e.length)>0){for(var i,l,m=0,v=e[0].length,_;m<v;++m){for(_=i=0;i<l;++i)_+=e[i][m][1]||0;if(_)for(i=0;i<l;++i)e[i][m][1]/=_}Up(e,t)}}function Rj(e,t){if((m=e.length)>0){for(var i=0,l=e[t[0]],m,v=l.length;i<v;++i){for(var _=0,c=0;_<m;++_)c+=e[_][i][1]||0;l[i][1]+=l[i][0]=-c/2}Up(e,t)}}function Lj(e,t){if(!(!((_=e.length)>0)||!((v=(m=e[t[0]]).length)>0))){for(var i=0,l=1,m,v,_;l<v;++l){for(var c=0,M=0,P=0;c<_;++c){for(var D=e[t[c]],z=D[l][1]||0,F=D[l-1][1]||0,$=(z-F)/2,Y=0;Y<c;++Y){var K=e[t[Y]],q=K[l][1]||0,he=K[l-1][1]||0;$+=q-he}M+=z,P+=$*z}m[l-1][1]+=m[l-1][0]=i,M&&(i-=P/M)}m[l-1][1]+=m[l-1][0]=i,Up(e,t)}}var qb={},Gb={},UT;function jj(){return UT||(UT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==="__proto__"}e.isUnsafeProperty=t})(Gb)),Gb}var $b={},VT;function yD(){return VT||(VT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}e.isDeepKey=t})($b)),$b}var Zb={},qT;function O2(){return qT||(qT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="string"||typeof i=="symbol"?i:Object.is(i?.valueOf?.(),-0)?"-0":String(i)}e.toKey=t})(Zb)),Zb}var Hb={},Wb={},GT;function Nj(){return GT||(GT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){if(i==null)return"";if(typeof i=="string")return i;if(Array.isArray(i))return i.map(t).join(",");const l=String(i);return l==="0"&&Object.is(Number(i),-0)?"-0":l}e.toString=t})(Wb)),Wb}var $T;function I2(){return $T||($T=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nj(),i=O2();function l(m){if(Array.isArray(m))return m.map(i.toKey);if(typeof m=="symbol")return[m];m=t.toString(m);const v=[],_=m.length;if(_===0)return v;let c=0,M="",P="",D=!1;for(m.charCodeAt(0)===46&&(v.push(""),c++);c<_;){const z=m[c];P?z==="\\"&&c+1<_?(c++,M+=m[c]):z===P?P="":M+=z:D?z==='"'||z==="'"?P=z:z==="]"?(D=!1,v.push(M),M=""):M+=z:z==="["?(D=!0,M&&(v.push(M),M="")):z==="."?M&&(v.push(M),M=""):M+=z,c++}return M&&v.push(M),v}e.toPath=l})(Hb)),Hb}var ZT;function z2(){return ZT||(ZT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jj(),i=yD(),l=O2(),m=I2();function v(c,M,P){if(c==null)return P;switch(typeof M){case"string":{if(t.isUnsafeProperty(M))return P;const D=c[M];return D===void 0?i.isDeepKey(M)?v(c,m.toPath(M),P):P:D}case"number":case"symbol":{typeof M=="number"&&(M=l.toKey(M));const D=c[M];return D===void 0?P:D}default:{if(Array.isArray(M))return _(c,M,P);if(Object.is(M?.valueOf(),-0)?M="-0":M=String(M),t.isUnsafeProperty(M))return P;const D=c[M];return D===void 0?P:D}}}function _(c,M,P){if(M.length===0)return P;let D=c;for(let z=0;z<M.length;z++){if(D==null||t.isUnsafeProperty(M[z]))return P;D=D[M[z]]}return D===void 0?P:D}e.get=v})(qb)),qb}var Xb,HT;function Bj(){return HT||(HT=1,Xb=z2().get),Xb}var Fj=Bj();const Dx=ef(Fj);var Uj=4;function fd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Uj,i=10**t,l=Math.round(e*i)/i;return Object.is(l,-0)?0:l}function Ua(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];return e.reduce((m,v,_)=>{var c=i[_-1];return typeof c=="string"?m+c+v:c!==void 0?m+fd(c)+v:m+v},"")}var Il=e=>e===0?0:e>0?1:-1,kc=e=>typeof e=="number"&&e!=+e,Vp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Jt=e=>(typeof e=="number"||e instanceof Number)&&!kc(e),Rc=e=>Jt(e)||typeof e=="string",Vj=0,_v=e=>{var t=++Vj;return"".concat(e||"").concat(t)},gd=function(t,i){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Jt(t)&&typeof t!="string")return l;var v;if(Vp(t)){if(i==null)return l;var _=t.indexOf("%");v=i*parseFloat(t.slice(0,_))/100}else v=+t;return kc(v)&&(v=l),m&&i!=null&&v>i&&(v=i),v},vD=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,i={},l=0;l<t;l++)if(!i[String(e[l])])i[String(e[l])]=!0;else return!0;return!1};function Cc(e,t,i){return Jt(e)&&Jt(t)?fd(e+i*(t-e)):t}function _D(e,t,i){if(!(!e||!e.length))return e.find(l=>l&&(typeof t=="function"?t(l):Dx(l,t))===i)}var mo=e=>e===null||typeof e>"u",k2=e=>mo(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function fs(e){return e!=null}function qg(){}var xD=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,R2=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(H.isValidElement(e)&&(i=e.props),typeof i!="object"&&typeof i!="function")return null;var l={};return Object.keys(i).forEach(m=>{P2(m)&&(l[m]=(v=>i[m](i,v)))}),l},qj=(e,t,i)=>l=>(e(t,i,l),null),Gj=(e,t,i)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var l=null;return Object.keys(e).forEach(m=>{var v=e[m];P2(m)&&typeof v=="function"&&(l||(l={}),l[m]=qj(v,t,i))}),l};function WT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function $j(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(i),!0).forEach(function(l){Zj(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WT(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Zj(e,t,i){return(t=Hj(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Hj(e){var t=Wj(e,"string");return typeof t=="symbol"?t:t+""}function Wj(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xs(e,t){var i=$j({},e),l=t,m=Object.keys(t),v=m.reduce((_,c)=>(_[c]===void 0&&l[c]!==void 0&&(_[c]=l[c]),_),i);return v}var Yb={},Kb={},XT;function Xj(){return XT||(XT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,l){const m=new Map;for(let v=0;v<i.length;v++){const _=i[v],c=l(_,v,i);m.has(c)||m.set(c,_)}return Array.from(m.values())}e.uniqBy=t})(Kb)),Kb}var Qb={},YT;function Yj(){return YT||(YT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,l){return function(...m){return i.apply(this,m.slice(0,l))}}e.ary=t})(Qb)),Qb}var Jb={},KT;function bD(){return KT||(KT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i}e.identity=t})(Jb)),Jb}var e1={},t1={},r1={},QT;function Kj(){return QT||(QT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Number.isSafeInteger(i)&&i>=0}e.isLength=t})(r1)),r1}var JT;function L2(){return JT||(JT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kj();function i(l){return l!=null&&typeof l!="function"&&t.isLength(l.length)}e.isArrayLike=i})(t1)),t1}var n1={},eE;function Qj(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="object"&&i!==null}e.isObjectLike=t})(n1)),n1}var tE;function Jj(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L2(),i=Qj();function l(m){return i.isObjectLike(m)&&t.isArrayLike(m)}e.isArrayLikeObject=l})(e1)),e1}var i1={},a1={},rE;function e5(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z2();function i(l){return function(m){return t.get(m,l)}}e.property=i})(a1)),a1}var o1={},s1={},l1={},u1={},nE;function wD(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i!==null&&(typeof i=="object"||typeof i=="function")}e.isObject=t})(u1)),u1}var c1={},iE;function SD(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null||typeof i!="object"&&typeof i!="function"}e.isPrimitive=t})(c1)),c1}var h1={},aE;function TD(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,l){return i===l||Number.isNaN(i)&&Number.isNaN(l)}e.isEqualsSameValueZero=t})(h1)),h1}var oE;function t5(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wD(),i=SD(),l=TD();function m(D,z,F){return typeof F!="function"?m(D,z,()=>{}):v(D,z,function $(Y,K,q,he,ye,ge){const Te=F(Y,K,q,he,ye,ge);return Te!==void 0?!!Te:v(Y,K,$,ge)},new Map)}function v(D,z,F,$){if(z===D)return!0;switch(typeof z){case"object":return _(D,z,F,$);case"function":return Object.keys(z).length>0?v(D,{...z},F,$):l.isEqualsSameValueZero(D,z);default:return t.isObject(D)?typeof z=="string"?z==="":!0:l.isEqualsSameValueZero(D,z)}}function _(D,z,F,$){if(z==null)return!0;if(Array.isArray(z))return M(D,z,F,$);if(z instanceof Map)return c(D,z,F,$);if(z instanceof Set)return P(D,z,F,$);const Y=Object.keys(z);if(D==null||i.isPrimitive(D))return Y.length===0;if(Y.length===0)return!0;if($?.has(z))return $.get(z)===D;$?.set(z,D);try{for(let K=0;K<Y.length;K++){const q=Y[K];if(!i.isPrimitive(D)&&!(q in D)||z[q]===void 0&&D[q]!==void 0||z[q]===null&&D[q]!==null||!F(D[q],z[q],q,D,z,$))return!1}return!0}finally{$?.delete(z)}}function c(D,z,F,$){if(z.size===0)return!0;if(!(D instanceof Map))return!1;for(const[Y,K]of z.entries()){const q=D.get(Y);if(F(q,K,Y,D,z,$)===!1)return!1}return!0}function M(D,z,F,$){if(z.length===0)return!0;if(!Array.isArray(D))return!1;const Y=new Set;for(let K=0;K<z.length;K++){const q=z[K];let he=!1;for(let ye=0;ye<D.length;ye++){if(Y.has(ye))continue;const ge=D[ye];let Te=!1;if(F(ge,q,K,D,z,$)&&(Te=!0),Te){Y.add(ye),he=!0;break}}if(!he)return!1}return!0}function P(D,z,F,$){return z.size===0?!0:D instanceof Set?M([...D],[...z],F,$):!1}e.isMatchWith=m,e.isSetMatch=P})(l1)),l1}var sE;function ED(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t5();function i(l,m){return t.isMatchWith(l,m,()=>{})}e.isMatch=i})(s1)),s1}var f1={},d1={},p1={},lE;function r5(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Object.getOwnPropertySymbols(i).filter(l=>Object.prototype.propertyIsEnumerable.call(i,l))}e.getSymbols=t})(p1)),p1}var m1={},uE;function j2(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}e.getTag=t})(m1)),m1}var g1={},cE;function AD(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",i="[object String]",l="[object Number]",m="[object Boolean]",v="[object Arguments]",_="[object Symbol]",c="[object Date]",M="[object Map]",P="[object Set]",D="[object Array]",z="[object Function]",F="[object ArrayBuffer]",$="[object Object]",Y="[object Error]",K="[object DataView]",q="[object Uint8Array]",he="[object Uint8ClampedArray]",ye="[object Uint16Array]",ge="[object Uint32Array]",Te="[object BigUint64Array]",ke="[object Int8Array]",Pe="[object Int16Array]",Re="[object Int32Array]",ot="[object BigInt64Array]",bt="[object Float32Array]",kt="[object Float64Array]";e.argumentsTag=v,e.arrayBufferTag=F,e.arrayTag=D,e.bigInt64ArrayTag=ot,e.bigUint64ArrayTag=Te,e.booleanTag=m,e.dataViewTag=K,e.dateTag=c,e.errorTag=Y,e.float32ArrayTag=bt,e.float64ArrayTag=kt,e.functionTag=z,e.int16ArrayTag=Pe,e.int32ArrayTag=Re,e.int8ArrayTag=ke,e.mapTag=M,e.numberTag=l,e.objectTag=$,e.regexpTag=t,e.setTag=P,e.stringTag=i,e.symbolTag=_,e.uint16ArrayTag=ye,e.uint32ArrayTag=ge,e.uint8ArrayTag=q,e.uint8ClampedArrayTag=he})(g1)),g1}var y1={},hE;function n5(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}e.isTypedArray=t})(y1)),y1}var fE;function MD(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r5(),i=j2(),l=AD(),m=SD(),v=n5();function _(D,z){return c(D,void 0,D,new Map,z)}function c(D,z,F,$=new Map,Y=void 0){const K=Y?.(D,z,F,$);if(K!==void 0)return K;if(m.isPrimitive(D))return D;if($.has(D))return $.get(D);if(Array.isArray(D)){const q=new Array(D.length);$.set(D,q);for(let he=0;he<D.length;he++)q[he]=c(D[he],he,F,$,Y);return Object.hasOwn(D,"index")&&(q.index=D.index),Object.hasOwn(D,"input")&&(q.input=D.input),q}if(D instanceof Date)return new Date(D.getTime());if(D instanceof RegExp){const q=new RegExp(D.source,D.flags);return q.lastIndex=D.lastIndex,q}if(D instanceof Map){const q=new Map;$.set(D,q);for(const[he,ye]of D)q.set(he,c(ye,he,F,$,Y));return q}if(D instanceof Set){const q=new Set;$.set(D,q);for(const he of D)q.add(c(he,void 0,F,$,Y));return q}if(typeof Buffer<"u"&&Buffer.isBuffer(D))return D.subarray();if(v.isTypedArray(D)){const q=new(Object.getPrototypeOf(D)).constructor(D.length);$.set(D,q);for(let he=0;he<D.length;he++)q[he]=c(D[he],he,F,$,Y);return q}if(D instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&D instanceof SharedArrayBuffer)return D.slice(0);if(D instanceof DataView){const q=new DataView(D.buffer.slice(0),D.byteOffset,D.byteLength);return $.set(D,q),M(q,D,F,$,Y),q}if(typeof File<"u"&&D instanceof File){const q=new File([D],D.name,{type:D.type});return $.set(D,q),M(q,D,F,$,Y),q}if(typeof Blob<"u"&&D instanceof Blob){const q=new Blob([D],{type:D.type});return $.set(D,q),M(q,D,F,$,Y),q}if(D instanceof Error){const q=new D.constructor;return $.set(D,q),q.message=D.message,q.name=D.name,q.stack=D.stack,q.cause=D.cause,M(q,D,F,$,Y),q}if(D instanceof Boolean){const q=new Boolean(D.valueOf());return $.set(D,q),M(q,D,F,$,Y),q}if(D instanceof Number){const q=new Number(D.valueOf());return $.set(D,q),M(q,D,F,$,Y),q}if(D instanceof String){const q=new String(D.valueOf());return $.set(D,q),M(q,D,F,$,Y),q}if(typeof D=="object"&&P(D)){const q=Object.create(Object.getPrototypeOf(D));return $.set(D,q),M(q,D,F,$,Y),q}return D}function M(D,z,F=D,$,Y){const K=[...Object.keys(z),...t.getSymbols(z)];for(let q=0;q<K.length;q++){const he=K[q],ye=Object.getOwnPropertyDescriptor(D,he);(ye==null||ye.writable)&&(D[he]=c(z[he],he,F,$,Y))}}function P(D){switch(i.getTag(D)){case l.argumentsTag:case l.arrayTag:case l.arrayBufferTag:case l.dataViewTag:case l.booleanTag:case l.dateTag:case l.float32ArrayTag:case l.float64ArrayTag:case l.int8ArrayTag:case l.int16ArrayTag:case l.int32ArrayTag:case l.mapTag:case l.numberTag:case l.objectTag:case l.regexpTag:case l.setTag:case l.stringTag:case l.symbolTag:case l.uint8ArrayTag:case l.uint8ClampedArrayTag:case l.uint16ArrayTag:case l.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=_,e.cloneDeepWithImpl=c,e.copyProperties=M})(d1)),d1}var dE;function i5(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MD();function i(l){return t.cloneDeepWithImpl(l,void 0,l,new Map,void 0)}e.cloneDeep=i})(f1)),f1}var pE;function a5(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ED(),i=i5();function l(m){return m=i.cloneDeep(m),v=>t.isMatch(v,m)}e.matches=l})(o1)),o1}var v1={},_1={},x1={},mE;function o5(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MD(),i=j2(),l=AD();function m(v,_){return t.cloneDeepWith(v,(c,M,P,D)=>{const z=_?.(c,M,P,D);if(z!==void 0)return z;if(typeof v=="object"){if(i.getTag(v)===l.objectTag&&typeof v.constructor!="function"){const F={};return D.set(v,F),t.copyProperties(F,v,P,D),F}switch(Object.prototype.toString.call(v)){case l.numberTag:case l.stringTag:case l.booleanTag:{const F=new v.constructor(v?.valueOf());return t.copyProperties(F,v),F}case l.argumentsTag:{const F={};return t.copyProperties(F,v),F.length=v.length,F[Symbol.iterator]=v[Symbol.iterator],F}default:return}}})}e.cloneDeepWith=m})(x1)),x1}var gE;function s5(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o5();function i(l){return t.cloneDeepWith(l)}e.cloneDeep=i})(_1)),_1}var b1={},w1={},yE;function CD(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function i(l,m=Number.MAX_SAFE_INTEGER){switch(typeof l){case"number":return Number.isInteger(l)&&l>=0&&l<m;case"symbol":return!1;case"string":return t.test(l)}}e.isIndex=i})(w1)),w1}var S1={},vE;function l5(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j2();function i(l){return l!==null&&typeof l=="object"&&t.getTag(l)==="[object Arguments]"}e.isArguments=i})(S1)),S1}var _E;function u5(){return _E||(_E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yD(),i=CD(),l=l5(),m=I2();function v(_,c){let M;if(Array.isArray(c)?M=c:typeof c=="string"&&t.isDeepKey(c)&&_?.[c]==null?M=m.toPath(c):M=[c],M.length===0)return!1;let P=_;for(let D=0;D<M.length;D++){const z=M[D];if((P==null||!Object.hasOwn(P,z))&&!((Array.isArray(P)||l.isArguments(P))&&i.isIndex(z)&&z<P.length))return!1;P=P[z]}return!0}e.has=v})(b1)),b1}var xE;function c5(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ED(),i=O2(),l=s5(),m=z2(),v=u5();function _(c,M){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=i.toKey(c);break}}return M=l.cloneDeep(M),function(P){const D=m.get(P,c);return D===void 0?v.has(P,c):M===void 0?D===void 0:t.isMatch(D,M)}}e.matchesProperty=_})(v1)),v1}var bE;function h5(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bD(),i=e5(),l=a5(),m=c5();function v(_){if(_==null)return t.identity;switch(typeof _){case"function":return _;case"object":return Array.isArray(_)&&_.length===2?m.matchesProperty(_[0],_[1]):l.matches(_);case"string":case"symbol":case"number":return i.property(_)}}e.iteratee=v})(i1)),i1}var wE;function f5(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xj(),i=Yj(),l=bD(),m=Jj(),v=h5();function _(c,M=l.identity){return m.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.ary(v.iteratee(M),1)):[]}e.uniqBy=_})(Yb)),Yb}var T1,SE;function d5(){return SE||(SE=1,T1=f5().uniqBy),T1}var p5=d5();const TE=ef(p5);function m5(e,t,i){return t===!0?TE(e,i):typeof t=="function"?TE(e,t):e}var E1={exports:{}},A1={},M1={exports:{}},C1={};var EE;function g5(){if(EE)return C1;EE=1;var e=Fg();function t(z,F){return z===F&&(z!==0||1/z===1/F)||z!==z&&F!==F}var i=typeof Object.is=="function"?Object.is:t,l=e.useState,m=e.useEffect,v=e.useLayoutEffect,_=e.useDebugValue;function c(z,F){var $=F(),Y=l({inst:{value:$,getSnapshot:F}}),K=Y[0].inst,q=Y[1];return v(function(){K.value=$,K.getSnapshot=F,M(K)&&q({inst:K})},[z,$,F]),m(function(){return M(K)&&q({inst:K}),z(function(){M(K)&&q({inst:K})})},[z]),_($),$}function M(z){var F=z.getSnapshot;z=z.value;try{var $=F();return!i(z,$)}catch{return!0}}function P(z,F){return F()}var D=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P:c;return C1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:D,C1}var AE;function y5(){return AE||(AE=1,M1.exports=g5()),M1.exports}var ME;function v5(){if(ME)return A1;ME=1;var e=Fg(),t=y5();function i(P,D){return P===D&&(P!==0||1/P===1/D)||P!==P&&D!==D}var l=typeof Object.is=="function"?Object.is:i,m=t.useSyncExternalStore,v=e.useRef,_=e.useEffect,c=e.useMemo,M=e.useDebugValue;return A1.useSyncExternalStoreWithSelector=function(P,D,z,F,$){var Y=v(null);if(Y.current===null){var K={hasValue:!1,value:null};Y.current=K}else K=Y.current;Y=c(function(){function he(Pe){if(!ye){if(ye=!0,ge=Pe,Pe=F(Pe),$!==void 0&&K.hasValue){var Re=K.value;if($(Re,Pe))return Te=Re}return Te=Pe}if(Re=Te,l(ge,Pe))return Re;var ot=F(Pe);return $!==void 0&&$(Re,ot)?(ge=Pe,Re):(ge=Pe,Te=ot)}var ye=!1,ge,Te,ke=z===void 0?null:z;return[function(){return he(D())},ke===null?void 0:function(){return he(ke())}]},[D,z,F,$]);var q=m(P,Y[0],Y[1]);return _(function(){K.hasValue=!0,K.value=q},[q]),M(q),q},A1}var CE;function _5(){return CE||(CE=1,E1.exports=v5()),E1.exports}var x5=_5(),N2=H.createContext(null),b5=e=>e,da=()=>{var e=H.useContext(N2);return e?e.store.dispatch:b5},E0=()=>{},w5=()=>E0,S5=(e,t)=>e===t;function dr(e){var t=H.useContext(N2),i=H.useMemo(()=>t?l=>{if(l!=null)return e(l)}:E0,[t,e]);return x5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:w5,t?t.store.getState:E0,t?t.store.getState:E0,i,S5)}function T5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function E5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function A5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(i=>typeof i=="function")){const i=e.map(l=>typeof l=="function"?`function ${l.name||"unnamed"}()`:typeof l).join(", ");throw new TypeError(`${t}[${i}]`)}}var PE=e=>Array.isArray(e)?e:[e];function M5(e){const t=Array.isArray(e[0])?e[0]:e;return A5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function C5(e,t){const i=[],{length:l}=e;for(let m=0;m<l;m++)i.push(e[m].apply(null,t));return i}var P5=class{constructor(e){this.value=e}deref(){return this.value}},D5=typeof WeakRef<"u"?WeakRef:P5,O5=0,DE=1;function o0(){return{s:O5,v:void 0,o:null,p:null}}function PD(e,t={}){let i=o0();const{resultEqualityCheck:l}=t;let m,v=0;function _(){let c=i;const{length:M}=arguments;for(let z=0,F=M;z<F;z++){const $=arguments[z];if(typeof $=="function"||typeof $=="object"&&$!==null){let Y=c.o;Y===null&&(c.o=Y=new WeakMap);const K=Y.get($);K===void 0?(c=o0(),Y.set($,c)):c=K}else{let Y=c.p;Y===null&&(c.p=Y=new Map);const K=Y.get($);K===void 0?(c=o0(),Y.set($,c)):c=K}}const P=c;let D;if(c.s===DE)D=c.v;else if(D=e.apply(null,arguments),v++,l){const z=m?.deref?.()??m;z!=null&&l(z,D)&&(D=z,v!==0&&v--),m=typeof D=="object"&&D!==null||typeof D=="function"?new D5(D):D}return P.s=DE,P.v=D,D}return _.clearCache=()=>{i=o0(),_.resetResultsCount()},_.resultsCount=()=>v,_.resetResultsCount=()=>{v=0},_}function I5(e,...t){const i=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,l=(...m)=>{let v=0,_=0,c,M={},P=m.pop();typeof P=="object"&&(M=P,P=m.pop()),T5(P,`createSelector expects an output function after the inputs, but received: [${typeof P}]`);const D={...i,...M},{memoize:z,memoizeOptions:F=[],argsMemoize:$=PD,argsMemoizeOptions:Y=[]}=D,K=PE(F),q=PE(Y),he=M5(m),ye=z(function(){return v++,P.apply(null,arguments)},...K),ge=$(function(){_++;const ke=C5(he,arguments);return c=ye.apply(null,ke),c},...q);return Object.assign(ge,{resultFunc:P,memoizedResultFunc:ye,dependencies:he,dependencyRecomputations:()=>_,resetDependencyRecomputations:()=>{_=0},lastResult:()=>c,recomputations:()=>v,resetRecomputations:()=>{v=0},memoize:z,argsMemoize:$})};return Object.assign(l,{withTypes:()=>l}),l}var ht=I5(PD),z5=Object.assign((e,t=ht)=>{E5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const i=Object.keys(e),l=i.map(v=>e[v]);return t(l,(...v)=>v.reduce((_,c,M)=>(_[i[M]]=c,_),{}))},{withTypes:()=>z5}),P1={},D1={},O1={},OE;function k5(){return OE||(OE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(l){return typeof l=="symbol"?1:l===null?2:l===void 0?3:l!==l?4:0}const i=(l,m,v)=>{if(l!==m){const _=t(l),c=t(m);if(_===c&&_===0){if(l<m)return v==="desc"?1:-1;if(l>m)return v==="desc"?-1:1}return v==="desc"?c-_:_-c}return 0};e.compareValues=i})(O1)),O1}var I1={},z1={},IE;function DD(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="symbol"||i instanceof Symbol}e.isSymbol=t})(z1)),z1}var zE;function R5(){return zE||(zE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DD(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/;function m(v,_){return Array.isArray(v)?!1:typeof v=="number"||typeof v=="boolean"||v==null||t.isSymbol(v)?!0:typeof v=="string"&&(l.test(v)||!i.test(v))||_!=null&&Object.hasOwn(_,v)}e.isKey=m})(I1)),I1}var kE;function L5(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k5(),i=R5(),l=I2();function m(v,_,c,M){if(v==null)return[];c=M?void 0:c,Array.isArray(v)||(v=Object.values(v)),Array.isArray(_)||(_=_==null?[null]:[_]),_.length===0&&(_=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map($=>String($));const P=($,Y)=>{let K=$;for(let q=0;q<Y.length&&K!=null;++q)K=K[Y[q]];return K},D=($,Y)=>Y==null||$==null?Y:typeof $=="object"&&"key"in $?Object.hasOwn(Y,$.key)?Y[$.key]:P(Y,$.path):typeof $=="function"?$(Y):Array.isArray($)?P(Y,$):typeof Y=="object"?Y[$]:Y,z=_.map($=>(Array.isArray($)&&$.length===1&&($=$[0]),$==null||typeof $=="function"||Array.isArray($)||i.isKey($)?$:{key:$,path:l.toPath($)}));return v.map($=>({original:$,criteria:z.map(Y=>D(Y,$))})).slice().sort(($,Y)=>{for(let K=0;K<z.length;K++){const q=t.compareValues($.criteria[K],Y.criteria[K],c[K]);if(q!==0)return q}return 0}).map($=>$.original)}e.orderBy=m})(D1)),D1}var k1={},RE;function j5(){return RE||(RE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,l=1){const m=[],v=Math.floor(l),_=(c,M)=>{for(let P=0;P<c.length;P++){const D=c[P];Array.isArray(D)&&M<v?_(D,M+1):m.push(D)}};return _(i,0),m}e.flatten=t})(k1)),k1}var R1={},LE;function OD(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CD(),i=L2(),l=wD(),m=TD();function v(_,c,M){return l.isObject(M)&&(typeof c=="number"&&i.isArrayLike(M)&&t.isIndex(c)&&c<M.length||typeof c=="string"&&c in M)?m.isEqualsSameValueZero(M[c],_):!1}e.isIterateeCall=v})(R1)),R1}var jE;function N5(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5(),i=j5(),l=OD();function m(v,..._){const c=_.length;return c>1&&l.isIterateeCall(v,_[0],_[1])?_=[]:c>2&&l.isIterateeCall(_[0],_[1],_[2])&&(_=[_[0]]),t.orderBy(v,i.flatten(_),["asc"])}e.sortBy=m})(P1)),P1}var L1,NE;function B5(){return NE||(NE=1,L1=N5().sortBy),L1}var F5=B5();const Ox=ef(F5);var ID=e=>e.legend.settings,U5=e=>e.legend.size,V5=e=>e.legend.payload;ht([V5,ID],(e,t)=>{var{itemSorter:i}=t,l=e.flat(1);return i?Ox(l,i):l});var s0=1;function q5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,i]=H.useState({height:0,left:0,top:0,width:0}),l=H.useCallback(m=>{if(m!=null){var v=m.getBoundingClientRect(),_={height:v.height,left:v.left,top:v.top,width:v.width};(Math.abs(_.height-t.height)>s0||Math.abs(_.left-t.left)>s0||Math.abs(_.top-t.top)>s0||Math.abs(_.width-t.width)>s0)&&i({height:_.height,left:_.left,top:_.top,width:_.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,l]}function Fa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var G5=typeof Symbol=="function"&&Symbol.observable||"@@observable",BE=G5,j1=()=>Math.random().toString(36).substring(7).split("").join("."),$5={INIT:`@@redux/INIT${j1()}`,REPLACE:`@@redux/REPLACE${j1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${j1()}`},j0=$5;function B2(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function zD(e,t,i){if(typeof e!="function")throw new Error(Fa(2));if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Fa(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Fa(1));return i(zD)(e,t)}let l=e,m=t,v=new Map,_=v,c=0,M=!1;function P(){_===v&&(_=new Map,v.forEach((q,he)=>{_.set(he,q)}))}function D(){if(M)throw new Error(Fa(3));return m}function z(q){if(typeof q!="function")throw new Error(Fa(4));if(M)throw new Error(Fa(5));let he=!0;P();const ye=c++;return _.set(ye,q),function(){if(he){if(M)throw new Error(Fa(6));he=!1,P(),_.delete(ye),v=null}}}function F(q){if(!B2(q))throw new Error(Fa(7));if(typeof q.type>"u")throw new Error(Fa(8));if(typeof q.type!="string")throw new Error(Fa(17));if(M)throw new Error(Fa(9));try{M=!0,m=l(m,q)}finally{M=!1}return(v=_).forEach(ye=>{ye()}),q}function $(q){if(typeof q!="function")throw new Error(Fa(10));l=q,F({type:j0.REPLACE})}function Y(){const q=z;return{subscribe(he){if(typeof he!="object"||he===null)throw new Error(Fa(11));function ye(){const Te=he;Te.next&&Te.next(D())}return ye(),{unsubscribe:q(ye)}},[BE](){return this}}}return F({type:j0.INIT}),{dispatch:F,subscribe:z,getState:D,replaceReducer:$,[BE]:Y}}function Z5(e){Object.keys(e).forEach(t=>{const i=e[t];if(typeof i(void 0,{type:j0.INIT})>"u")throw new Error(Fa(12));if(typeof i(void 0,{type:j0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fa(13))})}function kD(e){const t=Object.keys(e),i={};for(let v=0;v<t.length;v++){const _=t[v];typeof e[_]=="function"&&(i[_]=e[_])}const l=Object.keys(i);let m;try{Z5(i)}catch(v){m=v}return function(_={},c){if(m)throw m;let M=!1;const P={};for(let D=0;D<l.length;D++){const z=l[D],F=i[z],$=_[z],Y=F($,c);if(typeof Y>"u")throw c&&c.type,new Error(Fa(14));P[z]=Y,M=M||Y!==$}return M=M||l.length!==Object.keys(_).length,M?P:_}}function N0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,i)=>(...l)=>t(i(...l)))}function H5(...e){return t=>(i,l)=>{const m=t(i,l);let v=()=>{throw new Error(Fa(15))};const _={getState:m.getState,dispatch:(M,...P)=>v(M,...P)},c=e.map(M=>M(_));return v=N0(...c)(m.dispatch),{...m,dispatch:v}}}function RD(e){return B2(e)&&"type"in e&&typeof e.type=="string"}var LD=Symbol.for("immer-nothing"),FE=Symbol.for("immer-draftable"),Lo=Symbol.for("immer-state");function Ou(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zs=Object,Rg=Zs.getPrototypeOf,B0="constructor",Ix="prototype",Pw="configurable",F0="enumerable",A0="writable",xv="value",Wh=e=>!!e&&!!e[Lo];function Lu(e){return e?jD(e)||kx(e)||!!e[FE]||!!e[B0]?.[FE]||Rx(e)||Lx(e):!1}var W5=Zs[Ix][B0].toString(),UE=new WeakMap;function jD(e){if(!e||!F2(e))return!1;const t=Rg(e);if(t===null||t===Zs[Ix])return!0;const i=Zs.hasOwnProperty.call(t,B0)&&t[B0];if(i===Object)return!0;if(!Ag(i))return!1;let l=UE.get(i);return l===void 0&&(l=Function.toString.call(i),UE.set(i,l)),l===W5}function zx(e,t,i=!0){Bv(e)===0?(i?Reflect.ownKeys(e):Zs.keys(e)).forEach(m=>{t(m,e[m],e)}):e.forEach((l,m)=>t(m,l,e))}function Bv(e){const t=e[Lo];return t?t.type_:kx(e)?1:Rx(e)?2:Lx(e)?3:0}var VE=(e,t,i=Bv(e))=>i===2?e.has(t):Zs[Ix].hasOwnProperty.call(e,t),Dw=(e,t,i=Bv(e))=>i===2?e.get(t):e[t],U0=(e,t,i,l=Bv(e))=>{l===2?e.set(t,i):l===3?e.add(i):e[t]=i};function X5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var kx=Array.isArray,Rx=e=>e instanceof Map,Lx=e=>e instanceof Set,F2=e=>typeof e=="object",Ag=e=>typeof e=="function",N1=e=>typeof e=="boolean";function Y5(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Fh=e=>e.copy_||e.base_,U2=e=>e.modified_?e.copy_:e.base_;function Ow(e,t){if(Rx(e))return new Map(e);if(Lx(e))return new Set(e);if(kx(e))return Array[Ix].slice.call(e);const i=jD(e);if(t===!0||t==="class_only"&&!i){const l=Zs.getOwnPropertyDescriptors(e);delete l[Lo];let m=Reflect.ownKeys(l);for(let v=0;v<m.length;v++){const _=m[v],c=l[_];c[A0]===!1&&(c[A0]=!0,c[Pw]=!0),(c.get||c.set)&&(l[_]={[Pw]:!0,[A0]:!0,[F0]:c[F0],[xv]:e[_]})}return Zs.create(Rg(e),l)}else{const l=Rg(e);if(l!==null&&i)return{...e};const m=Zs.create(l);return Zs.assign(m,e)}}function V2(e,t=!1){return jx(e)||Wh(e)||!Lu(e)||(Bv(e)>1&&Zs.defineProperties(e,{set:l0,add:l0,clear:l0,delete:l0}),Zs.freeze(e),t&&zx(e,(i,l)=>{V2(l,!0)},!1)),e}function K5(){Ou(2)}var l0={[xv]:K5};function jx(e){return e===null||!F2(e)?!0:Zs.isFrozen(e)}var V0="MapSet",Iw="Patches",qE="ArrayMethods",ND={};function qp(e){const t=ND[e];return t||Ou(0,e),t}var GE=e=>!!ND[e],bv,BD=()=>bv,Q5=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:GE(V0)?qp(V0):void 0,arrayMethodsPlugin_:GE(qE)?qp(qE):void 0});function $E(e,t){t&&(e.patchPlugin_=qp(Iw),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zw(e){kw(e),e.drafts_.forEach(J5),e.drafts_=null}function kw(e){e===bv&&(bv=e.parent_)}var ZE=e=>bv=Q5(bv,e);function J5(e){const t=e[Lo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function HE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];if(e!==void 0&&e!==i){i[Lo].modified_&&(zw(t),Ou(4)),Lu(e)&&(e=WE(t,e));const{patchPlugin_:m}=t;m&&m.generateReplacementPatches_(i[Lo].base_,e,t)}else e=WE(t,i);return eN(t,e,!0),zw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==LD?e:void 0}function WE(e,t){if(jx(t))return t;const i=t[Lo];if(!i)return q0(t,e.handledSet_,e);if(!Nx(i,e))return t;if(!i.modified_)return i.base_;if(!i.finalized_){const{callbacks_:l}=i;if(l)for(;l.length>0;)l.pop()(e);VD(i,e)}return i.copy_}function eN(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&V2(t,i)}function FD(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Nx=(e,t)=>e.scope_===t,tN=[];function UD(e,t,i,l){const m=Fh(e),v=e.type_;if(l!==void 0&&Dw(m,l,v)===t){U0(m,l,i,v);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;zx(m,(M,P)=>{if(Wh(P)){const D=c.get(P)||[];D.push(M),c.set(P,D)}})}const _=e.draftLocations_.get(t)??tN;for(const c of _)U0(m,c,i,v)}function rN(e,t,i){e.callbacks_.push(function(m){const v=t;if(!v||!Nx(v,m))return;m.mapSetPlugin_?.fixSetContents(v);const _=U2(v);UD(e,v.draft_??v,_,i),VD(v,m)})}function VD(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:l}=t;if(l){const m=l.getPath(e);m&&l.generatePatches_(e,m,t)}FD(e)}}function nN(e,t,i){const{scope_:l}=e;if(Wh(i)){const m=i[Lo];Nx(m,l)&&m.callbacks_.push(function(){M0(e);const _=U2(m);UD(e,i,_,t)})}else Lu(i)&&e.callbacks_.push(function(){const v=Fh(e);e.type_===3?v.has(i)&&q0(i,l.handledSet_,l):Dw(v,t,e.type_)===i&&l.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&q0(Dw(e.copy_,t,e.type_),l.handledSet_,l)})}function q0(e,t,i){return!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1||Wh(e)||t.has(e)||!Lu(e)||jx(e)||(t.add(e),zx(e,(l,m)=>{if(Wh(m)){const v=m[Lo];if(Nx(v,i)){const _=U2(v);U0(e,l,_,e.type_),FD(v)}}else Lu(m)&&q0(m,t,i)})),e}function iN(e,t){const i=kx(e),l={type_:i?1:0,scope_:t?t.scope_:BD(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let m=l,v=G0;i&&(m=[l],v=wv);const{revoke:_,proxy:c}=Proxy.revocable(m,v);return l.draft_=c,l.revoke_=_,[c,l]}var G0={get(e,t){if(t===Lo)return e;let i=e.scope_.arrayMethodsPlugin_;const l=e.type_===1&&typeof t=="string";if(l&&i?.isArrayOperationMethod(t))return i.createMethodInterceptor(e,t);const m=Fh(e);if(!VE(m,t,e.type_))return aN(e,m,t);const v=m[t];if(e.finalized_||!Lu(v)||l&&e.operationMethod&&i?.isMutatingArrayMethod(e.operationMethod)&&Y5(t))return v;if(v===B1(e.base_,t)){M0(e);const _=e.type_===1?+t:t,c=Lw(e.scope_,v,e,_);return e.copy_[_]=c}return v},has(e,t){return t in Fh(e)},ownKeys(e){return Reflect.ownKeys(Fh(e))},set(e,t,i){const l=qD(Fh(e),t);if(l?.set)return l.set.call(e.draft_,i),!0;if(!e.modified_){const m=B1(Fh(e),t),v=m?.[Lo];if(v&&v.base_===i)return e.copy_[t]=i,e.assigned_.set(t,!1),!0;if(X5(i,m)&&(i!==void 0||VE(e.base_,t,e.type_)))return!0;M0(e),Rw(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_.set(t,!0),nN(e,t,i)),!0},deleteProperty(e,t){return M0(e),B1(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Rw(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=Fh(e),l=Reflect.getOwnPropertyDescriptor(i,t);return l&&{[A0]:!0,[Pw]:e.type_!==1||t!=="length",[F0]:l[F0],[xv]:i[t]}},defineProperty(){Ou(11)},getPrototypeOf(e){return Rg(e.base_)},setPrototypeOf(){Ou(12)}},wv={};for(let e in G0){let t=G0[e];wv[e]=function(){const i=arguments;return i[0]=i[0][0],t.apply(this,i)}}wv.deleteProperty=function(e,t){return wv.set.call(this,e,t,void 0)};wv.set=function(e,t,i){return G0.set.call(this,e[0],t,i,e[0])};function B1(e,t){const i=e[Lo];return(i?Fh(i):e)[t]}function aN(e,t,i){const l=qD(t,i);return l?xv in l?l[xv]:l.get?.call(e.draft_):void 0}function qD(e,t){if(!(t in e))return;let i=Rg(e);for(;i;){const l=Object.getOwnPropertyDescriptor(i,t);if(l)return l;i=Rg(i)}}function Rw(e){e.modified_||(e.modified_=!0,e.parent_&&Rw(e.parent_))}function M0(e){e.copy_||(e.assigned_=new Map,e.copy_=Ow(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oN=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(i,l,m)=>{if(Ag(i)&&!Ag(l)){const _=l;l=i;const c=this;return function(P=_,...D){return c.produce(P,z=>l.call(this,z,...D))}}Ag(l)||Ou(6),m!==void 0&&!Ag(m)&&Ou(7);let v;if(Lu(i)){const _=ZE(this),c=Lw(_,i,void 0);let M=!0;try{v=l(c),M=!1}finally{M?zw(_):kw(_)}return $E(_,m),HE(v,_)}else if(!i||!F2(i)){if(v=l(i),v===void 0&&(v=i),v===LD&&(v=void 0),this.autoFreeze_&&V2(v,!0),m){const _=[],c=[];qp(Iw).generateReplacementPatches_(i,v,{patches_:_,inversePatches_:c}),m(_,c)}return v}else Ou(1,i)},this.produceWithPatches=(i,l)=>{if(Ag(i))return(c,...M)=>this.produceWithPatches(c,P=>i(P,...M));let m,v;return[this.produce(i,l,(c,M)=>{m=c,v=M}),m,v]},N1(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),N1(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),N1(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Lu(t)||Ou(8),Wh(t)&&(t=ku(t));const i=ZE(this),l=Lw(i,t,void 0);return l[Lo].isManual_=!0,kw(i),l}finishDraft(t,i){const l=t&&t[Lo];(!l||!l.isManual_)&&Ou(9);const{scope_:m}=l;return $E(m,i),HE(void 0,m)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,i){let l;for(l=i.length-1;l>=0;l--){const v=i[l];if(v.path.length===0&&v.op==="replace"){t=v.value;break}}l>-1&&(i=i.slice(l+1));const m=qp(Iw).applyPatches_;return Wh(t)?m(t,i):this.produce(t,v=>m(v,i))}};function Lw(e,t,i,l){const[m,v]=Rx(t)?qp(V0).proxyMap_(t,i):Lx(t)?qp(V0).proxySet_(t,i):iN(t,i);return(i?.scope_??BD()).drafts_.push(m),v.callbacks_=i?.callbacks_??[],v.key_=l,i&&l!==void 0?rN(i,v,l):v.callbacks_.push(function(M){M.mapSetPlugin_?.fixSetContents(v);const{patchPlugin_:P}=M;v.modified_&&P&&P.generatePatches_(v,[],M)}),m}function ku(e){return Wh(e)||Ou(10,e),GD(e)}function GD(e){if(!Lu(e)||jx(e))return e;const t=e[Lo];let i,l=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=Ow(e,t.scope_.immer_.useStrictShallowCopy_),l=t.scope_.immer_.shouldUseStrictIteration()}else i=Ow(e,!0);return zx(i,(m,v)=>{U0(i,m,GD(v))},l),t&&(t.finalized_=!1),i}var sN=new oN,$D=sN.produce;function ZD(e){return({dispatch:i,getState:l})=>m=>v=>typeof v=="function"?v(i,l,e):m(v)}var lN=ZD(),uN=ZD,cN=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?N0:N0.apply(null,arguments)};function Rl(e,t){function i(...l){if(t){let m=t(...l);if(!m)throw new Error(Hs(0));return{type:e,payload:m.payload,..."meta"in m&&{meta:m.meta},..."error"in m&&{error:m.error}}}return{type:e,payload:l[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=l=>RD(l)&&l.type===e,i}var HD=class hv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hv.prototype)}static get[Symbol.species](){return hv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hv(...t[0].concat(this)):new hv(...t.concat(this))}};function XE(e){return Lu(e)?$D(e,()=>{}):e}function u0(e,t,i){return e.has(t)?e.get(t):e.set(t,i(t)).get(t)}function hN(e){return typeof e=="boolean"}var fN=()=>function(t){const{thunk:i=!0,immutableCheck:l=!0,serializableCheck:m=!0,actionCreatorCheck:v=!0}=t??{};let _=new HD;return i&&(hN(i)?_.push(lN):_.push(uN(i.extraArgument))),_},WD="RTK_autoBatch",Jn=()=>e=>({payload:e,meta:{[WD]:!0}}),YE=e=>t=>{setTimeout(t,e)},XD=(e={type:"raf"})=>t=>(...i)=>{const l=t(...i);let m=!0,v=!1,_=!1;const c=new Set,M=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:YE(10):e.type==="callback"?e.queueNotification:YE(e.timeout),P=()=>{_=!1,v&&(v=!1,c.forEach(D=>D()))};return Object.assign({},l,{subscribe(D){const z=()=>m&&D(),F=l.subscribe(z);return c.add(D),()=>{F(),c.delete(D)}},dispatch(D){try{return m=!D?.meta?.[WD],v=!m,v&&(_||(_=!0,M(P))),l.dispatch(D)}finally{m=!0}}})},dN=e=>function(i){const{autoBatch:l=!0}=i??{};let m=new HD(e);return l&&m.push(XD(typeof l=="object"?l:void 0)),m};function pN(e){const t=fN(),{reducer:i=void 0,middleware:l,devTools:m=!0,preloadedState:v=void 0,enhancers:_=void 0}=e||{};let c;if(typeof i=="function")c=i;else if(B2(i))c=kD(i);else throw new Error(Hs(1));let M;typeof l=="function"?M=l(t):M=t();let P=N0;m&&(P=cN({trace:!1,...typeof m=="object"&&m}));const D=H5(...M),z=dN(D);let F=typeof _=="function"?_(z):z();const $=P(...F);return zD(c,v,$)}function YD(e){const t={},i=[];let l;const m={addCase(v,_){const c=typeof v=="string"?v:v.type;if(!c)throw new Error(Hs(28));if(c in t)throw new Error(Hs(29));return t[c]=_,m},addAsyncThunk(v,_){return _.pending&&(t[v.pending.type]=_.pending),_.rejected&&(t[v.rejected.type]=_.rejected),_.fulfilled&&(t[v.fulfilled.type]=_.fulfilled),_.settled&&i.push({matcher:v.settled,reducer:_.settled}),m},addMatcher(v,_){return i.push({matcher:v,reducer:_}),m},addDefaultCase(v){return l=v,m}};return e(m),[t,i,l]}function mN(e){return typeof e=="function"}function gN(e,t){let[i,l,m]=YD(t),v;if(mN(e))v=()=>XE(e());else{const c=XE(e);v=()=>c}function _(c=v(),M){let P=[i[M.type],...l.filter(({matcher:D})=>D(M)).map(({reducer:D})=>D)];return P.filter(D=>!!D).length===0&&(P=[m]),P.reduce((D,z)=>{if(z)if(Wh(D)){const $=z(D,M);return $===void 0?D:$}else{if(Lu(D))return $D(D,F=>z(F,M));{const F=z(D,M);if(F===void 0){if(D===null)return D;throw Error("A case reducer on a non-draftable value must not return undefined")}return F}}return D},c)}return _.getInitialState=v,_}var yN="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",vN=(e=21)=>{let t="",i=e;for(;i--;)t+=yN[Math.random()*64|0];return t},_N=Symbol.for("rtk-slice-createasyncthunk");function xN(e,t){return`${e}/${t}`}function bN({creators:e}={}){const t=e?.asyncThunk?.[_N];return function(l){const{name:m,reducerPath:v=m}=l;if(!m)throw new Error(Hs(11));const _=(typeof l.reducers=="function"?l.reducers(SN()):l.reducers)||{},c=Object.keys(_),M={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},P={addCase(ge,Te){const ke=typeof ge=="string"?ge:ge.type;if(!ke)throw new Error(Hs(12));if(ke in M.sliceCaseReducersByType)throw new Error(Hs(13));return M.sliceCaseReducersByType[ke]=Te,P},addMatcher(ge,Te){return M.sliceMatchers.push({matcher:ge,reducer:Te}),P},exposeAction(ge,Te){return M.actionCreators[ge]=Te,P},exposeCaseReducer(ge,Te){return M.sliceCaseReducersByName[ge]=Te,P}};c.forEach(ge=>{const Te=_[ge],ke={reducerName:ge,type:xN(m,ge),createNotation:typeof l.reducers=="function"};EN(Te)?MN(ke,Te,P,t):TN(ke,Te,P)});function D(){const[ge={},Te=[],ke=void 0]=typeof l.extraReducers=="function"?YD(l.extraReducers):[l.extraReducers],Pe={...ge,...M.sliceCaseReducersByType};return gN(l.initialState,Re=>{for(let ot in Pe)Re.addCase(ot,Pe[ot]);for(let ot of M.sliceMatchers)Re.addMatcher(ot.matcher,ot.reducer);for(let ot of Te)Re.addMatcher(ot.matcher,ot.reducer);ke&&Re.addDefaultCase(ke)})}const z=ge=>ge,F=new Map,$=new WeakMap;let Y;function K(ge,Te){return Y||(Y=D()),Y(ge,Te)}function q(){return Y||(Y=D()),Y.getInitialState()}function he(ge,Te=!1){function ke(Re){let ot=Re[ge];return typeof ot>"u"&&Te&&(ot=u0($,ke,q)),ot}function Pe(Re=z){const ot=u0(F,Te,()=>new WeakMap);return u0(ot,Re,()=>{const bt={};for(const[kt,We]of Object.entries(l.selectors??{}))bt[kt]=wN(We,Re,()=>u0($,Re,q),Te);return bt})}return{reducerPath:ge,getSelectors:Pe,get selectors(){return Pe(ke)},selectSlice:ke}}const ye={name:m,reducer:K,actions:M.actionCreators,caseReducers:M.sliceCaseReducersByName,getInitialState:q,...he(v),injectInto(ge,{reducerPath:Te,...ke}={}){const Pe=Te??v;return ge.inject({reducerPath:Pe,reducer:K},ke),{...ye,...he(Pe,!0)}}};return ye}}function wN(e,t,i,l){function m(v,..._){let c=t(v);return typeof c>"u"&&l&&(c=i()),e(c,..._)}return m.unwrapped=e,m}var ms=bN();function SN(){function e(t,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...i}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...i){return t(...i)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:i}},asyncThunk:e}}function TN({type:e,reducerName:t,createNotation:i},l,m){let v,_;if("reducer"in l){if(i&&!AN(l))throw new Error(Hs(17));v=l.reducer,_=l.prepare}else v=l;m.addCase(e,v).exposeCaseReducer(t,v).exposeAction(t,_?Rl(e,_):Rl(e))}function EN(e){return e._reducerDefinitionType==="asyncThunk"}function AN(e){return e._reducerDefinitionType==="reducerWithPrepare"}function MN({type:e,reducerName:t},i,l,m){if(!m)throw new Error(Hs(18));const{payloadCreator:v,fulfilled:_,pending:c,rejected:M,settled:P,options:D}=i,z=m(e,v,D);l.exposeAction(t,z),_&&l.addCase(z.fulfilled,_),c&&l.addCase(z.pending,c),M&&l.addCase(z.rejected,M),P&&l.addMatcher(z.settled,P),l.exposeCaseReducer(t,{fulfilled:_||c0,pending:c||c0,rejected:M||c0,settled:P||c0})}function c0(){}var CN="task",KD="listener",QD="completed",q2="cancelled",PN=`task-${q2}`,DN=`task-${QD}`,jw=`${KD}-${q2}`,ON=`${KD}-${QD}`,Bx=class{constructor(e){this.code=e,this.message=`${CN} ${q2} (reason: ${e})`}name="TaskAbortError";message},G2=(e,t)=>{if(typeof e!="function")throw new TypeError(Hs(32))},$0=()=>{},JD=(e,t=$0)=>(e.catch(t),e),eO=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),jp=e=>{if(e.aborted)throw new Bx(e.reason)};function tO(e,t){let i=$0;return new Promise((l,m)=>{const v=()=>m(new Bx(e.reason));if(e.aborted){v();return}i=eO(e,v),t.finally(()=>i()).then(l,m)}).finally(()=>{i=$0})}var IN=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(i){return{status:i instanceof Bx?"cancelled":"rejected",error:i}}finally{t?.()}},Z0=e=>t=>JD(tO(e,t).then(i=>(jp(e),i))),rO=e=>{const t=Z0(e);return i=>t(new Promise(l=>setTimeout(l,i)))},{assign:zg}=Object,KE={},Fx="listenerMiddleware",zN=(e,t)=>{const i=l=>eO(e,()=>l.abort(e.reason));return(l,m)=>{G2(l);const v=new AbortController;i(v);const _=IN(async()=>{jp(e),jp(v.signal);const c=await l({pause:Z0(v.signal),delay:rO(v.signal),signal:v.signal});return jp(v.signal),c},()=>v.abort(DN));return m?.autoJoin&&t.push(_.catch($0)),{result:Z0(e)(_),cancel(){v.abort(PN)}}}},kN=(e,t)=>{const i=async(l,m)=>{jp(t);let v=()=>{};const c=[new Promise((M,P)=>{let D=e({predicate:l,effect:(z,F)=>{F.unsubscribe(),M([z,F.getState(),F.getOriginalState()])}});v=()=>{D(),P()}})];m!=null&&c.push(new Promise(M=>setTimeout(M,m,null)));try{const M=await tO(t,Promise.race(c));return jp(t),M}finally{v()}};return(l,m)=>JD(i(l,m))},nO=e=>{let{type:t,actionCreator:i,matcher:l,predicate:m,effect:v}=e;if(t)m=Rl(t).match;else if(i)t=i.type,m=i.match;else if(l)m=l;else if(!m)throw new Error(Hs(21));return G2(v),{predicate:m,type:t,effect:v}},iO=zg(e=>{const{type:t,predicate:i,effect:l}=nO(e);return{id:vN(),effect:l,type:t,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(Hs(22))}}},{withTypes:()=>iO}),QE=(e,t)=>{const{type:i,effect:l,predicate:m}=nO(t);return Array.from(e.values()).find(v=>(typeof i=="string"?v.type===i:v.predicate===m)&&v.effect===l)},Nw=e=>{e.pending.forEach(t=>{t.abort(jw)})},RN=(e,t)=>()=>{for(const i of t.keys())Nw(i);e.clear()},JE=(e,t,i)=>{try{e(t,i)}catch(l){setTimeout(()=>{throw l},0)}},aO=zg(Rl(`${Fx}/add`),{withTypes:()=>aO}),LN=Rl(`${Fx}/removeAll`),oO=zg(Rl(`${Fx}/remove`),{withTypes:()=>oO}),jN=(...e)=>{console.error(`${Fx}/error`,...e)},Fv=(e={})=>{const t=new Map,i=new Map,l=$=>{const Y=i.get($)??0;i.set($,Y+1)},m=$=>{const Y=i.get($)??1;Y===1?i.delete($):i.set($,Y-1)},{extra:v,onError:_=jN}=e;G2(_);const c=$=>($.unsubscribe=()=>t.delete($.id),t.set($.id,$),Y=>{$.unsubscribe(),Y?.cancelActive&&Nw($)}),M=$=>{const Y=QE(t,$)??iO($);return c(Y)};zg(M,{withTypes:()=>M});const P=$=>{const Y=QE(t,$);return Y&&(Y.unsubscribe(),$.cancelActive&&Nw(Y)),!!Y};zg(P,{withTypes:()=>P});const D=async($,Y,K,q)=>{const he=new AbortController,ye=kN(M,he.signal),ge=[];try{$.pending.add(he),l($),await Promise.resolve($.effect(Y,zg({},K,{getOriginalState:q,condition:(Te,ke)=>ye(Te,ke).then(Boolean),take:ye,delay:rO(he.signal),pause:Z0(he.signal),extra:v,signal:he.signal,fork:zN(he.signal,ge),unsubscribe:$.unsubscribe,subscribe:()=>{t.set($.id,$)},cancelActiveListeners:()=>{$.pending.forEach((Te,ke,Pe)=>{Te!==he&&(Te.abort(jw),Pe.delete(Te))})},cancel:()=>{he.abort(jw),$.pending.delete(he)},throwIfCancelled:()=>{jp(he.signal)}})))}catch(Te){Te instanceof Bx||JE(_,Te,{raisedBy:"effect"})}finally{await Promise.all(ge),he.abort(ON),m($),$.pending.delete(he)}},z=RN(t,i);return{middleware:$=>Y=>K=>{if(!RD(K))return Y(K);if(aO.match(K))return M(K.payload);if(LN.match(K)){z();return}if(oO.match(K))return P(K.payload);let q=$.getState();const he=()=>{if(q===KE)throw new Error(Hs(23));return q};let ye;try{if(ye=Y(K),t.size>0){const ge=$.getState(),Te=Array.from(t.values());for(const ke of Te){let Pe=!1;try{Pe=ke.predicate(K,ge,q)}catch(Re){Pe=!1,JE(_,Re,{raisedBy:"predicate"})}Pe&&D(ke,K,$,he)}}}finally{q=KE}return ye},startListening:M,stopListening:P,clearListeners:z}};function Hs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var NN={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},sO=ms({name:"chartLayout",initialState:NN,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var i,l,m,v;e.margin.top=(i=t.payload.top)!==null&&i!==void 0?i:0,e.margin.right=(l=t.payload.right)!==null&&l!==void 0?l:0,e.margin.bottom=(m=t.payload.bottom)!==null&&m!==void 0?m:0,e.margin.left=(v=t.payload.left)!==null&&v!==void 0?v:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:BN,setLayout:FN,setChartSize:UN,setScale:VN}=sO.actions,qN=sO.reducer;function lO(e,t,i){return Array.isArray(e)&&e&&t+i!==0?e.slice(t,i+1):e}function Br(e){return Number.isFinite(e)}function Lc(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function eA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function Cg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(i),!0).forEach(function(l){GN(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function GN(e,t,i){return(t=$N(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $N(e){var t=ZN(e,"string");return typeof t=="symbol"?t:t+""}function ZN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ga(e,t,i){return mo(e)||mo(t)?i:Rc(t)?Dx(e,t,i):typeof t=="function"?t(e):i}var HN=(e,t,i)=>{if(t&&i){var{width:l,height:m}=i,{align:v,verticalAlign:_,layout:c}=t;if((c==="vertical"||c==="horizontal"&&_==="middle")&&v!=="center"&&Jt(e[v]))return Cg(Cg({},e),{},{[v]:e[v]+(l||0)});if((c==="horizontal"||c==="vertical"&&v==="center")&&_!=="middle"&&Jt(e[_]))return Cg(Cg({},e),{},{[_]:e[_]+(m||0)})}return e},Nc=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",uO=(e,t,i,l)=>{if(l)return e.map(c=>c.coordinate);var m,v,_=e.map(c=>(c.coordinate===t&&(m=!0),c.coordinate===i&&(v=!0),c.coordinate));return m||_.push(t),v||_.push(i),_},cO=(e,t,i)=>{if(!e)return null;var{duplicateDomain:l,type:m,range:v,scale:_,realScaleType:c,isCategorical:M,categoricalDomain:P,tickCount:D,ticks:z,niceTicks:F,axisType:$}=e;if(!_)return null;var Y=c==="scaleBand"&&_.bandwidth?_.bandwidth()/2:2,K=m==="category"&&_.bandwidth?_.bandwidth()/Y:0;if(K=$==="angleAxis"&&v&&v.length>=2?Il(v[0]-v[1])*2*K:K,z||F){var q=(z||F||[]).map((he,ye)=>{var ge=l?l.indexOf(he):he,Te=_.map(ge);return Br(Te)?{coordinate:Te+K,value:he,offset:K,index:ye}:null}).filter(fs);return q}return M&&P?P.map((he,ye)=>{var ge=_.map(he);return Br(ge)?{coordinate:ge+K,value:he,index:ye,offset:K}:null}).filter(fs):_.ticks&&D!=null?_.ticks(D).map((he,ye)=>{var ge=_.map(he);return Br(ge)?{coordinate:ge+K,value:he,index:ye,offset:K}:null}).filter(fs):_.domain().map((he,ye)=>{var ge=_.map(he);return Br(ge)?{coordinate:ge+K,value:l?l[he]:he,index:ye,offset:K}:null}).filter(fs)},WN=e=>{var t,i=e.length;if(!(i<=0)){var l=(t=e[0])===null||t===void 0?void 0:t.length;if(!(l==null||l<=0))for(var m=0;m<l;++m)for(var v=0,_=0,c=0;c<i;++c){var M=e[c],P=M?.[m];if(P!=null){var D=P[1],z=P[0],F=kc(D)?z:D;F>=0?(P[0]=v,v+=F,P[1]=v):(P[0]=_,_+=F,P[1]=_)}}}},XN=e=>{var t,i=e.length;if(!(i<=0)){var l=(t=e[0])===null||t===void 0?void 0:t.length;if(!(l==null||l<=0))for(var m=0;m<l;++m)for(var v=0,_=0;_<i;++_){var c=e[_],M=c?.[m];if(M!=null){var P=kc(M[1])?M[0]:M[1];P>=0?(M[0]=v,v+=P,M[1]=v):(M[0]=0,M[1]=0)}}}},YN={sign:WN,expand:kj,none:Up,silhouette:Rj,wiggle:Lj,positive:XN},KN=(e,t,i)=>{var l,m=(l=YN[i])!==null&&l!==void 0?l:Up,v=zj().keys(t).value((c,M)=>Number(Ga(c,M,0))).order(Cw).offset(m),_=v(e);return _.forEach((c,M)=>{c.forEach((P,D)=>{var z=Ga(e[D],t[M],0);Array.isArray(z)&&z.length===2&&Jt(z[0])&&Jt(z[1])&&(P[0]=z[0],P[1]=z[1])})}),_};function QN(e){return e==null?void 0:String(e)}function tA(e){var{axis:t,ticks:i,bandSize:l,entry:m,index:v,dataKey:_}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!mo(m[t.dataKey])){var c=_D(i,"value",m[t.dataKey]);if(c)return c.coordinate+l/2}return i!=null&&i[v]?i[v].coordinate+l/2:null}var M=Ga(m,mo(_)?t.dataKey:_),P=t.scale.map(M);return Jt(P)?P:null}var JN=e=>{var t=e.flat(2).filter(Jt);return[Math.min(...t),Math.max(...t)]},eB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],tB=(e,t,i)=>{if(e!=null)return eB(Object.keys(e).reduce((l,m)=>{var v=e[m];if(!v)return l;var{stackedData:_}=v,c=_.reduce((M,P)=>{var D=lO(P,t,i),z=JN(D);return!Br(z[0])||!Br(z[1])?M:[Math.min(M[0],z[0]),Math.max(M[1],z[1])]},[1/0,-1/0]);return[Math.min(c[0],l[0]),Math.max(c[1],l[1])]},[1/0,-1/0]))},rA=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nA=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,H0=(e,t,i)=>{if(e&&e.scale&&e.scale.bandwidth){var l=e.scale.bandwidth();if(!i||l>0)return l}if(e&&t&&t.length>=2){for(var m=Ox(t,D=>D.coordinate),v=1/0,_=1,c=m.length;_<c;_++){var M=m[_],P=m[_-1];v=Math.min((M?.coordinate||0)-(P?.coordinate||0),v)}return v===1/0?0:v}return i?void 0:0};function iA(e){var{tooltipEntrySettings:t,dataKey:i,payload:l,value:m,name:v}=e;return Cg(Cg({},t),{},{dataKey:i,payload:l,value:m,name:v})}function hO(e,t){if(e)return String(e);if(typeof t=="string")return t}var rB=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},nB=(e,t)=>t==="centric"?e.angle:e.radius,rf=e=>e.layout.width,nf=e=>e.layout.height,iB=e=>e.layout.scale,fO=e=>e.layout.margin,Ux=ht(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Vx=ht(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),aB="data-recharts-item-index",oB="data-recharts-item-id",Uv=60;function aA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function h0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(i),!0).forEach(function(l){sB(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function sB(e,t,i){return(t=lB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function lB(e){var t=uB(e,"string");return typeof t=="symbol"?t:t+""}function uB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cB=e=>e.brush.height;function hB(e){var t=Vx(e);return t.reduce((i,l)=>{if(l.orientation==="left"&&!l.mirror&&!l.hide){var m=typeof l.width=="number"?l.width:Uv;return i+m}return i},0)}function fB(e){var t=Vx(e);return t.reduce((i,l)=>{if(l.orientation==="right"&&!l.mirror&&!l.hide){var m=typeof l.width=="number"?l.width:Uv;return i+m}return i},0)}function dB(e){var t=Ux(e);return t.reduce((i,l)=>l.orientation==="top"&&!l.mirror&&!l.hide?i+l.height:i,0)}function pB(e){var t=Ux(e);return t.reduce((i,l)=>l.orientation==="bottom"&&!l.mirror&&!l.hide?i+l.height:i,0)}var $a=ht([rf,nf,fO,cB,hB,fB,dB,pB,ID,U5],(e,t,i,l,m,v,_,c,M,P)=>{var D={left:(i.left||0)+m,right:(i.right||0)+v},z={top:(i.top||0)+_,bottom:(i.bottom||0)+c},F=h0(h0({},z),D),$=F.bottom;F.bottom+=l,F=HN(F,M,P);var Y=e-F.left-F.right,K=t-F.top-F.bottom;return h0(h0({brushBottom:$},F),{},{width:Math.max(Y,0),height:Math.max(K,0)})}),mB=ht($a,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),dO=ht(rf,nf,(e,t)=>({x:0,y:0,width:e,height:t})),gB=H.createContext(null),gs=()=>H.useContext(gB)!=null,qx=e=>e.brush,Gx=ht([qx,$a,fO],(e,t,i)=>({height:e.height,x:Jt(e.x)?e.x:t.left,y:Jt(e.y)?e.y:t.top+t.height+t.brushBottom-(i?.bottom||0),width:Jt(e.width)?e.width:t.width})),F1={},U1={},V1={},oA;function yB(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,l,{signal:m,edges:v}={}){let _,c=null;const M=v!=null&&v.includes("leading"),P=v==null||v.includes("trailing"),D=()=>{c!==null&&(i.apply(_,c),_=void 0,c=null)},z=()=>{P&&D(),K()};let F=null;const $=()=>{F!=null&&clearTimeout(F),F=setTimeout(()=>{F=null,z()},l)},Y=()=>{F!==null&&(clearTimeout(F),F=null)},K=()=>{Y(),_=void 0,c=null},q=()=>{D()},he=function(...ye){if(m?.aborted)return;_=this,c=ye;const ge=F==null;$(),M&&ge&&D()};return he.schedule=$,he.cancel=K,he.flush=q,m?.addEventListener("abort",K,{once:!0}),he}e.debounce=t})(V1)),V1}var sA;function vB(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yB();function i(l,m=0,v={}){typeof v!="object"&&(v={});const{leading:_=!1,trailing:c=!0,maxWait:M}=v,P=Array(2);_&&(P[0]="leading"),c&&(P[1]="trailing");let D,z=null;const F=t.debounce(function(...K){D=l.apply(this,K),z=null},m,{edges:P}),$=function(...K){return M!=null&&(z===null&&(z=Date.now()),Date.now()-z>=M)?(D=l.apply(this,K),z=Date.now(),F.cancel(),F.schedule(),D):(F.apply(this,K),D)},Y=()=>(F.flush(),D);return $.cancel=F.cancel,$.flush=Y,$}e.debounce=i})(U1)),U1}var lA;function _B(){return lA||(lA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vB();function i(l,m=0,v={}){const{leading:_=!0,trailing:c=!0}=v;return t.debounce(l,m,{leading:_,maxWait:m,trailing:c})}e.throttle=i})(F1)),F1}var q1,uA;function xB(){return uA||(uA=1,q1=_B().throttle),q1}var bB=xB();const wB=ef(bB);var W0=function(t,i){for(var l=arguments.length,m=new Array(l>2?l-2:0),v=2;v<l;v++)m[v-2]=arguments[v];if(typeof console<"u"&&console.warn&&(i===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(i===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var _=0;console.warn(i.replace(/%s/g,()=>m[_++]))}},Pc={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},pO=(e,t,i)=>{var{width:l=Pc.width,height:m=Pc.height,aspect:v,maxHeight:_}=i,c=Vp(l)?e:Number(l),M=Vp(m)?t:Number(m);return v&&v>0&&(c?M=c/v:M&&(c=M*v),_&&M!=null&&M>_&&(M=_)),{calculatedWidth:c,calculatedHeight:M}},SB={width:0,height:0,overflow:"visible"},TB={width:0,overflowX:"visible"},EB={height:0,overflowY:"visible"},AB={},MB=e=>{var{width:t,height:i}=e,l=Vp(t),m=Vp(i);return l&&m?SB:l?TB:m?EB:AB};function CB(e){var{width:t,height:i,aspect:l}=e,m=t,v=i;return m===void 0&&v===void 0?(m=Pc.width,v=Pc.height):m===void 0?m=l&&l>0?void 0:Pc.width:v===void 0&&(v=l&&l>0?void 0:Pc.height),{width:m,height:v}}function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Bw.apply(null,arguments)}function cA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function hA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(i),!0).forEach(function(l){PB(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):cA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function PB(e,t,i){return(t=DB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function DB(e){var t=OB(e,"string");return typeof t=="symbol"?t:t+""}function OB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mO=H.createContext(Pc.initialDimension);function IB(e){return Lc(e.width)&&Lc(e.height)}function gO(e){var{children:t,width:i,height:l}=e,m=H.useMemo(()=>({width:i,height:l}),[i,l]);return IB(m)?H.createElement(mO.Provider,{value:m},t):null}var $2=()=>H.useContext(mO),zB=H.forwardRef((e,t)=>{var{aspect:i,initialDimension:l=Pc.initialDimension,width:m,height:v,minWidth:_=Pc.minWidth,minHeight:c,maxHeight:M,children:P,debounce:D=Pc.debounce,id:z,className:F,onResize:$,style:Y={}}=e,K=H.useRef(null),q=H.useRef();q.current=$,H.useImperativeHandle(t,()=>K.current);var[he,ye]=H.useState({containerWidth:l.width,containerHeight:l.height}),ge=H.useCallback((ot,bt)=>{ye(kt=>{var We=Math.round(ot),Ve=Math.round(bt);return kt.containerWidth===We&&kt.containerHeight===Ve?kt:{containerWidth:We,containerHeight:Ve}})},[]);H.useEffect(()=>{if(K.current==null||typeof ResizeObserver>"u")return qg;var ot=Ve=>{var Ot,Ue=Ve[0];if(Ue!=null){var{width:Je,height:Le}=Ue.contentRect;ge(Je,Le),(Ot=q.current)===null||Ot===void 0||Ot.call(q,Je,Le)}};D>0&&(ot=wB(ot,D,{trailing:!0,leading:!1}));var bt=new ResizeObserver(ot),{width:kt,height:We}=K.current.getBoundingClientRect();return ge(kt,We),bt.observe(K.current),()=>{bt.disconnect()}},[ge,D]);var{containerWidth:Te,containerHeight:ke}=he;W0(!i||i>0,"The aspect(%s) must be greater than zero.",i);var{calculatedWidth:Pe,calculatedHeight:Re}=pO(Te,ke,{width:m,height:v,aspect:i,maxHeight:M});return W0(Pe!=null&&Pe>0||Re!=null&&Re>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Pe,Re,m,v,_,c,i),H.createElement("div",{id:z?"".concat(z):void 0,className:Xn("recharts-responsive-container",F),style:hA(hA({},Y),{},{width:m,height:v,minWidth:_,minHeight:c,maxHeight:M}),ref:K},H.createElement("div",{style:MB({width:m,height:v})},H.createElement(gO,{width:Pe,height:Re},P)))}),G1=H.forwardRef((e,t)=>{var i=$2();if(Lc(i.width)&&Lc(i.height))return e.children;var{width:l,height:m}=CB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:v,calculatedHeight:_}=pO(void 0,void 0,{width:l,height:m,aspect:e.aspect,maxHeight:e.maxHeight});return Jt(v)&&Jt(_)?H.createElement(gO,{width:v,height:_},e.children):H.createElement(zB,Bw({},e,{width:l,height:m,ref:t}))});function Z2(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var $x=()=>{var e,t=gs(),i=dr(mB),l=dr(Gx),m=(e=dr(qx))===null||e===void 0?void 0:e.padding;return!t||!l||!m?i:{width:l.width-m.left-m.right,height:l.height-m.top-m.bottom,x:m.left,y:m.top}},kB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},yO=()=>{var e;return(e=dr($a))!==null&&e!==void 0?e:kB},vO=()=>dr(rf),_O=()=>dr(nf),ti=e=>e.layout.layoutType,Gg=()=>dr(ti),H2=()=>{var e=Gg();if(e==="horizontal"||e==="vertical")return e},xO=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},RB=()=>{var e=Gg();return e!==void 0},Vv=e=>{var t=da(),i=gs(),{width:l,height:m}=e,v=$2(),_=l,c=m;return v&&(_=v.width>0?v.width:l,c=v.height>0?v.height:m),H.useEffect(()=>{!i&&Lc(_)&&Lc(c)&&t(UN({width:_,height:c}))},[t,i,_,c]),null},bO=Symbol.for("immer-nothing"),fA=Symbol.for("immer-draftable"),Ws=Symbol.for("immer-state");function Iu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sv=Object.getPrototypeOf;function Lg(e){return!!e&&!!e[Ws]}function Gp(e){return e?wO(e)||Array.isArray(e)||!!e[fA]||!!e.constructor?.[fA]||qv(e)||Hx(e):!1}var LB=Object.prototype.constructor.toString(),dA=new WeakMap;function wO(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(i===Object)return!0;if(typeof i!="function")return!1;let l=dA.get(i);return l===void 0&&(l=Function.toString.call(i),dA.set(i,l)),l===LB}function X0(e,t,i=!0){Zx(e)===0?(i?Reflect.ownKeys(e):Object.keys(e)).forEach(m=>{t(m,e[m],e)}):e.forEach((l,m)=>t(m,l,e))}function Zx(e){const t=e[Ws];return t?t.type_:Array.isArray(e)?1:qv(e)?2:Hx(e)?3:0}function Fw(e,t){return Zx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function SO(e,t,i){const l=Zx(e);l===2?e.set(t,i):l===3?e.add(i):e[t]=i}function jB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function qv(e){return e instanceof Map}function Hx(e){return e instanceof Set}function Op(e){return e.copy_||e.base_}function Uw(e,t){if(qv(e))return new Map(e);if(Hx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=wO(e);if(t===!0||t==="class_only"&&!i){const l=Object.getOwnPropertyDescriptors(e);delete l[Ws];let m=Reflect.ownKeys(l);for(let v=0;v<m.length;v++){const _=m[v],c=l[_];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(l[_]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[_]})}return Object.create(Sv(e),l)}else{const l=Sv(e);if(l!==null&&i)return{...e};const m=Object.create(l);return Object.assign(m,e)}}function W2(e,t=!1){return Wx(e)||Lg(e)||!Gp(e)||(Zx(e)>1&&Object.defineProperties(e,{set:f0,add:f0,clear:f0,delete:f0}),Object.freeze(e),t&&Object.values(e).forEach(i=>W2(i,!0))),e}function NB(){Iu(2)}var f0={value:NB};function Wx(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var BB={};function $p(e){const t=BB[e];return t||Iu(0,e),t}var Tv;function TO(){return Tv}function FB(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pA(e,t){t&&($p("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Vw(e){qw(e),e.drafts_.forEach(UB),e.drafts_=null}function qw(e){e===Tv&&(Tv=e.parent_)}function mA(e){return Tv=FB(Tv,e)}function UB(e){const t=e[Ws];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gA(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[Ws].modified_&&(Vw(t),Iu(4)),Gp(e)&&(e=Y0(t,e),t.parent_||K0(t,e)),t.patches_&&$p("Patches").generateReplacementPatches_(i[Ws].base_,e,t.patches_,t.inversePatches_)):e=Y0(t,i,[]),Vw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bO?e:void 0}function Y0(e,t,i){if(Wx(t))return t;const l=e.immer_.shouldUseStrictIteration(),m=t[Ws];if(!m)return X0(t,(v,_)=>yA(e,m,t,v,_,i),l),t;if(m.scope_!==e)return t;if(!m.modified_)return K0(e,m.base_,!0),m.base_;if(!m.finalized_){m.finalized_=!0,m.scope_.unfinalizedDrafts_--;const v=m.copy_;let _=v,c=!1;m.type_===3&&(_=new Set(v),v.clear(),c=!0),X0(_,(M,P)=>yA(e,m,v,M,P,i,c),l),K0(e,v,!1),i&&e.patches_&&$p("Patches").generatePatches_(m,i,e.patches_,e.inversePatches_)}return m.copy_}function yA(e,t,i,l,m,v,_){if(m==null||typeof m!="object"&&!_)return;const c=Wx(m);if(!(c&&!_)){if(Lg(m)){const M=v&&t&&t.type_!==3&&!Fw(t.assigned_,l)?v.concat(l):void 0,P=Y0(e,m,M);if(SO(i,l,P),Lg(P))e.canAutoFreeze_=!1;else return}else _&&i.add(m);if(Gp(m)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[l]===m&&c)return;Y0(e,m),(!t||!t.scope_.parent_)&&typeof l!="symbol"&&(qv(i)?i.has(l):Object.prototype.propertyIsEnumerable.call(i,l))&&K0(e,m)}}}function K0(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&W2(t,i)}function VB(e,t){const i=Array.isArray(e),l={type_:i?1:0,scope_:t?t.scope_:TO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let m=l,v=X2;i&&(m=[l],v=Ev);const{revoke:_,proxy:c}=Proxy.revocable(m,v);return l.draft_=c,l.revoke_=_,c}var X2={get(e,t){if(t===Ws)return e;const i=Op(e);if(!Fw(i,t))return qB(e,i,t);const l=i[t];return e.finalized_||!Gp(l)?l:l===$1(e.base_,t)?(Z1(e),e.copy_[t]=$w(l,e)):l},has(e,t){return t in Op(e)},ownKeys(e){return Reflect.ownKeys(Op(e))},set(e,t,i){const l=EO(Op(e),t);if(l?.set)return l.set.call(e.draft_,i),!0;if(!e.modified_){const m=$1(Op(e),t),v=m?.[Ws];if(v&&v.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(jB(i,m)&&(i!==void 0||Fw(e.base_,t)))return!0;Z1(e),Gw(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return $1(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Z1(e),Gw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=Op(e),l=Reflect.getOwnPropertyDescriptor(i,t);return l&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:l.enumerable,value:i[t]}},defineProperty(){Iu(11)},getPrototypeOf(e){return Sv(e.base_)},setPrototypeOf(){Iu(12)}},Ev={};X0(X2,(e,t)=>{Ev[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ev.deleteProperty=function(e,t){return Ev.set.call(this,e,t,void 0)};Ev.set=function(e,t,i){return X2.set.call(this,e[0],t,i,e[0])};function $1(e,t){const i=e[Ws];return(i?Op(i):e)[t]}function qB(e,t,i){const l=EO(t,i);return l?"value"in l?l.value:l.get?.call(e.draft_):void 0}function EO(e,t){if(!(t in e))return;let i=Sv(e);for(;i;){const l=Object.getOwnPropertyDescriptor(i,t);if(l)return l;i=Sv(i)}}function Gw(e){e.modified_||(e.modified_=!0,e.parent_&&Gw(e.parent_))}function Z1(e){e.copy_||(e.copy_=Uw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var GB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,i,l)=>{if(typeof t=="function"&&typeof i!="function"){const v=i;i=t;const _=this;return function(M=v,...P){return _.produce(M,D=>i.call(this,D,...P))}}typeof i!="function"&&Iu(6),l!==void 0&&typeof l!="function"&&Iu(7);let m;if(Gp(t)){const v=mA(this),_=$w(t,void 0);let c=!0;try{m=i(_),c=!1}finally{c?Vw(v):qw(v)}return pA(v,l),gA(m,v)}else if(!t||typeof t!="object"){if(m=i(t),m===void 0&&(m=t),m===bO&&(m=void 0),this.autoFreeze_&&W2(m,!0),l){const v=[],_=[];$p("Patches").generateReplacementPatches_(t,m,v,_),l(v,_)}return m}else Iu(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(_,...c)=>this.produceWithPatches(_,M=>t(M,...c));let l,m;return[this.produce(t,i,(_,c)=>{l=_,m=c}),l,m]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Gp(e)||Iu(8),Lg(e)&&(e=$B(e));const t=mA(this),i=$w(e,void 0);return i[Ws].isManual_=!0,qw(t),i}finishDraft(e,t){const i=e&&e[Ws];(!i||!i.isManual_)&&Iu(9);const{scope_:l}=i;return pA(l,t),gA(void 0,l)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const m=t[i];if(m.path.length===0&&m.op==="replace"){e=m.value;break}}i>-1&&(t=t.slice(i+1));const l=$p("Patches").applyPatches_;return Lg(e)?l(e,t):this.produce(e,m=>l(m,t))}};function $w(e,t){const i=qv(e)?$p("MapSet").proxyMap_(e,t):Hx(e)?$p("MapSet").proxySet_(e,t):VB(e,t);return(t?t.scope_:TO()).drafts_.push(i),i}function $B(e){return Lg(e)||Iu(10,e),AO(e)}function AO(e){if(!Gp(e)||Wx(e))return e;const t=e[Ws];let i,l=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=Uw(e,t.scope_.immer_.useStrictShallowCopy_),l=t.scope_.immer_.shouldUseStrictIteration()}else i=Uw(e,!0);return X0(i,(m,v)=>{SO(i,m,AO(v))},l),t&&(t.finalized_=!1),i}var ZB=new GB;ZB.produce;var HB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},MO=ms({name:"legend",initialState:HB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Jn()},replaceLegendPayload:{reducer(e,t){var{prev:i,next:l}=t.payload,m=ku(e).payload.indexOf(i);m>-1&&(e.payload[m]=l)},prepare:Jn()},removeLegendPayload:{reducer(e,t){var i=ku(e).payload.indexOf(t.payload);i>-1&&e.payload.splice(i,1)},prepare:Jn()}}}),{setLegendSize:KH,setLegendSettings:QH,addLegendPayload:WB,replaceLegendPayload:XB,removeLegendPayload:YB}=MO.actions,KB=MO.reducer;function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Zw.apply(null,arguments)}function vA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function nv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(i),!0).forEach(function(l){QB(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function QB(e,t,i){return(t=JB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function JB(e){var t=e4(e,"string");return typeof t=="symbol"?t:t+""}function e4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t4(e){return Array.isArray(e)&&Rc(e[0])&&Rc(e[1])?e.join(" ~ "):e}var xg={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},r4=e=>{var{separator:t=xg.separator,contentStyle:i,itemStyle:l,labelStyle:m=xg.labelStyle,payload:v,formatter:_,itemSorter:c,wrapperClassName:M,labelClassName:P,label:D,labelFormatter:z,accessibilityLayer:F=xg.accessibilityLayer}=e,$=()=>{if(v&&v.length){var ke={padding:0,margin:0},Pe=(c?Ox(v,c):v).map((Re,ot)=>{if(Re.type==="none")return null;var bt=Re.formatter||_||t4,{value:kt,name:We}=Re,Ve=kt,Ot=We;if(bt){var Ue=bt(kt,We,Re,ot,v);if(Array.isArray(Ue))[Ve,Ot]=Ue;else if(Ue!=null)Ve=Ue;else return null}var Je=nv(nv({},xg.itemStyle),{},{color:Re.color||xg.itemStyle.color},l);return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ot),style:Je},Rc(Ot)?H.createElement("span",{className:"recharts-tooltip-item-name"},Ot):null,Rc(Ot)?H.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,H.createElement("span",{className:"recharts-tooltip-item-value"},Ve),H.createElement("span",{className:"recharts-tooltip-item-unit"},Re.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:ke},Pe)}return null},Y=nv(nv({},xg.contentStyle),i),K=nv({margin:0},m),q=!mo(D),he=q?D:"",ye=Xn("recharts-default-tooltip",M),ge=Xn("recharts-tooltip-label",P);q&&z&&v!==void 0&&v!==null&&(he=z(D,v));var Te=F?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",Zw({className:ye,style:Y},Te),H.createElement("p",{className:ge,style:K},H.isValidElement(he)?he:"".concat(he)),$())},iv="recharts-tooltip-wrapper",n4={visibility:"hidden"};function i4(e){var{coordinate:t,translateX:i,translateY:l}=e;return Xn(iv,{["".concat(iv,"-right")]:Jt(i)&&t&&Jt(t.x)&&i>=t.x,["".concat(iv,"-left")]:Jt(i)&&t&&Jt(t.x)&&i<t.x,["".concat(iv,"-bottom")]:Jt(l)&&t&&Jt(t.y)&&l>=t.y,["".concat(iv,"-top")]:Jt(l)&&t&&Jt(t.y)&&l<t.y})}function _A(e){var{allowEscapeViewBox:t,coordinate:i,key:l,offset:m,position:v,reverseDirection:_,tooltipDimension:c,viewBox:M,viewBoxDimension:P}=e;if(v&&Jt(v[l]))return v[l];var D=i[l]-c-(m>0?m:0),z=i[l]+m;if(t[l])return _[l]?D:z;var F=M[l];if(F==null)return 0;if(_[l]){var $=D,Y=F;return $<Y?Math.max(z,F):Math.max(D,F)}if(P==null)return 0;var K=z+c,q=F+P;return K>q?Math.max(D,F):Math.max(z,F)}function a4(e){var{translateX:t,translateY:i,useTranslate3d:l}=e;return{transform:l?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function o4(e){var{allowEscapeViewBox:t,coordinate:i,offsetTop:l,offsetLeft:m,position:v,reverseDirection:_,tooltipBox:c,useTranslate3d:M,viewBox:P}=e,D,z,F;return c.height>0&&c.width>0&&i?(z=_A({allowEscapeViewBox:t,coordinate:i,key:"x",offset:m,position:v,reverseDirection:_,tooltipDimension:c.width,viewBox:P,viewBoxDimension:P.width}),F=_A({allowEscapeViewBox:t,coordinate:i,key:"y",offset:l,position:v,reverseDirection:_,tooltipDimension:c.height,viewBox:P,viewBoxDimension:P.height}),D=a4({translateX:z,translateY:F,useTranslate3d:M})):D=n4,{cssProperties:D,cssClasses:i4({translateX:z,translateY:F,coordinate:i})}}function xA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function d0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(i),!0).forEach(function(l){Hw(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Hw(e,t,i){return(t=s4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s4(e){var t=l4(e,"string");return typeof t=="symbol"?t:t+""}function l4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class u4 extends H.PureComponent{constructor(){super(...arguments),Hw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Hw(this,"handleKeyDown",t=>{if(t.key==="Escape"){var i,l,m,v;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(i=(l=this.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&i!==void 0?i:0,y:(m=(v=this.props.coordinate)===null||v===void 0?void 0:v.y)!==null&&m!==void 0?m:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,i;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:i,animationDuration:l,animationEasing:m,children:v,coordinate:_,hasPayload:c,isAnimationActive:M,offset:P,position:D,reverseDirection:z,useTranslate3d:F,viewBox:$,wrapperStyle:Y,lastBoundingBox:K,innerRef:q,hasPortalFromProps:he}=this.props,ye=typeof P=="number"?P:P.x,ge=typeof P=="number"?P:P.y,{cssClasses:Te,cssProperties:ke}=o4({allowEscapeViewBox:i,coordinate:_,offsetLeft:ye,offsetTop:ge,position:D,reverseDirection:z,tooltipBox:{height:K.height,width:K.width},useTranslate3d:F,viewBox:$}),Pe=he?{}:d0(d0({transition:M&&t?"transform ".concat(l,"ms ").concat(m):void 0},ke),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),Re=d0(d0({},Pe),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},Y);return H.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:Te,style:Re,ref:q},v)}}var CO=()=>{var e;return(e=dr(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Ww(){return Ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Ww.apply(null,arguments)}function bA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function wA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(i),!0).forEach(function(l){c4(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):bA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function c4(e,t,i){return(t=h4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h4(e){var t=f4(e,"string");return typeof t=="symbol"?t:t+""}function f4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SA={curveBasisClosed:wj,curveBasisOpen:Sj,curveBasis:bj,curveBumpX:_j,curveBumpY:xj,curveLinearClosed:Tj,curveLinear:Cx,curveMonotoneX:Ej,curveMonotoneY:Aj,curveNatural:Mj,curveStep:Cj,curveStepAfter:Dj,curveStepBefore:Pj},Q0=e=>Br(e.x)&&Br(e.y),TA=e=>e.base!=null&&Q0(e.base)&&Q0(e),av=e=>e.x,ov=e=>e.y,d4=(e,t)=>{if(typeof e=="function")return e;var i="curve".concat(k2(e));if((i==="curveMonotone"||i==="curveBump")&&t){var l=SA["".concat(i).concat(t==="vertical"?"Y":"X")];if(l)return l}return SA[i]||Cx},EA={connectNulls:!1,type:"linear"},p4=e=>{var{type:t=EA.type,points:i=[],baseLine:l,layout:m,connectNulls:v=EA.connectNulls}=e,_=d4(t,m),c=v?i.filter(Q0):i;if(Array.isArray(l)){var M,P=i.map((Y,K)=>wA(wA({},Y),{},{base:l[K]}));m==="vertical"?M=a0().y(ov).x1(av).x0(Y=>Y.base.x):M=a0().x(av).y1(ov).y0(Y=>Y.base.y);var D=M.defined(TA).curve(_),z=v?P.filter(TA):P;return D(z)}var F;m==="vertical"&&Jt(l)?F=a0().y(ov).x1(av).x0(l):Jt(l)?F=a0().x(av).y1(ov).y0(l):F=lD().x(av).y(ov);var $=F.defined(Q0).curve(_);return $(c)},C0=e=>{var{className:t,points:i,path:l,pathRef:m}=e,v=Gg();if((!i||!i.length)&&!l)return null;var _={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||v,connectNulls:e.connectNulls},c=i&&i.length?p4(_):l;return H.createElement("path",Ww({},Ru(e),R2(e),{className:Xn("recharts-curve",t),d:c===null?void 0:c,ref:m}))},m4=["x","y","top","left","width","height","className"];function Xw(){return Xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Xw.apply(null,arguments)}function AA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function g4(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(i),!0).forEach(function(l){y4(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function y4(e,t,i){return(t=v4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x4(e,t){if(e==null)return{};var i,l,m=b4(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function b4(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}var w4=(e,t,i,l,m,v)=>"M".concat(e,",").concat(m,"v").concat(l,"M").concat(v,",").concat(t,"h").concat(i),S4=e=>{var{x:t=0,y:i=0,top:l=0,left:m=0,width:v=0,height:_=0,className:c}=e,M=x4(e,m4),P=g4({x:t,y:i,top:l,left:m,width:v,height:_},M);return!Jt(t)||!Jt(i)||!Jt(v)||!Jt(_)||!Jt(l)||!Jt(m)?null:H.createElement("path",Xw({},kl(P),{className:Xn("recharts-cross",c),d:w4(t,i,v,_,l,m)}))};function T4(e,t,i,l){var m=l/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-m:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-m,width:e==="horizontal"?l:i.width-1,height:e==="horizontal"?i.height-1:l}}function MA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function CA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?MA(Object(i),!0).forEach(function(l){E4(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):MA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function E4(e,t,i){return(t=A4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function A4(e){var t=M4(e,"string");return typeof t=="symbol"?t:t+""}function M4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C4=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),P4=(e,t,i)=>e.map(l=>"".concat(C4(l)," ").concat(t,"ms ").concat(i)).join(","),D4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((i,l)=>i.filter(m=>l.includes(m))),Av=(e,t)=>Object.keys(t).reduce((i,l)=>CA(CA({},i),{},{[l]:e(l,t[l])}),{});function PA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function $i(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(i),!0).forEach(function(l){O4(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):PA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function O4(e,t,i){return(t=I4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I4(e){var t=z4(e,"string");return typeof t=="symbol"?t:t+""}function z4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J0=(e,t,i)=>e+(t-e)*i,Yw=e=>{var{from:t,to:i}=e;return t!==i},PO=(e,t,i)=>{var l=Av((m,v)=>{if(Yw(v)){var[_,c]=e(v.from,v.to,v.velocity);return $i($i({},v),{},{from:_,velocity:c})}return v},t);return i<1?Av((m,v)=>Yw(v)&&l[m]!=null?$i($i({},v),{},{velocity:J0(v.velocity,l[m].velocity,i),from:J0(v.from,l[m].from,i)}):v,t):PO(e,l,i-1)};function k4(e,t,i,l,m,v){var _,c=l.reduce((F,$)=>$i($i({},F),{},{[$]:{from:e[$],velocity:0,to:t[$]}}),{}),M=()=>Av((F,$)=>$.from,c),P=()=>!Object.values(c).filter(Yw).length,D=null,z=F=>{_||(_=F);var $=F-_,Y=$/i.dt;c=PO(i,c,Y),m($i($i($i({},e),t),M())),_=F,P()||(D=v.setTimeout(z))};return()=>(D=v.setTimeout(z),()=>{var F;(F=D)===null||F===void 0||F()})}function R4(e,t,i,l,m,v,_){var c=null,M=m.reduce((z,F)=>{var $=e[F],Y=t[F];return $==null||Y==null?z:$i($i({},z),{},{[F]:[$,Y]})},{}),P,D=z=>{P||(P=z);var F=(z-P)/l,$=Av((K,q)=>J0(...q,i(F)),M);if(v($i($i($i({},e),t),$)),F<1)c=_.setTimeout(D);else{var Y=Av((K,q)=>J0(...q,i(1)),M);v($i($i($i({},e),t),Y))}};return()=>(c=_.setTimeout(D),()=>{var z;(z=c)===null||z===void 0||z()})}const L4=(e,t,i,l,m,v)=>{var _=D4(e,t);return i==null?()=>(m($i($i({},e),t)),()=>{}):i.isStepper===!0?k4(e,t,i,_,m,v):R4(e,t,i,l,_,m,v)};var ex=1e-4,DO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],OO=(e,t)=>e.map((i,l)=>i*t**l).reduce((i,l)=>i+l),DA=(e,t)=>i=>{var l=DO(e,t);return OO(l,i)},j4=(e,t)=>i=>{var l=DO(e,t),m=[...l.map((v,_)=>v*_).slice(1),0];return OO(m,i)},N4=e=>{var t,i=e.split("(");if(i.length!==2||i[0]!=="cubic-bezier")return null;var l=(t=i[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(l==null||l.length!==4)return null;var m=l.map(v=>parseFloat(v));return[m[0],m[1],m[2],m[3]]},B4=function(){for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];if(i.length===1)switch(i[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var m=N4(i[0]);if(m)return m}}return i.length===4?i:[0,0,1,1]},F4=(e,t,i,l)=>{var m=DA(e,i),v=DA(t,l),_=j4(e,i),c=P=>P>1?1:P<0?0:P,M=P=>{for(var D=P>1?1:P,z=D,F=0;F<8;++F){var $=m(z)-D,Y=_(z);if(Math.abs($-D)<ex||Y<ex)return v(z);z=c(z-$/Y)}return v(z)};return M.isStepper=!1,M},OA=function(){return F4(...B4(...arguments))},U4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:i=100,damping:l=8,dt:m=17}=t,v=(_,c,M)=>{var P=-(_-c)*i,D=M*l,z=M+(P-D)*m/1e3,F=M*m/1e3+_;return Math.abs(F-c)<ex&&Math.abs(z)<ex?[c,0]:[F,z]};return v.isStepper=!0,v.dt=m,v},V4=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return OA(e);case"spring":return U4();default:if(e.split("(")[0]==="cubic-bezier")return OA(e)}return typeof e=="function"?e:null};function q4(e){var t,i=()=>null,l=!1,m=null,v=_=>{if(!l){if(Array.isArray(_)){if(!_.length)return;var c=_,[M,...P]=c;if(typeof M=="number"){m=e.setTimeout(v.bind(null,P),M);return}v(M),m=e.setTimeout(v.bind(null,P));return}typeof _=="string"&&(t=_,i(t)),typeof _=="object"&&(t=_,i(t)),typeof _=="function"&&_()}};return{stop:()=>{l=!0},start:_=>{l=!1,m&&(m(),m=null),v(_)},subscribe:_=>(i=_,()=>{i=()=>null}),getTimeoutController:()=>e}}class G4{setTimeout(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=performance.now(),m=null,v=_=>{_-l>=i?t(_):typeof requestAnimationFrame=="function"&&(m=requestAnimationFrame(v))};return m=requestAnimationFrame(v),()=>{m!=null&&cancelAnimationFrame(m)}}}function $4(){return q4(new G4)}var Z4=H.createContext($4);function H4(e,t){var i=H.useContext(Z4);return H.useMemo(()=>t??i(e),[e,t,i])}var W4=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Gv={isSsr:W4()},X4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},IA={t:0},H1={t:1};function IO(e){var t=Xs(e,X4),{isActive:i,canBegin:l,duration:m,easing:v,begin:_,onAnimationEnd:c,onAnimationStart:M,children:P}=t,D=i==="auto"?!Gv.isSsr:i,z=H4(t.animationId,t.animationManager),[F,$]=H.useState(D?IA:H1),Y=H.useRef(null);return H.useEffect(()=>{D||$(H1)},[D]),H.useEffect(()=>{if(!D||!l)return qg;var K=L4(IA,H1,V4(v),m,$,z.getTimeoutController()),q=()=>{Y.current=K()};return z.start([M,_,q,m,c]),()=>{z.stop(),Y.current&&Y.current(),c()}},[D,l,m,v,_,M,c,z]),P(F.t)}function zO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",i=H.useRef(_v(t)),l=H.useRef(e);return l.current!==e&&(i.current=_v(t),l.current=e),i.current}var Y4=["radius"],K4=["radius"],zA,kA,RA,LA,jA,NA,BA,FA,UA,VA;function qA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function GA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(i),!0).forEach(function(l){Q4(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Q4(e,t,i){return(t=J4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function J4(e){var t=eF(e,"string");return typeof t=="symbol"?t:t+""}function eF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tx(){return tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},tx.apply(null,arguments)}function $A(e,t){if(e==null)return{};var i,l,m=tF(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function tF(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function Ec(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ZA=(e,t,i,l,m)=>{var v=fd(i),_=fd(l),c=Math.min(Math.abs(v)/2,Math.abs(_)/2),M=_>=0?1:-1,P=v>=0?1:-1,D=_>=0&&v>=0||_<0&&v<0?1:0,z;if(c>0&&Array.isArray(m)){for(var F=[0,0,0,0],$=0,Y=4;$<Y;$++){var K,q=(K=m[$])!==null&&K!==void 0?K:0;F[$]=q>c?c:q}z=Ua(zA||(zA=Ec(["M",",",""])),e,t+M*F[0]),F[0]>0&&(z+=Ua(kA||(kA=Ec(["A ",",",",0,0,",",",",",""])),F[0],F[0],D,e+P*F[0],t)),z+=Ua(RA||(RA=Ec(["L ",",",""])),e+i-P*F[1],t),F[1]>0&&(z+=Ua(LA||(LA=Ec(["A ",",",",0,0,",`,
        `,",",""])),F[1],F[1],D,e+i,t+M*F[1])),z+=Ua(jA||(jA=Ec(["L ",",",""])),e+i,t+l-M*F[2]),F[2]>0&&(z+=Ua(NA||(NA=Ec(["A ",",",",0,0,",`,
        `,",",""])),F[2],F[2],D,e+i-P*F[2],t+l)),z+=Ua(BA||(BA=Ec(["L ",",",""])),e+P*F[3],t+l),F[3]>0&&(z+=Ua(FA||(FA=Ec(["A ",",",",0,0,",`,
        `,",",""])),F[3],F[3],D,e,t+l-M*F[3])),z+="Z"}else if(c>0&&m===+m&&m>0){var he=Math.min(c,m);z=Ua(UA||(UA=Ec(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+M*he,he,he,D,e+P*he,t,e+i-P*he,t,he,he,D,e+i,t+M*he,e+i,t+l-M*he,he,he,D,e+i-P*he,t+l,e+P*he,t+l,he,he,D,e,t+l-M*he)}else z=Ua(VA||(VA=Ec(["M ",","," h "," v "," h "," Z"])),e,t,i,l,-i);return z},HA={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rF=e=>{var t=Xs(e,HA),i=H.useRef(null),[l,m]=H.useState(-1);H.useEffect(()=>{if(i.current&&i.current.getTotalLength)try{var Ge=i.current.getTotalLength();Ge&&m(Ge)}catch{}},[]);var{x:v,y:_,width:c,height:M,radius:P,className:D}=t,{animationEasing:z,animationDuration:F,animationBegin:$,isAnimationActive:Y,isUpdateAnimationActive:K}=t,q=H.useRef(c),he=H.useRef(M),ye=H.useRef(v),ge=H.useRef(_),Te=H.useMemo(()=>({x:v,y:_,width:c,height:M,radius:P}),[v,_,c,M,P]),ke=zO(Te,"rectangle-");if(v!==+v||_!==+_||c!==+c||M!==+M||c===0||M===0)return null;var Pe=Xn("recharts-rectangle",D);if(!K){var Re=kl(t),{radius:ot}=Re,bt=$A(Re,Y4);return H.createElement("path",tx({},bt,{x:fd(v),y:fd(_),width:fd(c),height:fd(M),radius:typeof P=="number"?P:void 0,className:Pe,d:ZA(v,_,c,M,P)}))}var kt=q.current,We=he.current,Ve=ye.current,Ot=ge.current,Ue="0px ".concat(l===-1?1:l,"px"),Je="".concat(l,"px 0px"),Le=P4(["strokeDasharray"],F,typeof z=="string"?z:HA.animationEasing);return H.createElement(IO,{animationId:ke,key:ke,canBegin:l>0,duration:F,easing:z,isActive:K,begin:$},Ge=>{var st=Cc(kt,c,Ge),pt=Cc(We,M,Ge),Rt=Cc(Ve,v,Ge),De=Cc(Ot,_,Ge);i.current&&(q.current=st,he.current=pt,ye.current=Rt,ge.current=De);var lt;Y?Ge>0?lt={transition:Le,strokeDasharray:Je}:lt={strokeDasharray:Ue}:lt={strokeDasharray:Je};var Mt=kl(t),{radius:zt}=Mt,qt=$A(Mt,K4);return H.createElement("path",tx({},qt,{radius:typeof P=="number"?P:void 0,className:Pe,d:ZA(Rt,De,st,pt,P),ref:i,style:GA(GA({},lt),t.style)}))})};function WA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function XA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?WA(Object(i),!0).forEach(function(l){nF(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WA(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function nF(e,t,i){return(t=iF(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iF(e){var t=aF(e,"string");return typeof t=="symbol"?t:t+""}function aF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rx=Math.PI/180,oF=e=>e*180/Math.PI,qa=(e,t,i,l)=>({x:e+Math.cos(-rx*l)*i,y:t+Math.sin(-rx*l)*i}),sF=function(t,i){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(l.left||0)-(l.right||0)),Math.abs(i-(l.top||0)-(l.bottom||0)))/2},lF=(e,t)=>{var{x:i,y:l}=e,{x:m,y:v}=t;return Math.sqrt((i-m)**2+(l-v)**2)},uF=(e,t)=>{var{x:i,y:l}=e,{cx:m,cy:v}=t,_=lF({x:i,y:l},{x:m,y:v});if(_<=0)return{radius:_,angle:0};var c=(i-m)/_,M=Math.acos(c);return l>v&&(M=2*Math.PI-M),{radius:_,angle:oF(M),angleInRadian:M}},cF=e=>{var{startAngle:t,endAngle:i}=e,l=Math.floor(t/360),m=Math.floor(i/360),v=Math.min(l,m);return{startAngle:t-v*360,endAngle:i-v*360}},hF=(e,t)=>{var{startAngle:i,endAngle:l}=t,m=Math.floor(i/360),v=Math.floor(l/360),_=Math.min(m,v);return e+_*360},fF=(e,t)=>{var{chartX:i,chartY:l}=e,{radius:m,angle:v}=uF({x:i,y:l},t),{innerRadius:_,outerRadius:c}=t;if(m<_||m>c||m===0)return null;var{startAngle:M,endAngle:P}=cF(t),D=v,z;if(M<=P){for(;D>P;)D-=360;for(;D<M;)D+=360;z=D>=M&&D<=P}else{for(;D>M;)D-=360;for(;D<P;)D+=360;z=D>=P&&D<=M}return z?XA(XA({},t),{},{radius:m,angle:hF(D,t)}):null};function kO(e){var{cx:t,cy:i,radius:l,startAngle:m,endAngle:v}=e,_=qa(t,i,l,m),c=qa(t,i,l,v);return{points:[_,c],cx:t,cy:i,radius:l,startAngle:m,endAngle:v}}var YA,KA,QA,JA,eM,tM,rM;function Kw(){return Kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Kw.apply(null,arguments)}function zp(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dF=(e,t)=>{var i=Il(t-e),l=Math.min(Math.abs(t-e),359.999);return i*l},p0=e=>{var{cx:t,cy:i,radius:l,angle:m,sign:v,isExternal:_,cornerRadius:c,cornerIsExternal:M}=e,P=c*(_?1:-1)+l,D=Math.asin(c/P)/rx,z=M?m:m+v*D,F=qa(t,i,P,z),$=qa(t,i,l,z),Y=M?m-v*D:m,K=qa(t,i,P*Math.cos(D*rx),Y);return{center:F,circleTangency:$,lineTangency:K,theta:D}},RO=e=>{var{cx:t,cy:i,innerRadius:l,outerRadius:m,startAngle:v,endAngle:_}=e,c=dF(v,_),M=v+c,P=qa(t,i,m,v),D=qa(t,i,m,M),z=Ua(YA||(YA=zp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),P.x,P.y,m,m,+(Math.abs(c)>180),+(v>M),D.x,D.y);if(l>0){var F=qa(t,i,l,v),$=qa(t,i,l,M);z+=Ua(KA||(KA=zp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),$.x,$.y,l,l,+(Math.abs(c)>180),+(v<=M),F.x,F.y)}else z+=Ua(QA||(QA=zp(["L ",","," Z"])),t,i);return z},pF=e=>{var{cx:t,cy:i,innerRadius:l,outerRadius:m,cornerRadius:v,forceCornerRadius:_,cornerIsExternal:c,startAngle:M,endAngle:P}=e,D=Il(P-M),{circleTangency:z,lineTangency:F,theta:$}=p0({cx:t,cy:i,radius:m,angle:M,sign:D,cornerRadius:v,cornerIsExternal:c}),{circleTangency:Y,lineTangency:K,theta:q}=p0({cx:t,cy:i,radius:m,angle:P,sign:-D,cornerRadius:v,cornerIsExternal:c}),he=c?Math.abs(M-P):Math.abs(M-P)-$-q;if(he<0)return _?Ua(JA||(JA=zp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),F.x,F.y,v,v,v*2,v,v,-v*2):RO({cx:t,cy:i,innerRadius:l,outerRadius:m,startAngle:M,endAngle:P});var ye=Ua(eM||(eM=zp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),F.x,F.y,v,v,+(D<0),z.x,z.y,m,m,+(he>180),+(D<0),Y.x,Y.y,v,v,+(D<0),K.x,K.y);if(l>0){var{circleTangency:ge,lineTangency:Te,theta:ke}=p0({cx:t,cy:i,radius:l,angle:M,sign:D,isExternal:!0,cornerRadius:v,cornerIsExternal:c}),{circleTangency:Pe,lineTangency:Re,theta:ot}=p0({cx:t,cy:i,radius:l,angle:P,sign:-D,isExternal:!0,cornerRadius:v,cornerIsExternal:c}),bt=c?Math.abs(M-P):Math.abs(M-P)-ke-ot;if(bt<0&&v===0)return"".concat(ye,"L").concat(t,",").concat(i,"Z");ye+=Ua(tM||(tM=zp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),Re.x,Re.y,v,v,+(D<0),Pe.x,Pe.y,l,l,+(bt>180),+(D>0),ge.x,ge.y,v,v,+(D<0),Te.x,Te.y)}else ye+=Ua(rM||(rM=zp(["L",",","Z"])),t,i);return ye},mF={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gF=e=>{var t=Xs(e,mF),{cx:i,cy:l,innerRadius:m,outerRadius:v,cornerRadius:_,forceCornerRadius:c,cornerIsExternal:M,startAngle:P,endAngle:D,className:z}=t;if(v<m||P===D)return null;var F=Xn("recharts-sector",z),$=v-m,Y=gd(_,$,0,!0),K;return Y>0&&Math.abs(P-D)<360?K=pF({cx:i,cy:l,innerRadius:m,outerRadius:v,cornerRadius:Math.min(Y,$/2),forceCornerRadius:c,cornerIsExternal:M,startAngle:P,endAngle:D}):K=RO({cx:i,cy:l,innerRadius:m,outerRadius:v,startAngle:P,endAngle:D}),H.createElement("path",Kw({},kl(t),{className:F,d:K}))};function yF(e,t,i){if(e==="horizontal")return[{x:t.x,y:i.top},{x:t.x,y:i.top+i.height}];if(e==="vertical")return[{x:i.left,y:t.y},{x:i.left+i.width,y:t.y}];if(xD(t)){if(e==="centric"){var{cx:l,cy:m,innerRadius:v,outerRadius:_,angle:c}=t,M=qa(l,m,v,c),P=qa(l,m,_,c);return[{x:M.x,y:M.y},{x:P.x,y:P.y}]}return kO(t)}}var W1={},X1={},Y1={},nM;function vF(){return nM||(nM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DD();function i(l){return t.isSymbol(l)?NaN:Number(l)}e.toNumber=i})(Y1)),Y1}var iM;function _F(){return iM||(iM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vF();function i(l){return l?(l=t.toNumber(l),l===1/0||l===-1/0?(l<0?-1:1)*Number.MAX_VALUE:l===l?l:0):l===0?l:0}e.toFinite=i})(X1)),X1}var aM;function xF(){return aM||(aM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OD(),i=_F();function l(m,v,_){_&&typeof _!="number"&&t.isIterateeCall(m,v,_)&&(v=_=void 0),m=i.toFinite(m),v===void 0?(v=m,m=0):v=i.toFinite(v),_=_===void 0?m<v?1:-1:i.toFinite(_);const c=Math.max(Math.ceil((v-m)/(_||1)),0),M=new Array(c);for(let P=0;P<c;P++)M[P]=m,m+=_;return M}e.range=l})(W1)),W1}var K1,oM;function bF(){return oM||(oM=1,K1=xF().range),K1}var wF=bF();const LO=ef(wF);function dd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function SF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Y2(e){let t,i,l;e.length!==2?(t=dd,i=(c,M)=>dd(e(c),M),l=(c,M)=>e(c)-M):(t=e===dd||e===SF?e:TF,i=e,l=e);function m(c,M,P=0,D=c.length){if(P<D){if(t(M,M)!==0)return D;do{const z=P+D>>>1;i(c[z],M)<0?P=z+1:D=z}while(P<D)}return P}function v(c,M,P=0,D=c.length){if(P<D){if(t(M,M)!==0)return D;do{const z=P+D>>>1;i(c[z],M)<=0?P=z+1:D=z}while(P<D)}return P}function _(c,M,P=0,D=c.length){const z=m(c,M,P,D-1);return z>P&&l(c[z-1],M)>-l(c[z],M)?z-1:z}return{left:m,center:_,right:v}}function TF(){return 0}function jO(e){return e===null?NaN:+e}function*EF(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const AF=Y2(dd),$v=AF.right;Y2(jO).center;class sM extends Map{constructor(t,i=PF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[l,m]of t)this.set(l,m)}get(t){return super.get(lM(this,t))}has(t){return super.has(lM(this,t))}set(t,i){return super.set(MF(this,t),i)}delete(t){return super.delete(CF(this,t))}}function lM({_intern:e,_key:t},i){const l=t(i);return e.has(l)?e.get(l):i}function MF({_intern:e,_key:t},i){const l=t(i);return e.has(l)?e.get(l):(e.set(l,i),i)}function CF({_intern:e,_key:t},i){const l=t(i);return e.has(l)&&(i=e.get(l),e.delete(l)),i}function PF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function DF(e=dd){if(e===dd)return NO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const l=e(t,i);return l||l===0?l:(e(i,i)===0)-(e(t,t)===0)}}function NO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const OF=Math.sqrt(50),IF=Math.sqrt(10),zF=Math.sqrt(2);function nx(e,t,i){const l=(t-e)/Math.max(0,i),m=Math.floor(Math.log10(l)),v=l/Math.pow(10,m),_=v>=OF?10:v>=IF?5:v>=zF?2:1;let c,M,P;return m<0?(P=Math.pow(10,-m)/_,c=Math.round(e*P),M=Math.round(t*P),c/P<e&&++c,M/P>t&&--M,P=-P):(P=Math.pow(10,m)*_,c=Math.round(e/P),M=Math.round(t/P),c*P<e&&++c,M*P>t&&--M),M<c&&.5<=i&&i<2?nx(e,t,i*2):[c,M,P]}function Qw(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const l=t<e,[m,v,_]=l?nx(t,e,i):nx(e,t,i);if(!(v>=m))return[];const c=v-m+1,M=new Array(c);if(l)if(_<0)for(let P=0;P<c;++P)M[P]=(v-P)/-_;else for(let P=0;P<c;++P)M[P]=(v-P)*_;else if(_<0)for(let P=0;P<c;++P)M[P]=(m+P)/-_;else for(let P=0;P<c;++P)M[P]=(m+P)*_;return M}function Jw(e,t,i){return t=+t,e=+e,i=+i,nx(e,t,i)[2]}function e2(e,t,i){t=+t,e=+e,i=+i;const l=t<e,m=l?Jw(t,e,i):Jw(e,t,i);return(l?-1:1)*(m<0?1/-m:m)}function uM(e,t){let i;for(const l of e)l!=null&&(i<l||i===void 0&&l>=l)&&(i=l);return i}function cM(e,t){let i;for(const l of e)l!=null&&(i>l||i===void 0&&l>=l)&&(i=l);return i}function BO(e,t,i=0,l=1/0,m){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),l=Math.floor(Math.min(e.length-1,l)),!(i<=t&&t<=l))return e;for(m=m===void 0?NO:DF(m);l>i;){if(l-i>600){const M=l-i+1,P=t-i+1,D=Math.log(M),z=.5*Math.exp(2*D/3),F=.5*Math.sqrt(D*z*(M-z)/M)*(P-M/2<0?-1:1),$=Math.max(i,Math.floor(t-P*z/M+F)),Y=Math.min(l,Math.floor(t+(M-P)*z/M+F));BO(e,t,$,Y,m)}const v=e[t];let _=i,c=l;for(sv(e,i,t),m(e[l],v)>0&&sv(e,i,l);_<c;){for(sv(e,_,c),++_,--c;m(e[_],v)<0;)++_;for(;m(e[c],v)>0;)--c}m(e[i],v)===0?sv(e,i,c):(++c,sv(e,c,l)),c<=t&&(i=c+1),t<=c&&(l=c-1)}return e}function sv(e,t,i){const l=e[t];e[t]=e[i],e[i]=l}function kF(e,t,i){if(e=Float64Array.from(EF(e)),!(!(l=e.length)||isNaN(t=+t))){if(t<=0||l<2)return cM(e);if(t>=1)return uM(e);var l,m=(l-1)*t,v=Math.floor(m),_=uM(BO(e,v).subarray(0,v+1)),c=cM(e.subarray(v+1));return _+(c-_)*(m-v)}}function RF(e,t,i=jO){if(!(!(l=e.length)||isNaN(t=+t))){if(t<=0||l<2)return+i(e[0],0,e);if(t>=1)return+i(e[l-1],l-1,e);var l,m=(l-1)*t,v=Math.floor(m),_=+i(e[v],v,e),c=+i(e[v+1],v+1,e);return _+(c-_)*(m-v)}}function LF(e,t,i){e=+e,t=+t,i=(m=arguments.length)<2?(t=e,e=0,1):m<3?1:+i;for(var l=-1,m=Math.max(0,Math.ceil((t-e)/i))|0,v=new Array(m);++l<m;)v[l]=e+l*i;return v}function Nl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function af(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const t2=Symbol("implicit");function K2(){var e=new sM,t=[],i=[],l=t2;function m(v){let _=e.get(v);if(_===void 0){if(l!==t2)return l;e.set(v,_=t.push(v)-1)}return i[_%i.length]}return m.domain=function(v){if(!arguments.length)return t.slice();t=[],e=new sM;for(const _ of v)e.has(_)||e.set(_,t.push(_)-1);return m},m.range=function(v){return arguments.length?(i=Array.from(v),m):i.slice()},m.unknown=function(v){return arguments.length?(l=v,m):l},m.copy=function(){return K2(t,i).unknown(l)},Nl.apply(m,arguments),m}function Q2(){var e=K2().unknown(void 0),t=e.domain,i=e.range,l=0,m=1,v,_,c=!1,M=0,P=0,D=.5;delete e.unknown;function z(){var F=t().length,$=m<l,Y=$?m:l,K=$?l:m;v=(K-Y)/Math.max(1,F-M+P*2),c&&(v=Math.floor(v)),Y+=(K-Y-v*(F-M))*D,_=v*(1-M),c&&(Y=Math.round(Y),_=Math.round(_));var q=LF(F).map(function(he){return Y+v*he});return i($?q.reverse():q)}return e.domain=function(F){return arguments.length?(t(F),z()):t()},e.range=function(F){return arguments.length?([l,m]=F,l=+l,m=+m,z()):[l,m]},e.rangeRound=function(F){return[l,m]=F,l=+l,m=+m,c=!0,z()},e.bandwidth=function(){return _},e.step=function(){return v},e.round=function(F){return arguments.length?(c=!!F,z()):c},e.padding=function(F){return arguments.length?(M=Math.min(1,P=+F),z()):M},e.paddingInner=function(F){return arguments.length?(M=Math.min(1,F),z()):M},e.paddingOuter=function(F){return arguments.length?(P=+F,z()):P},e.align=function(F){return arguments.length?(D=Math.max(0,Math.min(1,F)),z()):D},e.copy=function(){return Q2(t(),[l,m]).round(c).paddingInner(M).paddingOuter(P).align(D)},Nl.apply(z(),arguments)}function FO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return FO(t())},e}function jF(){return FO(Q2.apply(null,arguments).paddingInner(1))}function J2(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function UO(e,t){var i=Object.create(e.prototype);for(var l in t)i[l]=t[l];return i}function Zv(){}var Mv=.7,ix=1/Mv,kg="\\s*([+-]?\\d+)\\s*",Cv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NF=/^#([0-9a-f]{3,8})$/,BF=new RegExp(`^rgb\\(${kg},${kg},${kg}\\)$`),FF=new RegExp(`^rgb\\(${Oc},${Oc},${Oc}\\)$`),UF=new RegExp(`^rgba\\(${kg},${kg},${kg},${Cv}\\)$`),VF=new RegExp(`^rgba\\(${Oc},${Oc},${Oc},${Cv}\\)$`),qF=new RegExp(`^hsl\\(${Cv},${Oc},${Oc}\\)$`),GF=new RegExp(`^hsla\\(${Cv},${Oc},${Oc},${Cv}\\)$`),hM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};J2(Zv,Pv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fM,formatHex:fM,formatHex8:$F,formatHsl:ZF,formatRgb:dM,toString:dM});function fM(){return this.rgb().formatHex()}function $F(){return this.rgb().formatHex8()}function ZF(){return VO(this).formatHsl()}function dM(){return this.rgb().formatRgb()}function Pv(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=NF.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?pM(t):i===3?new ds(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?m0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?m0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=BF.exec(e))?new ds(t[1],t[2],t[3],1):(t=FF.exec(e))?new ds(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=UF.exec(e))?m0(t[1],t[2],t[3],t[4]):(t=VF.exec(e))?m0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qF.exec(e))?yM(t[1],t[2]/100,t[3]/100,1):(t=GF.exec(e))?yM(t[1],t[2]/100,t[3]/100,t[4]):hM.hasOwnProperty(e)?pM(hM[e]):e==="transparent"?new ds(NaN,NaN,NaN,0):null}function pM(e){return new ds(e>>16&255,e>>8&255,e&255,1)}function m0(e,t,i,l){return l<=0&&(e=t=i=NaN),new ds(e,t,i,l)}function HF(e){return e instanceof Zv||(e=Pv(e)),e?(e=e.rgb(),new ds(e.r,e.g,e.b,e.opacity)):new ds}function r2(e,t,i,l){return arguments.length===1?HF(e):new ds(e,t,i,l??1)}function ds(e,t,i,l){this.r=+e,this.g=+t,this.b=+i,this.opacity=+l}J2(ds,r2,UO(Zv,{brighter(e){return e=e==null?ix:Math.pow(ix,e),new ds(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mv:Math.pow(Mv,e),new ds(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ds(Np(this.r),Np(this.g),Np(this.b),ax(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mM,formatHex:mM,formatHex8:WF,formatRgb:gM,toString:gM}));function mM(){return`#${kp(this.r)}${kp(this.g)}${kp(this.b)}`}function WF(){return`#${kp(this.r)}${kp(this.g)}${kp(this.b)}${kp((isNaN(this.opacity)?1:this.opacity)*255)}`}function gM(){const e=ax(this.opacity);return`${e===1?"rgb(":"rgba("}${Np(this.r)}, ${Np(this.g)}, ${Np(this.b)}${e===1?")":`, ${e})`}`}function ax(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Np(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kp(e){return e=Np(e),(e<16?"0":"")+e.toString(16)}function yM(e,t,i,l){return l<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new zu(e,t,i,l)}function VO(e){if(e instanceof zu)return new zu(e.h,e.s,e.l,e.opacity);if(e instanceof Zv||(e=Pv(e)),!e)return new zu;if(e instanceof zu)return e;e=e.rgb();var t=e.r/255,i=e.g/255,l=e.b/255,m=Math.min(t,i,l),v=Math.max(t,i,l),_=NaN,c=v-m,M=(v+m)/2;return c?(t===v?_=(i-l)/c+(i<l)*6:i===v?_=(l-t)/c+2:_=(t-i)/c+4,c/=M<.5?v+m:2-v-m,_*=60):c=M>0&&M<1?0:_,new zu(_,c,M,e.opacity)}function XF(e,t,i,l){return arguments.length===1?VO(e):new zu(e,t,i,l??1)}function zu(e,t,i,l){this.h=+e,this.s=+t,this.l=+i,this.opacity=+l}J2(zu,XF,UO(Zv,{brighter(e){return e=e==null?ix:Math.pow(ix,e),new zu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mv:Math.pow(Mv,e),new zu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,l=i+(i<.5?i:1-i)*t,m=2*i-l;return new ds(Q1(e>=240?e-240:e+120,m,l),Q1(e,m,l),Q1(e<120?e+240:e-120,m,l),this.opacity)},clamp(){return new zu(vM(this.h),g0(this.s),g0(this.l),ax(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ax(this.opacity);return`${e===1?"hsl(":"hsla("}${vM(this.h)}, ${g0(this.s)*100}%, ${g0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vM(e){return e=(e||0)%360,e<0?e+360:e}function g0(e){return Math.max(0,Math.min(1,e||0))}function Q1(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const eS=e=>()=>e;function YF(e,t){return function(i){return e+i*t}}function KF(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(l){return Math.pow(e+l*t,i)}}function QF(e){return(e=+e)==1?qO:function(t,i){return i-t?KF(t,i,e):eS(isNaN(t)?i:t)}}function qO(e,t){var i=t-e;return i?YF(e,i):eS(isNaN(e)?t:e)}const _M=(function e(t){var i=QF(t);function l(m,v){var _=i((m=r2(m)).r,(v=r2(v)).r),c=i(m.g,v.g),M=i(m.b,v.b),P=qO(m.opacity,v.opacity);return function(D){return m.r=_(D),m.g=c(D),m.b=M(D),m.opacity=P(D),m+""}}return l.gamma=e,l})(1);function JF(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,l=t.slice(),m;return function(v){for(m=0;m<i;++m)l[m]=e[m]*(1-v)+t[m]*v;return l}}function e6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function t6(e,t){var i=t?t.length:0,l=e?Math.min(i,e.length):0,m=new Array(l),v=new Array(i),_;for(_=0;_<l;++_)m[_]=$g(e[_],t[_]);for(;_<i;++_)v[_]=t[_];return function(c){for(_=0;_<l;++_)v[_]=m[_](c);return v}}function r6(e,t){var i=new Date;return e=+e,t=+t,function(l){return i.setTime(e*(1-l)+t*l),i}}function ox(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function n6(e,t){var i={},l={},m;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(m in t)m in e?i[m]=$g(e[m],t[m]):l[m]=t[m];return function(v){for(m in i)l[m]=i[m](v);return l}}var n2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,J1=new RegExp(n2.source,"g");function i6(e){return function(){return e}}function a6(e){return function(t){return e(t)+""}}function o6(e,t){var i=n2.lastIndex=J1.lastIndex=0,l,m,v,_=-1,c=[],M=[];for(e=e+"",t=t+"";(l=n2.exec(e))&&(m=J1.exec(t));)(v=m.index)>i&&(v=t.slice(i,v),c[_]?c[_]+=v:c[++_]=v),(l=l[0])===(m=m[0])?c[_]?c[_]+=m:c[++_]=m:(c[++_]=null,M.push({i:_,x:ox(l,m)})),i=J1.lastIndex;return i<t.length&&(v=t.slice(i),c[_]?c[_]+=v:c[++_]=v),c.length<2?M[0]?a6(M[0].x):i6(t):(t=M.length,function(P){for(var D=0,z;D<t;++D)c[(z=M[D]).i]=z.x(P);return c.join("")})}function $g(e,t){var i=typeof t,l;return t==null||i==="boolean"?eS(t):(i==="number"?ox:i==="string"?(l=Pv(t))?(t=l,_M):o6:t instanceof Pv?_M:t instanceof Date?r6:e6(t)?JF:Array.isArray(t)?t6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?n6:ox)(e,t)}function tS(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function s6(e,t){t===void 0&&(t=e,e=$g);for(var i=0,l=t.length-1,m=t[0],v=new Array(l<0?0:l);i<l;)v[i]=e(m,m=t[++i]);return function(_){var c=Math.max(0,Math.min(l-1,Math.floor(_*=l)));return v[c](_-c)}}function l6(e){return function(){return e}}function sx(e){return+e}var xM=[0,1];function ko(e){return e}function i2(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:l6(isNaN(t)?NaN:.5)}function u6(e,t){var i;return e>t&&(i=e,e=t,t=i),function(l){return Math.max(e,Math.min(t,l))}}function c6(e,t,i){var l=e[0],m=e[1],v=t[0],_=t[1];return m<l?(l=i2(m,l),v=i(_,v)):(l=i2(l,m),v=i(v,_)),function(c){return v(l(c))}}function h6(e,t,i){var l=Math.min(e.length,t.length)-1,m=new Array(l),v=new Array(l),_=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++_<l;)m[_]=i2(e[_],e[_+1]),v[_]=i(t[_],t[_+1]);return function(c){var M=$v(e,c,1,l)-1;return v[M](m[M](c))}}function Hv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Xx(){var e=xM,t=xM,i=$g,l,m,v,_=ko,c,M,P;function D(){var F=Math.min(e.length,t.length);return _!==ko&&(_=u6(e[0],e[F-1])),c=F>2?h6:c6,M=P=null,z}function z(F){return F==null||isNaN(F=+F)?v:(M||(M=c(e.map(l),t,i)))(l(_(F)))}return z.invert=function(F){return _(m((P||(P=c(t,e.map(l),ox)))(F)))},z.domain=function(F){return arguments.length?(e=Array.from(F,sx),D()):e.slice()},z.range=function(F){return arguments.length?(t=Array.from(F),D()):t.slice()},z.rangeRound=function(F){return t=Array.from(F),i=tS,D()},z.clamp=function(F){return arguments.length?(_=F?!0:ko,D()):_!==ko},z.interpolate=function(F){return arguments.length?(i=F,D()):i},z.unknown=function(F){return arguments.length?(v=F,z):v},function(F,$){return l=F,m=$,D()}}function rS(){return Xx()(ko,ko)}function f6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function lx(e,t){if(!isFinite(e)||e===0)return null;var i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),l=e.slice(0,i);return[l.length>1?l[0]+l.slice(2):l,+e.slice(i+1)]}function jg(e){return e=lx(Math.abs(e)),e?e[1]:NaN}function d6(e,t){return function(i,l){for(var m=i.length,v=[],_=0,c=e[0],M=0;m>0&&c>0&&(M+c+1>l&&(c=Math.max(1,l-M)),v.push(i.substring(m-=c,m+c)),!((M+=c+1)>l));)c=e[_=(_+1)%e.length];return v.reverse().join(t)}}function p6(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var m6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dv(e){if(!(t=m6.exec(e)))throw new Error("invalid format: "+e);var t;return new nS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dv.prototype=nS.prototype;function nS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}nS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function g6(e){e:for(var t=e.length,i=1,l=-1,m;i<t;++i)switch(e[i]){case".":l=m=i;break;case"0":l===0&&(l=i),m=i;break;default:if(!+e[i])break e;l>0&&(l=0);break}return l>0?e.slice(0,l)+e.slice(m+1):e}var ux;function y6(e,t){var i=lx(e,t);if(!i)return ux=void 0,e.toPrecision(t);var l=i[0],m=i[1],v=m-(ux=Math.max(-8,Math.min(8,Math.floor(m/3)))*3)+1,_=l.length;return v===_?l:v>_?l+new Array(v-_+1).join("0"):v>0?l.slice(0,v)+"."+l.slice(v):"0."+new Array(1-v).join("0")+lx(e,Math.max(0,t+v-1))[0]}function bM(e,t){var i=lx(e,t);if(!i)return e+"";var l=i[0],m=i[1];return m<0?"0."+new Array(-m).join("0")+l:l.length>m+1?l.slice(0,m+1)+"."+l.slice(m+1):l+new Array(m-l.length+2).join("0")}const wM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:f6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>bM(e*100,t),r:bM,s:y6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function SM(e){return e}var TM=Array.prototype.map,EM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function v6(e){var t=e.grouping===void 0||e.thousands===void 0?SM:d6(TM.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",l=e.currency===void 0?"":e.currency[1]+"",m=e.decimal===void 0?".":e.decimal+"",v=e.numerals===void 0?SM:p6(TM.call(e.numerals,String)),_=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",M=e.nan===void 0?"NaN":e.nan+"";function P(z,F){z=Dv(z);var $=z.fill,Y=z.align,K=z.sign,q=z.symbol,he=z.zero,ye=z.width,ge=z.comma,Te=z.precision,ke=z.trim,Pe=z.type;Pe==="n"?(ge=!0,Pe="g"):wM[Pe]||(Te===void 0&&(Te=12),ke=!0,Pe="g"),(he||$==="0"&&Y==="=")&&(he=!0,$="0",Y="=");var Re=(F&&F.prefix!==void 0?F.prefix:"")+(q==="$"?i:q==="#"&&/[boxX]/.test(Pe)?"0"+Pe.toLowerCase():""),ot=(q==="$"?l:/[%p]/.test(Pe)?_:"")+(F&&F.suffix!==void 0?F.suffix:""),bt=wM[Pe],kt=/[defgprs%]/.test(Pe);Te=Te===void 0?6:/[gprs]/.test(Pe)?Math.max(1,Math.min(21,Te)):Math.max(0,Math.min(20,Te));function We(Ve){var Ot=Re,Ue=ot,Je,Le,Ge;if(Pe==="c")Ue=bt(Ve)+Ue,Ve="";else{Ve=+Ve;var st=Ve<0||1/Ve<0;if(Ve=isNaN(Ve)?M:bt(Math.abs(Ve),Te),ke&&(Ve=g6(Ve)),st&&+Ve==0&&K!=="+"&&(st=!1),Ot=(st?K==="("?K:c:K==="-"||K==="("?"":K)+Ot,Ue=(Pe==="s"&&!isNaN(Ve)&&ux!==void 0?EM[8+ux/3]:"")+Ue+(st&&K==="("?")":""),kt){for(Je=-1,Le=Ve.length;++Je<Le;)if(Ge=Ve.charCodeAt(Je),48>Ge||Ge>57){Ue=(Ge===46?m+Ve.slice(Je+1):Ve.slice(Je))+Ue,Ve=Ve.slice(0,Je);break}}}ge&&!he&&(Ve=t(Ve,1/0));var pt=Ot.length+Ve.length+Ue.length,Rt=pt<ye?new Array(ye-pt+1).join($):"";switch(ge&&he&&(Ve=t(Rt+Ve,Rt.length?ye-Ue.length:1/0),Rt=""),Y){case"<":Ve=Ot+Ve+Ue+Rt;break;case"=":Ve=Ot+Rt+Ve+Ue;break;case"^":Ve=Rt.slice(0,pt=Rt.length>>1)+Ot+Ve+Ue+Rt.slice(pt);break;default:Ve=Rt+Ot+Ve+Ue;break}return v(Ve)}return We.toString=function(){return z+""},We}function D(z,F){var $=Math.max(-8,Math.min(8,Math.floor(jg(F)/3)))*3,Y=Math.pow(10,-$),K=P((z=Dv(z),z.type="f",z),{suffix:EM[8+$/3]});return function(q){return K(Y*q)}}return{format:P,formatPrefix:D}}var y0,iS,GO;_6({thousands:",",grouping:[3],currency:["$",""]});function _6(e){return y0=v6(e),iS=y0.format,GO=y0.formatPrefix,y0}function x6(e){return Math.max(0,-jg(Math.abs(e)))}function b6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jg(t)/3)))*3-jg(Math.abs(e)))}function w6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jg(t)-jg(e))+1}function $O(e,t,i,l){var m=e2(e,t,i),v;switch(l=Dv(l??",f"),l.type){case"s":{var _=Math.max(Math.abs(e),Math.abs(t));return l.precision==null&&!isNaN(v=b6(m,_))&&(l.precision=v),GO(l,_)}case"":case"e":case"g":case"p":case"r":{l.precision==null&&!isNaN(v=w6(m,Math.max(Math.abs(e),Math.abs(t))))&&(l.precision=v-(l.type==="e"));break}case"f":case"%":{l.precision==null&&!isNaN(v=x6(m))&&(l.precision=v-(l.type==="%")*2);break}}return iS(l)}function vd(e){var t=e.domain;return e.ticks=function(i){var l=t();return Qw(l[0],l[l.length-1],i??10)},e.tickFormat=function(i,l){var m=t();return $O(m[0],m[m.length-1],i??10,l)},e.nice=function(i){i==null&&(i=10);var l=t(),m=0,v=l.length-1,_=l[m],c=l[v],M,P,D=10;for(c<_&&(P=_,_=c,c=P,P=m,m=v,v=P);D-- >0;){if(P=Jw(_,c,i),P===M)return l[m]=_,l[v]=c,t(l);if(P>0)_=Math.floor(_/P)*P,c=Math.ceil(c/P)*P;else if(P<0)_=Math.ceil(_*P)/P,c=Math.floor(c*P)/P;else break;M=P}return e},e}function ZO(){var e=rS();return e.copy=function(){return Hv(e,ZO())},Nl.apply(e,arguments),vd(e)}function HO(e){var t;function i(l){return l==null||isNaN(l=+l)?t:l}return i.invert=i,i.domain=i.range=function(l){return arguments.length?(e=Array.from(l,sx),i):e.slice()},i.unknown=function(l){return arguments.length?(t=l,i):t},i.copy=function(){return HO(e).unknown(t)},e=arguments.length?Array.from(e,sx):[0,1],vd(i)}function WO(e,t){e=e.slice();var i=0,l=e.length-1,m=e[i],v=e[l],_;return v<m&&(_=i,i=l,l=_,_=m,m=v,v=_),e[i]=t.floor(m),e[l]=t.ceil(v),e}function AM(e){return Math.log(e)}function MM(e){return Math.exp(e)}function S6(e){return-Math.log(-e)}function T6(e){return-Math.exp(-e)}function E6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function A6(e){return e===10?E6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function M6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function CM(e){return(t,i)=>-e(-t,i)}function aS(e){const t=e(AM,MM),i=t.domain;let l=10,m,v;function _(){return m=M6(l),v=A6(l),i()[0]<0?(m=CM(m),v=CM(v),e(S6,T6)):e(AM,MM),t}return t.base=function(c){return arguments.length?(l=+c,_()):l},t.domain=function(c){return arguments.length?(i(c),_()):i()},t.ticks=c=>{const M=i();let P=M[0],D=M[M.length-1];const z=D<P;z&&([P,D]=[D,P]);let F=m(P),$=m(D),Y,K;const q=c==null?10:+c;let he=[];if(!(l%1)&&$-F<q){if(F=Math.floor(F),$=Math.ceil($),P>0){for(;F<=$;++F)for(Y=1;Y<l;++Y)if(K=F<0?Y/v(-F):Y*v(F),!(K<P)){if(K>D)break;he.push(K)}}else for(;F<=$;++F)for(Y=l-1;Y>=1;--Y)if(K=F>0?Y/v(-F):Y*v(F),!(K<P)){if(K>D)break;he.push(K)}he.length*2<q&&(he=Qw(P,D,q))}else he=Qw(F,$,Math.min($-F,q)).map(v);return z?he.reverse():he},t.tickFormat=(c,M)=>{if(c==null&&(c=10),M==null&&(M=l===10?"s":","),typeof M!="function"&&(!(l%1)&&(M=Dv(M)).precision==null&&(M.trim=!0),M=iS(M)),c===1/0)return M;const P=Math.max(1,l*c/t.ticks().length);return D=>{let z=D/v(Math.round(m(D)));return z*l<l-.5&&(z*=l),z<=P?M(D):""}},t.nice=()=>i(WO(i(),{floor:c=>v(Math.floor(m(c))),ceil:c=>v(Math.ceil(m(c)))})),t}function XO(){const e=aS(Xx()).domain([1,10]);return e.copy=()=>Hv(e,XO()).base(e.base()),Nl.apply(e,arguments),e}function PM(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function DM(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function oS(e){var t=1,i=e(PM(t),DM(t));return i.constant=function(l){return arguments.length?e(PM(t=+l),DM(t)):t},vd(i)}function YO(){var e=oS(Xx());return e.copy=function(){return Hv(e,YO()).constant(e.constant())},Nl.apply(e,arguments)}function OM(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function C6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function P6(e){return e<0?-e*e:e*e}function sS(e){var t=e(ko,ko),i=1;function l(){return i===1?e(ko,ko):i===.5?e(C6,P6):e(OM(i),OM(1/i))}return t.exponent=function(m){return arguments.length?(i=+m,l()):i},vd(t)}function lS(){var e=sS(Xx());return e.copy=function(){return Hv(e,lS()).exponent(e.exponent())},Nl.apply(e,arguments),e}function D6(){return lS.apply(null,arguments).exponent(.5)}function IM(e){return Math.sign(e)*e*e}function O6(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function KO(){var e=rS(),t=[0,1],i=!1,l;function m(v){var _=O6(e(v));return isNaN(_)?l:i?Math.round(_):_}return m.invert=function(v){return e.invert(IM(v))},m.domain=function(v){return arguments.length?(e.domain(v),m):e.domain()},m.range=function(v){return arguments.length?(e.range((t=Array.from(v,sx)).map(IM)),m):t.slice()},m.rangeRound=function(v){return m.range(v).round(!0)},m.round=function(v){return arguments.length?(i=!!v,m):i},m.clamp=function(v){return arguments.length?(e.clamp(v),m):e.clamp()},m.unknown=function(v){return arguments.length?(l=v,m):l},m.copy=function(){return KO(e.domain(),t).round(i).clamp(e.clamp()).unknown(l)},Nl.apply(m,arguments),vd(m)}function QO(){var e=[],t=[],i=[],l;function m(){var _=0,c=Math.max(1,t.length);for(i=new Array(c-1);++_<c;)i[_-1]=RF(e,_/c);return v}function v(_){return _==null||isNaN(_=+_)?l:t[$v(i,_)]}return v.invertExtent=function(_){var c=t.indexOf(_);return c<0?[NaN,NaN]:[c>0?i[c-1]:e[0],c<i.length?i[c]:e[e.length-1]]},v.domain=function(_){if(!arguments.length)return e.slice();e=[];for(let c of _)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(dd),m()},v.range=function(_){return arguments.length?(t=Array.from(_),m()):t.slice()},v.unknown=function(_){return arguments.length?(l=_,v):l},v.quantiles=function(){return i.slice()},v.copy=function(){return QO().domain(e).range(t).unknown(l)},Nl.apply(v,arguments)}function JO(){var e=0,t=1,i=1,l=[.5],m=[0,1],v;function _(M){return M!=null&&M<=M?m[$v(l,M,0,i)]:v}function c(){var M=-1;for(l=new Array(i);++M<i;)l[M]=((M+1)*t-(M-i)*e)/(i+1);return _}return _.domain=function(M){return arguments.length?([e,t]=M,e=+e,t=+t,c()):[e,t]},_.range=function(M){return arguments.length?(i=(m=Array.from(M)).length-1,c()):m.slice()},_.invertExtent=function(M){var P=m.indexOf(M);return P<0?[NaN,NaN]:P<1?[e,l[0]]:P>=i?[l[i-1],t]:[l[P-1],l[P]]},_.unknown=function(M){return arguments.length&&(v=M),_},_.thresholds=function(){return l.slice()},_.copy=function(){return JO().domain([e,t]).range(m).unknown(v)},Nl.apply(vd(_),arguments)}function eI(){var e=[.5],t=[0,1],i,l=1;function m(v){return v!=null&&v<=v?t[$v(e,v,0,l)]:i}return m.domain=function(v){return arguments.length?(e=Array.from(v),l=Math.min(e.length,t.length-1),m):e.slice()},m.range=function(v){return arguments.length?(t=Array.from(v),l=Math.min(e.length,t.length-1),m):t.slice()},m.invertExtent=function(v){var _=t.indexOf(v);return[e[_-1],e[_]]},m.unknown=function(v){return arguments.length?(i=v,m):i},m.copy=function(){return eI().domain(e).range(t).unknown(i)},Nl.apply(m,arguments)}const ew=new Date,tw=new Date;function Zi(e,t,i,l){function m(v){return e(v=arguments.length===0?new Date:new Date(+v)),v}return m.floor=v=>(e(v=new Date(+v)),v),m.ceil=v=>(e(v=new Date(v-1)),t(v,1),e(v),v),m.round=v=>{const _=m(v),c=m.ceil(v);return v-_<c-v?_:c},m.offset=(v,_)=>(t(v=new Date(+v),_==null?1:Math.floor(_)),v),m.range=(v,_,c)=>{const M=[];if(v=m.ceil(v),c=c==null?1:Math.floor(c),!(v<_)||!(c>0))return M;let P;do M.push(P=new Date(+v)),t(v,c),e(v);while(P<v&&v<_);return M},m.filter=v=>Zi(_=>{if(_>=_)for(;e(_),!v(_);)_.setTime(_-1)},(_,c)=>{if(_>=_)if(c<0)for(;++c<=0;)for(;t(_,-1),!v(_););else for(;--c>=0;)for(;t(_,1),!v(_););}),i&&(m.count=(v,_)=>(ew.setTime(+v),tw.setTime(+_),e(ew),e(tw),Math.floor(i(ew,tw))),m.every=v=>(v=Math.floor(v),!isFinite(v)||!(v>0)?null:v>1?m.filter(l?_=>l(_)%v===0:_=>m.count(0,_)%v===0):m)),m}const cx=Zi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zi(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):cx);cx.range;const Vh=1e3,zl=Vh*60,qh=zl*60,Xh=qh*24,uS=Xh*7,zM=Xh*30,rw=Xh*365,Rp=Zi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Vh)},(e,t)=>(t-e)/Vh,e=>e.getUTCSeconds());Rp.range;const cS=Zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vh)},(e,t)=>{e.setTime(+e+t*zl)},(e,t)=>(t-e)/zl,e=>e.getMinutes());cS.range;const hS=Zi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zl)},(e,t)=>(t-e)/zl,e=>e.getUTCMinutes());hS.range;const fS=Zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Vh-e.getMinutes()*zl)},(e,t)=>{e.setTime(+e+t*qh)},(e,t)=>(t-e)/qh,e=>e.getHours());fS.range;const dS=Zi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qh)},(e,t)=>(t-e)/qh,e=>e.getUTCHours());dS.range;const Wv=Zi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zl)/Xh,e=>e.getDate()-1);Wv.range;const Yx=Zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xh,e=>e.getUTCDate()-1);Yx.range;const tI=Zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xh,e=>Math.floor(e/Xh));tI.range;function Wp(e){return Zi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*zl)/uS)}const Kx=Wp(0),hx=Wp(1),I6=Wp(2),z6=Wp(3),Ng=Wp(4),k6=Wp(5),R6=Wp(6);Kx.range;hx.range;I6.range;z6.range;Ng.range;k6.range;R6.range;function Xp(e){return Zi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/uS)}const Qx=Xp(0),fx=Xp(1),L6=Xp(2),j6=Xp(3),Bg=Xp(4),N6=Xp(5),B6=Xp(6);Qx.range;fx.range;L6.range;j6.range;Bg.range;N6.range;B6.range;const pS=Zi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());pS.range;const mS=Zi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());mS.range;const Yh=Zi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Yh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});Yh.range;const Kh=Zi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Kh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});Kh.range;function rI(e,t,i,l,m,v){const _=[[Rp,1,Vh],[Rp,5,5*Vh],[Rp,15,15*Vh],[Rp,30,30*Vh],[v,1,zl],[v,5,5*zl],[v,15,15*zl],[v,30,30*zl],[m,1,qh],[m,3,3*qh],[m,6,6*qh],[m,12,12*qh],[l,1,Xh],[l,2,2*Xh],[i,1,uS],[t,1,zM],[t,3,3*zM],[e,1,rw]];function c(P,D,z){const F=D<P;F&&([P,D]=[D,P]);const $=z&&typeof z.range=="function"?z:M(P,D,z),Y=$?$.range(P,+D+1):[];return F?Y.reverse():Y}function M(P,D,z){const F=Math.abs(D-P)/z,$=Y2(([,,q])=>q).right(_,F);if($===_.length)return e.every(e2(P/rw,D/rw,z));if($===0)return cx.every(Math.max(e2(P,D,z),1));const[Y,K]=_[F/_[$-1][2]<_[$][2]/F?$-1:$];return Y.every(K)}return[c,M]}const[F6,U6]=rI(Kh,mS,Qx,tI,dS,hS),[V6,q6]=rI(Yh,pS,Kx,Wv,fS,cS);function nw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function iw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function lv(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function G6(e){var t=e.dateTime,i=e.date,l=e.time,m=e.periods,v=e.days,_=e.shortDays,c=e.months,M=e.shortMonths,P=uv(m),D=cv(m),z=uv(v),F=cv(v),$=uv(_),Y=cv(_),K=uv(c),q=cv(c),he=uv(M),ye=cv(M),ge={a:Ge,A:st,b:pt,B:Rt,c:null,d:BM,e:BM,f:d8,g:S8,G:E8,H:c8,I:h8,j:f8,L:nI,m:p8,M:m8,p:De,q:lt,Q:VM,s:qM,S:g8,u:y8,U:v8,V:_8,w:x8,W:b8,x:null,X:null,y:w8,Y:T8,Z:A8,"%":UM},Te={a:Mt,A:zt,b:qt,B:Yt,c:null,d:FM,e:FM,f:D8,g:F8,G:V8,H:M8,I:C8,j:P8,L:aI,m:O8,M:I8,p:Gt,q:Ar,Q:VM,s:qM,S:z8,u:k8,U:R8,V:L8,w:j8,W:N8,x:null,X:null,y:B8,Y:U8,Z:q8,"%":UM},ke={a:kt,A:We,b:Ve,B:Ot,c:Ue,d:jM,e:jM,f:o8,g:LM,G:RM,H:NM,I:NM,j:r8,L:a8,m:t8,M:n8,p:bt,q:e8,Q:l8,s:u8,S:i8,u:X6,U:Y6,V:K6,w:W6,W:Q6,x:Je,X:Le,y:LM,Y:RM,Z:J6,"%":s8};ge.x=Pe(i,ge),ge.X=Pe(l,ge),ge.c=Pe(t,ge),Te.x=Pe(i,Te),Te.X=Pe(l,Te),Te.c=Pe(t,Te);function Pe(mt,or){return function(mr){var Et=[],An=-1,ur=0,Wr=mt.length,sn,Rr,ya;for(mr instanceof Date||(mr=new Date(+mr));++An<Wr;)mt.charCodeAt(An)===37&&(Et.push(mt.slice(ur,An)),(Rr=kM[sn=mt.charAt(++An)])!=null?sn=mt.charAt(++An):Rr=sn==="e"?" ":"0",(ya=or[sn])&&(sn=ya(mr,Rr)),Et.push(sn),ur=An+1);return Et.push(mt.slice(ur,An)),Et.join("")}}function Re(mt,or){return function(mr){var Et=lv(1900,void 0,1),An=ot(Et,mt,mr+="",0),ur,Wr;if(An!=mr.length)return null;if("Q"in Et)return new Date(Et.Q);if("s"in Et)return new Date(Et.s*1e3+("L"in Et?Et.L:0));if(or&&!("Z"in Et)&&(Et.Z=0),"p"in Et&&(Et.H=Et.H%12+Et.p*12),Et.m===void 0&&(Et.m="q"in Et?Et.q:0),"V"in Et){if(Et.V<1||Et.V>53)return null;"w"in Et||(Et.w=1),"Z"in Et?(ur=iw(lv(Et.y,0,1)),Wr=ur.getUTCDay(),ur=Wr>4||Wr===0?fx.ceil(ur):fx(ur),ur=Yx.offset(ur,(Et.V-1)*7),Et.y=ur.getUTCFullYear(),Et.m=ur.getUTCMonth(),Et.d=ur.getUTCDate()+(Et.w+6)%7):(ur=nw(lv(Et.y,0,1)),Wr=ur.getDay(),ur=Wr>4||Wr===0?hx.ceil(ur):hx(ur),ur=Wv.offset(ur,(Et.V-1)*7),Et.y=ur.getFullYear(),Et.m=ur.getMonth(),Et.d=ur.getDate()+(Et.w+6)%7)}else("W"in Et||"U"in Et)&&("w"in Et||(Et.w="u"in Et?Et.u%7:"W"in Et?1:0),Wr="Z"in Et?iw(lv(Et.y,0,1)).getUTCDay():nw(lv(Et.y,0,1)).getDay(),Et.m=0,Et.d="W"in Et?(Et.w+6)%7+Et.W*7-(Wr+5)%7:Et.w+Et.U*7-(Wr+6)%7);return"Z"in Et?(Et.H+=Et.Z/100|0,Et.M+=Et.Z%100,iw(Et)):nw(Et)}}function ot(mt,or,mr,Et){for(var An=0,ur=or.length,Wr=mr.length,sn,Rr;An<ur;){if(Et>=Wr)return-1;if(sn=or.charCodeAt(An++),sn===37){if(sn=or.charAt(An++),Rr=ke[sn in kM?or.charAt(An++):sn],!Rr||(Et=Rr(mt,mr,Et))<0)return-1}else if(sn!=mr.charCodeAt(Et++))return-1}return Et}function bt(mt,or,mr){var Et=P.exec(or.slice(mr));return Et?(mt.p=D.get(Et[0].toLowerCase()),mr+Et[0].length):-1}function kt(mt,or,mr){var Et=$.exec(or.slice(mr));return Et?(mt.w=Y.get(Et[0].toLowerCase()),mr+Et[0].length):-1}function We(mt,or,mr){var Et=z.exec(or.slice(mr));return Et?(mt.w=F.get(Et[0].toLowerCase()),mr+Et[0].length):-1}function Ve(mt,or,mr){var Et=he.exec(or.slice(mr));return Et?(mt.m=ye.get(Et[0].toLowerCase()),mr+Et[0].length):-1}function Ot(mt,or,mr){var Et=K.exec(or.slice(mr));return Et?(mt.m=q.get(Et[0].toLowerCase()),mr+Et[0].length):-1}function Ue(mt,or,mr){return ot(mt,t,or,mr)}function Je(mt,or,mr){return ot(mt,i,or,mr)}function Le(mt,or,mr){return ot(mt,l,or,mr)}function Ge(mt){return _[mt.getDay()]}function st(mt){return v[mt.getDay()]}function pt(mt){return M[mt.getMonth()]}function Rt(mt){return c[mt.getMonth()]}function De(mt){return m[+(mt.getHours()>=12)]}function lt(mt){return 1+~~(mt.getMonth()/3)}function Mt(mt){return _[mt.getUTCDay()]}function zt(mt){return v[mt.getUTCDay()]}function qt(mt){return M[mt.getUTCMonth()]}function Yt(mt){return c[mt.getUTCMonth()]}function Gt(mt){return m[+(mt.getUTCHours()>=12)]}function Ar(mt){return 1+~~(mt.getUTCMonth()/3)}return{format:function(mt){var or=Pe(mt+="",ge);return or.toString=function(){return mt},or},parse:function(mt){var or=Re(mt+="",!1);return or.toString=function(){return mt},or},utcFormat:function(mt){var or=Pe(mt+="",Te);return or.toString=function(){return mt},or},utcParse:function(mt){var or=Re(mt+="",!0);return or.toString=function(){return mt},or}}}var kM={"-":"",_:" ",0:"0"},pa=/^\s*\d+/,$6=/^%/,Z6=/[\\^$*+?|[\]().{}]/g;function nn(e,t,i){var l=e<0?"-":"",m=(l?-e:e)+"",v=m.length;return l+(v<i?new Array(i-v+1).join(t)+m:m)}function H6(e){return e.replace(Z6,"\\$&")}function uv(e){return new RegExp("^(?:"+e.map(H6).join("|")+")","i")}function cv(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function W6(e,t,i){var l=pa.exec(t.slice(i,i+1));return l?(e.w=+l[0],i+l[0].length):-1}function X6(e,t,i){var l=pa.exec(t.slice(i,i+1));return l?(e.u=+l[0],i+l[0].length):-1}function Y6(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.U=+l[0],i+l[0].length):-1}function K6(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.V=+l[0],i+l[0].length):-1}function Q6(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.W=+l[0],i+l[0].length):-1}function RM(e,t,i){var l=pa.exec(t.slice(i,i+4));return l?(e.y=+l[0],i+l[0].length):-1}function LM(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.y=+l[0]+(+l[0]>68?1900:2e3),i+l[0].length):-1}function J6(e,t,i){var l=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return l?(e.Z=l[1]?0:-(l[2]+(l[3]||"00")),i+l[0].length):-1}function e8(e,t,i){var l=pa.exec(t.slice(i,i+1));return l?(e.q=l[0]*3-3,i+l[0].length):-1}function t8(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.m=l[0]-1,i+l[0].length):-1}function jM(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.d=+l[0],i+l[0].length):-1}function r8(e,t,i){var l=pa.exec(t.slice(i,i+3));return l?(e.m=0,e.d=+l[0],i+l[0].length):-1}function NM(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.H=+l[0],i+l[0].length):-1}function n8(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.M=+l[0],i+l[0].length):-1}function i8(e,t,i){var l=pa.exec(t.slice(i,i+2));return l?(e.S=+l[0],i+l[0].length):-1}function a8(e,t,i){var l=pa.exec(t.slice(i,i+3));return l?(e.L=+l[0],i+l[0].length):-1}function o8(e,t,i){var l=pa.exec(t.slice(i,i+6));return l?(e.L=Math.floor(l[0]/1e3),i+l[0].length):-1}function s8(e,t,i){var l=$6.exec(t.slice(i,i+1));return l?i+l[0].length:-1}function l8(e,t,i){var l=pa.exec(t.slice(i));return l?(e.Q=+l[0],i+l[0].length):-1}function u8(e,t,i){var l=pa.exec(t.slice(i));return l?(e.s=+l[0],i+l[0].length):-1}function BM(e,t){return nn(e.getDate(),t,2)}function c8(e,t){return nn(e.getHours(),t,2)}function h8(e,t){return nn(e.getHours()%12||12,t,2)}function f8(e,t){return nn(1+Wv.count(Yh(e),e),t,3)}function nI(e,t){return nn(e.getMilliseconds(),t,3)}function d8(e,t){return nI(e,t)+"000"}function p8(e,t){return nn(e.getMonth()+1,t,2)}function m8(e,t){return nn(e.getMinutes(),t,2)}function g8(e,t){return nn(e.getSeconds(),t,2)}function y8(e){var t=e.getDay();return t===0?7:t}function v8(e,t){return nn(Kx.count(Yh(e)-1,e),t,2)}function iI(e){var t=e.getDay();return t>=4||t===0?Ng(e):Ng.ceil(e)}function _8(e,t){return e=iI(e),nn(Ng.count(Yh(e),e)+(Yh(e).getDay()===4),t,2)}function x8(e){return e.getDay()}function b8(e,t){return nn(hx.count(Yh(e)-1,e),t,2)}function w8(e,t){return nn(e.getFullYear()%100,t,2)}function S8(e,t){return e=iI(e),nn(e.getFullYear()%100,t,2)}function T8(e,t){return nn(e.getFullYear()%1e4,t,4)}function E8(e,t){var i=e.getDay();return e=i>=4||i===0?Ng(e):Ng.ceil(e),nn(e.getFullYear()%1e4,t,4)}function A8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nn(t/60|0,"0",2)+nn(t%60,"0",2)}function FM(e,t){return nn(e.getUTCDate(),t,2)}function M8(e,t){return nn(e.getUTCHours(),t,2)}function C8(e,t){return nn(e.getUTCHours()%12||12,t,2)}function P8(e,t){return nn(1+Yx.count(Kh(e),e),t,3)}function aI(e,t){return nn(e.getUTCMilliseconds(),t,3)}function D8(e,t){return aI(e,t)+"000"}function O8(e,t){return nn(e.getUTCMonth()+1,t,2)}function I8(e,t){return nn(e.getUTCMinutes(),t,2)}function z8(e,t){return nn(e.getUTCSeconds(),t,2)}function k8(e){var t=e.getUTCDay();return t===0?7:t}function R8(e,t){return nn(Qx.count(Kh(e)-1,e),t,2)}function oI(e){var t=e.getUTCDay();return t>=4||t===0?Bg(e):Bg.ceil(e)}function L8(e,t){return e=oI(e),nn(Bg.count(Kh(e),e)+(Kh(e).getUTCDay()===4),t,2)}function j8(e){return e.getUTCDay()}function N8(e,t){return nn(fx.count(Kh(e)-1,e),t,2)}function B8(e,t){return nn(e.getUTCFullYear()%100,t,2)}function F8(e,t){return e=oI(e),nn(e.getUTCFullYear()%100,t,2)}function U8(e,t){return nn(e.getUTCFullYear()%1e4,t,4)}function V8(e,t){var i=e.getUTCDay();return e=i>=4||i===0?Bg(e):Bg.ceil(e),nn(e.getUTCFullYear()%1e4,t,4)}function q8(){return"+0000"}function UM(){return"%"}function VM(e){return+e}function qM(e){return Math.floor(+e/1e3)}var bg,sI,lI;G8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function G8(e){return bg=G6(e),sI=bg.format,bg.parse,lI=bg.utcFormat,bg.utcParse,bg}function $8(e){return new Date(e)}function Z8(e){return e instanceof Date?+e:+new Date(+e)}function gS(e,t,i,l,m,v,_,c,M,P){var D=rS(),z=D.invert,F=D.domain,$=P(".%L"),Y=P(":%S"),K=P("%I:%M"),q=P("%I %p"),he=P("%a %d"),ye=P("%b %d"),ge=P("%B"),Te=P("%Y");function ke(Pe){return(M(Pe)<Pe?$:c(Pe)<Pe?Y:_(Pe)<Pe?K:v(Pe)<Pe?q:l(Pe)<Pe?m(Pe)<Pe?he:ye:i(Pe)<Pe?ge:Te)(Pe)}return D.invert=function(Pe){return new Date(z(Pe))},D.domain=function(Pe){return arguments.length?F(Array.from(Pe,Z8)):F().map($8)},D.ticks=function(Pe){var Re=F();return e(Re[0],Re[Re.length-1],Pe??10)},D.tickFormat=function(Pe,Re){return Re==null?ke:P(Re)},D.nice=function(Pe){var Re=F();return(!Pe||typeof Pe.range!="function")&&(Pe=t(Re[0],Re[Re.length-1],Pe??10)),Pe?F(WO(Re,Pe)):D},D.copy=function(){return Hv(D,gS(e,t,i,l,m,v,_,c,M,P))},D}function H8(){return Nl.apply(gS(V6,q6,Yh,pS,Kx,Wv,fS,cS,Rp,sI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function W8(){return Nl.apply(gS(F6,U6,Kh,mS,Qx,Yx,dS,hS,Rp,lI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Jx(){var e=0,t=1,i,l,m,v,_=ko,c=!1,M;function P(z){return z==null||isNaN(z=+z)?M:_(m===0?.5:(z=(v(z)-i)*m,c?Math.max(0,Math.min(1,z)):z))}P.domain=function(z){return arguments.length?([e,t]=z,i=v(e=+e),l=v(t=+t),m=i===l?0:1/(l-i),P):[e,t]},P.clamp=function(z){return arguments.length?(c=!!z,P):c},P.interpolator=function(z){return arguments.length?(_=z,P):_};function D(z){return function(F){var $,Y;return arguments.length?([$,Y]=F,_=z($,Y),P):[_(0),_(1)]}}return P.range=D($g),P.rangeRound=D(tS),P.unknown=function(z){return arguments.length?(M=z,P):M},function(z){return v=z,i=z(e),l=z(t),m=i===l?0:1/(l-i),P}}function _d(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function uI(){var e=vd(Jx()(ko));return e.copy=function(){return _d(e,uI())},af.apply(e,arguments)}function cI(){var e=aS(Jx()).domain([1,10]);return e.copy=function(){return _d(e,cI()).base(e.base())},af.apply(e,arguments)}function hI(){var e=oS(Jx());return e.copy=function(){return _d(e,hI()).constant(e.constant())},af.apply(e,arguments)}function yS(){var e=sS(Jx());return e.copy=function(){return _d(e,yS()).exponent(e.exponent())},af.apply(e,arguments)}function X8(){return yS.apply(null,arguments).exponent(.5)}function fI(){var e=[],t=ko;function i(l){if(l!=null&&!isNaN(l=+l))return t(($v(e,l,1)-1)/(e.length-1))}return i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let m of l)m!=null&&!isNaN(m=+m)&&e.push(m);return e.sort(dd),i},i.interpolator=function(l){return arguments.length?(t=l,i):t},i.range=function(){return e.map((l,m)=>t(m/(e.length-1)))},i.quantiles=function(l){return Array.from({length:l+1},(m,v)=>kF(e,v/l))},i.copy=function(){return fI(t).domain(e)},af.apply(i,arguments)}function eb(){var e=0,t=.5,i=1,l=1,m,v,_,c,M,P=ko,D,z=!1,F;function $(K){return isNaN(K=+K)?F:(K=.5+((K=+D(K))-v)*(l*K<l*v?c:M),P(z?Math.max(0,Math.min(1,K)):K))}$.domain=function(K){return arguments.length?([e,t,i]=K,m=D(e=+e),v=D(t=+t),_=D(i=+i),c=m===v?0:.5/(v-m),M=v===_?0:.5/(_-v),l=v<m?-1:1,$):[e,t,i]},$.clamp=function(K){return arguments.length?(z=!!K,$):z},$.interpolator=function(K){return arguments.length?(P=K,$):P};function Y(K){return function(q){var he,ye,ge;return arguments.length?([he,ye,ge]=q,P=s6(K,[he,ye,ge]),$):[P(0),P(.5),P(1)]}}return $.range=Y($g),$.rangeRound=Y(tS),$.unknown=function(K){return arguments.length?(F=K,$):F},function(K){return D=K,m=K(e),v=K(t),_=K(i),c=m===v?0:.5/(v-m),M=v===_?0:.5/(_-v),l=v<m?-1:1,$}}function dI(){var e=vd(eb()(ko));return e.copy=function(){return _d(e,dI())},af.apply(e,arguments)}function pI(){var e=aS(eb()).domain([.1,1,10]);return e.copy=function(){return _d(e,pI()).base(e.base())},af.apply(e,arguments)}function mI(){var e=oS(eb());return e.copy=function(){return _d(e,mI()).constant(e.constant())},af.apply(e,arguments)}function vS(){var e=sS(eb());return e.copy=function(){return _d(e,vS()).exponent(e.exponent())},af.apply(e,arguments)}function Y8(){return vS.apply(null,arguments).exponent(.5)}const fv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Q2,scaleDiverging:dI,scaleDivergingLog:pI,scaleDivergingPow:vS,scaleDivergingSqrt:Y8,scaleDivergingSymlog:mI,scaleIdentity:HO,scaleImplicit:t2,scaleLinear:ZO,scaleLog:XO,scaleOrdinal:K2,scalePoint:jF,scalePow:lS,scaleQuantile:QO,scaleQuantize:JO,scaleRadial:KO,scaleSequential:uI,scaleSequentialLog:cI,scaleSequentialPow:yS,scaleSequentialQuantile:fI,scaleSequentialSqrt:X8,scaleSequentialSymlog:hI,scaleSqrt:D6,scaleSymlog:YO,scaleThreshold:eI,scaleTime:H8,scaleUtc:W8,tickFormat:$O},Symbol.toStringTag,{value:"Module"}));var of=e=>e.chartData,gI=ht([of],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),yI=(e,t,i,l)=>l?gI(e):of(e),K8=(e,t,i)=>i?gI(e):of(e);function Qh(e){if(Array.isArray(e)&&e.length===2){var[t,i]=e;if(Br(t)&&Br(i))return!0}return!1}function GM(e,t,i){return i?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function vI(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[i,l]=e,m,v;if(Br(i))m=i;else if(typeof i=="function")return;if(Br(l))v=l;else if(typeof l=="function")return;var _=[m,v];if(Qh(_))return _}}function Q8(e,t,i){if(!(!i&&t==null)){if(typeof e=="function"&&t!=null)try{var l=e(t,i);if(Qh(l))return GM(l,t,i)}catch{}if(Array.isArray(e)&&e.length===2){var[m,v]=e,_,c;if(m==="auto")t!=null&&(_=Math.min(...t));else if(Jt(m))_=m;else if(typeof m=="function")try{t!=null&&(_=m(t?.[0]))}catch{}else if(typeof m=="string"&&rA.test(m)){var M=rA.exec(m);if(M==null||M[1]==null||t==null)_=void 0;else{var P=+M[1];_=t[0]-P}}else _=t?.[0];if(v==="auto")t!=null&&(c=Math.max(...t));else if(Jt(v))c=v;else if(typeof v=="function")try{t!=null&&(c=v(t?.[1]))}catch{}else if(typeof v=="string"&&nA.test(v)){var D=nA.exec(v);if(D==null||D[1]==null||t==null)c=void 0;else{var z=+D[1];c=t[1]+z}}else c=t?.[1];var F=[_,c];if(Qh(F))return t==null?F:GM(F,t,i)}}}var Zg=1e9,J8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},xS,ei=!0,Ll="[DecimalError] ",Bp=Ll+"Invalid argument: ",_S=Ll+"Exponent out of range: ",Hg=Math.floor,Ip=Math.pow,eU=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,$s,ha=1e7,Hn=7,_I=9007199254740991,dx=Hg(_I/Hn),Zt={};Zt.absoluteValue=Zt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Zt.comparedTo=Zt.cmp=function(e){var t,i,l,m,v=this;if(e=new v.constructor(e),v.s!==e.s)return v.s||-e.s;if(v.e!==e.e)return v.e>e.e^v.s<0?1:-1;for(l=v.d.length,m=e.d.length,t=0,i=l<m?l:m;t<i;++t)if(v.d[t]!==e.d[t])return v.d[t]>e.d[t]^v.s<0?1:-1;return l===m?0:l>m^v.s<0?1:-1};Zt.decimalPlaces=Zt.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Hn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Zt.dividedBy=Zt.div=function(e){return $h(this,new this.constructor(e))};Zt.dividedToIntegerBy=Zt.idiv=function(e){var t=this,i=t.constructor;return Ln($h(t,new i(e),0,1),i.precision)};Zt.equals=Zt.eq=function(e){return!this.cmp(e)};Zt.exponent=function(){return ki(this)};Zt.greaterThan=Zt.gt=function(e){return this.cmp(e)>0};Zt.greaterThanOrEqualTo=Zt.gte=function(e){return this.cmp(e)>=0};Zt.isInteger=Zt.isint=function(){return this.e>this.d.length-2};Zt.isNegative=Zt.isneg=function(){return this.s<0};Zt.isPositive=Zt.ispos=function(){return this.s>0};Zt.isZero=function(){return this.s===0};Zt.lessThan=Zt.lt=function(e){return this.cmp(e)<0};Zt.lessThanOrEqualTo=Zt.lte=function(e){return this.cmp(e)<1};Zt.logarithm=Zt.log=function(e){var t,i=this,l=i.constructor,m=l.precision,v=m+5;if(e===void 0)e=new l(10);else if(e=new l(e),e.s<1||e.eq($s))throw Error(Ll+"NaN");if(i.s<1)throw Error(Ll+(i.s?"NaN":"-Infinity"));return i.eq($s)?new l(0):(ei=!1,t=$h(Ov(i,v),Ov(e,v),v),ei=!0,Ln(t,m))};Zt.minus=Zt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wI(t,e):xI(t,(e.s=-e.s,e))};Zt.modulo=Zt.mod=function(e){var t,i=this,l=i.constructor,m=l.precision;if(e=new l(e),!e.s)throw Error(Ll+"NaN");return i.s?(ei=!1,t=$h(i,e,0,1).times(e),ei=!0,i.minus(t)):Ln(new l(i),m)};Zt.naturalExponential=Zt.exp=function(){return bI(this)};Zt.naturalLogarithm=Zt.ln=function(){return Ov(this)};Zt.negated=Zt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Zt.plus=Zt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?xI(t,e):wI(t,(e.s=-e.s,e))};Zt.precision=Zt.sd=function(e){var t,i,l,m=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bp+e);if(t=ki(m)+1,l=m.d.length-1,i=l*Hn+1,l=m.d[l],l){for(;l%10==0;l/=10)i--;for(l=m.d[0];l>=10;l/=10)i++}return e&&t>i?t:i};Zt.squareRoot=Zt.sqrt=function(){var e,t,i,l,m,v,_,c=this,M=c.constructor;if(c.s<1){if(!c.s)return new M(0);throw Error(Ll+"NaN")}for(e=ki(c),ei=!1,m=Math.sqrt(+c),m==0||m==1/0?(t=Dc(c.d),(t.length+e)%2==0&&(t+="0"),m=Math.sqrt(t),e=Hg((e+1)/2)-(e<0||e%2),m==1/0?t="5e"+e:(t=m.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),l=new M(t)):l=new M(m.toString()),i=M.precision,m=_=i+3;;)if(v=l,l=v.plus($h(c,v,_+2)).times(.5),Dc(v.d).slice(0,_)===(t=Dc(l.d)).slice(0,_)){if(t=t.slice(_-3,_+1),m==_&&t=="4999"){if(Ln(v,i+1,0),v.times(v).eq(c)){l=v;break}}else if(t!="9999")break;_+=4}return ei=!0,Ln(l,i)};Zt.times=Zt.mul=function(e){var t,i,l,m,v,_,c,M,P,D=this,z=D.constructor,F=D.d,$=(e=new z(e)).d;if(!D.s||!e.s)return new z(0);for(e.s*=D.s,i=D.e+e.e,M=F.length,P=$.length,M<P&&(v=F,F=$,$=v,_=M,M=P,P=_),v=[],_=M+P,l=_;l--;)v.push(0);for(l=P;--l>=0;){for(t=0,m=M+l;m>l;)c=v[m]+$[l]*F[m-l-1]+t,v[m--]=c%ha|0,t=c/ha|0;v[m]=(v[m]+t)%ha|0}for(;!v[--_];)v.pop();return t?++i:v.shift(),e.d=v,e.e=i,ei?Ln(e,z.precision):e};Zt.toDecimalPlaces=Zt.todp=function(e,t){var i=this,l=i.constructor;return i=new l(i),e===void 0?i:(jc(e,0,Zg),t===void 0?t=l.rounding:jc(t,0,8),Ln(i,e+ki(i)+1,t))};Zt.toExponential=function(e,t){var i,l=this,m=l.constructor;return e===void 0?i=Zp(l,!0):(jc(e,0,Zg),t===void 0?t=m.rounding:jc(t,0,8),l=Ln(new m(l),e+1,t),i=Zp(l,!0,e+1)),i};Zt.toFixed=function(e,t){var i,l,m=this,v=m.constructor;return e===void 0?Zp(m):(jc(e,0,Zg),t===void 0?t=v.rounding:jc(t,0,8),l=Ln(new v(m),e+ki(m)+1,t),i=Zp(l.abs(),!1,e+ki(l)+1),m.isneg()&&!m.isZero()?"-"+i:i)};Zt.toInteger=Zt.toint=function(){var e=this,t=e.constructor;return Ln(new t(e),ki(e)+1,t.rounding)};Zt.toNumber=function(){return+this};Zt.toPower=Zt.pow=function(e){var t,i,l,m,v,_,c=this,M=c.constructor,P=12,D=+(e=new M(e));if(!e.s)return new M($s);if(c=new M(c),!c.s){if(e.s<1)throw Error(Ll+"Infinity");return c}if(c.eq($s))return c;if(l=M.precision,e.eq($s))return Ln(c,l);if(t=e.e,i=e.d.length-1,_=t>=i,v=c.s,_){if((i=D<0?-D:D)<=_I){for(m=new M($s),t=Math.ceil(l/Hn+4),ei=!1;i%2&&(m=m.times(c),ZM(m.d,t)),i=Hg(i/2),i!==0;)c=c.times(c),ZM(c.d,t);return ei=!0,e.s<0?new M($s).div(m):Ln(m,l)}}else if(v<0)throw Error(Ll+"NaN");return v=v<0&&e.d[Math.max(t,i)]&1?-1:1,c.s=1,ei=!1,m=e.times(Ov(c,l+P)),ei=!0,m=bI(m),m.s=v,m};Zt.toPrecision=function(e,t){var i,l,m=this,v=m.constructor;return e===void 0?(i=ki(m),l=Zp(m,i<=v.toExpNeg||i>=v.toExpPos)):(jc(e,1,Zg),t===void 0?t=v.rounding:jc(t,0,8),m=Ln(new v(m),e,t),i=ki(m),l=Zp(m,e<=i||i<=v.toExpNeg,e)),l};Zt.toSignificantDigits=Zt.tosd=function(e,t){var i=this,l=i.constructor;return e===void 0?(e=l.precision,t=l.rounding):(jc(e,1,Zg),t===void 0?t=l.rounding:jc(t,0,8)),Ln(new l(i),e,t)};Zt.toString=Zt.valueOf=Zt.val=Zt.toJSON=Zt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ki(e),i=e.constructor;return Zp(e,t<=i.toExpNeg||t>=i.toExpPos)};function xI(e,t){var i,l,m,v,_,c,M,P,D=e.constructor,z=D.precision;if(!e.s||!t.s)return t.s||(t=new D(e)),ei?Ln(t,z):t;if(M=e.d,P=t.d,_=e.e,m=t.e,M=M.slice(),v=_-m,v){for(v<0?(l=M,v=-v,c=P.length):(l=P,m=_,c=M.length),_=Math.ceil(z/Hn),c=_>c?_+1:c+1,v>c&&(v=c,l.length=1),l.reverse();v--;)l.push(0);l.reverse()}for(c=M.length,v=P.length,c-v<0&&(v=c,l=P,P=M,M=l),i=0;v;)i=(M[--v]=M[v]+P[v]+i)/ha|0,M[v]%=ha;for(i&&(M.unshift(i),++m),c=M.length;M[--c]==0;)M.pop();return t.d=M,t.e=m,ei?Ln(t,z):t}function jc(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Bp+e)}function Dc(e){var t,i,l,m=e.length-1,v="",_=e[0];if(m>0){for(v+=_,t=1;t<m;t++)l=e[t]+"",i=Hn-l.length,i&&(v+=ud(i)),v+=l;_=e[t],l=_+"",i=Hn-l.length,i&&(v+=ud(i))}else if(_===0)return"0";for(;_%10===0;)_/=10;return v+_}var $h=(function(){function e(l,m){var v,_=0,c=l.length;for(l=l.slice();c--;)v=l[c]*m+_,l[c]=v%ha|0,_=v/ha|0;return _&&l.unshift(_),l}function t(l,m,v,_){var c,M;if(v!=_)M=v>_?1:-1;else for(c=M=0;c<v;c++)if(l[c]!=m[c]){M=l[c]>m[c]?1:-1;break}return M}function i(l,m,v){for(var _=0;v--;)l[v]-=_,_=l[v]<m[v]?1:0,l[v]=_*ha+l[v]-m[v];for(;!l[0]&&l.length>1;)l.shift()}return function(l,m,v,_){var c,M,P,D,z,F,$,Y,K,q,he,ye,ge,Te,ke,Pe,Re,ot,bt=l.constructor,kt=l.s==m.s?1:-1,We=l.d,Ve=m.d;if(!l.s)return new bt(l);if(!m.s)throw Error(Ll+"Division by zero");for(M=l.e-m.e,Re=Ve.length,ke=We.length,$=new bt(kt),Y=$.d=[],P=0;Ve[P]==(We[P]||0);)++P;if(Ve[P]>(We[P]||0)&&--M,v==null?ye=v=bt.precision:_?ye=v+(ki(l)-ki(m))+1:ye=v,ye<0)return new bt(0);if(ye=ye/Hn+2|0,P=0,Re==1)for(D=0,Ve=Ve[0],ye++;(P<ke||D)&&ye--;P++)ge=D*ha+(We[P]||0),Y[P]=ge/Ve|0,D=ge%Ve|0;else{for(D=ha/(Ve[0]+1)|0,D>1&&(Ve=e(Ve,D),We=e(We,D),Re=Ve.length,ke=We.length),Te=Re,K=We.slice(0,Re),q=K.length;q<Re;)K[q++]=0;ot=Ve.slice(),ot.unshift(0),Pe=Ve[0],Ve[1]>=ha/2&&++Pe;do D=0,c=t(Ve,K,Re,q),c<0?(he=K[0],Re!=q&&(he=he*ha+(K[1]||0)),D=he/Pe|0,D>1?(D>=ha&&(D=ha-1),z=e(Ve,D),F=z.length,q=K.length,c=t(z,K,F,q),c==1&&(D--,i(z,Re<F?ot:Ve,F))):(D==0&&(c=D=1),z=Ve.slice()),F=z.length,F<q&&z.unshift(0),i(K,z,q),c==-1&&(q=K.length,c=t(Ve,K,Re,q),c<1&&(D++,i(K,Re<q?ot:Ve,q))),q=K.length):c===0&&(D++,K=[0]),Y[P++]=D,c&&K[0]?K[q++]=We[Te]||0:(K=[We[Te]],q=1);while((Te++<ke||K[0]!==void 0)&&ye--)}return Y[0]||Y.shift(),$.e=M,Ln($,_?v+ki($)+1:v)}})();function bI(e,t){var i,l,m,v,_,c,M=0,P=0,D=e.constructor,z=D.precision;if(ki(e)>16)throw Error(_S+ki(e));if(!e.s)return new D($s);for(ei=!1,c=z,_=new D(.03125);e.abs().gte(.1);)e=e.times(_),P+=5;for(l=Math.log(Ip(2,P))/Math.LN10*2+5|0,c+=l,i=m=v=new D($s),D.precision=c;;){if(m=Ln(m.times(e),c),i=i.times(++M),_=v.plus($h(m,i,c)),Dc(_.d).slice(0,c)===Dc(v.d).slice(0,c)){for(;P--;)v=Ln(v.times(v),c);return D.precision=z,t==null?(ei=!0,Ln(v,z)):v}v=_}}function ki(e){for(var t=e.e*Hn,i=e.d[0];i>=10;i/=10)t++;return t}function aw(e,t,i){if(t>e.LN10.sd())throw ei=!0,i&&(e.precision=i),Error(Ll+"LN10 precision limit exceeded");return Ln(new e(e.LN10),t)}function ud(e){for(var t="";e--;)t+="0";return t}function Ov(e,t){var i,l,m,v,_,c,M,P,D,z=1,F=10,$=e,Y=$.d,K=$.constructor,q=K.precision;if($.s<1)throw Error(Ll+($.s?"NaN":"-Infinity"));if($.eq($s))return new K(0);if(t==null?(ei=!1,P=q):P=t,$.eq(10))return t==null&&(ei=!0),aw(K,P);if(P+=F,K.precision=P,i=Dc(Y),l=i.charAt(0),v=ki($),Math.abs(v)<15e14){for(;l<7&&l!=1||l==1&&i.charAt(1)>3;)$=$.times(e),i=Dc($.d),l=i.charAt(0),z++;v=ki($),l>1?($=new K("0."+i),v++):$=new K(l+"."+i.slice(1))}else return M=aw(K,P+2,q).times(v+""),$=Ov(new K(l+"."+i.slice(1)),P-F).plus(M),K.precision=q,t==null?(ei=!0,Ln($,q)):$;for(c=_=$=$h($.minus($s),$.plus($s),P),D=Ln($.times($),P),m=3;;){if(_=Ln(_.times(D),P),M=c.plus($h(_,new K(m),P)),Dc(M.d).slice(0,P)===Dc(c.d).slice(0,P))return c=c.times(2),v!==0&&(c=c.plus(aw(K,P+2,q).times(v+""))),c=$h(c,new K(z),P),K.precision=q,t==null?(ei=!0,Ln(c,q)):c;c=M,m+=2}}function $M(e,t){var i,l,m;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(l=t.search(/e/i))>0?(i<0&&(i=l),i+=+t.slice(l+1),t=t.substring(0,l)):i<0&&(i=t.length),l=0;t.charCodeAt(l)===48;)++l;for(m=t.length;t.charCodeAt(m-1)===48;)--m;if(t=t.slice(l,m),t){if(m-=l,i=i-l-1,e.e=Hg(i/Hn),e.d=[],l=(i+1)%Hn,i<0&&(l+=Hn),l<m){for(l&&e.d.push(+t.slice(0,l)),m-=Hn;l<m;)e.d.push(+t.slice(l,l+=Hn));t=t.slice(l),l=Hn-t.length}else l-=m;for(;l--;)t+="0";if(e.d.push(+t),ei&&(e.e>dx||e.e<-dx))throw Error(_S+i)}else e.s=0,e.e=0,e.d=[0];return e}function Ln(e,t,i){var l,m,v,_,c,M,P,D,z=e.d;for(_=1,v=z[0];v>=10;v/=10)_++;if(l=t-_,l<0)l+=Hn,m=t,P=z[D=0];else{if(D=Math.ceil((l+1)/Hn),v=z.length,D>=v)return e;for(P=v=z[D],_=1;v>=10;v/=10)_++;l%=Hn,m=l-Hn+_}if(i!==void 0&&(v=Ip(10,_-m-1),c=P/v%10|0,M=t<0||z[D+1]!==void 0||P%v,M=i<4?(c||M)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||M||i==6&&(l>0?m>0?P/Ip(10,_-m):0:z[D-1])%10&1||i==(e.s<0?8:7))),t<1||!z[0])return M?(v=ki(e),z.length=1,t=t-v-1,z[0]=Ip(10,(Hn-t%Hn)%Hn),e.e=Hg(-t/Hn)||0):(z.length=1,z[0]=e.e=e.s=0),e;if(l==0?(z.length=D,v=1,D--):(z.length=D+1,v=Ip(10,Hn-l),z[D]=m>0?(P/Ip(10,_-m)%Ip(10,m)|0)*v:0),M)for(;;)if(D==0){(z[0]+=v)==ha&&(z[0]=1,++e.e);break}else{if(z[D]+=v,z[D]!=ha)break;z[D--]=0,v=1}for(l=z.length;z[--l]===0;)z.pop();if(ei&&(e.e>dx||e.e<-dx))throw Error(_S+ki(e));return e}function wI(e,t){var i,l,m,v,_,c,M,P,D,z,F=e.constructor,$=F.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new F(e),ei?Ln(t,$):t;if(M=e.d,z=t.d,l=t.e,P=e.e,M=M.slice(),_=P-l,_){for(D=_<0,D?(i=M,_=-_,c=z.length):(i=z,l=P,c=M.length),m=Math.max(Math.ceil($/Hn),c)+2,_>m&&(_=m,i.length=1),i.reverse(),m=_;m--;)i.push(0);i.reverse()}else{for(m=M.length,c=z.length,D=m<c,D&&(c=m),m=0;m<c;m++)if(M[m]!=z[m]){D=M[m]<z[m];break}_=0}for(D&&(i=M,M=z,z=i,t.s=-t.s),c=M.length,m=z.length-c;m>0;--m)M[c++]=0;for(m=z.length;m>_;){if(M[--m]<z[m]){for(v=m;v&&M[--v]===0;)M[v]=ha-1;--M[v],M[m]+=ha}M[m]-=z[m]}for(;M[--c]===0;)M.pop();for(;M[0]===0;M.shift())--l;return M[0]?(t.d=M,t.e=l,ei?Ln(t,$):t):new F(0)}function Zp(e,t,i){var l,m=ki(e),v=Dc(e.d),_=v.length;return t?(i&&(l=i-_)>0?v=v.charAt(0)+"."+v.slice(1)+ud(l):_>1&&(v=v.charAt(0)+"."+v.slice(1)),v=v+(m<0?"e":"e+")+m):m<0?(v="0."+ud(-m-1)+v,i&&(l=i-_)>0&&(v+=ud(l))):m>=_?(v+=ud(m+1-_),i&&(l=i-m-1)>0&&(v=v+"."+ud(l))):((l=m+1)<_&&(v=v.slice(0,l)+"."+v.slice(l)),i&&(l=i-_)>0&&(m+1===_&&(v+="."),v+=ud(l))),e.s<0?"-"+v:v}function ZM(e,t){if(e.length>t)return e.length=t,!0}function SI(e){var t,i,l;function m(v){var _=this;if(!(_ instanceof m))return new m(v);if(_.constructor=m,v instanceof m){_.s=v.s,_.e=v.e,_.d=(v=v.d)?v.slice():v;return}if(typeof v=="number"){if(v*0!==0)throw Error(Bp+v);if(v>0)_.s=1;else if(v<0)v=-v,_.s=-1;else{_.s=0,_.e=0,_.d=[0];return}if(v===~~v&&v<1e7){_.e=0,_.d=[v];return}return $M(_,v.toString())}else if(typeof v!="string")throw Error(Bp+v);if(v.charCodeAt(0)===45?(v=v.slice(1),_.s=-1):_.s=1,eU.test(v))$M(_,v);else throw Error(Bp+v)}if(m.prototype=Zt,m.ROUND_UP=0,m.ROUND_DOWN=1,m.ROUND_CEIL=2,m.ROUND_FLOOR=3,m.ROUND_HALF_UP=4,m.ROUND_HALF_DOWN=5,m.ROUND_HALF_EVEN=6,m.ROUND_HALF_CEIL=7,m.ROUND_HALF_FLOOR=8,m.clone=SI,m.config=m.set=tU,e===void 0&&(e={}),e)for(l=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<l.length;)e.hasOwnProperty(i=l[t++])||(e[i]=this[i]);return m.config(e),m}function tU(e){if(!e||typeof e!="object")throw Error(Ll+"Object expected");var t,i,l,m=["precision",1,Zg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<m.length;t+=3)if((l=e[i=m[t]])!==void 0)if(Hg(l)===l&&l>=m[t+1]&&l<=m[t+2])this[i]=l;else throw Error(Bp+i+": "+l);if((l=e[i="LN10"])!==void 0)if(l==Math.LN10)this[i]=new this(l);else throw Error(Bp+i+": "+l);return this}var xS=SI(J8);$s=new xS(1);const _n=xS;function TI(e){var t;return e===0?t=1:t=Math.floor(new _n(e).abs().log(10).toNumber())+1,t}function EI(e,t,i){for(var l=new _n(e),m=0,v=[];l.lt(t)&&m<1e5;)v.push(l.toNumber()),l=l.add(i),m++;return v}var AI=e=>{var[t,i]=e,[l,m]=[t,i];return t>i&&([l,m]=[i,t]),[l,m]},MI=(e,t,i)=>{if(e.lte(0))return new _n(0);var l=TI(e.toNumber()),m=new _n(10).pow(l),v=e.div(m),_=l!==1?.05:.1,c=new _n(Math.ceil(v.div(_).toNumber())).add(i).mul(_),M=c.mul(m);return t?new _n(M.toNumber()):new _n(Math.ceil(M.toNumber()))},rU=(e,t,i)=>{var l=new _n(1),m=new _n(e);if(!m.isint()&&i){var v=Math.abs(e);v<1?(l=new _n(10).pow(TI(e)-1),m=new _n(Math.floor(m.div(l).toNumber())).mul(l)):v>1&&(m=new _n(Math.floor(e)))}else e===0?m=new _n(Math.floor((t-1)/2)):i||(m=new _n(Math.floor(e)));for(var _=Math.floor((t-1)/2),c=[],M=0;M<t;M++)c.push(m.add(new _n(M-_).mul(l)).toNumber());return c},CI=function(t,i,l,m){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((i-t)/(l-1)))return{step:new _n(0),tickMin:new _n(0),tickMax:new _n(0)};var _=MI(new _n(i).sub(t).div(l-1),m,v),c;t<=0&&i>=0?c=new _n(0):(c=new _n(t).add(i).div(2),c=c.sub(new _n(c).mod(_)));var M=Math.ceil(c.sub(t).div(_).toNumber()),P=Math.ceil(new _n(i).sub(c).div(_).toNumber()),D=M+P+1;return D>l?CI(t,i,l,m,v+1):(D<l&&(P=i>0?P+(l-D):P,M=i>0?M:M+(l-D)),{step:_,tickMin:c.sub(new _n(M).mul(_)),tickMax:c.add(new _n(P).mul(_))})},nU=function(t){var[i,l]=t,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=Math.max(m,2),[c,M]=AI([i,l]);if(c===-1/0||M===1/0){var P=M===1/0?[c,...Array(m-1).fill(1/0)]:[...Array(m-1).fill(-1/0),M];return i>l?P.reverse():P}if(c===M)return rU(c,m,v);var{step:D,tickMin:z,tickMax:F}=CI(c,M,_,v,0),$=EI(z,F.add(new _n(.1).mul(D)),D);return i>l?$.reverse():$},iU=function(t,i){var[l,m]=t,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[_,c]=AI([l,m]);if(_===-1/0||c===1/0)return[l,m];if(_===c)return[_];var M=Math.max(i,2),P=MI(new _n(c).sub(_).div(M-1),v,0),D=[...EI(new _n(_),new _n(c),P),c];return v===!1&&(D=D.map(z=>Math.round(z))),l>m?D.reverse():D},aU=e=>e.rootProps.barCategoryGap,tb=e=>e.rootProps.stackOffset,PI=e=>e.rootProps.reverseStackOrder,bS=e=>e.options.chartName,wS=e=>e.rootProps.syncId,DI=e=>e.rootProps.syncMethod,SS=e=>e.options.eventEmitter,oU=e=>e.rootProps.baseValue,Ro={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Pp={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Ac={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},rb=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function nb(e,t,i){if(i!=="auto")return i;if(e!=null)return Nc(e,t)?"category":"number"}function HM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function px(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HM(Object(i),!0).forEach(function(l){sU(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HM(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function sU(e,t,i){return(t=lU(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function lU(e){var t=uU(e,"string");return typeof t=="symbol"?t:t+""}function uU(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WM={allowDataOverflow:Pp.allowDataOverflow,allowDecimals:Pp.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Pp.angleAxisId,includeHidden:!1,name:void 0,reversed:Pp.reversed,scale:Pp.scale,tick:Pp.tick,tickCount:void 0,ticks:void 0,type:Pp.type,unit:void 0},XM={allowDataOverflow:Ac.allowDataOverflow,allowDecimals:Ac.allowDecimals,allowDuplicatedCategory:Ac.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ac.radiusAxisId,includeHidden:Ac.includeHidden,name:void 0,reversed:Ac.reversed,scale:Ac.scale,tick:Ac.tick,tickCount:Ac.tickCount,ticks:void 0,type:Ac.type,unit:void 0},cU=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},TS=ht([cU,xO],(e,t)=>{var i;if(e!=null)return e;var l=(i=nb(t,"angleAxis",WM.type))!==null&&i!==void 0?i:"category";return px(px({},WM),{},{type:l})}),hU=(e,t)=>e.polarAxis.radiusAxis[t],ES=ht([hU,xO],(e,t)=>{var i;if(e!=null)return e;var l=(i=nb(t,"radiusAxis",XM.type))!==null&&i!==void 0?i:"category";return px(px({},XM),{},{type:l})}),ib=e=>e.polarOptions,AS=ht([rf,nf,$a],sF),OI=ht([ib,AS],(e,t)=>{if(e!=null)return gd(e.innerRadius,t,0)}),II=ht([ib,AS],(e,t)=>{if(e!=null)return gd(e.outerRadius,t,t*.8)}),fU=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:i}=e;return[t,i]},zI=ht([ib],fU);ht([TS,zI],rb);var kI=ht([AS,OI,II],(e,t,i)=>{if(!(e==null||t==null||i==null))return[t,i]});ht([ES,kI],rb);var RI=ht([ti,ib,OI,II,rf,nf],(e,t,i,l,m,v)=>{if(!(e!=="centric"&&e!=="radial"||t==null||i==null||l==null)){var{cx:_,cy:c,startAngle:M,endAngle:P}=t;return{cx:gd(_,m,m/2),cy:gd(c,v,v/2),innerRadius:i,outerRadius:l,startAngle:M,endAngle:P,clockWise:!1}}}),ma=(e,t)=>t,ab=(e,t,i)=>i;function MS(e){return e?.id}function LI(e,t,i){var{chartData:l=[]}=t,{allowDuplicatedCategory:m,dataKey:v}=i,_=new Map;return e.forEach(c=>{var M,P=(M=c.data)!==null&&M!==void 0?M:l;if(!(P==null||P.length===0)){var D=MS(c);P.forEach((z,F)=>{var $=v==null||m?F:String(Ga(z,v,null)),Y=Ga(z,c.dataKey,0),K;_.has($)?K=_.get($):K={},Object.assign(K,{[D]:Y}),_.set($,K)})}}),Array.from(_.values())}function CS(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var ob=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function sb(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function dU(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return!1}var ga=e=>{var t=ti(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Wg=e=>e.tooltip.settings.axisId;function pU(e){if(e in fv)return fv[e]();var t="scale".concat(k2(e));if(t in fv)return fv[t]()}function YM(e){var t=e.ticks,i=e.bandwidth,l=e.range(),m=[Math.min(...l),Math.max(...l)];return{domain:()=>e.domain(),range:(function(v){function _(){return v.apply(this,arguments)}return _.toString=function(){return v.toString()},_})(()=>m),rangeMin:()=>m[0],rangeMax:()=>m[1],isInRange(v){var _=m[0],c=m[1];return _<=c?v>=_&&v<=c:v>=c&&v<=_},bandwidth:i?()=>i.call(e):void 0,ticks:t?v=>t.call(e,v):void 0,map:(v,_)=>{var c=e(v);if(c!=null){if(e.bandwidth&&_!==null&&_!==void 0&&_.position){var M=e.bandwidth();switch(_.position){case"middle":c+=M/2;break;case"end":c+=M;break}}return c}}}}function KM(e,t,i){if(typeof e=="function")return YM(e.copy().domain(t).range(i));if(e!=null){var l=pU(e);if(l!=null)return l.domain(t).range(i),YM(l)}}var mU=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Qh(t)){for(var i,l,m=0;m<t.length;m++){var v=t[m];Br(v)&&((i===void 0||v<i)&&(i=v),(l===void 0||v>l)&&(l=v))}return i!==void 0&&l!==void 0?[i,l]:void 0}return t}default:return t}};function QM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function mx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QM(Object(i),!0).forEach(function(l){gU(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QM(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function gU(e,t,i){return(t=yU(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yU(e){var t=vU(e,"string");return typeof t=="symbol"?t:t+""}function vU(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a2=[0,"auto"],ua={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},jI=(e,t)=>e.cartesianAxis.xAxis[t],sf=(e,t)=>{var i=jI(e,t);return i??ua},ca={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:a2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Uv},NI=(e,t)=>e.cartesianAxis.yAxis[t],lf=(e,t)=>{var i=NI(e,t);return i??ca},_U={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},PS=(e,t)=>{var i=e.cartesianAxis.zAxis[t];return i??_U},jo=(e,t,i)=>{switch(t){case"xAxis":return sf(e,i);case"yAxis":return lf(e,i);case"zAxis":return PS(e,i);case"angleAxis":return TS(e,i);case"radiusAxis":return ES(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},xU=(e,t,i)=>{switch(t){case"xAxis":return sf(e,i);case"yAxis":return lf(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},Xv=(e,t,i)=>{switch(t){case"xAxis":return sf(e,i);case"yAxis":return lf(e,i);case"angleAxis":return TS(e,i);case"radiusAxis":return ES(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},BI=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function FI(e,t){return i=>{switch(e){case"xAxis":return"xAxisId"in i&&i.xAxisId===t;case"yAxis":return"yAxisId"in i&&i.yAxisId===t;case"zAxis":return"zAxisId"in i&&i.zAxisId===t;case"angleAxis":return"angleAxisId"in i&&i.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in i&&i.radiusAxisId===t;default:return!1}}}var UI=e=>e.graphicalItems.cartesianItems,bU=ht([ma,ab],FI),VI=(e,t,i)=>e.filter(i).filter(l=>t?.includeHidden===!0?!0:!l.hide),Yv=ht([UI,jo,bU],VI,{memoizeOptions:{resultEqualityCheck:sb}}),qI=ht([Yv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(CS)),GI=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),wU=ht([Yv],GI),$I=e=>e.map(t=>t.data).filter(Boolean).flat(1),SU=ht([Yv],$I,{memoizeOptions:{resultEqualityCheck:sb}}),ZI=(e,t)=>{var{chartData:i=[],dataStartIndex:l,dataEndIndex:m}=t;return e.length>0?e:i.slice(l,m+1)},DS=ht([SU,yI],ZI),HI=(e,t,i)=>t?.dataKey!=null?e.map(l=>({value:Ga(l,t.dataKey)})):i.length>0?i.map(l=>l.dataKey).flatMap(l=>e.map(m=>({value:Ga(m,l)}))):e.map(l=>({value:l})),lb=ht([DS,jo,Yv],HI);function WI(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function P0(e){if(Rc(e)||e instanceof Date){var t=Number(e);if(Br(t))return t}}function JM(e){if(Array.isArray(e)){var t=[P0(e[0]),P0(e[1])];return Qh(t)?t:void 0}var i=P0(e);if(i!=null)return[i,i]}function Jh(e){return e.map(P0).filter(fs)}function TU(e,t,i){return!i||typeof t!="number"||kc(t)?[]:i.length?Jh(i.flatMap(l=>{var m=Ga(e,l.dataKey),v,_;if(Array.isArray(m)?[v,_]=m:v=_=m,!(!Br(v)||!Br(_)))return[t-v,t+_]})):[]}var Hi=e=>{var t=ga(e),i=Wg(e);return Xv(e,t,i)},Kv=ht([Hi],e=>e?.dataKey),EU=ht([qI,yI,Hi],LI),XI=(e,t,i,l)=>{var m={},v=t.reduce((_,c)=>{if(c.stackId==null)return _;var M=_[c.stackId];return M==null&&(M=[]),M.push(c),_[c.stackId]=M,_},m);return Object.fromEntries(Object.entries(v).map(_=>{var[c,M]=_,P=l?[...M].reverse():M,D=P.map(MS);return[c,{stackedData:KN(e,D,i),graphicalItems:P}]}))},YI=ht([EU,qI,tb,PI],XI),KI=(e,t,i,l)=>{var{dataStartIndex:m,dataEndIndex:v}=t;if(l==null&&i!=="zAxis"){var _=tB(e,m,v);if(!(_!=null&&_[0]===0&&_[1]===0))return _}},AU=ht([jo],e=>e.allowDataOverflow),OS=e=>{var t;if(e==null||!("domain"in e))return a2;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var i=Jh(e.ticks);return[Math.min(...i),Math.max(...i)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:a2},QI=ht([jo],OS),JI=ht([QI,AU],vI),MU=ht([YI,of,ma,JI],KI,{memoizeOptions:{resultEqualityCheck:ob}}),IS=e=>e.errorBars,CU=(e,t,i)=>e.flatMap(l=>t[l.id]).filter(Boolean).filter(l=>WI(i,l)),gx=function(){for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];var m=i.filter(Boolean);if(m.length!==0){var v=m.flat(),_=Math.min(...v),c=Math.max(...v);return[_,c]}},ez=(e,t,i,l,m)=>{var v,_;if(i.length>0&&e.forEach(c=>{i.forEach(M=>{var P,D,z=(P=l[M.id])===null||P===void 0?void 0:P.filter(he=>WI(m,he)),F=Ga(c,(D=t.dataKey)!==null&&D!==void 0?D:M.dataKey),$=TU(c,F,z);if($.length>=2){var Y=Math.min(...$),K=Math.max(...$);(v==null||Y<v)&&(v=Y),(_==null||K>_)&&(_=K)}var q=JM(F);q!=null&&(v=v==null?q[0]:Math.min(v,q[0]),_=_==null?q[1]:Math.max(_,q[1]))})}),t?.dataKey!=null&&e.forEach(c=>{var M=JM(Ga(c,t.dataKey));M!=null&&(v=v==null?M[0]:Math.min(v,M[0]),_=_==null?M[1]:Math.max(_,M[1]))}),Br(v)&&Br(_))return[v,_]},PU=ht([DS,jo,wU,IS,ma],ez,{memoizeOptions:{resultEqualityCheck:ob}});function DU(e){var{value:t}=e;if(Rc(t)||t instanceof Date)return t}var OU=(e,t,i)=>{var l=e.map(DU).filter(m=>m!=null);return i&&(t.dataKey==null||t.allowDuplicatedCategory&&vD(l))?LO(0,e.length):t.allowDuplicatedCategory?l:Array.from(new Set(l))},tz=e=>e.referenceElements.dots,Xg=(e,t,i)=>e.filter(l=>l.ifOverflow==="extendDomain").filter(l=>t==="xAxis"?l.xAxisId===i:l.yAxisId===i),IU=ht([tz,ma,ab],Xg),rz=e=>e.referenceElements.areas,zU=ht([rz,ma,ab],Xg),nz=e=>e.referenceElements.lines,kU=ht([nz,ma,ab],Xg),iz=(e,t)=>{if(e!=null){var i=Jh(e.map(l=>t==="xAxis"?l.x:l.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},RU=ht(IU,ma,iz),az=(e,t)=>{if(e!=null){var i=Jh(e.flatMap(l=>[t==="xAxis"?l.x1:l.y1,t==="xAxis"?l.x2:l.y2]));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},LU=ht([zU,ma],az);function jU(e){var t;if(e.x!=null)return Jh([e.x]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(l=>l.x);return i==null||i.length===0?[]:Jh(i)}function NU(e){var t;if(e.y!=null)return Jh([e.y]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(l=>l.y);return i==null||i.length===0?[]:Jh(i)}var oz=(e,t)=>{if(e!=null){var i=e.flatMap(l=>t==="xAxis"?jU(l):NU(l));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},BU=ht([kU,ma],oz),FU=ht(RU,BU,LU,(e,t,i)=>gx(e,i,t)),sz=(e,t,i,l,m,v,_,c)=>{if(i!=null)return i;var M=_==="vertical"&&c==="xAxis"||_==="horizontal"&&c==="yAxis",P=M?gx(l,v,m):gx(v,m);return Q8(t,P,e.allowDataOverflow)},UU=ht([jo,QI,JI,MU,PU,FU,ti,ma],sz,{memoizeOptions:{resultEqualityCheck:ob}}),VU=[0,1],lz=(e,t,i,l,m,v,_)=>{if(!((e==null||i==null||i.length===0)&&_===void 0)){var{dataKey:c,type:M}=e,P=Nc(t,v);if(P&&c==null){var D;return LO(0,(D=i?.length)!==null&&D!==void 0?D:0)}return M==="category"?OU(l,e,P):m==="expand"?VU:_}},zS=ht([jo,ti,DS,lb,tb,ma,UU],lz);function qU(e){return e in fv}var uz=(e,t,i)=>{if(e!=null){var{scale:l,type:m}=e;if(l==="auto")return m==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!t)?"point":m==="category"?"band":"linear";if(typeof l=="string"){var v="scale".concat(k2(l));return qU(v)?v:"point"}}},Yg=ht([jo,BI,bS],uz);function kS(e,t,i,l){if(!(i==null||l==null))return typeof e.scale=="function"?KM(e.scale,i,l):KM(t,i,l)}var cz=(e,t,i)=>{var l=OS(t);if(!(i!=="auto"&&i!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(l)&&(l[0]==="auto"||l[1]==="auto")&&Qh(e))return nU(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Qh(e))return iU(e,t.tickCount,t.allowDecimals)}},RS=ht([zS,Xv,Yg],cz),hz=(e,t,i,l)=>{if(l!=="angleAxis"&&e?.type==="number"&&Qh(t)&&Array.isArray(i)&&i.length>0){var m,v,_=t[0],c=(m=i[0])!==null&&m!==void 0?m:0,M=t[1],P=(v=i[i.length-1])!==null&&v!==void 0?v:0;return[Math.min(_,c),Math.max(M,P)]}return t},GU=ht([jo,zS,RS,ma],hz),$U=ht(lb,jo,(e,t)=>{if(!(!t||t.type!=="number")){var i=1/0,l=Array.from(Jh(e.map(z=>z.value))).sort((z,F)=>z-F),m=l[0],v=l[l.length-1];if(m==null||v==null)return 1/0;var _=v-m;if(_===0)return 1/0;for(var c=0;c<l.length-1;c++){var M=l[c],P=l[c+1];if(!(M==null||P==null)){var D=P-M;i=Math.min(i,D)}}return i/_}}),fz=ht($U,ti,aU,$a,(e,t,i,l,m)=>m,(e,t,i,l,m)=>{if(!Br(e))return 0;var v=t==="vertical"?l.height:l.width;if(m==="gap")return e*v/2;if(m==="no-gap"){var _=gd(i,e*v),c=e*v/2;return c-_-(c-_)/v*_}return 0}),ZU=(e,t,i)=>{var l=sf(e,t);return l==null||typeof l.padding!="string"?0:fz(e,"xAxis",t,i,l.padding)},HU=(e,t,i)=>{var l=lf(e,t);return l==null||typeof l.padding!="string"?0:fz(e,"yAxis",t,i,l.padding)},WU=ht(sf,ZU,(e,t)=>{var i,l;if(e==null)return{left:0,right:0};var{padding:m}=e;return typeof m=="string"?{left:t,right:t}:{left:((i=m.left)!==null&&i!==void 0?i:0)+t,right:((l=m.right)!==null&&l!==void 0?l:0)+t}}),XU=ht(lf,HU,(e,t)=>{var i,l;if(e==null)return{top:0,bottom:0};var{padding:m}=e;return typeof m=="string"?{top:t,bottom:t}:{top:((i=m.top)!==null&&i!==void 0?i:0)+t,bottom:((l=m.bottom)!==null&&l!==void 0?l:0)+t}}),YU=ht([$a,WU,Gx,qx,(e,t,i)=>i],(e,t,i,l,m)=>{var{padding:v}=l;return m?[v.left,i.width-v.right]:[e.left+t.left,e.left+e.width-t.right]}),KU=ht([$a,ti,XU,Gx,qx,(e,t,i)=>i],(e,t,i,l,m,v)=>{var{padding:_}=m;return v?[l.height-_.bottom,_.top]:t==="horizontal"?[e.top+e.height-i.bottom,e.top+i.top]:[e.top+i.top,e.top+e.height-i.bottom]}),Qv=(e,t,i,l)=>{var m;switch(t){case"xAxis":return YU(e,i,l);case"yAxis":return KU(e,i,l);case"zAxis":return(m=PS(e,i))===null||m===void 0?void 0:m.range;case"angleAxis":return zI(e);case"radiusAxis":return kI(e,i);default:return}},dz=ht([jo,Qv],rb),QU=ht([Yg,GU],mU),ub=ht([jo,Yg,QU,dz],kS);ht([Yv,IS,ma],CU);function pz(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var cb=(e,t)=>t,hb=(e,t,i)=>i,JU=ht(Ux,cb,hb,(e,t,i)=>e.filter(l=>l.orientation===t).filter(l=>l.mirror===i).sort(pz)),eV=ht(Vx,cb,hb,(e,t,i)=>e.filter(l=>l.orientation===t).filter(l=>l.mirror===i).sort(pz)),mz=(e,t)=>({width:e.width,height:t.height}),tV=(e,t)=>{var i=typeof t.width=="number"?t.width:Uv;return{width:i,height:e.height}},rV=ht($a,sf,mz),nV=(e,t,i)=>{switch(t){case"top":return e.top;case"bottom":return i-e.bottom;default:return 0}},iV=(e,t,i)=>{switch(t){case"left":return e.left;case"right":return i-e.right;default:return 0}},aV=ht(nf,$a,JU,cb,hb,(e,t,i,l,m)=>{var v={},_;return i.forEach(c=>{var M=mz(t,c);_==null&&(_=nV(t,l,e));var P=l==="top"&&!m||l==="bottom"&&m;v[c.id]=_-Number(P)*M.height,_+=(P?-1:1)*M.height}),v}),oV=ht(rf,$a,eV,cb,hb,(e,t,i,l,m)=>{var v={},_;return i.forEach(c=>{var M=tV(t,c);_==null&&(_=iV(t,l,e));var P=l==="left"&&!m||l==="right"&&m;v[c.id]=_-Number(P)*M.width,_+=(P?-1:1)*M.width}),v}),sV=(e,t)=>{var i=sf(e,t);if(i!=null)return aV(e,i.orientation,i.mirror)},lV=ht([$a,sf,sV,(e,t)=>t],(e,t,i,l)=>{if(t!=null){var m=i?.[l];return m==null?{x:e.left,y:0}:{x:e.left,y:m}}}),uV=(e,t)=>{var i=lf(e,t);if(i!=null)return oV(e,i.orientation,i.mirror)},cV=ht([$a,lf,uV,(e,t)=>t],(e,t,i,l)=>{if(t!=null){var m=i?.[l];return m==null?{x:0,y:e.top}:{x:m,y:e.top}}}),hV=ht($a,lf,(e,t)=>{var i=typeof t.width=="number"?t.width:Uv;return{width:i,height:e.height}}),gz=(e,t,i,l)=>{if(i!=null){var{allowDuplicatedCategory:m,type:v,dataKey:_}=i,c=Nc(e,l),M=t.map(P=>P.value);if(_&&c&&v==="category"&&m&&vD(M))return M}},LS=ht([ti,lb,jo,ma],gz),yz=(e,t,i,l)=>{if(!(i==null||i.dataKey==null)){var{type:m,scale:v}=i,_=Nc(e,l);if(_&&(m==="number"||v!=="auto"))return t.map(c=>c.value)}},jS=ht([ti,lb,Xv,ma],yz),eC=ht([ti,xU,Yg,ub,LS,jS,Qv,RS,ma],(e,t,i,l,m,v,_,c,M)=>{if(t!=null){var P=Nc(e,M);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:M,categoricalDomain:v,duplicateDomain:m,isCategorical:P,niceTicks:c,range:_,realScaleType:i,scale:l}}}),fV=(e,t,i,l,m,v,_,c,M)=>{if(!(t==null||l==null)){var P=Nc(e,M),{type:D,ticks:z,tickCount:F}=t,$=i==="scaleBand"&&typeof l.bandwidth=="function"?l.bandwidth()/2:2,Y=D==="category"&&l.bandwidth?l.bandwidth()/$:0;Y=M==="angleAxis"&&v!=null&&v.length>=2?Il(v[0]-v[1])*2*Y:Y;var K=z||m;return K?K.map((q,he)=>{var ye=_?_.indexOf(q):q,ge=l.map(ye);return Br(ge)?{index:he,coordinate:ge+Y,value:q,offset:Y}:null}).filter(fs):P&&c?c.map((q,he)=>{var ye=l.map(q);return Br(ye)?{coordinate:ye+Y,value:q,index:he,offset:Y}:null}).filter(fs):l.ticks?l.ticks(F).map((q,he)=>{var ye=l.map(q);return Br(ye)?{coordinate:ye+Y,value:q,index:he,offset:Y}:null}).filter(fs):l.domain().map((q,he)=>{var ye=l.map(q);return Br(ye)?{coordinate:ye+Y,value:_?_[q]:q,index:he,offset:Y}:null}).filter(fs)}},vz=ht([ti,Xv,Yg,ub,RS,Qv,LS,jS,ma],fV),dV=(e,t,i,l,m,v,_)=>{if(!(t==null||i==null||l==null||l[0]===l[1])){var c=Nc(e,_),{tickCount:M}=t,P=0;return P=_==="angleAxis"&&l?.length>=2?Il(l[0]-l[1])*2*P:P,c&&v?v.map((D,z)=>{var F=i.map(D);return Br(F)?{coordinate:F+P,value:D,index:z,offset:P}:null}).filter(fs):i.ticks?i.ticks(M).map((D,z)=>{var F=i.map(D);return Br(F)?{coordinate:F+P,value:D,index:z,offset:P}:null}).filter(fs):i.domain().map((D,z)=>{var F=i.map(D);return Br(F)?{coordinate:F+P,value:m?m[D]:D,index:z,offset:P}:null}).filter(fs)}},_z=ht([ti,Xv,ub,Qv,LS,jS,ma],dV),xz=ht(jo,ub,(e,t)=>{if(!(e==null||t==null))return mx(mx({},e),{},{scale:t})}),pV=ht([jo,Yg,zS,dz],kS);ht((e,t,i)=>PS(e,i),pV,(e,t)=>{if(!(e==null||t==null))return mx(mx({},e),{},{scale:t})});var mV=ht([ti,Ux,Vx],(e,t,i)=>{switch(e){case"horizontal":return t.some(l=>l.reversed)?"right-to-left":"left-to-right";case"vertical":return i.some(l=>l.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),bz=e=>e.options.defaultTooltipEventType,wz=e=>e.options.validateTooltipEventTypes;function Sz(e,t,i){if(e==null)return t;var l=e?"axis":"item";return i==null?t:i.includes(l)?l:t}function NS(e,t){var i=bz(e),l=wz(e);return Sz(t,i,l)}function gV(e){return dr(t=>NS(t,e))}var Tz=(e,t)=>{var i,l=Number(t);if(!(kc(l)||t==null))return l>=0?e==null||(i=e[l])===null||i===void 0?void 0:i.value:void 0},yV=e=>e.tooltip.settings,hd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},vV={itemInteraction:{click:hd,hover:hd},axisInteraction:{click:hd,hover:hd},keyboardInteraction:hd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Ez=ms({name:"tooltip",initialState:vV,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Jn()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:i,next:l}=t.payload,m=ku(e).tooltipItemPayloads.indexOf(i);m>-1&&(e.tooltipItemPayloads[m]=l)},prepare:Jn()},removeTooltipEntrySettings:{reducer(e,t){var i=ku(e).tooltipItemPayloads.indexOf(t.payload);i>-1&&e.tooltipItemPayloads.splice(i,1)},prepare:Jn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:_V,replaceTooltipEntrySettings:xV,removeTooltipEntrySettings:bV,setTooltipSettingsState:wV,setActiveMouseOverItemIndex:SV,mouseLeaveItem:JH,mouseLeaveChart:Az,setActiveClickItemIndex:eW,setMouseOverAxisIndex:Mz,setMouseClickAxisIndex:TV,setSyncInteraction:o2,setKeyboardInteraction:s2}=Ez.actions,EV=Ez.reducer;function tC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function v0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(i),!0).forEach(function(l){AV(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function AV(e,t,i){return(t=MV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function MV(e){var t=CV(e,"string");return typeof t=="symbol"?t:t+""}function CV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PV(e,t,i){return t==="axis"?i==="click"?e.axisInteraction.click:e.axisInteraction.hover:i==="click"?e.itemInteraction.click:e.itemInteraction.hover}function DV(e){return e.index!=null}var Cz=(e,t,i,l)=>{if(t==null)return hd;var m=PV(e,t,i);if(m==null)return hd;if(m.active)return m;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var v=e.settings.active===!0;if(DV(m)){if(v)return v0(v0({},m),{},{active:!0})}else if(l!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:l,graphicalItemId:void 0};return v0(v0({},hd),{},{coordinate:m.coordinate})};function OV(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var i=Number(e);return Number.isFinite(i)?i:void 0}function IV(e,t){var i=OV(e),l=t[0],m=t[1];if(i===void 0)return!1;var v=Math.min(l,m),_=Math.max(l,m);return i>=v&&i<=_}function zV(e,t,i){if(i==null||t==null)return!0;var l=Ga(e,t);return l==null||!Qh(i)?!0:IV(l,i)}var BS=(e,t,i,l)=>{var m=e?.index;if(m==null)return null;var v=Number(m);if(!Br(v))return m;var _=0,c=1/0;t.length>0&&(c=t.length-1);var M=Math.max(_,Math.min(v,c)),P=t[M];return P==null||zV(P,i,l)?String(M):null},Pz=(e,t,i,l,m,v,_)=>{if(v!=null){var c=_[0],M=c?.getPosition(v);if(M!=null)return M;var P=m?.[Number(v)];if(P)return i==="horizontal"?{x:P.coordinate,y:(l.top+t)/2}:{x:(l.left+e)/2,y:P.coordinate}}},Dz=(e,t,i,l)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var m;if(i==="hover"?m=e.itemInteraction.hover.graphicalItemId:m=e.itemInteraction.click.graphicalItemId,m==null&&l!=null){var v=e.tooltipItemPayloads[0];return v!=null?[v]:[]}return e.tooltipItemPayloads.filter(_=>{var c;return((c=_.settings)===null||c===void 0?void 0:c.graphicalItemId)===m})},Oz=e=>e.options.tooltipPayloadSearcher,Kg=e=>e.tooltip;function rC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function nC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(i),!0).forEach(function(l){kV(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function kV(e,t,i){return(t=RV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function RV(e){var t=LV(e,"string");return typeof t=="symbol"?t:t+""}function LV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jV(e,t){return e??t}var Iz=(e,t,i,l,m,v,_)=>{if(!(t==null||v==null)){var{chartData:c,computedData:M,dataStartIndex:P,dataEndIndex:D}=i,z=[];return e.reduce((F,$)=>{var Y,{dataDefinedOnItem:K,settings:q}=$,he=jV(K,c),ye=Array.isArray(he)?lO(he,P,D):he,ge=(Y=q?.dataKey)!==null&&Y!==void 0?Y:l,Te=q?.nameKey,ke;if(l&&Array.isArray(ye)&&!Array.isArray(ye[0])&&_==="axis"?ke=_D(ye,l,m):ke=v(ye,t,M,Te),Array.isArray(ke))ke.forEach(Re=>{var ot=nC(nC({},q),{},{name:Re.name,unit:Re.unit,color:void 0,fill:void 0});F.push(iA({tooltipEntrySettings:ot,dataKey:Re.dataKey,payload:Re.payload,value:Ga(Re.payload,Re.dataKey),name:Re.name}))});else{var Pe;F.push(iA({tooltipEntrySettings:q,dataKey:ge,payload:ke,value:Ga(ke,ge),name:(Pe=Ga(ke,Te))!==null&&Pe!==void 0?Pe:q?.name}))}return F},z)}},FS=ht([Hi,BI,bS],uz),NV=ht([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),BV=ht([ga,Wg],FI),Qg=ht([NV,Hi,BV],VI,{memoizeOptions:{resultEqualityCheck:sb}}),FV=ht([Qg],e=>e.filter(CS)),UV=ht([Qg],$I,{memoizeOptions:{resultEqualityCheck:sb}}),Jg=ht([UV,of],ZI),VV=ht([FV,of,Hi],LI),US=ht([Jg,Hi,Qg],HI),zz=ht([Hi],OS),qV=ht([Hi],e=>e.allowDataOverflow),kz=ht([zz,qV],vI),GV=ht([Qg],e=>e.filter(CS)),$V=ht([VV,GV,tb,PI],XI),ZV=ht([$V,of,ga,kz],KI),HV=ht([Qg],GI),WV=ht([Jg,Hi,HV,IS,ga],ez,{memoizeOptions:{resultEqualityCheck:ob}}),XV=ht([tz,ga,Wg],Xg),YV=ht([XV,ga],iz),KV=ht([rz,ga,Wg],Xg),QV=ht([KV,ga],az),JV=ht([nz,ga,Wg],Xg),eq=ht([JV,ga],oz),tq=ht([YV,eq,QV],gx),rq=ht([Hi,zz,kz,ZV,WV,tq,ti,ga],sz),Jv=ht([Hi,ti,Jg,US,tb,ga,rq],lz),nq=ht([Jv,Hi,FS],cz),iq=ht([Hi,Jv,nq,ga],hz),Rz=e=>{var t=ga(e),i=Wg(e),l=!1;return Qv(e,t,i,l)},Lz=ht([Hi,Rz],rb),jz=ht([Hi,FS,iq,Lz],kS),aq=ht([ti,US,Hi,ga],gz),oq=ht([ti,US,Hi,ga],yz),sq=(e,t,i,l,m,v,_,c)=>{if(t){var{type:M}=t,P=Nc(e,c);if(l){var D=i==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,z=M==="category"&&l.bandwidth?l.bandwidth()/D:0;return z=c==="angleAxis"&&m!=null&&m?.length>=2?Il(m[0]-m[1])*2*z:z,P&&_?_.map((F,$)=>{var Y=l.map(F);return Br(Y)?{coordinate:Y+z,value:F,index:$,offset:z}:null}).filter(fs):l.domain().map((F,$)=>{var Y=l.map(F);return Br(Y)?{coordinate:Y+z,value:v?v[F]:F,index:$,offset:z}:null}).filter(fs)}}},uf=ht([ti,Hi,FS,jz,Rz,aq,oq,ga],sq),VS=ht([bz,wz,yV],(e,t,i)=>Sz(i.shared,e,t)),Nz=e=>e.tooltip.settings.trigger,qS=e=>e.tooltip.settings.defaultIndex,e_=ht([Kg,VS,Nz,qS],Cz),Iv=ht([e_,Jg,Kv,Jv],BS),Bz=ht([uf,Iv],Tz),lq=ht([e_],e=>{if(e)return e.dataKey});ht([e_],e=>{if(e)return e.graphicalItemId});var Fz=ht([Kg,VS,Nz,qS],Dz),uq=ht([rf,nf,ti,$a,uf,qS,Fz],Pz),cq=ht([e_,uq],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),hq=ht([e_],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),fq=ht([Fz,Iv,of,Kv,Bz,Oz,VS],Iz),dq=ht([fq],e=>{if(e!=null){var t=e.map(i=>i.payload).filter(i=>i!=null);return Array.from(new Set(t))}});function iC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function aC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(i),!0).forEach(function(l){pq(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function pq(e,t,i){return(t=mq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mq(e){var t=gq(e,"string");return typeof t=="symbol"?t:t+""}function gq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yq=()=>dr(Hi),vq=()=>{var e=yq(),t=dr(uf),i=dr(jz);return H0(!e||!i?void 0:aC(aC({},e),{},{scale:i}),t)};function oC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function wg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(i),!0).forEach(function(l){_q(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function _q(e,t,i){return(t=xq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function xq(e){var t=bq(e,"string");return typeof t=="symbol"?t:t+""}function bq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wq=(e,t,i,l)=>{var m=t.find(v=>v&&v.index===i);if(m){if(e==="horizontal")return{x:m.coordinate,y:l.chartY};if(e==="vertical")return{x:l.chartX,y:m.coordinate}}return{x:0,y:0}},Sq=(e,t,i,l)=>{var m=t.find(P=>P&&P.index===i);if(m){if(e==="centric"){var v=m.coordinate,{radius:_}=l;return wg(wg(wg({},l),qa(l.cx,l.cy,_,v)),{},{angle:v,radius:_})}var c=m.coordinate,{angle:M}=l;return wg(wg(wg({},l),qa(l.cx,l.cy,c,M)),{},{angle:M,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Tq(e,t){var{chartX:i,chartY:l}=e;return i>=t.left&&i<=t.left+t.width&&l>=t.top&&l<=t.top+t.height}var Uz=(e,t,i,l,m)=>{var v,_=(v=t?.length)!==null&&v!==void 0?v:0;if(_<=1||e==null)return 0;if(l==="angleAxis"&&m!=null&&Math.abs(Math.abs(m[1]-m[0])-360)<=1e-6)for(var c=0;c<_;c++){var M,P,D,z,F,$=c>0?(M=i[c-1])===null||M===void 0?void 0:M.coordinate:(P=i[_-1])===null||P===void 0?void 0:P.coordinate,Y=(D=i[c])===null||D===void 0?void 0:D.coordinate,K=c>=_-1?(z=i[0])===null||z===void 0?void 0:z.coordinate:(F=i[c+1])===null||F===void 0?void 0:F.coordinate,q=void 0;if(!($==null||Y==null||K==null))if(Il(Y-$)!==Il(K-Y)){var he=[];if(Il(K-Y)===Il(m[1]-m[0])){q=K;var ye=Y+m[1]-m[0];he[0]=Math.min(ye,(ye+$)/2),he[1]=Math.max(ye,(ye+$)/2)}else{q=$;var ge=K+m[1]-m[0];he[0]=Math.min(Y,(ge+Y)/2),he[1]=Math.max(Y,(ge+Y)/2)}var Te=[Math.min(Y,(q+Y)/2),Math.max(Y,(q+Y)/2)];if(e>Te[0]&&e<=Te[1]||e>=he[0]&&e<=he[1]){var ke;return(ke=i[c])===null||ke===void 0?void 0:ke.index}}else{var Pe=Math.min($,K),Re=Math.max($,K);if(e>(Pe+Y)/2&&e<=(Re+Y)/2){var ot;return(ot=i[c])===null||ot===void 0?void 0:ot.index}}}else if(t)for(var bt=0;bt<_;bt++){var kt=t[bt];if(kt!=null){var We=t[bt+1],Ve=t[bt-1];if(bt===0&&We!=null&&e<=(kt.coordinate+We.coordinate)/2||bt===_-1&&Ve!=null&&e>(kt.coordinate+Ve.coordinate)/2||bt>0&&bt<_-1&&Ve!=null&&We!=null&&e>(kt.coordinate+Ve.coordinate)/2&&e<=(kt.coordinate+We.coordinate)/2)return kt.index}}return-1},Vz=()=>dr(bS),GS=(e,t)=>t,qz=(e,t,i)=>i,$S=(e,t,i,l)=>l,Eq=ht(uf,e=>Ox(e,t=>t.coordinate)),ZS=ht([Kg,GS,qz,$S],Cz),HS=ht([ZS,Jg,Kv,Jv],BS),Aq=(e,t,i)=>{if(t!=null){var l=Kg(e);return t==="axis"?i==="hover"?l.axisInteraction.hover.dataKey:l.axisInteraction.click.dataKey:i==="hover"?l.itemInteraction.hover.dataKey:l.itemInteraction.click.dataKey}},Gz=ht([Kg,GS,qz,$S],Dz),yx=ht([rf,nf,ti,$a,uf,$S,Gz],Pz),Mq=ht([ZS,yx],(e,t)=>{var i;return(i=e.coordinate)!==null&&i!==void 0?i:t}),$z=ht([uf,HS],Tz),Cq=ht([Gz,HS,of,Kv,$z,Oz,GS],Iz),Pq=ht([ZS,HS],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Dq=(e,t,i,l,m,v,_)=>{if(!(!e||!i||!l||!m)&&Tq(e,_)){var c=rB(e,t),M=Uz(c,v,m,i,l),P=wq(t,m,M,e);return{activeIndex:String(M),activeCoordinate:P}}},Oq=(e,t,i,l,m,v,_)=>{if(!(!e||!l||!m||!v||!i)){var c=fF(e,i);if(c){var M=nB(c,t),P=Uz(M,_,v,l,m),D=Sq(t,v,P,c);return{activeIndex:String(P),activeCoordinate:D}}}},Iq=(e,t,i,l,m,v,_,c)=>{if(!(!e||!t||!l||!m||!v))return t==="horizontal"||t==="vertical"?Dq(e,t,l,m,v,_,c):Oq(e,t,i,l,m,v,_)},zq=ht(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,i)=>i,(e,t,i)=>{if(t!=null){var l=e[t];if(l!=null)return i?l.panoramaElement:l.element}}),kq=ht(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(l=>parseInt(l,10)).concat(Object.values(Ro)),i=Array.from(new Set(t));return i.sort((l,m)=>l-m)},{memoizeOptions:{resultEqualityCheck:dU}});function sC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function lC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(i),!0).forEach(function(l){Rq(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Rq(e,t,i){return(t=Lq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Lq(e){var t=jq(e,"string");return typeof t=="symbol"?t:t+""}function jq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nq={},Bq={zIndexMap:Object.values(Ro).reduce((e,t)=>lC(lC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Nq)},Fq=new Set(Object.values(Ro));function Uq(e){return Fq.has(e)}var Zz=ms({name:"zIndex",initialState:Bq,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]?e.zIndexMap[i].consumers+=1:e.zIndexMap[i]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Jn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(e.zIndexMap[i].consumers-=1,e.zIndexMap[i].consumers<=0&&!Uq(i)&&delete e.zIndexMap[i])},prepare:Jn()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i,element:l,isPanorama:m}=t.payload;e.zIndexMap[i]?m?e.zIndexMap[i].panoramaElement=l:e.zIndexMap[i].element=l:e.zIndexMap[i]={consumers:0,element:m?void 0:l,panoramaElement:m?l:void 0}},prepare:Jn()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(t.payload.isPanorama?e.zIndexMap[i].panoramaElement=void 0:e.zIndexMap[i].element=void 0)},prepare:Jn()}}}),{registerZIndexPortal:Vq,unregisterZIndexPortal:qq,registerZIndexPortalElement:Gq,unregisterZIndexPortalElement:$q}=Zz.actions,Zq=Zz.reducer;function cf(e){var{zIndex:t,children:i}=e,l=RB(),m=l&&t!==void 0&&t!==0,v=gs(),_=da();H.useLayoutEffect(()=>m?(_(Vq({zIndex:t})),()=>{_(qq({zIndex:t}))}):qg,[_,t,m]);var c=dr(M=>zq(M,t,v));return m?c?DP.createPortal(i,c):null:i}function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},l2.apply(null,arguments)}function uC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function _0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(i),!0).forEach(function(l){Hq(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Hq(e,t,i){return(t=Wq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Wq(e){var t=Xq(e,"string");return typeof t=="symbol"?t:t+""}function Xq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yq(e){var{cursor:t,cursorComp:i,cursorProps:l}=e;return H.isValidElement(t)?H.cloneElement(t,l):H.createElement(i,l)}function Kq(e){var t,{coordinate:i,payload:l,index:m,offset:v,tooltipAxisBandSize:_,layout:c,cursor:M,tooltipEventType:P,chartName:D}=e,z=i,F=l,$=m;if(!M||!z||D!=="ScatterChart"&&P!=="axis")return null;var Y,K,q;if(D==="ScatterChart")Y=z,K=S4,q=Ro.cursorLine;else if(D==="BarChart")Y=T4(c,z,v,_),K=rF,q=Ro.cursorRectangle;else if(c==="radial"&&xD(z)){var{cx:he,cy:ye,radius:ge,startAngle:Te,endAngle:ke}=kO(z);Y={cx:he,cy:ye,startAngle:Te,endAngle:ke,innerRadius:ge,outerRadius:ge},K=gF,q=Ro.cursorLine}else Y={points:yF(c,z,v)},K=C0,q=Ro.cursorLine;var Pe=typeof M=="object"&&"className"in M?M.className:void 0,Re=_0(_0(_0(_0({stroke:"#ccc",pointerEvents:"none"},v),Y),Mx(M)),{},{payload:F,payloadIndex:$,className:Xn("recharts-tooltip-cursor",Pe)});return H.createElement(cf,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:q},H.createElement(Yq,{cursor:M,cursorComp:K,cursorProps:Re}))}function Qq(e){var t=vq(),i=yO(),l=Gg(),m=Vz();return t==null||i==null||l==null||m==null?null:H.createElement(Kq,l2({},e,{offset:i,layout:l,tooltipAxisBandSize:t,chartName:m}))}var Hz=H.createContext(null),Jq=()=>H.useContext(Hz),ow={exports:{}},cC;function eG(){return cC||(cC=1,(function(e){var t=Object.prototype.hasOwnProperty,i="~";function l(){}Object.create&&(l.prototype=Object.create(null),new l().__proto__||(i=!1));function m(M,P,D){this.fn=M,this.context=P,this.once=D||!1}function v(M,P,D,z,F){if(typeof D!="function")throw new TypeError("The listener must be a function");var $=new m(D,z||M,F),Y=i?i+P:P;return M._events[Y]?M._events[Y].fn?M._events[Y]=[M._events[Y],$]:M._events[Y].push($):(M._events[Y]=$,M._eventsCount++),M}function _(M,P){--M._eventsCount===0?M._events=new l:delete M._events[P]}function c(){this._events=new l,this._eventsCount=0}c.prototype.eventNames=function(){var P=[],D,z;if(this._eventsCount===0)return P;for(z in D=this._events)t.call(D,z)&&P.push(i?z.slice(1):z);return Object.getOwnPropertySymbols?P.concat(Object.getOwnPropertySymbols(D)):P},c.prototype.listeners=function(P){var D=i?i+P:P,z=this._events[D];if(!z)return[];if(z.fn)return[z.fn];for(var F=0,$=z.length,Y=new Array($);F<$;F++)Y[F]=z[F].fn;return Y},c.prototype.listenerCount=function(P){var D=i?i+P:P,z=this._events[D];return z?z.fn?1:z.length:0},c.prototype.emit=function(P,D,z,F,$,Y){var K=i?i+P:P;if(!this._events[K])return!1;var q=this._events[K],he=arguments.length,ye,ge;if(q.fn){switch(q.once&&this.removeListener(P,q.fn,void 0,!0),he){case 1:return q.fn.call(q.context),!0;case 2:return q.fn.call(q.context,D),!0;case 3:return q.fn.call(q.context,D,z),!0;case 4:return q.fn.call(q.context,D,z,F),!0;case 5:return q.fn.call(q.context,D,z,F,$),!0;case 6:return q.fn.call(q.context,D,z,F,$,Y),!0}for(ge=1,ye=new Array(he-1);ge<he;ge++)ye[ge-1]=arguments[ge];q.fn.apply(q.context,ye)}else{var Te=q.length,ke;for(ge=0;ge<Te;ge++)switch(q[ge].once&&this.removeListener(P,q[ge].fn,void 0,!0),he){case 1:q[ge].fn.call(q[ge].context);break;case 2:q[ge].fn.call(q[ge].context,D);break;case 3:q[ge].fn.call(q[ge].context,D,z);break;case 4:q[ge].fn.call(q[ge].context,D,z,F);break;default:if(!ye)for(ke=1,ye=new Array(he-1);ke<he;ke++)ye[ke-1]=arguments[ke];q[ge].fn.apply(q[ge].context,ye)}}return!0},c.prototype.on=function(P,D,z){return v(this,P,D,z,!1)},c.prototype.once=function(P,D,z){return v(this,P,D,z,!0)},c.prototype.removeListener=function(P,D,z,F){var $=i?i+P:P;if(!this._events[$])return this;if(!D)return _(this,$),this;var Y=this._events[$];if(Y.fn)Y.fn===D&&(!F||Y.once)&&(!z||Y.context===z)&&_(this,$);else{for(var K=0,q=[],he=Y.length;K<he;K++)(Y[K].fn!==D||F&&!Y[K].once||z&&Y[K].context!==z)&&q.push(Y[K]);q.length?this._events[$]=q.length===1?q[0]:q:_(this,$)}return this},c.prototype.removeAllListeners=function(P){var D;return P?(D=i?i+P:P,this._events[D]&&_(this,D)):(this._events=new l,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c})(ow)),ow.exports}var tG=eG();const rG=ef(tG);var zv=new rG,u2="recharts.syncEvent.tooltip",hC="recharts.syncEvent.brush",nG=(e,t)=>{if(t&&Array.isArray(e)){var i=Number.parseInt(t,10);if(!kc(i))return e[i]}},iG={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},Wz=ms({name:"options",initialState:iG,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),aG=Wz.reducer,{createEventEmitter:oG}=Wz.actions;function sG(e){return e.tooltip.syncInteraction}var lG={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Xz=ms({name:"chartData",initialState:lG,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:i,endIndex:l}=t.payload;i!=null&&(e.dataStartIndex=i),l!=null&&(e.dataEndIndex=l)}}}),{setChartData:fC,setDataStartEndIndexes:uG,setComputedData:tW}=Xz.actions,cG=Xz.reducer,hG=["x","y"];function dC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function Sg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(i),!0).forEach(function(l){fG(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function fG(e,t,i){return(t=dG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function dG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mG(e,t){if(e==null)return{};var i,l,m=gG(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function gG(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function yG(){var e=dr(wS),t=dr(SS),i=da(),l=dr(DI),m=dr(uf),v=Gg(),_=$x(),c=dr(M=>M.rootProps.className);H.useEffect(()=>{if(e==null)return qg;var M=(P,D,z)=>{if(t!==z&&e===P){if(l==="index"){var F;if(_&&D!==null&&D!==void 0&&(F=D.payload)!==null&&F!==void 0&&F.coordinate&&D.payload.sourceViewBox){var $=D.payload.coordinate,{x:Y,y:K}=$,q=mG($,hG),{x:he,y:ye,width:ge,height:Te}=D.payload.sourceViewBox,ke=Sg(Sg({},q),{},{x:_.x+(ge?(Y-he)/ge:0)*_.width,y:_.y+(Te?(K-ye)/Te:0)*_.height});i(Sg(Sg({},D),{},{payload:Sg(Sg({},D.payload),{},{coordinate:ke})}))}else i(D);return}if(m!=null){var Pe;if(typeof l=="function"){var Re={activeTooltipIndex:D.payload.index==null?void 0:Number(D.payload.index),isTooltipActive:D.payload.active,activeIndex:D.payload.index==null?void 0:Number(D.payload.index),activeLabel:D.payload.label,activeDataKey:D.payload.dataKey,activeCoordinate:D.payload.coordinate},ot=l(m,Re);Pe=m[ot]}else l==="value"&&(Pe=m.find(Le=>String(Le.value)===D.payload.label));var{coordinate:bt}=D.payload;if(Pe==null||D.payload.active===!1||bt==null||_==null){i(o2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:kt,y:We}=bt,Ve=Math.min(kt,_.x+_.width),Ot=Math.min(We,_.y+_.height),Ue={x:v==="horizontal"?Pe.coordinate:Ve,y:v==="horizontal"?Ot:Pe.coordinate},Je=o2({active:D.payload.active,coordinate:Ue,dataKey:D.payload.dataKey,index:String(Pe.index),label:D.payload.label,sourceViewBox:D.payload.sourceViewBox,graphicalItemId:D.payload.graphicalItemId});i(Je)}}};return zv.on(u2,M),()=>{zv.off(u2,M)}},[c,i,t,e,l,m,v,_])}function vG(){var e=dr(wS),t=dr(SS),i=da();H.useEffect(()=>{if(e==null)return qg;var l=(m,v,_)=>{t!==_&&e===m&&i(uG(v))};return zv.on(hC,l),()=>{zv.off(hC,l)}},[i,t,e])}function _G(){var e=da();H.useEffect(()=>{e(oG())},[e]),yG(),vG()}function xG(e,t,i,l,m,v){var _=dr($=>Aq($,e,t)),c=dr(SS),M=dr(wS),P=dr(DI),D=dr(sG),z=D?.active,F=$x();H.useEffect(()=>{if(!z&&M!=null&&c!=null){var $=o2({active:v,coordinate:i,dataKey:_,index:m,label:typeof l=="number"?String(l):l,sourceViewBox:F,graphicalItemId:void 0});zv.emit(u2,M,$,c)}},[z,i,_,m,l,c,M,P,v,F])}function pC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function mC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(i),!0).forEach(function(l){bG(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function bG(e,t,i){return(t=wG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function wG(e){var t=SG(e,"string");return typeof t=="symbol"?t:t+""}function SG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TG(e){return e.dataKey}function EG(e,t){return H.isValidElement(e)?H.cloneElement(e,t):typeof e=="function"?H.createElement(e,t):H.createElement(r4,t)}var gC=[],AG={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function yC(e){var t,i,l=Xs(e,AG),{active:m,allowEscapeViewBox:v,animationDuration:_,animationEasing:c,content:M,filterNull:P,isAnimationActive:D,offset:z,payloadUniqBy:F,position:$,reverseDirection:Y,useTranslate3d:K,wrapperStyle:q,cursor:he,shared:ye,trigger:ge,defaultIndex:Te,portal:ke,axisId:Pe}=l,Re=da(),ot=typeof Te=="number"?String(Te):Te;H.useEffect(()=>{Re(wV({shared:ye,trigger:ge,axisId:Pe,active:m,defaultIndex:ot}))},[Re,ye,ge,Pe,m,ot]);var bt=$x(),kt=CO(),We=gV(ye),{activeIndex:Ve,isActive:Ot}=(t=dr(Gt=>Pq(Gt,We,ge,ot)))!==null&&t!==void 0?t:{},Ue=dr(Gt=>Cq(Gt,We,ge,ot)),Je=dr(Gt=>$z(Gt,We,ge,ot)),Le=dr(Gt=>Mq(Gt,We,ge,ot)),Ge=Ue,st=Jq(),pt=(i=m??Ot)!==null&&i!==void 0?i:!1,[Rt,De]=q5([Ge,pt]),lt=We==="axis"?Je:void 0;xG(We,ge,Le,lt,Ve,pt);var Mt=ke??st;if(Mt==null||bt==null||We==null)return null;var zt=Ge??gC;pt||(zt=gC),P&&zt.length&&(zt=m5(zt.filter(Gt=>Gt.value!=null&&(Gt.hide!==!0||l.includeHidden)),F,TG));var qt=zt.length>0,Yt=H.createElement(u4,{allowEscapeViewBox:v,animationDuration:_,animationEasing:c,isAnimationActive:D,active:pt,coordinate:Le,hasPayload:qt,offset:z,position:$,reverseDirection:Y,useTranslate3d:K,viewBox:bt,wrapperStyle:q,lastBoundingBox:Rt,innerRef:De,hasPortalFromProps:!!ke},EG(M,mC(mC({},l),{},{payload:zt,label:lt,active:pt,activeIndex:Ve,coordinate:Le,accessibilityLayer:kt})));return H.createElement(H.Fragment,null,DP.createPortal(Yt,Mt),pt&&H.createElement(Qq,{cursor:he,tooltipEventType:We,coordinate:Le,payload:zt,index:Ve}))}function MG(e,t,i){return(t=CG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function CG(e){var t=PG(e,"string");return typeof t=="symbol"?t:t+""}function PG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class DG{constructor(t){MG(this,"cache",new Map),this.maxSize=t}get(t){var i=this.cache.get(t);return i!==void 0&&(this.cache.delete(t),this.cache.set(t,i)),i}set(t,i){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var l=this.cache.keys().next().value;l!=null&&this.cache.delete(l)}this.cache.set(t,i)}clear(){this.cache.clear()}size(){return this.cache.size}}function vC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function OG(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(i),!0).forEach(function(l){IG(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function IG(e,t,i){return(t=zG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zG(e){var t=kG(e,"string");return typeof t=="symbol"?t:t+""}function kG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RG={cacheSize:2e3,enableCache:!0},Yz=OG({},RG),_C=new DG(Yz.cacheSize),LG={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},xC="recharts_measurement_span";function jG(e,t){var i=t.fontSize||"",l=t.fontFamily||"",m=t.fontWeight||"",v=t.fontStyle||"",_=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(i,"|").concat(l,"|").concat(m,"|").concat(v,"|").concat(_,"|").concat(c)}var bC=(e,t)=>{try{var i=document.getElementById(xC);i||(i=document.createElement("span"),i.setAttribute("id",xC),i.setAttribute("aria-hidden","true"),document.body.appendChild(i)),Object.assign(i.style,LG,t),i.textContent="".concat(e);var l=i.getBoundingClientRect();return{width:l.width,height:l.height}}catch{return{width:0,height:0}}},gv=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Gv.isSsr)return{width:0,height:0};if(!Yz.enableCache)return bC(t,i);var l=jG(t,i),m=_C.get(l);if(m)return m;var v=bC(t,i);return _C.set(l,v),v},Kz;function NG(e,t,i){return(t=BG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function BG(e){var t=FG(e,"string");return typeof t=="symbol"?t:t+""}function FG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,SC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,UG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,VG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},GG=["cm","mm","pt","pc","in","Q","px"];function $G(e){return GG.includes(e)}var Pg="NaN";function ZG(e,t){return e*qG[t]}class Va{static parse(t){var i,[,l,m]=(i=VG.exec(t))!==null&&i!==void 0?i:[];return l==null?Va.NaN:new Va(parseFloat(l),m??"")}constructor(t,i){this.num=t,this.unit=i,this.num=t,this.unit=i,kc(t)&&(this.unit=""),i!==""&&!UG.test(i)&&(this.num=NaN,this.unit=""),$G(i)&&(this.num=ZG(t,i),this.unit="px")}add(t){return this.unit!==t.unit?new Va(NaN,""):new Va(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Va(NaN,""):new Va(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Va(NaN,""):new Va(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Va(NaN,""):new Va(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return kc(this.num)}}Kz=Va;NG(Va,"NaN",new Kz(NaN,""));function Qz(e){if(e==null||e.includes(Pg))return Pg;for(var t=e;t.includes("*")||t.includes("/");){var i,[,l,m,v]=(i=wC.exec(t))!==null&&i!==void 0?i:[],_=Va.parse(l??""),c=Va.parse(v??""),M=m==="*"?_.multiply(c):_.divide(c);if(M.isNaN())return Pg;t=t.replace(wC,M.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var P,[,D,z,F]=(P=SC.exec(t))!==null&&P!==void 0?P:[],$=Va.parse(D??""),Y=Va.parse(F??""),K=z==="+"?$.add(Y):$.subtract(Y);if(K.isNaN())return Pg;t=t.replace(SC,K.toString())}return t}var TC=/\(([^()]*)\)/;function HG(e){for(var t=e,i;(i=TC.exec(t))!=null;){var[,l]=i;t=t.replace(TC,Qz(l))}return t}function WG(e){var t=e.replace(/\s+/g,"");return t=HG(t),t=Qz(t),t}function XG(e){try{return WG(e)}catch{return Pg}}function sw(e){var t=XG(e.slice(5,-1));return t===Pg?"":t}var YG=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],KG=["dx","dy","angle","className","breakAll"];function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},c2.apply(null,arguments)}function EC(e,t){if(e==null)return{};var i,l,m=QG(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function QG(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}var Jz=/[ \f\n\r\t\v\u2028\u2029]+/,ek=e=>{var{children:t,breakAll:i,style:l}=e;try{var m=[];mo(t)||(i?m=t.toString().split(""):m=t.toString().split(Jz));var v=m.map(c=>({word:c,width:gv(c,l).width})),_=i?0:gv("",l).width;return{wordsWithComputedWidth:v,spaceWidth:_}}catch{return null}};function JG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var tk=(e,t,i,l)=>e.reduce((m,v)=>{var{word:_,width:c}=v,M=m[m.length-1];if(M&&c!=null&&(t==null||l||M.width+c+i<Number(t)))M.words.push(_),M.width+=c+i;else{var P={words:[_],width:c};m.push(P)}return m},[]),rk=e=>e.reduce((t,i)=>t.width>i.width?t:i),e$="",AC=(e,t,i,l,m,v,_,c)=>{var M=e.slice(0,t),P=ek({breakAll:i,style:l,children:M+e$});if(!P)return[!1,[]];var D=tk(P.wordsWithComputedWidth,v,_,c),z=D.length>m||rk(D).width>Number(v);return[z,D]},t$=(e,t,i,l,m)=>{var{maxLines:v,children:_,style:c,breakAll:M}=e,P=Jt(v),D=String(_),z=tk(t,l,i,m);if(!P||m)return z;var F=z.length>v||rk(z).width>Number(l);if(!F)return z;for(var $=0,Y=D.length-1,K=0,q;$<=Y&&K<=D.length-1;){var he=Math.floor(($+Y)/2),ye=he-1,[ge,Te]=AC(D,ye,M,c,v,l,i,m),[ke]=AC(D,he,M,c,v,l,i,m);if(!ge&&!ke&&($=he+1),ge&&ke&&(Y=he-1),!ge&&ke){q=Te;break}K++}return q||z},MC=e=>{var t=mo(e)?[]:e.toString().split(Jz);return[{words:t,width:void 0}]},r$=e=>{var{width:t,scaleToFit:i,children:l,style:m,breakAll:v,maxLines:_}=e;if((t||i)&&!Gv.isSsr){var c,M,P=ek({breakAll:v,children:l,style:m});if(P){var{wordsWithComputedWidth:D,spaceWidth:z}=P;c=D,M=z}else return MC(l);return t$({breakAll:v,children:l,maxLines:_,style:m},c,M,t,!!i)}return MC(l)},nk="#808080",n$={angle:0,breakAll:!1,capHeight:"0.71em",fill:nk,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},WS=H.forwardRef((e,t)=>{var i=Xs(e,n$),{x:l,y:m,lineHeight:v,capHeight:_,fill:c,scaleToFit:M,textAnchor:P,verticalAnchor:D}=i,z=EC(i,YG),F=H.useMemo(()=>r$({breakAll:z.breakAll,children:z.children,maxLines:z.maxLines,scaleToFit:M,style:z.style,width:z.width}),[z.breakAll,z.children,z.maxLines,M,z.style,z.width]),{dx:$,dy:Y,angle:K,className:q,breakAll:he}=z,ye=EC(z,KG);if(!Rc(l)||!Rc(m)||F.length===0)return null;var ge=Number(l)+(Jt($)?$:0),Te=Number(m)+(Jt(Y)?Y:0);if(!Br(ge)||!Br(Te))return null;var ke;switch(D){case"start":ke=sw("calc(".concat(_,")"));break;case"middle":ke=sw("calc(".concat((F.length-1)/2," * -").concat(v," + (").concat(_," / 2))"));break;default:ke=sw("calc(".concat(F.length-1," * -").concat(v,")"));break}var Pe=[],Re=F[0];if(M&&Re!=null){var ot=Re.width,{width:bt}=z;Pe.push("scale(".concat(Jt(bt)&&Jt(ot)?bt/ot:1,")"))}return K&&Pe.push("rotate(".concat(K,", ").concat(ge,", ").concat(Te,")")),Pe.length&&(ye.transform=Pe.join(" ")),H.createElement("text",c2({},kl(ye),{ref:t,x:ge,y:Te,className:Xn("recharts-text",q),textAnchor:P,fill:c.includes("url")?nk:c}),F.map((kt,We)=>{var Ve=kt.words.join(he?"":" ");return H.createElement("tspan",{x:ge,dy:We===0?ke:v,key:"".concat(Ve,"-").concat(We)},Ve)}))});WS.displayName="Text";function CC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function Mc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(i),!0).forEach(function(l){i$(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function i$(e,t,i){return(t=a$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a$(e){var t=o$(e,"string");return typeof t=="symbol"?t:t+""}function o$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s$=e=>{var{viewBox:t,position:i,offset:l=0,parentViewBox:m}=e,{x:v,y:_,height:c,upperWidth:M,lowerWidth:P}=Z2(t),D=v,z=v+(M-P)/2,F=(D+z)/2,$=(M+P)/2,Y=D+M/2,K=c>=0?1:-1,q=K*l,he=K>0?"end":"start",ye=K>0?"start":"end",ge=M>=0?1:-1,Te=ge*l,ke=ge>0?"end":"start",Pe=ge>0?"start":"end",Re=m;if(i==="top"){var ot={x:D+M/2,y:_-q,horizontalAnchor:"middle",verticalAnchor:he};return Re&&(ot.height=Math.max(_-Re.y,0),ot.width=M),ot}if(i==="bottom"){var bt={x:z+P/2,y:_+c+q,horizontalAnchor:"middle",verticalAnchor:ye};return Re&&(bt.height=Math.max(Re.y+Re.height-(_+c),0),bt.width=P),bt}if(i==="left"){var kt={x:F-Te,y:_+c/2,horizontalAnchor:ke,verticalAnchor:"middle"};return Re&&(kt.width=Math.max(kt.x-Re.x,0),kt.height=c),kt}if(i==="right"){var We={x:F+$+Te,y:_+c/2,horizontalAnchor:Pe,verticalAnchor:"middle"};return Re&&(We.width=Math.max(Re.x+Re.width-We.x,0),We.height=c),We}var Ve=Re?{width:$,height:c}:{};return i==="insideLeft"?Mc({x:F+Te,y:_+c/2,horizontalAnchor:Pe,verticalAnchor:"middle"},Ve):i==="insideRight"?Mc({x:F+$-Te,y:_+c/2,horizontalAnchor:ke,verticalAnchor:"middle"},Ve):i==="insideTop"?Mc({x:D+M/2,y:_+q,horizontalAnchor:"middle",verticalAnchor:ye},Ve):i==="insideBottom"?Mc({x:z+P/2,y:_+c-q,horizontalAnchor:"middle",verticalAnchor:he},Ve):i==="insideTopLeft"?Mc({x:D+Te,y:_+q,horizontalAnchor:Pe,verticalAnchor:ye},Ve):i==="insideTopRight"?Mc({x:D+M-Te,y:_+q,horizontalAnchor:ke,verticalAnchor:ye},Ve):i==="insideBottomLeft"?Mc({x:z+Te,y:_+c-q,horizontalAnchor:Pe,verticalAnchor:he},Ve):i==="insideBottomRight"?Mc({x:z+P-Te,y:_+c-q,horizontalAnchor:ke,verticalAnchor:he},Ve):i&&typeof i=="object"&&(Jt(i.x)||Vp(i.x))&&(Jt(i.y)||Vp(i.y))?Mc({x:v+gd(i.x,$),y:_+gd(i.y,c),horizontalAnchor:"end",verticalAnchor:"end"},Ve):Mc({x:Y,y:_+c/2,horizontalAnchor:"middle",verticalAnchor:"middle"},Ve)},l$=["labelRef"],u$=["content"];function PC(e,t){if(e==null)return{};var i,l,m=c$(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function c$(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function DC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function dv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(i),!0).forEach(function(l){h$(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function h$(e,t,i){return(t=f$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f$(e){var t=d$(e,"string");return typeof t=="symbol"?t:t+""}function d$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Uh.apply(null,arguments)}var ik=H.createContext(null),p$=e=>{var{x:t,y:i,upperWidth:l,lowerWidth:m,width:v,height:_,children:c}=e,M=H.useMemo(()=>({x:t,y:i,upperWidth:l,lowerWidth:m,width:v,height:_}),[t,i,l,m,v,_]);return H.createElement(ik.Provider,{value:M},c)},ak=()=>{var e=H.useContext(ik),t=$x();return e||(t?Z2(t):void 0)},m$=H.createContext(null),g$=()=>{var e=H.useContext(m$),t=dr(RI);return e||t},y$=e=>{var{value:t,formatter:i}=e,l=mo(e.children)?t:e.children;return typeof i=="function"?i(l):l},XS=e=>e!=null&&typeof e=="function",v$=(e,t)=>{var i=Il(t-e),l=Math.min(Math.abs(t-e),360);return i*l},_$=(e,t,i,l,m)=>{var{offset:v,className:_}=e,{cx:c,cy:M,innerRadius:P,outerRadius:D,startAngle:z,endAngle:F,clockWise:$}=m,Y=(P+D)/2,K=v$(z,F),q=K>=0?1:-1,he,ye;switch(t){case"insideStart":he=z+q*v,ye=$;break;case"insideEnd":he=F-q*v,ye=!$;break;case"end":he=F+q*v,ye=$;break;default:throw new Error("Unsupported position ".concat(t))}ye=K<=0?ye:!ye;var ge=qa(c,M,Y,he),Te=qa(c,M,Y,he+(ye?1:-1)*359),ke="M".concat(ge.x,",").concat(ge.y,`
    A`).concat(Y,",").concat(Y,",0,1,").concat(ye?0:1,`,
    `).concat(Te.x,",").concat(Te.y),Pe=mo(e.id)?_v("recharts-radial-line-"):e.id;return H.createElement("text",Uh({},l,{dominantBaseline:"central",className:Xn("recharts-radial-bar-label",_)}),H.createElement("defs",null,H.createElement("path",{id:Pe,d:ke})),H.createElement("textPath",{xlinkHref:"#".concat(Pe)},i))},x$=(e,t,i)=>{var{cx:l,cy:m,innerRadius:v,outerRadius:_,startAngle:c,endAngle:M}=e,P=(c+M)/2;if(i==="outside"){var{x:D,y:z}=qa(l,m,_+t,P);return{x:D,y:z,textAnchor:D>=l?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:l,y:m,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:l,y:m,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:l,y:m,textAnchor:"middle",verticalAnchor:"end"};var F=(v+_)/2,{x:$,y:Y}=qa(l,m,F,P);return{x:$,y:Y,textAnchor:"middle",verticalAnchor:"middle"}},D0=e=>e!=null&&"cx"in e&&Jt(e.cx),b$={angle:0,offset:5,zIndex:Ro.label,position:"middle",textBreakAll:!1};function w$(e){if(!D0(e))return e;var{cx:t,cy:i,outerRadius:l}=e,m=l*2;return{x:t-l,y:i-l,width:m,upperWidth:m,lowerWidth:m,height:m}}function cd(e){var t=Xs(e,b$),{viewBox:i,parentViewBox:l,position:m,value:v,children:_,content:c,className:M="",textBreakAll:P,labelRef:D}=t,z=g$(),F=ak(),$=m==="center"?F:z??F,Y,K,q;i==null?Y=$:D0(i)?Y=i:Y=Z2(i);var he=w$(Y);if(!Y||mo(v)&&mo(_)&&!H.isValidElement(c)&&typeof c!="function")return null;var ye=dv(dv({},t),{},{viewBox:Y});if(H.isValidElement(c)){var{labelRef:ge}=ye,Te=PC(ye,l$);return H.cloneElement(c,Te)}if(typeof c=="function"){var{content:ke}=ye,Pe=PC(ye,u$);if(K=H.createElement(c,Pe),H.isValidElement(K))return K}else K=y$(t);var Re=kl(t);if(D0(Y)){if(m==="insideStart"||m==="insideEnd"||m==="end")return _$(t,m,K,Re,Y);q=x$(Y,t.offset,t.position)}else{if(!he)return null;var ot=s$({viewBox:he,position:m,offset:t.offset,parentViewBox:D0(l)?void 0:l});q=dv(dv({x:ot.x,y:ot.y,textAnchor:ot.horizontalAnchor,verticalAnchor:ot.verticalAnchor},ot.width!==void 0?{width:ot.width}:{}),ot.height!==void 0?{height:ot.height}:{})}return H.createElement(cf,{zIndex:t.zIndex},H.createElement(WS,Uh({ref:D,className:Xn("recharts-label",M)},Re,q,{textAnchor:JG(Re.textAnchor)?Re.textAnchor:q.textAnchor,breakAll:P}),K))}cd.displayName="Label";var S$=(e,t,i)=>{if(!e)return null;var l={viewBox:t,labelRef:i};return e===!0?H.createElement(cd,Uh({key:"label-implicit"},l)):Rc(e)?H.createElement(cd,Uh({key:"label-implicit",value:e},l)):H.isValidElement(e)?e.type===cd?H.cloneElement(e,dv({key:"label-implicit"},l)):H.createElement(cd,Uh({key:"label-implicit",content:e},l)):XS(e)?H.createElement(cd,Uh({key:"label-implicit",content:e},l)):e&&typeof e=="object"?H.createElement(cd,Uh({},e,{key:"label-implicit"},l)):null};function T$(e){var{label:t,labelRef:i}=e,l=ak();return S$(t,l,i)||null}var lw={},uw={},OC;function E$(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i[i.length-1]}e.last=t})(uw)),uw}var cw={},IC;function A$(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Array.isArray(i)?i:Array.from(i)}e.toArray=t})(cw)),cw}var zC;function M$(){return zC||(zC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E$(),i=A$(),l=L2();function m(v){if(l.isArrayLike(v))return t.last(i.toArray(v))}e.last=m})(lw)),lw}var hw,kC;function C$(){return kC||(kC=1,hw=M$().last),hw}var P$=C$();const D$=ef(P$);var O$=["valueAccessor"],I$=["dataKey","clockWise","id","textBreakAll","zIndex"];function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},vx.apply(null,arguments)}function RC(e,t){if(e==null)return{};var i,l,m=z$(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function z$(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}var k$=e=>Array.isArray(e.value)?D$(e.value):e.value,ok=H.createContext(void 0),R$=ok.Provider,sk=H.createContext(void 0);sk.Provider;function L$(){return H.useContext(ok)}function j$(){return H.useContext(sk)}function O0(e){var{valueAccessor:t=k$}=e,i=RC(e,O$),{dataKey:l,clockWise:m,id:v,textBreakAll:_,zIndex:c}=i,M=RC(i,I$),P=L$(),D=j$(),z=P||D;return!z||!z.length?null:H.createElement(cf,{zIndex:c??Ro.label},H.createElement(zc,{className:"recharts-label-list"},z.map((F,$)=>{var Y,K=mo(l)?t(F,$):Ga(F.payload,l),q=mo(v)?{}:{id:"".concat(v,"-").concat($)};return H.createElement(cd,vx({key:"label-".concat($)},kl(F),M,q,{fill:(Y=i.fill)!==null&&Y!==void 0?Y:F.fill,parentViewBox:F.parentViewBox,value:K,textBreakAll:_,viewBox:F.viewBox,index:$,zIndex:0}))})))}O0.displayName="LabelList";function N$(e){var{label:t}=e;return t?t===!0?H.createElement(O0,{key:"labelList-implicit"}):H.isValidElement(t)||XS(t)?H.createElement(O0,{key:"labelList-implicit",content:t}):typeof t=="object"?H.createElement(O0,vx({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},h2.apply(null,arguments)}var lk=e=>{var{cx:t,cy:i,r:l,className:m}=e,v=Xn("recharts-dot",m);return Jt(t)&&Jt(i)&&Jt(l)?H.createElement("circle",h2({},Ru(e),R2(e),{className:v,cx:t,cy:i,r:l})):null},B$={radiusAxis:{},angleAxis:{}},uk=ms({name:"polarAxis",initialState:B$,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:rW,removeRadiusAxis:nW,addAngleAxis:iW,removeAngleAxis:aW}=uk.actions,F$=uk.reducer;function U$(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var ck=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0;function V$(e){var{tooltipEntrySettings:t}=e,i=da(),l=gs(),m=H.useRef(null);return H.useLayoutEffect(()=>{l||(m.current===null?i(_V(t)):m.current!==t&&i(xV({prev:m.current,next:t})),m.current=t)},[t,i,l]),H.useLayoutEffect(()=>()=>{m.current&&(i(bV(m.current)),m.current=null)},[i]),null}function q$(e){var{legendPayload:t}=e,i=da(),l=gs(),m=H.useRef(null);return H.useLayoutEffect(()=>{l||(m.current===null?i(WB(t)):m.current!==t&&i(XB({prev:m.current,next:t})),m.current=t)},[i,l,t]),H.useLayoutEffect(()=>()=>{m.current&&(i(YB(m.current)),m.current=null)},[i]),null}var fw,G$=()=>{var[e]=H.useState(()=>_v("uid-"));return e},$$=(fw=oR.useId)!==null&&fw!==void 0?fw:G$;function Z$(e,t){var i=$$();return t||(e?"".concat(e,"-").concat(i):i)}var H$=H.createContext(void 0),W$=e=>{var{id:t,type:i,children:l}=e,m=Z$("recharts-".concat(i),t);return H.createElement(H$.Provider,{value:m},l(m))},X$={cartesianItems:[],polarItems:[]},hk=ms({name:"graphicalItems",initialState:X$,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Jn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:i,next:l}=t.payload,m=ku(e).cartesianItems.indexOf(i);m>-1&&(e.cartesianItems[m]=l)},prepare:Jn()},removeCartesianGraphicalItem:{reducer(e,t){var i=ku(e).cartesianItems.indexOf(t.payload);i>-1&&e.cartesianItems.splice(i,1)},prepare:Jn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Jn()},removePolarGraphicalItem:{reducer(e,t){var i=ku(e).polarItems.indexOf(t.payload);i>-1&&e.polarItems.splice(i,1)},prepare:Jn()}}}),{addCartesianGraphicalItem:Y$,replaceCartesianGraphicalItem:K$,removeCartesianGraphicalItem:Q$,addPolarGraphicalItem:oW,removePolarGraphicalItem:sW}=hk.actions,J$=hk.reducer,e9=e=>{var t=da(),i=H.useRef(null);return H.useLayoutEffect(()=>{i.current===null?t(Y$(e)):i.current!==e&&t(K$({prev:i.current,next:e})),i.current=e},[t,e]),H.useLayoutEffect(()=>()=>{i.current&&(t(Q$(i.current)),i.current=null)},[t]),null},t9=H.memo(e9),r9=["points"];function LC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function dw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?LC(Object(i),!0).forEach(function(l){n9(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):LC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function n9(e,t,i){return(t=i9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function i9(e){var t=a9(e,"string");return typeof t=="symbol"?t:t+""}function a9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},_x.apply(null,arguments)}function o9(e,t){if(e==null)return{};var i,l,m=s9(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function s9(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function l9(e){var{option:t,dotProps:i,className:l}=e;if(H.isValidElement(t))return H.cloneElement(t,i);if(typeof t=="function")return t(i);var m=Xn(l,typeof t!="boolean"?t.className:""),v=i??{},{points:_}=v,c=o9(v,r9);return H.createElement(lk,_x({},c,{className:m}))}function u9(e,t){return e==null?!1:t?!0:e.length===1}function c9(e){var{points:t,dot:i,className:l,dotClassName:m,dataKey:v,baseProps:_,needClip:c,clipPathId:M,zIndex:P=Ro.scatter}=e;if(!u9(t,i))return null;var D=ck(i),z=lj(i),F=t.map((Y,K)=>{var q,he,ye=dw(dw(dw({r:3},_),z),{},{index:K,cx:(q=Y.x)!==null&&q!==void 0?q:void 0,cy:(he=Y.y)!==null&&he!==void 0?he:void 0,dataKey:v,value:Y.value,payload:Y.payload,points:t});return H.createElement(l9,{key:"dot-".concat(K),option:i,dotProps:ye,className:m})}),$={};return c&&M!=null&&($.clipPath="url(#clipPath-".concat(D?"":"dots-").concat(M,")")),H.createElement(cf,{zIndex:P},H.createElement(zc,_x({className:l},$),F))}function jC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function NC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(i),!0).forEach(function(l){h9(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function h9(e,t,i){return(t=f9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f9(e){var t=d9(e,"string");return typeof t=="symbol"?t:t+""}function d9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fk=0,p9={xAxis:{},yAxis:{},zAxis:{}},dk=ms({name:"cartesianAxis",initialState:p9,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Jn()},replaceXAxis:{reducer(e,t){var{prev:i,next:l}=t.payload;e.xAxis[i.id]!==void 0&&(i.id!==l.id&&delete e.xAxis[i.id],e.xAxis[l.id]=l)},prepare:Jn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Jn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Jn()},replaceYAxis:{reducer(e,t){var{prev:i,next:l}=t.payload;e.yAxis[i.id]!==void 0&&(i.id!==l.id&&delete e.yAxis[i.id],e.yAxis[l.id]=l)},prepare:Jn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Jn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Jn()},replaceZAxis:{reducer(e,t){var{prev:i,next:l}=t.payload;e.zAxis[i.id]!==void 0&&(i.id!==l.id&&delete e.zAxis[i.id],e.zAxis[l.id]=l)},prepare:Jn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Jn()},updateYAxisWidth(e,t){var{id:i,width:l}=t.payload,m=e.yAxis[i];if(m){var v,_=m.widthHistory||[];if(_.length===3&&_[0]===_[2]&&l===_[1]&&l!==m.width&&Math.abs(l-((v=_[0])!==null&&v!==void 0?v:0))<=1)return;var c=[..._,l].slice(-3);e.yAxis[i]=NC(NC({},m),{},{width:l,widthHistory:c})}}}}),{addXAxis:m9,replaceXAxis:g9,removeXAxis:y9,addYAxis:v9,replaceYAxis:_9,removeYAxis:x9,addZAxis:lW,replaceZAxis:uW,removeZAxis:cW,updateYAxisWidth:b9}=dk.actions,w9=dk.reducer,S9=ht([$a],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),T9=ht([S9,rf,nf],(e,t,i)=>{if(!(!e||t==null||i==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,i-e.top-e.bottom)}}),YS=()=>dr(T9),E9=()=>dr(dq);function BC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function pw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(i),!0).forEach(function(l){A9(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function A9(e,t,i){return(t=M9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function M9(e){var t=C9(e,"string");return typeof t=="symbol"?t:t+""}function C9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P9=e=>{var{point:t,childIndex:i,mainColor:l,activeDot:m,dataKey:v,clipPath:_}=e;if(m===!1||t.x==null||t.y==null)return null;var c={index:i,dataKey:v,cx:t.x,cy:t.y,r:4,fill:l??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},M=pw(pw(pw({},c),Mx(m)),R2(m)),P;return H.isValidElement(m)?P=H.cloneElement(m,M):typeof m=="function"?P=m(M):P=H.createElement(lk,M),H.createElement(zc,{className:"recharts-active-dot",clipPath:_},P)};function FC(e){var{points:t,mainColor:i,activeDot:l,itemDataKey:m,clipPath:v,zIndex:_=Ro.activeDot}=e,c=dr(Iv),M=E9();if(t==null||M==null)return null;var P=t.find(D=>M.includes(D.payload));return mo(P)?null:H.createElement(cf,{zIndex:_},H.createElement(P9,{point:P,childIndex:Number(c),mainColor:i,dataKey:m,activeDot:l,clipPath:v}))}var D9=e=>{var{chartData:t}=e,i=da(),l=gs();return H.useEffect(()=>l?()=>{}:(i(fC(t)),()=>{i(fC(void 0))}),[t,i,l]),null},UC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},pk=ms({name:"brush",initialState:UC,reducers:{setBrushSettings(e,t){return t.payload==null?UC:t.payload}}}),{setBrushSettings:hW}=pk.actions,O9=pk.reducer;function I9(e){return(e%180+180)%180}var z9=function(t){var{width:i,height:l}=t,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,v=I9(m),_=v*Math.PI/180,c=Math.atan(l/i),M=_>c&&_<Math.PI-c?l/Math.sin(_):i/Math.cos(_);return Math.abs(M)},k9={dots:[],areas:[],lines:[]},mk=ms({name:"referenceElements",initialState:k9,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var i=ku(e).dots.findIndex(l=>l===t.payload);i!==-1&&e.dots.splice(i,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var i=ku(e).areas.findIndex(l=>l===t.payload);i!==-1&&e.areas.splice(i,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var i=ku(e).lines.findIndex(l=>l===t.payload);i!==-1&&e.lines.splice(i,1)}}}),{addDot:fW,removeDot:dW,addArea:pW,removeArea:mW,addLine:gW,removeLine:yW}=mk.actions,R9=mk.reducer,L9=H.createContext(void 0),j9=e=>{var{children:t}=e,[i]=H.useState("".concat(_v("recharts"),"-clip")),l=YS();if(l==null)return null;var{x:m,y:v,width:_,height:c}=l;return H.createElement(L9.Provider,{value:i},H.createElement("defs",null,H.createElement("clipPath",{id:i},H.createElement("rect",{x:m,y:v,height:c,width:_}))),t)};function gk(e,t){if(t<1)return[];if(t===1)return e;for(var i=[],l=0;l<e.length;l+=t){var m=e[l];m!==void 0&&i.push(m)}return i}function N9(e,t,i){var l={width:e.width+t.width,height:e.height+t.height};return z9(l,i)}function B9(e,t,i){var l=i==="width",{x:m,y:v,width:_,height:c}=e;return t===1?{start:l?m:v,end:l?m+_:v+c}:{start:l?m+_:v+c,end:l?m:v}}function kv(e,t,i,l,m){if(e*t<e*l||e*t>e*m)return!1;var v=i();return e*(t-e*v/2-l)>=0&&e*(t+e*v/2-m)<=0}function F9(e,t){return gk(e,t+1)}function U9(e,t,i,l,m){for(var v=(l||[]).slice(),{start:_,end:c}=t,M=0,P=1,D=_,z=function(){var Y=l?.[M];if(Y===void 0)return{v:gk(l,P)};var K=M,q,he=()=>(q===void 0&&(q=i(Y,K)),q),ye=Y.coordinate,ge=M===0||kv(e,ye,he,D,c);ge||(M=0,D=_,P+=1),ge&&(D=ye+e*(he()/2+m),M+=P)},F;P<=v.length;)if(F=z(),F)return F.v;return[]}function V9(e,t,i,l,m){var v=(l||[]).slice(),_=v.length;if(_===0)return[];for(var{start:c,end:M}=t,P=1;P<=_;P++){for(var D=(_-1)%P,z=c,F=!0,$=function(){var Te=l[K];if(Te==null)return 0;var ke=K,Pe,Re=()=>(Pe===void 0&&(Pe=i(Te,ke)),Pe),ot=Te.coordinate,bt=K===D||kv(e,ot,Re,z,M);if(!bt)return F=!1,1;bt&&(z=ot+e*(Re()/2+m))},Y,K=D;K<_&&(Y=$(),!(Y!==0&&Y===1));K+=P);if(F){for(var q=[],he=D;he<_;he+=P){var ye=l[he];ye!=null&&q.push(ye)}return q}}return[]}function VC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function fo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?VC(Object(i),!0).forEach(function(l){q9(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):VC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function q9(e,t,i){return(t=G9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function G9(e){var t=$9(e,"string");return typeof t=="symbol"?t:t+""}function $9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z9(e,t,i,l,m){for(var v=(l||[]).slice(),_=v.length,{start:c}=t,{end:M}=t,P=function(F){var $=v[F];if($==null)return 1;var Y=$,K,q=()=>(K===void 0&&(K=i($,F)),K);if(F===_-1){var he=e*(Y.coordinate+e*q()/2-M);v[F]=Y=fo(fo({},Y),{},{tickCoord:he>0?Y.coordinate-he*e:Y.coordinate})}else v[F]=Y=fo(fo({},Y),{},{tickCoord:Y.coordinate});if(Y.tickCoord!=null){var ye=kv(e,Y.tickCoord,q,c,M);ye&&(M=Y.tickCoord-e*(q()/2+m),v[F]=fo(fo({},Y),{},{isShow:!0}))}},D=_-1;D>=0;D--)P(D);return v}function H9(e,t,i,l,m,v){var _=(l||[]).slice(),c=_.length,{start:M,end:P}=t;if(v){var D=l[c-1];if(D!=null){var z=i(D,c-1),F=e*(D.coordinate+e*z/2-P);if(_[c-1]=D=fo(fo({},D),{},{tickCoord:F>0?D.coordinate-F*e:D.coordinate}),D.tickCoord!=null){var $=kv(e,D.tickCoord,()=>z,M,P);$&&(P=D.tickCoord-e*(z/2+m),_[c-1]=fo(fo({},D),{},{isShow:!0}))}}}for(var Y=v?c-1:c,K=function(ye){var ge=_[ye];if(ge==null)return 1;var Te=ge,ke,Pe=()=>(ke===void 0&&(ke=i(ge,ye)),ke);if(ye===0){var Re=e*(Te.coordinate-e*Pe()/2-M);_[ye]=Te=fo(fo({},Te),{},{tickCoord:Re<0?Te.coordinate-Re*e:Te.coordinate})}else _[ye]=Te=fo(fo({},Te),{},{tickCoord:Te.coordinate});if(Te.tickCoord!=null){var ot=kv(e,Te.tickCoord,Pe,M,P);ot&&(M=Te.tickCoord+e*(Pe()/2+m),_[ye]=fo(fo({},Te),{},{isShow:!0}))}},q=0;q<Y;q++)K(q);return _}function KS(e,t,i){var{tick:l,ticks:m,viewBox:v,minTickGap:_,orientation:c,interval:M,tickFormatter:P,unit:D,angle:z}=e;if(!m||!m.length||!l)return[];if(Jt(M)||Gv.isSsr){var F;return(F=F9(m,Jt(M)?M:0))!==null&&F!==void 0?F:[]}var $=[],Y=c==="top"||c==="bottom"?"width":"height",K=D&&Y==="width"?gv(D,{fontSize:t,letterSpacing:i}):{width:0,height:0},q=(ke,Pe)=>{var Re=typeof P=="function"?P(ke.value,Pe):ke.value;return Y==="width"?N9(gv(Re,{fontSize:t,letterSpacing:i}),K,z):gv(Re,{fontSize:t,letterSpacing:i})[Y]},he=m[0],ye=m[1],ge=m.length>=2&&he!=null&&ye!=null?Il(ye.coordinate-he.coordinate):1,Te=B9(v,ge,Y);return M==="equidistantPreserveStart"?U9(ge,Te,q,m,_):M==="equidistantPreserveEnd"?V9(ge,Te,q,m,_):(M==="preserveStart"||M==="preserveStartEnd"?$=H9(ge,Te,q,m,_,M==="preserveStartEnd"):$=Z9(ge,Te,q,m,_),$.filter(ke=>ke.isShow))}var W9=e=>{var{ticks:t,label:i,labelGapWithTick:l=5,tickSize:m=0,tickMargin:v=0}=e,_=0;if(t){Array.from(t).forEach(D=>{if(D){var z=D.getBoundingClientRect();z.width>_&&(_=z.width)}});var c=i?i.getBoundingClientRect().width:0,M=m+v,P=_+M+c+(i?l:0);return Math.round(P)}return 0},X9=["axisLine","width","height","className","hide","ticks","axisType"];function Y9(e,t){if(e==null)return{};var i,l,m=K9(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function K9(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function Hp(){return Hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Hp.apply(null,arguments)}function qC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function bi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(i),!0).forEach(function(l){Q9(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function Q9(e,t,i){return(t=J9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function J9(e){var t=e7(e,"string");return typeof t=="symbol"?t:t+""}function e7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ro.axis};function t7(e){var{x:t,y:i,width:l,height:m,orientation:v,mirror:_,axisLine:c,otherSvgProps:M}=e;if(!c)return null;var P=bi(bi(bi({},M),Ru(c)),{},{fill:"none"});if(v==="top"||v==="bottom"){var D=+(v==="top"&&!_||v==="bottom"&&_);P=bi(bi({},P),{},{x1:t,y1:i+D*m,x2:t+l,y2:i+D*m})}else{var z=+(v==="left"&&!_||v==="right"&&_);P=bi(bi({},P),{},{x1:t+z*l,y1:i,x2:t+z*l,y2:i+m})}return H.createElement("line",Hp({},P,{className:Xn("recharts-cartesian-axis-line",Dx(c,"className"))}))}function r7(e,t,i,l,m,v,_,c,M){var P,D,z,F,$,Y,K=c?-1:1,q=e.tickSize||_,he=Jt(e.tickCoord)?e.tickCoord:e.coordinate;switch(v){case"top":P=D=e.coordinate,F=i+ +!c*m,z=F-K*q,Y=z-K*M,$=he;break;case"left":z=F=e.coordinate,D=t+ +!c*l,P=D-K*q,$=P-K*M,Y=he;break;case"right":z=F=e.coordinate,D=t+ +c*l,P=D+K*q,$=P+K*M,Y=he;break;default:P=D=e.coordinate,F=i+ +c*m,z=F+K*q,Y=z+K*M,$=he;break}return{line:{x1:P,y1:z,x2:D,y2:F},tick:{x:$,y:Y}}}function n7(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function i7(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function a7(e){var{option:t,tickProps:i,value:l}=e,m,v=Xn(i.className,"recharts-cartesian-axis-tick-value");if(H.isValidElement(t))m=H.cloneElement(t,bi(bi({},i),{},{className:v}));else if(typeof t=="function")m=t(bi(bi({},i),{},{className:v}));else{var _="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(_=Xn(_,U$(t))),m=H.createElement(WS,Hp({},i,{className:_}),l)}return m}var o7=H.forwardRef((e,t)=>{var{ticks:i=[],tick:l,tickLine:m,stroke:v,tickFormatter:_,unit:c,padding:M,tickTextProps:P,orientation:D,mirror:z,x:F,y:$,width:Y,height:K,tickSize:q,tickMargin:he,fontSize:ye,letterSpacing:ge,getTicksConfig:Te,events:ke,axisType:Pe}=e,Re=KS(bi(bi({},Te),{},{ticks:i}),ye,ge),ot=n7(D,z),bt=i7(D,z),kt=Ru(Te),We=Mx(l),Ve={};typeof m=="object"&&(Ve=m);var Ot=bi(bi({},kt),{},{fill:"none"},Ve),Ue=Re.map(Ge=>bi({entry:Ge},r7(Ge,F,$,Y,K,D,q,z,he))),Je=Ue.map(Ge=>{var{entry:st,line:pt}=Ge;return H.createElement(zc,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(st.value,"-").concat(st.coordinate,"-").concat(st.tickCoord)},m&&H.createElement("line",Hp({},Ot,pt,{className:Xn("recharts-cartesian-axis-tick-line",Dx(m,"className"))})))}),Le=Ue.map((Ge,st)=>{var pt,Rt,{entry:De,tick:lt}=Ge,Mt=bi(bi(bi(bi({verticalAnchor:bt},kt),{},{textAnchor:ot,stroke:"none",fill:v},lt),{},{index:st,payload:De,visibleTicksCount:Re.length,tickFormatter:_,padding:M},P),{},{angle:(pt=(Rt=P?.angle)!==null&&Rt!==void 0?Rt:kt.angle)!==null&&pt!==void 0?pt:0}),zt=bi(bi({},Mt),We);return H.createElement(zc,Hp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(De.value,"-").concat(De.coordinate,"-").concat(De.tickCoord)},Gj(ke,De,st)),l&&H.createElement(a7,{option:l,tickProps:zt,value:"".concat(typeof _=="function"?_(De.value,st):De.value).concat(c||"")}))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(Pe,"-ticks")},Le.length>0&&H.createElement(cf,{zIndex:Ro.label},H.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(Pe,"-tick-labels"),ref:t},Le)),Je.length>0&&H.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(Pe,"-tick-lines")},Je))}),s7=H.forwardRef((e,t)=>{var{axisLine:i,width:l,height:m,className:v,hide:_,ticks:c,axisType:M}=e,P=Y9(e,X9),[D,z]=H.useState(""),[F,$]=H.useState(""),Y=H.useRef(null);H.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var q;return W9({ticks:Y.current,label:(q=e.labelRef)===null||q===void 0?void 0:q.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var K=H.useCallback(q=>{if(q){var he=q.getElementsByClassName("recharts-cartesian-axis-tick-value");Y.current=he;var ye=he[0];if(ye){var ge=window.getComputedStyle(ye),Te=ge.fontSize,ke=ge.letterSpacing;(Te!==D||ke!==F)&&(z(Te),$(ke))}}},[D,F]);return _||l!=null&&l<=0||m!=null&&m<=0?null:H.createElement(cf,{zIndex:e.zIndex},H.createElement(zc,{className:Xn("recharts-cartesian-axis",v)},H.createElement(t7,{x:e.x,y:e.y,width:l,height:m,orientation:e.orientation,mirror:e.mirror,axisLine:i,otherSvgProps:Ru(e)}),H.createElement(o7,{ref:K,axisType:M,events:P,fontSize:D,getTicksConfig:e,height:e.height,letterSpacing:F,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),H.createElement(p$,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},H.createElement(T$,{label:e.label,labelRef:e.labelRef}),e.children)))}),QS=H.forwardRef((e,t)=>{var i=Xs(e,Zh);return H.createElement(s7,Hp({},i,{ref:t}))});QS.displayName="CartesianAxis";var l7=["x1","y1","x2","y2","key"],u7=["offset"],c7=["xAxisId","yAxisId"],h7=["xAxisId","yAxisId"];function GC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function po(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(i),!0).forEach(function(l){f7(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function f7(e,t,i){return(t=d7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d7(e){var t=p7(e,"string");return typeof t=="symbol"?t:t+""}function p7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lp(){return Lp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Lp.apply(null,arguments)}function xx(e,t){if(e==null)return{};var i,l,m=m7(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function m7(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}var g7=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:i,x:l,y:m,width:v,height:_,ry:c}=e;return H.createElement("rect",{x:l,y:m,ry:c,width:v,height:_,stroke:"none",fill:t,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function yk(e){var{option:t,lineItemProps:i}=e,l;if(H.isValidElement(t))l=H.cloneElement(t,i);else if(typeof t=="function")l=t(i);else{var m,{x1:v,y1:_,x2:c,y2:M,key:P}=i,D=xx(i,l7),z=(m=Ru(D))!==null&&m!==void 0?m:{},{offset:F}=z,$=xx(z,u7);l=H.createElement("line",Lp({},$,{x1:v,y1:_,x2:c,y2:M,fill:"none",key:P}))}return l}function y7(e){var{x:t,width:i,horizontal:l=!0,horizontalPoints:m}=e;if(!l||!m||!m.length)return null;var{xAxisId:v,yAxisId:_}=e,c=xx(e,c7),M=m.map((P,D)=>{var z=po(po({},c),{},{x1:t,y1:P,x2:t+i,y2:P,key:"line-".concat(D),index:D});return H.createElement(yk,{key:"line-".concat(D),option:l,lineItemProps:z})});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},M)}function v7(e){var{y:t,height:i,vertical:l=!0,verticalPoints:m}=e;if(!l||!m||!m.length)return null;var{xAxisId:v,yAxisId:_}=e,c=xx(e,h7),M=m.map((P,D)=>{var z=po(po({},c),{},{x1:P,y1:t,x2:P,y2:t+i,key:"line-".concat(D),index:D});return H.createElement(yk,{option:l,lineItemProps:z,key:"line-".concat(D)})});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},M)}function _7(e){var{horizontalFill:t,fillOpacity:i,x:l,y:m,width:v,height:_,horizontalPoints:c,horizontal:M=!0}=e;if(!M||!t||!t.length||c==null)return null;var P=c.map(z=>Math.round(z+m-m)).sort((z,F)=>z-F);m!==P[0]&&P.unshift(0);var D=P.map((z,F)=>{var $=P[F+1],Y=$==null,K=Y?m+_-z:$-z;if(K<=0)return null;var q=F%t.length;return H.createElement("rect",{key:"react-".concat(F),y:z,x:l,height:K,width:v,stroke:"none",fill:t[q],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},D)}function x7(e){var{vertical:t=!0,verticalFill:i,fillOpacity:l,x:m,y:v,width:_,height:c,verticalPoints:M}=e;if(!t||!i||!i.length)return null;var P=M.map(z=>Math.round(z+m-m)).sort((z,F)=>z-F);m!==P[0]&&P.unshift(0);var D=P.map((z,F)=>{var $=P[F+1],Y=$==null,K=Y?m+_-z:$-z;if(K<=0)return null;var q=F%i.length;return H.createElement("rect",{key:"react-".concat(F),x:z,y:v,width:K,height:c,stroke:"none",fill:i[q],fillOpacity:l,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},D)}var b7=(e,t)=>{var{xAxis:i,width:l,height:m,offset:v}=e;return uO(KS(po(po(po({},Zh),i),{},{ticks:cO(i),viewBox:{x:0,y:0,width:l,height:m}})),v.left,v.left+v.width,t)},w7=(e,t)=>{var{yAxis:i,width:l,height:m,offset:v}=e;return uO(KS(po(po(po({},Zh),i),{},{ticks:cO(i),viewBox:{x:0,y:0,width:l,height:m}})),v.top,v.top+v.height,t)},S7={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ro.grid};function vk(e){var t=vO(),i=_O(),l=yO(),m=po(po({},Xs(e,S7)),{},{x:Jt(e.x)?e.x:l.left,y:Jt(e.y)?e.y:l.top,width:Jt(e.width)?e.width:l.width,height:Jt(e.height)?e.height:l.height}),{xAxisId:v,yAxisId:_,x:c,y:M,width:P,height:D,syncWithTicks:z,horizontalValues:F,verticalValues:$}=m,Y=gs(),K=dr(bt=>eC(bt,"xAxis",v,Y)),q=dr(bt=>eC(bt,"yAxis",_,Y));if(!Lc(P)||!Lc(D)||!Jt(c)||!Jt(M))return null;var he=m.verticalCoordinatesGenerator||b7,ye=m.horizontalCoordinatesGenerator||w7,{horizontalPoints:ge,verticalPoints:Te}=m;if((!ge||!ge.length)&&typeof ye=="function"){var ke=F&&F.length,Pe=ye({yAxis:q?po(po({},q),{},{ticks:ke?F:q.ticks}):void 0,width:t??P,height:i??D,offset:l},ke?!0:z);W0(Array.isArray(Pe),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Pe,"]")),Array.isArray(Pe)&&(ge=Pe)}if((!Te||!Te.length)&&typeof he=="function"){var Re=$&&$.length,ot=he({xAxis:K?po(po({},K),{},{ticks:Re?$:K.ticks}):void 0,width:t??P,height:i??D,offset:l},Re?!0:z);W0(Array.isArray(ot),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof ot,"]")),Array.isArray(ot)&&(Te=ot)}return H.createElement(cf,{zIndex:m.zIndex},H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(g7,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),H.createElement(_7,Lp({},m,{horizontalPoints:ge})),H.createElement(x7,Lp({},m,{verticalPoints:Te})),H.createElement(y7,Lp({},m,{offset:l,horizontalPoints:ge,xAxis:K,yAxis:q})),H.createElement(v7,Lp({},m,{offset:l,verticalPoints:Te,xAxis:K,yAxis:q}))))}vk.displayName="CartesianGrid";var T7={},_k=ms({name:"errorBars",initialState:T7,reducers:{addErrorBar:(e,t)=>{var{itemId:i,errorBar:l}=t.payload;e[i]||(e[i]=[]),e[i].push(l)},replaceErrorBar:(e,t)=>{var{itemId:i,prev:l,next:m}=t.payload;e[i]&&(e[i]=e[i].map(v=>v.dataKey===l.dataKey&&v.direction===l.direction?m:v))},removeErrorBar:(e,t)=>{var{itemId:i,errorBar:l}=t.payload;e[i]&&(e[i]=e[i].filter(m=>m.dataKey!==l.dataKey||m.direction!==l.direction))}}}),{addErrorBar:vW,replaceErrorBar:_W,removeErrorBar:xW}=_k.actions,E7=_k.reducer;function xk(e,t){var i,l,m=dr(P=>sf(P,e)),v=dr(P=>lf(P,t)),_=(i=m?.allowDataOverflow)!==null&&i!==void 0?i:ua.allowDataOverflow,c=(l=v?.allowDataOverflow)!==null&&l!==void 0?l:ca.allowDataOverflow,M=_||c;return{needClip:M,needClipX:_,needClipY:c}}function A7(e){var{xAxisId:t,yAxisId:i,clipPathId:l}=e,m=YS(),{needClipX:v,needClipY:_,needClip:c}=xk(t,i);if(!c||!m)return null;var{x:M,y:P,width:D,height:z}=m;return H.createElement("clipPath",{id:"clipPath-".concat(l)},H.createElement("rect",{x:v?M:M-D/2,y:_?P:P-z/2,width:v?D:D*2,height:_?z:z*2}))}function M7(e){var t=Mx(e),i=3,l=2;if(t!=null){var{r:m,strokeWidth:v}=t,_=Number(m),c=Number(v);return(Number.isNaN(_)||_<0)&&(_=i),(Number.isNaN(c)||c<0)&&(c=l),{r:_,strokeWidth:c}}return{r:i,strokeWidth:l}}var mw={exports:{}},gw={};var $C;function C7(){if($C)return gw;$C=1;var e=Fg();function t(M,P){return M===P&&(M!==0||1/M===1/P)||M!==M&&P!==P}var i=typeof Object.is=="function"?Object.is:t,l=e.useSyncExternalStore,m=e.useRef,v=e.useEffect,_=e.useMemo,c=e.useDebugValue;return gw.useSyncExternalStoreWithSelector=function(M,P,D,z,F){var $=m(null);if($.current===null){var Y={hasValue:!1,value:null};$.current=Y}else Y=$.current;$=_(function(){function q(ke){if(!he){if(he=!0,ye=ke,ke=z(ke),F!==void 0&&Y.hasValue){var Pe=Y.value;if(F(Pe,ke))return ge=Pe}return ge=ke}if(Pe=ge,i(ye,ke))return Pe;var Re=z(ke);return F!==void 0&&F(Pe,Re)?(ye=ke,Pe):(ye=ke,ge=Re)}var he=!1,ye,ge,Te=D===void 0?null:D;return[function(){return q(P())},Te===null?void 0:function(){return q(Te())}]},[P,D,z,F]);var K=l(M,$[0],$[1]);return v(function(){Y.hasValue=!0,Y.value=K},[K]),c(K),K},gw}var ZC;function P7(){return ZC||(ZC=1,mw.exports=C7()),mw.exports}P7();function D7(e){e()}function O7(){let e=null,t=null;return{clear(){e=null,t=null},notify(){D7(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){const i=[];let l=e;for(;l;)i.push(l),l=l.next;return i},subscribe(i){let l=!0;const m=t={callback:i,next:null,prev:t};return m.prev?m.prev.next=m:e=m,function(){!l||e===null||(l=!1,m.next?m.next.prev=m.prev:t=m.prev,m.prev?m.prev.next=m.next:e=m.next)}}}}var HC={notify(){},get:()=>[]};function I7(e,t){let i,l=HC,m=0,v=!1;function _(K){D();const q=l.subscribe(K);let he=!1;return()=>{he||(he=!0,q(),z())}}function c(){l.notify()}function M(){Y.onStateChange&&Y.onStateChange()}function P(){return v}function D(){m++,i||(i=e.subscribe(M),l=O7())}function z(){m--,i&&m===0&&(i(),i=void 0,l.clear(),l=HC)}function F(){v||(v=!0,D())}function $(){v&&(v=!1,z())}const Y={addNestedSub:_,notifyNestedSubs:c,handleChangeWrapper:M,isSubscribed:P,trySubscribe:F,tryUnsubscribe:$,getListeners:()=>l};return Y}var z7=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k7=z7(),R7=()=>typeof navigator<"u"&&navigator.product==="ReactNative",L7=R7(),j7=()=>k7||L7?H.useLayoutEffect:H.useEffect,N7=j7();function WC(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function B7(e,t){if(WC(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const i=Object.keys(e),l=Object.keys(t);if(i.length!==l.length)return!1;for(let m=0;m<i.length;m++)if(!Object.prototype.hasOwnProperty.call(t,i[m])||!WC(e[i[m]],t[i[m]]))return!1;return!0}var F7=Symbol.for("react-redux-context"),U7=typeof globalThis<"u"?globalThis:{};function V7(){if(!H.createContext)return{};const e=U7[F7]??=new Map;let t=e.get(H.createContext);return t||(t=H.createContext(null),e.set(H.createContext,t)),t}var q7=V7();function G7(e){const{children:t,context:i,serverState:l,store:m}=e,v=H.useMemo(()=>{const M=I7(m);return{store:m,subscription:M,getServerState:l?()=>l:void 0}},[m,l]),_=H.useMemo(()=>m.getState(),[m]);N7(()=>{const{subscription:M}=v;return M.onStateChange=M.notifyNestedSubs,M.trySubscribe(),_!==m.getState()&&M.notifyNestedSubs(),()=>{M.tryUnsubscribe(),M.onStateChange=void 0}},[v,_]);const c=i||q7;return H.createElement(c.Provider,{value:v},t)}var $7=G7,Z7=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function H7(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function JS(e,t){var i=new Set([...Object.keys(e),...Object.keys(t)]);for(var l of i)if(Z7.has(l)){if(e[l]==null&&t[l]==null)continue;if(!B7(e[l],t[l]))return!1}else if(!H7(e[l],t[l]))return!1;return!0}function eT(e,t){var i,l;return(i=(l=e.graphicalItems.cartesianItems.find(m=>m.id===t))===null||l===void 0?void 0:l.xAxisId)!==null&&i!==void 0?i:fk}function tT(e,t){var i,l;return(i=(l=e.graphicalItems.cartesianItems.find(m=>m.id===t))===null||l===void 0?void 0:l.yAxisId)!==null&&i!==void 0?i:fk}var bk=(e,t,i)=>xz(e,"xAxis",eT(e,t),i),wk=(e,t,i)=>_z(e,"xAxis",eT(e,t),i),Sk=(e,t,i)=>xz(e,"yAxis",tT(e,t),i),Tk=(e,t,i)=>_z(e,"yAxis",tT(e,t),i),W7=ht([ti,bk,Sk,wk,Tk],(e,t,i,l,m)=>Nc(e,"xAxis")?H0(t,l,!1):H0(i,m,!1)),X7=(e,t)=>t,Ek=ht([UI,X7],(e,t)=>e.filter(i=>i.type==="area").find(i=>i.id===t)),Ak=e=>{var t=ti(e),i=Nc(t,"xAxis");return i?"yAxis":"xAxis"},Y7=(e,t)=>{var i=Ak(e);return i==="yAxis"?tT(e,t):eT(e,t)},K7=(e,t,i)=>YI(e,Ak(e),Y7(e,t),i),Q7=ht([Ek,K7],(e,t)=>{var i;if(!(e==null||t==null)){var{stackId:l}=e,m=MS(e);if(!(l==null||m==null)){var v=(i=t[l])===null||i===void 0?void 0:i.stackedData,_=v?.find(c=>c.key===m);if(_!=null)return _.map(c=>[c[0],c[1]])}}}),J7=ht([ti,bk,Sk,wk,Tk,Q7,K8,W7,Ek,oU],(e,t,i,l,m,v,_,c,M,P)=>{var{chartData:D,dataStartIndex:z,dataEndIndex:F}=_;if(!(M==null||e!=="horizontal"&&e!=="vertical"||t==null||i==null||l==null||m==null||l.length===0||m.length===0||c==null)){var{data:$}=M,Y;if($&&$.length>0?Y=$:Y=D?.slice(z,F+1),Y!=null)return vZ({layout:e,xAxis:t,yAxis:i,xAxisTicks:l,yAxisTicks:m,dataStartIndex:z,areaSettings:M,stackedData:v,displayedData:Y,chartBaseValue:P,bandSize:c})}}),eZ=["id"],tZ=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Fp(){return Fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Fp.apply(null,arguments)}function Mk(e,t){if(e==null)return{};var i,l,m=rZ(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function rZ(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function XC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function Dg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(i),!0).forEach(function(l){nZ(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):XC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function nZ(e,t,i){return(t=iZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function iZ(e){var t=aZ(e,"string");return typeof t=="symbol"?t:t+""}function aZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bx(e,t){return e&&e!=="none"?e:t}var oZ=e=>{var{dataKey:t,name:i,stroke:l,fill:m,legendType:v,hide:_}=e;return[{inactive:_,dataKey:t,type:v,color:bx(l,m),value:hO(i,t),payload:e}]},sZ=H.memo(e=>{var{dataKey:t,data:i,stroke:l,strokeWidth:m,fill:v,name:_,hide:c,unit:M,tooltipType:P,id:D}=e,z={dataDefinedOnItem:i,getPosition:qg,settings:{stroke:l,strokeWidth:m,fill:v,dataKey:t,nameKey:void 0,name:hO(_,t),hide:c,type:P,color:bx(l,v),unit:M,graphicalItemId:D}};return H.createElement(V$,{tooltipEntrySettings:z})});function lZ(e){var{clipPathId:t,points:i,props:l}=e,{needClip:m,dot:v,dataKey:_}=l,c=Ru(l);return H.createElement(c9,{points:i,dot:v,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:_,baseProps:c,needClip:m,clipPathId:t})}function uZ(e){var{showLabels:t,children:i,points:l}=e,m=l.map(v=>{var _,c,M={x:(_=v.x)!==null&&_!==void 0?_:0,y:(c=v.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Dg(Dg({},M),{},{value:v.value,payload:v.payload,parentViewBox:void 0,viewBox:M,fill:void 0})});return H.createElement(R$,{value:t?m:void 0},i)}function YC(e){var{points:t,baseLine:i,needClip:l,clipPathId:m,props:v}=e,{layout:_,type:c,stroke:M,connectNulls:P,isRange:D}=v,{id:z}=v,F=Mk(v,eZ),$=Ru(F),Y=kl(F);return H.createElement(H.Fragment,null,t?.length>1&&H.createElement(zc,{clipPath:l?"url(#clipPath-".concat(m,")"):void 0},H.createElement(C0,Fp({},Y,{id:z,points:t,connectNulls:P,type:c,baseLine:i,layout:_,stroke:"none",className:"recharts-area-area"})),M!=="none"&&H.createElement(C0,Fp({},$,{className:"recharts-area-curve",layout:_,type:c,connectNulls:P,fill:"none",points:t})),M!=="none"&&D&&H.createElement(C0,Fp({},$,{className:"recharts-area-curve",layout:_,type:c,connectNulls:P,fill:"none",points:i}))),H.createElement(lZ,{points:t,props:F,clipPathId:m}))}function cZ(e){var t,i,{alpha:l,baseLine:m,points:v,strokeWidth:_}=e,c=(t=v[0])===null||t===void 0?void 0:t.y,M=(i=v[v.length-1])===null||i===void 0?void 0:i.y;if(!Br(c)||!Br(M))return null;var P=l*Math.abs(c-M),D=Math.max(...v.map(z=>z.x||0));return Jt(m)?D=Math.max(m,D):m&&Array.isArray(m)&&m.length&&(D=Math.max(...m.map(z=>z.x||0),D)),Jt(D)?H.createElement("rect",{x:0,y:c<M?c:c-P,width:D+(_?parseInt("".concat(_),10):1),height:Math.floor(P)}):null}function hZ(e){var t,i,{alpha:l,baseLine:m,points:v,strokeWidth:_}=e,c=(t=v[0])===null||t===void 0?void 0:t.x,M=(i=v[v.length-1])===null||i===void 0?void 0:i.x;if(!Br(c)||!Br(M))return null;var P=l*Math.abs(c-M),D=Math.max(...v.map(z=>z.y||0));return Jt(m)?D=Math.max(m,D):m&&Array.isArray(m)&&m.length&&(D=Math.max(...m.map(z=>z.y||0),D)),Jt(D)?H.createElement("rect",{x:c<M?c:c-P,y:0,width:P,height:Math.floor(D+(_?parseInt("".concat(_),10):1))}):null}function fZ(e){var{alpha:t,layout:i,points:l,baseLine:m,strokeWidth:v}=e;return i==="vertical"?H.createElement(cZ,{alpha:t,points:l,baseLine:m,strokeWidth:v}):H.createElement(hZ,{alpha:t,points:l,baseLine:m,strokeWidth:v})}function dZ(e){var{needClip:t,clipPathId:i,props:l,previousPointsRef:m,previousBaselineRef:v}=e,{points:_,baseLine:c,isAnimationActive:M,animationBegin:P,animationDuration:D,animationEasing:z,onAnimationStart:F,onAnimationEnd:$}=l,Y=H.useMemo(()=>({points:_,baseLine:c}),[_,c]),K=zO(Y,"recharts-area-"),q=H2(),[he,ye]=H.useState(!1),ge=!he,Te=H.useCallback(()=>{typeof $=="function"&&$(),ye(!1)},[$]),ke=H.useCallback(()=>{typeof F=="function"&&F(),ye(!0)},[F]);if(q==null)return null;var Pe=m.current,Re=v.current;return H.createElement(uZ,{showLabels:ge,points:_},l.children,H.createElement(IO,{animationId:K,begin:P,duration:D,isActive:M,easing:z,onAnimationEnd:Te,onAnimationStart:ke,key:K},ot=>{if(Pe){var bt=Pe.length/_.length,kt=ot===1?_:_.map((Ve,Ot)=>{var Ue=Math.floor(Ot*bt);if(Pe[Ue]){var Je=Pe[Ue];return Dg(Dg({},Ve),{},{x:Cc(Je.x,Ve.x,ot),y:Cc(Je.y,Ve.y,ot)})}return Ve}),We;return Jt(c)?We=Cc(Re,c,ot):mo(c)||kc(c)?We=Cc(Re,0,ot):We=c.map((Ve,Ot)=>{var Ue=Math.floor(Ot*bt);if(Array.isArray(Re)&&Re[Ue]){var Je=Re[Ue];return Dg(Dg({},Ve),{},{x:Cc(Je.x,Ve.x,ot),y:Cc(Je.y,Ve.y,ot)})}return Ve}),ot>0&&(m.current=kt,v.current=We),H.createElement(YC,{points:kt,baseLine:We,needClip:t,clipPathId:i,props:l})}return ot>0&&(m.current=_,v.current=c),H.createElement(zc,null,M&&H.createElement("defs",null,H.createElement("clipPath",{id:"animationClipPath-".concat(i)},H.createElement(fZ,{alpha:ot,points:_,baseLine:c,layout:q,strokeWidth:l.strokeWidth}))),H.createElement(zc,{clipPath:"url(#animationClipPath-".concat(i,")")},H.createElement(YC,{points:_,baseLine:c,needClip:t,clipPathId:i,props:l})))}),H.createElement(N$,{label:l.label}))}function pZ(e){var{needClip:t,clipPathId:i,props:l}=e,m=H.useRef(null),v=H.useRef();return H.createElement(dZ,{needClip:t,clipPathId:i,props:l,previousPointsRef:m,previousBaselineRef:v})}class mZ extends H.PureComponent{render(){var{hide:t,dot:i,points:l,className:m,top:v,left:_,needClip:c,xAxisId:M,yAxisId:P,width:D,height:z,id:F,baseLine:$,zIndex:Y}=this.props;if(t)return null;var K=Xn("recharts-area",m),q=F,{r:he,strokeWidth:ye}=M7(i),ge=ck(i),Te=he*2+ye,ke=c?"url(#clipPath-".concat(ge?"":"dots-").concat(q,")"):void 0;return H.createElement(cf,{zIndex:Y},H.createElement(zc,{className:K},c&&H.createElement("defs",null,H.createElement(A7,{clipPathId:q,xAxisId:M,yAxisId:P}),!ge&&H.createElement("clipPath",{id:"clipPath-dots-".concat(q)},H.createElement("rect",{x:_-Te/2,y:v-Te/2,width:D+Te,height:z+Te}))),H.createElement(pZ,{needClip:c,clipPathId:q,props:this.props})),H.createElement(FC,{points:l,mainColor:bx(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:ke}),this.props.isRange&&Array.isArray($)&&H.createElement(FC,{points:$,mainColor:bx(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:ke}))}}var Ck={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Ro.area};function gZ(e){var t,i=Xs(e,Ck),{activeDot:l,animationBegin:m,animationDuration:v,animationEasing:_,connectNulls:c,dot:M,fill:P,fillOpacity:D,hide:z,isAnimationActive:F,legendType:$,stroke:Y,xAxisId:K,yAxisId:q}=i,he=Mk(i,tZ),ye=Gg(),ge=Vz(),{needClip:Te}=xk(K,q),ke=gs(),{points:Pe,isRange:Re,baseLine:ot}=(t=dr(Ue=>J7(Ue,e.id,ke)))!==null&&t!==void 0?t:{},bt=YS();if(ye!=="horizontal"&&ye!=="vertical"||bt==null||ge!=="AreaChart"&&ge!=="ComposedChart")return null;var{height:kt,width:We,x:Ve,y:Ot}=bt;return!Pe||!Pe.length?null:H.createElement(mZ,Fp({},he,{activeDot:l,animationBegin:m,animationDuration:v,animationEasing:_,baseLine:ot,connectNulls:c,dot:M,fill:P,fillOpacity:D,height:kt,hide:z,layout:ye,isAnimationActive:F==="auto"?!Gv.isSsr:F,isRange:Re,legendType:$,needClip:Te,points:Pe,stroke:Y,width:We,left:Ve,top:Ot,xAxisId:K,yAxisId:q}))}var yZ=(e,t,i,l,m)=>{var v=i??t;if(Jt(v))return v;var _=e==="horizontal"?m:l,c=_.scale.domain();if(_.type==="number"){var M=Math.max(c[0],c[1]),P=Math.min(c[0],c[1]);return v==="dataMin"?P:v==="dataMax"||M<0?M:Math.max(Math.min(c[0],c[1]),0)}return v==="dataMin"?c[0]:v==="dataMax"?c[1]:c[0]};function vZ(e){var{areaSettings:{connectNulls:t,baseValue:i,dataKey:l},stackedData:m,layout:v,chartBaseValue:_,xAxis:c,yAxis:M,displayedData:P,dataStartIndex:D,xAxisTicks:z,yAxisTicks:F,bandSize:$}=e,Y=m&&m.length,K=yZ(v,_,i,c,M),q=v==="horizontal",he=!1,ye=P.map((Te,ke)=>{var Pe,Re,ot,bt;if(Y)bt=m[D+ke];else{var kt=Ga(Te,l);Array.isArray(kt)?(bt=kt,he=!0):bt=[K,kt]}var We=(Pe=(Re=bt)===null||Re===void 0?void 0:Re[1])!==null&&Pe!==void 0?Pe:null,Ve=We==null||Y&&!t&&Ga(Te,l)==null;if(q){var Ot;return{x:tA({axis:c,ticks:z,bandSize:$,entry:Te,index:ke}),y:Ve?null:(Ot=M.scale.map(We))!==null&&Ot!==void 0?Ot:null,value:bt,payload:Te}}return{x:Ve?null:(ot=c.scale.map(We))!==null&&ot!==void 0?ot:null,y:tA({axis:M,ticks:F,bandSize:$,entry:Te,index:ke}),value:bt,payload:Te}}),ge;return Y||he?ge=ye.map(Te=>{var ke,Pe=Array.isArray(Te.value)?Te.value[0]:null;if(q){var Re;return{x:Te.x,y:Pe!=null&&Te.y!=null&&(Re=M.scale.map(Pe))!==null&&Re!==void 0?Re:null,payload:Te.payload}}return{x:Pe!=null&&(ke=c.scale.map(Pe))!==null&&ke!==void 0?ke:null,y:Te.y,payload:Te.payload}}):ge=q?M.scale.map(K):c.scale.map(K),{points:ye,baseLine:ge??0,isRange:he}}function _Z(e){var t=Xs(e,Ck),i=gs();return H.createElement(W$,{id:t.id,type:"area"},l=>H.createElement(H.Fragment,null,H.createElement(q$,{legendPayload:oZ(t)}),H.createElement(sZ,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),H.createElement(t9,{type:"area",id:l,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:QN(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:i,connectNulls:t.connectNulls}),H.createElement(gZ,Fp({},t,{id:l}))))}var pv=H.memo(_Z,JS);pv.displayName="Area";var xZ=["domain","range"],bZ=["domain","range"];function KC(e,t){if(e==null)return{};var i,l,m=wZ(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function wZ(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function QC(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function Pk(e,t){if(e===t)return!0;var{domain:i,range:l}=e,m=KC(e,xZ),{domain:v,range:_}=t,c=KC(t,bZ);return!QC(i,v)||!QC(l,_)?!1:JS(m,c)}var SZ=["type"],TZ=["dangerouslySetInnerHTML","ticks","scale"],EZ=["id","scale"];function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},f2.apply(null,arguments)}function JC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function eP(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(i),!0).forEach(function(l){AZ(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JC(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function AZ(e,t,i){return(t=MZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function MZ(e){var t=CZ(e,"string");return typeof t=="symbol"?t:t+""}function CZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d2(e,t){if(e==null)return{};var i,l,m=PZ(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function PZ(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function DZ(e){var t=da(),i=H.useRef(null),l=H2(),{type:m}=e,v=d2(e,SZ),_=nb(l,"xAxis",m),c=H.useMemo(()=>{if(_!=null)return eP(eP({},v),{},{type:_})},[v,_]);return H.useLayoutEffect(()=>{c!=null&&(i.current===null?t(m9(c)):i.current!==c&&t(g9({prev:i.current,next:c})),i.current=c)},[c,t]),H.useLayoutEffect(()=>()=>{i.current&&(t(y9(i.current)),i.current=null)},[t]),null}var OZ=e=>{var{xAxisId:t,className:i}=e,l=dr(dO),m=gs(),v="xAxis",_=dr(he=>vz(he,v,t,m)),c=dr(he=>rV(he,t)),M=dr(he=>lV(he,t)),P=dr(he=>jI(he,t));if(c==null||M==null||P==null)return null;var{dangerouslySetInnerHTML:D,ticks:z,scale:F}=e,$=d2(e,TZ),{id:Y,scale:K}=P,q=d2(P,EZ);return H.createElement(QS,f2({},$,q,{x:M.x,y:M.y,width:c.width,height:c.height,className:Xn("recharts-".concat(v," ").concat(v),i),viewBox:l,ticks:_,axisType:v}))},IZ={allowDataOverflow:ua.allowDataOverflow,allowDecimals:ua.allowDecimals,allowDuplicatedCategory:ua.allowDuplicatedCategory,angle:ua.angle,axisLine:Zh.axisLine,height:ua.height,hide:!1,includeHidden:ua.includeHidden,interval:ua.interval,label:!1,minTickGap:ua.minTickGap,mirror:ua.mirror,orientation:ua.orientation,padding:ua.padding,reversed:ua.reversed,scale:ua.scale,tick:ua.tick,tickCount:ua.tickCount,tickLine:Zh.tickLine,tickSize:Zh.tickSize,type:ua.type,xAxisId:0},zZ=e=>{var t=Xs(e,IZ);return H.createElement(H.Fragment,null,H.createElement(DZ,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),H.createElement(OZ,t))},Dk=H.memo(zZ,Pk);Dk.displayName="XAxis";var kZ=["type"],RZ=["dangerouslySetInnerHTML","ticks","scale"],LZ=["id","scale"];function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},p2.apply(null,arguments)}function tP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function rP(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(i),!0).forEach(function(l){jZ(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tP(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function jZ(e,t,i){return(t=NZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function NZ(e){var t=BZ(e,"string");return typeof t=="symbol"?t:t+""}function BZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m2(e,t){if(e==null)return{};var i,l,m=FZ(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function FZ(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function UZ(e){var t=da(),i=H.useRef(null),l=H2(),{type:m}=e,v=m2(e,kZ),_=nb(l,"yAxis",m),c=H.useMemo(()=>{if(_!=null)return rP(rP({},v),{},{type:_})},[_,v]);return H.useLayoutEffect(()=>{c!=null&&(i.current===null?t(v9(c)):i.current!==c&&t(_9({prev:i.current,next:c})),i.current=c)},[c,t]),H.useLayoutEffect(()=>()=>{i.current&&(t(x9(i.current)),i.current=null)},[t]),null}function VZ(e){var{yAxisId:t,className:i,width:l,label:m}=e,v=H.useRef(null),_=H.useRef(null),c=dr(dO),M=gs(),P=da(),D="yAxis",z=dr(Pe=>hV(Pe,t)),F=dr(Pe=>cV(Pe,t)),$=dr(Pe=>vz(Pe,D,t,M)),Y=dr(Pe=>NI(Pe,t));if(H.useLayoutEffect(()=>{if(!(l!=="auto"||!z||XS(m)||H.isValidElement(m)||Y==null)){var Pe=v.current;if(Pe){var Re=Pe.getCalculatedWidth();Math.round(z.width)!==Math.round(Re)&&P(b9({id:t,width:Re}))}}},[$,z,P,m,t,l,Y]),z==null||F==null||Y==null)return null;var{dangerouslySetInnerHTML:K,ticks:q,scale:he}=e,ye=m2(e,RZ),{id:ge,scale:Te}=Y,ke=m2(Y,LZ);return H.createElement(QS,p2({},ye,ke,{ref:v,labelRef:_,x:F.x,y:F.y,tickTextProps:l==="auto"?{width:void 0}:{width:l},width:z.width,height:z.height,className:Xn("recharts-".concat(D," ").concat(D),i),viewBox:c,ticks:$,axisType:D}))}var qZ={allowDataOverflow:ca.allowDataOverflow,allowDecimals:ca.allowDecimals,allowDuplicatedCategory:ca.allowDuplicatedCategory,angle:ca.angle,axisLine:Zh.axisLine,hide:!1,includeHidden:ca.includeHidden,interval:ca.interval,label:!1,minTickGap:ca.minTickGap,mirror:ca.mirror,orientation:ca.orientation,padding:ca.padding,reversed:ca.reversed,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,tickLine:Zh.tickLine,tickSize:Zh.tickSize,type:ca.type,width:ca.width,yAxisId:0},GZ=e=>{var t=Xs(e,qZ);return H.createElement(H.Fragment,null,H.createElement(UZ,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),H.createElement(VZ,t))},Ok=H.memo(GZ,Pk);Ok.displayName="YAxis";var $Z=(e,t)=>t,rT=ht([$Z,ti,RI,ga,Lz,uf,Eq,$a],Iq),nT=e=>{var t=e.currentTarget.getBoundingClientRect(),i=t.width/e.currentTarget.offsetWidth,l=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/i),chartY:Math.round((e.clientY-t.top)/l)}},Ik=Rl("mouseClick"),zk=Fv();zk.startListening({actionCreator:Ik,effect:(e,t)=>{var i=e.payload,l=rT(t.getState(),nT(i));l?.activeIndex!=null&&t.dispatch(TV({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}});var g2=Rl("mouseMove"),kk=Fv(),x0=null;kk.startListening({actionCreator:g2,effect:(e,t)=>{var i=e.payload;x0!==null&&cancelAnimationFrame(x0);var l=nT(i);x0=requestAnimationFrame(()=>{var m=t.getState(),v=NS(m,m.tooltip.settings.shared);if(v==="axis"){var _=rT(m,l);_?.activeIndex!=null?t.dispatch(Mz({activeIndex:_.activeIndex,activeDataKey:void 0,activeCoordinate:_.activeCoordinate})):t.dispatch(Az())}x0=null})}});function ZZ(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var nP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},Rk=ms({name:"rootProps",initialState:nP,reducers:{updateOptions:(e,t)=>{var i;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(i=t.payload.barGap)!==null&&i!==void 0?i:nP.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),HZ=Rk.reducer,{updateOptions:WZ}=Rk.actions,XZ=null,YZ={updatePolarOptions:(e,t)=>t.payload},Lk=ms({name:"polarOptions",initialState:XZ,reducers:YZ}),{updatePolarOptions:bW}=Lk.actions,KZ=Lk.reducer,jk=Rl("keyDown"),Nk=Rl("focus"),iT=Fv();iT.startListening({actionCreator:jk,effect:(e,t)=>{var i=t.getState(),l=i.rootProps.accessibilityLayer!==!1;if(l){var{keyboardInteraction:m}=i.tooltip,v=e.payload;if(!(v!=="ArrowRight"&&v!=="ArrowLeft"&&v!=="Enter")){var _=BS(m,Jg(i),Kv(i),Jv(i)),c=_==null?-1:Number(_);if(!(!Number.isFinite(c)||c<0)){var M=uf(i);if(v==="Enter"){var P=yx(i,"axis","hover",String(m.index));t.dispatch(s2({active:!m.active,activeIndex:m.index,activeCoordinate:P}));return}var D=mV(i),z=D==="left-to-right"?1:-1,F=v==="ArrowRight"?1:-1,$=c+F*z;if(!(M==null||$>=M.length||$<0)){var Y=yx(i,"axis","hover",String($));t.dispatch(s2({active:!0,activeIndex:$.toString(),activeCoordinate:Y}))}}}}}});iT.startListening({actionCreator:Nk,effect:(e,t)=>{var i=t.getState(),l=i.rootProps.accessibilityLayer!==!1;if(l){var{keyboardInteraction:m}=i.tooltip;if(!m.active&&m.index==null){var v="0",_=yx(i,"axis","hover",String(v));t.dispatch(s2({active:!0,activeIndex:v,activeCoordinate:_}))}}}});var Ol=Rl("externalEvent"),Bk=Fv(),yw=new Map;Bk.startListening({actionCreator:Ol,effect:(e,t)=>{var{handler:i,reactEvent:l}=e.payload;if(i!=null){l.persist();var m=l.type,v=yw.get(m);v!==void 0&&cancelAnimationFrame(v);var _=requestAnimationFrame(()=>{try{var c=t.getState(),M={activeCoordinate:cq(c),activeDataKey:lq(c),activeIndex:Iv(c),activeLabel:Bz(c),activeTooltipIndex:Iv(c),isTooltipActive:hq(c)};i(M,l)}finally{yw.delete(m)}});yw.set(m,_)}}});var QZ=ht([Kg],e=>e.tooltipItemPayloads),JZ=ht([QZ,(e,t)=>t,(e,t,i)=>i],(e,t,i)=>{if(t!=null){var l=e.find(v=>v.settings.graphicalItemId===i);if(l!=null){var{getPosition:m}=l;if(m!=null)return m(t)}}}),Fk=Rl("touchMove"),Uk=Fv();Uk.startListening({actionCreator:Fk,effect:(e,t)=>{var i=e.payload;if(!(i.touches==null||i.touches.length===0)){var l=t.getState(),m=NS(l,l.tooltip.settings.shared);if(m==="axis"){var v=i.touches[0];if(v==null)return;var _=rT(l,nT({clientX:v.clientX,clientY:v.clientY,currentTarget:i.currentTarget}));_?.activeIndex!=null&&t.dispatch(Mz({activeIndex:_.activeIndex,activeDataKey:void 0,activeCoordinate:_.activeCoordinate}))}else if(m==="item"){var c,M=i.touches[0];if(document.elementFromPoint==null||M==null)return;var P=document.elementFromPoint(M.clientX,M.clientY);if(!P||!P.getAttribute)return;var D=P.getAttribute(aB),z=(c=P.getAttribute(oB))!==null&&c!==void 0?c:void 0,F=Qg(l).find(K=>K.id===z);if(D==null||F==null||z==null)return;var{dataKey:$}=F,Y=JZ(l,D,z);t.dispatch(SV({activeDataKey:$,activeIndex:D,activeCoordinate:Y,activeGraphicalItemId:z}))}}}});var eH=kD({brush:O9,cartesianAxis:w9,chartData:cG,errorBars:E7,graphicalItems:J$,layout:qN,legend:KB,options:aG,polarAxis:F$,polarOptions:KZ,referenceElements:R9,rootProps:HZ,tooltip:EV,zIndex:Zq}),tH=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return pN({reducer:eH,preloadedState:t,middleware:l=>{var m;return l({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((m="es6")!==null&&m!==void 0?m:"")}).concat([zk.middleware,kk.middleware,iT.middleware,Bk.middleware,Uk.middleware])},enhancers:l=>{var m=l;return typeof l=="function"&&(m=l()),m.concat(XD({type:"raf"}))},devTools:{serialize:{replacer:ZZ},name:"recharts-".concat(i)}})};function rH(e){var{preloadedState:t,children:i,reduxStoreName:l}=e,m=gs(),v=H.useRef(null);if(m)return i;v.current==null&&(v.current=tH(t,l));var _=N2;return H.createElement($7,{context:_,store:v.current},i)}function nH(e){var{layout:t,margin:i}=e,l=da(),m=gs();return H.useEffect(()=>{m||(l(FN(t)),l(BN(i)))},[l,m,t,i]),null}var iH=H.memo(nH,JS);function aH(e){var t=da();return H.useEffect(()=>{t(WZ(e))},[t,e]),null}function iP(e){var{zIndex:t,isPanorama:i}=e,l=H.useRef(null),m=da();return H.useLayoutEffect(()=>(l.current&&m(Gq({zIndex:t,element:l.current,isPanorama:i})),()=>{m($q({zIndex:t,isPanorama:i}))}),[m,t,i]),H.createElement("g",{tabIndex:-1,ref:l})}function aP(e){var{children:t,isPanorama:i}=e,l=dr(kq);if(!l||l.length===0)return t;var m=l.filter(_=>_<0),v=l.filter(_=>_>0);return H.createElement(H.Fragment,null,m.map(_=>H.createElement(iP,{key:_,zIndex:_,isPanorama:i})),t,v.map(_=>H.createElement(iP,{key:_,zIndex:_,isPanorama:i})))}var oH=["children"];function sH(e,t){if(e==null)return{};var i,l,m=lH(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function lH(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},wx.apply(null,arguments)}var uH={width:"100%",height:"100%",display:"block"},cH=H.forwardRef((e,t)=>{var i=vO(),l=_O(),m=CO();if(!Lc(i)||!Lc(l))return null;var{children:v,otherAttributes:_,title:c,desc:M}=e,P,D;return _!=null&&(typeof _.tabIndex=="number"?P=_.tabIndex:P=m?0:void 0,typeof _.role=="string"?D=_.role:D=m?"application":void 0),H.createElement(rD,wx({},_,{title:c,desc:M,role:D,tabIndex:P,width:i,height:l,style:uH,ref:t}),v)}),hH=e=>{var{children:t}=e,i=dr(Gx);if(!i)return null;var{width:l,height:m,y:v,x:_}=i;return H.createElement(rD,{width:l,height:m,x:_,y:v},t)},oP=H.forwardRef((e,t)=>{var{children:i}=e,l=sH(e,oH),m=gs();return m?H.createElement(hH,null,H.createElement(aP,{isPanorama:!0},i)):H.createElement(cH,wx({ref:t},l),H.createElement(aP,{isPanorama:!1},i))});function fH(){var e=da(),[t,i]=H.useState(null),l=dr(iB);return H.useEffect(()=>{if(t!=null){var m=t.getBoundingClientRect(),v=m.width/t.offsetWidth;Br(v)&&v!==l&&e(VN(v))}},[t,e,l]),i}function sP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,l)}return i}function dH(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(i),!0).forEach(function(l){pH(e,l,i[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sP(Object(i)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(i,l))})}return e}function pH(e,t,i){return(t=mH(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mH(e){var t=gH(e,"string");return typeof t=="symbol"?t:t+""}function gH(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var l=i.call(e,t);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},pd.apply(null,arguments)}var yH=()=>(_G(),null);function Sx(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var vH=H.forwardRef((e,t)=>{var i,l,m=H.useRef(null),[v,_]=H.useState({containerWidth:Sx((i=e.style)===null||i===void 0?void 0:i.width),containerHeight:Sx((l=e.style)===null||l===void 0?void 0:l.height)}),c=H.useCallback((P,D)=>{_(z=>{var F=Math.round(P),$=Math.round(D);return z.containerWidth===F&&z.containerHeight===$?z:{containerWidth:F,containerHeight:$}})},[]),M=H.useCallback(P=>{if(typeof t=="function"&&t(P),P!=null&&typeof ResizeObserver<"u"){var{width:D,height:z}=P.getBoundingClientRect();c(D,z);var F=Y=>{var K=Y[0];if(K!=null){var{width:q,height:he}=K.contentRect;c(q,he)}},$=new ResizeObserver(F);$.observe(P),m.current=$}},[t,c]);return H.useEffect(()=>()=>{var P=m.current;P?.disconnect()},[c]),H.createElement(H.Fragment,null,H.createElement(Vv,{width:v.containerWidth,height:v.containerHeight}),H.createElement("div",pd({ref:M},e)))}),_H=H.forwardRef((e,t)=>{var{width:i,height:l}=e,[m,v]=H.useState({containerWidth:Sx(i),containerHeight:Sx(l)}),_=H.useCallback((M,P)=>{v(D=>{var z=Math.round(M),F=Math.round(P);return D.containerWidth===z&&D.containerHeight===F?D:{containerWidth:z,containerHeight:F}})},[]),c=H.useCallback(M=>{if(typeof t=="function"&&t(M),M!=null){var{width:P,height:D}=M.getBoundingClientRect();_(P,D)}},[t,_]);return H.createElement(H.Fragment,null,H.createElement(Vv,{width:m.containerWidth,height:m.containerHeight}),H.createElement("div",pd({ref:c},e)))}),xH=H.forwardRef((e,t)=>{var{width:i,height:l}=e;return H.createElement(H.Fragment,null,H.createElement(Vv,{width:i,height:l}),H.createElement("div",pd({ref:t},e)))}),bH=H.forwardRef((e,t)=>{var{width:i,height:l}=e;return typeof i=="string"||typeof l=="string"?H.createElement(_H,pd({},e,{ref:t})):typeof i=="number"&&typeof l=="number"?H.createElement(xH,pd({},e,{width:i,height:l,ref:t})):H.createElement(H.Fragment,null,H.createElement(Vv,{width:i,height:l}),H.createElement("div",pd({ref:t},e)))});function wH(e){return e?vH:bH}var SH=H.forwardRef((e,t)=>{var{children:i,className:l,height:m,onClick:v,onContextMenu:_,onDoubleClick:c,onMouseDown:M,onMouseEnter:P,onMouseLeave:D,onMouseMove:z,onMouseUp:F,onTouchEnd:$,onTouchMove:Y,onTouchStart:K,style:q,width:he,responsive:ye,dispatchTouchEvents:ge=!0}=e,Te=H.useRef(null),ke=da(),[Pe,Re]=H.useState(null),[ot,bt]=H.useState(null),kt=fH(),We=$2(),Ve=We?.width>0?We.width:he,Ot=We?.height>0?We.height:m,Ue=H.useCallback(mt=>{kt(mt),typeof t=="function"&&t(mt),Re(mt),bt(mt),mt!=null&&(Te.current=mt)},[kt,t,Re,bt]),Je=H.useCallback(mt=>{ke(Ik(mt)),ke(Ol({handler:v,reactEvent:mt}))},[ke,v]),Le=H.useCallback(mt=>{ke(g2(mt)),ke(Ol({handler:P,reactEvent:mt}))},[ke,P]),Ge=H.useCallback(mt=>{ke(Az()),ke(Ol({handler:D,reactEvent:mt}))},[ke,D]),st=H.useCallback(mt=>{ke(g2(mt)),ke(Ol({handler:z,reactEvent:mt}))},[ke,z]),pt=H.useCallback(()=>{ke(Nk())},[ke]),Rt=H.useCallback(mt=>{ke(jk(mt.key))},[ke]),De=H.useCallback(mt=>{ke(Ol({handler:_,reactEvent:mt}))},[ke,_]),lt=H.useCallback(mt=>{ke(Ol({handler:c,reactEvent:mt}))},[ke,c]),Mt=H.useCallback(mt=>{ke(Ol({handler:M,reactEvent:mt}))},[ke,M]),zt=H.useCallback(mt=>{ke(Ol({handler:F,reactEvent:mt}))},[ke,F]),qt=H.useCallback(mt=>{ke(Ol({handler:K,reactEvent:mt}))},[ke,K]),Yt=H.useCallback(mt=>{ge&&ke(Fk(mt)),ke(Ol({handler:Y,reactEvent:mt}))},[ke,ge,Y]),Gt=H.useCallback(mt=>{ke(Ol({handler:$,reactEvent:mt}))},[ke,$]),Ar=wH(ye);return H.createElement(Hz.Provider,{value:Pe},H.createElement(mj.Provider,{value:ot},H.createElement(Ar,{width:Ve??q?.width,height:Ot??q?.height,className:Xn("recharts-wrapper",l),style:dH({position:"relative",cursor:"default",width:Ve,height:Ot},q),onClick:Je,onContextMenu:De,onDoubleClick:lt,onFocus:pt,onKeyDown:Rt,onMouseDown:Mt,onMouseEnter:Le,onMouseLeave:Ge,onMouseMove:st,onMouseUp:zt,onTouchEnd:Gt,onTouchMove:Yt,onTouchStart:qt,ref:Ue},H.createElement(yH,null),i)))}),TH=["width","height","responsive","children","className","style","compact","title","desc"];function EH(e,t){if(e==null)return{};var i,l,m=AH(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(l=0;l<v.length;l++)i=v[l],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function AH(e,t){if(e==null)return{};var i={};for(var l in e)if({}.hasOwnProperty.call(e,l)){if(t.indexOf(l)!==-1)continue;i[l]=e[l]}return i}var MH=H.forwardRef((e,t)=>{var{width:i,height:l,responsive:m,children:v,className:_,style:c,compact:M,title:P,desc:D}=e,z=EH(e,TH),F=Ru(z);return M?H.createElement(H.Fragment,null,H.createElement(Vv,{width:i,height:l}),H.createElement(oP,{otherAttributes:F,title:P,desc:D},v)):H.createElement(SH,{className:_,style:c,width:i,height:l,responsive:m??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},H.createElement(oP,{otherAttributes:F,title:P,desc:D,ref:t},H.createElement(j9,null,v)))});function y2(){return y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var l in i)({}).hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},y2.apply(null,arguments)}var CH={top:5,right:5,bottom:5,left:5},PH={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:CH,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},DH=H.forwardRef(function(t,i){var l,m=Xs(t.categoricalChartProps,PH),{chartName:v,defaultTooltipEventType:_,validateTooltipEventTypes:c,tooltipPayloadSearcher:M,categoricalChartProps:P}=t,D={chartName:v,defaultTooltipEventType:_,validateTooltipEventTypes:c,tooltipPayloadSearcher:M,eventEmitter:void 0};return H.createElement(rH,{preloadedState:{options:D},reduxStoreName:(l=P.id)!==null&&l!==void 0?l:v},H.createElement(D9,{chartData:P.data}),H.createElement(iH,{layout:m.layout,margin:m.margin}),H.createElement(aH,{baseValue:m.baseValue,accessibilityLayer:m.accessibilityLayer,barCategoryGap:m.barCategoryGap,maxBarSize:m.maxBarSize,stackOffset:m.stackOffset,barGap:m.barGap,barSize:m.barSize,syncId:m.syncId,syncMethod:m.syncMethod,className:m.className,reverseStackOrder:m.reverseStackOrder}),H.createElement(MH,y2({},m,{ref:i})))}),OH=["axis"],vw=H.forwardRef((e,t)=>H.createElement(DH,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:OH,tooltipPayloadSearcher:nG,categoricalChartProps:e,ref:t}));let IH=new UP;md.addProtocol("pmtiles",IH.tile);const lP="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/unfpa_od_population_data.pmtiles",zH=({activeLayer:e,selectedYear:t="2023",onDistrictClick:i,gender:l="All",region:m="All"})=>{const v=H.useRef(null),_=H.useRef(null),c=H.useRef(null),[M]=H.useState(null),P=H.useRef(i);H.useEffect(()=>{P.current=i},[i]);const D={version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-satellite":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri, Maxar, Earthstar Geographics"}},layers:[{id:"background",type:"background",paint:{"background-color":"#000"}},{id:"esri-satellite-layer",type:"raster",source:"esri-satellite",minzoom:0,maxzoom:22}]},z=F=>{if(F.getSource("population-source")||F.addSource("population-source",{type:"vector",url:`pmtiles://${lP}`}),!F.getLayer("districts-fill")){let $=["get",`pop_${t}_sum`],Y=[0,1e6,2e6];l==="Male"?$=["get",`male_${t}`]:l==="Female"&&($=["get",`female_${t}`]),l!=="All"&&(Y=[0,50,100]),F.addLayer({id:"districts-fill",type:"fill",source:"population-source","source-layer":"zcta",paint:{"fill-color":["interpolate",["linear"],$,Y[0],"#FEF2E8",Y[1],"#F58220",Y[2],"#D66B12"],"fill-opacity":.9,"fill-outline-color":"#FFFFFF"},layout:{visibility:e==="population"?"visible":"none"}}),F.addLayer({id:"districts-border",type:"line",source:"population-source","source-layer":"zcta",paint:{"line-color":"#FFFFFF","line-width":.8,"line-opacity":.8},layout:{visibility:e==="population"?"visible":"none"}}),F.on("click","districts-fill",K=>{if(K.features&&K.features.length>0){const q=K.features[0],he=q.properties;if(P.current&&P.current(he),q.geometry){const ye=new md.LngLatBounds,ge=Te=>{Array.isArray(Te[0])?Te.forEach(ke=>ge(ke)):ye.extend(Te)};ge(q.geometry.coordinates),ye.isEmpty()||F.fitBounds(ye,{padding:80,duration:1200,essential:!0})}}}),F.on("mouseenter","districts-fill",()=>{F.getCanvas().style.cursor="pointer"}),F.on("mouseleave","districts-fill",()=>{F.getCanvas().style.cursor=""})}};return H.useEffect(()=>{if(!v.current)return;const F=new md.Map({container:v.current,style:D,center:[85.8245,20.2961],zoom:5,attributionControl:!1,interactive:!0});return F.on("load",async()=>{F.resize();try{const Y=await new vv(lP).getHeader();if(Y.minLon!==void 0){const K=[[Y.minLon,Y.minLat],[Y.maxLon,Y.maxLat]];c.current=K,F.fitBounds(K,{padding:40,duration:0})}}catch($){console.warn("Could not auto-center from PMTiles header",$)}z(F)}),_.current=F,()=>{_.current?.remove(),_.current=null}},[]),H.useEffect(()=>{_.current?.getLayer("districts-fill")&&_.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none"),_.current?.getLayer("districts-border")&&_.current.setLayoutProperty("districts-border","visibility",e==="population"?"visible":"none")},[e]),H.useEffect(()=>{if(_.current?.getLayer("districts-fill")){let F,$;if(l==="Male"?(F=`male_${t}`,$=[45,50,55]):l==="Female"?(F=`female_${t}`,$=[45,50,55]):(F=`pop_${t}_sum`,$=[1e5,1e6,25e5]),M&&M[F]){const Y=M[F];if(Y.min!==void 0&&Y.max!==void 0){const K=Number(Y.min),q=Number(Y.max);$=[K,K+(q-K)/2,q]}}_.current.setPaintProperty("districts-fill","fill-color",["interpolate",["linear"],["get",F],$[0],"#FEF2E8",$[1],"#F58220",$[2],"#D66B12"]),_.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none")}},[t,l,e,M]),H.useEffect(()=>{if(_.current?.getLayer("districts-fill")){const F=m==="All"?null:["==",["get","region"],m];_.current.setFilter("districts-fill",F),_.current?.getLayer("districts-border")&&_.current.setFilter("districts-border",F)}},[m]),le.jsx("div",{className:"relative w-full h-full bg-black",children:le.jsx("div",{ref:v,className:"w-full h-full"})})},kH="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",uP={version:8,sources:{satellite:{type:"raster",tiles:[kH],tileSize:256,attribution:" Esri, Maxar, Earthstar Geographics"}},layers:[{id:"satellite-layer",type:"raster",source:"satellite",minzoom:0,maxzoom:22}]};function RH(){const e=H.useRef(null),t=H.useRef(null),i=H.useRef(null),[l,m]=H.useState(50),[v,_]=H.useState(!1),c=H.useRef(null),M=H.useRef(null);H.useEffect(()=>{if(!t.current||!i.current)return;const D=[84.8245,20.2961],z=5.5;c.current=new md.Map({container:t.current,style:uP,center:D,zoom:z,attributionControl:!1}),M.current=new md.Map({container:i.current,style:uP,center:D,zoom:z,interactive:!1,attributionControl:!1});const F=c.current,$=M.current,Y=()=>{$.jumpTo({center:F.getCenter(),zoom:F.getZoom(),bearing:F.getBearing(),pitch:F.getPitch()})};F.on("move",Y),F.on("load",()=>{F.resize(),$.resize(),_(!0)});const K=setTimeout(()=>{F.resize(),$.resize()},500);return()=>{clearTimeout(K),F.remove(),$.remove()}},[]);const P=D=>{m(Number(D.target.value))};return le.jsxs("div",{ref:e,className:"relative w-full h-full overflow-hidden bg-gray-900 shadow-inner",children:[le.jsxs("div",{className:"absolute inset-0",children:[le.jsx("div",{ref:t,className:"absolute inset-0 w-full h-full"}),le.jsx("div",{ref:i,className:"absolute inset-0 w-full h-full pointer-events-none",style:{clipPath:`inset(0 0 0 ${l}%)`,zIndex:1}})]}),le.jsxs("div",{className:"absolute inset-0 z-30 flex items-center justify-center pointer-events-none",children:[le.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-[rgb(214,107,18)] z-20 flex items-center justify-center pointer-events-none",style:{left:`${l}%`,transform:"translateX(-50%)"},children:le.jsx("div",{className:"absolute w-6 h-6 rounded-full bg-[rgb(214,107,18)] border-2 border-white shadow-lg top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2"})}),le.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",value:l,onChange:P,className:"absolute inset-x-0 w-full h-full opacity-0 cursor-ew-resize pointer-events-auto"})]}),!v&&le.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/80 z-50",children:le.jsxs("div",{className:"flex flex-col items-center gap-3",children:[le.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),le.jsx("span",{className:"text-white text-[10px] font-bold tracking-widest uppercase opacity-50",children:"Initializing Comparison"})]})})]})}const LH=({selectedDistrict:e="Odisha",data:t,allDistrictsData:i})=>{const[l,m]=H.useState(2020),[v,_]=H.useState(2025),[c,M]=H.useState("lulc"),[P,D]=H.useState("Density"),[z,F]=H.useState("What"),[$,Y]=H.useState(!1),K=b0.useMemo(()=>{if(!i)return new Map;const Ue=new Map;return i.forEach(Je=>{const Le=Je.district_name||Je.NAME||Je.name,Ge=z0[Le]||Le;Ge&&Ue.set(Ge,Je)}),Ue},[i]),q=(Ue,Je)=>{const Le=parseInt(Je);if(e===Ue&&t){const st=t[`pop_${Je}_sum`];if(st!=null)return typeof st=="string"?parseFloat(st):st}if(K.has(Ue)){const pt=K.get(Ue)[`pop_${Je}_sum`];if(pt!=null)return typeof pt=="string"?parseFloat(pt):pt}if(Le>2024){let st=0;if(e===Ue&&t){const pt=t.pop_2024_sum;pt&&(st=typeof pt=="string"?parseFloat(pt):pt)}if(!st&&K.has(Ue)){const Rt=K.get(Ue).pop_2024_sum;Rt&&(st=typeof Rt=="string"?parseFloat(Rt):Rt)}if(st>0){const pt=Le-2024,Rt=Ue.length%10/2e3;return st*Math.pow(1.012+Rt,pt)}}return 8e5+(Ue.length+parseInt(Je))*5e4},he=b0.useMemo(()=>{let Ue=[];if(i&&i.length>0){const Je=i[0],Le=Object.keys(Je).filter(Ge=>/^pop_\d{4}_sum$/.test(Ge)).map(Ge=>Ge.split("_")[1]).sort();Le.length>0&&(Ue=Le)}return Ue},[i]),ye=b0.useMemo(()=>Sw.map(Je=>{const Le=Je.length,Ge=he.map(pt=>({year:pt,value:q(Je,pt)})),st=Ge[Ge.length-1]?.value||0;return{name:Je,latestPop:st,population:(st/1e6).toFixed(2)+"M",density:(400+Le*50).toFixed(0)+"/km",migration:"+"+(5+Le*2).toFixed(1)+"k",growth:"+"+(1.2+Le*.3).toFixed(1)+"%",trendData:Ge}}).sort((Je,Le)=>Le.latestPop-Je.latestPop).map((Je,Le)=>({...Je,rank:Le+1})),[he,i,t,e]),ge=(Ue,Je)=>{const Ge=(Ue-2020)*25e3,st=Math.abs(12e5+Ge+(Je==="population"?0:-5e5)),pt=Je==="population"?st:st/1e3,Rt=((pt-(Je==="population"?12e5:700))/(Je==="population"?12e5:700)*100).toFixed(1);return{value:Je==="population"?(pt/1e6).toFixed(2)+"M":Math.round(pt).toLocaleString(),growth:`${parseFloat(Rt)>0?"+":""}${Rt}%`,subMetric:Je==="population"?"Total Population":Je==="nightlight"?"Light Intensity":"Units",rawGrowth:parseFloat(Rt)}},Te=ge(l,c),ke=ge(v,c),Pe=(ke.rawGrowth-Te.rawGrowth).toFixed(1),Re=ye.findIndex(Ue=>Ue.name===e);let ot=[];if(Re===-1||Re<10)ot=ye.slice(0,10);else{const Ue=ye.slice(0,4),Je=Re,Le=Math.min(ye.length,Je+6),Ge=ye.slice(Je,Le);ot=[...Ue,{isSeparator:!0},...Ge]}const bt=(Ue,Je)=>{if(!t)return Je;const Le=`pop_${Ue}_sum`,Ge=t[Le];if(Ge==null)return Je;const st=typeof Ge=="string"?parseFloat(Ge):Ge;return st>1e3?st/1e6:st},We=(()=>{const Ue=["2013","2015","2017","2019","2020","2021","2022","2023","2024","2025","2026","2027","2028","2029","2030"],Je={2013:45.2,2015:46.2,2017:47.2,2019:48.2,2020:50.5,2021:52.8,2022:55.1,2023:57.3,2024:59.5};let Le=Ue;if(t){const st=Object.keys(t).filter(pt=>/^pop_\d{4}_sum$/.test(pt)).map(pt=>pt.split("_")[1]).sort();st.length>0&&(Le=st)}return t?Le.map(Ge=>{const st=bt(Ge,0);return{year:Ge,pop:st,popActual:parseInt(Ge)<=2025?st:null,popProjected:parseInt(Ge)>=2025?st:null}}).filter(Ge=>Ge.pop>0):Le.map(Ge=>({year:Ge,pop:Je[Ge]||0,popActual:parseInt(Ge)<=2024?Je[Ge]:null,popProjected:parseInt(Ge)>=2024?Je[Ge]||60+(parseInt(Ge)-2024)*.5:null}))})(),Ve=Array.from({length:11},(Ue,Je)=>2020+Je),Ot={What:[{title:"1",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"2",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"3",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."}],How:[{title:"1",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"2",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"3",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."}],Why:[{title:"1",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"2",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."},{title:"3",desc:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book."}]};return le.jsx("div",{className:"bg-white min-h-[500px]",children:le.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-10 space-y-12",children:[le.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:le.jsxs("div",{children:[le.jsxs("h2",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[le.jsx(IP,{className:"w-6 h-6 text-black"}),"Comparative Analysis - ",e," ",e==="Odisha"?"State":"District"]}),le.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:["Visualizing spatiotemporal changes in ",e," ",e==="Odisha"?"State":"District","."]})]})}),le.jsx("section",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden",children:le.jsxs("div",{className:"bg-gray-50 p-6 md:p-8",children:[le.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[le.jsxs("div",{className:"space-y-1.5",children:[le.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Metric Layer"}),le.jsxs("div",{className:"relative",children:[le.jsxs("select",{value:c,onChange:Ue=>M(Ue.target.value),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:[le.jsx("option",{value:"lulc",children:"Land Use / Land Cover"}),le.jsx("option",{value:"nightlight",children:"Night Lights"}),le.jsx("option",{value:"buildup",children:"Built-up Area"})]}),le.jsx(Ig,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),le.jsxs("div",{className:"space-y-1.5",children:[le.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Year 1 (Baseline)"}),le.jsxs("div",{className:"relative",children:[le.jsx("select",{value:l,onChange:Ue=>m(parseInt(Ue.target.value)),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:Ve.map(Ue=>le.jsx("option",{value:Ue,children:Ue},Ue))}),le.jsx(Ig,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),le.jsxs("div",{className:"space-y-1.5",children:[le.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Year 2 (Current)"}),le.jsxs("div",{className:"relative",children:[le.jsx("select",{value:v,onChange:Ue=>_(parseInt(Ue.target.value)),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:Ve.map(Ue=>le.jsx("option",{value:Ue,children:Ue},Ue))}),le.jsx(Ig,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),le.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 relative mb-8",children:[le.jsx("div",{className:"hidden md:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full border border-gray-200 z-10 items-center justify-center shadow-sm text-[10px] font-bold text-gray-400",children:"VS"}),le.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm relative overflow-hidden group hover:border-gray-300 transition-colors",children:[le.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:le.jsx(r3,{className:"w-20 h-20 text-gray-500"})}),le.jsxs("div",{className:"relative z-10",children:[le.jsxs("p",{className:"text-xs text-gray-500 font-bold uppercase mb-2",children:[l," Baseline"]}),le.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[le.jsx("span",{className:"text-2xl font-bold text-gray-900",children:Te.value}),le.jsx("span",{className:"text-xs text-gray-500 font-medium",children:Te.subMetric})]}),le.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold bg-gray-100 text-gray-600",children:"Ref."})]})]}),le.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm relative overflow-hidden group hover:border-primary/50 transition-colors",children:[le.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:le.jsx(m3,{className:"w-20 h-20 text-primary"})}),le.jsxs("div",{className:"relative z-10",children:[le.jsxs("p",{className:"text-xs text-primary font-bold uppercase mb-2",children:[v," Current"]}),le.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[le.jsx("span",{className:"text-2xl font-bold text-gray-900",children:ke.value}),le.jsx("span",{className:"text-xs text-gray-500 font-medium",children:ke.subMetric})]}),le.jsx("div",{className:"flex items-center gap-2",children:le.jsxs("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold ${parseFloat(Pe)>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[parseFloat(Pe)>=0?"+":"",Pe,"% Change"]})})]})]})]}),le.jsx("div",{className:"relative w-full h-[400px] rounded-xl overflow-hidden shadow-sm border border-gray-200 select-none group",children:le.jsx(RH,{})})]})}),le.jsxs("div",{className:"space-y-6",children:[le.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:le.jsxs("div",{children:[le.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[le.jsx(kT,{className:"w-6 h-6 text-black"}),"Population Projections - ",e]}),le.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:["Long-term demographic forecasting and growth trajectory modeling for ",e," ",e==="Odisha"?"State":"District","."]})]})}),le.jsx("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8",children:le.jsx("div",{className:"h-72 w-full",children:le.jsx(G1,{width:"100%",height:"100%",children:le.jsxs(vw,{data:We,children:[le.jsxs("defs",{children:[le.jsxs("linearGradient",{id:"colorPop",x1:"0",y1:"0",x2:"0",y2:"1",children:[le.jsx("stop",{offset:"5%",stopColor:"#F58220",stopOpacity:.3}),le.jsx("stop",{offset:"95%",stopColor:"#F58220",stopOpacity:0})]}),le.jsxs("linearGradient",{id:"colorPopProj",x1:"0",y1:"0",x2:"0",y2:"1",children:[le.jsx("stop",{offset:"5%",stopColor:"#F58220",stopOpacity:.1}),le.jsx("stop",{offset:"95%",stopColor:"#F58220",stopOpacity:0})]})]}),le.jsx(vk,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",strokeOpacity:.5}),le.jsx(Dk,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#6B7280"},dy:10}),le.jsx(Ok,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#6B7280"},tickFormatter:Ue=>`${Ue}M`}),le.jsx(yC,{cursor:{stroke:"#F58220",strokeWidth:1,strokeDasharray:"4 4"},content:({active:Ue,payload:Je,label:Le})=>{if(Ue&&Je&&Je.length){let Ge=Je[0];if(Je.length>1){const De=Je.find(lt=>lt.name==="Population");De&&(Ge=De)}if(!Ge)return null;const st=Ge.value,pt=typeof st=="number"?st.toFixed(2)+"M":st,Rt=Ge.name==="Projected"?"Projected ":"Population";return le.jsxs("div",{className:"bg-white border-0 shadow-xl rounded-2xl p-3 md:p-4 min-w-[150px]",children:[le.jsx("p",{className:"text-gray-500 text-[10px] font-bold uppercase tracking-widest mb-1",children:Le}),le.jsxs("p",{className:"text-[#F58220] text-[12px] font-black",children:[Rt," : ",pt]})]})}return null}}),le.jsx(pv,{type:"monotone",dataKey:"popActual",stroke:"#F58220",strokeWidth:4,fill:"url(#colorPop)",fillOpacity:1,activeDot:{r:6,strokeWidth:0,fill:"#D66B12"},color:"#F58220",name:"Population",connectNulls:!1}),le.jsx(pv,{type:"monotone",dataKey:"popProjected",stroke:"#F58220",strokeWidth:3,strokeDasharray:"5 5",fill:"url(#colorPopProj)",fillOpacity:1,activeDot:{r:6,strokeWidth:0,fill:"#D66B12"},color:"#F58220",name:"Projected",connectNulls:!1})]})})})})]}),le.jsxs("div",{className:"space-y-6",children:[le.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[le.jsxs("div",{children:[le.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[le.jsx(kT,{className:"w-6 h-6 text-black"}),"Change Analysis Summary"]}),le.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]}),le.jsx("div",{className:"flex bg-gray-50 p-1 rounded-xl border border-gray-200 shadow-inner",children:["What","How","Why"].map(Ue=>le.jsx("button",{onClick:()=>F(Ue),className:`px-6 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${z===Ue?"bg-[#F58220] text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:Ue},Ue))})]}),le.jsxs("section",{className:"bg-gray-50 border rounded-2xl p-6 md:p-8",children:[le.jsx("div",{className:"mb-8",children:le.jsxs("div",{className:"animate-in fade-in slide-in-from-left-4 duration-300 key={activeTab}",children:[z==="What"&&le.jsxs(le.Fragment,{children:[le.jsx("h4",{className:"font-bold font-black mb-3 uppercase text-xs tracking-wider",children:"What Changed?"}),le.jsxs("p",{className:"text-gray-600 leading-relaxed text-sm",children:["Rapid urbanization in the northern corridors has led to a ",le.jsx("span",{className:"font-semibold text-gray-900",children:"15% increase"})," in built-up areas, replacing traditional agricultural zones."]})]}),z==="How"&&le.jsxs(le.Fragment,{children:[le.jsx("h4",{className:"font-bold font-black mb-3 uppercase text-xs tracking-wider",children:"How it happened?"}),le.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:"Infrastructure expansion, specifically the new ring road project, catalyzed residential development. Satellite data shows clear linear growth patterns."})]}),z==="Why"&&le.jsxs(le.Fragment,{children:[le.jsx("h4",{className:"font-bold font-black mb-3 uppercase text-xs tracking-wider",children:"Why it matters?"}),le.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:"This shift places pressure on existing water infrastructure and demands immediate upgrades to the electrical grid to support 2030 targets."})]})]})}),le.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 pt-6 border-t border-blue-200/50 h-[500px]",children:[le.jsx("div",{className:"w-full lg:w-3/4 rounded-2xl overflow-hidden border border-gray-200 shadow-sm relative",children:le.jsx(zH,{activeLayer:"buildup",selectedYear:"2025"})}),le.jsx("div",{className:"w-full lg:w-1/4 flex flex-col gap-4 overflow-y-auto pr-1 custom-scrollbar",children:Ot[z].map((Ue,Je)=>le.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all animate-in fade-in slide-in-from-right-4 duration-500",style:{animationDelay:`${Je*100}ms`},children:[le.jsx("h4",{className:"font-bold text-xs uppercase tracking-wide text-gray-500 mb-2",children:Ue.title}),le.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:Ue.desc})]},Je))})]})]})]}),le.jsxs("div",{className:"space-y-6",children:[le.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[le.jsxs("div",{children:[le.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[le.jsx(y3,{className:"w-6 h-6 text-black"}),"Regional Performance Matrix"]}),le.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]}),le.jsx("div",{className:"flex bg-gray-50 p-1 rounded-xl border border-gray-200 shadow-inner",children:["Density","Growth","Urbanization","Migration"].map(Ue=>le.jsx("button",{onClick:()=>D(Ue),className:`px-4 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${P===Ue?"bg-[#F58220] text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:Ue},Ue))})]}),le.jsxs("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8 overflow-hidden",children:[le.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100",children:le.jsxs("table",{className:"w-full text-sm",children:[le.jsx("thead",{className:"bg-gray-50 text-gray-500 uppercase text-[10px] font-bold tracking-wider",children:le.jsxs("tr",{children:[le.jsx("th",{className:"px-6 py-4 text-center w-20",children:"Rank"}),le.jsx("th",{className:"px-6 py-4 text-left",children:"District Name"}),le.jsx("th",{className:"px-6 py-4 text-right",children:"Total Population"}),le.jsx("th",{className:"px-6 py-4 text-right",children:"Urban Density"}),le.jsx("th",{className:"px-6 py-4 text-right",children:"Migration Net"}),le.jsx("th",{className:"px-6 py-4 text-right",children:"YoY Growth"}),le.jsx("th",{className:"px-6 py-4 text-center",children:"Trend"})]})}),le.jsx("tbody",{className:"divide-y divide-gray-50",children:ot.map((Ue,Je)=>Ue.isSeparator?le.jsx("tr",{className:"bg-gray-50/50",children:le.jsx("td",{colSpan:7,className:"px-6 py-2 text-center text-xs font-medium text-gray-400 tracking-widest uppercase",children:"..."})},`separator-${Je}`):le.jsxs("tr",{className:`transition-all group cursor-pointer ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"bg-[#F58220] shadow-md":"hover:bg-gray-50"}`,children:[le.jsxs("td",{className:`px-6 py-4 text-center font-bold transition-colors first:rounded-l-xl last:rounded-r-xl ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-400 group-hover:text-primary"}`,children:["#",Ue.rank]}),le.jsx("td",{className:`px-6 py-4 font-bold ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-900"}`,children:Ue.name}),le.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Ue.population}),le.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Ue.density}),le.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-secondary"}`,children:Ue.migration}),le.jsx("td",{className:"px-6 py-4 text-right first:rounded-l-xl last:rounded-r-xl",children:le.jsx("span",{className:`px-2 py-1 rounded ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"bg-white/20 text-white font-bold":"text-green-600 bg-green-50/50 font-bold"}`,children:Ue.growth})}),le.jsx("td",{className:"px-6 py-4 first:rounded-l-xl last:rounded-r-xl",children:le.jsx("div",{className:"h-10 w-24 mx-auto",children:le.jsx(G1,{width:"100%",height:"100%",children:le.jsxs(vw,{data:Ue.trendData,children:[le.jsx(yC,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",padding:"4px 8px",fontSize:"10px"},cursor:{stroke:e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"#fff":"#F58220",strokeWidth:1}}),le.jsx("defs",{children:le.jsxs("linearGradient",{id:`gradient-${Ue.rank}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[le.jsx("stop",{offset:"5%",stopColor:e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:.5}),le.jsx("stop",{offset:"95%",stopColor:e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:0})]})}),le.jsx(pv,{type:"monotone",dataKey:"value",stroke:e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"#fff":"#F58220",strokeWidth:1.5,fill:`url(#gradient-${Ue.rank})`})]})})})})]},Ue.rank))})]})}),le.jsx("div",{className:"mt-4 text-center border-t border-gray-50 pt-4",children:le.jsx("button",{onClick:()=>Y(!0),className:"text-xs font-bold text-primary hover:underline flex items-center justify-center gap-1 mx-auto",children:"View Full Dataset"})})]})]}),$&&le.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/50 animate-in fade-in duration-200",children:le.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl animate-in zoom-in-95 duration-200 overflow-hidden",children:[le.jsxs("div",{className:"p-6 border-b border-gray-100 flex items-center justify-between bg-gray-50/50",children:[le.jsxs("div",{children:[le.jsx("h3",{className:"text-xl font-black text-gray-900 tracking-tight",children:"Full Regional Dataset"}),le.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Comprehensive performance metrics for all ",Sw.length," districts."]})]}),le.jsx("button",{onClick:()=>Y(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500",children:le.jsx(S2,{className:"w-5 h-5"})})]}),le.jsx("div",{className:"overflow-auto custom-scrollbar h-[calc(90vh-80px)]",children:le.jsxs("table",{className:"w-full text-sm",children:[le.jsx("thead",{className:"bg-gray-100 text-gray-500 uppercase text-[10px] font-bold tracking-wider sticky top-0 z-50 shadow-sm",children:le.jsxs("tr",{children:[le.jsx("th",{className:"px-6 py-4 text-center w-20 bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Rank"}),le.jsx("th",{className:"px-6 py-4 text-left bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"District"}),le.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Total Pop."}),le.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Density"}),le.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Migration"}),le.jsx("th",{className:"px-6 py-4 text-right bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Growth"}),le.jsx("th",{className:"px-6 py-4 text-center bg-gray-100 border-b border-gray-200 whitespace-nowrap",children:"Trend"})]})}),le.jsx("tbody",{className:"divide-y divide-gray-50",children:ye.map(Ue=>le.jsxs("tr",{className:`transition-all group ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"bg-[#F58220] shadow-md":"hover:bg-gray-50"}`,children:[le.jsxs("td",{className:`px-6 py-4 text-center font-bold transition-colors first:rounded-l-xl last:rounded-r-xl ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-400"}`,children:["#",Ue.rank]}),le.jsx("td",{className:`px-6 py-4 font-bold text-left ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-900"}`,children:Ue.name}),le.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Ue.population}),le.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-gray-600"}`,children:Ue.density}),le.jsx("td",{className:`px-6 py-4 text-right font-medium ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"text-white":"text-secondary"}`,children:Ue.migration}),le.jsx("td",{className:"px-6 py-4 text-right first:rounded-l-xl last:rounded-r-xl",children:le.jsx("span",{className:`px-2 py-1 rounded ${e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"bg-white/20 text-white font-bold":"text-green-600 bg-green-50/50 font-bold"}`,children:Ue.growth})}),le.jsx("td",{className:"px-6 py-4 text-center first:rounded-l-xl last:rounded-r-xl",children:le.jsx("div",{className:"h-8 w-24 mx-auto",children:le.jsx(G1,{width:"100%",height:"100%",children:le.jsxs(vw,{data:Ue.trendData,children:[le.jsx("defs",{children:le.jsxs("linearGradient",{id:`gradient-modal-${Ue.rank}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[le.jsx("stop",{offset:"5%",stopColor:e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:.5}),le.jsx("stop",{offset:"95%",stopColor:e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"#fff":"#F58220",stopOpacity:0})]})}),le.jsx(pv,{type:"monotone",dataKey:"value",stroke:e?.trim().toLowerCase()===Ue.name.trim().toLowerCase()?"#fff":"#F58220",strokeWidth:1.5,fill:`url(#gradient-modal-${Ue.rank})`})]})})})})]},Ue.rank))})]})})]})}),le.jsxs("div",{className:"space-y-6",children:[le.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:le.jsxs("div",{children:[le.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[le.jsx(e3,{className:"w-6 h-6 text-black"}),"Critical Insights & Recommendations"]}),le.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]})}),le.jsx("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8",children:le.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[le.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border-t border-gray-200",children:[le.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Resource Stress"}),le.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:["Water stress levels projected to rise by ",le.jsx("strong",{children:"20%"})," in urban pockets by 2026 due to the current density trajectory. Immediate aquifer recharge implementation recommended."]})]}),le.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border border-gray-200",children:[le.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Housing Capacity"}),le.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:[le.jsx("strong",{children:"Migration inflow"})," is currently exceeding housing development capacity in Sector 4 by a factor of 1.5x, leading to potential unregulated settlement expansion."]})]}),le.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border border-gray-200",children:[le.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Infrastructure Load"}),le.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:["Energy grid loads are peaking at ",le.jsx("strong",{children:"92%"})," capacity during summer months. Grid modernization required before 2026 to avoid brownouts."]})]})]})})]})]})})},fb=({children:e,title:t})=>le.jsx("div",{className:"relative min-h-screen bg-white",children:le.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-2 pb-20",children:[le.jsxs("div",{className:"flex justify-between items-center mb-10",children:[t&&le.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:t}),le.jsx(Og,{to:"/",className:"p-2 text-gray-400 hover:text-orange-500 transition-colors group",title:"Close and return to dashboard",children:le.jsx(S2,{className:"w-6 h-6"})})]}),le.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e})]})}),jH=()=>le.jsx(fb,{title:"About the Project",children:le.jsx("div",{className:"max-w-4xl",children:le.jsx("div",{className:"prose prose-lg text-gray-600 leading-relaxed space-y-6"})})}),NH=()=>le.jsx(fb,{title:"Our Methodology",children:le.jsx("div",{className:"max-w-4xl"})}),BH=()=>le.jsx(fb,{title:"Advanced Analytics",children:le.jsx("div",{className:"max-w-4xl",children:le.jsx("div",{className:"prose prose-lg text-gray-600 leading-relaxed space-y-6"})})}),FH=()=>le.jsx(fb,{title:"Data Catalog",children:le.jsx("div",{className:"max-w-4xl",children:le.jsx("div",{className:"prose prose-lg text-gray-600 leading-relaxed space-y-6"})})}),UH=()=>{const[e,t]=H.useState("Demographics"),[i,l]=H.useState("Odisha"),[m,v]=H.useState(null),[_,c]=H.useState([]);return le.jsxs(le.Fragment,{children:[le.jsx(ij,{currentView:e,onViewChange:t,onDistrictChange:l,onDataChange:v,onDataLoad:c}),le.jsx(LH,{selectedDistrict:i,data:m,allDistrictsData:_})]})},VH=()=>le.jsx(kL,{basename:"/unfpa-dashboard",children:le.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[le.jsx(x3,{}),le.jsxs("div",{className:"flex-1",children:[le.jsxs(cL,{children:[le.jsx(Tg,{path:"/",element:le.jsx(UH,{})}),le.jsx(Tg,{path:"/about",element:le.jsx(jH,{})}),le.jsx(Tg,{path:"/methodology",element:le.jsx(NH,{})}),le.jsx(Tg,{path:"/analytics",element:le.jsx(BH,{})}),le.jsx(Tg,{path:"/catalog",element:le.jsx(FH,{})})]}),le.jsx(b3,{})]})]})});fR.createRoot(document.getElementById("root")).render(le.jsx(H.StrictMode,{children:le.jsx(VH,{})}));
