function $L(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const d in a)if(d!=="default"&&!(d in e)){const g=Object.getOwnPropertyDescriptor(a,d);g&&Object.defineProperty(e,d,g.get?g:{enumerable:!0,get:()=>a[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))a(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&a(v)}).observe(document,{childList:!0,subtree:!0});function i(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerPolicy&&(g.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?g.credentials="include":d.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function a(d){if(d.ep)return;d.ep=!0;const g=i(d);fetch(d.href,g)}})();function Yc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c1={exports:{}},pv={};var pE;function GL(){if(pE)return pv;pE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,d,g){var v=null;if(g!==void 0&&(v=""+g),d.key!==void 0&&(v=""+d.key),"key"in d){g={};for(var u in d)u!=="key"&&(g[u]=d[u])}else g=d;return d=g.ref,{$$typeof:e,type:a,key:v,ref:d!==void 0?d:null,props:g}}return pv.Fragment=t,pv.jsx=i,pv.jsxs=i,pv}var mE;function ZL(){return mE||(mE=1,c1.exports=GL()),c1.exports}var _e=ZL(),h1={exports:{}},wr={};var gE;function HL(){if(gE)return wr;gE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),v=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.iterator;function G(ze){return ze===null||typeof ze!="object"?null:(ze=N&&ze[N]||ze["@@iterator"],typeof ze=="function"?ze:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,$={};function se(ze,at,Pt){this.props=ze,this.context=at,this.refs=$,this.updater=Pt||Y}se.prototype.isReactComponent={},se.prototype.setState=function(ze,at){if(typeof ze!="object"&&typeof ze!="function"&&ze!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ze,at,"setState")},se.prototype.forceUpdate=function(ze){this.updater.enqueueForceUpdate(this,ze,"forceUpdate")};function he(){}he.prototype=se.prototype;function fe(ze,at,Pt){this.props=ze,this.context=at,this.refs=$,this.updater=Pt||Y}var me=fe.prototype=new he;me.constructor=fe,H(me,se.prototype),me.isPureReactComponent=!0;var Ae=Array.isArray;function ge(){}var Se={H:null,A:null,T:null,S:null},Ue=Object.prototype.hasOwnProperty;function et(ze,at,Pt){var zt=Pt.ref;return{$$typeof:e,type:ze,key:at,ref:zt!==void 0?zt:null,props:Pt}}function vt(ze,at){return et(ze.type,at,ze.props)}function pt(ze){return typeof ze=="object"&&ze!==null&&ze.$$typeof===e}function Fe(ze){var at={"=":"=0",":":"=2"};return"$"+ze.replace(/[=:]/g,function(Pt){return at[Pt]})}var Ct=/\/+/g;function It(ze,at){return typeof ze=="object"&&ze!==null&&ze.key!=null?Fe(""+ze.key):at.toString(36)}function jt(ze){switch(ze.status){case"fulfilled":return ze.value;case"rejected":throw ze.reason;default:switch(typeof ze.status=="string"?ze.then(ge,ge):(ze.status="pending",ze.then(function(at){ze.status==="pending"&&(ze.status="fulfilled",ze.value=at)},function(at){ze.status==="pending"&&(ze.status="rejected",ze.reason=at)})),ze.status){case"fulfilled":return ze.value;case"rejected":throw ze.reason}}throw ze}function $e(ze,at,Pt,zt,$t){var Kt=typeof ze;(Kt==="undefined"||Kt==="boolean")&&(ze=null);var Gt=!1;if(ze===null)Gt=!0;else switch(Kt){case"bigint":case"string":case"number":Gt=!0;break;case"object":switch(ze.$$typeof){case e:case t:Gt=!0;break;case D:return Gt=ze._init,$e(Gt(ze._payload),at,Pt,zt,$t)}}if(Gt)return $t=$t(ze),Gt=zt===""?"."+It(ze,0):zt,Ae($t)?(Pt="",Gt!=null&&(Pt=Gt.replace(Ct,"$&/")+"/"),$e($t,at,Pt,"",function(sr){return sr})):$t!=null&&(pt($t)&&($t=vt($t,Pt+($t.key==null||ze&&ze.key===$t.key?"":(""+$t.key).replace(Ct,"$&/")+"/")+Gt)),at.push($t)),1;Gt=0;var Ar=zt===""?".":zt+":";if(Ae(ze))for(var ht=0;ht<ze.length;ht++)zt=ze[ht],Kt=Ar+It(zt,ht),Gt+=$e(zt,at,Pt,Kt,$t);else if(ht=G(ze),typeof ht=="function")for(ze=ht.call(ze),ht=0;!(zt=ze.next()).done;)zt=zt.value,Kt=Ar+It(zt,ht++),Gt+=$e(zt,at,Pt,Kt,$t);else if(Kt==="object"){if(typeof ze.then=="function")return $e(jt(ze),at,Pt,zt,$t);throw at=String(ze),Error("Objects are not valid as a React child (found: "+(at==="[object Object]"?"object with keys {"+Object.keys(ze).join(", ")+"}":at)+"). If you meant to render a collection of children, use an array instead.")}return Gt}function ct(ze,at,Pt){if(ze==null)return ze;var zt=[],$t=0;return $e(ze,zt,"","",function(Kt){return at.call(Pt,Kt,$t++)}),zt}function Et(ze){if(ze._status===-1){var at=ze._result;at=at(),at.then(function(Pt){(ze._status===0||ze._status===-1)&&(ze._status=1,ze._result=Pt)},function(Pt){(ze._status===0||ze._status===-1)&&(ze._status=2,ze._result=Pt)}),ze._status===-1&&(ze._status=0,ze._result=at)}if(ze._status===1)return ze._result.default;throw ze._result}var _t=typeof reportError=="function"?reportError:function(ze){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var at=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ze=="object"&&ze!==null&&typeof ze.message=="string"?String(ze.message):String(ze),error:ze});if(!window.dispatchEvent(at))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ze);return}console.error(ze)},Ut={map:ct,forEach:function(ze,at,Pt){ct(ze,function(){at.apply(this,arguments)},Pt)},count:function(ze){var at=0;return ct(ze,function(){at++}),at},toArray:function(ze){return ct(ze,function(at){return at})||[]},only:function(ze){if(!pt(ze))throw Error("React.Children.only expected to receive a single React element child.");return ze}};return wr.Activity=I,wr.Children=Ut,wr.Component=se,wr.Fragment=i,wr.Profiler=d,wr.PureComponent=fe,wr.StrictMode=a,wr.Suspense=M,wr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Se,wr.__COMPILER_RUNTIME={__proto__:null,c:function(ze){return Se.H.useMemoCache(ze)}},wr.cache=function(ze){return function(){return ze.apply(null,arguments)}},wr.cacheSignal=function(){return null},wr.cloneElement=function(ze,at,Pt){if(ze==null)throw Error("The argument must be a React element, but you passed "+ze+".");var zt=H({},ze.props),$t=ze.key;if(at!=null)for(Kt in at.key!==void 0&&($t=""+at.key),at)!Ue.call(at,Kt)||Kt==="key"||Kt==="__self"||Kt==="__source"||Kt==="ref"&&at.ref===void 0||(zt[Kt]=at[Kt]);var Kt=arguments.length-2;if(Kt===1)zt.children=Pt;else if(1<Kt){for(var Gt=Array(Kt),Ar=0;Ar<Kt;Ar++)Gt[Ar]=arguments[Ar+2];zt.children=Gt}return et(ze.type,$t,zt)},wr.createContext=function(ze){return ze={$$typeof:v,_currentValue:ze,_currentValue2:ze,_threadCount:0,Provider:null,Consumer:null},ze.Provider=ze,ze.Consumer={$$typeof:g,_context:ze},ze},wr.createElement=function(ze,at,Pt){var zt,$t={},Kt=null;if(at!=null)for(zt in at.key!==void 0&&(Kt=""+at.key),at)Ue.call(at,zt)&&zt!=="key"&&zt!=="__self"&&zt!=="__source"&&($t[zt]=at[zt]);var Gt=arguments.length-2;if(Gt===1)$t.children=Pt;else if(1<Gt){for(var Ar=Array(Gt),ht=0;ht<Gt;ht++)Ar[ht]=arguments[ht+2];$t.children=Ar}if(ze&&ze.defaultProps)for(zt in Gt=ze.defaultProps,Gt)$t[zt]===void 0&&($t[zt]=Gt[zt]);return et(ze,Kt,$t)},wr.createRef=function(){return{current:null}},wr.forwardRef=function(ze){return{$$typeof:u,render:ze}},wr.isValidElement=pt,wr.lazy=function(ze){return{$$typeof:D,_payload:{_status:-1,_result:ze},_init:Et}},wr.memo=function(ze,at){return{$$typeof:C,type:ze,compare:at===void 0?null:at}},wr.startTransition=function(ze){var at=Se.T,Pt={};Se.T=Pt;try{var zt=ze(),$t=Se.S;$t!==null&&$t(Pt,zt),typeof zt=="object"&&zt!==null&&typeof zt.then=="function"&&zt.then(ge,_t)}catch(Kt){_t(Kt)}finally{at!==null&&Pt.types!==null&&(at.types=Pt.types),Se.T=at}},wr.unstable_useCacheRefresh=function(){return Se.H.useCacheRefresh()},wr.use=function(ze){return Se.H.use(ze)},wr.useActionState=function(ze,at,Pt){return Se.H.useActionState(ze,at,Pt)},wr.useCallback=function(ze,at){return Se.H.useCallback(ze,at)},wr.useContext=function(ze){return Se.H.useContext(ze)},wr.useDebugValue=function(){},wr.useDeferredValue=function(ze,at){return Se.H.useDeferredValue(ze,at)},wr.useEffect=function(ze,at){return Se.H.useEffect(ze,at)},wr.useEffectEvent=function(ze){return Se.H.useEffectEvent(ze)},wr.useId=function(){return Se.H.useId()},wr.useImperativeHandle=function(ze,at,Pt){return Se.H.useImperativeHandle(ze,at,Pt)},wr.useInsertionEffect=function(ze,at){return Se.H.useInsertionEffect(ze,at)},wr.useLayoutEffect=function(ze,at){return Se.H.useLayoutEffect(ze,at)},wr.useMemo=function(ze,at){return Se.H.useMemo(ze,at)},wr.useOptimistic=function(ze,at){return Se.H.useOptimistic(ze,at)},wr.useReducer=function(ze,at,Pt){return Se.H.useReducer(ze,at,Pt)},wr.useRef=function(ze){return Se.H.useRef(ze)},wr.useState=function(ze){return Se.H.useState(ze)},wr.useSyncExternalStore=function(ze,at,Pt){return Se.H.useSyncExternalStore(ze,at,Pt)},wr.useTransition=function(){return Se.H.useTransition()},wr.version="19.2.4",wr}var yE;function ty(){return yE||(yE=1,h1.exports=HL()),h1.exports}var q=ty();const WL=Yc(q),YL=$L({__proto__:null,default:WL},[q]);var f1={exports:{}},mv={},d1={exports:{}},p1={};var vE;function XL(){return vE||(vE=1,(function(e){function t($e,ct){var Et=$e.length;$e.push(ct);e:for(;0<Et;){var _t=Et-1>>>1,Ut=$e[_t];if(0<d(Ut,ct))$e[_t]=ct,$e[Et]=Ut,Et=_t;else break e}}function i($e){return $e.length===0?null:$e[0]}function a($e){if($e.length===0)return null;var ct=$e[0],Et=$e.pop();if(Et!==ct){$e[0]=Et;e:for(var _t=0,Ut=$e.length,ze=Ut>>>1;_t<ze;){var at=2*(_t+1)-1,Pt=$e[at],zt=at+1,$t=$e[zt];if(0>d(Pt,Et))zt<Ut&&0>d($t,Pt)?($e[_t]=$t,$e[zt]=Et,_t=zt):($e[_t]=Pt,$e[at]=Et,_t=at);else if(zt<Ut&&0>d($t,Et))$e[_t]=$t,$e[zt]=Et,_t=zt;else break e}}return ct}function d($e,ct){var Et=$e.sortIndex-ct.sortIndex;return Et!==0?Et:$e.id-ct.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;e.unstable_now=function(){return g.now()}}else{var v=Date,u=v.now();e.unstable_now=function(){return v.now()-u}}var M=[],C=[],D=1,I=null,N=3,G=!1,Y=!1,H=!1,$=!1,se=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function me($e){for(var ct=i(C);ct!==null;){if(ct.callback===null)a(C);else if(ct.startTime<=$e)a(C),ct.sortIndex=ct.expirationTime,t(M,ct);else break;ct=i(C)}}function Ae($e){if(H=!1,me($e),!Y)if(i(M)!==null)Y=!0,ge||(ge=!0,Fe());else{var ct=i(C);ct!==null&&jt(Ae,ct.startTime-$e)}}var ge=!1,Se=-1,Ue=5,et=-1;function vt(){return $?!0:!(e.unstable_now()-et<Ue)}function pt(){if($=!1,ge){var $e=e.unstable_now();et=$e;var ct=!0;try{e:{Y=!1,H&&(H=!1,he(Se),Se=-1),G=!0;var Et=N;try{t:{for(me($e),I=i(M);I!==null&&!(I.expirationTime>$e&&vt());){var _t=I.callback;if(typeof _t=="function"){I.callback=null,N=I.priorityLevel;var Ut=_t(I.expirationTime<=$e);if($e=e.unstable_now(),typeof Ut=="function"){I.callback=Ut,me($e),ct=!0;break t}I===i(M)&&a(M),me($e)}else a(M);I=i(M)}if(I!==null)ct=!0;else{var ze=i(C);ze!==null&&jt(Ae,ze.startTime-$e),ct=!1}}break e}finally{I=null,N=Et,G=!1}ct=void 0}}finally{ct?Fe():ge=!1}}}var Fe;if(typeof fe=="function")Fe=function(){fe(pt)};else if(typeof MessageChannel<"u"){var Ct=new MessageChannel,It=Ct.port2;Ct.port1.onmessage=pt,Fe=function(){It.postMessage(null)}}else Fe=function(){se(pt,0)};function jt($e,ct){Se=se(function(){$e(e.unstable_now())},ct)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ue=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_next=function($e){switch(N){case 1:case 2:case 3:var ct=3;break;default:ct=N}var Et=N;N=ct;try{return $e()}finally{N=Et}},e.unstable_requestPaint=function(){$=!0},e.unstable_runWithPriority=function($e,ct){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var Et=N;N=$e;try{return ct()}finally{N=Et}},e.unstable_scheduleCallback=function($e,ct,Et){var _t=e.unstable_now();switch(typeof Et=="object"&&Et!==null?(Et=Et.delay,Et=typeof Et=="number"&&0<Et?_t+Et:_t):Et=_t,$e){case 1:var Ut=-1;break;case 2:Ut=250;break;case 5:Ut=1073741823;break;case 4:Ut=1e4;break;default:Ut=5e3}return Ut=Et+Ut,$e={id:D++,callback:ct,priorityLevel:$e,startTime:Et,expirationTime:Ut,sortIndex:-1},Et>_t?($e.sortIndex=Et,t(C,$e),i(M)===null&&$e===i(C)&&(H?(he(Se),Se=-1):H=!0,jt(Ae,Et-_t))):($e.sortIndex=Ut,t(M,$e),Y||G||(Y=!0,ge||(ge=!0,Fe()))),$e},e.unstable_shouldYield=vt,e.unstable_wrapCallback=function($e){var ct=N;return function(){var Et=N;N=ct;try{return $e.apply(this,arguments)}finally{N=Et}}}})(p1)),p1}var _E;function KL(){return _E||(_E=1,d1.exports=XL()),d1.exports}var m1={exports:{}},vo={};var xE;function QL(){if(xE)return vo;xE=1;var e=ty();function t(M){var C="https://react.dev/errors/"+M;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)C+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+M+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},d=Symbol.for("react.portal");function g(M,C,D){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:I==null?null:""+I,children:M,containerInfo:C,implementation:D}}var v=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(M,C){if(M==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return vo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,vo.createPortal=function(M,C){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(t(299));return g(M,C,null,D)},vo.flushSync=function(M){var C=v.T,D=a.p;try{if(v.T=null,a.p=2,M)return M()}finally{v.T=C,a.p=D,a.d.f()}},vo.preconnect=function(M,C){typeof M=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,a.d.C(M,C))},vo.prefetchDNS=function(M){typeof M=="string"&&a.d.D(M)},vo.preinit=function(M,C){if(typeof M=="string"&&C&&typeof C.as=="string"){var D=C.as,I=u(D,C.crossOrigin),N=typeof C.integrity=="string"?C.integrity:void 0,G=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;D==="style"?a.d.S(M,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:I,integrity:N,fetchPriority:G}):D==="script"&&a.d.X(M,{crossOrigin:I,integrity:N,fetchPriority:G,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},vo.preinitModule=function(M,C){if(typeof M=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var D=u(C.as,C.crossOrigin);a.d.M(M,{crossOrigin:D,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&a.d.M(M)},vo.preload=function(M,C){if(typeof M=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var D=C.as,I=u(D,C.crossOrigin);a.d.L(M,D,{crossOrigin:I,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},vo.preloadModule=function(M,C){if(typeof M=="string")if(C){var D=u(C.as,C.crossOrigin);a.d.m(M,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:D,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else a.d.m(M)},vo.requestFormReset=function(M){a.d.r(M)},vo.unstable_batchedUpdates=function(M,C){return M(C)},vo.useFormState=function(M,C,D){return v.H.useFormState(M,C,D)},vo.useFormStatus=function(){return v.H.useHostTransitionStatus()},vo.version="19.2.4",vo}var bE;function PD(){if(bE)return m1.exports;bE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),m1.exports=QL(),m1.exports}var wE;function JL(){if(wE)return mv;wE=1;var e=KL(),t=ty(),i=PD();function a(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function g(l){var h=l,y=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(y=h.return),l=h.return;while(l)}return h.tag===3?y:null}function v(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function u(l){if(l.tag===31){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function M(l){if(g(l)!==l)throw Error(a(188))}function C(l){var h=l.alternate;if(!h){if(h=g(l),h===null)throw Error(a(188));return h!==l?null:l}for(var y=l,S=h;;){var z=y.return;if(z===null)break;var j=z.alternate;if(j===null){if(S=z.return,S!==null){y=S;continue}break}if(z.child===j.child){for(j=z.child;j;){if(j===y)return M(z),l;if(j===S)return M(z),h;j=j.sibling}throw Error(a(188))}if(y.return!==S.return)y=z,S=j;else{for(var Q=!1,ce=z.child;ce;){if(ce===y){Q=!0,y=z,S=j;break}if(ce===S){Q=!0,S=z,y=j;break}ce=ce.sibling}if(!Q){for(ce=j.child;ce;){if(ce===y){Q=!0,y=j,S=z;break}if(ce===S){Q=!0,S=j,y=z;break}ce=ce.sibling}if(!Q)throw Error(a(189))}}if(y.alternate!==S)throw Error(a(190))}if(y.tag!==3)throw Error(a(188));return y.stateNode.current===y?l:h}function D(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l;for(l=l.child;l!==null;){if(h=D(l),h!==null)return h;l=l.sibling}return null}var I=Object.assign,N=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Ae=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),et=Symbol.for("react.activity"),vt=Symbol.for("react.memo_cache_sentinel"),pt=Symbol.iterator;function Fe(l){return l===null||typeof l!="object"?null:(l=pt&&l[pt]||l["@@iterator"],typeof l=="function"?l:null)}var Ct=Symbol.for("react.client.reference");function It(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Ct?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case H:return"Fragment";case se:return"Profiler";case $:return"StrictMode";case Ae:return"Suspense";case ge:return"SuspenseList";case et:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Y:return"Portal";case fe:return l.displayName||"Context";case he:return(l._context.displayName||"Context")+".Consumer";case me:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Se:return h=l.displayName||null,h!==null?h:It(l.type)||"Memo";case Ue:h=l._payload,l=l._init;try{return It(l(h))}catch{}}return null}var jt=Array.isArray,$e=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Et={pending:!1,data:null,method:null,action:null},_t=[],Ut=-1;function ze(l){return{current:l}}function at(l){0>Ut||(l.current=_t[Ut],_t[Ut]=null,Ut--)}function Pt(l,h){Ut++,_t[Ut]=l.current,l.current=h}var zt=ze(null),$t=ze(null),Kt=ze(null),Gt=ze(null);function Ar(l,h){switch(Pt(Kt,h),Pt($t,l),Pt(zt,null),h.nodeType){case 9:case 11:l=(l=h.documentElement)&&(l=l.namespaceURI)?Pc(l):0;break;default:if(l=h.tagName,h=h.namespaceURI)h=Pc(h),l=Xy(h,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}at(zt),Pt(zt,l)}function ht(){at(zt),at($t),at(Kt)}function sr(l){l.memoizedState!==null&&Pt(Gt,l);var h=zt.current,y=Xy(h,l.type);h!==y&&(Pt($t,l),Pt(zt,y))}function mr(l){$t.current===l&&(at(zt),at($t)),Gt.current===l&&(at(Gt),zp._currentValue=Et)}var St,Dn;function cr(l){if(St===void 0)try{throw Error()}catch(y){var h=y.stack.trim().match(/\n( *(at )?)/);St=h&&h[1]||"",Dn=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+St+l+Dn}var Wr=!1;function ln(l,h){if(!l||Wr)return"";Wr=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(ot){var tt=ot}Reflect.construct(l,[],bt)}else{try{bt.call()}catch(ot){tt=ot}l.call(bt.prototype)}}else{try{throw Error()}catch(ot){tt=ot}(bt=l())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(ot){if(ot&&tt&&typeof ot.stack=="string")return[ot.stack,tt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var z=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");z&&z.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=S.DetermineComponentFrameRoot(),Q=j[0],ce=j[1];if(Q&&ce){var Re=Q.split(`
`),Je=ce.split(`
`);for(z=S=0;S<Re.length&&!Re[S].includes("DetermineComponentFrameRoot");)S++;for(;z<Je.length&&!Je[z].includes("DetermineComponentFrameRoot");)z++;if(S===Re.length||z===Je.length)for(S=Re.length-1,z=Je.length-1;1<=S&&0<=z&&Re[S]!==Je[z];)z--;for(;1<=S&&0<=z;S--,z--)if(Re[S]!==Je[z]){if(S!==1||z!==1)do if(S--,z--,0>z||Re[S]!==Je[z]){var ft=`
`+Re[S].replace(" at new "," at ");return l.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",l.displayName)),ft}while(1<=S&&0<=z);break}}}finally{Wr=!1,Error.prepareStackTrace=y}return(y=l?l.displayName||l.name:"")?cr(y):""}function Lr(l,h){switch(l.tag){case 26:case 27:case 5:return cr(l.type);case 16:return cr("Lazy");case 13:return l.child!==h&&h!==null?cr("Suspense Fallback"):cr("Suspense");case 19:return cr("SuspenseList");case 0:case 15:return ln(l.type,!1);case 11:return ln(l.type.render,!1);case 1:return ln(l.type,!0);case 31:return cr("Activity");default:return""}}function Ea(l){try{var h="",y=null;do h+=Lr(l,y),y=l,l=l.return;while(l);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var il=Object.prototype.hasOwnProperty,Ss=e.unstable_scheduleCallback,Go=e.unstable_cancelCallback,So=e.unstable_shouldYield,Wu=e.unstable_requestPaint,oi=e.unstable_now,Aa=e.unstable_getCurrentPriorityLevel,Yu=e.unstable_ImmediatePriority,Ts=e.unstable_UserBlockingPriority,Es=e.unstable_NormalPriority,Qc=e.unstable_LowPriority,al=e.unstable_IdlePriority,Be=e.log,ee=e.unstable_setDisableYieldValue,ne=null,ae=null;function Te(l){if(typeof Be=="function"&&ee(l),ae&&typeof ae.setStrictMode=="function")try{ae.setStrictMode(ne,l)}catch{}}var Oe=Math.clz32?Math.clz32:Ne,Ze=Math.log,qe=Math.LN2;function Ne(l){return l>>>=0,l===0?32:31-(Ze(l)/qe|0)|0}var Ge=256,mt=262144,nt=4194304;function De(l){var h=l&42;if(h!==0)return h;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Bt(l,h,y){var S=l.pendingLanes;if(S===0)return 0;var z=0,j=l.suspendedLanes,Q=l.pingedLanes;l=l.warmLanes;var ce=S&134217727;return ce!==0?(S=ce&~j,S!==0?z=De(S):(Q&=ce,Q!==0?z=De(Q):y||(y=ce&~l,y!==0&&(z=De(y))))):(ce=S&~j,ce!==0?z=De(ce):Q!==0?z=De(Q):y||(y=S&~l,y!==0&&(z=De(y)))),z===0?0:h!==0&&h!==z&&(h&j)===0&&(j=z&-z,y=h&-h,j>=y||j===32&&(y&4194048)!==0)?h:z}function ir(l,h){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&h)===0}function Yt(l,h){switch(l){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jt(){var l=nt;return nt<<=1,(nt&62914560)===0&&(nt=4194304),l}function er(l){for(var h=[],y=0;31>y;y++)h.push(l);return h}function ar(l,h){l.pendingLanes|=h,h!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function fn(l,h,y,S,z,j){var Q=l.pendingLanes;l.pendingLanes=y,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=y,l.entangledLanes&=y,l.errorRecoveryDisabledLanes&=y,l.shellSuspendCounter=0;var ce=l.entanglements,Re=l.expirationTimes,Je=l.hiddenUpdates;for(y=Q&~y;0<y;){var ft=31-Oe(y),bt=1<<ft;ce[ft]=0,Re[ft]=-1;var tt=Je[ft];if(tt!==null)for(Je[ft]=null,ft=0;ft<tt.length;ft++){var ot=tt[ft];ot!==null&&(ot.lane&=-536870913)}y&=~bt}S!==0&&On(l,S,0),j!==0&&z===0&&l.tag!==0&&(l.suspendedLanes|=j&~(Q&~h))}function On(l,h,y){l.pendingLanes|=h,l.suspendedLanes&=~h;var S=31-Oe(h);l.entangledLanes|=h,l.entanglements[S]=l.entanglements[S]|1073741824|y&261930}function wn(l,h){var y=l.entangledLanes|=h;for(l=l.entanglements;y;){var S=31-Oe(y),z=1<<S;z&h|l[S]&h&&(l[S]|=h),y&=~z}}function Mi(l,h){var y=h&-h;return y=(y&42)!==0?1:dn(y),(y&(l.suspendedLanes|h))!==0?0:y}function dn(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function xt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Or(){var l=ct.p;return l!==0?l:(l=window.event,l===void 0?32:y0(l.type))}function on(l,h){var y=ct.p;try{return ct.p=l,h()}finally{ct.p=y}}var ta=Math.random().toString(36).slice(2),Fr="__reactFiber$"+ta,Tt="__reactProps$"+ta,Qt="__reactContainer$"+ta,hr="__reactEvents$"+ta,Ma="__reactListeners$"+ta,Sf="__reactHandles$"+ta,Zo="__reactResources$"+ta,fr="__reactMarker$"+ta;function Hl(l){delete l[Fr],delete l[Tt],delete l[hr],delete l[Ma],delete l[Sf]}function Ho(l){var h=l[Fr];if(h)return h;for(var y=l.parentNode;y;){if(h=y[Qt]||y[Fr]){if(y=h.alternate,h.child!==null||y!==null&&y.child!==null)for(l=gg(l);l!==null;){if(y=l[Fr])return y;l=gg(l)}return h}l=y,y=l.parentNode}return null}function As(l){if(l=l[Fr]||l[Qt]){var h=l.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return l}return null}function Wo(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l.stateNode;throw Error(a(33))}function Yo(l){var h=l[Zo];return h||(h=l[Zo]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function In(l){l[fr]=!0}var Xu=new Set,zi={};function Tr(l,h){Ms(l,h),Ms(l+"Capture",h)}function Ms(l,h){for(zi[l]=h,l=0;l<h.length;l++)Xu.add(h[l])}var Ku=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},ol={};function To(l){return il.call(ol,l)?!0:il.call(Qu,l)?!1:Ku.test(l)?ol[l]=!0:(Qu[l]=!0,!1)}function Jc(l,h,y){if(To(h))if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":l.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){l.removeAttribute(h);return}}l.setAttribute(h,""+y)}}function Xo(l,h,y){if(y===null)l.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttribute(h,""+y)}}function Qa(l,h,y,S){if(S===null)l.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(y);return}l.setAttributeNS(h,y,""+S)}}function Ir(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function zd(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function hm(l,h,y){var S=Object.getOwnPropertyDescriptor(l.constructor.prototype,h);if(!l.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var z=S.get,j=S.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return z.call(this)},set:function(Q){y=""+Q,j.call(this,Q)}}),Object.defineProperty(l,h,{enumerable:S.enumerable}),{getValue:function(){return y},setValue:function(Q){y=""+Q},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function Wl(l){if(!l._valueTracker){var h=zd(l)?"checked":"value";l._valueTracker=hm(l,h,""+l[h])}}function kd(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var y=h.getValue(),S="";return l&&(S=zd(l)?l.checked?"true":"false":l.value),l=S,l!==y?(h.setValue(l),!0):!1}function eh(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var fm=/[\n"\\]/g;function Ui(l){return l.replace(fm,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function th(l,h,y,S,z,j,Q,ce){l.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?l.type=Q:l.removeAttribute("type"),h!=null?Q==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+Ir(h)):l.value!==""+Ir(h)&&(l.value=""+Ir(h)):Q!=="submit"&&Q!=="reset"||l.removeAttribute("value"),h!=null?rh(l,Q,Ir(h)):y!=null?rh(l,Q,Ir(y)):S!=null&&l.removeAttribute("value"),z==null&&j!=null&&(l.defaultChecked=!!j),z!=null&&(l.checked=z&&typeof z!="function"&&typeof z!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?l.name=""+Ir(ce):l.removeAttribute("name")}function Tf(l,h,y,S,z,j,Q,ce){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(l.type=j),h!=null||y!=null){if(!(j!=="submit"&&j!=="reset"||h!=null)){Wl(l);return}y=y!=null?""+Ir(y):"",h=h!=null?""+Ir(h):y,ce||h===l.value||(l.value=h),l.defaultValue=h}S=S??z,S=typeof S!="function"&&typeof S!="symbol"&&!!S,l.checked=ce?l.checked:!!S,l.defaultChecked=!!S,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(l.name=Q),Wl(l)}function rh(l,h,y){h==="number"&&eh(l.ownerDocument)===l||l.defaultValue===""+y||(l.defaultValue=""+y)}function sl(l,h,y,S){if(l=l.options,h){h={};for(var z=0;z<y.length;z++)h["$"+y[z]]=!0;for(y=0;y<l.length;y++)z=h.hasOwnProperty("$"+l[y].value),l[y].selected!==z&&(l[y].selected=z),z&&S&&(l[y].defaultSelected=!0)}else{for(y=""+Ir(y),h=null,z=0;z<l.length;z++){if(l[z].value===y){l[z].selected=!0,S&&(l[z].defaultSelected=!0);return}h!==null||l[z].disabled||(h=l[z])}h!==null&&(h.selected=!0)}}function dm(l,h,y){if(h!=null&&(h=""+Ir(h),h!==l.value&&(l.value=h),y==null)){l.defaultValue!==h&&(l.defaultValue=h);return}l.defaultValue=y!=null?""+Ir(y):""}function Ju(l,h,y,S){if(h==null){if(S!=null){if(y!=null)throw Error(a(92));if(jt(S)){if(1<S.length)throw Error(a(93));S=S[0]}y=S}y==null&&(y=""),h=y}y=Ir(h),l.defaultValue=y,S=l.textContent,S===y&&S!==""&&S!==null&&(l.value=S),Wl(l)}function Ps(l,h){if(h){var y=l.firstChild;if(y&&y===l.lastChild&&y.nodeType===3){y.nodeValue=h;return}}l.textContent=h}var pm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yl(l,h,y){var S=h.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?l.setProperty(h,""):h==="float"?l.cssFloat="":l[h]="":S?l.setProperty(h,y):typeof y!="number"||y===0||pm.has(h)?h==="float"?l.cssFloat=y:l[h]=(""+y).trim():l[h]=y+"px"}function Ef(l,h,y){if(h!=null&&typeof h!="object")throw Error(a(62));if(l=l.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?l.setProperty(S,""):S==="float"?l.cssFloat="":l[S]="");for(var z in h)S=h[z],h.hasOwnProperty(z)&&y[z]!==S&&Yl(l,z,S)}else for(var j in h)h.hasOwnProperty(j)&&Yl(l,j,h[j])}function Xl(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ll=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ec=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(l){return ec.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Eo(){}var Rd=null;function nh(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var si=null,Hn=null;function pn(l){var h=As(l);if(h&&(l=h.stateNode)){var y=l[Tt]||null;e:switch(l=h.stateNode,h.type){case"input":if(th(l,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),h=y.name,y.type==="radio"&&h!=null){for(y=l;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+Ui(""+h)+'"][type="radio"]'),h=0;h<y.length;h++){var S=y[h];if(S!==l&&S.form===l.form){var z=S[Tt]||null;if(!z)throw Error(a(90));th(S,z.value,z.defaultValue,z.defaultValue,z.checked,z.defaultChecked,z.type,z.name)}}for(h=0;h<y.length;h++)S=y[h],S.form===l.form&&kd(S)}break e;case"textarea":dm(l,y.value,y.defaultValue);break e;case"select":h=y.value,h!=null&&sl(l,!!y.multiple,h,!1)}}}var tr=!1;function Yr(l,h,y){if(tr)return l(h,y);tr=!0;try{var S=l(h);return S}finally{if(tr=!1,(si!==null||Hn!==null)&&(yp(),si&&(h=si,l=Hn,Hn=si=null,pn(h),l)))for(h=0;h<l.length;h++)pn(l[h])}}function Ja(l,h){var y=l.stateNode;if(y===null)return null;var S=y[Tt]||null;if(S===null)return null;y=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(y&&typeof y!="function")throw Error(a(231,h,typeof y));return y}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vi=!1;if(zn)try{var li={};Object.defineProperty(li,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Vi=!1}var Pa=null,Ko=null,mn=null;function ul(){if(mn)return mn;var l,h=Ko,y=h.length,S,z="value"in Pa?Pa.value:Pa.textContent,j=z.length;for(l=0;l<y&&h[l]===z[l];l++);var Q=y-l;for(S=1;S<=Q&&h[y-S]===z[j-S];S++);return mn=z.slice(l,1<S?1-S:void 0)}function Ca(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function Kl(){return!0}function qi(){return!1}function ei(l){function h(y,S,z,j,Q){this._reactName=y,this._targetInst=z,this.type=S,this.nativeEvent=j,this.target=Q,this.currentTarget=null;for(var ce in l)l.hasOwnProperty(ce)&&(y=l[ce],this[ce]=y?y(j):j[ce]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Kl:qi,this.isPropagationStopped=qi,this}return I(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=Kl)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=Kl)},persist:function(){},isPersistent:Kl}),h}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ih=ei($i),Ql=I({},$i,{view:0,detail:0}),Jl=ei(Ql),$r,cl,br,dr=I({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sh,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==br&&(br&&l.type==="mousemove"?($r=l.screenX-br.screenX,cl=l.screenY-br.screenY):cl=$r=0,br=l),$r)},movementY:function(l){return"movementY"in l?l.movementY:cl}}),eu=ei(dr),Er=I({},dr,{dataTransfer:0}),ah=ei(Er),eo=I({},Ql,{relatedTarget:0}),hl=ei(eo),fl=I({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),mm=ei(fl),oh=I({},$i,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Ld=ei(oh),py=I({},$i,{data:0}),jd=ei(py),Gi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tu(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=gn[l])?!!h[l]:!1}function sh(){return tu}var lh=I({},Ql,{key:function(l){if(l.key){var h=Gi[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=Ca(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Qo[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sh,charCode:function(l){return l.type==="keypress"?Ca(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Ca(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),kn=ei(lh),gm=I({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Af=ei(gm),ym=I({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sh}),my=ei(ym),tc=I({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mf=ei(tc),rc=I({},dr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Bd=ei(rc),uh=I({},$i,{newState:0,oldState:0}),nc=ei(uh),ic=[9,13,27,32],Un=zn&&"CompositionEvent"in window,ac=null;zn&&"documentMode"in document&&(ac=document.documentMode);var oc=zn&&"TextEvent"in window&&!ac,sc=zn&&(!Un||ac&&8<ac&&11>=ac),dl=" ",vm=!1;function ch(l,h){switch(l){case"keyup":return ic.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _m(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ao=!1;function Pf(l,h){switch(l){case"compositionend":return _m(h);case"keypress":return h.which!==32?null:(vm=!0,dl);case"textInput":return l=h.data,l===dl&&vm?null:l;default:return null}}function xm(l,h){if(Ao)return l==="compositionend"||!Un&&ch(l,h)?(l=ul(),mn=Ko=Pa=null,Ao=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return sc&&h.locale!=="ko"?null:h.data;default:return null}}var bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cf(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!bm[l.type]:h==="textarea"}function Df(l,h,y,S){si?Hn?Hn.push(S):Hn=[S]:si=S,h=bp(h,"onChange"),0<h.length&&(y=new ih("onChange","change",null,y,S),l.push({event:y,listeners:h}))}var ru=null,lc=null;function wm(l){r0(l,0)}function hh(l){var h=Wo(l);if(kd(h))return l}function pl(l,h){if(l==="change")return h}var Nd=!1;if(zn){var fh;if(zn){var ml="oninput"in document;if(!ml){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),ml=typeof Fd.oninput=="function"}fh=ml}else fh=!1;Nd=fh&&(!document.documentMode||9<document.documentMode)}function dh(){ru&&(ru.detachEvent("onpropertychange",Sm),lc=ru=null)}function Sm(l){if(l.propertyName==="value"&&hh(lc)){var h=[];Df(h,lc,l,nh(l)),Yr(wm,h)}}function gy(l,h,y){l==="focusin"?(dh(),ru=h,lc=y,ru.attachEvent("onpropertychange",Sm)):l==="focusout"&&dh()}function Tm(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return hh(lc)}function ph(l,h){if(l==="click")return hh(h)}function Em(l,h){if(l==="input"||l==="change")return hh(h)}function Ud(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var ra=typeof Object.is=="function"?Object.is:Ud;function gl(l,h){if(ra(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var y=Object.keys(l),S=Object.keys(h);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var z=y[S];if(!il.call(h,z)||!ra(l[z],h[z]))return!1}return!0}function to(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function mh(l,h){var y=to(l);l=0;for(var S;y;){if(y.nodeType===3){if(S=l+y.textContent.length,l<=h&&S>=h)return{node:y,offset:h-l};l=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=to(y)}}function Of(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?Of(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function If(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var h=eh(l.document);h instanceof l.HTMLIFrameElement;){try{var y=typeof h.contentWindow.location.href=="string"}catch{y=!1}if(y)l=h.contentWindow;else break;h=eh(l.document)}return h}function gh(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var zf=zn&&"documentMode"in document&&11>=document.documentMode,ro=null,yh=null,vh=null,kf=!1;function Am(l,h,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;kf||ro==null||ro!==eh(S)||(S=ro,"selectionStart"in S&&gh(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),vh&&gl(vh,S)||(vh=S,S=bp(yh,"onSelect"),0<S.length&&(h=new ih("onSelect","select",null,h,y),l.push({event:h,listeners:S}),h.target=ro)))}function nu(l,h){var y={};return y[l.toLowerCase()]=h.toLowerCase(),y["Webkit"+l]="webkit"+h,y["Moz"+l]="moz"+h,y}var iu={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionrun:nu("Transition","TransitionRun"),transitionstart:nu("Transition","TransitionStart"),transitioncancel:nu("Transition","TransitionCancel"),transitionend:nu("Transition","TransitionEnd")},Vd={},zr={};zn&&(zr=document.createElement("div").style,"AnimationEvent"in window||(delete iu.animationend.animation,delete iu.animationiteration.animation,delete iu.animationstart.animation),"TransitionEvent"in window||delete iu.transitionend.transition);function Jo(l){if(Vd[l])return Vd[l];if(!iu[l])return l;var h=iu[l],y;for(y in h)if(h.hasOwnProperty(y)&&y in zr)return Vd[l]=h[y];return l}var _h=Jo("animationend"),xh=Jo("animationiteration"),Rf=Jo("animationstart"),au=Jo("transitionrun"),bh=Jo("transitionstart"),uc=Jo("transitioncancel"),Da=Jo("transitionend"),qd=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function Oa(l,h){qd.set(l,h),Tr(h,[l])}var es=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Zi=[],Cs=0,ou=0;function su(){for(var l=Cs,h=ou=Cs=0;h<l;){var y=Zi[h];Zi[h++]=null;var S=Zi[h];Zi[h++]=null;var z=Zi[h];Zi[h++]=null;var j=Zi[h];if(Zi[h++]=null,S!==null&&z!==null){var Q=S.pending;Q===null?z.next=z:(z.next=Q.next,Q.next=z),S.pending=z}j!==0&&$d(y,z,j)}}function wh(l,h,y,S){Zi[Cs++]=l,Zi[Cs++]=h,Zi[Cs++]=y,Zi[Cs++]=S,ou|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function yl(l,h,y,S){return wh(l,h,y,S),cc(l)}function no(l,h){return wh(l,null,null,h),cc(l)}function $d(l,h,y){l.lanes|=y;var S=l.alternate;S!==null&&(S.lanes|=y);for(var z=!1,j=l.return;j!==null;)j.childLanes|=y,S=j.alternate,S!==null&&(S.childLanes|=y),j.tag===22&&(l=j.stateNode,l===null||l._visibility&1||(z=!0)),l=j,j=j.return;return l.tag===3?(j=l.stateNode,z&&h!==null&&(z=31-Oe(y),l=j.hiddenUpdates,S=l[z],S===null?l[z]=[h]:S.push(h),h.lane=y|536870912),j):null}function cc(l){if(50<gp)throw gp=0,ky=null,Error(a(185));for(var h=l.return;h!==null;)l=h,h=l.return;return l.tag===3?l.stateNode:null}var pr={};function jf(l,h,y,S){this.tag=l,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(l,h,y,S){return new jf(l,h,y,S)}function Bf(l){return l=l.prototype,!(!l||!l.isReactComponent)}function za(l,h){var y=l.alternate;return y===null?(y=Ia(l.tag,h,l.key,l.mode),y.elementType=l.elementType,y.type=l.type,y.stateNode=l.stateNode,y.alternate=l,l.alternate=y):(y.pendingProps=h,y.type=l.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=l.flags&65011712,y.childLanes=l.childLanes,y.lanes=l.lanes,y.child=l.child,y.memoizedProps=l.memoizedProps,y.memoizedState=l.memoizedState,y.updateQueue=l.updateQueue,h=l.dependencies,y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},y.sibling=l.sibling,y.index=l.index,y.ref=l.ref,y.refCleanup=l.refCleanup,y}function Mm(l,h){l.flags&=65011714;var y=l.alternate;return y===null?(l.childLanes=0,l.lanes=h,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=y.childLanes,l.lanes=y.lanes,l.child=y.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=y.memoizedProps,l.memoizedState=y.memoizedState,l.updateQueue=y.updateQueue,l.type=y.type,h=y.dependencies,l.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),l}function Nf(l,h,y,S,z,j){var Q=0;if(S=l,typeof l=="function")Bf(l)&&(Q=1);else if(typeof l=="string")Q=wg(l,y,zt.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case et:return l=Ia(31,y,h,z),l.elementType=et,l.lanes=j,l;case H:return vl(y.children,z,j,h);case $:Q=8,z|=24;break;case se:return l=Ia(12,y,h,z|2),l.elementType=se,l.lanes=j,l;case Ae:return l=Ia(13,y,h,z),l.elementType=Ae,l.lanes=j,l;case ge:return l=Ia(19,y,h,z),l.elementType=ge,l.lanes=j,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case fe:Q=10;break e;case he:Q=9;break e;case me:Q=11;break e;case Se:Q=14;break e;case Ue:Q=16,S=null;break e}Q=29,y=Error(a(130,l===null?"null":typeof l,"")),S=null}return h=Ia(Q,y,h,z),h.elementType=l,h.type=S,h.lanes=j,h}function vl(l,h,y,S){return l=Ia(7,l,S,h),l.lanes=y,l}function Gd(l,h,y){return l=Ia(6,l,null,h),l.lanes=y,l}function Ff(l){var h=Ia(18,null,null,0);return h.stateNode=l,h}function _l(l,h,y){return h=Ia(4,l.children!==null?l.children:[],l.key,h),h.lanes=y,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}var hc=new WeakMap;function Hi(l,h){if(typeof l=="object"&&l!==null){var y=hc.get(l);return y!==void 0?y:(h={value:l,source:h,stack:Ea(h)},hc.set(l,h),h)}return{value:l,source:h,stack:Ea(h)}}var xl=[],bl=0,lu=null,wl=0,ui=[],di=0,ts=null,rs=1,na="";function Ds(l,h){xl[bl++]=wl,xl[bl++]=lu,lu=l,wl=h}function Zd(l,h,y){ui[di++]=rs,ui[di++]=na,ui[di++]=ts,ts=l;var S=rs;l=na;var z=32-Oe(S)-1;S&=~(1<<z),y+=1;var j=32-Oe(h)+z;if(30<j){var Q=z-z%5;j=(S&(1<<Q)-1).toString(32),S>>=Q,z-=Q,rs=1<<32-Oe(h)+z|y<<z|S,na=j+l}else rs=1<<j|y<<z|S,na=l}function uu(l){l.return!==null&&(Ds(l,1),Zd(l,1,0))}function fc(l){for(;l===lu;)lu=xl[--bl],xl[bl]=null,wl=xl[--bl],xl[bl]=null;for(;l===ts;)ts=ui[--di],ui[di]=null,na=ui[--di],ui[di]=null,rs=ui[--di],ui[di]=null}function Hd(l,h){ui[di++]=rs,ui[di++]=na,ui[di++]=ts,rs=h.id,na=h.overflow,ts=l}var pi=null,Xr=null,Sr=!1,Os=null,ka=!1,Sn=Error(a(519));function ia(l){var h=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Is(Hi(h,l)),Sn}function aa(l){var h=l.stateNode,y=l.type,S=l.memoizedProps;switch(h[Fr]=l,h[Tt]=S,y){case"dialog":Cr("cancel",h),Cr("close",h);break;case"iframe":case"object":case"embed":Cr("load",h);break;case"video":case"audio":for(y=0;y<Mc.length;y++)Cr(Mc[y],h);break;case"source":Cr("error",h);break;case"img":case"image":case"link":Cr("error",h),Cr("load",h);break;case"details":Cr("toggle",h);break;case"input":Cr("invalid",h),Tf(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Cr("invalid",h);break;case"textarea":Cr("invalid",h),Ju(h,S.value,S.defaultValue,S.children)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||h.textContent===""+y||S.suppressHydrationWarning===!0||Wy(h.textContent,y)?(S.popover!=null&&(Cr("beforetoggle",h),Cr("toggle",h)),S.onScroll!=null&&Cr("scroll",h),S.onScrollEnd!=null&&Cr("scrollend",h),S.onClick!=null&&(h.onclick=Eo),h=!0):h=!1,h||ia(l,!0)}function Sh(l){for(pi=l.return;pi;)switch(pi.tag){case 5:case 31:case 13:ka=!1;return;case 27:case 3:ka=!0;return;default:pi=pi.return}}function ns(l){if(l!==pi)return!1;if(!Sr)return Sh(l),Sr=!0,!1;var h=l.tag,y;if((y=h!==3&&h!==27)&&((y=h===5)&&(y=l.type,y=!(y!=="form"&&y!=="button")||dg(l.type,l.memoizedProps)),y=!y),y&&Xr&&ia(l),Sh(l),h===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Xr=ji(l)}else if(h===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Xr=ji(l)}else h===27?(h=Xr,Dc(l.type)?(l=qa,qa=null,Xr=l):Xr=h):Xr=pi?Bo(l.stateNode.nextSibling):null;return!0}function is(){Xr=pi=null,Sr=!1}function as(){var l=Os;return l!==null&&(po===null?po=l:po.push.apply(po,l),Os=null),l}function Is(l){Os===null?Os=[l]:Os.push(l)}var zs=ze(null),io=null,os=null;function ks(l,h,y){Pt(zs,h._currentValue),h._currentValue=y}function ss(l){l._currentValue=zs.current,at(zs)}function Uf(l,h,y){for(;l!==null;){var S=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),l===y)break;l=l.return}}function Vf(l,h,y,S){var z=l.child;for(z!==null&&(z.return=l);z!==null;){var j=z.dependencies;if(j!==null){var Q=z.child;j=j.firstContext;e:for(;j!==null;){var ce=j;j=z;for(var Re=0;Re<h.length;Re++)if(ce.context===h[Re]){j.lanes|=y,ce=j.alternate,ce!==null&&(ce.lanes|=y),Uf(j.return,y,l),S||(Q=null);break e}j=ce.next}}else if(z.tag===18){if(Q=z.return,Q===null)throw Error(a(341));Q.lanes|=y,j=Q.alternate,j!==null&&(j.lanes|=y),Uf(Q,y,l),Q=null}else Q=z.child;if(Q!==null)Q.return=z;else for(Q=z;Q!==null;){if(Q===l){Q=null;break}if(z=Q.sibling,z!==null){z.return=Q.return,Q=z;break}Q=Q.return}z=Q}}function Ra(l,h,y,S){l=null;for(var z=h,j=!1;z!==null;){if(!j){if((z.flags&524288)!==0)j=!0;else if((z.flags&262144)!==0)break}if(z.tag===10){var Q=z.alternate;if(Q===null)throw Error(a(387));if(Q=Q.memoizedProps,Q!==null){var ce=z.type;ra(z.pendingProps.value,Q.value)||(l!==null?l.push(ce):l=[ce])}}else if(z===Gt.current){if(Q=z.alternate,Q===null)throw Error(a(387));Q.memoizedState.memoizedState!==z.memoizedState.memoizedState&&(l!==null?l.push(zp):l=[zp])}z=z.return}l!==null&&Vf(h,l,y,S),h.flags|=262144}function dc(l){for(l=l.firstContext;l!==null;){if(!ra(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Rs(l){io=l,os=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Wn(l){return qf(io,l)}function Th(l,h){return io===null&&Rs(l),qf(l,h)}function qf(l,h){var y=h._currentValue;if(h={context:h,memoizedValue:y,next:null},os===null){if(l===null)throw Error(a(308));os=h,l.dependencies={lanes:0,firstContext:h},l.flags|=524288}else os=os.next=h;return y}var Wd=typeof AbortController<"u"?AbortController:function(){var l=[],h=this.signal={aborted:!1,addEventListener:function(y,S){l.push(S)}};this.abort=function(){h.aborted=!0,l.forEach(function(y){return y()})}},Pm=e.unstable_scheduleCallback,Yd=e.unstable_NormalPriority,Vn={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ls(){return{controller:new Wd,data:new Map,refCount:0}}function pc(l){l.refCount--,l.refCount===0&&Pm(Yd,function(){l.controller.abort()})}var ki=null,La=0,cu=0,Ri=null;function yy(l,h){if(ki===null){var y=ki=[];La=0,cu=qy(),Ri={status:"pending",value:void 0,then:function(S){y.push(S)}}}return La++,h.then(mc,mc),h}function mc(){if(--La===0&&ki!==null){Ri!==null&&(Ri.status="fulfilled");var l=ki;ki=null,cu=0,Ri=null;for(var h=0;h<l.length;h++)(0,l[h])()}}function Eh(l,h){var y=[],S={status:"pending",value:null,reason:null,then:function(z){y.push(z)}};return l.then(function(){S.status="fulfilled",S.value=h;for(var z=0;z<y.length;z++)(0,y[z])(h)},function(z){for(S.status="rejected",S.reason=z,z=0;z<y.length;z++)(0,y[z])(void 0)}),S}var ci=$e.S;$e.S=function(l,h){N_=oi(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&yy(l,h),ci!==null&&ci(l,h)};var Mo=ze(null);function $f(){var l=Mo.current;return l!==null?l:_n.pooledCache}function Gf(l,h){h===null?Pt(Mo,Mo.current):Pt(Mo,h.pool)}function Cm(){var l=$f();return l===null?null:{parent:Vn._currentValue,pool:l}}var Po=Error(a(460)),Sl=Error(a(474)),oa=Error(a(542)),kt={then:function(){}};function Ah(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Zf(l,h,y){switch(y=l[y],y===void 0?l.push(h):y!==h&&(h.then(Eo,Eo),h=y),h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,Hf(l),l;default:if(typeof h.status=="string")h.then(Eo,Eo);else{if(l=_n,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=h,l.status="pending",l.then(function(S){if(h.status==="pending"){var z=h;z.status="fulfilled",z.value=S}},function(S){if(h.status==="pending"){var z=h;z.status="rejected",z.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,Hf(l),l}throw Co=h,Po}}function ao(l){try{var h=l._init;return h(l._payload)}catch(y){throw y!==null&&typeof y=="object"&&typeof y.then=="function"?(Co=y,Po):y}}var Co=null;function gc(){if(Co===null)throw Error(a(459));var l=Co;return Co=null,l}function Hf(l){if(l===Po||l===oa)throw Error(a(483))}var us=null,hu=0;function Mh(l){var h=hu;return hu+=1,us===null&&(us=[]),Zf(us,l,h)}function cs(l,h){h=h.props.ref,l.ref=h!==void 0?h:null}function Wf(l,h){throw h.$$typeof===N?Error(a(525)):(l=Object.prototype.toString.call(h),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l)))}function Ph(l){function h(Ve,je){if(l){var Qe=Ve.deletions;Qe===null?(Ve.deletions=[je],Ve.flags|=16):Qe.push(je)}}function y(Ve,je){if(!l)return null;for(;je!==null;)h(Ve,je),je=je.sibling;return null}function S(Ve){for(var je=new Map;Ve!==null;)Ve.key!==null?je.set(Ve.key,Ve):je.set(Ve.index,Ve),Ve=Ve.sibling;return je}function z(Ve,je){return Ve=za(Ve,je),Ve.index=0,Ve.sibling=null,Ve}function j(Ve,je,Qe){return Ve.index=Qe,l?(Qe=Ve.alternate,Qe!==null?(Qe=Qe.index,Qe<je?(Ve.flags|=67108866,je):Qe):(Ve.flags|=67108866,je)):(Ve.flags|=1048576,je)}function Q(Ve){return l&&Ve.alternate===null&&(Ve.flags|=67108866),Ve}function ce(Ve,je,Qe,gt){return je===null||je.tag!==6?(je=Gd(Qe,Ve.mode,gt),je.return=Ve,je):(je=z(je,Qe),je.return=Ve,je)}function Re(Ve,je,Qe,gt){var rr=Qe.type;return rr===H?ft(Ve,je,Qe.props.children,gt,Qe.key):je!==null&&(je.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===Ue&&ao(rr)===je.type)?(je=z(je,Qe.props),cs(je,Qe),je.return=Ve,je):(je=Nf(Qe.type,Qe.key,Qe.props,null,Ve.mode,gt),cs(je,Qe),je.return=Ve,je)}function Je(Ve,je,Qe,gt){return je===null||je.tag!==4||je.stateNode.containerInfo!==Qe.containerInfo||je.stateNode.implementation!==Qe.implementation?(je=_l(Qe,Ve.mode,gt),je.return=Ve,je):(je=z(je,Qe.children||[]),je.return=Ve,je)}function ft(Ve,je,Qe,gt,rr){return je===null||je.tag!==7?(je=vl(Qe,Ve.mode,gt,rr),je.return=Ve,je):(je=z(je,Qe),je.return=Ve,je)}function bt(Ve,je,Qe){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return je=Gd(""+je,Ve.mode,Qe),je.return=Ve,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case G:return Qe=Nf(je.type,je.key,je.props,null,Ve.mode,Qe),cs(Qe,je),Qe.return=Ve,Qe;case Y:return je=_l(je,Ve.mode,Qe),je.return=Ve,je;case Ue:return je=ao(je),bt(Ve,je,Qe)}if(jt(je)||Fe(je))return je=vl(je,Ve.mode,Qe,null),je.return=Ve,je;if(typeof je.then=="function")return bt(Ve,Mh(je),Qe);if(je.$$typeof===fe)return bt(Ve,Th(Ve,je),Qe);Wf(Ve,je)}return null}function tt(Ve,je,Qe,gt){var rr=je!==null?je.key:null;if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return rr!==null?null:ce(Ve,je,""+Qe,gt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case G:return Qe.key===rr?Re(Ve,je,Qe,gt):null;case Y:return Qe.key===rr?Je(Ve,je,Qe,gt):null;case Ue:return Qe=ao(Qe),tt(Ve,je,Qe,gt)}if(jt(Qe)||Fe(Qe))return rr!==null?null:ft(Ve,je,Qe,gt,null);if(typeof Qe.then=="function")return tt(Ve,je,Mh(Qe),gt);if(Qe.$$typeof===fe)return tt(Ve,je,Th(Ve,Qe),gt);Wf(Ve,Qe)}return null}function ot(Ve,je,Qe,gt,rr){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return Ve=Ve.get(Qe)||null,ce(je,Ve,""+gt,rr);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case G:return Ve=Ve.get(gt.key===null?Qe:gt.key)||null,Re(je,Ve,gt,rr);case Y:return Ve=Ve.get(gt.key===null?Qe:gt.key)||null,Je(je,Ve,gt,rr);case Ue:return gt=ao(gt),ot(Ve,je,Qe,gt,rr)}if(jt(gt)||Fe(gt))return Ve=Ve.get(Qe)||null,ft(je,Ve,gt,rr,null);if(typeof gt.then=="function")return ot(Ve,je,Qe,Mh(gt),rr);if(gt.$$typeof===fe)return ot(Ve,je,Qe,Th(je,gt),rr);Wf(je,gt)}return null}function Zt(Ve,je,Qe,gt){for(var rr=null,Hr=null,Xt=je,yr=je=0,or=null;Xt!==null&&yr<Qe.length;yr++){Xt.index>yr?(or=Xt,Xt=null):or=Xt.sibling;var Nr=tt(Ve,Xt,Qe[yr],gt);if(Nr===null){Xt===null&&(Xt=or);break}l&&Xt&&Nr.alternate===null&&h(Ve,Xt),je=j(Nr,je,yr),Hr===null?rr=Nr:Hr.sibling=Nr,Hr=Nr,Xt=or}if(yr===Qe.length)return y(Ve,Xt),Sr&&Ds(Ve,yr),rr;if(Xt===null){for(;yr<Qe.length;yr++)Xt=bt(Ve,Qe[yr],gt),Xt!==null&&(je=j(Xt,je,yr),Hr===null?rr=Xt:Hr.sibling=Xt,Hr=Xt);return Sr&&Ds(Ve,yr),rr}for(Xt=S(Xt);yr<Qe.length;yr++)or=ot(Xt,Ve,yr,Qe[yr],gt),or!==null&&(l&&or.alternate!==null&&Xt.delete(or.key===null?yr:or.key),je=j(or,je,yr),Hr===null?rr=or:Hr.sibling=or,Hr=or);return l&&Xt.forEach(function(ku){return h(Ve,ku)}),Sr&&Ds(Ve,yr),rr}function ur(Ve,je,Qe,gt){if(Qe==null)throw Error(a(151));for(var rr=null,Hr=null,Xt=je,yr=je=0,or=null,Nr=Qe.next();Xt!==null&&!Nr.done;yr++,Nr=Qe.next()){Xt.index>yr?(or=Xt,Xt=null):or=Xt.sibling;var ku=tt(Ve,Xt,Nr.value,gt);if(ku===null){Xt===null&&(Xt=or);break}l&&Xt&&ku.alternate===null&&h(Ve,Xt),je=j(ku,je,yr),Hr===null?rr=ku:Hr.sibling=ku,Hr=ku,Xt=or}if(Nr.done)return y(Ve,Xt),Sr&&Ds(Ve,yr),rr;if(Xt===null){for(;!Nr.done;yr++,Nr=Qe.next())Nr=bt(Ve,Nr.value,gt),Nr!==null&&(je=j(Nr,je,yr),Hr===null?rr=Nr:Hr.sibling=Nr,Hr=Nr);return Sr&&Ds(Ve,yr),rr}for(Xt=S(Xt);!Nr.done;yr++,Nr=Qe.next())Nr=ot(Xt,Ve,yr,Nr.value,gt),Nr!==null&&(l&&Nr.alternate!==null&&Xt.delete(Nr.key===null?yr:Nr.key),je=j(Nr,je,yr),Hr===null?rr=Nr:Hr.sibling=Nr,Hr=Nr);return l&&Xt.forEach(function(T0){return h(Ve,T0)}),Sr&&Ds(Ve,yr),rr}function tn(Ve,je,Qe,gt){if(typeof Qe=="object"&&Qe!==null&&Qe.type===H&&Qe.key===null&&(Qe=Qe.props.children),typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case G:e:{for(var rr=Qe.key;je!==null;){if(je.key===rr){if(rr=Qe.type,rr===H){if(je.tag===7){y(Ve,je.sibling),gt=z(je,Qe.props.children),gt.return=Ve,Ve=gt;break e}}else if(je.elementType===rr||typeof rr=="object"&&rr!==null&&rr.$$typeof===Ue&&ao(rr)===je.type){y(Ve,je.sibling),gt=z(je,Qe.props),cs(gt,Qe),gt.return=Ve,Ve=gt;break e}y(Ve,je);break}else h(Ve,je);je=je.sibling}Qe.type===H?(gt=vl(Qe.props.children,Ve.mode,gt,Qe.key),gt.return=Ve,Ve=gt):(gt=Nf(Qe.type,Qe.key,Qe.props,null,Ve.mode,gt),cs(gt,Qe),gt.return=Ve,Ve=gt)}return Q(Ve);case Y:e:{for(rr=Qe.key;je!==null;){if(je.key===rr)if(je.tag===4&&je.stateNode.containerInfo===Qe.containerInfo&&je.stateNode.implementation===Qe.implementation){y(Ve,je.sibling),gt=z(je,Qe.children||[]),gt.return=Ve,Ve=gt;break e}else{y(Ve,je);break}else h(Ve,je);je=je.sibling}gt=_l(Qe,Ve.mode,gt),gt.return=Ve,Ve=gt}return Q(Ve);case Ue:return Qe=ao(Qe),tn(Ve,je,Qe,gt)}if(jt(Qe))return Zt(Ve,je,Qe,gt);if(Fe(Qe)){if(rr=Fe(Qe),typeof rr!="function")throw Error(a(150));return Qe=rr.call(Qe),ur(Ve,je,Qe,gt)}if(typeof Qe.then=="function")return tn(Ve,je,Mh(Qe),gt);if(Qe.$$typeof===fe)return tn(Ve,je,Th(Ve,Qe),gt);Wf(Ve,Qe)}return typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint"?(Qe=""+Qe,je!==null&&je.tag===6?(y(Ve,je.sibling),gt=z(je,Qe),gt.return=Ve,Ve=gt):(y(Ve,je),gt=Gd(Qe,Ve.mode,gt),gt.return=Ve,Ve=gt),Q(Ve)):y(Ve,je)}return function(Ve,je,Qe,gt){try{hu=0;var rr=tn(Ve,je,Qe,gt);return us=null,rr}catch(Xt){if(Xt===Po||Xt===oa)throw Xt;var Hr=Ia(29,Xt,null,Ve.mode);return Hr.lanes=gt,Hr.return=Ve,Hr}}}var hs=Ph(!0),Xd=Ph(!1),fs=!1;function Yf(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ch(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ds(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Ls(l,h,y){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(Jr&2)!==0){var z=S.pending;return z===null?h.next=h:(h.next=z.next,z.next=h),S.pending=h,h=cc(l),$d(l,null,y),h}return wh(l,S,h,y),cc(l)}function oo(l,h,y){if(h=h.updateQueue,h!==null&&(h=h.shared,(y&4194048)!==0)){var S=h.lanes;S&=l.pendingLanes,y|=S,h.lanes=y,wn(l,y)}}function Ur(l,h){var y=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var z=null,j=null;if(y=y.firstBaseUpdate,y!==null){do{var Q={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};j===null?z=j=Q:j=j.next=Q,y=y.next}while(y!==null);j===null?z=j=h:j=j.next=h}else z=j=h;y={baseState:S.baseState,firstBaseUpdate:z,lastBaseUpdate:j,shared:S.shared,callbacks:S.callbacks},l.updateQueue=y;return}l=y.lastBaseUpdate,l===null?y.firstBaseUpdate=h:l.next=h,y.lastBaseUpdate=h}var Kd=!1;function js(){if(Kd){var l=Ri;if(l!==null)throw l}}function Tl(l,h,y,S){Kd=!1;var z=l.updateQueue;fs=!1;var j=z.firstBaseUpdate,Q=z.lastBaseUpdate,ce=z.shared.pending;if(ce!==null){z.shared.pending=null;var Re=ce,Je=Re.next;Re.next=null,Q===null?j=Je:Q.next=Je,Q=Re;var ft=l.alternate;ft!==null&&(ft=ft.updateQueue,ce=ft.lastBaseUpdate,ce!==Q&&(ce===null?ft.firstBaseUpdate=Je:ce.next=Je,ft.lastBaseUpdate=Re))}if(j!==null){var bt=z.baseState;Q=0,ft=Je=Re=null,ce=j;do{var tt=ce.lane&-536870913,ot=tt!==ce.lane;if(ot?(Pr&tt)===tt:(S&tt)===tt){tt!==0&&tt===cu&&(Kd=!0),ft!==null&&(ft=ft.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var Zt=l,ur=ce;tt=h;var tn=y;switch(ur.tag){case 1:if(Zt=ur.payload,typeof Zt=="function"){bt=Zt.call(tn,bt,tt);break e}bt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=ur.payload,tt=typeof Zt=="function"?Zt.call(tn,bt,tt):Zt,tt==null)break e;bt=I({},bt,tt);break e;case 2:fs=!0}}tt=ce.callback,tt!==null&&(l.flags|=64,ot&&(l.flags|=8192),ot=z.callbacks,ot===null?z.callbacks=[tt]:ot.push(tt))}else ot={lane:tt,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},ft===null?(Je=ft=ot,Re=bt):ft=ft.next=ot,Q|=tt;if(ce=ce.next,ce===null){if(ce=z.shared.pending,ce===null)break;ot=ce,ce=ot.next,ot.next=null,z.lastBaseUpdate=ot,z.shared.pending=null}}while(!0);ft===null&&(Re=bt),z.baseState=Re,z.firstBaseUpdate=Je,z.lastBaseUpdate=ft,j===null&&(z.shared.lanes=0),Eu|=Q,l.lanes=Q,l.memoizedState=bt}}function Dh(l,h){if(typeof l!="function")throw Error(a(191,l));l.call(h)}function Xf(l,h){var y=l.callbacks;if(y!==null)for(l.callbacks=null,l=0;l<y.length;l++)Dh(y[l],h)}var fu=ze(null),Oh=ze(0);function Qd(l,h){l=Tu,Pt(Oh,l),Pt(fu,h),Tu=l|h.baseLanes}function ja(){Pt(Oh,Tu),Pt(fu,fu.current)}function du(){Tu=Oh.current,at(fu),at(Oh)}var Rt=ze(null),Ft=null;function so(l){var h=l.alternate;Pt(Rn,Rn.current&1),Pt(Rt,l),Ft===null&&(h===null||fu.current!==null||h.memoizedState!==null)&&(Ft=l)}function yc(l){Pt(Rn,Rn.current),Pt(Rt,l),Ft===null&&(Ft=l)}function Ih(l){l.tag===22?(Pt(Rn,Rn.current),Pt(Rt,l),Ft===null&&(Ft=l)):qn()}function qn(){Pt(Rn,Rn.current),Pt(Rt,Rt.current)}function Tn(l){at(Rt),Ft===l&&(Ft=null),at(Rn)}var Rn=ze(0);function zh(l){for(var h=l;h!==null;){if(h.tag===13){var y=h.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||ca(y)||An(y)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Bs=0,xr=null,jr=null,vr=null,yn=!1,lo=!1,Do=!1,pu=0,mu=0,Ns=null,Jd=0;function un(){throw Error(a(321))}function Oo(l,h){if(h===null)return!1;for(var y=0;y<h.length&&y<l.length;y++)if(!ra(l[y],h[y]))return!1;return!0}function vc(l,h,y,S,z,j){return Bs=j,xr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,$e.H=l===null||l.memoizedState===null?Qr:Yn,Do=!1,j=y(S,z),Do=!1,lo&&(j=kh(h,y,S,z)),_c(l),j}function _c(l){$e.H=Vr;var h=jr!==null&&jr.next!==null;if(Bs=0,vr=jr=xr=null,yn=!1,mu=0,Ns=null,h)throw Error(a(300));l===null||yi||(l=l.dependencies,l!==null&&dc(l)&&(yi=!0))}function kh(l,h,y,S){xr=l;var z=0;do{if(lo&&(Ns=null),mu=0,lo=!1,25<=z)throw Error(a(301));if(z+=1,vr=jr=null,l.updateQueue!=null){var j=l.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}$e.H=ti,j=h(y,S)}while(lo);return j}function Rh(){var l=$e.H,h=l.useState()[0];return h=typeof h.then=="function"?gu(h):h,l=l.useState()[0],(jr!==null?jr.memoizedState:null)!==l&&(xr.flags|=1024),h}function Lh(){var l=pu!==0;return pu=0,l}function El(l,h,y){h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~y}function Fs(l){if(yn){for(l=l.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}yn=!1}Bs=0,vr=jr=xr=null,lo=!1,mu=pu=0,Ns=null}function Pi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?xr.memoizedState=vr=l:vr=vr.next=l,vr}function vn(){if(jr===null){var l=xr.alternate;l=l!==null?l.memoizedState:null}else l=jr.next;var h=vr===null?xr.memoizedState:vr.next;if(h!==null)vr=h,jr=l;else{if(l===null)throw xr.alternate===null?Error(a(467)):Error(a(310));jr=l,l={memoizedState:jr.memoizedState,baseState:jr.baseState,baseQueue:jr.baseQueue,queue:jr.queue,next:null},vr===null?xr.memoizedState=vr=l:vr=vr.next=l}return vr}function ps(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gu(l){var h=mu;return mu+=1,Ns===null&&(Ns=[]),l=Zf(Ns,l,h),h=xr,(vr===null?h.memoizedState:vr.next)===null&&(h=h.alternate,$e.H=h===null||h.memoizedState===null?Qr:Yn),l}function yu(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return gu(l);if(l.$$typeof===fe)return Wn(l)}throw Error(a(438,String(l)))}function xc(l){var h=null,y=xr.updateQueue;if(y!==null&&(h=y.memoCache),h==null){var S=xr.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(z){return z.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),y===null&&(y=ps(),xr.updateQueue=y),y.memoCache=h,y=h.data[h.index],y===void 0)for(y=h.data[h.index]=Array(l),S=0;S<l;S++)y[S]=vt;return h.index++,y}function Io(l,h){return typeof h=="function"?h(l):h}function w(l){var h=vn();return n(h,jr,l)}function n(l,h,y){var S=l.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=y;var z=l.baseQueue,j=S.pending;if(j!==null){if(z!==null){var Q=z.next;z.next=j.next,j.next=Q}h.baseQueue=z=j,S.pending=null}if(j=l.baseState,z===null)l.memoizedState=j;else{h=z.next;var ce=Q=null,Re=null,Je=h,ft=!1;do{var bt=Je.lane&-536870913;if(bt!==Je.lane?(Pr&bt)===bt:(Bs&bt)===bt){var tt=Je.revertLane;if(tt===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),bt===cu&&(ft=!0);else if((Bs&tt)===tt){Je=Je.next,tt===cu&&(ft=!0);continue}else bt={lane:0,revertLane:Je.revertLane,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Re===null?(ce=Re=bt,Q=j):Re=Re.next=bt,xr.lanes|=tt,Eu|=tt;bt=Je.action,Do&&y(j,bt),j=Je.hasEagerState?Je.eagerState:y(j,bt)}else tt={lane:bt,revertLane:Je.revertLane,gesture:Je.gesture,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Re===null?(ce=Re=tt,Q=j):Re=Re.next=tt,xr.lanes|=bt,Eu|=bt;Je=Je.next}while(Je!==null&&Je!==h);if(Re===null?Q=j:Re.next=ce,!ra(j,l.memoizedState)&&(yi=!0,ft&&(y=Ri,y!==null)))throw y;l.memoizedState=j,l.baseState=Q,l.baseQueue=Re,S.lastRenderedState=j}return z===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function c(l){var h=vn(),y=h.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=l;var S=y.dispatch,z=y.pending,j=h.memoizedState;if(z!==null){y.pending=null;var Q=z=z.next;do j=l(j,Q.action),Q=Q.next;while(Q!==z);ra(j,h.memoizedState)||(yi=!0),h.memoizedState=j,h.baseQueue===null&&(h.baseState=j),y.lastRenderedState=j}return[j,S]}function p(l,h,y){var S=xr,z=vn(),j=Sr;if(j){if(y===void 0)throw Error(a(407));y=y()}else y=h();var Q=!ra((jr||z).memoizedState,y);if(Q&&(z.memoizedState=y,yi=!0),z=z.queue,Xe(A.bind(null,S,z,l),[l]),z.getSnapshot!==h||Q||vr!==null&&vr.memoizedState.tag&1){if(S.flags|=2048,Ee(9,{destroy:void 0},T.bind(null,S,z,y,h),null),_n===null)throw Error(a(349));j||(Bs&127)!==0||_(S,h,y)}return y}function _(l,h,y){l.flags|=16384,l={getSnapshot:h,value:y},h=xr.updateQueue,h===null?(h=ps(),xr.updateQueue=h,h.stores=[l]):(y=h.stores,y===null?h.stores=[l]:y.push(l))}function T(l,h,y,S){h.value=y,h.getSnapshot=S,O(h)&&R(l)}function A(l,h,y){return y(function(){O(h)&&R(l)})}function O(l){var h=l.getSnapshot;l=l.value;try{var y=h();return!ra(l,y)}catch{return!0}}function R(l){var h=no(l,2);h!==null&&go(h,l,2)}function U(l){var h=Pi();if(typeof l=="function"){var y=l;if(l=y(),Do){Te(!0);try{y()}finally{Te(!1)}}}return h.memoizedState=h.baseState=l,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:l},h}function V(l,h,y,S){return l.baseState=y,n(l,jr,typeof S=="function"?S:Io)}function K(l,h,y,S,z){if(Ba(l))throw Error(a(485));if(l=h.action,l!==null){var j={payload:z,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){j.listeners.push(Q)}};$e.T!==null?y(!0):j.isTransition=!1,S(j),y=h.pending,y===null?(j.next=h.pending=j,X(h,j)):(j.next=y.next,h.pending=y.next=j)}}function X(l,h){var y=h.action,S=h.payload,z=l.state;if(h.isTransition){var j=$e.T,Q={};$e.T=Q;try{var ce=y(z,S),Re=$e.S;Re!==null&&Re(Q,ce),re(l,h,ce)}catch(Je){de(l,h,Je)}finally{j!==null&&Q.types!==null&&(j.types=Q.types),$e.T=j}}else try{j=y(z,S),re(l,h,j)}catch(Je){de(l,h,Je)}}function re(l,h,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){oe(l,h,S)},function(S){return de(l,h,S)}):oe(l,h,y)}function oe(l,h,y){h.status="fulfilled",h.value=y,ve(h),l.state=y,h=l.pending,h!==null&&(y=h.next,y===h?l.pending=null:(y=y.next,h.next=y,X(l,y)))}function de(l,h,y){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=y,ve(h),h=h.next;while(h!==S)}l.action=null}function ve(l){l=l.listeners;for(var h=0;h<l.length;h++)(0,l[h])()}function ye(l,h){return h}function we(l,h){if(Sr){var y=_n.formState;if(y!==null){e:{var S=xr;if(Sr){if(Xr){t:{for(var z=Xr,j=ka;z.nodeType!==8;){if(!j){z=null;break t}if(z=Bo(z.nextSibling),z===null){z=null;break t}}j=z.data,z=j==="F!"||j==="F"?z:null}if(z){Xr=Bo(z.nextSibling),S=z.data==="F!";break e}}ia(S)}S=!1}S&&(h=y[0])}}return y=Pi(),y.memoizedState=y.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ye,lastRenderedState:h},y.queue=S,y=bc.bind(null,xr,S),S.dispatch=y,S=U(!1),j=la.bind(null,xr,!1,S.queue),S=Pi(),z={state:h,dispatch:null,action:l,pending:null},S.queue=z,y=K.bind(null,xr,z,j,y),z.dispatch=y,S.memoizedState=l,[h,y,!1]}function Ce(l){var h=vn();return be(h,jr,l)}function be(l,h,y){if(h=n(l,h,ye)[0],l=w(Io)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=gu(h)}catch(Q){throw Q===Po?oa:Q}else S=h;h=vn();var z=h.queue,j=z.dispatch;return y!==h.memoizedState&&(xr.flags|=2048,Ee(9,{destroy:void 0},Pe.bind(null,z,y),null)),[S,j,l]}function Pe(l,h){l.action=h}function Ie(l){var h=vn(),y=jr;if(y!==null)return be(h,y,l);vn(),h=h.memoizedState,y=vn();var S=y.queue.dispatch;return y.memoizedState=l,[h,S,!1]}function Ee(l,h,y,S){return l={tag:l,create:y,deps:S,inst:h,next:null},h=xr.updateQueue,h===null&&(h=ps(),xr.updateQueue=h),y=h.lastEffect,y===null?h.lastEffect=l.next=l:(S=y.next,y.next=l,l.next=S,h.lastEffect=l),l}function Le(){return vn().memoizedState}function Ke(l,h,y,S){var z=Pi();xr.flags|=l,z.memoizedState=Ee(1|h,{destroy:void 0},y,S===void 0?null:S)}function He(l,h,y,S){var z=vn();S=S===void 0?null:S;var j=z.memoizedState.inst;jr!==null&&S!==null&&Oo(S,jr.memoizedState.deps)?z.memoizedState=Ee(h,j,y,S):(xr.flags|=l,z.memoizedState=Ee(1|h,j,y,S))}function Ye(l,h){Ke(8390656,8,l,h)}function Xe(l,h){He(2048,8,l,h)}function At(l){xr.flags|=4;var h=xr.updateQueue;if(h===null)h=ps(),xr.updateQueue=h,h.events=[l];else{var y=h.events;y===null?h.events=[l]:y.push(l)}}function Mt(l){var h=vn().memoizedState;return At({ref:h,nextImpl:l}),function(){if((Jr&2)!==0)throw Error(a(440));return h.impl.apply(void 0,arguments)}}function dt(l,h){return He(4,2,l,h)}function Ot(l,h){return He(4,4,l,h)}function lr(l,h){if(typeof h=="function"){l=l();var y=h(l);return function(){typeof y=="function"?y():h(null)}}if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function Br(l,h,y){y=y!=null?y.concat([l]):null,He(4,4,lr.bind(null,h,l),y)}function rn(){}function Kr(l,h){var y=vn();h=h===void 0?null:h;var S=y.memoizedState;return h!==null&&Oo(h,S[1])?S[0]:(y.memoizedState=[l,h],l)}function cn(l,h){var y=vn();h=h===void 0?null:h;var S=y.memoizedState;if(h!==null&&Oo(h,S[1]))return S[0];if(S=l(),Do){Te(!0);try{l()}finally{Te(!1)}}return y.memoizedState=[S,h],S}function Gr(l,h,y){return y===void 0||(Bs&1073741824)!==0&&(Pr&261930)===0?l.memoizedState=h:(l.memoizedState=y,l=U_(),xr.lanes|=l,Eu|=l,y)}function En(l,h,y,S){return ra(y,h)?y:fu.current!==null?(l=Gr(l,y,S),ra(l,h)||(yi=!0),l):(Bs&42)===0||(Bs&1073741824)!==0&&(Pr&261930)===0?(yi=!0,l.memoizedState=y):(l=U_(),xr.lanes|=l,Eu|=l,h)}function hn(l,h,y,S,z){var j=ct.p;ct.p=j!==0&&8>j?j:8;var Q=$e.T,ce={};$e.T=ce,la(l,!1,h,y);try{var Re=z(),Je=$e.S;if(Je!==null&&Je(ce,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var ft=Eh(Re,S);ko(l,h,ft,mo(l))}else ko(l,h,S,mo(l))}catch(bt){ko(l,h,{then:function(){},status:"rejected",reason:bt},mo())}finally{ct.p=j,Q!==null&&ce.types!==null&&(Q.types=ce.types),$e.T=Q}}function mi(){}function Ln(l,h,y,S){if(l.tag!==5)throw Error(a(476));var z=jn(l).queue;hn(l,z,h,Et,y===null?mi:function(){return gi(l),y(S)})}function jn(l){var h=l.memoizedState;if(h!==null)return h;h={memoizedState:Et,baseState:Et,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:Et},next:null};var y={};return h.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:y},next:null},l.memoizedState=h,l=l.alternate,l!==null&&(l.memoizedState=h),h}function gi(l){var h=jn(l);h.next===null&&(h=l.alternate.memoizedState),ko(l,h.next.queue,{},mo())}function ms(){return Wn(zp)}function gs(){return vn().memoizedState}function zo(){return vn().memoizedState}function sa(l){for(var h=l.return;h!==null;){switch(h.tag){case 24:case 3:var y=mo();l=ds(y);var S=Ls(h,l,y);S!==null&&(go(S,h,y),oo(S,h,y)),h={cache:ls()},l.payload=h;return}h=h.return}}function vu(l,h,y){var S=mo();y={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Ba(l)?uo(h,y):(y=yl(l,h,y,S),y!==null&&(go(y,l,S),co(y,h,S)))}function bc(l,h,y){var S=mo();ko(l,h,y,S)}function ko(l,h,y,S){var z={lane:S,revertLane:0,gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null};if(Ba(l))uo(h,z);else{var j=l.alternate;if(l.lanes===0&&(j===null||j.lanes===0)&&(j=h.lastRenderedReducer,j!==null))try{var Q=h.lastRenderedState,ce=j(Q,y);if(z.hasEagerState=!0,z.eagerState=ce,ra(ce,Q))return wh(l,h,z,0),_n===null&&su(),!1}catch{}if(y=yl(l,h,z,S),y!==null)return go(y,l,S),co(y,h,S),!0}return!1}function la(l,h,y,S){if(S={lane:2,revertLane:qy(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Ba(l)){if(h)throw Error(a(479))}else h=yl(l,y,S,2),h!==null&&go(h,l,2)}function Ba(l){var h=l.alternate;return l===xr||h!==null&&h===xr}function uo(l,h){lo=yn=!0;var y=l.pending;y===null?h.next=h:(h.next=y.next,y.next=h),l.pending=h}function co(l,h,y){if((y&4194048)!==0){var S=h.lanes;S&=l.pendingLanes,y|=S,h.lanes=y,wn(l,y)}}var Vr={readContext:Wn,use:yu,useCallback:un,useContext:un,useEffect:un,useImperativeHandle:un,useLayoutEffect:un,useInsertionEffect:un,useMemo:un,useReducer:un,useRef:un,useState:un,useDebugValue:un,useDeferredValue:un,useTransition:un,useSyncExternalStore:un,useId:un,useHostTransitionStatus:un,useFormState:un,useActionState:un,useOptimistic:un,useMemoCache:un,useCacheRefresh:un};Vr.useEffectEvent=un;var Qr={readContext:Wn,use:yu,useCallback:function(l,h){return Pi().memoizedState=[l,h===void 0?null:h],l},useContext:Wn,useEffect:Ye,useImperativeHandle:function(l,h,y){y=y!=null?y.concat([l]):null,Ke(4194308,4,lr.bind(null,h,l),y)},useLayoutEffect:function(l,h){return Ke(4194308,4,l,h)},useInsertionEffect:function(l,h){Ke(4,2,l,h)},useMemo:function(l,h){var y=Pi();h=h===void 0?null:h;var S=l();if(Do){Te(!0);try{l()}finally{Te(!1)}}return y.memoizedState=[S,h],S},useReducer:function(l,h,y){var S=Pi();if(y!==void 0){var z=y(h);if(Do){Te(!0);try{y(h)}finally{Te(!1)}}}else z=h;return S.memoizedState=S.baseState=z,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:z},S.queue=l,l=l.dispatch=vu.bind(null,xr,l),[S.memoizedState,l]},useRef:function(l){var h=Pi();return l={current:l},h.memoizedState=l},useState:function(l){l=U(l);var h=l.queue,y=bc.bind(null,xr,h);return h.dispatch=y,[l.memoizedState,y]},useDebugValue:rn,useDeferredValue:function(l,h){var y=Pi();return Gr(y,l,h)},useTransition:function(){var l=U(!1);return l=hn.bind(null,xr,l.queue,!0,!1),Pi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,h,y){var S=xr,z=Pi();if(Sr){if(y===void 0)throw Error(a(407));y=y()}else{if(y=h(),_n===null)throw Error(a(349));(Pr&127)!==0||_(S,h,y)}z.memoizedState=y;var j={value:y,getSnapshot:h};return z.queue=j,Ye(A.bind(null,S,j,l),[l]),S.flags|=2048,Ee(9,{destroy:void 0},T.bind(null,S,j,y,h),null),y},useId:function(){var l=Pi(),h=_n.identifierPrefix;if(Sr){var y=na,S=rs;y=(S&~(1<<32-Oe(S)-1)).toString(32)+y,h="_"+h+"R_"+y,y=pu++,0<y&&(h+="H"+y.toString(32)),h+="_"}else y=Jd++,h="_"+h+"r_"+y.toString(32)+"_";return l.memoizedState=h},useHostTransitionStatus:ms,useFormState:we,useActionState:we,useOptimistic:function(l){var h=Pi();h.memoizedState=h.baseState=l;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=y,h=la.bind(null,xr,!0,y),y.dispatch=h,[l,h]},useMemoCache:xc,useCacheRefresh:function(){return Pi().memoizedState=sa.bind(null,xr)},useEffectEvent:function(l){var h=Pi(),y={impl:l};return h.memoizedState=y,function(){if((Jr&2)!==0)throw Error(a(440));return y.impl.apply(void 0,arguments)}}},Yn={readContext:Wn,use:yu,useCallback:Kr,useContext:Wn,useEffect:Xe,useImperativeHandle:Br,useInsertionEffect:dt,useLayoutEffect:Ot,useMemo:cn,useReducer:w,useRef:Le,useState:function(){return w(Io)},useDebugValue:rn,useDeferredValue:function(l,h){var y=vn();return En(y,jr.memoizedState,l,h)},useTransition:function(){var l=w(Io)[0],h=vn().memoizedState;return[typeof l=="boolean"?l:gu(l),h]},useSyncExternalStore:p,useId:gs,useHostTransitionStatus:ms,useFormState:Ce,useActionState:Ce,useOptimistic:function(l,h){var y=vn();return V(y,jr,l,h)},useMemoCache:xc,useCacheRefresh:zo};Yn.useEffectEvent=Mt;var ti={readContext:Wn,use:yu,useCallback:Kr,useContext:Wn,useEffect:Xe,useImperativeHandle:Br,useInsertionEffect:dt,useLayoutEffect:Ot,useMemo:cn,useReducer:c,useRef:Le,useState:function(){return c(Io)},useDebugValue:rn,useDeferredValue:function(l,h){var y=vn();return jr===null?Gr(y,l,h):En(y,jr.memoizedState,l,h)},useTransition:function(){var l=c(Io)[0],h=vn().memoizedState;return[typeof l=="boolean"?l:gu(l),h]},useSyncExternalStore:p,useId:gs,useHostTransitionStatus:ms,useFormState:Ie,useActionState:Ie,useOptimistic:function(l,h){var y=vn();return jr!==null?V(y,jr,l,h):(y.baseState=l,[l,y.queue.dispatch])},useMemoCache:xc,useCacheRefresh:zo};ti.useEffectEvent=Mt;function Kf(l,h,y,S){h=l.memoizedState,y=y(S,h),y=y==null?h:I({},h,y),l.memoizedState=y,l.lanes===0&&(l.updateQueue.baseState=y)}var Qf={enqueueSetState:function(l,h,y){l=l._reactInternals;var S=mo(),z=ds(S);z.payload=h,y!=null&&(z.callback=y),h=Ls(l,z,S),h!==null&&(go(h,l,S),oo(h,l,S))},enqueueReplaceState:function(l,h,y){l=l._reactInternals;var S=mo(),z=ds(S);z.tag=1,z.payload=h,y!=null&&(z.callback=y),h=Ls(l,z,S),h!==null&&(go(h,l,S),oo(h,l,S))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var y=mo(),S=ds(y);S.tag=2,h!=null&&(S.callback=h),h=Ls(l,S,y),h!==null&&(go(h,l,y),oo(h,l,y))}};function Al(l,h,y,S,z,j,Q){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,j,Q):h.prototype&&h.prototype.isPureReactComponent?!gl(y,S)||!gl(z,j):!0}function Dm(l,h,y,S){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(y,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(y,S),h.state!==l&&Qf.enqueueReplaceState(h,h.state,null)}function Ml(l,h){var y=h;if("ref"in h){y={};for(var S in h)S!=="ref"&&(y[S]=h[S])}if(l=l.defaultProps){y===h&&(y=I({},y));for(var z in l)y[z]===void 0&&(y[z]=l[z])}return y}function Jf(l){es(l)}function Us(l){console.error(l)}function Vs(l){es(l)}function Ro(l,h){try{var y=l.onUncaughtError;y(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function ed(l,h,y){try{var S=l.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(z){setTimeout(function(){throw z})}}function jh(l,h,y){return y=ds(y),y.tag=3,y.payload={element:null},y.callback=function(){Ro(l,h)},y}function Bh(l){return l=ds(l),l.tag=3,l}function Nh(l,h,y,S){var z=y.type.getDerivedStateFromError;if(typeof z=="function"){var j=S.value;l.payload=function(){return z(j)},l.callback=function(){ed(h,y,S)}}var Q=y.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(l.callback=function(){ed(h,y,S),typeof z!="function"&&(Au===null?Au=new Set([this]):Au.add(this));var ce=S.stack;this.componentDidCatch(S.value,{componentStack:ce!==null?ce:""})})}function Om(l,h,y,S,z){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=y.alternate,h!==null&&Ra(h,y,z,!0),y=Rt.current,y!==null){switch(y.tag){case 31:case 13:return Ft===null?vp():y.alternate===null&&Xn===0&&(Xn=3),y.flags&=-257,y.flags|=65536,y.lanes=z,S===kt?y.flags|=16384:(h=y.updateQueue,h===null?y.updateQueue=new Set([S]):h.add(S),rg(l,S,z)),!1;case 22:return y.flags|=65536,S===kt?y.flags|=16384:(h=y.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=h):(y=h.retryQueue,y===null?h.retryQueue=new Set([S]):y.add(S)),rg(l,S,z)),!1}throw Error(a(435,y.tag))}return rg(l,S,z),vp(),!1}if(Sr)return h=Rt.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=z,S!==Sn&&(l=Error(a(422),{cause:S}),Is(Hi(l,y)))):(S!==Sn&&(h=Error(a(423),{cause:S}),Is(Hi(h,y))),l=l.current.alternate,l.flags|=65536,z&=-z,l.lanes|=z,S=Hi(S,y),z=jh(l.stateNode,S,z),Ur(l,z),Xn!==4&&(Xn=2)),!1;var j=Error(a(520),{cause:S});if(j=Hi(j,y),pp===null?pp=[j]:pp.push(j),Xn!==4&&(Xn=2),h===null)return!0;S=Hi(S,y),y=h;do{switch(y.tag){case 3:return y.flags|=65536,l=z&-z,y.lanes|=l,l=jh(y.stateNode,S,l),Ur(y,l),!1;case 1:if(h=y.type,j=y.stateNode,(y.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Au===null||!Au.has(j))))return y.flags|=65536,z&=-z,y.lanes|=z,z=Bh(z),Nh(z,l,y,S),Ur(y,z),!1}y=y.return}while(y!==null);return!1}var Im=Error(a(461)),yi=!1;function Ci(l,h,y,S){h.child=l===null?Xd(h,null,y,S):hs(h,l.child,y,S)}function T_(l,h,y,S,z){y=y.render;var j=h.ref;if("ref"in S){var Q={};for(var ce in S)ce!=="ref"&&(Q[ce]=S[ce])}else Q=S;return Rs(h),S=vc(l,h,y,Q,j,z),ce=Lh(),l!==null&&!yi?(El(l,h,z),Cl(l,h,z)):(Sr&&ce&&uu(h),h.flags|=1,Ci(l,h,S,z),h.child)}function zm(l,h,y,S,z){if(l===null){var j=y.type;return typeof j=="function"&&!Bf(j)&&j.defaultProps===void 0&&y.compare===null?(h.tag=15,h.type=j,vy(l,h,j,S,z)):(l=Nf(y.type,null,S,h,h.mode,z),l.ref=h.ref,l.return=h,h.child=l)}if(j=l.child,!rp(l,z)){var Q=j.memoizedProps;if(y=y.compare,y=y!==null?y:gl,y(Q,S)&&l.ref===h.ref)return Cl(l,h,z)}return h.flags|=1,l=za(j,S),l.ref=h.ref,l.return=h,h.child=l}function vy(l,h,y,S,z){if(l!==null){var j=l.memoizedProps;if(gl(j,S)&&l.ref===h.ref)if(yi=!1,h.pendingProps=S=j,rp(l,z))(l.flags&131072)!==0&&(yi=!0);else return h.lanes=l.lanes,Cl(l,h,z)}return xy(l,h,y,S,z)}function _y(l,h,y,S){var z=S.children,j=l!==null?l.memoizedState:null;if(l===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(j=j!==null?j.baseLanes|y:y,l!==null){for(S=h.child=l.child,z=0;S!==null;)z=z|S.lanes|S.childLanes,S=S.sibling;S=z&~j}else S=0,h.child=null;return E_(l,h,j,y,S)}if((y&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},l!==null&&Gf(h,j!==null?j.cachePool:null),j!==null?Qd(h,j):ja(),Ih(h);else return S=h.lanes=536870912,E_(l,h,j!==null?j.baseLanes|y:y,y,S)}else j!==null?(Gf(h,j.cachePool),Qd(h,j),qn(),h.memoizedState=null):(l!==null&&Gf(h,null),ja(),qn());return Ci(l,h,z,y),h.child}function Pl(l,h){return l!==null&&l.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function E_(l,h,y,S,z){var j=$f();return j=j===null?null:{parent:Vn._currentValue,pool:j},h.memoizedState={baseLanes:y,cachePool:j},l!==null&&Gf(h,null),ja(),Ih(h),l!==null&&Ra(l,h,S,!0),h.childLanes=z,null}function _u(l,h){return h=Bm({mode:h.mode,children:h.children},l.mode),h.ref=l.ref,l.child=h,h.return=l,h}function ep(l,h,y){return hs(h,l.child,null,y),l=_u(h,h.pendingProps),l.flags|=2,Tn(h),h.memoizedState=null,l}function km(l,h,y){var S=h.pendingProps,z=(h.flags&128)!==0;if(h.flags&=-129,l===null){if(Sr){if(S.mode==="hidden")return l=_u(h,S),h.lanes=536870912,Pl(null,l);if(yc(h),(l=Xr)?(l=Oc(l,ka),l=l!==null&&l.data==="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:ts!==null?{id:rs,overflow:na}:null,retryLane:536870912,hydrationErrors:null},y=Ff(l),y.return=h,h.child=y,pi=h,Xr=null)):l=null,l===null)throw ia(h);return h.lanes=536870912,null}return _u(h,S)}var j=l.memoizedState;if(j!==null){var Q=j.dehydrated;if(yc(h),z)if(h.flags&256)h.flags&=-257,h=ep(l,h,y);else if(h.memoizedState!==null)h.child=l.child,h.flags|=128,h=null;else throw Error(a(558));else if(yi||Ra(l,h,y,!1),z=(y&l.childLanes)!==0,yi||z){if(S=_n,S!==null&&(Q=Mi(S,y),Q!==0&&Q!==j.retryLane))throw j.retryLane=Q,no(l,Q),go(S,l,Q),Im;vp(),h=ep(l,h,y)}else l=j.treeContext,Xr=Bo(Q.nextSibling),pi=h,Sr=!0,Os=null,ka=!1,l!==null&&Hd(h,l),h=_u(h,S),h.flags|=4096;return h}return l=za(l.child,{mode:S.mode,children:S.children}),l.ref=h.ref,h.child=l,l.return=h,l}function Rm(l,h){var y=h.ref;if(y===null)l!==null&&l.ref!==null&&(h.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(a(284));(l===null||l.ref!==y)&&(h.flags|=4194816)}}function xy(l,h,y,S,z){return Rs(h),y=vc(l,h,y,S,void 0,z),S=Lh(),l!==null&&!yi?(El(l,h,z),Cl(l,h,z)):(Sr&&S&&uu(h),h.flags|=1,Ci(l,h,y,z),h.child)}function A_(l,h,y,S,z,j){return Rs(h),h.updateQueue=null,y=kh(h,S,y,z),_c(l),S=Lh(),l!==null&&!yi?(El(l,h,j),Cl(l,h,j)):(Sr&&S&&uu(h),h.flags|=1,Ci(l,h,y,j),h.child)}function M_(l,h,y,S,z){if(Rs(h),h.stateNode===null){var j=pr,Q=y.contextType;typeof Q=="object"&&Q!==null&&(j=Wn(Q)),j=new y(S,j),h.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Qf,h.stateNode=j,j._reactInternals=h,j=h.stateNode,j.props=S,j.state=h.memoizedState,j.refs={},Yf(h),Q=y.contextType,j.context=typeof Q=="object"&&Q!==null?Wn(Q):pr,j.state=h.memoizedState,Q=y.getDerivedStateFromProps,typeof Q=="function"&&(Kf(h,y,Q,S),j.state=h.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(Q=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),Q!==j.state&&Qf.enqueueReplaceState(j,j.state,null),Tl(h,S,j,z),js(),j.state=h.memoizedState),typeof j.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(l===null){j=h.stateNode;var ce=h.memoizedProps,Re=Ml(y,ce);j.props=Re;var Je=j.context,ft=y.contextType;Q=pr,typeof ft=="object"&&ft!==null&&(Q=Wn(ft));var bt=y.getDerivedStateFromProps;ft=typeof bt=="function"||typeof j.getSnapshotBeforeUpdate=="function",ce=h.pendingProps!==ce,ft||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(ce||Je!==Q)&&Dm(h,j,S,Q),fs=!1;var tt=h.memoizedState;j.state=tt,Tl(h,S,j,z),js(),Je=h.memoizedState,ce||tt!==Je||fs?(typeof bt=="function"&&(Kf(h,y,bt,S),Je=h.memoizedState),(Re=fs||Al(h,y,Re,S,tt,Je,Q))?(ft||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(h.flags|=4194308)):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=Je),j.props=S,j.state=Je,j.context=Q,S=Re):(typeof j.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{j=h.stateNode,Ch(l,h),Q=h.memoizedProps,ft=Ml(y,Q),j.props=ft,bt=h.pendingProps,tt=j.context,Je=y.contextType,Re=pr,typeof Je=="object"&&Je!==null&&(Re=Wn(Je)),ce=y.getDerivedStateFromProps,(Je=typeof ce=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Q!==bt||tt!==Re)&&Dm(h,j,S,Re),fs=!1,tt=h.memoizedState,j.state=tt,Tl(h,S,j,z),js();var ot=h.memoizedState;Q!==bt||tt!==ot||fs||l!==null&&l.dependencies!==null&&dc(l.dependencies)?(typeof ce=="function"&&(Kf(h,y,ce,S),ot=h.memoizedState),(ft=fs||Al(h,y,ft,S,tt,ot,Re)||l!==null&&l.dependencies!==null&&dc(l.dependencies))?(Je||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(S,ot,Re),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(S,ot,Re)),typeof j.componentDidUpdate=="function"&&(h.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof j.componentDidUpdate!="function"||Q===l.memoizedProps&&tt===l.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&tt===l.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=ot),j.props=S,j.state=ot,j.context=Re,S=ft):(typeof j.componentDidUpdate!="function"||Q===l.memoizedProps&&tt===l.memoizedState||(h.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||Q===l.memoizedProps&&tt===l.memoizedState||(h.flags|=1024),S=!1)}return j=S,Rm(l,h),S=(h.flags&128)!==0,j||S?(j=h.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:j.render(),h.flags|=1,l!==null&&S?(h.child=hs(h,l.child,null,z),h.child=hs(h,null,y,z)):Ci(l,h,y,z),h.memoizedState=j.state,l=h.child):l=Cl(l,h,z),l}function P_(l,h,y,S){return is(),h.flags|=256,Ci(l,h,y,S),h.child}var Lm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(l){return{baseLanes:l,cachePool:Cm()}}function jm(l,h,y){return l=l!==null?l.childLanes&~y:0,h&&(l|=Wi),l}function by(l,h,y){var S=h.pendingProps,z=!1,j=(h.flags&128)!==0,Q;if((Q=j)||(Q=l!==null&&l.memoizedState===null?!1:(Rn.current&2)!==0),Q&&(z=!0,h.flags&=-129),Q=(h.flags&32)!==0,h.flags&=-33,l===null){if(Sr){if(z?so(h):qn(),(l=Xr)?(l=Oc(l,ka),l=l!==null&&l.data!=="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:ts!==null?{id:rs,overflow:na}:null,retryLane:536870912,hydrationErrors:null},y=Ff(l),y.return=h,h.child=y,pi=h,Xr=null)):l=null,l===null)throw ia(h);return An(l)?h.lanes=32:h.lanes=536870912,null}var ce=S.children;return S=S.fallback,z?(qn(),z=h.mode,ce=Bm({mode:"hidden",children:ce},z),S=vl(S,z,y,null),ce.return=h,S.return=h,ce.sibling=S,h.child=ce,S=h.child,S.memoizedState=tp(y),S.childLanes=jm(l,Q,y),h.memoizedState=Lm,Pl(null,S)):(so(h),wy(h,ce))}var Re=l.memoizedState;if(Re!==null&&(ce=Re.dehydrated,ce!==null)){if(j)h.flags&256?(so(h),h.flags&=-257,h=Nm(l,h,y)):h.memoizedState!==null?(qn(),h.child=l.child,h.flags|=128,h=null):(qn(),ce=S.fallback,z=h.mode,S=Bm({mode:"visible",children:S.children},z),ce=vl(ce,z,y,null),ce.flags|=2,S.return=h,ce.return=h,S.sibling=ce,h.child=S,hs(h,l.child,null,y),S=h.child,S.memoizedState=tp(y),S.childLanes=jm(l,Q,y),h.memoizedState=Lm,h=Pl(null,S));else if(so(h),An(ce)){if(Q=ce.nextSibling&&ce.nextSibling.dataset,Q)var Je=Q.dgst;Q=Je,S=Error(a(419)),S.stack="",S.digest=Q,Is({value:S,source:null,stack:null}),h=Nm(l,h,y)}else if(yi||Ra(l,h,y,!1),Q=(y&l.childLanes)!==0,yi||Q){if(Q=_n,Q!==null&&(S=Mi(Q,y),S!==0&&S!==Re.retryLane))throw Re.retryLane=S,no(l,S),go(Q,l,S),Im;ca(ce)||vp(),h=Nm(l,h,y)}else ca(ce)?(h.flags|=192,h.child=l.child,h=null):(l=Re.treeContext,Xr=Bo(ce.nextSibling),pi=h,Sr=!0,Os=null,ka=!1,l!==null&&Hd(h,l),h=wy(h,S.children),h.flags|=4096);return h}return z?(qn(),ce=S.fallback,z=h.mode,Re=l.child,Je=Re.sibling,S=za(Re,{mode:"hidden",children:S.children}),S.subtreeFlags=Re.subtreeFlags&65011712,Je!==null?ce=za(Je,ce):(ce=vl(ce,z,y,null),ce.flags|=2),ce.return=h,S.return=h,S.sibling=ce,h.child=S,Pl(null,S),S=h.child,ce=l.child.memoizedState,ce===null?ce=tp(y):(z=ce.cachePool,z!==null?(Re=Vn._currentValue,z=z.parent!==Re?{parent:Re,pool:Re}:z):z=Cm(),ce={baseLanes:ce.baseLanes|y,cachePool:z}),S.memoizedState=ce,S.childLanes=jm(l,Q,y),h.memoizedState=Lm,Pl(l.child,S)):(so(h),y=l.child,l=y.sibling,y=za(y,{mode:"visible",children:S.children}),y.return=h,y.sibling=null,l!==null&&(Q=h.deletions,Q===null?(h.deletions=[l],h.flags|=16):Q.push(l)),h.child=y,h.memoizedState=null,y)}function wy(l,h){return h=Bm({mode:"visible",children:h},l.mode),h.return=l,l.child=h}function Bm(l,h){return l=Ia(22,l,null,h),l.lanes=0,l}function Nm(l,h,y){return hs(h,l.child,null,y),l=wy(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function Sy(l,h,y){l.lanes|=h;var S=l.alternate;S!==null&&(S.lanes|=h),Uf(l.return,h,y)}function Ty(l,h,y,S,z,j){var Q=l.memoizedState;Q===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:z,treeForkCount:j}:(Q.isBackwards=h,Q.rendering=null,Q.renderingStartTime=0,Q.last=S,Q.tail=y,Q.tailMode=z,Q.treeForkCount=j)}function Fm(l,h,y){var S=h.pendingProps,z=S.revealOrder,j=S.tail;S=S.children;var Q=Rn.current,ce=(Q&2)!==0;if(ce?(Q=Q&1|2,h.flags|=128):Q&=1,Pt(Rn,Q),Ci(l,h,S,y),S=Sr?wl:0,!ce&&l!==null&&(l.flags&128)!==0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Sy(l,y,h);else if(l.tag===19)Sy(l,y,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(z){case"forwards":for(y=h.child,z=null;y!==null;)l=y.alternate,l!==null&&zh(l)===null&&(z=y),y=y.sibling;y=z,y===null?(z=h.child,h.child=null):(z=y.sibling,y.sibling=null),Ty(h,!1,z,y,j,S);break;case"backwards":case"unstable_legacy-backwards":for(y=null,z=h.child,h.child=null;z!==null;){if(l=z.alternate,l!==null&&zh(l)===null){h.child=z;break}l=z.sibling,z.sibling=y,y=z,z=l}Ty(h,!0,y,null,j,S);break;case"together":Ty(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function Cl(l,h,y){if(l!==null&&(h.dependencies=l.dependencies),Eu|=h.lanes,(y&h.childLanes)===0)if(l!==null){if(Ra(l,h,y,!1),(y&h.childLanes)===0)return null}else return null;if(l!==null&&h.child!==l.child)throw Error(a(153));if(h.child!==null){for(l=h.child,y=za(l,l.pendingProps),h.child=y,y.return=h;l.sibling!==null;)l=l.sibling,y=y.sibling=za(l,l.pendingProps),y.return=h;y.sibling=null}return h.child}function rp(l,h){return(l.lanes&h)!==0?!0:(l=l.dependencies,!!(l!==null&&dc(l)))}function np(l,h,y){switch(h.tag){case 3:Ar(h,h.stateNode.containerInfo),ks(h,Vn,l.memoizedState.cache),is();break;case 27:case 5:sr(h);break;case 4:Ar(h,h.stateNode.containerInfo);break;case 10:ks(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,yc(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(so(h),h.flags|=128,null):(y&h.child.childLanes)!==0?by(l,h,y):(so(h),l=Cl(l,h,y),l!==null?l.sibling:null);so(h);break;case 19:var z=(l.flags&128)!==0;if(S=(y&h.childLanes)!==0,S||(Ra(l,h,y,!1),S=(y&h.childLanes)!==0),z){if(S)return Fm(l,h,y);h.flags|=128}if(z=h.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Pt(Rn,Rn.current),S)break;return null;case 22:return h.lanes=0,_y(l,h,y,h.pendingProps);case 24:ks(h,Vn,l.memoizedState.cache)}return Cl(l,h,y)}function ua(l,h,y){if(l!==null)if(l.memoizedProps!==h.pendingProps)yi=!0;else{if(!rp(l,y)&&(h.flags&128)===0)return yi=!1,np(l,h,y);yi=(l.flags&131072)!==0}else yi=!1,Sr&&(h.flags&1048576)!==0&&Zd(h,wl,h.index);switch(h.lanes=0,h.tag){case 16:e:{var S=h.pendingProps;if(l=ao(h.elementType),h.type=l,typeof l=="function")Bf(l)?(S=Ml(l,S),h.tag=1,h=M_(null,h,l,S,y)):(h.tag=0,h=xy(null,h,l,S,y));else{if(l!=null){var z=l.$$typeof;if(z===me){h.tag=11,h=T_(null,h,l,S,y);break e}else if(z===Se){h.tag=14,h=zm(null,h,l,S,y);break e}}throw h=It(l)||l,Error(a(306,h,""))}}return h;case 0:return xy(l,h,h.type,h.pendingProps,y);case 1:return S=h.type,z=Ml(S,h.pendingProps),M_(l,h,S,z,y);case 3:e:{if(Ar(h,h.stateNode.containerInfo),l===null)throw Error(a(387));S=h.pendingProps;var j=h.memoizedState;z=j.element,Ch(l,h),Tl(h,S,null,y);var Q=h.memoizedState;if(S=Q.cache,ks(h,Vn,S),S!==j.cache&&Vf(h,[Vn],y,!0),js(),S=Q.element,j.isDehydrated)if(j={element:S,isDehydrated:!1,cache:Q.cache},h.updateQueue.baseState=j,h.memoizedState=j,h.flags&256){h=P_(l,h,S,y);break e}else if(S!==z){z=Hi(Error(a(424)),h),Is(z),h=P_(l,h,S,y);break e}else for(l=h.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,Xr=Bo(l.firstChild),pi=h,Sr=!0,Os=null,ka=!0,y=Xd(h,null,S,y),h.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(is(),S===z){h=Cl(l,h,y);break e}Ci(l,h,S,y)}h=h.child}return h;case 26:return Rm(l,h),l===null?(y=rv(h.type,null,h.pendingProps,null))?h.memoizedState=y:Sr||(y=h.type,l=h.pendingProps,S=Tp(Kt.current).createElement(y),S[Fr]=h,S[Tt]=l,Oi(S,y,l),In(S),h.stateNode=S):h.memoizedState=rv(h.type,l.memoizedProps,h.pendingProps,l.memoizedState),null;case 27:return sr(h),l===null&&Sr&&(S=h.stateNode=l0(h.type,h.pendingProps,Kt.current),pi=h,ka=!0,z=Xr,Dc(h.type)?(qa=z,Xr=Bo(S.firstChild)):Xr=z),Ci(l,h,h.pendingProps.children,y),Rm(l,h),l===null&&(h.flags|=4194304),h.child;case 5:return l===null&&Sr&&((z=S=Xr)&&(S=Li(S,h.type,h.pendingProps,ka),S!==null?(h.stateNode=S,pi=h,Xr=Bo(S.firstChild),ka=!1,z=!0):z=!1),z||ia(h)),sr(h),z=h.type,j=h.pendingProps,Q=l!==null?l.memoizedProps:null,S=j.children,dg(z,j)?S=null:Q!==null&&dg(z,Q)&&(h.flags|=32),h.memoizedState!==null&&(z=vc(l,h,Rh,null,null,y),zp._currentValue=z),Rm(l,h),Ci(l,h,S,y),h.child;case 6:return l===null&&Sr&&((l=y=Xr)&&(y=Zs(y,h.pendingProps,ka),y!==null?(h.stateNode=y,pi=h,Xr=null,l=!0):l=!1),l||ia(h)),null;case 13:return by(l,h,y);case 4:return Ar(h,h.stateNode.containerInfo),S=h.pendingProps,l===null?h.child=hs(h,null,S,y):Ci(l,h,S,y),h.child;case 11:return T_(l,h,h.type,h.pendingProps,y);case 7:return Ci(l,h,h.pendingProps,y),h.child;case 8:return Ci(l,h,h.pendingProps.children,y),h.child;case 12:return Ci(l,h,h.pendingProps.children,y),h.child;case 10:return S=h.pendingProps,ks(h,h.type,S.value),Ci(l,h,S.children,y),h.child;case 9:return z=h.type._context,S=h.pendingProps.children,Rs(h),z=Wn(z),S=S(z),h.flags|=1,Ci(l,h,S,y),h.child;case 14:return zm(l,h,h.type,h.pendingProps,y);case 15:return vy(l,h,h.type,h.pendingProps,y);case 19:return Fm(l,h,y);case 31:return km(l,h,y);case 22:return _y(l,h,y,h.pendingProps);case 24:return Rs(h),S=Wn(Vn),l===null?(z=$f(),z===null&&(z=_n,j=ls(),z.pooledCache=j,j.refCount++,j!==null&&(z.pooledCacheLanes|=y),z=j),h.memoizedState={parent:S,cache:z},Yf(h),ks(h,Vn,z)):((l.lanes&y)!==0&&(Ch(l,h),Tl(h,null,null,y),js()),z=l.memoizedState,j=h.memoizedState,z.parent!==S?(z={parent:S,cache:S},h.memoizedState=z,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=z),ks(h,Vn,S)):(S=j.cache,ks(h,Vn,S),S!==z.cache&&Vf(h,[Vn],y,!0))),Ci(l,h,h.pendingProps.children,y),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function Dl(l){l.flags|=4}function ip(l,h,y,S,z){if((h=(l.mode&32)!==0)&&(h=!1),h){if(l.flags|=16777216,(z&335544128)===z)if(l.stateNode.complete)l.flags|=8192;else if(Ly())l.flags|=8192;else throw Co=kt,Sl}else l.flags&=-16777217}function C_(l,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Sg(h))if(Ly())l.flags|=8192;else throw Co=kt,Sl}function ap(l,h){h!==null&&(l.flags|=4),l.flags&16384&&(h=l.tag!==22?Jt():536870912,l.lanes|=h,$h|=h)}function op(l,h){if(!Sr)switch(l.tailMode){case"hidden":h=l.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?l.tail=null:y.sibling=null;break;case"collapsed":y=l.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Bn(l){var h=l.alternate!==null&&l.alternate.child===l.child,y=0,S=0;if(h)for(var z=l.child;z!==null;)y|=z.lanes|z.childLanes,S|=z.subtreeFlags&65011712,S|=z.flags&65011712,z.return=l,z=z.sibling;else for(z=l.child;z!==null;)y|=z.lanes|z.childLanes,S|=z.subtreeFlags,S|=z.flags,z.return=l,z=z.sibling;return l.subtreeFlags|=S,l.childLanes=y,h}function D_(l,h,y){var S=h.pendingProps;switch(fc(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bn(h),null;case 1:return Bn(h),null;case 3:return y=h.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),ss(Vn),ht(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(l===null||l.child===null)&&(ns(h)?Dl(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,as())),Bn(h),null;case 26:var z=h.type,j=h.memoizedState;return l===null?(Dl(h),j!==null?(Bn(h),C_(h,j)):(Bn(h),ip(h,z,null,S,y))):j?j!==l.memoizedState?(Dl(h),Bn(h),C_(h,j)):(Bn(h),h.flags&=-16777217):(l=l.memoizedProps,l!==S&&Dl(h),Bn(h),ip(h,z,l,S,y)),null;case 27:if(mr(h),y=Kt.current,z=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==S&&Dl(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Bn(h),null}l=zt.current,ns(h)?aa(h):(l=l0(z,S,y),h.stateNode=l,Dl(h))}return Bn(h),null;case 5:if(mr(h),z=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==S&&Dl(h);else{if(!S){if(h.stateNode===null)throw Error(a(166));return Bn(h),null}if(j=zt.current,ns(h))aa(h);else{var Q=Tp(Kt.current);switch(j){case 1:j=Q.createElementNS("http://www.w3.org/2000/svg",z);break;case 2:j=Q.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;default:switch(z){case"svg":j=Q.createElementNS("http://www.w3.org/2000/svg",z);break;case"math":j=Q.createElementNS("http://www.w3.org/1998/Math/MathML",z);break;case"script":j=Q.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof S.is=="string"?Q.createElement("select",{is:S.is}):Q.createElement("select"),S.multiple?j.multiple=!0:S.size&&(j.size=S.size);break;default:j=typeof S.is=="string"?Q.createElement(z,{is:S.is}):Q.createElement(z)}}j[Fr]=h,j[Tt]=S;e:for(Q=h.child;Q!==null;){if(Q.tag===5||Q.tag===6)j.appendChild(Q.stateNode);else if(Q.tag!==4&&Q.tag!==27&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===h)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===h)break e;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}h.stateNode=j;e:switch(Oi(j,z,S),z){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&Dl(h)}}return Bn(h),ip(h,h.type,l===null?null:l.memoizedProps,h.pendingProps,y),null;case 6:if(l&&h.stateNode!=null)l.memoizedProps!==S&&Dl(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(a(166));if(l=Kt.current,ns(h)){if(l=h.stateNode,y=h.memoizedProps,S=null,z=pi,z!==null)switch(z.tag){case 27:case 5:S=z.memoizedProps}l[Fr]=h,l=!!(l.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||Wy(l.nodeValue,y)),l||ia(h,!0)}else l=Tp(l).createTextNode(S),l[Fr]=h,h.stateNode=l}return Bn(h),null;case 31:if(y=h.memoizedState,l===null||l.memoizedState!==null){if(S=ns(h),y!==null){if(l===null){if(!S)throw Error(a(318));if(l=h.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(557));l[Fr]=h}else is(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Bn(h),l=!1}else y=as(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=y),l=!0;if(!l)return h.flags&256?(Tn(h),h):(Tn(h),null);if((h.flags&128)!==0)throw Error(a(558))}return Bn(h),null;case 13:if(S=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(z=ns(h),S!==null&&S.dehydrated!==null){if(l===null){if(!z)throw Error(a(318));if(z=h.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(a(317));z[Fr]=h}else is(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Bn(h),z=!1}else z=as(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=z),z=!0;if(!z)return h.flags&256?(Tn(h),h):(Tn(h),null)}return Tn(h),(h.flags&128)!==0?(h.lanes=y,h):(y=S!==null,l=l!==null&&l.memoizedState!==null,y&&(S=h.child,z=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(z=S.alternate.memoizedState.cachePool.pool),j=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(j=S.memoizedState.cachePool.pool),j!==z&&(S.flags|=2048)),y!==l&&y&&(h.child.flags|=8192),ap(h,h.updateQueue),Bn(h),null);case 4:return ht(),l===null&&Zy(h.stateNode.containerInfo),Bn(h),null;case 10:return ss(h.type),Bn(h),null;case 19:if(at(Rn),S=h.memoizedState,S===null)return Bn(h),null;if(z=(h.flags&128)!==0,j=S.rendering,j===null)if(z)op(S,!1);else{if(Xn!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(j=zh(l),j!==null){for(h.flags|=128,op(S,!1),l=j.updateQueue,h.updateQueue=l,ap(h,l),h.subtreeFlags=0,l=y,y=h.child;y!==null;)Mm(y,l),y=y.sibling;return Pt(Rn,Rn.current&1|2),Sr&&Ds(h,S.treeForkCount),h.child}l=l.sibling}S.tail!==null&&oi()>mp&&(h.flags|=128,z=!0,op(S,!1),h.lanes=4194304)}else{if(!z)if(l=zh(j),l!==null){if(h.flags|=128,z=!0,l=l.updateQueue,h.updateQueue=l,ap(h,l),op(S,!0),S.tail===null&&S.tailMode==="hidden"&&!j.alternate&&!Sr)return Bn(h),null}else 2*oi()-S.renderingStartTime>mp&&y!==536870912&&(h.flags|=128,z=!0,op(S,!1),h.lanes=4194304);S.isBackwards?(j.sibling=h.child,h.child=j):(l=S.last,l!==null?l.sibling=j:h.child=j,S.last=j)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=oi(),l.sibling=null,y=Rn.current,Pt(Rn,z?y&1|2:y&1),Sr&&Ds(h,S.treeForkCount),l):(Bn(h),null);case 22:case 23:return Tn(h),du(),S=h.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(y&536870912)!==0&&(h.flags&128)===0&&(Bn(h),h.subtreeFlags&6&&(h.flags|=8192)):Bn(h),y=h.updateQueue,y!==null&&ap(h,y.retryQueue),y=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==y&&(h.flags|=2048),l!==null&&at(Mo),null;case 24:return y=null,l!==null&&(y=l.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),ss(Vn),Bn(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function Zb(l,h){switch(fc(h),h.tag){case 1:return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return ss(Vn),ht(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 26:case 27:case 5:return mr(h),null;case 31:if(h.memoizedState!==null){if(Tn(h),h.alternate===null)throw Error(a(340));is()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 13:if(Tn(h),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(a(340));is()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return at(Rn),null;case 4:return ht(),null;case 10:return ss(h.type),null;case 22:case 23:return Tn(h),du(),l!==null&&at(Mo),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 24:return ss(Vn),null;case 25:return null;default:return null}}function Um(l,h){switch(fc(h),h.tag){case 3:ss(Vn),ht();break;case 26:case 27:case 5:mr(h);break;case 4:ht();break;case 31:h.memoizedState!==null&&Tn(h);break;case 13:Tn(h);break;case 19:at(Rn);break;case 10:ss(h.type);break;case 22:case 23:Tn(h),du(),l!==null&&at(Mo);break;case 24:ss(Vn)}}function td(l,h){try{var y=h.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var z=S.next;y=z;do{if((y.tag&l)===l){S=void 0;var j=y.create,Q=y.inst;S=j(),Q.destroy=S}y=y.next}while(y!==z)}}catch(ce){en(h,h.return,ce)}}function xu(l,h,y){try{var S=h.updateQueue,z=S!==null?S.lastEffect:null;if(z!==null){var j=z.next;S=j;do{if((S.tag&l)===l){var Q=S.inst,ce=Q.destroy;if(ce!==void 0){Q.destroy=void 0,z=h;var Re=y,Je=ce;try{Je()}catch(ft){en(z,Re,ft)}}}S=S.next}while(S!==j)}}catch(ft){en(h,h.return,ft)}}function O_(l){var h=l.updateQueue;if(h!==null){var y=l.stateNode;try{Xf(h,y)}catch(S){en(l,l.return,S)}}}function I_(l,h,y){y.props=Ml(l.type,l.memoizedProps),y.state=l.memoizedState;try{y.componentWillUnmount()}catch(S){en(l,h,S)}}function sp(l,h){try{var y=l.ref;if(y!==null){switch(l.tag){case 26:case 27:case 5:var S=l.stateNode;break;case 30:S=l.stateNode;break;default:S=l.stateNode}typeof y=="function"?l.refCleanup=y(S):y.current=S}}catch(z){en(l,h,z)}}function Lo(l,h){var y=l.ref,S=l.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(z){en(l,h,z)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(z){en(l,h,z)}else y.current=null}function Vm(l){var h=l.type,y=l.memoizedProps,S=l.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(z){en(l,l.return,z)}}function qm(l,h,y){try{var S=l.stateNode;o0(S,l.type,y,h),S[Tt]=h}catch(z){en(l,l.return,z)}}function wc(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Dc(l.type)||l.tag===4}function Fh(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||wc(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Dc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Ey(l,h,y){var S=l.tag;if(S===5||S===6)l=l.stateNode,h?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(l,h):(h=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,h.appendChild(l),y=y._reactRootContainer,y!=null||h.onclick!==null||(h.onclick=Eo));else if(S!==4&&(S===27&&Dc(l.type)&&(y=l.stateNode,h=null),l=l.child,l!==null))for(Ey(l,h,y),l=l.sibling;l!==null;)Ey(l,h,y),l=l.sibling}function $m(l,h,y){var S=l.tag;if(S===5||S===6)l=l.stateNode,h?y.insertBefore(l,h):y.appendChild(l);else if(S!==4&&(S===27&&Dc(l.type)&&(y=l.stateNode),l=l.child,l!==null))for($m(l,h,y),l=l.sibling;l!==null;)$m(l,h,y),l=l.sibling}function z_(l){var h=l.stateNode,y=l.memoizedProps;try{for(var S=l.type,z=h.attributes;z.length;)h.removeAttributeNode(z[0]);Oi(h,S,y),h[Fr]=l,h[Tt]=y}catch(j){en(l,l.return,j)}}var bu=!1,vi=!1,Ay=!1,k_=typeof WeakSet=="function"?WeakSet:Set,_i=null;function Hb(l,h){if(l=l.containerInfo,Sp=zc,l=If(l),gh(l)){if("selectionStart"in l)var y={start:l.selectionStart,end:l.selectionEnd};else e:{y=(y=l.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var z=S.anchorOffset,j=S.focusNode;S=S.focusOffset;try{y.nodeType,j.nodeType}catch{y=null;break e}var Q=0,ce=-1,Re=-1,Je=0,ft=0,bt=l,tt=null;t:for(;;){for(var ot;bt!==y||z!==0&&bt.nodeType!==3||(ce=Q+z),bt!==j||S!==0&&bt.nodeType!==3||(Re=Q+S),bt.nodeType===3&&(Q+=bt.nodeValue.length),(ot=bt.firstChild)!==null;)tt=bt,bt=ot;for(;;){if(bt===l)break t;if(tt===y&&++Je===z&&(ce=Q),tt===j&&++ft===S&&(Re=Q),(ot=bt.nextSibling)!==null)break;bt=tt,tt=bt.parentNode}bt=ot}y=ce===-1||Re===-1?null:{start:ce,end:Re}}else y=null}y=y||{start:0,end:0}}else y=null;for(Yy={focusedElem:l,selectionRange:y},zc=!1,_i=h;_i!==null;)if(h=_i,l=h.child,(h.subtreeFlags&1028)!==0&&l!==null)l.return=h,_i=l;else for(;_i!==null;){switch(h=_i,j=h.alternate,l=h.flags,h.tag){case 0:if((l&4)!==0&&(l=h.updateQueue,l=l!==null?l.events:null,l!==null))for(y=0;y<l.length;y++)z=l[y],z.ref.impl=z.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&j!==null){l=void 0,y=h,z=j.memoizedProps,j=j.memoizedState,S=y.stateNode;try{var Zt=Ml(y.type,z);l=S.getSnapshotBeforeUpdate(Zt,j),S.__reactInternalSnapshotBeforeUpdate=l}catch(ur){en(y,y.return,ur)}}break;case 3:if((l&1024)!==0){if(l=h.stateNode.containerInfo,y=l.nodeType,y===9)zl(l);else if(y===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":zl(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(a(163))}if(l=h.sibling,l!==null){l.return=h.return,_i=l;break}_i=h.return}}function My(l,h,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:fo(l,y),S&4&&td(5,y);break;case 1:if(fo(l,y),S&4)if(l=y.stateNode,h===null)try{l.componentDidMount()}catch(Q){en(y,y.return,Q)}else{var z=Ml(y.type,h.memoizedProps);h=h.memoizedState;try{l.componentDidUpdate(z,h,l.__reactInternalSnapshotBeforeUpdate)}catch(Q){en(y,y.return,Q)}}S&64&&O_(y),S&512&&sp(y,y.return);break;case 3:if(fo(l,y),S&64&&(l=y.updateQueue,l!==null)){if(h=null,y.child!==null)switch(y.child.tag){case 27:case 5:h=y.child.stateNode;break;case 1:h=y.child.stateNode}try{Xf(l,h)}catch(Q){en(y,y.return,Q)}}break;case 27:h===null&&S&4&&z_(y);case 26:case 5:fo(l,y),h===null&&S&4&&Vm(y),S&512&&sp(y,y.return);break;case 12:fo(l,y);break;case 31:fo(l,y),S&4&&lp(l,y);break;case 13:fo(l,y),S&4&&up(l,y),S&64&&(l=y.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(y=By.bind(null,y),bi(l,y))));break;case 22:if(S=y.memoizedState!==null||bu,!S){h=h!==null&&h.memoizedState!==null||vi,z=bu;var j=vi;bu=S,(vi=h)&&!j?wu(l,y,(y.subtreeFlags&8772)!==0):fo(l,y),bu=z,vi=j}break;case 30:break;default:fo(l,y)}}function rd(l){var h=l.alternate;h!==null&&(l.alternate=null,rd(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&Hl(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var $n=null,kr=!1;function ho(l,h,y){for(y=y.child;y!==null;)Py(l,h,y),y=y.sibling}function Py(l,h,y){if(ae&&typeof ae.onCommitFiberUnmount=="function")try{ae.onCommitFiberUnmount(ne,y)}catch{}switch(y.tag){case 26:vi||Lo(y,h),ho(l,h,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:vi||Lo(y,h);var S=$n,z=kr;Dc(y.type)&&($n=y.stateNode,kr=!1),ho(l,h,y),Ep(y.stateNode),$n=S,kr=z;break;case 5:vi||Lo(y,h);case 6:if(S=$n,z=kr,$n=null,ho(l,h,y),$n=S,kr=z,$n!==null)if(kr)try{($n.nodeType===9?$n.body:$n.nodeName==="HTML"?$n.ownerDocument.body:$n).removeChild(y.stateNode)}catch(j){en(y,h,j)}else try{$n.removeChild(y.stateNode)}catch(j){en(y,h,j)}break;case 18:$n!==null&&(kr?(l=$n,s0(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,y.stateNode),vd(l)):s0($n,y.stateNode));break;case 4:S=$n,z=kr,$n=y.stateNode.containerInfo,kr=!0,ho(l,h,y),$n=S,kr=z;break;case 0:case 11:case 14:case 15:xu(2,y,h),vi||xu(4,y,h),ho(l,h,y);break;case 1:vi||(Lo(y,h),S=y.stateNode,typeof S.componentWillUnmount=="function"&&I_(y,h,S)),ho(l,h,y);break;case 21:ho(l,h,y);break;case 22:vi=(S=vi)||y.memoizedState!==null,ho(l,h,y),vi=S;break;default:ho(l,h,y)}}function lp(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{vd(l)}catch(y){en(h,h.return,y)}}}function up(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{vd(l)}catch(y){en(h,h.return,y)}}function cp(l){switch(l.tag){case 31:case 13:case 19:var h=l.stateNode;return h===null&&(h=l.stateNode=new k_),h;case 22:return l=l.stateNode,h=l._retryCache,h===null&&(h=l._retryCache=new k_),h;default:throw Error(a(435,l.tag))}}function hp(l,h){var y=cp(l);h.forEach(function(S){if(!y.has(S)){y.add(S);var z=Xb.bind(null,l,S);S.then(z,z)}})}function Na(l,h){var y=h.deletions;if(y!==null)for(var S=0;S<y.length;S++){var z=y[S],j=l,Q=h,ce=Q;e:for(;ce!==null;){switch(ce.tag){case 27:if(Dc(ce.type)){$n=ce.stateNode,kr=!1;break e}break;case 5:$n=ce.stateNode,kr=!1;break e;case 3:case 4:$n=ce.stateNode.containerInfo,kr=!0;break e}ce=ce.return}if($n===null)throw Error(a(160));Py(j,Q,z),$n=null,kr=!1,j=z.alternate,j!==null&&(j.return=null),z.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Gm(h,l),h=h.sibling}var Fa=null;function Gm(l,h){var y=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Na(h,l),Di(l),S&4&&(xu(3,l,l.return),td(3,l),xu(5,l,l.return));break;case 1:Na(h,l),Di(l),S&512&&(vi||y===null||Lo(y,y.return)),S&64&&bu&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(y=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var z=Fa;if(Na(h,l),Di(l),S&512&&(vi||y===null||Lo(y,y.return)),S&4){var j=y!==null?y.memoizedState:null;if(S=l.memoizedState,y===null)if(S===null)if(l.stateNode===null){e:{S=l.type,y=l.memoizedProps,z=z.ownerDocument||z;t:switch(S){case"title":j=z.getElementsByTagName("title")[0],(!j||j[fr]||j[Fr]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=z.createElement(S),z.head.insertBefore(j,z.querySelector("head > title"))),Oi(j,S,y),j[Fr]=l,In(j),S=j;break e;case"link":var Q=Mp("link","href",z).get(S+(y.href||""));if(Q){for(var ce=0;ce<Q.length;ce++)if(j=Q[ce],j.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&j.getAttribute("rel")===(y.rel==null?null:y.rel)&&j.getAttribute("title")===(y.title==null?null:y.title)&&j.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){Q.splice(ce,1);break t}}j=z.createElement(S),Oi(j,S,y),z.head.appendChild(j);break;case"meta":if(Q=Mp("meta","content",z).get(S+(y.content||""))){for(ce=0;ce<Q.length;ce++)if(j=Q[ce],j.getAttribute("content")===(y.content==null?null:""+y.content)&&j.getAttribute("name")===(y.name==null?null:y.name)&&j.getAttribute("property")===(y.property==null?null:y.property)&&j.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&j.getAttribute("charset")===(y.charSet==null?null:y.charSet)){Q.splice(ce,1);break t}}j=z.createElement(S),Oi(j,S,y),z.head.appendChild(j);break;default:throw Error(a(468,S))}j[Fr]=l,In(j),S=j}l.stateNode=S}else Pp(z,l.type,l.stateNode);else l.stateNode=Yh(z,S,l.memoizedProps);else j!==S?(j===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):j.count--,S===null?Pp(z,l.type,l.stateNode):Yh(z,S,l.memoizedProps)):S===null&&l.stateNode!==null&&qm(l,l.memoizedProps,y.memoizedProps)}break;case 27:Na(h,l),Di(l),S&512&&(vi||y===null||Lo(y,y.return)),y!==null&&S&4&&qm(l,l.memoizedProps,y.memoizedProps);break;case 5:if(Na(h,l),Di(l),S&512&&(vi||y===null||Lo(y,y.return)),l.flags&32){z=l.stateNode;try{Ps(z,"")}catch(Zt){en(l,l.return,Zt)}}S&4&&l.stateNode!=null&&(z=l.memoizedProps,qm(l,z,y!==null?y.memoizedProps:z)),S&1024&&(Ay=!0);break;case 6:if(Na(h,l),Di(l),S&4){if(l.stateNode===null)throw Error(a(162));S=l.memoizedProps,y=l.stateNode;try{y.nodeValue=S}catch(Zt){en(l,l.return,Zt)}}break;case 3:if(Ap=null,z=Fa,Fa=Cu(h.containerInfo),Na(h,l),Fa=z,Di(l),S&4&&y!==null&&y.memoizedState.isDehydrated)try{vd(h.containerInfo)}catch(Zt){en(l,l.return,Zt)}Ay&&(Ay=!1,fp(l));break;case 4:S=Fa,Fa=Cu(l.stateNode.containerInfo),Na(h,l),Di(l),Fa=S;break;case 12:Na(h,l),Di(l);break;case 31:Na(h,l),Di(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,hp(l,S)));break;case 13:Na(h,l),Di(l),l.child.flags&8192&&l.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Wm=oi()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,hp(l,S)));break;case 22:z=l.memoizedState!==null;var Re=y!==null&&y.memoizedState!==null,Je=bu,ft=vi;if(bu=Je||z,vi=ft||Re,Na(h,l),vi=ft,bu=Je,Di(l),S&8192)e:for(h=l.stateNode,h._visibility=z?h._visibility&-2:h._visibility|1,z&&(y===null||Re||bu||vi||qs(l)),y=null,h=l;;){if(h.tag===5||h.tag===26){if(y===null){Re=y=h;try{if(j=Re.stateNode,z)Q=j.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{ce=Re.stateNode;var bt=Re.memoizedProps.style,tt=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;ce.style.display=tt==null||typeof tt=="boolean"?"":(""+tt).trim()}}catch(Zt){en(Re,Re.return,Zt)}}}else if(h.tag===6){if(y===null){Re=h;try{Re.stateNode.nodeValue=z?"":Re.memoizedProps}catch(Zt){en(Re,Re.return,Zt)}}}else if(h.tag===18){if(y===null){Re=h;try{var ot=Re.stateNode;z?qr(ot,!0):qr(Re.stateNode,!1)}catch(Zt){en(Re,Re.return,Zt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===l)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;y===h&&(y=null),h=h.return}y===h&&(y=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=l.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,hp(l,y))));break;case 19:Na(h,l),Di(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,hp(l,S)));break;case 30:break;case 21:break;default:Na(h,l),Di(l)}}function Di(l){var h=l.flags;if(h&2){try{for(var y,S=l.return;S!==null;){if(wc(S)){y=S;break}S=S.return}if(y==null)throw Error(a(160));switch(y.tag){case 27:var z=y.stateNode,j=Fh(l);$m(l,j,z);break;case 5:var Q=y.stateNode;y.flags&32&&(Ps(Q,""),y.flags&=-33);var ce=Fh(l);$m(l,ce,Q);break;case 3:case 4:var Re=y.stateNode.containerInfo,Je=Fh(l);Ey(l,Je,Re);break;default:throw Error(a(161))}}catch(ft){en(l,l.return,ft)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function fp(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var h=l;fp(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),l=l.sibling}}function fo(l,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)My(l,h.alternate,h),h=h.sibling}function qs(l){for(l=l.child;l!==null;){var h=l;switch(h.tag){case 0:case 11:case 14:case 15:xu(4,h,h.return),qs(h);break;case 1:Lo(h,h.return);var y=h.stateNode;typeof y.componentWillUnmount=="function"&&I_(h,h.return,y),qs(h);break;case 27:Ep(h.stateNode);case 26:case 5:Lo(h,h.return),qs(h);break;case 22:h.memoizedState===null&&qs(h);break;case 30:qs(h);break;default:qs(h)}l=l.sibling}}function wu(l,h,y){for(y=y&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,z=l,j=h,Q=j.flags;switch(j.tag){case 0:case 11:case 15:wu(z,j,y),td(4,j);break;case 1:if(wu(z,j,y),S=j,z=S.stateNode,typeof z.componentDidMount=="function")try{z.componentDidMount()}catch(Je){en(S,S.return,Je)}if(S=j,z=S.updateQueue,z!==null){var ce=S.stateNode;try{var Re=z.shared.hiddenCallbacks;if(Re!==null)for(z.shared.hiddenCallbacks=null,z=0;z<Re.length;z++)Dh(Re[z],ce)}catch(Je){en(S,S.return,Je)}}y&&Q&64&&O_(j),sp(j,j.return);break;case 27:z_(j);case 26:case 5:wu(z,j,y),y&&S===null&&Q&4&&Vm(j),sp(j,j.return);break;case 12:wu(z,j,y);break;case 31:wu(z,j,y),y&&Q&4&&lp(z,j);break;case 13:wu(z,j,y),y&&Q&4&&up(z,j);break;case 22:j.memoizedState===null&&wu(z,j,y),sp(j,j.return);break;case 30:break;default:wu(z,j,y)}h=h.sibling}}function Zm(l,h){var y=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),l=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(l=h.memoizedState.cachePool.pool),l!==y&&(l!=null&&l.refCount++,y!=null&&pc(y))}function Su(l,h){l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&pc(l))}function $s(l,h,y,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Cy(l,h,y,S),h=h.sibling}function Cy(l,h,y,S){var z=h.flags;switch(h.tag){case 0:case 11:case 15:$s(l,h,y,S),z&2048&&td(9,h);break;case 1:$s(l,h,y,S);break;case 3:$s(l,h,y,S),z&2048&&(l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&pc(l)));break;case 12:if(z&2048){$s(l,h,y,S),l=h.stateNode;try{var j=h.memoizedProps,Q=j.id,ce=j.onPostCommit;typeof ce=="function"&&ce(Q,h.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Re){en(h,h.return,Re)}}else $s(l,h,y,S);break;case 31:$s(l,h,y,S);break;case 13:$s(l,h,y,S);break;case 23:break;case 22:j=h.stateNode,Q=h.alternate,h.memoizedState!==null?j._visibility&2?$s(l,h,y,S):Uh(l,h):j._visibility&2?$s(l,h,y,S):(j._visibility|=2,Ol(l,h,y,S,(h.subtreeFlags&10256)!==0||!1)),z&2048&&Zm(Q,h);break;case 24:$s(l,h,y,S),z&2048&&Su(h.alternate,h);break;default:$s(l,h,y,S)}}function Ol(l,h,y,S,z){for(z=z&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var j=l,Q=h,ce=y,Re=S,Je=Q.flags;switch(Q.tag){case 0:case 11:case 15:Ol(j,Q,ce,Re,z),td(8,Q);break;case 23:break;case 22:var ft=Q.stateNode;Q.memoizedState!==null?ft._visibility&2?Ol(j,Q,ce,Re,z):Uh(j,Q):(ft._visibility|=2,Ol(j,Q,ce,Re,z)),z&&Je&2048&&Zm(Q.alternate,Q);break;case 24:Ol(j,Q,ce,Re,z),z&&Je&2048&&Su(Q.alternate,Q);break;default:Ol(j,Q,ce,Re,z)}h=h.sibling}}function Uh(l,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var y=l,S=h,z=S.flags;switch(S.tag){case 22:Uh(y,S),z&2048&&Zm(S.alternate,S);break;case 24:Uh(y,S),z&2048&&Su(S.alternate,S);break;default:Uh(y,S)}h=h.sibling}}var nd=8192;function Vh(l,h,y){if(l.subtreeFlags&nd)for(l=l.child;l!==null;)R_(l,h,y),l=l.sibling}function R_(l,h,y){switch(l.tag){case 26:Vh(l,h,y),l.flags&nd&&l.memoizedState!==null&&av(y,Fa,l.memoizedState,l.memoizedProps);break;case 5:Vh(l,h,y);break;case 3:case 4:var S=Fa;Fa=Cu(l.stateNode.containerInfo),Vh(l,h,y),Fa=S;break;case 22:l.memoizedState===null&&(S=l.alternate,S!==null&&S.memoizedState!==null?(S=nd,nd=16777216,Vh(l,h,y),nd=S):Vh(l,h,y));break;default:Vh(l,h,y)}}function L_(l){var h=l.alternate;if(h!==null&&(l=h.child,l!==null)){h.child=null;do h=l.sibling,l.sibling=null,l=h;while(l!==null)}}function dp(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];_i=S,id(S,l)}L_(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)j_(l),l=l.sibling}function j_(l){switch(l.tag){case 0:case 11:case 15:dp(l),l.flags&2048&&xu(9,l,l.return);break;case 3:dp(l);break;case 12:dp(l);break;case 22:var h=l.stateNode;l.memoizedState!==null&&h._visibility&2&&(l.return===null||l.return.tag!==13)?(h._visibility&=-3,Hm(l)):dp(l);break;default:dp(l)}}function Hm(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];_i=S,id(S,l)}L_(l)}for(l=l.child;l!==null;){switch(h=l,h.tag){case 0:case 11:case 15:xu(8,h,h.return),Hm(h);break;case 22:y=h.stateNode,y._visibility&2&&(y._visibility&=-3,Hm(h));break;default:Hm(h)}l=l.sibling}}function id(l,h){for(;_i!==null;){var y=_i;switch(y.tag){case 0:case 11:case 15:xu(8,y,h);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:pc(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,_i=S;else e:for(y=l;_i!==null;){S=_i;var z=S.sibling,j=S.return;if(rd(S),S===y){_i=null;break e}if(z!==null){z.return=j,_i=z;break e}_i=j}}}var Wb={getCacheForType:function(l){var h=Wn(Vn),y=h.data.get(l);return y===void 0&&(y=l(),h.data.set(l,y)),y},cacheSignal:function(){return Wn(Vn).controller.signal}},B_=typeof WeakMap=="function"?WeakMap:Map,Jr=0,_n=null,Mr=null,Pr=0,sn=0,Ua=null,ys=!1,Sc=!1,Dy=!1,Tu=0,Xn=0,Eu=0,qh=0,Oy=0,Wi=0,$h=0,pp=null,po=null,Iy=!1,Wm=0,N_=0,mp=1/0,ad=null,Au=null,xi=0,Mu=null,od=null,vs=0,zy=0,Ym=null,F_=null,gp=0,ky=null;function mo(){return(Jr&2)!==0&&Pr!==0?Pr&-Pr:$e.T!==null?qy():Or()}function U_(){if(Wi===0)if((Pr&536870912)===0||Sr){var l=mt;mt<<=1,(mt&3932160)===0&&(mt=262144),Wi=l}else Wi=536870912;return l=Rt.current,l!==null&&(l.flags|=32),Wi}function go(l,h,y){(l===_n&&(sn===2||sn===9)||l.cancelPendingCommit!==null)&&(ld(l,0),Tc(l,Pr,Wi,!1)),ar(l,y),((Jr&2)===0||l!==_n)&&(l===_n&&((Jr&2)===0&&(qh|=y),Xn===4&&Tc(l,Pr,Wi,!1)),Gs(l))}function hi(l,h,y){if((Jr&6)!==0)throw Error(a(327));var S=!y&&(h&127)===0&&(h&l.expiredLanes)===0||ir(l,h),z=S?ud(l,h):Qm(l,h,!0),j=S;do{if(z===0){Sc&&!S&&Tc(l,h,0,!1);break}else{if(y=l.current.alternate,j&&!Yb(y)){z=Qm(l,h,!1),j=!1;continue}if(z===2){if(j=h,l.errorRecoveryDisabledLanes&j)var Q=0;else Q=l.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){h=Q;e:{var ce=l;z=pp;var Re=ce.current.memoizedState.isDehydrated;if(Re&&(ld(ce,Q).flags|=256),Q=Qm(ce,Q,!1),Q!==2){if(Dy&&!Re){ce.errorRecoveryDisabledLanes|=j,qh|=j,z=4;break e}j=po,po=z,j!==null&&(po===null?po=j:po.push.apply(po,j))}z=Q}if(j=!1,z!==2)continue}}if(z===1){ld(l,0),Tc(l,h,0,!0);break}e:{switch(S=l,j=z,j){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:Tc(S,h,Wi,!ys);break e;case 2:po=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(z=Wm+300-oi(),10<z)){if(Tc(S,h,Wi,!ys),Bt(S,0,!0)!==0)break e;vs=h,S.timeoutHandle=mg(sd.bind(null,S,y,po,ad,Iy,h,Wi,qh,$h,ys,j,"Throttled",-0,0),z);break e}sd(S,y,po,ad,Iy,h,Wi,qh,$h,ys,j,null,-0,0)}}break}while(!0);Gs(l)}function sd(l,h,y,S,z,j,Q,ce,Re,Je,ft,bt,tt,ot){if(l.timeoutHandle=-1,bt=h.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Eo},R_(h,j,bt);var Zt=(j&62914560)===j?Wm-oi():(j&4194048)===j?N_-oi():0;if(Zt=h0(bt,Zt),Zt!==null){vs=j,l.cancelPendingCommit=Zt(Z_.bind(null,l,h,j,y,S,z,Q,ce,Re,ft,bt,null,tt,ot)),Tc(l,j,Q,!Je);return}}Z_(l,h,j,y,S,z,Q,ce,Re)}function Yb(l){for(var h=l;;){var y=h.tag;if((y===0||y===11||y===15)&&h.flags&16384&&(y=h.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var z=y[S],j=z.getSnapshot;z=z.value;try{if(!ra(j(),z))return!1}catch{return!1}}if(y=h.child,h.subtreeFlags&16384&&y!==null)y.return=h,h=y;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Tc(l,h,y,S){h&=~Oy,h&=~qh,l.suspendedLanes|=h,l.pingedLanes&=~h,S&&(l.warmLanes|=h),S=l.expirationTimes;for(var z=h;0<z;){var j=31-Oe(z),Q=1<<j;S[j]=-1,z&=~Q}y!==0&&On(l,y,h)}function yp(){return(Jr&6)===0?(jo(0),!1):!0}function Xm(){if(Mr!==null){if(sn===0)var l=Mr.return;else l=Mr,os=io=null,Fs(l),us=null,hu=0,l=Mr;for(;l!==null;)Um(l.alternate,l),l=l.return;Mr=null}}function ld(l,h){var y=l.timeoutHandle;y!==-1&&(l.timeoutHandle=-1,Ky(y)),y=l.cancelPendingCommit,y!==null&&(l.cancelPendingCommit=null,y()),vs=0,Xm(),_n=l,Mr=y=za(l.current,null),Pr=h,sn=0,Ua=null,ys=!1,Sc=ir(l,h),Dy=!1,$h=Wi=Oy=qh=Eu=Xn=0,po=pp=null,Iy=!1,(h&8)!==0&&(h|=h&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=h;0<S;){var z=31-Oe(S),j=1<<z;h|=l[z],S&=~j}return Tu=h,su(),y}function Ry(l,h){xr=null,$e.H=Vr,h===Po||h===oa?(h=gc(),sn=3):h===Sl?(h=gc(),sn=4):sn=h===Im?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Ua=h,Mr===null&&(Xn=1,Ro(l,Hi(h,l.current)))}function Ly(){var l=Rt.current;return l===null?!0:(Pr&4194048)===Pr?Ft===null:(Pr&62914560)===Pr||(Pr&536870912)!==0?l===Ft:!1}function Gh(){var l=$e.H;return $e.H=Vr,l===null?Vr:l}function Km(){var l=$e.A;return $e.A=Wb,l}function vp(){Xn=4,ys||(Pr&4194048)!==Pr&&Rt.current!==null||(Sc=!0),(Eu&134217727)===0&&(qh&134217727)===0||_n===null||Tc(_n,Pr,Wi,!1)}function Qm(l,h,y){var S=Jr;Jr|=2;var z=Gh(),j=Km();(_n!==l||Pr!==h)&&(ad=null,ld(l,h)),h=!1;var Q=Xn;e:do try{if(sn!==0&&Mr!==null){var ce=Mr,Re=Ua;switch(sn){case 8:Xm(),Q=6;break e;case 3:case 2:case 9:case 6:Rt.current===null&&(h=!0);var Je=sn;if(sn=0,Ua=null,cd(l,ce,Re,Je),y&&Sc){Q=0;break e}break;default:Je=sn,sn=0,Ua=null,cd(l,ce,Re,Je)}}Jm(),Q=Xn;break}catch(ft){Ry(l,ft)}while(!0);return h&&l.shellSuspendCounter++,os=io=null,Jr=S,$e.H=z,$e.A=j,Mr===null&&(_n=null,Pr=0,su()),Q}function Jm(){for(;Mr!==null;)q_(Mr)}function ud(l,h){var y=Jr;Jr|=2;var S=Gh(),z=Km();_n!==l||Pr!==h?(ad=null,mp=oi()+500,ld(l,h)):Sc=ir(l,h);e:do try{if(sn!==0&&Mr!==null){h=Mr;var j=Ua;t:switch(sn){case 1:sn=0,Ua=null,cd(l,h,j,1);break;case 2:case 9:if(Ah(j)){sn=0,Ua=null,$_(h);break}h=function(){sn!==2&&sn!==9||_n!==l||(sn=7),Gs(l)},j.then(h,h);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:Ah(j)?(sn=0,Ua=null,$_(h)):(sn=0,Ua=null,cd(l,h,j,7));break;case 5:var Q=null;switch(Mr.tag){case 26:Q=Mr.memoizedState;case 5:case 27:var ce=Mr;if(Q?Sg(Q):ce.stateNode.complete){sn=0,Ua=null;var Re=ce.sibling;if(Re!==null)Mr=Re;else{var Je=ce.return;Je!==null?(Mr=Je,eg(Je)):Mr=null}break t}}sn=0,Ua=null,cd(l,h,j,5);break;case 6:sn=0,Ua=null,cd(l,h,j,6);break;case 8:Xm(),Xn=6;break e;default:throw Error(a(462))}}V_();break}catch(ft){Ry(l,ft)}while(!0);return os=io=null,$e.H=S,$e.A=z,Jr=y,Mr!==null?0:(_n=null,Pr=0,su(),Xn)}function V_(){for(;Mr!==null&&!So();)q_(Mr)}function q_(l){var h=ua(l.alternate,l,Tu);l.memoizedProps=l.pendingProps,h===null?eg(l):Mr=h}function $_(l){var h=l,y=h.alternate;switch(h.tag){case 15:case 0:h=A_(y,h,h.pendingProps,h.type,void 0,Pr);break;case 11:h=A_(y,h,h.pendingProps,h.type.render,h.ref,Pr);break;case 5:Fs(h);default:Um(y,h),h=Mr=Mm(h,Tu),h=ua(y,h,Tu)}l.memoizedProps=l.pendingProps,h===null?eg(l):Mr=h}function cd(l,h,y,S){os=io=null,Fs(h),us=null,hu=0;var z=h.return;try{if(Om(l,z,h,y,Pr)){Xn=1,Ro(l,Hi(y,l.current)),Mr=null;return}}catch(j){if(z!==null)throw Mr=z,j;Xn=1,Ro(l,Hi(y,l.current)),Mr=null;return}h.flags&32768?(Sr||S===1?l=!0:Sc||(Pr&536870912)!==0?l=!1:(ys=l=!0,(S===2||S===9||S===3||S===6)&&(S=Rt.current,S!==null&&S.tag===13&&(S.flags|=16384))),G_(h,l)):eg(h)}function eg(l){var h=l;do{if((h.flags&32768)!==0){G_(h,ys);return}l=h.return;var y=D_(h.alternate,h,Tu);if(y!==null){Mr=y;return}if(h=h.sibling,h!==null){Mr=h;return}Mr=h=l}while(h!==null);Xn===0&&(Xn=5)}function G_(l,h){do{var y=Zb(l.alternate,l);if(y!==null){y.flags&=32767,Mr=y;return}if(y=l.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!h&&(l=l.sibling,l!==null)){Mr=l;return}Mr=l=y}while(l!==null);Xn=6,Mr=null}function Z_(l,h,y,S,z,j,Q,ce,Re){l.cancelPendingCommit=null;do tg();while(xi!==0);if((Jr&6)!==0)throw Error(a(327));if(h!==null){if(h===l.current)throw Error(a(177));if(j=h.lanes|h.childLanes,j|=ou,fn(l,y,j,Q,ce,Re),l===_n&&(Mr=_n=null,Pr=0),od=h,Mu=l,vs=y,zy=j,Ym=z,F_=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Q_(Es,function(){return K_(),null})):(l.callbackNode=null,l.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=$e.T,$e.T=null,z=ct.p,ct.p=2,Q=Jr,Jr|=4;try{Hb(l,h,y)}finally{Jr=Q,ct.p=z,$e.T=S}}xi=1,H_(),W_(),Y_()}}function H_(){if(xi===1){xi=0;var l=Mu,h=od,y=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||y){y=$e.T,$e.T=null;var S=ct.p;ct.p=2;var z=Jr;Jr|=4;try{Gm(h,l);var j=Yy,Q=If(l.containerInfo),ce=j.focusedElem,Re=j.selectionRange;if(Q!==ce&&ce&&ce.ownerDocument&&Of(ce.ownerDocument.documentElement,ce)){if(Re!==null&&gh(ce)){var Je=Re.start,ft=Re.end;if(ft===void 0&&(ft=Je),"selectionStart"in ce)ce.selectionStart=Je,ce.selectionEnd=Math.min(ft,ce.value.length);else{var bt=ce.ownerDocument||document,tt=bt&&bt.defaultView||window;if(tt.getSelection){var ot=tt.getSelection(),Zt=ce.textContent.length,ur=Math.min(Re.start,Zt),tn=Re.end===void 0?ur:Math.min(Re.end,Zt);!ot.extend&&ur>tn&&(Q=tn,tn=ur,ur=Q);var Ve=mh(ce,ur),je=mh(ce,tn);if(Ve&&je&&(ot.rangeCount!==1||ot.anchorNode!==Ve.node||ot.anchorOffset!==Ve.offset||ot.focusNode!==je.node||ot.focusOffset!==je.offset)){var Qe=bt.createRange();Qe.setStart(Ve.node,Ve.offset),ot.removeAllRanges(),ur>tn?(ot.addRange(Qe),ot.extend(je.node,je.offset)):(Qe.setEnd(je.node,je.offset),ot.addRange(Qe))}}}}for(bt=[],ot=ce;ot=ot.parentNode;)ot.nodeType===1&&bt.push({element:ot,left:ot.scrollLeft,top:ot.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<bt.length;ce++){var gt=bt[ce];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}zc=!!Sp,Yy=Sp=null}finally{Jr=z,ct.p=S,$e.T=y}}l.current=h,xi=2}}function W_(){if(xi===2){xi=0;var l=Mu,h=od,y=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||y){y=$e.T,$e.T=null;var S=ct.p;ct.p=2;var z=Jr;Jr|=4;try{My(l,h.alternate,h)}finally{Jr=z,ct.p=S,$e.T=y}}xi=3}}function Y_(){if(xi===4||xi===3){xi=0,Wu();var l=Mu,h=od,y=vs,S=F_;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?xi=5:(xi=0,od=Mu=null,X_(l,l.pendingLanes));var z=l.pendingLanes;if(z===0&&(Au=null),xt(y),h=h.stateNode,ae&&typeof ae.onCommitFiberRoot=="function")try{ae.onCommitFiberRoot(ne,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=$e.T,z=ct.p,ct.p=2,$e.T=null;try{for(var j=l.onRecoverableError,Q=0;Q<S.length;Q++){var ce=S[Q];j(ce.value,{componentStack:ce.stack})}}finally{$e.T=h,ct.p=z}}(vs&3)!==0&&tg(),Gs(l),z=l.pendingLanes,(y&261930)!==0&&(z&42)!==0?l===ky?gp++:(gp=0,ky=l):gp=0,jo(0)}}function X_(l,h){(l.pooledCacheLanes&=h)===0&&(h=l.pooledCache,h!=null&&(l.pooledCache=null,pc(h)))}function tg(){return H_(),W_(),Y_(),K_()}function K_(){if(xi!==5)return!1;var l=Mu,h=zy;zy=0;var y=xt(vs),S=$e.T,z=ct.p;try{ct.p=32>y?32:y,$e.T=null,y=Ym,Ym=null;var j=Mu,Q=vs;if(xi=0,od=Mu=null,vs=0,(Jr&6)!==0)throw Error(a(331));var ce=Jr;if(Jr|=4,j_(j.current),Cy(j,j.current,Q,y),Jr=ce,jo(0,!1),ae&&typeof ae.onPostCommitFiberRoot=="function")try{ae.onPostCommitFiberRoot(ne,j)}catch{}return!0}finally{ct.p=z,$e.T=S,X_(l,h)}}function jy(l,h,y){h=Hi(y,h),h=jh(l.stateNode,h,2),l=Ls(l,h,2),l!==null&&(ar(l,2),Gs(l))}function en(l,h,y){if(l.tag===3)jy(l,l,y);else for(;h!==null;){if(h.tag===3){jy(h,l,y);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Au===null||!Au.has(S))){l=Hi(y,l),y=Bh(2),S=Ls(h,y,2),S!==null&&(Nh(y,S,h,l),ar(S,2),Gs(S));break}}h=h.return}}function rg(l,h,y){var S=l.pingCache;if(S===null){S=l.pingCache=new B_;var z=new Set;S.set(h,z)}else z=S.get(h),z===void 0&&(z=new Set,S.set(h,z));z.has(y)||(Dy=!0,z.add(y),l=Ec.bind(null,l,h,y),h.then(l,l))}function Ec(l,h,y){var S=l.pingCache;S!==null&&S.delete(h),l.pingedLanes|=l.suspendedLanes&y,l.warmLanes&=~y,_n===l&&(Pr&y)===y&&(Xn===4||Xn===3&&(Pr&62914560)===Pr&&300>oi()-Wm?(Jr&2)===0&&ld(l,0):Oy|=y,$h===Pr&&($h=0)),Gs(l)}function _p(l,h){h===0&&(h=Jt()),l=no(l,h),l!==null&&(ar(l,h),Gs(l))}function By(l){var h=l.memoizedState,y=0;h!==null&&(y=h.retryLane),_p(l,y)}function Xb(l,h){var y=0;switch(l.tag){case 31:case 13:var S=l.stateNode,z=l.memoizedState;z!==null&&(y=z.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(h),_p(l,y)}function Q_(l,h){return Ss(l,h)}var ng=null,hd=null,Ny=!1,ig=!1,Fy=!1,Pu=0;function Gs(l){l!==hd&&l.next===null&&(hd===null?ng=hd=l:hd=hd.next=l),ig=!0,Ny||(Ny=!0,Vy())}function jo(l,h){if(!Fy&&ig){Fy=!0;do for(var y=!1,S=ng;S!==null;){if(l!==0){var z=S.pendingLanes;if(z===0)var j=0;else{var Q=S.suspendedLanes,ce=S.pingedLanes;j=(1<<31-Oe(42|l)+1)-1,j&=z&~(Q&~ce),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(y=!0,xp(S,j))}else j=Pr,j=Bt(S,S===_n?j:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(j&3)===0||ir(S,j)||(y=!0,xp(S,j));S=S.next}while(y);Fy=!1}}function Ac(){Uy()}function Uy(){ig=Ny=!1;var l=0;Pu!==0&&pg()&&(l=Pu);for(var h=oi(),y=null,S=ng;S!==null;){var z=S.next,j=ag(S,h);j===0?(S.next=null,y===null?ng=z:y.next=z,z===null&&(hd=y)):(y=S,(l!==0||(j&3)!==0)&&(ig=!0)),S=z}xi!==0&&xi!==5||jo(l),Pu!==0&&(Pu=0)}function ag(l,h){for(var y=l.suspendedLanes,S=l.pingedLanes,z=l.expirationTimes,j=l.pendingLanes&-62914561;0<j;){var Q=31-Oe(j),ce=1<<Q,Re=z[Q];Re===-1?((ce&y)===0||(ce&S)!==0)&&(z[Q]=Yt(ce,h)):Re<=h&&(l.expiredLanes|=ce),j&=~ce}if(h=_n,y=Pr,y=Bt(l,l===h?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S=l.callbackNode,y===0||l===h&&(sn===2||sn===9)||l.cancelPendingCommit!==null)return S!==null&&S!==null&&Go(S),l.callbackNode=null,l.callbackPriority=0;if((y&3)===0||ir(l,y)){if(h=y&-y,h===l.callbackPriority)return h;switch(S!==null&&Go(S),xt(y)){case 2:case 8:y=Ts;break;case 32:y=Es;break;case 268435456:y=al;break;default:y=Es}return S=J_.bind(null,l),y=Ss(y,S),l.callbackPriority=h,l.callbackNode=y,h}return S!==null&&S!==null&&Go(S),l.callbackPriority=2,l.callbackNode=null,2}function J_(l,h){if(xi!==0&&xi!==5)return l.callbackNode=null,l.callbackPriority=0,null;var y=l.callbackNode;if(tg()&&l.callbackNode!==y)return null;var S=Pr;return S=Bt(l,l===_n?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S===0?null:(hi(l,S,h),ag(l,oi()),l.callbackNode!=null&&l.callbackNode===y?J_.bind(null,l):null)}function xp(l,h){if(tg())return null;hi(l,h,!0)}function Vy(){Jy(function(){(Jr&6)!==0?Ss(Yu,Ac):Uy()})}function qy(){if(Pu===0){var l=cu;l===0&&(l=Ge,Ge<<=1,(Ge&261888)===0&&(Ge=256)),Pu=l}return Pu}function og(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:gr(""+l)}function sg(l,h){var y=h.ownerDocument.createElement("input");return y.name=h.name,y.value=h.value,l.id&&y.setAttribute("form",l.id),h.parentNode.insertBefore(y,h),l=new FormData(l),y.parentNode.removeChild(y),l}function fd(l,h,y,S,z){if(h==="submit"&&y&&y.stateNode===z){var j=og((z[Tt]||null).action),Q=S.submitter;Q&&(h=(h=Q[Tt]||null)?og(h.formAction):Q.getAttribute("formAction"),h!==null&&(j=h,Q=null));var ce=new ih("action","action",null,S,z);l.push({event:ce,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Pu!==0){var Re=Q?sg(z,Q):new FormData(z);Ln(y,{pending:!0,data:Re,method:z.method,action:j},null,Re)}}else typeof j=="function"&&(ce.preventDefault(),Re=Q?sg(z,Q):new FormData(z),Ln(y,{pending:!0,data:Re,method:z.method,action:j},j,Re))},currentTarget:z}]})}}for(var lg=0;lg<Lf.length;lg++){var ug=Lf[lg],$y=ug.toLowerCase(),e0=ug[0].toUpperCase()+ug.slice(1);Oa($y,"on"+e0)}Oa(_h,"onAnimationEnd"),Oa(xh,"onAnimationIteration"),Oa(Rf,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(au,"onTransitionRun"),Oa(bh,"onTransitionStart"),Oa(uc,"onTransitionCancel"),Oa(Da,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mc));function r0(l,h){h=(h&4)!==0;for(var y=0;y<l.length;y++){var S=l[y],z=S.event;S=S.listeners;e:{var j=void 0;if(h)for(var Q=S.length-1;0<=Q;Q--){var ce=S[Q],Re=ce.instance,Je=ce.currentTarget;if(ce=ce.listener,Re!==j&&z.isPropagationStopped())break e;j=ce,z.currentTarget=Je;try{j(z)}catch(ft){es(ft)}z.currentTarget=null,j=Re}else for(Q=0;Q<S.length;Q++){if(ce=S[Q],Re=ce.instance,Je=ce.currentTarget,ce=ce.listener,Re!==j&&z.isPropagationStopped())break e;j=ce,z.currentTarget=Je;try{j(z)}catch(ft){es(ft)}z.currentTarget=null,j=Re}}}}function Cr(l,h){var y=h[hr];y===void 0&&(y=h[hr]=new Set);var S=l+"__bubble";y.has(S)||(hg(h,l,2,!1),y.add(S))}function Gy(l,h,y){var S=0;h&&(S|=4),hg(y,l,S,h)}var cg="_reactListening"+Math.random().toString(36).slice(2);function Zy(l){if(!l[cg]){l[cg]=!0,Xu.forEach(function(y){y!=="selectionchange"&&(t0.has(y)||Gy(y,!1,l),Gy(y,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[cg]||(h[cg]=!0,Gy("selectionchange",!1,h))}}function hg(l,h,y,S){switch(y0(h)){case 2:var z=Kb;break;case 8:z=uv;break;default:z=kp}y=z.bind(null,h,y,l),z=void 0,!Vi||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(z=!0),S?z!==void 0?l.addEventListener(h,y,{capture:!0,passive:z}):l.addEventListener(h,y,!0):z!==void 0?l.addEventListener(h,y,{passive:z}):l.addEventListener(h,y,!1)}function Il(l,h,y,S,z){var j=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var Q=S.tag;if(Q===3||Q===4){var ce=S.stateNode.containerInfo;if(ce===z)break;if(Q===4)for(Q=S.return;Q!==null;){var Re=Q.tag;if((Re===3||Re===4)&&Q.stateNode.containerInfo===z)return;Q=Q.return}for(;ce!==null;){if(Q=Ho(ce),Q===null)return;if(Re=Q.tag,Re===5||Re===6||Re===26||Re===27){S=j=Q;continue e}ce=ce.parentNode}}S=S.return}Yr(function(){var Je=j,ft=nh(y),bt=[];e:{var tt=qd.get(l);if(tt!==void 0){var ot=ih,Zt=l;switch(l){case"keypress":if(Ca(y)===0)break e;case"keydown":case"keyup":ot=kn;break;case"focusin":Zt="focus",ot=hl;break;case"focusout":Zt="blur",ot=hl;break;case"beforeblur":case"afterblur":ot=hl;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ot=eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ot=ah;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ot=my;break;case _h:case xh:case Rf:ot=mm;break;case Da:ot=Mf;break;case"scroll":case"scrollend":ot=Jl;break;case"wheel":ot=Bd;break;case"copy":case"cut":case"paste":ot=Ld;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ot=Af;break;case"toggle":case"beforetoggle":ot=nc}var ur=(h&4)!==0,tn=!ur&&(l==="scroll"||l==="scrollend"),Ve=ur?tt!==null?tt+"Capture":null:tt;ur=[];for(var je=Je,Qe;je!==null;){var gt=je;if(Qe=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||Qe===null||Ve===null||(gt=Ja(je,Ve),gt!=null&&ur.push(dd(je,gt,Qe))),tn)break;je=je.return}0<ur.length&&(tt=new ot(tt,Zt,null,y,ft),bt.push({event:tt,listeners:ur}))}}if((h&7)===0){e:{if(tt=l==="mouseover"||l==="pointerover",ot=l==="mouseout"||l==="pointerout",tt&&y!==Rd&&(Zt=y.relatedTarget||y.fromElement)&&(Ho(Zt)||Zt[Qt]))break e;if((ot||tt)&&(tt=ft.window===ft?ft:(tt=ft.ownerDocument)?tt.defaultView||tt.parentWindow:window,ot?(Zt=y.relatedTarget||y.toElement,ot=Je,Zt=Zt?Ho(Zt):null,Zt!==null&&(tn=g(Zt),ur=Zt.tag,Zt!==tn||ur!==5&&ur!==27&&ur!==6)&&(Zt=null)):(ot=null,Zt=Je),ot!==Zt)){if(ur=eu,gt="onMouseLeave",Ve="onMouseEnter",je="mouse",(l==="pointerout"||l==="pointerover")&&(ur=Af,gt="onPointerLeave",Ve="onPointerEnter",je="pointer"),tn=ot==null?tt:Wo(ot),Qe=Zt==null?tt:Wo(Zt),tt=new ur(gt,je+"leave",ot,y,ft),tt.target=tn,tt.relatedTarget=Qe,gt=null,Ho(ft)===Je&&(ur=new ur(Ve,je+"enter",Zt,y,ft),ur.target=Qe,ur.relatedTarget=tn,gt=ur),tn=gt,ot&&Zt)t:{for(ur=n0,Ve=ot,je=Zt,Qe=0,gt=Ve;gt;gt=ur(gt))Qe++;gt=0;for(var rr=je;rr;rr=ur(rr))gt++;for(;0<Qe-gt;)Ve=ur(Ve),Qe--;for(;0<gt-Qe;)je=ur(je),gt--;for(;Qe--;){if(Ve===je||je!==null&&Ve===je.alternate){ur=Ve;break t}Ve=ur(Ve),je=ur(je)}ur=null}else ur=null;ot!==null&&Hy(bt,tt,ot,ur,!1),Zt!==null&&tn!==null&&Hy(bt,tn,Zt,ur,!0)}}e:{if(tt=Je?Wo(Je):window,ot=tt.nodeName&&tt.nodeName.toLowerCase(),ot==="select"||ot==="input"&&tt.type==="file")var Hr=pl;else if(Cf(tt))if(Nd)Hr=Em;else{Hr=Tm;var Xt=gy}else ot=tt.nodeName,!ot||ot.toLowerCase()!=="input"||tt.type!=="checkbox"&&tt.type!=="radio"?Je&&Xl(Je.elementType)&&(Hr=pl):Hr=ph;if(Hr&&(Hr=Hr(l,Je))){Df(bt,Hr,y,ft);break e}Xt&&Xt(l,tt,Je),l==="focusout"&&Je&&tt.type==="number"&&Je.memoizedProps.value!=null&&rh(tt,"number",tt.value)}switch(Xt=Je?Wo(Je):window,l){case"focusin":(Cf(Xt)||Xt.contentEditable==="true")&&(ro=Xt,yh=Je,vh=null);break;case"focusout":vh=yh=ro=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,Am(bt,y,ft);break;case"selectionchange":if(zf)break;case"keydown":case"keyup":Am(bt,y,ft)}var yr;if(Un)e:{switch(l){case"compositionstart":var or="onCompositionStart";break e;case"compositionend":or="onCompositionEnd";break e;case"compositionupdate":or="onCompositionUpdate";break e}or=void 0}else Ao?ch(l,y)&&(or="onCompositionEnd"):l==="keydown"&&y.keyCode===229&&(or="onCompositionStart");or&&(sc&&y.locale!=="ko"&&(Ao||or!=="onCompositionStart"?or==="onCompositionEnd"&&Ao&&(yr=ul()):(Pa=ft,Ko="value"in Pa?Pa.value:Pa.textContent,Ao=!0)),Xt=bp(Je,or),0<Xt.length&&(or=new jd(or,l,null,y,ft),bt.push({event:or,listeners:Xt}),yr?or.data=yr:(yr=_m(y),yr!==null&&(or.data=yr)))),(yr=oc?Pf(l,y):xm(l,y))&&(or=bp(Je,"onBeforeInput"),0<or.length&&(Xt=new jd("onBeforeInput","beforeinput",null,y,ft),bt.push({event:Xt,listeners:or}),Xt.data=yr)),fd(bt,l,Je,y,ft)}r0(bt,h)})}function dd(l,h,y){return{instance:l,listener:h,currentTarget:y}}function bp(l,h){for(var y=h+"Capture",S=[];l!==null;){var z=l,j=z.stateNode;if(z=z.tag,z!==5&&z!==26&&z!==27||j===null||(z=Ja(l,y),z!=null&&S.unshift(dd(l,z,j)),z=Ja(l,h),z!=null&&S.push(dd(l,z,j))),l.tag===3)return S;l=l.return}return[]}function n0(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Hy(l,h,y,S,z){for(var j=h._reactName,Q=[];y!==null&&y!==S;){var ce=y,Re=ce.alternate,Je=ce.stateNode;if(ce=ce.tag,Re!==null&&Re===S)break;ce!==5&&ce!==26&&ce!==27||Je===null||(Re=Je,z?(Je=Ja(y,j),Je!=null&&Q.unshift(dd(y,Je,Re))):z||(Je=Ja(y,j),Je!=null&&Q.push(dd(y,Je,Re)))),y=y.return}Q.length!==0&&l.push({event:h,listeners:Q})}var i0=/\r\n?/g,a0=/\u0000|\uFFFD/g;function wp(l){return(typeof l=="string"?l:""+l).replace(i0,`
`).replace(a0,"")}function Wy(l,h){return h=wp(h),wp(l)===h}function Zr(l,h,y,S,z,j){switch(y){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||Ps(l,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&Ps(l,""+S);break;case"className":Xo(l,"class",S);break;case"tabIndex":Xo(l,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Xo(l,y,S);break;case"style":Ef(l,S,j);break;case"data":if(h!=="object"){Xo(l,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||y!=="href")){l.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(y);break}S=gr(""+S),l.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){l.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(y==="formAction"?(h!=="input"&&Zr(l,h,"name",z.name,z,null),Zr(l,h,"formEncType",z.formEncType,z,null),Zr(l,h,"formMethod",z.formMethod,z,null),Zr(l,h,"formTarget",z.formTarget,z,null)):(Zr(l,h,"encType",z.encType,z,null),Zr(l,h,"method",z.method,z,null),Zr(l,h,"target",z.target,z,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(y);break}S=gr(""+S),l.setAttribute(y,S);break;case"onClick":S!=null&&(l.onclick=Eo);break;case"onScroll":S!=null&&Cr("scroll",l);break;case"onScrollEnd":S!=null&&Cr("scrollend",l);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(y=S.__html,y!=null){if(z.children!=null)throw Error(a(60));l.innerHTML=y}}break;case"multiple":l.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":l.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){l.removeAttribute("xlink:href");break}y=gr(""+S),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(y,""+S):l.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(y,""):l.removeAttribute(y);break;case"capture":case"download":S===!0?l.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(y,S):l.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?l.setAttribute(y,S):l.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?l.removeAttribute(y):l.setAttribute(y,S);break;case"popover":Cr("beforetoggle",l),Cr("toggle",l),Jc(l,"popover",S);break;case"xlinkActuate":Qa(l,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Qa(l,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Qa(l,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Qa(l,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Qa(l,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Qa(l,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Qa(l,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Qa(l,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Qa(l,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Jc(l,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=ll.get(y)||y,Jc(l,y,S))}}function fg(l,h,y,S,z,j){switch(y){case"style":Ef(l,S,j);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(a(61));if(y=S.__html,y!=null){if(z.children!=null)throw Error(a(60));l.innerHTML=y}}break;case"children":typeof S=="string"?Ps(l,S):(typeof S=="number"||typeof S=="bigint")&&Ps(l,""+S);break;case"onScroll":S!=null&&Cr("scroll",l);break;case"onScrollEnd":S!=null&&Cr("scrollend",l);break;case"onClick":S!=null&&(l.onclick=Eo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zi.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(z=y.endsWith("Capture"),h=y.slice(2,z?y.length-7:void 0),j=l[Tt]||null,j=j!=null?j[y]:null,typeof j=="function"&&l.removeEventListener(h,j,z),typeof S=="function")){typeof j!="function"&&j!==null&&(y in l?l[y]=null:l.hasAttribute(y)&&l.removeAttribute(y)),l.addEventListener(h,S,z);break e}y in l?l[y]=S:S===!0?l.setAttribute(y,""):Jc(l,y,S)}}}function Oi(l,h,y){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Cr("error",l),Cr("load",l);var S=!1,z=!1,j;for(j in y)if(y.hasOwnProperty(j)){var Q=y[j];if(Q!=null)switch(j){case"src":S=!0;break;case"srcSet":z=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Zr(l,h,j,Q,y,null)}}z&&Zr(l,h,"srcSet",y.srcSet,y,null),S&&Zr(l,h,"src",y.src,y,null);return;case"input":Cr("invalid",l);var ce=j=Q=z=null,Re=null,Je=null;for(S in y)if(y.hasOwnProperty(S)){var ft=y[S];if(ft!=null)switch(S){case"name":z=ft;break;case"type":Q=ft;break;case"checked":Re=ft;break;case"defaultChecked":Je=ft;break;case"value":j=ft;break;case"defaultValue":ce=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(a(137,h));break;default:Zr(l,h,S,ft,y,null)}}Tf(l,j,ce,Re,Je,Q,z,!1);return;case"select":Cr("invalid",l),S=Q=j=null;for(z in y)if(y.hasOwnProperty(z)&&(ce=y[z],ce!=null))switch(z){case"value":j=ce;break;case"defaultValue":Q=ce;break;case"multiple":S=ce;default:Zr(l,h,z,ce,y,null)}h=j,y=Q,l.multiple=!!S,h!=null?sl(l,!!S,h,!1):y!=null&&sl(l,!!S,y,!0);return;case"textarea":Cr("invalid",l),j=z=S=null;for(Q in y)if(y.hasOwnProperty(Q)&&(ce=y[Q],ce!=null))switch(Q){case"value":S=ce;break;case"defaultValue":z=ce;break;case"children":j=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(91));break;default:Zr(l,h,Q,ce,y,null)}Ju(l,S,z,j);return;case"option":for(Re in y)y.hasOwnProperty(Re)&&(S=y[Re],S!=null)&&(Re==="selected"?l.selected=S&&typeof S!="function"&&typeof S!="symbol":Zr(l,h,Re,S,y,null));return;case"dialog":Cr("beforetoggle",l),Cr("toggle",l),Cr("cancel",l),Cr("close",l);break;case"iframe":case"object":Cr("load",l);break;case"video":case"audio":for(S=0;S<Mc.length;S++)Cr(Mc[S],l);break;case"image":Cr("error",l),Cr("load",l);break;case"details":Cr("toggle",l);break;case"embed":case"source":case"link":Cr("error",l),Cr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in y)if(y.hasOwnProperty(Je)&&(S=y[Je],S!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:Zr(l,h,Je,S,y,null)}return;default:if(Xl(h)){for(ft in y)y.hasOwnProperty(ft)&&(S=y[ft],S!==void 0&&fg(l,h,ft,S,y,void 0));return}}for(ce in y)y.hasOwnProperty(ce)&&(S=y[ce],S!=null&&Zr(l,h,ce,S,y,null))}function o0(l,h,y,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var z=null,j=null,Q=null,ce=null,Re=null,Je=null,ft=null;for(ot in y){var bt=y[ot];if(y.hasOwnProperty(ot)&&bt!=null)switch(ot){case"checked":break;case"value":break;case"defaultValue":Re=bt;default:S.hasOwnProperty(ot)||Zr(l,h,ot,null,S,bt)}}for(var tt in S){var ot=S[tt];if(bt=y[tt],S.hasOwnProperty(tt)&&(ot!=null||bt!=null))switch(tt){case"type":j=ot;break;case"name":z=ot;break;case"checked":Je=ot;break;case"defaultChecked":ft=ot;break;case"value":Q=ot;break;case"defaultValue":ce=ot;break;case"children":case"dangerouslySetInnerHTML":if(ot!=null)throw Error(a(137,h));break;default:ot!==bt&&Zr(l,h,tt,ot,S,bt)}}th(l,Q,ce,Re,Je,ft,j,z);return;case"select":ot=Q=ce=tt=null;for(j in y)if(Re=y[j],y.hasOwnProperty(j)&&Re!=null)switch(j){case"value":break;case"multiple":ot=Re;default:S.hasOwnProperty(j)||Zr(l,h,j,null,S,Re)}for(z in S)if(j=S[z],Re=y[z],S.hasOwnProperty(z)&&(j!=null||Re!=null))switch(z){case"value":tt=j;break;case"defaultValue":ce=j;break;case"multiple":Q=j;default:j!==Re&&Zr(l,h,z,j,S,Re)}h=ce,y=Q,S=ot,tt!=null?sl(l,!!y,tt,!1):!!S!=!!y&&(h!=null?sl(l,!!y,h,!0):sl(l,!!y,y?[]:"",!1));return;case"textarea":ot=tt=null;for(ce in y)if(z=y[ce],y.hasOwnProperty(ce)&&z!=null&&!S.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Zr(l,h,ce,null,S,z)}for(Q in S)if(z=S[Q],j=y[Q],S.hasOwnProperty(Q)&&(z!=null||j!=null))switch(Q){case"value":tt=z;break;case"defaultValue":ot=z;break;case"children":break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(a(91));break;default:z!==j&&Zr(l,h,Q,z,S,j)}dm(l,tt,ot);return;case"option":for(var Zt in y)tt=y[Zt],y.hasOwnProperty(Zt)&&tt!=null&&!S.hasOwnProperty(Zt)&&(Zt==="selected"?l.selected=!1:Zr(l,h,Zt,null,S,tt));for(Re in S)tt=S[Re],ot=y[Re],S.hasOwnProperty(Re)&&tt!==ot&&(tt!=null||ot!=null)&&(Re==="selected"?l.selected=tt&&typeof tt!="function"&&typeof tt!="symbol":Zr(l,h,Re,tt,S,ot));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ur in y)tt=y[ur],y.hasOwnProperty(ur)&&tt!=null&&!S.hasOwnProperty(ur)&&Zr(l,h,ur,null,S,tt);for(Je in S)if(tt=S[Je],ot=y[Je],S.hasOwnProperty(Je)&&tt!==ot&&(tt!=null||ot!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(a(137,h));break;default:Zr(l,h,Je,tt,S,ot)}return;default:if(Xl(h)){for(var tn in y)tt=y[tn],y.hasOwnProperty(tn)&&tt!==void 0&&!S.hasOwnProperty(tn)&&fg(l,h,tn,void 0,S,tt);for(ft in S)tt=S[ft],ot=y[ft],!S.hasOwnProperty(ft)||tt===ot||tt===void 0&&ot===void 0||fg(l,h,ft,tt,S,ot);return}}for(var Ve in y)tt=y[Ve],y.hasOwnProperty(Ve)&&tt!=null&&!S.hasOwnProperty(Ve)&&Zr(l,h,Ve,null,S,tt);for(bt in S)tt=S[bt],ot=y[bt],!S.hasOwnProperty(bt)||tt===ot||tt==null&&ot==null||Zr(l,h,bt,tt,S,ot)}function Va(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pd(){if(typeof performance.getEntriesByType=="function"){for(var l=0,h=0,y=performance.getEntriesByType("resource"),S=0;S<y.length;S++){var z=y[S],j=z.transferSize,Q=z.initiatorType,ce=z.duration;if(j&&ce&&Va(Q)){for(Q=0,ce=z.responseEnd,S+=1;S<y.length;S++){var Re=y[S],Je=Re.startTime;if(Je>ce)break;var ft=Re.transferSize,bt=Re.initiatorType;ft&&Va(bt)&&(Re=Re.responseEnd,Q+=ft*(Re<ce?1:(ce-Je)/(Re-Je)))}if(--S,h+=8*(j+Q)/(z.duration/1e3),l++,10<l)break}}if(0<l)return h/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var Sp=null,Yy=null;function Tp(l){return l.nodeType===9?l:l.ownerDocument}function Pc(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xy(l,h){if(l===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&h==="foreignObject"?0:l}function dg(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var Cc=null;function pg(){var l=window.event;return l&&l.type==="popstate"?l===Cc?!1:(Cc=l,!0):(Cc=null,!1)}var mg=typeof setTimeout=="function"?setTimeout:void 0,Ky=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,Jy=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(l){return Qy.resolve(null).then(l).catch(ev)}:mg;function ev(l){setTimeout(function(){throw l})}function Dc(l){return l==="head"}function s0(l,h){var y=h,S=0;do{var z=y.nextSibling;if(l.removeChild(y),z&&z.nodeType===8)if(y=z.data,y==="/$"||y==="/&"){if(S===0){l.removeChild(z),vd(h);return}S--}else if(y==="$"||y==="$?"||y==="$~"||y==="$!"||y==="&")S++;else if(y==="html")Ep(l.ownerDocument.documentElement);else if(y==="head"){y=l.ownerDocument.head,Ep(y);for(var j=y.firstChild;j;){var Q=j.nextSibling,ce=j.nodeName;j[fr]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&j.rel.toLowerCase()==="stylesheet"||y.removeChild(j),j=Q}}else y==="body"&&Ep(l.ownerDocument.body);y=z}while(y);vd(h)}function qr(l,h){var y=l;l=0;do{var S=y.nextSibling;if(y.nodeType===1?h?(y._stashedDisplay=y.style.display,y.style.display="none"):(y.style.display=y._stashedDisplay||"",y.getAttribute("style")===""&&y.removeAttribute("style")):y.nodeType===3&&(h?(y._stashedText=y.nodeValue,y.nodeValue=""):y.nodeValue=y._stashedText||""),S&&S.nodeType===8)if(y=S.data,y==="/$"){if(l===0)break;l--}else y!=="$"&&y!=="$?"&&y!=="$~"&&y!=="$!"||l++;y=S}while(y)}function zl(l){var h=l.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var y=h;switch(h=h.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":zl(y),Hl(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}l.removeChild(y)}}function Li(l,h,y,S){for(;l.nodeType===1;){var z=y;if(l.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(S){if(!l[fr])switch(h){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(j=l.getAttribute("rel"),j==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(j!==z.rel||l.getAttribute("href")!==(z.href==null||z.href===""?null:z.href)||l.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin)||l.getAttribute("title")!==(z.title==null?null:z.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(j=l.getAttribute("src"),(j!==(z.src==null?null:z.src)||l.getAttribute("type")!==(z.type==null?null:z.type)||l.getAttribute("crossorigin")!==(z.crossOrigin==null?null:z.crossOrigin))&&j&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(h==="input"&&l.type==="hidden"){var j=z.name==null?null:""+z.name;if(z.type==="hidden"&&l.getAttribute("name")===j)return l}else return l;if(l=Bo(l.nextSibling),l===null)break}return null}function Zs(l,h,y){if(h==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!y||(l=Bo(l.nextSibling),l===null))return null;return l}function Oc(l,h){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Bo(l.nextSibling),l===null))return null;return l}function ca(l){return l.data==="$?"||l.data==="$~"}function An(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function bi(l,h){var y=l.ownerDocument;if(l.data==="$~")l._reactRetry=h;else if(l.data!=="$?"||y.readyState!=="loading")h();else{var S=function(){h(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),l._reactRetry=S}}function Bo(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return l}var qa=null;function ji(l){l=l.nextSibling;for(var h=0;l;){if(l.nodeType===8){var y=l.data;if(y==="/$"||y==="/&"){if(h===0)return Bo(l.nextSibling);h--}else y!=="$"&&y!=="$!"&&y!=="$?"&&y!=="$~"&&y!=="&"||h++}l=l.nextSibling}return null}function gg(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var y=l.data;if(y==="$"||y==="$!"||y==="$?"||y==="$~"||y==="&"){if(h===0)return l;h--}else y!=="/$"&&y!=="/&"||h++}l=l.previousSibling}return null}function l0(l,h,y){switch(h=Tp(y),l){case"html":if(l=h.documentElement,!l)throw Error(a(452));return l;case"head":if(l=h.head,!l)throw Error(a(453));return l;case"body":if(l=h.body,!l)throw Error(a(454));return l;default:throw Error(a(451))}}function Ep(l){for(var h=l.attributes;h.length;)l.removeAttributeNode(h[0]);Hl(l)}var Rr=new Map,$a=new Set;function Cu(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var kl=ct.d;ct.d={f:u0,r:c0,D:ha,C:Hs,L:vg,m:fa,X:_g,S:Ic,M:tv};function u0(){var l=kl.f(),h=yp();return l||h}function c0(l){var h=As(l);h!==null&&h.tag===5&&h.type==="form"?gi(h):kl.r(l)}var Zh=typeof document>"u"?null:document;function yg(l,h,y){var S=Zh;if(S&&typeof h=="string"&&h){var z=Ui(h);z='link[rel="'+l+'"][href="'+z+'"]',typeof y=="string"&&(z+='[crossorigin="'+y+'"]'),$a.has(z)||($a.add(z),l={rel:l,crossOrigin:y,href:h},S.querySelector(z)===null&&(h=S.createElement("link"),Oi(h,"link",l),In(h),S.head.appendChild(h)))}}function ha(l){kl.D(l),yg("dns-prefetch",l,null)}function Hs(l,h){kl.C(l,h),yg("preconnect",l,h)}function vg(l,h,y){kl.L(l,h,y);var S=Zh;if(S&&l&&h){var z='link[rel="preload"][as="'+Ui(h)+'"]';h==="image"&&y&&y.imageSrcSet?(z+='[imagesrcset="'+Ui(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(z+='[imagesizes="'+Ui(y.imageSizes)+'"]')):z+='[href="'+Ui(l)+'"]';var j=z;switch(h){case"style":j=Hh(l);break;case"script":j=Wh(l)}Rr.has(j)||(l=I({rel:"preload",href:h==="image"&&y&&y.imageSrcSet?void 0:l,as:h},y),Rr.set(j,l),S.querySelector(z)!==null||h==="style"&&S.querySelector(md(j))||h==="script"&&S.querySelector(gd(j))||(h=S.createElement("link"),Oi(h,"link",l),In(h),S.head.appendChild(h)))}}function fa(l,h){kl.m(l,h);var y=Zh;if(y&&l){var S=h&&typeof h.as=="string"?h.as:"script",z='link[rel="modulepreload"][as="'+Ui(S)+'"][href="'+Ui(l)+'"]',j=z;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=Wh(l)}if(!Rr.has(j)&&(l=I({rel:"modulepreload",href:l},h),Rr.set(j,l),y.querySelector(z)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(gd(j)))return}S=y.createElement("link"),Oi(S,"link",l),In(S),y.head.appendChild(S)}}}function Ic(l,h,y){kl.S(l,h,y);var S=Zh;if(S&&l){var z=Yo(S).hoistableStyles,j=Hh(l);h=h||"default";var Q=z.get(j);if(!Q){var ce={loading:0,preload:null};if(Q=S.querySelector(md(j)))ce.loading=5;else{l=I({rel:"stylesheet",href:l,"data-precedence":h},y),(y=Rr.get(j))&&bg(l,y);var Re=Q=S.createElement("link");In(Re),Oi(Re,"link",l),Re._p=new Promise(function(Je,ft){Re.onload=Je,Re.onerror=ft}),Re.addEventListener("load",function(){ce.loading|=1}),Re.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,yd(Q,h,S)}Q={type:"stylesheet",instance:Q,count:1,state:ce},z.set(j,Q)}}}function _g(l,h){kl.X(l,h);var y=Zh;if(y&&l){var S=Yo(y).hoistableScripts,z=Wh(l),j=S.get(z);j||(j=y.querySelector(gd(z)),j||(l=I({src:l,async:!0},h),(h=Rr.get(z))&&iv(l,h),j=y.createElement("script"),In(j),Oi(j,"link",l),y.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},S.set(z,j))}}function tv(l,h){kl.M(l,h);var y=Zh;if(y&&l){var S=Yo(y).hoistableScripts,z=Wh(l),j=S.get(z);j||(j=y.querySelector(gd(z)),j||(l=I({src:l,async:!0,type:"module"},h),(h=Rr.get(z))&&iv(l,h),j=y.createElement("script"),In(j),Oi(j,"link",l),y.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},S.set(z,j))}}function rv(l,h,y,S){var z=(z=Kt.current)?Cu(z):null;if(!z)throw Error(a(446));switch(l){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(h=Hh(y.href),y=Yo(z).hoistableStyles,S=y.get(h),S||(S={type:"style",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){l=Hh(y.href);var j=Yo(z).hoistableStyles,Q=j.get(l);if(Q||(z=z.ownerDocument||z,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(l,Q),(j=z.querySelector(md(l)))&&!j._p&&(Q.instance=j,Q.state.loading=5),Rr.has(l)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Rr.set(l,y),j||xg(z,l,y,Q.state))),h&&S===null)throw Error(a(528,""));return Q}if(h&&S!==null)throw Error(a(529,""));return null;case"script":return h=y.async,y=y.src,typeof y=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Wh(y),y=Yo(z).hoistableScripts,S=y.get(h),S||(S={type:"script",instance:null,count:0,state:null},y.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,l))}}function Hh(l){return'href="'+Ui(l)+'"'}function md(l){return'link[rel="stylesheet"]['+l+"]"}function nv(l){return I({},l,{"data-precedence":l.precedence,precedence:null})}function xg(l,h,y,S){l.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=l.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Oi(h,"link",y),In(h),l.head.appendChild(h))}function Wh(l){return'[src="'+Ui(l)+'"]'}function gd(l){return"script[async]"+l}function Yh(l,h,y){if(h.count++,h.instance===null)switch(h.type){case"style":var S=l.querySelector('style[data-href~="'+Ui(y.href)+'"]');if(S)return h.instance=S,In(S),S;var z=I({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(l.ownerDocument||l).createElement("style"),In(S),Oi(S,"style",z),yd(S,y.precedence,l),h.instance=S;case"stylesheet":z=Hh(y.href);var j=l.querySelector(md(z));if(j)return h.state.loading|=4,h.instance=j,In(j),j;S=nv(y),(z=Rr.get(z))&&bg(S,z),j=(l.ownerDocument||l).createElement("link"),In(j);var Q=j;return Q._p=new Promise(function(ce,Re){Q.onload=ce,Q.onerror=Re}),Oi(j,"link",S),h.state.loading|=4,yd(j,y.precedence,l),h.instance=j;case"script":return j=Wh(y.src),(z=l.querySelector(gd(j)))?(h.instance=z,In(z),z):(S=y,(z=Rr.get(j))&&(S=I({},y),iv(S,z)),l=l.ownerDocument||l,z=l.createElement("script"),In(z),Oi(z,"link",S),l.head.appendChild(z),h.instance=z);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,yd(S,y.precedence,l));return h.instance}function yd(l,h,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),z=S.length?S[S.length-1]:null,j=z,Q=0;Q<S.length;Q++){var ce=S[Q];if(ce.dataset.precedence===h)j=ce;else if(j!==z)break}j?j.parentNode.insertBefore(l,j.nextSibling):(h=y.nodeType===9?y.head:y,h.insertBefore(l,h.firstChild))}function bg(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.title==null&&(l.title=h.title)}function iv(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.integrity==null&&(l.integrity=h.integrity)}var Ap=null;function Mp(l,h,y){if(Ap===null){var S=new Map,z=Ap=new Map;z.set(y,S)}else z=Ap,S=z.get(y),S||(S=new Map,z.set(y,S));if(S.has(l))return S;for(S.set(l,null),y=y.getElementsByTagName(l),z=0;z<y.length;z++){var j=y[z];if(!(j[fr]||j[Fr]||l==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=j.getAttribute(h)||"";Q=l+Q;var ce=S.get(Q);ce?ce.push(j):S.set(Q,[j])}}return S}function Pp(l,h,y){l=l.ownerDocument||l,l.head.insertBefore(y,h==="title"?l.querySelector("head > title"):null)}function wg(l,h,y){if(y===1||h.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(l=h.disabled,typeof h.precedence=="string"&&l==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function Sg(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function av(l,h,y,S){if(y.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(y.state.loading&4)===0){if(y.instance===null){var z=Hh(S.href),j=h.querySelector(md(z));if(j){h=j._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(l.count++,l=Dp.bind(l),h.then(l,l)),y.state.loading|=4,y.instance=j,In(j);return}j=h.ownerDocument||h,S=nv(S),(z=Rr.get(z))&&bg(S,z),j=j.createElement("link"),In(j);var Q=j;Q._p=new Promise(function(ce,Re){Q.onload=ce,Q.onerror=Re}),Oi(j,"link",S),y.instance=j}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(y,h),(h=y.state.preload)&&(y.state.loading&3)===0&&(l.count++,y=Dp.bind(l),h.addEventListener("load",y),h.addEventListener("error",y))}}var Cp=0;function h0(l,h){return l.stylesheets&&l.count===0&&Ip(l,l.stylesheets),0<l.count||0<l.imgCount?function(y){var S=setTimeout(function(){if(l.stylesheets&&Ip(l,l.stylesheets),l.unsuspend){var j=l.unsuspend;l.unsuspend=null,j()}},6e4+h);0<l.imgBytes&&Cp===0&&(Cp=62500*pd());var z=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&Ip(l,l.stylesheets),l.unsuspend)){var j=l.unsuspend;l.unsuspend=null,j()}},(l.imgBytes>Cp?50:800)+h);return l.unsuspend=y,function(){l.unsuspend=null,clearTimeout(S),clearTimeout(z)}}:null}function Dp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ip(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Op=null;function Ip(l,h){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Op=new Map,h.forEach(f0,l),Op=null,Dp.call(l))}function f0(l,h){if(!(h.state.loading&4)){var y=Op.get(l);if(y)var S=y.get(null);else{y=new Map,Op.set(l,y);for(var z=l.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<z.length;j++){var Q=z[j];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(y.set(Q.dataset.precedence,Q),S=Q)}S&&y.set(null,S)}z=h.instance,Q=z.getAttribute("data-precedence"),j=y.get(Q)||S,j===S&&y.set(null,z),y.set(Q,z),this.count++,S=Dp.bind(this),z.addEventListener("load",S),z.addEventListener("error",S),j?j.parentNode.insertBefore(z,j.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(z,l.firstChild)),h.state.loading|=4}}var zp={$$typeof:fe,Provider:null,Consumer:null,_currentValue:Et,_currentValue2:Et,_threadCount:0};function d0(l,h,y,S,z,j,Q,ce,Re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=S,this.onUncaughtError=z,this.onCaughtError=j,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function p0(l,h,y,S,z,j,Q,ce,Re,Je,ft,bt){return l=new d0(l,h,y,Q,Re,Je,ft,bt,ce),h=1,j===!0&&(h|=24),j=Ia(3,null,null,h),l.current=j,j.stateNode=l,h=ls(),h.refCount++,l.pooledCache=h,h.refCount++,j.memoizedState={element:S,isDehydrated:y,cache:h},Yf(j),l}function m0(l){return l?(l=pr,l):pr}function Tg(l,h,y,S,z,j){z=m0(z),S.context===null?S.context=z:S.pendingContext=z,S=ds(h),S.payload={element:y},j=j===void 0?null:j,j!==null&&(S.callback=j),y=Ls(l,S,h),y!==null&&(go(y,l,h),oo(y,l,h))}function ov(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var y=l.retryLane;l.retryLane=y!==0&&y<h?y:h}}function sv(l,h){ov(l,h),(l=l.alternate)&&ov(l,h)}function g0(l){if(l.tag===13||l.tag===31){var h=no(l,67108864);h!==null&&go(h,l,67108864),sv(l,67108864)}}function lv(l){if(l.tag===13||l.tag===31){var h=mo();h=dn(h);var y=no(l,h);y!==null&&go(y,l,h),sv(l,h)}}var zc=!0;function Kb(l,h,y,S){var z=$e.T;$e.T=null;var j=ct.p;try{ct.p=2,kp(l,h,y,S)}finally{ct.p=j,$e.T=z}}function uv(l,h,y,S){var z=$e.T;$e.T=null;var j=ct.p;try{ct.p=8,kp(l,h,y,S)}finally{ct.p=j,$e.T=z}}function kp(l,h,y,S){if(zc){var z=Eg(S);if(z===null)Il(l,h,S,Du,y),_0(l,S);else if(Qb(z,l,h,y,S))S.stopPropagation();else if(_0(l,S),h&4&&-1<v0.indexOf(l)){for(;z!==null;){var j=As(z);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var Q=De(j.pendingLanes);if(Q!==0){var ce=j;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Q;){var Re=1<<31-Oe(Q);ce.entanglements[1]|=Re,Q&=~Re}Gs(j),(Jr&6)===0&&(mp=oi()+500,jo(0))}}break;case 31:case 13:ce=no(j,2),ce!==null&&go(ce,j,2),yp(),sv(j,2)}if(j=Eg(S),j===null&&Il(l,h,S,Du,y),j===z)break;z=j}z!==null&&S.stopPropagation()}else Il(l,h,S,null,y)}}function Eg(l){return l=nh(l),Ag(l)}var Du=null;function Ag(l){if(Du=null,l=Ho(l),l!==null){var h=g(l);if(h===null)l=null;else{var y=h.tag;if(y===13){if(l=v(h),l!==null)return l;l=null}else if(y===31){if(l=u(h),l!==null)return l;l=null}else if(y===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null)}}return Du=l,null}function y0(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Aa()){case Yu:return 2;case Ts:return 8;case Es:case Qc:return 32;case al:return 268435456;default:return 32}default:return 32}}var Xh=!1,Ou=null,Iu=null,zu=null,Rp=new Map,Lp=new Map,Rl=[],v0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _0(l,h){switch(l){case"focusin":case"focusout":Ou=null;break;case"dragenter":case"dragleave":Iu=null;break;case"mouseover":case"mouseout":zu=null;break;case"pointerover":case"pointerout":Rp.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lp.delete(h.pointerId)}}function jp(l,h,y,S,z,j){return l===null||l.nativeEvent!==j?(l={blockedOn:h,domEventName:y,eventSystemFlags:S,nativeEvent:j,targetContainers:[z]},h!==null&&(h=As(h),h!==null&&g0(h)),l):(l.eventSystemFlags|=S,h=l.targetContainers,z!==null&&h.indexOf(z)===-1&&h.push(z),l)}function Qb(l,h,y,S,z){switch(h){case"focusin":return Ou=jp(Ou,l,h,y,S,z),!0;case"dragenter":return Iu=jp(Iu,l,h,y,S,z),!0;case"mouseover":return zu=jp(zu,l,h,y,S,z),!0;case"pointerover":var j=z.pointerId;return Rp.set(j,jp(Rp.get(j)||null,l,h,y,S,z)),!0;case"gotpointercapture":return j=z.pointerId,Lp.set(j,jp(Lp.get(j)||null,l,h,y,S,z)),!0}return!1}function x0(l){var h=Ho(l.target);if(h!==null){var y=g(h);if(y!==null){if(h=y.tag,h===13){if(h=v(y),h!==null){l.blockedOn=h,on(l.priority,function(){lv(y)});return}}else if(h===31){if(h=u(y),h!==null){l.blockedOn=h,on(l.priority,function(){lv(y)});return}}else if(h===3&&y.stateNode.current.memoizedState.isDehydrated){l.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Mg(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var y=Eg(l.nativeEvent);if(y===null){y=l.nativeEvent;var S=new y.constructor(y.type,y);Rd=S,y.target.dispatchEvent(S),Rd=null}else return h=As(y),h!==null&&g0(h),l.blockedOn=y,!1;h.shift()}return!0}function cv(l,h,y){Mg(l)&&y.delete(h)}function Jb(){Xh=!1,Ou!==null&&Mg(Ou)&&(Ou=null),Iu!==null&&Mg(Iu)&&(Iu=null),zu!==null&&Mg(zu)&&(zu=null),Rp.forEach(cv),Lp.forEach(cv)}function kc(l,h){l.blockedOn===h&&(l.blockedOn=null,Xh||(Xh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jb)))}var Pg=null;function b0(l){Pg!==l&&(Pg=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Pg===l&&(Pg=null);for(var h=0;h<l.length;h+=3){var y=l[h],S=l[h+1],z=l[h+2];if(typeof S!="function"){if(Ag(S||y)===null)continue;break}var j=As(y);j!==null&&(l.splice(h,3),h-=3,Ln(j,{pending:!0,data:z,method:y.method,action:S},S,z))}}))}function vd(l){function h(Re){return kc(Re,l)}Ou!==null&&kc(Ou,l),Iu!==null&&kc(Iu,l),zu!==null&&kc(zu,l),Rp.forEach(h),Lp.forEach(h);for(var y=0;y<Rl.length;y++){var S=Rl[y];S.blockedOn===l&&(S.blockedOn=null)}for(;0<Rl.length&&(y=Rl[0],y.blockedOn===null);)x0(y),y.blockedOn===null&&Rl.shift();if(y=(l.ownerDocument||l).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var z=y[S],j=y[S+1],Q=z[Tt]||null;if(typeof j=="function")Q||b0(y);else if(Q){var ce=null;if(j&&j.hasAttribute("formAction")){if(z=j,Q=j[Tt]||null)ce=Q.formAction;else if(Ag(z)!==null)continue}else ce=Q.action;typeof ce=="function"?y[S+1]=ce:(y.splice(S,3),S-=3),b0(y)}}}function Cg(){function l(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(Q){return z=Q})},focusReset:"manual",scroll:"manual"})}function h(){z!==null&&(z(),z=null),S||setTimeout(y,20)}function y(){if(!S&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,z=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(y,100),function(){S=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),z!==null&&(z(),z=null)}}}function Dg(l){this._internalRoot=l}Og.prototype.render=Dg.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(a(409));var y=h.current,S=mo();Tg(y,S,l,h,null,null)},Og.prototype.unmount=Dg.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;Tg(l.current,2,null,l,null,null),yp(),h[Qt]=null}};function Og(l){this._internalRoot=l}Og.prototype.unstable_scheduleHydration=function(l){if(l){var h=Or();l={blockedOn:null,target:l,priority:h};for(var y=0;y<Rl.length&&h!==0&&h<Rl[y].priority;y++);Rl.splice(y,0,l),y===0&&x0(l)}};var w0=t.version;if(w0!=="19.2.4")throw Error(a(527,w0,"19.2.4"));ct.findDOMNode=function(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=C(h),l=l!==null?D(l):null,l=l===null?null:l.stateNode,l};var S0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$e,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bp.isDisabled&&Bp.supportsFiber)try{ne=Bp.inject(S0),ae=Bp}catch{}}return mv.createRoot=function(l,h){if(!d(l))throw Error(a(299));var y=!1,S="",z=Jf,j=Us,Q=Vs;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(z=h.onUncaughtError),h.onCaughtError!==void 0&&(j=h.onCaughtError),h.onRecoverableError!==void 0&&(Q=h.onRecoverableError)),h=p0(l,1,!1,null,null,y,S,null,z,j,Q,Cg),l[Qt]=h.current,Zy(l),new Dg(h)},mv.hydrateRoot=function(l,h,y){if(!d(l))throw Error(a(299));var S=!1,z="",j=Jf,Q=Us,ce=Vs,Re=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(z=y.identifierPrefix),y.onUncaughtError!==void 0&&(j=y.onUncaughtError),y.onCaughtError!==void 0&&(Q=y.onCaughtError),y.onRecoverableError!==void 0&&(ce=y.onRecoverableError),y.formState!==void 0&&(Re=y.formState)),h=p0(l,1,!0,h,y??null,S,z,Re,j,Q,ce,Cg),h.context=m0(null),y=h.current,S=mo(),S=dn(S),z=ds(S),z.callback=null,Ls(y,z,S),y=S,h.current.lanes=y,ar(h,y),Gs(h),l[Qt]=h.current,Zy(l),new Og(h)},mv.version="19.2.4",mv}var SE;function e3(){if(SE)return f1.exports;SE=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),f1.exports=JL(),f1.exports}var t3=e3();var TE="popstate";function r3(e={}){function t(a,d){let{pathname:g,search:v,hash:u}=a.location;return i2("",{pathname:g,search:v,hash:u},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function i(a,d){return typeof d=="string"?d:Iv(d)}return i3(t,i,null,e)}function fi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function n3(){return Math.random().toString(36).substring(2,10)}function EE(e,t){return{usr:e.state,key:e.key,idx:t}}function i2(e,t,i=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ry(t):t,state:i,key:t&&t.key||a||n3()}}function Iv({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function ry(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function i3(e,t,i,a={}){let{window:d=document.defaultView,v5Compat:g=!1}=a,v=d.history,u="POP",M=null,C=D();C==null&&(C=0,v.replaceState({...v.state,idx:C},""));function D(){return(v.state||{idx:null}).idx}function I(){u="POP";let $=D(),se=$==null?null:$-C;C=$,M&&M({action:u,location:H.location,delta:se})}function N($,se){u="PUSH";let he=i2(H.location,$,se);C=D()+1;let fe=EE(he,C),me=H.createHref(he);try{v.pushState(fe,"",me)}catch(Ae){if(Ae instanceof DOMException&&Ae.name==="DataCloneError")throw Ae;d.location.assign(me)}g&&M&&M({action:u,location:H.location,delta:1})}function G($,se){u="REPLACE";let he=i2(H.location,$,se);C=D();let fe=EE(he,C),me=H.createHref(he);v.replaceState(fe,"",me),g&&M&&M({action:u,location:H.location,delta:0})}function Y($){return a3($)}let H={get action(){return u},get location(){return e(d,v)},listen($){if(M)throw new Error("A history only accepts one active listener");return d.addEventListener(TE,I),M=$,()=>{d.removeEventListener(TE,I),M=null}},createHref($){return t(d,$)},createURL:Y,encodeLocation($){let se=Y($);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:N,replace:G,go($){return v.go($)}};return H}function a3(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),fi(i,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:Iv(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=i+a),new URL(a,i)}function CD(e,t,i="/"){return o3(e,t,i,!1)}function o3(e,t,i,a){let d=typeof t=="string"?ry(t):t,g=sf(d.pathname||"/",i);if(g==null)return null;let v=DD(e);s3(v);let u=null;for(let M=0;u==null&&M<v.length;++M){let C=v3(g);u=g3(v[M],C,a)}return u}function DD(e,t=[],i=[],a="",d=!1){let g=(v,u,M=d,C)=>{let D={relativePath:C===void 0?v.path||"":C,caseSensitive:v.caseSensitive===!0,childrenIndex:u,route:v};if(D.relativePath.startsWith("/")){if(!D.relativePath.startsWith(a)&&M)return;fi(D.relativePath.startsWith(a),`Absolute route path "${D.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),D.relativePath=D.relativePath.slice(a.length)}let I=nf([a,D.relativePath]),N=i.concat(D);v.children&&v.children.length>0&&(fi(v.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${I}".`),DD(v.children,t,N,I,M)),!(v.path==null&&!v.index)&&t.push({path:I,score:p3(I,v.index),routesMeta:N})};return e.forEach((v,u)=>{if(v.path===""||!v.path?.includes("?"))g(v,u);else for(let M of OD(v.path))g(v,u,!0,M)}),t}function OD(e){let t=e.split("/");if(t.length===0)return[];let[i,...a]=t,d=i.endsWith("?"),g=i.replace(/\?$/,"");if(a.length===0)return d?[g,""]:[g];let v=OD(a.join("/")),u=[];return u.push(...v.map(M=>M===""?g:[g,M].join("/"))),d&&u.push(...v),u.map(M=>e.startsWith("/")&&M===""?"/":M)}function s3(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:m3(t.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}var l3=/^:[\w-]+$/,u3=3,c3=2,h3=1,f3=10,d3=-2,AE=e=>e==="*";function p3(e,t){let i=e.split("/"),a=i.length;return i.some(AE)&&(a+=d3),t&&(a+=c3),i.filter(d=>!AE(d)).reduce((d,g)=>d+(l3.test(g)?u3:g===""?h3:f3),a)}function m3(e,t){return e.length===t.length&&e.slice(0,-1).every((a,d)=>a===t[d])?e[e.length-1]-t[t.length-1]:0}function g3(e,t,i=!1){let{routesMeta:a}=e,d={},g="/",v=[];for(let u=0;u<a.length;++u){let M=a[u],C=u===a.length-1,D=g==="/"?t:t.slice(g.length)||"/",I=rx({path:M.relativePath,caseSensitive:M.caseSensitive,end:C},D),N=M.route;if(!I&&C&&i&&!a[a.length-1].route.index&&(I=rx({path:M.relativePath,caseSensitive:M.caseSensitive,end:!1},D)),!I)return null;Object.assign(d,I.params),v.push({params:d,pathname:nf([g,I.pathname]),pathnameBase:w3(nf([g,I.pathnameBase])),route:N}),I.pathnameBase!=="/"&&(g=nf([g,I.pathnameBase]))}return v}function rx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=y3(e.path,e.caseSensitive,e.end),d=t.match(i);if(!d)return null;let g=d[0],v=g.replace(/(.)\/+$/,"$1"),u=d.slice(1);return{params:a.reduce((C,{paramName:D,isOptional:I},N)=>{if(D==="*"){let Y=u[N]||"";v=g.slice(0,g.length-Y.length).replace(/(.)\/+$/,"$1")}const G=u[N];return I&&!G?C[D]=void 0:C[D]=(G||"").replace(/%2F/g,"/"),C},{}),pathname:g,pathnameBase:v,pattern:e}}function y3(e,t=!1,i=!0){qc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,u,M)=>(a.push({paramName:u,isOptional:M!=null}),M?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,t?void 0:"i"),a]}function v3(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qc(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function sf(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}var _3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function x3(e,t="/"){let{pathname:i,search:a="",hash:d=""}=typeof e=="string"?ry(e):e,g;return i?(i=i.replace(/\/\/+/g,"/"),i.startsWith("/")?g=ME(i.substring(1),"/"):g=ME(i,t)):g=t,{pathname:g,search:S3(a),hash:T3(d)}}function ME(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?i.length>1&&i.pop():d!=="."&&i.push(d)}),i.length>1?i.join("/"):"/"}function g1(e,t,i,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function b3(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function ID(e){let t=b3(e);return t.map((i,a)=>a===t.length-1?i.pathname:i.pathnameBase)}function zD(e,t,i,a=!1){let d;typeof e=="string"?d=ry(e):(d={...e},fi(!d.pathname||!d.pathname.includes("?"),g1("?","pathname","search",d)),fi(!d.pathname||!d.pathname.includes("#"),g1("#","pathname","hash",d)),fi(!d.search||!d.search.includes("#"),g1("#","search","hash",d)));let g=e===""||d.pathname==="",v=g?"/":d.pathname,u;if(v==null)u=i;else{let I=t.length-1;if(!a&&v.startsWith("..")){let N=v.split("/");for(;N[0]==="..";)N.shift(),I-=1;d.pathname=N.join("/")}u=I>=0?t[I]:"/"}let M=x3(d,u),C=v&&v!=="/"&&v.endsWith("/"),D=(g||v===".")&&i.endsWith("/");return!M.pathname.endsWith("/")&&(C||D)&&(M.pathname+="/"),M}var nf=e=>e.join("/").replace(/\/\/+/g,"/"),w3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),S3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,T3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,E3=class{constructor(e,t,i,a=!1){this.status=e,this.statusText=t||"",this.internal=a,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function A3(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function M3(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var kD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function RD(e,t){let i=e;if(typeof i!="string"||!_3.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let a=i,d=!1;if(kD)try{let g=new URL(window.location.href),v=i.startsWith("//")?new URL(g.protocol+i):new URL(i),u=sf(v.pathname,t);v.origin===g.origin&&u!=null?i=u+v.search+v.hash:d=!0}catch{qc(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:d,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var LD=["POST","PUT","PATCH","DELETE"];new Set(LD);var P3=["GET",...LD];new Set(P3);var ny=q.createContext(null);ny.displayName="DataRouter";var eb=q.createContext(null);eb.displayName="DataRouterState";var C3=q.createContext(!1),jD=q.createContext({isTransitioning:!1});jD.displayName="ViewTransition";var D3=q.createContext(new Map);D3.displayName="Fetchers";var O3=q.createContext(null);O3.displayName="Await";var Gl=q.createContext(null);Gl.displayName="Navigation";var Kv=q.createContext(null);Kv.displayName="Location";var mf=q.createContext({outlet:null,matches:[],isDataRoute:!1});mf.displayName="Route";var sS=q.createContext(null);sS.displayName="RouteError";var BD="REACT_ROUTER_ERROR",I3="REDIRECT",z3="ROUTE_ERROR_RESPONSE";function k3(e){if(e.startsWith(`${BD}:${I3}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function R3(e){if(e.startsWith(`${BD}:${z3}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new E3(t.status,t.statusText,t.data)}catch{}}function L3(e,{relative:t}={}){fi(Qv(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:a}=q.useContext(Gl),{hash:d,pathname:g,search:v}=Jv(e,{relative:t}),u=g;return i!=="/"&&(u=g==="/"?i:nf([i,g])),a.createHref({pathname:u,search:v,hash:d})}function Qv(){return q.useContext(Kv)!=null}function Pd(){return fi(Qv(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Kv).location}var ND="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FD(e){q.useContext(Gl).static||q.useLayoutEffect(e)}function j3(){let{isDataRoute:e}=q.useContext(mf);return e?X3():B3()}function B3(){fi(Qv(),"useNavigate() may be used only in the context of a <Router> component.");let e=q.useContext(ny),{basename:t,navigator:i}=q.useContext(Gl),{matches:a}=q.useContext(mf),{pathname:d}=Pd(),g=JSON.stringify(ID(a)),v=q.useRef(!1);return FD(()=>{v.current=!0}),q.useCallback((M,C={})=>{if(qc(v.current,ND),!v.current)return;if(typeof M=="number"){i.go(M);return}let D=zD(M,JSON.parse(g),d,C.relative==="path");e==null&&t!=="/"&&(D.pathname=D.pathname==="/"?t:nf([t,D.pathname])),(C.replace?i.replace:i.push)(D,C.state,C)},[t,i,g,d,e])}q.createContext(null);function Jv(e,{relative:t}={}){let{matches:i}=q.useContext(mf),{pathname:a}=Pd(),d=JSON.stringify(ID(i));return q.useMemo(()=>zD(e,JSON.parse(d),a,t==="path"),[e,d,a,t])}function N3(e,t){return UD(e,t)}function UD(e,t,i,a,d){fi(Qv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=q.useContext(Gl),{matches:v}=q.useContext(mf),u=v[v.length-1],M=u?u.params:{},C=u?u.pathname:"/",D=u?u.pathnameBase:"/",I=u&&u.route;{let he=I&&I.path||"";qD(C,!I||he.endsWith("*")||he.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${C}" (under <Route path="${he}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${he}"> to <Route path="${he==="/"?"*":`${he}/*`}">.`)}let N=Pd(),G;if(t){let he=typeof t=="string"?ry(t):t;fi(D==="/"||he.pathname?.startsWith(D),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${D}" but pathname "${he.pathname}" was given in the \`location\` prop.`),G=he}else G=N;let Y=G.pathname||"/",H=Y;if(D!=="/"){let he=D.replace(/^\//,"").split("/");H="/"+Y.replace(/^\//,"").split("/").slice(he.length).join("/")}let $=CD(e,{pathname:H});qc(I||$!=null,`No routes matched location "${G.pathname}${G.search}${G.hash}" `),qc($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${G.pathname}${G.search}${G.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let se=$3($&&$.map(he=>Object.assign({},he,{params:Object.assign({},M,he.params),pathname:nf([D,g.encodeLocation?g.encodeLocation(he.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathname]),pathnameBase:he.pathnameBase==="/"?D:nf([D,g.encodeLocation?g.encodeLocation(he.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathnameBase])})),v,i,a,d);return t&&se?q.createElement(Kv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...G},navigationType:"POP"}},se):se}function F3(){let e=Y3(),t=A3(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",d={padding:"0.5rem",backgroundColor:a},g={padding:"2px 4px",backgroundColor:a},v=null;return console.error("Error handled by React Router default ErrorBoundary:",e),v=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:g},"ErrorBoundary")," or"," ",q.createElement("code",{style:g},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),i?q.createElement("pre",{style:d},i):null,v)}var U3=q.createElement(F3,null),VD=class extends q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const i=R3(e.digest);i&&(e=i)}let t=e!==void 0?q.createElement(mf.Provider,{value:this.props.routeContext},q.createElement(sS.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?q.createElement(V3,{error:e},t):t}};VD.contextType=C3;var y1=new WeakMap;function V3({children:e,error:t}){let{basename:i}=q.useContext(Gl);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let a=k3(t.digest);if(a){let d=y1.get(t);if(d)throw d;let g=RD(a.location,i);if(kD&&!y1.get(t))if(g.isExternal||a.reloadDocument)window.location.href=g.absoluteURL||g.to;else{const v=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(g.to,{replace:a.replace}));throw y1.set(t,v),v}return q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${g.absoluteURL||g.to}`})}}return e}function q3({routeContext:e,match:t,children:i}){let a=q.useContext(ny);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),q.createElement(mf.Provider,{value:e},i)}function $3(e,t=[],i=null,a=null,d=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let g=e,v=i?.errors;if(v!=null){let D=g.findIndex(I=>I.route.id&&v?.[I.route.id]!==void 0);fi(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(v).join(",")}`),g=g.slice(0,Math.min(g.length,D+1))}let u=!1,M=-1;if(i)for(let D=0;D<g.length;D++){let I=g[D];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(M=D),I.route.id){let{loaderData:N,errors:G}=i,Y=I.route.loader&&!N.hasOwnProperty(I.route.id)&&(!G||G[I.route.id]===void 0);if(I.route.lazy||Y){u=!0,M>=0?g=g.slice(0,M+1):g=[g[0]];break}}}let C=i&&a?(D,I)=>{a(D,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:M3(i.matches),errorInfo:I})}:void 0;return g.reduceRight((D,I,N)=>{let G,Y=!1,H=null,$=null;i&&(G=v&&I.route.id?v[I.route.id]:void 0,H=I.route.errorElement||U3,u&&(M<0&&N===0?(qD("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,$=null):M===N&&(Y=!0,$=I.route.hydrateFallbackElement||null)));let se=t.concat(g.slice(0,N+1)),he=()=>{let fe;return G?fe=H:Y?fe=$:I.route.Component?fe=q.createElement(I.route.Component,null):I.route.element?fe=I.route.element:fe=D,q.createElement(q3,{match:I,routeContext:{outlet:D,matches:se,isDataRoute:i!=null},children:fe})};return i&&(I.route.ErrorBoundary||I.route.errorElement||N===0)?q.createElement(VD,{location:i.location,revalidation:i.revalidation,component:H,error:G,children:he(),routeContext:{outlet:null,matches:se,isDataRoute:!0},onError:C}):he()},null)}function lS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G3(e){let t=q.useContext(ny);return fi(t,lS(e)),t}function Z3(e){let t=q.useContext(eb);return fi(t,lS(e)),t}function H3(e){let t=q.useContext(mf);return fi(t,lS(e)),t}function uS(e){let t=H3(e),i=t.matches[t.matches.length-1];return fi(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function W3(){return uS("useRouteId")}function Y3(){let e=q.useContext(sS),t=Z3("useRouteError"),i=uS("useRouteError");return e!==void 0?e:t.errors?.[i]}function X3(){let{router:e}=G3("useNavigate"),t=uS("useNavigate"),i=q.useRef(!1);return FD(()=>{i.current=!0}),q.useCallback(async(d,g={})=>{qc(i.current,ND),i.current&&(typeof d=="number"?await e.navigate(d):await e.navigate(d,{fromRouteId:t,...g}))},[e,t])}var PE={};function qD(e,t,i){!t&&!PE[e]&&(PE[e]=!0,qc(!1,i))}q.memo(K3);function K3({routes:e,future:t,state:i,onError:a}){return UD(e,void 0,i,a,t)}function Ng(e){fi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Q3({basename:e="/",children:t=null,location:i,navigationType:a="POP",navigator:d,static:g=!1,unstable_useTransitions:v}){fi(!Qv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),M=q.useMemo(()=>({basename:u,navigator:d,static:g,unstable_useTransitions:v,future:{}}),[u,d,g,v]);typeof i=="string"&&(i=ry(i));let{pathname:C="/",search:D="",hash:I="",state:N=null,key:G="default"}=i,Y=q.useMemo(()=>{let H=sf(C,u);return H==null?null:{location:{pathname:H,search:D,hash:I,state:N,key:G},navigationType:a}},[u,C,D,I,N,G,a]);return qc(Y!=null,`<Router basename="${u}"> is not able to match the URL "${C}${D}${I}" because it does not start with the basename, so the <Router> won't render anything.`),Y==null?null:q.createElement(Gl.Provider,{value:M},q.createElement(Kv.Provider,{children:t,value:Y}))}function J3({children:e,location:t}){return N3(a2(e),t)}function a2(e,t=[]){let i=[];return q.Children.forEach(e,(a,d)=>{if(!q.isValidElement(a))return;let g=[...t,d];if(a.type===q.Fragment){i.push.apply(i,a2(a.props.children,g));return}fi(a.type===Ng,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fi(!a.props.index||!a.props.children,"An index route cannot have child routes.");let v={id:a.props.id||g.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(v.children=a2(a.props.children,g)),i.push(v)}),i}var G0="get",Z0="application/x-www-form-urlencoded";function tb(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function ej(e){return tb(e)&&e.tagName.toLowerCase()==="button"}function tj(e){return tb(e)&&e.tagName.toLowerCase()==="form"}function rj(e){return tb(e)&&e.tagName.toLowerCase()==="input"}function nj(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ij(e,t){return e.button===0&&(!t||t==="_self")&&!nj(e)}var M0=null;function aj(){if(M0===null)try{new FormData(document.createElement("form"),0),M0=!1}catch{M0=!0}return M0}var oj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function v1(e){return e!=null&&!oj.has(e)?(qc(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Z0}"`),null):e}function sj(e,t){let i,a,d,g,v;if(tj(e)){let u=e.getAttribute("action");a=u?sf(u,t):null,i=e.getAttribute("method")||G0,d=v1(e.getAttribute("enctype"))||Z0,g=new FormData(e)}else if(ej(e)||rj(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let M=e.getAttribute("formaction")||u.getAttribute("action");if(a=M?sf(M,t):null,i=e.getAttribute("formmethod")||u.getAttribute("method")||G0,d=v1(e.getAttribute("formenctype"))||v1(u.getAttribute("enctype"))||Z0,g=new FormData(u,e),!aj()){let{name:C,type:D,value:I}=e;if(D==="image"){let N=C?`${C}.`:"";g.append(`${N}x`,"0"),g.append(`${N}y`,"0")}else C&&g.append(C,I)}}else{if(tb(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=G0,a=null,d=Z0,v=e}return g&&d==="text/plain"&&(v=g,g=void 0),{action:a,method:i.toLowerCase(),encType:d,formData:g,body:v}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cS(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lj(e,t,i,a){let d=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i?d.pathname.endsWith("/")?d.pathname=`${d.pathname}_.${a}`:d.pathname=`${d.pathname}.${a}`:d.pathname==="/"?d.pathname=`_root.${a}`:t&&sf(d.pathname,t)==="/"?d.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${a}`,d}async function uj(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cj(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function hj(e,t,i){let a=await Promise.all(e.map(async d=>{let g=t.routes[d.route.id];if(g){let v=await uj(g,i);return v.links?v.links():[]}return[]}));return mj(a.flat(1).filter(cj).filter(d=>d.rel==="stylesheet"||d.rel==="preload").map(d=>d.rel==="stylesheet"?{...d,rel:"prefetch",as:"style"}:{...d,rel:"prefetch"}))}function CE(e,t,i,a,d,g){let v=(M,C)=>i[C]?M.route.id!==i[C].route.id:!0,u=(M,C)=>i[C].pathname!==M.pathname||i[C].route.path?.endsWith("*")&&i[C].params["*"]!==M.params["*"];return g==="assets"?t.filter((M,C)=>v(M,C)||u(M,C)):g==="data"?t.filter((M,C)=>{let D=a.routes[M.route.id];if(!D||!D.hasLoader)return!1;if(v(M,C)||u(M,C))return!0;if(M.route.shouldRevalidate){let I=M.route.shouldRevalidate({currentUrl:new URL(d.pathname+d.search+d.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:M.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function fj(e,t,{includeHydrateFallback:i}={}){return dj(e.map(a=>{let d=t.routes[a.route.id];if(!d)return[];let g=[d.module];return d.clientActionModule&&(g=g.concat(d.clientActionModule)),d.clientLoaderModule&&(g=g.concat(d.clientLoaderModule)),i&&d.hydrateFallbackModule&&(g=g.concat(d.hydrateFallbackModule)),d.imports&&(g=g.concat(d.imports)),g}).flat(1))}function dj(e){return[...new Set(e)]}function pj(e){let t={},i=Object.keys(e).sort();for(let a of i)t[a]=e[a];return t}function mj(e,t){let i=new Set;return new Set(t),e.reduce((a,d)=>{let g=JSON.stringify(pj(d));return i.has(g)||(i.add(g),a.push({key:g,link:d})),a},[])}function $D(){let e=q.useContext(ny);return cS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function gj(){let e=q.useContext(eb);return cS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var hS=q.createContext(void 0);hS.displayName="FrameworkContext";function GD(){let e=q.useContext(hS);return cS(e,"You must render this element inside a <HydratedRouter> element"),e}function yj(e,t){let i=q.useContext(hS),[a,d]=q.useState(!1),[g,v]=q.useState(!1),{onFocus:u,onBlur:M,onMouseEnter:C,onMouseLeave:D,onTouchStart:I}=t,N=q.useRef(null);q.useEffect(()=>{if(e==="render"&&v(!0),e==="viewport"){let H=se=>{se.forEach(he=>{v(he.isIntersecting)})},$=new IntersectionObserver(H,{threshold:.5});return N.current&&$.observe(N.current),()=>{$.disconnect()}}},[e]),q.useEffect(()=>{if(a){let H=setTimeout(()=>{v(!0)},100);return()=>{clearTimeout(H)}}},[a]);let G=()=>{d(!0)},Y=()=>{d(!1),v(!1)};return i?e!=="intent"?[g,N,{}]:[g,N,{onFocus:gv(u,G),onBlur:gv(M,Y),onMouseEnter:gv(C,G),onMouseLeave:gv(D,Y),onTouchStart:gv(I,G)}]:[!1,N,{}]}function gv(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function vj({page:e,...t}){let{router:i}=$D(),a=q.useMemo(()=>CD(i.routes,e,i.basename),[i.routes,e,i.basename]);return a?q.createElement(xj,{page:e,matches:a,...t}):null}function _j(e){let{manifest:t,routeModules:i}=GD(),[a,d]=q.useState([]);return q.useEffect(()=>{let g=!1;return hj(e,t,i).then(v=>{g||d(v)}),()=>{g=!0}},[e,t,i]),a}function xj({page:e,matches:t,...i}){let a=Pd(),{future:d,manifest:g,routeModules:v}=GD(),{basename:u}=$D(),{loaderData:M,matches:C}=gj(),D=q.useMemo(()=>CE(e,t,C,g,a,"data"),[e,t,C,g,a]),I=q.useMemo(()=>CE(e,t,C,g,a,"assets"),[e,t,C,g,a]),N=q.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let H=new Set,$=!1;if(t.forEach(he=>{let fe=g.routes[he.route.id];!fe||!fe.hasLoader||(!D.some(me=>me.route.id===he.route.id)&&he.route.id in M&&v[he.route.id]?.shouldRevalidate||fe.hasClientLoader?$=!0:H.add(he.route.id))}),H.size===0)return[];let se=lj(e,u,d.unstable_trailingSlashAwareDataRequests,"data");return $&&H.size>0&&se.searchParams.set("_routes",t.filter(he=>H.has(he.route.id)).map(he=>he.route.id).join(",")),[se.pathname+se.search]},[u,d.unstable_trailingSlashAwareDataRequests,M,a,g,D,t,e,v]),G=q.useMemo(()=>fj(I,g),[I,g]),Y=_j(I);return q.createElement(q.Fragment,null,N.map(H=>q.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...i})),G.map(H=>q.createElement("link",{key:H,rel:"modulepreload",href:H,...i})),Y.map(({key:H,link:$})=>q.createElement("link",{key:H,nonce:i.nonce,...$,crossOrigin:$.crossOrigin??i.crossOrigin})))}function bj(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var wj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wj&&(window.__reactRouterVersion="7.13.0")}catch{}function Sj({basename:e,children:t,unstable_useTransitions:i,window:a}){let d=q.useRef();d.current==null&&(d.current=r3({window:a,v5Compat:!0}));let g=d.current,[v,u]=q.useState({action:g.action,location:g.location}),M=q.useCallback(C=>{i===!1?u(C):q.startTransition(()=>u(C))},[i]);return q.useLayoutEffect(()=>g.listen(M),[g,M]),q.createElement(Q3,{basename:e,children:t,location:v.location,navigationType:v.action,navigator:g,unstable_useTransitions:i})}var ZD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zg=q.forwardRef(function({onClick:t,discover:i="render",prefetch:a="none",relative:d,reloadDocument:g,replace:v,state:u,target:M,to:C,preventScrollReset:D,viewTransition:I,unstable_defaultShouldRevalidate:N,...G},Y){let{basename:H,unstable_useTransitions:$}=q.useContext(Gl),se=typeof C=="string"&&ZD.test(C),he=RD(C,H);C=he.to;let fe=L3(C,{relative:d}),[me,Ae,ge]=yj(a,G),Se=Mj(C,{replace:v,state:u,target:M,preventScrollReset:D,relative:d,viewTransition:I,unstable_defaultShouldRevalidate:N,unstable_useTransitions:$});function Ue(vt){t&&t(vt),vt.defaultPrevented||Se(vt)}let et=q.createElement("a",{...G,...ge,href:he.absoluteURL||fe,onClick:he.isExternal||g?t:Ue,ref:bj(Y,Ae),target:M,"data-discover":!se&&i==="render"?"true":void 0});return me&&!se?q.createElement(q.Fragment,null,et,q.createElement(vj,{page:fe})):et});Zg.displayName="Link";var Tj=q.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:a="",end:d=!1,style:g,to:v,viewTransition:u,children:M,...C},D){let I=Jv(v,{relative:C.relative}),N=Pd(),G=q.useContext(eb),{navigator:Y,basename:H}=q.useContext(Gl),$=G!=null&&Ij(I)&&u===!0,se=Y.encodeLocation?Y.encodeLocation(I).pathname:I.pathname,he=N.pathname,fe=G&&G.navigation&&G.navigation.location?G.navigation.location.pathname:null;i||(he=he.toLowerCase(),fe=fe?fe.toLowerCase():null,se=se.toLowerCase()),fe&&H&&(fe=sf(fe,H)||fe);const me=se!=="/"&&se.endsWith("/")?se.length-1:se.length;let Ae=he===se||!d&&he.startsWith(se)&&he.charAt(me)==="/",ge=fe!=null&&(fe===se||!d&&fe.startsWith(se)&&fe.charAt(se.length)==="/"),Se={isActive:Ae,isPending:ge,isTransitioning:$},Ue=Ae?t:void 0,et;typeof a=="function"?et=a(Se):et=[a,Ae?"active":null,ge?"pending":null,$?"transitioning":null].filter(Boolean).join(" ");let vt=typeof g=="function"?g(Se):g;return q.createElement(Zg,{...C,"aria-current":Ue,className:et,ref:D,style:vt,to:v,viewTransition:u},typeof M=="function"?M(Se):M)});Tj.displayName="NavLink";var Ej=q.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:a,replace:d,state:g,method:v=G0,action:u,onSubmit:M,relative:C,preventScrollReset:D,viewTransition:I,unstable_defaultShouldRevalidate:N,...G},Y)=>{let{unstable_useTransitions:H}=q.useContext(Gl),$=Dj(),se=Oj(u,{relative:C}),he=v.toLowerCase()==="get"?"get":"post",fe=typeof u=="string"&&ZD.test(u),me=Ae=>{if(M&&M(Ae),Ae.defaultPrevented)return;Ae.preventDefault();let ge=Ae.nativeEvent.submitter,Se=ge?.getAttribute("formmethod")||v,Ue=()=>$(ge||Ae.currentTarget,{fetcherKey:t,method:Se,navigate:i,replace:d,state:g,relative:C,preventScrollReset:D,viewTransition:I,unstable_defaultShouldRevalidate:N});H&&i!==!1?q.startTransition(()=>Ue()):Ue()};return q.createElement("form",{ref:Y,method:he,action:se,onSubmit:a?M:me,...G,"data-discover":!fe&&e==="render"?"true":void 0})});Ej.displayName="Form";function Aj(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HD(e){let t=q.useContext(ny);return fi(t,Aj(e)),t}function Mj(e,{target:t,replace:i,state:a,preventScrollReset:d,relative:g,viewTransition:v,unstable_defaultShouldRevalidate:u,unstable_useTransitions:M}={}){let C=j3(),D=Pd(),I=Jv(e,{relative:g});return q.useCallback(N=>{if(ij(N,t)){N.preventDefault();let G=i!==void 0?i:Iv(D)===Iv(I),Y=()=>C(e,{replace:G,state:a,preventScrollReset:d,relative:g,viewTransition:v,unstable_defaultShouldRevalidate:u});M?q.startTransition(()=>Y()):Y()}},[D,C,I,i,a,t,e,d,g,v,u,M])}var Pj=0,Cj=()=>`__${String(++Pj)}__`;function Dj(){let{router:e}=HD("useSubmit"),{basename:t}=q.useContext(Gl),i=W3(),a=e.fetch,d=e.navigate;return q.useCallback(async(g,v={})=>{let{action:u,method:M,encType:C,formData:D,body:I}=sj(g,t);if(v.navigate===!1){let N=v.fetcherKey||Cj();await a(N,i,v.action||u,{unstable_defaultShouldRevalidate:v.unstable_defaultShouldRevalidate,preventScrollReset:v.preventScrollReset,formData:D,body:I,formMethod:v.method||M,formEncType:v.encType||C,flushSync:v.flushSync})}else await d(v.action||u,{unstable_defaultShouldRevalidate:v.unstable_defaultShouldRevalidate,preventScrollReset:v.preventScrollReset,formData:D,body:I,formMethod:v.method||M,formEncType:v.encType||C,replace:v.replace,state:v.state,fromRouteId:i,flushSync:v.flushSync,viewTransition:v.viewTransition})},[a,d,t,i])}function Oj(e,{relative:t}={}){let{basename:i}=q.useContext(Gl),a=q.useContext(mf);fi(a,"useFormAction must be used inside a RouteContext");let[d]=a.matches.slice(-1),g={...Jv(e||".",{relative:t})},v=Pd();if(e==null){g.search=v.search;let u=new URLSearchParams(g.search),M=u.getAll("index");if(M.some(D=>D==="")){u.delete("index"),M.filter(I=>I).forEach(I=>u.append("index",I));let D=u.toString();g.search=D?`?${D}`:""}}return(!e||e===".")&&d.route.index&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(g.pathname=g.pathname==="/"?i:nf([i,g.pathname])),Iv(g)}function Ij(e,{relative:t}={}){let i=q.useContext(jD);fi(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=HD("useViewTransitionState"),d=Jv(e,{relative:t});if(!i.isTransitioning)return!1;let g=sf(i.currentLocation.pathname,a)||i.currentLocation.pathname,v=sf(i.nextLocation.pathname,a)||i.nextLocation.pathname;return rx(d.pathname,v)!=null||rx(d.pathname,g)!=null}var WD=PD();const zj=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),kj=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,i,a)=>a?a.toUpperCase():i.toLowerCase()),DE=e=>{const t=kj(e);return t.charAt(0).toUpperCase()+t.slice(1)},YD=(...e)=>e.filter((t,i,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===i).join(" ").trim(),Rj=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var Lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jj=q.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:d="",children:g,iconNode:v,...u},M)=>q.createElement("svg",{ref:M,...Lj,width:t,height:t,stroke:e,strokeWidth:a?Number(i)*24/Number(t):i,className:YD("lucide",d),...!g&&!Rj(u)&&{"aria-hidden":"true"},...u},[...v.map(([C,D])=>q.createElement(C,D)),...Array.isArray(g)?g:[g]]));const rl=(e,t)=>{const i=q.forwardRef(({className:a,...d},g)=>q.createElement(jj,{ref:g,iconNode:t,className:YD(`lucide-${zj(DE(e))}`,`lucide-${e}`,a),...d}));return i.displayName=DE(e),i};const Bj=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],OE=rl("chart-line",Bj);const Nj=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Xp=rl("chevron-down",Nj);const Fj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Uj=rl("circle-alert",Fj);const Vj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qj=rl("clock",Vj);const $j=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Gj=rl("ellipsis",$j);const Zj=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Hj=rl("house",Zj);const Wj=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],XD=rl("map",Wj);const Yj=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Xj=rl("menu",Yj);const Kj=[["path",{d:"M5 12h14",key:"1ays0h"}]],Qj=rl("minus",Kj);const Jj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],e5=rl("plus",Jj);const t5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],IE=rl("trending-up",t5);const r5=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],n5=rl("trophy",r5);const i5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],KD=rl("x",i5),a5="/unfpa-dashboard/assets/undp-BN7dWDkM.png",o5=()=>{const[e,t]=q.useState(!1),i=Pd(),a=[{label:"Home",path:"/"},{label:"About",path:"/about"},{label:"Methodology",path:"/methodology"},{label:"Analytics",path:"/analytics"},{label:"Data Catalog",path:"/catalog"}];return _e.jsxs("header",{className:"w-full h-16 sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm flex items-center justify-between px-6",children:[_e.jsx("div",{className:"flex items-center gap-4",children:_e.jsxs(Zg,{to:"/",className:"flex items-center gap-4 hover:opacity-90 transition-opacity",children:[_e.jsx("img",{src:a5,alt:"UNFPA Logo",className:"h-8 w-auto object-contain"}),_e.jsxs("div",{className:"flex flex-col",children:[_e.jsx("span",{className:"font-bold text-[15px] text-gray-900 leading-tight tracking-tight",children:"Odisha Demographic & Data Intelligence Platform"}),_e.jsx("span",{className:"text-[11px] font-medium text-gray-500 uppercase tracking-wide mt-1",children:"UNFPA India (Odisha State Office) initiative"})]})]})}),_e.jsxs("div",{className:"flex items-center gap-8",children:[_e.jsx("nav",{className:"hidden md:flex items-center gap-8 text-sm font-bold text-gray-600",children:a.map(d=>{const g=i.pathname===d.path;return _e.jsx(Zg,{to:d.path,className:`transition-colors py-2 font-[400] ${g?"text-orange-500":"hover:text-orange-500 text-gray-600"}`,children:d.label},d.path)})}),_e.jsxs("div",{className:"flex md:hidden items-center z-[100]",children:[_e.jsx("button",{onClick:()=>t(!e),className:`p-2 rounded-lg transition-all relative z-[110] ${e?"text-[#26412C]":"text-gray-600 hover:bg-gray-100"}`,children:e?_e.jsx(KD,{className:"w-8 h-8"}):_e.jsx(Xj,{className:"w-6 h-6"})}),e&&_e.jsx("div",{className:"fixed inset-0 bg-white z-[100] flex flex-col items-center justify-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:_e.jsx("nav",{className:"flex flex-col gap-8 text-center",children:a.map(d=>_e.jsx(Zg,{to:d.path,onClick:()=>t(!1),className:"text-4xl font-[400] tracking-tighter transition-all text-black hover:text-orange-500 leading-none active:scale-95",children:d.label.toUpperCase()},d.label))})})]})]})]})},s5=()=>_e.jsx("footer",{className:"mt-5 pt-10 pb-10 border-t border-gray-300 bg-white text-center",children:_e.jsx("div",{className:"max-w-7xl mx-auto px-6",children:_e.jsx("p",{className:"text-[14px]  font-[400]",children:" 2026 mistEO. All rights reserved."})})});var H0={exports:{}};var l5=H0.exports,zE;function u5(){return zE||(zE=1,(function(e,t){(function(i,a){e.exports=a()})(l5,(function(){var i={},a={};function d(v,u,M){if(a[v]=M,v==="index"){var C="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",D={};return a.shared(D),a.index(i,D),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}d("shared",["exports"],(function(v){function u(s,r,o,f){return new(o||(o=Promise))((function(m,x){function b(k){try{P(f.next(k))}catch(B){x(B)}}function E(k){try{P(f.throw(k))}catch(B){x(B)}}function P(k){var B;k.done?m(k.value):(B=k.value,B instanceof o?B:new o((function(F){F(B)}))).then(b,E)}P((f=f.apply(s,r||[])).next())}))}function M(s,r){this.x=s,this.y=r}function C(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var D,I;typeof SuppressedError=="function"&&SuppressedError,M.prototype={clone(){return new M(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,r){return this.clone()._rotateAround(s,r)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){const r=s.x-this.x,o=s.y-this.y;return r*r+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,r){return Math.atan2(this.x*r-this.y*s,this.x*s+this.y*r)},_matMult(s){const r=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=r,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){const s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){const r=Math.cos(s),o=Math.sin(s),f=o*this.x+r*this.y;return this.x=r*this.x-o*this.y,this.y=f,this},_rotateAround(s,r){const o=Math.cos(s),f=Math.sin(s),m=r.y+f*(this.x-r.x)+o*(this.y-r.y);return this.x=r.x+o*(this.x-r.x)-f*(this.y-r.y),this.y=m,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:M},M.convert=function(s){if(s instanceof M)return s;if(Array.isArray(s))return new M(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new M(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var N=(function(){if(I)return D;function s(r,o,f,m){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(m-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=o,this.p2x=f,this.p2y=m}return I=1,D=s,s.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,o){if(o===void 0&&(o=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,m=0;m<8;m++){var x=this.sampleCurveX(f)-r;if(Math.abs(x)<o)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var E=0,P=1;for(f=r,m=0;m<20&&(x=this.sampleCurveX(f),!(Math.abs(x-r)<o));m++)r>x?E=f:P=f,f=.5*(P-E)+E;return f},solve:function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))}},D})(),G=C(N);let Y,H;function $(){return Y==null&&(Y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Y}function se(){if(H==null&&(H=!1,$())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let f=0;f<25;f++){const m=4*f;r.fillStyle=`rgb(${m},${m+1},${m+2})`,r.fillRect(f%5,Math.floor(f/5),1,1)}const o=r.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&o[f]!==f){H=!0;break}}}return H||!1}var he=1e-6,fe=typeof Float32Array<"u"?Float32Array:Array;function me(){var s=new fe(9);return fe!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Ae(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function ge(){var s=new fe(3);return fe!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function Se(s){var r=s[0],o=s[1],f=s[2];return Math.sqrt(r*r+o*o+f*f)}function Ue(s,r,o){var f=new fe(3);return f[0]=s,f[1]=r,f[2]=o,f}function et(s,r,o){return s[0]=r[0]+o[0],s[1]=r[1]+o[1],s[2]=r[2]+o[2],s}function vt(s,r,o){return s[0]=r[0]*o,s[1]=r[1]*o,s[2]=r[2]*o,s}function pt(s,r,o){var f=r[0],m=r[1],x=r[2],b=o[0],E=o[1],P=o[2];return s[0]=m*P-x*E,s[1]=x*b-f*P,s[2]=f*E-m*b,s}var Fe,Ct=Se;function It(s,r,o){var f=r[0],m=r[1],x=r[2],b=r[3];return s[0]=o[0]*f+o[4]*m+o[8]*x+o[12]*b,s[1]=o[1]*f+o[5]*m+o[9]*x+o[13]*b,s[2]=o[2]*f+o[6]*m+o[10]*x+o[14]*b,s[3]=o[3]*f+o[7]*m+o[11]*x+o[15]*b,s}function jt(){var s=new fe(4);return fe!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function $e(s,r,o,f){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;r*=x,f*=x,o*=x;var b=Math.sin(r),E=Math.cos(r),P=Math.sin(o),k=Math.cos(o),B=Math.sin(f),F=Math.cos(f);switch(m){case"xyz":s[0]=b*k*F+E*P*B,s[1]=E*P*F-b*k*B,s[2]=E*k*B+b*P*F,s[3]=E*k*F-b*P*B;break;case"xzy":s[0]=b*k*F-E*P*B,s[1]=E*P*F-b*k*B,s[2]=E*k*B+b*P*F,s[3]=E*k*F+b*P*B;break;case"yxz":s[0]=b*k*F+E*P*B,s[1]=E*P*F-b*k*B,s[2]=E*k*B-b*P*F,s[3]=E*k*F+b*P*B;break;case"yzx":s[0]=b*k*F+E*P*B,s[1]=E*P*F+b*k*B,s[2]=E*k*B-b*P*F,s[3]=E*k*F-b*P*B;break;case"zxy":s[0]=b*k*F-E*P*B,s[1]=E*P*F+b*k*B,s[2]=E*k*B+b*P*F,s[3]=E*k*F-b*P*B;break;case"zyx":s[0]=b*k*F-E*P*B,s[1]=E*P*F+b*k*B,s[2]=E*k*B-b*P*F,s[3]=E*k*F+b*P*B;break;default:throw new Error("Unknown angle order "+m)}return s}function ct(){var s=new fe(2);return fe!=Float32Array&&(s[0]=0,s[1]=0),s}function Et(s,r){var o=new fe(2);return o[0]=s,o[1]=r,o}ge(),Fe=new fe(4),fe!=Float32Array&&(Fe[0]=0,Fe[1]=0,Fe[2]=0,Fe[3]=0),ge(),Ue(1,0,0),Ue(0,1,0),jt(),jt(),me(),ct();const _t=8192;function Ut(s,r,o){return r*(_t/(s.tileSize*Math.pow(2,o-s.tileID.overscaledZ)))}function ze(s,r){return(s%r+r)%r}function at(s,r,o){return s*(1-o)+r*o}function Pt(s){if(s<=0)return 0;if(s>=1)return 1;const r=s*s,o=r*s;return 4*(s<.5?o:3*(s-r)+o-.75)}function zt(s,r,o,f){const m=new G(s,r,o,f);return x=>m.solve(x)}const $t=zt(.25,.1,.25,1);function Kt(s,r,o){return Math.min(o,Math.max(r,s))}function Gt(s,r,o){const f=o-r,m=((s-r)%f+f)%f+r;return m===r?o:m}function Ar(s,...r){for(const o of r)for(const f in o)s[f]=o[f];return s}let ht=1;function sr(s,r,o){const f={};for(const m in s)f[m]=r.call(this,s[m],m,s);return f}function mr(s,r,o){const f={};for(const m in s)r.call(this,s[m],m,s)&&(f[m]=s[m]);return f}function St(s){return Array.isArray(s)?s.map(St):typeof s=="object"&&s?sr(s,St):s}const Dn={};function cr(s){Dn[s]||(typeof console<"u"&&console.warn(s),Dn[s]=!0)}function Wr(s,r,o){return(o.y-s.y)*(r.x-s.x)>(r.y-s.y)*(o.x-s.x)}function ln(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Lr=null;function Ea(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const il="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ss(s,r,o,f,m){return u(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(s,{timestamp:0});try{const b=x?.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const E=b.startsWith("BGR"),P=new Uint8ClampedArray(f*m*4);if(yield x.copyTo(P,(function(k,B,F,Z,W){const J=4*Math.max(-B,0),te=(Math.max(0,F)-F)*Z*4+J,ie=4*Z,ue=Math.max(0,B),xe=Math.max(0,F);return{rect:{x:ue,y:xe,width:Math.min(k.width,B+Z)-ue,height:Math.min(k.height,F+W)-xe},layout:[{offset:te,stride:ie}]}})(s,r,o,f,m)),E)for(let k=0;k<P.length;k+=4){const B=P[k];P[k]=P[k+2],P[k+2]=B}return P}finally{x.close()}}))}let Go,So;function Wu(s,r,o,f){return s.addEventListener(r,o,f),{unsubscribe:()=>{s.removeEventListener(r,o,f)}}}function oi(s){return s*Math.PI/180}function Aa(s){return s/Math.PI*180}const Yu={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ts={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Es="AbortError";class Qc extends Error{constructor(r=Es){super(r instanceof Error?r.message:r),this.name=Es,r instanceof Error&&r.stack&&(this.stack=r.stack)}}function al(s){return s.name===Es}const Be={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ee(s){return Be.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const ne="global-dispatcher";class ae extends Error{constructor(r,o,f,m){super(`AJAXError: ${o} (${r}): ${f}`),this.status=r,this.statusText=o,this.url=f,this.body=m}}const Te=()=>ln(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Oe=function(s,r){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const f=ee(s.url);if(f)return f(s,r);if(ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:ne},r)}if(!(/^file:/.test(o=s.url)||/^file:/.test(Te())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,m){return u(this,void 0,void 0,(function*(){const x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Te(),signal:m.signal});let b,E;f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{b=yield fetch(x)}catch(k){throw al(k)?k:new ae(0,k.message,f.url,new Blob)}if(!b.ok){const k=yield b.blob();throw new ae(b.status,b.statusText,f.url,k)}E=f.type==="arrayBuffer"||f.type==="image"?b.arrayBuffer():f.type==="json"?b.json():b.text();const P=yield E;return m.signal.throwIfAborted(),{data:P,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}}))})(s,r);if(ln(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:ne},r)}var o;return(function(f,m){return new Promise(((x,b)=>{var E;const P=new XMLHttpRequest;P.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(P.responseType="arraybuffer");for(const k in f.headers)P.setRequestHeader(k,f.headers[k]);f.type==="json"&&(P.responseType="text",!((E=f.headers)===null||E===void 0)&&E.Accept||P.setRequestHeader("Accept","application/json")),P.withCredentials=f.credentials==="include",P.onerror=()=>{b(new Error(P.statusText))},P.onload=()=>{if(!m.signal.aborted)if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){let k=P.response;if(f.type==="json")try{k=JSON.parse(P.response)}catch(B){return void b(B)}x({data:k,cacheControl:P.getResponseHeader("Cache-Control"),expires:P.getResponseHeader("Expires")})}else{const k=new Blob([P.response],{type:P.getResponseHeader("Content-Type")});b(new ae(P.status,P.statusText,f.url,k))}},m.signal.addEventListener("abort",(()=>{P.abort(),b(new Qc(m.signal.reason))})),P.send(f.body)}))})(s,r)};function Ze(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const r=new URL(s),o=window.location;return r.protocol===o.protocol&&r.host===o.host}function qe(s,r,o){o[s]&&o[s].indexOf(r)!==-1||(o[s]=o[s]||[],o[s].push(r))}function Ne(s,r,o){if(o&&o[s]){const f=o[s].indexOf(r);f!==-1&&o[s].splice(f,1)}}class Ge{constructor(r,o={}){Ar(this,o),this.type=r}}class mt extends Ge{constructor(r,o={}){super("error",Ar({error:r},o))}}class nt{on(r,o){return this._listeners=this._listeners||{},qe(r,o,this._listeners),{unsubscribe:()=>{this.off(r,o)}}}off(r,o){return Ne(r,o,this._listeners),Ne(r,o,this._oneTimeListeners),this}once(r,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},qe(r,o,this._oneTimeListeners),this):new Promise((f=>this.once(r,f)))}fire(r,o){typeof r=="string"&&(r=new Ge(r,o||{}));const f=r.type;if(this.listens(f)){r.target=this;const m=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const E of m)E.call(this,r);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const E of x)Ne(f,E,this._oneTimeListeners),E.call(this,r);const b=this._eventedParent;b&&(Ar(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(r))}else r instanceof mt&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,o){return this._eventedParent=r,this._eventedParentData=o,this}}var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Bt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ir(s,r){const o={};for(const f in s)f!=="ref"&&(o[f]=s[f]);return Bt.forEach((f=>{f in r&&(o[f]=r[f])})),o}function Yt(s,r){if(Array.isArray(s)){if(!Array.isArray(r)||s.length!==r.length)return!1;for(let o=0;o<s.length;o++)if(!Yt(s[o],r[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&r!==null){if(typeof r!="object"||Object.keys(s).length!==Object.keys(r).length)return!1;for(const o in s)if(!Yt(s[o],r[o]))return!1;return!0}return s===r}function Jt(s,r){s.push(r)}function er(s,r,o){Jt(o,{command:"addSource",args:[s,r[s]]})}function ar(s,r,o){Jt(r,{command:"removeSource",args:[s]}),o[s]=!0}function fn(s,r,o,f){ar(s,o,f),er(s,r,o)}function On(s,r,o){let f;for(f in s[o])if(Object.prototype.hasOwnProperty.call(s[o],f)&&f!=="data"&&!Yt(s[o][f],r[o][f]))return!1;for(f in r[o])if(Object.prototype.hasOwnProperty.call(r[o],f)&&f!=="data"&&!Yt(s[o][f],r[o][f]))return!1;return!0}function wn(s,r,o,f,m,x){s=s||{},r=r||{};for(const b in s)Object.prototype.hasOwnProperty.call(s,b)&&(Yt(s[b],r[b])||o.push({command:x,args:[f,b,r[b],m]}));for(const b in r)Object.prototype.hasOwnProperty.call(r,b)&&!Object.prototype.hasOwnProperty.call(s,b)&&(Yt(s[b],r[b])||o.push({command:x,args:[f,b,r[b],m]}))}function Mi(s){return s.id}function dn(s,r){return s[r.id]=r,s}class xt{constructor(r,o,f,m){this.message=(r?`${r}: `:"")+f,m&&(this.identifier=m),o!=null&&o.__line__&&(this.line=o.__line__)}}function Or(s,...r){for(const o of r)for(const f in o)s[f]=o[f];return s}class on extends Error{constructor(r,o){super(o),this.message=o,this.key=r}}class ta{constructor(r,o=[]){this.parent=r,this.bindings={};for(const[f,m]of o)this.bindings[f]=m}concat(r){return new ta(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Fr={kind:"null"},Tt={kind:"number"},Qt={kind:"string"},hr={kind:"boolean"},Ma={kind:"color"},Sf={kind:"projectionDefinition"},Zo={kind:"object"},fr={kind:"value"},Hl={kind:"collator"},Ho={kind:"formatted"},As={kind:"padding"},Wo={kind:"colorArray"},Yo={kind:"numberArray"},In={kind:"resolvedImage"},Xu={kind:"variableAnchorOffsetCollection"};function zi(s,r){return{kind:"array",itemType:s,N:r}}function Tr(s){if(s.kind==="array"){const r=Tr(s.itemType);return typeof s.N=="number"?`array<${r}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${r}>`}return s.kind}const Ms=[Fr,Tt,Qt,hr,Ma,Sf,Ho,Zo,zi(fr),As,Yo,Wo,In,Xu];function Ku(s,r){if(r.kind==="error")return null;if(s.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ku(s.itemType,r.itemType))&&(typeof s.N!="number"||s.N===r.N))return null}else{if(s.kind===r.kind)return null;if(s.kind==="value"){for(const o of Ms)if(!Ku(o,r))return null}}return`Expected ${Tr(s)} but found ${Tr(r)} instead.`}function Qu(s,r){return r.some((o=>o.kind===s.kind))}function ol(s,r){return r.some((o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s))}function To(s,r){return s.kind==="array"&&r.kind==="array"?s.itemType.kind===r.itemType.kind&&typeof s.N=="number":s.kind===r.kind}const Jc=.96422,Xo=.82521,Qa=4/29,Ir=6/29,zd=3*Ir*Ir,hm=Ir*Ir*Ir,Wl=Math.PI/180,kd=180/Math.PI;function eh(s){return(s%=360)<0&&(s+=360),s}function fm([s,r,o,f]){let m,x;const b=th((.2225045*(s=Ui(s))+.7168786*(r=Ui(r))+.0606169*(o=Ui(o)))/1);s===r&&r===o?m=x=b:(m=th((.4360747*s+.3850649*r+.1430804*o)/Jc),x=th((.0139322*s+.0971045*r+.7141733*o)/Xo));const E=116*b-16;return[E<0?0:E,500*(m-b),200*(b-x),f]}function Ui(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function th(s){return s>hm?Math.pow(s,1/3):s/zd+Qa}function Tf([s,r,o,f]){let m=(s+16)/116,x=isNaN(r)?m:m+r/500,b=isNaN(o)?m:m-o/200;return m=1*sl(m),x=Jc*sl(x),b=Xo*sl(b),[rh(3.1338561*x-1.6168667*m-.4906146*b),rh(-.9787684*x+1.9161415*m+.033454*b),rh(.0719453*x-.2289914*m+1.4052427*b),f]}function rh(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function sl(s){return s>Ir?s*s*s:zd*(s-Qa)}const dm=Object.hasOwn||function(s,r){return Object.prototype.hasOwnProperty.call(s,r)};function Ju(s,r){return dm(s,r)?s[r]:void 0}function Ps(s){return parseInt(s.padEnd(2,s),16)/255}function pm(s,r){return Yl(r?s/100:s,0,1)}function Yl(s,r,o){return Math.min(Math.max(r,s),o)}function Ef(s){return!s.some(Number.isNaN)}const Xl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ll(s,r,o){return s+o*(r-s)}function ec(s,r,o){return s.map(((f,m)=>ll(f,r[m],o)))}class gr{constructor(r,o,f,m=1,x=!0){this.r=r,this.g=o,this.b=f,this.a=m,x||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[r,o,f,m]))}static parse(r){if(r instanceof gr)return r;if(typeof r!="string")return;const o=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Ju(Xl,f);if(m){const[b,E,P]=m;return[b/255,E/255,P/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const b=f.length<6?1:2;let E=1;return[Ps(f.slice(E,E+=b)),Ps(f.slice(E,E+=b)),Ps(f.slice(E,E+=b)),Ps(f.slice(E,E+b)||"ff")]}if(f.startsWith("rgb")){const b=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[E,P,k,B,F,Z,W,J,te,ie,ue,xe]=b,le=[B||" ",W||" ",ie].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const pe=[k,Z,te].join(""),Me=pe==="%%%"?100:pe===""?255:0;if(Me){const ke=[Yl(+P/Me,0,1),Yl(+F/Me,0,1),Yl(+J/Me,0,1),ue?pm(+ue,xe):1];if(Ef(ke))return ke}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,E,P,k,B,F,Z,W,J]=x,te=[P||" ",B||" ",Z].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){const ie=[+E,Yl(+k,0,100),Yl(+F,0,100),W?pm(+W,J):1];if(Ef(ie))return(function([ue,xe,le,pe]){function Me(ke){const We=(ke+ue/30)%12,st=xe*Math.min(le,1-le);return le-st*Math.max(-1,Math.min(We-3,9-We,1))}return ue=eh(ue),xe/=100,le/=100,[Me(0),Me(8),Me(4),pe]})(ie)}}})(r);return o?new gr(...o,!1):void 0}get rgb(){const{r,g:o,b:f,a:m}=this,x=m||1/0;return this.overwriteGetter("rgb",[r/x,o/x,f/x,m])}get hcl(){return this.overwriteGetter("hcl",(function(r){const[o,f,m,x]=fm(r),b=Math.sqrt(f*f+m*m);return[Math.round(1e4*b)?eh(Math.atan2(m,f)*kd):NaN,b,o,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",fm(this.rgb))}overwriteGetter(r,o){return Object.defineProperty(this,r,{value:o}),o}toString(){const[r,o,f,m]=this.rgb;return`rgba(${[r,o,f].map((x=>Math.round(255*x))).join(",")},${m})`}static interpolate(r,o,f,m="rgb"){switch(m){case"rgb":{const[x,b,E,P]=ec(r.rgb,o.rgb,f);return new gr(x,b,E,P,!1)}case"hcl":{const[x,b,E,P]=r.hcl,[k,B,F,Z]=o.hcl;let W,J;if(isNaN(x)||isNaN(k))isNaN(x)?isNaN(k)?W=NaN:(W=k,E!==1&&E!==0||(J=B)):(W=x,F!==1&&F!==0||(J=b));else{let le=k-x;k>x&&le>180?le-=360:k<x&&x-k>180&&(le+=360),W=x+f*le}const[te,ie,ue,xe]=(function([le,pe,Me,ke]){return le=isNaN(le)?0:le*Wl,Tf([Me,Math.cos(le)*pe,Math.sin(le)*pe,ke])})([W,J??ll(b,B,f),ll(E,F,f),ll(P,Z,f)]);return new gr(te,ie,ue,xe,!1)}case"lab":{const[x,b,E,P]=Tf(ec(r.lab,o.lab,f));return new gr(x,b,E,P,!1)}}}}gr.black=new gr(0,0,0,1),gr.white=new gr(1,1,1,1),gr.transparent=new gr(0,0,0,0),gr.red=new gr(1,0,0,1);class Eo{constructor(r,o,f){this.sensitivity=r?o?"variant":"case":o?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,o){return this.collator.compare(r,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Rd=["bottom","center","top"];class nh{constructor(r,o,f,m,x,b){this.text=r,this.image=o,this.scale=f,this.fontStack=m,this.textColor=x,this.verticalAlign=b}}class si{constructor(r){this.sections=r}static fromString(r){return new si([new nh(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((r=>r.text.length!==0||r.image&&r.image.name.length!==0))}static factory(r){return r instanceof si?r:si.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map((r=>r.text)).join("")}}class Hn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Hn)return r;if(typeof r=="number")return new Hn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const o of r)if(typeof o!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Hn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f){return new Hn(ec(r.values,o.values,f))}}class pn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof pn)return r;if(typeof r=="number")return new pn([r]);if(Array.isArray(r)){for(const o of r)if(typeof o!="number")return;return new pn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f){return new pn(ec(r.values,o.values,f))}}class tr{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof tr)return r;if(typeof r=="string"){const f=gr.parse(r);return f?new tr([f]):void 0}if(!Array.isArray(r))return;const o=[];for(const f of r){if(typeof f!="string")return;const m=gr.parse(f);if(!m)return;o.push(m)}return new tr(o)}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f,m="rgb"){const x=[];if(r.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let b=0;b<r.values.length;b++)x.push(gr.interpolate(r.values[b],o.values[b],f,m));return new tr(x)}}class Yr extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const Ja=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof zn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let o=0;o<r.length;o+=2){const f=r[o],m=r[o+1];if(typeof f!="string"||!Ja.has(f)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new zn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,o,f){const m=r.values,x=o.values;if(m.length!==x.length)throw new Yr(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${o.toString()}`);const b=[];for(let E=0;E<m.length;E+=2){if(m[E]!==x[E])throw new Yr(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${m[E]}, to[${E}]: ${x[E]}`);b.push(m[E]);const[P,k]=m[E+1],[B,F]=x[E+1];b.push([ll(P,B,f),ll(k,F,f)])}return new zn(b)}}class Vi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Vi({name:r,available:!1}):null}}class li{constructor(r,o,f){this.from=r,this.to=o,this.transition=f}static interpolate(r,o,f){return new li(r,o,f)}static parse(r){return r instanceof li?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new li(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new li(r.from,r.to,r.transition):typeof r=="string"?new li(r,r,1):void 0}}function Pa(s,r,o,f){return typeof s=="number"&&s>=0&&s<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof o=="number"&&o>=0&&o<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[s,r,o,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[s,r,o,f]:[s,r,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ko(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof li||s instanceof gr||s instanceof Eo||s instanceof si||s instanceof Hn||s instanceof pn||s instanceof tr||s instanceof zn||s instanceof Vi)return!0;if(Array.isArray(s)){for(const r of s)if(!Ko(r))return!1;return!0}if(typeof s=="object"){for(const r in s)if(!Ko(s[r]))return!1;return!0}return!1}function mn(s){if(s===null)return Fr;if(typeof s=="string")return Qt;if(typeof s=="boolean")return hr;if(typeof s=="number")return Tt;if(s instanceof gr)return Ma;if(s instanceof li)return Sf;if(s instanceof Eo)return Hl;if(s instanceof si)return Ho;if(s instanceof Hn)return As;if(s instanceof pn)return Yo;if(s instanceof tr)return Wo;if(s instanceof zn)return Xu;if(s instanceof Vi)return In;if(Array.isArray(s)){const r=s.length;let o;for(const f of s){const m=mn(f);if(o){if(o===m)continue;o=fr;break}o=m}return zi(o||fr,r)}return Zo}function ul(s){const r=typeof s;return s===null?"":r==="string"||r==="number"||r==="boolean"?String(s):s instanceof gr||s instanceof li||s instanceof si||s instanceof Hn||s instanceof pn||s instanceof tr||s instanceof zn||s instanceof Vi?s.toString():JSON.stringify(s)}class Ca{constructor(r,o){this.type=r,this.value=o}static parse(r,o){if(r.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Ko(r[1]))return o.error("invalid value");const f=r[1];let m=mn(f);const x=o.expectedType;return m.kind!=="array"||m.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(m=x),new Ca(m,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Kl={string:Qt,number:Tt,boolean:hr,object:Zo};class qi{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let f,m=1;const x=r[0];if(x==="array"){let E,P;if(r.length>2){const k=r[1];if(typeof k!="string"||!(k in Kl)||k==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);E=Kl[k],m++}else E=fr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return o.error('The length argument to "array" must be a positive integer literal',2);P=r[2],m++}f=zi(E,P)}else{if(!Kl[x])throw new Error(`Types doesn't contain name = ${x}`);f=Kl[x]}const b=[];for(;m<r.length;m++){const E=o.parse(r[m],m,fr);if(!E)return null;b.push(E)}return new qi(f,b)}evaluate(r){for(let o=0;o<this.args.length;o++){const f=this.args[o].evaluate(r);if(!Ku(this.type,mn(f)))return f;if(o===this.args.length-1)throw new Yr(`Expected value to be of type ${Tr(this.type)}, but found ${Tr(mn(f))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const ei={"to-boolean":hr,"to-color":Ma,"to-number":Tt,"to-string":Qt};class $i{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const f=r[0];if(!ei[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&r.length!==2)return o.error("Expected one argument.");const m=ei[f],x=[];for(let b=1;b<r.length;b++){const E=o.parse(r[b],b,fr);if(!E)return null;x.push(E)}return new $i(m,x)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let o,f;for(const m of this.args){if(o=m.evaluate(r),f=null,o instanceof gr)return o;if(typeof o=="string"){const x=r.parseColor(o);if(x)return x}else if(Array.isArray(o)&&(f=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:Pa(o[0],o[1],o[2],o[3]),!f))return new gr(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Yr(f||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const f of this.args){o=f.evaluate(r);const m=Hn.parse(o);if(m)return m}throw new Yr(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(const f of this.args){o=f.evaluate(r);const m=pn.parse(o);if(m)return m}throw new Yr(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(const f of this.args){o=f.evaluate(r);const m=tr.parse(o);if(m)return m}throw new Yr(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const f of this.args){o=f.evaluate(r);const m=zn.parse(o);if(m)return m}throw new Yr(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const f of this.args){if(o=f.evaluate(r),o===null)return 0;const m=Number(o);if(!isNaN(m))return m}throw new Yr(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return si.fromString(ul(this.args[0].evaluate(r)));case"resolvedImage":return Vi.fromString(ul(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return ul(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const ih=["Unknown","Point","LineString","Polygon"];class Ql{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ih[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let o=this._parseColorCache.get(r);return o||(o=gr.parse(r),this._parseColorCache.set(r,o)),o}}class Jl{constructor(r,o,f=[],m,x=new ta,b=[]){this.registry=r,this.path=f,this.key=f.map((E=>`[${E}]`)).join(""),this.scope=x,this.errors=b,this.expectedType=m,this._isConstant=o}parse(r,o,f,m,x={}){return o?this.concat(o,f,m)._parse(r,x):this._parse(r,x)}_parse(r,o){function f(m,x,b){return b==="assert"?new qi(x,[m]):b==="coerce"?new $i(x,[m]):m}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=r[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[m];if(x){let b=x.parse(r,this);if(!b)return null;if(this.expectedType){const E=this.expectedType,P=b.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||P.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(P.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(P.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(P.kind)||E.kind==="colorArray"&&["value","string","array"].includes(P.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(P.kind))b=f(b,E,o.typeAnnotation||"coerce");else if(this.checkSubtype(E,P))return null}else b=f(b,E,o.typeAnnotation||"assert")}if(!(b instanceof Ca)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const E=new Ql;try{b=new Ca(b.type,b.evaluate(E))}catch(P){return this.error(P.message),null}}return b}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,o,f){const m=typeof r=="number"?this.path.concat(r):this.path,x=f?this.scope.concat(f):this.scope;return new Jl(this.registry,this._isConstant,m,o||null,x,this.errors)}error(r,...o){const f=`${this.key}${o.map((m=>`[${m}]`)).join("")}`;this.errors.push(new on(f,r))}checkSubtype(r,o){const f=Ku(r,o);return f&&this.error(f),f}}class $r{constructor(r,o){this.type=o.type,this.bindings=[].concat(r),this.result=o}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const o of this.bindings)r(o[1]);r(this.result)}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const f=[];for(let x=1;x<r.length-1;x+=2){const b=r[x];if(typeof b!="string")return o.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return o.error("Variable names must contain only alphanumeric characters or '_'.",x);const E=o.parse(r[x+1],x+1);if(!E)return null;f.push([b,E])}const m=o.parse(r[r.length-1],r.length-1,o.expectedType,f);return m?new $r(f,m):null}outputDefined(){return this.result.outputDefined()}}class cl{constructor(r,o){this.type=o.type,this.name=r,this.boundExpression=o}static parse(r,o){if(r.length!==2||typeof r[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const f=r[1];return o.scope.has(f)?new cl(f,o.scope.get(f)):o.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class br{constructor(r,o,f){this.type=r,this.index=o,this.input=f}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,Tt),m=o.parse(r[2],2,zi(o.expectedType||fr));return f&&m?new br(m.type.itemType,f,m):null}evaluate(r){const o=this.index.evaluate(r),f=this.input.evaluate(r);if(o<0)throw new Yr(`Array index out of bounds: ${o} < 0.`);if(o>=f.length)throw new Yr(`Array index out of bounds: ${o} > ${f.length-1}.`);if(o!==Math.floor(o))throw new Yr(`Array index must be an integer, but found ${o} instead.`);return f[o]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class dr{constructor(r,o){this.type=hr,this.needle=r,this.haystack=o}static parse(r,o){if(r.length!==3)return o.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,fr),m=o.parse(r[2],2,fr);return f&&m?Qu(f.type,[hr,Qt,Tt,Fr,fr])?new dr(f,m):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(f.type)} instead`):null}evaluate(r){const o=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!f)return!1;if(!ol(o,["boolean","string","number","null"]))throw new Yr(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(mn(o))} instead.`);if(!ol(f,["string","array"]))throw new Yr(`Expected second argument to be of type array or string, but found ${Tr(mn(f))} instead.`);return f.indexOf(o)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class eu{constructor(r,o,f){this.type=Tt,this.needle=r,this.haystack=o,this.fromIndex=f}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,fr),m=o.parse(r[2],2,fr);if(!f||!m)return null;if(!Qu(f.type,[hr,Qt,Tt,Fr,fr]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(f.type)} instead`);if(r.length===4){const x=o.parse(r[3],3,Tt);return x?new eu(f,m,x):null}return new eu(f,m)}evaluate(r){const o=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!ol(o,["boolean","string","number","null"]))throw new Yr(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(mn(o))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(r)),ol(f,["string"])){const x=f.indexOf(o,m);return x===-1?-1:[...f.slice(0,x)].length}if(ol(f,["array"]))return f.indexOf(o,m);throw new Yr(`Expected second argument to be of type array or string, but found ${Tr(mn(f))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Er{constructor(r,o,f,m,x,b){this.inputType=r,this.type=o,this.input=f,this.cases=m,this.outputs=x,this.otherwise=b}static parse(r,o){if(r.length<5)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return o.error("Expected an even number of arguments.");let f,m;o.expectedType&&o.expectedType.kind!=="value"&&(m=o.expectedType);const x={},b=[];for(let k=2;k<r.length-1;k+=2){let B=r[k];const F=r[k+1];Array.isArray(B)||(B=[B]);const Z=o.concat(k);if(B.length===0)return Z.error("Expected at least one branch label.");for(const J of B){if(typeof J!="number"&&typeof J!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return Z.error("Numeric branch labels must be integer values.");if(f){if(Z.checkSubtype(f,mn(J)))return null}else f=mn(J);if(x[String(J)]!==void 0)return Z.error("Branch labels must be unique.");x[String(J)]=b.length}const W=o.parse(F,k,m);if(!W)return null;m=m||W.type,b.push(W)}const E=o.parse(r[1],1,fr);if(!E)return null;const P=o.parse(r[r.length-1],r.length-1,m);return P?E.type.kind!=="value"&&o.concat(1).checkSubtype(f,E.type)?null:new Er(f,m,E,x,b,P):null}evaluate(r){const o=this.input.evaluate(r);return(mn(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))&&this.otherwise.outputDefined()}}class ah{constructor(r,o,f){this.type=r,this.branches=o,this.otherwise=f}static parse(r,o){if(r.length<4)return o.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return o.error("Expected an odd number of arguments.");let f;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);const m=[];for(let b=1;b<r.length-1;b+=2){const E=o.parse(r[b],b,hr);if(!E)return null;const P=o.parse(r[b+1],b+1,f);if(!P)return null;m.push([E,P]),f=f||P.type}const x=o.parse(r[r.length-1],r.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new ah(f,m,x)}evaluate(r){for(const[o,f]of this.branches)if(o.evaluate(r))return f.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[o,f]of this.branches)r(o),r(f);r(this.otherwise)}outputDefined(){return this.branches.every((([r,o])=>o.outputDefined()))&&this.otherwise.outputDefined()}}class eo{constructor(r,o,f,m){this.type=r,this.input=o,this.beginIndex=f,this.endIndex=m}static parse(r,o){if(r.length<=2||r.length>=5)return o.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=o.parse(r[1],1,fr),m=o.parse(r[2],2,Tt);if(!f||!m)return null;if(!Qu(f.type,[zi(fr),Qt,fr]))return o.error(`Expected first argument to be of type array or string, but found ${Tr(f.type)} instead`);if(r.length===4){const x=o.parse(r[3],3,Tt);return x?new eo(f.type,f,m,x):null}return new eo(f.type,f,m)}evaluate(r){const o=this.input.evaluate(r),f=this.beginIndex.evaluate(r);let m;if(this.endIndex&&(m=this.endIndex.evaluate(r)),ol(o,["string"]))return[...o].slice(f,m).join("");if(ol(o,["array"]))return o.slice(f,m);throw new Yr(`Expected first argument to be of type array or string, but found ${Tr(mn(o))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function hl(s,r){const o=s.length-1;let f,m,x=0,b=o,E=0;for(;x<=b;)if(E=Math.floor((x+b)/2),f=s[E],m=s[E+1],f<=r){if(E===o||r<m)return E;x=E+1}else{if(!(f>r))throw new Yr("Input is not a number.");b=E-1}return 0}class fl{constructor(r,o,f){this.type=r,this.input=o,this.labels=[],this.outputs=[];for(const[m,x]of f)this.labels.push(m),this.outputs.push(x)}static parse(r,o){if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");const f=o.parse(r[1],1,Tt);if(!f)return null;const m=[];let x=null;o.expectedType&&o.expectedType.kind!=="value"&&(x=o.expectedType);for(let b=1;b<r.length;b+=2){const E=b===1?-1/0:r[b],P=r[b+1],k=b,B=b+1;if(typeof E!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',k);if(m.length&&m[m.length-1][0]>=E)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',k);const F=o.parse(P,B,x);if(!F)return null;x=x||F.type,m.push([E,F])}return new fl(x,f,m)}evaluate(r){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(r);const m=this.input.evaluate(r);if(m<=o[0])return f[0].evaluate(r);const x=o.length;return m>=o[x-1]?f[x-1].evaluate(r):f[hl(o,m)].evaluate(r)}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function mm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var oh,Ld,py=(function(){if(Ld)return oh;function s(r,o,f,m){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(m-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=o,this.p2x=f,this.p2y=m}return Ld=1,oh=s,s.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,o){if(o===void 0&&(o=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,m=0;m<8;m++){var x=this.sampleCurveX(f)-r;if(Math.abs(x)<o)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var E=0,P=1;for(f=r,m=0;m<20&&(x=this.sampleCurveX(f),!(Math.abs(x-r)<o));m++)r>x?E=f:P=f,f=.5*(P-E)+E;return f},solve:function(r,o){return this.sampleCurveY(this.solveCurveX(r,o))}},oh})(),jd=mm(py);class Gi{constructor(r,o,f,m,x){this.type=r,this.operator=o,this.interpolation=f,this.input=m,this.labels=[],this.outputs=[];for(const[b,E]of x)this.labels.push(b),this.outputs.push(E)}static interpolationFactor(r,o,f,m){let x=0;if(r.name==="exponential")x=Qo(o,r.base,f,m);else if(r.name==="linear")x=Qo(o,1,f,m);else if(r.name==="cubic-bezier"){const b=r.controlPoints;x=new jd(b[0],b[1],b[2],b[3]).solve(Qo(o,1,f,m))}return x}static parse(r,o){let[f,m,x,...b]=r;if(!Array.isArray(m)||m.length===0)return o.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const k=m[1];if(typeof k!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:k}}else{if(m[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const k=m.slice(1);if(k.length!==4||k.some((B=>typeof B!="number"||B<0||B>1)))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:k}}}if(r.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(x=o.parse(x,2,Tt),!x)return null;const E=[];let P=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||o.expectedType==Wo?o.expectedType&&o.expectedType.kind!=="value"&&(P=o.expectedType):P=Ma;for(let k=0;k<b.length;k+=2){const B=b[k],F=b[k+1],Z=k+3,W=k+4;if(typeof B!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(E.length&&E[E.length-1][0]>=B)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const J=o.parse(F,W,P);if(!J)return null;P=P||J.type,E.push([B,J])}return To(P,Tt)||To(P,Sf)||To(P,Ma)||To(P,As)||To(P,Yo)||To(P,Wo)||To(P,Xu)||To(P,zi(Tt))?new Gi(P,f,m,x,E):o.error(`Type ${Tr(P)} is not interpolatable.`)}evaluate(r){const o=this.labels,f=this.outputs;if(o.length===1)return f[0].evaluate(r);const m=this.input.evaluate(r);if(m<=o[0])return f[0].evaluate(r);const x=o.length;if(m>=o[x-1])return f[x-1].evaluate(r);const b=hl(o,m),E=Gi.interpolationFactor(this.interpolation,m,o[b],o[b+1]),P=f[b].evaluate(r),k=f[b+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ll(P,k,E);case"color":return gr.interpolate(P,k,E);case"padding":return Hn.interpolate(P,k,E);case"colorArray":return tr.interpolate(P,k,E);case"numberArray":return pn.interpolate(P,k,E);case"variableAnchorOffsetCollection":return zn.interpolate(P,k,E);case"array":return ec(P,k,E);case"projectionDefinition":return li.interpolate(P,k,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return gr.interpolate(P,k,E,"hcl");case"colorArray":return tr.interpolate(P,k,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return gr.interpolate(P,k,E,"lab");case"colorArray":return tr.interpolate(P,k,E,"lab")}}}eachChild(r){r(this.input);for(const o of this.outputs)r(o)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function Qo(s,r,o,f){const m=f-o,x=s-o;return m===0?0:r===1?x/m:(Math.pow(r,x)-1)/(Math.pow(r,m)-1)}const gn={color:gr.interpolate,number:ll,padding:Hn.interpolate,numberArray:pn.interpolate,colorArray:tr.interpolate,variableAnchorOffsetCollection:zn.interpolate,array:ec};class tu{constructor(r,o){this.type=r,this.args=o}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");let f=null;const m=o.expectedType;m&&m.kind!=="value"&&(f=m);const x=[];for(const E of r.slice(1)){const P=o.parse(E,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!P)return null;f=f||P.type,x.push(P)}if(!f)throw new Error("No output type");const b=m&&x.some((E=>Ku(m,E.type)));return new tu(b?fr:f,x)}evaluate(r){let o,f=null,m=0;for(const x of this.args)if(m++,f=x.evaluate(r),f&&f instanceof Vi&&!f.available&&(o||(o=f.name),f=null,m===this.args.length&&(f=o)),f!==null)break;return f}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}function sh(s,r){return s==="=="||s==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function lh(s,r,o,f){return f.compare(r,o)===0}function kn(s,r,o){const f=s!=="=="&&s!=="!=";return class QD{constructor(x,b,E){this.type=hr,this.lhs=x,this.rhs=b,this.collator=E,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");const E=x[0];let P=b.parse(x[1],1,fr);if(!P)return null;if(!sh(E,P.type))return b.concat(1).error(`"${E}" comparisons are not supported for type '${Tr(P.type)}'.`);let k=b.parse(x[2],2,fr);if(!k)return null;if(!sh(E,k.type))return b.concat(2).error(`"${E}" comparisons are not supported for type '${Tr(k.type)}'.`);if(P.type.kind!==k.type.kind&&P.type.kind!=="value"&&k.type.kind!=="value")return b.error(`Cannot compare types '${Tr(P.type)}' and '${Tr(k.type)}'.`);f&&(P.type.kind==="value"&&k.type.kind!=="value"?P=new qi(k.type,[P]):P.type.kind!=="value"&&k.type.kind==="value"&&(k=new qi(P.type,[k])));let B=null;if(x.length===4){if(P.type.kind!=="string"&&k.type.kind!=="string"&&P.type.kind!=="value"&&k.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(B=b.parse(x[3],3,Hl),!B)return null}return new QD(P,k,B)}evaluate(x){const b=this.lhs.evaluate(x),E=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const P=mn(b),k=mn(E);if(P.kind!==k.kind||P.kind!=="string"&&P.kind!=="number")throw new Yr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${P.kind}, ${k.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const P=mn(b),k=mn(E);if(P.kind!=="string"||k.kind!=="string")return r(x,b,E)}return this.collator?o(x,b,E,this.collator.evaluate(x)):r(x,b,E)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const gm=kn("==",(function(s,r,o){return r===o}),lh),Af=kn("!=",(function(s,r,o){return r!==o}),(function(s,r,o,f){return!lh(0,r,o,f)})),ym=kn("<",(function(s,r,o){return r<o}),(function(s,r,o,f){return f.compare(r,o)<0})),my=kn(">",(function(s,r,o){return r>o}),(function(s,r,o,f){return f.compare(r,o)>0})),tc=kn("<=",(function(s,r,o){return r<=o}),(function(s,r,o,f){return f.compare(r,o)<=0})),Mf=kn(">=",(function(s,r,o){return r>=o}),(function(s,r,o,f){return f.compare(r,o)>=0}));class rc{constructor(r,o,f){this.type=Hl,this.locale=f,this.caseSensitive=r,this.diacriticSensitive=o}static parse(r,o){if(r.length!==2)return o.error("Expected one argument.");const f=r[1];if(typeof f!="object"||Array.isArray(f))return o.error("Collator options argument must be an object.");const m=o.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,hr);if(!m)return null;const x=o.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,hr);if(!x)return null;let b=null;return f.locale&&(b=o.parse(f.locale,1,Qt),!b)?null:new rc(m,x,b)}evaluate(r){return new Eo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Bd{constructor(r,o,f,m,x){this.type=Qt,this.number=r,this.locale=o,this.currency=f,this.minFractionDigits=m,this.maxFractionDigits=x}static parse(r,o){if(r.length!==3)return o.error("Expected two arguments.");const f=o.parse(r[1],1,Tt);if(!f)return null;const m=r[2];if(typeof m!="object"||Array.isArray(m))return o.error("NumberFormat options argument must be an object.");let x=null;if(m.locale&&(x=o.parse(m.locale,1,Qt),!x))return null;let b=null;if(m.currency&&(b=o.parse(m.currency,1,Qt),!b))return null;let E=null;if(m["min-fraction-digits"]&&(E=o.parse(m["min-fraction-digits"],1,Tt),!E))return null;let P=null;return m["max-fraction-digits"]&&(P=o.parse(m["max-fraction-digits"],1,Tt),!P)?null:new Bd(f,x,b,E,P)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class uh{constructor(r){this.type=Ho,this.sections=r}static parse(r,o){if(r.length<2)return o.error("Expected at least one argument.");const f=r[1];if(!Array.isArray(f)&&typeof f=="object")return o.error("First argument must be an image or text section.");const m=[];let x=!1;for(let b=1;b<=r.length-1;++b){const E=r[b];if(x&&typeof E=="object"&&!Array.isArray(E)){x=!1;let P=null;if(E["font-scale"]&&(P=o.parse(E["font-scale"],1,Tt),!P))return null;let k=null;if(E["text-font"]&&(k=o.parse(E["text-font"],1,zi(Qt)),!k))return null;let B=null;if(E["text-color"]&&(B=o.parse(E["text-color"],1,Ma),!B))return null;let F=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!Rd.includes(E["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(F=o.parse(E["vertical-align"],1,Qt),!F)return null}const Z=m[m.length-1];Z.scale=P,Z.font=k,Z.textColor=B,Z.verticalAlign=F}else{const P=o.parse(r[b],1,fr);if(!P)return null;const k=P.type.kind;if(k!=="string"&&k!=="value"&&k!=="null"&&k!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,m.push({content:P,scale:null,font:null,textColor:null,verticalAlign:null})}}return new uh(m)}evaluate(r){return new si(this.sections.map((o=>{const f=o.content.evaluate(r);return mn(f)===In?new nh("",f,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(r):null):new nh(ul(f),null,o.scale?o.scale.evaluate(r):null,o.font?o.font.evaluate(r).join(","):null,o.textColor?o.textColor.evaluate(r):null,o.verticalAlign?o.verticalAlign.evaluate(r):null)})))}eachChild(r){for(const o of this.sections)r(o.content),o.scale&&r(o.scale),o.font&&r(o.font),o.textColor&&r(o.textColor),o.verticalAlign&&r(o.verticalAlign)}outputDefined(){return!1}}class nc{constructor(r){this.type=In,this.input=r}static parse(r,o){if(r.length!==2)return o.error("Expected two arguments.");const f=o.parse(r[1],1,Qt);return f?new nc(f):o.error("No image name provided.")}evaluate(r){const o=this.input.evaluate(r),f=Vi.fromString(o);return f&&r.availableImages&&(f.available=r.availableImages.indexOf(o)>-1),f}eachChild(r){r(this.input)}outputDefined(){return!1}}class ic{constructor(r){this.type=Tt,this.input=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=o.parse(r[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${Tr(f.type)} instead.`):new ic(f):null}evaluate(r){const o=this.input.evaluate(r);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Yr(`Expected value to be of type string or array, but found ${Tr(mn(o))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Un=8192;function ac(s,r){const o=(180+s[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,m=Math.pow(2,r.z);return[Math.round(o*m*Un),Math.round(f*m*Un)]}function oc(s,r){const o=Math.pow(2,r.z);return[(m=(s[0]/Un+r.x)/o,360*m-180),(f=(s[1]/Un+r.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,m}function sc(s,r){s[0]=Math.min(s[0],r[0]),s[1]=Math.min(s[1],r[1]),s[2]=Math.max(s[2],r[0]),s[3]=Math.max(s[3],r[1])}function dl(s,r){return!(s[0]<=r[0]||s[2]>=r[2]||s[1]<=r[1]||s[3]>=r[3])}function vm(s,r,o){const f=s[0]-r[0],m=s[1]-r[1],x=s[0]-o[0],b=s[1]-o[1];return f*b-x*m==0&&f*x<=0&&m*b<=0}function ch(s,r,o,f){return(m=[f[0]-o[0],f[1]-o[1]])[0]*(x=[r[0]-s[0],r[1]-s[1]])[1]-m[1]*x[0]!=0&&!(!Cf(s,r,o,f)||!Cf(o,f,s,r));var m,x}function _m(s,r,o){for(const f of o)for(let m=0;m<f.length-1;++m)if(ch(s,r,f[m],f[m+1]))return!0;return!1}function Ao(s,r,o=!1){let f=!1;for(const E of r)for(let P=0;P<E.length-1;P++){if(vm(s,E[P],E[P+1]))return o;(x=E[P])[1]>(m=s)[1]!=(b=E[P+1])[1]>m[1]&&m[0]<(b[0]-x[0])*(m[1]-x[1])/(b[1]-x[1])+x[0]&&(f=!f)}var m,x,b;return f}function Pf(s,r){for(const o of r)if(Ao(s,o))return!0;return!1}function xm(s,r){for(const o of s)if(!Ao(o,r))return!1;for(let o=0;o<s.length-1;++o)if(_m(s[o],s[o+1],r))return!1;return!0}function bm(s,r){for(const o of r)if(xm(s,o))return!0;return!1}function Cf(s,r,o,f){const m=f[0]-o[0],x=f[1]-o[1],b=(s[0]-o[0])*x-m*(s[1]-o[1]),E=(r[0]-o[0])*x-m*(r[1]-o[1]);return b>0&&E<0||b<0&&E>0}function Df(s,r,o){const f=[];for(let m=0;m<s.length;m++){const x=[];for(let b=0;b<s[m].length;b++){const E=ac(s[m][b],o);sc(r,E),x.push(E)}f.push(x)}return f}function ru(s,r,o){const f=[];for(let m=0;m<s.length;m++){const x=Df(s[m],r,o);f.push(x)}return f}function lc(s,r,o,f){if(s[0]<o[0]||s[0]>o[2]){const m=.5*f;let x=s[0]-o[0]>m?-f:o[0]-s[0]>m?f:0;x===0&&(x=s[0]-o[2]>m?-f:o[2]-s[0]>m?f:0),s[0]+=x}sc(r,s)}function wm(s,r,o,f){const m=Math.pow(2,f.z)*Un,x=[f.x*Un,f.y*Un],b=[];for(const E of s)for(const P of E){const k=[P.x+x[0],P.y+x[1]];lc(k,r,o,m),b.push(k)}return b}function hh(s,r,o,f){const m=Math.pow(2,f.z)*Un,x=[f.x*Un,f.y*Un],b=[];for(const P of s){const k=[];for(const B of P){const F=[B.x+x[0],B.y+x[1]];sc(r,F),k.push(F)}b.push(k)}if(r[2]-r[0]<=m/2){(E=r)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const P of b)for(const k of P)lc(k,r,o,m)}var E;return b}class pl{constructor(r,o){this.type=hr,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ko(r[1])){const f=r[1];if(f.type==="FeatureCollection"){const m=[];for(const x of f.features){const{type:b,coordinates:E}=x.geometry;b==="Polygon"&&m.push(E),b==="MultiPolygon"&&m.push(...E)}if(m.length)return new pl(f,{type:"MultiPolygon",coordinates:m})}else if(f.type==="Feature"){const m=f.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new pl(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new pl(f,f)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(o,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=o.canonicalID();if(f.type==="Polygon"){const E=Df(f.coordinates,x,b),P=wm(o.geometry(),m,x,b);if(!dl(m,x))return!1;for(const k of P)if(!Ao(k,E))return!1}if(f.type==="MultiPolygon"){const E=ru(f.coordinates,x,b),P=wm(o.geometry(),m,x,b);if(!dl(m,x))return!1;for(const k of P)if(!Pf(k,E))return!1}return!0})(r,this.geometries);if(r.geometryType()==="LineString")return(function(o,f){const m=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=o.canonicalID();if(f.type==="Polygon"){const E=Df(f.coordinates,x,b),P=hh(o.geometry(),m,x,b);if(!dl(m,x))return!1;for(const k of P)if(!xm(k,E))return!1}if(f.type==="MultiPolygon"){const E=ru(f.coordinates,x,b),P=hh(o.geometry(),m,x,b);if(!dl(m,x))return!1;for(const k of P)if(!bm(k,E))return!1}return!0})(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Nd=class{constructor(s=[],r=(o,f)=>o<f?-1:o>f?1:0){if(this.data=s,this.length=this.data.length,this.compare=r,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:r,compare:o}=this,f=r[s];for(;s>0;){const m=s-1>>1,x=r[m];if(o(f,x)>=0)break;r[s]=x,s=m}r[s]=f}_down(s){const{data:r,compare:o}=this,f=this.length>>1,m=r[s];for(;s<f;){let x=1+(s<<1);const b=x+1;if(b<this.length&&o(r[b],r[x])<0&&(x=b),o(r[x],m)>=0)break;r[s]=r[x],s=x}r[s]=m}};function fh(s,r,o=0,f=s.length-1,m=Fd){for(;f>o;){if(f-o>600){const P=f-o+1,k=r-o+1,B=Math.log(P),F=.5*Math.exp(2*B/3),Z=.5*Math.sqrt(B*F*(P-F)/P)*(k-P/2<0?-1:1);fh(s,r,Math.max(o,Math.floor(r-k*F/P+Z)),Math.min(f,Math.floor(r+(P-k)*F/P+Z)),m)}const x=s[r];let b=o,E=f;for(ml(s,o,r),m(s[f],x)>0&&ml(s,o,f);b<E;){for(ml(s,b,E),b++,E--;m(s[b],x)<0;)b++;for(;m(s[E],x)>0;)E--}m(s[o],x)===0?ml(s,o,E):(E++,ml(s,E,f)),E<=r&&(o=E+1),r<=E&&(f=E-1)}}function ml(s,r,o){const f=s[r];s[r]=s[o],s[o]=f}function Fd(s,r){return s<r?-1:s>r?1:0}function dh(s,r){if(s.length<=1)return[s];const o=[];let f,m;for(const x of s){const b=gy(x);b!==0&&(x.area=Math.abs(b),m===void 0&&(m=b<0),m===b<0?(f&&o.push(f),f=[x]):f.push(x))}if(f&&o.push(f),r>1)for(let x=0;x<o.length;x++)o[x].length<=r||(fh(o[x],r,1,o[x].length-1,Sm),o[x]=o[x].slice(0,r));return o}function Sm(s,r){return r.area-s.area}function gy(s){let r=0;for(let o,f,m=0,x=s.length,b=x-1;m<x;b=m++)o=s[m],f=s[b],r+=(f.x-o.x)*(o.y+f.y);return r}const Tm=1/298.257223563,ph=Tm*(2-Tm),Em=Math.PI/180;class Ud{constructor(r){const o=6378.137*Em*1e3,f=Math.cos(r*Em),m=1/(1-ph*(1-f*f)),x=Math.sqrt(m);this.kx=o*x*f,this.ky=o*x*m*(1-ph)}distance(r,o){const f=this.wrap(r[0]-o[0])*this.kx,m=(r[1]-o[1])*this.ky;return Math.sqrt(f*f+m*m)}pointOnLine(r,o){let f,m,x,b,E=1/0;for(let P=0;P<r.length-1;P++){let k=r[P][0],B=r[P][1],F=this.wrap(r[P+1][0]-k)*this.kx,Z=(r[P+1][1]-B)*this.ky,W=0;F===0&&Z===0||(W=(this.wrap(o[0]-k)*this.kx*F+(o[1]-B)*this.ky*Z)/(F*F+Z*Z),W>1?(k=r[P+1][0],B=r[P+1][1]):W>0&&(k+=F/this.kx*W,B+=Z/this.ky*W)),F=this.wrap(o[0]-k)*this.kx,Z=(o[1]-B)*this.ky;const J=F*F+Z*Z;J<E&&(E=J,f=k,m=B,x=P,b=W)}return{point:[f,m],index:x,t:Math.max(0,Math.min(1,b))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function ra(s,r){return r[0]-s[0]}function gl(s){return s[1]-s[0]+1}function to(s,r){return s[1]>=s[0]&&s[1]<r}function mh(s,r){if(s[0]>s[1])return[null,null];const o=gl(s);if(r){if(o===2)return[s,null];const m=Math.floor(o/2);return[[s[0],s[0]+m],[s[0]+m,s[1]]]}if(o===1)return[s,null];const f=Math.floor(o/2)-1;return[[s[0],s[0]+f],[s[0]+f+1,s[1]]]}function Of(s,r){if(!to(r,s.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let f=r[0];f<=r[1];++f)sc(o,s[f]);return o}function If(s){const r=[1/0,1/0,-1/0,-1/0];for(const o of s)for(const f of o)sc(r,f);return r}function gh(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function zf(s,r,o){if(!gh(s)||!gh(r))return NaN;let f=0,m=0;return s[2]<r[0]&&(f=r[0]-s[2]),s[0]>r[2]&&(f=s[0]-r[2]),s[1]>r[3]&&(m=s[1]-r[3]),s[3]<r[1]&&(m=r[1]-s[3]),o.distance([0,0],[f,m])}function ro(s,r,o){const f=o.pointOnLine(r,s);return o.distance(s,f.point)}function yh(s,r,o,f,m){const x=Math.min(ro(s,[o,f],m),ro(r,[o,f],m)),b=Math.min(ro(o,[s,r],m),ro(f,[s,r],m));return Math.min(x,b)}function vh(s,r,o,f,m){if(!to(r,s.length)||!to(f,o.length))return 1/0;let x=1/0;for(let b=r[0];b<r[1];++b){const E=s[b],P=s[b+1];for(let k=f[0];k<f[1];++k){const B=o[k],F=o[k+1];if(ch(E,P,B,F))return 0;x=Math.min(x,yh(E,P,B,F,m))}}return x}function kf(s,r,o,f,m){if(!to(r,s.length)||!to(f,o.length))return NaN;let x=1/0;for(let b=r[0];b<=r[1];++b)for(let E=f[0];E<=f[1];++E)if(x=Math.min(x,m.distance(s[b],o[E])),x===0)return x;return x}function Am(s,r,o){if(Ao(s,r,!0))return 0;let f=1/0;for(const m of r){const x=m[0],b=m[m.length-1];if(x!==b&&(f=Math.min(f,ro(s,[b,x],o)),f===0))return f;const E=o.pointOnLine(m,s);if(f=Math.min(f,o.distance(s,E.point)),f===0)return f}return f}function nu(s,r,o,f){if(!to(r,s.length))return NaN;for(let x=r[0];x<=r[1];++x)if(Ao(s[x],o,!0))return 0;let m=1/0;for(let x=r[0];x<r[1];++x){const b=s[x],E=s[x+1];for(const P of o)for(let k=0,B=P.length,F=B-1;k<B;F=k++){const Z=P[F],W=P[k];if(ch(b,E,Z,W))return 0;m=Math.min(m,yh(b,E,Z,W,f))}}return m}function iu(s,r){for(const o of s)for(const f of o)if(Ao(f,r,!0))return!0;return!1}function Vd(s,r,o,f=1/0){const m=If(s),x=If(r);if(f!==1/0&&zf(m,x,o)>=f)return f;if(dl(m,x)){if(iu(s,r))return 0}else if(iu(r,s))return 0;let b=1/0;for(const E of s)for(let P=0,k=E.length,B=k-1;P<k;B=P++){const F=E[B],Z=E[P];for(const W of r)for(let J=0,te=W.length,ie=te-1;J<te;ie=J++){const ue=W[ie],xe=W[J];if(ch(F,Z,ue,xe))return 0;b=Math.min(b,yh(F,Z,ue,xe,o))}}return b}function zr(s,r,o,f,m,x){if(!x)return;const b=zf(Of(f,x),m,o);b<r&&s.push([b,x,[0,0]])}function Jo(s,r,o,f,m,x,b){if(!x||!b)return;const E=zf(Of(f,x),Of(m,b),o);E<r&&s.push([E,x,b])}function _h(s,r,o,f,m=1/0){let x=Math.min(f.distance(s[0],o[0][0]),m);if(x===0)return x;const b=new Nd([[0,[0,s.length-1],[0,0]]],ra),E=If(o);for(;b.length>0;){const P=b.pop();if(P[0]>=x)continue;const k=P[1],B=r?50:100;if(gl(k)<=B){if(!to(k,s.length))return NaN;if(r){const F=nu(s,k,o,f);if(isNaN(F)||F===0)return F;x=Math.min(x,F)}else for(let F=k[0];F<=k[1];++F){const Z=Am(s[F],o,f);if(x=Math.min(x,Z),x===0)return 0}}else{const F=mh(k,r);zr(b,x,f,s,E,F[0]),zr(b,x,f,s,E,F[1])}}return x}function xh(s,r,o,f,m,x=1/0){let b=Math.min(x,m.distance(s[0],o[0]));if(b===0)return b;const E=new Nd([[0,[0,s.length-1],[0,o.length-1]]],ra);for(;E.length>0;){const P=E.pop();if(P[0]>=b)continue;const k=P[1],B=P[2],F=r?50:100,Z=f?50:100;if(gl(k)<=F&&gl(B)<=Z){if(!to(k,s.length)&&to(B,o.length))return NaN;let W;if(r&&f)W=vh(s,k,o,B,m),b=Math.min(b,W);else if(r&&!f){const J=s.slice(k[0],k[1]+1);for(let te=B[0];te<=B[1];++te)if(W=ro(o[te],J,m),b=Math.min(b,W),b===0)return b}else if(!r&&f){const J=o.slice(B[0],B[1]+1);for(let te=k[0];te<=k[1];++te)if(W=ro(s[te],J,m),b=Math.min(b,W),b===0)return b}else W=kf(s,k,o,B,m),b=Math.min(b,W)}else{const W=mh(k,r),J=mh(B,f);Jo(E,b,m,s,o,W[0],J[0]),Jo(E,b,m,s,o,W[0],J[1]),Jo(E,b,m,s,o,W[1],J[0]),Jo(E,b,m,s,o,W[1],J[1])}}return b}function Rf(s){return s.type==="MultiPolygon"?s.coordinates.map((r=>({type:"Polygon",coordinates:r}))):s.type==="MultiLineString"?s.coordinates.map((r=>({type:"LineString",coordinates:r}))):s.type==="MultiPoint"?s.coordinates.map((r=>({type:"Point",coordinates:r}))):[s]}class au{constructor(r,o){this.type=Tt,this.geojson=r,this.geometries=o}static parse(r,o){if(r.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Ko(r[1])){const f=r[1];if(f.type==="FeatureCollection")return new au(f,f.features.map((m=>Rf(m.geometry))).flat());if(f.type==="Feature")return new au(f,Rf(f.geometry));if("type"in f&&"coordinates"in f)return new au(f,Rf(f))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(o,f){const m=o.geometry(),x=m.flat().map((P=>oc([P.x,P.y],o.canonical)));if(m.length===0)return NaN;const b=new Ud(x[0][1]);let E=1/0;for(const P of f){switch(P.type){case"Point":E=Math.min(E,xh(x,!1,[P.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,xh(x,!1,P.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,_h(x,!1,P.coordinates,b,E))}if(E===0)return E}return E})(r,this.geometries);if(r.geometryType()==="LineString")return(function(o,f){const m=o.geometry(),x=m.flat().map((P=>oc([P.x,P.y],o.canonical)));if(m.length===0)return NaN;const b=new Ud(x[0][1]);let E=1/0;for(const P of f){switch(P.type){case"Point":E=Math.min(E,xh(x,!0,[P.coordinates],!1,b,E));break;case"LineString":E=Math.min(E,xh(x,!0,P.coordinates,!0,b,E));break;case"Polygon":E=Math.min(E,_h(x,!0,P.coordinates,b,E))}if(E===0)return E}return E})(r,this.geometries);if(r.geometryType()==="Polygon")return(function(o,f){const m=o.geometry();if(m.length===0||m[0].length===0)return NaN;const x=dh(m,0).map((P=>P.map((k=>k.map((B=>oc([B.x,B.y],o.canonical))))))),b=new Ud(x[0][0][0][1]);let E=1/0;for(const P of f)for(const k of x){switch(P.type){case"Point":E=Math.min(E,_h([P.coordinates],!1,k,b,E));break;case"LineString":E=Math.min(E,_h(P.coordinates,!0,k,b,E));break;case"Polygon":E=Math.min(E,Vd(k,P.coordinates,b,E))}if(E===0)return E}return E})(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class bh{constructor(r){this.type=fr,this.key=r}static parse(r,o){if(r.length!==2)return o.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=r[1];return f==null?o.error("Global state property must be defined."):typeof f!="string"?o.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new bh(f)}evaluate(r){var o;const f=(o=r.globals)===null||o===void 0?void 0:o.globalState;return f&&Object.keys(f).length!==0?Ju(f,this.key):null}eachChild(){}outputDefined(){return!1}}const uc={"==":gm,"!=":Af,">":my,"<":ym,">=":Mf,"<=":tc,array:qi,at:br,boolean:qi,case:ah,coalesce:tu,collator:rc,format:uh,image:nc,in:dr,"index-of":eu,interpolate:Gi,"interpolate-hcl":Gi,"interpolate-lab":Gi,length:ic,let:$r,literal:Ca,match:Er,number:qi,"number-format":Bd,object:qi,slice:eo,step:fl,string:qi,"to-boolean":$i,"to-color":$i,"to-number":$i,"to-string":$i,var:cl,within:pl,distance:au,"global-state":bh};class Da{constructor(r,o,f,m){this.name=r,this.type=o,this._evaluate=f,this.args=m}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,o){const f=r[0],m=Da.definitions[f];if(!m)return o.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(m)?m[0]:m.type,b=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=b.filter((([k])=>!Array.isArray(k)||k.length===r.length-1));let P=null;for(const[k,B]of E){P=new Jl(o.registry,Zi,o.path,null,o.scope);const F=[];let Z=!1;for(let W=1;W<r.length;W++){const J=r[W],te=Array.isArray(k)?k[W-1]:k.type,ie=P.parse(J,1+F.length,te);if(!ie){Z=!0;break}F.push(ie)}if(!Z)if(Array.isArray(k)&&k.length!==F.length)P.error(`Expected ${k.length} arguments, but found ${F.length} instead.`);else{for(let W=0;W<F.length;W++){const J=Array.isArray(k)?k[W]:k.type,te=F[W];P.concat(W+1).checkSubtype(J,te.type)}if(P.errors.length===0)return new Da(f,x,B,F)}}if(E.length===1)o.errors.push(...P.errors);else{const k=(E.length?E:b).map((([F])=>{return Z=F,Array.isArray(Z)?`(${Z.map(Tr).join(", ")})`:`(${Tr(Z.type)}...)`;var Z})).join(" | "),B=[];for(let F=1;F<r.length;F++){const Z=o.parse(r[F],1+B.length);if(!Z)return null;B.push(Tr(Z.type))}o.error(`Expected arguments of type ${k}, but found (${B.join(", ")}) instead.`)}return null}static register(r,o){Da.definitions=o;for(const f in o)r[f]=Da}}function qd(s,[r,o,f,m]){r=r.evaluate(s),o=o.evaluate(s),f=f.evaluate(s);const x=m?m.evaluate(s):1,b=Pa(r,o,f,x);if(b)throw new Yr(b);return new gr(r/255,o/255,f/255,x,!1)}function Lf(s,r){return s in r}function Oa(s,r){const o=r[s];return o===void 0?null:o}function es(s){return{type:s}}function Zi(s){if(s instanceof cl)return Zi(s.boundExpression);if(s instanceof Da&&s.name==="error"||s instanceof rc||s instanceof pl||s instanceof au||s instanceof bh)return!1;const r=s instanceof $i||s instanceof qi;let o=!0;return s.eachChild((f=>{o=r?o&&Zi(f):o&&f instanceof Ca})),!!o&&Cs(s)&&su(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Cs(s){if(s instanceof Da&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof pl||s instanceof au)return!1;let r=!0;return s.eachChild((o=>{r&&!Cs(o)&&(r=!1)})),r}function ou(s){if(s instanceof Da&&s.name==="feature-state")return!1;let r=!0;return s.eachChild((o=>{r&&!ou(o)&&(r=!1)})),r}function su(s,r){if(s instanceof Da&&r.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild((f=>{o&&!su(f,r)&&(o=!1)})),o}function wh(s){return{result:"success",value:s}}function yl(s){return{result:"error",value:s}}function no(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function $d(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function cc(s){return!!s.expression&&s.expression.interpolated}function pr(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function jf(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&mn(s)===Zo}function Ia(s){return s}function Bf(s,r){const o=s.stops&&typeof s.stops[0][0]=="object",f=o||!(o||s.property!==void 0),m=s.type||(cc(r)?"exponential":"interval"),x=(function(B){switch(B.type){case"color":return gr.parse;case"padding":return Hn.parse;case"numberArray":return pn.parse;case"colorArray":return tr.parse;default:return null}})(r);if(x&&((s=Or({},s)).stops&&(s.stops=s.stops.map((B=>[B[0],x(B[1])]))),s.default=x(s.default?s.default:r.default)),s.colorSpace&&(b=s.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var b;const E=(function(B){switch(B){case"exponential":return vl;case"interval":return Nf;case"categorical":return Mm;case"identity":return Gd;default:throw new Error(`Unknown function type "${B}"`)}})(m);let P,k;if(m==="categorical"){P=Object.create(null);for(const B of s.stops)P[B[0]]=B[1];k=typeof s.stops[0][0]}if(o){const B={},F=[];for(let J=0;J<s.stops.length;J++){const te=s.stops[J],ie=te[0].zoom;B[ie]===void 0&&(B[ie]={zoom:ie,type:s.type,property:s.property,default:s.default,stops:[]},F.push(ie)),B[ie].stops.push([te[0].value,te[1]])}const Z=[];for(const J of F)Z.push([B[J].zoom,Bf(B[J],r)]);const W={name:"linear"};return{kind:"composite",interpolationType:W,interpolationFactor:Gi.interpolationFactor.bind(void 0,W),zoomStops:Z.map((J=>J[0])),evaluate:({zoom:J},te)=>vl({stops:Z,base:s.base},r,J).evaluate(J,te)}}if(f){const B=m==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:Gi.interpolationFactor.bind(void 0,B),zoomStops:s.stops.map((F=>F[0])),evaluate:({zoom:F})=>E(s,r,F,P,k)}}return{kind:"source",evaluate(B,F){const Z=F&&F.properties?F.properties[s.property]:void 0;return Z===void 0?za(s.default,r.default):E(s,r,Z,P,k)}}}function za(s,r,o){return s!==void 0?s:r!==void 0?r:o!==void 0?o:void 0}function Mm(s,r,o,f,m){return za(typeof o===m?f[o]:void 0,s.default,r.default)}function Nf(s,r,o){if(pr(o)!=="number")return za(s.default,r.default);const f=s.stops.length;if(f===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[f-1][0])return s.stops[f-1][1];const m=hl(s.stops.map((x=>x[0])),o);return s.stops[m][1]}function vl(s,r,o){const f=s.base!==void 0?s.base:1;if(pr(o)!=="number")return za(s.default,r.default);const m=s.stops.length;if(m===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[m-1][0])return s.stops[m-1][1];const x=hl(s.stops.map((B=>B[0])),o),b=(function(B,F,Z,W){const J=W-Z,te=B-Z;return J===0?0:F===1?te/J:(Math.pow(F,te)-1)/(Math.pow(F,J)-1)})(o,f,s.stops[x][0],s.stops[x+1][0]),E=s.stops[x][1],P=s.stops[x+1][1],k=gn[r.type]||Ia;return typeof E.evaluate=="function"?{evaluate(...B){const F=E.evaluate.apply(void 0,B),Z=P.evaluate.apply(void 0,B);if(F!==void 0&&Z!==void 0)return k(F,Z,b,s.colorSpace)}}:k(E,P,b,s.colorSpace)}function Gd(s,r,o){switch(r.type){case"color":o=gr.parse(o);break;case"formatted":o=si.fromString(o.toString());break;case"resolvedImage":o=Vi.fromString(o.toString());break;case"padding":o=Hn.parse(o);break;case"colorArray":o=tr.parse(o);break;case"numberArray":o=pn.parse(o);break;default:pr(o)===r.type||r.type==="enum"&&r.values[o]||(o=void 0)}return za(o,s.default,r.default)}Da.register(uc,{error:[{kind:"error"},[Qt],(s,[r])=>{throw new Yr(r.evaluate(s))}],typeof:[Qt,[fr],(s,[r])=>Tr(mn(r.evaluate(s)))],"to-rgba":[zi(Tt,4),[Ma],(s,[r])=>{const[o,f,m,x]=r.evaluate(s).rgb;return[255*o,255*f,255*m,x]}],rgb:[Ma,[Tt,Tt,Tt],qd],rgba:[Ma,[Tt,Tt,Tt,Tt],qd],has:{type:hr,overloads:[[[Qt],(s,[r])=>Lf(r.evaluate(s),s.properties())],[[Qt,Zo],(s,[r,o])=>Lf(r.evaluate(s),o.evaluate(s))]]},get:{type:fr,overloads:[[[Qt],(s,[r])=>Oa(r.evaluate(s),s.properties())],[[Qt,Zo],(s,[r,o])=>Oa(r.evaluate(s),o.evaluate(s))]]},"feature-state":[fr,[Qt],(s,[r])=>Oa(r.evaluate(s),s.featureState||{})],properties:[Zo,[],s=>s.properties()],"geometry-type":[Qt,[],s=>s.geometryType()],id:[fr,[],s=>s.id()],zoom:[Tt,[],s=>s.globals.zoom],"heatmap-density":[Tt,[],s=>s.globals.heatmapDensity||0],elevation:[Tt,[],s=>s.globals.elevation||0],"line-progress":[Tt,[],s=>s.globals.lineProgress||0],accumulated:[fr,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Tt,es(Tt),(s,r)=>{let o=0;for(const f of r)o+=f.evaluate(s);return o}],"*":[Tt,es(Tt),(s,r)=>{let o=1;for(const f of r)o*=f.evaluate(s);return o}],"-":{type:Tt,overloads:[[[Tt,Tt],(s,[r,o])=>r.evaluate(s)-o.evaluate(s)],[[Tt],(s,[r])=>-r.evaluate(s)]]},"/":[Tt,[Tt,Tt],(s,[r,o])=>r.evaluate(s)/o.evaluate(s)],"%":[Tt,[Tt,Tt],(s,[r,o])=>r.evaluate(s)%o.evaluate(s)],ln2:[Tt,[],()=>Math.LN2],pi:[Tt,[],()=>Math.PI],e:[Tt,[],()=>Math.E],"^":[Tt,[Tt,Tt],(s,[r,o])=>Math.pow(r.evaluate(s),o.evaluate(s))],sqrt:[Tt,[Tt],(s,[r])=>Math.sqrt(r.evaluate(s))],log10:[Tt,[Tt],(s,[r])=>Math.log(r.evaluate(s))/Math.LN10],ln:[Tt,[Tt],(s,[r])=>Math.log(r.evaluate(s))],log2:[Tt,[Tt],(s,[r])=>Math.log(r.evaluate(s))/Math.LN2],sin:[Tt,[Tt],(s,[r])=>Math.sin(r.evaluate(s))],cos:[Tt,[Tt],(s,[r])=>Math.cos(r.evaluate(s))],tan:[Tt,[Tt],(s,[r])=>Math.tan(r.evaluate(s))],asin:[Tt,[Tt],(s,[r])=>Math.asin(r.evaluate(s))],acos:[Tt,[Tt],(s,[r])=>Math.acos(r.evaluate(s))],atan:[Tt,[Tt],(s,[r])=>Math.atan(r.evaluate(s))],min:[Tt,es(Tt),(s,r)=>Math.min(...r.map((o=>o.evaluate(s))))],max:[Tt,es(Tt),(s,r)=>Math.max(...r.map((o=>o.evaluate(s))))],abs:[Tt,[Tt],(s,[r])=>Math.abs(r.evaluate(s))],round:[Tt,[Tt],(s,[r])=>{const o=r.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[Tt,[Tt],(s,[r])=>Math.floor(r.evaluate(s))],ceil:[Tt,[Tt],(s,[r])=>Math.ceil(r.evaluate(s))],"filter-==":[hr,[Qt,fr],(s,[r,o])=>s.properties()[r.value]===o.value],"filter-id-==":[hr,[fr],(s,[r])=>s.id()===r.value],"filter-type-==":[hr,[Qt],(s,[r])=>s.geometryType()===r.value],"filter-<":[hr,[Qt,fr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f<m}],"filter-id-<":[hr,[fr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o<f}],"filter->":[hr,[Qt,fr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f>m}],"filter-id->":[hr,[fr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o>f}],"filter-<=":[hr,[Qt,fr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f<=m}],"filter-id-<=":[hr,[fr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o<=f}],"filter->=":[hr,[Qt,fr],(s,[r,o])=>{const f=s.properties()[r.value],m=o.value;return typeof f==typeof m&&f>=m}],"filter-id->=":[hr,[fr],(s,[r])=>{const o=s.id(),f=r.value;return typeof o==typeof f&&o>=f}],"filter-has":[hr,[fr],(s,[r])=>r.value in s.properties()],"filter-has-id":[hr,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[hr,[zi(Qt)],(s,[r])=>r.value.indexOf(s.geometryType())>=0],"filter-id-in":[hr,[zi(fr)],(s,[r])=>r.value.indexOf(s.id())>=0],"filter-in-small":[hr,[Qt,zi(fr)],(s,[r,o])=>o.value.indexOf(s.properties()[r.value])>=0],"filter-in-large":[hr,[Qt,zi(fr)],(s,[r,o])=>(function(f,m,x,b){for(;x<=b;){const E=x+b>>1;if(m[E]===f)return!0;m[E]>f?b=E-1:x=E+1}return!1})(s.properties()[r.value],o.value,0,o.value.length-1)],all:{type:hr,overloads:[[[hr,hr],(s,[r,o])=>r.evaluate(s)&&o.evaluate(s)],[es(hr),(s,r)=>{for(const o of r)if(!o.evaluate(s))return!1;return!0}]]},any:{type:hr,overloads:[[[hr,hr],(s,[r,o])=>r.evaluate(s)||o.evaluate(s)],[es(hr),(s,r)=>{for(const o of r)if(o.evaluate(s))return!0;return!1}]]},"!":[hr,[hr],(s,[r])=>!r.evaluate(s)],"is-supported-script":[hr,[Qt],(s,[r])=>{const o=s.globals&&s.globals.isSupportedScript;return!o||o(r.evaluate(s))}],upcase:[Qt,[Qt],(s,[r])=>r.evaluate(s).toUpperCase()],downcase:[Qt,[Qt],(s,[r])=>r.evaluate(s).toLowerCase()],concat:[Qt,es(fr),(s,r)=>r.map((o=>ul(o.evaluate(s)))).join("")],"resolved-locale":[Qt,[Hl],(s,[r])=>r.evaluate(s).resolvedLocale()]});class Ff{constructor(r,o,f){this.expression=r,this._warningHistory={},this._evaluator=new Ql,this._defaultValue=o?(function(m){if(m.type==="color"&&jf(m.default))return new gr(0,0,0,0);switch(m.type){case"color":return gr.parse(m.default)||null;case"padding":return Hn.parse(m.default)||null;case"numberArray":return pn.parse(m.default)||null;case"colorArray":return tr.parse(m.default)||null;case"variableAnchorOffsetCollection":return zn.parse(m.default)||null;case"projectionDefinition":return li.parse(m.default)||null;default:return m.default===void 0?null:m.default}})(o):null,this._enumValues=o&&o.type==="enum"?o.values:null,this._globalState=f}evaluateWithoutErrorHandling(r,o,f,m,x,b){return this._globalState&&(r=di(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=o,this._evaluator.featureState=f,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(r,o,f,m,x,b){this._globalState&&(r=di(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=o||null,this._evaluator.featureState=f||null,this._evaluator.canonical=m,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Yr(`Expected value to be one of ${Object.keys(this._enumValues).map((P=>JSON.stringify(P))).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function _l(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in uc}function hc(s,r,o){const f=new Jl(uc,Zi,[],r?(function(x){const b={color:Ma,string:Qt,number:Tt,enum:Qt,boolean:hr,formatted:Ho,padding:As,numberArray:Yo,colorArray:Wo,projectionDefinition:Sf,resolvedImage:In,variableAnchorOffsetCollection:Xu};return x.type==="array"?zi(b[x.value]||fr,x.length):b[x.type]})(r):void 0),m=f.parse(s,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?wh(new Ff(m,r,o)):yl(f.errors)}class Hi{constructor(r,o,f){this.kind=r,this._styleExpression=o,this.isStateDependent=r!=="constant"&&!ou(o.expression),this.globalStateRefs=ui(o.expression),this._globalState=f}evaluateWithoutErrorHandling(r,o,f,m,x,b){return this._globalState&&(r=di(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,o,f,m,x,b)}evaluate(r,o,f,m,x,b){return this._globalState&&(r=di(r,this._globalState)),this._styleExpression.evaluate(r,o,f,m,x,b)}}class xl{constructor(r,o,f,m,x){this.kind=r,this.zoomStops=f,this._styleExpression=o,this.isStateDependent=r!=="camera"&&!ou(o.expression),this.globalStateRefs=ui(o.expression),this.interpolationType=m,this._globalState=x}evaluateWithoutErrorHandling(r,o,f,m,x,b){return this._globalState&&(r=di(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,o,f,m,x,b)}evaluate(r,o,f,m,x,b){return this._globalState&&(r=di(r,this._globalState)),this._styleExpression.evaluate(r,o,f,m,x,b)}interpolationFactor(r,o,f){return this.interpolationType?Gi.interpolationFactor(this.interpolationType,r,o,f):0}}function bl(s,r,o){const f=hc(s,r,o);if(f.result==="error")return f;const m=f.value.expression,x=Cs(m);if(!x&&!no(r))return yl([new on("","data expressions not supported")]);const b=su(m,["zoom"]);if(!b&&!$d(r))return yl([new on("","zoom expressions not supported")]);const E=wl(m);return E||b?E instanceof on?yl([E]):E instanceof Gi&&!cc(r)?yl([new on("",'"interpolate" expressions cannot be used with this property')]):wh(E?new xl(x?"camera":"composite",f.value,E.labels,E instanceof Gi?E.interpolation:void 0,o):new Hi(x?"constant":"source",f.value,o)):yl([new on("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class lu{constructor(r,o){this._parameters=r,this._specification=o,Or(this,Bf(this._parameters,this._specification))}static deserialize(r){return new lu(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function wl(s){let r=null;if(s instanceof $r)r=wl(s.result);else if(s instanceof tu){for(const o of s.args)if(r=wl(o),r)break}else(s instanceof fl||s instanceof Gi)&&s.input instanceof Da&&s.input.name==="zoom"&&(r=s);return r instanceof on||s.eachChild((o=>{const f=wl(o);f instanceof on?r=f:!r&&f?r=new on("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&f&&r!==f&&(r=new on("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r}function ui(s,r=new Set){return s instanceof bh&&r.add(s.key),s.eachChild((o=>{ui(o,r)})),r}function di(s,r){const{zoom:o,heatmapDensity:f,elevation:m,lineProgress:x,isSupportedScript:b,accumulated:E}=s??{};return{zoom:o,heatmapDensity:f,elevation:m,lineProgress:x,isSupportedScript:b,accumulated:E,globalState:r}}function ts(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const r of s.slice(1))if(!ts(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const rs={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function na(s,r){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ts(s)||(s=uu(s));const o=hc(s,rs,r);if(o.result==="error")throw new Error(o.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,m,x)=>o.value.evaluate(f,m,{},x),needGeometry:Zd(s),getGlobalStateRefs:()=>ui(o.value.expression)}}function Ds(s,r){return s<r?-1:s>r?1:0}function Zd(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let r=1;r<s.length;r++)if(Zd(s[r]))return!0;return!1}function uu(s){if(!s)return!0;const r=s[0];return s.length<=1?r!=="any":r==="=="?fc(s[1],s[2],"=="):r==="!="?Xr(fc(s[1],s[2],"==")):r==="<"||r===">"||r==="<="||r===">="?fc(s[1],s[2],r):r==="any"?(o=s.slice(1),["any"].concat(o.map(uu))):r==="all"?["all"].concat(s.slice(1).map(uu)):r==="none"?["all"].concat(s.slice(1).map(uu).map(Xr)):r==="in"?Hd(s[1],s.slice(2)):r==="!in"?Xr(Hd(s[1],s.slice(2))):r==="has"?pi(s[1]):r!=="!has"||Xr(pi(s[1]));var o}function fc(s,r,o){switch(s){case"$type":return[`filter-type-${o}`,r];case"$id":return[`filter-id-${o}`,r];default:return[`filter-${o}`,s,r]}}function Hd(s,r){if(r.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some((o=>typeof o!=typeof r[0]))?["filter-in-large",s,["literal",r.sort(Ds)]]:["filter-in-small",s,["literal",r]]}}function pi(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Xr(s){return["!",s]}function Sr(s){const r=typeof s;if(r==="number"||r==="boolean"||r==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let m="[";for(const x of s)m+=`${Sr(x)},`;return`${m}]`}const o=Object.keys(s).sort();let f="{";for(let m=0;m<o.length;m++)f+=`${JSON.stringify(o[m])}:${Sr(s[o[m]])},`;return`${f}}`}function Os(s){let r="";for(const o of Bt)r+=`/${Sr(s[o])}`;return r}function ka(s){const r=s.value;return r?[new xt(s.key,r,"constants have been deprecated as of v8")]:[]}function Sn(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function ia(s){if(Array.isArray(s))return s.map(ia);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const r={};for(const o in s)r[o]=ia(s[o]);return r}return Sn(s)}function aa(s){const r=s.key,o=s.value,f=s.valueSpec||{},m=s.objectElementValidators||{},x=s.style,b=s.styleSpec,E=s.validateSpec;let P=[];const k=pr(o);if(k!=="object")return[new xt(r,o,`object expected, ${k} found`)];for(const B in o){const F=B.split(".")[0],Z=Ju(f,F)||f["*"];let W;if(Ju(m,F))W=m[F];else if(Ju(f,F)){if(o[B]===void 0)continue;W=E}else if(m["*"])W=m["*"];else{if(!f["*"]){P.push(new xt(r,o[B],`unknown property "${B}"`));continue}W=E}P=P.concat(W({key:(r&&`${r}.`)+B,value:o[B],valueSpec:Z,style:x,styleSpec:b,object:o,objectKey:B,validateSpec:E},o))}for(const B in f)m[B]||f[B].required&&f[B].default===void 0&&o[B]===void 0&&P.push(new xt(r,o,`missing required property "${B}"`));return P}function Sh(s){const r=s.value,o=s.valueSpec,f=s.style,m=s.styleSpec,x=s.key,b=s.arrayElementValidator||s.validateSpec;if(pr(r)!=="array")return[new xt(x,r,`array expected, ${pr(r)} found`)];if(o.length&&r.length!==o.length)return[new xt(x,r,`array length ${o.length} expected, length ${r.length} found`)];let E={type:o.value,values:o.values};m.$version<7&&(E.function=o.function),pr(o.value)==="object"&&(E=o.value);let P=[];for(let k=0;k<r.length;k++)P=P.concat(b({array:r,arrayIndex:k,value:r[k],valueSpec:E,validateSpec:s.validateSpec,style:f,styleSpec:m,key:`${x}[${k}]`}));return P}function ns(s){const r=s.key,o=s.value,f=s.valueSpec;let m=pr(o);return m==="number"&&o!=o&&(m="NaN"),m!=="number"?[new xt(r,o,`number expected, ${m} found`)]:"minimum"in f&&o<f.minimum?[new xt(r,o,`${o} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&o>f.maximum?[new xt(r,o,`${o} is greater than the maximum value ${f.maximum}`)]:[]}function is(s){const r=s.valueSpec,o=Sn(s.value.type);let f,m,x,b={};const E=o!=="categorical"&&s.value.property===void 0,P=!E,k=pr(s.value.stops)==="array"&&pr(s.value.stops[0])==="array"&&pr(s.value.stops[0][0])==="object",B=aa({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(W){if(o==="identity")return[new xt(W.key,W.value,'identity function may not have a "stops" property')];let J=[];const te=W.value;return J=J.concat(Sh({key:W.key,value:te,valueSpec:W.valueSpec,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,arrayElementValidator:F})),pr(te)==="array"&&te.length===0&&J.push(new xt(W.key,te,"array must have at least one stop")),J},default:function(W){return W.validateSpec({key:W.key,value:W.value,valueSpec:r,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec})}}});return o==="identity"&&E&&B.push(new xt(s.key,s.value,'missing required property "property"')),o==="identity"||s.value.stops||B.push(new xt(s.key,s.value,'missing required property "stops"')),o==="exponential"&&s.valueSpec.expression&&!cc(s.valueSpec)&&B.push(new xt(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(P&&!no(s.valueSpec)?B.push(new xt(s.key,s.value,"property functions not supported")):E&&!$d(s.valueSpec)&&B.push(new xt(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!k||s.value.property!==void 0||B.push(new xt(s.key,s.value,'"property" property is required')),B;function F(W){let J=[];const te=W.value,ie=W.key;if(pr(te)!=="array")return[new xt(ie,te,`array expected, ${pr(te)} found`)];if(te.length!==2)return[new xt(ie,te,`array length 2 expected, length ${te.length} found`)];if(k){if(pr(te[0])!=="object")return[new xt(ie,te,`object expected, ${pr(te[0])} found`)];if(te[0].zoom===void 0)return[new xt(ie,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new xt(ie,te,"object stop key must have value")];if(x&&x>Sn(te[0].zoom))return[new xt(ie,te[0].zoom,"stop zoom values must appear in ascending order")];Sn(te[0].zoom)!==x&&(x=Sn(te[0].zoom),m=void 0,b={}),J=J.concat(aa({key:`${ie}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec,objectElementValidators:{zoom:ns,value:Z}}))}else J=J.concat(Z({key:`${ie}[0]`,value:te[0],validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec},te));return _l(ia(te[1]))?J.concat([new xt(`${ie}[1]`,te[1],"expressions are not allowed in function stops.")]):J.concat(W.validateSpec({key:`${ie}[1]`,value:te[1],valueSpec:r,validateSpec:W.validateSpec,style:W.style,styleSpec:W.styleSpec}))}function Z(W,J){const te=pr(W.value),ie=Sn(W.value),ue=W.value!==null?W.value:J;if(f){if(te!==f)return[new xt(W.key,ue,`${te} stop domain type must match previous stop domain type ${f}`)]}else f=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new xt(W.key,ue,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&o!=="categorical"){let xe=`number expected, ${te} found`;return no(r)&&o===void 0&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt(W.key,ue,xe)]}return o!=="categorical"||te!=="number"||isFinite(ie)&&Math.floor(ie)===ie?o!=="categorical"&&te==="number"&&m!==void 0&&ie<m?[new xt(W.key,ue,"stop domain values must appear in ascending order")]:(m=ie,o==="categorical"&&ie in b?[new xt(W.key,ue,"stop domain values must be unique")]:(b[ie]=!0,[])):[new xt(W.key,ue,`integer expected, found ${ie}`)]}}function as(s){const r=(s.expressionContext==="property"?bl:hc)(ia(s.value),s.valueSpec);if(r.result==="error")return r.value.map((f=>new xt(`${s.key}${f.key}`,s.value,f.message)));const o=r.value.expression||r.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new xt(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ou(o))return[new xt(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!ou(o))return[new xt(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!su(o,["zoom","feature-state"]))return[new xt(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Cs(o))return[new xt(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Is(s){const r=s.key,o=s.value,f=pr(o);return f!=="string"?[new xt(r,o,`color expected, ${f} found`)]:gr.parse(String(o))?[]:[new xt(r,o,`color expected, "${o}" found`)]}function zs(s){const r=s.key,o=s.value,f=s.valueSpec,m=[];return Array.isArray(f.values)?f.values.indexOf(Sn(o))===-1&&m.push(new xt(r,o,`expected one of [${f.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(f.values).indexOf(Sn(o))===-1&&m.push(new xt(r,o,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(o)} found`)),m}function io(s){return ts(ia(s.value))?as(Or({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):os(s)}function os(s){const r=s.value,o=s.key;if(pr(r)!=="array")return[new xt(o,r,`array expected, ${pr(r)} found`)];const f=s.styleSpec;let m,x=[];if(r.length<1)return[new xt(o,r,"filter array must have at least 1 element")];switch(x=x.concat(zs({key:`${o}[0]`,value:r[0],valueSpec:f.filter_operator,style:s.style,styleSpec:s.styleSpec})),Sn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Sn(r[1])==="$type"&&x.push(new xt(o,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&x.push(new xt(o,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(m=pr(r[1]),m!=="string"&&x.push(new xt(`${o}[1]`,r[1],`string expected, ${m} found`)));for(let b=2;b<r.length;b++)m=pr(r[b]),Sn(r[1])==="$type"?x=x.concat(zs({key:`${o}[${b}]`,value:r[b],valueSpec:f.geometry_type,style:s.style,styleSpec:s.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&x.push(new xt(`${o}[${b}]`,r[b],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let b=1;b<r.length;b++)x=x.concat(os({key:`${o}[${b}]`,value:r[b],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":m=pr(r[1]),r.length!==2?x.push(new xt(o,r,`filter array for "${r[0]}" operator must have 2 elements`)):m!=="string"&&x.push(new xt(`${o}[1]`,r[1],`string expected, ${m} found`))}return x}function ks(s,r){const o=s.key,f=s.validateSpec,m=s.style,x=s.styleSpec,b=s.value,E=s.objectKey,P=x[`${r}_${s.layerType}`];if(!P)return[];const k=E.match(/^(.*)-transition$/);if(r==="paint"&&k&&P[k[1]]&&P[k[1]].transition)return f({key:o,value:b,valueSpec:x.transition,style:m,styleSpec:x});const B=s.valueSpec||P[E];if(!B)return[new xt(o,b,`unknown property "${E}"`)];let F;if(pr(b)==="string"&&no(B)&&!B.tokens&&(F=/^{([^}]+)}$/.exec(b)))return[new xt(o,b,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(F[1])} }\`.`)];const Z=[];return s.layerType==="symbol"&&E==="text-font"&&jf(ia(b))&&Sn(b.type)==="identity"&&Z.push(new xt(o,b,'"text-font" does not support identity functions')),Z.concat(f({key:s.key,value:b,valueSpec:B,style:m,styleSpec:x,expressionContext:"property",propertyType:r,propertyKey:E}))}function ss(s){return ks(s,"paint")}function Uf(s){return ks(s,"layout")}function Vf(s){let r=[];const o=s.value,f=s.key,m=s.style,x=s.styleSpec;if(pr(o)!=="object")return[new xt(f,o,`object expected, ${pr(o)} found`)];o.type||o.ref||r.push(new xt(f,o,'either "type" or "ref" is required'));let b=Sn(o.type);const E=Sn(o.ref);if(o.id){const P=Sn(o.id);for(let k=0;k<s.arrayIndex;k++){const B=m.layers[k];Sn(B.id)===P&&r.push(new xt(f,o.id,`duplicate layer id "${o.id}", previously used at line ${B.id.__line__}`))}}if("ref"in o){let P;["type","source","source-layer","filter","layout"].forEach((k=>{k in o&&r.push(new xt(f,o[k],`"${k}" is prohibited for ref layers`))})),m.layers.forEach((k=>{Sn(k.id)===E&&(P=k)})),P?P.ref?r.push(new xt(f,o.ref,"ref cannot reference another ref layer")):b=Sn(P.type):r.push(new xt(f,o.ref,`ref layer "${E}" not found`))}else if(b!=="background")if(o.source){const P=m.sources&&m.sources[o.source],k=P&&Sn(P.type);P?k==="vector"&&b==="raster"?r.push(new xt(f,o.source,`layer "${o.id}" requires a raster source`)):k!=="raster-dem"&&b==="hillshade"||k!=="raster-dem"&&b==="color-relief"?r.push(new xt(f,o.source,`layer "${o.id}" requires a raster-dem source`)):k==="raster"&&b!=="raster"?r.push(new xt(f,o.source,`layer "${o.id}" requires a vector source`)):k!=="vector"||o["source-layer"]?k==="raster-dem"&&b!=="hillshade"&&b!=="color-relief"?r.push(new xt(f,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):b!=="line"||!o.paint||!o.paint["line-gradient"]||k==="geojson"&&P.lineMetrics||r.push(new xt(f,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new xt(f,o,`layer "${o.id}" must specify a "source-layer"`)):r.push(new xt(f,o.source,`source "${o.source}" not found`))}else r.push(new xt(f,o,'missing required property "source"'));return r=r.concat(aa({key:f,value:o,valueSpec:x.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${f}.type`,value:o.type,valueSpec:x.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:io,layout:P=>aa({layer:o,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":k=>Uf(Or({layerType:b},k))}}),paint:P=>aa({layer:o,key:P.key,value:P.value,style:P.style,styleSpec:P.styleSpec,validateSpec:P.validateSpec,objectElementValidators:{"*":k=>ss(Or({layerType:b},k))}})}})),r}function Ra(s){const r=s.value,o=s.key,f=pr(r);return f!=="string"?[new xt(o,r,`string expected, ${f} found`)]:[]}const dc={promoteId:function({key:s,value:r}){if(pr(r)==="string")return Ra({key:s,value:r});{const o=[];for(const f in r)o.push(...Ra({key:`${s}.${f}`,value:r[f]}));return o}}};function Rs(s){const r=s.value,o=s.key,f=s.styleSpec,m=s.style,x=s.validateSpec;if(!r.type)return[new xt(o,r,'"type" is required')];const b=Sn(r.type);let E;switch(b){case"vector":case"raster":return E=aa({key:o,value:r,valueSpec:f[`source_${b.replace("-","_")}`],style:s.style,styleSpec:f,objectElementValidators:dc,validateSpec:x}),E;case"raster-dem":return E=(function(P){var k;const B=(k=P.sourceName)!==null&&k!==void 0?k:"",F=P.value,Z=P.styleSpec,W=Z.source_raster_dem,J=P.style;let te=[];const ie=pr(F);if(F===void 0)return te;if(ie!=="object")return te.push(new xt("source_raster_dem",F,`object expected, ${ie} found`)),te;const ue=Sn(F.encoding)==="custom",xe=["redFactor","greenFactor","blueFactor","baseShift"],le=P.value.encoding?`"${P.value.encoding}"`:"Default";for(const pe in F)!ue&&xe.includes(pe)?te.push(new xt(pe,F[pe],`In "${B}": "${pe}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):W[pe]?te=te.concat(P.validateSpec({key:pe,value:F[pe],valueSpec:W[pe],validateSpec:P.validateSpec,style:J,styleSpec:Z})):te.push(new xt(pe,F[pe],`unknown property "${pe}"`));return te})({sourceName:o,value:r,style:s.style,styleSpec:f,validateSpec:x}),E;case"geojson":if(E=aa({key:o,value:r,valueSpec:f.source_geojson,style:m,styleSpec:f,validateSpec:x,objectElementValidators:dc}),r.cluster)for(const P in r.clusterProperties){const[k,B]=r.clusterProperties[P],F=typeof k=="string"?[k,["accumulated"],["get",P]]:k;E.push(...as({key:`${o}.${P}.map`,value:B,expressionContext:"cluster-map"})),E.push(...as({key:`${o}.${P}.reduce`,value:F,expressionContext:"cluster-reduce"}))}return E;case"video":return aa({key:o,value:r,valueSpec:f.source_video,style:m,validateSpec:x,styleSpec:f});case"image":return aa({key:o,value:r,valueSpec:f.source_image,style:m,validateSpec:x,styleSpec:f});case"canvas":return[new xt(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return zs({key:`${o}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Wn(s){const r=s.value,o=s.styleSpec,f=o.light,m=s.style;let x=[];const b=pr(r);if(r===void 0)return x;if(b!=="object")return x=x.concat([new xt("light",r,`object expected, ${b} found`)]),x;for(const E in r){const P=E.match(/^(.*)-transition$/);x=x.concat(P&&f[P[1]]&&f[P[1]].transition?s.validateSpec({key:E,value:r[E],valueSpec:o.transition,validateSpec:s.validateSpec,style:m,styleSpec:o}):f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],validateSpec:s.validateSpec,style:m,styleSpec:o}):[new xt(E,r[E],`unknown property "${E}"`)])}return x}function Th(s){const r=s.value,o=s.styleSpec,f=o.sky,m=s.style,x=pr(r);if(r===void 0)return[];if(x!=="object")return[new xt("sky",r,`object expected, ${x} found`)];let b=[];for(const E in r)b=b.concat(f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],style:m,styleSpec:o}):[new xt(E,r[E],`unknown property "${E}"`)]);return b}function qf(s){const r=s.value,o=s.styleSpec,f=o.terrain,m=s.style;let x=[];const b=pr(r);if(r===void 0)return x;if(b!=="object")return x=x.concat([new xt("terrain",r,`object expected, ${b} found`)]),x;for(const E in r)x=x.concat(f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],validateSpec:s.validateSpec,style:m,styleSpec:o}):[new xt(E,r[E],`unknown property "${E}"`)]);return x}function Wd(s){let r=[];const o=s.value,f=s.key;if(Array.isArray(o)){const m=[],x=[];for(const b in o)o[b].id&&m.includes(o[b].id)&&r.push(new xt(f,o,`all the sprites' ids must be unique, but ${o[b].id} is duplicated`)),m.push(o[b].id),o[b].url&&x.includes(o[b].url)&&r.push(new xt(f,o,`all the sprites' URLs must be unique, but ${o[b].url} is duplicated`)),x.push(o[b].url),r=r.concat(aa({key:`${f}[${b}]`,value:o[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return r}return Ra({key:f,value:o})}function Pm(s){return!!s&&s.constructor===Object}function Yd(s){return Pm(s.value)?[]:[new xt(s.key,s.value,`object expected, ${pr(s.value)} found`)]}const Vn={"*":()=>[],array:Sh,boolean:function(s){const r=s.value,o=s.key,f=pr(r);return f!=="boolean"?[new xt(o,r,`boolean expected, ${f} found`)]:[]},number:ns,color:Is,constants:ka,enum:zs,filter:io,function:is,layer:Vf,object:aa,source:Rs,light:Wn,sky:Th,terrain:qf,projection:function(s){const r=s.value,o=s.styleSpec,f=o.projection,m=s.style,x=pr(r);if(r===void 0)return[];if(x!=="object")return[new xt("projection",r,`object expected, ${x} found`)];let b=[];for(const E in r)b=b.concat(f[E]?s.validateSpec({key:E,value:r[E],valueSpec:f[E],style:m,styleSpec:o}):[new xt(E,r[E],`unknown property "${E}"`)]);return b},projectionDefinition:function(s){const r=s.key;let o=s.value;o=o instanceof String?o.valueOf():o;const f=pr(o);return f!=="array"||(function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"})(o)||(function(m){return!!["interpolate","step","literal"].includes(m[0])})(o)?["array","string"].includes(f)?[]:[new xt(r,o,`projection expected, invalid type "${f}" found`)]:[new xt(r,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:Ra,formatted:function(s){return Ra(s).length===0?[]:as(s)},resolvedImage:function(s){return Ra(s).length===0?[]:as(s)},padding:function(s){const r=s.key,o=s.value;if(pr(o)==="array"){if(o.length<1||o.length>4)return[new xt(r,o,`padding requires 1 to 4 values; ${o.length} values found`)];const f={type:"number"};let m=[];for(let x=0;x<o.length;x++)m=m.concat(s.validateSpec({key:`${r}[${x}]`,value:o[x],validateSpec:s.validateSpec,valueSpec:f}));return m}return ns({key:r,value:o,valueSpec:{}})},numberArray:function(s){const r=s.key,o=s.value;if(pr(o)==="array"){const f={type:"number"};if(o.length<1)return[new xt(r,o,"array length at least 1 expected, length 0 found")];let m=[];for(let x=0;x<o.length;x++)m=m.concat(s.validateSpec({key:`${r}[${x}]`,value:o[x],validateSpec:s.validateSpec,valueSpec:f}));return m}return ns({key:r,value:o,valueSpec:{}})},colorArray:function(s){const r=s.key,o=s.value;if(pr(o)==="array"){if(o.length<1)return[new xt(r,o,"array length at least 1 expected, length 0 found")];let f=[];for(let m=0;m<o.length;m++)f=f.concat(Is({key:`${r}[${m}]`,value:o[m]}));return f}return Is({key:r,value:o})},variableAnchorOffsetCollection:function(s){const r=s.key,o=s.value,f=pr(o),m=s.styleSpec;if(f!=="array"||o.length<1||o.length%2!=0)return[new xt(r,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let b=0;b<o.length;b+=2)x=x.concat(zs({key:`${r}[${b}]`,value:o[b],valueSpec:m.layout_symbol["text-anchor"]})),x=x.concat(Sh({key:`${r}[${b+1}]`,value:o[b+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:m}));return x},sprite:Wd,state:Yd,fontFaces:function(s){const r=s.key,o=s.value,f=s.validateSpec,m=s.styleSpec,x=s.style;if(!Pm(o))return[new xt(r,o,`object expected, ${pr(o)} found`)];const b=[];for(const E in o){const P=o[E],k=pr(P);if(k==="string")b.push(...Ra({key:`${r}.${E}`,value:P}));else if(k==="array"){const B={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[F,Z]of P.entries())b.push(...aa({key:`${r}.${E}[${F}]`,value:Z,valueSpec:B,styleSpec:m,style:x,validateSpec:f}))}else b.push(new xt(`${r}.${E}`,P,`string or array expected, ${k} found`))}return b}};function ls(s){const r=s.value,o=s.valueSpec,f=s.styleSpec;return s.validateSpec=ls,o.expression&&jf(Sn(r))?is(s):o.expression&&_l(ia(r))?as(s):o.type&&Vn[o.type]?Vn[o.type](s):aa(Or({},s,{valueSpec:o.type?f[o.type]:o}))}function pc(s){const r=s.value,o=s.key,f=Ra(s);return f.length||(r.indexOf("{fontstack}")===-1&&f.push(new xt(o,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&f.push(new xt(o,r,'"glyphs" url must include a "{range}" token'))),f}function ki(s,r=De){let o=[];return o=o.concat(ls({key:"",value:s,valueSpec:r.$root,styleSpec:r,style:s,validateSpec:ls,objectElementValidators:{glyphs:pc,"*":()=>[]}})),s.constants&&(o=o.concat(ka({key:"constants",value:s.constants}))),cu(o)}function La(s){return function(r){return s(Object.assign({},r,{validateSpec:ls}))}}function cu(s){return[].concat(s).sort(((r,o)=>r.line-o.line))}function Ri(s){return function(...r){return cu(s.apply(this,r))}}ki.source=Ri(La(Rs)),ki.sprite=Ri(La(Wd)),ki.glyphs=Ri(La(pc)),ki.light=Ri(La(Wn)),ki.sky=Ri(La(Th)),ki.terrain=Ri(La(qf)),ki.state=Ri(La(Yd)),ki.layer=Ri(La(Vf)),ki.filter=Ri(La(io)),ki.paintProperty=Ri(La(ss)),ki.layoutProperty=Ri(La(Uf));const yy={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class mc{constructor(r,o){this._globalState=o,this.setValue(r)}evaluate(){var r;return(r=this._literalValue)!==null&&r!==void 0?r:this._compiledValue.evaluate({})}setValue(r){if(r==null||r==="visible"||r==="none")return this._literalValue=r==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const o=hc(r,yy,this._globalState);if(o.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(o.value.map((f=>`${f.key}: ${f.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=o.value,this._globalStateRefs=ui(o.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Eh=De,ci=ki,Mo=ci.light,$f=ci.sky,Gf=ci.paintProperty,Cm=ci.layoutProperty;function Po(s,r){let o=!1;if(r&&r.length)for(const f of r)s.fire(new mt(new Error(f.message))),o=!0;return o}class Sl{constructor(r,o,f){const m=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const b=new Int32Array(this.arrayBuffer);r=b[0],this.d=(o=b[1])+2*(f=b[2]);for(let P=0;P<this.d*this.d;P++){const k=b[3+P],B=b[3+P+1];m.push(k===B?null:b.subarray(k,B))}const E=b[3+m.length+1];this.keys=b.subarray(b[3+m.length],E),this.bboxes=b.subarray(E),this.insert=this._insertReadonly}else{this.d=o+2*f;for(let b=0;b<this.d*this.d;b++)m.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=r,this.padding=f,this.scale=o/r,this.uid=0;const x=f/o*r;this.min=-x,this.max=r+x}insert(r,o,f,m,x){this._forEachCell(o,f,m,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(o),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,o,f,m,x,b){this.cells[x].push(b)}query(r,o,f,m,x){const b=this.min,E=this.max;if(r<=b&&o<=b&&E<=f&&E<=m&&!x)return Array.prototype.slice.call(this.keys);{const P=[];return this._forEachCell(r,o,f,m,this._queryCell,P,{},x),P}}_queryCell(r,o,f,m,x,b,E,P){const k=this.cells[x];if(k!==null){const B=this.keys,F=this.bboxes;for(let Z=0;Z<k.length;Z++){const W=k[Z];if(E[W]===void 0){const J=4*W;(P?P(F[J+0],F[J+1],F[J+2],F[J+3]):r<=F[J+2]&&o<=F[J+3]&&f>=F[J+0]&&m>=F[J+1])?(E[W]=!0,b.push(B[W])):E[W]=!1}}}}_forEachCell(r,o,f,m,x,b,E,P){const k=this._convertToCellCoord(r),B=this._convertToCellCoord(o),F=this._convertToCellCoord(f),Z=this._convertToCellCoord(m);for(let W=k;W<=F;W++)for(let J=B;J<=Z;J++){const te=this.d*J+W;if((!P||P(this._convertFromCellCoord(W),this._convertFromCellCoord(J),this._convertFromCellCoord(W+1),this._convertFromCellCoord(J+1)))&&x.call(this,r,o,f,m,te,b,E,P))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,o=3+this.cells.length+1+1;let f=0;for(let b=0;b<this.cells.length;b++)f+=this.cells[b].length;const m=new Int32Array(o+f+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let x=o;for(let b=0;b<r.length;b++){const E=r[b];m[3+b]=x,m.set(E,x),x+=E.length}return m[3+r.length]=x,m.set(this.keys,x),x+=this.keys.length,m[3+r.length+1]=x,m.set(this.bboxes,x),x+=this.bboxes.length,m.buffer}static serialize(r,o){const f=r.toArrayBuffer();return o&&o.push(f),{buffer:f}}static deserialize(r){return new Sl(r.buffer)}}const oa={};function kt(s,r,o={}){if(oa[s])throw new Error(`${s} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:s,writeable:!1}),oa[s]={klass:r,omit:o.omit||[],shallow:o.shallow||[]}}kt("Object",Object),kt("Set",Set),kt("TransferableGridIndex",Sl),kt("Color",gr),kt("Error",Error),kt("AJAXError",ae),kt("ResolvedImage",Vi),kt("StylePropertyFunction",lu),kt("StyleExpression",Ff,{omit:["_evaluator"]}),kt("ZoomDependentExpression",xl),kt("ZoomConstantExpression",Hi),kt("CompoundExpression",Da,{omit:["_evaluate"]});for(const s in uc)uc[s]._classRegistryKey||kt(`Expression_${s}`,uc[s]);function Ah(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Zf(s){return s.$name||s.constructor._classRegistryKey}function ao(s){return!(function(r){if(r===null||typeof r!="object")return!1;const o=Zf(r);return!(!o||o==="Object")})(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Ah(s)||Ea(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Co(s,r){if(ao(s))return(Ah(s)||Ea(s))&&r&&r.push(s),ArrayBuffer.isView(s)&&r&&r.push(s.buffer),s instanceof ImageData&&r&&r.push(s.data.buffer),s;if(Array.isArray(s)){const x=[];for(const b of s)x.push(Co(b,r));return x}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const o=Zf(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!oa[o])throw new Error(`${o} is not registered.`);const{klass:f}=oa[o],m=f.serialize?f.serialize(s,r):{};if(f.serialize){if(r&&m===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in s){if(!s.hasOwnProperty(x)||oa[o].omit.indexOf(x)>=0)continue;const b=s[x];m[x]=oa[o].shallow.indexOf(x)>=0?b:Co(b,r)}s instanceof Error&&(m.message=s.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(m.$name=o),m}function gc(s){if(ao(s))return s;if(Array.isArray(s))return s.map(gc);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const r=Zf(s)||"Object";if(!oa[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:o}=oa[r];if(!o)throw new Error(`can't deserialize unregistered class ${r}`);if(o.deserialize)return o.deserialize(s);const f=Object.create(o.prototype);for(const m of Object.keys(s)){if(m==="$name")continue;const x=s[m];f[m]=oa[r].shallow.indexOf(m)>=0?x:gc(x)}return f}class Hf{constructor(){this.first=!0}update(r,o){const f=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=o),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=f,!0))}}function us(s){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function hu(s){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))}function Mh(s){return/\s/u.test(String.fromCodePoint(s))}function cs(s){for(const r of s)if(hu(r.codePointAt(0)))return!0;return!1}function Wf(s){for(const r of s)if(!Xd(r.codePointAt(0)))return!1;return!0}function Ph(s){const r=s.map((o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch{return null}})).filter((o=>o));return new RegExp(r.join("|"),"u")}const hs=Ph(["Arab","Dupl","Mong","Ougr","Syrc"]);function Xd(s){return!hs.test(String.fromCodePoint(s))}function fs(s){return!(hu(s)||(r=s,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(r))));var r}const Yf=Ph(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ch(s){return Yf.test(String.fromCodePoint(s))}function ds(s,r){return!(!r&&Ch(s)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(s)))}function Ls(s){for(const r of s)if(Ch(r.codePointAt(0)))return!0;return!1}const oo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(oo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,r){return u(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;const o=s.pluginURL,f=new Promise((x=>{this.loadScriptResolve=x}));r(o);const m=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([f,m]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:o};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)}))}};class Ur{constructor(r,o){this.isSupportedScript=Kd,this.zoom=r,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new Hf,this.transition=o.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hf,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,o=r-Math.floor(r),f=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*o}}}function Kd(s){return(function(r,o){for(const f of r)if(!ds(f.codePointAt(0),o))return!1;return!0})(s,oo.getRTLTextPluginStatus()==="loaded")}const js="-transition";class Tl{constructor(r,o,f){this.property=r,this.value=o,this.expression=(function(m,x,b){if(jf(m))return new lu(m,x);if(_l(m)){const E=bl(m,x,b);if(E.result==="error")throw new Error(E.value.map((P=>`${P.key}: ${P.message}`)).join(", "));return E.value}{let E=m;return x.type==="color"&&typeof m=="string"?E=gr.parse(m):x.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?x.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?x.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?E=zn.parse(m):x.type==="projectionDefinition"&&typeof m=="string"&&(E=li.parse(m)):E=tr.parse(m):E=pn.parse(m):E=Hn.parse(m),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>E}}})(o===void 0?r.specification.default:o,r.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(r,o,f){return this.property.possiblyEvaluate(this,r,o,f)}}class Dh{constructor(r,o){this.property=r,this.value=new Tl(r,void 0,o)}transitioned(r,o){return new fu(this.property,this.value,o,Ar({},r.transition,this.transition),r.now)}untransitioned(){return new fu(this.property,this.value,null,{},0)}}class Xf{constructor(r,o){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._globalState=o}getValue(r){return St(this._values[r].value.value)}setValue(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dh(this._values[r].property,this._globalState)),this._values[r].value=new Tl(this._values[r].property,o===null?void 0:St(o),this._globalState)}getTransition(r){return St(this._values[r].transition)}setTransition(r,o){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new Dh(this._values[r].property,this._globalState)),this._values[r].transition=St(o)||void 0}serialize(){const r={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(r[o]=f);const m=this.getTransition(o);m!==void 0&&(r[`${o}${js}`]=m)}return r}transitioned(r,o){const f=new Oh(this._properties);for(const m of Object.keys(this._values))f._values[m]=this._values[m].transitioned(r,o._values[m]);return f}untransitioned(){const r=new Oh(this._properties);for(const o of Object.keys(this._values))r._values[o]=this._values[o].untransitioned();return r}}class fu{constructor(r,o,f,m,x){this.property=r,this.value=o,this.begin=x+m.delay||0,this.end=this.begin+m.duration||0,r.specification.transition&&(m.delay||m.duration)&&(this.prior=f)}possiblyEvaluate(r,o,f){const m=r.now||0,x=this.value.possiblyEvaluate(r,o,f),b=this.prior;if(b){if(m>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(m<this.begin)return b.possiblyEvaluate(r,o,f);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(r,o,f),x,Pt(E))}}return x}}class Oh{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,o,f){const m=new du(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(r,o,f);return m}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class Qd{constructor(r,o){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._globalState=o}hasValue(r){return this._values[r].value!==void 0}getValue(r){return St(this._values[r].value)}setValue(r,o){this._values[r]=new Tl(this._values[r].property,o===null?void 0:St(o),this._globalState)}serialize(){const r={};for(const o of Object.keys(this._values)){const f=this.getValue(o);f!==void 0&&(r[o]=f)}return r}possiblyEvaluate(r,o,f){const m=new du(this._properties);for(const x of Object.keys(this._values))m._values[x]=this._values[x].possiblyEvaluate(r,o,f);return m}}class ja{constructor(r,o,f){this.property=r,this.value=o,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,o,f,m){return this.property.evaluate(this.value,this.parameters,r,o,f,m)}}class du{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Rt{constructor(r){this.specification=r}possiblyEvaluate(r,o){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(o)}interpolate(r,o,f){const m=gn[this.specification.type];return m?m(r,o,f):r}}class Ft{constructor(r,o){this.specification=r,this.overrides=o}possiblyEvaluate(r,o,f,m){return new ja(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(o,null,{},f,m)}:r.expression,o)}interpolate(r,o,f){if(r.value.kind!=="constant"||o.value.kind!=="constant")return r;if(r.value.value===void 0||o.value.value===void 0)return new ja(this,{kind:"constant",value:void 0},r.parameters);const m=gn[this.specification.type];if(m){const x=m(r.value.value,o.value.value,f);return new ja(this,{kind:"constant",value:x},r.parameters)}return r}evaluate(r,o,f,m,x,b){return r.kind==="constant"?r.value:r.evaluate(o,f,m,x,b)}}class so extends Ft{possiblyEvaluate(r,o,f,m){if(r.value===void 0)return new ja(this,{kind:"constant",value:void 0},o);if(r.expression.kind==="constant"){const x=r.expression.evaluate(o,null,{},f,m),b=r.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,E=this._calculate(b,b,b,o);return new ja(this,{kind:"constant",value:E},o)}if(r.expression.kind==="camera"){const x=this._calculate(r.expression.evaluate({zoom:o.zoom-1}),r.expression.evaluate({zoom:o.zoom}),r.expression.evaluate({zoom:o.zoom+1}),o);return new ja(this,{kind:"constant",value:x},o)}return new ja(this,r.expression,o)}evaluate(r,o,f,m,x,b){if(r.kind==="source"){const E=r.evaluate(o,f,m,x,b);return this._calculate(E,E,E,o)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(o.zoom)-1},f,m),r.evaluate({zoom:Math.floor(o.zoom)},f,m),r.evaluate({zoom:Math.floor(o.zoom)+1},f,m),o):r.value}_calculate(r,o,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:f,to:o}}interpolate(r){return r}}class yc{constructor(r){this.specification=r}possiblyEvaluate(r,o,f,m){if(r.value!==void 0){if(r.expression.kind==="constant"){const x=r.expression.evaluate(o,null,{},f,m);return this._calculate(x,x,x,o)}return this._calculate(r.expression.evaluate(new Ur(Math.floor(o.zoom-1),o)),r.expression.evaluate(new Ur(Math.floor(o.zoom),o)),r.expression.evaluate(new Ur(Math.floor(o.zoom+1),o)),o)}}_calculate(r,o,f,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:r,to:o}:{from:f,to:o}}interpolate(r){return r}}class Ih{constructor(r){this.specification=r}possiblyEvaluate(r,o,f,m){return!!r.expression.evaluate(o,null,{},f,m)}interpolate(){return!1}}class qn{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in r){const f=r[o];f.specification.overridable&&this.overridableProperties.push(o);const m=this.defaultPropertyValues[o]=new Tl(f,void 0,void 0),x=this.defaultTransitionablePropertyValues[o]=new Dh(f,void 0);this.defaultTransitioningPropertyValues[o]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=m.possiblyEvaluate({})}}}kt("DataDrivenProperty",Ft),kt("DataConstantProperty",Rt),kt("CrossFadedDataDrivenProperty",so),kt("CrossFadedProperty",yc),kt("ColorRampProperty",Ih);class Tn extends nt{constructor(r,o,f){if(super(),this.id=r.id,this.type=r.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(m,x){return new mc(m,x)})(this.visibility,f),r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter,this._featureFilter=na(r.filter,f)),o.layout&&(this._unevaluatedLayout=new Qd(o.layout,f)),o.paint)){this._transitionablePaint=new Xf(o.paint,f);for(const m in r.paint)this.setPaintProperty(m,r.paint[m],{validate:!1});for(const m in r.layout)this.setLayoutProperty(m,r.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new du(o.paint)}}setFilter(r){this.filter=r,this._featureFilter=na(r,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}getLayoutAffectingGlobalStateRefs(){const r=new Set;for(const o of this._visibilityExpression.getGlobalStateRefs())r.add(o);if(this._unevaluatedLayout)for(const o in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[o];for(const m of f.getGlobalStateRefs())r.add(m)}for(const o of this._featureFilter.getGlobalStateRefs())r.add(o);return r}getPaintAffectingGlobalStateRefs(){var r;const o=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const m=this._transitionablePaint._values[f].value;for(const x of m.getGlobalStateRefs()){const b=(r=o.get(x))!==null&&r!==void 0?r:[];b.push({name:f,value:m.value}),o.set(x,b)}}return o}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(r,o,f={}){if(o==null||!this._validate(Cm,`layers.${this.id}.layout.${r}`,r,o,f))return r==="visibility"?(this.visibility=o,this._visibilityExpression.setValue(o),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(r,o)}getPaintProperty(r){return r.endsWith(js)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,o,f={}){if(o!=null&&this._validate(Gf,`layers.${this.id}.paint.${r}`,r,o,f))return!1;if(r.endsWith(js))return this._transitionablePaint.setTransition(r.slice(0,-11),o||void 0),!1;{const m=this._transitionablePaint._values[r],x=m.property.specification["property-type"]==="cross-faded-data-driven",b=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(r,o),this._handleSpecialPaintPropertyUpdate(r);const P=this._transitionablePaint._values[r].value;return P.isDataDriven()||b||x||this._handleOverridablePaintPropertyUpdate(r,E,P)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,o,f){return!1}isHidden(r=this.minzoom,o=!1){return!!(this.minzoom&&r<(o?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&r>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(r,o){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,o)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),mr(r,((o,f)=>!(o===void 0||f==="layout"&&!Object.keys(o).length||f==="paint"&&!Object.keys(o).length)))}_validate(r,o,f,m,x={}){return(!x||x.validate!==!1)&&Po(this,r.call(ci,{key:o,layerType:this.type,objectKey:f,value:m,styleSpec:De,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const o=this.paint.get(r);if(o instanceof ja&&no(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let Rn;var zh={get paint(){return Rn=Rn||new qn({"raster-opacity":new Rt(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new Rt(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Rt(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Rt(De.paint_raster["raster-brightness-max"]),"raster-saturation":new Rt(De.paint_raster["raster-saturation"]),"raster-contrast":new Rt(De.paint_raster["raster-contrast"]),"raster-resampling":new Rt(De.paint_raster["raster-resampling"]),"raster-fade-duration":new Rt(De.paint_raster["raster-fade-duration"])})}};class Bs extends Tn{constructor(r,o){super(r,zh,o)}}const xr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class jr{constructor(r,o){this._structArray=r,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,o){return r._trim(),o&&(r.isTransferred=!0,o.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const o=Object.create(this.prototype);return o.arrayBuffer=r.arrayBuffer,o.length=r.length,o.capacity=r.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function yn(s,r=1){let o=0,f=0;return{members:s.map((m=>{const x=xr[m.type].BYTES_PER_ELEMENT,b=o=lo(o,Math.max(r,x)),E=m.components||1;return f=Math.max(f,x),o+=x*E,{name:m.name,type:m.type,components:E,offset:b}})),size:lo(o,Math.max(f,r)),alignment:r}}function lo(s,r){return Math.ceil(s/r)*r}class Do extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o){const f=this.length;return this.resize(f+1),this.emplace(f,r,o)}emplace(r,o,f){const m=2*r;return this.int16[m+0]=o,this.int16[m+1]=f,r}}Do.prototype.bytesPerElement=4,kt("StructArrayLayout2i4",Do);class pu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const x=3*r;return this.int16[x+0]=o,this.int16[x+1]=f,this.int16[x+2]=m,r}}pu.prototype.bytesPerElement=6,kt("StructArrayLayout3i6",pu);class mu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,r,o,f,m)}emplace(r,o,f,m,x){const b=4*r;return this.int16[b+0]=o,this.int16[b+1]=f,this.int16[b+2]=m,this.int16[b+3]=x,r}}mu.prototype.bytesPerElement=8,kt("StructArrayLayout4i8",mu);class Ns extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,x,b)}emplace(r,o,f,m,x,b,E){const P=6*r;return this.int16[P+0]=o,this.int16[P+1]=f,this.int16[P+2]=m,this.int16[P+3]=x,this.int16[P+4]=b,this.int16[P+5]=E,r}}Ns.prototype.bytesPerElement=12,kt("StructArrayLayout2i4i12",Ns);class Jd extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,x,b)}emplace(r,o,f,m,x,b,E){const P=4*r,k=8*r;return this.int16[P+0]=o,this.int16[P+1]=f,this.uint8[k+4]=m,this.uint8[k+5]=x,this.uint8[k+6]=b,this.uint8[k+7]=E,r}}Jd.prototype.bytesPerElement=8,kt("StructArrayLayout2i4ub8",Jd);class un extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o){const f=this.length;return this.resize(f+1),this.emplace(f,r,o)}emplace(r,o,f){const m=2*r;return this.float32[m+0]=o,this.float32[m+1]=f,r}}un.prototype.bytesPerElement=8,kt("StructArrayLayout2f8",un);class Oo extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b,E,P,k,B){const F=this.length;return this.resize(F+1),this.emplace(F,r,o,f,m,x,b,E,P,k,B)}emplace(r,o,f,m,x,b,E,P,k,B,F){const Z=10*r;return this.uint16[Z+0]=o,this.uint16[Z+1]=f,this.uint16[Z+2]=m,this.uint16[Z+3]=x,this.uint16[Z+4]=b,this.uint16[Z+5]=E,this.uint16[Z+6]=P,this.uint16[Z+7]=k,this.uint16[Z+8]=B,this.uint16[Z+9]=F,r}}Oo.prototype.bytesPerElement=20,kt("StructArrayLayout10ui20",Oo);class vc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b,E,P){const k=this.length;return this.resize(k+1),this.emplace(k,r,o,f,m,x,b,E,P)}emplace(r,o,f,m,x,b,E,P,k){const B=8*r;return this.uint16[B+0]=o,this.uint16[B+1]=f,this.uint16[B+2]=m,this.uint16[B+3]=x,this.uint16[B+4]=b,this.uint16[B+5]=E,this.uint16[B+6]=P,this.uint16[B+7]=k,r}}vc.prototype.bytesPerElement=16,kt("StructArrayLayout8ui16",vc);class _c extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b,E,P,k,B,F,Z){const W=this.length;return this.resize(W+1),this.emplace(W,r,o,f,m,x,b,E,P,k,B,F,Z)}emplace(r,o,f,m,x,b,E,P,k,B,F,Z,W){const J=12*r;return this.int16[J+0]=o,this.int16[J+1]=f,this.int16[J+2]=m,this.int16[J+3]=x,this.uint16[J+4]=b,this.uint16[J+5]=E,this.uint16[J+6]=P,this.uint16[J+7]=k,this.int16[J+8]=B,this.int16[J+9]=F,this.int16[J+10]=Z,this.int16[J+11]=W,r}}_c.prototype.bytesPerElement=24,kt("StructArrayLayout4i4ui4i24",_c);class kh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const x=3*r;return this.float32[x+0]=o,this.float32[x+1]=f,this.float32[x+2]=m,r}}kh.prototype.bytesPerElement=12,kt("StructArrayLayout3f12",kh);class Rh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint32[1*r+0]=o,r}}Rh.prototype.bytesPerElement=4,kt("StructArrayLayout1ul4",Rh);class Lh extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b,E,P,k){const B=this.length;return this.resize(B+1),this.emplace(B,r,o,f,m,x,b,E,P,k)}emplace(r,o,f,m,x,b,E,P,k,B){const F=10*r,Z=5*r;return this.int16[F+0]=o,this.int16[F+1]=f,this.int16[F+2]=m,this.int16[F+3]=x,this.int16[F+4]=b,this.int16[F+5]=E,this.uint32[Z+3]=P,this.uint16[F+8]=k,this.uint16[F+9]=B,r}}Lh.prototype.bytesPerElement=20,kt("StructArrayLayout6i1ul2ui20",Lh);class El extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,x,b)}emplace(r,o,f,m,x,b,E){const P=6*r;return this.int16[P+0]=o,this.int16[P+1]=f,this.int16[P+2]=m,this.int16[P+3]=x,this.int16[P+4]=b,this.int16[P+5]=E,r}}El.prototype.bytesPerElement=12,kt("StructArrayLayout2i2i2i12",El);class Fs extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,o,f,m,x)}emplace(r,o,f,m,x,b){const E=4*r,P=8*r;return this.float32[E+0]=o,this.float32[E+1]=f,this.float32[E+2]=m,this.int16[P+6]=x,this.int16[P+7]=b,r}}Fs.prototype.bytesPerElement=16,kt("StructArrayLayout2f1f2i16",Fs);class Pi extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b){const E=this.length;return this.resize(E+1),this.emplace(E,r,o,f,m,x,b)}emplace(r,o,f,m,x,b,E){const P=16*r,k=4*r,B=8*r;return this.uint8[P+0]=o,this.uint8[P+1]=f,this.float32[k+1]=m,this.float32[k+2]=x,this.int16[B+6]=b,this.int16[B+7]=E,r}}Pi.prototype.bytesPerElement=16,kt("StructArrayLayout2ub2f2i16",Pi);class vn extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const x=3*r;return this.uint16[x+0]=o,this.uint16[x+1]=f,this.uint16[x+2]=m,r}}vn.prototype.bytesPerElement=6,kt("StructArrayLayout3ui6",vn);class ps extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b,E,P,k,B,F,Z,W,J,te,ie,ue){const xe=this.length;return this.resize(xe+1),this.emplace(xe,r,o,f,m,x,b,E,P,k,B,F,Z,W,J,te,ie,ue)}emplace(r,o,f,m,x,b,E,P,k,B,F,Z,W,J,te,ie,ue,xe){const le=24*r,pe=12*r,Me=48*r;return this.int16[le+0]=o,this.int16[le+1]=f,this.uint16[le+2]=m,this.uint16[le+3]=x,this.uint32[pe+2]=b,this.uint32[pe+3]=E,this.uint32[pe+4]=P,this.uint16[le+10]=k,this.uint16[le+11]=B,this.uint16[le+12]=F,this.float32[pe+7]=Z,this.float32[pe+8]=W,this.uint8[Me+36]=J,this.uint8[Me+37]=te,this.uint8[Me+38]=ie,this.uint32[pe+10]=ue,this.int16[le+22]=xe,r}}ps.prototype.bytesPerElement=48,kt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ps);class gu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f,m,x,b,E,P,k,B,F,Z,W,J,te,ie,ue,xe,le,pe,Me,ke,We,st,lt,yt,Dt,wt){const ut=this.length;return this.resize(ut+1),this.emplace(ut,r,o,f,m,x,b,E,P,k,B,F,Z,W,J,te,ie,ue,xe,le,pe,Me,ke,We,st,lt,yt,Dt,wt)}emplace(r,o,f,m,x,b,E,P,k,B,F,Z,W,J,te,ie,ue,xe,le,pe,Me,ke,We,st,lt,yt,Dt,wt,ut){const rt=32*r,Lt=16*r;return this.int16[rt+0]=o,this.int16[rt+1]=f,this.int16[rt+2]=m,this.int16[rt+3]=x,this.int16[rt+4]=b,this.int16[rt+5]=E,this.int16[rt+6]=P,this.int16[rt+7]=k,this.uint16[rt+8]=B,this.uint16[rt+9]=F,this.uint16[rt+10]=Z,this.uint16[rt+11]=W,this.uint16[rt+12]=J,this.uint16[rt+13]=te,this.uint16[rt+14]=ie,this.uint16[rt+15]=ue,this.uint16[rt+16]=xe,this.uint16[rt+17]=le,this.uint16[rt+18]=pe,this.uint16[rt+19]=Me,this.uint16[rt+20]=ke,this.uint16[rt+21]=We,this.uint16[rt+22]=st,this.uint32[Lt+12]=lt,this.float32[Lt+13]=yt,this.float32[Lt+14]=Dt,this.uint16[rt+30]=wt,this.uint16[rt+31]=ut,r}}gu.prototype.bytesPerElement=64,kt("StructArrayLayout8i15ui1ul2f2ui64",gu);class yu extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.float32[1*r+0]=o,r}}yu.prototype.bytesPerElement=4,kt("StructArrayLayout1f4",yu);class xc extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const x=3*r;return this.uint16[6*r+0]=o,this.float32[x+1]=f,this.float32[x+2]=m,r}}xc.prototype.bytesPerElement=12,kt("StructArrayLayout1ui2f12",xc);class Io extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o,f){const m=this.length;return this.resize(m+1),this.emplace(m,r,o,f)}emplace(r,o,f,m){const x=4*r;return this.uint32[2*r+0]=o,this.uint16[x+2]=f,this.uint16[x+3]=m,r}}Io.prototype.bytesPerElement=8,kt("StructArrayLayout1ul2ui8",Io);class w extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,o){const f=this.length;return this.resize(f+1),this.emplace(f,r,o)}emplace(r,o,f){const m=2*r;return this.uint16[m+0]=o,this.uint16[m+1]=f,r}}w.prototype.bytesPerElement=4,kt("StructArrayLayout2ui4",w);class n extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const o=this.length;return this.resize(o+1),this.emplace(o,r)}emplace(r,o){return this.uint16[1*r+0]=o,r}}n.prototype.bytesPerElement=2,kt("StructArrayLayout1ui2",n);class c extends vr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,o,f,m){const x=this.length;return this.resize(x+1),this.emplace(x,r,o,f,m)}emplace(r,o,f,m,x){const b=4*r;return this.float32[b+0]=o,this.float32[b+1]=f,this.float32[b+2]=m,this.float32[b+3]=x,r}}c.prototype.bytesPerElement=16,kt("StructArrayLayout4f16",c);class p extends jr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new M(this.anchorPointX,this.anchorPointY)}}p.prototype.size=20;class _ extends Lh{get(r){return new p(this,r)}}kt("CollisionBoxArray",_);class T extends jr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}T.prototype.size=48;class A extends ps{get(r){return new T(this,r)}}kt("PlacedSymbolArray",A);class O extends jr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}O.prototype.size=64;class R extends gu{get(r){return new O(this,r)}}kt("SymbolInstanceArray",R);class U extends yu{getoffsetX(r){return this.float32[1*r+0]}}kt("GlyphOffsetArray",U);class V extends pu{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}kt("SymbolLineVertexArray",V);class K extends jr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}K.prototype.size=12;class X extends xc{get(r){return new K(this,r)}}kt("TextAnchorOffsetArray",X);class re extends jr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}re.prototype.size=8;class oe extends Io{get(r){return new re(this,r)}}kt("FeatureIndexArray",oe);class de extends Do{}class ve extends Do{}class ye extends Do{}class we extends Ns{}class Ce extends Jd{}class be extends un{}class Pe extends Oo{}class Ie extends vc{}class Ee extends _c{}class Le extends kh{}class Ke extends Rh{}class He extends El{}class Ye extends Pi{}class Xe extends vn{}class At extends w{}const Mt=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:dt}=Mt;class Ot{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,o,f,m){const x=this.segments[this.segments.length-1];return r>Ot.MAX_VERTEX_ARRAY_LENGTH&&cr(`Max vertices per segment is ${Ot.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ot.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+r>Ot.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==m?this.createNewSegment(o,f,m):x}createNewSegment(r,o,f){const m={vertexOffset:r.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(m.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(r,o,f){return this.prepareSegment(0,r,o,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const o in r.vaos)r.vaos[o].destroy()}static simpleSegment(r,o,f,m){return new Ot([{vertexOffset:r,primitiveOffset:o,vertexLength:f,primitiveLength:m,vaos:{},sortKey:0}])}}function lr(s,r){return 256*(s=Kt(Math.floor(s),0,255))+Kt(Math.floor(r),0,255)}Ot.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,kt("SegmentVector",Ot);const Br=yn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),rn=yn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Kr,cn,Gr,En={exports:{}},hn={exports:{}},mi={exports:{}},Ln=(function(){if(Gr)return En.exports;Gr=1;var s=(Kr||(Kr=1,hn.exports=function(o,f){var m,x,b,E,P,k,B,F;for(x=o.length-(m=3&o.length),b=f,P=3432918353,k=461845907,F=0;F<x;)B=255&o.charCodeAt(F)|(255&o.charCodeAt(++F))<<8|(255&o.charCodeAt(++F))<<16|(255&o.charCodeAt(++F))<<24,++F,b=27492+(65535&(E=5*(65535&(b=(b^=B=(65535&(B=(B=(65535&B)*P+(((B>>>16)*P&65535)<<16)&4294967295)<<15|B>>>17))*k+(((B>>>16)*k&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(B=0,m){case 3:B^=(255&o.charCodeAt(F+2))<<16;case 2:B^=(255&o.charCodeAt(F+1))<<8;case 1:b^=B=(65535&(B=(B=(65535&(B^=255&o.charCodeAt(F)))*P+(((B>>>16)*P&65535)<<16)&4294967295)<<15|B>>>17))*k+(((B>>>16)*k&65535)<<16)&4294967295}return b^=o.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),hn.exports),r=(cn||(cn=1,mi.exports=function(o,f){for(var m,x=o.length,b=f^x,E=0;x>=4;)m=1540483477*(65535&(m=255&o.charCodeAt(E)|(255&o.charCodeAt(++E))<<8|(255&o.charCodeAt(++E))<<16|(255&o.charCodeAt(++E))<<24))+((1540483477*(m>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),x-=4,++E;switch(x){case 3:b^=(255&o.charCodeAt(E+2))<<16;case 2:b^=(255&o.charCodeAt(E+1))<<8;case 1:b=1540483477*(65535&(b^=255&o.charCodeAt(E)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),mi.exports);return En.exports=s,En.exports.murmur3=s,En.exports.murmur2=r,En.exports})(),jn=C(Ln);class gi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,o,f,m){this.ids.push(ms(r)),this.positions.push(o,f,m)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=ms(r);let f=0,m=this.ids.length-1;for(;f<m;){const b=f+m>>1;this.ids[b]>=o?m=b:f=b+1}const x=[];for(;this.ids[f]===o;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(r,o){const f=new Float64Array(r.ids),m=new Uint32Array(r.positions);return gs(f,m,0,f.length-1),o&&o.push(f.buffer,m.buffer),{ids:f,positions:m}}static deserialize(r){const o=new gi;return o.ids=r.ids,o.positions=r.positions,o.indexed=!0,o}}function ms(s){const r=+s;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:jn(String(s))}function gs(s,r,o,f){for(;o<f;){const m=s[o+f>>1];let x=o-1,b=f+1;for(;;){do x++;while(s[x]<m);do b--;while(s[b]>m);if(x>=b)break;zo(s,x,b),zo(r,3*x,3*b),zo(r,3*x+1,3*b+1),zo(r,3*x+2,3*b+2)}b-o<f-b?(gs(s,r,o,b),o=b+1):(gs(s,r,b+1,f),f=b)}}function zo(s,r,o){const f=s[r];s[r]=s[o],s[o]=f}kt("FeaturePositionMap",gi);class sa{constructor(r,o){this.gl=r.gl,this.location=o}}class vu extends sa{constructor(r,o){super(r,o),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class bc extends sa{constructor(r,o){super(r,o),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class ko extends sa{constructor(r,o){super(r,o),this.current=gr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const la=new Float32Array(16);function Ba(s){return[lr(255*s.r,255*s.g),lr(255*s.b,255*s.a)]}class uo{constructor(r,o,f){this.value=r,this.uniformNames=o.map((m=>`u_${m}`)),this.type=f}setUniform(r,o,f){r.set(f.constantOr(this.value))}getBinding(r,o,f){return this.type==="color"?new ko(r,o):new vu(r,o)}}class co{constructor(r,o){this.uniformNames=o.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=r.tlbr}setConstantDashPositions(r,o){this.dashTo=[0,r.y,r.height,r.width],this.dashFrom=[0,o.y,o.height,o.width]}setUniform(r,o,f,m){let x=null;m==="u_pattern_to"?x=this.patternTo:m==="u_pattern_from"?x=this.patternFrom:m==="u_dasharray_to"?x=this.dashTo:m==="u_dasharray_from"?x=this.dashFrom:m==="u_pixel_ratio_to"?x=this.pixelRatioTo:m==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&r.set(x)}getBinding(r,o,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new bc(r,o):new vu(r,o)}}class Vr{constructor(r,o,f,m){this.expression=r,this.type=f,this.maxValue=0,this.paintVertexAttributes=o.map((x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new m}populatePaintArray(r,o,f){const m=this.paintVertexArray.length,x=this.expression.evaluate(new Ur(0,f),o,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(r),this._setPaintValue(m,r,x)}updatePaintArray(r,o,f,m,x){const b=this.expression.evaluate(new Ur(0,x),f,m);this._setPaintValue(r,o,b)}_setPaintValue(r,o,f){if(this.type==="color"){const m=Ba(f);for(let x=r;x<o;x++)this.paintVertexArray.emplace(x,m[0],m[1])}else{for(let m=r;m<o;m++)this.paintVertexArray.emplace(m,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qr{constructor(r,o,f,m,x,b){this.expression=r,this.uniformNames=o.map((E=>`u_${E}_t`)),this.type=f,this.useIntegerZoom=m,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=o.map((E=>({name:`a_${E}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new b}populatePaintArray(r,o,f){const m=this.expression.evaluate(new Ur(this.zoom,f),o,{},f.canonical,[],f.formattedSection),x=this.expression.evaluate(new Ur(this.zoom+1,f),o,{},f.canonical,[],f.formattedSection),b=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(b,r,m,x)}updatePaintArray(r,o,f,m,x){const b=this.expression.evaluate(new Ur(this.zoom,x),f,m),E=this.expression.evaluate(new Ur(this.zoom+1,x),f,m);this._setPaintValue(r,o,b,E)}_setPaintValue(r,o,f,m){if(this.type==="color"){const x=Ba(f),b=Ba(m);for(let E=r;E<o;E++)this.paintVertexArray.emplace(E,x[0],x[1],b[0],b[1])}else{for(let x=r;x<o;x++)this.paintVertexArray.emplace(x,f,m);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(m))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,o){const f=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,m=Kt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);r.set(m)}getBinding(r,o,f){return new vu(r,o)}}class Yn{constructor(r,o,f,m,x,b){this.expression=r,this.type=o,this.useIntegerZoom=f,this.zoom=m,this.layerId=b,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(r,o,f){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(m,r,this.getPositionIds(o),f)}updatePaintArray(r,o,f,m,x){this._setPaintValues(r,o,this.getPositionIds(f),x)}_setPaintValues(r,o,f,m){const x=this.getPositions(m);if(!x||!f)return;const b=x[f.min],E=x[f.mid],P=x[f.max];if(b&&E&&P)for(let k=r;k<o;k++)this.emplace(this.zoomInPaintVertexArray,k,E,b),this.emplace(this.zoomOutPaintVertexArray,k,E,P)}upload(r){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const o=this.getVertexAttributes();this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,o,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,o,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ti extends Yn{getPositions(r){return r.imagePositions}getPositionIds(r){return r.patterns&&r.patterns[this.layerId]}getVertexAttributes(){return Br.members}emplace(r,o,f,m){r.emplace(o,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],f.pixelRatio,m.pixelRatio)}}class Kf extends Yn{getPositions(r){return r.dashPositions}getPositionIds(r){return r.dashes&&r.dashes[this.layerId]}getVertexAttributes(){return rn.members}emplace(r,o,f,m){r.emplace(o,0,f.y,f.height,f.width,0,m.y,m.height,m.width)}}class Qf{constructor(r,o,f){this.binders={},this._buffers=[];const m=[];for(const x in r.paint._values){if(!f(x))continue;const b=r.paint.get(x);if(!(b instanceof ja&&no(b.property.specification)))continue;const E=Dm(x,r.type),P=b.value,k=b.property.specification.type,B=b.property.useIntegerZoom,F=b.property.specification["property-type"],Z=F==="cross-faded"||F==="cross-faded-data-driven";if(P.kind==="constant")this.binders[x]=Z?new co(P.value,E):new uo(P.value,E,k),m.push(`/u_${x}`);else if(P.kind==="source"||Z){const W=Ml(x,k,"source");this.binders[x]=Z?x==="line-dasharray"?new Kf(P,k,B,o,W,r.id):new ti(P,k,B,o,W,r.id):new Vr(P,E,k,W),m.push(`/a_${x}`)}else{const W=Ml(x,k,"composite");this.binders[x]=new Qr(P,E,k,B,o,W),m.push(`/z_${x}`)}}this.cacheKey=m.sort().join("")}getMaxValue(r){const o=this.binders[r];return o instanceof Vr||o instanceof Qr?o.maxValue:0}populatePaintArrays(r,o,f){for(const m in this.binders){const x=this.binders[m];(x instanceof Vr||x instanceof Qr||x instanceof Yn)&&x.populatePaintArray(r,o,f)}}setConstantPatternPositions(r,o){for(const f in this.binders){const m=this.binders[f];m instanceof co&&m.setConstantPatternPositions(r,o)}}setConstantDashPositions(r,o){for(const f in this.binders){const m=this.binders[f];m instanceof co&&m.setConstantDashPositions(r,o)}}updatePaintArrays(r,o,f,m,x){let b=!1;for(const E in r){const P=o.getPositions(E);for(const k of P){const B=f.feature(k.index);for(const F in this.binders){const Z=this.binders[F];if((Z instanceof Vr||Z instanceof Qr||Z instanceof Yn)&&Z.expression.isStateDependent===!0){const W=m.paint.get(F);Z.expression=W.value,Z.updatePaintArray(k.start,k.end,B,r[E],x),b=!0}}}}return b}defines(){const r=[];for(const o in this.binders){const f=this.binders[o];(f instanceof uo||f instanceof co)&&r.push(...f.uniformNames.map((m=>`#define HAS_UNIFORM_${m}`)))}return r}getBinderAttributes(){const r=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof Vr||f instanceof Qr)for(let m=0;m<f.paintVertexAttributes.length;m++)r.push(f.paintVertexAttributes[m].name);else if(f instanceof Yn){const m=f.getVertexAttributes();for(const x of m)r.push(x.name)}}return r}getBinderUniforms(){const r=[];for(const o in this.binders){const f=this.binders[o];if(f instanceof uo||f instanceof co||f instanceof Qr)for(const m of f.uniformNames)r.push(m)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,o){const f=[];for(const m in this.binders){const x=this.binders[m];if(x instanceof uo||x instanceof co||x instanceof Qr){for(const b of x.uniformNames)if(o[b]){const E=x.getBinding(r,o[b],b);f.push({name:b,property:m,binding:E})}}}return f}setUniforms(r,o,f,m){for(const{name:x,property:b,binding:E}of o)this.binders[b].setUniform(E,m,f.get(b),x)}updatePaintBuffers(r){this._buffers=[];for(const o in this.binders){const f=this.binders[o];if(r&&f instanceof Yn){const m=r.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(f instanceof Vr||f instanceof Qr)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(r){for(const o in this.binders){const f=this.binders[o];(f instanceof Vr||f instanceof Qr||f instanceof Yn)&&f.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const o=this.binders[r];(o instanceof Vr||o instanceof Qr||o instanceof Yn)&&o.destroy()}}}class Al{constructor(r,o,f=()=>!0){this.programConfigurations={};for(const m of r)this.programConfigurations[m.id]=new Qf(m,o,f);this.needsUpload=!1,this._featureMap=new gi,this._bufferOffset=0}populatePaintArrays(r,o,f,m){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(r,o,m);o.id!==void 0&&this._featureMap.add(o.id,f,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,o,f,m){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(r,this._featureMap,o,x,m)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Dm(s,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${r}-`,"").replace(/-/g,"_")]}function Ml(s,r,o){const f={color:{source:un,composite:c},number:{source:yu,composite:un}},m=(function(x){return{"line-pattern":{source:Pe,composite:Pe},"fill-pattern":{source:Pe,composite:Pe},"fill-extrusion-pattern":{source:Pe,composite:Pe},"line-dasharray":{source:Ie,composite:Ie}}[x]})(s);return m&&m[o]||f[r][o]}kt("ConstantBinder",uo),kt("CrossFadedConstantBinder",co),kt("SourceExpressionBinder",Vr),kt("CrossFadedPatternBinder",ti),kt("CrossFadedDasharrayBinder",Kf),kt("CompositeExpressionBinder",Qr),kt("ProgramConfiguration",Qf,{omit:["_buffers"]}),kt("ProgramConfigurationSet",Al);const Jf=Math.pow(2,14)-1,Us=-Jf-1;function Vs(s){const r=_t/s.extent,o=s.loadGeometry();for(let f=0;f<o.length;f++){const m=o[f];for(let x=0;x<m.length;x++){const b=m[x],E=Math.round(b.x*r),P=Math.round(b.y*r);b.x=Kt(E,Us,Jf),b.y=Kt(P,Us,Jf),(E<b.x||E>b.x+1||P<b.y||P>b.y+1)&&cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Ro(s,r){return{type:s.type,id:s.id,properties:s.properties,geometry:r?Vs(s):[]}}const ed=-32768;function jh(s,r,o,f,m){s.emplaceBack(ed+8*r+f,ed+8*o+m)}class Bh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new ve,this.indexArray=new Xe,this.segments=new Ot,this.programConfigurations=new Al(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){const m=this.layers[0],x=[];let b=null,E=!1,P=m.type==="heatmap";if(m.type==="circle"){const B=m;b=B.layout.get("circle-sort-key"),E=!b.isConstant(),P=P||B.paint.get("circle-pitch-alignment")==="map"}const k=P?o.subdivisionGranularity.circle:1;for(const{feature:B,id:F,index:Z,sourceLayerIndex:W}of r){const J=this.layers[0]._featureFilter.needGeometry,te=Ro(B,J);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),te,f))continue;const ie=E?b.evaluate(te,{},f):void 0,ue={id:F,properties:B.properties,type:B.type,sourceLayerIndex:W,index:Z,geometry:J?te.geometry:Vs(B),patterns:{},sortKey:ie};x.push(ue)}E&&x.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of x){const{geometry:F,index:Z,sourceLayerIndex:W}=B,J=r[Z].feature;this.addFeature(B,F,Z,f,k),o.featureIndex.insert(J,F,Z,W,this.index)}}update(r,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,dt),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,o,f,m,x=1){let b;switch(x){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const E=b.length;for(const P of o)for(const k of P){const B=k.x,F=k.y;if(B<0||B>=_t||F<0||F>=_t)continue;const Z=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,r.sortKey),W=Z.vertexLength;for(let J=0;J<E;J++)for(let te=0;te<E;te++)jh(this.layoutVertexArray,B,F,b[te],b[J]);for(let J=0;J<E-1;J++)for(let te=0;te<E-1;te++){const ie=W+J*E+te,ue=W+(J+1)*E+te;this.indexArray.emplaceBack(ie,ue+1,ie+1),this.indexArray.emplaceBack(ie,ue,ue+1)}Z.vertexLength+=E*E,Z.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:{},canonical:m})}}function Nh(s,r){for(let o=0;o<s.length;o++)if(Pl(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(Pl(s,r[o]))return!0;return!!Ci(s,r)}function Om(s,r,o){return!!Pl(s,r)||!!zm(r,s,o)}function Im(s,r){if(s.length===1)return _y(r,s[0]);for(let o=0;o<r.length;o++){const f=r[o];for(let m=0;m<f.length;m++)if(Pl(s,f[m]))return!0}for(let o=0;o<s.length;o++)if(_y(r,s[o]))return!0;for(let o=0;o<r.length;o++)if(Ci(s,r[o]))return!0;return!1}function yi(s,r,o){if(s.length>1){if(Ci(s,r))return!0;for(let f=0;f<r.length;f++)if(zm(r[f],s,o))return!0}for(let f=0;f<s.length;f++)if(zm(s[f],r,o))return!0;return!1}function Ci(s,r){if(s.length===0||r.length===0)return!1;for(let o=0;o<s.length-1;o++){const f=s[o],m=s[o+1];for(let x=0;x<r.length-1;x++)if(T_(f,m,r[x],r[x+1]))return!0}return!1}function T_(s,r,o,f){return Wr(s,o,f)!==Wr(r,o,f)&&Wr(s,r,o)!==Wr(s,r,f)}function zm(s,r,o){const f=o*o;if(r.length===1)return s.distSqr(r[0])<f;for(let m=1;m<r.length;m++)if(vy(s,r[m-1],r[m])<f)return!0;return!1}function vy(s,r,o){const f=r.distSqr(o);if(f===0)return s.distSqr(r);const m=((s.x-r.x)*(o.x-r.x)+(s.y-r.y)*(o.y-r.y))/f;return s.distSqr(m<0?r:m>1?o:o.sub(r)._mult(m)._add(r))}function _y(s,r){let o,f,m,x=!1;for(let b=0;b<s.length;b++){o=s[b];for(let E=0,P=o.length-1;E<o.length;P=E++)f=o[E],m=o[P],f.y>r.y!=m.y>r.y&&r.x<(m.x-f.x)*(r.y-f.y)/(m.y-f.y)+f.x&&(x=!x)}return x}function Pl(s,r){let o=!1;for(let f=0,m=s.length-1;f<s.length;m=f++){const x=s[f],b=s[m];x.y>r.y!=b.y>r.y&&r.x<(b.x-x.x)*(r.y-x.y)/(b.y-x.y)+x.x&&(o=!o)}return o}function E_(s,r,o){const f=o[0],m=o[2];if(s.x<f.x&&r.x<f.x||s.x>m.x&&r.x>m.x||s.y<f.y&&r.y<f.y||s.y>m.y&&r.y>m.y)return!1;const x=Wr(s,r,o[0]);return x!==Wr(s,r,o[1])||x!==Wr(s,r,o[2])||x!==Wr(s,r,o[3])}function _u(s,r,o){const f=r.paint.get(s).value;return f.kind==="constant"?f.value:o.programConfigurations.get(r.id).getMaxValue(s)}function ep(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function km(s,r,o,f,m){if(!r[0]&&!r[1])return s;const x=M.convert(r)._mult(m);o==="viewport"&&x._rotate(-f);const b=[];for(let E=0;E<s.length;E++)b.push(s[E].sub(x));return b}function Rm(s){const r=[];for(let o=0;o<s.length;o++){const f=s[o],m=r.at(-1);(o===0||m&&!f.equals(m))&&r.push(f)}return r}function xy({queryGeometry:s,size:r},o){return Om(s,o,r)}function A_({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m},x){return Om(s,x,r*(o.projectTileCoordinates(x.x,x.y,f,m).signedDistanceFromCamera/o.cameraToCenterDistance))}function M_({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m},x){const b=o.projectTileCoordinates(x.x,x.y,f,m).signedDistanceFromCamera,E=r*(o.cameraToCenterDistance/b);return Om(s,tp(x,o,f,m),E)}function P_({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m},x){return Om(s,tp(x,o,f,m),r)}function Lm({queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m,pitchAlignment:x="map",pitchScale:b="map"},E){const P=x==="map"?b==="map"?xy:A_:b==="map"?M_:P_,k={queryGeometry:s,size:r,transform:o,unwrappedTileID:f,getElevation:m};for(const B of E)for(const F of B)if(P(k,F))return!0;return!1}function tp(s,r,o,f){const m=r.projectTileCoordinates(s.x,s.y,o,f).point;return new M((.5*m.x+.5)*r.width,(.5*-m.y+.5)*r.height)}let jm,by;kt("CircleBucket",Bh,{omit:["layers"]});var wy={get paint(){return by=by||new qn({"circle-radius":new Ft(De.paint_circle["circle-radius"]),"circle-color":new Ft(De.paint_circle["circle-color"]),"circle-blur":new Ft(De.paint_circle["circle-blur"]),"circle-opacity":new Ft(De.paint_circle["circle-opacity"]),"circle-translate":new Rt(De.paint_circle["circle-translate"]),"circle-translate-anchor":new Rt(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Rt(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Rt(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ft(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ft(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ft(De.paint_circle["circle-stroke-opacity"])})},get layout(){return jm=jm||new qn({"circle-sort-key":new Ft(De.layout_circle["circle-sort-key"])})}};class Bm extends Tn{constructor(r,o){super(r,wy,o)}createBucket(r){return new Bh(r)}queryRadius(r){const o=r;return _u("circle-radius",this,o)+_u("circle-stroke-width",this,o)+ep(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:x,pixelsToTileUnits:b,unwrappedTileID:E,getElevation:P}){const k=km(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,b),B=this.paint.get("circle-radius").evaluate(o,f)+this.paint.get("circle-stroke-width").evaluate(o,f),F=this.paint.get("circle-pitch-scale"),Z=this.paint.get("circle-pitch-alignment");let W,J;return Z==="map"?(W=k,J=B*b):(W=(function(te,ie,ue,xe){return te.map((le=>tp(le,ie,ue,xe)))})(k,x,E,P),J=B),Lm({queryGeometry:W,size:J,transform:x,unwrappedTileID:E,getElevation:P,pitchAlignment:Z,pitchScale:F},m)}}class Nm extends Bh{}let Sy;kt("HeatmapBucket",Nm,{omit:["layers"]});var Ty={get paint(){return Sy=Sy||new qn({"heatmap-radius":new Ft(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ft(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Rt(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ih(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Rt(De.paint_heatmap["heatmap-opacity"])})}};function Fm(s,{width:r,height:o},f,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==r*o*f)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${r*o*f}`)}else m=new Uint8Array(r*o*f);return s.width=r,s.height=o,s.data=m,s}function Cl(s,{width:r,height:o},f){if(r===s.width&&o===s.height)return;const m=Fm({},{width:r,height:o},f);rp(s,m,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,r),height:Math.min(s.height,o)},f),s.width=r,s.height=o,s.data=m.data}function rp(s,r,o,f,m,x){if(m.width===0||m.height===0)return r;if(m.width>s.width||m.height>s.height||o.x>s.width-m.width||o.y>s.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>r.width||m.height>r.height||f.x>r.width-m.width||f.y>r.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const b=s.data,E=r.data;if(b===E)throw new Error("srcData equals dstData, so image is already copied");for(let P=0;P<m.height;P++){const k=((o.y+P)*s.width+o.x)*x,B=((f.y+P)*r.width+f.x)*x;for(let F=0;F<m.width*x;F++)E[B+F]=b[k+F]}return r}class np{constructor(r,o){Fm(this,r,1,o)}resize(r){Cl(this,r,1)}clone(){return new np({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,f,m,x){rp(r,o,f,m,x,1)}}class ua{constructor(r,o){Fm(this,r,4,o)}resize(r){Cl(this,r,4)}replace(r,o){o?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ua({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,o,f,m,x){rp(r,o,f,m,x,4)}setPixel(r,o,f){const m=4*(r*this.width+o);this.data[m+0]=Math.round(255*f.r/f.a),this.data[m+1]=Math.round(255*f.g/f.a),this.data[m+2]=Math.round(255*f.b/f.a),this.data[m+3]=Math.round(255*f.a)}}function Dl(s){const r={},o=s.resolution||256,f=s.clips?s.clips.length:1,m=s.image||new ua({width:o,height:f});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const x=(b,E,P)=>{r[s.evaluationKey]=P;const k=s.expression.evaluate(r);m.setPixel(b/4/o,E/4,k)};if(s.clips)for(let b=0,E=0;b<f;++b,E+=4*o)for(let P=0,k=0;P<o;P++,k+=4){const B=P/(o-1),{start:F,end:Z}=s.clips[b];x(E,k,F*(1-B)+Z*B)}else for(let b=0,E=0;b<o;b++,E+=4)x(0,E,b/(o-1));return m}kt("AlphaImage",np),kt("RGBAImage",ua);const ip="big-fb";class C_ extends Tn{createBucket(r){return new Nm(r)}constructor(r,o){super(r,Ty,o),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Dl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ip)&&this.heatmapFbos.delete(ip)}queryRadius(r){return _u("heatmap-radius",this,r)}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:x,pixelsToTileUnits:b,unwrappedTileID:E,getElevation:P}){return Lm({queryGeometry:r,size:this.paint.get("heatmap-radius").evaluate(o,f)*b,transform:x,unwrappedTileID:E,getElevation:P},m)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let ap;var op={get paint(){return ap=ap||new qn({"hillshade-illumination-direction":new Rt(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Rt(De.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Rt(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Rt(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Rt(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Rt(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Rt(De.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Rt(De.paint_hillshade["hillshade-method"])})}};class Bn extends Tn{constructor(r,o){super(r,op,o),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const x=Math.max(r.length,o.length,f.length,m.length);r=r.concat(Array(x-r.length).fill(r.at(-1))),o=o.concat(Array(x-o.length).fill(o.at(-1))),f=f.concat(Array(x-f.length).fill(f.at(-1))),m=m.concat(Array(x-m.length).fill(m.at(-1)));const b=o.map(oi);return{directionRadians:r.map(oi),altitudeRadians:b,shadowColor:m,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let D_;var Zb={get paint(){return D_=D_||new qn({"color-relief-opacity":new Rt(De["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ih(De["paint_color-relief"]["color-relief-color"])})}};class Um{constructor(r,o,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(o,m)}update(r,o,f){const{width:m,height:x}=r,b=!(this.size&&this.size[0]===m&&this.size[1]===x||f),{context:E}=this,{gl:P}=E;if(this.useMipmap=!!(o&&o.useMipmap),P.bindTexture(P.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===P.RGBA&&(!o||o.premultiply!==!1)),b)this.size=[m,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||Ea(r)?P.texImage2D(P.TEXTURE_2D,0,this.format,this.format,P.UNSIGNED_BYTE,r):P.texImage2D(P.TEXTURE_2D,0,this.format,m,x,0,this.format,P.UNSIGNED_BYTE,r.data);else{const{x:k,y:B}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||Ea(r)?P.texSubImage2D(P.TEXTURE_2D,0,k,B,P.RGBA,P.UNSIGNED_BYTE,r):P.texSubImage2D(P.TEXTURE_2D,0,k,B,m,x,P.RGBA,P.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&P.generateMipmap(P.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,o,f){const{context:m}=this,{gl:x}=m;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||r),this.filter=r),o!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class td{constructor(r,o,f,m=1,x=1,b=1,E=0){if(this.uid=r,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void cr(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const P=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=x,this.blueFactor=b,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let k=0;k<P;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(P,k)]=this.data[this._idx(P-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,P)]=this.data[this._idx(k,P-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(P,-1)]=this.data[this._idx(P-1,0)],this.data[this._idx(-1,P)]=this.data[this._idx(0,P-1)],this.data[this._idx(P,P)]=this.data[this._idx(P-1,P-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let k=0;k<P;k++)for(let B=0;B<P;B++){const F=this.get(k,B);F>this.max&&(this.max=F),F<this.min&&(this.min=F)}}get(r,o){const f=new Uint8Array(this.data.buffer),m=4*this._idx(r,o);return this.unpack(f[m],f[m+1],f[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,o){if(r<-1||r>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${r}, y: ${o}, dim: ${this.dim}`);return(o+1)*this.stride+(r+1)}unpack(r,o,f){return r*this.redFactor+o*this.greenFactor+f*this.blueFactor-this.baseShift}pack(r){return xu(r,this.getUnpackVector())}getPixels(){return new ua({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,o,f){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let m=o*this.dim,x=o*this.dim+this.dim,b=f*this.dim,E=f*this.dim+this.dim;switch(o){case-1:m=x-1;break;case 1:x=m+1}switch(f){case-1:b=E-1;break;case 1:E=b+1}const P=-o*this.dim,k=-f*this.dim;for(let B=b;B<E;B++)for(let F=m;F<x;F++)this.data[this._idx(F,B)]=r.data[this._idx(F+P,B+k)]}}function xu(s,r){const o=r[0],f=r[1],m=r[2],x=r[3],b=Math.min(o,f,m),E=Math.round((s+x)/b);return{r:Math.floor(E*b/o)%256,g:Math.floor(E*b/f)%256,b:Math.floor(E*b/m)%256}}kt("DEMData",td);class O_ extends Tn{constructor(r,o){super(r,Zb,o)}_createColorRamp(r){const o={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof Hi&&f._styleExpression.expression instanceof Gi){this.colorRampExpression=f;const b=f._styleExpression.expression;o.elevationStops=b.labels,o.colorStops=[];for(const E of o.elevationStops)o.colorStops.push(b.evaluate({globals:{elevation:E}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[gr.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=r)return o;const m={elevationStops:[],colorStops:[]},x=(o.elevationStops.length-1)/(r-1);for(let b=0;b<o.elevationStops.length-.5;b+=x)m.elevationStops.push(o.elevationStops[Math.round(b)]),m.colorStops.push(o.colorStops[Math.round(b)]);return cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${r}, provided: ${o.elevationStops.length}`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(r,o,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(o),x=new ua({width:m.colorStops.length,height:1}),b=new ua({width:m.colorStops.length,height:1});for(let E=0;E<m.elevationStops.length;E++){const P=xu(m.elevationStops[E],f);b.setPixel(0,E,new gr(P.r/255,P.g/255,P.b/255,1)),x.setPixel(0,E,m.colorStops[E])}return this.colorRampTextures={elevationTexture:new Um(r,b,r.gl.RGBA),colorTexture:new Um(r,x,r.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const I_=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:sp}=I_;function Lo(s,r,o){const f=o.patternDependencies;let m=!1;for(const x of r){const b=x.paint.get(`${s}-pattern`);b.isConstant()||(m=!0);const E=b.constantOr(null);E&&(m=!0,f[E.to]=!0,f[E.from]=!0)}return m}function Vm(s,r,o,f,m){const{zoom:x}=f,b=m.patternDependencies;for(const E of r){const P=E.paint.get(`${s}-pattern`).value;if(P.kind!=="constant"){let k=P.evaluate({zoom:x-1},o,{},m.availableImages),B=P.evaluate({zoom:x},o,{},m.availableImages),F=P.evaluate({zoom:x+1},o,{},m.availableImages);k=k&&k.name?k.name:k,B=B&&B.name?B.name:B,F=F&&F.name?F.name:F,b[k]=!0,b[B]=!0,b[F]=!0,o.patterns[E.id]={min:k,mid:B,max:F}}}return o}function qm(s,r,o,f,m){let x;if(m===(function(b,E,P,k){let B=0;for(let F=E,Z=P-k;F<P;F+=k)B+=(b[Z]-b[F])*(b[F+1]+b[Z+1]),Z=F;return B})(s,r,o,f)>0)for(let b=r;b<o;b+=f)x=Na(b/f|0,s[b],s[b+1],x);else for(let b=o-f;b>=r;b-=f)x=Na(b/f|0,s[b],s[b+1],x);return x&&ho(x,x.next)&&(Fa(x),x=x.next),x}function wc(s,r){if(!s)return s;r||(r=s);let o,f=s;do if(o=!1,f.steiner||!ho(f,f.next)&&kr(f.prev,f,f.next)!==0)f=f.next;else{if(Fa(f),f=r=f.prev,f===f.next)break;o=!0}while(o||f!==r);return r}function Fh(s,r,o,f,m,x,b){if(!s)return;!b&&x&&(function(P,k,B,F){let Z=P;do Z.z===0&&(Z.z=_i(Z.x,Z.y,k,B,F)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==P);Z.prevZ.nextZ=null,Z.prevZ=null,(function(W){let J,te=1;do{let ie,ue=W;W=null;let xe=null;for(J=0;ue;){J++;let le=ue,pe=0;for(let ke=0;ke<te&&(pe++,le=le.nextZ,le);ke++);let Me=te;for(;pe>0||Me>0&&le;)pe!==0&&(Me===0||!le||ue.z<=le.z)?(ie=ue,ue=ue.nextZ,pe--):(ie=le,le=le.nextZ,Me--),xe?xe.nextZ=ie:W=ie,ie.prevZ=xe,xe=ie;ue=le}xe.nextZ=null,te*=2}while(J>1)})(Z)})(s,f,m,x);let E=s;for(;s.prev!==s.next;){const P=s.prev,k=s.next;if(x?$m(s,f,m,x):Ey(s))r.push(P.i,s.i,k.i),Fa(s),s=k.next,E=k.next;else if((s=k)===E){b?b===1?Fh(s=z_(wc(s),r),r,o,f,m,x,2):b===2&&bu(s,r,o,f,m,x):Fh(wc(s),r,o,f,m,x,1);break}}}function Ey(s){const r=s.prev,o=s,f=s.next;if(kr(r,o,f)>=0)return!1;const m=r.x,x=o.x,b=f.x,E=r.y,P=o.y,k=f.y,B=Math.min(m,x,b),F=Math.min(E,P,k),Z=Math.max(m,x,b),W=Math.max(E,P,k);let J=f.next;for(;J!==r;){if(J.x>=B&&J.x<=Z&&J.y>=F&&J.y<=W&&rd(m,E,x,P,b,k,J.x,J.y)&&kr(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function $m(s,r,o,f){const m=s.prev,x=s,b=s.next;if(kr(m,x,b)>=0)return!1;const E=m.x,P=x.x,k=b.x,B=m.y,F=x.y,Z=b.y,W=Math.min(E,P,k),J=Math.min(B,F,Z),te=Math.max(E,P,k),ie=Math.max(B,F,Z),ue=_i(W,J,r,o,f),xe=_i(te,ie,r,o,f);let le=s.prevZ,pe=s.nextZ;for(;le&&le.z>=ue&&pe&&pe.z<=xe;){if(le.x>=W&&le.x<=te&&le.y>=J&&le.y<=ie&&le!==m&&le!==b&&rd(E,B,P,F,k,Z,le.x,le.y)&&kr(le.prev,le,le.next)>=0||(le=le.prevZ,pe.x>=W&&pe.x<=te&&pe.y>=J&&pe.y<=ie&&pe!==m&&pe!==b&&rd(E,B,P,F,k,Z,pe.x,pe.y)&&kr(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;le&&le.z>=ue;){if(le.x>=W&&le.x<=te&&le.y>=J&&le.y<=ie&&le!==m&&le!==b&&rd(E,B,P,F,k,Z,le.x,le.y)&&kr(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;pe&&pe.z<=xe;){if(pe.x>=W&&pe.x<=te&&pe.y>=J&&pe.y<=ie&&pe!==m&&pe!==b&&rd(E,B,P,F,k,Z,pe.x,pe.y)&&kr(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function z_(s,r){let o=s;do{const f=o.prev,m=o.next.next;!ho(f,m)&&Py(f,o,o.next,m)&&cp(f,m)&&cp(m,f)&&(r.push(f.i,o.i,m.i),Fa(o),Fa(o.next),o=s=m),o=o.next}while(o!==s);return wc(o)}function bu(s,r,o,f,m,x){let b=s;do{let E=b.next.next;for(;E!==b.prev;){if(b.i!==E.i&&$n(b,E)){let P=hp(b,E);return b=wc(b,b.next),P=wc(P,P.next),Fh(b,r,o,f,m,x,0),void Fh(P,r,o,f,m,x,0)}E=E.next}b=b.next}while(b!==s)}function vi(s,r){let o=s.x-r.x;return o===0&&(o=s.y-r.y,o===0)&&(o=(s.next.y-s.y)/(s.next.x-s.x)-(r.next.y-r.y)/(r.next.x-r.x)),o}function Ay(s,r){const o=(function(m,x){let b=x;const E=m.x,P=m.y;let k,B=-1/0;if(ho(m,b))return b;do{if(ho(m,b.next))return b.next;if(P<=b.y&&P>=b.next.y&&b.next.y!==b.y){const te=b.x+(P-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(te<=E&&te>B&&(B=te,k=b.x<b.next.x?b:b.next,te===E))return k}b=b.next}while(b!==x);if(!k)return null;const F=k,Z=k.x,W=k.y;let J=1/0;b=k;do{if(E>=b.x&&b.x>=Z&&E!==b.x&&My(P<W?E:B,P,Z,W,P<W?B:E,P,b.x,b.y)){const te=Math.abs(P-b.y)/(E-b.x);cp(b,m)&&(te<J||te===J&&(b.x>k.x||b.x===k.x&&k_(k,b)))&&(k=b,J=te)}b=b.next}while(b!==F);return k})(s,r);if(!o)return r;const f=hp(o,s);return wc(f,f.next),wc(o,o.next)}function k_(s,r){return kr(s.prev,s,r.prev)<0&&kr(r.next,s,s.next)<0}function _i(s,r,o,f,m){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-f)*m|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function Hb(s){let r=s,o=s;do(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next;while(r!==s);return o}function My(s,r,o,f,m,x,b,E){return(m-b)*(r-E)>=(s-b)*(x-E)&&(s-b)*(f-E)>=(o-b)*(r-E)&&(o-b)*(x-E)>=(m-b)*(f-E)}function rd(s,r,o,f,m,x,b,E){return!(s===b&&r===E)&&My(s,r,o,f,m,x,b,E)}function $n(s,r){return s.next.i!==r.i&&s.prev.i!==r.i&&!(function(o,f){let m=o;do{if(m.i!==o.i&&m.next.i!==o.i&&m.i!==f.i&&m.next.i!==f.i&&Py(m,m.next,o,f))return!0;m=m.next}while(m!==o);return!1})(s,r)&&(cp(s,r)&&cp(r,s)&&(function(o,f){let m=o,x=!1;const b=(o.x+f.x)/2,E=(o.y+f.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&b<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(x=!x),m=m.next;while(m!==o);return x})(s,r)&&(kr(s.prev,s,r.prev)||kr(s,r.prev,r))||ho(s,r)&&kr(s.prev,s,s.next)>0&&kr(r.prev,r,r.next)>0)}function kr(s,r,o){return(r.y-s.y)*(o.x-r.x)-(r.x-s.x)*(o.y-r.y)}function ho(s,r){return s.x===r.x&&s.y===r.y}function Py(s,r,o,f){const m=up(kr(s,r,o)),x=up(kr(s,r,f)),b=up(kr(o,f,s)),E=up(kr(o,f,r));return m!==x&&b!==E||!(m!==0||!lp(s,o,r))||!(x!==0||!lp(s,f,r))||!(b!==0||!lp(o,s,f))||!(E!==0||!lp(o,r,f))}function lp(s,r,o){return r.x<=Math.max(s.x,o.x)&&r.x>=Math.min(s.x,o.x)&&r.y<=Math.max(s.y,o.y)&&r.y>=Math.min(s.y,o.y)}function up(s){return s>0?1:s<0?-1:0}function cp(s,r){return kr(s.prev,s,s.next)<0?kr(s,r,s.next)>=0&&kr(s,s.prev,r)>=0:kr(s,r,s.prev)<0||kr(s,s.next,r)<0}function hp(s,r){const o=Gm(s.i,s.x,s.y),f=Gm(r.i,r.x,r.y),m=s.next,x=r.prev;return s.next=r,r.prev=s,o.next=m,m.prev=o,f.next=o,o.prev=f,x.next=f,f.prev=x,f}function Na(s,r,o,f){const m=Gm(s,r,o);return f?(m.next=f.next,m.prev=f,f.next.prev=m,f.next=m):(m.prev=m,m.next=m),m}function Fa(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Gm(s,r,o){return{i:s,x:r,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Di{constructor(r,o){if(o>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=o}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class fp{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}fp.noSubdivision=new fp({fill:new Di(0,0),line:new Di(0,0),tile:new Di(0,0),stencil:new Di(0,0),circle:1}),kt("SubdivisionGranularityExpression",Di),kt("SubdivisionGranularitySetting",fp);const fo=-32768,qs=32767;class wu{constructor(r,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=_t/r,this._canonical=o}_getKey(r,o){return(r+=32768)<<16|o+32768}_vertexToIndex(r,o){if(r<-32768||o<-32768||r>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(r),m=0|Math.round(o),x=this._getKey(f,m);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,b),this._vertexBuffer.push(f,m),b}_subdivideTrianglesScanline(r){if(this._granularity<2)return(function(m,x){const b=[];for(let E=0;E<x.length;E+=3){const P=x[E],k=x[E+1],B=x[E+2],F=m[2*P],Z=m[2*P+1];(m[2*k]-F)*(m[2*B+1]-Z)-(m[2*k+1]-Z)*(m[2*B]-F)>0?(b.push(P),b.push(B),b.push(k)):(b.push(P),b.push(k),b.push(B))}return b})(this._vertexBuffer,r);const o=[],f=r.length;for(let m=0;m<f;m+=3){const x=[r[m+0],r[m+1],r[m+2]],b=[this._vertexBuffer[2*r[m+0]+0],this._vertexBuffer[2*r[m+0]+1],this._vertexBuffer[2*r[m+1]+0],this._vertexBuffer[2*r[m+1]+1],this._vertexBuffer[2*r[m+2]+0],this._vertexBuffer[2*r[m+2]+1]];let E=1/0,P=1/0,k=-1/0,B=-1/0;for(let te=0;te<3;te++){const ie=b[2*te],ue=b[2*te+1];E=Math.min(E,ie),k=Math.max(k,ie),P=Math.min(P,ue),B=Math.max(B,ue)}if(E===k||P===B)continue;const F=Math.floor(E/this._granularityCellSize),Z=Math.ceil(k/this._granularityCellSize),W=Math.floor(P/this._granularityCellSize),J=Math.ceil(B/this._granularityCellSize);if(F!==Z||W!==J)for(let te=W;te<J;te++){const ie=this._scanlineGenerateVertexRingForCellRow(te,b,x);$s(this._vertexBuffer,ie,o)}else o.push(...x)}return o}_scanlineGenerateVertexRingForCellRow(r,o,f){const m=r*this._granularityCellSize,x=m+this._granularityCellSize,b=[];for(let E=0;E<3;E++){const P=o[2*E],k=o[2*E+1],B=o[2*(E+1)%6],F=o[(2*(E+1)+1)%6],Z=o[2*(E+2)%6],W=o[(2*(E+2)+1)%6],J=B-P,te=F-k,ie=J===0,ue=te===0,xe=(m-k)/te,le=(x-k)/te,pe=Math.min(xe,le),Me=Math.max(xe,le);if(!ue&&(pe>=1||Me<=0)||ue&&(k<m||k>x)){F>=m&&F<=x&&b.push(f[(E+1)%3]);continue}!ue&&pe>0&&b.push(this._vertexToIndex(P+J*pe,k+te*pe));const ke=P+J*Math.max(pe,0),We=P+J*Math.min(Me,1);ie||this._generateIntraEdgeVertices(b,P,k,B,F,ke,We),!ue&&Me<1&&b.push(this._vertexToIndex(P+J*Me,k+te*Me)),(ue||F>=m&&F<=x)&&b.push(f[(E+1)%3]),!ue&&(F<=m||F>=x)&&this._generateInterEdgeVertices(b,P,k,B,F,Z,W,We,m,x)}return b}_generateIntraEdgeVertices(r,o,f,m,x,b,E){const P=m-o,k=x-f,B=k===0,F=B?Math.min(o,m):Math.min(b,E),Z=B?Math.max(o,m):Math.max(b,E),W=Math.floor(F/this._granularityCellSize)+1,J=Math.ceil(Z/this._granularityCellSize)-1;if(B?o<m:b<E)for(let te=W;te<=J;te++){const ie=te*this._granularityCellSize;r.push(this._vertexToIndex(ie,f+k*(ie-o)/P))}else for(let te=J;te>=W;te--){const ie=te*this._granularityCellSize;r.push(this._vertexToIndex(ie,f+k*(ie-o)/P))}}_generateInterEdgeVertices(r,o,f,m,x,b,E,P,k,B){const F=x-f,Z=b-m,W=E-x,J=(k-x)/W,te=(B-x)/W,ie=Math.min(J,te),ue=Math.max(J,te),xe=m+Z*ie;let le=Math.floor(Math.min(xe,P)/this._granularityCellSize)+1,pe=Math.ceil(Math.max(xe,P)/this._granularityCellSize)-1,Me=P<xe;const ke=W===0;if(ke&&(E===k||E===B))return;if(ke||ie>=1||ue<=0){const st=f-E,lt=b+(o-b)*Math.min((k-E)/st,(B-E)/st);le=Math.floor(Math.min(lt,P)/this._granularityCellSize)+1,pe=Math.ceil(Math.max(lt,P)/this._granularityCellSize)-1,Me=P<lt}const We=F>0?B:k;if(Me)for(let st=le;st<=pe;st++)r.push(this._vertexToIndex(st*this._granularityCellSize,We));else for(let st=pe;st>=le;st--)r.push(this._vertexToIndex(st*this._granularityCellSize,We))}_generateOutline(r){const o=[];for(const f of r){const m=Su(f,this._granularity,!0),x=this._pointArrayToIndices(m),b=[];for(let E=1;E<x.length;E++)b.push(x[E-1]),b.push(x[E]);o.push(b)}return o}_handlePoles(r){let o=!1,f=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(o||f)&&this._fillPoles(r,o,f)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let o=0;o<r.length;o+=2){const f=r[o+1];f===fo&&(r[o+1]=-32767),f===qs&&(r[o+1]=32766)}}_generatePoleQuad(r,o,f,m,x,b){m>x!=(b===fo)?(r.push(o),r.push(f),r.push(this._vertexToIndex(m,b)),r.push(f),r.push(this._vertexToIndex(x,b)),r.push(this._vertexToIndex(m,b))):(r.push(f),r.push(o),r.push(this._vertexToIndex(m,b)),r.push(this._vertexToIndex(x,b)),r.push(f),r.push(this._vertexToIndex(m,b)))}_fillPoles(r,o,f){const m=this._vertexBuffer,x=_t,b=r.length;for(let E=2;E<b;E+=3){const P=r[E-2],k=r[E-1],B=r[E],F=m[2*P],Z=m[2*P+1],W=m[2*k],J=m[2*k+1],te=m[2*B],ie=m[2*B+1];o&&(Z===0&&J===0&&this._generatePoleQuad(r,P,k,F,W,fo),J===0&&ie===0&&this._generatePoleQuad(r,k,B,W,te,fo),ie===0&&Z===0&&this._generatePoleQuad(r,B,P,te,F,fo)),f&&(Z===x&&J===x&&this._generatePoleQuad(r,P,k,F,W,qs),J===x&&ie===x&&this._generatePoleQuad(r,k,B,W,te,qs),ie===x&&Z===x&&this._generatePoleQuad(r,B,P,te,F,qs))}}_initializeVertices(r){for(let o=0;o<r.length;o+=2)this._vertexToIndex(r[o],r[o+1])}subdividePolygonInternal(r,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:m}=(function(E){const P=[],k=[];for(const B of E)if(B.length!==0){B!==E[0]&&P.push(k.length/2);for(let F=0;F<B.length;F++)k.push(B[F].x),k.push(B[F].y)}return{flattened:k,holeIndices:P}})(r);let x;this._initializeVertices(f);try{const E=(function(k,B,F=2){const Z=B&&B.length,W=Z?B[0]*F:k.length;let J=qm(k,0,W,F,!0);const te=[];if(!J||J.next===J.prev)return te;let ie,ue,xe;if(Z&&(J=(function(le,pe,Me,ke){const We=[];for(let st=0,lt=pe.length;st<lt;st++){const yt=qm(le,pe[st]*ke,st<lt-1?pe[st+1]*ke:le.length,ke,!1);yt===yt.next&&(yt.steiner=!0),We.push(Hb(yt))}We.sort(vi);for(let st=0;st<We.length;st++)Me=Ay(We[st],Me);return Me})(k,B,J,F)),k.length>80*F){ie=k[0],ue=k[1];let le=ie,pe=ue;for(let Me=F;Me<W;Me+=F){const ke=k[Me],We=k[Me+1];ke<ie&&(ie=ke),We<ue&&(ue=We),ke>le&&(le=ke),We>pe&&(pe=We)}xe=Math.max(le-ie,pe-ue),xe=xe!==0?32767/xe:0}return Fh(J,te,F,ie,ue,xe,0),te})(f,m),P=this._convertIndices(f,E);x=this._subdivideTrianglesScanline(P)}catch(E){console.error(E)}let b=[];return o&&(b=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:b}}_convertIndices(r,o){const f=[];for(let m=0;m<o.length;m++)f.push(this._vertexToIndex(r[2*o[m]],r[2*o[m]+1]));return f}_pointArrayToIndices(r){const o=[];for(let f=0;f<r.length;f++){const m=r[f];o.push(this._vertexToIndex(m.x,m.y))}return o}}function Zm(s,r,o,f=!0){return new wu(o,r).subdividePolygonInternal(s,f)}function Su(s,r,o=!1){if(!s||s.length<1)return[];if(s.length<2)return[];const f=s[0],m=s[s.length-1],x=o&&(f.x!==m.x||f.y!==m.y);if(r<2)return x?[...s,s[0]]:[...s];const b=Math.floor(_t/r),E=[];E.push(new M(s[0].x,s[0].y));const P=s.length,k=x?P:P-1;for(let B=0;B<k;B++){const F=s[B],Z=B<P-1?s[B+1]:s[0],W=F.x,J=F.y,te=Z.x,ie=Z.y,ue=W!==te,xe=J!==ie;if(!ue&&!xe)continue;const le=te-W,pe=ie-J,Me=Math.abs(le),ke=Math.abs(pe);let We=W,st=J;for(;;){const yt=le>0?(Math.floor(We/b)+1)*b:(Math.ceil(We/b)-1)*b,Dt=pe>0?(Math.floor(st/b)+1)*b:(Math.ceil(st/b)-1)*b,wt=Math.abs(We-yt),ut=Math.abs(st-Dt),rt=Math.abs(We-te),Lt=Math.abs(st-ie),Nt=ue?wt/Me:Number.POSITIVE_INFINITY,Wt=xe?ut/ke:Number.POSITIVE_INFINITY;if((rt<=wt||!ue)&&(Lt<=ut||!xe))break;if(Nt<Wt&&ue||!xe){We=yt,st+=pe*Nt;const Vt=new M(We,Math.round(st));E[E.length-1].x===Vt.x&&E[E.length-1].y===Vt.y||E.push(Vt)}else{We+=le*Wt,st=Dt;const Vt=new M(Math.round(We),st);E[E.length-1].x===Vt.x&&E[E.length-1].y===Vt.y||E.push(Vt)}}const lt=new M(te,ie);E[E.length-1].x===lt.x&&E[E.length-1].y===lt.y||E.push(lt)}return E}function $s(s,r,o){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,m=s[2*r[0]];for(let P=1;P<r.length;P++){const k=s[2*r[P]];k<m&&(m=k,f=P)}const x=r.length;let b=f,E=(b+1)%x;for(;;){const P=b-1>=0?b-1:x-1,k=(E+1)%x,B=s[2*r[P]],F=s[2*r[k]],Z=s[2*r[b]],W=s[2*r[b]+1],J=s[2*r[E]+1];let te=!1;if(B<F)te=!0;else if(B>F)te=!1;else{const ie=J-W,ue=-(s[2*r[E]]-Z),xe=W<J?1:-1;((B-Z)*ie+(s[2*r[P]+1]-W)*ue)*xe>((F-Z)*ie+(s[2*r[k]+1]-W)*ue)*xe&&(te=!0)}if(te){const ie=r[P],ue=r[b],xe=r[E];ie!==ue&&ie!==xe&&ue!==xe&&o.push(xe,ue,ie),b--,b<0&&(b=x-1)}else{const ie=r[k],ue=r[b],xe=r[E];ie!==ue&&ie!==xe&&ue!==xe&&o.push(xe,ue,ie),E++,E>=x&&(E=0)}if(P===k)break}}function Cy(s,r,o,f,m,x,b,E,P){const k=m.length/2,B=b&&E&&P;if(k<Ot.MAX_VERTEX_ARRAY_LENGTH){const F=r.prepareSegment(k,o,f),Z=F.vertexLength;for(let te=0;te<x.length;te+=3)f.emplaceBack(Z+x[te],Z+x[te+1],Z+x[te+2]);let W,J;F.vertexLength+=k,F.primitiveLength+=x.length/3,B&&(J=b.prepareSegment(k,o,E),W=J.vertexLength,J.vertexLength+=k);for(let te=0;te<m.length;te+=2)s(m[te],m[te+1]);if(B)for(let te=0;te<P.length;te++){const ie=P[te];for(let ue=1;ue<ie.length;ue+=2)E.emplaceBack(W+ie[ue-1],W+ie[ue]);J.primitiveLength+=ie.length/2}}else(function(F,Z,W,J,te,ie){const ue=[];for(let ke=0;ke<J.length/2;ke++)ue.push(-1);const xe={count:0};let le=0,pe=F.getOrCreateLatestSegment(Z,W),Me=pe.vertexLength;for(let ke=2;ke<te.length;ke+=3){const We=te[ke-2],st=te[ke-1],lt=te[ke];let yt=ue[We]<le,Dt=ue[st]<le,wt=ue[lt]<le;pe.vertexLength+((yt?1:0)+(Dt?1:0)+(wt?1:0))>Ot.MAX_VERTEX_ARRAY_LENGTH&&(pe=F.createNewSegment(Z,W),le=xe.count,yt=!0,Dt=!0,wt=!0,Me=0);const ut=Ol(ue,J,ie,xe,We,yt,pe),rt=Ol(ue,J,ie,xe,st,Dt,pe),Lt=Ol(ue,J,ie,xe,lt,wt,pe);W.emplaceBack(Me+ut-le,Me+rt-le,Me+Lt-le),pe.primitiveLength++}})(r,o,f,m,x,s),B&&(function(F,Z,W,J,te,ie){const ue=[];for(let ke=0;ke<J.length/2;ke++)ue.push(-1);const xe={count:0};let le=0,pe=F.getOrCreateLatestSegment(Z,W),Me=pe.vertexLength;for(let ke=0;ke<te.length;ke++){const We=te[ke];for(let st=1;st<te[ke].length;st+=2){const lt=We[st-1],yt=We[st];let Dt=ue[lt]<le,wt=ue[yt]<le;pe.vertexLength+((Dt?1:0)+(wt?1:0))>Ot.MAX_VERTEX_ARRAY_LENGTH&&(pe=F.createNewSegment(Z,W),le=xe.count,Dt=!0,wt=!0,Me=0);const ut=Ol(ue,J,ie,xe,lt,Dt,pe),rt=Ol(ue,J,ie,xe,yt,wt,pe);W.emplaceBack(Me+ut-le,Me+rt-le),pe.primitiveLength++}}})(b,o,E,m,P,s),r.forceNewSegmentOnNextPrepare(),b?.forceNewSegmentOnNextPrepare()}function Ol(s,r,o,f,m,x,b){if(x){const E=f.count;return o(r[2*m],r[2*m+1]),s[m]=f.count,f.count++,b.vertexLength++,E}return s[m]}class Uh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ye,this.indexArray=new Xe,this.indexArray2=new At,this.programConfigurations=new Al(r.layers,r.zoom),this.segments=new Ot,this.segments2=new Ot,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){this.hasDependencies=Lo("fill",this.layers,o);const m=this.layers[0].layout.get("fill-sort-key"),x=!m.isConstant(),b=[];for(const{feature:E,id:P,index:k,sourceLayerIndex:B}of r){const F=this.layers[0]._featureFilter.needGeometry,Z=Ro(E,F);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),Z,f))continue;const W=x?m.evaluate(Z,{},f,o.availableImages):void 0,J={id:P,properties:E.properties,type:E.type,sourceLayerIndex:B,index:k,geometry:F?Z.geometry:Vs(E),patterns:{},sortKey:W};b.push(J)}x&&b.sort(((E,P)=>E.sortKey-P.sortKey));for(const E of b){const{geometry:P,index:k,sourceLayerIndex:B}=E;if(this.hasDependencies){const F=Vm("fill",this.layers,E,{zoom:this.zoom},o);this.patternFeatures.push(F)}else this.addFeature(E,P,k,f,{},o.subdivisionGranularity);o.featureIndex.insert(r[k].feature,P,k,B,this.index)}}update(r,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f})}addFeatures(r,o,f){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,o,f,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,sp),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,o,f,m,x,b){for(const E of dh(o,500)){const P=Zm(E,m,b.fill.getGranularityForZoomLevel(m.z)),k=this.layoutVertexArray;Cy(((B,F)=>{k.emplaceBack(B,F)}),this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles,this.segments2,this.indexArray2,P.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,canonical:m})}}let nd,Vh;kt("FillBucket",Uh,{omit:["layers","patternFeatures"]});var R_={get paint(){return Vh=Vh||new qn({"fill-antialias":new Rt(De.paint_fill["fill-antialias"]),"fill-opacity":new Ft(De.paint_fill["fill-opacity"]),"fill-color":new Ft(De.paint_fill["fill-color"]),"fill-outline-color":new Ft(De.paint_fill["fill-outline-color"]),"fill-translate":new Rt(De.paint_fill["fill-translate"]),"fill-translate-anchor":new Rt(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new so(De.paint_fill["fill-pattern"])})},get layout(){return nd=nd||new qn({"fill-sort-key":new Ft(De.layout_fill["fill-sort-key"])})}};class L_ extends Tn{constructor(r,o){super(r,R_,o)}recalculate(r,o){super.recalculate(r,o);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Uh(r)}queryRadius(){return ep(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:o,transform:f,pixelsToTileUnits:m}){return Im(km(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,m),o)}isTileClipped(){return!0}}const dp=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),j_=yn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Hm}=dp;class id{constructor(r,o,f,m,x){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=r,this._geometry=-1,this._keys=m,this._values=x,r.readFields(Wb,this,o)}loadGeometry(){const r=this._pbf;r.pos=this._geometry;const o=r.readVarint()+r.pos,f=[];let m,x=1,b=0,E=0,P=0;for(;r.pos<o;){if(b<=0){const k=r.readVarint();x=7&k,b=k>>3}if(b--,x===1||x===2)E+=r.readSVarint(),P+=r.readSVarint(),x===1&&(m&&f.push(m),m=[]),m&&m.push(new M(E,P));else{if(x!==7)throw new Error(`unknown command ${x}`);m&&m.push(m[0].clone())}}return m&&f.push(m),f}bbox(){const r=this._pbf;r.pos=this._geometry;const o=r.readVarint()+r.pos;let f=1,m=0,x=0,b=0,E=1/0,P=-1/0,k=1/0,B=-1/0;for(;r.pos<o;){if(m<=0){const F=r.readVarint();f=7&F,m=F>>3}if(m--,f===1||f===2)x+=r.readSVarint(),b+=r.readSVarint(),x<E&&(E=x),x>P&&(P=x),b<k&&(k=b),b>B&&(B=b);else if(f!==7)throw new Error(`unknown command ${f}`)}return[E,k,P,B]}toGeoJSON(r,o,f){const m=this.extent*Math.pow(2,f),x=this.extent*r,b=this.extent*o,E=this.loadGeometry();function P(Z){return[360*(Z.x+x)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(Z.y+b)/m)*Math.PI))-90]}function k(Z){return Z.map(P)}let B;if(this.type===1){const Z=[];for(const J of E)Z.push(J[0]);const W=k(Z);B=Z.length===1?{type:"Point",coordinates:W[0]}:{type:"MultiPoint",coordinates:W}}else if(this.type===2){const Z=E.map(k);B=Z.length===1?{type:"LineString",coordinates:Z[0]}:{type:"MultiLineString",coordinates:Z}}else{if(this.type!==3)throw new Error("unknown feature type");{const Z=B_(E),W=[];for(const J of Z)W.push(J.map(k));B=W.length===1?{type:"Polygon",coordinates:W[0]}:{type:"MultiPolygon",coordinates:W}}}const F={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(F.id=this.id),F}}function Wb(s,r,o){s===1?r.id=o.readVarint():s===2?(function(f,m){const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=m._keys[f.readVarint()],E=m._values[f.readVarint()];m.properties[b]=E}})(o,r):s===3?r.type=o.readVarint():s===4&&(r._geometry=o.pos)}function B_(s){const r=s.length;if(r<=1)return[s];const o=[];let f,m;for(let x=0;x<r;x++){const b=Jr(s[x]);b!==0&&(m===void 0&&(m=b<0),m===b<0?(f&&o.push(f),f=[s[x]]):f&&f.push(s[x]))}return f&&o.push(f),o}function Jr(s){let r=0;for(let o,f,m=0,x=s.length,b=x-1;m<x;b=m++)o=s[m],f=s[b],r+=(f.x-o.x)*(o.y+f.y);return r}id.types=["Unknown","Point","LineString","Polygon"];class _n{constructor(r,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Mr,this,o),this.length=this._features.length}feature(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];const o=this._pbf.readVarint()+this._pbf.pos;return new id(this._pbf,o,this.extent,this._keys,this._values)}}function Mr(s,r,o){s===15?r.version=o.readVarint():s===1?r.name=o.readString():s===5?r.extent=o.readVarint():s===2?r._features.push(o.pos):s===3?r._keys.push(o.readString()):s===4&&r._values.push((function(f){let m=null;const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=f.readVarint()>>3;m=b===1?f.readString():b===2?f.readFloat():b===3?f.readDouble():b===4?f.readVarint64():b===5?f.readVarint():b===6?f.readSVarint():b===7?f.readBoolean():null}if(m==null)throw new Error("unknown feature value");return m})(o))}class Pr{constructor(r,o){this.layers=r.readFields(sn,{},o)}}function sn(s,r,o){if(s===3){const f=new _n(o,o.readVarint()+o.pos);f.length&&(r[f.name]=f)}}const Ua=Math.pow(2,13);function ys(s,r,o,f,m,x,b,E){s.emplaceBack(r,o,2*Math.floor(f*Ua)+b,m*Ua*2,x*Ua*2,Math.round(E))}class Sc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new we,this.centroidVertexArray=new de,this.indexArray=new Xe,this.programConfigurations=new Al(r.layers,r.zoom),this.segments=new Ot,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){this.features=[],this.hasDependencies=Lo("fill-extrusion",this.layers,o);for(const{feature:m,id:x,index:b,sourceLayerIndex:E}of r){const P=this.layers[0]._featureFilter.needGeometry,k=Ro(m,P);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),k,f))continue;const B={id:x,sourceLayerIndex:E,index:b,geometry:P?k.geometry:Vs(m),properties:m.properties,type:m.type,patterns:{}};this.hasDependencies?this.features.push(Vm("fill-extrusion",this.layers,B,{zoom:this.zoom},o)):this.addFeature(B,B.geometry,b,f,{},o.subdivisionGranularity),o.featureIndex.insert(m,B.geometry,b,E,this.index,!0)}}addFeatures(r,o,f){for(const m of this.features){const{geometry:x}=m;this.addFeature(m,x,m.index,o,f,r.subdivisionGranularity)}}update(r,o,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Hm),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,j_.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,o,f,m,x,b){for(const E of dh(o,500)){const P={x:0,y:0,sampleCount:0},k=this.layoutVertexArray.length;this.processPolygon(P,m,r,E,b);const B=this.layoutVertexArray.length-k,F=Math.floor(P.x/P.sampleCount),Z=Math.floor(P.y/P.sampleCount);for(let W=0;W<B;W++)this.centroidVertexArray.emplaceBack(F,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,canonical:m})}processPolygon(r,o,f,m,x){if(m.length<1||Xn(m[0]))return;for(const F of m)F.length!==0&&Dy(r,F);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=x.fill.getGranularityForZoomLevel(o.z),P=id.types[f.type]==="Polygon";for(const F of m){if(F.length===0||Xn(F))continue;const Z=Su(F,E,P);this._generateSideFaces(Z,b)}if(!P)return;const k=Zm(m,o,E,!1),B=this.layoutVertexArray;Cy(((F,Z)=>{ys(B,F,Z,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles)}_generateSideFaces(r,o){let f=0;for(let m=1;m<r.length;m++){const x=r[m],b=r[m-1];if(Tu(x,b))continue;o.segment.vertexLength+4>Ot.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=x.sub(b)._perp()._unit(),P=b.dist(x);f+P>32768&&(f=0),ys(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,f),ys(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,f),f+=P,ys(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,0,f),ys(this.layoutVertexArray,b.x,b.y,E.x,E.y,0,1,f);const k=o.segment.vertexLength;this.indexArray.emplaceBack(k,k+2,k+1),this.indexArray.emplaceBack(k+1,k+2,k+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function Dy(s,r){for(let o=0;o<r.length;o++){const f=r[o];o===r.length-1&&r[0].x===f.x&&r[0].y===f.y||(s.x+=f.x,s.y+=f.y,s.sampleCount++)}}function Tu(s,r){return s.x===r.x&&(s.x<0||s.x>_t)||s.y===r.y&&(s.y<0||s.y>_t)}function Xn(s){return s.every((r=>r.x<0))||s.every((r=>r.x>_t))||s.every((r=>r.y<0))||s.every((r=>r.y>_t))}let Eu;kt("FillExtrusionBucket",Sc,{omit:["layers","features"]});var qh={get paint(){return Eu=Eu||new qn({"fill-extrusion-opacity":new Rt(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ft(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Rt(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Rt(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new so(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ft(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ft(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Rt(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Oy extends Tn{constructor(r,o){super(r,qh,o)}createBucket(r){return new Sc(r)}queryRadius(){return ep(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:x,pixelsToTileUnits:b,pixelPosMatrix:E}){const P=km(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,b),k=this.paint.get("fill-extrusion-height").evaluate(o,f),B=this.paint.get("fill-extrusion-base").evaluate(o,f),F=(function(W,J){const te=[];for(const ie of W){const ue=[ie.x,ie.y,0,1];It(ue,ue,J),te.push(new M(ue[0]/ue[3],ue[1]/ue[3]))}return te})(P,E),Z=(function(W,J,te,ie){const ue=[],xe=[],le=ie[8]*J,pe=ie[9]*J,Me=ie[10]*J,ke=ie[11]*J,We=ie[8]*te,st=ie[9]*te,lt=ie[10]*te,yt=ie[11]*te;for(const Dt of W){const wt=[],ut=[];for(const rt of Dt){const Lt=rt.x,Nt=rt.y,Wt=ie[0]*Lt+ie[4]*Nt+ie[12],Vt=ie[1]*Lt+ie[5]*Nt+ie[13],_r=ie[2]*Lt+ie[6]*Nt+ie[14],Nn=ie[3]*Lt+ie[7]*Nt+ie[15],wi=_r+Me,da=Nn+ke,Ll=Wt+We,yo=Vt+st,Yi=_r+lt,pa=Nn+yt,ri=new M((Wt+le)/da,(Vt+pe)/da);ri.z=wi/da,wt.push(ri);const Xi=new M(Ll/pa,yo/pa);Xi.z=Yi/pa,ut.push(Xi)}ue.push(wt),xe.push(ut)}return[ue,xe]})(m,B,k,E);return(function(W,J,te){let ie=1/0;Im(te,J)&&(ie=$h(te,J[0]));for(let ue=0;ue<J.length;ue++){const xe=J[ue],le=W[ue];for(let pe=0;pe<xe.length-1;pe++){const Me=xe[pe],ke=[Me,xe[pe+1],le[pe+1],le[pe],Me];Nh(te,ke)&&(ie=Math.min(ie,$h(te,ke)))}}return ie!==1/0&&ie})(Z[0],Z[1],F)}}function Wi(s,r){return s.x*r.x+s.y*r.y}function $h(s,r){if(s.length===1){let o=0;const f=r[o++];let m;for(;!m||f.equals(m);)if(m=r[o++],!m)return 1/0;for(;o<r.length;o++){const x=r[o],b=s[0],E=m.sub(f),P=x.sub(f),k=b.sub(f),B=Wi(E,E),F=Wi(E,P),Z=Wi(P,P),W=Wi(k,E),J=Wi(k,P),te=B*Z-F*F,ie=(Z*W-F*J)/te,ue=(B*J-F*W)/te,xe=f.z*(1-ie-ue)+m.z*ie+x.z*ue;if(isFinite(xe))return xe}return 1/0}{let o=1/0;for(const f of r)o=Math.min(o,f.z);return o}}const pp=yn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:po}=pp,Iy=yn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Wm}=Iy,N_=Math.cos(Math.PI/180*37.5),mp=Math.pow(2,14)/.5;class ad{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((o=>o.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((o=>{this.gradients[o.id]={}})),this.layoutVertexArray=new Ce,this.layoutVertexArray2=new be,this.indexArray=new Xe,this.programConfigurations=new Al(r.layers,r.zoom),this.segments=new Ot,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((o=>o.isStateDependent())).map((o=>o.id))}populate(r,o,f){this.hasDependencies=Lo("line",this.layers,o)||this.hasLineDasharray(this.layers);const m=this.layers[0].layout.get("line-sort-key"),x=!m.isConstant(),b=[];for(const{feature:E,id:P,index:k,sourceLayerIndex:B}of r){const F=this.layers[0]._featureFilter.needGeometry,Z=Ro(E,F);if(!this.layers[0]._featureFilter.filter(new Ur(this.zoom),Z,f))continue;const W=x?m.evaluate(Z,{},f):void 0,J={id:P,properties:E.properties,type:E.type,sourceLayerIndex:B,index:k,geometry:F?Z.geometry:Vs(E),patterns:{},dashes:{},sortKey:W};b.push(J)}x&&b.sort(((E,P)=>E.sortKey-P.sortKey));for(const E of b){const{geometry:P,index:k,sourceLayerIndex:B}=E;this.hasDependencies?(Lo("line",this.layers,o)?Vm("line",this.layers,E,{zoom:this.zoom},o):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,E,this.zoom,o),this.patternFeatures.push(E)):this.addFeature(E,P,k,f,{},{},o.subdivisionGranularity),o.featureIndex.insert(r[k].feature,P,k,B,this.index)}}update(r,o,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,o,this.stateDependentLayers,{imagePositions:f,dashPositions:m})}addFeatures(r,o,f,m){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,o,f,m,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Wm)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,po),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,o,f,m,x,b,E){const P=this.layers[0].layout,k=P.get("line-join").evaluate(r,{}),B=P.get("line-cap"),F=P.get("line-miter-limit"),Z=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const W of o)this.addLine(W,r,k,B,F,Z,m,E);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,dashPositions:b,canonical:m})}addLine(r,o,f,m,x,b,E,P){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=Su(r,E?P.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<r.length-1;le++)this.totalDistance+=r[le].dist(r[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=id.types[o.type]==="Polygon";let B=r.length;for(;B>=2&&r[B-1].equals(r[B-2]);)B--;let F=0;for(;F<B-1&&r[F].equals(r[F+1]);)F++;if(B<(k?3:2))return;f==="bevel"&&(x=1.05);const Z=this.overscaling<=16?122880/(512*this.overscaling):0,W=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let J,te,ie,ue,xe;this.e1=this.e2=-1,k&&(J=r[B-2],xe=r[F].sub(J)._unit()._perp());for(let le=F;le<B;le++){if(ie=le===B-1?k?r[F+1]:void 0:r[le+1],ie&&r[le].equals(ie))continue;xe&&(ue=xe),J&&(te=J),J=r[le],xe=ie?ie.sub(J)._unit()._perp():ue,ue=ue||xe;let pe=ue.add(xe);pe.x===0&&pe.y===0||pe._unit();const Me=ue.x*xe.x+ue.y*xe.y,ke=pe.x*xe.x+pe.y*xe.y,We=ke!==0?1/ke:1/0,st=2*Math.sqrt(2-2*ke),lt=ke<N_&&te&&ie,yt=ue.x*xe.y-ue.y*xe.x>0;if(lt&&le>F){const ut=J.dist(te);if(ut>2*Z){const rt=J.sub(J.sub(te)._mult(Z/ut)._round());this.updateDistance(te,rt),this.addCurrentVertex(rt,ue,0,0,W),te=rt}}const Dt=te&&ie;let wt=Dt?f:k?"butt":m;if(Dt&&wt==="round"&&(We<b?wt="miter":We<=2&&(wt="fakeround")),wt==="miter"&&We>x&&(wt="bevel"),wt==="bevel"&&(We>2&&(wt="flipbevel"),We<x&&(wt="miter")),te&&this.updateDistance(te,J),wt==="miter")pe._mult(We),this.addCurrentVertex(J,pe,0,0,W);else if(wt==="flipbevel"){if(We>100)pe=xe.mult(-1);else{const ut=We*ue.add(xe).mag()/ue.sub(xe).mag();pe._perp()._mult(ut*(yt?-1:1))}this.addCurrentVertex(J,pe,0,0,W),this.addCurrentVertex(J,pe.mult(-1),0,0,W)}else if(wt==="bevel"||wt==="fakeround"){const ut=-Math.sqrt(We*We-1),rt=yt?ut:0,Lt=yt?0:ut;if(te&&this.addCurrentVertex(J,ue,rt,Lt,W),wt==="fakeround"){const Nt=Math.round(180*st/Math.PI/20);for(let Wt=1;Wt<Nt;Wt++){let Vt=Wt/Nt;if(Vt!==.5){const Nn=Vt-.5;Vt+=Vt*Nn*(Vt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*Nn*Nn+(.848013+Me*(.215638*Me-1.06021)))}const _r=xe.sub(ue)._mult(Vt)._add(ue)._unit()._mult(yt?-1:1);this.addHalfVertex(J,_r.x,_r.y,!1,yt,0,W)}}ie&&this.addCurrentVertex(J,xe,-rt,-Lt,W)}else if(wt==="butt")this.addCurrentVertex(J,pe,0,0,W);else if(wt==="square"){const ut=te?1:-1;this.addCurrentVertex(J,pe,ut,ut,W)}else wt==="round"&&(te&&(this.addCurrentVertex(J,ue,0,0,W),this.addCurrentVertex(J,ue,1,1,W,!0)),ie&&(this.addCurrentVertex(J,xe,-1,-1,W,!0),this.addCurrentVertex(J,xe,0,0,W)));if(lt&&le<B-1){const ut=J.dist(ie);if(ut>2*Z){const rt=J.add(ie.sub(J)._mult(Z/ut)._round());this.updateDistance(J,rt),this.addCurrentVertex(rt,xe,0,0,W),J=rt}}}}addCurrentVertex(r,o,f,m,x,b=!1){const E=o.y*m-o.x,P=-o.y-o.x*m;this.addHalfVertex(r,o.x+o.y*f,o.y-o.x*f,b,!1,f,x),this.addHalfVertex(r,E,P,b,!0,-m,x),this.distance>mp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,o,f,m,x,b))}addHalfVertex({x:r,y:o},f,m,x,b,E,P){const k=.5*(this.lineClips?this.scaledDistance*(mp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(x?1:0),(o<<1)+(b?1:0),Math.round(63*f)+128,Math.round(63*m)+128,1+(E===0?0:E<0?-1:1)|(63&k)<<2,k>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=P.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,B,this.e2),P.primitiveLength++),b?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,o){this.distance+=r.dist(o),this.updateScaledDistance()}hasLineDasharray(r){for(const o of r){const f=o.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(r,o,f,m){for(const x of r){const b=x.paint.get("line-dasharray");if(!b||b.value.kind==="constant")continue;const E=x.layout.get("line-cap")==="round",P={dasharray:b.value.evaluate({zoom:f-1},o,{}),round:E},k={dasharray:b.value.evaluate({zoom:f},o,{}),round:E},B={dasharray:b.value.evaluate({zoom:f+1},o,{}),round:E},F=`${P.dasharray.join(",")},${P.round}`,Z=`${k.dasharray.join(",")},${k.round}`,W=`${B.dasharray.join(",")},${B.round}`;m.dashDependencies[F]=P,m.dashDependencies[Z]=k,m.dashDependencies[W]=B,o.dashes[x.id]={min:F,mid:Z,max:W}}}}let Au,xi;kt("LineBucket",ad,{omit:["layers","patternFeatures"]});var Mu={get paint(){return xi=xi||new qn({"line-opacity":new Ft(De.paint_line["line-opacity"]),"line-color":new Ft(De.paint_line["line-color"]),"line-translate":new Rt(De.paint_line["line-translate"]),"line-translate-anchor":new Rt(De.paint_line["line-translate-anchor"]),"line-width":new Ft(De.paint_line["line-width"]),"line-gap-width":new Ft(De.paint_line["line-gap-width"]),"line-offset":new Ft(De.paint_line["line-offset"]),"line-blur":new Ft(De.paint_line["line-blur"]),"line-dasharray":new so(De.paint_line["line-dasharray"]),"line-pattern":new so(De.paint_line["line-pattern"]),"line-gradient":new Ih(De.paint_line["line-gradient"])})},get layout(){return Au=Au||new qn({"line-cap":new Rt(De.layout_line["line-cap"]),"line-join":new Ft(De.layout_line["line-join"]),"line-miter-limit":new Rt(De.layout_line["line-miter-limit"]),"line-round-limit":new Rt(De.layout_line["line-round-limit"]),"line-sort-key":new Ft(De.layout_line["line-sort-key"])})}};class od extends Ft{possiblyEvaluate(r,o){return o=new Ur(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(r,o)}evaluate(r,o,f,m){return o=Ar({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(r,o,f,m)}}let vs;class zy extends Tn{constructor(r,o){super(r,Mu,o),this.gradientVersion=0,vs||(vs=new od(Mu.paint.properties["line-width"].specification),vs.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(o)&&o._styleExpression.expression instanceof fl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,o){super.recalculate(r,o),this.paint._values["line-floorwidth"]=vs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new ad(r)}queryRadius(r){const o=r,f=Ym(_u("line-width",this,o),_u("line-gap-width",this,o)),m=_u("line-offset",this,o);return f/2+Math.abs(m)+ep(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:o,featureState:f,geometry:m,transform:x,pixelsToTileUnits:b}){const E=km(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,b),P=b/2*Ym(this.paint.get("line-width").evaluate(o,f),this.paint.get("line-gap-width").evaluate(o,f)),k=this.paint.get("line-offset").evaluate(o,f);return k&&(m=(function(B,F){const Z=[];for(let W=0;W<B.length;W++){const J=Rm(B[W]),te=[];for(let ie=0;ie<J.length;ie++){const ue=J[ie],xe=J[ie-1],le=J[ie+1],pe=ie===0?new M(0,0):ue.sub(xe)._unit()._perp(),Me=ie===J.length-1?new M(0,0):le.sub(ue)._unit()._perp(),ke=pe._add(Me)._unit(),We=ke.x*Me.x+ke.y*Me.y;We!==0&&ke._mult(1/We),te.push(ke._mult(F)._add(ue))}Z.push(te)}return Z})(m,k*b)),(function(B,F,Z){for(let W=0;W<F.length;W++){const J=F[W];if(B.length>=3){for(let te=0;te<J.length;te++)if(Pl(B,J[te]))return!0}if(yi(B,J,Z))return!0}return!1})(E,m,P)}isTileClipped(){return!0}}function Ym(s,r){return r>0?r+2*s:s}const F_=yn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),gp=yn([{name:"a_projected_pos",components:3,type:"Float32"}],4);yn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const ky=yn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);yn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const mo=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),U_=yn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function go(s,r,o){return s.sections.forEach((f=>{f.text=(function(m,x,b){const E=x.layout.get("text-transform").evaluate(b,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),oo.applyArabicShaping&&(m=oo.applyArabicShaping(m)),m})(f.text,r,o)})),s}yn([{name:"triangle",components:3,type:"Uint16"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),yn([{type:"Float32",name:"offsetX"}]),yn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),yn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var hi=24;const sd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Yb={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Tc={40:!0};function yp(s,r,o,f,m,x){if("fontStack"in r){const b=o[r.fontStack],E=b&&b[s];return E?E.metrics.advance*r.scale+m:0}{const b=f[r.imageName];return b?b.displaySize[0]*r.scale*hi/x+m:0}}function Xm(s,r,o,f){const m=Math.pow(s-r,2);return f?s<r?m/2:2*m:m+Math.abs(o)*o}function ld(s,r,o){let f=0;return s===10&&(f-=1e4),o&&(f+=150),s!==40&&s!==65288||(f+=50),r!==41&&r!==65289||(f+=50),f}function Ry(s,r,o,f,m,x){let b=null,E=Xm(r,o,m,x);for(const P of f){const k=Xm(r-P.x,o,m,x)+P.badness;k<=E&&(b=P,E=k)}return{index:s,x:r,priorBreak:b,badness:E}}function Ly(s){return s?Ly(s.priorBreak).concat(s.index):[]}class Gh{constructor(r="",o=[],f=[]){this.text=r,this.sections=o,this.sectionIndex=f,this.imageSectionID=null}static fromFeature(r,o){const f=new Gh;for(let m=0;m<r.sections.length;m++){const x=r.sections[m];x.image?f.addImageSection(x):f.addTextSection(x,o)}return f}length(){return[...this.text].length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}verticalizePunctuation(){this.text=(function(r){let o="",f={premature:!0,value:void 0};const m=r[Symbol.iterator]();let x=m.next();const b=r[Symbol.iterator]();b.next();let E=b.next();for(;!x.done;)o+=!E.done&&fs(E.value.codePointAt(0))&&!sd[E.value]||!f.premature&&fs(f.value.codePointAt(0))&&!sd[f.value]||!sd[x.value]?x.value:sd[x.value],f={value:x.value,premature:!1},x=m.next(),E=b.next();return o})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const r=this.text.match(/^\s*/),o=r?r[0].length:0,f=this.text.match(/\S\s*$/),m=f?f[0].length-1:0;this.text=this.text.substring(o,this.text.length-m),this.sectionIndex=this.sectionIndex.slice(o,this.sectionIndex.length-m)}substring(r,o){const f=[...this.text].slice(r,o).join(""),m=this.sectionIndex.slice(r,o);return new Gh(f,this.sections,m)}toCodeUnitIndex(r){return[...this.text].slice(0,r).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((r,o)=>Math.max(r,this.sections[o].scale)),0)}getMaxImageSize(r){let o=0,f=0;for(let m=0;m<this.length();m++){const x=this.getSection(m);if("imageName"in x){const b=r[x.imageName];if(!b)continue;const E=b.displaySize;o=Math.max(o,E[0]),f=Math.max(f,E[1])}}return{maxImageWidth:o,maxImageHeight:f}}addTextSection(r,o){this.text+=r.text,this.sections.push({scale:r.scale||1,verticalAlign:r.verticalAlign||"bottom",fontStack:r.fontStack||o});const f=this.sections.length-1;this.sectionIndex.push(...[...r.text].map((()=>f)))}addImageSection(r){const o=r.image?r.image.name:"";if(o.length===0)return void cr("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push({scale:1,verticalAlign:r.verticalAlign||"bottom",imageName:o}),this.sectionIndex.push(this.sections.length-1)):cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(r,o,f,m,x){const b=[],E=this.determineAverageLineWidth(r,o,f,m,x),P=this.hasZeroWidthSpaces();let k=0,B=0;const F=this.text[Symbol.iterator]();let Z=F.next();const W=this.text[Symbol.iterator]();W.next();let J=W.next();const te=this.text[Symbol.iterator]();te.next(),te.next();let ie=te.next();for(;!Z.done;){const ue=this.getSection(B),xe=Z.value.codePointAt(0);if(Mh(xe)||(k+=yp(xe,ue,f,m,r,x)),!J.done){const le=us(xe),pe=J.value.codePointAt(0);(Yb[xe]||le||"imageName"in ue||!ie.done&&Tc[pe])&&b.push(Ry(B+1,k,E,b,ld(xe,pe,le&&P),!1))}B++,Z=F.next(),J=W.next(),ie=te.next()}return Ly(Ry(this.length(),k,E,b,0,!0))}determineAverageLineWidth(r,o,f,m,x){let b=0,E=0;for(const P of this.text){const k=this.getSection(E);b+=yp(P.codePointAt(0),k,f,m,r,x),E++}return b/Math.max(1,Math.ceil(b/o))}}const Km=4294967296,vp=1/Km,Qm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Jm{constructor(r=new Uint8Array(16)){this.buf=ArrayBuffer.isView(r)?r:new Uint8Array(r),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(r,o,f=this.length){for(;this.pos<f;){const m=this.readVarint(),x=m>>3,b=this.pos;this.type=7&m,r(x,o,this),this.pos===b&&this.skip(m)}return o}readMessage(r,o){return this.readFields(r,o,this.readVarint()+this.pos)}readFixed32(){const r=this.dataView.getUint32(this.pos,!0);return this.pos+=4,r}readSFixed32(){const r=this.dataView.getInt32(this.pos,!0);return this.pos+=4,r}readFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Km;return this.pos+=8,r}readSFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Km;return this.pos+=8,r}readFloat(){const r=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,r}readDouble(){const r=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,r}readVarint(r){const o=this.buf;let f,m;return m=o[this.pos++],f=127&m,m<128?f:(m=o[this.pos++],f|=(127&m)<<7,m<128?f:(m=o[this.pos++],f|=(127&m)<<14,m<128?f:(m=o[this.pos++],f|=(127&m)<<21,m<128?f:(m=o[this.pos],f|=(15&m)<<28,(function(x,b,E){const P=E.buf;let k,B;if(B=P[E.pos++],k=(112&B)>>4,B<128||(B=P[E.pos++],k|=(127&B)<<3,B<128)||(B=P[E.pos++],k|=(127&B)<<10,B<128)||(B=P[E.pos++],k|=(127&B)<<17,B<128)||(B=P[E.pos++],k|=(127&B)<<24,B<128)||(B=P[E.pos++],k|=(1&B)<<31,B<128))return ud(x,k,b);throw new Error("Expected varint not more than 10 bytes")})(f,r,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const r=this.readVarint();return r%2==1?(r+1)/-2:r/2}readBoolean(){return!!this.readVarint()}readString(){const r=this.readVarint()+this.pos,o=this.pos;return this.pos=r,r-o>=12&&Qm?Qm.decode(this.buf.subarray(o,r)):(function(f,m,x){let b="",E=m;for(;E<x;){const P=f[E];let k,B,F,Z=null,W=P>239?4:P>223?3:P>191?2:1;if(E+W>x)break;W===1?P<128&&(Z=P):W===2?(k=f[E+1],(192&k)==128&&(Z=(31&P)<<6|63&k,Z<=127&&(Z=null))):W===3?(k=f[E+1],B=f[E+2],(192&k)==128&&(192&B)==128&&(Z=(15&P)<<12|(63&k)<<6|63&B,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):W===4&&(k=f[E+1],B=f[E+2],F=f[E+3],(192&k)==128&&(192&B)==128&&(192&F)==128&&(Z=(15&P)<<18|(63&k)<<12|(63&B)<<6|63&F,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,W=1):Z>65535&&(Z-=65536,b+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),b+=String.fromCharCode(Z),E+=W}return b})(this.buf,o,r)}readBytes(){const r=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,r);return this.pos=r,o}readPackedVarint(r=[],o){const f=this.readPackedEnd();for(;this.pos<f;)r.push(this.readVarint(o));return r}readPackedSVarint(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readSVarint());return r}readPackedBoolean(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readBoolean());return r}readPackedFloat(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readFloat());return r}readPackedDouble(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readDouble());return r}readPackedFixed32(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readFixed32());return r}readPackedSFixed32(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readSFixed32());return r}readPackedFixed64(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readFixed64());return r}readPackedSFixed64(r=[]){const o=this.readPackedEnd();for(;this.pos<o;)r.push(this.readSFixed64());return r}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(r){const o=7&r;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(r,o){this.writeVarint(r<<3|o)}realloc(r){let o=this.length||16;for(;o<this.pos+r;)o*=2;if(o!==this.length){const f=new Uint8Array(o);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeSFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*vp),!0),this.pos+=8}writeSFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*vp),!0),this.pos+=8}writeVarint(r){(r=+r||0)>268435455||r<0?(function(o,f){let m,x;if(o>=0?(m=o%4294967296|0,x=o/4294967296|0):(m=~(-o%4294967296),x=~(-o/4294967296),4294967295^m?m=m+1|0:(m=0,x=x+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(b,E,P){P.buf[P.pos++]=127&b|128,b>>>=7,P.buf[P.pos++]=127&b|128,b>>>=7,P.buf[P.pos++]=127&b|128,b>>>=7,P.buf[P.pos++]=127&b|128,P.buf[P.pos]=127&(b>>>=7)})(m,0,f),(function(b,E){const P=(7&b)<<4;E.buf[E.pos++]|=P|((b>>>=3)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b|((b>>>=7)?128:0),b&&(E.buf[E.pos++]=127&b)))))})(x,f)})(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))}writeSVarint(r){this.writeVarint(r<0?2*-r-1:2*r)}writeBoolean(r){this.writeVarint(+r)}writeString(r){r=String(r),this.realloc(4*r.length),this.pos++;const o=this.pos;this.pos=(function(m,x,b){for(let E,P,k=0;k<x.length;k++){if(E=x.charCodeAt(k),E>55295&&E<57344){if(!P){E>56319||k+1===x.length?(m[b++]=239,m[b++]=191,m[b++]=189):P=E;continue}if(E<56320){m[b++]=239,m[b++]=191,m[b++]=189,P=E;continue}E=P-55296<<10|E-56320|65536,P=null}else P&&(m[b++]=239,m[b++]=191,m[b++]=189,P=null);E<128?m[b++]=E:(E<2048?m[b++]=E>>6|192:(E<65536?m[b++]=E>>12|224:(m[b++]=E>>18|240,m[b++]=E>>12&63|128),m[b++]=E>>6&63|128),m[b++]=63&E|128)}return b})(this.buf,r,this.pos);const f=this.pos-o;f>=128&&V_(o,f,this),this.pos=o-1,this.writeVarint(f),this.pos+=f}writeFloat(r){this.realloc(4),this.dataView.setFloat32(this.pos,r,!0),this.pos+=4}writeDouble(r){this.realloc(8),this.dataView.setFloat64(this.pos,r,!0),this.pos+=8}writeBytes(r){const o=r.length;this.writeVarint(o),this.realloc(o);for(let f=0;f<o;f++)this.buf[this.pos++]=r[f]}writeRawMessage(r,o){this.pos++;const f=this.pos;r(o,this);const m=this.pos-f;m>=128&&V_(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m}writeMessage(r,o,f){this.writeTag(r,2),this.writeRawMessage(o,f)}writePackedVarint(r,o){o.length&&this.writeMessage(r,q_,o)}writePackedSVarint(r,o){o.length&&this.writeMessage(r,$_,o)}writePackedBoolean(r,o){o.length&&this.writeMessage(r,G_,o)}writePackedFloat(r,o){o.length&&this.writeMessage(r,cd,o)}writePackedDouble(r,o){o.length&&this.writeMessage(r,eg,o)}writePackedFixed32(r,o){o.length&&this.writeMessage(r,Z_,o)}writePackedSFixed32(r,o){o.length&&this.writeMessage(r,H_,o)}writePackedFixed64(r,o){o.length&&this.writeMessage(r,W_,o)}writePackedSFixed64(r,o){o.length&&this.writeMessage(r,Y_,o)}writeBytesField(r,o){this.writeTag(r,2),this.writeBytes(o)}writeFixed32Field(r,o){this.writeTag(r,5),this.writeFixed32(o)}writeSFixed32Field(r,o){this.writeTag(r,5),this.writeSFixed32(o)}writeFixed64Field(r,o){this.writeTag(r,1),this.writeFixed64(o)}writeSFixed64Field(r,o){this.writeTag(r,1),this.writeSFixed64(o)}writeVarintField(r,o){this.writeTag(r,0),this.writeVarint(o)}writeSVarintField(r,o){this.writeTag(r,0),this.writeSVarint(o)}writeStringField(r,o){this.writeTag(r,2),this.writeString(o)}writeFloatField(r,o){this.writeTag(r,5),this.writeFloat(o)}writeDoubleField(r,o){this.writeTag(r,1),this.writeDouble(o)}writeBooleanField(r,o){this.writeVarintField(r,+o)}}function ud(s,r,o){return o?4294967296*r+(s>>>0):4294967296*(r>>>0)+(s>>>0)}function V_(s,r,o){const f=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));o.realloc(f);for(let m=o.pos-1;m>=s;m--)o.buf[m+f]=o.buf[m]}function q_(s,r){for(let o=0;o<s.length;o++)r.writeVarint(s[o])}function $_(s,r){for(let o=0;o<s.length;o++)r.writeSVarint(s[o])}function cd(s,r){for(let o=0;o<s.length;o++)r.writeFloat(s[o])}function eg(s,r){for(let o=0;o<s.length;o++)r.writeDouble(s[o])}function G_(s,r){for(let o=0;o<s.length;o++)r.writeBoolean(s[o])}function Z_(s,r){for(let o=0;o<s.length;o++)r.writeFixed32(s[o])}function H_(s,r){for(let o=0;o<s.length;o++)r.writeSFixed32(s[o])}function W_(s,r){for(let o=0;o<s.length;o++)r.writeFixed64(s[o])}function Y_(s,r){for(let o=0;o<s.length;o++)r.writeSFixed64(s[o])}function X_(s,r,o){s===1&&o.readMessage(tg,r)}function tg(s,r,o){if(s===3){const{id:f,bitmap:m,width:x,height:b,left:E,top:P,advance:k}=o.readMessage(K_,{});r.push({id:f,bitmap:new np({width:x+6,height:b+6},m),metrics:{width:x,height:b,left:E,top:P,advance:k}})}}function K_(s,r,o){s===1?r.id=o.readVarint():s===2?r.bitmap=o.readBytes():s===3?r.width=o.readVarint():s===4?r.height=o.readVarint():s===5?r.left=o.readSVarint():s===6?r.top=o.readSVarint():s===7&&(r.advance=o.readVarint())}function jy(s){let r=0,o=0;for(const b of s)r+=b.w*b.h,o=Math.max(o,b.w);s.sort(((b,E)=>E.h-b.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),o),h:1/0}];let m=0,x=0;for(const b of s)for(let E=f.length-1;E>=0;E--){const P=f[E];if(!(b.w>P.w||b.h>P.h)){if(b.x=P.x,b.y=P.y,x=Math.max(x,b.y+b.h),m=Math.max(m,b.x+b.w),b.w===P.w&&b.h===P.h){const k=f.pop();k&&E<f.length&&(f[E]=k)}else b.h===P.h?(P.x+=b.w,P.w-=b.w):b.w===P.w?(P.y+=b.h,P.h-=b.h):(f.push({x:P.x+b.w,y:P.y,w:P.w-b.w,h:b.h}),P.y+=b.h,P.h-=b.h);break}}return{w:m,h:x,fill:r/(m*x)||0}}class en{constructor(r,{pixelRatio:o,version:f,stretchX:m,stretchY:x,content:b,textFitWidth:E,textFitHeight:P}){this.paddedRect=r,this.pixelRatio=o,this.stretchX=m,this.stretchY=x,this.content=b,this.version=f,this.textFitWidth=E,this.textFitHeight=P}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class rg{constructor(r,o){const f={},m={};this.haveRenderCallbacks=[];const x=[];this.addImages(r,f,x),this.addImages(o,m,x);const{w:b,h:E}=jy(x),P=new ua({width:b||1,height:E||1});for(const k in r){const B=r[k],F=f[k].paddedRect;ua.copy(B.data,P,{x:0,y:0},{x:F.x+1,y:F.y+1},B.data)}for(const k in o){const B=o[k],F=m[k].paddedRect,Z=F.x+1,W=F.y+1,J=B.data.width,te=B.data.height;ua.copy(B.data,P,{x:0,y:0},{x:Z,y:W},B.data),ua.copy(B.data,P,{x:0,y:te-1},{x:Z,y:W-1},{width:J,height:1}),ua.copy(B.data,P,{x:0,y:0},{x:Z,y:W+te},{width:J,height:1}),ua.copy(B.data,P,{x:J-1,y:0},{x:Z-1,y:W},{width:1,height:te}),ua.copy(B.data,P,{x:0,y:0},{x:Z+J,y:W},{width:1,height:te})}this.image=P,this.iconPositions=f,this.patternPositions=m}addImages(r,o,f){for(const m in r){const x=r[m],b={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(b),o[m]=new en(b,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(r,o){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in r.updatedImages)this.patchUpdatedImage(this.iconPositions[f],r.getImage(f),o),this.patchUpdatedImage(this.patternPositions[f],r.getImage(f),o)}patchUpdatedImage(r,o,f){if(!r||!o||r.version===o.version)return;r.version=o.version;const[m,x]=r.tl;f.update(o.data,void 0,{x:m,y:x})}}var Ec;function _p(s,r,o,f,m,x,b,E,P,k,B,F,Z,W,J){const te=Gh.fromFeature(s,m);let ie;F===v.az.vertical&&te.verticalizePunctuation();let ue=te.determineLineBreaks(k,x,r,f,W);const{processBidirectionalText:xe,processStyledBidirectionalText:le}=oo;if(xe&&te.sections.length===1){ie=[],ue=ue.map((We=>te.toCodeUnitIndex(We)));const ke=xe(te.toString(),ue);for(const We of ke){const st=[...We].map((()=>0));ie.push(new Gh(We,te.sections,st))}}else if(le){ie=[],ue=ue.map((lt=>te.toCodeUnitIndex(lt)));let ke=0;const We=[];for(const lt of te.text)We.push(...Array(lt.length).fill(te.sectionIndex[ke])),ke++;const st=le(te.text,We,ue);for(const lt of st){const yt=[];let Dt="";for(const wt of lt[0])yt.push(lt[1][Dt.length]),Dt+=wt;ie.push(new Gh(lt[0],te.sections,yt))}}else ie=(function(ke,We){const st=[];let lt=0;for(const yt of We)st.push(ke.substring(lt,yt)),lt=yt;return lt<ke.length()&&st.push(ke.substring(lt,ke.length())),st})(te,ue);const pe=[],Me={positionedLines:pe,text:te.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:F,iconsInText:!1,verticalizable:!1};return(function(ke,We,st,lt,yt,Dt,wt,ut,rt,Lt,Nt,Wt){let Vt=0,_r=0,Nn=0,wi=0;const da=ut==="right"?1:ut==="left"?0:.5,Ll=hi/Wt;let yo=0;for(const ri of yt){ri.trim();const Xi=ri.getMaxScale(),Ga={positionedGlyphs:[],lineOffset:0};ke.positionedLines[yo]=Ga;const Za=Ga.positionedGlyphs;let No=0;if(!ri.length()){_r+=Dt,++yo;continue}const ma=Xb(lt,ri,Ll);let Fo=0;for(const Bi of ri.text){const Gn=ri.getSection(Fo),Si=Bi.codePointAt(0),Kn=ng(rt,Nt,Si),Ni={glyph:Si,imageName:null,x:Vt,y:_r+-17,vertical:Kn,scale:1,fontStack:"",sectionIndex:ri.getSectionIndex(Fo),metrics:null,rect:null};let Kh;if("fontStack"in Gn){if(Kh=hd(Gn,Si,Kn,ma,We,st),!Kh)continue;Ni.fontStack=Gn.fontStack}else{if(ke.iconsInText=!0,Gn.scale*=Ll,Kh=Ny(Gn,Kn,Xi,ma,lt),!Kh)continue;No=Math.max(No,Kh.imageOffset),Ni.imageName=Gn.imageName}const{rect:Ru,metrics:dv,baselineOffset:_d}=Kh;Ni.y+=_d,Ni.scale=Gn.scale,Ni.metrics=dv,Ni.rect=Ru,Za.push(Ni),Kn?(ke.verticalizable=!0,Vt+=("imageName"in Gn?dv.advance:hi)*Gn.scale+Lt):Vt+=dv.advance*Gn.scale+Lt,Fo++}Za.length!==0&&(Nn=Math.max(Vt-Lt,Nn),ig(Za,0,Za.length-1,da)),Vt=0,Ga.lineOffset=Math.max(No,(Xi-1)*hi);const jl=Dt*Xi+No;_r+=jl,wi=Math.max(jl,wi),++yo}const{horizontalAlign:Yi,verticalAlign:pa}=By(wt);(function(ri,Xi,Ga,Za,No,ma,Fo,jl,Bi){const Gn=(Xi-Ga)*No;let Si=0;Si=ma!==Fo?-jl*Za- -17:-Za*Bi*Fo+.5*Fo;for(const Kn of ri)for(const Ni of Kn.positionedGlyphs)Ni.x+=Gn,Ni.y+=Si})(ke.positionedLines,da,Yi,pa,Nn,wi,Dt,_r,yt.length),ke.top+=-pa*_r,ke.bottom=ke.top+_r,ke.left+=-Yi*Nn,ke.right=ke.left+Nn})(Me,r,o,f,ie,b,E,P,F,k,Z,J),!(function(ke){for(const We of ke)if(We.positionedGlyphs.length!==0)return!1;return!0})(pe)&&Me}function By(s){let r=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:r,verticalAlign:o}}function Xb(s,r,o){const f=r.getMaxScale()*hi,{maxImageWidth:m,maxImageHeight:x}=r.getMaxImageSize(s),b=Math.max(f,x*o);return{verticalLineContentWidth:Math.max(f,m*o),horizontalLineContentHeight:b}}function Q_(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function ng(s,r,o){return!(s===v.az.horizontal||!r&&!hu(o)||r&&(Mh(o)||(f=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function hd(s,r,o,f,m,x){const b=x[s.fontStack],E=(function(k,B,F,Z){if(k&&k.rect)return k;const W=B[F.fontStack],J=W&&W[Z];return J?{rect:null,metrics:J.metrics}:null})(b&&b[r],m,s,r);if(E===null)return null;let P;if(o)P=f.verticalLineContentWidth-s.scale*hi;else{const k=Q_(s.verticalAlign);P=(f.horizontalLineContentHeight-s.scale*hi)*k}return{rect:E.rect,metrics:E.metrics,baselineOffset:P}}function Ny(s,r,o,f,m){const x=m[s.imageName];if(!x)return null;const b=x.paddedRect,E=x.displaySize,P={width:E[0],height:E[1],left:1,top:-3,advance:r?E[1]:E[0]};let k;if(r)k=f.verticalLineContentWidth-E[1]*s.scale;else{const B=Q_(s.verticalAlign);k=(f.horizontalLineContentHeight-E[1]*s.scale)*B}return{rect:b,metrics:P,baselineOffset:k,imageOffset:(r?E[0]:E[1])*s.scale-hi*o}}function ig(s,r,o,f){if(f===0)return;const m=s[o],x=(s[o].x+m.metrics.advance*m.scale)*f;for(let b=r;b<=o;b++)s[b].x-=x}function Fy(s,r,o){const{horizontalAlign:f,verticalAlign:m}=By(o),x=r[0]-s.displaySize[0]*f,b=r[1]-s.displaySize[1]*m;return{image:s,top:b,bottom:b+s.displaySize[1],left:x,right:x+s.displaySize[0]}}function Pu(s){var r,o;let f=s.left,m=s.top,x=s.right-f,b=s.bottom-m;const E=(r=s.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",P=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",k=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(P==="proportional"){if(E==="stretchOnly"&&x/b<k||E==="proportional"){const B=Math.ceil(b*k);f*=B/x,x=B}}else if(E==="proportional"&&P==="stretchOnly"&&k!==0&&x/b>k){const B=Math.ceil(x/k);m*=B/b,b=B}return{x1:f,y1:m,x2:f+x,y2:m+b}}function Gs(s,r,o,f,m,x){const b=s.image;let E;if(b.content){const ie=b.content,ue=b.pixelRatio||1;E=[ie[0]/ue,ie[1]/ue,b.displaySize[0]-ie[2]/ue,b.displaySize[1]-ie[3]/ue]}const P=r.left*x,k=r.right*x;let B,F,Z,W;o==="width"||o==="both"?(W=m[0]+P-f[3],F=m[0]+k+f[1]):(W=m[0]+(P+k-b.displaySize[0])/2,F=W+b.displaySize[0]);const J=r.top*x,te=r.bottom*x;return o==="height"||o==="both"?(B=m[1]+J-f[0],Z=m[1]+te+f[2]):(B=m[1]+(J+te-b.displaySize[1])/2,Z=B+b.displaySize[1]),{image:b,top:B,right:F,bottom:Z,left:W,collisionPadding:E}}kt("ImagePosition",en),kt("ImageAtlas",rg),v.az=void 0,(Ec=v.az||(v.az={}))[Ec.none=0]="none",Ec[Ec.horizontal=1]="horizontal",Ec[Ec.vertical=2]="vertical",Ec[Ec.horizontalOnly=3]="horizontalOnly";const jo=128,Ac=32640;function Uy(s,r){const{expression:o}=r;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new Ur(s+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:m}=o;let x=0;for(;x<f.length&&f[x]<=s;)x++;x=Math.max(0,x-1);let b=x;for(;b<f.length&&f[b]<s+1;)b++;b=Math.min(f.length-1,b);const E=f[x],P=f[b];return o.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:P,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:P,minSize:o.evaluate(new Ur(E)),maxSize:o.evaluate(new Ur(P)),interpolationType:m}}}function ag(s,r,o){let f="never";const m=s.get(r);return m?f=m:s.get(o)&&(f="always"),f}const J_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xp(s,r,o,f,m,x,b,E,P,k,B,F,Z){const W=E?Math.min(Ac,Math.round(E[0])):0,J=E?Math.min(Ac,Math.round(E[1])):0;s.emplaceBack(r,o,Math.round(32*f),Math.round(32*m),x,b,(W<<1)+(P?1:0),J,16*k,16*B,256*F,256*Z)}function Vy(s,r,o){s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o),s.emplaceBack(r.x,r.y,o)}function qy(s){for(const r of s.sections)if(Ls(r.text))return!0;return!1}class og{constructor(r){this.layoutVertexArray=new Ee,this.indexArray=new Xe,this.programConfigurations=r,this.segments=new Ot,this.dynamicLayoutVertexArray=new Le,this.opacityVertexArray=new Ke,this.hasVisibleVertices=!1,this.placedSymbolArray=new A}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,o,f,m){this.isEmpty()||(f&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,F_.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,gp.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,J_,!0),this.opacityVertexBuffer.itemSize=1),(f||m)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}kt("SymbolBuffers",og);class sg{constructor(r,o,f){this.layoutVertexArray=new r,this.layoutAttributes=o,this.indexArray=new f,this.segments=new Ot,this.collisionVertexArray=new Ye}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,ky.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}kt("CollisionBuffers",sg);class fd{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((b=>b.id)),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Uy(this.zoom,o["text-size"]),this.iconSizeData=Uy(this.zoom,o["icon-size"]);const f=this.layers[0].layout,m=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=ag(f,"text-overlap","text-allow-overlap")!=="never"||ag(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((b=>v.az[b]))),this.stateDependentLayerIds=this.layers.filter((b=>b.isStateDependent())).map((b=>b.id)),this.sourceID=r.sourceID}createArrays(){this.text=new og(new Al(this.layers,this.zoom,(r=>/^text/.test(r)))),this.icon=new og(new Al(this.layers,this.zoom,(r=>/^icon/.test(r)))),this.glyphOffsetArray=new U,this.lineVertexArray=new V,this.symbolInstances=new R,this.textAnchorOffsets=new X}calculateGlyphDependencies(r,o,f,m,x){for(const b of r)if(o[b.codePointAt(0)]=!0,(f||m)&&x){const E=sd[b];E&&(o[E.codePointAt(0)]=!0)}}populate(r,o,f){const m=this.layers[0],x=m.layout,b=x.get("text-font"),E=x.get("text-field"),P=x.get("icon-image"),k=(E.value.kind!=="constant"||E.value.value instanceof si&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),B=P.value.kind!=="constant"||!!P.value.value||Object.keys(P.parameters).length>0,F=x.get("symbol-sort-key");if(this.features=[],!k&&!B)return;const Z=o.iconDependencies,W=o.glyphDependencies,J=o.availableImages,te=new Ur(this.zoom);for(const{feature:ie,id:ue,index:xe,sourceLayerIndex:le}of r){const pe=m._featureFilter.needGeometry,Me=Ro(ie,pe);if(!m._featureFilter.filter(te,Me,f))continue;let ke,We;if(pe||(Me.geometry=Vs(ie)),k){const lt=m.getValueAndResolveTokens("text-field",Me,f,J),yt=si.factory(lt),Dt=this.hasRTLText=this.hasRTLText||qy(yt);(!Dt||oo.getRTLTextPluginStatus()==="unavailable"||Dt&&oo.isParsed())&&(ke=go(yt,m,Me))}if(B){const lt=m.getValueAndResolveTokens("icon-image",Me,f,J);We=lt instanceof Vi?lt:Vi.fromString(lt)}if(!ke&&!We)continue;const st=this.sortFeaturesByKey?F.evaluate(Me,{},f):void 0;if(this.features.push({id:ue,text:ke,icon:We,index:xe,sourceLayerIndex:le,geometry:Me.geometry,properties:ie.properties,type:id.types[ie.type],sortKey:st}),We&&(Z[We.name]=!0),ke){const lt=b.evaluate(Me,{},f).join(","),yt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.az.vertical)>=0;for(const Dt of ke.sections)if(Dt.image)Z[Dt.image.name]=!0;else{const wt=cs(ke.toString()),ut=Dt.fontStack||lt,rt=W[ut]=W[ut]||{};this.calculateGlyphDependencies(Dt.text,rt,yt,this.allowVerticalPlacement,wt)}}}x.get("symbol-placement")==="line"&&(this.features=(function(ie){const ue={},xe={},le=[];let pe=0;function Me(lt){le.push(ie[lt]),pe++}function ke(lt,yt,Dt){const wt=xe[lt];return delete xe[lt],xe[yt]=wt,le[wt].geometry[0].pop(),le[wt].geometry[0]=le[wt].geometry[0].concat(Dt[0]),wt}function We(lt,yt,Dt){const wt=ue[yt];return delete ue[yt],ue[lt]=wt,le[wt].geometry[0].shift(),le[wt].geometry[0]=Dt[0].concat(le[wt].geometry[0]),wt}function st(lt,yt,Dt){const wt=Dt?yt[0][yt[0].length-1]:yt[0][0];return`${lt}:${wt.x}:${wt.y}`}for(let lt=0;lt<ie.length;lt++){const yt=ie[lt],Dt=yt.geometry,wt=yt.text?yt.text.toString():null;if(!wt){Me(lt);continue}const ut=st(wt,Dt),rt=st(wt,Dt,!0);if(ut in xe&&rt in ue&&xe[ut]!==ue[rt]){const Lt=We(ut,rt,Dt),Nt=ke(ut,rt,le[Lt].geometry);delete ue[ut],delete xe[rt],xe[st(wt,le[Nt].geometry,!0)]=Nt,le[Lt].geometry=null}else ut in xe?ke(ut,rt,Dt):rt in ue?We(ut,rt,Dt):(Me(lt),ue[ut]=pe-1,xe[rt]=pe-1)}return le.filter((lt=>lt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ie,ue)=>ie.sortKey-ue.sortKey))}update(r,o,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,o,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(r,o,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,o){const f=this.lineVertexArray.length;if(r.segment!==void 0){let m=r.dist(o[r.segment+1]),x=r.dist(o[r.segment]);const b={};for(let E=r.segment+1;E<o.length;E++)b[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:m},E<o.length-1&&(m+=o[E+1].dist(o[E]));for(let E=r.segment||0;E>=0;E--)b[E]={x:o[E].x,y:o[E].y,tileUnitDistanceFromAnchor:x},E>0&&(x+=o[E-1].dist(o[E]));for(let E=0;E<o.length;E++){const P=b[E];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(r,o,f,m,x,b,E,P,k,B,F,Z){const W=r.indexArray,J=r.layoutVertexArray,te=r.segments.prepareSegment(4*o.length,J,W,this.canOverlap?b.sortKey:void 0),ie=this.glyphOffsetArray.length,ue=te.vertexLength,xe=this.allowVerticalPlacement&&E===v.az.vertical?Math.PI/2:0,le=b.text&&b.text.sections;for(let pe=0;pe<o.length;pe++){const{tl:Me,tr:ke,bl:We,br:st,tex:lt,pixelOffsetTL:yt,pixelOffsetBR:Dt,minFontScaleX:wt,minFontScaleY:ut,glyphOffset:rt,isSDF:Lt,sectionIndex:Nt}=o[pe],Wt=te.vertexLength,Vt=rt[1];xp(J,P.x,P.y,Me.x,Vt+Me.y,lt.x,lt.y,f,Lt,yt.x,yt.y,wt,ut),xp(J,P.x,P.y,ke.x,Vt+ke.y,lt.x+lt.w,lt.y,f,Lt,Dt.x,yt.y,wt,ut),xp(J,P.x,P.y,We.x,Vt+We.y,lt.x,lt.y+lt.h,f,Lt,yt.x,Dt.y,wt,ut),xp(J,P.x,P.y,st.x,Vt+st.y,lt.x+lt.w,lt.y+lt.h,f,Lt,Dt.x,Dt.y,wt,ut),Vy(r.dynamicLayoutVertexArray,P,xe),W.emplaceBack(Wt,Wt+2,Wt+1),W.emplaceBack(Wt+1,Wt+2,Wt+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rt[0]),pe!==o.length-1&&Nt===o[pe+1].sectionIndex||r.programConfigurations.populatePaintArrays(J.length,b,b.index,{imagePositions:{},canonical:Z,formattedSection:le&&le[Nt]})}r.placedSymbolArray.emplaceBack(P.x,P.y,ie,this.glyphOffsetArray.length-ie,ue,k,B,P.segment,f?f[0]:0,f?f[1]:0,m[0],m[1],E,0,!1,0,F)}_addCollisionDebugVertex(r,o,f,m,x,b){return o.emplaceBack(0,0),r.emplaceBack(f.x,f.y,m,x,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(r,o,f,m,x,b,E){const P=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),k=P.vertexLength,B=x.layoutVertexArray,F=x.collisionVertexArray,Z=E.anchorX,W=E.anchorY;this._addCollisionDebugVertex(B,F,b,Z,W,new M(r,o)),this._addCollisionDebugVertex(B,F,b,Z,W,new M(f,o)),this._addCollisionDebugVertex(B,F,b,Z,W,new M(f,m)),this._addCollisionDebugVertex(B,F,b,Z,W,new M(r,m)),P.vertexLength+=4;const J=x.indexArray;J.emplaceBack(k,k+1),J.emplaceBack(k+1,k+2),J.emplaceBack(k+2,k+3),J.emplaceBack(k+3,k),P.primitiveLength+=4}addDebugCollisionBoxes(r,o,f,m){for(let x=r;x<o;x++){const b=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,m?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sg(He,mo.members,At),this.iconCollisionBox=new sg(He,mo.members,At);for(let r=0;r<this.symbolInstances.length;r++){const o=this.symbolInstances.get(r);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(r,o,f,m,x,b,E,P,k){const B={};for(let F=o;F<f;F++){const Z=r.get(F);B.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},B.textFeatureIndex=Z.featureIndex;break}for(let F=m;F<x;F++){const Z=r.get(F);B.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},B.verticalTextFeatureIndex=Z.featureIndex;break}for(let F=b;F<E;F++){const Z=r.get(F);B.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},B.iconFeatureIndex=Z.featureIndex;break}for(let F=P;F<k;F++){const Z=r.get(F);B.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},B.verticalIconFeatureIndex=Z.featureIndex;break}return B}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const f=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,o){const f=r.placedSymbolArray.get(o),m=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<m;x+=4)r.indexArray.emplaceBack(x,x+2,x+1),r.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(r),f=Math.cos(r),m=[],x=[],b=[];for(let E=0;E<this.symbolInstances.length;++E){b.push(E);const P=this.symbolInstances.get(E);m.push(0|Math.round(o*P.anchorX+f*P.anchorY)),x.push(P.featureIndex)}return b.sort(((E,P)=>m[E]-m[P]||x[P]-x[E])),b}addToSortKeyRanges(r,o){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===o?f.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const f=this.symbolInstances.get(o);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((m,x,b)=>{m>=0&&b.indexOf(m)===x&&this.addIndicesForPlacedSymbol(this.text,m)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let lg,ug;kt("SymbolBucket",fd,{omit:["layers","collisionBoxArray","features","compareText"]}),fd.MAX_GLYPHS=65535,fd.addDynamicAttributes=Vy;var $y={get paint(){return ug=ug||new qn({"icon-opacity":new Ft(De.paint_symbol["icon-opacity"]),"icon-color":new Ft(De.paint_symbol["icon-color"]),"icon-halo-color":new Ft(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ft(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ft(De.paint_symbol["icon-halo-blur"]),"icon-translate":new Rt(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new Rt(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ft(De.paint_symbol["text-opacity"]),"text-color":new Ft(De.paint_symbol["text-color"],{runtimeType:Ma,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Ft(De.paint_symbol["text-halo-color"]),"text-halo-width":new Ft(De.paint_symbol["text-halo-width"]),"text-halo-blur":new Ft(De.paint_symbol["text-halo-blur"]),"text-translate":new Rt(De.paint_symbol["text-translate"]),"text-translate-anchor":new Rt(De.paint_symbol["text-translate-anchor"])})},get layout(){return lg=lg||new qn({"symbol-placement":new Rt(De.layout_symbol["symbol-placement"]),"symbol-spacing":new Rt(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Rt(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ft(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Rt(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Rt(De.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Rt(De.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Rt(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new Rt(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Rt(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ft(De.layout_symbol["icon-size"]),"icon-text-fit":new Rt(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Rt(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ft(De.layout_symbol["icon-image"]),"icon-rotate":new Ft(De.layout_symbol["icon-rotate"]),"icon-padding":new Ft(De.layout_symbol["icon-padding"]),"icon-keep-upright":new Rt(De.layout_symbol["icon-keep-upright"]),"icon-offset":new Ft(De.layout_symbol["icon-offset"]),"icon-anchor":new Ft(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Rt(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Rt(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Rt(De.layout_symbol["text-rotation-alignment"]),"text-field":new Ft(De.layout_symbol["text-field"]),"text-font":new Ft(De.layout_symbol["text-font"]),"text-size":new Ft(De.layout_symbol["text-size"]),"text-max-width":new Ft(De.layout_symbol["text-max-width"]),"text-line-height":new Rt(De.layout_symbol["text-line-height"]),"text-letter-spacing":new Ft(De.layout_symbol["text-letter-spacing"]),"text-justify":new Ft(De.layout_symbol["text-justify"]),"text-radial-offset":new Ft(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Rt(De.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ft(De.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ft(De.layout_symbol["text-anchor"]),"text-max-angle":new Rt(De.layout_symbol["text-max-angle"]),"text-writing-mode":new Rt(De.layout_symbol["text-writing-mode"]),"text-rotate":new Ft(De.layout_symbol["text-rotate"]),"text-padding":new Rt(De.layout_symbol["text-padding"]),"text-keep-upright":new Rt(De.layout_symbol["text-keep-upright"]),"text-transform":new Ft(De.layout_symbol["text-transform"]),"text-offset":new Ft(De.layout_symbol["text-offset"]),"text-allow-overlap":new Rt(De.layout_symbol["text-allow-overlap"]),"text-overlap":new Rt(De.layout_symbol["text-overlap"]),"text-ignore-placement":new Rt(De.layout_symbol["text-ignore-placement"]),"text-optional":new Rt(De.layout_symbol["text-optional"])})}};class e0{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Fr,this.defaultValue=r}evaluate(r){if(r.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(r.formattedSection))return o.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}kt("FormatSectionOverride",e0,{omit:["defaultValue"]});class Mc extends Tn{constructor(r,o){super(r,$y,o)}recalculate(r,o){if(super.recalculate(r,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const m=[];for(const x of f)m.indexOf(x)<0&&m.push(x);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,o,f,m){const x=this.layout.get(r).evaluate(o,{},f,m),b=this._unevaluatedLayout._values[r];return b.isDataDriven()||_l(b.value)||!x?x:(function(E,P){return P.replace(/{([^{}]+)}/g,((k,B)=>E&&B in E?String(E[B]):""))})(o.properties,x)}createBucket(r){return new fd(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of $y.paint.overridableProperties){if(!Mc.hasPaintOverride(this.layout,r))continue;const o=this.paint.get(r),f=new e0(o),m=new Ff(f,o.property.specification);let x=null;x=o.value.kind==="constant"||o.value.kind==="source"?new Hi("source",m):new xl("composite",m,o.value.zoomStops),this.paint._values[r]=new ja(o.property,x,o.parameters)}}_handleOverridablePaintPropertyUpdate(r,o,f){return!(!this.layout||o.isDataDriven()||f.isDataDriven())&&Mc.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,o){const f=r.get("text-field"),m=$y.paint.properties[o];let x=!1;const b=E=>{for(const P of E)if(m.overrides&&m.overrides.hasOverride(P))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof si)b(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const E=k=>{x||(k instanceof Ca&&mn(k.value)===Ho?b(k.value.sections):k instanceof uh?b(k.sections):k.eachChild(E))},P=f.value;P._styleExpression&&E(P._styleExpression.expression)}return x}}let t0;var r0={get paint(){return t0=t0||new qn({"background-color":new Rt(De.paint_background["background-color"]),"background-pattern":new yc(De.paint_background["background-pattern"]),"background-opacity":new Rt(De.paint_background["background-opacity"])})}};class Cr extends Tn{constructor(r,o){super(r,r0,o)}}class Gy extends Tn{constructor(r,o){super(r,{},o),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class cg{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Zy={once:!0},hg=63710088e-1;class Il{constructor(r,o){if(isNaN(r)||isNaN(o))throw new Error(`Invalid LngLat object: (${r}, ${o})`);if(this.lng=+r,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Il(Gt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const o=Math.PI/180,f=this.lat*o,m=r.lat*o,x=Math.sin(f)*Math.sin(m)+Math.cos(f)*Math.cos(m)*Math.cos((r.lng-this.lng)*o);return hg*Math.acos(Math.min(x,1))}static convert(r){if(r instanceof Il)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Il(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Il(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const dd=2*Math.PI*hg;function bp(s){return dd*Math.cos(s*Math.PI/180)}function n0(s){return(180+s)/360}function Hy(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function i0(s,r){return s/bp(r)}function a0(s){return 360*s-180}function wp(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function Wy(s,r){return s*bp(wp(r))}class Zr{constructor(r,o,f=0){this.x=+r,this.y=+o,this.z=+f}static fromLngLat(r,o=0){const f=Il.convert(r);return new Zr(n0(f.lng),Hy(f.lat),i0(o,f.lat))}toLngLat(){return new Il(a0(this.x),wp(this.y))}toAltitude(){return Wy(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/dd*(r=wp(this.y),1/Math.cos(r*Math.PI/180));var r}}function fg(s,r,o){var f=2*Math.PI*6378137/256/Math.pow(2,o);return[s*f-2*Math.PI*6378137/2,r*f-2*Math.PI*6378137/2]}class Oi{constructor(r,o,f){if(!(function(m,x,b){return!(m<0||m>25||b<0||b>=Math.pow(2,m)||x<0||x>=Math.pow(2,m))})(r,o,f))throw new Error(`x=${o}, y=${f}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=o,this.y=f,this.key=pd(0,r,r,o,f)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,o,f){const m=(b=this.y,E=this.z,P=fg(256*(x=this.x),256*(b=Math.pow(2,E)-b-1),E),k=fg(256*(x+1),256*(b+1),E),P[0]+","+P[1]+","+k[0]+","+k[1]);var x,b,E,P,k;const B=(function(F,Z,W){let J,te="";for(let ie=F;ie>0;ie--)J=1<<ie-1,te+=(Z&J?1:0)+(W&J?2:0);return te})(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,B).replace(/{bbox-epsg-3857}/g,m)}isChildOf(r){const o=this.z-r.z;return o>0&&r.x===this.x>>o&&r.y===this.y>>o}getTilePoint(r){const o=Math.pow(2,this.z);return new M((r.x*o-this.x)*_t,(r.y*o-this.y)*_t)}toString(){return`${this.z}/${this.x}/${this.y}`}}class o0{constructor(r,o){this.wrap=r,this.canonical=o,this.key=pd(r,o.z,o.z,o.x,o.y)}}class Va{constructor(r,o,f,m,x){if(this.terrainRttPosMatrix32f=null,r<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${f}`);this.overscaledZ=r,this.wrap=o,this.canonical=new Oi(f,+m,+x),this.key=pd(o,r,f,m,x)}clone(){return new Va(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-r;return r>this.canonical.z?new Va(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Va(r,this.wrap,r,this.canonical.x>>o,this.canonical.y>>o)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(r,o){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-r;return r>this.canonical.z?pd(this.wrap*+o,r,this.canonical.z,this.canonical.x,this.canonical.y):pd(this.wrap*+o,r,r,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(r){if(r.wrap!==this.wrap||this.overscaledZ-r.overscaledZ<=0)return!1;if(r.overscaledZ===0)return this.overscaledZ>0;const o=this.canonical.z-r.canonical.z;return!(o<0)&&r.canonical.x===this.canonical.x>>o&&r.canonical.y===this.canonical.y>>o}children(r){if(this.overscaledZ>=r)return[new Va(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,f=2*this.canonical.x,m=2*this.canonical.y;return[new Va(o,this.wrap,o,f,m),new Va(o,this.wrap,o,f+1,m),new Va(o,this.wrap,o,f,m+1),new Va(o,this.wrap,o,f+1,m+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Va(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Va(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new o0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Zr(r.x-this.wrap,r.y))}normalizeCoordinates(r,o,f=8192){if(r>=0&&r<f&&o>=0&&o<f)return{tileID:this,x:r,y:o};const m=Math.floor(r/f),x=Math.floor(o/f),b=r-m*f,E=o-x*f,P=this.canonical.z,k=1<<P,B=this.canonical.y+x;if(B<0||B>=k)return null;let F=this.canonical.x+m,Z=this.wrap;return F<0?(Z-=Math.ceil(-F/k),F=(F%k+k)%k):F>=k&&(Z+=Math.floor(F/k),F%=k),{tileID:new Va(this.overscaledZ,Z,P,F,B),x:b,y:E}}}function pd(s,r,o,f,m){(s*=2)<0&&(s=-1*s-1);const x=1<<o;return(x*x*s+x*m+f).toString(36)+o.toString(36)+r.toString(36)}function Sp(s,r){return r?s.properties[r]:s.id}function Yy(s,r){const o={id:s.id};if(r.removeAllProperties&&(delete s.removeProperties,delete s.addOrUpdateProperties,delete r.removeProperties),r.removeProperties)for(const f of r.removeProperties){const m=s.addOrUpdateProperties.findIndex((x=>x.key===f));m>-1&&s.addOrUpdateProperties.splice(m,1)}return(s.removeAllProperties||r.removeAllProperties)&&(o.removeAllProperties=!0),(s.removeProperties||r.removeProperties)&&(o.removeProperties=[...s.removeProperties||[],...r.removeProperties||[]]),(s.addOrUpdateProperties||r.addOrUpdateProperties)&&(o.addOrUpdateProperties=[...s.addOrUpdateProperties||[],...r.addOrUpdateProperties||[]]),(s.newGeometry||r.newGeometry)&&(o.newGeometry=r.newGeometry||s.newGeometry),o}function Tp(s){var r,o;if(!s)return{};const f={};return f.removeAll=s.removeAll,f.remove=new Set(s.remove||[]),f.add=new Map((r=s.add)===null||r===void 0?void 0:r.map((m=>[m.id,m]))),f.update=new Map((o=s.update)===null||o===void 0?void 0:o.map((m=>[m.id,m]))),f}kt("CanonicalTileID",Oi),kt("OverscaledTileID",Va,{omit:["terrainRttPosMatrix32f"]});class Pc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(r){return this.minX=Math.min(this.minX,r.x),this.minY=Math.min(this.minY,r.y),this.maxX=Math.max(this.maxX,r.x),this.maxY=Math.max(this.maxY,r.y),this}expandBy(r){return this.minX-=r,this.minY-=r,this.maxX+=r,this.maxY+=r,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(r){return this.expandBy(-r)}map(r){const o=new Pc;return o.extend(r(new M(this.minX,this.minY))),o.extend(r(new M(this.maxX,this.minY))),o.extend(r(new M(this.minX,this.maxY))),o.extend(r(new M(this.maxX,this.maxY))),o}static fromPoints(r){const o=new Pc;for(const f of r)o.extend(f);return o}contains(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(r){return!this.empty()&&!r.empty()&&r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY}intersects(r){return!this.empty()&&!r.empty()&&r.minX<=this.maxX&&r.maxX>=this.minX&&r.minY<=this.maxY&&r.maxY>=this.minY}}class Xy{constructor(r){this._stringToNumber={},this._numberToString=[];for(let o=0;o<r.length;o++){const f=r[o];this._stringToNumber[f]=o,this._numberToString[o]=f}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class dg{constructor(r,o,f,m,x){this.type="Feature",this._vectorTileFeature=r,this._x=f,this._y=m,this._z=o,this.properties=r.properties,this.id=x}projectPoint(r,o,f,m){return[360*(r.x+o)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(r.y+f)/m)*Math.PI))-90]}projectLine(r,o,f,m){return r.map((x=>this.projectPoint(x,o,f,m)))}get geometry(){if(this._geometry)return this._geometry;const r=this._vectorTileFeature,o=r.extent*Math.pow(2,this._z),f=r.extent*this._x,m=r.extent*this._y,x=r.loadGeometry();switch(r.type){case 1:{const b=[];for(const P of x)b.push(P[0]);const E=this.projectLine(b,f,m,o);this._geometry=b.length===1?{type:"Point",coordinates:E[0]}:{type:"MultiPoint",coordinates:E};break}case 2:{const b=x.map((E=>this.projectLine(E,f,m,o)));this._geometry=b.length===1?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b};break}case 3:{const b=B_(x),E=[];for(const P of b)E.push(P.map((k=>this.projectLine(k,f,m,o))));this._geometry=E.length===1?{type:"Polygon",coordinates:E[0]}:{type:"MultiPolygon",coordinates:E};break}default:throw new Error(`unknown feature type: ${r.type}`)}return this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&o!=="_x"&&o!=="_y"&&o!=="_z"&&(r[o]=this[o]);return r}}class Cc{_name;dataBuffer;nullabilityBuffer;_size;constructor(r,o,f){this._name=r,this.dataBuffer=o,typeof f=="number"?this._size=f:(this.nullabilityBuffer=f,this._size=f.size())}getValue(r){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(r)?null:this.getValueFromBuffer(r)}has(r){return this.nullabilityBuffer&&this.nullabilityBuffer.get(r)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class pg extends Cc{}class mg extends pg{getValueFromBuffer(r){return this.dataBuffer[r]}}class Ky extends pg{getValueFromBuffer(r){return this.dataBuffer[r]}}class Qy extends Cc{delta;constructor(r,o,f,m){super(r,o,m),this.delta=f}}class Jy extends Qy{constructor(r,o,f,m){super(r,Int32Array.of(o),f,m)}getValueFromBuffer(r){return this.dataBuffer[0]+r*this.delta}}class ev extends Cc{constructor(r,o,f){super(r,Int32Array.of(o),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}class Dc{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(r,o,f,m,x=4096){this._name=r,this._geometryVector=o,this._idVector=f,this._propertyVectors=m,this._extent=x}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(r){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((o=>[o.name,o])))),this.propertyVectorsMap.get(r)}*[Symbol.iterator](){const r=this.geometryVector[Symbol.iterator]();let o=0;for(;o<this.numFeatures;){let f;this.idVector&&(f=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(o)):this.idVector.getValue(o));const m=r?.next().value,x={};for(const b of this.propertyVectors){if(!b)continue;const E=b.name,P=b.getValue(o);P!==null&&(x[E]=P)}o++,yield{id:f,geometry:m,properties:x}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const r=[],o=this.geometryVector.getGeometries();for(let f=0;f<this.numFeatures;f++){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(f)):this.idVector.getValue(f));const x={coordinates:o[f],type:this.geometryVector.geometryType(f)},b={};for(const E of this.propertyVectors){if(!E)continue;const P=E.name,k=E.getValue(f);k!==null&&(b[P]=k)}r.push({id:m,geometry:x,properties:b})}return r}containsMaxSaveIntegerValues(r){return r instanceof mg||r instanceof ev&&r instanceof Jy||r instanceof Ky}}class s0{value;constructor(r){this.value=r}get(){return this.value}set(r){this.value=r}increment(){return this.value++}add(r){this.value+=r}}var qr,zl,Li,Zs,Oc,ca,An,bi,Bo,qa;function ji(s,r,o){const f=new Int32Array(o);let m=0,x=r.get();for(let b=0;b<f.length;b++){let E=s[x++],P=127&E;E<128||(E=s[x++],P|=(127&E)<<7,E<128||(E=s[x++],P|=(127&E)<<14,E<128||(E=s[x++],P|=(127&E)<<21,E<128||(E=s[x++],P|=(15&E)<<28)))),f[m++]=P}return r.set(x),f}function gg(s,r,o){const f=new BigInt64Array(o);for(let m=0;m<f.length;m++)f[m]=l0(s,r);return f}function l0(s,r){let o=0n,f=0,m=r.get();for(;m<s.length;){const x=s[m++];if(o|=BigInt(127&x)<<BigInt(f),!(128&x))break;if(f+=7,f>=64)throw new Error("Varint too long")}return r.set(m),o}function Ep(s,r){let o,f;return f=s[r.get()],r.increment(),o=127&f,f<128?o:(f=s[r.get()],r.increment(),o|=(127&f)<<7,f<128?o:(f=s[r.get()],r.increment(),o|=(127&f)<<14,f<128?o:(f=s[r.get()],r.increment(),o|=(127&f)<<21,f<128?o:(f=s[r.get()],o|=(15&f)<<28,(function(m,x,b){let E,P;if(P=x[b.get()],b.increment(),E=(112&P)>>4,P<128||(P=x[b.get()],b.increment(),E|=(127&P)<<3,P<128)||(P=x[b.get()],b.increment(),E|=(127&P)<<10,P<128)||(P=x[b.get()],b.increment(),E|=(127&P)<<17,P<128)||(P=x[b.get()],b.increment(),E|=(127&P)<<24,P<128)||(P=x[b.get()],b.increment(),E|=(1&P)<<31,P<128))return 4294967296*E+(m>>>0);throw new Error("Expected varint not more than 10 bytes")})(o,s,r)))))}function Rr(s){return s>>>1^-(1&s)}function $a(s){return s>>1n^-(1n&s)}function Cu(s){return s%2==1?(s+1)/-2:s/2}function kl(s,r,o){if(o===void 0){o=0;for(let x=0;x<r;x++)o+=s[x]}const f=new Int32Array(o);let m=0;for(let x=0;x<r;x++){const b=s[x];f.fill(s[x+r],m,m+b),m+=b}return f}function u0(s,r,o){if(o===void 0){o=0;for(let x=0;x<r;x++)o+=Number(s[x])}const f=new BigInt64Array(o);let m=0;for(let x=0;x<r;x++){const b=Number(s[x]);f.fill(s[x+r],m,m+b),m+=b}return f}function c0(s,r,o){const f=new Float64Array(o);let m=0;for(let x=0;x<r;x++){const b=s[x];f.fill(s[x+r],m,m+b),m+=b}return f}function Zh(s){const r=s.length/4*4;let o=1;if(r>=4)for(let f=s[0];o<r-4;o+=4)f=s[o]+=f,f=s[o+1]+=f,f=s[o+2]+=f,f=s[o+3]+=f;for(;o!=s.length;)s[o]+=s[o-1],++o}(function(s){s.NONE="NONE",s.DELTA="DELTA",s.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",s.RLE="RLE",s.MORTON="MORTON",s.PDE="PDE"})(qr||(qr={})),(function(s){s.NONE="NONE",s.FAST_PFOR="FAST_PFOR",s.VARINT="VARINT",s.ALP="ALP"})(zl||(zl={})),(function(s){s.PRESENT="PRESENT",s.DATA="DATA",s.OFFSET="OFFSET",s.LENGTH="LENGTH"})(Li||(Li={}));class yg{_dictionaryType;_offsetType;_lengthType;constructor(r,o,f){this._dictionaryType=r,this._offsetType=o,this._lengthType=f}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function ha(s,r){const o=(function(f,m){const x=f[m.get()],b=Object.values(Li)[x>>4];let E=null;switch(b){case Li.DATA:E=new yg(Object.values(Zs)[15&x]);break;case Li.OFFSET:E=new yg(null,Object.values(Oc)[15&x]);break;case Li.LENGTH:E=new yg(null,null,Object.values(ca)[15&x])}m.increment();const P=f[m.get()],k=Object.values(qr)[P>>5],B=Object.values(qr)[P>>2&7],F=Object.values(zl)[3&P];m.increment();const Z=ji(f,m,2),W=Z[0];return{physicalStreamType:b,logicalStreamType:E,logicalLevelTechnique1:k,logicalLevelTechnique2:B,physicalLevelTechnique:F,numValues:W,byteLength:Z[1],decompressedCount:W}})(s,r);return o.logicalLevelTechnique1===qr.MORTON?(function(f,m,x){const b=ji(m,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:f.decompressedCount,numBits:b[0],coordinateShift:b[1]}})(o,s,r):qr.RLE!==o.logicalLevelTechnique1&&qr.RLE!==o.logicalLevelTechnique2||zl.NONE===o.physicalLevelTechnique?o:(function(f,m,x){const b=ji(m,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:b[1],runs:b[0],numRleValues:b[1]}})(o,s,r)}(function(s){s.NONE="NONE",s.SINGLE="SINGLE",s.SHARED="SHARED",s.VERTEX="VERTEX",s.MORTON="MORTON",s.FSST="FSST"})(Zs||(Zs={})),(function(s){s.VERTEX="VERTEX",s.INDEX="INDEX",s.STRING="STRING",s.KEY="KEY"})(Oc||(Oc={})),(function(s){s.VAR_BINARY="VAR_BINARY",s.GEOMETRIES="GEOMETRIES",s.PARTS="PARTS",s.RINGS="RINGS",s.TRIANGLES="TRIANGLES",s.SYMBOL="SYMBOL",s.DICTIONARY="DICTIONARY"})(ca||(ca={})),(function(s){s[s.FLAT=0]="FLAT",s[s.CONST=1]="CONST",s[s.SEQUENCE=2]="SEQUENCE",s[s.DICTIONARY=3]="DICTIONARY",s[s.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(An||(An={}));class Hs{values;_size;constructor(r,o){this.values=r,this._size=o}get(r){const o=Math.floor(r/8);return(this.values[o]>>r%8&1)==1}set(r,o){const f=Math.floor(r/8);this.values[f]=this.values[f]|(o?1:0)<<r%8}getInt(r){const o=Math.floor(r/8);return this.values[o]>>r%8&1}size(){return this._size}getBuffer(){return this.values}}function vg(s,r,o){if(!r)return s;const f=r.size(),m=new s.constructor(f);let x=0;for(let b=0;b<f;b++)m[b]=r.get(b)?s[x++]:o;return m}function fa(s,r,o,f,m,x){return(function(b,E,P,k,B){switch(E.logicalLevelTechnique1){case qr.DELTA:if(E.logicalLevelTechnique2===qr.RLE){const F=E;if(!B)return(function(Z,W,J){const te=new Int32Array(J);let ie=0,ue=0;for(let xe=0;xe<W;xe++){const le=Z[xe],pe=Rr(Z[xe+W]);for(let Me=0;Me<le;Me++)ue+=pe,te[ie++]=ue}return te})(b,F.runs,F.numRleValues);b=kl(b,F.runs,F.numRleValues)}(function(F){F[0]=Rr(F[0]);const Z=F.length/4*4;let W=1;if(Z>=4)for(;W<Z-4;W+=4){const J=F[W+1],te=F[W+2],ie=F[W+3];F[W]=Rr(F[W])+F[W-1],F[W+1]=Rr(J)+F[W],F[W+2]=Rr(te)+F[W+1],F[W+3]=Rr(ie)+F[W+2]}for(;W!=F.length;++W)F[W]=Rr(F[W])+F[W-1]})(b);break;case qr.RLE:b=(function(F,Z,W){return W?(function(J,te,ie){if(ie===void 0){ie=0;for(let le=0;le<te;le++)ie+=J[le]}const ue=new Int32Array(ie);let xe=0;for(let le=0;le<te;le++){const pe=J[le];let Me=J[le+te];Me=Rr(Me),ue.fill(Me,xe,xe+pe),xe+=pe}return ue})(F,Z.runs,Z.numRleValues):kl(F,Z.runs,Z.numRleValues)})(b,E,P);break;case qr.MORTON:Zh(b);break;case qr.COMPONENTWISE_DELTA:(function(F){if(F.length<2)return;F[0]=Rr(F[0]),F[1]=Rr(F[1]);const Z=F.length/4*4;let W=2;if(Z>=4)for(;W<Z-4;W+=4){const J=F[W+1],te=F[W+2],ie=F[W+3];F[W]=Rr(F[W])+F[W-2],F[W+1]=Rr(J)+F[W-1],F[W+2]=Rr(te)+F[W],F[W+3]=Rr(ie)+F[W+1]}for(;W!=F.length;W+=2)F[W]=Rr(F[W])+F[W-2],F[W+1]=Rr(F[W+1])+F[W-1]})(b);break;case qr.NONE:P&&(function(F){for(let Z=0;Z<F.length;Z++)F[Z]=Rr(F[Z])})(b);break;default:throw new Error(`The specified Logical level technique is not supported: ${E.logicalLevelTechnique1}`)}return B?vg(b,B,0):b})(_g(s,r,o),o,f,0,x)}function Ic(s,r,o){return(function(f,m){if(m.logicalLevelTechnique1===qr.DELTA&&m.logicalLevelTechnique2===qr.NONE)return(function(x){const b=new Int32Array(x.length+1);b[0]=0,b[1]=Rr(x[0]);let E=b[1];for(let P=2;P!=b.length;++P)E+=Rr(x[P-1]),b[P]=b[P-1]+E;return new Uint32Array(b)})(f);if(m.logicalLevelTechnique1===qr.RLE&&m.logicalLevelTechnique2===qr.NONE)return(function(x,b,E){const P=new Int32Array(E+1);P[0]=0;let k=1,B=P[0];for(let F=0;F<b;F++){const Z=x[F],W=x[F+b];for(let J=k;J<k+Z;J++)P[J]=W+B,B=P[J];k+=Z}return new Uint32Array(P)})(f,m.runs,m.numRleValues);if(m.logicalLevelTechnique1===qr.NONE&&m.logicalLevelTechnique2===qr.NONE){(function(b){let E=0;for(let P=0;P<b.length;P++)b[P]+=E,E=b[P]})(f);const x=new Uint32Array(m.numValues+1);return x[0]=0,x.set(f,1),x}if(m.logicalLevelTechnique1===qr.DELTA&&m.logicalLevelTechnique2===qr.RLE){const x=(function(b,E,P){const k=new Int32Array(P+1);k[0]=0;let B=1,F=k[0];for(let Z=0;Z<E;Z++){const W=b[Z];let J=b[Z+E];J=Rr(J);for(let te=B;te<B+W;te++)k[te]=J+F,F=k[te];B+=W}return new Uint32Array(k)})(f,m.runs,m.numRleValues);return Zh(x),x}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(_g(s,r,o),o)}function _g(s,r,o){const f=o.physicalLevelTechnique;if(f===zl.FAST_PFOR)return(function(){throw new Error("FastPFor is not implemented yet.")})();if(f===zl.VARINT)return ji(s,r,o.numValues);if(f===zl.NONE){const m=r.get();r.add(o.byteLength);const x=s.subarray(m,r.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function tv(s,r,o,f){const m=_g(s,r,o);if(m.length===1){const x=m[0];return f?Rr(x):x}return f?(function(x){return Rr(x[1])})(m):(function(x){return x[1]})(m)}function rv(s,r,o){return(function(f){if(f.length==2){const m=Rr(f[1]);return[m,m]}return[Rr(f[2]),Rr(f[3])]})(_g(s,r,o))}function Hh(s,r,o){return(function(f){if(f.length==2){const m=$a(f[1]);return[m,m]}return[$a(f[2]),$a(f[3])]})(gg(s,r,o.numValues))}function md(s,r,o,f,m){return(function(x,b,E,P){switch(b.logicalLevelTechnique1){case qr.DELTA:if(b.logicalLevelTechnique2===qr.RLE){const k=b;if(!P)return(function(B,F,Z){const W=new BigInt64Array(Z);let J=0,te=0n;for(let ie=0;ie<F;ie++){const ue=Number(B[ie]),xe=$a(B[ie+F]);for(let le=0;le<ue;le++)te+=xe,W[J++]=te}return W})(x,k.runs,k.numRleValues);x=u0(x,k.runs,k.numRleValues)}(function(k){k[0]=$a(k[0]);const B=k.length/4*4;let F=1;if(B>=4)for(;F<B-4;F+=4){const Z=k[F+1],W=k[F+2],J=k[F+3];k[F]=$a(k[F])+k[F-1],k[F+1]=$a(Z)+k[F],k[F+2]=$a(W)+k[F+1],k[F+3]=$a(J)+k[F+2]}for(;F!=k.length;++F)k[F]=$a(k[F])+k[F-1]})(x);break;case qr.RLE:x=(function(k,B,F){return F?(function(Z,W,J){if(J===void 0){J=0;for(let ue=0;ue<W;ue++)J+=Number(Z[ue])}const te=new BigInt64Array(J);let ie=0;for(let ue=0;ue<W;ue++){const xe=Number(Z[ue]);let le=Z[ue+W];le=$a(le),te.fill(le,ie,ie+xe),ie+=xe}return te})(k,B.runs,B.numRleValues):u0(k,B.runs,B.numRleValues)})(x,b,E);break;case qr.NONE:E&&(function(k){for(let B=0;B<k.length;B++)k[B]=$a(k[B])})(x);break;default:throw new Error(`The specified Logical level technique is not supported: ${b.logicalLevelTechnique1}`)}return P?vg(x,P,0n):x})(gg(s,r,o.numValues),o,f,m)}function nv(s,r,o,f){const m=gg(s,r,o.numValues);if(m.length===1){const x=m[0];return f?$a(x):x}return f?(function(x){return $a(x[1])})(m):(function(x){return x[1]})(m)}function xg(s,r,o,f){const m=s.logicalLevelTechnique1;if(m===qr.RLE)return s.runs===1?An.CONST:An.FLAT;if(m!==qr.DELTA||s.logicalLevelTechnique2!==qr.RLE)return s.numValues===1?An.CONST:An.FLAT;const x=r instanceof Hs?r.size():r;if(s.numRleValues!==x)return An.FLAT;if(s.runs===1)return An.SEQUENCE;if(s.runs!==2)return s.numValues===1?An.CONST:An.FLAT;const b=f.get();let E;if(s.physicalLevelTechnique===zl.VARINT)E=ji(o,f,4);else{const P=f.get();E=new Int32Array(o.buffer,o.byteOffset+P,4)}return f.set(b),E[2]===2&&E[3]===2?An.SEQUENCE:s.numValues===1?An.CONST:An.FLAT}class Wh extends pg{getValueFromBuffer(r){return this.dataBuffer[r]}}class gd extends Qy{constructor(r,o,f,m){super(r,BigInt64Array.of(o),f,m)}getValueFromBuffer(r){return this.dataBuffer[0]+BigInt(r)*this.delta}}class Yh{_geometryOffsets;_partOffsets;_ringOffsets;constructor(r,o,f){this._geometryOffsets=r,this._partOffsets=o,this._ringOffsets=f}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function yd(s,r,o){return{x:bg(s,r)-o,y:bg(s>>1,r)-o}}function bg(s,r){let o=0;for(let f=0;f<r;f++)o|=(s&1<<2*f)>>f;return o}(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON",s[s.MULTIPOINT=3]="MULTIPOINT",s[s.MULTILINESTRING=4]="MULTILINESTRING",s[s.MULTIPOLYGON=5]="MULTIPOLYGON"})(bi||(bi={})),(function(s){s[s.POINT=0]="POINT",s[s.LINESTRING=1]="LINESTRING",s[s.POLYGON=2]="POLYGON"})(Bo||(Bo={})),(function(s){s[s.MORTON=0]="MORTON",s[s.VEC_2=1]="VEC_2",s[s.VEC_3=2]="VEC_3"})(qa||(qa={}));class iv{createPoint(r){return[[r]]}createMultiPoint(r){return r.map((o=>[o]))}createLineString(r){return[r]}createMultiLineString(r){return r}createPolygon(r,o){return[r].concat(o)}createMultiPolygon(r){return r.flat()}}function Ap(s){const r=new Array(s.numGeometries);let o=1,f=1,m=1,x=0;const b=new iv;let E=0,P=0;const k=s.mortonSettings,B=s.topologyVector,F=B.geometryOffsets,Z=B.partOffsets,W=B.ringOffsets,J=s.vertexOffsets,te=s.containsPolygonGeometry(),ie=s.vertexBuffer;for(let ue=0;ue<s.numGeometries;ue++){const xe=s.geometryType(ue);if(xe===bi.POINT){if(J&&J.length!==0)if(s.vertexBufferType===qa.VEC_2){const le=2*J[P++],pe=new M(ie[le],ie[le+1]);r[x++]=b.createPoint(pe)}else{const le=yd(ie[J[P++]],k.numBits,k.coordinateShift),pe=new M(le.x,le.y);r[x++]=b.createPoint(pe)}else{const le=new M(ie[E++],ie[E++]);r[x++]=b.createPoint(le)}F&&m++,Z&&o++,W&&f++}else if(xe===bi.MULTIPOINT){const le=F[m]-F[m-1];m++;const pe=new Array(le);if(J&&J.length!==0){for(let Me=0;Me<le;Me++){const ke=2*J[P++];pe[Me]=new M(ie[ke],ie[ke+1])}r[x++]=b.createMultiPoint(pe)}else{for(let Me=0;Me<le;Me++){const ke=ie[E++],We=ie[E++];pe[Me]=new M(ke,We)}r[x++]=b.createMultiPoint(pe)}}else if(xe===bi.LINESTRING){let le,pe=0;te?(pe=W[f]-W[f-1],f++):pe=Z[o]-Z[o-1],o++,J&&J.length!==0?(le=s.vertexBufferType===qa.VEC_2?av(ie,J,P,pe,!1):Cp(ie,J,P,pe,!1,k),P+=pe):(le=Sg(ie,E,pe,!1),E+=2*pe),r[x++]=b.createLineString(le),F&&m++}else if(xe===bi.POLYGON){const le=Z[o]-Z[o-1];o++;const pe=new Array(le-1);let Me=W[f]-W[f-1];if(f++,J&&J.length!==0){const ke=s.vertexBufferType===qa.VEC_2?Pp(ie,J,P,Me):wg(ie,J,P,Me,0,k);P+=Me;for(let We=0;We<pe.length;We++)Me=W[f]-W[f-1],f++,pe[We]=s.vertexBufferType===qa.VEC_2?Pp(ie,J,P,Me):wg(ie,J,P,Me,0,k),P+=Me;r[x++]=b.createPolygon(ke,pe)}else{const ke=Mp(ie,E,Me);E+=2*Me;for(let We=0;We<pe.length;We++)Me=W[f]-W[f-1],f++,pe[We]=Mp(ie,E,Me),E+=2*Me;r[x++]=b.createPolygon(ke,pe)}F&&m++}else if(xe===bi.MULTILINESTRING){const le=F[m]-F[m-1];m++;const pe=new Array(le);if(J&&J.length!==0){for(let Me=0;Me<le;Me++){let ke=0;te?(ke=W[f]-W[f-1],f++):ke=Z[o]-Z[o-1],o++;const We=s.vertexBufferType===qa.VEC_2?av(ie,J,P,ke,!1):Cp(ie,J,P,ke,!1,k);pe[Me]=We,P+=ke}r[x++]=b.createMultiLineString(pe)}else{for(let Me=0;Me<le;Me++){let ke=0;te?(ke=W[f]-W[f-1],f++):ke=Z[o]-Z[o-1],o++,pe[Me]=Sg(ie,E,ke,!1),E+=2*ke}r[x++]=b.createMultiLineString(pe)}}else{if(xe!==bi.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const le=F[m]-F[m-1];m++;const pe=new Array(le);let Me=0;if(J&&J.length!==0){for(let ke=0;ke<le;ke++){const We=Z[o]-Z[o-1];o++;const st=new Array(We-1);Me=W[f]-W[f-1],f++;const lt=s.vertexBufferType===qa.VEC_2?Pp(ie,J,P,Me):wg(ie,J,P,Me,0,k);P+=Me;for(let yt=0;yt<st.length;yt++)Me=W[f]-W[f-1],f++,st[yt]=s.vertexBufferType===qa.VEC_2?Pp(ie,J,P,Me):wg(ie,J,P,Me,0,k),P+=Me;pe[ke]=b.createPolygon(lt,st)}r[x++]=b.createMultiPolygon(pe)}else{for(let ke=0;ke<le;ke++){const We=Z[o]-Z[o-1];o++;const st=new Array(We-1);Me=W[f]-W[f-1],f++;const lt=Mp(ie,E,Me);E+=2*Me;for(let yt=0;yt<st.length;yt++){const Dt=W[f]-W[f-1];f++,st[yt]=Mp(ie,E,Dt),E+=2*Dt}pe[ke]=b.createPolygon(lt,st)}r[x++]=b.createMultiPolygon(pe)}}}}return r}function Mp(s,r,o){return Sg(s,r,o,!0)}function Pp(s,r,o,f){return av(s,r,o,f,!0)}function wg(s,r,o,f,m,x){return Cp(s,r,o,f,!0,x)}function Sg(s,r,o,f){const m=new Array(f?o+1:o);for(let x=0;x<2*o;x+=2)m[x/2]=new M(s[r+x],s[r+x+1]);return f&&(m[m.length-1]=m[0]),m}function av(s,r,o,f,m){const x=new Array(m?f+1:f);for(let b=0;b<2*f;b+=2){const E=2*r[o+b/2];x[b/2]=new M(s[E],s[E+1])}return m&&(x[x.length-1]=x[0]),x}function Cp(s,r,o,f,m,x){const b=new Array(m?f+1:f);for(let E=0;E<f;E++){const P=yd(s[r[o+E]],x.numBits,x.coordinateShift);b[E]=new M(P.x,P.y)}return m&&(b[b.length-1]=b[0]),b}class h0{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(r,o,f,m,x){this._vertexBufferType=r,this._topologyVector=o,this._vertexOffsets=f,this._vertexBuffer=m,this._mortonSettings=x}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const r=Ap(this);let o=0;for(;o<this.numGeometries;)yield{coordinates:r[o],type:this.geometryType(o)},o++}getSimpleEncodedVertex(r){const o=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[o],this.vertexBuffer[o+1]]}getVertex(r){if(this.vertexOffsets&&this.mortonSettings){const f=yd(this.vertexBuffer[this.vertexOffsets[r]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[f.x,f.y]}const o=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[o],this.vertexBuffer[o+1]]}getGeometries(){return Ap(this)}get mortonSettings(){return this._mortonSettings}}class Dp extends h0{_numGeometries;_geometryType;constructor(r,o,f,m,x,b,E){super(f,m,x,b,E),this._numGeometries=r,this._geometryType=o}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===bi.POLYGON||this._geometryType===bi.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Op extends h0{_geometryTypes;constructor(r,o,f,m,x,b){super(r,f,m,x,b),this._geometryTypes=o}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let r=0;r<this.numGeometries;r++)if(this.geometryType(r)===bi.POLYGON||this.geometryType(r)===bi.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Ip{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(r,o,f,m){this._triangleOffsets=r,this._indexBuffer=o,this._vertexBuffer=f,this._topologyVector=m}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const r=new Array(this.numGeometries),o=this._topologyVector,f=o.partOffsets,m=o.ringOffsets,x=o.geometryOffsets;let b=0,E=1,P=1,k=1;for(let B=0;B<this.numGeometries;B++)switch(this.geometryType(B)){case bi.POLYGON:{const F=f[E]-f[E-1];E++;const Z=[];for(let W=0;W<F;W++){const J=m[P]-m[P-1];P++;const te=[];for(let ie=0;ie<J;ie++){const ue=this._vertexBuffer[b++],xe=this._vertexBuffer[b++];te.push(new M(ue,xe))}te.length>0&&te.push(te[0]),Z.push(te)}r[B]=Z,x&&k++}break;case bi.MULTIPOLYGON:{const F=x[k]-x[k-1];k++;const Z=[];for(let W=0;W<F;W++){const J=f[E]-f[E-1];E++;for(let te=0;te<J;te++){const ie=m[P]-m[P-1];P++;const ue=[];for(let xe=0;xe<ie;xe++){const le=this._vertexBuffer[b++],pe=this._vertexBuffer[b++];ue.push(new M(le,pe))}ue.length>0&&ue.push(ue[0]),Z.push(ue)}}r[B]=Z}}return r}[Symbol.iterator](){return null}}function f0(s,r,o,f,m,x){return new zp(s,r,o,f,m,x)}class zp extends Ip{_numGeometries;_geometryType;constructor(r,o,f,m,x,b){super(f,m,x,b),this._numGeometries=r,this._geometryType=o}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function d0(s,r,o,f,m){return new p0(s,r,o,f,m)}class p0 extends Ip{_geometryTypes;constructor(r,o,f,m,x){super(o,f,m,x),this._geometryTypes=r}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function m0(s,r,o,f,m){const x=ha(s,o);let b=null,E=null,P=null,k=null;if(xg(x,f,s,o)===An.CONST){const xe=tv(s,o,x,!1);let le=null,pe=null,Me=null,ke=null;for(let We=0;We<r-1;We++){const st=ha(s,o);switch(st.physicalStreamType){case Li.LENGTH:switch(st.logicalStreamType.lengthType){case ca.GEOMETRIES:le=Ic(s,o,st);break;case ca.PARTS:pe=Ic(s,o,st);break;case ca.RINGS:Me=Ic(s,o,st);break;case ca.TRIANGLES:ke=Ic(s,o,st)}break;case Li.OFFSET:switch(st.logicalStreamType.offsetType){case Oc.VERTEX:b=fa(s,o,st,!1);break;case Oc.INDEX:k=fa(s,o,st,!1)}break;case Li.DATA:Zs.VERTEX===st.logicalStreamType.dictionaryType?E=fa(s,o,st,!0):(P={numBits:st.numBits,coordinateShift:st.coordinateShift},E=fa(s,o,st,!1))}}return k!==null?le!=null||pe!=null?f0(f,xe,ke,k,E,new Yh(le,pe,Me)):f0(f,xe,ke,k,E):P===null?(function(We,st,lt,yt,Dt){return new Dp(We,st,qa.VEC_2,lt,yt,Dt)})(f,xe,new Yh(le,pe,Me),b,E):(function(We,st,lt,yt,Dt,wt){return new Dp(We,st,qa.MORTON,lt,yt,Dt,wt)})(f,xe,new Yh(le,pe,Me),b,E,P)}const B=fa(s,o,x,!1);let F=null,Z=null,W=null,J=null;for(let xe=0;xe<r-1;xe++){const le=ha(s,o);switch(le.physicalStreamType){case Li.LENGTH:switch(le.logicalStreamType.lengthType){case ca.GEOMETRIES:F=fa(s,o,le,!1);break;case ca.PARTS:Z=fa(s,o,le,!1);break;case ca.RINGS:W=fa(s,o,le,!1);break;case ca.TRIANGLES:J=Ic(s,o,le)}break;case Li.OFFSET:switch(le.logicalStreamType.offsetType){case Oc.VERTEX:b=fa(s,o,le,!1);break;case Oc.INDEX:k=fa(s,o,le,!1)}break;case Li.DATA:Zs.VERTEX===le.logicalStreamType.dictionaryType?E=fa(s,o,le,!0):(P={numBits:le.numBits,coordinateShift:le.coordinateShift},E=fa(s,o,le,!1))}}let te=null,ie=null,ue=null;return F!==null?(te=Tg(B,F,2),Z!==null&&W!==null?(ie=ov(B,te,Z,!1),ue=(function(xe,le,pe,Me){const ke=new Uint32Array(pe[pe.length-1]+1);let We=0;ke[0]=We;let st=1,lt=1,yt=0;for(let Dt=0;Dt<xe.length;Dt++){const wt=xe[Dt],ut=le[Dt+1]-le[Dt];if(wt!==0&&wt!==3)for(let rt=0;rt<ut;rt++){const Lt=pe[st]-pe[st-1];st++;for(let Nt=0;Nt<Lt;Nt++)We=ke[lt++]=We+Me[yt++]}else for(let rt=0;rt<ut;rt++)ke[lt++]=++We,st++}return ke})(B,te,ie,W)):Z!==null&&(ie=(function(xe,le,pe){const Me=new Uint32Array(le[le.length-1]+1);let ke=0;Me[0]=ke;let We=1,st=0;for(let lt=0;lt<xe.length;lt++){const yt=xe[lt],Dt=le[lt+1]-le[lt];if(yt===4||yt===1)for(let wt=0;wt<Dt;wt++)ke=Me[We++]=ke+pe[st++];else for(let wt=0;wt<Dt;wt++)Me[We++]=++ke}return Me})(B,te,Z))):Z!==null&&W!==null?(ie=Tg(B,Z,1),ue=ov(B,ie,W,!0)):Z!==null&&(ie=Tg(B,Z,0)),k!==null&&ie===null?d0(B,J,k,E):k!==null?d0(B,J,k,E,new Yh(te,ie,ue)):P===null?(function(xe,le,pe,Me){return new Op(qa.VEC_2,xe,le,pe,Me)})(B,new Yh(te,ie,ue),b,E):(function(xe,le,pe,Me,ke){return new Op(qa.MORTON,xe,le,pe,Me,ke)})(B,new Yh(te,ie,ue),b,E,P)}function Tg(s,r,o){const f=new Uint32Array(s.length+1);let m=0;f[0]=m;let x=0;for(let b=0;b<s.length;b++)m=f[b+1]=m+(s[b]>o?r[x++]:1);return f}function ov(s,r,o,f){const m=new Uint32Array(r[r.length-1]+1);let x=0;m[0]=x;let b=1,E=0;for(let P=0;P<s.length;P++){const k=s[P],B=r[P+1]-r[P];if(k===5||k===2||f&&(k===4||k===1))for(let F=0;F<B;F++)x=m[b++]=x+o[E++];else for(let F=0;F<B;F++)m[b++]=++x}return m}class sv extends Cc{dataVector;constructor(r,o,f){super(r,o.getBuffer(),f),this.dataVector=o}getValueFromBuffer(r){return this.dataVector.get(r)}}class g0 extends pg{getValueFromBuffer(r){return this.dataBuffer[r]}}class lv extends Cc{constructor(r,o,f){super(r,BigInt64Array.of(o),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}function zc(s,r,o,f,m){const x=(function(b,E,P,k){const B=new Uint8Array(E);let F=0;const Z=k.get()+P;for(;F<E&&!(k.get()>=Z);){const W=b[k.increment()];if(W<=127){const J=W+3,te=b[k.increment()],ie=Math.min(F+J,E);B.fill(te,F,ie),F=ie}else{const J=256-W;for(let te=0;te<J&&F<E;te++)B[F++]=b[k.increment()]}}return k.set(Z),B})(s,Math.ceil(r/8),o,f);return m?(function(b,E,P){if(!P)return b;const k=P.size(),B=new Hs(b,E),F=new Hs(new Uint8Array(Math.ceil(k/8)),k);let Z=0;for(let W=0;W<k;W++){const J=!!P.get(W)&&B.get(Z++);F.set(W,J)}return F.getBuffer()})(x,r,m):x}const Kb=new TextDecoder;function uv(s,r,o){return o-r>=12?Kb.decode(s.subarray(r,o)):(function(f,m,x){let b="",E=m;for(;E<x;){const P=f[E];let k,B,F,Z=null,W=P>239?4:P>223?3:P>191?2:1;if(E+W>x)break;W===1?P<128&&(Z=P):W===2?(k=f[E+1],(192&k)==128&&(Z=(31&P)<<6|63&k,Z<=127&&(Z=null))):W===3?(k=f[E+1],B=f[E+2],(192&k)==128&&(192&B)==128&&(Z=(15&P)<<12|(63&k)<<6|63&B,(Z<=2047||Z>=55296&&Z<=57343)&&(Z=null))):W===4&&(k=f[E+1],B=f[E+2],F=f[E+3],(192&k)==128&&(192&B)==128&&(192&F)==128&&(Z=(15&P)<<18|(63&k)<<12|(63&B)<<6|63&F,(Z<=65535||Z>=1114112)&&(Z=null))),Z===null?(Z=65533,W=1):Z>65535&&(Z-=65536,b+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),b+=String.fromCharCode(Z),E+=W}return b})(s,r,o)}class kp extends Cc{offsetBuffer;constructor(r,o,f,m){super(r,f,m),this.offsetBuffer=o}}class Eg extends kp{textEncoder;constructor(r,o,f,m){super(r,o,f,m??o.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(r){return uv(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class Du extends kp{indexBuffer;textEncoder;constructor(r,o,f,m,x){super(r,f,m,x??o.length),this.indexBuffer=o,this.indexBuffer=o,this.textEncoder=new TextEncoder}getValueFromBuffer(r){const o=this.indexBuffer[r];return uv(this.dataBuffer,this.offsetBuffer[o],this.offsetBuffer[o+1])}}class Ag extends kp{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(r,o,f,m,x,b,E){super(r,f,m,E),this.indexBuffer=o,this.symbolOffsetBuffer=x,this.symbolTableBuffer=b,this.textEncoder=new TextEncoder}getValueFromBuffer(r){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(f,m,x){const b=[],E=new Array(m.length).fill(0);for(let P=1;P<m.length;P++)E[P]=E[P-1]+m[P-1];for(let P=0;P<x.length;P++)if(x[P]===255)b.push(x[++P]);else{const k=m[x[P]],B=E[x[P]];for(let F=0;F<k;F++)b.push(f[B+F])}return new Uint8Array(b)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const o=this.indexBuffer[r];return uv(this.decodedDictionary,this.offsetBuffer[o],this.offsetBuffer[o+1])}offsetToLengthBuffer(r){const o=new Uint32Array(r.length-1);let f=r[0];for(let m=1;m<r.length;m++){const x=r[m];o[m-1]=x-f,f=x}return o}}function y0(s,r,o,f,m,x){return o.type==="scalarType"?(function(b,E,P,k,B,F){let Z=null,W=0;if(b===0)return null;if(F.nullable){const te=ha(E,P);W=te.numValues;const ie=P.get(),ue=zc(E,W,te.byteLength,P);P.set(ie+te.byteLength),Z=new Hs(ue,te.numValues)}const J=Z??k;switch(B.physicalType){case 4:case 3:return(function(te,ie,ue,xe,le){const pe=ha(te,ie),Me=xg(pe,le,te,ie),ke=xe.physicalType===3;if(Me===An.FLAT){const We=fa(te,ie,pe,ke,0,Xh(le)?le:void 0);return new mg(ue.name,We,le)}if(Me===An.SEQUENCE){const We=rv(te,ie,pe);return new Jy(ue.name,We[0],We[1],pe.numRleValues)}{const We=tv(te,ie,pe,ke);return new ev(ue.name,We,le)}})(E,P,F,B,J);case 9:return(function(te,ie,ue,xe,le){let pe=null,Me=null,ke=null,We=null,st=null,lt=null,yt=null,Dt=null;for(let wt=0;wt<xe;wt++){const ut=ha(ie,ue);if(ut.byteLength!==0)switch(ut.physicalStreamType){case Li.PRESENT:{const rt=zc(ie,ut.numValues,ut.byteLength,ue);lt=new Hs(rt,ut.numValues);break}case Li.OFFSET:Me=fa(ie,ue,ut,!1,0,le!=null||lt!=null?le??lt:void 0);break;case Li.LENGTH:{const rt=Ic(ie,ue,ut);ca.DICTIONARY===ut.logicalStreamType.lengthType?pe=rt:ca.SYMBOL===ut.logicalStreamType.lengthType?We=rt:yt=rt;break}case Li.DATA:{const rt=ie.subarray(ue.get(),ue.get()+ut.byteLength);ue.add(ut.byteLength);const Lt=ut.logicalStreamType.dictionaryType;Zs.FSST===Lt?st=rt:Zs.SINGLE===Lt||Zs.SHARED===Lt?ke=rt:Zs.NONE===Lt&&(Dt=rt);break}}}return(function(wt,ut,rt,Lt,Nt,Wt,Vt){return ut?new Ag(wt,rt,Lt,Nt,Wt,ut,Vt):null})(te,st,Me,pe,ke,We,le??lt)??(function(wt,ut,rt,Lt,Nt){return ut?Nt?new Du(wt,rt,Lt,ut,Nt):new Du(wt,rt,Lt,ut):null})(te,ke,Me,pe,le??lt)??(function(wt,ut,rt,Lt,Nt){if(!ut||!rt)return null;if(Lt)return Nt?new Du(wt,Lt,ut,rt,Nt):new Du(wt,Lt,ut,rt);if(Nt&&Nt.size()!==ut.length-1){const Wt=new Int32Array(Nt.size());let Vt=0;for(let _r=0;_r<Nt.size();_r++)Wt[_r]=Nt.get(_r)?Vt++:0;return new Du(wt,Wt,ut,rt,Nt)}return Nt?new Eg(wt,ut,rt,Nt):new Eg(wt,ut,rt)})(te,yt,Dt,Me,le??lt)})(F.name,E,P,F.nullable?b-1:b,Z);case 0:return(function(te,ie,ue,xe,le){const pe=ha(te,ie),Me=pe.numValues,ke=ie.get(),We=Xh(le)?le:void 0,st=zc(te,Me,pe.byteLength,ie,We);ie.set(ke+pe.byteLength);const lt=new Hs(st,Me);return new sv(ue.name,lt,le)})(E,P,F,0,J);case 6:case 5:return(function(te,ie,ue,xe,le){const pe=ha(te,ie),Me=xg(pe,xe,te,ie),ke=le.physicalType===5;if(Me===An.FLAT){const We=md(te,ie,pe,ke,Xh(xe)?xe:void 0);return new Wh(ue.name,We,xe)}if(Me===An.SEQUENCE){const We=Hh(te,ie,pe);return new gd(ue.name,We[0],We[1],pe.numRleValues)}{const We=nv(te,ie,pe,ke);return new lv(ue.name,We,xe)}})(E,P,F,J,B);case 7:return(function(te,ie,ue,xe){const le=ha(te,ie),pe=Xh(xe)?xe:void 0,Me=(function(ke,We,st,lt){const yt=We.get(),Dt=yt+st*Float32Array.BYTES_PER_ELEMENT,wt=new Uint8Array(ke.subarray(yt,Dt)).buffer,ut=new Float32Array(wt);return We.set(Dt),lt?vg(ut,lt,0):ut})(te,ie,le.numValues,pe);return new g0(ue.name,Me,xe)})(E,P,F,J);case 8:return(function(te,ie,ue,xe){const le=ha(te,ie),pe=Xh(xe)?xe:void 0,Me=(function(ke,We,st,lt){const yt=We.get(),Dt=yt+st*Float64Array.BYTES_PER_ELEMENT,wt=new Uint8Array(ke.subarray(yt,Dt)).buffer,ut=new Float64Array(wt);return We.set(Dt),lt?vg(ut,lt,0):ut})(te,ie,le.numValues,pe);return new Ky(ue.name,Me,xe)})(E,P,F,J);default:throw new Error(`The specified data type for the field is currently not supported: ${B}`)}})(f,s,r,m,o.scalarType,o):f===0?null:(function(b,E,P,k){let B=null,F=null,Z=null,W=null,J=!1;for(;!J;){const xe=ha(b,E);switch(xe.physicalStreamType){case Li.LENGTH:ca.DICTIONARY===xe.logicalStreamType.lengthType?B=Ic(b,E,xe):Z=Ic(b,E,xe);break;case Li.DATA:Zs.SINGLE===xe.logicalStreamType.dictionaryType||Zs.SHARED===xe.logicalStreamType.dictionaryType?(F=b.subarray(E.get(),E.get()+xe.byteLength),J=!0):W=b.subarray(E.get(),E.get()+xe.byteLength),E.add(xe.byteLength)}}const te=P.complexType.children,ie=[];let ue=0;for(const xe of te){const le=ji(b,E,1)[0];if(le==0)continue;const pe=xe.name?`${P.name}${xe.name}`:P.name;if(le!==2||xe.type!=="scalarField"||xe.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const Me=ha(b,E),ke=zc(b,Me.numValues,Me.byteLength,E),We=ha(b,E),st=fa(b,E,We,!1,0,We.decompressedCount!==k?new Hs(ke,Me.numValues):void 0);ie[ue++]=W?new Ag(pe,st,B,F,Z,W,new Hs(ke,Me.numValues)):new Du(pe,st,B,F,new Hs(ke,Me.numValues))}return ie})(s,r,o,m)}function Xh(s){return s instanceof Hs}function Ou(s){switch(s){case 0:case 1:case 2:case 3:{const r={};r.nullable=!!(1&s),r.columnScope=0;const o={};return o.physicalType=s>1?6:4,o.type="physicalType",r.scalarType=o,r.type="scalarType",r}case 4:{const r={nullable:!1,columnScope:0},o={type:"physicalType",physicalType:0};return r.type="complexType",r.complexType=o,r}case 30:{const r={nullable:!1,columnScope:0},o={type:"physicalType",physicalType:1};return r.type="complexType",r.complexType=o,r}default:return(function(r){let o=null;switch(r){case 10:case 11:o=0;break;case 12:case 13:o=1;break;case 14:case 15:o=2;break;case 16:case 17:o=3;break;case 18:case 19:o=4;break;case 20:case 21:o=5;break;case 22:case 23:o=6;break;case 24:case 25:o=7;break;case 26:case 27:o=8;break;case 28:case 29:o=9;break;default:return null}const f={};f.nullable=!!(1&r),f.columnScope=0;const m={type:"physicalType"};return m.physicalType=o,f.type="scalarType",f.scalarType=m,f})(s)}}function Iu(s){return s>=10}function zu(s){return s===30}function Rp(s){if(s.name==="id")return!1;if(s.type==="scalarType"){const r=s.scalarType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(r.type==="logicalType")return!1}else if(s.type==="complexType"){const r=s.complexType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",s),!1}const Lp=new TextDecoder;function Rl(s,r){const o=ji(s,r,1)[0];if(o===0)return"";const f=r.get(),m=s.subarray(f,f+o);return r.add(o),Lp.decode(m)}function v0(s,r){const o=ji(s,r,1)[0]>>>0;if(o<10||o>30)throw new Error(`Unsupported field type code ${o}. Supported: 10-29(scalars), 30(STRUCT)`);const f=Ou(o);if(Iu(o)&&(f.name=Rl(s,r)),zu(o)){const m=ji(s,r,1)[0]>>>0;f.complexType.children=new Array(m);for(let x=0;x<m;x++)f.complexType.children[x]=v0(s,r)}return(function(m){return{name:m.name,nullable:m.nullable,scalarField:m.scalarType,complexField:m.complexType,type:m.type==="scalarType"?"scalarField":"complexField"}})(f)}function _0(s,r){const o=ji(s,r,1)[0]>>>0,f=Ou(o);if(!f)throw new Error(`Unsupported column type code ${o}. Supported: 0-3(ID), 4(GEOMETRY), 10-29(scalars), 30(STRUCT)`);if(Iu(o)?f.name=Rl(s,r):o>=0&&o<=3?f.name="id":o===4&&(f.name="geometry"),zu(o)){const m=ji(s,r,1)[0]>>>0,x=f.complexType;x.children=new Array(m);for(let b=0;b<m;b++)x.children[b]=v0(s,r)}return f}function jp(s,r){const o={featureTables:[]},f={};f.name=Rl(s,r);const m=ji(s,r,1)[0]>>>0,x=ji(s,r,1)[0]>>>0;f.columns=new Array(x);for(let b=0;b<x;b++)f.columns[b]=_0(s,r);return o.featureTables.push(f),[o,m]}function Qb(s,r,o,f,m,x,b=!1){const E=r.scalarType.physicalType,P=xg(m,x,s,o);if(E===4)switch(P){case An.FLAT:{const k=fa(s,o,m,!1);return new mg(f,k,x)}case An.SEQUENCE:{const k=rv(s,o,m);return new Jy(f,k[0],k[1],m.numRleValues)}case An.CONST:{const k=tv(s,o,m,!1);return new ev(f,k,x)}}else switch(P){case An.FLAT:{if(b){const B=(function(F,Z,W){const J=(function(te,ie,ue){const xe=new Float64Array(ue);for(let le=0;le<ue;le++)xe[le]=Ep(te,ie);return xe})(F,Z,W.numValues);return(function(te,ie){switch(ie.logicalLevelTechnique1){case qr.DELTA:return ie.logicalLevelTechnique2===qr.RLE&&(te=c0(te,ie.runs,ie.numRleValues)),(function(ue){ue[0]=Cu(ue[0]);const xe=ue.length/4*4;let le=1;if(xe>=4)for(;le<xe-4;le+=4){const pe=ue[le+1],Me=ue[le+2],ke=ue[le+3];ue[le]=Cu(ue[le])+ue[le-1],ue[le+1]=Cu(pe)+ue[le],ue[le+2]=Cu(Me)+ue[le+1],ue[le+3]=Cu(ke)+ue[le+2]}for(;le!=ue.length;++le)ue[le]=Cu(ue[le])+ue[le-1]})(te),te;case qr.RLE:return(function(ue,xe){return c0(ue,xe.runs,xe.numRleValues)})(te,ie);case qr.NONE:return te;default:throw new Error(`The specified Logical level technique is not supported: ${ie.logicalLevelTechnique1}`)}})(J,W)})(s,o,m);return new Ky(f,B,x)}const k=md(s,o,m,!1);return new Wh(f,k,x)}case An.SEQUENCE:{const k=Hh(s,o,m);return new gd(f,k[0],k[1],m.numRleValues)}case An.CONST:{const k=nv(s,o,m,!1);return new lv(f,k,x)}}throw new Error("Vector type not supported for id column.")}class x0{constructor(r,o){var f;switch(this._featureData=r,this.properties=this._featureData.properties||{},(f=this._featureData.geometry)===null||f===void 0?void 0:f.type){case bi.POINT:case bi.MULTIPOINT:this.type=1;break;case bi.LINESTRING:case bi.MULTILINESTRING:this.type=2;break;case bi.POLYGON:case bi.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=o,this.id=Number(this._featureData.id)}loadGeometry(){const r=[];for(const o of this._featureData.geometry.coordinates){const f=[];for(const m of o)f.push(new M(m.x,m.y));r.push(f)}return r}}class Mg{constructor(r){this.features=[],this.featureTable=r,this.name=r.name,this.extent=r.extent,this.version=2,this.features=r.getFeatures(),this.length=this.features.length}feature(r){return new x0(this.features[r],this.extent)}}class cv{constructor(r){this.layers={};const o=(function(f,m,x=!0){const b=new s0(0),E=[];for(;b.get()<f.length;){const P=ji(f,b,1)[0]>>>0,k=b.get()+P;if(k>f.length)throw new Error(`Block overruns tile: ${k} > ${f.length}`);if(ji(f,b,1)[0]>>>0!=1){b.set(k);continue}const B=jp(f,b),F=B[1],Z=B[0].featureTables[0];let W=null,J=null;const te=[];let ie=0;for(const xe of Z.columns){const le=xe.name;if(le==="id"){let pe=null;if(xe.nullable){const ke=ha(f,b),We=b.get(),st=zc(f,ke.numValues,ke.byteLength,b);b.set(We+ke.byteLength),pe=new Hs(st,ke.numValues)}const Me=ha(f,b);ie=Me.decompressedCount,W=Qb(f,xe,b,le,Me,pe??ie,x)}else if(le==="geometry"){const pe=ji(f,b,1)[0];if(ie===0){const Me=b.get();ie=ha(f,b).decompressedCount,b.set(Me)}J=m0(f,pe,b,ie)}else{const pe=Rp(xe)?ji(f,b,1)[0]:1;if(pe===0)continue;const Me=y0(f,b,xe,pe,ie);if(Me)if(Array.isArray(Me))for(const ke of Me)te.push(ke);else te.push(Me)}}const ue=new Dc(Z.name,J,W,te,F);E.push(ue),b.set(k)}return E})(new Uint8Array(r));this.layers=o.reduce(((f,m)=>Object.assign(Object.assign({},f),{[m.name]:new Mg(m)})),{})}}class Jb{constructor(r,o){this.feature=r,this.type=r.type,this.properties=r.tags?r.tags:{},this.extent=o,"id"in r&&(typeof r.id=="string"?this.id=parseInt(r.id,10):typeof r.id!="number"||isNaN(r.id)||(this.id=r.id))}loadGeometry(){const r=[],o=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const f of o){const m=[];for(const x of f)m.push(new M(x[0],x[1]));r.push(m)}return r}}const kc="_geojsonTileLayer";function Pg(s,r){r.writeVarintField(15,s.version||1),r.writeStringField(1,s.name||""),r.writeVarintField(5,s.extent||4096);const o={keys:[],values:[],keycache:{},valuecache:{}};for(let x=0;x<s.length;x++)o.feature=s.feature(x),r.writeMessage(2,b0,o);const f=o.keys;for(const x of f)r.writeStringField(3,x);const m=o.values;for(const x of m)r.writeMessage(4,w0,x)}function b0(s,r){if(!s.feature)return;const o=s.feature;o.id!==void 0&&r.writeVarintField(1,o.id),r.writeMessage(2,vd,s),r.writeVarintField(3,o.type),r.writeMessage(4,Og,o)}function vd(s,r){for(const o in s.feature?.properties){let f=s.feature.properties[o],m=s.keycache[o];if(f==null)continue;m===void 0&&(s.keys.push(o),m=s.keys.length-1,s.keycache[o]=m),r.writeVarint(m),typeof f!="string"&&typeof f!="boolean"&&typeof f!="number"&&(f=JSON.stringify(f));const x=typeof f+":"+f;let b=s.valuecache[x];b===void 0&&(s.values.push(f),b=s.values.length-1,s.valuecache[x]=b),r.writeVarint(b)}}function Cg(s,r){return(r<<3)+(7&s)}function Dg(s){return s<<1^s>>31}function Og(s,r){const o=s.loadGeometry(),f=s.type;let m=0,x=0;for(const b of o){let E=1;f===1&&(E=b.length),r.writeVarint(Cg(1,E));const P=f===3?b.length-1:b.length;for(let k=0;k<P;k++){k===1&&f!==1&&r.writeVarint(Cg(2,P-1));const B=b[k].x-m,F=b[k].y-x;r.writeVarint(Dg(B)),r.writeVarint(Dg(F)),m+=B,x+=F}s.type===3&&r.writeVarint(Cg(7,1))}}function w0(s,r){const o=typeof s;o==="string"?r.writeStringField(1,s):o==="boolean"?r.writeBooleanField(7,s):o==="number"&&(s%1!=0?r.writeDoubleField(3,s):s<0?r.writeSVarintField(6,s):r.writeVarintField(5,s))}class S0{constructor(r,o){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Sl(_t,16,0),this.grid3D=new Sl(_t,16,0),this.featureIndexArray=new oe,this.promoteId=o}insert(r,o,f,m,x,b){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,m,x);const P=b?this.grid3D:this.grid;for(let k=0;k<o.length;k++){const B=o[k],F=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<B.length;Z++){const W=B[Z];F[0]=Math.min(F[0],W.x),F[1]=Math.min(F[1],W.y),F[2]=Math.max(F[2],W.x),F[3]=Math.max(F[3],W.y)}F[0]<_t&&F[1]<_t&&F[2]>=0&&F[3]>=0&&P.insert(E,F[0],F[1],F[2],F[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Pr(new Jm(this.rawTileData)).layers:new cv(this.rawTileData).layers,this.sourceLayerCoder=new Xy(this.vtLayers?Object.keys(this.vtLayers).sort():[kc])),this.vtLayers}query(r,o,f,m){this.loadVTLayers();const x=r.params,b=_t/r.tileSize/r.scale,E=na(x.filter,x.globalState),P=r.queryGeometry,k=r.queryPadding*b,B=Pc.fromPoints(P),F=this.grid.query(B.minX-k,B.minY-k,B.maxX+k,B.maxY+k),Z=Pc.fromPoints(r.cameraQueryGeometry).expandBy(k),W=this.grid3D.query(Z.minX,Z.minY,Z.maxX,Z.maxY,((ie,ue,xe,le)=>(function(pe,Me,ke,We,st){for(const yt of pe)if(Me<=yt.x&&ke<=yt.y&&We>=yt.x&&st>=yt.y)return!0;const lt=[new M(Me,ke),new M(Me,st),new M(We,st),new M(We,ke)];if(pe.length>2){for(const yt of lt)if(Pl(pe,yt))return!0}for(let yt=0;yt<pe.length-1;yt++)if(E_(pe[yt],pe[yt+1],lt))return!0;return!1})(r.cameraQueryGeometry,ie-k,ue-k,xe+k,le+k)));for(const ie of W)F.push(ie);F.sort(l);const J={};let te;for(let ie=0;ie<F.length;ie++){const ue=F[ie];if(ue===te)continue;te=ue;const xe=this.featureIndexArray.get(ue);let le=null;this.loadMatchingFeature(J,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,E,x.layers,x.availableImages,o,f,m,((pe,Me,ke)=>(le||(le=Vs(pe)),Me.queryIntersectsFeature({queryGeometry:P,feature:pe,featureState:ke,geometry:le,zoom:this.z,transform:r.transform,pixelsToTileUnits:b,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation}))))}return J}loadMatchingFeature(r,o,f,m,x,b,E,P,k,B,F){const Z=this.bucketLayerIDs[o];if(b&&!Z.some((ie=>b.has(ie))))return;const W=this.sourceLayerCoder.decode(f),J=this.vtLayers[W].feature(m);if(x.needGeometry){const ie=Ro(J,!0);if(!x.filter(new Ur(this.tileID.overscaledZ),ie,this.tileID.canonical))return}else if(!x.filter(new Ur(this.tileID.overscaledZ),J))return;const te=this.getId(J,W);for(let ie=0;ie<Z.length;ie++){const ue=Z[ie];if(b&&!b.has(ue))continue;const xe=P[ue];if(!xe)continue;let le={};te&&B&&(le=B.getState(xe.sourceLayer||kc,te));const pe=Ar({},k[ue]);pe.paint=Bp(pe.paint,xe.paint,J,le,E),pe.layout=Bp(pe.layout,xe.layout,J,le,E);const Me=!F||F(J,xe,le);if(!Me)continue;const ke=new dg(J,this.z,this.x,this.y,te);ke.layer=pe;let We=r[ue];We===void 0&&(We=r[ue]=[]),We.push({featureIndex:m,feature:ke,intersectionZ:Me})}}lookupSymbolFeatures(r,o,f,m,x,b,E,P){const k={};this.loadVTLayers();const B=na(x.filterSpec,x.globalState);for(const F of r)this.loadMatchingFeature(k,f,m,F,B,b,E,P,o);return k}hasLayer(r){for(const o of this.bucketLayerIDs)for(const f of o)if(r===f)return!0;return!1}getId(r,o){var f;let m=r.id;return this.promoteId&&(m=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((f=r.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(m=Number(r.properties.cluster_id))),m}}function Bp(s,r,o,f,m){return sr(s,((x,b)=>{const E=r instanceof du?r.get(b):null;return E&&E.evaluate?E.evaluate(o,f,m):E}))}function l(s,r){return r-s}function h(s,r,o,f,m){const x=[];for(let b=0;b<s.length;b++){const E=s[b];let P;for(let k=0;k<E.length-1;k++){let B=E[k],F=E[k+1];B.x<r&&F.x<r||(B.x<r?B=new M(r,B.y+(r-B.x)/(F.x-B.x)*(F.y-B.y))._round():F.x<r&&(F=new M(r,B.y+(r-B.x)/(F.x-B.x)*(F.y-B.y))._round()),B.y<o&&F.y<o||(B.y<o?B=new M(B.x+(o-B.y)/(F.y-B.y)*(F.x-B.x),o)._round():F.y<o&&(F=new M(B.x+(o-B.y)/(F.y-B.y)*(F.x-B.x),o)._round()),B.x>=f&&F.x>=f||(B.x>=f?B=new M(f,B.y+(f-B.x)/(F.x-B.x)*(F.y-B.y))._round():F.x>=f&&(F=new M(f,B.y+(f-B.x)/(F.x-B.x)*(F.y-B.y))._round()),B.y>=m&&F.y>=m||(B.y>=m?B=new M(B.x+(m-B.y)/(F.y-B.y)*(F.x-B.x),m)._round():F.y>=m&&(F=new M(B.x+(m-B.y)/(F.y-B.y)*(F.x-B.x),m)._round()),P&&B.equals(P[P.length-1])||(P=[B],x.push(P)),P.push(F)))))}}return x}function y(s,r,o,f,m){switch(r){case 1:return(function(x,b,E,P){const k=[];for(const B of x)for(const F of B){const Z=P===0?F.x:F.y;Z>=b&&Z<=E&&k.push([F])}return k})(s,o,f,m);case 2:return z(s,o,f,m,!1);case 3:return z(s,o,f,m,!0)}return[]}function S(s,r,o,f,m){const x=f===0?j:Q;let b=[];const E=[];for(let B=0;B<s.length-1;B++){const F=s[B],Z=s[B+1],W=f===0?F.x:F.y,J=f===0?Z.x:Z.y;let te=!1;W<r?J>r&&b.push(x(F,Z,r)):W>o?J<o&&b.push(x(F,Z,o)):b.push(F),J<r&&W>=r&&(b.push(x(F,Z,r)),te=!0),J>o&&W<=o&&(b.push(x(F,Z,o)),te=!0),!m&&te&&(E.push(b),b=[])}const P=s.length-1,k=f===0?s[P].x:s[P].y;return k>=r&&k<=o&&b.push(s[P]),m&&b.length>0&&!b[0].equals(b[b.length-1])&&b.push(new M(b[0].x,b[0].y)),b.length>0&&E.push(b),E}function z(s,r,o,f,m){const x=[];for(const b of s){const E=S(b,r,o,f,m);E.length>0&&x.push(...E)}return x}function j(s,r,o){return new M(o,s.y+(o-s.x)/(r.x-s.x)*(r.y-s.y))}function Q(s,r,o){return new M(s.x+(o-s.y)/(r.y-s.y)*(r.x-s.x),o)}kt("FeatureIndex",S0,{omit:["rawTileData","sourceLayerCoder"]});class ce extends M{constructor(r,o,f,m){super(r,o),this.angle=f,m!==void 0&&(this.segment=m)}clone(){return new ce(this.x,this.y,this.angle,this.segment)}}function Re(s,r,o,f,m){if(r.segment===void 0||o===0)return!0;let x=r,b=r.segment+1,E=0;for(;E>-o/2;){if(b--,b<0)return!1;E-=s[b].dist(x),x=s[b]}E+=s[b].dist(s[b+1]),b++;const P=[];let k=0;for(;E<o/2;){const B=s[b],F=s[b+1];if(!F)return!1;let Z=s[b-1].angleTo(B)-B.angleTo(F);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),P.push({distance:E,angleDelta:Z}),k+=Z;E-P[0].distance>f;)k-=P.shift().angleDelta;if(k>m)return!1;b++,E+=B.dist(F)}return!0}function Je(s){let r=0;for(let o=0;o<s.length-1;o++)r+=s[o].dist(s[o+1]);return r}function ft(s,r,o){return s?.6*r*o:0}function bt(s,r){return Math.max(s?s.right-s.left:0,r?r.right-r.left:0)}function tt(s,r,o,f,m,x){const b=ft(o,m,x),E=bt(o,f)*x;let P=0;const k=Je(s)/2;for(let B=0;B<s.length-1;B++){const F=s[B],Z=s[B+1],W=F.dist(Z);if(P+W>k){const J=(k-P)/W,te=gn.number(F.x,Z.x,J),ie=gn.number(F.y,Z.y,J),ue=new ce(te,ie,Z.angleTo(F),B);return ue._round(),!b||Re(s,ue,E,b,r)?ue:void 0}P+=W}}function ot(s,r,o,f,m,x,b,E,P){const k=ft(f,x,b),B=bt(f,m),F=B*b,Z=s[0].x===0||s[0].x===P||s[0].y===0||s[0].y===P;return r-F<r/4&&(r=F+r/4),Zt(s,Z?r/2*E%r:(B/2+2*x)*b*E%r,r,k,o,F,Z,!1,P)}function Zt(s,r,o,f,m,x,b,E,P){const k=x/2,B=Je(s);let F=0,Z=r-o,W=[];for(let J=0;J<s.length-1;J++){const te=s[J],ie=s[J+1],ue=te.dist(ie),xe=ie.angleTo(te);for(;Z+o<F+ue;){Z+=o;const le=(Z-F)/ue,pe=gn.number(te.x,ie.x,le),Me=gn.number(te.y,ie.y,le);if(pe>=0&&pe<P&&Me>=0&&Me<P&&Z-k>=0&&Z+k<=B){const ke=new ce(pe,Me,xe,J);ke._round(),f&&!Re(s,ke,x,f,m)||W.push(ke)}}F+=ue}return E||W.length||b||(W=Zt(s,F/2,o,f,m,x,b,!0,P)),W}function ur(s,r,o,f){const m=[],x=s.image,b=x.pixelRatio,E=x.paddedRect.w-2,P=x.paddedRect.h-2;let k={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const B=x.stretchX||[[0,E]],F=x.stretchY||[[0,P]],Z=(rt,Lt)=>rt+Lt[1]-Lt[0],W=B.reduce(Z,0),J=F.reduce(Z,0),te=E-W,ie=P-J;let ue=0,xe=W,le=0,pe=J,Me=0,ke=te,We=0,st=ie;if(x.content&&f){const rt=x.content,Lt=rt[2]-rt[0],Nt=rt[3]-rt[1];(x.textFitWidth||x.textFitHeight)&&(k=Pu(s)),ue=tn(B,0,rt[0]),le=tn(F,0,rt[1]),xe=tn(B,rt[0],rt[2]),pe=tn(F,rt[1],rt[3]),Me=rt[0]-ue,We=rt[1]-le,ke=Lt-xe,st=Nt-pe}const lt=k.x1,yt=k.y1,Dt=k.x2-lt,wt=k.y2-yt,ut=(rt,Lt,Nt,Wt)=>{const Vt=je(rt.stretch-ue,xe,Dt,lt),_r=Qe(rt.fixed-Me,ke,rt.stretch,W),Nn=je(Lt.stretch-le,pe,wt,yt),wi=Qe(Lt.fixed-We,st,Lt.stretch,J),da=je(Nt.stretch-ue,xe,Dt,lt),Ll=Qe(Nt.fixed-Me,ke,Nt.stretch,W),yo=je(Wt.stretch-le,pe,wt,yt),Yi=Qe(Wt.fixed-We,st,Wt.stretch,J),pa=new M(Vt,Nn),ri=new M(da,Nn),Xi=new M(da,yo),Ga=new M(Vt,yo),Za=new M(_r/b,wi/b),No=new M(Ll/b,Yi/b),ma=r*Math.PI/180;if(ma){const Bi=Math.sin(ma),Gn=Math.cos(ma),Si=[Gn,-Bi,Bi,Gn];pa._matMult(Si),ri._matMult(Si),Ga._matMult(Si),Xi._matMult(Si)}const Fo=rt.stretch+rt.fixed,jl=Lt.stretch+Lt.fixed;return{tl:pa,tr:ri,bl:Ga,br:Xi,tex:{x:x.paddedRect.x+1+Fo,y:x.paddedRect.y+1+jl,w:Nt.stretch+Nt.fixed-Fo,h:Wt.stretch+Wt.fixed-jl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Za,pixelOffsetBR:No,minFontScaleX:ke/b/Dt,minFontScaleY:st/b/wt,isSDF:o}};if(f&&(x.stretchX||x.stretchY)){const rt=Ve(B,te,W),Lt=Ve(F,ie,J);for(let Nt=0;Nt<rt.length-1;Nt++){const Wt=rt[Nt],Vt=rt[Nt+1];for(let _r=0;_r<Lt.length-1;_r++)m.push(ut(Wt,Lt[_r],Vt,Lt[_r+1]))}}else m.push(ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:P+1}));return m}function tn(s,r,o){let f=0;for(const m of s)f+=Math.max(r,Math.min(o,m[1]))-Math.max(r,Math.min(o,m[0]));return f}function Ve(s,r,o){const f=[{fixed:-1,stretch:0}];for(const[m,x]of s){const b=f[f.length-1];f.push({fixed:m-b.stretch,stretch:b.stretch}),f.push({fixed:m-b.stretch,stretch:b.stretch+(x-m)})}return f.push({fixed:r+1,stretch:o}),f}function je(s,r,o,f){return s/r*o+f}function Qe(s,r,o,f){return s-r*o/f}kt("Anchor",ce);class gt{constructor(r,o,f,m,x,b,E,P,k,B){var F;if(this.boxStartIndex=r.length,k){let Z=b.top,W=b.bottom;const J=b.collisionPadding;J&&(Z-=J[1],W+=J[3]);let te=W-Z;te>0&&(te=Math.max(10,te),this.circleDiameter=te)}else{const Z=!((F=b.image)===null||F===void 0)&&F.content&&(b.image.textFitWidth||b.image.textFitHeight)?Pu(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};Z.y1=Z.y1*E-P[0],Z.y2=Z.y2*E+P[2],Z.x1=Z.x1*E-P[3],Z.x2=Z.x2*E+P[1];const W=b.collisionPadding;if(W&&(Z.x1-=W[0]*E,Z.y1-=W[1]*E,Z.x2+=W[2]*E,Z.y2+=W[3]*E),B){const J=new M(Z.x1,Z.y1),te=new M(Z.x2,Z.y1),ie=new M(Z.x1,Z.y2),ue=new M(Z.x2,Z.y2),xe=B*Math.PI/180;J._rotate(xe),te._rotate(xe),ie._rotate(xe),ue._rotate(xe),Z.x1=Math.min(J.x,te.x,ie.x,ue.x),Z.x2=Math.max(J.x,te.x,ie.x,ue.x),Z.y1=Math.min(J.y,te.y,ie.y,ue.y),Z.y2=Math.max(J.y,te.y,ie.y,ue.y)}r.emplaceBack(o.x,o.y,Z.x1,Z.y1,Z.x2,Z.y2,f,m,x)}this.boxEndIndex=r.length}}class rr{constructor(r=[],o=(f,m)=>f<m?-1:f>m?1:0){if(this.data=r,this.length=this.data.length,this.compare=o,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:o,compare:f}=this,m=o[r];for(;r>0;){const x=r-1>>1,b=o[x];if(f(m,b)>=0)break;o[r]=b,r=x}o[r]=m}_down(r){const{data:o,compare:f}=this,m=this.length>>1,x=o[r];for(;r<m;){let b=1+(r<<1);const E=b+1;if(E<this.length&&f(o[E],o[b])<0&&(b=E),f(o[b],x)>=0)break;o[r]=o[b],r=b}o[r]=x}}function Hr(s,r=1,o=!1){const f=Pc.fromPoints(s[0]),m=Math.min(f.width(),f.height());let x=m/2;const b=new rr([],Xt),{minX:E,minY:P,maxX:k,maxY:B}=f;if(m===0)return new M(E,P);for(let W=E;W<k;W+=m)for(let J=P;J<B;J+=m)b.push(new yr(W+x,J+x,x,s));let F=(function(W){let J=0,te=0,ie=0;const ue=W[0];for(let xe=0,le=ue.length,pe=le-1;xe<le;pe=xe++){const Me=ue[xe],ke=ue[pe],We=Me.x*ke.y-ke.x*Me.y;te+=(Me.x+ke.x)*We,ie+=(Me.y+ke.y)*We,J+=3*We}return new yr(te/J,ie/J,0,W)})(s),Z=b.length;for(;b.length;){const W=b.pop();(W.d>F.d||!F.d)&&(F=W,o&&console.log("found best %d after %d probes",Math.round(1e4*W.d)/1e4,Z)),W.max-F.d<=r||(x=W.h/2,b.push(new yr(W.p.x-x,W.p.y-x,x,s)),b.push(new yr(W.p.x+x,W.p.y-x,x,s)),b.push(new yr(W.p.x-x,W.p.y+x,x,s)),b.push(new yr(W.p.x+x,W.p.y+x,x,s)),Z+=4)}return o&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${F.d}`)),F.p}function Xt(s,r){return r.max-s.max}function yr(s,r,o,f){this.p=new M(s,r),this.h=o,this.d=(function(m,x){let b=!1,E=1/0;for(let P=0;P<x.length;P++){const k=x[P];for(let B=0,F=k.length,Z=F-1;B<F;Z=B++){const W=k[B],J=k[Z];W.y>m.y!=J.y>m.y&&m.x<(J.x-W.x)*(m.y-W.y)/(J.y-W.y)+W.x&&(b=!b),E=Math.min(E,vy(m,W,J))}}return(b?1:-1)*Math.sqrt(E)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var or;v.aP=void 0,(or=v.aP||(v.aP={}))[or.center=1]="center",or[or.left=2]="left",or[or.right=3]="right",or[or.top=4]="top",or[or.bottom=5]="bottom",or[or["top-left"]=6]="top-left",or[or["top-right"]=7]="top-right",or[or["bottom-left"]=8]="bottom-left",or[or["bottom-right"]=9]="bottom-right";const Nr=Number.POSITIVE_INFINITY;function ku(s,r){return r[1]!==Nr?(function(o,f,m){let x=0,b=0;switch(f=Math.abs(f),m=Math.abs(m),o){case"top-right":case"top-left":case"top":b=m-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-m}switch(o){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,b]})(s,r[0],r[1]):(function(o,f){let m=0,x=0;f<0&&(f=0);const b=f/Math.SQRT2;switch(o){case"top-right":case"top-left":x=b-7;break;case"bottom-right":case"bottom-left":x=7-b;break;case"bottom":x=7-f;break;case"top":x=f-7}switch(o){case"top-right":case"bottom-right":m=-b;break;case"top-left":case"bottom-left":m=b;break;case"left":m=f;break;case"right":m=-f}return[m,x]})(s,r[0])}function T0(s,r,o){var f;const m=s.layout,x=(f=m.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(r,{},o);if(x){const E=x.values,P=[];for(let k=0;k<E.length;k+=2){const B=P[k]=E[k],F=E[k+1].map((Z=>Z*hi));B.startsWith("top")?F[1]-=7:B.startsWith("bottom")&&(F[1]+=7),P[k+1]=F}return new zn(P)}const b=m.get("text-variable-anchor");if(b){let E;E=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(r,{},o)*hi,Nr]:m.get("text-offset").evaluate(r,{},o).map((k=>k*hi));const P=[];for(const k of b)P.push(k,ku(k,E));return new zn(P)}return null}function e1(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function DL(s,r,o,f,m,x,b,E,P,k,B,F){let Z=x.textMaxSize.evaluate(r,{});Z===void 0&&(Z=b);const W=s.layers[0].layout,J=W.get("icon-offset").evaluate(r,{},B),te=nE(o.horizontal),ie=b/24,ue=s.tilePixelRatio*ie,xe=s.tilePixelRatio*Z/24,le=s.tilePixelRatio*E,pe=s.tilePixelRatio*W.get("symbol-spacing"),Me=W.get("text-padding")*s.tilePixelRatio,ke=(function(Nt,Wt,Vt,_r=1){const Nn=Nt.get("icon-padding").evaluate(Wt,{},Vt),wi=Nn&&Nn.values;return[wi[0]*_r,wi[1]*_r,wi[2]*_r,wi[3]*_r]})(W,r,B,s.tilePixelRatio),We=W.get("text-max-angle")/180*Math.PI,st=W.get("text-rotation-alignment")!=="viewport"&&W.get("symbol-placement")!=="point",lt=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",yt=W.get("symbol-placement"),Dt=pe/2,wt=W.get("icon-text-fit");let ut;f&&wt!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(ut=Gs(f,o.vertical,wt,W.get("icon-text-fit-padding"),J,ie)),te&&(f=Gs(f,te,wt,W.get("icon-text-fit-padding"),J,ie)));const rt=B?F.line.getGranularityForZoomLevel(B.z):1,Lt=(Nt,Wt)=>{Wt.x<0||Wt.x>=_t||Wt.y<0||Wt.y>=_t||(function(Vt,_r,Nn,wi,da,Ll,yo,Yi,pa,ri,Xi,Ga,Za,No,ma,Fo,jl,Bi,Gn,Si,Kn,Ni,Kh,Ru,dv){const _d=Vt.addToLineVertexArray(_r,Nn);let Np,Ig,zg,kg,sE=0,lE=0,uE=0,cE=0,l1=-1,u1=-1;const Qh={};let hE=jn("");if(Vt.allowVerticalPlacement&&wi.vertical){const Ha=Yi.layout.get("text-rotate").evaluate(Kn,{},Ru)+90;zg=new gt(pa,_r,ri,Xi,Ga,wi.vertical,Za,No,ma,Ha),yo&&(kg=new gt(pa,_r,ri,Xi,Ga,yo,jl,Bi,ma,Ha))}if(da){const Ha=Yi.layout.get("icon-rotate").evaluate(Kn,{}),Ws=Yi.layout.get("icon-text-fit")!=="none",Fp=ur(da,Ha,Kh,Ws),ju=yo?ur(yo,Ha,Kh,Ws):void 0;Ig=new gt(pa,_r,ri,Xi,Ga,da,jl,Bi,!1,Ha),sE=4*Fp.length;const Up=Vt.iconSizeData;let Rc=null;Up.kind==="source"?(Rc=[jo*Yi.layout.get("icon-size").evaluate(Kn,{})],Rc[0]>Ac&&cr(`${Vt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Up.kind==="composite"&&(Rc=[jo*Ni.compositeIconSizes[0].evaluate(Kn,{},Ru),jo*Ni.compositeIconSizes[1].evaluate(Kn,{},Ru)],(Rc[0]>Ac||Rc[1]>Ac)&&cr(`${Vt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Vt.addSymbols(Vt.icon,Fp,Rc,Si,Gn,Kn,v.az.none,_r,_d.lineStartIndex,_d.lineLength,-1,Ru),l1=Vt.icon.placedSymbolArray.length-1,ju&&(lE=4*ju.length,Vt.addSymbols(Vt.icon,ju,Rc,Si,Gn,Kn,v.az.vertical,_r,_d.lineStartIndex,_d.lineLength,-1,Ru),u1=Vt.icon.placedSymbolArray.length-1)}const fE=Object.keys(wi.horizontal);for(const Ha of fE){const Ws=wi.horizontal[Ha];if(!Np){hE=jn(Ws.text);const ju=Yi.layout.get("text-rotate").evaluate(Kn,{},Ru);Np=new gt(pa,_r,ri,Xi,Ga,Ws,Za,No,ma,ju)}const Fp=Ws.positionedLines.length===1;if(uE+=rE(Vt,_r,Ws,Ll,Yi,ma,Kn,Fo,_d,wi.vertical?v.az.horizontal:v.az.horizontalOnly,Fp?fE:[Ha],Qh,l1,Ni,Ru),Fp)break}wi.vertical&&(cE+=rE(Vt,_r,wi.vertical,Ll,Yi,ma,Kn,Fo,_d,v.az.vertical,["vertical"],Qh,u1,Ni,Ru));const zL=Np?Np.boxStartIndex:Vt.collisionBoxArray.length,kL=Np?Np.boxEndIndex:Vt.collisionBoxArray.length,RL=zg?zg.boxStartIndex:Vt.collisionBoxArray.length,LL=zg?zg.boxEndIndex:Vt.collisionBoxArray.length,jL=Ig?Ig.boxStartIndex:Vt.collisionBoxArray.length,BL=Ig?Ig.boxEndIndex:Vt.collisionBoxArray.length,NL=kg?kg.boxStartIndex:Vt.collisionBoxArray.length,FL=kg?kg.boxEndIndex:Vt.collisionBoxArray.length;let Lu=-1;const A0=(Ha,Ws)=>Ha&&Ha.circleDiameter?Math.max(Ha.circleDiameter,Ws):Ws;Lu=A0(Np,Lu),Lu=A0(zg,Lu),Lu=A0(Ig,Lu),Lu=A0(kg,Lu);const dE=Lu>-1?1:0;dE&&(Lu*=dv/hi),Vt.glyphOffsetArray.length>=fd.MAX_GLYPHS&&cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Kn.sortKey!==void 0&&Vt.addToSortKeyRanges(Vt.symbolInstances.length,Kn.sortKey);const UL=T0(Yi,Kn,Ru),[VL,qL]=(function(Ha,Ws){const Fp=Ha.length,ju=Ws?.values;if(ju?.length>0)for(let Up=0;Up<ju.length;Up+=2){const Rc=ju[Up+1];Ha.emplaceBack(v.aP[ju[Up]],Rc[0],Rc[1])}return[Fp,Ha.length]})(Vt.textAnchorOffsets,UL);Vt.symbolInstances.emplaceBack(_r.x,_r.y,Qh.right>=0?Qh.right:-1,Qh.center>=0?Qh.center:-1,Qh.left>=0?Qh.left:-1,Qh.vertical||-1,l1,u1,hE,zL,kL,RL,LL,jL,BL,NL,FL,ri,uE,cE,sE,lE,dE,0,Za,Lu,VL,qL)})(s,Wt,Nt,o,f,m,ut,s.layers[0],s.collisionBoxArray,r.index,r.sourceLayerIndex,s.index,ue,[Me,Me,Me,Me],st,P,le,ke,lt,J,r,x,k,B,b)};if(yt==="line")for(const Nt of h(r.geometry,0,0,_t,_t)){const Wt=Su(Nt,rt),Vt=ot(Wt,pe,We,o.vertical||te,f,24,xe,s.overscaling,_t);for(const _r of Vt)te&&OL(s,te.text,Dt,_r)||Lt(Wt,_r)}else if(yt==="line-center"){for(const Nt of r.geometry)if(Nt.length>1){const Wt=Su(Nt,rt),Vt=tt(Wt,We,o.vertical||te,f,24,xe);Vt&&Lt(Wt,Vt)}}else if(r.type==="Polygon")for(const Nt of dh(r.geometry,0)){const Wt=Hr(Nt,16);Lt(Su(Nt[0],rt,!0),new ce(Wt.x,Wt.y,0))}else if(r.type==="LineString")for(const Nt of r.geometry){const Wt=Su(Nt,rt);Lt(Wt,new ce(Wt[0].x,Wt[0].y,0))}else if(r.type==="Point")for(const Nt of r.geometry)for(const Wt of Nt)Lt([Wt],new ce(Wt.x,Wt.y,0))}function rE(s,r,o,f,m,x,b,E,P,k,B,F,Z,W,J){const te=(function(xe,le,pe,Me,ke,We,st,lt){const yt=Me.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,Dt=[];for(const wt of le.positionedLines)for(const ut of wt.positionedGlyphs){if(!ut.rect)continue;const rt=ut.rect||{};let Lt=4,Nt=!0,Wt=1,Vt=0;const _r=(ke||lt)&&ut.vertical,Nn=ut.metrics.advance*ut.scale/2;if(lt&&le.verticalizable&&(Vt=wt.lineOffset/2-(ut.imageName?-(hi-ut.metrics.width*ut.scale)/2:(ut.scale-1)*hi)),ut.imageName){const Bi=st[ut.imageName];Nt=Bi.sdf,Wt=Bi.pixelRatio,Lt=1/Wt}const wi=ke?[ut.x+Nn,ut.y]:[0,0];let da=ke?[0,0]:[ut.x+Nn+pe[0],ut.y+pe[1]-Vt],Ll=[0,0];_r&&(Ll=da,da=[0,0]);const yo=ut.metrics.isDoubleResolution?2:1,Yi=(ut.metrics.left-Lt)*ut.scale-Nn+da[0],pa=(-ut.metrics.top-Lt)*ut.scale+da[1],ri=Yi+rt.w/yo*ut.scale/Wt,Xi=pa+rt.h/yo*ut.scale/Wt,Ga=new M(Yi,pa),Za=new M(ri,pa),No=new M(Yi,Xi),ma=new M(ri,Xi);if(_r){const Bi=new M(-Nn,Nn- -17),Gn=-Math.PI/2,Si=12-Nn,Kn=new M(22-Si,-(ut.imageName?Si:0)),Ni=new M(...Ll);Ga._rotateAround(Gn,Bi)._add(Kn)._add(Ni),Za._rotateAround(Gn,Bi)._add(Kn)._add(Ni),No._rotateAround(Gn,Bi)._add(Kn)._add(Ni),ma._rotateAround(Gn,Bi)._add(Kn)._add(Ni)}if(yt){const Bi=Math.sin(yt),Gn=Math.cos(yt),Si=[Gn,-Bi,Bi,Gn];Ga._matMult(Si),Za._matMult(Si),No._matMult(Si),ma._matMult(Si)}const Fo=new M(0,0),jl=new M(0,0);Dt.push({tl:Ga,tr:Za,bl:No,br:ma,tex:rt,writingMode:le.writingMode,glyphOffset:wi,sectionIndex:ut.sectionIndex,isSDF:Nt,pixelOffsetTL:Fo,pixelOffsetBR:jl,minFontScaleX:0,minFontScaleY:0})}return Dt})(0,o,E,m,x,b,f,s.allowVerticalPlacement),ie=s.textSizeData;let ue=null;ie.kind==="source"?(ue=[jo*m.layout.get("text-size").evaluate(b,{})],ue[0]>Ac&&cr(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ie.kind==="composite"&&(ue=[jo*W.compositeTextSizes[0].evaluate(b,{},J),jo*W.compositeTextSizes[1].evaluate(b,{},J)],(ue[0]>Ac||ue[1]>Ac)&&cr(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,te,ue,E,x,b,k,r,P.lineStartIndex,P.lineLength,Z,J);for(const xe of B)F[xe]=s.text.placedSymbolArray.length-1;return 4*te.length}function nE(s){for(const r in s)return s[r];return null}function OL(s,r,o,f){const m=s.compareText;if(r in m){const x=m[r];for(let b=x.length-1;b>=0;b--)if(f.dist(x[b])<o)return!0}else m[r]=[];return m[r].push(f),!1}const iE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class t1{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,f]=new Uint8Array(r,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=f>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const x=iE[15&f];if(!x)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(r,2,1),[E]=new Uint32Array(r,4,1);return new t1(E,b,x,r)}constructor(r,o=64,f=Float64Array,m){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=f,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const x=iE.indexOf(this.ArrayType),b=2*r*this.ArrayType.BYTES_PER_ELEMENT,E=r*this.IndexArrayType.BYTES_PER_ELEMENT,P=(8-E%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+P,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+b+E+P),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+E+P,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=r)}add(r,o){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=r,this.coords[this._pos++]=o,f}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return r1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,o,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:b,nodeSize:E}=this,P=[0,x.length-1,0],k=[];for(;P.length;){const B=P.pop()||0,F=P.pop()||0,Z=P.pop()||0;if(F-Z<=E){for(let ie=Z;ie<=F;ie++){const ue=b[2*ie],xe=b[2*ie+1];ue>=r&&ue<=f&&xe>=o&&xe<=m&&k.push(x[ie])}continue}const W=Z+F>>1,J=b[2*W],te=b[2*W+1];J>=r&&J<=f&&te>=o&&te<=m&&k.push(x[W]),(B===0?r<=J:o<=te)&&(P.push(Z),P.push(W-1),P.push(1-B)),(B===0?f>=J:m>=te)&&(P.push(W+1),P.push(F),P.push(1-B))}return k}within(r,o,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:x,nodeSize:b}=this,E=[0,m.length-1,0],P=[],k=f*f;for(;E.length;){const B=E.pop()||0,F=E.pop()||0,Z=E.pop()||0;if(F-Z<=b){for(let ie=Z;ie<=F;ie++)oE(x[2*ie],x[2*ie+1],r,o)<=k&&P.push(m[ie]);continue}const W=Z+F>>1,J=x[2*W],te=x[2*W+1];oE(J,te,r,o)<=k&&P.push(m[W]),(B===0?r-f<=J:o-f<=te)&&(E.push(Z),E.push(W-1),E.push(1-B)),(B===0?r+f>=J:o+f>=te)&&(E.push(W+1),E.push(F),E.push(1-B))}return P}}function r1(s,r,o,f,m,x){if(m-f<=o)return;const b=f+m>>1;aE(s,r,b,f,m,x),r1(s,r,o,f,b-1,1-x),r1(s,r,o,b+1,m,1-x)}function aE(s,r,o,f,m,x){for(;m>f;){if(m-f>600){const k=m-f+1,B=o-f+1,F=Math.log(k),Z=.5*Math.exp(2*F/3),W=.5*Math.sqrt(F*Z*(k-Z)/k)*(B-k/2<0?-1:1);aE(s,r,o,Math.max(f,Math.floor(o-B*Z/k+W)),Math.min(m,Math.floor(o+(k-B)*Z/k+W)),x)}const b=r[2*o+x];let E=f,P=m;for(hv(s,r,f,o),r[2*m+x]>b&&hv(s,r,f,m);E<P;){for(hv(s,r,E,P),E++,P--;r[2*E+x]<b;)E++;for(;r[2*P+x]>b;)P--}r[2*f+x]===b?hv(s,r,f,P):(P++,hv(s,r,P,m)),P<=o&&(f=P+1),o<=P&&(m=P-1)}}function hv(s,r,o,f){n1(s,o,f),n1(r,2*o,2*f),n1(r,2*o+1,2*f+1)}function n1(s,r,o){const f=s[r];s[r]=s[o],s[o]=f}function oE(s,r,o,f){const m=s-o,x=r-f;return m*m+x*x}var i1;v.cI=void 0,(i1=v.cI||(v.cI={})).create="create",i1.load="load",i1.fullLoad="fullLoad";let E0=null,fv=[];const a1=1e3/60,o1="loadTime",s1="fullLoadTime",IL={mark(s){performance.mark(s)},recordStartOfFrameAt(s){E0!=null&&fv.push(s-E0),E0=s},resetRuntimeMetrics(){E0=null,fv=[]},clearInitializationMetrics(){performance.clearMeasures(o1),performance.clearMeasures(s1);for(const s in v.cI)performance.clearMarks(v.cI[s])},remove(){this.resetRuntimeMetrics(),this.clearInitializationMetrics()},getPerformanceMetrics(){performance.measure(o1,v.cI.create,v.cI.load),performance.measure(s1,v.cI.create,v.cI.fullLoad);const s=performance.getEntriesByName(o1)[0].duration,r=performance.getEntriesByName(s1)[0].duration,o=fv.length;return{loadTimeMs:s,fullLoadTimeMs:r,averageFramesPerSecond:1/(fv.reduce(((f,m)=>f+m),0)/o/1e3),virtualDroppedFramesCount:fv.filter((f=>f>a1)).reduce(((f,m)=>f+(m-a1)/a1),0),totalFramesCount:o}}};v.$=$,v.A=fe,v.B=Po,v.C=ci,v.D=Rt,v.E=nt,v.F=function([s,r,o]){return r+=90,r*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(r)*Math.sin(o),y:s*Math.sin(r)*Math.sin(o),z:s*Math.cos(o)}},v.G=gn,v.H=Ur,v.I=en,v.J=$f,v.K=function(s){if(Lr==null){const r=s.navigator?s.navigator.userAgent:null;Lr=!!s.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Lr},v.L=class{constructor(s,r){this.target=s,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new cg((()=>this.process())),this.subscription=Wu(this.target,"message",(o=>this.receive(o)),!1),this.globalScope=ln(self)?s:window}registerMessageHandler(s,r){this.messageHandlers[s]=r}unregisterMessageHandler(s){delete this.messageHandlers[s]}sendAsync(s,r){return new Promise(((o,f)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=r?Wu(r.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[m];const P={id:m,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(P)}),Zy):null;this.resolveRejects[m]={resolve:P=>{x?.unsubscribe(),o(P)},reject:P=>{x?.unsubscribe(),f(P)}};const b=[],E=Object.assign(Object.assign({},s),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Co(s.data,b)});this.target.postMessage(E,{transfer:b})}))}receive(s){const r=s.data,o=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[o];const f=this.abortControllers[o];return delete this.abortControllers[o],void(f&&f.abort())}if(ln(self)||r.mustQueue)return this.tasks[o]=r,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,r)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),r=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(s,r)}processTask(s,r){return u(this,void 0,void 0,(function*(){if(r.type==="<response>"){const m=this.resolveRejects[s];return delete this.resolveRejects[s],m?void(r.error?m.reject(gc(r.error)):m.resolve(gc(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=gc(r.data),f=new AbortController;this.abortControllers[s]=f;try{const m=yield this.messageHandlers[r.type](r.sourceMapId,o,f);this.completeTask(s,null,m)}catch(m){this.completeTask(s,m)}}))}completeTask(s,r,o){const f=[];delete this.abortControllers[s];const m={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Co(r):null,data:Co(o,f)};this.target.postMessage(m,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},v.M=ne,v.N=function(){var s=new fe(16);return fe!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},v.O=function(s,r,o){var f,m,x,b,E,P,k,B,F,Z,W,J,te=o[0],ie=o[1],ue=o[2];return r===s?(s[12]=r[0]*te+r[4]*ie+r[8]*ue+r[12],s[13]=r[1]*te+r[5]*ie+r[9]*ue+r[13],s[14]=r[2]*te+r[6]*ie+r[10]*ue+r[14],s[15]=r[3]*te+r[7]*ie+r[11]*ue+r[15]):(m=r[1],x=r[2],b=r[3],E=r[4],P=r[5],k=r[6],B=r[7],F=r[8],Z=r[9],W=r[10],J=r[11],s[0]=f=r[0],s[1]=m,s[2]=x,s[3]=b,s[4]=E,s[5]=P,s[6]=k,s[7]=B,s[8]=F,s[9]=Z,s[10]=W,s[11]=J,s[12]=f*te+E*ie+F*ue+r[12],s[13]=m*te+P*ie+Z*ue+r[13],s[14]=x*te+k*ie+W*ue+r[14],s[15]=b*te+B*ie+J*ue+r[15]),s},v.P=M,v.Q=function(s,r,o){var f=o[0],m=o[1],x=o[2];return s[0]=r[0]*f,s[1]=r[1]*f,s[2]=r[2]*f,s[3]=r[3]*f,s[4]=r[4]*m,s[5]=r[5]*m,s[6]=r[6]*m,s[7]=r[7]*m,s[8]=r[8]*x,s[9]=r[9]*x,s[10]=r[10]*x,s[11]=r[11]*x,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},v.R=ua,v.S=function(s,r,o){var f=r[0],m=r[1],x=r[2],b=r[3],E=r[4],P=r[5],k=r[6],B=r[7],F=r[8],Z=r[9],W=r[10],J=r[11],te=r[12],ie=r[13],ue=r[14],xe=r[15],le=o[0],pe=o[1],Me=o[2],ke=o[3];return s[0]=le*f+pe*E+Me*F+ke*te,s[1]=le*m+pe*P+Me*Z+ke*ie,s[2]=le*x+pe*k+Me*W+ke*ue,s[3]=le*b+pe*B+Me*J+ke*xe,s[4]=(le=o[4])*f+(pe=o[5])*E+(Me=o[6])*F+(ke=o[7])*te,s[5]=le*m+pe*P+Me*Z+ke*ie,s[6]=le*x+pe*k+Me*W+ke*ue,s[7]=le*b+pe*B+Me*J+ke*xe,s[8]=(le=o[8])*f+(pe=o[9])*E+(Me=o[10])*F+(ke=o[11])*te,s[9]=le*m+pe*P+Me*Z+ke*ie,s[10]=le*x+pe*k+Me*W+ke*ue,s[11]=le*b+pe*B+Me*J+ke*xe,s[12]=(le=o[12])*f+(pe=o[13])*E+(Me=o[14])*F+(ke=o[15])*te,s[13]=le*m+pe*P+Me*Z+ke*ie,s[14]=le*x+pe*k+Me*W+ke*ue,s[15]=le*b+pe*B+Me*J+ke*xe,s},v.T=Um,v.U=function(s,r){const o={};for(let f=0;f<r.length;f++){const m=r[f];m in s&&(o[m]=s[m])}return o},v.V=Il,v.W=Gt,v.X=Hy,v.Y=n0,v.Z=al,v._=u,v.a=Qc,v.a$=vt,v.a0=se,v.a1=Ss,v.a2=Va,v.a3=a0,v.a4=wp,v.a5=_t,v.a6=function(s,r,o){if(!s)return r||{};if(!r)return s||{};const f=Tp(s),m=Tp(r);(function(b,E){E.removeAll&&(b.add.clear(),b.update.clear(),b.remove.clear(),E.remove.clear());for(const P of E.remove)b.add.delete(P),b.update.delete(P);for(const[P,k]of E.update){const B=b.update.get(P);B&&(E.update.set(P,Yy(B,k)),b.update.delete(P))}})(f,m);const x={};if((f.removeAll||m.removeAll)&&(x.removeAll=!0),x.remove=new Set([...f.remove,...m.remove]),x.add=new Map([...f.add,...m.add]),x.update=new Map([...f.update,...m.update]),x.remove.size&&x.add.size)for(const b of x.add.keys())x.remove.delete(b);return(function(b){const E={};return b.removeAll&&(E.removeAll=b.removeAll),b.remove&&(E.remove=Array.from(b.remove)),b.add&&(E.add=Array.from(b.add.values())),b.update&&(E.update=Array.from(b.update.values())),E})(x)},v.a7=function(s,r){const o=new Map;if(s==null||s.type==null)return o;if(s.type==="Feature"){const f=Sp(s,r);return f==null?void 0:(o.set(f,s),o)}if(s.type==="FeatureCollection"){const f=new Set;for(const m of s.features){const x=Sp(m,r);if(x==null||f.has(x))return;f.add(x),o.set(x,m)}return o}},v.a8=function(s,r,o){var f,m;const x=[];if(r.removeAll)s.clear();else if(r.remove)for(const b of r.remove){const E=s.get(b);E&&(x.push(E.geometry),s.delete(b))}if(r.add)for(const b of r.add){const E=Sp(b,o);if(E==null)continue;const P=s.get(E);P&&x.push(P.geometry),x.push(b.geometry),s.set(E,b)}if(r.update)for(const b of r.update){const E=s.get(b.id);if(!E)continue;const P=!!b.newGeometry,k=b.removeAllProperties||((f=b.removeProperties)===null||f===void 0?void 0:f.length)>0||((m=b.addOrUpdateProperties)===null||m===void 0?void 0:m.length)>0;if(!P&&!k)continue;x.push(E.geometry);const B=Object.assign({},E);if(s.set(b.id,B),P&&(x.push(b.newGeometry),B.geometry=b.newGeometry),k){if(B.properties=b.removeAllProperties?{}:Object.assign({},B.properties||{}),b.removeProperties)for(const F of b.removeProperties)delete B.properties[F];if(b.addOrUpdateProperties)for(const{key:F,value:Z}of b.addOrUpdateProperties)B.properties[F]=Z}}return x},v.a9=Zr,v.aA=function(s,{uSize:r,uSizeT:o},{lowerSize:f,upperSize:m}){return s.kind==="source"?f/jo:s.kind==="composite"?gn.number(f/jo,m/jo,o):r},v.aB=function(s,r){var o=r[0],f=r[1],m=r[2],x=r[3],b=r[4],E=r[5],P=r[6],k=r[7],B=r[8],F=r[9],Z=r[10],W=r[11],J=r[12],te=r[13],ie=r[14],ue=r[15],xe=o*E-f*b,le=o*P-m*b,pe=o*k-x*b,Me=f*P-m*E,ke=f*k-x*E,We=m*k-x*P,st=B*te-F*J,lt=B*ie-Z*J,yt=B*ue-W*J,Dt=F*ie-Z*te,wt=F*ue-W*te,ut=Z*ue-W*ie,rt=xe*ut-le*wt+pe*Dt+Me*yt-ke*lt+We*st;return rt?(s[0]=(E*ut-P*wt+k*Dt)*(rt=1/rt),s[1]=(m*wt-f*ut-x*Dt)*rt,s[2]=(te*We-ie*ke+ue*Me)*rt,s[3]=(Z*ke-F*We-W*Me)*rt,s[4]=(P*yt-b*ut-k*lt)*rt,s[5]=(o*ut-m*yt+x*lt)*rt,s[6]=(ie*pe-J*We-ue*le)*rt,s[7]=(B*We-Z*pe+W*le)*rt,s[8]=(b*wt-E*yt+k*st)*rt,s[9]=(f*yt-o*wt-x*st)*rt,s[10]=(J*ke-te*pe+ue*xe)*rt,s[11]=(F*pe-B*ke-W*xe)*rt,s[12]=(E*lt-b*Dt-P*st)*rt,s[13]=(o*Dt-f*lt+m*st)*rt,s[14]=(te*le-J*Me-ie*xe)*rt,s[15]=(B*Me-F*le+Z*xe)*rt,s):null},v.aC=ct,v.aD=function(s){var r=s[0],o=s[1];return Math.sqrt(r*r+o*o)},v.aE=function(s){return s[0]=0,s[1]=0,s},v.aF=function(s,r,o){return s[0]=r[0]*o,s[1]=r[1]*o,s},v.aG=Vy,v.aH=It,v.aI=function(s,r,o,f){const m=r.y-s.y,x=r.x-s.x,b=f.y-o.y,E=f.x-o.x,P=b*x-E*m;if(P===0)return null;const k=(E*(s.y-o.y)-b*(s.x-o.x))/P;return new M(s.x+k*x,s.y+k*m)},v.aJ=h,v.aK=Nh,v.aL=function(s){let r=1/0,o=1/0,f=-1/0,m=-1/0;for(const x of s)r=Math.min(r,x.x),o=Math.min(o,x.y),f=Math.max(f,x.x),m=Math.max(m,x.y);return[r,o,f,m]},v.aM=hi,v.aN=Ut,v.aO=function(s,r,o,f,m=!1){if(!o[0]&&!o[1])return[0,0];const x=m?f==="map"?-s.bearingInRadians:0:f==="viewport"?s.bearingInRadians:0;if(x){const b=Math.sin(x),E=Math.cos(x);o=[o[0]*E-o[1]*b,o[0]*b+o[1]*E]}return[m?o[0]:Ut(r,o[0],s.zoom),m?o[1]:Ut(r,o[1],s.zoom)]},v.aQ=ag,v.aR=e1,v.aS=By,v.aT=t1,v.aU=yn,v.aV=fp,v.aW=de,v.aX=Ot,v.aY=Xe,v.aZ=Aa,v.a_=Wy,v.aa=Pc,v.ab=25,v.ac=Oi,v.ad=s=>{const r=window.document.createElement("video");return r.muted=!0,new Promise((o=>{r.onloadstart=()=>{o(r)};for(const f of s){const m=window.document.createElement("source");Ze(f)||(r.crossOrigin="Anonymous"),m.src=f,r.appendChild(m)}}))},v.ae=xt,v.af=function(){return ht++},v.ag=_,v.ah=fd,v.ai=kc,v.aj=na,v.ak=Ro,v.al=dg,v.am=function(s){const r={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((o,f,m,x)=>{const b=m||x;return r[f]=!b||b.toLowerCase(),""})),r["max-age"]){const o=parseInt(r["max-age"],10);isNaN(o)?delete r["max-age"]:r["max-age"]=o}return r},v.an=Kt,v.ao=85.051129,v.ap=oi,v.aq=function(s){return Math.pow(2,s)},v.ar=Ae,v.as=i0,v.at=function(s){return Math.log(s)/Math.LN2},v.au=function(s){var r=s[0],o=s[1];return r*r+o*o},v.av=function(s){if(!s.length)return new Set;const r=Math.max(...s.map((P=>P.canonical.z)));let o=1/0,f=-1/0,m=1/0,x=-1/0;const b=[];for(const P of s){const{x:k,y:B,z:F}=P.canonical,Z=Math.pow(2,r-F),W=k*Z,J=B*Z;b.push({id:P,x:W,y:J}),W<o&&(o=W),W>f&&(f=W),J<m&&(m=J),J>x&&(x=J)}const E=new Set;for(const P of b)P.x!==o&&P.x!==f&&P.y!==m&&P.y!==x||E.add(P.id);return E},v.aw=function(s,r){const o=Math.abs(2*s.wrap)-+(s.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return s.overscaledZ-r.overscaledZ||f-o||r.canonical.y-s.canonical.y||r.canonical.x-s.canonical.x},v.ax=class{constructor(s,r){this.max=s,this.onRemove=r,this.reset()}reset(){for(const s in this.data)for(const r of this.data[s])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(s,r,o){const f=s.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const m={value:r,timeout:void 0};if(o!==void 0&&(m.timeout=setTimeout((()=>{this.remove(s,m)}),o)),this.data[f].push(m),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){const r=this.data[s].shift();return r.timeout&&clearTimeout(r.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),r.value}getByKey(s){const r=this.data[s];return r?r[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,r){if(!this.has(s))return this;const o=s.wrapped().key,f=r===void 0?0:this.data[o].indexOf(r),m=this.data[o][f];return this.data[o].splice(f,1),m.timeout&&clearTimeout(m.timeout),this.data[o].length===0&&delete this.data[o],this.onRemove(m.value),this.order.splice(this.order.indexOf(o),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(s){const r=[];for(const o in this.data)for(const f of this.data[o])s(f.value)||r.push(f);for(const o of r)this.remove(o.value.tileID,o)}},v.ay=function(s,r){let o=0,f=0;if(s.kind==="constant")f=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:m,minZoom:x,maxZoom:b}=s,E=m?Kt(Gi.interpolationFactor(m,r,x,b),0,1):0;s.kind==="camera"?f=gn.number(s.minSize,s.maxSize,E):o=E}return{uSizeT:o,uSize:f}},v.b=Ea,v.b$=ko,v.b0=et,v.b1=function(s){var r=new fe(3);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r},v.b2=function(s,r,o){return s[0]=r[0]-o[0],s[1]=r[1]-o[1],s[2]=r[2]-o[2],s},v.b3=function(s,r){var o=r[0],f=r[1],m=r[2],x=o*o+f*f+m*m;return x>0&&(x=1/Math.sqrt(x)),s[0]=r[0]*x,s[1]=r[1]*x,s[2]=r[2]*x,s},v.b4=pt,v.b5=function(s,r){return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]},v.b6=function(s,r,o){return s[0]=r[0]*o[0],s[1]=r[1]*o[1],s[2]=r[2]*o[2],s[3]=r[3]*o[3],s},v.b7=Se,v.b8=function(s,r,o){const f=r[0]*o[0]+r[1]*o[1]+r[2]*o[2];return f===0?null:(-(s[0]*o[0]+s[1]*o[1]+s[2]*o[2])-o[3])/f},v.b9=Ct,v.bA=function(){return new Float64Array(3)},v.bB=$e,v.bC=function(s,r,o){var f=o[0],m=o[1],x=o[2],b=o[3],E=r[0],P=r[1],k=r[2],B=m*k-x*P,F=x*E-f*k,Z=f*P-m*E;return s[0]=E+b*(B+=B)+m*(Z+=Z)-x*(F+=F),s[1]=P+b*F+x*B-f*Z,s[2]=k+b*Z+f*F-m*B,s},v.bD=function(s,r,o){const f=(m=[s[0],s[1],s[2],r[0],r[1],r[2],o[0],o[1],o[2]])[0]*((B=m[8])*(b=m[4])-(E=m[5])*(k=m[7]))+m[1]*(-B*(x=m[3])+E*(P=m[6]))+m[2]*(k*x-b*P);var m,x,b,E,P,k,B;if(f===0)return null;const F=pt([],[r[0],r[1],r[2]],[o[0],o[1],o[2]]),Z=pt([],[o[0],o[1],o[2]],[s[0],s[1],s[2]]),W=pt([],[s[0],s[1],s[2]],[r[0],r[1],r[2]]),J=vt([],F,-s[3]);return et(J,J,vt([],Z,-r[3])),et(J,J,vt([],W,-o[3])),vt(J,J,1/f),J},v.bE=hg,v.bF=function(){return new Float64Array(4)},v.bG=function(s,r,o,f){var m=[],x=[];return m[0]=r[0]-o[0],m[1]=r[1]-o[1],m[2]=r[2]-o[2],x[0]=m[0]*Math.cos(f)-m[1]*Math.sin(f),x[1]=m[0]*Math.sin(f)+m[1]*Math.cos(f),x[2]=m[2],s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},v.bH=function(s,r,o,f){var m=[],x=[];return m[0]=r[0]-o[0],m[1]=r[1]-o[1],m[2]=r[2]-o[2],x[0]=m[0],x[1]=m[1]*Math.cos(f)-m[2]*Math.sin(f),x[2]=m[1]*Math.sin(f)+m[2]*Math.cos(f),s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},v.bI=function(s,r,o,f){var m=[],x=[];return m[0]=r[0]-o[0],m[1]=r[1]-o[1],m[2]=r[2]-o[2],x[0]=m[2]*Math.sin(f)+m[0]*Math.cos(f),x[1]=m[1],x[2]=m[2]*Math.cos(f)-m[0]*Math.sin(f),s[0]=x[0]+o[0],s[1]=x[1]+o[1],s[2]=x[2]+o[2],s},v.bJ=function(s,r,o){var f=Math.sin(o),m=Math.cos(o),x=r[0],b=r[1],E=r[2],P=r[3],k=r[8],B=r[9],F=r[10],Z=r[11];return r!==s&&(s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=x*m-k*f,s[1]=b*m-B*f,s[2]=E*m-F*f,s[3]=P*m-Z*f,s[8]=x*f+k*m,s[9]=b*f+B*m,s[10]=E*f+F*m,s[11]=P*f+Z*m,s},v.bK=function(s,r){const o=ze(s,360),f=ze(r,360),m=f-o,x=f>o?m-360:m+360;return Math.abs(m)<Math.abs(x)?m:x},v.bL=function(s){return s[0]=0,s[1]=0,s[2]=0,s},v.bM=function(s,r,o,f){const m=Math.sqrt(s*s+r*r),x=Math.sqrt(o*o+f*f);s/=m,r/=m,o/=x,f/=x;const b=Math.acos(s*o+r*f);return-r*o+s*f>0?b:-b},v.bN=function(s,r){const o=ze(s,2*Math.PI),f=ze(r,2*Math.PI);return Math.min(Math.abs(o-f),Math.abs(o-f+2*Math.PI),Math.abs(o-f-2*Math.PI))},v.bO=function(){const s={},r=De.$version;for(const o in De.$root){const f=De.$root[o];if(f.required){let m=null;m=o==="version"?r:f.type==="array"?[]:{},m!=null&&(s[o]=m)}}return s},v.bP=Te,v.bQ=Hf,v.bR=function s(r,o){if(Array.isArray(r)){if(!Array.isArray(o)||r.length!==o.length)return!1;for(let f=0;f<r.length;f++)if(!s(r[f],o[f]))return!1;return!0}if(typeof r=="object"&&r!==null&&o!==null){if(typeof o!="object"||Object.keys(r).length!==Object.keys(o).length)return!1;for(const f in r)if(!s(r[f],o[f]))return!1;return!0}return r===o},v.bS=function(s){s=s.slice();const r=Object.create(null);for(let o=0;o<s.length;o++)r[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=ir(s[o],r[s[o].ref]));return s},v.bT=function(s,r){if(s.type==="custom")return new Gy(s,r);switch(s.type){case"background":return new Cr(s,r);case"circle":return new Bm(s,r);case"color-relief":return new O_(s,r);case"fill":return new L_(s,r);case"fill-extrusion":return new Oy(s,r);case"heatmap":return new C_(s,r);case"hillshade":return new Bn(s,r);case"line":return new zy(s,r);case"raster":return new Bs(s,r);case"symbol":return new Mc(s,r)}},v.bU=s=>s.type==="raster",v.bV=St,v.bW=function(s,r){if(!s)return[{command:"setStyle",args:[r]}];let o=[];try{if(!Yt(s.version,r.version))return[{command:"setStyle",args:[r]}];Yt(s.center,r.center)||o.push({command:"setCenter",args:[r.center]}),Yt(s.state,r.state)||o.push({command:"setGlobalState",args:[r.state]}),Yt(s.centerAltitude,r.centerAltitude)||o.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Yt(s.zoom,r.zoom)||o.push({command:"setZoom",args:[r.zoom]}),Yt(s.bearing,r.bearing)||o.push({command:"setBearing",args:[r.bearing]}),Yt(s.pitch,r.pitch)||o.push({command:"setPitch",args:[r.pitch]}),Yt(s.roll,r.roll)||o.push({command:"setRoll",args:[r.roll]}),Yt(s.sprite,r.sprite)||o.push({command:"setSprite",args:[r.sprite]}),Yt(s.glyphs,r.glyphs)||o.push({command:"setGlyphs",args:[r.glyphs]}),Yt(s.transition,r.transition)||o.push({command:"setTransition",args:[r.transition]}),Yt(s.light,r.light)||o.push({command:"setLight",args:[r.light]}),Yt(s.terrain,r.terrain)||o.push({command:"setTerrain",args:[r.terrain]}),Yt(s.sky,r.sky)||o.push({command:"setSky",args:[r.sky]}),Yt(s.projection,r.projection)||o.push({command:"setProjection",args:[r.projection]});const f={},m=[];(function(b,E,P,k){let B;for(B in E=E||{},b=b||{})Object.prototype.hasOwnProperty.call(b,B)&&(Object.prototype.hasOwnProperty.call(E,B)||ar(B,P,k));for(B in E)Object.prototype.hasOwnProperty.call(E,B)&&(Object.prototype.hasOwnProperty.call(b,B)?Yt(b[B],E[B])||(b[B].type==="geojson"&&E[B].type==="geojson"&&On(b,E,B)?Jt(P,{command:"setGeoJSONSourceData",args:[B,E[B].data]}):fn(B,E,P,k)):er(B,E,P))})(s.sources,r.sources,m,f);const x=[];s.layers&&s.layers.forEach((b=>{"source"in b&&f[b.source]?o.push({command:"removeLayer",args:[b.id]}):x.push(b)})),o=o.concat(m),(function(b,E,P){E=E||[];const k=(b=b||[]).map(Mi),B=E.map(Mi),F=b.reduce(dn,{}),Z=E.reduce(dn,{}),W=k.slice(),J=Object.create(null);let te,ie,ue,xe,le;for(let pe=0,Me=0;pe<k.length;pe++)te=k[pe],Object.prototype.hasOwnProperty.call(Z,te)?Me++:(Jt(P,{command:"removeLayer",args:[te]}),W.splice(W.indexOf(te,Me),1));for(let pe=0,Me=0;pe<B.length;pe++)te=B[B.length-1-pe],W[W.length-1-pe]!==te&&(Object.prototype.hasOwnProperty.call(F,te)?(Jt(P,{command:"removeLayer",args:[te]}),W.splice(W.lastIndexOf(te,W.length-Me),1)):Me++,xe=W[W.length-pe],Jt(P,{command:"addLayer",args:[Z[te],xe]}),W.splice(W.length-pe,0,te),J[te]=!0);for(let pe=0;pe<B.length;pe++)if(te=B[pe],ie=F[te],ue=Z[te],!J[te]&&!Yt(ie,ue))if(Yt(ie.source,ue.source)&&Yt(ie["source-layer"],ue["source-layer"])&&Yt(ie.type,ue.type)){for(le in wn(ie.layout,ue.layout,P,te,null,"setLayoutProperty"),wn(ie.paint,ue.paint,P,te,null,"setPaintProperty"),Yt(ie.filter,ue.filter)||Jt(P,{command:"setFilter",args:[te,ue.filter]}),Yt(ie.minzoom,ue.minzoom)&&Yt(ie.maxzoom,ue.maxzoom)||Jt(P,{command:"setLayerZoomRange",args:[te,ue.minzoom,ue.maxzoom]}),ie)Object.prototype.hasOwnProperty.call(ie,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?wn(ie[le],ue[le],P,te,le.slice(6),"setPaintProperty"):Yt(ie[le],ue[le])||Jt(P,{command:"setLayerProperty",args:[te,le,ue[le]]}));for(le in ue)Object.prototype.hasOwnProperty.call(ue,le)&&!Object.prototype.hasOwnProperty.call(ie,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?wn(ie[le],ue[le],P,te,le.slice(6),"setPaintProperty"):Yt(ie[le],ue[le])||Jt(P,{command:"setLayerProperty",args:[te,le,ue[le]]}))}else Jt(P,{command:"removeLayer",args:[te]}),xe=W[W.lastIndexOf(te)+1],Jt(P,{command:"addLayer",args:[ue,xe]})})(x,r.layers,o)}catch(f){console.warn("Unable to compute style diff:",f),o=[{command:"setStyle",args:[r]}]}return o},v.bX=function(s){const r=[],o=s.id;return o===void 0&&r.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&r.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&r.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),r},v.bY=sr,v.bZ=mr,v.b_=class extends sa{constructor(s,r){super(s,r),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},v.ba=function(s,r,o){return s[0]=r[0]*o,s[1]=r[1]*o,s[2]=r[2]*o,s[3]=r[3]*o,s},v.bb=function(s,r){return s[0]*r[0]+s[1]*r[1]+s[2]*r[2]+s[3]},v.bc=o0,v.bd=pd,v.be=function(s,r,o,f,m){var x=1/Math.tan(r/2);if(s[0]=x/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,m!=null&&m!==1/0){var b=1/(f-m);s[10]=(m+f)*b,s[14]=2*m*f*b}else s[10]=-1,s[14]=-2*f;return s},v.bf=function(s){var r=new fe(16);return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],r[9]=s[9],r[10]=s[10],r[11]=s[11],r[12]=s[12],r[13]=s[13],r[14]=s[14],r[15]=s[15],r},v.bg=function(s,r,o){var f=Math.sin(o),m=Math.cos(o),x=r[0],b=r[1],E=r[2],P=r[3],k=r[4],B=r[5],F=r[6],Z=r[7];return r!==s&&(s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[0]=x*m+k*f,s[1]=b*m+B*f,s[2]=E*m+F*f,s[3]=P*m+Z*f,s[4]=k*m-x*f,s[5]=B*m-b*f,s[6]=F*m-E*f,s[7]=Z*m-P*f,s},v.bh=function(s,r,o){var f=Math.sin(o),m=Math.cos(o),x=r[4],b=r[5],E=r[6],P=r[7],k=r[8],B=r[9],F=r[10],Z=r[11];return r!==s&&(s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15]),s[4]=x*m+k*f,s[5]=b*m+B*f,s[6]=E*m+F*f,s[7]=P*m+Z*f,s[8]=k*m-x*f,s[9]=B*m-b*f,s[10]=F*m-E*f,s[11]=Z*m-P*f,s},v.bi=function(){const s=new Float32Array(16);return Ae(s),s},v.bj=function(){const s=new Float64Array(16);return Ae(s),s},v.bk=function(){return new Float64Array(16)},v.bl=function(s,r,o){const f=new Float64Array(4);return $e(f,s,r-90,o),f},v.bm=function(s,r,o,f){var m,x,b,E,P,k=r[0],B=r[1],F=r[2],Z=r[3],W=o[0],J=o[1],te=o[2],ie=o[3];return(x=k*W+B*J+F*te+Z*ie)<0&&(x=-x,W=-W,J=-J,te=-te,ie=-ie),1-x>he?(m=Math.acos(x),b=Math.sin(m),E=Math.sin((1-f)*m)/b,P=Math.sin(f*m)/b):(E=1-f,P=f),s[0]=E*k+P*W,s[1]=E*B+P*J,s[2]=E*F+P*te,s[3]=E*Z+P*ie,s},v.bn=function(s){const r=new Float64Array(9);var o,f,m,x,b,E,P,k,B,F,Z,W,J,te,ie,ue,xe,le;F=(m=(f=s)[0])*(P=m+m),Z=(x=f[1])*P,J=(b=f[2])*P,te=b*(k=x+x),ue=(E=f[3])*P,xe=E*k,le=E*(B=b+b),(o=r)[0]=1-(W=x*k)-(ie=b*B),o[3]=Z-le,o[6]=J+xe,o[1]=Z+le,o[4]=1-F-ie,o[7]=te-ue,o[2]=J-xe,o[5]=te+ue,o[8]=1-F-W;const pe=Aa(-Math.asin(Kt(r[2],-1,1)));let Me,ke;return Math.hypot(r[5],r[8])<.001?(Me=0,ke=-Aa(Math.atan2(r[3],r[4]))):(Me=Aa(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),ke=Aa(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:Me,pitch:pe+90,bearing:ke}},v.bo=function(s,r){return s.roll==r.roll&&s.pitch==r.pitch&&s.bearing==r.bearing},v.bp=gr,v.bq=vu,v.br=fo,v.bs=qs,v.bt=Di,v.bu=at,v.bv=Pt,v.bw=li,v.bx=function(s,r,o,f,m){return at(f,m,Kt((s-r)/(o-r),0,1))},v.by=function(s,r,o,f){return s[0]=r[0]+o[0]*f,s[1]=r[1]+o[1]*f,s[2]=r[2]+o[2]*f,s},v.bz=ze,v.c=Be,v.c$=class{constructor(s){this.start=`${s}#start`,this.end=`${s}#end`,this.measure=s,performance.mark(this.start)}finish(){performance.mark(this.end);let s=performance.getEntriesByName(this.measure);return s.length===0&&(performance.measure(this.measure,this.start,this.end),s=performance.getEntriesByName(this.measure),performance.clearMarks(this.start),performance.clearMarks(this.end),performance.clearMeasures(this.measure)),s}},v.c0=class extends sa{constructor(s,r){super(s,r),this.current=la}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let r=1;r<16;r++)if(s[r]!==this.current[r]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},v.c1=bc,v.c2=class extends sa{constructor(s,r){super(s,r),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},v.c3=class extends sa{constructor(s,r){super(s,r),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},v.c4=me,v.c5=function(s,r){var o=Math.sin(r),f=Math.cos(r);return s[0]=f,s[1]=o,s[2]=0,s[3]=-o,s[4]=f,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},v.c6=function(s,r,o){var f=r[0],m=r[1],x=r[2];return s[0]=f*o[0]+m*o[3]+x*o[6],s[1]=f*o[1]+m*o[4]+x*o[7],s[2]=f*o[2]+m*o[5]+x*o[8],s},v.c7=function(s,r,o,f,m,x,b){var E=1/(r-o),P=1/(f-m),k=1/(x-b);return s[0]=-2*E,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*P,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*k,s[11]=0,s[12]=(r+o)*E,s[13]=(m+f)*P,s[14]=(b+x)*k,s[15]=1,s},v.c8=class extends sa{constructor(s,r){super(s,r),this.current=new Array}set(s){if(s!=this.current){this.current=s;const r=new Float32Array(4*s.length);for(let o=0;o<s.length;o++)r[4*o]=s[o].r,r[4*o+1]=s[o].g,r[4*o+2]=s[o].b,r[4*o+3]=s[o].a;this.gl.uniform4fv(this.location,r)}}},v.c9=class extends sa{constructor(s,r){super(s,r),this.current=new Array}set(s){if(s!=this.current){this.current=s;const r=new Float32Array(s);this.gl.uniform1fv(this.location,r)}}},v.cA=function(s,r){var o;if(!Ts[r])return!1;const f=s?.target,m=((o=f?.ownerDocument)===null||o===void 0?void 0:o.defaultView)||window;return s instanceof m.MouseEvent||s instanceof m.WheelEvent},v.cB=function(s,r){return Yu[r]&&"touches"in s},v.cC=function(s){return Yu[s]||Ts[s]},v.cD=function(s,r,o){var f=r[0],m=r[1];return s[0]=o[0]*f+o[4]*m+o[12],s[1]=o[1]*f+o[5]*m+o[13],s},v.cE=function(s,r){const{x:o,y:f}=Zr.fromLngLat(r);return!(s<0||s>25||f<0||f>=1||o<0||o>=1)},v.cF=function(s,r){return s[0]=r[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=r[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=r[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},v.cG=class extends pu{},v.cH=IL,v.cJ=ae,v.cK=function(s,r){Be.REGISTERED_PROTOCOLS[s]=r},v.cL=function(s){delete Be.REGISTERED_PROTOCOLS[s]},v.cM=function(s,r){const o={};for(let m=0;m<s.length;m++){const x=r&&r[s[m].id]||Os(s[m]);r&&(r[s[m].id]=x);let b=o[x];b||(b=o[x]=[]),b.push(s[m])}const f=[];for(const m in o)f.push(o[m]);return f},v.cN=kt,v.cO=Xy,v.cP=S0,v.cQ=rg,v.cR=function(s){var r;s.bucket.createArrays(),s.bucket.tilePixelRatio=_t/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const o=s.bucket.layers[0],f=o.layout,m=o._unevaluatedLayout._values,x={layoutIconSize:m["icon-size"].possiblyEvaluate(new Ur(s.bucket.zoom+1),s.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Ur(s.bucket.zoom+1),s.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Ur(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:B,maxZoom:F}=s.bucket.textSizeData;x.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Ur(B),s.canonical),m["text-size"].possiblyEvaluate(new Ur(F),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:B,maxZoom:F}=s.bucket.iconSizeData;x.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Ur(B),s.canonical),m["icon-size"].possiblyEvaluate(new Ur(F),s.canonical)]}const b=f.get("text-line-height")*hi,E=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",P=f.get("text-keep-upright"),k=f.get("text-size");for(const B of s.bucket.features){const F=f.get("text-font").evaluate(B,{},s.canonical).join(","),Z=k.evaluate(B,{},s.canonical),W=x.layoutTextSize.evaluate(B,{},s.canonical),J=x.layoutIconSize.evaluate(B,{},s.canonical),te={horizontal:{},vertical:void 0},ie=B.text;let ue,xe=[0,0];if(ie){const Me=ie.toString(),ke=f.get("text-letter-spacing").evaluate(B,{},s.canonical)*hi,We=Wf(Me)?ke:0,st=f.get("text-anchor").evaluate(B,{},s.canonical),lt=T0(o,B,s.canonical);if(!lt){const ut=f.get("text-radial-offset").evaluate(B,{},s.canonical);xe=ut?ku(st,[ut*hi,Nr]):f.get("text-offset").evaluate(B,{},s.canonical).map((rt=>rt*hi))}let yt=E?"center":f.get("text-justify").evaluate(B,{},s.canonical);const Dt=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(B,{},s.canonical)*hi:1/0,wt=()=>{s.bucket.allowVerticalPlacement&&cs(Me)&&(te.vertical=_p(ie,s.glyphMap,s.glyphPositions,s.imagePositions,F,Dt,b,st,"left",We,xe,v.az.vertical,!0,W,Z))};if(!E&&lt){const ut=new Set;if(yt==="auto")for(let Lt=0;Lt<lt.values.length;Lt+=2)ut.add(e1(lt.values[Lt]));else ut.add(yt);let rt=!1;for(const Lt of ut)if(!te.horizontal[Lt])if(rt)te.horizontal[Lt]=te.horizontal[0];else{const Nt=_p(ie,s.glyphMap,s.glyphPositions,s.imagePositions,F,Dt,b,"center",Lt,We,xe,v.az.horizontal,!1,W,Z);Nt&&(te.horizontal[Lt]=Nt,rt=Nt.positionedLines.length===1)}wt()}else{yt==="auto"&&(yt=e1(st));const ut=_p(ie,s.glyphMap,s.glyphPositions,s.imagePositions,F,Dt,b,st,yt,We,xe,v.az.horizontal,!1,W,Z);ut&&(te.horizontal[yt]=ut),wt(),cs(Me)&&E&&P&&(te.vertical=_p(ie,s.glyphMap,s.glyphPositions,s.imagePositions,F,Dt,b,st,yt,We,xe,v.az.vertical,!1,W,Z))}}let le=!1;if(B.icon&&B.icon.name){const Me=s.imageMap[B.icon.name];Me&&(ue=Fy(s.imagePositions[B.icon.name],f.get("icon-offset").evaluate(B,{},s.canonical),f.get("icon-anchor").evaluate(B,{},s.canonical)),le=!!Me.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=le:s.bucket.sdfIcons!==le&&cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Me.pixelRatio!==s.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const pe=nE(te.horizontal)||te.vertical;(r=s.bucket).iconsInText||(r.iconsInText=!!pe&&pe.iconsInText),(pe||ue)&&DL(s.bucket,B,te,ue,s.imageMap,x,W,J,xe,le,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},v.cS=Uh,v.cT=Sc,v.cU=ad,v.cV=function(s){const r=new Jm;return(function(o,f){for(const m in o.layers)f.writeMessage(3,Pg,o.layers[m])})(s,r),r.finish()},v.cW=function(s,r,o,f,m,x){let b=y(s,r,o,m,0);return b=y(b,r,f,x,1),b},v.cX=class{constructor(s){this.maxEntries=s,this.map=new Map}get(s){const r=this.map.get(s);return r!==void 0&&(this.map.delete(s),this.map.set(s,r)),r}set(s,r){if(this.map.has(s))this.map.delete(s);else if(this.map.size>=this.maxEntries){const o=this.map.keys().next().value;this.map.delete(o)}this.map.set(s,r)}clear(){this.map.clear()}},v.cY=Pr,v.cZ=Jm,v.c_=cv,v.ca=class extends Fs{},v.cb=U_,v.cc=class extends vn{},v.cd=ip,v.ce=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},v.cf=Dl,v.cg=function(s,r,o){var f=r[0],m=r[1],x=r[2],b=o[3]*f+o[7]*m+o[11]*x+o[15];return s[0]=(o[0]*f+o[4]*m+o[8]*x+o[12])/(b=b||1),s[1]=(o[1]*f+o[5]*m+o[9]*x+o[13])/b,s[2]=(o[2]*f+o[6]*m+o[10]*x+o[14])/b,s},v.ch=class extends mu{},v.ci=class extends n{},v.cj=function(s,r){return s[0]===r[0]&&s[1]===r[1]&&s[2]===r[2]&&s[3]===r[3]&&s[4]===r[4]&&s[5]===r[5]&&s[6]===r[6]&&s[7]===r[7]&&s[8]===r[8]&&s[9]===r[9]&&s[10]===r[10]&&s[11]===r[11]&&s[12]===r[12]&&s[13]===r[13]&&s[14]===r[14]&&s[15]===r[15]},v.ck=function(s,r){var o=s[0],f=s[1],m=s[2],x=s[3],b=s[4],E=s[5],P=s[6],k=s[7],B=s[8],F=s[9],Z=s[10],W=s[11],J=s[12],te=s[13],ie=s[14],ue=s[15],xe=r[0],le=r[1],pe=r[2],Me=r[3],ke=r[4],We=r[5],st=r[6],lt=r[7],yt=r[8],Dt=r[9],wt=r[10],ut=r[11],rt=r[12],Lt=r[13],Nt=r[14],Wt=r[15];return Math.abs(o-xe)<=he*Math.max(1,Math.abs(o),Math.abs(xe))&&Math.abs(f-le)<=he*Math.max(1,Math.abs(f),Math.abs(le))&&Math.abs(m-pe)<=he*Math.max(1,Math.abs(m),Math.abs(pe))&&Math.abs(x-Me)<=he*Math.max(1,Math.abs(x),Math.abs(Me))&&Math.abs(b-ke)<=he*Math.max(1,Math.abs(b),Math.abs(ke))&&Math.abs(E-We)<=he*Math.max(1,Math.abs(E),Math.abs(We))&&Math.abs(P-st)<=he*Math.max(1,Math.abs(P),Math.abs(st))&&Math.abs(k-lt)<=he*Math.max(1,Math.abs(k),Math.abs(lt))&&Math.abs(B-yt)<=he*Math.max(1,Math.abs(B),Math.abs(yt))&&Math.abs(F-Dt)<=he*Math.max(1,Math.abs(F),Math.abs(Dt))&&Math.abs(Z-wt)<=he*Math.max(1,Math.abs(Z),Math.abs(wt))&&Math.abs(W-ut)<=he*Math.max(1,Math.abs(W),Math.abs(ut))&&Math.abs(J-rt)<=he*Math.max(1,Math.abs(J),Math.abs(rt))&&Math.abs(te-Lt)<=he*Math.max(1,Math.abs(te),Math.abs(Lt))&&Math.abs(ie-Nt)<=he*Math.max(1,Math.abs(ie),Math.abs(Nt))&&Math.abs(ue-Wt)<=he*Math.max(1,Math.abs(ue),Math.abs(Wt))},v.cl=function(s,r){return s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[3],s[4]=r[4],s[5]=r[5],s[6]=r[6],s[7]=r[7],s[8]=r[8],s[9]=r[9],s[10]=r[10],s[11]=r[11],s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s},v.cm=s=>s.type==="symbol",v.cn=s=>s.type==="circle",v.co=s=>s.type==="heatmap",v.cp=s=>s.type==="line",v.cq=s=>s.type==="fill",v.cr=s=>s.type==="fill-extrusion",v.cs=s=>s.type==="hillshade",v.ct=s=>s.type==="color-relief",v.cu=s=>s.type==="background",v.cv=s=>s.type==="custom",v.cw=zt,v.cx=function(s,r,o){if(r<=0)return s;const f=1/r;return o===void 0||Math.abs(o)<1e-10?Math.round(s*f)/f:(o>0?Math.ceil(s*f-1e-9):Math.floor(s*f+1e-10))/f},v.cy=function(s,r,o){const f=Et(r.x-o.x,r.y-o.y),m=Et(s.x-o.x,s.y-o.y);var x,b;return Aa(Math.atan2(f[0]*m[1]-f[1]*m[0],(x=f)[0]*(b=m)[0]+x[1]*b[1]))},v.cz=$t,v.d=Ze,v.d0=function(s,r,o,f,m){return u(this,void 0,void 0,(function*(){if(se())try{return yield Ss(s,r,o,f,m)}catch{}return(function(x,b,E,P,k){const B=x.width,F=x.height;Go&&So||(Go=new OffscreenCanvas(B,F),So=Go.getContext("2d",{willReadFrequently:!0})),Go.width=B,Go.height=F,So.drawImage(x,0,0,B,F);const Z=So.getImageData(b,E,P,k);return So.clearRect(0,0,B,F),Z.data})(s,r,o,f,m)}))},v.d1=td,v.d2=C,v.d3=class{constructor(s,r){this.layers={[kc]:this},this.name=kc,this.version=r?r.version:1,this.extent=r?r.extent:4096,this.length=s.length,this.features=s}feature(s){return new Jb(this.features[s],this.extent)}},v.d4=hc,v.d5=oo,v.e=Ar,v.f=s=>u(void 0,void 0,void 0,(function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(r)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),v.g=ee,v.h=s=>new Promise(((r,o)=>{const f=new Image;f.onload=()=>{r(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=il}))},f.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(s)],{type:"image/png"});f.src=s.byteLength?URL.createObjectURL(m):il})),v.i=ln,v.j=(s,r)=>Oe(Ar(s,{type:"json"}),r),v.k=mt,v.l=Ge,v.m=Oe,v.n=(s,r)=>Oe(Ar(s,{type:"arrayBuffer"}),r),v.o=function(s){return new Jm(s).readFields(X_,[])},v.p=jy,v.q=function(s){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(s))},v.r=np,v.s=Wu,v.t=qn,v.u=De,v.v=Eh,v.w=cr,v.x=Xf,v.y=Mo,v.z=js})),d("worker",["./shared"],(function(v){class u{constructor(ee,ne){this.keyCache={},ee&&this.replace(ee,ne)}replace(ee,ne){this._layerConfigs={},this._layers={},this.update(ee,[],ne)}update(ee,ne,ae){for(const Oe of ee){this._layerConfigs[Oe.id]=Oe;const Ze=this._layers[Oe.id]=v.bT(Oe,ae);Ze._featureFilter=v.aj(Ze.filter,ae),this.keyCache[Oe.id]&&delete this.keyCache[Oe.id]}for(const Oe of ne)delete this.keyCache[Oe],delete this._layerConfigs[Oe],delete this._layers[Oe];this.familiesBySource={};const Te=v.cM(Object.values(this._layerConfigs),this.keyCache);for(const Oe of Te){const Ze=Oe.map((De=>this._layers[De.id])),qe=Ze[0];if(qe.isHidden())continue;const Ne=qe.source||"";let Ge=this.familiesBySource[Ne];Ge||(Ge=this.familiesBySource[Ne]={});const mt=qe.sourceLayer||v.ai;let nt=Ge[mt];nt||(nt=Ge[mt]=[]),nt.push(Ze)}}}class M{constructor(ee){const ne={},ae=[];for(const qe in ee){const Ne=ee[qe],Ge=ne[qe]={};for(const mt in Ne){const nt=Ne[+mt];if(!nt||nt.bitmap.width===0||nt.bitmap.height===0)continue;const De={x:0,y:0,w:nt.bitmap.width+2,h:nt.bitmap.height+2};ae.push(De),Ge[mt]={rect:De,metrics:nt.metrics}}}const{w:Te,h:Oe}=v.p(ae),Ze=new v.r({width:Te||1,height:Oe||1});for(const qe in ee){const Ne=ee[qe];for(const Ge in Ne){const mt=Ne[+Ge];if(!mt||mt.bitmap.width===0||mt.bitmap.height===0)continue;const nt=ne[qe][Ge].rect;v.r.copy(mt.bitmap,Ze,{x:0,y:0},{x:nt.x+1,y:nt.y+1},mt.bitmap)}}this.image=Ze,this.positions=ne}}v.cN("GlyphAtlas",M);class C{constructor(ee){this.tileID=new v.a2(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,ne,ae,Te,Oe){return v._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new v.ag;const Ze=new v.cO(Object.keys(ee.layers).sort()),qe=new v.cP(this.tileID,this.promoteId);qe.bucketLayerIDs=[];const Ne={},Ge={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ae,subdivisionGranularity:Oe},mt=ne.familiesBySource[this.source];for(const Or in mt){const on=ee.layers[Or];if(!on)continue;on.version===1&&v.w(`Vector tile source "${this.source}" layer "${Or}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ta=Ze.encode(Or),Fr=[];for(let Tt=0;Tt<on.length;Tt++){const Qt=on.feature(Tt),hr=qe.getId(Qt,Or);Fr.push({feature:Qt,id:hr,index:Tt,sourceLayerIndex:ta})}for(const Tt of mt[Or]){const Qt=Tt[0];Qt.source!==this.source&&v.w(`layer.source = ${Qt.source} does not equal this.source = ${this.source}`),Qt.isHidden(this.zoom,!0)||(D(Tt,this.zoom,ae),(Ne[Qt.id]=Qt.createBucket({index:qe.bucketLayerIDs.length,layers:Tt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ta,sourceID:this.source})).populate(Fr,Ge,this.tileID.canonical),qe.bucketLayerIDs.push(Tt.map((hr=>hr.id))))}}const nt=v.bY(Ge.glyphDependencies,(Or=>Object.keys(Or).map(Number)));this.inFlightDependencies.forEach((Or=>Or?.abort())),this.inFlightDependencies=[];let De=Promise.resolve({});if(Object.keys(nt).length){const Or=new AbortController;this.inFlightDependencies.push(Or),De=Te.sendAsync({type:"GG",data:{stacks:nt,source:this.source,tileID:this.tileID,type:"glyphs"}},Or)}const Bt=Object.keys(Ge.iconDependencies);let ir=Promise.resolve({});if(Bt.length){const Or=new AbortController;this.inFlightDependencies.push(Or),ir=Te.sendAsync({type:"GI",data:{icons:Bt,source:this.source,tileID:this.tileID,type:"icons"}},Or)}const Yt=Object.keys(Ge.patternDependencies);let Jt=Promise.resolve({});if(Yt.length){const Or=new AbortController;this.inFlightDependencies.push(Or),Jt=Te.sendAsync({type:"GI",data:{icons:Yt,source:this.source,tileID:this.tileID,type:"patterns"}},Or)}const er=Ge.dashDependencies;let ar=Promise.resolve({});if(Object.keys(er).length){const Or=new AbortController;this.inFlightDependencies.push(Or),ar=Te.sendAsync({type:"GDA",data:{dashes:er}},Or)}const[fn,On,wn,Mi]=yield Promise.all([De,ir,Jt,ar]),dn=new M(fn),xt=new v.cQ(On,wn);for(const Or in Ne){const on=Ne[Or];on instanceof v.ah?(D(on.layers,this.zoom,ae),v.cR({bucket:on,glyphMap:fn,glyphPositions:dn.positions,imageMap:On,imagePositions:xt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ge.subdivisionGranularity})):on.hasDependencies&&(on instanceof v.cS||on instanceof v.cT||on instanceof v.cU)&&(D(on.layers,this.zoom,ae),on.addFeatures(Ge,this.tileID.canonical,xt.patternPositions,Mi))}return this.status="done",{buckets:Object.values(Ne).filter((Or=>!Or.isEmpty())),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:dn.image,imageAtlas:xt,dashPositions:Mi,glyphMap:this.returnDependencies?fn:null,iconMap:this.returnDependencies?On:null,glyphPositions:this.returnDependencies?dn.positions:null}}))}}function D(Be,ee,ne){const ae=new v.H(ee);for(const Te of Be)Te.recalculate(ae,ne)}class I{constructor(){this.loading={},this.loaded={},this.parsing={}}startLoading(ee,ne){this.loading[ee]=ne}finishLoading(ee){delete this.loading[ee]}abort(ee){const ne=this.loading[ee];ne?.abort&&(ne.abort.abort(),delete this.loading[ee])}setParsing(ee,ne){this.parsing[ee]=ne}consumeParsing(ee){const ne=this.parsing[ee];if(ne)return delete this.parsing[ee],ne}clearParsing(ee){delete this.parsing[ee]}markLoaded(ee,ne){this.loaded[ee]=ne}getLoaded(ee){const ne=this.loaded[ee];if(ne)return ne}removeLoaded(ee){delete this.loaded[ee]}clearLoaded(){this.loaded={}}}class N{constructor(ee,ne,ae,Te,Oe){this.type=ee,this.properties=ae||{},this.extent=Oe,this.pointsArray=ne,this.id=Te}loadGeometry(){return this.pointsArray.map((ee=>ee.map((ne=>new v.P(ne.x,ne.y)))))}}class G{constructor(ee,ne,ae){this.version=2,this._myFeatures=ee,this.name=ne,this.length=ee.length,this.extent=ae}feature(ee){return this._myFeatures[ee]}}class Y{constructor(){this.layers={}}addLayer(ee){this.layers[ee.name]=ee}}function H(Be){let ee=v.cV(Be);return ee.byteOffset===0&&ee.byteLength===ee.buffer.byteLength||(ee=new Uint8Array(ee)),{vectorTile:Be,rawData:ee.buffer}}function $(Be,ee,ne){const{extent:ae}=Be,Te=Math.pow(2,ne.z-ee.z),Oe=(ne.x-ee.x*Te)*ae,Ze=(ne.y-ee.y*Te)*ae,qe=[];for(let Ne=0;Ne<Be.length;Ne++){const Ge=Be.feature(Ne);let mt=Ge.loadGeometry();for(const De of mt)for(const Bt of De)Bt.x=Bt.x*Te-Oe,Bt.y=Bt.y*Te-Ze;const nt=128;mt=v.cW(mt,Ge.type,-nt,-nt,ae+nt,ae+nt),mt.length!==0&&qe.push(new N(Ge.type,mt,Ge.properties,Ge.id,ae))}return new G(qe,Be.name,ae)}class se{constructor(ee,ne,ae){this.actor=ee,this.layerIndex=ne,this.availableImages=ae,this.tileState=new I,this.overzoomedTileResultCache=new v.cX(1e3)}loadVectorTile(ee,ne){return v._(this,void 0,void 0,(function*(){const ae=yield v.n(ee.request,ne);try{return{vectorTile:ee.encoding!=="mlt"?new v.cY(new v.cZ(ae.data)):new v.c_(ae.data),rawData:ae.data,cacheControl:ae.cacheControl,expires:ae.expires}}catch(Te){const Oe=new Uint8Array(ae.data);let Ze=`Unable to parse the tile at ${ee.request.url}, `;throw Ze+=Oe[0]===31&&Oe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Te.message}`,new Error(Ze)}}))}loadTile(ee){return v._(this,void 0,void 0,(function*(){const{uid:ne,overzoomParameters:ae}=ee;ae&&(ee.request=ae.overzoomRequest);const Te=this._startRequestTiming(ee),Oe=new C(ee);this.tileState.startLoading(ne,Oe);const Ze=new AbortController;Oe.abort=Ze;try{const qe=yield this.loadVectorTile(ee,Ze);if(this.tileState.finishLoading(ne),!qe)return null;let{vectorTile:Ne,rawData:Ge}=qe;ae&&({vectorTile:Ne,rawData:Ge}=this._getOverzoomTile(ee,qe.vectorTile));const mt=this._getExpiryData(qe),nt=this._finishRequestTiming(Te);Oe.vectorTile=Ne,this.tileState.markLoaded(ne,Oe);const De={rawData:Ge,cacheControl:mt,resourceTiming:nt};this.tileState.setParsing(ne,De);try{return yield this._parseWorkerTile(Oe,ee,De)}finally{this.tileState.clearParsing(ne)}}catch(qe){throw this.tileState.finishLoading(ne),Oe.status="done",this.tileState.markLoaded(ne,Oe),qe}}))}_parseWorkerTile(ee,ne,ae){return v._(this,void 0,void 0,(function*(){let Te=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);if(ae){const{rawData:Oe,cacheControl:Ze,resourceTiming:qe}=ae;Te=v.e({rawTileData:Oe.slice(0),encoding:ne.encoding},Te,Ze,qe)}return Te}))}_getExpiryData(ee){const{expires:ne,cacheControl:ae}=ee,Te={};return ne&&(Te.expires=ne),ae&&(Te.cacheControl=ae),Te}_startRequestTiming(ee){var ne;if(!((ne=ee.request)===null||ne===void 0)&&ne.collectResourceTiming)return new v.c$(ee.request.url)}_finishRequestTiming(ee){const ne=ee?.finish();return ne?{resourceTiming:JSON.parse(JSON.stringify(ne))}:{}}_getOverzoomTile(ee,ne){const{tileID:ae,source:Te,overzoomParameters:Oe}=ee,{maxZoomTileID:Ze}=Oe,qe=`${Ze.key}_${ae.key}`,Ne=this.overzoomedTileResultCache.get(qe);if(Ne)return Ne;const Ge=new Y,mt=this.layerIndex.familiesBySource[Te];for(const De in mt){const Bt=ne.layers[De];if(!Bt)continue;const ir=$(Bt,Ze,ae.canonical);ir.length>0&&Ge.addLayer(ir)}const nt=H(Ge);return this.overzoomedTileResultCache.set(qe,nt),nt}reloadTile(ee){return v._(this,void 0,void 0,(function*(){const ne=ee.uid,ae=this.tileState.getLoaded(ne);if(!ae)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ae.showCollisionBoxes=ee.showCollisionBoxes,ae.status==="parsing"){const Te=this.tileState.consumeParsing(ne);return yield this._parseWorkerTile(ae,ee,Te)}if(ae.status==="done"&&ae.vectorTile)return yield this._parseWorkerTile(ae,ee)}))}abortTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}}class he{constructor(){this.loaded={}}loadTile(ee){return v._(this,void 0,void 0,(function*(){const{uid:ne,encoding:ae,rawImageData:Te,redFactor:Oe,greenFactor:Ze,blueFactor:qe,baseShift:Ne}=ee,Ge=Te.width+2,mt=Te.height+2,nt=v.b(Te)?new v.R({width:Ge,height:mt},yield v.d0(Te,-1,-1,Ge,mt)):Te,De=new v.d1(ne,nt,ae,Oe,Ze,qe,Ne);return this.loaded=this.loaded||{},this.loaded[ne]=De,De}))}removeTile(ee){const ne=this.loaded,ae=ee.uid;ne&&ne[ae]&&delete ne[ae]}}var fe,me,Ae=(function(){if(me)return fe;function Be(ne,ae){if(ne.length!==0){ee(ne[0],ae);for(var Te=1;Te<ne.length;Te++)ee(ne[Te],!ae)}}function ee(ne,ae){for(var Te=0,Oe=0,Ze=0,qe=ne.length,Ne=qe-1;Ze<qe;Ne=Ze++){var Ge=(ne[Ze][0]-ne[Ne][0])*(ne[Ne][1]+ne[Ze][1]),mt=Te+Ge;Oe+=Math.abs(Te)>=Math.abs(Ge)?Te-mt+Ge:Ge-mt+Te,Te=mt}Te+Oe>=0!=!!ae&&ne.reverse()}return me=1,fe=function ne(ae,Te){var Oe,Ze=ae&&ae.type;if(Ze==="FeatureCollection")for(Oe=0;Oe<ae.features.length;Oe++)ne(ae.features[Oe],Te);else if(Ze==="GeometryCollection")for(Oe=0;Oe<ae.geometries.length;Oe++)ne(ae.geometries[Oe],Te);else if(Ze==="Feature")ne(ae.geometry,Te);else if(Ze==="Polygon")Be(ae.coordinates,Te);else if(Ze==="MultiPolygon")for(Oe=0;Oe<ae.coordinates.length;Oe++)Be(ae.coordinates[Oe],Te);return ae}})(),ge=v.d2(Ae);const Se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Be=>Be},Ue=Math.fround||(et=new Float32Array(1),Be=>(et[0]=+Be,et[0]));var et;class vt{constructor(ee){this.options=Object.assign(Object.create(Se),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:ne,minZoom:ae,maxZoom:Te}=this.options;ne&&console.time("total time");const Oe=`prepare ${ee.length} points`;ne&&console.time(Oe),this.points=ee;const Ze=[];for(let Ne=0;Ne<ee.length;Ne++){const Ge=ee[Ne];if(!Ge.geometry)continue;const[mt,nt]=Ge.geometry.coordinates,De=Ue(Ct(mt)),Bt=Ue(It(nt));Ze.push(De,Bt,1/0,Ne,-1,1),this.options.reduce&&Ze.push(0)}let qe=this.trees[Te+1]=this._createTree(Ze);ne&&console.timeEnd(Oe);for(let Ne=Te;Ne>=ae;Ne--){const Ge=+Date.now();qe=this.trees[Ne]=this._createTree(this._cluster(qe,Ne)),ne&&console.log("z%d: %d clusters in %dms",Ne,qe.numItems,+Date.now()-Ge)}return ne&&console.timeEnd("total time"),this}getClusters(ee,ne){let ae=((ee[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,ee[1]));let Oe=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Ze=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ae=-180,Oe=180;else if(ae>Oe){const nt=this.getClusters([ae,Te,180,Ze],ne),De=this.getClusters([-180,Te,Oe,Ze],ne);return nt.concat(De)}const qe=this.trees[this._limitZoom(ne)],Ne=qe.range(Ct(ae),It(Ze),Ct(Oe),It(Te)),Ge=qe.data,mt=[];for(const nt of Ne){const De=this.stride*nt;mt.push(Ge[De+5]>1?pt(Ge,De,this.clusterProps):this.points[Ge[De+3]])}return mt}getChildren(ee){const ne=this._getOriginId(ee),ae=this._getOriginZoom(ee),Te="No cluster with the specified id.",Oe=this.trees[ae];if(!Oe)throw new Error(Te);const Ze=Oe.data;if(ne*this.stride>=Ze.length)throw new Error(Te);const qe=this.options.radius/(this.options.extent*Math.pow(2,ae-1)),Ne=Oe.within(Ze[ne*this.stride],Ze[ne*this.stride+1],qe),Ge=[];for(const mt of Ne){const nt=mt*this.stride;Ze[nt+4]===ee&&Ge.push(Ze[nt+5]>1?pt(Ze,nt,this.clusterProps):this.points[Ze[nt+3]])}if(Ge.length===0)throw new Error(Te);return Ge}getLeaves(ee,ne,ae){const Te=[];return this._appendLeaves(Te,ee,ne=ne||10,ae=ae||0,0),Te}getTile(ee,ne,ae){const Te=this.trees[this._limitZoom(ee)],Oe=Math.pow(2,ee),{extent:Ze,radius:qe}=this.options,Ne=qe/Ze,Ge=(ae-Ne)/Oe,mt=(ae+1+Ne)/Oe,nt={features:[]};return this._addTileFeatures(Te.range((ne-Ne)/Oe,Ge,(ne+1+Ne)/Oe,mt),Te.data,ne,ae,Oe,nt),ne===0&&this._addTileFeatures(Te.range(1-Ne/Oe,Ge,1,mt),Te.data,Oe,ae,Oe,nt),ne===Oe-1&&this._addTileFeatures(Te.range(0,Ge,Ne/Oe,mt),Te.data,-1,ae,Oe,nt),nt.features.length?nt:null}getClusterExpansionZoom(ee){let ne=this._getOriginZoom(ee)-1;for(;ne<=this.options.maxZoom;){const ae=this.getChildren(ee);if(ne++,ae.length!==1)break;ee=ae[0].properties.cluster_id}return ne}_appendLeaves(ee,ne,ae,Te,Oe){const Ze=this.getChildren(ne);for(const qe of Ze){const Ne=qe.properties;if(Ne&&Ne.cluster?Oe+Ne.point_count<=Te?Oe+=Ne.point_count:Oe=this._appendLeaves(ee,Ne.cluster_id,ae,Te,Oe):Oe<Te?Oe++:ee.push(qe),ee.length===ae)break}return Oe}_createTree(ee){const ne=new v.aT(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ae=0;ae<ee.length;ae+=this.stride)ne.add(ee[ae],ee[ae+1]);return ne.finish(),ne.data=ee,ne}_addTileFeatures(ee,ne,ae,Te,Oe,Ze){for(const qe of ee){const Ne=qe*this.stride,Ge=ne[Ne+5]>1;let mt,nt,De;if(Ge)mt=Fe(ne,Ne,this.clusterProps),nt=ne[Ne],De=ne[Ne+1];else{const Yt=this.points[ne[Ne+3]];mt=Yt.properties;const[Jt,er]=Yt.geometry.coordinates;nt=Ct(Jt),De=It(er)}const Bt={type:1,geometry:[[Math.round(this.options.extent*(nt*Oe-ae)),Math.round(this.options.extent*(De*Oe-Te))]],tags:mt};let ir;ir=Ge||this.options.generateId?ne[Ne+3]:this.points[ne[Ne+3]].id,ir!==void 0&&(Bt.id=ir),Ze.features.push(Bt)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ne){const{radius:ae,extent:Te,reduce:Oe,minPoints:Ze}=this.options,qe=ae/(Te*Math.pow(2,ne)),Ne=ee.data,Ge=[],mt=this.stride;for(let nt=0;nt<Ne.length;nt+=mt){if(Ne[nt+2]<=ne)continue;Ne[nt+2]=ne;const De=Ne[nt],Bt=Ne[nt+1],ir=ee.within(Ne[nt],Ne[nt+1],qe),Yt=Ne[nt+5];let Jt=Yt;for(const er of ir){const ar=er*mt;Ne[ar+2]>ne&&(Jt+=Ne[ar+5])}if(Jt>Yt&&Jt>=Ze){let er,ar=De*Yt,fn=Bt*Yt,On=-1;const wn=(nt/mt<<5)+(ne+1)+this.points.length;for(const Mi of ir){const dn=Mi*mt;if(Ne[dn+2]<=ne)continue;Ne[dn+2]=ne;const xt=Ne[dn+5];ar+=Ne[dn]*xt,fn+=Ne[dn+1]*xt,Ne[dn+4]=wn,Oe&&(er||(er=this._map(Ne,nt,!0),On=this.clusterProps.length,this.clusterProps.push(er)),Oe(er,this._map(Ne,dn)))}Ne[nt+4]=wn,Ge.push(ar/Jt,fn/Jt,1/0,wn,-1,Jt),Oe&&Ge.push(On)}else{for(let er=0;er<mt;er++)Ge.push(Ne[nt+er]);if(Jt>1)for(const er of ir){const ar=er*mt;if(!(Ne[ar+2]<=ne)){Ne[ar+2]=ne;for(let fn=0;fn<mt;fn++)Ge.push(Ne[ar+fn])}}}}return Ge}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ne,ae){if(ee[ne+5]>1){const Ze=this.clusterProps[ee[ne+6]];return ae?Object.assign({},Ze):Ze}const Te=this.points[ee[ne+3]].properties,Oe=this.options.map(Te);return ae&&Oe===Te?Object.assign({},Oe):Oe}}function pt(Be,ee,ne){return{type:"Feature",id:Be[ee+3],properties:Fe(Be,ee,ne),geometry:{type:"Point",coordinates:[(ae=Be[ee],360*(ae-.5)),jt(Be[ee+1])]}};var ae}function Fe(Be,ee,ne){const ae=Be[ee+5],Te=ae>=1e4?`${Math.round(ae/1e3)}k`:ae>=1e3?Math.round(ae/100)/10+"k":ae,Oe=Be[ee+6],Ze=Oe===-1?{}:Object.assign({},ne[Oe]);return Object.assign(Ze,{cluster:!0,cluster_id:Be[ee+3],point_count:ae,point_count_abbreviated:Te})}function Ct(Be){return Be/360+.5}function It(Be){const ee=Math.sin(Be*Math.PI/180),ne=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ne<0?0:ne>1?1:ne}function jt(Be){const ee=(180-360*Be)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function $e(Be,ee,ne,ae){let Te=ae;const Oe=ee+(ne-ee>>1);let Ze,qe=ne-ee;const Ne=Be[ee],Ge=Be[ee+1],mt=Be[ne],nt=Be[ne+1];for(let De=ee+3;De<ne;De+=3){const Bt=ct(Be[De],Be[De+1],Ne,Ge,mt,nt);if(Bt>Te)Ze=De,Te=Bt;else if(Bt===Te){const ir=Math.abs(De-Oe);ir<qe&&(Ze=De,qe=ir)}}Te>ae&&(Ze-ee>3&&$e(Be,ee,Ze,ae),Be[Ze+2]=Te,ne-Ze>3&&$e(Be,Ze,ne,ae))}function ct(Be,ee,ne,ae,Te,Oe){let Ze=Te-ne,qe=Oe-ae;if(Ze!==0||qe!==0){const Ne=((Be-ne)*Ze+(ee-ae)*qe)/(Ze*Ze+qe*qe);Ne>1?(ne=Te,ae=Oe):Ne>0&&(ne+=Ze*Ne,ae+=qe*Ne)}return Ze=Be-ne,qe=ee-ae,Ze*Ze+qe*qe}function Et(Be,ee,ne,ae){const Te={type:ee,geom:ne},Oe={id:Be??null,type:Te.type,geometry:Te.geom,tags:ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(Te.type){case"Point":case"MultiPoint":case"LineString":_t(Oe,Te.geom);break;case"Polygon":_t(Oe,Te.geom[0]);break;case"MultiLineString":for(const Ze of Te.geom)_t(Oe,Ze);break;case"MultiPolygon":for(const Ze of Te.geom)_t(Oe,Ze[0])}return Oe}function _t(Be,ee){for(let ne=0;ne<ee.length;ne+=3)Be.minX=Math.min(Be.minX,ee[ne]),Be.minY=Math.min(Be.minY,ee[ne+1]),Be.maxX=Math.max(Be.maxX,ee[ne]),Be.maxY=Math.max(Be.maxY,ee[ne+1])}function Ut(Be,ee){const ne=[];switch(Be.type){case"FeatureCollection":for(let ae=0;ae<Be.features.length;ae++)ze(ne,Be.features[ae],ee,ae);break;case"Feature":ze(ne,Be,ee);break;default:ze(ne,{geometry:Be,properties:void 0},ee)}return ne}function ze(Be,ee,ne,ae){if(!ee.geometry)return;if(ee.geometry.type==="GeometryCollection"){for(const qe of ee.geometry.geometries)ze(Be,{id:ee.id,geometry:qe,properties:ee.properties},ne,ae);return}if(!ee.geometry.coordinates?.length)return;const Oe=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2);let Ze=ee.id;switch(ne.promoteId?Ze=ee.properties?.[ne.promoteId]:ne.generateId&&(Ze=ae||0),ee.geometry.type){case"Point":{const qe=[];return at(ee.geometry.coordinates,qe),void Be.push(Et(Ze,ee.geometry.type,qe,ee.properties))}case"MultiPoint":{const qe=[];for(const Ne of ee.geometry.coordinates)at(Ne,qe);return void Be.push(Et(Ze,ee.geometry.type,qe,ee.properties))}case"LineString":{const qe=[];return Pt(ee.geometry.coordinates,qe,Oe,!1),void Be.push(Et(Ze,ee.geometry.type,qe,ee.properties))}case"MultiLineString":{if(ne.lineMetrics){for(const Ne of ee.geometry.coordinates){const Ge=[];Pt(Ne,Ge,Oe,!1),Be.push(Et(Ze,"LineString",Ge,ee.properties))}return}const qe=[];return zt(ee.geometry.coordinates,qe,Oe,!1),void Be.push(Et(Ze,ee.geometry.type,qe,ee.properties))}case"Polygon":{const qe=[];return zt(ee.geometry.coordinates,qe,Oe,!0),void Be.push(Et(Ze,ee.geometry.type,qe,ee.properties))}case"MultiPolygon":{const qe=[];for(const Ne of ee.geometry.coordinates){const Ge=[];zt(Ne,Ge,Oe,!0),qe.push(Ge)}return void Be.push(Et(Ze,ee.geometry.type,qe,ee.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function at(Be,ee){ee.push($t(Be[0]),Kt(Be[1]),0)}function Pt(Be,ee,ne,ae){let Te,Oe,Ze=0;for(let Ne=0;Ne<Be.length;Ne++){const Ge=$t(Be[Ne][0]),mt=Kt(Be[Ne][1]);ee.push(Ge,mt,0),Ne>0&&(Ze+=ae?(Te*mt-Ge*Oe)/2:Math.sqrt(Math.pow(Ge-Te,2)+Math.pow(mt-Oe,2))),Te=Ge,Oe=mt}const qe=ee.length-3;ee[2]=1,ne>0&&$e(ee,0,qe,ne),ee[qe+2]=1,ee.size=Math.abs(Ze),ee.start=0,ee.end=ee.size}function zt(Be,ee,ne,ae){for(let Te=0;Te<Be.length;Te++){const Oe=[];Pt(Be[Te],Oe,ne,ae),ee.push(Oe)}}function $t(Be){return Be/360+.5}function Kt(Be){const ee=Math.sin(Be*Math.PI/180),ne=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ne<0?0:ne>1?1:ne}function Gt(Be,ee,ne,ae,Te,Oe,Ze,qe){if(ae/=ee,Oe>=(ne/=ee)&&Ze<ae)return Be;if(Ze<ne||Oe>=ae)return null;const Ne=[];for(const Ge of Be){const mt=Te===0?Ge.minX:Ge.minY,nt=Te===0?Ge.maxX:Ge.maxY;if(mt>=ne&&nt<ae)Ne.push(Ge);else if(!(nt<ne||mt>=ae))switch(Ge.type){case"Point":case"MultiPoint":{const De=[];if(Ar(Ge.geometry,De,ne,ae,Te),!De.length)continue;Ne.push(Et(Ge.id,De.length===3?"Point":"MultiPoint",De,Ge.tags));continue}case"LineString":{const De=[];if(ht(Ge.geometry,De,ne,ae,Te,!1,qe.lineMetrics),!De.length)continue;if(qe.lineMetrics){for(const Bt of De)Ne.push(Et(Ge.id,Ge.type,Bt,Ge.tags));continue}if(De.length>1){Ne.push(Et(Ge.id,"MultiLineString",De,Ge.tags));continue}Ne.push(Et(Ge.id,Ge.type,De[0],Ge.tags));continue}case"MultiLineString":{const De=[];if(mr(Ge.geometry,De,ne,ae,Te,!1),!De.length)continue;if(De.length===1){Ne.push(Et(Ge.id,"LineString",De[0],Ge.tags));continue}Ne.push(Et(Ge.id,Ge.type,De,Ge.tags));continue}case"Polygon":{const De=[];if(mr(Ge.geometry,De,ne,ae,Te,!0),!De.length)continue;Ne.push(Et(Ge.id,Ge.type,De,Ge.tags));continue}case"MultiPolygon":{const De=[];for(const Bt of Ge.geometry){const ir=[];mr(Bt,ir,ne,ae,Te,!0),ir.length&&De.push(ir)}if(!De.length)continue;Ne.push(Et(Ge.id,Ge.type,De,Ge.tags));continue}}}return Ne.length?Ne:null}function Ar(Be,ee,ne,ae,Te){for(let Oe=0;Oe<Be.length;Oe+=3){const Ze=Be[Oe+Te];Ze>=ne&&Ze<=ae&&St(ee,Be[Oe],Be[Oe+1],Be[Oe+2])}}function ht(Be,ee,ne,ae,Te,Oe,Ze){let qe=sr(Be);const Ne=Te===0?Dn:cr;let Ge,mt,nt=Be.start;for(let Jt=0;Jt<Be.length-3;Jt+=3){const er=Be[Jt],ar=Be[Jt+1],fn=Be[Jt+2],On=Be[Jt+3],wn=Be[Jt+4],Mi=Te===0?er:ar,dn=Te===0?On:wn;let xt=!1;Ze&&(Ge=Math.sqrt(Math.pow(er-On,2)+Math.pow(ar-wn,2))),Mi<ne?dn>ne&&(mt=Ne(qe,er,ar,On,wn,ne),Ze&&(qe.start=nt+Ge*mt)):Mi>ae?dn<ae&&(mt=Ne(qe,er,ar,On,wn,ae),Ze&&(qe.start=nt+Ge*mt)):St(qe,er,ar,fn),dn<ne&&Mi>=ne&&(mt=Ne(qe,er,ar,On,wn,ne),xt=!0),dn>ae&&Mi<=ae&&(mt=Ne(qe,er,ar,On,wn,ae),xt=!0),!Oe&&xt&&(Ze&&(qe.end=nt+Ge*mt),ee.push(qe),qe=sr(Be)),Ze&&(nt+=Ge)}let De=Be.length-3;const Bt=Be[De],ir=Be[De+1],Yt=Te===0?Bt:ir;Yt>=ne&&Yt<=ae&&St(qe,Bt,ir,Be[De+2]),De=qe.length-3,Oe&&De>=3&&(qe[De]!==qe[0]||qe[De+1]!==qe[1])&&St(qe,qe[0],qe[1],qe[2]),qe.length&&ee.push(qe)}function sr(Be){const ee=[];return ee.size=Be.size,ee.start=Be.start,ee.end=Be.end,ee}function mr(Be,ee,ne,ae,Te,Oe){for(const Ze of Be)ht(Ze,ee,ne,ae,Te,Oe,!1)}function St(Be,ee,ne,ae){Be.push(ee,ne,ae)}function Dn(Be,ee,ne,ae,Te,Oe){const Ze=(Oe-ee)/(ae-ee);return St(Be,Oe,ne+(Te-ne)*Ze,1),Ze}function cr(Be,ee,ne,ae,Te,Oe){const Ze=(Oe-ne)/(Te-ne);return St(Be,ee+(ae-ee)*Ze,Oe,1),Ze}function Wr(Be,ee){const ne=ee.buffer/ee.extent;let ae=Be;const Te=Gt(Be,1,-1-ne,ne,0,-1,2,ee),Oe=Gt(Be,1,1-ne,2+ne,0,-1,2,ee);return(Te||Oe)&&(ae=Gt(Be,1,-ne,1+ne,0,-1,2,ee)||[],Te&&(ae=ln(Te,1).concat(ae)),Oe&&(ae=ae.concat(ln(Oe,-1)))),ae}function ln(Be,ee){const ne=[];for(const ae of Be)switch(ae.type){case"Point":case"MultiPoint":case"LineString":{const Te=Lr(ae.geometry,ee);ne.push(Et(ae.id,ae.type,Te,ae.tags));continue}case"MultiLineString":case"Polygon":{const Te=[];for(const Oe of ae.geometry)Te.push(Lr(Oe,ee));ne.push(Et(ae.id,ae.type,Te,ae.tags));continue}case"MultiPolygon":{const Te=[];for(const Oe of ae.geometry){const Ze=[];for(const qe of Oe)Ze.push(Lr(qe,ee));Te.push(Ze)}ne.push(Et(ae.id,ae.type,Te,ae.tags));continue}}return ne}function Lr(Be,ee){const ne=[];ne.size=Be.size,Be.start!==void 0&&(ne.start=Be.start,ne.end=Be.end);for(let ae=0;ae<Be.length;ae+=3)ne.push(Be[ae]+ee,Be[ae+1],Be[ae+2]);return ne}function Ea(Be,ee){if(Be.transformed)return Be;const ne=1<<Be.z,ae=Be.x,Te=Be.y;for(const Oe of Be.features){if(Oe.type===1){const qe=[];for(let Ne=0;Ne<Oe.geometry.length;Ne+=2)qe.push(il(Oe.geometry[Ne],Oe.geometry[Ne+1],ee,ne,ae,Te));Oe.geometry=qe;continue}const Ze=[];for(const qe of Oe.geometry){const Ne=[];for(let Ge=0;Ge<qe.length;Ge+=2)Ne.push(il(qe[Ge],qe[Ge+1],ee,ne,ae,Te));Ze.push(Ne)}Oe.geometry=Ze}return Be.transformed=!0,Be}function il(Be,ee,ne,ae,Te,Oe){return[Math.round(ne*(Be*ae-Te)),Math.round(ne*(ee*ae-Oe))]}function Ss(Be,ee,ne,ae,Te){const Oe=ee===Te.maxZoom?0:Te.tolerance/((1<<ee)*Te.extent),Ze={features:[],numPoints:0,numSimplified:0,numFeatures:Be.length,source:null,x:ne,y:ae,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const qe of Be)Go(Ze,qe,Oe,Te);return Ze}function Go(Be,ee,ne,ae){Be.minX=Math.min(Be.minX,ee.minX),Be.minY=Math.min(Be.minY,ee.minY),Be.maxX=Math.max(Be.maxX,ee.maxX),Be.maxY=Math.max(Be.maxY,ee.maxY);let Te,Oe=ee.tags||null;switch(ee.type){case"Point":case"MultiPoint":{const Ze=[];for(let qe=0;qe<ee.geometry.length;qe+=3)Ze.push(ee.geometry[qe],ee.geometry[qe+1]),Be.numPoints++,Be.numSimplified++;if(!Ze.length)return;Te={type:1,tags:Oe,geometry:Ze};break}case"LineString":{const Ze=[];if(So(Ze,ee.geometry,Be,ne,!1,!1),!Ze.length)return;if(ae.lineMetrics){Oe={};for(const qe in ee.tags)Oe[qe]=ee.tags[qe];Oe.mapbox_clip_start=ee.geometry.start/ee.geometry.size,Oe.mapbox_clip_end=ee.geometry.end/ee.geometry.size}Te={type:2,tags:Oe,geometry:Ze};break}case"MultiLineString":case"Polygon":{const Ze=[];for(let qe=0;qe<ee.geometry.length;qe++)So(Ze,ee.geometry[qe],Be,ne,ee.type==="Polygon",qe===0);if(!Ze.length)return;Te={type:ee.type==="Polygon"?3:2,tags:Oe,geometry:Ze};break}case"MultiPolygon":{const Ze=[];for(let qe=0;qe<ee.geometry.length;qe++){const Ne=ee.geometry[qe];for(let Ge=0;Ge<Ne.length;Ge++)So(Ze,Ne[Ge],Be,ne,!0,Ge===0)}if(!Ze.length)return;Te={type:3,tags:Oe,geometry:Ze};break}}ee.id!==null&&(Te.id=ee.id),Be.features.push(Te)}function So(Be,ee,ne,ae,Te,Oe){const Ze=ae*ae;if(ae>0&&ee.size<(Te?Ze:ae))return void(ne.numPoints+=ee.length/3);const qe=[];for(let Ne=0;Ne<ee.length;Ne+=3)(ae===0||ee[Ne+2]>Ze)&&(ne.numSimplified++,qe.push(ee[Ne],ee[Ne+1])),ne.numPoints++;Te&&(function(Ne,Ge){let mt=0;for(let nt=0,De=Ne.length,Bt=De-2;nt<De;Bt=nt,nt+=2)mt+=(Ne[nt]-Ne[Bt])*(Ne[nt+1]+Ne[Bt+1]);if(mt>0===Ge)for(let nt=0,De=Ne.length;nt<De/2;nt+=2){const Bt=Ne[nt],ir=Ne[nt+1];Ne[nt]=Ne[De-2-nt],Ne[nt+1]=Ne[De-1-nt],Ne[De-2-nt]=Bt,Ne[De-1-nt]=ir}})(qe,Oe),Be.push(qe)}function Wu(Be,ee,ne){const ae=!!ee.newGeometry,Te=ee.removeAllProperties||ee.removeProperties?.length>0||ee.addOrUpdateProperties?.length>0;if(ae){let Oe=Ut({type:"FeatureCollection",features:[{type:"Feature",id:Be.id,geometry:ee.newGeometry,properties:Te?oi(Be.tags,ee):Be.tags}]},ne);return Oe=Wr(Oe,ne),Oe[0]}if(Te){const Oe={...Be};return Oe.tags=oi(Oe.tags,ee),Oe}return null}function oi(Be,ee){if(ee.removeAllProperties)return{};const ne={...Be||{}};if(ee.removeProperties)for(const ae of ee.removeProperties)delete ne[ae];if(ee.addOrUpdateProperties)for(const{key:ae,value:Te}of ee.addOrUpdateProperties)ne[ae]=Te;return ne}const Aa={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class Yu{options;tiles;tileCoords;stats={};total=0;source;constructor(ee,ne){const ae=(ne=this.options=Object.assign({},Aa,ne)).debug;if(ae&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");let Te=Ut(ee,ne);this.tiles={},this.tileCoords=[],ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Te=Wr(Te,ne),Te.length&&this.splitTile(Te,0,0,0),ne.updateable&&(this.source=Te),ae&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,ne,ae,Te,Oe,Ze,qe){const Ne=[ee,ne,ae,Te],Ge=this.options,mt=Ge.debug;for(;Ne.length;){Te=Ne.pop(),ae=Ne.pop(),ne=Ne.pop(),ee=Ne.pop();const nt=1<<ne,De=Ts(ne,ae,Te);let Bt=this.tiles[De];if(!Bt&&(mt>1&&console.time("creation"),Bt=this.tiles[De]=Ss(ee,ne,ae,Te,Ge),this.tileCoords.push({z:ne,x:ae,y:Te,id:De}),mt)){mt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,ae,Te,Bt.numFeatures,Bt.numPoints,Bt.numSimplified),console.timeEnd("creation"));const xt=`z${ne}`;this.stats[xt]=(this.stats[xt]||0)+1,this.total++}if(Bt.source=ee,Oe==null){if(ne===Ge.indexMaxZoom||Bt.numPoints<=Ge.indexMaxPoints)continue}else{if(ne===Ge.maxZoom||ne===Oe)continue;if(Oe!=null){const xt=Oe-ne;if(ae!==Ze>>xt||Te!==qe>>xt)continue}}if(Bt.source=null,!ee.length)continue;mt>1&&console.time("clipping");const ir=.5*Ge.buffer/Ge.extent,Yt=.5-ir,Jt=.5+ir,er=1+ir;let ar=null,fn=null,On=null,wn=null;const Mi=Gt(ee,nt,ae-ir,ae+Jt,0,Bt.minX,Bt.maxX,Ge),dn=Gt(ee,nt,ae+Yt,ae+er,0,Bt.minX,Bt.maxX,Ge);Mi&&(ar=Gt(Mi,nt,Te-ir,Te+Jt,1,Bt.minY,Bt.maxY,Ge),fn=Gt(Mi,nt,Te+Yt,Te+er,1,Bt.minY,Bt.maxY,Ge)),dn&&(On=Gt(dn,nt,Te-ir,Te+Jt,1,Bt.minY,Bt.maxY,Ge),wn=Gt(dn,nt,Te+Yt,Te+er,1,Bt.minY,Bt.maxY,Ge)),mt>1&&console.timeEnd("clipping"),Ne.push(ar||[],ne+1,2*ae,2*Te),Ne.push(fn||[],ne+1,2*ae,2*Te+1),Ne.push(On||[],ne+1,2*ae+1,2*Te),Ne.push(wn||[],ne+1,2*ae+1,2*Te+1)}}getTile(ee,ne,ae){ee=+ee,ne=+ne,ae=+ae;const Te=this.options,{extent:Oe,debug:Ze}=Te;if(ee<0||ee>24)return null;const qe=1<<ee,Ne=Ts(ee,ne=ne+qe&qe-1,ae);if(this.tiles[Ne])return Ea(this.tiles[Ne],Oe);Ze>1&&console.log("drilling down to z%d-%d-%d",ee,ne,ae);let Ge,mt=ee,nt=ne,De=ae;for(;!Ge&&mt>0;)mt--,nt>>=1,De>>=1,Ge=this.tiles[Ts(mt,nt,De)];return Ge?.source?(Ze>1&&(console.log("found parent tile z%d-%d-%d",mt,nt,De),console.time("drilling down")),this.splitTile(Ge.source,mt,nt,De,ee,ne,ae),Ze>1&&console.timeEnd("drilling down"),this.tiles[Ne]?Ea(this.tiles[Ne],Oe):null):null}invalidateTiles(ee){const ne=this.options,{debug:ae}=ne;let Te=1/0,Oe=-1/0,Ze=1/0,qe=-1/0;for(const mt of ee)Te=Math.min(Te,mt.minX),Oe=Math.max(Oe,mt.maxX),Ze=Math.min(Ze,mt.minY),qe=Math.max(qe,mt.maxY);const Ne=ne.buffer/ne.extent,Ge=new Set;for(const mt in this.tiles){const nt=this.tiles[mt],De=1<<nt.z,Bt=(nt.x-Ne)/De,ir=(nt.x+1+Ne)/De,Yt=(nt.y-Ne)/De,Jt=(nt.y+1+Ne)/De;if(Oe<Bt||Te>=ir||qe<Yt||Ze>=Jt)continue;let er=!1;for(const ar of ee)if(ar.maxX>=Bt&&ar.minX<ir&&ar.maxY>=Yt&&ar.minY<Jt){er=!0;break}if(er){if(ae){ae>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",nt.z,nt.x,nt.y,nt.numFeatures,nt.numPoints,nt.numSimplified);const ar=`z${nt.z}`;this.stats[ar]=(this.stats[ar]||0)-1,this.total--}delete this.tiles[mt],Ge.add(mt)}}Ge.size&&(this.tileCoords=this.tileCoords.filter((mt=>!Ge.has(mt.id))))}updateData(ee){const ne=this.options,ae=ne.debug;if(!ne.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");const{affected:Te,source:Oe}=(function(nt,De,Bt){const ir=(function(Jt){return Jt?{removeAll:Jt.removeAll,remove:new Set(Jt.remove||[]),add:new Map(Jt.add?.map((er=>[er.id,er]))),update:new Map(Jt.update?.map((er=>[er.id,er])))}:{remove:new Set,add:new Map,update:new Map}})(De);let Yt=[];if(ir.removeAll&&(Yt=nt,nt=[]),ir.remove.size||ir.add.size){const Jt=[];for(const er of nt){const{id:ar}=er;(ir.remove.has(ar)||ir.add.has(ar))&&Jt.push(er)}if(Jt.length){Yt.push(...Jt);const er=new Set(Jt.map((ar=>ar.id)));nt=nt.filter((ar=>!er.has(ar.id)))}if(ir.add.size){let er=Ut({type:"FeatureCollection",features:Array.from(ir.add.values())},Bt);er=Wr(er,Bt),Yt.push(...er),nt.push(...er)}}if(ir.update.size)for(const[Jt,er]of ir.update){const ar=nt.findIndex((wn=>wn.id===Jt));if(ar===-1)continue;const fn=nt[ar],On=Wu(fn,er,Bt);On&&(Yt.push(fn,On),nt[ar]=On)}return{affected:Yt,source:nt}})(this.source,ee,ne);if(!Te.length)return;this.source=Oe,ae>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(Te),ae>1&&console.timeEnd("invalidating");const[Ze,qe,Ne]=[0,0,0],Ge=Ss(this.source,Ze,qe,Ne,this.options);Ge.source=this.source;const mt=Ts(Ze,qe,Ne);if(this.tiles[mt]=Ge,this.tileCoords.push({z:Ze,x:qe,y:Ne,id:mt}),ae){const nt=`z${Ze}`;this.stats[nt]=(this.stats[nt]||0)+1,this.total++}}}function Ts(Be,ee,ne){return 32*((1<<Be)*ne+ee)+Be}class Es{constructor(ee,ne,ae,Te=Qc){this._dataUpdateable=new Map,this.actor=ee,this.layerIndex=ne,this.availableImages=ae,this.tileState=new I,this._createGeoJSONIndex=Te}loadVectorTile(ee){if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const{z:ne,x:ae,y:Te}=ee.tileID.canonical,Oe=this._geoJSONIndex.getTile(ne,ae,Te);return Oe?H(new v.d3(Oe.features,{version:2,extent:v.a5})):null}loadTile(ee){return v._(this,void 0,void 0,(function*(){const{uid:ne}=ee,ae=new C(ee);ae.abort=new AbortController;try{const Te=this.loadVectorTile(ee);if(!Te)return null;const{vectorTile:Oe,rawData:Ze}=Te;ae.vectorTile=Oe,this.tileState.markLoaded(ne,ae);const qe={rawData:Ze};this.tileState.setParsing(ne,qe);try{return yield this._parseWorkerTile(ae,ee,qe)}finally{this.tileState.clearParsing(ne)}}catch(Te){throw ae.status="done",this.tileState.markLoaded(ne,ae),Te}}))}_reloadLoadedTile(ee){return v._(this,void 0,void 0,(function*(){const ne=ee.uid,ae=this.tileState.getLoaded(ne);if(!ae)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ae.showCollisionBoxes=ee.showCollisionBoxes,ae.status==="parsing"){const Te=this.tileState.consumeParsing(ne);return yield this._parseWorkerTile(ae,ee,Te)}if(ae.status==="done"&&ae.vectorTile)return yield this._parseWorkerTile(ae,ee)}))}_parseWorkerTile(ee,ne,ae){return v._(this,void 0,void 0,(function*(){let Te=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);if(ae){const{rawData:Oe}=ae;Te=v.e({rawTileData:Oe.slice(0)},Te)}return Te}))}abortTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}loadData(ee){return v._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort();const ae=this._startRequestTiming(ee);this._pendingRequest=new AbortController;try{(!this._pendingData||ee.request||ee.data||ee.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest));const Te=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Te,ee),this.tileState.clearLoaded();const Oe={};return ee.request&&(Oe.data=Te),this._finishRequestTiming(ae,ee,Oe),Oe}catch(Te){if(delete this._pendingRequest,v.Z(Te))return{abandoned:!0};throw Te}}))}_startRequestTiming(ee){var ne;if(!((ne=ee.request)===null||ne===void 0)&&ne.collectResourceTiming)return new v.c$(ee.request.url)}_finishRequestTiming(ee,ne,ae){const Te=ee?.finish();Te&&(ae.resourceTiming={[ne.source]:JSON.parse(JSON.stringify(Te))})}getData(){return v._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ee){return this.tileState.getLoaded(ee.uid)?this._reloadLoadedTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,ne){return v._(this,void 0,void 0,(function*(){let ae;if(ee.request?ae=yield this.loadGeoJSONFromUrl(ee.request,ee.promoteId,ne):ee.data?ae=this._loadGeoJSONFromObject(ee.data,ee.promoteId):ee.dataDiff&&(ae=this._loadGeoJSONFromDiff(ee.dataDiff,ee.promoteId,ee.source)),delete this._pendingRequest,typeof ae!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);return ge(ae,!0),ee.filter&&(ae=this._filterGeoJSON(ae,ee.filter)),ae}))}loadGeoJSONFromUrl(ee,ne,ae){return v._(this,void 0,void 0,(function*(){const Te=yield v.j(ee,ae);return this._dataUpdateable=v.a7(Te.data,ne),Te.data}))}_loadGeoJSONFromObject(ee,ne){return this._dataUpdateable=v.a7(ee,ne),ee}_loadGeoJSONFromDiff(ee,ne,ae){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae}`);v.a8(this._dataUpdateable,ee,ne);const Te=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Te)}_filterGeoJSON(ee,ne){const ae=v.d4(ne,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ae.result==="error")throw new Error(ae.value.map((Oe=>`${Oe.key}: ${Oe.message}`)).join(", "));const Te=ee.features.filter((Oe=>ae.value.evaluate({zoom:0},Oe)));return this._toFeatureCollection(Te)}_toFeatureCollection(ee){return{type:"FeatureCollection",features:ee}}removeSource(ee){return v._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort()}))}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}function Qc(Be,ee){return ee.cluster?new vt((function({superclusterOptions:ne,clusterProperties:ae}){if(!ae||!ne)return ne;const Te={},Oe={},Ze={accumulated:null,zoom:0},qe={properties:null},Ne=Object.keys(ae);for(const Ge of Ne){const[mt,nt]=ae[Ge],De=v.d4(nt),Bt=v.d4(typeof mt=="string"?[mt,["accumulated"],["get",Ge]]:mt);Te[Ge]=De.value,Oe[Ge]=Bt.value}return ne.map=Ge=>{qe.properties=Ge;const mt={};for(const nt of Ne)mt[nt]=Te[nt].evaluate(Ze,qe);return mt},ne.reduce=(Ge,mt)=>{qe.properties=mt;for(const nt of Ne)Ze.accumulated=Ge[nt],Ge[nt]=Oe[nt].evaluate(Ze,qe)},ne})(ee)).load(Be.features):(function(ne,ae){return new Yu(ne,ae)})(Be,ee.geojsonVtOptions)}class al{constructor(ee){this.self=ee,this.actor=new v.L(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ne,ae)=>{if(this.externalWorkerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.externalWorkerSourceTypes[ne]=ae},this.self.addProtocol=v.cK,this.self.removeProtocol=v.cL,this.self.registerRTLTextPlugin=ne=>{v.d5.setMethods(ne)},this.actor.registerMessageHandler("LDT",((ne,ae)=>this._getDEMWorkerSource(ne,ae.source).loadTile(ae))),this.actor.registerMessageHandler("RDT",((ne,ae)=>v._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ne,ae.source).removeTile(ae)})))),this.actor.registerMessageHandler("GCEZ",((ne,ae)=>v._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,ae.type,ae.source).getClusterExpansionZoom(ae)})))),this.actor.registerMessageHandler("GCC",((ne,ae)=>v._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,ae.type,ae.source).getClusterChildren(ae)})))),this.actor.registerMessageHandler("GCL",((ne,ae)=>v._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,ae.type,ae.source).getClusterLeaves(ae)})))),this.actor.registerMessageHandler("LD",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).loadData(ae))),this.actor.registerMessageHandler("GD",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).getData())),this.actor.registerMessageHandler("LT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).loadTile(ae))),this.actor.registerMessageHandler("RT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).reloadTile(ae))),this.actor.registerMessageHandler("AT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).abortTile(ae))),this.actor.registerMessageHandler("RMT",((ne,ae)=>this._getWorkerSource(ne,ae.type,ae.source).removeTile(ae))),this.actor.registerMessageHandler("RS",((ne,ae)=>v._(this,void 0,void 0,(function*(){if(!this.workerSources[ne]||!this.workerSources[ne][ae.type]||!this.workerSources[ne][ae.type][ae.source])return;const Te=this.workerSources[ne][ae.type][ae.source];delete this.workerSources[ne][ae.type][ae.source],Te.removeSource!==void 0&&Te.removeSource(ae)})))),this.actor.registerMessageHandler("RM",(ne=>v._(this,void 0,void 0,(function*(){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne],this.globalStates.delete(ne)})))),this.actor.registerMessageHandler("SR",((ne,ae)=>v._(this,void 0,void 0,(function*(){this.referrer=ae})))),this.actor.registerMessageHandler("SRPS",((ne,ae)=>this._syncRTLPluginState(ne,ae))),this.actor.registerMessageHandler("IS",((ne,ae)=>v._(this,void 0,void 0,(function*(){this.self.importScripts(ae)})))),this.actor.registerMessageHandler("SI",((ne,ae)=>this._setImages(ne,ae))),this.actor.registerMessageHandler("UL",((ne,ae)=>v._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).update(ae.layers,ae.removedIds,this._getGlobalState(ne))})))),this.actor.registerMessageHandler("UGS",((ne,ae)=>v._(this,void 0,void 0,(function*(){const Te=this._getGlobalState(ne);for(const Oe in ae)Te[Oe]=ae[Oe]})))),this.actor.registerMessageHandler("SL",((ne,ae)=>v._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).replace(ae,this._getGlobalState(ne))}))))}_getGlobalState(ee){let ne=this.globalStates.get(ee);return ne||(ne={},this.globalStates.set(ee,ne)),ne}_setImages(ee,ne){return v._(this,void 0,void 0,(function*(){this.availableImages[ee]=ne;for(const ae in this.workerSources[ee]){const Te=this.workerSources[ee][ae];for(const Oe in Te)Te[Oe].availableImages=ne}}))}_syncRTLPluginState(ee,ne){return v._(this,void 0,void 0,(function*(){return yield v.d5.syncState(ne,this.self.importScripts)}))}_getAvailableImages(ee){let ne=this.availableImages[ee];return ne||(ne=[]),ne}_getLayerIndex(ee){let ne=this.layerIndexes[ee];return ne||(ne=this.layerIndexes[ee]=new u),ne}_getWorkerSource(ee,ne,ae){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ne]||(this.workerSources[ee][ne]={}),!this.workerSources[ee][ne][ae]){const Te={sendAsync:(Oe,Ze)=>(Oe.targetMapId=ee,this.actor.sendAsync(Oe,Ze))};switch(ne){case"vector":this.workerSources[ee][ne][ae]=new se(Te,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][ne][ae]=new Es(Te,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][ne][ae]=new this.externalWorkerSourceTypes[ne](Te,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][ne][ae]}_getDEMWorkerSource(ee,ne){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ne]||(this.demWorkerSources[ee][ne]=new he),this.demWorkerSources[ee][ne]}}return v.i(self)&&(self.worker=new al(self)),al})),d("index",["exports","./shared"],(function(v,u){var M="5.18.0";function C(){var w=new u.A(4);return u.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let D,I,N;const G={frame(w,n,c,p){const _=p||window,T=_.requestAnimationFrame((O=>{A(),n(O)})),{unsubscribe:A}=u.s(w.signal,"abort",(()=>{A(),_.cancelAnimationFrame(T),c(new u.a(w.signal.reason))}),!1)},frameAsync(w,n){return new Promise(((c,p)=>{this.frame(w,c,p,n)}))},getImageData(w,n=0){return this.getImageCanvasContext(w).getImageData(-n,-n,w.width+2*n,w.height+2*n)},getImageCanvasContext(w){const n=window.document.createElement("canvas"),c=n.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return n.width=w.width,n.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(D||(D=document.createElement("a")),D.href=w,D.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return N!==void 0?N:!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)},set prefersReducedMotion(w){N=w}},Y=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function H(){return Y.getCurrentTime()}class ${static testProp(n){if(!$.docStyle)return n[0];for(let c=0;c<n.length;c++)if(n[c]in $.docStyle)return n[c];return n[0]}static create(n,c,p){const _=window.document.createElement(n);return c!==void 0&&(_.className=c),p&&p.appendChild(_),_}static createNS(n,c){return window.document.createElementNS(n,c)}static disableDrag(){$.docStyle&&$.selectProp&&($.userSelect=$.docStyle[$.selectProp],$.docStyle[$.selectProp]="none")}static enableDrag(){$.docStyle&&$.selectProp&&($.docStyle[$.selectProp]=$.userSelect)}static setTransform(n,c){n.style[$.transformProp]=c}static addEventListener(n,c,p,_={}){n.addEventListener(c,p,"passive"in _?_:_.capture)}static removeEventListener(n,c,p,_={}){n.removeEventListener(c,p,"passive"in _?_:_.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",$.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",$.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",$.suppressClickInternal,!0)}),0)}static getScale(n){const c=n.getBoundingClientRect();return{x:c.width/n.offsetWidth||1,y:c.height/n.offsetHeight||1,boundingClientRect:c}}static getPoint(n,c,p){const _=c.boundingClientRect;return new u.P((p.clientX-_.left)/c.x-n.clientLeft,(p.clientY-_.top)/c.y-n.clientTop)}static mousePos(n,c){const p=$.getScale(n);return $.getPoint(n,p,c)}static touchPos(n,c){const p=[],_=$.getScale(n);for(let T=0;T<c.length;T++)p.push($.getPoint(n,_,c[T]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const c=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),p=c.querySelectorAll("script");for(const _ of p)_.remove();return $.clean(c),c.innerHTML}static isPossiblyDangerous(n,c){const p=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!p.includes("javascript:")&&!p.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const c=n.children;for(const p of c)$.removeAttributes(p),$.clean(p)}static removeAttributes(n){for(const{name:c,value:p}of n.attributes)$.isPossiblyDangerous(c,p)&&n.removeAttribute(c)}}$.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,$.selectProp=$.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),$.transformProp=$.testProp(["transform","WebkitTransform"]);const se={supported:!1,testSupport:function(w){!me&&fe&&(Ae?ge(w):he=w)}};let he,fe,me=!1,Ae=!1;function ge(w){const n=w.createTexture();w.bindTexture(w.TEXTURE_2D,n);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,fe),w.isContextLost())return;se.supported=!0}catch{}w.deleteTexture(n),me=!0}var Se;typeof document<"u"&&(fe=document.createElement("img"),fe.onload=()=>{he&&ge(he),he=null,Ae=!0},fe.onerror=()=>{me=!0,he=null},fe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let n,c,p,_;w.resetRequestQueue=()=>{n=[],c=0,p=0,_={}},w.addThrottleControl=R=>{const U=p++;return _[U]=R,U},w.removeThrottleControl=R=>{delete _[R],A()},w.getImage=(R,U,V=!0)=>new Promise(((K,X)=>{se.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),u.e(R,{type:"image"}),n.push({abortController:U,requestParameters:R,supportImageRefresh:V,state:"queued",onError:re=>{X(re)},onSuccess:re=>{K(re)}}),A()}));const T=R=>u._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:U,supportImageRefresh:V,onError:K,onSuccess:X,abortController:re}=R,oe=V===!1&&!u.i(self)&&!u.g(U.url)&&(!U.headers||Object.keys(U.headers).reduce(((ye,we)=>ye&&we==="accept"),!0));c++;const de=oe?O(U,re):u.m(U,re);try{const ye=yield de;delete R.abortController,R.state="completed",ye.data instanceof HTMLImageElement||u.b(ye.data)?X(ye):ye.data&&X({data:yield(ve=ye.data,typeof createImageBitmap=="function"?u.f(ve):u.h(ve)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete R.abortController,K(ye)}finally{c--,A()}var ve})),A=()=>{const R=(()=>{for(const U of Object.keys(_))if(_[U]())return!0;return!1})()?u.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let U=c;U<R&&n.length>0;U++){const V=n.shift();V.abortController.signal.aborted?U--:T(V)}},O=(R,U)=>new Promise(((V,K)=>{const X=new Image,re=R.url,oe=R.credentials;oe&&oe==="include"?X.crossOrigin="use-credentials":(oe&&oe==="same-origin"||!u.d(re))&&(X.crossOrigin="anonymous"),U.signal.addEventListener("abort",(()=>{X.src="",K(new u.a(U.signal.reason))})),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,V({data:X})},X.onerror=()=>{X.onerror=X.onload=null,U.signal.aborted||K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=re}))})(Se||(Se={})),Se.resetRequestQueue();class Ue{constructor(n){this._transformRequestFn=n??null}transformRequest(n,c){return this._transformRequestFn&&this._transformRequestFn(n,c)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function et(w){const n=[];if(typeof w=="string")n.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:p,url:_}of w){const T=`${p}${_}`;c.indexOf(T)===-1&&(c.push(T),n.push({id:p,url:_}))}}return n}function vt(w,n,c){try{const p=new URL(w);return p.pathname+=`${n}${c}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function pt(w){const{userImage:n}=w;return!!(n&&n.render&&n.render())&&(w.data.replace(new Uint8Array(n.data.buffer)),!0)}class Fe extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const n of Object.keys(this.images))this.removeImage(n);this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:c,promiseResolve:p}of this.requestors)p(this._getImagesForIds(c));this.requestors=[]}}getImage(n){const c=this.images[n];if(c&&!c.data&&c.spriteData){const p=c.spriteData;c.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),c.spriteData=null}return c}addImage(n,c){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,c)&&(this.images[n]=c)}_validate(n,c){let p=!0;const _=c.data||c.spriteData;return this._validateStretch(c.stretchX,_&&_.width)||(this.fire(new u.k(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(c.stretchY,_&&_.height)||(this.fire(new u.k(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(c.content,c)||(this.fire(new u.k(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,c){if(!n)return!0;let p=0;for(const _ of n){if(_[0]<p||_[1]<_[0]||c<_[1])return!1;p=_[1]}return!0}_validateContent(n,c){if(!n)return!0;if(n.length!==4)return!1;const p=c.spriteData,_=p&&p.width||c.data.width,T=p&&p.height||c.data.height;return!(n[0]<0||_<n[0]||n[1]<0||T<n[1]||n[2]<0||_<n[2]||n[3]<0||T<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,c,p=!0){const _=this.getImage(n);if(p&&(_.data.width!==c.data.width||_.data.height!==c.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=_.version+1,this.images[n]=c,this.updatedImages[n]=!0}removeImage(n){const c=this.images[n];delete this.images[n],delete this.patterns[n],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise(((c,p)=>{let _=!0;if(!this.isLoaded())for(const T of n)this.images[T]||(_=!1);this.isLoaded()||_?c(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:c})}))}_getImagesForIds(n){const c={};for(const p of n){let _=this.getImage(p);_||(this.fire(new u.l("styleimagemissing",{id:p})),_=this.getImage(p)),_?c[p]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:n,height:c}=this.atlasImage;return{width:n,height:c}}getPattern(n){const c=this.patterns[n],p=this.getImage(n);if(!p)return null;if(c&&c.position.version===p.version)return c.position;if(c)c.position.version=p.version;else{const _={w:p.data.width+2,h:p.data.height+2,x:0,y:0},T=new u.I(_,p);this.patterns[n]={bin:_,position:T}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const c=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new u.T(n,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const T in this.patterns)n.push(this.patterns[T].bin);const{w:c,h:p}=u.p(n),_=this.atlasImage;_.resize({width:c||1,height:p||1});for(const T in this.patterns){const{bin:A}=this.patterns[T],O=A.x+1,R=A.y+1,U=this.getImage(T).data,V=U.width,K=U.height;u.R.copy(U,_,{x:0,y:0},{x:O,y:R},{width:V,height:K}),u.R.copy(U,_,{x:0,y:K-1},{x:O,y:R-1},{width:V,height:1}),u.R.copy(U,_,{x:0,y:0},{x:O,y:R+K},{width:V,height:1}),u.R.copy(U,_,{x:V-1,y:0},{x:O-1,y:R},{width:1,height:K}),u.R.copy(U,_,{x:0,y:0},{x:O+V,y:R},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const c of n){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const p=this.getImage(c);p||u.w(`Image with ID: "${c}" was not found`),pt(p)&&this.updateImage(c,p)}}cloneImages(){const n={};for(const c in this.images){const p=this.images[c];n[c]=Object.assign(Object.assign({},p),{data:p.data?p.data.clone():null})}return n}}const Ct=1e20;function It(w,n,c,p,_,T,A,O,R){for(let U=n;U<n+p;U++)jt(w,c*T+U,T,_,A,O,R);for(let U=c;U<c+_;U++)jt(w,U*T+n,1,p,A,O,R)}function jt(w,n,c,p,_,T,A){T[0]=0,A[0]=-Ct,A[1]=Ct,_[0]=w[n];for(let O=1,R=0,U=0;O<p;O++){_[O]=w[n+O*c];const V=O*O;do{const K=T[R];U=(_[O]-_[K]+V-K*K)/(O-K)/2}while(U<=A[R]&&--R>-1);R++,T[R]=O,A[R]=U,A[R+1]=Ct}for(let O=0,R=0;O<p;O++){for(;A[R+1]<O;)R++;const U=T[R],V=O-U;w[n+O*c]=_[U]+V*V}}const $e=u.v.layout_symbol["text-font"].default.join(",");class ct{constructor(n,c,p){this.requestManager=n,this.localIdeographFontFamily=c,this.entries={},this.lang=p}setURL(n){this.url=n}getGlyphs(n){return u._(this,void 0,void 0,(function*(){const c=[];for(const T in n)for(const A of n[T])c.push(this._getAndCacheGlyphsPromise(T,A));const p=yield Promise.all(c),_={};for(const{stack:T,id:A,glyph:O}of p)_[T]||(_[T]={}),_[T][A]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return _}))}_getAndCacheGlyphsPromise(n,c){return u._(this,void 0,void 0,(function*(){let p=this.entries[n];p||(p=this.entries[n]={glyphs:{},requests:{},ranges:{}});let _=p.glyphs[c];return _!==void 0?{stack:n,id:c,glyph:_}:!this.url||this._charUsesLocalIdeographFontFamily(c)?(_=p.glyphs[c]=this._drawGlyph(p,n,c),{stack:n,id:c,glyph:_}):yield this._downloadAndCacheRangePromise(n,c)}))}_downloadAndCacheRangePromise(n,c){return u._(this,void 0,void 0,(function*(){const p=this.entries[n],_=Math.floor(c/256);if(p.ranges[_])return{stack:n,id:c,glyph:null};if(!p.requests[_]){const T=ct.loadGlyphRange(n,_,this.url,this.requestManager);p.requests[_]=T}try{const T=yield p.requests[_];for(const A in T)p.glyphs[+A]=T[+A];return p.ranges[_]=!0,{stack:n,id:c,glyph:T[c]||null}}catch(T){const A=p.glyphs[c]=this._drawGlyph(p,n,c);return this._warnOnMissingGlyphRange(A,_,c,T),{stack:n,id:c,glyph:A}}}))}_warnOnMissingGlyphRange(n,c,p,_){const T=256*c,A=T+255,O=p.toString(16).padStart(4,"0").toUpperCase();u.w(`Unable to load glyph range ${c}, ${T}-${A}. Rendering codepoint U+${O} locally instead. ${_}`)}_charUsesLocalIdeographFontFamily(n){return!!this.localIdeographFontFamily&&u.q(n)}_drawGlyph(n,c,p){const _=c===$e&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(p),T=_?"ideographTinySDF":"tinySDF";n[T]||(n[T]=this._createTinySDF(_?this.localIdeographFontFamily:c));const A=n[T].draw(String.fromCodePoint(p)),O=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(p));return{id:p,bitmap:new u.r({width:A.width||60,height:A.height||60},A.data),metrics:{width:O?0:A.glyphWidth/2||24,height:A.glyphHeight/2||24,left:A.glyphLeft/2+.5||0,top:A.glyphTop/2-27.5||-8,advance:O?0:A.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(n){const c=n?n.split(","):[];c.push("sans-serif");const p=c.map((_=>/[-\w]+/.test(_)?_:`'${CSS.escape(_)}'`)).join(",");return new ct.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:this._fontWeight(c[0]),fontStyle:this._fontStyle(c[0]),lang:this.lang})}_fontStyle(n){return/italic/i.test(n)?"italic":/oblique/i.test(n)?"oblique":"normal"}_fontWeight(n){const c={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let p;for(const[_,T]of Object.entries(c))new RegExp(`\\b${_}\\b`,"i").test(n)&&(p=`${T}`);return p}destroy(){for(const n in this.entries){const c=this.entries[n];c.tinySDF&&(c.tinySDF=null),c.ideographTinySDF&&(c.ideographTinySDF=null),c.glyphs={},c.requests={},c.ranges={}}this.entries={}}}ct.loadGlyphRange=function(w,n,c,p){return u._(this,void 0,void 0,(function*(){const _=256*n,T=_+255,A=p.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${_}-${T}`),"Glyphs"),O=yield u.n(A,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${n}, ${_}-${T}`);const R={};for(const U of u.o(O.data))R[U.id]=U;return R}))},ct.TinySDF=class{constructor({fontSize:w=24,buffer:n=3,radius:c=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:T="normal",fontStyle:A="normal",lang:O=null}={}){this.buffer=n,this.cutoff=p,this.radius=c,this.lang=O;const R=this.size=w+4*n,U=this._createCanvas(R),V=this.ctx=U.getContext("2d",{willReadFrequently:!0});V.font=`${A} ${T} ${w}px ${_}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(w){const n=document.createElement("canvas");return n.width=n.height=w,n}draw(w){const{width:n,actualBoundingBoxAscent:c,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:T}=this.ctx.measureText(w),A=Math.ceil(c),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-_))),R=Math.min(this.size-this.buffer,A+Math.ceil(p)),U=O+2*this.buffer,V=R+2*this.buffer,K=Math.max(U*V,0),X=new Uint8ClampedArray(K),re={data:X,width:U,height:V,glyphWidth:O,glyphHeight:R,glyphTop:A,glyphLeft:0,glyphAdvance:n};if(O===0||R===0)return re;const{ctx:oe,buffer:de,gridInner:ve,gridOuter:ye}=this;this.lang&&(oe.lang=this.lang),oe.clearRect(de,de,O,R),oe.fillText(w,de,de+A);const we=oe.getImageData(de,de,O,R);ye.fill(Ct,0,K),ve.fill(0,0,K);for(let Ce=0;Ce<R;Ce++)for(let be=0;be<O;be++){const Pe=we.data[4*(Ce*O+be)+3]/255;if(Pe===0)continue;const Ie=(Ce+de)*U+be+de;if(Pe===1)ye[Ie]=0,ve[Ie]=Ct;else{const Ee=.5-Pe;ye[Ie]=Ee>0?Ee*Ee:0,ve[Ie]=Ee<0?Ee*Ee:0}}It(ye,0,0,U,V,U,this.f,this.v,this.z),It(ve,de,de,O,R,U,this.f,this.v,this.z);for(let Ce=0;Ce<K;Ce++){const be=Math.sqrt(ye[Ce])-Math.sqrt(ve[Ce]);X[Ce]=Math.round(255-255*(be/this.radius+this.cutoff))}return re}};class Et{constructor(){this.specification=u.u.light.position}possiblyEvaluate(n,c){return u.F(n.expression.evaluate(c))}interpolate(n,c,p){return{x:u.G.number(n.x,c.x,p),y:u.G.number(n.y,c.y,p),z:u.G.number(n.z,c.z,p)}}}let _t;class Ut extends u.E{constructor(n){super(),_t=_t||new u.t({anchor:new u.D(u.u.light.anchor),position:new Et,color:new u.D(u.u.light.color),intensity:new u.D(u.u.light.intensity)}),this._transitionable=new u.x(_t,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,c={}){if(!this._validate(u.y,n,c))for(const p in n){const _=n[p];p.endsWith(u.z)?this._transitionable.setTransition(p.slice(0,-u.z.length),_):this._transitionable.setValue(p,_)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,c,p){return(!p||p.validate!==!1)&&u.B(this,n.call(u.C,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.u}))}}const ze=new u.t({"sky-color":new u.D(u.u.sky["sky-color"]),"horizon-color":new u.D(u.u.sky["horizon-color"]),"fog-color":new u.D(u.u.sky["fog-color"]),"fog-ground-blend":new u.D(u.u.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.u.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.u.sky["atmosphere-blend"])});class at extends u.E{constructor(n){super(),this._transitionable=new u.x(ze,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.H(0))}setSky(n,c={}){if(!this._validate(u.J,n,c)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in n){const _=n[p];p.endsWith(u.z)?this._transitionable.setTransition(p.slice(0,-u.z.length),_):this._transitionable.setValue(p,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,c,p={}){return p?.validate!==!1&&u.B(this,n.call(u.C,u.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.u})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Pt{constructor(n,c){this.width=n,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,c){const p=n.join(",")+String(c);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,c)),this.dashEntry[p]}getDashRanges(n,c,p){const _=[];let T=n.length%2==1?-n[n.length-1]*p:0,A=n[0]*p,O=!0;_.push({left:T,right:A,isDash:O,zeroLength:n[0]===0});let R=n[0];for(let U=1;U<n.length;U++){O=!O;const V=n[U];T=R*p,R+=V,A=R*p,_.push({left:T,right:A,isDash:O,zeroLength:V===0})}return _}addRoundDash(n,c,p){const _=c/2;for(let T=-p;T<=p;T++){const A=this.width*(this.nextRow+p+T);let O=0,R=n[O];for(let U=0;U<this.width;U++){U/R.right>1&&(R=n[++O]);const V=Math.abs(U-R.left),K=Math.abs(U-R.right),X=Math.min(V,K);let re;const oe=T/p*(_+1);if(R.isDash){const de=_-Math.abs(oe);re=Math.sqrt(X*X+de*de)}else re=_-Math.sqrt(X*X+oe*oe);this.data[A+U]=Math.max(0,Math.min(255,re+128))}}}addRegularDash(n){for(let O=n.length-1;O>=0;--O){const R=n[O],U=n[O+1];R.zeroLength?n.splice(O,1):U&&U.isDash===R.isDash&&(U.left=R.left,n.splice(O,1))}const c=n[0],p=n[n.length-1];c.isDash===p.isDash&&(c.left=p.left-this.width,p.right=c.right+this.width);const _=this.width*this.nextRow;let T=0,A=n[T];for(let O=0;O<this.width;O++){O/A.right>1&&(A=n[++T]);const R=Math.abs(O-A.left),U=Math.abs(O-A.right),V=Math.min(R,U);this.data[_+O]=Math.max(0,Math.min(255,(A.isDash?V:-V)+128))}}addDash(n,c){const p=c?7:0,_=2*p+1;if(this.nextRow+_>this.height)return u.w("LineAtlas out of space"),null;let T=0;for(let O=0;O<n.length;O++)T+=n[O];if(T!==0){const O=this.width/T,R=this.getDashRanges(n,this.width,O);c?this.addRoundDash(R,O,p):this.addRegularDash(R)}const A={y:this.nextRow+p,height:2*p,width:T};return this.nextRow+=_,this.dirty=!0,A}bind(n){const c=n.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class $t{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<$t.workerCount;)this.workers.push(new Worker(u.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const Kt=Math.floor(G.hardwareConcurrency/2);let Gt,Ar;function ht(){return Gt||(Gt=new $t),Gt}$t.workerCount=u.K(globalThis)?Math.max(Math.min(Kt,3),1):1;class sr{constructor(n,c){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=c;const p=this.workerPool.acquire(c);for(let _=0;_<p.length;_++){const T=new u.L(p[_],c);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,c){const p=[];for(const _ of this.actors)p.push(_.sendAsync({type:n,data:c}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,c){for(const p of this.actors)p.registerMessageHandler(n,c)}unregisterMessageHandler(n){for(const c of this.actors)c.unregisterMessageHandler(n)}}function mr(){return Ar||(Ar=new sr(ht(),u.M),Ar.registerMessageHandler("GR",((w,n,c)=>u.m(n,c)))),Ar}function St(w,n){const c=u.N();return u.O(c,c,[1,1,0]),u.Q(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?u.S(c,c,w.calculatePosMatrix(n.toUnwrapped())):c}function Dn(w,n,c,p,_,T,A){var O;const R=(function(X,re,oe){if(X)for(const de of X){const ve=re[de];if(ve&&ve.source===oe&&ve.type==="fill-extrusion")return!0}else for(const de in re){const ve=re[de];if(ve.source===oe&&ve.type==="fill-extrusion")return!0}return!1})((O=_?.layers)!==null&&O!==void 0?O:null,n,w.id),U=T.maxPitchScaleFactor(),V=w.tilesIn(p,U,R);V.sort(cr);const K=[];for(const X of V)K.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(n,c,w.getState(),X.queryGeometry,X.cameraQueryGeometry,X.scale,_,T,U,St(T,X.tileID),A?(re,oe)=>A(X.tileID,re,oe):void 0)});return(function(X,re){for(const oe in X)for(const de of X[oe])Wr(de,re);return X})((function(X){const re={},oe={};for(const de of X){const ve=de.queryResults,ye=de.wrappedTileID,we=oe[ye]=oe[ye]||{};for(const Ce in ve){const be=ve[Ce],Pe=we[Ce]=we[Ce]||{},Ie=re[Ce]=re[Ce]||[];for(const Ee of be)Pe[Ee.featureIndex]||(Pe[Ee.featureIndex]=!0,Ie.push(Ee))}}return re})(K),w)}function cr(w,n){const c=w.tileID,p=n.tileID;return c.overscaledZ-p.overscaledZ||c.canonical.y-p.canonical.y||c.wrap-p.wrap||c.canonical.x-p.canonical.x}function Wr(w,n){const c=w.feature,p=n.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=p}function ln(w,n,c,p){return u._(this,void 0,void 0,(function*(){let _=w;if(w.url?_=(yield u.j(n.transformRequest(w.url,"Source"),c)).data:yield G.frameAsync(c,p),!_)return null;const T=u.U(u.e(_,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in _&&_.vector_layers&&(T.vectorLayerIds=_.vector_layers.map((A=>A.id))),T}))}class Lr{constructor(n,c){n&&(c?this.setSouthWest(n).setNorthEast(c):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof u.V?new u.V(n.lng,n.lat):u.V.convert(n),this}setSouthWest(n){return this._sw=n instanceof u.V?new u.V(n.lng,n.lat):u.V.convert(n),this}extend(n){const c=this._sw,p=this._ne;let _,T;if(n instanceof u.V)_=n,T=n;else{if(!(n instanceof Lr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Lr.convert(n)):this.extend(u.V.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(u.V.convert(n)):this;if(_=n._sw,T=n._ne,!_||!T)return this}return c||p?(c.lng=Math.min(_.lng,c.lng),c.lat=Math.min(_.lat,c.lat),p.lng=Math.max(T.lng,p.lng),p.lat=Math.max(T.lat,p.lat)):(this._sw=new u.V(_.lng,_.lat),this._ne=new u.V(T.lng,T.lat)),this}getCenter(){return new u.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.V(this.getWest(),this.getNorth())}getSouthEast(){return new u.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:c,lat:p}=u.V.convert(n);let _=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}intersects(n){if(!((n=Lr.convert(n)).getNorth()>=this.getSouth()&&n.getSouth()<=this.getNorth()))return!1;const c=Math.abs(this.getEast()-this.getWest()),p=Math.abs(n.getEast()-n.getWest());if(c>=360||p>=360)return!0;const _=u.W(this.getWest(),-180,180),T=u.W(this.getEast(),-180,180),A=u.W(n.getWest(),-180,180),O=u.W(n.getEast(),-180,180),R=_>T,U=A>O;return!(!R||!U)||(R?O>=_||A<=T:U?T>=A||_<=O:A<=T&&O>=_)}static convert(n){return n instanceof Lr?n:n&&new Lr(n)}static fromLngLat(n,c=0){const p=360*c/40075017,_=p/Math.cos(Math.PI/180*n.lat);return new Lr(new u.V(n.lng-_,n.lat-p),new u.V(n.lng+_,n.lat+p))}adjustAntiMeridian(){const n=new u.V(this._sw.lng,this._sw.lat),c=new u.V(this._ne.lng,this._ne.lat);return new Lr(n,n.lng>c.lng?new u.V(c.lng+360,c.lat):c)}}class Ea{constructor(n,c,p){this.bounds=Lr.convert(this.validateBounds(n)),this.minzoom=c||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const c=Math.pow(2,n.z),p=Math.floor(u.Y(this.bounds.getWest())*c),_=Math.floor(u.X(this.bounds.getNorth())*c),T=Math.ceil(u.Y(this.bounds.getEast())*c),A=Math.ceil(u.X(this.bounds.getSouth())*c);return n.x>=p&&n.x<T&&n.y>=_&&n.y<A}}class il extends u.E{constructor(n,c,p,_){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.U(c,["url","scheme","tileSize","promoteId","encoding"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield ln(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),n&&(u.e(this,n),n.bounds&&(this.tileBounds=new Ea(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,u.Z(n)||this.fire(new u.k(n))}}))}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(n){return u._(this,void 0,void 0,(function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(c,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(n)};p.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise(((T,A)=>{n.reloadPromise={resolve:T,reject:A}}))}else n.actor=this.dispatcher.getActor(),_="LT";n.abortController=new AbortController;try{const T=yield n.actor.sendAsync({type:_,data:p},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,T)}catch(T){if(delete n.abortController,n.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(n,null)}}))}_getOverzoomParameters(n){if(n.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const c=n.tileID.scaledTo(this.maxzoom).canonical,p=c.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:c,overzoomRequest:this.map._requestManager.transformRequest(p,"Tile")}}_afterTileLoadWorkerResponse(n,c){if(c&&c.resourceTiming&&(n.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&n.setExpiryData(c),n.loadVectorData(c,this.map.painter),n.reloadPromise){const p=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(p.resolve).catch(p.reject)}}abortTile(n){return u._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}unloadTile(n){return u._(this,void 0,void 0,(function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Ss extends u.E{constructor(n,c,p,_){super(),this.id=n,this.dispatcher=p,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.U(c,["url","scheme","tileSize"]))}load(){return u._(this,arguments,void 0,(function*(n=!1){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield ln(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,c&&(u.e(this,c),c.bounds&&(this.tileBounds=new Ea(c.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,u.Z(c)||this.fire(new u.k(c))}}))}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}serialize(){return u.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return u._(this,void 0,void 0,(function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const p=yield Se.getImage(this.map._requestManager.transformRequest(c,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const _=this.map.painter.context,T=_.gl,A=p.data;n.texture=this.map.painter.getTileTexture(A.width),n.texture?n.texture.update(A,{useMipmap:!0}):(n.texture=new u.T(_,A,T.RGBA,{useMipmap:!0}),n.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}}))}abortTile(n){return u._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)}))}unloadTile(n){return u._(this,void 0,void 0,(function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)}))}hasTransition(){return!1}}class Go extends Ss{constructor(n,c,p,_){super(n,c,p,_),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(n){return u._(this,void 0,void 0,(function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(c,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const _=yield Se.getImage(p,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(_&&_.data){const T=_.data;this.map._refreshExpiredTiles&&(_.cacheControl||_.expires)&&n.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const A=u.b(T)&&u.$()?T:yield this.readImageNow(T),O={type:this.type,uid:n.uid,source:this.id,rawImageData:A,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const R=yield n.actor.sendAsync({type:"LDT",data:O});n.dem=R,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(_){if(delete n.abortController,n.aborted)n.state="unloaded";else if(_)throw n.state="errored",_}}))}readImageNow(n){return u._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&u.a0()){const c=n.width+2,p=n.height+2;try{return new u.R({width:c,height:p},yield u.a1(n,-1,-1,c,p))}catch{}}return G.getImageData(n,1)}))}_getNeighboringTiles(n){const c=n.canonical,p=Math.pow(2,c.z),_=(c.x-1+p)%p,T=c.x===0?n.wrap-1:n.wrap,A=(c.x+1+p)%p,O=c.x+1===p?n.wrap+1:n.wrap,R={};return R[new u.a2(n.overscaledZ,T,c.z,_,c.y).key]={backfilled:!1},R[new u.a2(n.overscaledZ,O,c.z,A,c.y).key]={backfilled:!1},c.y>0&&(R[new u.a2(n.overscaledZ,T,c.z,_,c.y-1).key]={backfilled:!1},R[new u.a2(n.overscaledZ,n.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},R[new u.a2(n.overscaledZ,O,c.z,A,c.y-1).key]={backfilled:!1}),c.y+1<p&&(R[new u.a2(n.overscaledZ,T,c.z,_,c.y+1).key]={backfilled:!1},R[new u.a2(n.overscaledZ,n.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},R[new u.a2(n.overscaledZ,O,c.z,A,c.y+1).key]={backfilled:!1}),R}unloadTile(n){return u._(this,void 0,void 0,(function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))}))}}function So(w){return w.type==="GeometryCollection"?w.geometries.map((n=>n.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function Wu(w){const n=new Lr;let c;switch(w.type){case"FeatureCollection":c=w.features.map((p=>So(p.geometry))).flat(1/0);break;case"Feature":c=So(w.geometry);break;default:c=So(w)}if(c.length==0)return n;for(let p=0;p<c.length-1;p+=2)n.extend([c[p],c[p+1]]);return n}class oi extends u.E{constructor(n,c,p,_){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=p.getActor(),this.setEventedParent(_),this._data=typeof c.data=="string"?{url:c.data}:{geojson:c.data},this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:u.a5,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.a5,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(n){return n*(u.a5/this.tileSize)}_getClusterMaxZoom(n){const c=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||u.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${c}"`),c}load(){return u._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(n){this.map=n,this.load()}setData(n,c){this._data=typeof n=="string"?{url:n}:{geojson:n},this._pendingWorkerUpdate={data:n};const p=this._updateWorkerData();return c?p:this}updateData(n,c){this._pendingWorkerUpdate.diff=u.a6(this._pendingWorkerUpdate.diff,n);const p=this._updateWorkerData();return c?p:this}getData(){return u._(this,void 0,void 0,(function*(){const n=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})}))}getBounds(){return u._(this,void 0,void 0,(function*(){return Wu(yield this.getData())}))}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,c,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:c,offset:p}})}_updateWorkerData(){return u._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void u.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:n,diff:c}=this._pendingWorkerUpdate,p=this._getLoadGeoJSONParameters(n,c);n!==void 0?this._pendingWorkerUpdate.data=void 0:c&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(p)}))}_getLoadGeoJSONParameters(n,c){const p=u.e({type:this.type},this.workerOptions);return typeof n=="string"?(p.request=this.map._requestManager.transformRequest(G.resolveURL(n),"Source"),p.request.collectResourceTiming=this._collectResourceTiming,p):n!==void 0?(p.data=n,p):(c&&(p.dataDiff=c),p)}_dispatchWorkerUpdate(n){return u._(this,void 0,void 0,(function*(){this._isUpdatingWorker=!0,this.fire(new u.l("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"LD",data:n});if(this._isUpdatingWorker=!1,this._removed||c.abandoned)return void this.fire(new u.l("dataabort",{dataType:"source"}));c.data&&(this._data={geojson:c.data});const p=this._applyDiffToSource(n.dataDiff),_=this._getShouldReloadTileOptions(p),T={dataType:"source"};this._applyResourceTiming(T,c),this.fire(new u.l("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new u.l("data",Object.assign(Object.assign({},T),{sourceDataType:"content",shouldReloadTileOptions:_})))}catch(c){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new u.l("dataabort",{dataType:"source"}));this.fire(new u.k(c))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyResourceTiming(n,c){var p;if(!this._collectResourceTiming)return;const _=(p=c.resourceTiming)===null||p===void 0?void 0:p[this.id];if(!_)return;const T=_.slice(0);T?.length&&u.e(n,{resourceTiming:T})}_applyDiffToSource(n){if(!n)return;const c=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const _=u.a7(this._data.geojson,c);if(!_)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:_}}if(!this._data.updateable)return;const p=u.a8(this._data.updateable,n,c);return n.removeAll||this._options.cluster?void 0:p}_getShouldReloadTileOptions(n){if(n)return{affectedBounds:n.filter(Boolean).map((c=>Wu(c)))}}shouldReloadTile(n,{affectedBounds:c}){if(n.state==="loading")return!0;if(n.state==="unloaded")return!1;const{buffer:p,extent:_}=this.workerOptions.geojsonVtOptions,T=(function({x:A,y:O,z:R},U=0){const V=u.a3((A-U)/Math.pow(2,R)),K=u.a4((O+1+U)/Math.pow(2,R)),X=u.a3((A+1+U)/Math.pow(2,R)),re=u.a4((O-U)/Math.pow(2,R));return new Lr([V,K],[X,re])})(n.tileID.canonical,p/_);for(const A of c)if(T.intersects(A))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(n){return u._(this,void 0,void 0,(function*(){const c=n.actor?"RT":"LT";n.actor=this.actor;const p={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const _=yield this.actor.sendAsync({type:c,data:p},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(_,this.map.painter,c==="RT")}))}abortTile(n){return u._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0}))}unloadTile(n){return u._(this,void 0,void 0,(function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class Aa extends u.E{constructor(n,c,p,_){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=p,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=c}load(n){return u._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield Se.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,n&&(this.coordinates=n),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,u.Z(c)||this.fire(new u.k(c))}}))}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const c=n.map(u.a9.fromLngLat);var p;return this.tileID=(function(_){const T=u.aa.fromPoints(_),A=T.width(),O=T.height(),R=Math.max(A,O),U=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),V=Math.pow(2,U);return new u.ac(U,Math.floor((T.minX+T.maxX)/2*V),Math.floor((T.minY+T.maxY)/2*V))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((_=>this.tileID.getTilePoint(_)._round())),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,c=n.gl;this.texture||(this.texture=new u.T(n,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,p=!0)}p&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return u._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:c,minY:p,maxX:_,maxY:T}=u.aa.fromPoints(n),A={};for(let O=0;O<=u.ab;O++){const R=Math.pow(2,O),U=Math.floor(c*R),V=Math.floor(p*R),K=Math.floor(_*R),X=Math.floor(T*R),re=(U%R+R)%R,oe=K%R,de=Math.floor(U/R),ve=Math.floor(K/R);A[O]={minWrap:de,maxWrap:ve,minTileXWrapped:re,maxTileXWrapped:oe,minTileY:V,maxTileY:X}}return A}}class Yu extends Aa{constructor(n,c,p,_){super(n,c,p,_),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const c of n.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.ad(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const c=this.video.seekable;n<c.start(0)||n>c.end(0)?this.fire(new u.k(new u.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,c=n.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new u.T(n,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let p=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,p=!0)}p&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ts extends Aa{constructor(n,c,p,_){super(n,c,p,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((A=>typeof A!="number"))))||this.fire(new u.k(new u.ae(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.k(new u.ae(`sources.${n}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.k(new u.ae(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.k(new u.ae(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.k(new u.ae(`sources.${n}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,p=c.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new u.T(c,this.canvas,p.RGBA,{premultiply:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));let _=!1;for(const T in this.tiles){const A=this.tiles[T];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,_=!0)}_&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Es={},Qc=w=>{switch(w){case"geojson":return oi;case"image":return Aa;case"raster":return Ss;case"raster-dem":return Go;case"vector":return il;case"video":return Yu;case"canvas":return Ts}return Es[w]},al="RTLPluginLoaded";class Be extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=mr()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return u._(this,arguments,void 0,(function*(c,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=G.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return u._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.l(al))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ee=null;function ne(){return ee||(ee=new Be),ee}var ae,Te;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(ae||(ae={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(Te||(Te={}));class Oe{constructor(n,c){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=u.af(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttFingerprint={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:c,fadingParentID:p,fadeEndTime:_}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=c,this.fadingParentID=p,this.fadeEndTime=_}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=H(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,c,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData,this.latestFeatureIndex.encoding=n.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=(function(_,T){const A={};if(!T)return A;for(const O of _){const R=O.layerIds.map((U=>T.getLayer(U))).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map((U=>R.filter((V=>V.id===U))[0])));for(const U of R)A[U.id]=O}}return A})(n.buckets,c?.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const T=this.buckets[_];if(T instanceof u.ah){if(this.hasSymbolBuckets=!0,!p)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const T=this.buckets[_];if(T instanceof u.ah&&T.hasRTLText){this.hasRTLText=!0,ne().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const T=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(_).queryRadius(T))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new u.ag}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const _=this.buckets[p];_.uploadPending()&&_.upload(n)}const c=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new u.T(n,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new u.T(n,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,c,p,_,T,A,O,R,U,V,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:T,scale:A,tileSize:this.tileSize,pixelPosMatrix:V,transform:R,params:O,queryPadding:this.queryPadding*U,getElevation:K},n,c,p):{}}querySourceFeatures(n,c){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const _=p.loadVTLayers(),T=c&&c.sourceLayer?c.sourceLayer:"",A=_[u.ai]||_[T];if(!A)return;const O=u.aj(c?.filter,c?.globalState),{z:R,x:U,y:V}=this.tileID.canonical,K={z:R,x:U,y:V};for(let X=0;X<A.length;X++){const re=A.feature(X);if(O.needGeometry){const ve=u.ak(re,!0);if(!O.filter(new u.H(this.tileID.overscaledZ),ve,this.tileID.canonical))continue}else if(!O.filter(new u.H(this.tileID.overscaledZ),re))continue;const oe=p.getId(re,T),de=new u.al(re,R,U,V,oe);de.tile=K,n.push(de)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const c=this.expirationTime;if(n.cacheControl){const p=u.am(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let _=!1;if(this.expirationTime>p)_=!1;else if(c)if(this.expirationTime<c)_=!0;else{const T=this.expirationTime-c;T?this.expirationTime=p+Math.max(T,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!c.style.hasLayer(_))continue;const T=this.buckets[_],A=T.layers[0].sourceLayer||u.ai,O=p[A],R=n[A];if(!O||!R||Object.keys(R).length===0)continue;T.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const U=c&&c.style&&c.style.getLayer(_);U&&(this.queryPadding=Math.max(this.queryPadding,U.queryRadius(T)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<H()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=H()+n}setDependencies(n,c){const p={};for(const _ of c)p[_]=!0;this.dependencies[n]=p}hasDependency(n,c){for(const p of n){const _=this.dependencies[p];if(_){for(const T of c)if(_[T])return!0}}return!1}}class Ze{constructor(){this.state={},this.stateChanges={},this.deletedStates={},this.revision=0}updateState(n,c,p){const _=String(c);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][_]=this.stateChanges[n][_]||{},u.e(this.stateChanges[n][_],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const T in this.state[n])T!==_&&(this.deletedStates[n][T]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][_]===null){this.deletedStates[n][_]={};for(const T in this.state[n][_])p[T]||(this.deletedStates[n][_][T]=null)}else for(const T in p)this.deletedStates[n]&&this.deletedStates[n][_]&&this.deletedStates[n][_][T]===null&&delete this.deletedStates[n][_][T]}removeFeatureState(n,c,p){if(this.deletedStates[n]===null)return;const _=String(c);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&c!==void 0)this.deletedStates[n][_]!==null&&(this.deletedStates[n][_]=this.deletedStates[n][_]||{},this.deletedStates[n][_][p]=null);else if(c!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][_])for(p in this.deletedStates[n][_]={},this.stateChanges[n][_])this.deletedStates[n][_][p]=null;else this.deletedStates[n][_]=null;else this.deletedStates[n]=null}getState(n,c){const p=String(c),_=u.e({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const T=this.deletedStates[n][c];if(T===null)return{};for(const A in T)delete _[A]}return _}initializeTileState(n,c){n.setFeatureState(this.state,c)}coalesceChanges(n,c){const p={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const T={};for(const A in this.stateChanges[_])this.state[_][A]||(this.state[_][A]={}),u.e(this.state[_][A],this.stateChanges[_][A]),T[A]=this.state[_][A];p[_]=T}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const T={};if(this.deletedStates[_]===null)for(const A in this.state[_])T[A]={},this.state[_][A]={};else for(const A in this.deletedStates[_]){if(this.deletedStates[_][A]===null)this.state[_][A]={};else for(const O of Object.keys(this.deletedStates[_][A]))delete this.state[_][A][O];T[A]=this.state[_][A]}p[_]=p[_]||{},u.e(p[_],T)}this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0&&(this.revision++,n.setFeatureState(p,c))}}const qe=89.25;function Ne(w,n){const c=u.an(n.lat,-u.ao,u.ao);return new u.P(u.Y(n.lng)*w,u.X(c)*w)}function Ge(w,n){return new u.a9(n.x/w,n.y/w).toLngLat()}function mt(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(u.ap(90-w.pitch)),Math.tan(u.ap(qe-w.pitch)))}function nt(w,n){const c=w.canonical,p=n/u.aq(c.z),_=c.x+Math.pow(2,c.z)*w.wrap,T=u.ar(new Float64Array(16));return u.O(T,T,[_*p,c.y*p,0]),u.Q(T,T,[p/u.a5,p/u.a5,1]),T}function De(w,n,c,p,_){const T=u.a9.fromLngLat(w,n),A=_*u.as(1,w.lat),{x:O,y:R,z:U}=Bt(c,p);return new u.a9(T.x+A*-O,T.y+A*-R,T.z+A*-U)}function Bt(w,n){const c=u.ap(w),p=u.ap(n),_=Math.cos(-c),T=Math.sin(c);return{x:T*Math.sin(p),y:-T*Math.cos(p),z:_}}function ir(w,n,c){const p=n.intersectsFrustum(w);if(!c||p===0)return p;const _=n.intersectsPlane(c);return _===0?0:p===2&&_===2?2:1}function Yt(w,n,c){let p=0;const _=(c-n)/10;for(let T=0;T<10;T++)p+=_*Math.pow(Math.cos(n+(T+.5)/10*(c-n)),w);return p}function Jt(w,n){return function(c,p,_,T,A){const O=2*((w-1)/u.at(Math.cos(u.ap(qe-A))/Math.cos(u.ap(qe)))-1),R=Math.acos(_/T),U=2*Yt(O-1,0,u.ap(A/2)),V=Math.min(u.ap(qe),R+u.ap(A/2)),K=Yt(O-1,Math.min(V,R-u.ap(A/2)),V),X=Math.atan(p/_),re=Math.hypot(p,_);let oe=c;return oe+=u.at(T/re/Math.max(.5,Math.cos(u.ap(A/2)))),oe+=O*u.at(Math.cos(X))/2,oe-=u.at(Math.max(1,K/U/n))/2,oe}}const er=Jt(9.314,3);function ar(w,n){const c=(n.roundZoom?Math.round:Math.floor)(w.zoom+u.at(w.tileSize/n.tileSize));return Math.max(0,c)}function fn(w,n){const c=w.getCameraFrustum(),p=w.getClippingPlane(),_=w.screenPointToMercatorCoordinate(w.getCameraPoint()),T=u.a9.fromLngLat(w.center,w.elevation);_.z=T.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const A=w.getCoveringTilesDetailsProvider(),O=A.allowVariableZoom(w,n),R=ar(w,n),U=n.minzoom||0,V=n.maxzoom!==void 0?n.maxzoom:w.maxZoom,K=Math.min(Math.max(0,R),V),X=Math.pow(2,K),re=[X*_.x,X*_.y,0],oe=[X*T.x,X*T.y,0],de=Math.hypot(T.x-_.x,T.y-_.y),ve=Math.abs(T.z-_.z),ye=Math.hypot(de,ve),we=Pe=>({zoom:0,x:0,y:0,wrap:Pe,fullyVisible:!1}),Ce=[],be=[];if(w.renderWorldCopies&&A.allowWorldCopies())for(let Pe=1;Pe<=3;Pe++)Ce.push(we(-Pe)),Ce.push(we(Pe));for(Ce.push(we(0));Ce.length>0;){const Pe=Ce.pop(),Ie=Pe.x,Ee=Pe.y;let Le=Pe.fullyVisible;const Ke={x:Ie,y:Ee,z:Pe.zoom},He=A.getTileBoundingVolume(Ke,Pe.wrap,w.elevation,n);if(!Le){const Mt=ir(c,He,p);if(Mt===0)continue;Le=Mt===2}const Ye=A.distanceToTile2d(_.x,_.y,Ke,He);let Xe=R;O&&(Xe=(n.calculateTileZoom||er)(w.zoom+u.at(w.tileSize/n.tileSize),Ye,ve,ye,w.fov)),Xe=(n.roundZoom?Math.round:Math.floor)(Xe),Xe=Math.max(0,Xe);const At=Math.min(Xe,V);if(Pe.wrap=A.getWrap(T,Ke,Pe.wrap),Pe.zoom>=At){if(Pe.zoom<U)continue;const Mt=K-Pe.zoom,dt=re[0]-.5-(Ie<<Mt),Ot=re[1]-.5-(Ee<<Mt),lr=n.reparseOverscaled?Math.max(Pe.zoom,Xe):Pe.zoom;be.push({tileID:new u.a2(Pe.zoom===V?lr:Pe.zoom,Pe.wrap,Pe.zoom,Ie,Ee),distanceSq:u.au([oe[0]-.5-Ie,oe[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(dt*dt+Ot*Ot)})}else for(let Mt=0;Mt<4;Mt++)Ce.push({zoom:Pe.zoom+1,x:(Ie<<1)+Mt%2,y:(Ee<<1)+(Mt>>1),wrap:Pe.wrap,fullyVisible:Le})}return be.sort(((Pe,Ie)=>Pe.distanceSq-Ie.distanceSq)).map((Pe=>Pe.tileID))}const On=u.aa.fromPoints([new u.P(0,0),new u.P(u.a5,u.a5)]);function wn(w){return w==="raster"||w==="image"||w==="video"}function Mi(w,n,c,p,_,T,A){if(!n.hasData())return!1;const{tileID:O,fadingRole:R,fadingDirection:U,fadingParentID:V}=n;if(R===ae.Base&&U===Te.Incoming&&V)return c[V.key]=V,!0;const K=Math.max(O.overscaledZ-_,T);for(let X=O.overscaledZ-1;X>=K;X--){const re=O.scaledTo(X),oe=w.getLoadedTile(re);if(oe)return n.setCrossFadeLogic({fadingRole:ae.Base,fadingDirection:Te.Incoming,fadingParentID:oe.tileID,fadeEndTime:p+A}),oe.setCrossFadeLogic({fadingRole:ae.Parent,fadingDirection:Te.Departing,fadeEndTime:p+A}),c[re.key]=re,!0}return!1}function dn(w,n,c,p,_,T){if(!n.hasData())return!1;const A=n.tileID.children(_);let O=xt(w,n,A,c,p,_,T);if(O)return!0;for(const R of A)xt(w,n,R.children(_),c,p,_,T)&&(O=!0);return O}function xt(w,n,c,p,_,T,A){if(c[0].overscaledZ>=T)return!1;let O=!1;for(const R of c){const U=w.getLoadedTile(R);if(!U)continue;const{fadingRole:V,fadingDirection:K,fadingParentID:X}=U;V===ae.Base&&K===Te.Departing&&X||(U.setCrossFadeLogic({fadingRole:ae.Base,fadingDirection:Te.Departing,fadingParentID:n.tileID,fadeEndTime:_+A}),n.setCrossFadeLogic({fadingRole:ae.Parent,fadingDirection:Te.Incoming,fadeEndTime:_+A})),p[R.key]=R,O=!0}return O}function Or(w,n,c,p){const _=w.tileID;return!!w.selfFading||!w.hasData()&&!!n.has(_)&&(w.setSelfFadeLogic(c+p),!0)}function on(w,n){var c;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let p=n.tileID.canonical.x-w.tileID.canonical.x;const _=n.tileID.canonical.y-w.tileID.canonical.y,T=Math.pow(2,w.tileID.canonical.z),A=n.tileID.key;p===0&&_===0||Math.abs(_)>1||(Math.abs(p)>1&&(Math.abs(p+T)===1?p+=T:Math.abs(p-T)===1&&(p-=T)),n.dem&&w.dem&&(w.dem.backfillBorder(n.dem,p,_),!((c=w.neighboringTiles)===null||c===void 0)&&c[A]&&(w.neighboringTiles[A].backfilled=!0)))}class ta{constructor(){this._tiles={}}handleWrapJump(n){const c={};for(const p in this._tiles){const _=this._tiles[p];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+n),c[_.tileID.key]=_}this._tiles=c}setFeatureState(n,c){for(const p in this._tiles)this._tiles[p].setFeatureState(n,c)}getAllTiles(){return Object.values(this._tiles)}getAllIds(n=!1){return n?Object.values(this._tiles).map((c=>c.tileID)).sort(u.aw).map((c=>c.key)):Object.keys(this._tiles)}getTileById(n){return this._tiles[n]}setTile(n,c){this._tiles[n]=c}deleteTileById(n){delete this._tiles[n]}getLoadedTile(n){const c=this.getTileById(n.key);return c?.hasData()?c:null}isIdRenderable(n,c=!1){var p;return(p=this.getTileById(n))===null||p===void 0?void 0:p.isRenderable(c)}getRenderableIds(n=0,c){const p=[];for(const _ of this.getAllIds())this.isIdRenderable(_,c)&&p.push(this.getTileById(_));return c?p.sort(((_,T)=>{const A=_.tileID,O=T.tileID,R=new u.P(A.canonical.x,A.canonical.y)._rotate(-n),U=new u.P(O.canonical.x,O.canonical.y)._rotate(-n);return A.overscaledZ-O.overscaledZ||U.y-R.y||U.x-R.x})).map((_=>_.tileID.key)):p.map((_=>_.tileID)).sort(u.aw).map((_=>_.key))}}class Fr extends u.E{constructor(n,c,p){super(),this.id=n,this.dispatcher=p,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,T,A,O)=>{const R=new(Qc(T.type))(_,T,A,O);if(R.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${R.id}`);return R})(n,c,p,this),this._inViewTiles=new ta,this._outOfViewCache=new u.ax(0,(_=>this._unloadTile(_))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ze,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){for(const c of this._inViewTiles.getAllTiles())c.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n),this._inViewTiles=new ta}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,c,p){return u._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,c,p)}catch(_){n.state="errored",_.status!==404?this._source.fire(new u.k(_,{tile:n})):this.update(this.transform,this.terrain)}}))}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new u.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const c of this._inViewTiles.getAllTiles())c.upload(n),c.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(n){var c;return this._inViewTiles.getRenderableIds((c=this.transform)===null||c===void 0?void 0:c.bearingInRadians,n)}hasRenderableParent(n){const c=n.overscaledZ-1;if(c>=this._source.minzoom){const p=this.getLoadedTile(n.scaledTo(c));if(p)return this._inViewTiles.isIdRenderable(p.tileID.key)}return!1}reload(n,c=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const p of this._inViewTiles.getAllIds()){const _=this._inViewTiles.getTileById(p);c&&!this._source.shouldReloadTile(_,c)||(n?this._reloadTile(p,"expired"):_.state!=="errored"&&this._reloadTile(p,"reloading"))}}}_reloadTile(n,c){return u._(this,void 0,void 0,(function*(){const p=this._inViewTiles.getTileById(n);p&&(p.state!=="loading"&&(p.state=c),yield this._loadTile(p,n,c))}))}_tileLoaded(n,c,p){n.timeAdded=H(),n.selfFading&&(n.fadeEndTime=n.timeAdded+this._rasterFadeDuration),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(c,n),this.getSource().type==="raster-dem"&&n.dem&&(function(_,T){var A,O;const R=T.getRenderableIds();for(const U of R){if(!_.neighboringTiles||!_.neighboringTiles[U])continue;const V=T.getTileById(U);_.neighboringTiles[U].backfilled||on(_,V),!((O=(A=V.neighboringTiles)===null||A===void 0?void 0:A[_.tileID.key])===null||O===void 0)&&O.backfilled||on(V,_)}})(n,this._inViewTiles),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new u.l("data",{dataType:"source",tile:n,coord:n.tileID}))}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._inViewTiles.getTileById(n)}_retainLoadedChildren(n,c){const p=this._getLoadedDescendents(c),_=new Set;for(const T of c){const A=p[T.key];if(!A?.length){_.add(T);continue}const O=T.overscaledZ+Fr.maxOverzooming,R=A.filter((K=>K.tileID.overscaledZ<=O));if(!R.length){_.add(T);continue}const U=Math.min(...R.map((K=>K.tileID.overscaledZ))),V=R.filter((K=>K.tileID.overscaledZ===U)).map((K=>K.tileID));for(const K of V)n[K.key]=K;this._areDescendentsComplete(V,U,T.overscaledZ)||_.add(T)}return _}_getLoadedDescendents(n){var c;const p={};for(const _ of this._inViewTiles.getAllTiles().filter((T=>T.hasData())))for(const T of n)_.tileID.isChildOf(T)&&(p[c=T.key]||(p[c]=[])).push(_);return p}_areDescendentsComplete(n,c,p){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===c:Math.pow(4,c-p)===n.length}getLoadedTile(n){return this._inViewTiles.getLoadedTile(n)}updateCacheSize(n){const c=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,_=Math.floor(c*p*(this._maxTileCacheZoomLevels===null?u.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._outOfViewCache.setMaxSize(T)}handleWrapJump(n){const c=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);this._prevLng=n,c&&(this._inViewTiles.handleWrapJump(c),this._resetTileReloadTimers())}update(n,c){if(!this._sourceLoaded||this._paused)return;let p;this.transform=n,this.terrain=c,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((R=>new u.a2(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y))):(p=fn(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?n.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter((R=>this._source.hasTile(R))))):p=[],this.usedForTerrain&&(p=this._addTerrainIdealTiles(p));const _=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,_&&this.fire(new u.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const T=ar(n,this._source),A=this._updateRetainedTiles(p,T),O=wn(this._source.type);O&&this._rasterFadeDuration>0&&!c&&(function(R,U,V,K,X,re,oe){const de=H(),ve=u.av(U);for(const ye of U){const we=R.getTileById(ye.key);we.fadingDirection!==Te.Departing&&we.fadeOpacity!==0||we.resetFadeLogic(),Mi(R,we,V,de,K,X,oe)||dn(R,we,V,de,re,oe)||Or(we,ve,de,oe)||we.resetFadeLogic()}})(this._inViewTiles,p,A,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),O?this._cleanUpRasterTiles(A):this._cleanUpVectorTiles(A)}_cleanUpRasterTiles(n){for(const c of this._inViewTiles.getAllIds())n[c]||this._removeTile(c)}_cleanUpVectorTiles(n){for(const c of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(c);n[c]?p.clearSymbolFadeHold():p.hasSymbolBuckets?p.holdingForSymbolFade()?p.symbolFadeFinished()&&this._removeTile(c):p.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(c)}}_addTerrainIdealTiles(n){const c=[];for(const p of n)if(p.canonical.z>this._source.minzoom){const _=p.scaledTo(p.canonical.z-1);c.push(_);const T=p.scaledTo(Math.max(this._source.minzoom,Math.min(p.canonical.z,5)));c.push(T)}return n.concat(c)}releaseSymbolFadeTiles(){for(const n of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(n).holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,c){var p;const _=new Set;for(const U of n)this._addTile(U).hasData()||_.add(U);const T=n.reduce(((U,V)=>(U[V.key]=V,U)),{}),A=this._retainLoadedChildren(T,_),O={},R=Math.max(c-Fr.maxUnderzooming,this._source.minzoom);for(const U of A){let V=this._inViewTiles.getTileById(U.key),K=V?.wasRequested();for(let X=U.overscaledZ-1;X>=R;--X){const re=U.scaledTo(X);if(O[re.key])break;if(O[re.key]=!0,V=this.getTile(re),!V&&K&&(V=this._addTile(re)),V){const oe=V.hasData();if((oe||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||K)&&(T[re.key]=re),K=V.wasRequested(),oe)break}}}return T}_addTile(n){let c=this._inViewTiles.getTileById(n.key);if(c)return c;c=this._outOfViewCache.getAndRemove(n),c&&(c.resetFadeLogic(),this._setTileReloadTimer(n.key,c),c.tileID=n,this._state.initializeTileState(c,this.map?this.map.painter:null));const p=c;return c||(c=new Oe(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(c,n.key,c.state)),c.uses++,this._inViewTiles.setTile(n.key,c),p||this._source.fire(new u.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(n,c){this._clearTileReloadTimer(n);const p=c.getExpiryTimeout();p&&(this._timers[n]=setTimeout((()=>{this._reloadTile(n,"expired"),delete this._timers[n]}),p))}_clearTileReloadTimer(n){const c=this._timers[n];c&&(clearTimeout(c),delete this._timers[n])}_resetTileReloadTimers(){for(const n in this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(const n of this._inViewTiles.getAllIds()){const c=this._inViewTiles.getTileById(n);this._setTileReloadTimer(n,c)}}refreshTiles(n){for(const c of this._inViewTiles.getAllIds()){const p=this._inViewTiles.getTileById(c);(this._inViewTiles.isIdRenderable(c)||p.state=="errored")&&n.some((_=>_.equals(p.tileID.canonical)))&&this._reloadTile(c,"expired")}}_removeTile(n){const c=this._inViewTiles.getTileById(n);c&&(c.uses--,this._inViewTiles.deleteTileById(n),this._clearTileReloadTimer(n),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._outOfViewCache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged,n.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n of this._inViewTiles.getAllIds())this._removeTile(n);this._outOfViewCache.reset()}tilesIn(n,c,p){const _=[],T=this.transform;if(!T)return _;const A=T.getCoveringTilesDetailsProvider().allowWorldCopies(),O=p?T.getCameraQueryGeometry(n):n,R=re=>T.screenPointToMercatorCoordinate(re,this.terrain),U=this.transformBbox(n,R,!A),V=this.transformBbox(O,R,!A),K=this.getIds(),X=u.aa.fromPoints(V);for(let re=0;re<K.length;re++){const oe=this._inViewTiles.getTileById(K[re]);if(oe.holdingForSymbolFade())continue;const de=A?[oe.tileID]:[oe.tileID.unwrapTo(-1),oe.tileID.unwrapTo(0)],ve=Math.pow(2,T.zoom-oe.tileID.overscaledZ),ye=c*oe.queryPadding*u.a5/oe.tileSize/ve;for(const we of de){const Ce=X.map((be=>we.getTilePoint(new u.a9(be.x,be.y))));if(Ce.expandBy(ye),Ce.intersects(On)){const be=U.map((Ie=>we.getTilePoint(Ie))),Pe=V.map((Ie=>we.getTilePoint(Ie)));_.push({tile:oe,tileID:A?we:we.unwrapTo(0),queryGeometry:be,cameraQueryGeometry:Pe,scale:ve})}}}return _}transformBbox(n,c,p){let _=n.map(c);if(p){const T=u.aa.fromPoints(n);T.shrinkBy(.001*Math.min(T.width(),T.height()));const A=T.map(c);u.aa.fromPoints(_).covers(A)||(_=_.map((O=>O.x>.5?new u.a9(O.x-1,O.y,O.z):O)))}return _}getVisibleCoordinates(n){const c=this.getRenderableIds(n).map((p=>this._inViewTiles.getTileById(p).tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){return!!this._source.hasTransition()||!(!wn(this._source.type)||!(function(n,c){if(c<=0)return!1;const p=H();for(const _ of n.getAllTiles())if(_.fadeEndTime>=p)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,c,p){this._state.updateState(n=n||u.ai,c,p)}removeFeatureState(n,c,p){this._state.removeFeatureState(n=n||u.ai,c,p)}getFeatureState(n,c){return this._state.getState(n=n||u.ai,c)}setDependencies(n,c,p){const _=this._inViewTiles.getTileById(n);_&&_.setDependencies(c,p)}reloadTilesForDependencies(n,c){for(const p of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(p).hasDependency(n,c)&&this._reloadTile(p,"reloading");this._outOfViewCache.filter((p=>!p.hasDependency(n,c)))}areTilesLoaded(){for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}}Fr.maxUnderzooming=10,Fr.maxOverzooming=3;class Tt{constructor(n,c){this.reset(n,c)}reset(n,c){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=u.an(n,0,1);let c=1,p=this._distances[c];const _=n*this.paddedLength+this.padding;for(;p<_&&c<this._distances.length;)p=this._distances[++c];const T=c-1,A=this._distances[T],O=p-A,R=O>0?(_-A)/O:0;return this.points[T].mult(1-R).add(this.points[c].mult(R))}}function Qt(w,n){let c=!0;return w==="always"||w!=="never"&&n!=="never"||(c=!1),c}class hr{constructor(n,c,p){const _=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(c/p);for(let A=0;A<this.xCellCount*this.yCellCount;A++)_.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=c,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,c,p,_,T){this._forEachCell(c,p,_,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(T)}insertCircle(n,c,p,_){this._forEachCell(c-_,p-_,c+_,p+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(c),this.circles.push(p),this.circles.push(_)}_insertBoxCell(n,c,p,_,T,A){this.boxCells[T].push(A)}_insertCircleCell(n,c,p,_,T,A){this.circleCells[T].push(A)}_query(n,c,p,_,T,A,O){if(p<0||n>this.width||_<0||c>this.height)return[];const R=[];if(n<=0&&c<=0&&this.width<=p&&this.height<=_){if(T)return[{key:null,x1:n,y1:c,x2:p,y2:_}];for(let U=0;U<this.boxKeys.length;U++)R.push({key:this.boxKeys[U],x1:this.bboxes[4*U],y1:this.bboxes[4*U+1],x2:this.bboxes[4*U+2],y2:this.bboxes[4*U+3]});for(let U=0;U<this.circleKeys.length;U++){const V=this.circles[3*U],K=this.circles[3*U+1],X=this.circles[3*U+2];R.push({key:this.circleKeys[U],x1:V-X,y1:K-X,x2:V+X,y2:K+X})}}else this._forEachCell(n,c,p,_,this._queryCell,R,{hitTest:T,overlapMode:A,seenUids:{box:{},circle:{}}},O);return R}query(n,c,p,_){return this._query(n,c,p,_,!1,null)}hitTest(n,c,p,_,T,A){return this._query(n,c,p,_,!0,T,A).length>0}hitTestCircle(n,c,p,_,T){const A=n-p,O=n+p,R=c-p,U=c+p;if(O<0||A>this.width||U<0||R>this.height)return!1;const V=[];return this._forEachCell(A,R,O,U,this._queryCellCircle,V,{hitTest:!0,overlapMode:_,circle:{x:n,y:c,radius:p},seenUids:{box:{},circle:{}}},T),V.length>0}_queryCell(n,c,p,_,T,A,O,R){const{seenUids:U,hitTest:V,overlapMode:K}=O,X=this.boxCells[T];if(X!==null){const oe=this.bboxes;for(const de of X)if(!U.box[de]){U.box[de]=!0;const ve=4*de,ye=this.boxKeys[de];if(n<=oe[ve+2]&&c<=oe[ve+3]&&p>=oe[ve+0]&&_>=oe[ve+1]&&(!R||R(ye))&&(!V||!Qt(K,ye.overlapMode))&&(A.push({key:ye,x1:oe[ve],y1:oe[ve+1],x2:oe[ve+2],y2:oe[ve+3]}),V))return!0}}const re=this.circleCells[T];if(re!==null){const oe=this.circles;for(const de of re)if(!U.circle[de]){U.circle[de]=!0;const ve=3*de,ye=this.circleKeys[de];if(this._circleAndRectCollide(oe[ve],oe[ve+1],oe[ve+2],n,c,p,_)&&(!R||R(ye))&&(!V||!Qt(K,ye.overlapMode))){const we=oe[ve],Ce=oe[ve+1],be=oe[ve+2];if(A.push({key:ye,x1:we-be,y1:Ce-be,x2:we+be,y2:Ce+be}),V)return!0}}}return!1}_queryCellCircle(n,c,p,_,T,A,O,R){const{circle:U,seenUids:V,overlapMode:K}=O,X=this.boxCells[T];if(X!==null){const oe=this.bboxes;for(const de of X)if(!V.box[de]){V.box[de]=!0;const ve=4*de,ye=this.boxKeys[de];if(this._circleAndRectCollide(U.x,U.y,U.radius,oe[ve+0],oe[ve+1],oe[ve+2],oe[ve+3])&&(!R||R(ye))&&!Qt(K,ye.overlapMode))return A.push(!0),!0}}const re=this.circleCells[T];if(re!==null){const oe=this.circles;for(const de of re)if(!V.circle[de]){V.circle[de]=!0;const ve=3*de,ye=this.circleKeys[de];if(this._circlesCollide(oe[ve],oe[ve+1],oe[ve+2],U.x,U.y,U.radius)&&(!R||R(ye))&&!Qt(K,ye.overlapMode))return A.push(!0),!0}}}_forEachCell(n,c,p,_,T,A,O,R){const U=this._convertToXCellCoord(n),V=this._convertToYCellCoord(c),K=this._convertToXCellCoord(p),X=this._convertToYCellCoord(_);for(let re=U;re<=K;re++)for(let oe=V;oe<=X;oe++)if(T.call(this,n,c,p,_,this.xCellCount*oe+re,A,O,R))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,c,p,_,T,A){const O=_-n,R=T-c,U=p+A;return U*U>O*O+R*R}_circleAndRectCollide(n,c,p,_,T,A,O){const R=(A-_)/2,U=Math.abs(n-(_+R));if(U>R+p)return!1;const V=(O-T)/2,K=Math.abs(c-(T+V));if(K>V+p)return!1;if(U<=R||K<=V)return!0;const X=U-R,re=K-V;return X*X+re*re<=p*p}}function Ma(w,n,c){const p=u.N();if(!w){const{vecSouth:K,vecEast:X}=Zo(n),re=C();re[0]=X[0],re[1]=X[1],re[2]=K[0],re[3]=K[1],_=re,(V=(A=(T=re)[0])*(U=T[3])-(R=T[2])*(O=T[1]))&&(_[0]=U*(V=1/V),_[1]=-O*V,_[2]=-R*V,_[3]=A*V),p[0]=re[0],p[1]=re[1],p[4]=re[2],p[5]=re[3]}var _,T,A,O,R,U,V;return u.Q(p,p,[1/c,1/c,1]),p}function Sf(w,n,c,p){if(w){const _=u.N();if(!n){const{vecSouth:T,vecEast:A}=Zo(c);_[0]=A[0],_[1]=A[1],_[4]=T[0],_[5]=T[1]}return u.Q(_,_,[p,p,1]),_}return c.pixelsToClipSpaceMatrix}function Zo(w){const n=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),p=Math.cos(w.pitchInRadians),_=Math.cos(w.bearingInRadians),T=Math.sin(w.bearingInRadians),A=u.aC();A[0]=-_*p*c-T*n,A[1]=-T*p*c+_*n;const O=u.aD(A);O<1e-9?u.aE(A):u.aF(A,A,1/O);const R=u.aC();R[0]=_*p*n-T*c,R[1]=T*p*n+_*c;const U=u.aD(R);return U<1e-9?u.aE(R):u.aF(R,R,1/U),{vecEast:R,vecSouth:A}}function fr(w,n,c,p){let _;p?(_=[w,n,p(w,n),1],u.aH(_,_,c)):(_=[w,n,0,1],Qa(_,_,c));const T=_[3];return{point:new u.P(_[0]/T,_[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Hl(w,n){return .5+w/n*.5}function Ho(w,n){return w.x>=-n[0]&&w.x<=n[0]&&w.y>=-n[1]&&w.y<=n[1]}function As(w,n,c,p,_,T,A,O,R,U,V,K,X){const re=c?w.textSizeData:w.iconSizeData,oe=u.ay(re,n.transform.zoom),de=[256/n.width*2+1,256/n.height*2+1],ve=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;ve.clear();const ye=w.lineVertexArray,we=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,Ce=n.transform.width/n.transform.height;let be=!1;for(let Pe=0;Pe<we.length;Pe++){const Ie=we.get(Pe);if(Ie.hidden||Ie.writingMode===u.az.vertical&&!be){Xo(Ie.numGlyphs,ve);continue}be=!1;const Ee=new u.P(Ie.anchorX,Ie.anchorY),Le={getElevation:X,pitchedLabelPlaneMatrix:p,lineVertexArray:ye,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:Ee,unwrappedTileID:R,width:U,height:V,translation:K},Ke=Ku(Ie.anchorX,Ie.anchorY,Le);if(!Ho(Ke.point,de)){Xo(Ie.numGlyphs,ve);continue}const He=Hl(n.transform.cameraToCenterDistance,Ke.signedDistanceFromCamera),Ye=u.aA(re,oe,Ie),Xe=T?Ye*n.transform.getPitchedTextCorrection(Ie.anchorX,Ie.anchorY,R)/He:Ye*He,At=In({projectionContext:Le,pitchedLabelPlaneMatrixInverse:_,symbol:Ie,fontSize:Xe,flip:!1,keepUpright:A,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ve,aspectRatio:Ce,rotateToLine:O});be=At.useVertical,(At.notEnoughRoom||be||At.needsFlipping&&In({projectionContext:Le,pitchedLabelPlaneMatrixInverse:_,symbol:Ie,fontSize:Xe,flip:!0,keepUpright:A,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:ve,aspectRatio:Ce,rotateToLine:O}).notEnoughRoom)&&Xo(Ie.numGlyphs,ve)}c?w.text.dynamicLayoutVertexBuffer.updateData(ve):w.icon.dynamicLayoutVertexBuffer.updateData(ve)}function Wo(w,n,c,p,_,T,A,O){const R=T.glyphStartIndex+T.numGlyphs,U=T.lineStartIndex,V=T.lineStartIndex+T.lineLength,K=n.getoffsetX(T.glyphStartIndex),X=n.getoffsetX(R-1),re=To(w*K,c,p,_,T.segment,U,V,O,A);if(!re)return null;const oe=To(w*X,c,p,_,T.segment,U,V,O,A);return oe?O.projectionCache.anyProjectionOccluded?null:{first:re,last:oe}:null}function Yo(w,n,c,p){return w===u.az.horizontal&&Math.abs(c.y-n.y)>Math.abs(c.x-n.x)*p?{useVertical:!0}:(w===u.az.vertical?n.y<c.y:n.x>c.x)?{needsFlipping:!0}:null}function In(w){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:c,symbol:p,fontSize:_,flip:T,keepUpright:A,glyphOffsetArray:O,dynamicLayoutVertexArray:R,aspectRatio:U,rotateToLine:V}=w,K=_/24,X=p.lineOffsetX*K,re=p.lineOffsetY*K;let oe;if(p.numGlyphs>1){const de=p.glyphStartIndex+p.numGlyphs,ve=p.lineStartIndex,ye=p.lineStartIndex+p.lineLength,we=Wo(K,O,X,re,T,p,V,n);if(!we)return{notEnoughRoom:!0};const Ce=Ms(we.first.point.x,we.first.point.y,n,c),be=Ms(we.last.point.x,we.last.point.y,n,c);if(A&&!T){const Pe=Yo(p.writingMode,Ce,be,U);if(Pe)return Pe}oe=[we.first];for(let Pe=p.glyphStartIndex+1;Pe<de-1;Pe++){const Ie=To(K*O.getoffsetX(Pe),X,re,T,p.segment,ve,ye,n,V);if(!Ie)return{notEnoughRoom:!0};oe.push(Ie)}oe.push(we.last)}else{if(A&&!T){const ve=Tr(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,ye=p.lineStartIndex+p.segment+1,we=new u.P(n.lineVertexArray.getx(ye),n.lineVertexArray.gety(ye)),Ce=Tr(we.x,we.y,n),be=Ce.signedDistanceFromCamera>0?Ce.point:Xu(n.tileAnchorPoint,we,ve,1,n),Pe=Ms(ve.x,ve.y,n,c),Ie=Ms(be.x,be.y,n,c),Ee=Yo(p.writingMode,Pe,Ie,U);if(Ee)return Ee}const de=To(K*O.getoffsetX(p.glyphStartIndex),X,re,T,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,n,V);if(!de||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};oe=[de]}for(const de of oe)u.aG(R,de.point,de.angle);return{}}function Xu(w,n,c,p,_){const T=w.add(w.sub(n)._unit()),A=Tr(T.x,T.y,_).point,O=c.sub(A);return c.add(O._mult(p/O.mag()))}function zi(w,n,c){const p=n.projectionCache;if(p.projections[w])return p.projections[w];const _=new u.P(n.lineVertexArray.getx(w),n.lineVertexArray.gety(w)),T=Tr(_.x,_.y,n);if(T.signedDistanceFromCamera>0)return p.projections[w]=T.point,p.anyProjectionOccluded=p.anyProjectionOccluded||T.isOccluded,T.point;const A=w-c.direction;return Xu(c.distanceFromAnchor===0?n.tileAnchorPoint:new u.P(n.lineVertexArray.getx(A),n.lineVertexArray.gety(A)),_,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,n)}function Tr(w,n,c){const p=w+c.translation[0],_=n+c.translation[1];let T;return c.pitchWithMap?(T=fr(p,_,c.pitchedLabelPlaneMatrix,c.getElevation),T.isOccluded=!1):(T=c.transform.projectTileCoordinates(p,_,c.unwrappedTileID,c.getElevation),T.point.x=(.5*T.point.x+.5)*c.width,T.point.y=(.5*-T.point.y+.5)*c.height),T}function Ms(w,n,c,p){if(c.pitchWithMap){const _=[w,n,0,1];return u.aH(_,_,p),c.transform.projectTileCoordinates(_[0]/_[3],_[1]/_[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:1-n/c.height*2}}function Ku(w,n,c){return c.transform.projectTileCoordinates(w,n,c.unwrappedTileID,c.getElevation)}function Qu(w,n,c){return w._unit()._perp()._mult(n*c)}function ol(w,n,c,p,_,T,A,O,R){if(O.projectionCache.offsets[w])return O.projectionCache.offsets[w];const U=c.add(n);if(w+R.direction<p||w+R.direction>=_)return O.projectionCache.offsets[w]=U,U;const V=zi(w+R.direction,O,R),K=Qu(V.sub(c),A,R.direction),X=c.add(K),re=V.add(K);return O.projectionCache.offsets[w]=u.aI(T,U,X,re)||U,O.projectionCache.offsets[w]}function To(w,n,c,p,_,T,A,O,R){const U=p?w-n:w+n;let V=U>0?1:-1,K=0;p&&(V*=-1,K=Math.PI),V<0&&(K+=Math.PI);let X,re=V>0?T+_:T+_+1;O.projectionCache.cachedAnchorPoint?X=O.projectionCache.cachedAnchorPoint:(X=Tr(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=X);let oe,de,ve=X,ye=X,we=0,Ce=0;const be=Math.abs(U),Pe=[];let Ie;for(;we+Ce<=be;){if(re+=V,re<T||re>=A)return null;we+=Ce,ye=ve,de=oe;const Ke={absOffsetX:be,direction:V,distanceFromAnchor:we,previousVertex:ye};if(ve=zi(re,O,Ke),c===0)Pe.push(ye),Ie=ve.sub(ye);else{let He;const Ye=ve.sub(ye);He=Ye.mag()===0?Qu(zi(re+V,O,Ke).sub(ve),c,V):Qu(Ye,c,V),de||(de=ye.add(He)),oe=ol(re,He,ve,T,A,de,c,O,Ke),Pe.push(de),Ie=oe.sub(de)}Ce=Ie.mag()}const Ee=Ie._mult((be-we)/Ce)._add(de||ye),Le=K+Math.atan2(ve.y-ye.y,ve.x-ye.x);return Pe.push(Ee),{point:Ee,angle:R?Le:0,path:Pe}}const Jc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xo(w,n){for(let c=0;c<w;c++){const p=n.length;n.resize(p+4),n.float32.set(Jc,3*p)}}function Qa(w,n,c){const p=n[0],_=n[1];return w[0]=c[0]*p+c[4]*_+c[12],w[1]=c[1]*p+c[5]*_+c[13],w[3]=c[3]*p+c[7]*_+c[15],w}const Ir=100;class zd{constructor(n,c=new hr(n.width+200,n.height+200,25),p=new hr(n.width+200,n.height+200,25)){this.transform=n,this.grid=c,this.ignoredGrid=p,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Ir,this.screenBottomBoundary=n.height+Ir,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,c,p,_,T,A,O,R,U,V,K,X){const re=this.projectAndGetPerspectiveRatio(n.anchorPointX+R[0],n.anchorPointY+R[1],T,V,X),oe=p*re.perspectiveRatio;let de;if(A||O)de=this._projectCollisionBox(n,oe,_,T,A,O,R,re,V,K,X);else{const Ie=re.x+(K?K.x*oe:0),Ee=re.y+(K?K.y*oe:0);de={allPointsOccluded:!1,box:[Ie+n.x1*oe,Ee+n.y1*oe,Ie+n.x2*oe,Ee+n.y2*oe]}}const[ve,ye,we,Ce]=de.box,be=A?de.allPointsOccluded:re.isOccluded;let Pe=be;return Pe||(Pe=re.perspectiveRatio<this.perspectiveRatioCutoff),Pe||(Pe=!this.isInsideGrid(ve,ye,we,Ce)),Pe||c!=="always"&&this.grid.hitTest(ve,ye,we,Ce,c,U)?{box:[ve,ye,we,Ce],placeable:!1,offscreen:!1,occluded:be}:{box:[ve,ye,we,Ce],placeable:!0,offscreen:this.isOffscreen(ve,ye,we,Ce),occluded:be}}placeCollisionCircles(n,c,p,_,T,A,O,R,U,V,K,X,re,oe){const de=[],ve=new u.P(c.anchorX,c.anchorY),ye=this.getPerspectiveRatio(ve.x,ve.y,A,oe),we=(U?T*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,A)/ye:T*ye)/u.aM,Ce={getElevation:oe,pitchedLabelPlaneMatrix:O,lineVertexArray:p,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ve,unwrappedTileID:A,width:this.transform.width,height:this.transform.height,translation:re},be=Wo(we,_,c.lineOffsetX*we,c.lineOffsetY*we,!1,c,!1,Ce);let Pe=!1,Ie=!1,Ee=!0;if(be){const Le=.5*K*ye+X,Ke=new u.P(-100,-100),He=new u.P(this.screenRightBoundary,this.screenBottomBoundary),Ye=new Tt,Xe=be.first,At=be.last;let Mt=[];for(let lr=Xe.path.length-1;lr>=1;lr--)Mt.push(Xe.path[lr]);for(let lr=1;lr<At.path.length;lr++)Mt.push(At.path[lr]);const dt=2.5*Le;if(U){const lr=this.projectPathToScreenSpace(Mt,Ce);Mt=lr.some((Br=>Br.signedDistanceFromCamera<=0))?[]:lr.map((Br=>Br.point))}let Ot=[];if(Mt.length>0){const lr=Mt[0].clone(),Br=Mt[0].clone();for(let rn=1;rn<Mt.length;rn++)lr.x=Math.min(lr.x,Mt[rn].x),lr.y=Math.min(lr.y,Mt[rn].y),Br.x=Math.max(Br.x,Mt[rn].x),Br.y=Math.max(Br.y,Mt[rn].y);Ot=lr.x>=Ke.x&&Br.x<=He.x&&lr.y>=Ke.y&&Br.y<=He.y?[Mt]:Br.x<Ke.x||lr.x>He.x||Br.y<Ke.y||lr.y>He.y?[]:u.aJ([Mt],Ke.x,Ke.y,He.x,He.y)}for(const lr of Ot){Ye.reset(lr,.25*Le);let Br=0;Br=Ye.length<=.5*Le?1:Math.ceil(Ye.paddedLength/dt)+1;for(let rn=0;rn<Br;rn++){const Kr=rn/Math.max(Br-1,1),cn=Ye.lerp(Kr),Gr=cn.x+Ir,En=cn.y+Ir;de.push(Gr,En,Le,0);const hn=Gr-Le,mi=En-Le,Ln=Gr+Le,jn=En+Le;if(Ee=Ee&&this.isOffscreen(hn,mi,Ln,jn),Ie=Ie||this.isInsideGrid(hn,mi,Ln,jn),n!=="always"&&this.grid.hitTestCircle(Gr,En,Le,n,V)&&(Pe=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Pe}}}}return{circles:!R&&Pe||!Ie||ye<this.perspectiveRatioCutoff?[]:de,offscreen:Ee,collisionDetected:Pe}}projectPathToScreenSpace(n,c){const p=(function(_,T){const A=u.N();return u.aB(A,T.pitchedLabelPlaneMatrix),_.map((O=>{const R=fr(O.x,O.y,A,T.getElevation),U=T.transform.projectTileCoordinates(R.point.x,R.point.y,T.unwrappedTileID,T.getElevation);return U.point.x=(.5*U.point.x+.5)*T.width,U.point.y=(.5*-U.point.y+.5)*T.height,U}))})(n,c);return(function(_){let T=0,A=0,O=0,R=0;for(let U=0;U<_.length;U++)_[U].isOccluded?(O=U+1,R=0):(R++,R>A&&(A=R,T=O));return _.slice(T,T+A)})(p)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],p=new u.aa;for(const K of n){const X=new u.P(K.x+Ir,K.y+Ir);p.extend(X),c.push(X)}const{minX:_,minY:T,maxX:A,maxY:O}=p,R=this.grid.query(_,T,A,O).concat(this.ignoredGrid.query(_,T,A,O)),U={},V={};for(const K of R){const X=K.key;if(U[X.bucketInstanceId]===void 0&&(U[X.bucketInstanceId]={}),U[X.bucketInstanceId][X.featureIndex])continue;const re=[new u.P(K.x1,K.y1),new u.P(K.x2,K.y1),new u.P(K.x2,K.y2),new u.P(K.x1,K.y2)];u.aK(c,re)&&(U[X.bucketInstanceId][X.featureIndex]=!0,V[X.bucketInstanceId]===void 0&&(V[X.bucketInstanceId]=[]),V[X.bucketInstanceId].push(X.featureIndex))}return V}insertCollisionBox(n,c,p,_,T,A){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:T,collisionGroupID:A,overlapMode:c},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,c,p,_,T,A){const O=p?this.ignoredGrid:this.grid,R={bucketInstanceId:_,featureIndex:T,collisionGroupID:A,overlapMode:c};for(let U=0;U<n.length;U+=4)O.insertCircle(R,n[U],n[U+1],n[U+2])}projectAndGetPerspectiveRatio(n,c,p,_,T){if(T){let A;_?(A=[n,c,_(n,c),1],u.aH(A,A,T)):(A=[n,c,0,1],Qa(A,A,T));const O=A[3];return{x:(A[0]/O+1)/2*this.transform.width+Ir,y:(-A[1]/O+1)/2*this.transform.height+Ir,perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}{const A=this.transform.projectTileCoordinates(n,c,p,_);return{x:(A.point.x+1)/2*this.transform.width+Ir,y:(1-A.point.y)/2*this.transform.height+Ir,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5,isOccluded:A.isOccluded,signedDistanceFromCamera:A.signedDistanceFromCamera}}}getPerspectiveRatio(n,c,p,_){const T=this.transform.projectTileCoordinates(n,c,p,_);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(n,c,p,_){return p<Ir||n>=this.screenRightBoundary||_<Ir||c>this.screenBottomBoundary}isInsideGrid(n,c,p,_){return p>=0&&n<this.gridRightBoundary&&_>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const n=u.ar([]);return u.O(n,n,[-100,-100,0]),n}_projectCollisionBox(n,c,p,_,T,A,O,R,U,V,K){let X=1,re=0,oe=0,de=1;const ve=n.anchorPointX+O[0],ye=n.anchorPointY+O[1];if(A&&!T){const Mt=this.projectAndGetPerspectiveRatio(ve+1,ye,_,U,K),dt=Mt.x-R.x,Ot=Math.atan((Mt.y-R.y)/dt)+(dt<0?Math.PI:0),lr=Math.sin(Ot),Br=Math.cos(Ot);X=Br,re=lr,oe=-lr,de=Br}else if(!A&&T){const Mt=Zo(this.transform);X=Mt.vecEast[0],re=Mt.vecEast[1],oe=Mt.vecSouth[0],de=Mt.vecSouth[1]}let we=R.x,Ce=R.y,be=c;T&&(we=ve,Ce=ye,be=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),be*=this.transform.getPitchedTextCorrection(ve,ye,_),V||(be*=u.an(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),V&&(we+=X*V.x*be+oe*V.y*be,Ce+=re*V.x*be+de*V.y*be);const Pe=n.x1*be,Ie=n.x2*be,Ee=(Pe+Ie)/2,Le=n.y1*be,Ke=n.y2*be,He=(Le+Ke)/2,Ye=[{offsetX:Pe,offsetY:Le},{offsetX:Ee,offsetY:Le},{offsetX:Ie,offsetY:Le},{offsetX:Ie,offsetY:He},{offsetX:Ie,offsetY:Ke},{offsetX:Ee,offsetY:Ke},{offsetX:Pe,offsetY:Ke},{offsetX:Pe,offsetY:He}];let Xe=[];for(const{offsetX:Mt,offsetY:dt}of Ye)Xe.push(new u.P(we+X*Mt+oe*dt,Ce+re*Mt+de*dt));let At=!1;if(T){const Mt=Xe.map((dt=>this.projectAndGetPerspectiveRatio(dt.x,dt.y,_,U,K)));At=Mt.some((dt=>!dt.isOccluded)),Xe=Mt.map((dt=>new u.P(dt.x,dt.y)))}else At=!0;return{box:u.aL(Xe),allPointsOccluded:!At}}}class hm{constructor(n,c,p,_){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?c:-c))):_&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Wl{constructor(n,c,p,_,T){this.text=new hm(n?n.text:null,c,p,T),this.icon=new hm(n?n.icon:null,c,_,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class kd{constructor(n,c,p){this.text=n,this.icon=c,this.skipFade=p}}class eh{constructor(n,c,p,_,T){this.bucketInstanceId=n,this.featureIndex=c,this.sourceLayerIndex=p,this.bucketIndex=_,this.tileID=T}}class fm{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const c=++this.maxGroupID;this.collisionGroups[n]={ID:c,predicate:p=>p.collisionGroupID===c}}return this.collisionGroups[n]}}function Ui(w,n,c,p,_){const{horizontalAlign:T,verticalAlign:A}=u.aS(w);return new u.P(-(T-.5)*n+p[0]*_,-(A-.5)*c+p[1]*_)}class th{constructor(n,c,p,_,T){this.transform=n.clone(),this.terrain=c,this.collisionIndex=new zd(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new fm(_),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const c=this.terrain;return c?(p,_)=>c.getElevation(n,p,_):null}getBucketParts(n,c,p,_){const T=p.getBucket(c),A=p.latestFeatureIndex;if(!T||!A||c.id!==T.layerIds[0])return;const O=p.collisionBoxArray,R=T.layers[0].layout,U=T.layers[0].paint,V=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),K=p.tileSize/u.a5,X=p.tileID.toUnwrapped(),re=R.get("text-rotation-alignment")==="map",oe=u.aN(p,1,this.transform.zoom),de=u.aO(this.collisionIndex.transform,p,U.get("text-translate"),U.get("text-translate-anchor")),ve=u.aO(this.collisionIndex.transform,p,U.get("icon-translate"),U.get("icon-translate-anchor")),ye=Ma(re,this.transform,oe);this.retainedQueryData[T.bucketInstanceId]=new eh(T.bucketInstanceId,A,T.sourceLayerIndex,T.index,p.tileID);const we={bucket:T,layout:R,translationText:de,translationIcon:ve,unwrappedTileID:X,pitchedLabelPlaneMatrix:ye,scale:V,textPixelRatio:K,holdingForFade:p.holdingForSymbolFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:u.ay(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(_)for(const Ce of T.sortKeyRanges){const{sortKey:be,symbolInstanceStart:Pe,symbolInstanceEnd:Ie}=Ce;n.push({sortKey:be,symbolInstanceStart:Pe,symbolInstanceEnd:Ie,parameters:we})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:we})}attemptAnchorPlacement(n,c,p,_,T,A,O,R,U,V,K,X,re,oe,de,ve,ye,we,Ce,be){const Pe=u.aP[n.textAnchor],Ie=[n.textOffset0,n.textOffset1],Ee=Ui(Pe,p,_,Ie,T),Le=this.collisionIndex.placeCollisionBox(c,X,R,U,V,O,A,ve,K.predicate,Ce,Ee,be);if((!we||this.collisionIndex.placeCollisionBox(we,X,R,U,V,O,A,ye,K.predicate,Ce,Ee,be).placeable)&&Le.placeable){let Ke;if(this.prevPlacement&&this.prevPlacement.variableOffsets[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID]&&this.prevPlacement.placements[re.crossTileID].text&&(Ke=this.prevPlacement.variableOffsets[re.crossTileID].anchor),re.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[re.crossTileID]={textOffset:Ie,width:p,height:_,anchor:Pe,textBoxScale:T,prevAnchor:Ke},this.markUsedJustification(oe,Pe,re,de),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,de,re),this.placedOrientations[re.crossTileID]=de),{shift:Ee,placedGlyphBoxes:Le}}}placeLayerBucketPart(n,c,p){const{bucket:_,layout:T,translationText:A,translationIcon:O,unwrappedTileID:R,pitchedLabelPlaneMatrix:U,textPixelRatio:V,holdingForFade:K,collisionBoxArray:X,partiallyEvaluatedTextSize:re,collisionGroup:oe}=n.parameters,de=T.get("text-optional"),ve=T.get("icon-optional"),ye=u.aQ(T,"text-overlap","text-allow-overlap"),we=ye==="always",Ce=u.aQ(T,"icon-overlap","icon-allow-overlap"),be=Ce==="always",Pe=T.get("text-rotation-alignment")==="map",Ie=T.get("text-pitch-alignment")==="map",Ee=T.get("icon-text-fit")!=="none",Le=T.get("symbol-z-order")==="viewport-y",Ke=we&&(be||!_.hasIconData()||ve),He=be&&(we||!_.hasTextData()||de);!_.collisionArrays&&X&&_.deserializeCollisionBoxes(X);const Ye=this.retainedQueryData[_.bucketInstanceId].tileID,Xe=this._getTerrainElevationFunc(Ye),At=this.transform.getFastPathSimpleProjectionMatrix(Ye),Mt=(dt,Ot,lr)=>{var Br,rn;if(c[dt.crossTileID])return;if(K)return void(this.placements[dt.crossTileID]=new kd(!1,!1,!1));let Kr=!1,cn=!1,Gr=!0,En=null,hn={box:null,placeable:!1,offscreen:null,occluded:!1},mi={placeable:!1},Ln=null,jn=null,gi=null,ms=0,gs=0,zo=0;Ot.textFeatureIndex?ms=Ot.textFeatureIndex:dt.useRuntimeCollisionCircles&&(ms=dt.featureIndex),Ot.verticalTextFeatureIndex&&(gs=Ot.verticalTextFeatureIndex);const sa=Ot.textBox;if(sa){const la=Vr=>{let Qr=u.az.horizontal;if(_.allowVerticalPlacement&&!Vr&&this.prevPlacement){const Yn=this.prevPlacement.placedOrientations[dt.crossTileID];Yn&&(this.placedOrientations[dt.crossTileID]=Yn,Qr=Yn,this.markUsedOrientation(_,Qr,dt))}return Qr},Ba=(Vr,Qr)=>{if(_.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Ot.verticalTextBox){for(const Yn of _.writingModes)if(Yn===u.az.vertical?(hn=Qr(),mi=hn):hn=Vr(),hn&&hn.placeable)break}else hn=Vr()},uo=dt.textAnchorOffsetStartIndex,co=dt.textAnchorOffsetEndIndex;if(co===uo){const Vr=(Qr,Yn)=>{const ti=this.collisionIndex.placeCollisionBox(Qr,ye,V,Ye,R,Ie,Pe,A,oe.predicate,Xe,void 0,At);return ti&&ti.placeable&&(this.markUsedOrientation(_,Yn,dt),this.placedOrientations[dt.crossTileID]=Yn),ti};Ba((()=>Vr(sa,u.az.horizontal)),(()=>{const Qr=Ot.verticalTextBox;return _.allowVerticalPlacement&&dt.numVerticalGlyphVertices>0&&Qr?Vr(Qr,u.az.vertical):{box:null,offscreen:null}})),la(hn&&hn.placeable)}else{let Vr=u.aP[(rn=(Br=this.prevPlacement)===null||Br===void 0?void 0:Br.variableOffsets[dt.crossTileID])===null||rn===void 0?void 0:rn.anchor];const Qr=(ti,Kf,Qf)=>{const Al=ti.x2-ti.x1,Dm=ti.y2-ti.y1,Ml=dt.textBoxScale,Jf=Ee&&Ce==="never"?Kf:null;let Us=null,Vs=ye==="never"?1:2,Ro="never";Vr&&Vs++;for(let ed=0;ed<Vs;ed++){for(let jh=uo;jh<co;jh++){const Bh=_.textAnchorOffsets.get(jh);if(Vr&&Bh.textAnchor!==Vr)continue;const Nh=this.attemptAnchorPlacement(Bh,ti,Al,Dm,Ml,Pe,Ie,V,Ye,R,oe,Ro,dt,_,Qf,A,O,Jf,Xe);if(Nh&&(Us=Nh.placedGlyphBoxes,Us&&Us.placeable))return Kr=!0,En=Nh.shift,Us}Vr?Vr=null:Ro=ye}return p&&!Us&&(Us={box:this.collisionIndex.placeCollisionBox(sa,"always",V,Ye,R,Ie,Pe,A,oe.predicate,Xe,void 0,At).box,offscreen:!1,placeable:!1,occluded:!1}),Us};Ba((()=>Qr(sa,Ot.iconBox,u.az.horizontal)),(()=>{const ti=Ot.verticalTextBox;return _.allowVerticalPlacement&&(!hn||!hn.placeable)&&dt.numVerticalGlyphVertices>0&&ti?Qr(ti,Ot.verticalIconBox,u.az.vertical):{box:null,occluded:!0,offscreen:null}})),hn&&(Kr=hn.placeable,Gr=hn.offscreen);const Yn=la(hn&&hn.placeable);if(!Kr&&this.prevPlacement){const ti=this.prevPlacement.variableOffsets[dt.crossTileID];ti&&(this.variableOffsets[dt.crossTileID]=ti,this.markUsedJustification(_,ti.anchor,dt,Yn))}}}if(Ln=hn,Kr=Ln&&Ln.placeable,Gr=Ln&&Ln.offscreen,dt.useRuntimeCollisionCircles&&dt.centerJustifiedTextSymbolIndex>=0){const la=_.text.placedSymbolArray.get(dt.centerJustifiedTextSymbolIndex),Ba=u.aA(_.textSizeData,re,la),uo=T.get("text-padding");jn=this.collisionIndex.placeCollisionCircles(ye,la,_.lineVertexArray,_.glyphOffsetArray,Ba,R,U,p,Ie,oe.predicate,dt.collisionCircleDiameter,uo,A,Xe),jn.circles.length&&jn.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),Kr=we||jn.circles.length>0&&!jn.collisionDetected,Gr=Gr&&jn.offscreen}if(Ot.iconFeatureIndex&&(zo=Ot.iconFeatureIndex),Ot.iconBox){const la=Ba=>this.collisionIndex.placeCollisionBox(Ba,Ce,V,Ye,R,Ie,Pe,O,oe.predicate,Xe,Ee&&En?En:void 0,At);mi&&mi.placeable&&Ot.verticalIconBox?(gi=la(Ot.verticalIconBox),cn=gi.placeable):(gi=la(Ot.iconBox),cn=gi.placeable),Gr=Gr&&gi.offscreen}const vu=de||dt.numHorizontalGlyphVertices===0&&dt.numVerticalGlyphVertices===0,bc=ve||dt.numIconVertices===0;vu||bc?bc?vu||(cn=cn&&Kr):Kr=cn&&Kr:cn=Kr=cn&&Kr;const ko=cn&&gi.placeable;if(Kr&&Ln.placeable&&this.collisionIndex.insertCollisionBox(Ln.box,ye,T.get("text-ignore-placement"),_.bucketInstanceId,mi&&mi.placeable&&gs?gs:ms,oe.ID),ko&&this.collisionIndex.insertCollisionBox(gi.box,Ce,T.get("icon-ignore-placement"),_.bucketInstanceId,zo,oe.ID),jn&&Kr&&this.collisionIndex.insertCollisionCircles(jn.circles,ye,T.get("text-ignore-placement"),_.bucketInstanceId,ms,oe.ID),p&&this.storeCollisionData(_.bucketInstanceId,lr,Ot,Ln,gi,jn),dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[dt.crossTileID]=new kd((Kr||Ke)&&!Ln?.occluded,(cn||He)&&!gi?.occluded,Gr||_.justReloaded),c[dt.crossTileID]=!0};if(Le){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const dt=_.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Ot=dt.length-1;Ot>=0;--Ot){const lr=dt[Ot];Mt(_.symbolInstances.get(lr),_.collisionArrays[lr],lr)}}else for(let dt=n.symbolInstanceStart;dt<n.symbolInstanceEnd;dt++)Mt(_.symbolInstances.get(dt),_.collisionArrays[dt],dt);_.justReloaded=!1}storeCollisionData(n,c,p,_,T,A){if(p.textBox||p.iconBox){let O,R;this.collisionBoxArrays.has(n)?O=this.collisionBoxArrays.get(n):(O=new Map,this.collisionBoxArrays.set(n,O)),O.has(c)?R=O.get(c):(R={text:null,icon:null},O.set(c,R)),p.textBox&&(R.text=_.box),p.iconBox&&(R.icon=T.box)}if(A){let O=this.collisionCircleArrays[n];O===void 0&&(O=this.collisionCircleArrays[n]=[]);for(let R=0;R<A.circles.length;R+=4)O.push(A.circles[R+0]-Ir),O.push(A.circles[R+1]-Ir),O.push(A.circles[R+2]),O.push(A.collisionDetected?1:0)}}markUsedJustification(n,c,p,_){let T;T=_===u.az.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.aR(c)];const A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const O of A)O>=0&&(n.text.placedSymbolArray.get(O).crossTileID=T>=0&&O!==T?0:p.crossTileID)}markUsedOrientation(n,c,p){const _=c===u.az.horizontal||c===u.az.horizontalOnly?c:0,T=c===u.az.vertical?c:0,A=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const O of A)n.text.placedSymbolArray.get(O).placedOrientation=_;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let p=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const _=c?c.symbolFadeChange(n):1,T=c?c.opacities:{},A=c?c.variableOffsets:{},O=c?c.placedOrientations:{};for(const R in this.placements){const U=this.placements[R],V=T[R];V?(this.opacities[R]=new Wl(V,_,U.text,U.icon),p=p||U.text!==V.text.placed||U.icon!==V.icon.placed):(this.opacities[R]=new Wl(null,_,U.text,U.icon,U.skipFade),p=p||U.text||U.icon)}for(const R in T){const U=T[R];if(!this.opacities[R]){const V=new Wl(U,_,!1,!1);V.isHidden()||(this.opacities[R]=V,p=p||U.text.placed||U.icon.placed)}}for(const R in A)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=A[R]);for(const R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:n)}updateLayerOpacities(n,c){const p={};for(const _ of c){const T=_.getBucket(n);T&&_.latestFeatureIndex&&n.id===T.layerIds[0]&&this.updateBucketOpacities(T,_.tileID,p,_.collisionBoxArray)}}updateBucketOpacities(n,c,p,_){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const T=n.layers[0],A=T.layout,O=new Wl(null,0,!1,!1,!0),R=A.get("text-allow-overlap"),U=A.get("icon-allow-overlap"),V=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),K=A.get("text-rotation-alignment")==="map",X=A.get("text-pitch-alignment")==="map",re=A.get("icon-text-fit")!=="none",oe=new Wl(null,0,R&&(U||!n.hasIconData()||A.get("icon-optional")),U&&(R||!n.hasTextData()||A.get("text-optional")),!0);!n.collisionArrays&&_&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(_);const de=(ye,we,Ce)=>{for(let be=0;be<we/4;be++)ye.opacityVertexArray.emplaceBack(Ce);ye.hasVisibleVertices=ye.hasVisibleVertices||Ce!==Xl},ve=this.collisionBoxArrays.get(n.bucketInstanceId);for(let ye=0;ye<n.symbolInstances.length;ye++){const we=n.symbolInstances.get(ye),{numHorizontalGlyphVertices:Ce,numVerticalGlyphVertices:be,crossTileID:Pe}=we;let Ie=this.opacities[Pe];p[Pe]?Ie=O:Ie||(Ie=oe,this.opacities[Pe]=Ie),p[Pe]=!0;const Ee=we.numIconVertices>0,Le=this.placedOrientations[we.crossTileID],Ke=Le===u.az.vertical,He=Le===u.az.horizontal||Le===u.az.horizontalOnly;if(Ce>0||be>0){const Xe=Ef(Ie.text);de(n.text,Ce,Ke?Xl:Xe),de(n.text,be,He?Xl:Xe);const At=Ie.text.isHidden();[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach((Ot=>{Ot>=0&&(n.text.placedSymbolArray.get(Ot).hidden=At||Ke?1:0)})),we.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(we.verticalPlacedTextSymbolIndex).hidden=At||He?1:0);const Mt=this.variableOffsets[we.crossTileID];Mt&&this.markUsedJustification(n,Mt.anchor,we,Le);const dt=this.placedOrientations[we.crossTileID];dt&&(this.markUsedJustification(n,"left",we,dt),this.markUsedOrientation(n,dt,we))}if(Ee){const Xe=Ef(Ie.icon),At=!(re&&we.verticalPlacedIconSymbolIndex&&Ke);we.placedIconSymbolIndex>=0&&(de(n.icon,we.numIconVertices,At?Xe:Xl),n.icon.placedSymbolArray.get(we.placedIconSymbolIndex).hidden=Ie.icon.isHidden()),we.verticalPlacedIconSymbolIndex>=0&&(de(n.icon,we.numVerticalIconVertices,At?Xl:Xe),n.icon.placedSymbolArray.get(we.verticalPlacedIconSymbolIndex).hidden=Ie.icon.isHidden())}const Ye=ve&&ve.has(ye)?ve.get(ye):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Xe=n.collisionArrays[ye];if(Xe){let At=new u.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let Mt=!0;if(V){const dt=this.variableOffsets[Pe];dt?(At=Ui(dt.anchor,dt.width,dt.height,dt.textOffset,dt.textBoxScale),K&&At._rotate(X?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Mt=!1}if(Xe.textBox||Xe.verticalTextBox){let dt;Xe.textBox&&(dt=Ke),Xe.verticalTextBox&&(dt=He),Tf(n.textCollisionBox.collisionVertexArray,Ie.text.placed,!Mt||dt,Ye.text,At.x,At.y)}}if(Xe.iconBox||Xe.verticalIconBox){const Mt=!!(!He&&Xe.verticalIconBox);let dt;Xe.iconBox&&(dt=Mt),Xe.verticalIconBox&&(dt=!Mt),Tf(n.iconCollisionBox.collisionVertexArray,Ie.icon.placed,dt,Ye.icon,re?At.x:0,re?At.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,c){const p=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function Tf(w,n,c,p,_,T){p&&p.length!==0||(p=[0,0,0,0]);const A=p[0]-Ir,O=p[1]-Ir,R=p[2]-Ir,U=p[3]-Ir;w.emplaceBack(n?1:0,c?1:0,_||0,T||0,A,O),w.emplaceBack(n?1:0,c?1:0,_||0,T||0,R,O),w.emplaceBack(n?1:0,c?1:0,_||0,T||0,R,U),w.emplaceBack(n?1:0,c?1:0,_||0,T||0,A,U)}const rh=Math.pow(2,25),sl=Math.pow(2,24),dm=Math.pow(2,17),Ju=Math.pow(2,16),Ps=Math.pow(2,9),pm=Math.pow(2,8),Yl=Math.pow(2,1);function Ef(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const n=w.placed?1:0,c=Math.floor(127*w.opacity);return c*rh+n*sl+c*dm+n*Ju+c*Ps+n*pm+c*Yl+n}const Xl=0;class ll{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,c,p,_,T){const A=this._bucketParts;for(;this._currentTileIndex<n.length;)if(c.getBucketParts(A,_,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,A.sort(((O,R)=>O.sortKey-R.sortKey)));this._currentPartIndex<A.length;)if(c.placeLayerBucketPart(A[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,T())return!0;return!1}}class ec{constructor(n,c,p,_,T,A,O,R){this.placement=new th(n,c,A,O,R),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(n,c,p){const _=H(),T=()=>!this._forceFullPlacement&&H()-_>2;for(;this._currentPlacementIndex>=0;){const A=c[n[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(A.type==="symbol"&&(!A.minzoom||A.minzoom<=O)&&(!A.maxzoom||A.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new ll(A)),this._inProgressLayer.continuePlacement(p[A.source],this.placement,this._showCollisionBoxes,A,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const gr=512/u.a5/2;class Eo{constructor(n,c,p){this.tileID=n,this.bucketInstanceId=p,this._symbolsByKey={};const _=new Map;for(let T=0;T<c.length;T++){const A=c.get(T),O=A.key,R=_.get(O);R?R.push(A):_.set(O,[A])}for(const[T,A]of _){const O={positions:A.map((R=>({x:Math.floor(R.anchorX*gr),y:Math.floor(R.anchorY*gr)}))),crossTileIDs:A.map((R=>R.crossTileID))};if(O.positions.length>128){const R=new u.aT(O.positions.length,16,Uint16Array);for(const{x:U,y:V}of O.positions)R.add(U,V);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[T]=O}}getScaledCoordinates(n,c){const{x:p,y:_,z:T}=this.tileID.canonical,{x:A,y:O,z:R}=c.canonical,U=gr/Math.pow(2,R-T),V=(O*u.a5+n.anchorY)*U,K=_*u.a5*gr;return{x:Math.floor((A*u.a5+n.anchorX)*U-p*u.a5*gr),y:Math.floor(V-K)}}findMatches(n,c,p){const _=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let T=0;T<n.length;T++){const A=n.get(T);if(A.crossTileID)continue;const O=this._symbolsByKey[A.key];if(!O)continue;const R=this.getScaledCoordinates(A,c);if(O.index){const U=O.index.range(R.x-_,R.y-_,R.x+_,R.y+_).sort();for(const V of U){const K=O.crossTileIDs[V];if(!p[K]){p[K]=!0,A.crossTileID=K;break}}}else if(O.positions)for(let U=0;U<O.positions.length;U++){const V=O.positions[U],K=O.crossTileIDs[U];if(Math.abs(V.x-R.x)<=_&&Math.abs(V.y-R.y)<=_&&!p[K]){p[K]=!0,A.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:n})=>n))}}class Rd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class nh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const c=Math.round((n-this.lng)/360);if(c!==0)for(const p in this.indexes){const _=this.indexes[p],T={};for(const A in _){const O=_[A];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+c),T[O.tileID.key]=O}this.indexes[p]=T}this.lng=n}addBucket(n,c,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let T=0;T<c.symbolInstances.length;T++)c.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const _=this.usedCrossTileIDs[n.overscaledZ];for(const T in this.indexes){const A=this.indexes[T];if(Number(T)>n.overscaledZ)for(const O in A){const R=A[O];R.tileID.isChildOf(n)&&R.findMatches(c.symbolInstances,n,_)}else{const O=A[n.scaledTo(Number(T)).key];O&&O.findMatches(c.symbolInstances,n,_)}}for(let T=0;T<c.symbolInstances.length;T++){const A=c.symbolInstances.get(T);A.crossTileID||(A.crossTileID=p.generate(),_[A.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Eo(n,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(n,c){for(const p of c.getCrossTileIDsLists())for(const _ of p)delete this.usedCrossTileIDs[n][_]}removeStaleBuckets(n){let c=!1;for(const p in this.indexes){const _=this.indexes[p];for(const T in _)n[_[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,_[T]),delete _[T],c=!0)}return c}}class si{constructor(){this.layerIndexes={},this.crossTileIDs=new Rd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,c,p){let _=this.layerIndexes[n.id];_===void 0&&(_=this.layerIndexes[n.id]=new nh);let T=!1;const A={};_.handleWrapJump(p);for(const O of c){const R=O.getBucket(n);R&&n.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(O.tileID,R,this.crossTileIDs)&&(T=!0),A[R.bucketInstanceId]=!0)}return _.removeStaleBuckets(A)&&(T=!0),T}pruneUnusedLayers(n){const c={};n.forEach((p=>{c[p]=!0}));for(const p in this.layerIndexes)c[p]||delete this.layerIndexes[p]}}var Hn="void main() {fragColor=vec4(1.0);}";const pn={prelude:tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:tr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:tr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:tr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tr(Hn,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:tr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:tr(Hn,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:tr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:tr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:tr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:tr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:tr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:tr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:tr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:tr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function tr(w,n){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/in ([\w]+) ([\w]+)/g),_=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=T?T.concat(_):_,O={};return{fragmentSource:w=w.replace(c,((R,U,V,K,X)=>(O[X]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_${X}
in ${V} ${K} ${X};
#else
uniform ${V} ${K} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${V} ${K} ${X} = u_${X};
#endif
`))),vertexSource:n=n.replace(c,((R,U,V,K,X)=>{const re=K==="float"?"vec2":"vec4",oe=X.match(/color/)?"color":re;return O[X]?U==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
in ${V} ${re} a_${X};
out ${V} ${K} ${X};
#else
uniform ${V} ${K} u_${X};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${V} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${oe}(a_${X}, u_${X}_t);
#else
    ${V} ${K} ${X} = u_${X};
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
in ${V} ${re} a_${X};
#else
uniform ${V} ${K} u_${X};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${V} ${K} ${X} = a_${X};
#else
    ${V} ${K} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${V} ${K} ${X} = unpack_mix_${oe}(a_${X}, u_${X}_t);
#else
    ${V} ${K} ${X} = u_${X};
#endif
`})),staticAttributes:p,staticUniforms:A}}class Yr{constructor(n,c,p){this.vertexBuffer=n,this.indexBuffer=c,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ja=u.aU([{name:"a_pos",type:"Int16",components:2}]);const zn="#define PROJECTION_MERCATOR",Vi="mercator";class li{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Vi}get shaderDefine(){return zn}get shaderPreludeCode(){return pn.projectionMercator}get vertexShaderPreludeCode(){return pn.projectionMercator.vertexSource}get subdivisionGranularity(){return u.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,c,p,_,T){if(this._cachedMesh)return this._cachedMesh;const A=new u.aW;A.emplaceBack(0,0),A.emplaceBack(u.a5,0),A.emplaceBack(0,u.a5),A.emplaceBack(u.a5,u.a5);const O=n.createVertexBuffer(A,Ja.members),R=u.aX.simpleSegment(0,0,4,2),U=new u.aY;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3);const V=n.createIndexBuffer(U);return this._cachedMesh=new Yr(O,V,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class Pa{constructor(n=0,c=0,p=0,_=0){if(isNaN(n)||n<0||isNaN(c)||c<0||isNaN(p)||p<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=c,this.left=p,this.right=_}interpolate(n,c,p){return c.top!=null&&n.top!=null&&(this.top=u.G.number(n.top,c.top,p)),c.bottom!=null&&n.bottom!=null&&(this.bottom=u.G.number(n.bottom,c.bottom,p)),c.left!=null&&n.left!=null&&(this.left=u.G.number(n.left,c.left,p)),c.right!=null&&n.right!=null&&(this.right=u.G.number(n.right,c.right,p)),this}getCenter(n,c){const p=u.an((this.left+n-this.right)/2,0,n),_=u.an((this.top+c-this.bottom)/2,0,c);return new u.P(p,_)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Pa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ko(w,n){if(!w.renderWorldCopies||w.lngRange)return;const c=n.lng-w.center.lng;n.lng+=c>180?-360:c<-180?360:0}function mn(w){return Math.max(0,Math.floor(w))}class ul{constructor(n,c){var p;this.applyConstrain=(_,T)=>this._constrainOverride!==null?this._constrainOverride(_,T):this._callbacks.defaultConstrain(_,T),this._callbacks=n,this._tileSize=512,this._renderWorldCopies=c?.renderWorldCopies===void 0||!!c?.renderWorldCopies,this._minZoom=c?.minZoom||0,this._maxZoom=c?.maxZoom||22,this._minPitch=c?.minPitch==null?0:c?.minPitch,this._maxPitch=c?.maxPitch==null?60:c?.maxPitch,this._constrainOverride=(p=c?.constrainOverride)!==null&&p!==void 0?p:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new u.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=mn(this._zoom),this._scale=u.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Pa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,c,p){this._constrainOverride=n.constrainOverride,this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=mn(this._zoom),this._scale=u.aq(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new Pa(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!p&&n.autoCalculateNearFarZ,c&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get constrainOverride(){return this._constrainOverride}setConstrainOverride(n){n===void 0&&(n=null),this._constrainOverride!==n&&(this._constrainOverride=n,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const c=u.W(n,-180,180)*Math.PI/180;var p,_,T,A,O,R,U,V,K;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=C(),p=this._rotationMatrix,T=-this._bearingInRadians,A=(_=this._rotationMatrix)[0],O=_[1],R=_[2],U=_[3],V=Math.sin(T),K=Math.cos(T),p[0]=A*K+R*V,p[1]=O*K+U*V,p[2]=A*-V+R*K,p[3]=O*-V+U*K)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const c=u.an(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const c=n/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return u.aZ(this._fovInRadians)}setFov(n){n=u.an(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=u.ap(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const c=this.applyConstrain(this._center,n).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=u.aq(c),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,c){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,c,p){this._unmodified=!1,this._edgeInsets.interpolate(n,c,p),this.constrainInternal(),this._calcMatrices()}resize(n,c,p=!0){this._width=n,this._height=c,p&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Lr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-u.ao,u.ao])}getCameraQueryGeometry(n,c){if(c.length===1)return[c[0],n];{const{minX:p,minY:_,maxX:T,maxY:A}=u.aa.fromPoints(c).extend(n);return[new u.P(p,_),new u.P(T,_),new u.P(T,A),new u.P(p,A),new u.P(p,_)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:c,zoom:p}=this.applyConstrain(this.center,this.zoom);this.setCenter(c),this.setZoom(p),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=u.ar(new Float64Array(16));u.Q(n,n,[this._width/2,-this._height/2,1]),u.O(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=u.ar(new Float64Array(16)),u.Q(n,n,[1,-1,1]),u.O(n,n,[-1,-1,0]),u.Q(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,c,p,_){const T=p!==void 0?p:this.bearing,A=_=_!==void 0?_:this.pitch,{distanceToCenter:O,clampedElevation:R}=this._distanceToCenterFromAltElevationPitch(c,this.elevation,A),{x:U,y:V}=Bt(A,T),K=u.a9.fromLngLat(n,c);let X,re,oe=u.a_(1,K.y),de=0;do{if(de+=1,de>10)break;re=O/oe,X=new u.a9(K.x+U*re,K.y+V*re),oe=1/X.meterInMercatorCoordinateUnits()}while(Math.abs(O-re*oe)>1e-12);return{center:X.toLngLat(),elevation:R,zoom:u.at(this.height/2/Math.tan(this.fovInRadians/2)/re/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const c=1/this.worldSize,p=u.as(1,this.center.lat)*this.worldSize,_=u.a9.fromLngLat(this.center,this.elevation),T=_.x/c,A=_.y/c,O=_.z/c,R=this.pitch,U=this.bearing,{x:V,y:K,z:X}=Bt(R,U),re=this.cameraToCenterDistance,oe=T+re*-V,de=A+re*-K,ve=O+re*X,{distanceToCenter:ye,clampedElevation:we}=this._distanceToCenterFromAltElevationPitch(ve/p,n,R),Ce=ye*p,be=new u.a9((oe+V*Ce)*c,(de+K*Ce)*c,0).toLngLat(),Pe=u.as(1,be.lat),Ie=u.at(this.height/2/Math.tan(this.fovInRadians/2)/ye/Pe/this.tileSize);this._elevation=we,this._center=be,this.setZoom(Ie)}_distanceToCenterFromAltElevationPitch(n,c,p){const _=-Math.cos(u.ap(p)),T=n-c;let A,O=c;return _*T>=0||Math.abs(_)<.1?(A=1e4,O=n+A*_):A=-T/_,{distanceToCenter:A,clampedElevation:O}}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=u.as(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const c=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/c,n.canonical.y/c,1/c/u.a5,1/c/u.a5]}}class Ca{constructor(n,c){this.min=n,this.max=c,this.center=u.a$([],u.b0([],this.min,this.max),.5)}quadrant(n){const c=[n%2==0,n<2],p=u.b1(this.min),_=u.b1(this.max);for(let T=0;T<c.length;T++)p[T]=c[T]?this.min[T]:this.center[T],_[T]=c[T]?this.center[T]:this.max[T];return _[2]=this.max[2],new Ca(p,_)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let c=!0;for(let p=0;p<n.planes.length;p++){const _=this.intersectsPlane(n.planes[p]);if(_===0)return 0;_===1&&(c=!1)}return c?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let c=n[3],p=n[3];for(let _=0;_<3;_++)n[_]>0?(c+=n[_]*this.min[_],p+=n[_]*this.max[_]):(p+=n[_]*this.min[_],c+=n[_]*this.max[_]);return c>=0?2:p<0?0:1}}class Kl{distanceToTile2d(n,c,p,_){const T=_.distanceX([n,c]),A=_.distanceY([n,c]);return Math.hypot(T,A)}getWrap(n,c,p){return p}getTileBoundingVolume(n,c,p,_){var T,A;let O=0,R=0;if(_?.terrain){const V=new u.a2(n.z,c,n.z,n.x,n.y),K=_.terrain.getMinMaxElevation(V);O=(T=K.minElevation)!==null&&T!==void 0?T:Math.min(0,p),R=(A=K.maxElevation)!==null&&A!==void 0?A:Math.max(0,p)}const U=1<<n.z;return new Ca([c+n.x/U,n.y/U,O],[c+(n.x+1)/U,(n.y+1)/U,R])}allowVariableZoom(n,c){const p=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,_=u.an(78.5-p/2,0,60);return!!c.terrain||n.pitch>_}allowWorldCopies(){return!0}prepareNextFrame(){}}class qi{constructor(n,c,p){this.points=n,this.planes=c,this.aabb=p}static fromInvProjectionMatrix(n,c=1,p=0,_,T){const A=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],O=Math.pow(2,p),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((X=>(function(re,oe,de,ve){const ye=u.aH([],re,oe),we=1/ye[3]/de*ve;return u.b6(ye,ye,[we,we,1/ye[3],we])})(X,n,c,O)));_&&(function(X,re,oe,de){const ve=de?4:0,ye=de?0:4;let we=0;const Ce=[],be=[];for(let Ee=0;Ee<4;Ee++){const Le=u.b2([],X[Ee+ye],X[Ee+ve]),Ke=u.b7(Le);u.a$(Le,Le,1/Ke),Ce.push(Ke),be.push(Le)}for(let Ee=0;Ee<4;Ee++){const Le=u.b8(X[Ee+ve],be[Ee],oe);we=Le!==null&&Le>=0?Math.max(we,Le):Math.max(we,Ce[Ee])}const Pe=(function(Ee,Le){const Ke=u.b2([],Ee[Le[0]],Ee[Le[1]]),He=u.b2([],Ee[Le[2]],Ee[Le[1]]),Ye=[0,0,0,0];return u.b3(Ye,u.b4([],Ke,He)),Ye[3]=-u.b5(Ye,Ee[Le[0]]),Ye})(X,re),Ie=(function(Ee,Le){const Ke=u.b9(Ee),He=u.ba([],Ee,1/Ke),Ye=u.b2([],Le,u.a$([],He,u.b5(Le,He))),Xe=u.b9(Ye);if(Xe>0){const At=Math.sqrt(1-He[3]*He[3]),Mt=u.a$([],He,-He[3]),dt=u.b0([],Mt,u.a$([],Ye,At/Xe));return u.bb(Le,dt)}return null})(oe,Pe);if(Ie!==null){const Ee=Ie/u.b5(be[0],Pe);we=Math.min(we,Ee)}for(let Ee=0;Ee<4;Ee++){const Le=Math.min(we,Ce[Ee]);X[Ee+ye]=[X[Ee+ve][0]+be[Ee][0]*Le,X[Ee+ve][1]+be[Ee][1]*Le,X[Ee+ve][2]+be[Ee][2]*Le,1]}})(R,A[0],_,T);const U=A.map((X=>{const re=u.b2([],R[X[0]],R[X[1]]),oe=u.b2([],R[X[2]],R[X[1]]),de=u.b3([],u.b4([],re,oe)),ve=-u.b5(de,R[X[1]]);return de.concat(ve)})),V=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],K=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const X of R)for(let re=0;re<3;re++)V[re]=Math.min(V[re],X[re]),K[re]=Math.max(K[re],X[re]);return new qi(R,U,new Ca(V,K))}}class ei{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,c,p){return this._helper.interpolatePadding(n,c,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,c,p=!0){this._helper.resize(n,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,c){this._helper.overrideNearFarZ(n,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,c){}constructor(n){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(c,p)=>{p=u.an(+p,this.minZoom,this.maxZoom);const _={center:new u.V(c.lng,c.lat),zoom:p};let T=this._helper._lngRange;if(!this._helper._renderWorldCopies&&T===null){const be=179.9999999999;T=[-be,be]}const A=this.tileSize*u.aq(_.zoom);let O=0,R=A,U=0,V=A,K=0,X=0;const{x:re,y:oe}=this.size;if(this._helper._latRange){const be=this._helper._latRange;O=u.X(be[1])*A,R=u.X(be[0])*A,R-O<oe&&(K=oe/(R-O))}T&&(U=u.W(u.Y(T[0])*A,0,A),V=u.W(u.Y(T[1])*A,0,A),V<U&&(V+=A),V-U<re&&(X=re/(V-U)));const{x:de,y:ve}=Ne(A,c);let ye,we;const Ce=Math.max(X||0,K||0);if(Ce){const be=new u.P(X?(V+U)/2:de,K?(R+O)/2:ve);return _.center=Ge(A,be).wrap(),_.zoom+=u.at(Ce),_}if(this._helper._latRange){const be=oe/2;ve-be<O&&(we=O+be),ve+be>R&&(we=R-be)}if(T){const be=(U+V)/2;let Pe=de;this._helper._renderWorldCopies&&(Pe=u.W(de,be-A/2,be+A/2));const Ie=re/2;Pe-Ie<U&&(ye=U+Ie),Pe+Ie>V&&(ye=V-Ie)}if(ye!==void 0||we!==void 0){const be=new u.P(ye??de,we??ve);_.center=Ge(A,be).wrap()}return _},this.applyConstrain=(c,p)=>this._helper.applyConstrain(c,p),this._helper=new ul({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,p)=>this.defaultConstrain(c,p)},n),this._coveringTilesDetailsProvider=new Kl}clone(){const n=new ei;return n.apply(this,!1),n}apply(n,c,p){this._helper.apply(n,c,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const c=[new u.bc(0,n)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new u.P(0,0)),_=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,this._helper._height)),A=this.screenPointToMercatorCoordinate(new u.P(0,this._helper._height)),O=Math.floor(Math.min(p.x,_.x,T.x,A.x)),R=Math.floor(Math.max(p.x,_.x,T.x,A.x)),U=1;for(let V=O-U;V<=R+U;V++)V!==0&&c.push(new u.bc(V,n))}return c}getCameraFrustum(){return qi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const c=this.screenPointToLocation(this.centerPoint,n),p=n?n.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(n,c){const p=u.as(this.elevation,this.center.lat),_=this.screenPointToMercatorCoordinateAtZ(c,p),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),A=u.a9.fromLngLat(n),O=new u.a9(A.x-(_.x-T.x),A.y-(_.y-T.y));this.setCenter(O?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,c){return c?this.coordinatePoint(u.a9.fromLngLat(n),c.getElevationForLngLat(n,this),this._pixelMatrix3D):this.coordinatePoint(u.a9.fromLngLat(n))}screenPointToLocation(n,c){var p;return(p=this.screenPointToMercatorCoordinate(n,c))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(n,c){if(c){const p=c.pointCoordinate(n);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,c){const p=c||0,_=[n.x,n.y,0,1],T=[n.x,n.y,1,1];u.aH(_,_,this._pixelMatrixInverse),u.aH(T,T,this._pixelMatrixInverse);const A=_[3],O=T[3],R=_[1]/A,U=T[1]/O,V=_[2]/A,K=T[2]/O,X=V===K?0:(p-V)/(K-V);return new u.a9(u.G.number(_[0]/A,T[0]/O,X)/this.worldSize,u.G.number(R,U,X)/this.worldSize,p)}coordinatePoint(n,c=0,p=this._pixelMatrix){const _=[n.x*this.worldSize,n.y*this.worldSize,c,1];return u.aH(_,_,p),new u.P(_[0]/_[3],_[1]/_[3])}getBounds(){const n=Math.max(0,this._helper._height/2-mt(this));return new Lr().extend(this.screenPointToLocation(new u.P(0,n))).extend(this.screenPointToLocation(new u.P(this._helper._width,n))).extend(this.screenPointToLocation(new u.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new u.P(0,this._helper._height)))}isPointOnMapSurface(n,c){return c?c.pointCoordinate(n)!=null:n.y>this.height/2-mt(this)}calculatePosMatrix(n,c=!1,p){var _;const T=(_=n.key)!==null&&_!==void 0?_:u.bd(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),A=c?this._alignedPosMatrixCache:this._posMatrixCache;if(A.has(T)){const U=A.get(T);return p?U.f32:U.f64}const O=nt(n,this.worldSize);u.S(O,c?this._alignedProjMatrix:this._viewProjMatrix,O);const R={f64:O,f32:new Float32Array(O)};return A.set(T,R),p?R.f32:R.f64}calculateFogMatrix(n){const c=n.key,p=this._fogMatrixCacheF32;if(p.has(c))return p.get(c);const _=nt(n,this.worldSize);return u.S(_,this._fogMatrix,_),p.set(c,new Float32Array(_)),p.get(c)}calculateCenterFromCameraLngLatAlt(n,c,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,c,p,_)}_calculateNearFarZIfNeeded(n,c,p){if(!this._helper.autoCalculateNearFarZ)return;const _=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=n-_*this._helper._pixelPerMeter/Math.cos(c),A=_<0?T:n,O=Math.PI/2+this.pitchInRadians,R=u.ap(this.fov)*(Math.abs(Math.cos(u.ap(this.roll)))*this.height+Math.abs(Math.sin(u.ap(this.roll)))*this.width)/this.height*(.5+p.y/this.height),U=Math.sin(R)*A/Math.sin(u.an(Math.PI-O-R,.01,Math.PI-.01)),V=mt(this),K=Math.atan(V/this._helper.cameraToCenterDistance),X=u.ap(.75),re=K>X?2*K*(.5+p.y/(2*V)):X,oe=Math.sin(re)*A/Math.sin(u.an(Math.PI-O-re,.01,Math.PI-.01)),de=Math.min(U,oe);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*de+A),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,c=Ne(this.worldSize,this.center),p=c.x,_=c.y;this._helper._pixelPerMeter=u.as(1,this.center.lat)*this.worldSize;const T=u.ap(Math.min(this.pitch,qe)),A=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T));let O;this._calculateNearFarZIfNeeded(A,T,n),O=new Float64Array(16),u.be(O,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),u.aB(this._invProjMatrix,O),O[8]=2*-n.x/this._helper._width,O[9]=2*n.y/this._helper._height,this._projectionMatrix=u.bf(O),u.Q(O,O,[1,-1,1]),u.O(O,O,[0,0,-this._helper.cameraToCenterDistance]),u.bg(O,O,-this.rollInRadians),u.bh(O,O,this.pitchInRadians),u.bg(O,O,-this.bearingInRadians),u.O(O,O,[-p,-_,0]),this._mercatorMatrix=u.Q([],O,[this.worldSize,this.worldSize,this.worldSize]),u.Q(O,O,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=u.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,O),u.O(O,O,[0,0,-this.elevation]),this._viewProjMatrix=O,this._invViewProjMatrix=u.aB([],O);const R=[0,0,-1,1];u.aH(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),u.be(this._fogMatrix,this.fovInRadians,this.width/this.height,A,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,u.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),u.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),u.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),u.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),u.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),u.O(this._fogMatrix,this._fogMatrix,[-p,-_,0]),u.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),u.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=u.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,O);const U=this._helper._width%2/2,V=this._helper._height%2/2,K=Math.cos(this.bearingInRadians),X=Math.sin(-this.bearingInRadians),re=p-Math.round(p)+K*U+X*V,oe=_-Math.round(_)+K*V+X*U,de=new Float64Array(O);if(u.O(de,de,[re>.5?re-1:re,oe>.5?oe-1:oe,0]),this._alignedProjMatrix=de,O=u.aB(new Float64Array(16),this._pixelMatrix),!O)throw new Error("failed to invert matrix");this._pixelMatrixInverse=O,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new u.P(0,0)),c=[n.x*this.worldSize,n.y*this.worldSize,0,1];return u.aH(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=u.as(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,c){const p=u.a9.fromLngLat(n),_=[p.x*this.worldSize,p.y*this.worldSize,c,1];return u.aH(_,_,this._viewProjMatrix),_[2]/_[3]}getProjectionData(n){const{overscaledTileID:c,aligned:p,applyTerrainMatrix:_}=n,T=this._helper.getMercatorTileCoordinates(c),A=c?this.calculatePosMatrix(c,p,!0):null;let O;return O=c&&c.terrainRttPosMatrix32f&&_?c.terrainRttPosMatrix32f:A||u.bi(),{mainMatrix:O,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:O}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,c,p){return 1}transformLightDirection(n){return u.b1(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,c,p,_){const T=this.calculatePosMatrix(p);let A;_?(A=[n,c,_(n,c),1],u.aH(A,A,T)):(A=[n,c,0,1],Qa(A,A,T));const O=A[3];return{point:new u.P(A[0]/O,A[1]/O),signedDistanceFromCamera:O,isOccluded:!1}}populateCache(n){for(const c of n)this.calculatePosMatrix(c)}getMatrixForModel(n,c){const p=u.a9.fromLngLat(n,c),_=p.meterInMercatorCoordinateUnits(),T=u.bj();return u.O(T,T,[p.x,p.y,p.z]),u.bg(T,T,Math.PI),u.bh(T,T,Math.PI/2),u.Q(T,T,[-_,_,_]),T}getProjectionDataForCustomLayer(n=!0){const c=new u.a2(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:n}),_=nt(c,this.worldSize);u.S(_,this._viewProjMatrix,_),p.tileMercatorCoords=[0,0,1,1];const T=[u.a5,u.a5,this.worldSize/this._helper.pixelsPerMeter],A=u.bk();return u.Q(A,_,T),p.fallbackMatrix=A,p.mainMatrix=A,p}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function $i(){u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ih(w){if(w.useSlerp)if(w.k<1){const n=u.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=u.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),p=new Float64Array(4);u.bm(p,n,c,w.k);const _=u.bn(p);w.tr.setRoll(_.roll),w.tr.setPitch(_.pitch),w.tr.setBearing(_.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(u.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(u.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(u.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Ql(w,n,c,p,_){const T=_.padding,A=Ne(_.worldSize,c.getNorthWest()),O=Ne(_.worldSize,c.getNorthEast()),R=Ne(_.worldSize,c.getSouthEast()),U=Ne(_.worldSize,c.getSouthWest()),V=u.ap(-p),K=A.rotate(V),X=O.rotate(V),re=R.rotate(V),oe=U.rotate(V),de=new u.P(Math.max(K.x,X.x,oe.x,re.x),Math.max(K.y,X.y,oe.y,re.y)),ve=new u.P(Math.min(K.x,X.x,oe.x,re.x),Math.min(K.y,X.y,oe.y,re.y)),ye=de.sub(ve),we=(_.width-(T.left+T.right+n.left+n.right))/ye.x,Ce=(_.height-(T.top+T.bottom+n.top+n.bottom))/ye.y;if(Ce<0||we<0)return void $i();const be=Math.min(u.at(_.scale*Math.min(we,Ce)),w.maxZoom),Pe=u.P.convert(w.offset),Ie=new u.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(u.ap(p)),Ee=Pe.add(Ie).mult(_.scale/u.aq(be));return{center:Ge(_.worldSize,A.add(R).div(2).sub(Ee)),zoom:be,bearing:p}}class Jl{get useGlobeControls(){return!1}handlePanInertia(n,c){const p=n.mag(),_=Math.abs(mt(c));return{easingOffset:n.mult(Math.min(.75*_/p,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(n,c){n.bearingDelta&&c.setBearing(c.bearing+n.bearingDelta),n.pitchDelta&&c.setPitch(c.pitch+n.pitchDelta),n.rollDelta&&c.setRoll(c.roll+n.rollDelta),n.zoomDelta&&c.setZoom(c.zoom+n.zoomDelta)}handleMapControlsPan(n,c,p){n.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(p,n.around)}cameraForBoxAndBearing(n,c,p,_,T){return Ql(n,c,p,_,T)}handleJumpToCenterZoom(n,c){n.zoom!==(c.zoom!==void 0?+c.zoom:n.zoom)&&n.setZoom(+c.zoom),c.center!==void 0&&n.setCenter(u.V.convert(c.center))}handleEaseTo(n,c){const p=n.zoom,_=n.padding,T={roll:n.roll,pitch:n.pitch,bearing:n.bearing},A={roll:c.roll===void 0?n.roll:c.roll,pitch:c.pitch===void 0?n.pitch:c.pitch,bearing:c.bearing===void 0?n.bearing:c.bearing},O=c.zoom!==void 0,R=!n.isPaddingEqual(c.padding);let U=!1;const V=O?+c.zoom:n.zoom;let K=n.centerPoint.add(c.offsetAsPoint);const X=n.screenPointToLocation(K),{center:re,zoom:oe}=n.applyConstrain(u.V.convert(c.center||X),V??p);Ko(n,re);const de=Ne(n.worldSize,X),ve=Ne(n.worldSize,re).sub(de),ye=u.aq(oe-p);return U=oe!==p,{easeFunc:we=>{if(U&&n.setZoom(u.G.number(p,oe,we)),u.bo(T,A)||ih({startEulerAngles:T,endEulerAngles:A,tr:n,k:we,useSlerp:T.roll!=A.roll}),R&&(n.interpolatePadding(_,c.padding,we),K=n.centerPoint.add(c.offsetAsPoint)),c.around)n.setLocationAtPoint(c.around,c.aroundPoint);else{const Ce=u.aq(n.zoom-p),be=oe>p?Math.min(2,ye):Math.max(.5,ye),Pe=Math.pow(be,1-we),Ie=Ge(n.worldSize,de.add(ve.mult(we*Pe)).mult(Ce));n.setLocationAtPoint(n.renderWorldCopies?Ie.wrap():Ie,K)}},isZooming:U,elevationCenter:re}}handleFlyTo(n,c){const p=c.zoom!==void 0,_=n.zoom,T=n.applyConstrain(u.V.convert(c.center||c.locationAtOffset),p?+c.zoom:_),A=T.center,O=T.zoom;Ko(n,A);const R=Ne(n.worldSize,c.locationAtOffset),U=Ne(n.worldSize,A).sub(R),V=U.mag(),K=u.aq(O-_);let X;if(c.minZoom!==void 0){const re=Math.min(+c.minZoom,_,O),oe=n.applyConstrain(A,re).zoom;X=u.aq(oe-_)}return{easeFunc:(re,oe,de,ve)=>{n.setZoom(re===1?O:_+u.at(oe));const ye=re===1?A:Ge(n.worldSize,R.add(U.mult(de)).mult(oe));n.setLocationAtPoint(n.renderWorldCopies?ye.wrap():ye,ve)},scaleOfZoom:K,targetCenter:A,scaleOfMinZoom:X,pixelPathLength:V}}}class $r{constructor(n,c,p){this.blendFunction=n,this.blendColor=c,this.mask=p}}$r.Replace=[1,0],$r.disabled=new $r($r.Replace,u.bp.transparent,[!1,!1,!1,!1]),$r.unblended=new $r($r.Replace,u.bp.transparent,[!0,!0,!0,!0]),$r.alphaBlended=new $r([1,771],u.bp.transparent,[!0,!0,!0,!0]);const cl=2305;class br{constructor(n,c,p){this.enable=n,this.mode=c,this.frontFace=p}}br.disabled=new br(!1,1029,cl),br.backCCW=new br(!0,1029,cl),br.frontCCW=new br(!0,1028,cl);class dr{constructor(n,c,p){this.func=n,this.mask=c,this.range=p}}dr.ReadOnly=!1,dr.ReadWrite=!0,dr.disabled=new dr(519,dr.ReadOnly,[0,1]);const eu=7680;class Er{constructor(n,c,p,_,T,A){this.test=n,this.ref=c,this.mask=p,this.fail=_,this.depthFail=T,this.pass=A}}Er.disabled=new Er({func:519,mask:0},0,0,eu,eu,eu);const ah=new WeakMap;function eo(w){var n;if(ah.has(w))return ah.get(w);{const c=(n=w.getParameter(w.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return ah.set(w,c),c}}class hl{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const c=n.context,p=c.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const _=new u.aW;_.emplaceBack(-1,-1),_.emplaceBack(2,-1),_.emplaceBack(-1,2);const T=new u.aY;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Yr(c.createVertexBuffer(_,Ja.members),c.createIndexBuffer(T),u.aX.simpleSegment(0,0,_.length,T.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(p.TEXTURE1);const A=p.createTexture();p.bindTexture(p.TEXTURE_2D,A),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(A),eo(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,c){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,c=n.gl;n.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,c){const p=this._cachedRenderContext.context,_=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:u.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,_.TRIANGLES,dr.disabled,Er.disabled,$r.unblended,br.disabled,((T,A)=>({u_input:T,u_output_expected:A}))(n,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&eo(_)){_.bindBuffer(_.PIXEL_PACK_BUFFER,this._pbo),_.readBuffer(_.COLOR_ATTACHMENT0),_.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),_.bindBuffer(_.PIXEL_PACK_BUFFER,null);const T=_.fenceSync(_.SYNC_GPU_COMMANDS_COMPLETE,0);_.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&eo(n)){const c=n.clientWaitSync(this._readbackQueue.sync,0,0);if(c===n.WAIT_FAILED)return u.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=hl._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let c=0;return c+=n[0]/256,c+=n[1]/65536,c+=n[2]/16777216,n[3]<127&&(c=-c),c/128}}const fl=u.a5/128;function mm(w,n){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,p=c+(w.generateBorders?2:0),_=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),T=p+1,A=_+1,O=w.generateBorders?-1:0,R=w.generateBorders||w.extendToNorthPole?-1:0,U=c+(w.generateBorders?1:0),V=c+(w.generateBorders||w.extendToSouthPole?1:0),K=T*A,X=p*_*6,re=T*A>65536;if(re&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const oe=re||n==="32bit",de=new Int16Array(2*K);let ve=0;for(let Ce=R;Ce<=V;Ce++)for(let be=O;be<=U;be++){let Pe=be/c*u.a5;be===-1&&(Pe=-fl),be===c+1&&(Pe=u.a5+fl);let Ie=Ce/c*u.a5;Ce===-1&&(Ie=w.extendToNorthPole?u.br:-fl),Ce===c+1&&(Ie=w.extendToSouthPole?u.bs:u.a5+fl),de[ve++]=Pe,de[ve++]=Ie}const ye=oe?new Uint32Array(X):new Uint16Array(X);let we=0;for(let Ce=0;Ce<_;Ce++)for(let be=0;be<p;be++){const Pe=be+1+Ce*T,Ie=be+(Ce+1)*T,Ee=be+1+(Ce+1)*T;ye[we++]=be+Ce*T,ye[we++]=Ie,ye[we++]=Pe,ye[we++]=Pe,ye[we++]=Ie,ye[we++]=Ee}return{vertices:de.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:oe}}const oh=new u.aV({fill:new u.bt(128,2),line:new u.bt(512,0),tile:new u.bt(128,32),stencil:new u.bt(128,1),circle:3});class Ld{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return pn.projectionGlobe}get vertexShaderPreludeCode(){return pn.projectionMercator.vertexSource}get subdivisionGranularity(){return oh}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new hl(n));const c=u.X(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,_=this._errorMeasurement.updateErrorLoop(c,p),T=H();_!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=_,this._errorMeasurementLastChangeTime=T);const A=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=u.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,u.bv(A))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,c,p,_,T){const A=(T==="stencil"?oh.stencil:oh.tile).getGranularityForZoomLevel(c.z);return this._getMesh(n,{granularity:A,generateBorders:p,extendToNorthPole:c.y===0&&_,extendToSouthPole:c.y===(1<<c.z)-1&&_})}_getMesh(n,c){const p=this._getMeshKey(c);if(p in this._tileMeshCache)return this._tileMeshCache[p];const _=(function(T,A){const O=mm(A,"16bit"),R=u.aW.deserialize({arrayBuffer:O.vertices,length:O.vertices.byteLength/2/2}),U=u.aY.deserialize({arrayBuffer:O.indices,length:O.indices.byteLength/2/3});return new Yr(T.createVertexBuffer(R,Ja.members),T.createIndexBuffer(U),u.aX.simpleSegment(0,0,R.length,U.length))})(n,c);return this._tileMeshCache[p]=_,_}recalculate(n){}hasTransition(){const n=H();let c=!1;return c=c||(n-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const py=new u.t({type:new u.D(u.u.projection.type)});class jd extends u.E{constructor(n){super(),this._transitionable=new u.x(py,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.H(0)),this._mercatorProjection=new li,this._verticalPerspectiveProjection=new Ld}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof u.bw){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,c,p,_,T){return this.currentProjection.getMeshFromTileID(n,c,p,_,T)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function Gi(w){const n=tu(w.worldSize,w.center.lat);return 2*Math.PI*n}function Qo(w,n,c,p,_){const T=1/(1<<_),A=n/u.a5*T+p*T,O=u.bz((w/u.a5*T+c*T)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI,U=Math.cos(R),V=new Float64Array(3);return V[0]=Math.sin(O)*U,V[1]=Math.sin(R),V[2]=Math.cos(O)*U,V}function gn(w){return(function(n,c){const p=Math.cos(c),_=new Float64Array(3);return _[0]=Math.sin(n)*p,_[1]=Math.sin(c),_[2]=Math.cos(n)*p,_})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function tu(w,n){return w/(2*Math.PI)/Math.cos(n*Math.PI/180)}function sh(w){const n=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const p=w[0]/c,_=Math.acos(w[2]/c),T=(p>0?_:-_)/Math.PI*180;return new u.V(u.W(T,-180,180),n)}return new u.V(0,n)}function lh(w){return Math.cos(w*Math.PI/180)}function kn(w,n){const c=lh(w),p=lh(n);return u.at(p/c)}function gm(w,n){const c=w.rotate(n.bearingInRadians),p=n.zoom+kn(n.center.lat,0),_=u.bu(1/lh(n.center.lat),1/lh(Math.min(Math.abs(n.center.lat),60)),u.bx(p,7,3,0,1)),T=360/Gi({worldSize:n.worldSize,center:{lat:n.center.lat}});return new u.V(n.center.lng-c.x*T*_,u.an(n.center.lat+c.y*T,-u.ao,u.ao))}function Af(w){const n=.5*w,c=Math.sin(n),p=Math.cos(n);return Math.log(c+p)-Math.log(p-c)}function ym(w,n,c,p){const _=w.lat+c*p;if(Math.abs(c)>1){const T=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,A=Math.abs(w.lat+c)*Math.PI/180,O=Af(T+p*(A-T)),R=Af(T),U=Af(A);return new u.V(w.lng+n*((O-R)/(U-R)),_)}return new u.V(w.lng+n*p,_)}class my{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,c,p,_){const T=`${n.z}_${n.x}_${n.y}_${_?.terrain?"t":""}`,A=this._cache.get(T);if(A)return A;const O=this._cachePrevious.get(T);if(O)return this._cache.set(T,O),O;const R=this._boundingVolumeFactory(n,c,p,_);return this._cache.set(T,R),this._hadAnyChanges=!0,R}}class tc{constructor(n,c,p,_){this.min=p,this.max=_,this.points=n,this.planes=c}static fromAabb(n,c){const p=[];for(let _=0;_<8;_++)p.push([1&~_?n[0]:c[0],(_>>1&1)==1?c[1]:n[1],(_>>2&1)==1?c[2]:n[2]]);return new tc(p,[[-1,0,0,c[0]],[1,0,0,-n[0]],[0,-1,0,c[1]],[0,1,0,-n[1]],[0,0,-1,c[2]],[0,0,1,-n[2]]],n,c)}static fromCenterSizeAngles(n,c,p){const _=u.bB([],p[0],p[1],p[2]),T=u.bC([],[c[0],0,0],_),A=u.bC([],[0,c[1],0],_),O=u.bC([],[0,0,c[2]],_),R=[...n],U=[...n];for(let K=0;K<8;K++)for(let X=0;X<3;X++){const re=n[X]+T[X]*(1&~K?-1:1)+A[X]*((K>>1&1)==1?1:-1)+O[X]*((K>>2&1)==1?1:-1);R[X]=Math.min(R[X],re),U[X]=Math.max(U[X],re)}const V=[];for(let K=0;K<8;K++){const X=[...n];u.b0(X,X,u.a$([],T,1&~K?-1:1)),u.b0(X,X,u.a$([],A,(K>>1&1)==1?1:-1)),u.b0(X,X,u.a$([],O,(K>>2&1)==1?1:-1)),V.push(X)}return new tc(V,[[...T,-u.b5(T,V[0])],[...A,-u.b5(A,V[0])],[...O,-u.b5(O,V[0])],[-T[0],-T[1],-T[2],-u.b5(T,V[7])],[-A[0],-A[1],-A[2],-u.b5(A,V[7])],[-O[0],-O[1],-O[2],-u.b5(O,V[7])]],R,U)}intersectsFrustum(n){let c=!0;const p=this.points.length,_=this.planes.length,T=n.planes.length,A=n.points.length;for(let O=0;O<T;O++){const R=n.planes[O];let U=0;for(let V=0;V<p;V++){const K=this.points[V];R[0]*K[0]+R[1]*K[1]+R[2]*K[2]+R[3]>=0&&U++}if(U===0)return 0;U<p&&(c=!1)}if(c)return 2;for(let O=0;O<_;O++){const R=this.planes[O];let U=0;for(let V=0;V<A;V++){const K=n.points[V];R[0]*K[0]+R[1]*K[1]+R[2]*K[2]+R[3]>=0&&U++}if(U===0)return 0}return 1}intersectsPlane(n){const c=this.points.length;let p=0;for(let _=0;_<c;_++){const T=this.points[_];n[0]*T[0]+n[1]*T[1]+n[2]*T[2]+n[3]>=0&&p++}return p===c?2:p===0?0:1}}function Mf(w,n,c){const p=w-n;return p<0?-p:Math.max(0,p-c)}function rc(w,n,c,p,_){const T=w-c;let A;return A=T<0?Math.min(-T,1+T-_):T>1?Math.min(Math.max(T-_,0),1-T):0,Math.max(A,Mf(n,p,_))}class Bd{constructor(){this._boundingVolumeCache=new my(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,c,p,_){const T=1<<p.z,A=1/T,O=p.x/T,R=p.y/T;let U=2;return U=Math.min(U,rc(n,c,O,R,A)),U=Math.min(U,rc(n,c,O+.5,-R-A,A)),U=Math.min(U,rc(n,c,O+.5,2-R-A,A)),U}getWrap(n,c,p){const _=1<<c.z,T=1/_,A=c.x/_,O=Mf(n.x,A,T),R=Mf(n.x,A-1,T),U=Mf(n.x,A+1,T),V=Math.min(O,R,U);return V===U?1:V===R?-1:0}allowVariableZoom(n,c){return ar(n,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,c,p,_){return this._boundingVolumeCache.getTileBoundingVolume(n,c,p,_)}_computeTileBoundingVolume(n,c,p,_){var T,A;let O=0,R=0;if(_?.terrain){const U=new u.a2(n.z,c,n.z,n.x,n.y),V=_.terrain.getMinMaxElevation(U);O=(T=V.minElevation)!==null&&T!==void 0?T:Math.min(0,p),R=(A=V.maxElevation)!==null&&A!==void 0?A:Math.max(0,p)}if(O/=u.bE,R/=u.bE,O+=1,R+=1,n.z<=0)return tc.fromAabb([-R,-R,-R],[R,R,R]);if(n.z===1)return tc.fromAabb([n.x===0?-R:0,n.y===0?0:-R,-R],[n.x===0?0:R,n.y===0?R:0,R]);{const U=[Qo(0,0,n.x,n.y,n.z),Qo(u.a5,0,n.x,n.y,n.z),Qo(u.a5,u.a5,n.x,n.y,n.z),Qo(0,u.a5,n.x,n.y,n.z)],V=[];for(const Ye of U)V.push(u.a$([],Ye,R));if(R!==O)for(const Ye of U)V.push(u.a$([],Ye,O));n.y===0&&V.push([0,1,0]),n.y===(1<<n.z)-1&&V.push([0,-1,0]);const K=[1,1,1],X=[-1,-1,-1];for(const Ye of V)for(let Xe=0;Xe<3;Xe++)K[Xe]=Math.min(K[Xe],Ye[Xe]),X[Xe]=Math.max(X[Xe],Ye[Xe]);const re=Qo(u.a5/2,u.a5/2,n.x,n.y,n.z),oe=u.b4([],[0,1,0],re);u.b3(oe,oe);const de=u.b4([],re,oe);u.b3(de,de);const ve=u.b4([],U[2],U[1]);u.b3(ve,ve);const ye=u.b4([],U[0],U[3]);u.b3(ye,ye),V.push(u.a$([],re,R)),n.y>=(1<<n.z)/2&&V.push(u.a$([],Qo(u.a5/2,0,n.x,n.y,n.z),R)),n.y<(1<<n.z)/2&&V.push(u.a$([],Qo(u.a5/2,u.a5,n.x,n.y,n.z),R));const we=uh(re,V),Ce=uh(de,V),be=[-re[0],-re[1],-re[2],we.max],Pe=[re[0],re[1],re[2],-we.min],Ie=[-de[0],-de[1],-de[2],Ce.max],Ee=[de[0],de[1],de[2],-Ce.min],Le=[...ve,0],Ke=[...ye,0],He=[];return n.y===0?He.push(u.bD(Ke,Le,be),u.bD(Ke,Le,Pe)):He.push(u.bD(Ie,Le,be),u.bD(Ie,Le,Pe),u.bD(Ie,Ke,be),u.bD(Ie,Ke,Pe)),n.y===(1<<n.z)-1?He.push(u.bD(Ke,Le,be),u.bD(Ke,Le,Pe)):He.push(u.bD(Ee,Le,be),u.bD(Ee,Le,Pe),u.bD(Ee,Ke,be),u.bD(Ee,Ke,Pe)),new tc(He,[be,Pe,Ie,Ee,Le,Ke],K,X)}}}function uh(w,n){let c=1/0,p=-1/0;for(const _ of n){const T=u.b5(w,_);c=Math.min(c,T),p=Math.max(p,T)}return{min:c,max:p}}class nc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,c,p){return this._helper.interpolatePadding(n,c,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,c){this._helper.resize(n,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,c){this._helper.overrideNearFarZ(n,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(n){this._cachedClippingPlane=u.bF(),this._projectionMatrix=u.bj(),this._globeViewProjMatrix32f=u.bi(),this._globeViewProjMatrixNoCorrection=u.bj(),this._globeViewProjMatrixNoCorrectionInverted=u.bj(),this._globeProjMatrixInverted=u.bj(),this._cameraPosition=u.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(c,p)=>{const _=u.an(c.lat,-u.ao,u.ao),T=u.an(+p,this.minZoom+kn(0,_),this.maxZoom);return{center:new u.V(c.lng,_),zoom:T}},this.applyConstrain=(c,p)=>this._helper.applyConstrain(c,p),this._helper=new ul({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,p)=>this.defaultConstrain(c,p)},n),this._coveringTilesDetailsProvider=new Bd}clone(){const n=new nc;return n.apply(this,!1),n}apply(n,c,p){this._globeLatitudeErrorCorrectionRadians=p||0,this._helper.apply(n,c)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=u.bA();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:c,applyGlobeMatrix:p}=n,_=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:_,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const c=this.pitchInRadians,p=this.cameraToCenterDistance/n,_=Math.sin(c)*p,T=Math.cos(c)*p+1,A=1/Math.sqrt(_*_+T*T)*1;let O=-_,R=T;const U=Math.sqrt(O*O+R*R);O/=U,R/=U;const V=[0,O,R];u.bG(V,V,[0,0,0],-this.bearingInRadians),u.bH(V,V,[0,0,0],-1*this.center.lat*Math.PI/180),u.bI(V,V,[0,0,0],this.center.lng*Math.PI/180);const K=1/u.b7(V);return u.a$(V,V,K),[...V,-A*K]}isLocationOccluded(n){return!this.isSurfacePointVisible(gn(n))}transformLightDirection(n){const c=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,_=Math.cos(p),T=[Math.sin(c)*_,Math.sin(p),Math.cos(c)*_],A=[T[2],0,-T[0]],O=[0,0,0];u.b4(O,A,T),u.b3(A,A),u.b3(O,O);const R=[0,0,0];return u.b3(R,[A[0]*n[0]+O[0]*n[1]+T[0]*n[2],A[1]*n[0]+O[1]*n[1]+T[1]*n[2],A[2]*n[0]+O[2]*n[1]+T[2]*n[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,c,p){const _=(function(O,R,U){const V=1/(1<<U.z);return new u.a9(O/u.a5*V+U.x*V,R/u.a5*V+U.y*V)})(n,c,p.canonical),T=(A=_.y,[u.bz(_.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-A*Math.PI*2))-.5*Math.PI]);var A;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(n,c,p,_){const T=p.canonical,A=Qo(n,c,T.x,T.y,T.z),O=1+(_?_(n,c):0)/u.bE,R=[A[0]*O,A[1]*O,A[2]*O,1];u.aH(R,R,this._globeViewProjMatrixNoCorrection);const U=this._cachedClippingPlane,V=U[0]*A[0]+U[1]*A[1]+U[2]*A[2]+U[3]<0;return{point:new u.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:V}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=tu(this.worldSize,this.center.lat),c=u.bk(),p=u.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),u.be(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const _=this.centerOffset;c[8]=2*-_.x/this._helper._width,c[9]=2*_.y/this._helper._height,this._projectionMatrix=u.bf(c),this._globeProjMatrixInverted=u.bk(),u.aB(this._globeProjMatrixInverted,c),u.O(c,c,[0,0,-this.cameraToCenterDistance]),u.bg(c,c,this.rollInRadians),u.bh(c,c,-this.pitchInRadians),u.bg(c,c,this.bearingInRadians),u.O(c,c,[0,0,-n]);const T=u.bA();T[0]=n,T[1]=n,T[2]=n,u.bh(p,c,this.center.lat*Math.PI/180),u.bJ(p,p,-this.center.lng*Math.PI/180),u.Q(p,p,T),this._globeViewProjMatrixNoCorrection=p,u.bh(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),u.bJ(c,c,-this.center.lng*Math.PI/180),u.Q(c,c,T),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=u.bk(),u.aB(this._globeViewProjMatrixNoCorrectionInverted,p);const A=u.bA();this._cameraPosition=u.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/n,u.bG(this._cameraPosition,this._cameraPosition,A,-this.rollInRadians),u.bH(this._cameraPosition,this._cameraPosition,A,this.pitchInRadians),u.bG(this._cameraPosition,this._cameraPosition,A,-this.bearingInRadians),u.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),u.bH(this._cameraPosition,this._cameraPosition,A,-this.center.lat*Math.PI/180),u.bI(this._cameraPosition,this._cameraPosition,A,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const O=u.bf(this._globeViewProjMatrixNoCorrectionInverted);u.Q(O,O,[1,1,-1]),this._cachedFrustum=qi.fromInvProjectionMatrix(O,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){u.w("calculateFogMatrix is not supported on globe projection.");const c=u.bk();return u.ar(c),c}getVisibleUnwrappedCoordinates(n){return[new u.bc(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&u.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=gn(n);u.a$(p,p,1+c/u.bE);const _=u.bF();return u.aH(_,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),_[2]/_[3]}populateCache(n){}getBounds(){const n=.5*this.width,c=.5*this.height,p=[new u.P(0,0),new u.P(n,0),new u.P(this.width,0),new u.P(this.width,c),new u.P(this.width,this.height),new u.P(n,this.height),new u.P(0,this.height),new u.P(0,c)],_=[];for(const K of p)_.push(this.unprojectScreenPoint(K));let T=0,A=0,O=0,R=0;const U=this.center;for(const K of _){const X=u.bK(U.lng,K.lng),re=u.bK(U.lat,K.lat);X<A&&(A=X),X>T&&(T=X),re<R&&(R=re),re>O&&(O=re)}const V=[U.lng+A,U.lat+R,U.lng+T,U.lat+O];return this.isSurfacePointOnScreen([0,1,0])&&(V[3]=90,V[0]=-180,V[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(V[1]=-90,V[0]=-180,V[2]=180),new Lr(V)}calculateCenterFromCameraLngLatAlt(n,c,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,c,p,_)}setLocationAtPoint(n,c){const p=gn(this.unprojectScreenPoint(c)),_=gn(n),T=u.bA();u.bL(T);const A=u.bA();u.bI(A,p,T,-this.center.lng*Math.PI/180),u.bH(A,A,T,this.center.lat*Math.PI/180);const O=_[0]*_[0]+_[2]*_[2],R=A[0]*A[0];if(O<R)return;const U=Math.sqrt(O-R),V=-U,K=u.bM(_[0],_[2],A[0],U),X=u.bM(_[0],_[2],A[0],V),re=u.bA();u.bI(re,_,T,-K);const oe=u.bM(re[1],re[2],A[1],A[2]),de=u.bA();u.bI(de,_,T,-X);const ve=u.bM(de[1],de[2],A[1],A[2]),ye=.5*Math.PI,we=oe>=-ye&&oe<=ye,Ce=ve>=-ye&&ve<=ye;let be,Pe;if(we&&Ce){const Ke=this.center.lng*Math.PI/180,He=this.center.lat*Math.PI/180;u.bN(K,Ke)+u.bN(oe,He)<u.bN(X,Ke)+u.bN(ve,He)?(be=K,Pe=oe):(be=X,Pe=ve)}else if(we)be=K,Pe=oe;else{if(!Ce)return;be=X,Pe=ve}const Ie=be/Math.PI*180,Ee=Pe/Math.PI*180,Le=this.center.lat;this.setCenter(new u.V(Ie,u.an(Ee,-90,90))),this.setZoom(this.zoom+kn(Le,this.center.lat))}locationToScreenPoint(n,c){const p=gn(n);if(c){const _=c.getElevationForLngLatZoom(n,this._helper._tileZoom);u.a$(p,p,1+_/u.bE)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(n){const c=u.bF();return u.aH(c,[...n,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new u.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,c){if(c){const p=c.pointCoordinate(n);if(p)return p}return u.a9.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,c){var p;return(p=this.screenPointToMercatorCoordinate(n,c))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(n,c){const p=this._cameraPosition,_=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(p,_)}getRayDirectionFromPixel(n){const c=u.bF();c[0]=n.x/this.width*2-1,c[1]=-1*(n.y/this.height*2-1),c[2]=1,c[3]=1,u.aH(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const p=u.bA();p[0]=c[0]-this._cameraPosition[0],p[1]=c[1]-this._cameraPosition[1],p[2]=c[2]-this._cameraPosition[2];const _=u.bA();return u.b3(_,p),_}isSurfacePointVisible(n){const c=this._cachedClippingPlane;return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]+c[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const c=u.bF();return u.aH(c,[...n,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(n,c){const p=u.b5(n,c),_=u.bA(),T=u.bA();u.a$(T,c,p),u.b2(_,n,T);const A=1-u.b5(_,_);if(A<0)return null;const O=u.b5(n,n)-1,R=-p+(p<0?1:-1)*Math.sqrt(A),U=O/R,V=R;return{tMin:Math.min(U,V),tMax:Math.max(U,V)}}unprojectScreenPoint(n){const c=this._cameraPosition,p=this.getRayDirectionFromPixel(n),_=this.rayPlanetIntersection(c,p);if(_){const V=u.bA();u.b0(V,c,[p[0]*_.tMin,p[1]*_.tMin,p[2]*_.tMin]);const K=u.bA();return u.b3(K,V),sh(K)}const T=this._cachedClippingPlane,A=T[0]*p[0]+T[1]*p[1]+T[2]*p[2],O=-u.bb(T,c)/A,R=u.bA();if(O>0)u.b0(R,c,[p[0]*O,p[1]*O,p[2]*O]);else{const V=u.bA();u.b0(V,c,[2*p[0],2*p[1],2*p[2]]);const K=u.bb(this._cachedClippingPlane,V);u.b2(R,V,[this._cachedClippingPlane[0]*K,this._cachedClippingPlane[1]*K,this._cachedClippingPlane[2]*K])}const U=(function(V){const K=u.bA();return K[0]=V[0]*-V[3],K[1]=V[1]*-V[3],K[2]=V[2]*-V[3],{center:K,radius:Math.sqrt(1-V[3]*V[3])}})(T);return sh((function(V,K,X){const re=u.bA();u.b2(re,X,V);const oe=u.bA();return u.by(oe,V,re,K/u.b9(re)),oe})(U.center,U.radius,R))}getMatrixForModel(n,c){const p=u.V.convert(n),_=1/u.bE,T=u.bj();return u.bJ(T,T,p.lng/180*Math.PI),u.bh(T,T,-p.lat/180*Math.PI),u.O(T,T,[0,0,1+c/u.bE]),u.bh(T,T,.5*Math.PI),u.Q(T,T,[_,_,_]),T}getProjectionDataForCustomLayer(n=!0){const c=this.getProjectionData({overscaledTileID:new u.a2(0,0,0,0,0),applyGlobeMatrix:n});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(n){}}class ic{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,c,p){return this._helper.interpolatePadding(n,c,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,c,p=!0){this._helper.resize(n,c,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,c){this._helper.overrideNearFarZ(n,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,c){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(n){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(c,p)=>this.currentTransform.defaultConstrain(c,p),this.applyConstrain=(c,p)=>this._helper.applyConstrain(c,p),this._helper=new ul({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,p)=>this.defaultConstrain(c,p)},n),this._globeness=1,this._mercatorTransform=new ei,this._verticalPerspectiveTransform=new nc}clone(){const n=new ic;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this,!1),n}apply(n,c){this._helper.apply(n,c),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const c=this._mercatorTransform.getProjectionData(n),p=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:c.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return u.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return u.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,c,p){const _=this._mercatorTransform.getPitchedTextCorrection(n,c,p),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,c,p);return u.bu(_,T,this._globeness)}projectTileCoordinates(n,c,p,_){return this.currentTransform.projectTileCoordinates(n,c,p,_)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,c){return this.currentTransform.lngLatToCameraDepth(n,c)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(n,c,p,_){return this._helper.calculateCenterFromCameraLngLatAlt(n,c,p,_)}setLocationAtPoint(n,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,c),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(n,c),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(n,c){return this.currentTransform.locationToScreenPoint(n,c)}screenPointToMercatorCoordinate(n,c){return this.currentTransform.screenPointToMercatorCoordinate(n,c)}screenPointToLocation(n,c){return this.currentTransform.screenPointToLocation(n,c)}isPointOnMapSurface(n,c){return this.currentTransform.isPointOnMapSurface(n,c)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,c){return this.currentTransform.getMatrixForModel(n,c)}getProjectionDataForCustomLayer(n=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return c;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return p.fallbackMatrix=c.mainMatrix,p}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class Un{get useGlobeControls(){return!0}handlePanInertia(n,c){const p=gm(n,c);return Math.abs(p.lng-c.center.lng)>180&&(p.lng=c.center.lng+179.5*Math.sign(p.lng-c.center.lng)),{easingCenter:p,easingOffset:new u.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,c){const p=n.around,_=c.screenPointToLocation(p);n.bearingDelta&&c.setBearing(c.bearing+n.bearingDelta),n.pitchDelta&&c.setPitch(c.pitch+n.pitchDelta),n.rollDelta&&c.setRoll(c.roll+n.rollDelta);const T=c.zoom;n.zoomDelta&&c.setZoom(c.zoom+n.zoomDelta);const A=c.zoom-T;if(A===0)return;const O=u.bK(c.center.lng,_.lng),R=O/(Math.abs(O/180)+1),U=u.bK(c.center.lat,_.lat),V=c.getRayDirectionFromPixel(p),K=c.cameraPosition,X=-1*u.b5(K,V),re=u.bA();u.b0(re,K,[V[0]*X,V[1]*X,V[2]*X]);const oe=u.b7(re)-1,de=Math.exp(.5*-Math.max(oe-.3,0)),ve=tu(c.worldSize,c.center.lat)/Math.min(c.width,c.height),ye=u.bx(ve,.9,.5,1,.25),we=(1-u.aq(-A))*Math.min(de,ye),Ce=c.center.lat,be=c.zoom,Pe=new u.V(c.center.lng+R*we,u.an(c.center.lat+U*we,-u.ao,u.ao));c.setLocationAtPoint(_,p);const Ie=c.center,Ee=u.bx(Math.abs(O),45,85,0,1),Le=u.bx(ve,.75,.35,0,1),Ke=Math.pow(Math.max(Ee,Le),.25),He=u.bK(Ie.lng,Pe.lng),Ye=u.bK(Ie.lat,Pe.lat);c.setCenter(new u.V(Ie.lng+He*Ke,Ie.lat+Ye*Ke).wrap()),c.setZoom(be+kn(Ce,c.center.lat))}handleMapControlsPan(n,c,p){if(!n.panDelta)return;const _=c.center.lat,T=c.zoom;c.setCenter(gm(n.panDelta,c).wrap()),c.setZoom(T+kn(_,c.center.lat))}cameraForBoxAndBearing(n,c,p,_,T){const A=Ql(n,c,p,_,T),O=c.left/T.width*2-1,R=(T.width-c.right)/T.width*2-1,U=c.top/T.height*-2+1,V=(T.height-c.bottom)/T.height*-2+1,K=u.bK(p.getWest(),p.getEast())<0,X=K?p.getEast():p.getWest(),re=K?p.getWest():p.getEast(),oe=Math.max(p.getNorth(),p.getSouth()),de=Math.min(p.getNorth(),p.getSouth()),ve=X+.5*u.bK(X,re),ye=oe+.5*u.bK(oe,de),we=T.clone();we.setCenter(A.center),we.setBearing(A.bearing),we.setPitch(0),we.setRoll(0),we.setZoom(A.zoom);const Ce=we.modelViewProjectionMatrix,be=[gn(p.getNorthWest()),gn(p.getNorthEast()),gn(p.getSouthWest()),gn(p.getSouthEast()),gn(new u.V(re,ye)),gn(new u.V(X,ye)),gn(new u.V(ve,oe)),gn(new u.V(ve,de))],Pe=gn(A.center);let Ie=Number.POSITIVE_INFINITY;for(const Ee of be)O<0&&(Ie=Un.getLesserNonNegativeNonNull(Ie,Un.solveVectorScale(Ee,Pe,Ce,"x",O))),R>0&&(Ie=Un.getLesserNonNegativeNonNull(Ie,Un.solveVectorScale(Ee,Pe,Ce,"x",R))),U>0&&(Ie=Un.getLesserNonNegativeNonNull(Ie,Un.solveVectorScale(Ee,Pe,Ce,"y",U))),V<0&&(Ie=Un.getLesserNonNegativeNonNull(Ie,Un.solveVectorScale(Ee,Pe,Ce,"y",V)));if(Number.isFinite(Ie)&&Ie!==0)return A.zoom=we.zoom+u.at(Ie),A;$i()}handleJumpToCenterZoom(n,c){const p=n.center.lat,_=n.applyConstrain(c.center?u.V.convert(c.center):n.center,n.zoom).center;n.setCenter(_.wrap());const T=c.zoom!==void 0?+c.zoom:n.zoom+kn(p,_.lat);n.zoom!==T&&n.setZoom(T)}handleEaseTo(n,c){const p=n.zoom,_=n.center,T=n.padding,A={roll:n.roll,pitch:n.pitch,bearing:n.bearing},O={roll:c.roll===void 0?n.roll:c.roll,pitch:c.pitch===void 0?n.pitch:c.pitch,bearing:c.bearing===void 0?n.bearing:c.bearing},R=c.zoom!==void 0,U=!n.isPaddingEqual(c.padding);let V=!1;const K=c.center?u.V.convert(c.center):_,X=n.applyConstrain(K,p).center;Ko(n,X);const re=n.clone();re.setCenter(X),re.setZoom(R?+c.zoom:p+kn(_.lat,K.lat)),re.setBearing(c.bearing);const oe=new u.P(u.an(n.centerPoint.x+c.offsetAsPoint.x,0,n.width),u.an(n.centerPoint.y+c.offsetAsPoint.y,0,n.height));re.setLocationAtPoint(X,oe);const de=(c.offset&&c.offsetAsPoint.mag())>0?re.center:X,ve=R?+c.zoom:p+kn(_.lat,de.lat),ye=p+kn(_.lat,0),we=ve+kn(de.lat,0),Ce=u.bK(_.lng,de.lng),be=u.bK(_.lat,de.lat),Pe=u.aq(we-ye);return V=ve!==p,{easeFunc:Ie=>{if(u.bo(A,O)||ih({startEulerAngles:A,endEulerAngles:O,tr:n,k:Ie,useSlerp:A.roll!=O.roll}),U&&n.interpolatePadding(T,c.padding,Ie),c.around)u.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(c.around,c.aroundPoint);else{const Ee=we>ye?Math.min(2,Pe):Math.max(.5,Pe),Le=Math.pow(Ee,1-Ie),Ke=ym(_,Ce,be,Ie*Le);n.setCenter(Ke.wrap())}if(V){const Ee=u.G.number(ye,we,Ie)+kn(0,n.center.lat);n.setZoom(Ee)}},isZooming:V,elevationCenter:de}}handleFlyTo(n,c){const p=c.zoom!==void 0,_=n.center,T=n.zoom,A=n.padding,O=!n.isPaddingEqual(c.padding),R=n.applyConstrain(u.V.convert(c.center||c.locationAtOffset),T).center,U=p?+c.zoom:n.zoom+kn(n.center.lat,R.lat),V=n.clone();V.setCenter(R),V.setZoom(U),V.setBearing(c.bearing);const K=new u.P(u.an(n.centerPoint.x+c.offsetAsPoint.x,0,n.width),u.an(n.centerPoint.y+c.offsetAsPoint.y,0,n.height));V.setLocationAtPoint(R,K);const X=V.center;Ko(n,X);const re=(function(be,Pe,Ie){const Ee=gn(Pe),Le=gn(Ie),Ke=u.b5(Ee,Le),He=Math.acos(Ke),Ye=Gi(be);return He/(2*Math.PI)*Ye})(n,_,X),oe=T+kn(_.lat,0),de=U+kn(X.lat,0),ve=u.aq(de-oe);let ye;if(typeof c.minZoom=="number"){const be=+c.minZoom+kn(X.lat,0),Pe=Math.min(be,oe,de)+kn(0,X.lat),Ie=n.applyConstrain(X,Pe).zoom+kn(X.lat,0);ye=u.aq(Ie-oe)}const we=u.bK(_.lng,X.lng),Ce=u.bK(_.lat,X.lat);return{easeFunc:(be,Pe,Ie,Ee)=>{const Le=ym(_,we,Ce,Ie);O&&n.interpolatePadding(A,c.padding,be);const Ke=be===1?X:Le;n.setCenter(Ke.wrap());const He=oe+u.at(Pe);n.setZoom(be===1?U:He+kn(0,Ke.lat))},scaleOfZoom:ve,targetCenter:X,scaleOfMinZoom:ye,pixelPathLength:re}}static solveVectorScale(n,c,p,_,T){const A=_==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],O=[p[3],p[7],p[11],p[15]],R=n[0]*A[0]+n[1]*A[1]+n[2]*A[2],U=n[0]*O[0]+n[1]*O[1]+n[2]*O[2],V=c[0]*A[0]+c[1]*A[1]+c[2]*A[2],K=c[0]*O[0]+c[1]*O[1]+c[2]*O[2];return V+T*U===R+T*K||O[3]*(R-V)+A[3]*(K-U)+R*K==V*U?null:(V+A[3]-T*K-T*O[3])/(V-R-T*K+T*U)}static getLesserNonNegativeNonNull(n,c){return c!==null&&c>=0&&c<n?c:n}}class ac{constructor(n){this._globe=n,this._mercatorCameraHelper=new Jl,this._verticalPerspectiveCameraHelper=new Un}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,c){return this.currentHelper.handlePanInertia(n,c)}handleMapControlsRollPitchBearingZoom(n,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,c)}handleMapControlsPan(n,c,p){this.currentHelper.handleMapControlsPan(n,c,p)}cameraForBoxAndBearing(n,c,p,_,T){return this.currentHelper.cameraForBoxAndBearing(n,c,p,_,T)}handleJumpToCenterZoom(n,c){this.currentHelper.handleJumpToCenterZoom(n,c)}handleEaseTo(n,c){return this.currentHelper.handleEaseTo(n,c)}handleFlyTo(n,c){return this.currentHelper.handleFlyTo(n,c)}}const oc=(w,n)=>u.B(w,n&&n.filter((c=>c.identifier!=="source.canvas"))),sc=u.bO();class dl extends u.E{constructor(n,c={}){var p,_;super(),this._rtlPluginLoaded=()=>{for(const A in this.tileManagers){const O=this.tileManagers[A].getSource().type;O!=="vector"&&O!=="geojson"||this.tileManagers[A].reload()}},this.map=n,this.dispatcher=new sr(ht(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",((A,O)=>this.getGlyphs(A,O))),this.dispatcher.registerMessageHandler("GI",((A,O)=>this.getImages(A,O))),this.dispatcher.registerMessageHandler("GDA",((A,O)=>this.getDashes(A,O))),this.imageManager=new Fe,this.imageManager.setEventedParent(this);const T=((p=n._container)===null||p===void 0?void 0:p.lang)||typeof document<"u"&&((_=document.documentElement)===null||_===void 0?void 0:_.lang)||void 0;this.glyphManager=new ct(n._requestManager,c.localIdeographFontFamily,T),this.lineAtlas=new Pt(256,512),this.crossTileSymbolIndex=new si,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",u.bP()),ne().on(al,this._rtlPluginLoaded),this.on("data",(A=>{if(A.dataType!=="source"||A.sourceDataType!=="metadata")return;const O=this.tileManagers[A.sourceId];if(!O)return;const R=O.getSource();if(R&&R.vectorLayerIds)for(const U in this._layers){const V=this._layers[U];V.source===R.id&&this._validateLayer(V)}}))}_setInitialValues(){var n;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new u.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((n=this.crossTileSymbolIndex)===null||n===void 0?void 0:n.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(n,c){var p,_,T;this._checkLoaded();const A=c===null?(T=(_=(p=this.stylesheet.state)===null||p===void 0?void 0:p[n])===null||_===void 0?void 0:_.default)!==null&&T!==void 0?T:null:c;if(u.bR(A,this._globalState[n]))return this;this._globalState[n]=A,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const c=[];for(const p in n)!u.bR(this._globalState[p],n[p].default)&&(c.push(p),this._globalState[p]=n[p].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(n){if(n.length===0)return;const c=new Set,p={};for(const _ of n){p[_]=this._globalState[_];for(const T in this._layers){const A=this._layers[T],O=A.getLayoutAffectingGlobalStateRefs(),R=A.getPaintAffectingGlobalStateRefs(),U=A.getVisibilityAffectingGlobalStateRefs();if(O.has(_)&&c.add(A.source),R.has(_))for(const{name:V,value:K}of R.get(_))this._updatePaintProperty(A,V,K);U?.has(_)&&(A.recalculateVisibility(),this._updateLayer(A))}}this.dispatcher.broadcast("UGS",p);for(const _ in this.tileManagers)c.has(_)&&(this._reloadSource(_),this._changed=!0)}loadURL(n,c={},p){this.fire(new u.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const _=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;u.j(_,this._loadStyleRequest).then((A=>{this._loadStyleRequest=null,this._load(A.data,c,p)})).catch((A=>{this._loadStyleRequest=null,A&&!T.signal.aborted&&this.fire(new u.k(A))}))}loadJSON(n,c={},p){this.fire(new u.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,G.frameAsync(this._frameRequest,this.map._ownerWindow).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(n,c,p)})).catch((()=>{}))}loadEmpty(){this.fire(new u.l("dataloading",{dataType:"style"})),this._load(sc,{validate:!1})}_load(n,c,p){var _,T;let A=c.transformStyle?c.transformStyle(p,n):n;if(!c.validate||!oc(this,u.C(A))){A=Object.assign({},A),this._loaded=!0,this.stylesheet=A;for(const O in A.sources)this.addSource(O,A.sources[O],{validate:!1});A.sprite?this._loadSprite(A.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(A.glyphs),this._createLayers(),this.light=new Ut(this.stylesheet.light),this._setProjectionInternal(((_=this.stylesheet.projection)===null||_===void 0?void 0:_.type)||"mercator"),this.sky=new at(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new u.l("data",{dataType:"style"})),this.fire(new u.l("style.load"))}}_createLayers(){var n,c,p;const _=u.bS(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",_),this._order=_.map((T=>T.id)),this._layers={},this._serializedLayers=null;for(const T of _){const A=u.bT(T,this._globalState);if(A.setEventedParent(this,{layer:{id:T.id}}),this._layers[T.id]=A,u.bU(A)&&this.tileManagers[A.source]){const O=(p=(c=T.paint)===null||c===void 0?void 0:c["raster-fade-duration"])!==null&&p!==void 0?p:A.paint.get("raster-fade-duration");this.tileManagers[A.source].setRasterFadeDuration(O)}}}_loadSprite(n,c=!1,p=void 0){this.imageManager.setLoaded(!1);const _=new AbortController;let T;this._spriteRequest=_,(function(A,O,R,U){return u._(this,void 0,void 0,(function*(){const V=et(A),K=R>1?"@2x":"",X={},re={};for(const{id:oe,url:de}of V){const ve=O.transformRequest(vt(de,K,".json"),"SpriteJSON");X[oe]=u.j(ve,U);const ye=O.transformRequest(vt(de,K,".png"),"SpriteImage");re[oe]=Se.getImage(ye,U)}return yield Promise.all([...Object.values(X),...Object.values(re)]),(function(oe,de){return u._(this,void 0,void 0,(function*(){const ve={};for(const ye in oe){ve[ye]={};const we=G.getImageCanvasContext((yield de[ye]).data),Ce=(yield oe[ye]).data;for(const be in Ce){const{width:Pe,height:Ie,x:Ee,y:Le,sdf:Ke,pixelRatio:He,stretchX:Ye,stretchY:Xe,content:At,textFitWidth:Mt,textFitHeight:dt}=Ce[be];ve[ye][be]={data:null,pixelRatio:He,sdf:Ke,stretchX:Ye,stretchY:Xe,content:At,textFitWidth:Mt,textFitHeight:dt,spriteData:{width:Pe,height:Ie,x:Ee,y:Le,context:we}}}}return ve}))})(X,re)}))})(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((A=>{if(this._spriteRequest=null,A)for(const O in A){this._spritesImagesIds[O]=[];const R=this._spritesImagesIds[O]?this._spritesImagesIds[O].filter((U=>!(U in A))):[];for(const U of R)this.imageManager.removeImage(U),this._changedImages[U]=!0;for(const U in A[O]){const V=O==="default"?U:`${O}:${U}`;this._spritesImagesIds[O].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,A[O][U],!1):this.imageManager.addImage(V,A[O][U]),c&&(this._changedImages[V]=!0)}}})).catch((A=>{this._spriteRequest=null,T=A,_.signal.aborted||this.fire(new u.k(T))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"})),p&&p(T)}))}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}_validateLayer(n){const c=this.tileManagers[n.source];if(!c)return;const p=n.sourceLayer;if(!p)return;const _=c.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.k(new Error(`Source layer "${p}" does not exist on source "${_.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.tileManagers)if(!this.tileManagers[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,c=!1){const p=this._serializedAllLayers();if(!n||n.length===0)return Object.values(c?u.bV(p):p);const _=[];for(const T of n)if(p[T]){const A=c?u.bV(p[T]):p[T];_.push(A)}return _}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const c=Object.keys(this._layers);for(const p of c){const _=this._layers[p];_.type!=="custom"&&(n[p]=_.serialize())}return n}hasTransitions(){var n,c,p;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const _ in this.tileManagers)if(this.tileManagers[_].hasTransition())return!0;for(const _ in this._layers)if(this._layers[_].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const c=this._changed;if(c){const _=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(_.length||T.length)&&this._updateWorkerLayers(_,T);for(const A in this._updatedSources){const O=this._updatedSources[A];if(O==="reload")this._reloadSource(A);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(A)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const A in this._updatedPaintProps)this._layers[A].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const p={};for(const _ in this.tileManagers){const T=this.tileManagers[_];p[_]=T.used,T.used=!1}for(const _ of this._order){const T=this._layers[_];T.recalculate(n,this._availableImages),!T.isHidden(n.zoom)&&T.source&&(this.tileManagers[T.source].used=!0)}for(const _ in p){const T=this.tileManagers[_];!!p[_]!=!!T.used&&T.fire(new u.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,c&&this.fire(new u.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,c={}){var p;this._checkLoaded();const _=this.serialize();if(n=c.transformStyle?c.transformStyle(_,n):n,((p=c.validate)===null||p===void 0||p)&&oc(this,u.C(n)))return!1;(n=u.bV(n)).layers=u.bS(n.layers);const T=u.bW(_,n),A=this._getOperationsToPerform(T);if(A.unimplemented.length>0)throw new Error(`Unimplemented: ${A.unimplemented.join(", ")}.`);if(A.operations.length===0)return!1;for(const O of A.operations)O();return this.stylesheet=n,this._serializedLayers=null,this.fire(new u.l("style.load",{style:this})),!0}_getOperationsToPerform(n){const c=[],p=[];for(const _ of n)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,_.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,_.args)));break;case"setProjection":this.setProjection.apply(this,_.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,_.args)));break;case"setTransition":c.push((()=>{}));break;default:p.push(_.command)}return{operations:c,unimplemented:p}}addImage(n,c){if(this.getImage(n))return this.fire(new u.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,c),this._afterImageUpdated(n)}updateImage(n,c){this.imageManager.updateImage(n,c)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new u.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,c,p={}){if(this._checkLoaded(),this.tileManagers[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.C.source,`sources.${n}`,c,null,p))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const _=this.tileManagers[n]=new Fr(n,c,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:n}))),_.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new u.k(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const c=this.tileManagers[n];delete this.tileManagers[n],delete this._updatedSources[n],c.fire(new u.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,c){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const p=this.tileManagers[n].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(c),this._changed=!0}getSource(n){return this.tileManagers[n]&&this.tileManagers[n].getSource()}addLayer(n,c,p={}){this._checkLoaded();const _=n.id;if(this.getLayer(_))return void this.fire(new u.k(new Error(`Layer "${_}" already exists on this map.`)));let T;if(n.type==="custom"){if(oc(this,u.bX(n)))return;T=u.bT(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(_,n.source),n=u.bV(n),n=u.e(n,{source:_})),this._validate(u.C.layer,`layers.${_}`,n,{arrayIndex:-1},p))return;T=u.bT(n,this._globalState),this._validateLayer(T),T.setEventedParent(this,{layer:{id:_}})}const A=c?this._order.indexOf(c):this._order.length;if(c&&A===-1)this.fire(new u.k(new Error(`Cannot add layer "${_}" before non-existing layer "${c}".`)));else{if(this._order.splice(A,0,_),this._layerOrderChanged=!0,this._layers[_]=T,this._removedLayers[_]&&T.source&&T.type!=="custom"){const O=this._removedLayers[_];delete this._removedLayers[_],O.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.tileManagers[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(n,c){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new u.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===c)return;const p=this._order.indexOf(n);this._order.splice(p,1);const _=c?this._order.indexOf(c):this._order.length;c&&_===-1?this.fire(new u.k(new Error(`Cannot move layer "${n}" before non-existing layer "${c}".`))):(this._order.splice(_,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const c=this._layers[n];if(!c)return void this.fire(new u.k(new Error(`Cannot remove non-existing layer "${n}".`)));c.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=c,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],c.onRemove&&c.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,c,p){this._checkLoaded();const _=this.getLayer(n);_?_.minzoom===c&&_.maxzoom===p||(c!=null&&(_.minzoom=c),p!=null&&(_.maxzoom=p),this._updateLayer(_)):this.fire(new u.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,c,p={}){this._checkLoaded();const _=this.getLayer(n);if(_){if(!u.bR(_.filter,c))return c==null?(_.setFilter(void 0),void this._updateLayer(_)):void(this._validate(u.C.filter,`layers.${_.id}.filter`,c,null,p)||(_.setFilter(u.bV(c)),this._updateLayer(_)))}else this.fire(new u.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return u.bV(this.getLayer(n).filter)}setLayoutProperty(n,c,p,_={}){this._checkLoaded();const T=this.getLayer(n);T?u.bR(T.getLayoutProperty(c),p)||(T.setLayoutProperty(c,p,_),this._updateLayer(T)):this.fire(new u.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,c){const p=this.getLayer(n);if(p)return p.getLayoutProperty(c);this.fire(new u.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,c,p,_={}){this._checkLoaded();const T=this.getLayer(n);T?u.bR(T.getPaintProperty(c),p)||this._updatePaintProperty(T,c,p,_):this.fire(new u.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,c,p,_={}){n.setPaintProperty(c,p,_)&&this._updateLayer(n),u.bU(n)&&c==="raster-fade-duration"&&this.tileManagers[n.source].setRasterFadeDuration(p),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,c){return this.getLayer(n).getPaintProperty(c)}setFeatureState(n,c){this._checkLoaded();const p=n.source,_=n.sourceLayer,T=this.tileManagers[p];if(T===void 0)return void this.fire(new u.k(new Error(`The source '${p}' does not exist in the map's style.`)));const A=T.getSource().type;A==="geojson"&&_?this.fire(new u.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):A!=="vector"||_?(n.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(_,n.id,c)):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,c){this._checkLoaded();const p=n.source,_=this.tileManagers[p];if(_===void 0)return void this.fire(new u.k(new Error(`The source '${p}' does not exist in the map's style.`)));const T=_.getSource().type,A=T==="vector"?n.sourceLayer:void 0;T!=="vector"||A?c&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new u.k(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(A,n.id,c):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const c=n.source,p=n.sourceLayer,_=this.tileManagers[c];if(_!==void 0)return _.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),_.getFeatureState(p,n.id)):void this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=u.bY(this.tileManagers,(T=>T.serialize())),c=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,_=this.stylesheet;return u.bZ({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,projection:_.projection,sources:n,layers:c,terrain:p},(T=>T!==void 0))}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.tileManagers[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.tileManagers[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const c=A=>this._layers[A].type==="fill-extrusion",p={},_=[];for(let A=this._order.length-1;A>=0;A--){const O=this._order[A];if(c(O)){p[O]=A;for(const R of n){const U=R[O];if(U)for(const V of U)_.push(V)}}}_.sort(((A,O)=>O.intersectionZ-A.intersectionZ));const T=[];for(let A=this._order.length-1;A>=0;A--){const O=this._order[A];if(c(O))for(let R=_.length-1;R>=0;R--){const U=_[R].feature;if(p[U.layer.id]<A)break;T.push(U),_.pop()}else for(const R of n){const U=R[O];if(U)for(const V of U)T.push(V.feature)}}return T}queryRenderedFeatures(n,c,p){c&&c.filter&&this._validate(u.C.filter,"queryRenderedFeatures.filter",c.filter,null,c);const _={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new u.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const U of c.layers){const V=this._layers[U];if(!V)return this.fire(new u.k(new Error(`The layer '${U}' does not exist in the map's style and cannot be queried for features.`))),[];_[V.source]=!0}}const T=[];c.availableImages=this._availableImages;const A=this._serializedAllLayers(),O=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,R=Object.assign(Object.assign({},c),{layers:O,globalState:this._globalState});for(const U in this.tileManagers)c.layers&&!_[U]||T.push(Dn(this.tileManagers[U],this._layers,A,n,R,p,this.map.terrain?(V,K,X)=>this.map.terrain.getElevation(V,K,X):void 0));return this.placement&&T.push((function(U,V,K,X,re,oe,de){const ve={},ye=oe.queryRenderedSymbols(X),we=[];for(const Ce of Object.keys(ye).map(Number))we.push(de[Ce]);we.sort(cr);for(const Ce of we){const be=Ce.featureIndex.lookupSymbolFeatures(ye[Ce.bucketInstanceId],V,Ce.bucketIndex,Ce.sourceLayerIndex,{filterSpec:re.filter,globalState:re.globalState},re.layers,re.availableImages,U);for(const Pe in be){const Ie=ve[Pe]=ve[Pe]||[],Ee=be[Pe];Ee.sort(((Le,Ke)=>{const He=Ce.featureSortOrder;if(He){const Ye=He.indexOf(Le.featureIndex);return He.indexOf(Ke.featureIndex)-Ye}return Ke.featureIndex-Le.featureIndex}));for(const Le of Ee)Ie.push(Le)}}return(function(Ce,be,Pe){for(const Ie in Ce)for(const Ee of Ce[Ie])Wr(Ee,Pe[be[Ie].source]);return Ce})(ve,U,K)})(this._layers,A,this.tileManagers,n,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(n,c){c?.filter&&this._validate(u.C.filter,"querySourceFeatures.filter",c.filter,null,c);const p=this.tileManagers[n];return p?(function(_,T){const A=_.getRenderableIds().map((U=>_.getTileByID(U))),O=[],R={};for(let U=0;U<A.length;U++){const V=A[U],K=V.tileID.canonical.key;R[K]||(R[K]=!0,V.querySourceFeatures(O,T))}return O})(p,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,c={}){this._checkLoaded();const p=this.light.getLight();let _=!1;for(const A in n)if(!u.bR(n[A],p[A])){_=!0;break}if(!_)return;const T={now:H(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,c),this.light.updateTransitions(T)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.stylesheet.projection=n,this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,c={}){this._checkLoaded();const p=this.getSky();let _=!1;if(!n&&!p)return;if(n&&!p)_=!0;else if(!n&&p)_=!0;else for(const A in n)if(!u.bR(n[A],p[A])){_=!0;break}if(!_)return;const T={now:H(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,c),this.sky.updateTransitions(T)}_setProjectionInternal(n){const c=(function(p,_){const T={constrainOverride:_};if(Array.isArray(p)){const A=new jd({type:p});return{projection:A,transform:new ic(T),cameraHelper:new ac(A)}}switch(p){case"mercator":return{projection:new li,transform:new ei(T),cameraHelper:new Jl};case"globe":{const A=new jd({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:A,transform:new ic(T),cameraHelper:new ac(A)}}case"vertical-perspective":return{projection:new Ld,transform:new nc(T),cameraHelper:new Un};default:return u.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new li,transform:new ei(T),cameraHelper:new Jl}}})(n,this.map.transformConstrain);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const p in this.tileManagers)this.tileManagers[p].reload()}_validate(n,c,p,_,T={}){return(!T||T.validate!==!1)&&oc(this,n.call(u.C,u.e({key:c,style:this.serialize(),value:p,styleSpec:u.u},_)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ne().off(al,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.tileManagers){const p=this.tileManagers[c];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.tileManagers[n].clearTiles()}_reloadSource(n){this.tileManagers[n].resume(),this.tileManagers[n].reload()}_updateSources(n){for(const c in this.tileManagers)this.tileManagers[c].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.tileManagers)this._reloadSource(n)}_updatePlacement(n,c,p,_,T=!1){let A=!1,O=!1;const R={};for(const U of this._order){const V=this._layers[U];if(V.type!=="symbol")continue;if(!R[V.source]){const X=this.tileManagers[V.source];R[V.source]=X.getRenderableIds(!0).map((re=>X.getTileByID(re))).sort(((re,oe)=>oe.tileID.overscaledZ-re.tileID.overscaledZ||(re.tileID.isLessThan(oe.tileID)?-1:1)))}const K=this.crossTileSymbolIndex.addLayer(V,R[V.source],n.center.lng);A=A||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(H(),n.zoom))&&(this.pauseablePlacement=new ec(n,this.map.terrain,this._order,T,c,p,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(H()),O=!0),A&&this.pauseablePlacement.placement.setStale()),O||A)for(const U of this._order){const V=this._layers[U];V.type==="symbol"&&this.placement.updateLayerOpacities(V,R[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(H())}_releaseSymbolFadeTiles(){for(const n in this.tileManagers)this.tileManagers[n].releaseSymbolFadeTiles()}getImages(n,c){return u._(this,void 0,void 0,(function*(){const p=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const _=this.tileManagers[c.source];return _&&_.setDependencies(c.tileID.key,c.type,c.icons),p}))}getGlyphs(n,c){return u._(this,void 0,void 0,(function*(){const p=yield this.glyphManager.getGlyphs(c.stacks),_=this.tileManagers[c.source];return _&&_.setDependencies(c.tileID.key,c.type,[""]),p}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,c={}){this._checkLoaded(),n&&this._validate(u.C.glyphs,"glyphs",n,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,c){return u._(this,void 0,void 0,(function*(){const p={};for(const[_,T]of Object.entries(c.dashes))p[_]=this.lineAtlas.getDash(T.dasharray,T.round);return p}))}addSprite(n,c,p={},_){this._checkLoaded();const T=[{id:n,url:c}],A=[...et(this.stylesheet.sprite),...T];this._validate(u.C.sprite,"sprite",A,null,p)||(this.stylesheet.sprite=A,this._loadSprite(T,!0,_))}removeSprite(n){this._checkLoaded();const c=et(this.stylesheet.sprite);if(c.find((p=>p.id===n))){if(this._spritesImagesIds[n])for(const p of this._spritesImagesIds[n])this.imageManager.removeImage(p),this._changedImages[p]=!0;c.splice(c.findIndex((p=>p.id===n)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}else this.fire(new u.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return et(this.stylesheet.sprite)}setSprite(n,c={},p){this._checkLoaded(),n&&this._validate(u.C.sprite,"sprite",n,null,c)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,p):(this._unloadSprite(),p&&p(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const n in this.tileManagers){const c=this.tileManagers[n];c.setEventedParent(null),c.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const n in this._layers){const c=this._layers[n];c.setEventedParent(null),c.onRemove&&c.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var vm=u.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ch{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,c,p,_,T,A,O,R,U){this.context=n;let V=this.boundPaintVertexBuffers.length!==_.length;for(let K=0;!V&&K<_.length;K++)this.boundPaintVertexBuffers[K]!==_[K]&&(V=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==p||V||this.boundIndexBuffer!==T||this.boundVertexOffset!==A||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==U?this.freshBind(c,p,_,T,A,O,R,U):(n.bindVertexArray.set(this.vao),O&&O.bind(),T&&T.dynamicDraw&&T.bind(),R&&R.bind(),U&&U.bind())}freshBind(n,c,p,_,T,A,O,R){const U=n.numAttributes,V=this.context,K=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=_,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=A,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,c.enableAttributes(K,n);for(const X of p)X.enableAttributes(K,n);A&&A.enableAttributes(K,n),O&&O.enableAttributes(K,n),R&&R.enableAttributes(K,n),c.bind(),c.setVertexAttribPointers(K,n,T);for(const X of p)X.bind(),X.setVertexAttribPointers(K,n,T);A&&(A.bind(),A.setVertexAttribPointers(K,n,T)),_&&_.bind(),O&&(O.bind(),O.setVertexAttribPointers(K,n,T)),R&&(R.bind(),R.setVertexAttribPointers(K,n,T)),V.currentNumAttributes=U}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const _m=(w,n,c,p,_)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:n,u_fog_color:c?c.properties.get("fog-color"):u.bp.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:_?0:c?c.calculateFogBlendOpacity(p):0,u_horizon_color:c?c.properties.get("horizon-color"):u.bp.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:_?1:0}),Ao={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Pf(w){const n=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const p=w[c].split(" ");n.push(p.pop())}return n}class xm{constructor(n,c,p,_,T,A,O,R,U=[]){const V=n.gl;this.program=V.createProgram();const K=Pf(c.staticAttributes),X=p?p.getBinderAttributes():[],re=K.concat(X),oe=pn.prelude.staticUniforms?Pf(pn.prelude.staticUniforms):[],de=O.staticUniforms?Pf(O.staticUniforms):[],ve=c.staticUniforms?Pf(c.staticUniforms):[],ye=p?p.getBinderUniforms():[],we=oe.concat(de).concat(ve).concat(ye),Ce=[];for(const He of we)Ce.indexOf(He)<0&&Ce.push(He);const be=p?p.defines():[];eo(V)&&be.unshift("#version 300 es"),T&&be.push("#define OVERDRAW_INSPECTOR;"),A&&be.push("#define TERRAIN3D;"),R&&be.push(R),U&&be.push(...U);let Pe=be.concat(pn.prelude.fragmentSource,O.fragmentSource,c.fragmentSource).join(`
`),Ie=be.concat(pn.prelude.vertexSource,O.vertexSource,c.vertexSource).join(`
`);eo(V)||(Pe=(function(He){return He.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Pe),Ie=(function(He){return He.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ie));const Ee=V.createShader(V.FRAGMENT_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Ee,Pe),V.compileShader(Ee),!V.getShaderParameter(Ee,V.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${V.getShaderInfoLog(Ee)}`);V.attachShader(this.program,Ee);const Le=V.createShader(V.VERTEX_SHADER);if(V.isContextLost())return void(this.failedToCreate=!0);if(V.shaderSource(Le,Ie),V.compileShader(Le),!V.getShaderParameter(Le,V.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${V.getShaderInfoLog(Le)}`);V.attachShader(this.program,Le),this.attributes={};const Ke={};this.numAttributes=re.length;for(let He=0;He<this.numAttributes;He++)re[He]&&(V.bindAttribLocation(this.program,He,re[He]),this.attributes[re[He]]=He);if(V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw new Error(`Program failed to link: ${V.getProgramInfoLog(this.program)}`);V.deleteShader(Le),V.deleteShader(Ee);for(let He=0;He<Ce.length;He++){const Ye=Ce[He];if(Ye&&!Ke[Ye]){const Xe=V.getUniformLocation(this.program,Ye);Xe&&(Ke[Ye]=Xe)}}this.fixedUniforms=_(n,Ke),this.terrainUniforms=((He,Ye)=>({u_depth:new u.b_(He,Ye.u_depth),u_terrain:new u.b_(He,Ye.u_terrain),u_terrain_dim:new u.bq(He,Ye.u_terrain_dim),u_terrain_matrix:new u.c0(He,Ye.u_terrain_matrix),u_terrain_unpack:new u.c1(He,Ye.u_terrain_unpack),u_terrain_exaggeration:new u.bq(He,Ye.u_terrain_exaggeration)}))(n,Ke),this.projectionUniforms=((He,Ye)=>({u_projection_matrix:new u.c0(He,Ye.u_projection_matrix),u_projection_tile_mercator_coords:new u.c1(He,Ye.u_projection_tile_mercator_coords),u_projection_clipping_plane:new u.c1(He,Ye.u_projection_clipping_plane),u_projection_transition:new u.bq(He,Ye.u_projection_transition),u_projection_fallback_matrix:new u.c0(He,Ye.u_projection_fallback_matrix)}))(n,Ke),this.binderUniforms=p?p.getUniforms(n,Ke):[]}draw(n,c,p,_,T,A,O,R,U,V,K,X,re,oe,de,ve,ye,we,Ce){const be=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(_),n.setColorMode(T),n.setCullFace(A),R){n.activeTexture.set(be.TEXTURE2),be.bindTexture(be.TEXTURE_2D,R.depthTexture),n.activeTexture.set(be.TEXTURE3),be.bindTexture(be.TEXTURE_2D,R.texture);for(const Ie in this.terrainUniforms)this.terrainUniforms[Ie].set(R[Ie])}if(U)for(const Ie in U)this.projectionUniforms[Ao[Ie]].set(U[Ie]);if(O)for(const Ie in this.fixedUniforms)this.fixedUniforms[Ie].set(O[Ie]);ve&&ve.setUniforms(n,this.binderUniforms,oe,{zoom:de});let Pe=0;switch(c){case be.LINES:Pe=2;break;case be.TRIANGLES:Pe=3;break;case be.LINE_STRIP:Pe=1}for(const Ie of re.get()){const Ee=Ie.vaos||(Ie.vaos={});(Ee[V]||(Ee[V]=new ch)).bind(n,this,K,ve?ve.getPaintVertexBuffers():[],X,Ie.vertexOffset,ye,we,Ce),be.drawElements(c,Ie.primitiveLength*Pe,be.UNSIGNED_SHORT,Ie.primitiveOffset*Pe*2)}}}function bm(w,n,c){const p=1/u.aN(c,1,n.transform.tileZoom),_=Math.pow(2,c.tileID.overscaledZ),T=c.tileSize*Math.pow(2,n.transform.tileZoom)/_,A=T*(c.tileID.canonical.x+c.tileID.wrap*_),O=T*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[p,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[A>>16,O>>16],u_pixel_coord_lower:[65535&A,65535&O]}}const Cf=(w,n,c,p)=>{const _=w.style.light,T=_.properties.get("position"),A=[T.x,T.y,T.z],O=u.c4();_.properties.get("anchor")==="viewport"&&u.c5(O,w.transform.bearingInRadians),u.c6(A,A,O);const R=w.transform.transformLightDirection(A),U=_.properties.get("color");return{u_lightpos:A,u_lightpos_globe:R,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+n,u_opacity:c,u_fill_translate:p}},Df=(w,n,c,p,_,T,A)=>u.e(Cf(w,n,c,p),bm(T,w,A),{u_height_factor:-Math.pow(2,_.overscaledZ)/A.tileSize/8}),ru=(w,n,c,p)=>u.e(bm(n,w,c),{u_fill_translate:p}),lc=(w,n)=>({u_world:w,u_fill_translate:n}),wm=(w,n,c,p,_)=>u.e(ru(w,n,c,_),{u_world:p}),hh=(w,n,c,p,_)=>{const T=w.transform;let A,O,R=0;if(c.paint.get("circle-pitch-alignment")==="map"){const U=u.aN(n,1,T.zoom);A=!0,O=[U,U],R=U/(u.a5*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*_}else A=!1,O=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+A,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:O,u_globe_extrude_scale:R,u_translate:p}},pl=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Nd=w=>({u_viewport_size:[w.width,w.height]}),fh=(w,n=1)=>({u_color:w,u_overlay:0,u_overlay_scale:n}),ml=(w,n,c,p)=>{const _=u.aN(w,1,n)/(u.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:u.aN(w,1,n),u_intensity:c,u_globe_extrude_scale:_}},Fd=(w,n,c,p)=>{const _=u.N();u.c7(_,0,w.width,w.height,0,0,1);const T=w.context.gl;return{u_matrix:_,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:c,u_color_ramp:p,u_opacity:n.paint.get("heatmap-opacity")}},dh=(w,n,c)=>{const p=c.paint.get("hillshade-accent-color");let _;switch(c.paint.get("hillshade-method")){case"basic":_=4;break;case"combined":_=1;break;case"igor":_=2;break;case"multidirectional":_=3;break;default:_=0}const T=c.getIlluminationProperties();for(let A=0;A<T.directionRadians.length;A++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[A]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:gy(0,n.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:p,u_method:_,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},Sm=(w,n)=>{const c=n.stride,p=u.N();return u.c7(p,0,u.a5,-u.a5,0,0,1),u.O(p,p,[0,-u.a5,0]),{u_matrix:p,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:n.getUnpackVector()}};function gy(w,n){const c=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new u.a9(0,p/c).toLngLat().lat,new u.a9(0,(p+1)/c).toLngLat().lat]}const Tm=(w,n,c=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:w.paint.get("color-relief-opacity")}),ph=(w,n,c,p)=>{const _=w.transform;return{u_translation:mh(w,n,c),u_ratio:p/u.aN(n,1,_.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Em=(w,n,c,p,_)=>u.e(ph(w,n,c,p),{u_image:0,u_image_height:_}),Ud=(w,n,c,p,_)=>{const T=w.transform,A=to(n,T);return{u_translation:mh(w,n,c),u_texsize:n.imageAtlasTexture.size,u_ratio:p/u.aN(n,1,T.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[A,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},ra=(w,n,c,p,_)=>{const T=to(n,w.transform);return u.e(ph(w,n,c,p),{u_tileratio:T,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image:0,u_mix:_.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},gl=(w,n,c,p,_,T)=>{const A=to(n,w.transform);return u.e(ph(w,n,c,p),{u_image:0,u_image_height:T,u_tileratio:A,u_crossfade_from:_.fromScale,u_crossfade_to:_.toScale,u_image_dash:1,u_mix:_.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function to(w,n){return 1/u.aN(w,1,n.tileZoom)}function mh(w,n,c){return u.aO(w.transform,n,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Of=(w,n,c,p,_)=>{return{u_tl_parent:w,u_scale_parent:n,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(A=p.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(T=p.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:If(p.paint.get("raster-hue-rotate")),u_coords_top:[_[0].x,_[0].y,_[1].x,_[1].y],u_coords_bottom:[_[3].x,_[3].y,_[2].x,_[2].y]};var T,A};function If(w){w*=Math.PI/180;const n=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*n-c+1)/3,(Math.sqrt(3)*n-c+1)/3]}const gh=(w,n,c,p,_,T,A,O,R,U,V,K,X)=>{const re=A.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:re.width/re.height,u_fade_change:A.options.fadeDuration?A.symbolFadeChange:1,u_label_plane_matrix:O,u_coord_matrix:R,u_is_text:+V,u_pitch_with_map:+p,u_is_along_line:_,u_is_variable_anchor:T,u_texsize:K,u_texture:0,u_translation:U,u_pitched_scale:X}},zf=(w,n,c,p,_,T,A,O,R,U,V,K,X,re)=>{const oe=A.transform;return u.e(gh(w,n,c,p,_,T,A,O,R,U,V,K,re),{u_gamma_scale:p?Math.cos(oe.pitch*Math.PI/180)*oe.cameraToCenterDistance:1,u_device_pixel_ratio:A.pixelRatio,u_is_halo:1})},ro=(w,n,c,p,_,T,A,O,R,U,V,K,X)=>u.e(zf(w,n,c,p,_,T,A,O,R,U,!0,V,0,X),{u_texsize_icon:K,u_texture_icon:1}),yh=(w,n)=>({u_opacity:w,u_color:n}),vh=(w,n,c,p,_)=>u.e((function(T,A,O,R){const U=O.imageManager.getPattern(T.from.toString()),V=O.imageManager.getPattern(T.to.toString()),{width:K,height:X}=O.imageManager.getPixelSize(),re=Math.pow(2,R.tileID.overscaledZ),oe=R.tileSize*Math.pow(2,O.transform.tileZoom)/re,de=oe*(R.tileID.canonical.x+R.tileID.wrap*re),ve=oe*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:U.tl,u_pattern_br_a:U.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[K,X],u_mix:A.t,u_pattern_size_a:U.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/u.aN(R,1,O.transform.tileZoom),u_pixel_coord_upper:[de>>16,ve>>16],u_pixel_coord_lower:[65535&de,65535&ve]}})(c,_,n,p),{u_opacity:w}),kf=(w,n)=>{},Am={fillExtrusion:(w,n)=>({u_lightpos:new u.c2(w,n.u_lightpos),u_lightpos_globe:new u.c2(w,n.u_lightpos_globe),u_lightintensity:new u.bq(w,n.u_lightintensity),u_lightcolor:new u.c2(w,n.u_lightcolor),u_vertical_gradient:new u.bq(w,n.u_vertical_gradient),u_opacity:new u.bq(w,n.u_opacity),u_fill_translate:new u.c3(w,n.u_fill_translate)}),fillExtrusionPattern:(w,n)=>({u_lightpos:new u.c2(w,n.u_lightpos),u_lightpos_globe:new u.c2(w,n.u_lightpos_globe),u_lightintensity:new u.bq(w,n.u_lightintensity),u_lightcolor:new u.c2(w,n.u_lightcolor),u_vertical_gradient:new u.bq(w,n.u_vertical_gradient),u_height_factor:new u.bq(w,n.u_height_factor),u_opacity:new u.bq(w,n.u_opacity),u_fill_translate:new u.c3(w,n.u_fill_translate),u_image:new u.b_(w,n.u_image),u_texsize:new u.c3(w,n.u_texsize),u_pixel_coord_upper:new u.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.c3(w,n.u_pixel_coord_lower),u_scale:new u.c2(w,n.u_scale),u_fade:new u.bq(w,n.u_fade)}),fill:(w,n)=>({u_fill_translate:new u.c3(w,n.u_fill_translate)}),fillPattern:(w,n)=>({u_image:new u.b_(w,n.u_image),u_texsize:new u.c3(w,n.u_texsize),u_pixel_coord_upper:new u.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.c3(w,n.u_pixel_coord_lower),u_scale:new u.c2(w,n.u_scale),u_fade:new u.bq(w,n.u_fade),u_fill_translate:new u.c3(w,n.u_fill_translate)}),fillOutline:(w,n)=>({u_world:new u.c3(w,n.u_world),u_fill_translate:new u.c3(w,n.u_fill_translate)}),fillOutlinePattern:(w,n)=>({u_world:new u.c3(w,n.u_world),u_image:new u.b_(w,n.u_image),u_texsize:new u.c3(w,n.u_texsize),u_pixel_coord_upper:new u.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.c3(w,n.u_pixel_coord_lower),u_scale:new u.c2(w,n.u_scale),u_fade:new u.bq(w,n.u_fade),u_fill_translate:new u.c3(w,n.u_fill_translate)}),circle:(w,n)=>({u_camera_to_center_distance:new u.bq(w,n.u_camera_to_center_distance),u_scale_with_map:new u.b_(w,n.u_scale_with_map),u_pitch_with_map:new u.b_(w,n.u_pitch_with_map),u_extrude_scale:new u.c3(w,n.u_extrude_scale),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_globe_extrude_scale:new u.bq(w,n.u_globe_extrude_scale),u_translate:new u.c3(w,n.u_translate)}),collisionBox:(w,n)=>({u_pixel_extrude_scale:new u.c3(w,n.u_pixel_extrude_scale)}),collisionCircle:(w,n)=>({u_viewport_size:new u.c3(w,n.u_viewport_size)}),debug:(w,n)=>({u_color:new u.b$(w,n.u_color),u_overlay:new u.b_(w,n.u_overlay),u_overlay_scale:new u.bq(w,n.u_overlay_scale)}),depth:kf,clippingMask:kf,heatmap:(w,n)=>({u_extrude_scale:new u.bq(w,n.u_extrude_scale),u_intensity:new u.bq(w,n.u_intensity),u_globe_extrude_scale:new u.bq(w,n.u_globe_extrude_scale)}),heatmapTexture:(w,n)=>({u_matrix:new u.c0(w,n.u_matrix),u_world:new u.c3(w,n.u_world),u_image:new u.b_(w,n.u_image),u_color_ramp:new u.b_(w,n.u_color_ramp),u_opacity:new u.bq(w,n.u_opacity)}),hillshade:(w,n)=>({u_image:new u.b_(w,n.u_image),u_latrange:new u.c3(w,n.u_latrange),u_exaggeration:new u.bq(w,n.u_exaggeration),u_altitudes:new u.c9(w,n.u_altitudes),u_azimuths:new u.c9(w,n.u_azimuths),u_accent:new u.b$(w,n.u_accent),u_method:new u.b_(w,n.u_method),u_shadows:new u.c8(w,n.u_shadows),u_highlights:new u.c8(w,n.u_highlights)}),hillshadePrepare:(w,n)=>({u_matrix:new u.c0(w,n.u_matrix),u_image:new u.b_(w,n.u_image),u_dimension:new u.c3(w,n.u_dimension),u_zoom:new u.bq(w,n.u_zoom),u_unpack:new u.c1(w,n.u_unpack)}),colorRelief:(w,n)=>({u_image:new u.b_(w,n.u_image),u_unpack:new u.c1(w,n.u_unpack),u_dimension:new u.c3(w,n.u_dimension),u_elevation_stops:new u.b_(w,n.u_elevation_stops),u_color_stops:new u.b_(w,n.u_color_stops),u_color_ramp_size:new u.b_(w,n.u_color_ramp_size),u_opacity:new u.bq(w,n.u_opacity)}),line:(w,n)=>({u_translation:new u.c3(w,n.u_translation),u_ratio:new u.bq(w,n.u_ratio),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new u.c3(w,n.u_units_to_pixels)}),lineGradient:(w,n)=>({u_translation:new u.c3(w,n.u_translation),u_ratio:new u.bq(w,n.u_ratio),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new u.c3(w,n.u_units_to_pixels),u_image:new u.b_(w,n.u_image),u_image_height:new u.bq(w,n.u_image_height)}),linePattern:(w,n)=>({u_translation:new u.c3(w,n.u_translation),u_texsize:new u.c3(w,n.u_texsize),u_ratio:new u.bq(w,n.u_ratio),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_image:new u.b_(w,n.u_image),u_units_to_pixels:new u.c3(w,n.u_units_to_pixels),u_scale:new u.c2(w,n.u_scale),u_fade:new u.bq(w,n.u_fade)}),lineSDF:(w,n)=>({u_translation:new u.c3(w,n.u_translation),u_ratio:new u.bq(w,n.u_ratio),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new u.c3(w,n.u_units_to_pixels),u_image:new u.b_(w,n.u_image),u_mix:new u.bq(w,n.u_mix),u_tileratio:new u.bq(w,n.u_tileratio),u_crossfade_from:new u.bq(w,n.u_crossfade_from),u_crossfade_to:new u.bq(w,n.u_crossfade_to),u_lineatlas_width:new u.bq(w,n.u_lineatlas_width),u_lineatlas_height:new u.bq(w,n.u_lineatlas_height)}),lineGradientSDF:(w,n)=>({u_translation:new u.c3(w,n.u_translation),u_ratio:new u.bq(w,n.u_ratio),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new u.c3(w,n.u_units_to_pixels),u_image:new u.b_(w,n.u_image),u_image_height:new u.bq(w,n.u_image_height),u_tileratio:new u.bq(w,n.u_tileratio),u_crossfade_from:new u.bq(w,n.u_crossfade_from),u_crossfade_to:new u.bq(w,n.u_crossfade_to),u_image_dash:new u.b_(w,n.u_image_dash),u_mix:new u.bq(w,n.u_mix),u_lineatlas_width:new u.bq(w,n.u_lineatlas_width),u_lineatlas_height:new u.bq(w,n.u_lineatlas_height)}),raster:(w,n)=>({u_tl_parent:new u.c3(w,n.u_tl_parent),u_scale_parent:new u.bq(w,n.u_scale_parent),u_buffer_scale:new u.bq(w,n.u_buffer_scale),u_fade_t:new u.bq(w,n.u_fade_t),u_opacity:new u.bq(w,n.u_opacity),u_image0:new u.b_(w,n.u_image0),u_image1:new u.b_(w,n.u_image1),u_brightness_low:new u.bq(w,n.u_brightness_low),u_brightness_high:new u.bq(w,n.u_brightness_high),u_saturation_factor:new u.bq(w,n.u_saturation_factor),u_contrast_factor:new u.bq(w,n.u_contrast_factor),u_spin_weights:new u.c2(w,n.u_spin_weights),u_coords_top:new u.c1(w,n.u_coords_top),u_coords_bottom:new u.c1(w,n.u_coords_bottom)}),symbolIcon:(w,n)=>({u_is_size_zoom_constant:new u.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.b_(w,n.u_is_size_feature_constant),u_size_t:new u.bq(w,n.u_size_t),u_size:new u.bq(w,n.u_size),u_camera_to_center_distance:new u.bq(w,n.u_camera_to_center_distance),u_pitch:new u.bq(w,n.u_pitch),u_rotate_symbol:new u.b_(w,n.u_rotate_symbol),u_aspect_ratio:new u.bq(w,n.u_aspect_ratio),u_fade_change:new u.bq(w,n.u_fade_change),u_label_plane_matrix:new u.c0(w,n.u_label_plane_matrix),u_coord_matrix:new u.c0(w,n.u_coord_matrix),u_is_text:new u.b_(w,n.u_is_text),u_pitch_with_map:new u.b_(w,n.u_pitch_with_map),u_is_along_line:new u.b_(w,n.u_is_along_line),u_is_variable_anchor:new u.b_(w,n.u_is_variable_anchor),u_texsize:new u.c3(w,n.u_texsize),u_texture:new u.b_(w,n.u_texture),u_translation:new u.c3(w,n.u_translation),u_pitched_scale:new u.bq(w,n.u_pitched_scale)}),symbolSDF:(w,n)=>({u_is_size_zoom_constant:new u.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.b_(w,n.u_is_size_feature_constant),u_size_t:new u.bq(w,n.u_size_t),u_size:new u.bq(w,n.u_size),u_camera_to_center_distance:new u.bq(w,n.u_camera_to_center_distance),u_pitch:new u.bq(w,n.u_pitch),u_rotate_symbol:new u.b_(w,n.u_rotate_symbol),u_aspect_ratio:new u.bq(w,n.u_aspect_ratio),u_fade_change:new u.bq(w,n.u_fade_change),u_label_plane_matrix:new u.c0(w,n.u_label_plane_matrix),u_coord_matrix:new u.c0(w,n.u_coord_matrix),u_is_text:new u.b_(w,n.u_is_text),u_pitch_with_map:new u.b_(w,n.u_pitch_with_map),u_is_along_line:new u.b_(w,n.u_is_along_line),u_is_variable_anchor:new u.b_(w,n.u_is_variable_anchor),u_texsize:new u.c3(w,n.u_texsize),u_texture:new u.b_(w,n.u_texture),u_gamma_scale:new u.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_is_halo:new u.b_(w,n.u_is_halo),u_translation:new u.c3(w,n.u_translation),u_pitched_scale:new u.bq(w,n.u_pitched_scale)}),symbolTextAndIcon:(w,n)=>({u_is_size_zoom_constant:new u.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.b_(w,n.u_is_size_feature_constant),u_size_t:new u.bq(w,n.u_size_t),u_size:new u.bq(w,n.u_size),u_camera_to_center_distance:new u.bq(w,n.u_camera_to_center_distance),u_pitch:new u.bq(w,n.u_pitch),u_rotate_symbol:new u.b_(w,n.u_rotate_symbol),u_aspect_ratio:new u.bq(w,n.u_aspect_ratio),u_fade_change:new u.bq(w,n.u_fade_change),u_label_plane_matrix:new u.c0(w,n.u_label_plane_matrix),u_coord_matrix:new u.c0(w,n.u_coord_matrix),u_is_text:new u.b_(w,n.u_is_text),u_pitch_with_map:new u.b_(w,n.u_pitch_with_map),u_is_along_line:new u.b_(w,n.u_is_along_line),u_is_variable_anchor:new u.b_(w,n.u_is_variable_anchor),u_texsize:new u.c3(w,n.u_texsize),u_texsize_icon:new u.c3(w,n.u_texsize_icon),u_texture:new u.b_(w,n.u_texture),u_texture_icon:new u.b_(w,n.u_texture_icon),u_gamma_scale:new u.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new u.bq(w,n.u_device_pixel_ratio),u_is_halo:new u.b_(w,n.u_is_halo),u_translation:new u.c3(w,n.u_translation),u_pitched_scale:new u.bq(w,n.u_pitched_scale)}),background:(w,n)=>({u_opacity:new u.bq(w,n.u_opacity),u_color:new u.b$(w,n.u_color)}),backgroundPattern:(w,n)=>({u_opacity:new u.bq(w,n.u_opacity),u_image:new u.b_(w,n.u_image),u_pattern_tl_a:new u.c3(w,n.u_pattern_tl_a),u_pattern_br_a:new u.c3(w,n.u_pattern_br_a),u_pattern_tl_b:new u.c3(w,n.u_pattern_tl_b),u_pattern_br_b:new u.c3(w,n.u_pattern_br_b),u_texsize:new u.c3(w,n.u_texsize),u_mix:new u.bq(w,n.u_mix),u_pattern_size_a:new u.c3(w,n.u_pattern_size_a),u_pattern_size_b:new u.c3(w,n.u_pattern_size_b),u_scale_a:new u.bq(w,n.u_scale_a),u_scale_b:new u.bq(w,n.u_scale_b),u_pixel_coord_upper:new u.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.c3(w,n.u_pixel_coord_lower),u_tile_units_to_pixels:new u.bq(w,n.u_tile_units_to_pixels)}),terrain:(w,n)=>({u_texture:new u.b_(w,n.u_texture),u_ele_delta:new u.bq(w,n.u_ele_delta),u_fog_matrix:new u.c0(w,n.u_fog_matrix),u_fog_color:new u.b$(w,n.u_fog_color),u_fog_ground_blend:new u.bq(w,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.bq(w,n.u_fog_ground_blend_opacity),u_horizon_color:new u.b$(w,n.u_horizon_color),u_horizon_fog_blend:new u.bq(w,n.u_horizon_fog_blend),u_is_globe_mode:new u.bq(w,n.u_is_globe_mode)}),terrainDepth:(w,n)=>({u_ele_delta:new u.bq(w,n.u_ele_delta)}),terrainCoords:(w,n)=>({u_texture:new u.b_(w,n.u_texture),u_terrain_coords_id:new u.bq(w,n.u_terrain_coords_id),u_ele_delta:new u.bq(w,n.u_ele_delta)}),projectionErrorMeasurement:(w,n)=>({u_input:new u.bq(w,n.u_input),u_output_expected:new u.bq(w,n.u_output_expected)}),atmosphere:(w,n)=>({u_sun_pos:new u.c2(w,n.u_sun_pos),u_atmosphere_blend:new u.bq(w,n.u_atmosphere_blend),u_globe_position:new u.c2(w,n.u_globe_position),u_globe_radius:new u.bq(w,n.u_globe_radius),u_inv_proj_matrix:new u.c0(w,n.u_inv_proj_matrix)}),sky:(w,n)=>({u_sky_color:new u.b$(w,n.u_sky_color),u_horizon_color:new u.b$(w,n.u_horizon_color),u_horizon:new u.c3(w,n.u_horizon),u_horizon_normal:new u.c3(w,n.u_horizon_normal),u_sky_horizon_blend:new u.bq(w,n.u_sky_horizon_blend),u_sky_blend:new u.bq(w,n.u_sky_blend)})};class nu{constructor(n,c,p){this.context=n;const _=n.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const iu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Vd{constructor(n,c,p,_){this.length=c.length,this.attributes=p,this.itemSize=c.bytesPerElement,this.dynamicDraw=_,this.context=n;const T=n.gl;this.buffer=T.createBuffer(),n.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,c){for(let p=0;p<this.attributes.length;p++){const _=c.attributes[this.attributes[p].name];_!==void 0&&n.enableVertexAttribArray(_)}}setVertexAttribPointers(n,c,p){for(let _=0;_<this.attributes.length;_++){const T=this.attributes[_],A=c.attributes[T.name];A!==void 0&&n.vertexAttribPointer(A,T.components,n[iu[T.type]],!1,this.itemSize,T.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zr{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jo extends zr{getDefault(){return u.bp.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class _h extends zr{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class xh extends zr{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Rf extends zr{getDefault(){return[!0,!0,!0,!0]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class au extends zr{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class bh extends zr{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class uc extends zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const c=this.current;(n.func!==c.func||n.ref!==c.ref||n.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Da extends zr{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class qd extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=n,this.dirty=!1}}class Lf extends zr{getDefault(){return[0,1]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Oa extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=n,this.dirty=!1}}class es extends zr{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Zi extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.BLEND):c.disable(c.BLEND),this.current=n,this.dirty=!1}}class Cs extends zr{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class ou extends zr{getDefault(){return u.bp.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class su extends zr{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class wh extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=n,this.dirty=!1}}class yl extends zr{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class no extends zr{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class $d extends zr{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class cc extends zr{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class pr extends zr{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class jf extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Ia extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Bf extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class za extends zr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Mm extends zr{getDefault(){return null}set(n){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Nf extends zr{getDefault(){return null}set(n){var c;if(n===this.current&&!this.dirty)return;const p=this.gl;eo(p)?p.bindVertexArray(n):(c=p.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class vl extends zr{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Gd extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Ff extends zr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class _l extends zr{constructor(n,c){super(n),this.context=n,this.parent=c}getDefault(){return null}}class hc extends _l{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Hi extends _l{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class xl extends _l{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const bl="Framebuffer is not complete";class lu{constructor(n,c,p,_,T){this.context=n,this.width=c,this.height=p;const A=n.gl,O=this.framebuffer=A.createFramebuffer();if(this.colorAttachment=new hc(n,O),_)this.depthAttachment=T?new xl(n,O):new Hi(n,O);else if(T)throw new Error("Stencil cannot be set without depth");if(A.checkFramebufferStatus(A.FRAMEBUFFER)!==A.FRAMEBUFFER_COMPLETE)throw new Error(bl)}destroy(){const n=this.context.gl,c=this.colorAttachment.get();if(c&&n.deleteTexture(c),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class wl{constructor(n){var c,p;if(this.gl=n,this.clearColor=new Jo(this),this.clearDepth=new _h(this),this.clearStencil=new xh(this),this.colorMask=new Rf(this),this.depthMask=new au(this),this.stencilMask=new bh(this),this.stencilFunc=new uc(this),this.stencilOp=new Da(this),this.stencilTest=new qd(this),this.depthRange=new Lf(this),this.depthTest=new Oa(this),this.depthFunc=new es(this),this.blend=new Zi(this),this.blendFunc=new Cs(this),this.blendColor=new ou(this),this.blendEquation=new su(this),this.cullFace=new wh(this),this.cullFaceSide=new yl(this),this.frontFace=new no(this),this.program=new $d(this),this.activeTexture=new cc(this),this.viewport=new pr(this),this.bindFramebuffer=new jf(this),this.bindRenderbuffer=new Ia(this),this.bindTexture=new Bf(this),this.bindVertexBuffer=new za(this),this.bindElementBuffer=new Mm(this),this.bindVertexArray=new Nf(this),this.pixelStoreUnpack=new vl(this),this.pixelStoreUnpackPremultiplyAlpha=new Gd(this),this.pixelStoreUnpackFlipY=new Ff(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),eo(n)){this.HALF_FLOAT=n.HALF_FLOAT;const _=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=n.RGBA16F)!==null&&c!==void 0?c:_?.RGBA16F_EXT,this.RGB16F=(p=n.RGB16F)!==null&&p!==void 0?p:_?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const _=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,c){return new nu(this,n,c)}createVertexBuffer(n,c,p){return new Vd(this,n,c,p)}createRenderbuffer(n,c,p){const _=this.gl,T=_.createRenderbuffer();return this.bindRenderbuffer.set(T),_.renderbufferStorage(_.RENDERBUFFER,n,c,p),this.bindRenderbuffer.set(null),T}createFramebuffer(n,c,p,_){return new lu(this,n,c,p,_)}clear({color:n,depth:c,stencil:p}){const _=this.gl;let T=0;n&&(T|=_.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(T|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),p!==void 0&&(T|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),_.clear(T)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){u.bR(n.blendFunction,$r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return eo(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var c;return eo(this.gl)?this.gl.deleteVertexArray(n):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let ui;function di(w,n,c,p,_){const T=w.context,A=w.transform,O=T.gl,R=w.useProgram("collisionBox"),U=[];let V=0,K=0;for(let ye=0;ye<p.length;ye++){const we=p[ye],Ce=n.getTile(we).getBucket(c);if(!Ce)continue;const be=_?Ce.textCollisionBox:Ce.iconCollisionBox,Pe=Ce.collisionCircleArray;Pe.length>0&&(U.push({circleArray:Pe,circleOffset:K,coord:we}),V+=Pe.length/4,K=V),be&&R.draw(T,O.LINES,dr.disabled,Er.disabled,w.colorModeForRenderPass(),br.disabled,pl(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(we),A.getProjectionData({overscaledTileID:we,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,w.transform.zoom,null,null,be.collisionVertexBuffer)}if(!_||!U.length)return;const X=w.useProgram("collisionCircle"),re=new u.ca;re.resize(4*V),re._trim();let oe=0;for(const ye of U)for(let we=0;we<ye.circleArray.length/4;we++){const Ce=4*we,be=ye.circleArray[Ce+0],Pe=ye.circleArray[Ce+1],Ie=ye.circleArray[Ce+2],Ee=ye.circleArray[Ce+3];re.emplace(oe++,be,Pe,Ie,Ee,0),re.emplace(oe++,be,Pe,Ie,Ee,1),re.emplace(oe++,be,Pe,Ie,Ee,2),re.emplace(oe++,be,Pe,Ie,Ee,3)}(!ui||ui.length<2*V)&&(ui=(function(ye){const we=2*ye,Ce=new u.cc;Ce.resize(we),Ce._trim();for(let be=0;be<we;be++){const Pe=6*be;Ce.uint16[Pe+0]=4*be+0,Ce.uint16[Pe+1]=4*be+1,Ce.uint16[Pe+2]=4*be+2,Ce.uint16[Pe+3]=4*be+2,Ce.uint16[Pe+4]=4*be+3,Ce.uint16[Pe+5]=4*be+0}return Ce})(V));const de=T.createIndexBuffer(ui,!0),ve=T.createVertexBuffer(re,u.cb.members,!0);for(const ye of U){const we=Nd(w.transform);X.draw(T,O.TRIANGLES,dr.disabled,Er.disabled,w.colorModeForRenderPass(),br.disabled,we,w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye.coord),null,c.id,ve,de,u.aX.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,w.transform.zoom,null,null,null)}ve.destroy(),de.destroy()}const ts=u.ar(new Float32Array(16));function rs(w,n,c,p,_,T){const{horizontalAlign:A,verticalAlign:O}=u.aS(w);return new u.P((-(A-.5)*n/_+p[0])*T,(-(O-.5)*c/_+p[1])*T)}function na(w,n,c,p,_,T){const A=n.tileAnchorPoint.add(new u.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let O=p.mult(T);c||(O=O.rotate(-_));const R=A.add(O);return fr(R.x,R.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(c){const O=Tr(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(w),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return w.add(p.rotate(R))}return w.add(p)}function Ds(w,n,c,p,_,T,A,O,R,U,V,K){const X=w.text.placedSymbolArray,re=w.text.dynamicLayoutVertexArray,oe=w.icon.dynamicLayoutVertexArray,de={};re.clear();for(let ve=0;ve<X.length;ve++){const ye=X.get(ve),we=ye.hidden||!ye.crossTileID||w.allowVerticalPlacement&&!ye.placedOrientation?null:p[ye.crossTileID];if(we){const Ce=new u.P(ye.anchorX,ye.anchorY),be={getElevation:K,width:_.width,height:_.height,pitchedLabelPlaneMatrix:T,pitchWithMap:c,transform:_,tileAnchorPoint:Ce,translation:U,unwrappedTileID:V},Pe=c?Ku(Ce.x,Ce.y,be):Tr(Ce.x,Ce.y,be),Ie=Hl(_.cameraToCenterDistance,Pe.signedDistanceFromCamera);let Ee=u.aA(w.textSizeData,O,ye)*Ie/u.aM;c&&(Ee*=w.tilePixelRatio/A);const{width:Le,height:Ke,anchor:He,textOffset:Ye,textBoxScale:Xe}=we,At=rs(He,Le,Ke,Ye,Xe,Ee),Mt=_.getPitchedTextCorrection(Ce.x+U[0],Ce.y+U[1],V),dt=na(Pe.point,be,n,At,-_.bearingInRadians,Mt),Ot=w.allowVerticalPlacement&&ye.placedOrientation===u.az.vertical?Math.PI/2:0;for(let lr=0;lr<ye.numGlyphs;lr++)u.aG(re,dt,Ot);R&&ye.associatedIconIndex>=0&&(de[ye.associatedIconIndex]={shiftedAnchor:dt,angle:Ot})}else Xo(ye.numGlyphs,re)}if(R){oe.clear();const ve=w.icon.placedSymbolArray;for(let ye=0;ye<ve.length;ye++){const we=ve.get(ye);if(we.hidden)Xo(we.numGlyphs,oe);else{const Ce=de[ye];if(Ce)for(let be=0;be<we.numGlyphs;be++)u.aG(oe,Ce.shiftedAnchor,Ce.angle);else Xo(we.numGlyphs,oe)}}w.icon.dynamicLayoutVertexBuffer.updateData(oe)}w.text.dynamicLayoutVertexBuffer.updateData(re)}function Zd(w,n,c){return c.iconsInText&&n?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function uu(w,n,c,p,_,T,A,O,R,U,V,K,X){const re=w.context,oe=re.gl,de=w.transform,ve=O==="map",ye=R==="map",we=O!=="viewport"&&c.layout.get("symbol-placement")!=="point",Ce=ve&&!ye&&!we,be=!c.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Ie=w.getDepthModeForSublayer(0,dr.ReadOnly),Ee=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Le=[],Ke=de.getCircleRadiusCorrection();for(const He of p){const Ye=n.getTile(He),Xe=Ye.getBucket(c);if(!Xe)continue;const At=_?Xe.text:Xe.icon;if(!At||!At.segments.get().length||!At.hasVisibleVertices)continue;const Mt=At.programConfigurations.get(c.id),dt=_||Xe.sdfIcons,Ot=_?Xe.textSizeData:Xe.iconSizeData,lr=ye||de.pitch!==0,Br=w.useProgram(Zd(dt,_,Xe),Mt),rn=u.ay(Ot,de.zoom),Kr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(He);let cn,Gr,En,hn,mi=[0,0],Ln=null;if(_)Gr=Ye.glyphAtlasTexture,En=oe.LINEAR,cn=Ye.glyphAtlasTexture.size,Xe.iconsInText&&(mi=Ye.imageAtlasTexture.size,Ln=Ye.imageAtlasTexture,hn=lr||w.options.rotating||w.options.zooming||Ot.kind==="composite"||Ot.kind==="camera"?oe.LINEAR:oe.NEAREST);else{const Vr=c.layout.get("icon-size").constantOr(0)!==1||Xe.iconsNeedLinear;Gr=Ye.imageAtlasTexture,En=dt||w.options.rotating||w.options.zooming||Vr||lr?oe.LINEAR:oe.NEAREST,cn=Ye.imageAtlasTexture.size}const jn=u.aN(Ye,1,w.transform.zoom),gi=Ma(ve,w.transform,jn),ms=u.N();u.aB(ms,gi);const gs=Sf(ye,ve,w.transform,jn),zo=u.aO(de,Ye,T,A),sa=de.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),vu=Ee&&Xe.hasTextData(),bc=c.layout.get("icon-text-fit")!=="none"&&vu&&Xe.hasIconData();if(we){const Vr=w.style.map.terrain?(Yn,ti)=>w.style.map.terrain.getElevation(He,Yn,ti):null,Qr=c.layout.get("text-rotation-alignment")==="map";As(Xe,w,_,gi,ms,ye,U,Qr,He.toUnwrapped(),de.width,de.height,zo,Vr)}const ko=_&&Ee||bc,la=we||ko?ts:ye?gi:w.transform.clipSpaceToPixelsMatrix,Ba=dt&&c.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let uo;uo=dt?Xe.iconsInText?ro(Ot.kind,rn,Ce,ye,we,ko,w,la,gs,zo,cn,mi,Ke):zf(Ot.kind,rn,Ce,ye,we,ko,w,la,gs,zo,_,cn,0,Ke):gh(Ot.kind,rn,Ce,ye,we,ko,w,la,gs,zo,_,cn,Ke);const co={program:Br,buffers:At,uniformValues:uo,projectionData:sa,atlasTexture:Gr,atlasTextureIcon:Ln,atlasInterpolation:En,atlasInterpolationIcon:hn,isSDF:dt,hasHalo:Ba};if(be&&Xe.canOverlap){Pe=!0;const Vr=At.segments.get();for(const Qr of Vr)Le.push({segments:new u.aX([Qr]),sortKey:Qr.sortKey,state:co,terrainData:Kr})}else Le.push({segments:At.segments,sortKey:0,state:co,terrainData:Kr})}Pe&&Le.sort(((He,Ye)=>He.sortKey-Ye.sortKey));for(const He of Le){const Ye=He.state;if(re.activeTexture.set(oe.TEXTURE0),Ye.atlasTexture.bind(Ye.atlasInterpolation,oe.CLAMP_TO_EDGE),Ye.atlasTextureIcon&&(re.activeTexture.set(oe.TEXTURE1),Ye.atlasTextureIcon&&Ye.atlasTextureIcon.bind(Ye.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),Ye.isSDF){const Xe=Ye.uniformValues;Ye.hasHalo&&(Xe.u_is_halo=1,fc(Ye.buffers,He.segments,c,w,Ye.program,Ie,V,K,Xe,Ye.projectionData,He.terrainData)),Xe.u_is_halo=0}fc(Ye.buffers,He.segments,c,w,Ye.program,Ie,V,K,Ye.uniformValues,Ye.projectionData,He.terrainData)}}function fc(w,n,c,p,_,T,A,O,R,U,V){const K=p.context;_.draw(K,K.gl.TRIANGLES,T,A,O,br.backCCW,R,V,U,c.id,w.layoutVertexBuffer,w.indexBuffer,n,c.paint,p.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Hd(w,n,c,p,_){const T=w.context,A=T.gl,O=Er.disabled,R=new $r([A.ONE,A.ONE],u.bp.transparent,[!0,!0,!0,!0]),U=n.getBucket(c);if(!U)return;const V=p.key;let K=c.heatmapFbos.get(V);K||(K=Xr(T,n.tileSize,n.tileSize),c.heatmapFbos.set(V,K)),T.bindFramebuffer.set(K.framebuffer),T.viewport.set([0,0,n.tileSize,n.tileSize]),T.clear({color:u.bp.transparent});const X=U.programConfigurations.get(c.id),re=w.useProgram("heatmap",X,!_),oe=w.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),de=w.style.map.terrain.getTerrainData(p);re.draw(T,A.TRIANGLES,dr.disabled,O,R,br.disabled,ml(n,w.transform.zoom,c.paint.get("heatmap-intensity"),1),de,oe,c.id,U.layoutVertexBuffer,U.indexBuffer,U.segments,c.paint,w.transform.zoom,X)}function pi(w,n,c,p,_){const T=w.context,A=T.gl,O=w.transform;T.setColorMode(w.colorModeForRenderPass());const R=Sr(T,n),U=c.key,V=n.heatmapFbos.get(U);if(!V)return;T.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,V.colorAttachment.get()),T.activeTexture.set(A.TEXTURE1),R.bind(A.LINEAR,A.CLAMP_TO_EDGE);const K=O.getProjectionData({overscaledTileID:c,applyTerrainMatrix:_,applyGlobeMatrix:!p});w.useProgram("heatmapTexture").draw(T,A.TRIANGLES,dr.disabled,Er.disabled,w.colorModeForRenderPass(),br.disabled,Fd(w,n,0,1),null,K,n.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,n.paint,O.zoom),V.destroy(),n.heatmapFbos.delete(U)}function Xr(w,n,c){var p,_;const T=w.gl,A=T.createTexture();T.bindTexture(T.TEXTURE_2D,A),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const O=(p=w.HALF_FLOAT)!==null&&p!==void 0?p:T.UNSIGNED_BYTE,R=(_=w.RGBA16F)!==null&&_!==void 0?_:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,R,n,c,0,T.RGBA,O,null);const U=w.createFramebuffer(n,c,!1,!1);return U.colorAttachment.set(A),U}function Sr(w,n){return n.colorRampTexture||(n.colorRampTexture=new u.T(w,n.colorRamp,w.gl.RGBA)),n.colorRampTexture}function Os(w,n,c,p,_,T,A,O){let R=256;if(_.stepInterpolant){const U=n.getSource().maxzoom,V=A.canonical.z===U?Math.ceil(1<<w.transform.maxZoom-A.canonical.z):1;R=u.an(u.ce(T.maxLineLength/u.a5*1024*V),256,c.maxTextureSize)}return O.gradient=u.cf({expression:_.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:O.gradient||void 0,clips:T.lineClipsArray}),O.texture?O.texture.update(O.gradient):O.texture=new u.T(c,O.gradient,p.RGBA),O.version=_.gradientVersion,O.texture}function ka(w,n,c,p,_){w.activeTexture.set(n.TEXTURE0),c.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),p.updatePaintBuffers(_)}function Sn(w,n,c,p,_,T){(_||w.lineAtlas.dirty)&&(n.activeTexture.set(c.TEXTURE0),w.lineAtlas.bind(n)),p.updatePaintBuffers(T)}function ia(w,n,c,p,_,T,A){const O=T.gradients[_.id];let R=O.texture;_.gradientVersion!==O.version&&(R=Os(w,n,c,p,_,T,A,O)),c.activeTexture.set(p.TEXTURE0),R.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE)}function aa(w,n,c,p,_,T,A,O,R){const U=T.gradients[_.id];let V=U.texture;_.gradientVersion!==U.version&&(V=Os(w,n,c,p,_,T,A,U)),c.activeTexture.set(p.TEXTURE0),V.bind(_.stepInterpolant?p.NEAREST:p.LINEAR,p.CLAMP_TO_EDGE),c.activeTexture.set(p.TEXTURE1),w.lineAtlas.bind(c),O.updatePaintBuffers(R)}function Sh(w,n,c,p,_){if(!c||!p||!p.imageAtlas)return;const T=p.imageAtlas.patternPositions;let A=T[c.to.toString()],O=T[c.from.toString()];if(!A&&O&&(A=O),!O&&A&&(O=A),!A||!O){const R=_.getPaintProperty(n);A=T[R],O=T[R]}A&&O&&w.setConstantPatternPositions(A,O)}function ns(w,n,c,p,_,T,A,O){const R=w.context.gl,U="fill-pattern",V=c.paint.get(U),K=V&&V.constantOr(1),X=c.getCrossfadeParameters();let re,oe,de,ve,ye;const we=w.transform,Ce=c.paint.get("fill-translate"),be=c.paint.get("fill-translate-anchor");A?(oe=K&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",re=R.LINES):(oe=K?"fillPattern":"fill",re=R.TRIANGLES);const Pe=V.constantOr(null);for(const Ie of p){const Ee=n.getTile(Ie);if(K&&!Ee.patternsLoaded())continue;const Le=Ee.getBucket(c);if(!Le)continue;const Ke=Le.programConfigurations.get(c.id),He=w.useProgram(oe,Ke),Ye=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ie);K&&(w.context.activeTexture.set(R.TEXTURE0),Ee.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Ke.updatePaintBuffers(X)),Sh(Ke,U,Pe,Ee,c);const Xe=we.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),At=u.aO(we,Ee,Ce,be);if(A){ve=Le.indexBuffer2,ye=Le.segments2;const dt=[R.drawingBufferWidth,R.drawingBufferHeight];de=oe==="fillOutlinePattern"&&K?wm(w,X,Ee,dt,At):lc(dt,At)}else ve=Le.indexBuffer,ye=Le.segments,de=K?ru(w,X,Ee,At):{u_fill_translate:At};const Mt=w.stencilModeForClipping(Ie);He.draw(w.context,re,_,Mt,T,br.backCCW,de,Ye,Xe,c.id,Le.layoutVertexBuffer,ve,ye,c.paint,w.transform.zoom,Ke)}}function is(w,n,c,p,_,T,A,O){const R=w.context,U=R.gl,V="fill-extrusion-pattern",K=c.paint.get(V),X=K.constantOr(1),re=c.getCrossfadeParameters(),oe=c.paint.get("fill-extrusion-opacity"),de=K.constantOr(null),ve=w.transform;for(const ye of p){const we=n.getTile(ye),Ce=we.getBucket(c);if(!Ce)continue;const be=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye),Pe=Ce.programConfigurations.get(c.id),Ie=w.useProgram(X?"fillExtrusionPattern":"fillExtrusion",Pe);X&&(w.context.activeTexture.set(U.TEXTURE0),we.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Pe.updatePaintBuffers(re));const Ee=ve.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!O,applyTerrainMatrix:!0});Sh(Pe,V,de,we,c);const Le=u.aO(ve,we,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ke=c.paint.get("fill-extrusion-vertical-gradient"),He=X?Df(w,Ke,oe,Le,ye,re,we):Cf(w,Ke,oe,Le);Ie.draw(R,R.gl.TRIANGLES,_,T,A,br.backCCW,He,be,Ee,c.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,c.paint,w.transform.zoom,Pe,w.style.map.terrain&&Ce.centroidVertexBuffer)}}function as(w,n,c,p,_,T,A,O,R){var U;const V=w.style.projection,K=w.context,X=w.transform,re=K.gl,oe=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],de=w.useProgram("hillshade",null,!1,oe),ve=!w.options.moving;for(const ye of p){const we=n.getTile(ye),Ce=we.fbo;if(!Ce)continue;const be=V.getMeshFromTileID(K,ye.canonical,O,!0,"raster"),Pe=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(ye);K.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,Ce.colorAttachment.get());const Ie=X.getProjectionData({overscaledTileID:ye,aligned:ve,applyGlobeMatrix:!R,applyTerrainMatrix:!0});de.draw(K,re.TRIANGLES,T,_[ye.overscaledZ],A,br.backCCW,dh(w,we,c),Pe,Ie,c.id,be.vertexBuffer,be.indexBuffer,be.segments)}}function Is(w,n,c,p,_,T,A,O,R){var U;const V=w.style.projection,K=w.context,X=w.transform,re=K.gl,oe=w.useProgram("colorRelief"),de=!w.options.moving;let ve=!0,ye=0;for(const we of p){const Ce=n.getTile(we),be=Ce.dem;if(ve){const He=re.getParameter(re.MAX_TEXTURE_SIZE),{elevationTexture:Ye,colorTexture:Xe}=c.getColorRampTextures(K,He,be.getUnpackVector());K.activeTexture.set(re.TEXTURE1),Ye.bind(re.NEAREST,re.CLAMP_TO_EDGE),K.activeTexture.set(re.TEXTURE4),Xe.bind(re.LINEAR,re.CLAMP_TO_EDGE),ve=!1,ye=Ye.size[0]}if(!be||!be.data)continue;const Pe=be.stride,Ie=be.getPixels();if(K.activeTexture.set(re.TEXTURE0),K.pixelStoreUnpackPremultiplyAlpha.set(!1),Ce.demTexture=Ce.demTexture||w.getTileTexture(Pe),Ce.demTexture){const He=Ce.demTexture;He.update(Ie,{premultiply:!1}),He.bind(re.LINEAR,re.CLAMP_TO_EDGE)}else Ce.demTexture=new u.T(K,Ie,re.RGBA,{premultiply:!1}),Ce.demTexture.bind(re.LINEAR,re.CLAMP_TO_EDGE);const Ee=V.getMeshFromTileID(K,we.canonical,O,!0,"raster"),Le=(U=w.style.map.terrain)===null||U===void 0?void 0:U.getTerrainData(we),Ke=X.getProjectionData({overscaledTileID:we,aligned:de,applyGlobeMatrix:!R,applyTerrainMatrix:!0});oe.draw(K,re.TRIANGLES,T,_[we.overscaledZ],A,br.backCCW,Tm(c,Ce.dem,ye),Le,Ke,c.id,Ee.vertexBuffer,Ee.indexBuffer,Ee.segments)}}const zs=[new u.P(0,0),new u.P(u.a5,0),new u.P(u.a5,u.a5),new u.P(0,u.a5)];function io(w,n,c,p,_,T,A,O,R=!1,U=!1){const V=p[p.length-1].overscaledZ,K=w.context,X=K.gl,re=w.useProgram("raster"),oe=w.transform,de=w.style.projection,ve=w.colorModeForRenderPass(),ye=!w.options.moving,we=c.paint.get("raster-opacity"),Ce=c.paint.get("raster-resampling"),be=c.paint.get("raster-fade-duration"),Pe=!!w.style.map.terrain;for(const Ie of p){const Ee=w.getDepthModeForSublayer(Ie.overscaledZ-V,we===1?dr.ReadWrite:dr.ReadOnly,X.LESS),Le=n.getTile(Ie),Ke=Ce==="nearest"?X.NEAREST:X.LINEAR;K.activeTexture.set(X.TEXTURE0),Le.texture.bind(Ke,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),K.activeTexture.set(X.TEXTURE1);const{parentTile:He,parentScaleBy:Ye,parentTopLeft:Xe,fadeValues:At}=os(Le,n,be,Pe);Le.fadeOpacity=At.tileOpacity,He?(He.fadeOpacity=At.parentTileOpacity,He.texture.bind(Ke,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST)):Le.texture.bind(Ke,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),Le.texture.useMipmap&&K.extTextureFilterAnisotropic&&w.transform.pitch>20&&X.texParameterf(X.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const Mt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ie),dt=oe.getProjectionData({overscaledTileID:Ie,aligned:ye,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Ot=Of(Xe,Ye,At.fadeMix,c,O),lr=de.getMeshFromTileID(K,Ie.canonical,T,A,"raster");re.draw(K,X.TRIANGLES,Ee,_?_[Ie.overscaledZ]:Er.disabled,ve,R?br.frontCCW:br.backCCW,Ot,Mt,dt,c.id,lr.vertexBuffer,lr.indexBuffer,lr.segments)}}function os(w,n,c,p){const _={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(c===0||p)return _;if(w.fadingParentID){const T=n.getLoadedTile(w.fadingParentID);if(!T)return _;const A=Math.pow(2,T.tileID.overscaledZ-w.tileID.overscaledZ),O=[w.tileID.canonical.x*A%1,w.tileID.canonical.y*A%1],R=(function(U,V,K){const X=H(),re=(X-V.timeAdded)/K,oe=U.fadingDirection===Te.Incoming,de=u.an((X-U.timeAdded)/K,0,1),ve=u.an(1-re,0,1),ye=oe?de:ve;return{tileOpacity:ye,parentTileOpacity:oe?ve:de,fadeMix:{opacity:1,mix:1-ye}}})(w,T,c);return{parentTile:T,parentScaleBy:A,parentTopLeft:O,fadeValues:R}}if(w.selfFading){const T=(function(A,O){const R=(H()-A.timeAdded)/O,U=u.an(R,0,1);return{tileOpacity:U,fadeMix:{opacity:U,mix:0}}})(w,c);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:T}}return _}const ks=new u.bp(1,0,0,1),ss=new u.bp(0,1,0,1),Uf=new u.bp(0,0,1,1),Vf=new u.bp(1,0,1,1),Ra=new u.bp(0,1,1,1);function dc(w,n,c,p){Wn(w,0,n+c/2,w.transform.width,c,p)}function Rs(w,n,c,p){Wn(w,n-c/2,0,c,w.transform.height,p)}function Wn(w,n,c,p,_,T){const A=w.context,O=A.gl;O.enable(O.SCISSOR_TEST),O.scissor(n*w.pixelRatio,c*w.pixelRatio,p*w.pixelRatio,_*w.pixelRatio),A.clear({color:T}),O.disable(O.SCISSOR_TEST)}function Th(w,n,c){const p=w.context,_=p.gl,T=w.useProgram("debug"),A=dr.disabled,O=Er.disabled,R=w.colorModeForRenderPass(),U="$debug",V=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);p.activeTexture.set(_.TEXTURE0);const K=n.getTileByID(c.key).latestRawTileData,X=Math.floor((K&&K.byteLength||0)/1024),re=n.getTile(c).tileSize,oe=512/Math.min(re,512)*(c.overscaledZ/w.transform.zoom)*.5;let de=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(de+=` => ${c.overscaledZ}`),(function(ye,we){ye.initDebugOverlayCanvas();const Ce=ye.debugOverlayCanvas,be=ye.context.gl,Pe=ye.debugOverlayCanvas.getContext("2d");Pe.clearRect(0,0,Ce.width,Ce.height),Pe.shadowColor="white",Pe.shadowBlur=2,Pe.lineWidth=1.5,Pe.strokeStyle="white",Pe.textBaseline="top",Pe.font="bold 36px Open Sans, sans-serif",Pe.fillText(we,5,5),Pe.strokeText(we,5,5),ye.debugOverlayTexture.update(Ce),ye.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)})(w,`${de} ${X}kB`);const ve=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(p,_.TRIANGLES,A,O,$r.alphaBlended,br.disabled,fh(u.bp.transparent,oe),null,ve,U,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),T.draw(p,_.LINE_STRIP,A,O,R,br.disabled,fh(u.bp.red),V,ve,U,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function qf(w,n,c,p){const{isRenderingGlobe:_}=p,T=w.context,A=T.gl,O=w.transform,R=w.colorModeForRenderPass(),U=w.getDepthModeFor3D(),V=w.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,w.width,w.height]);for(const K of c){const X=n.getTerrainMesh(K.tileID),re=w.renderToTexture.getTexture(K),oe=n.getTerrainData(K.tileID);T.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,re.texture);const de=n.getMeshFrameDelta(O.zoom),ve=O.calculateFogMatrix(K.tileID.toUnwrapped()),ye=_m(de,ve,w.style.sky,O.pitch,_),we=O.getProjectionData({overscaledTileID:K.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(T,A.TRIANGLES,U,Er.disabled,R,br.backCCW,ye,oe,we,"terrain",X.vertexBuffer,X.indexBuffer,X.segments)}}function Wd(w,n){if(!n.mesh){const c=new u.aW;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const p=new u.aY;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),n.mesh=new Yr(w.createVertexBuffer(c,Ja.members),w.createIndexBuffer(p),u.aX.simpleSegment(0,0,c.length,p.length))}return n.mesh}class Pm{constructor(n,c){this.context=new wl(n),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Fr.maxOverzooming+Fr.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new si}resize(n,c,p){if(this.width=Math.floor(n*p),this.height=Math.floor(c*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const n=this.context,c=new u.aW;c.emplaceBack(0,0),c.emplaceBack(u.a5,0),c.emplaceBack(0,u.a5),c.emplaceBack(u.a5,u.a5),this.tileExtentBuffer=n.createVertexBuffer(c,Ja.members),this.tileExtentSegments=u.aX.simpleSegment(0,0,4,2);const p=new u.aW;p.emplaceBack(0,0),p.emplaceBack(u.a5,0),p.emplaceBack(0,u.a5),p.emplaceBack(u.a5,u.a5),this.debugBuffer=n.createVertexBuffer(p,Ja.members),this.debugSegments=u.aX.simpleSegment(0,0,4,5);const _=new u.ch;_.emplaceBack(0,0,0,0),_.emplaceBack(u.a5,0,u.a5,0),_.emplaceBack(0,u.a5,0,u.a5),_.emplaceBack(u.a5,u.a5,u.a5,u.a5),this.rasterBoundsBuffer=n.createVertexBuffer(_,vm.members),this.rasterBoundsSegments=u.aX.simpleSegment(0,0,4,2);const T=new u.aW;T.emplaceBack(0,0),T.emplaceBack(u.a5,0),T.emplaceBack(0,u.a5),T.emplaceBack(u.a5,u.a5),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(T,Ja.members),this.rasterBoundsSegmentsPosOnly=u.aX.simpleSegment(0,0,4,5);const A=new u.aW;A.emplaceBack(0,0),A.emplaceBack(1,0),A.emplaceBack(0,1),A.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(A,Ja.members),this.viewportSegments=u.aX.simpleSegment(0,0,4,2);const O=new u.ci;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(O);const R=new u.aY;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(R);const U=this.context.gl;this.stencilClearMode=new Er({func:U.ALWAYS,mask:0},0,255,U.ZERO,U.ZERO,U.ZERO),this.tileExtentMesh=new Yr(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,c=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.N();u.c7(p,0,this.width,this.height,0,0,1),u.Q(p,p,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const _={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(n,c.TRIANGLES,dr.disabled,this.stencilClearMode,$r.disabled,br.disabled,null,null,_,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,c,p){if(this.currentStencilSource===n.source||!n.isTileClipped()||!c||!c.length)return;this.currentStencilSource=n.source,this.nextStencilID+c.length>256&&this.clearStencil();const _=this.context;_.setColorMode($r.disabled),_.setDepthMode(dr.disabled);const T={};for(const A of c)T[A.key]=this.nextStencilID++;this._renderTileMasks(T,c,p,!0),this._renderTileMasks(T,c,p,!1),this._tileClippingMaskIDs=T}_renderTileMasks(n,c,p,_){const T=this.context,A=T.gl,O=this.style.projection,R=this.transform,U=this.useProgram("clippingMask");for(const V of c){const K=n[V.key],X=this.style.map.terrain&&this.style.map.terrain.getTerrainData(V),re=O.getMeshFromTileID(this.context,V.canonical,_,!0,"stencil"),oe=R.getProjectionData({overscaledTileID:V,applyGlobeMatrix:!p,applyTerrainMatrix:!0});U.draw(T,A.TRIANGLES,dr.disabled,new Er({func:A.ALWAYS,mask:0},K,255,A.KEEP,A.KEEP,A.REPLACE),$r.disabled,p?br.disabled:br.backCCW,null,X,oe,"$clipping",re.vertexBuffer,re.indexBuffer,re.segments)}}_renderTilesDepthBuffer(){const n=this.context,c=n.gl,p=this.style.projection,_=this.transform,T=this.useProgram("depth"),A=this.getDepthModeFor3D(),O=fn(_,{tileSize:_.tileSize});for(const R of O){const U=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),V=p.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),K=_.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(n,c.TRIANGLES,A,Er.disabled,$r.disabled,br.backCCW,null,U,K,"$clipping",V.vertexBuffer,V.indexBuffer,V.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,c=this.context.gl;return new Er({func:c.NOTEQUAL,mask:255},n,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(n){const c=this.context.gl;return new Er({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const c=this.context.gl,p=n.sort(((A,O)=>O.overscaledZ-A.overscaledZ)),_=p[p.length-1].overscaledZ,T=p[0].overscaledZ-_+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const A={};for(let O=0;O<T;O++)A[O+_]=new Er({func:c.GEQUAL,mask:255},O+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=T,[A,p]}return[{[_]:Er.disabled},p]}stencilConfigForOverlapTwoPass(n){const c=this.context.gl,p=n.sort(((A,O)=>O.overscaledZ-A.overscaledZ)),_=p[p.length-1].overscaledZ,T=p[0].overscaledZ-_+1;if(this.clearStencil(),T>1){const A={},O={};for(let R=0;R<T;R++)A[R+_]=new Er({func:c.GREATER,mask:255},T+1+R,255,c.KEEP,c.KEEP,c.REPLACE),O[R+_]=new Er({func:c.GREATER,mask:255},1+R,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*T+1,[A,O,p]}return this.nextStencilID=3,[{[_]:new Er({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[_]:new Er({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new $r([n.CONSTANT_COLOR,n.ONE],new u.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?$r.unblended:$r.alphaBlended}getDepthModeForSublayer(n,c,p){if(!this.opaquePassEnabledForLayer())return dr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new dr(p||this.context.gl.LEQUAL,c,[_,_])}getDepthModeFor3D(){return new dr(this.context.gl.LEQUAL,dr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,c){var p,_;this.style=n,this.options=c,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(H()),this.imageManager.beginFrame();const T=this.style._order,A=this.style.tileManagers,O={},R={},U={},V={isRenderingToTexture:!1,isRenderingGlobe:((p=n.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const X in A){const re=A[X];re.used&&re.prepare(this.context),O[X]=re.getVisibleCoordinates(!1),R[X]=O[X].slice().reverse(),U[X]=re.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let X=0;X<T.length;X++)if(this.style._layers[T[X]].is3D()){this.opaquePassCutoff=X;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const X of T){const re=this.style._layers[X];if(!re.hasOffscreenPass()||re.isHidden(this.transform.zoom))continue;const oe=R[re.source];(re.type==="custom"||oe.length)&&this.renderLayer(this,A[re.source],re,oe,V)}if((_=this.style.projection)===null||_===void 0||_.updateGPUdependent({context:this.context,useProgram:X=>this.useProgram(X)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.bp.black:u.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(X,re){const oe=X.context,de=oe.gl,ve=((Ie,Ee,Le)=>{const Ke=Math.cos(Ee.rollInRadians),He=Math.sin(Ee.rollInRadians),Ye=mt(Ee),Xe=Ee.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ie.properties.get("sky-color"),u_horizon_color:Ie.properties.get("horizon-color"),u_horizon:[(Ee.width/2-Ye*He)*Le,(Ee.height/2+Ye*Ke)*Le],u_horizon_normal:[-He,Ke],u_sky_horizon_blend:Ie.properties.get("sky-horizon-blend")*Ee.height/2*Le,u_sky_blend:Xe}})(re,X.style.map.transform,X.pixelRatio),ye=new dr(de.LEQUAL,dr.ReadWrite,[0,1]),we=Er.disabled,Ce=X.colorModeForRenderPass(),be=X.useProgram("sky"),Pe=Wd(oe,re);be.draw(oe,de.TRIANGLES,ye,we,Ce,br.disabled,ve,null,void 0,"sky",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){const X=this.style._layers[T[this.currentLayer]],re=A[X.source],oe=O[X.source];this._renderTileClippingMasks(X,oe,!1),this.renderLayer(this,re,X,oe,V)}this.renderPass="translucent";let K=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){const X=this.style._layers[T[this.currentLayer]],re=A[X.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(X,V))continue;this.opaquePassEnabledForLayer()||K||(K=!0,V.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const oe=(X.type==="symbol"?U:R)[X.source];this._renderTileClippingMasks(X,O[X.source],!!this.renderToTexture),this.renderLayer(this,re,X,oe,V)}if(V.isRenderingGlobe&&(function(X,re,oe){const de=X.context,ve=de.gl,ye=X.useProgram("atmosphere"),we=new dr(ve.LEQUAL,dr.ReadOnly,[0,1]),Ce=X.transform,be=(function(Xe,At){const Mt=Xe.properties.get("position"),dt=[-Mt.x,-Mt.y,-Mt.z],Ot=u.ar(new Float64Array(16));return Xe.properties.get("anchor")==="map"&&(u.bg(Ot,Ot,At.rollInRadians),u.bh(Ot,Ot,-At.pitchInRadians),u.bg(Ot,Ot,At.bearingInRadians),u.bh(Ot,Ot,At.center.lat*Math.PI/180),u.bJ(Ot,Ot,-At.center.lng*Math.PI/180)),u.cg(dt,dt,Ot),dt})(oe,X.transform),Pe=Ce.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=re.properties.get("atmosphere-blend")*Pe.projectionTransition;if(Ie===0)return;const Ee=tu(Ce.worldSize,Ce.center.lat),Le=Ce.inverseProjectionMatrix,Ke=new Float64Array(4);Ke[3]=1,u.aH(Ke,Ke,Ce.modelViewProjectionMatrix),Ke[0]/=Ke[3],Ke[1]/=Ke[3],Ke[2]/=Ke[3],Ke[3]=1,u.aH(Ke,Ke,Le),Ke[0]/=Ke[3],Ke[1]/=Ke[3],Ke[2]/=Ke[3],Ke[3]=1;const He=((Xe,At,Mt,dt,Ot)=>({u_sun_pos:Xe,u_atmosphere_blend:At,u_globe_position:Mt,u_globe_radius:dt,u_inv_proj_matrix:Ot}))(be,Ie,[Ke[0],Ke[1],Ke[2]],Ee,Le),Ye=Wd(de,re);ye.draw(de,ve.TRIANGLES,we,Er.disabled,$r.alphaBlended,br.disabled,He,null,null,"atmosphere",Ye.vertexBuffer,Ye.indexBuffer,Ye.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const X=(function(re,oe){let de=null;const ve=Object.values(re._layers).flatMap((be=>be.source&&!be.isHidden(oe)?[re.tileManagers[be.source]]:[])),ye=ve.filter((be=>be.getSource().type==="vector")),we=ve.filter((be=>be.getSource().type!=="vector")),Ce=be=>{(!de||de.getSource().maxzoom<be.getSource().maxzoom)&&(de=be)};return ye.forEach((be=>Ce(be))),de||we.forEach((be=>Ce(be))),de})(this.style,this.transform.zoom);X&&(function(re,oe,de){for(let ve=0;ve<de.length;ve++)Th(re,oe,de[ve])})(this,X,X.getVisibleCoordinates())}this.options.showPadding&&(function(X){const re=X.transform.padding;dc(X,X.transform.height-(re.top||0),3,ks),dc(X,re.bottom||0,3,ss),Rs(X,re.left||0,3,Uf),Rs(X,X.transform.width-(re.right||0),3,Vf);const oe=X.transform.centerPoint;(function(de,ve,ye,we){Wn(de,ve-1,ye-10,2,20,we),Wn(de,ve-10,ye-1,20,2,we)})(X,oe.x,X.transform.height-oe.y,Ra)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=n?!u.cj(c,p):!u.ck(c,p)),_||(_=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),_&&(u.cl(c,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(T,A){const O=T.context,R=O.gl,U=T.transform,V=$r.unblended,K=new dr(R.LEQUAL,dr.ReadWrite,[0,1]),X=A.tileManager.getRenderableTiles(),re=T.useProgram("terrainDepth");O.bindFramebuffer.set(A.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:u.bp.transparent,depth:1});for(const oe of X){const de=A.getTerrainMesh(oe.tileID),ve=A.getTerrainData(oe.tileID),ye=U.getProjectionData({overscaledTileID:oe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),we={u_ele_delta:A.getMeshFrameDelta(U.zoom)};re.draw(O,R.TRIANGLES,K,Er.disabled,V,br.backCCW,we,ve,ye,"terrain",de.vertexBuffer,de.indexBuffer,de.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain),(function(T,A){const O=T.context,R=O.gl,U=T.transform,V=$r.unblended,K=new dr(R.LEQUAL,dr.ReadWrite,[0,1]),X=A.getCoordsTexture(),re=A.tileManager.getRenderableTiles(),oe=T.useProgram("terrainCoords");O.bindFramebuffer.set(A.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),O.clear({color:u.bp.transparent,depth:1}),A.coordsIndex=[];for(const de of re){const ve=A.getTerrainMesh(de.tileID),ye=A.getTerrainData(de.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,X.texture);const we={u_terrain_coords_id:(255-A.coordsIndex.length)/255,u_texture:0,u_ele_delta:A.getMeshFrameDelta(U.zoom)},Ce=U.getProjectionData({overscaledTileID:de.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});oe.draw(O,R.TRIANGLES,K,Er.disabled,V,br.backCCW,we,ye,Ce,"terrain",ve.vertexBuffer,ve.indexBuffer,ve.segments),A.coordsIndex.push(de.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain))}renderLayer(n,c,p,_,T){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(_||[]).length)&&(this.id=p.id,u.cm(p)?(function(A,O,R,U,V,K){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:X}=K,re=Er.disabled,oe=A.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(de,ve,ye,we,Ce,be,Pe,Ie,Ee){const Le=ve.transform,Ke=ve.style.map.terrain,He=Ce==="map",Ye=be==="map";for(const Xe of de){const At=we.getTile(Xe),Mt=At.getBucket(ye);if(!Mt||!Mt.text||!Mt.text.segments.get().length)continue;const dt=u.ay(Mt.textSizeData,Le.zoom),Ot=u.aN(At,1,ve.transform.zoom),lr=Ma(He,ve.transform,Ot),Br=ye.layout.get("icon-text-fit")!=="none"&&Mt.hasIconData();if(dt){const rn=Math.pow(2,Le.zoom-At.tileID.overscaledZ),Kr=Ke?(cn,Gr)=>Ke.getElevation(Xe,cn,Gr):null;Ds(Mt,He,Ye,Ee,Le,lr,rn,dt,Br,u.aO(Le,At,Pe,Ie),Xe.toUnwrapped(),Kr)}}})(U,A,R,O,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),V),R.paint.get("icon-opacity").constantOr(1)!==0&&uu(A,O,R,U,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),re,oe,X),R.paint.get("text-opacity").constantOr(1)!==0&&uu(A,O,R,U,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),re,oe,X),O.map.showCollisionBoxes&&(di(A,O,R,U,!0),di(A,O,R,U,!1))})(n,c,p,_,this.style.placement.variableOffsets,T):u.cn(p)?(function(A,O,R,U,V){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:K}=V,X=R.paint.get("circle-opacity"),re=R.paint.get("circle-stroke-width"),oe=R.paint.get("circle-stroke-opacity"),de=!R.layout.get("circle-sort-key").isConstant();if(X.constantOr(1)===0&&(re.constantOr(1)===0||oe.constantOr(1)===0))return;const ve=A.context,ye=ve.gl,we=A.transform,Ce=A.getDepthModeForSublayer(0,dr.ReadOnly),be=Er.disabled,Pe=A.colorModeForRenderPass(),Ie=[],Ee=we.getCircleRadiusCorrection();for(let Le=0;Le<U.length;Le++){const Ke=U[Le],He=O.getTile(Ke),Ye=He.getBucket(R);if(!Ye)continue;const Xe=R.paint.get("circle-translate"),At=R.paint.get("circle-translate-anchor"),Mt=u.aO(we,He,Xe,At),dt=Ye.programConfigurations.get(R.id),Ot=A.useProgram("circle",dt),lr=Ye.layoutVertexBuffer,Br=Ye.indexBuffer,rn=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ke),Kr={programConfiguration:dt,program:Ot,layoutVertexBuffer:lr,indexBuffer:Br,uniformValues:hh(A,He,R,Mt,Ee),terrainData:rn,projectionData:we.getProjectionData({overscaledTileID:Ke,applyGlobeMatrix:!K,applyTerrainMatrix:!0})};if(de){const cn=Ye.segments.get();for(const Gr of cn)Ie.push({segments:new u.aX([Gr]),sortKey:Gr.sortKey,state:Kr})}else Ie.push({segments:Ye.segments,sortKey:0,state:Kr})}de&&Ie.sort(((Le,Ke)=>Le.sortKey-Ke.sortKey));for(const Le of Ie){const{programConfiguration:Ke,program:He,layoutVertexBuffer:Ye,indexBuffer:Xe,uniformValues:At,terrainData:Mt,projectionData:dt}=Le.state;He.draw(ve,ye.TRIANGLES,Ce,be,Pe,br.backCCW,At,Mt,dt,R.id,Ye,Xe,Le.segments,R.paint,A.transform.zoom,Ke)}})(n,c,p,_,T):u.co(p)?(function(A,O,R,U,V){if(R.paint.get("heatmap-opacity")===0)return;const K=A.context,{isRenderingToTexture:X,isRenderingGlobe:re}=V;if(A.style.map.terrain){for(const oe of U){const de=O.getTile(oe);O.hasRenderableParent(oe)||(A.renderPass==="offscreen"?Hd(A,de,R,oe,re):A.renderPass==="translucent"&&pi(A,R,oe,X,re))}K.viewport.set([0,0,A.width,A.height])}else A.renderPass==="offscreen"?(function(oe,de,ve,ye){const we=oe.context,Ce=we.gl,be=oe.transform,Pe=Er.disabled,Ie=new $r([Ce.ONE,Ce.ONE],u.bp.transparent,[!0,!0,!0,!0]);(function(Ee,Le,Ke){const He=Ee.gl;Ee.activeTexture.set(He.TEXTURE1),Ee.viewport.set([0,0,Le.width/4,Le.height/4]);let Ye=Ke.heatmapFbos.get(u.cd);Ye?(He.bindTexture(He.TEXTURE_2D,Ye.colorAttachment.get()),Ee.bindFramebuffer.set(Ye.framebuffer)):(Ye=Xr(Ee,Le.width/4,Le.height/4),Ke.heatmapFbos.set(u.cd,Ye))})(we,oe,ve),we.clear({color:u.bp.transparent});for(let Ee=0;Ee<ye.length;Ee++){const Le=ye[Ee];if(de.hasRenderableParent(Le))continue;const Ke=de.getTile(Le),He=Ke.getBucket(ve);if(!He)continue;const Ye=He.programConfigurations.get(ve.id),Xe=oe.useProgram("heatmap",Ye),At=be.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Mt=be.getCircleRadiusCorrection();Xe.draw(we,Ce.TRIANGLES,dr.disabled,Pe,Ie,br.backCCW,ml(Ke,be.zoom,ve.paint.get("heatmap-intensity"),Mt),null,At,ve.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,ve.paint,be.zoom,Ye)}we.viewport.set([0,0,oe.width,oe.height])})(A,O,R,U):A.renderPass==="translucent"&&(function(oe,de){const ve=oe.context,ye=ve.gl;ve.setColorMode(oe.colorModeForRenderPass());const we=de.heatmapFbos.get(u.cd);we&&(ve.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,we.colorAttachment.get()),ve.activeTexture.set(ye.TEXTURE1),Sr(ve,de).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),oe.useProgram("heatmapTexture").draw(ve,ye.TRIANGLES,dr.disabled,Er.disabled,oe.colorModeForRenderPass(),br.disabled,Fd(oe,de,0,1),null,null,de.id,oe.viewportBuffer,oe.quadTriangleIndexBuffer,oe.viewportSegments,de.paint,oe.transform.zoom))})(A,R)})(n,c,p,_,T):u.cp(p)?(function(A,O,R,U,V){if(A.renderPass!=="translucent")return;const{isRenderingToTexture:K}=V,X=R.paint.get("line-opacity"),re=R.paint.get("line-width");if(X.constantOr(1)===0||re.constantOr(1)===0)return;const oe=A.getDepthModeForSublayer(0,dr.ReadOnly),de=A.colorModeForRenderPass(),ve=R.paint.get("line-dasharray"),ye=ve.constantOr(1),we=R.paint.get("line-pattern"),Ce=we.constantOr(1),be=R.paint.get("line-gradient"),Pe=R.getCrossfadeParameters();let Ie;Ie=Ce?"linePattern":ye&&be?"lineGradientSDF":ye?"lineSDF":be?"lineGradient":"line";const Ee=A.context,Le=Ee.gl,Ke=A.transform;let He=!0;for(const Ye of U){const Xe=O.getTile(Ye);if(Ce&&!Xe.patternsLoaded())continue;const At=Xe.getBucket(R);if(!At)continue;const Mt=At.programConfigurations.get(R.id),dt=A.context.program.get(),Ot=A.useProgram(Ie,Mt),lr=He||Ot.program!==dt,Br=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ye),rn=we.constantOr(null),Kr=ve&&ve.constantOr(null);if(rn&&Xe.imageAtlas){const mi=Xe.imageAtlas,Ln=mi.patternPositions[rn.to.toString()],jn=mi.patternPositions[rn.from.toString()];Ln&&jn&&Mt.setConstantPatternPositions(Ln,jn)}else if(Kr){const mi=R.layout.get("line-cap")==="round",Ln=A.lineAtlas.getDash(Kr.to,mi),jn=A.lineAtlas.getDash(Kr.from,mi);Mt.setConstantDashPositions(Ln,jn)}const cn=Ke.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Gr=Ke.getPixelScale();let En;Ce?(En=Ud(A,Xe,R,Gr,Pe),ka(Ee,Le,Xe,Mt,Pe)):ye&&be?(En=gl(A,Xe,R,Gr,Pe,At.lineClipsArray.length),aa(A,O,Ee,Le,R,At,Ye,Mt,Pe)):ye?(En=ra(A,Xe,R,Gr,Pe),Sn(A,Ee,Le,Mt,lr,Pe)):be?(En=Em(A,Xe,R,Gr,At.lineClipsArray.length),ia(A,O,Ee,Le,R,At,Ye)):En=ph(A,Xe,R,Gr);const hn=A.stencilModeForClipping(Ye);Ot.draw(Ee,Le.TRIANGLES,oe,hn,de,br.disabled,En,Br,cn,R.id,At.layoutVertexBuffer,At.indexBuffer,At.segments,R.paint,A.transform.zoom,Mt,At.layoutVertexBuffer2),He=!1}})(n,c,p,_,T):u.cq(p)?(function(A,O,R,U,V){const K=R.paint.get("fill-color"),X=R.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const{isRenderingToTexture:re}=V,oe=A.colorModeForRenderPass(),de=R.paint.get("fill-pattern"),ve=A.opaquePassEnabledForLayer()&&!de.constantOr(1)&&K.constantOr(u.bp.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(A.renderPass===ve){const ye=A.getDepthModeForSublayer(1,A.renderPass==="opaque"?dr.ReadWrite:dr.ReadOnly);ns(A,O,R,U,ye,oe,!1,re)}if(A.renderPass==="translucent"&&R.paint.get("fill-antialias")){const ye=A.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,dr.ReadOnly);ns(A,O,R,U,ye,oe,!0,re)}})(n,c,p,_,T):u.cr(p)?(function(A,O,R,U,V){const K=R.paint.get("fill-extrusion-opacity");if(K===0)return;const{isRenderingToTexture:X}=V;if(A.renderPass==="translucent"){const re=new dr(A.context.gl.LEQUAL,dr.ReadWrite,A.depthRangeFor3D);if(K!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))is(A,O,R,U,re,Er.disabled,$r.disabled,X),is(A,O,R,U,re,A.stencilModeFor3D(),A.colorModeForRenderPass(),X);else{const oe=A.colorModeForRenderPass();is(A,O,R,U,re,Er.disabled,oe,X)}}})(n,c,p,_,T):u.cs(p)?(function(A,O,R,U,V){if(A.renderPass!=="offscreen"&&A.renderPass!=="translucent")return;const{isRenderingToTexture:K}=V,X=A.context,re=A.style.projection.useSubdivision,oe=A.getDepthModeForSublayer(0,dr.ReadOnly),de=A.colorModeForRenderPass();if(A.renderPass==="offscreen")(function(ve,ye,we,Ce,be,Pe,Ie){const Ee=ve.context,Le=Ee.gl;for(const Ke of we){const He=ye.getTile(Ke),Ye=He.dem;if(!Ye||!Ye.data||!He.needsHillshadePrepare)continue;const Xe=Ye.dim,At=Ye.stride,Mt=Ye.getPixels();if(Ee.activeTexture.set(Le.TEXTURE1),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),He.demTexture=He.demTexture||ve.getTileTexture(At),He.demTexture){const Ot=He.demTexture;Ot.update(Mt,{premultiply:!1}),Ot.bind(Le.NEAREST,Le.CLAMP_TO_EDGE)}else He.demTexture=new u.T(Ee,Mt,Le.RGBA,{premultiply:!1}),He.demTexture.bind(Le.NEAREST,Le.CLAMP_TO_EDGE);Ee.activeTexture.set(Le.TEXTURE0);let dt=He.fbo;if(!dt){const Ot=new u.T(Ee,{width:Xe,height:Xe,data:null},Le.RGBA);Ot.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),dt=He.fbo=Ee.createFramebuffer(Xe,Xe,!0,!1),dt.colorAttachment.set(Ot.texture)}Ee.bindFramebuffer.set(dt.framebuffer),Ee.viewport.set([0,0,Xe,Xe]),ve.useProgram("hillshadePrepare").draw(Ee,Le.TRIANGLES,be,Pe,Ie,br.disabled,Sm(He.tileID,Ye),null,null,Ce.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),He.needsHillshadePrepare=!1}})(A,O,U,R,oe,Er.disabled,de),X.viewport.set([0,0,A.width,A.height]);else if(A.renderPass==="translucent")if(re){const[ve,ye,we]=A.stencilConfigForOverlapTwoPass(U);as(A,O,R,we,ve,oe,de,!1,K),as(A,O,R,we,ye,oe,de,!0,K)}else{const[ve,ye]=A.getStencilConfigForOverlapAndUpdateStencilID(U);as(A,O,R,ye,ve,oe,de,!1,K)}})(n,c,p,_,T):u.ct(p)?(function(A,O,R,U,V){if(A.renderPass!=="translucent"||!U.length)return;const{isRenderingToTexture:K}=V,X=A.style.projection.useSubdivision,re=A.getDepthModeForSublayer(0,dr.ReadOnly),oe=A.colorModeForRenderPass();if(X){const[de,ve,ye]=A.stencilConfigForOverlapTwoPass(U);Is(A,O,R,ye,de,re,oe,!1,K),Is(A,O,R,ye,ve,re,oe,!0,K)}else{const[de,ve]=A.getStencilConfigForOverlapAndUpdateStencilID(U);Is(A,O,R,ve,de,re,oe,!1,K)}})(n,c,p,_,T):u.bU(p)?(function(A,O,R,U,V){if(A.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!U.length)return;const{isRenderingToTexture:K}=V,X=O.getSource(),re=A.style.projection.useSubdivision;if(X instanceof Aa)io(A,O,R,U,null,!1,!1,X.tileCoords,X.flippedWindingOrder,K);else if(re){const[oe,de,ve]=A.stencilConfigForOverlapTwoPass(U);io(A,O,R,ve,oe,!1,!0,zs,!1,K),io(A,O,R,ve,de,!0,!0,zs,!1,K)}else{const[oe,de]=A.getStencilConfigForOverlapAndUpdateStencilID(U);io(A,O,R,de,oe,!1,!0,zs,!1,K)}})(n,c,p,_,T):u.cu(p)?(function(A,O,R,U,V){const K=R.paint.get("background-color"),X=R.paint.get("background-opacity");if(X===0)return;const{isRenderingToTexture:re}=V,oe=A.context,de=oe.gl,ve=A.style.projection,ye=A.transform,we=ye.tileSize,Ce=R.paint.get("background-pattern");if(A.isPatternMissing(Ce))return;const be=!Ce&&K.a===1&&X===1&&A.opaquePassEnabledForLayer()?"opaque":"translucent";if(A.renderPass!==be)return;const Pe=Er.disabled,Ie=A.getDepthModeForSublayer(0,be==="opaque"?dr.ReadWrite:dr.ReadOnly),Ee=A.colorModeForRenderPass(),Le=A.useProgram(Ce?"backgroundPattern":"background"),Ke=U||fn(ye,{tileSize:we,terrain:A.style.map.terrain});Ce&&(oe.activeTexture.set(de.TEXTURE0),A.imageManager.bind(A.context));const He=R.getCrossfadeParameters();for(const Ye of Ke){const Xe=ye.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!re,applyTerrainMatrix:!0}),At=Ce?vh(X,A,Ce,{tileID:Ye,tileSize:we},He):yh(X,K),Mt=A.style.map.terrain&&A.style.map.terrain.getTerrainData(Ye),dt=ve.getMeshFromTileID(oe,Ye.canonical,!1,!0,"raster");Le.draw(oe,de.TRIANGLES,Ie,Pe,Ee,br.backCCW,At,Mt,Xe,R.id,dt.vertexBuffer,dt.indexBuffer,dt.segments)}})(n,0,p,_,T):u.cv(p)&&(function(A,O,R,U){const{isRenderingGlobe:V}=U,K=A.context,X=R.implementation,re=A.style.projection,oe=A.transform,de=oe.getProjectionDataForCustomLayer(V),ve={farZ:oe.farZ,nearZ:oe.nearZ,fov:oe.fov*Math.PI/180,modelViewProjectionMatrix:oe.modelViewProjectionMatrix,projectionMatrix:oe.projectionMatrix,shaderData:{variantName:re.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${re.shaderPreludeCode.vertexSource}`,define:re.shaderDefine},defaultProjectionData:de},ye=X.renderingMode?X.renderingMode:"2d";if(A.renderPass==="offscreen"){const we=X.prerender;we&&(A.setCustomLayerDefaults(),K.setColorMode(A.colorModeForRenderPass()),we.call(X,K.gl,ve),K.setDirty(),A.setBaseState())}else if(A.renderPass==="translucent"){A.setCustomLayerDefaults(),K.setColorMode(A.colorModeForRenderPass()),K.setStencilMode(Er.disabled);const we=ye==="3d"?A.getDepthModeFor3D():A.getDepthModeForSublayer(0,dr.ReadOnly);K.setDepthMode(we),X.render(K.gl,ve),K.setDirty(),A.setBaseState(),K.bindFramebuffer.set(null)}})(n,0,p,T))}saveTileTexture(n){const c=this._tileTextures[n.size[0]];c?c.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const c=this._tileTextures[n];return c&&c.length>0?c.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const c=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!c||!p}useProgram(n,c,p=!1,_=[]){this.cache=this.cache||{};const T=!!this.style.map.terrain,A=this.style.projection,O=p?pn.projectionMercator:A.shaderPreludeCode,R=p?zn:A.shaderDefine,U=n+(c?c.cacheKey:"")+`/${p?Vi:A.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(_?`/${_.join("/")}`:"");return this.cache[U]||(this.cache[U]=new xm(this.context,pn[n],c,Am[n],this._showOverdrawInspector,T,O,R,_)),this.cache[U]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new u.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var n,c;if(this._tileTextures){for(const p in this._tileTextures){const _=this._tileTextures[p];if(_)for(const T of _)T.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((n=this.tileExtentMesh.vertexBuffer)===null||n===void 0||n.destroy()),this.tileExtentMesh&&((c=this.tileExtentMesh.indexBuffer)===null||c===void 0||c.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const p in this.cache){const _=this.cache[p];_&&_.program&&this.context.gl.deleteProgram(_.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:c}=this.context.gl;return this.width!==n||this.height!==c}}function Yd(w,n){let c,p=!1,_=null,T=null;const A=()=>{_=null,p&&(w.apply(T,c),_=setTimeout(A,n),p=!1)};return(...O)=>(p=!0,T=this,c=O,_||A(),_)}class Vn{constructor(n){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let p;return c.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(p=_)})),(p&&p[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:p,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const p=c.join("/");let _=p;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${p}`);let T=window.location.hash.replace(_,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let A=window.location.href.replace(/(#.+)?$/,T);A=A.replace("&&","&"),window.history.replaceState(window.history.state,null,A)},this._updateHash=Yd(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const c=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,_=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,_),A=Math.round(c.lng*T)/T,O=Math.round(c.lat*T)/T,R=this._map.getBearing(),U=this._map.getPitch();let V="";if(V+=n?`/${A}/${O}/${p}`:`${p}/${O}/${A}`,(R||U)&&(V+="/"+Math.round(10*R)/10),U&&(V+=`/${Math.round(U)}`),this._hashName){const K=this._hashName;let X=!1;const re=window.location.hash.slice(1).split("&").map((oe=>{const de=oe.split("=")[0];return de===K?(X=!0,`${de}=${V}`):oe})).filter((oe=>oe));return X||re.push(`${K}=${V}`),`#${re.join("&")}`}return`#${V}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new u.V(+n[2],+n[1])}catch{return!1}const c=+n[0],p=+(n[3]||0),_=+(n[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&p>=-180&&p<=180&&_>=this._map.getMinPitch()&&_<=this._map.getMaxPitch()}}const ls={linearity:.3,easing:u.cw(0,0,.3,1)},pc=u.e({deceleration:2500,maxSpeed:1400},ls),ki=u.e({deceleration:20,maxSpeed:1400},ls),La=u.e({deceleration:1e3,maxSpeed:360},ls),cu=u.e({deceleration:1e3,maxSpeed:90},ls),Ri=u.e({deceleration:1e3,maxSpeed:360},ls);class yy{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:H(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,c=H();for(;n.length>0&&c-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)c.zoom+=T.zoomDelta||0,c.bearing+=T.bearingDelta||0,c.pitch+=T.pitchDelta||0,c.roll+=T.rollDelta||0,T.panDelta&&c.pan._add(T.panDelta),T.around&&(c.around=T.around),T.pinchAround&&(c.pinchAround=T.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(c.pan.mag()){const T=Eh(c.pan.mag(),p,u.e({},pc,n||{})),A=c.pan.mult(T.amount/c.pan.mag()),O=this._map.cameraHelper.handlePanInertia(A,this._map.transform);_.center=O.easingCenter,_.offset=O.easingOffset,mc(_,T)}if(c.zoom){const T=Eh(c.zoom,p,ki),A=u.cx(this._map.transform.zoom+T.amount,this._map.getZoomSnap(),T.amount);_.zoom=A,mc(_,T)}if(c.bearing){const T=Eh(c.bearing,p,La);_.bearing=this._map.transform.bearing+u.an(T.amount,-179,179),mc(_,T)}if(c.pitch){const T=Eh(c.pitch,p,cu);_.pitch=this._map.transform.pitch+T.amount,mc(_,T)}if(c.roll){const T=Eh(c.roll,p,Ri);_.roll=this._map.transform.roll+u.an(T.amount,-179,179),mc(_,T)}if(_.zoom||_.bearing){const T=c.pinchAround===void 0?c.around:c.pinchAround;_.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),u.e(_,{noMoveStart:!0})}}function mc(w,n){(!w.duration||w.duration<n.duration)&&(w.duration=n.duration,w.easing=n.easing)}function Eh(w,n,c){const{maxSpeed:p,linearity:_,deceleration:T}=c,A=u.an(w*_/(n/1e3),-p,p),O=Math.abs(A)/(T*_);return{easing:c.easing,duration:1e3*O,amount:A*(O/2)}}class ci extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p,_={}){p=p instanceof MouseEvent?p:new MouseEvent(n,p);const T=$.mousePos(c.getCanvas(),p),A=c.unproject(T);super(n,u.e({point:T,lngLat:A,originalEvent:p},_)),this._defaultPrevented=!1,this.target=c}}class Mo extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p){const _=n==="touchend"?p.changedTouches:p.touches,T=$.touchPos(c.getCanvasContainer(),_),A=T.map((R=>c.unproject(R))),O=T.reduce(((R,U,V,K)=>R.add(U.div(K.length))),new u.P(0,0));super(n,{points:T,point:O,lngLats:A,lngLat:c.unproject(O),originalEvent:p}),this._defaultPrevented=!1}}class $f extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}}class Gf{constructor(n,c){this._map=n,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new $f(n.type,this._map,n))}mousedown(n,c){return this._mousedownPos=c,this._firePreventable(new ci(n.type,this._map,n))}mouseup(n){this._map.fire(new ci(n.type,this._map,n))}click(n,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ci(n.type,this._map,n))}dblclick(n){return this._firePreventable(new ci(n.type,this._map,n))}mouseover(n){this._map.fire(new ci(n.type,this._map,n))}mouseout(n){this._map.fire(new ci(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Mo(n.type,this._map,n))}touchmove(n){this._map.fire(new Mo(n.type,this._map,n))}touchend(n){this._map.fire(new Mo(n.type,this._map,n))}touchcancel(n){this._map.fire(new Mo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cm{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new ci(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new ci(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Po{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(u.P.convert(n),this._map.terrain)}}class Sl{constructor(n,c){this._map=n,this._tr=new Po(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,c){this.isEnabled()&&n.shiftKey&&n.button===0&&($.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(n,c){if(!this._active)return;const p=c;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=p,this._box||(this._box=$.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const T=Math.min(_.x,p.x),A=Math.max(_.x,p.x),O=Math.min(_.y,p.y),R=Math.max(_.y,p.y);$.setTransform(this._box,`translate(${T}px,${O}px)`),this._box.style.width=A-T+"px",this._box.style.height=R-O+"px"}mouseupWindow(n,c){if(!this._active||n.button!==0)return;const p=this._startPos,_=c;if(this.reset(),$.suppressClick(),p.x!==_.x||p.y!==_.y)return this._map.fire(new u.l("boxzoomend",{originalEvent:n})),{cameraAnimation:T=>T.fitScreenCoordinates(p,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&($.remove(this._box),this._box=null),$.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,c){return this._map.fire(new u.l(n,{originalEvent:c}))}}function oa(w,n){if(w.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${n.length}`);const c={};for(let p=0;p<w.length;p++)c[w[p].identifier]=n[p];return c}class kt{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,c,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=(function(_){const T=new u.P(0,0);for(const A of _)T._add(A);return T.div(_.length)})(c),this.touches=oa(p,c)))}touchmove(n,c,p){if(this.aborted||!this.centroid)return;const _=oa(p,c);for(const T in this.touches){const A=_[T];(!A||A.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(n,c,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Ah{constructor(n){this.singleTap=new kt(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,c,p){this.singleTap.touchstart(n,c,p)}touchmove(n,c,p){this.singleTap.touchmove(n,c,p)}touchend(n,c,p){const _=this.singleTap.touchend(n,c,p);if(_){const T=n.timeStamp-this.lastTime<500,A=!this.lastTap||this.lastTap.dist(_)<30;if(T&&A||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Zf{constructor(n){this._tr=new Po(n),this._zoomIn=new Ah({numTouches:1,numTaps:2}),this._zoomOut=new Ah({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,c,p){this._zoomIn.touchstart(n,c,p),this._zoomOut.touchstart(n,c,p)}touchmove(n,c,p){this._zoomIn.touchmove(n,c,p),this._zoomOut.touchmove(n,c,p)}touchend(n,c,p){const _=this._zoomIn.touchend(n,c,p),T=this._zoomOut.touchend(n,c,p),A=this._tr;return _?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:u.cx(A.zoom+1,O.getZoomSnap()),around:A.unproject(_)},{originalEvent:n})}):T?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:u.cx(A.zoom-1,O.getZoomSnap()),around:A.unproject(T)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ao{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const c=this._moveFunction(...n);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(n,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,c){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const _=Array.isArray(c)?c[0]:c;return!this._moved&&_.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(p,_))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&$.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Co=0,gc=2,Hf={[Co]:1,[gc]:2};class us{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const c=$.mouseButton(n);this._eventButton=c}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!(function(c,p){const _=Hf[p];return c.buttons===void 0||(c.buttons&_)!==_})(n,this._eventButton)}isValidEndEvent(n){return $.mouseButton(n)===this._eventButton}}class hu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class Mh{constructor(n=new us({checkCorrectEvent:()=>!0}),c=new hu){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(n,c,p){return n instanceof MouseEvent?c(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?p(n):void 0}startMove(n){this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(n){this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(n){return this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(n){return this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(n){return this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const cs=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=n=>{n.preventDefault()}};class Wf{constructor(n,c){this._clickTolerance=n.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,c,p){return this._calculateTransform(n,c,p)}touchmove(n,c,p){if(this._active){if(!this._shouldBePrevented(p.length))return n.preventDefault(),this._calculateTransform(n,c,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,c,p){this._calculateTransform(n,c,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,c,p){p.length>0&&(this._active=!0);const _=oa(p,c),T=new u.P(0,0),A=new u.P(0,0);let O=0;for(const U in _){const V=_[U],K=this._touches[U];K&&(T._add(V),A._add(V.sub(K)),O++,_[U]=V)}if(this._touches=_,this._shouldBePrevented(O)||!A.mag())return;const R=A.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ph{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,c,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([c[0],c[1]]))}touchmove(n,c,p){if(!this._firstTwoTouches)return;n.preventDefault();const[_,T]=this._firstTwoTouches,A=hs(p,c,_),O=hs(p,c,T);if(!A||!O)return;const R=this._aroundCenter?null:A.add(O).div(2);return this._move([A,O],R,n)}touchend(n,c,p){if(!this._firstTwoTouches)return;const[_,T]=this._firstTwoTouches,A=hs(p,c,_),O=hs(p,c,T);A&&O||(this._active&&$.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function hs(w,n,c){for(let p=0;p<w.length;p++)if(w[p].identifier===c)return n[p]}function Xd(w,n){return Math.log(w/n)/Math.LN2}class fs extends Ph{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,c){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Xd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xd(this._distance,p),pinchAround:c}}}function Yf(w,n){return 180*w.angleWith(n)/Math.PI}class Ch extends Ph{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,c,p){const _=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Yf(this._vector,_),pinchAround:c}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const c=25/(Math.PI*this._minDiameter)*360,p=Yf(n,this._startVector);return Math.abs(p)<c}}function ds(w){return Math.abs(w.y)>Math.abs(w.x)}class Ls extends Ph{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,c,p){super.touchstart(n,c,p),this._currentTouchCount=p.length}_start(n){this._lastPoints=n,ds(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,c,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=n[0].sub(this._lastPoints[0]),T=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,T,p.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(_.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(n,c,p){if(this._valid!==void 0)return this._valid;const _=n.mag()>=2,T=c.mag()>=2;if(!_&&!T)return;if(!_||!T)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const A=n.y>0==c.y>0;return ds(n)&&ds(c)&&A}}const oo={panStep:100,bearingStep:15,pitchStep:10};class Ur{constructor(n){this._tr=new Po(n);const c=oo;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let c=0,p=0,_=0,T=0,A=0;switch(n.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),T=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),T=1);break;case 38:n.shiftKey?_=1:(n.preventDefault(),A=-1);break;case 40:n.shiftKey?_=-1:(n.preventDefault(),A=1);break;default:return}return this._rotationDisabled&&(p=0,_=0),{cameraAnimation:O=>{const R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:Kd,zoom:c?u.cx(R.zoom+c*(n.shiftKey?2:1),O.getZoomSnap()):R.zoom,bearing:R.bearing+p*this._bearingStep,pitch:R.pitch+_*this._pitchStep,offset:[-T*this._panStep,-A*this._panStep],center:R.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Kd(w){return w*(2-w)}const js=4.000244140625,Tl=1/450;class Dh{constructor(n,c){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=n,this._tr=new Po(n),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Tl}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let c=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=H(),_=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,c!==0&&c%js==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(_*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),n.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=n,this._delta-=c,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=$.mousePos(this._map.getCanvas(),n),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(u.V.convert(p.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const O=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=O),typeof this._targetZoom=="number"&&(this._targetZoom+=O)}if(this._delta!==0){const O=this._type==="wheel"&&Math.abs(this._delta)>js?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*O)));this._delta<0&&R!==0&&(R=1/R);const U=typeof this._targetZoom!="number"?n.scale:u.aq(this._targetZoom),V=n.applyConstrain(n.getCameraLngLat(),u.at(U*R)).zoom,K=this._map.getZoomSnap();if(this._type==="wheel"&&K>0){const X=u.cx(n.zoom,K);this._targetZoom=u.cx(V,K,V-X)}else this._targetZoom=V;this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,p=this._startZoom,_=this._easing;let T,A=!1;if(this._type==="wheel"&&p&&_){const O=H()-this._lastWheelEventTime,R=Math.min((O+5)/200,1),U=_(R);T=u.G.number(p,c,U),R<1?this._frameId||(this._frameId=!0):A=!0}else T=c,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!A,zoomDelta:T-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let c=u.cz;if(this._prevEase){const p=this._prevEase,_=(H()-p.start)/p.duration,T=p.easing(_+.01)-p.easing(_),A=.27/Math.sqrt(T*T+1e-4)*.01,O=Math.sqrt(.0729-A*A);c=u.cw(A,O,.25,1)}return this._prevEase={start:H(),duration:n,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Xf{constructor(n,c){this._clickZoom=n,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fu{constructor(n){this._tr=new Po(n),this.reset()}reset(){this._active=!1}dblclick(n,c){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:u.cx(this._tr.zoom+(n.shiftKey?-1:1),p.getZoomSnap()),around:this._tr.unproject(c)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oh{constructor(){this._tap=new Ah({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,c,p){if(!this._swipePoint)if(this._tapTime){const _=c[0],T=n.timeStamp-this._tapTime<500,A=this._tapPoint.dist(_)<30;T&&A?p.length>0&&(this._swipePoint=_,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(n,c,p)}touchmove(n,c,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const _=c[0],T=_.y-this._swipePoint.y;return this._swipePoint=_,n.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(n,c,p)}touchend(n,c,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const _=this._tap.touchend(n,c,p);_&&(this._tapTime=n.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qd{constructor(n,c,p){this._el=n,this._mousePan=c,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ja{constructor(n,c,p,_){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=c,this._mousePitch=p,this._mouseRoll=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class du{constructor(n,c,p,_){this._el=n,this._touchZoom=c,this._touchRotate=p,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Rt{constructor(n,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=$.create("div","maplibregl-cooperative-gesture-screen",n);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=c,this._container.appendChild(_);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=p,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&($.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,c){this._enabled&&(this._map.fire(new u.l("cooperativegestureprevented",{gestureType:n,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ft=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class so extends u.l{}function yc(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class Ih{get _ownerDocument(){var n;return((n=this._el)===null||n===void 0?void 0:n.ownerDocument)||document}get _ownerWindow(){var n,c;return((c=(n=this._el)===null||n===void 0?void 0:n.ownerDocument)===null||c===void 0?void 0:c.defaultView)||window}constructor(n,c){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,T)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const A=_.type==="renderFrame"?void 0:_,O={needsRenderFrame:!1},R={},U={};for(const{handlerName:X,handler:re,allowed:oe}of this._handlers){if(!re.isEnabled())continue;let de;if(this._blockedByActive(U,oe,X))re.reset();else if(re[T||_.type]){if(u.cA(_,T||_.type)){const ve=$.mousePos(this._map.getCanvas(),_);de=re[T||_.type](_,ve)}else if(u.cB(_,T||_.type)){const ve=this._getMapTouches(_.touches),ye=$.touchPos(this._map.getCanvas(),ve);de=re[T||_.type](_,ye,ve)}else u.cC(T||_.type)||(de=re[T||_.type](_));this.mergeHandlerResult(O,R,de,X,A),de&&de.needsRenderFrame&&this._triggerRenderFrame()}(de||re.isActive())&&(U[X]=re)}const V={};for(const X in this._previousActiveHandlers)U[X]||(V[X]=A);this._previousActiveHandlers=U,(Object.keys(V).length||yc(O))&&(this._changes.push([O,R,V]),this._triggerRenderFrame()),(Object.keys(U).length||yc(O))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:K}=O;K&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],K(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yy(n),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(const[_,T,A]of this._listeners)$.addEventListener(_,T,_===this._ownerDocument?this.handleWindowEvent:this.handleEvent,A)}destroy(){for(const[n,c,p]of this._listeners)$.removeEventListener(n,c,n===this._ownerDocument?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const c=this._map,p=c.getCanvasContainer();this._add("mapEvent",new Gf(c,n));const _=c.boxZoom=new Sl(c,n);this._add("boxZoom",_),n.interactive&&n.boxZoom&&_.enable();const T=c.cooperativeGestures=new Rt(c,n.cooperativeGestures);this._add("cooperativeGestures",T),n.cooperativeGestures&&T.enable();const A=new Zf(c),O=new fu(c);c.doubleClickZoom=new Xf(O,A),this._add("tapZoom",A),this._add("clickZoom",O),n.interactive&&n.doubleClickZoom&&c.doubleClickZoom.enable();const R=new Oh;this._add("tapDragZoom",R);const U=c.touchPitch=new Ls(c);this._add("touchPitch",U),n.interactive&&n.touchPitch&&c.touchPitch.enable(n.touchPitch);const V=()=>c.project(c.getCenter()),K=(function({enable:be,clickTolerance:Pe,aroundCenter:Ie=!0,minPixelCenterThreshold:Ee=100,rotateDegreesPerPixelMoved:Le=.8},Ke){const He=new us({checkCorrectEvent:Ye=>$.mouseButton(Ye)===0&&Ye.ctrlKey||$.mouseButton(Ye)===2&&!Ye.ctrlKey});return new ao({clickTolerance:Pe,move:(Ye,Xe)=>{const At=Ke();if(Ie&&Math.abs(At.y-Ye.y)>Ee)return{bearingDelta:u.cy(new u.P(Ye.x,Xe.y),Xe,At)};let Mt=(Xe.x-Ye.x)*Le;return Ie&&Xe.y<At.y&&(Mt=-Mt),{bearingDelta:Mt}},moveStateManager:He,enable:be,assignEvents:cs})})(n,V),X=(function({enable:be,clickTolerance:Pe,pitchDegreesPerPixelMoved:Ie=-.5}){const Ee=new us({checkCorrectEvent:Le=>$.mouseButton(Le)===0&&Le.ctrlKey||$.mouseButton(Le)===2});return new ao({clickTolerance:Pe,move:(Le,Ke)=>({pitchDelta:(Ke.y-Le.y)*Ie}),moveStateManager:Ee,enable:be,assignEvents:cs})})(n),re=(function({enable:be,clickTolerance:Pe,rollDegreesPerPixelMoved:Ie=.3},Ee){const Le=new us({checkCorrectEvent:Ke=>$.mouseButton(Ke)===2&&Ke.ctrlKey});return new ao({clickTolerance:Pe,move:(Ke,He)=>{const Ye=Ee();let Xe=(He.x-Ke.x)*Ie;return He.y<Ye.y&&(Xe=-Xe),{rollDelta:Xe}},moveStateManager:Le,enable:be,assignEvents:cs})})(n,V);c.dragRotate=new ja(n,K,X,re),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",X,["mouseRotate","mouseRoll"]),this._add("mouseRoll",re,["mousePitch"]),n.interactive&&n.dragRotate&&c.dragRotate.enable();const oe=(function({enable:be,clickTolerance:Pe}){const Ie=new us({checkCorrectEvent:Ee=>$.mouseButton(Ee)===0&&!Ee.ctrlKey});return new ao({clickTolerance:Pe,move:(Ee,Le)=>({around:Le,panDelta:Le.sub(Ee)}),activateOnStart:!0,moveStateManager:Ie,enable:be,assignEvents:cs})})(n),de=new Wf(n,c);c.dragPan=new Qd(p,oe,de),this._add("mousePan",oe),this._add("touchPan",de,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&c.dragPan.enable(n.dragPan);const ve=new Ch,ye=new fs;c.touchZoomRotate=new du(p,ye,ve,R),this._add("touchRotate",ve,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&c.touchZoomRotate.enable(n.touchZoomRotate),this._add("blockableMapEvent",new Cm(c));const we=c.scrollZoom=new Dh(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",we,["mousePan"]),n.interactive&&n.scrollZoom&&c.scrollZoom.enable(n.scrollZoom);const Ce=c.keyboard=new Ur(c);this._add("keyboard",Ce),n.interactive&&n.keyboard&&c.keyboard.enable()}_add(n,c,p){this._handlers.push({handlerName:n,handler:c,allowed:p}),this._handlersById[n]=c}stop(n){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ft(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,c,p){for(const _ in n)if(_!==p&&(!c||c.indexOf(_)<0))return!0;return!1}_getMapTouches(n){const c=[];for(const p of n)this._el.contains(p.target)&&c.push(p);return c}mergeHandlerResult(n,c,p,_,T){if(!p)return;u.e(n,p);const A={handlerName:_,originalEvent:p.originalEvent||T};p.zoomDelta!==void 0&&(c.zoom=A),p.panDelta!==void 0&&(c.drag=A),p.rollDelta!==void 0&&(c.roll=A),p.pitchDelta!==void 0&&(c.pitch=A),p.bearingDelta!==void 0&&(c.rotate=A)}_applyChanges(){const n={},c={},p={};for(const[_,T,A]of this._changes)_.panDelta&&(n.panDelta=(n.panDelta||new u.P(0,0))._add(_.panDelta)),_.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+_.pitchDelta),_.rollDelta&&(n.rollDelta=(n.rollDelta||0)+_.rollDelta),_.around!==void 0&&(n.around=_.around),_.pinchAround!==void 0&&(n.pinchAround=_.pinchAround),_.noInertia&&(n.noInertia=_.noInertia),u.e(c,T),u.e(p,A);this._updateMapTransform(n,c,p),this._changes=[]}_updateMapTransform(n,c,p){const _=this._map,T=_._getTransformForUpdate(),A=_.terrain;if(!(yc(n)||A&&this._terrainMovement))return this._fireEvents(c,p,!0);_._stop(!0);let{panDelta:O,zoomDelta:R,bearingDelta:U,pitchDelta:V,rollDelta:K,around:X,pinchAround:re}=n;re!==void 0&&(X=re),X=X||_.transform.centerPoint,A&&!T.isPointOnMapSurface(X)&&(X=T.centerPoint);const oe={panDelta:O,zoomDelta:R,rollDelta:K,pitchDelta:V,bearingDelta:U,around:X};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(X)&&(X=T.centerPoint);const de=X.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(O?X.sub(O):X);this._handleMapControls({terrain:A,tr:T,deltasForHelper:oe,preZoomAroundLoc:de,combinedEventsInProgress:c,panDelta:O}),_._applyUpdatedTransform(T),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(c,p,!0)}_handleMapControls({terrain:n,tr:c,deltasForHelper:p,preZoomAroundLoc:_,combinedEventsInProgress:T,panDelta:A}){const O=this._map.cameraHelper;if(O.handleMapControlsRollPitchBearingZoom(p,c),n)return O.useGlobeControls?(this._terrainMovement||!T.drag&&!T.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void O.handleMapControlsPan(p,c,_)):this._terrainMovement||!T.drag&&!T.zoom?void(T.drag&&this._terrainMovement&&A?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(A))):O.handleMapControlsPan(p,c,_)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void O.handleMapControlsPan(p,c,_));O.handleMapControlsPan(p,c,_)}_fireEvents(n,c,p){const _=Ft(this._eventsInProgress),T=Ft(n),A={};for(const K in n){const{originalEvent:X}=n[K];this._eventsInProgress[K]||(A[`${K}start`]=X),this._eventsInProgress[K]=n[K]}!_&&T&&this._fireEvent("movestart",T.originalEvent);for(const K in A)this._fireEvent(K,A[K]);T&&this._fireEvent("move",T.originalEvent);for(const K in n){const{originalEvent:X}=n[K];this._fireEvent(K,X)}const O={};let R;for(const K in this._eventsInProgress){const{handlerName:X,originalEvent:re}=this._eventsInProgress[K];this._handlersById[X].isActive()||(delete this._eventsInProgress[K],R=c[X]||re,O[`${K}end`]=R)}for(const K in O)this._fireEvent(K,O[K]);const U=Ft(this._eventsInProgress),V=(_||T)&&!U;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const K=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&K.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(K)}if(p&&V){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=re=>re!==0&&-this._bearingSnap<re&&re<this._bearingSnap;!K||!K.essential&&G.prefersReducedMotion?(this._map.fire(new u.l("moveend",{originalEvent:R})),X(this._map.getBearing())&&this._map.resetNorth()):(X(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(n,c){this._map.fire(new u.l(n,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((n=>{delete this._frameId,this.handleEvent(new so("renderFrame",{timeStamp:n})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class qn extends u.E{constructor(n,c,p){super(),this._renderFrameCallback=()=>{const _=Math.min((H()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(_)),_<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=p.bearingSnap,this._zoomSnap=p.zoomSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(n,c){n.apply(this.transform,!0),this.transform=n,this.cameraHelper=c}getCenter(){return new u.V(this.transform.center.lng,this.transform.center.lat)}setCenter(n,c){return this.jumpTo({center:n},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,c){return this.jumpTo({elevation:n},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,c,p){return n=u.P.convert(n).mult(-1),this.panTo(this.transform.center,u.e({offset:n},c),p)}panTo(n,c,p){return this.easeTo(u.e({center:n},c),p)}getZoom(){return this.transform.zoom}setZoom(n,c){return this.jumpTo({zoom:n},c),this}zoomTo(n,c,p){return this.easeTo(u.e({zoom:n},c),p)}zoomIn(n,c){return this.zoomTo(u.cx(this.getZoom()+1,this._zoomSnap),n,c),this}zoomOut(n,c){return this.zoomTo(u.cx(this.getZoom()-1,this._zoomSnap),n,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,c){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new u.l("movestart",c)).fire(new u.l("move",c)).fire(new u.l("moveend",c))),this}getBearing(){return this.transform.bearing}setZoomSnap(n){return this._zoomSnap=n,this}getZoomSnap(){return this._zoomSnap}setBearing(n,c){return this.jumpTo({bearing:n},c),this}getPadding(){return this.transform.padding}setPadding(n,c){return this.jumpTo({padding:n},c),this}rotateTo(n,c,p){return this.easeTo(u.e({bearing:n},c),p)}resetNorth(n,c){return this.rotateTo(0,u.e({duration:1e3},n),c),this}resetNorthPitch(n,c){return this.easeTo(u.e({bearing:0,pitch:0,roll:0,duration:1e3},n),c),this}snapToNorth(n,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,c):this}getPitch(){return this.transform.pitch}setPitch(n,c){return this.jumpTo({pitch:n},c),this}getRoll(){return this.transform.roll}setRoll(n,c){return this.jumpTo({roll:n},c),this}cameraForBounds(n,c){n=Lr.convert(n).adjustAntiMeridian();const p=c&&c.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,c)}_cameraForBoxAndBearing(n,c,p,_){const T={top:0,bottom:0,right:0,left:0};if(typeof(_=u.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const U=_.padding;_.padding={top:U,bottom:U,right:U,left:U}}const A=u.e(T,_.padding);_.padding=A;const O=this.transform,R=new Lr(n,c);return this.cameraHelper.cameraForBoxAndBearing(_,A,R,p,O)}fitBounds(n,c,p){return this._fitInternal(this.cameraForBounds(n,c),c,p)}fitScreenCoordinates(n,c,p,_,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(u.P.convert(n)),this.transform.screenPointToLocation(u.P.convert(c)),p,_),_,T)}_fitInternal(n,c,p){return n?(delete(c=u.e(n,c)).padding,c.linear?this.easeTo(c,p):this.flyTo(c,p)):this}jumpTo(n,c){this.stop();const p=this._getTransformForUpdate();let _=!1,T=!1,A=!1;const O=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,n);const R=p.zoom!==O;return"elevation"in n&&p.elevation!==+n.elevation&&p.setElevation(+n.elevation),"bearing"in n&&p.bearing!==+n.bearing&&(_=!0,p.setBearing(+n.bearing)),"pitch"in n&&p.pitch!==+n.pitch&&(T=!0,p.setPitch(+n.pitch)),"roll"in n&&p.roll!==+n.roll&&(A=!0,p.setRoll(+n.roll)),n.padding==null||p.isPaddingEqual(n.padding)||p.setPadding(n.padding),this._applyUpdatedTransform(p),this.fire(new u.l("movestart",c)).fire(new u.l("move",c)),R&&this.fire(new u.l("zoomstart",c)).fire(new u.l("zoom",c)).fire(new u.l("zoomend",c)),_&&this.fire(new u.l("rotatestart",c)).fire(new u.l("rotate",c)).fire(new u.l("rotateend",c)),T&&this.fire(new u.l("pitchstart",c)).fire(new u.l("pitch",c)).fire(new u.l("pitchend",c)),A&&this.fire(new u.l("rollstart",c)).fire(new u.l("roll",c)).fire(new u.l("rollend",c)),this.fire(new u.l("moveend",c))}calculateCameraOptionsFromTo(n,c,p,_=0){const T=u.a9.fromLngLat(n,c),A=u.a9.fromLngLat(p,_),O=A.x-T.x,R=A.y-T.y,U=A.z-T.z,V=Math.hypot(O,R,U);if(V===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(O,R),X=u.at(this.transform.cameraToCenterDistance/V/this.transform.tileSize),re=180*Math.atan2(O,-R)/Math.PI;let oe=180*Math.acos(K/V)/Math.PI;return oe=U<0?90-oe:90+oe,{center:A.toLngLat(),elevation:_,zoom:X,pitch:oe,bearing:re}}calculateCameraOptionsFromCameraLngLatAltRotation(n,c,p,_,T){const A=this.transform.calculateCenterFromCameraLngLatAlt(n,c,p,_);return{center:A.center,elevation:A.elevation,zoom:A.zoom,bearing:p,pitch:_,roll:T}}easeTo(n,c){this._stop(!1,n.easeId),((n=u.e({offset:[0,0],duration:500,easing:u.cz},n)).animate===!1||!n.essential&&G.prefersReducedMotion)&&(n.duration=0);const p=this._getTransformForUpdate(),_=this.getBearing(),T=p.pitch,A=p.roll,O="bearing"in n?this._normalizeBearing(n.bearing,_):_,R="pitch"in n?+n.pitch:T,U="roll"in n?this._normalizeBearing(n.roll,A):A,V="padding"in n?n.padding:p.padding,K=u.P.convert(n.offset);let X,re;n.around&&(X=u.V.convert(n.around),re=p.locationToScreenPoint(X));const oe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},de=this.cameraHelper.handleEaseTo(p,{bearing:O,pitch:R,roll:U,padding:V,around:X,aroundPoint:re,offsetAsPoint:K,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||_!==O,this._pitching=this._pitching||R!==T,this._rolling=this._rolling||U!==A,this._padding=!p.isPaddingEqual(V),this._zooming=this._zooming||de.isZooming,this._easeId=n.easeId,this._prepareEase(c,n.noMoveStart,oe),this.terrain&&this._prepareElevation(de.elevationCenter),this._ease((ve=>{de.easeFunc(ve),this.terrain&&!n.freezeElevation&&this._updateElevation(ve),this._applyUpdatedTransform(p),this._fireMoveEvents(c)}),(ve=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ve)}),n),this}_prepareEase(n,c,p={}){this._moving=!0,c||p.moving||this.fire(new u.l("movestart",n)),this._zooming&&!p.zooming&&this.fire(new u.l("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new u.l("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new u.l("pitchstart",n)),this._rolling&&!p.rolling&&this.fire(new u.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&c!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(p-(c-(p*n+this._elevationStart))/(1-n)),this._elevationTarget=c}this.transform.setElevation(u.G.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const c=n.getCameraLngLat(),p=n.getCameraAltitude(),_=this.terrain?this.terrain.getElevationForLngLatZoom(c,n.zoom):0;if(p<_){const T=this.calculateCameraOptionsFromTo(c,_,n.center,n.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(n){const c=[];if(c.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&c.push((_=>this.transformCameraUpdate(_))),!c.length)return;const p=n.clone();for(const _ of c){const T=p.clone(),{center:A,zoom:O,roll:R,pitch:U,bearing:V,elevation:K}=_(T);A&&T.setCenter(A),K!==void 0&&T.setElevation(K),O!==void 0&&T.setZoom(O),R!==void 0&&T.setRoll(R),U!==void 0&&T.setPitch(U),V!==void 0&&T.setBearing(V),p.apply(T,!1)}this.transform.apply(p,!1)}_fireMoveEvents(n){this.fire(new u.l("move",n)),this._zooming&&this.fire(new u.l("zoom",n)),this._rotating&&this.fire(new u.l("rotate",n)),this._pitching&&this.fire(new u.l("pitch",n)),this._rolling&&this.fire(new u.l("roll",n))}_afterEase(n,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const p=this._zooming,_=this._rotating,T=this._pitching,A=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new u.l("zoomend",n)),_&&this.fire(new u.l("rotateend",n)),T&&this.fire(new u.l("pitchend",n)),A&&this.fire(new u.l("rollend",n)),this.fire(new u.l("moveend",n))}flyTo(n,c){if(!n.essential&&G.prefersReducedMotion){const Xe=u.U(n,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Xe,c)}this.stop(),n=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.cz},n);const p=this._getTransformForUpdate(),_=p.bearing,T=p.pitch,A=p.roll,O=p.padding,R="bearing"in n?this._normalizeBearing(n.bearing,_):_,U="pitch"in n?+n.pitch:T,V="roll"in n?this._normalizeBearing(n.roll,A):A,K="padding"in n?n.padding:p.padding,X=u.P.convert(n.offset);let re=p.centerPoint.add(X);const oe=p.screenPointToLocation(re),de=this.cameraHelper.handleFlyTo(p,{bearing:R,pitch:U,roll:V,padding:K,locationAtOffset:oe,offsetAsPoint:X,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let ve=n.curve;const ye=Math.max(p.width,p.height),we=ye/de.scaleOfZoom,Ce=de.pixelPathLength;typeof de.scaleOfMinZoom=="number"&&(ve=Math.sqrt(ye/de.scaleOfMinZoom/Ce*2));const be=ve*ve;function Pe(Xe){const At=(we*we-ye*ye+(Xe?-1:1)*be*be*Ce*Ce)/(2*(Xe?we:ye)*be*Ce);return Math.log(Math.sqrt(At*At+1)-At)}function Ie(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function Ee(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}const Le=Pe(!1);let Ke=function(Xe){return Ee(Le)/Ee(Le+ve*Xe)},He=function(Xe){return ye*((Ee(Le)*(Ie(At=Le+ve*Xe)/Ee(At))-Ie(Le))/be)/Ce;var At},Ye=(Pe(!0)-Le)/ve;if(Math.abs(Ce)<2e-6||!isFinite(Ye)){if(Math.abs(ye-we)<1e-6)return this.easeTo(n,c);const Xe=we<ye?-1:1;Ye=Math.abs(Math.log(we/ye))/ve,He=()=>0,Ke=At=>Math.exp(Xe*ve*At)}return n.duration="duration"in n?+n.duration:1e3*Ye/("screenSpeed"in n?+n.screenSpeed/ve:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=_!==R,this._pitching=U!==T,this._rolling=V!==A,this._padding=!p.isPaddingEqual(K),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(de.targetCenter),this._ease((Xe=>{const At=Xe*Ye,Mt=1/Ke(At),dt=He(At);this._rotating&&p.setBearing(u.G.number(_,R,Xe)),this._pitching&&p.setPitch(u.G.number(T,U,Xe)),this._rolling&&p.setRoll(u.G.number(A,V,Xe)),this._padding&&(p.interpolatePadding(O,K,Xe),re=p.centerPoint.add(X)),de.easeFunc(Xe,Mt,dt,re),this.terrain&&!n.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(p),this._fireMoveEvents(c)}),(()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,c){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,c)}return n||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(n,c,p){p.animate===!1||p.duration===0?(n(1),c()):(this._easeStart=H(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,c){n=u.W(n,-180,180);const p=Math.abs(n-c);return Math.abs(n-360-c)<p&&(n-=360),Math.abs(n+360-c)<p&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLat(u.V.convert(n),this.transform):null}}const Tn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Rn{constructor(n=Tn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=$.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=$.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=$.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){$.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,c){const p=this._map._getUIString(`AttributionControl.${c}`);n.title=p,n.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const c=this._map.style.tileManagers;for(const _ in c){const T=c[_];if(T.used||T.usedForTerrain){const A=T.getSource();A.attribution&&n.indexOf(A.attribution)<0&&n.push(A.attribution)}}n=n.filter((_=>String(_).trim())),n.sort(((_,T)=>_.length-T.length)),n=n.filter(((_,T)=>{for(let A=T+1;A<n.length;A++)if(n[A].indexOf(_)>=0)return!1;return!0}));const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=$.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class zh{constructor(n={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const p=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=$.create("div","maplibregl-ctrl");const c=$.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){$.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Bs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const c=++this._id;return this._queue.push({callback:n,id:c,cancelled:!1}),c}remove(n){const c=this._currentlyRunning,p=c?this._queue.concat(c):this._queue;for(const _ of p)if(_.id===n)return void(_.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const p of c)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var xr=u.aU([{name:"a_pos3d",type:"Int16",components:3}]);class jr extends u.E{constructor(n){super(),this._lastTilesetChange=H(),this.tileManager=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(n,c){this.tileManager.update(n,c),this._renderableTilesKeys=[];const p={};for(const _ of fn(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.tileManager._source.calculateTileZoom}))p[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.terrainRttPosMatrix32f=new Float64Array(16),u.c7(_.terrainRttPosMatrix32f,0,u.a5,u.a5,0,0,1),this._tiles[_.key]=new Oe(_,this.tileSize),this._lastTilesetChange=H());for(const _ in this._tiles)p[_]||delete this._tiles[_]}freeRtt(n){for(const c in this._tiles){const p=this._tiles[c];(!n||p.tileID.equals(n)||p.tileID.isChildOf(n)||n.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((n=>this.getTileByID(n)))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,c){return c?this._getTerrainCoordsForTileRanges(n,c):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const c={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID,T=n.clone(),A=u.bk();if(_.canonical.equals(n.canonical))u.c7(A,0,u.a5,u.a5,0,0,1);else if(_.canonical.isChildOf(n.canonical)){const O=_.canonical.z-n.canonical.z,R=_.canonical.x-(_.canonical.x>>O<<O),U=_.canonical.y-(_.canonical.y>>O<<O),V=u.a5>>O;u.c7(A,0,V,V,0,0,1),u.O(A,A,[-R*V,-U*V,0])}else{if(!n.canonical.isChildOf(_.canonical))continue;{const O=n.canonical.z-_.canonical.z,R=n.canonical.x-(n.canonical.x>>O<<O),U=n.canonical.y-(n.canonical.y>>O<<O),V=u.a5>>O;u.c7(A,0,u.a5,u.a5,0,0,1),u.O(A,A,[R*V,U*V,0]),u.Q(A,A,[1/2**O,1/2**O,0])}}T.terrainRttPosMatrix32f=new Float32Array(A),c[p]=T}return c}_getTerrainCoordsForTileRanges(n,c){const p={};for(const _ of this._renderableTilesKeys){const T=this._tiles[_].tileID;if(!this._isWithinTileRanges(T,c))continue;const A=n.clone(),O=u.bk();if(T.canonical.z===n.canonical.z){const R=n.canonical.x-T.canonical.x+n.wrap*(1<<n.canonical.z),U=n.canonical.y-T.canonical.y;u.c7(O,0,u.a5,u.a5,0,0,1),u.O(O,O,[R*u.a5,U*u.a5,0])}else if(T.canonical.z>n.canonical.z){const R=T.canonical.z-n.canonical.z,U=T.canonical.x-(T.canonical.x>>R<<R)+n.wrap*(1<<T.canonical.z),V=T.canonical.y-(T.canonical.y>>R<<R),K=n.canonical.x-(T.canonical.x>>R),X=n.canonical.y-(T.canonical.y>>R),re=u.a5>>R;u.c7(O,0,re,re,0,0,1),u.O(O,O,[-U*re+K*u.a5,-V*re+X*u.a5,0])}else{const R=n.canonical.z-T.canonical.z,U=n.canonical.x-(n.canonical.x>>R<<R)+n.wrap*(1<<n.canonical.z),V=n.canonical.y-(n.canonical.y>>R<<R),K=(n.canonical.x>>R)-T.canonical.x,X=(n.canonical.y>>R)-T.canonical.y,re=u.a5<<R;u.c7(O,0,re,re,0,0,1),u.O(O,O,[U*u.a5+K*re,V*u.a5+X*re,0])}A.terrainRttPosMatrix32f=new Float32Array(O),p[_]=A}return p}getSourceTile(n,c){const p=this.tileManager._source;let _=n.overscaledZ-this.deltaZoom;if(_>p.maxzoom&&(_=p.maxzoom),_<p.minzoom)return;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(_).key);let T=this.findTileInCaches(this._sourceTileCache[n.key]);if(!T?.dem&&c)for(;_>=p.minzoom&&!T?.dem;)T=this.findTileInCaches(n.scaledTo(_--).key);return T}findTileInCaches(n){let c=this.tileManager.getTileByID(n);return c||(c=this.tileManager._outOfViewCache.getByKey(n),c)}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,c){const p=c[n.canonical.z];return!!p&&(n.wrap>p.minWrap||n.wrap<p.maxWrap||n.canonical.x>=p.minTileXWrapped&&n.canonical.x<=p.maxTileXWrapped&&n.canonical.y>=p.minTileY&&n.canonical.y<=p.maxTileY)}}class vr{constructor(n,c,p){this._meshCache={},this.painter=n,this.tileManager=new jr(c),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,c,p,_=u.a5){var T;const A=n.normalizeCoordinates(c,p,_);if(!A)return 0;const O=this.getTerrainData(A.tileID),R=(T=O.tile)===null||T===void 0?void 0:T.dem;if(!R)return 0;const U=u.cD([],[A.x/_*u.a5,A.y/_*u.a5],O.u_terrain_matrix),V=[U[0]*R.dim,U[1]*R.dim],K=Math.floor(V[0]),X=Math.floor(V[1]),re=V[0]-K,oe=V[1]-X;return R.get(K,X)*(1-re)*(1-oe)+R.get(K+1,X)*re*(1-oe)+R.get(K,X+1)*(1-re)*oe+R.get(K+1,X+1)*re*oe}getElevationForLngLatZoom(n,c){if(!u.cE(c,n.wrap()))return 0;const{tileID:p,mercatorX:_,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(n,c);return this.getElevation(p,_%u.a5,T%u.a5,u.a5)}getElevationForLngLat(n,c){const p=fn(c,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let _=0;for(const T of p)T.canonical.z>_&&(_=Math.min(T.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(n,_)}getElevation(n,c,p,_=u.a5){return this.getDEMElevation(n,c,p,_)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const _=this.painter.context,T=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new u.T(_,T,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new u.T(_,new u.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ar([])}const c=this.tileManager.getSourceTile(n,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const _=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new u.T(_,c.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),c.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const p=c&&c.toString()+c.tileID.key+n.key;if(p&&!this._demMatrixCache[p]){const _=this.tileManager.getSource().maxzoom;let T=n.canonical.z-c.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=_?T=n.canonical.z-_:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const A=n.canonical.x-(n.canonical.x>>T<<T),O=n.canonical.y-(n.canonical.y>>T<<T),R=u.cF(new Float64Array(16),[1/(u.a5<<T),1/(u.a5<<T),0]);u.O(R,R,[A*u.a5,O*u.a5,0]),this._demMatrixCache[n.key]={matrix:R,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(n){const c=this.painter,p=c.width/devicePixelRatio,_=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new u.T(c.context,{width:p,height:_,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new u.T(c.context,{width:p,height:_,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(p,_,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,p,_))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,A=0;T<this._coordsTextureSize;T++)for(let O=0;O<this._coordsTextureSize;O++,A+=4)c[A+0]=255&O,c[A+1]=255&T,c[A+2]=O>>8<<4|T>>8,c[A+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),_=new u.T(n,p,n.gl.RGBA,{premultiply:!1});return _.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),p=this.painter.context,_=p.gl,T=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),A=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(T,O-A-1,1,1,_.RGBA,_.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null);const R=c[0]+(c[2]>>4<<8),U=c[1]+((15&c[2])<<8),V=this.coordsIndex[255-c[3]],K=V&&this.tileManager.getTileByID(V);if(!K)return null;const X=this._coordsTextureSize,re=(1<<K.tileID.canonical.z)*X;return new u.a9((K.tileID.canonical.x*X+R)/re+K.tileID.wrap,(K.tileID.canonical.y*X+U)/re,this.getElevation(K.tileID,R,U,X))}depthAtPoint(n){const c=new Uint8Array(4),p=this.painter.context,_=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,c),p.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(n){var c;const p=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,_=p&&n.canonical.y===0,T=p&&n.canonical.y===(1<<n.canonical.z)-1,A=`m_${_?"n":""}_${T?"s":""}`;if(this._meshCache[A])return this._meshCache[A];const O=this.painter.context,R=new u.cG,U=new u.aY,V=this.meshSize,K=u.a5/V,X=V*V;for(let Ee=0;Ee<=V;Ee++)for(let Le=0;Le<=V;Le++)R.emplaceBack(Le*K,Ee*K,0);for(let Ee=0;Ee<X;Ee+=V+1)for(let Le=0;Le<V;Le++)U.emplaceBack(Le+Ee,V+Le+Ee+1,V+Le+Ee+2),U.emplaceBack(Le+Ee,V+Le+Ee+2,Le+Ee+1);const re=R.length,oe=re+(V+1),de=(V+1)*V,ve=_?u.br:0,ye=_?0:1,we=T?u.bs:u.a5,Ce=T?0:1;for(let Ee=0;Ee<=V;Ee++)R.emplaceBack(Ee*K,ve,ye);for(let Ee=0;Ee<=V;Ee++)R.emplaceBack(Ee*K,we,Ce);for(let Ee=0;Ee<V;Ee++)U.emplaceBack(de+Ee,oe+Ee,oe+Ee+1),U.emplaceBack(de+Ee,oe+Ee+1,de+Ee+1),U.emplaceBack(0+Ee,re+Ee+1,re+Ee),U.emplaceBack(0+Ee,0+Ee+1,re+Ee+1);const be=R.length,Pe=be+2*(V+1);for(const Ee of[0,1])for(let Le=0;Le<=V;Le++)for(const Ke of[0,1])R.emplaceBack(Ee*u.a5,Le*K,Ke);for(let Ee=0;Ee<2*V;Ee+=2)U.emplaceBack(be+Ee,be+Ee+1,be+Ee+3),U.emplaceBack(be+Ee,be+Ee+3,be+Ee+2),U.emplaceBack(Pe+Ee,Pe+Ee+3,Pe+Ee+1),U.emplaceBack(Pe+Ee,Pe+Ee+2,Pe+Ee+3);const Ie=new Yr(O.createVertexBuffer(R,xr.members),O.createIndexBuffer(U),u.aX.simpleSegment(0,0,R.length,U.length));return this._meshCache[A]=Ie,Ie}getMeshFrameDelta(n){return 2*Math.PI*u.bE/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,c){var p;if(!u.cE(c,n.wrap()))return 0;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(n,c);return(p=this.getMinMaxElevation(_).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(n){const c=this.getTerrainData(n).tile,p={minElevation:null,maxElevation:null};return c&&c.dem&&(p.minElevation=c.dem.min*this.exaggeration,p.maxElevation=c.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(n,c){const p=u.a9.fromLngLat(n.wrap()),_=(1<<c)*u.a5,T=p.x*_,A=p.y*_,O=Math.floor(T/u.a5),R=Math.floor(A/u.a5);return{tileID:new u.a2(c,0,c,O,R),mercatorX:T,mercatorY:A}}}class yn{constructor(n,c,p){this._context=n,this._size=c,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new u.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(p.texture),{id:n,fbo:c,texture:p,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>n.id!==c)),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((n=>!n.inUse))===!1}}const lo={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Do{constructor(n,c){this.painter=n,this.terrain=c,this.pool=new yn(n.context,30,c.tileManager.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,c){var p,_;this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=n._order.filter((T=>!n._layers[T].isHidden(c))),this._coordsAscending={};for(const T in n.tileManagers){this._coordsAscending[T]={};const A=n.tileManagers[T].getVisibleCoordinates(),O=n.tileManagers[T].getSource(),R=O instanceof Aa?O.terrainTileRanges:null;for(const U of A){const V=this.terrain.tileManager.getTerrainCoords(U,R);for(const K in V)this._coordsAscending[T][K]||(this._coordsAscending[T][K]=[]),this._coordsAscending[T][K].push(V[K])}}this._rttFingerprints={};for(const T of n._order){const A=n._layers[T],O=A.source;if(lo[A.type]&&!this._rttFingerprints[O]){this._rttFingerprints[O]={};const R=(_=(p=n.tileManagers[O])===null||p===void 0?void 0:p.getState().revision)!==null&&_!==void 0?_:0;for(const U in this._coordsAscending[O])this._rttFingerprints[O][U]=`${this._coordsAscending[O][U].map((V=>V.key)).sort().join()}#${R}`}}for(const T of this._renderableTiles)for(const A in this._rttFingerprints){const O=this._rttFingerprints[A][T.tileID.key];O&&O!==T.rttFingerprint[A]&&(T.rtt=[])}}renderLayer(n,c){if(n.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),_=n.type,T=this.painter,A=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(lo[_]&&(this._prevType&&lo[this._prevType]||this._stacks.push([]),this._prevType=_,this._stacks[this._stacks.length-1].push(n.id),!A))return!0;if(lo[this._prevType]||lo[_]&&A){this._prevType=_;const O=this._stacks.length-1,R=this._stacks[O]||[];for(const U of this._renderableTiles){if(this.pool.isFull()&&(qf(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(U),U.rtt[O]){const K=this.pool.getObjectForId(U.rtt[O].id);if(K.stamp===U.rtt[O].stamp){this.pool.useObject(K);continue}}const V=this.pool.getOrCreateFreeObject();this.pool.useObject(V),this.pool.stampObject(V),U.rtt[O]={id:V.id,stamp:V.stamp},T.context.bindFramebuffer.set(V.fbo.framebuffer),T.context.clear({color:u.bp.transparent,stencil:0}),T.currentStencilSource=void 0;for(let K=0;K<R.length;K++){const X=T.style._layers[R[K]],re=X.source?this._coordsAscending[X.source][U.tileID.key]:[U.tileID];T.context.viewport.set([0,0,V.fbo.width,V.fbo.height]),T._renderTileClippingMasks(X,re,!0),T.renderLayer(T,T.style.tileManagers[X.source],X,re,p),X.source&&(U.rttFingerprint[X.source]=this._rttFingerprints[X.source][U.tileID.key])}}return qf(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),lo[_]}return!1}}const pu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Drag to rotate map, click to reset north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},mu=M,Ns={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:Tn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Jd={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class un{constructor(n,c,p=!1){this.mousedown=T=>{this.startMove(T,$.mousePos(this.element,T)),$.addEventListener(window,"mousemove",this.mousemove),$.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,$.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=$.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),$.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=$.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const _=new Mh;this._rotatePitchHandler=new ao({clickTolerance:3,move:(T,A)=>{const O=c.getBoundingClientRect(),R=new u.P((O.bottom-O.top)/2,(O.right-O.left)/2);return{bearingDelta:u.cy(new u.P(T.x,A.y),A,R),pitchDelta:p?-.5*(A.y-T.y):void 0}},moveStateManager:_,enable:!0,assignEvents:()=>{}}),this.map=n,$.addEventListener(c,"mousedown",this.mousedown),$.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),$.addEventListener(c,"touchcancel",this.reset)}startMove(n,c){this._rotatePitchHandler.dragStart(n,c),$.disableDrag()}move(n,c){const p=this.map,{bearingDelta:_,pitchDelta:T}=this._rotatePitchHandler.dragMove(n,c)||{};_&&p.setBearing(p.getBearing()+_),T&&p.setPitch(p.getPitch()+T)}off(){const n=this.element;$.removeEventListener(n,"mousedown",this.mousedown),$.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend),$.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){$.enableDrag(),$.removeEventListener(window,"mousemove",this.mousemove),$.removeEventListener(window,"mouseup",this.mouseup),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend)}}let Oo;function vc(w,n,c,p=!1){if(p||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const _=new u.V(w.lng,w.lat);if(w=new u.V(w.lng,w.lat),n){const T=new u.V(w.lng-360,w.lat),A=new u.V(w.lng+360,w.lat),O=c.locationToScreenPoint(w).distSqr(n);c.locationToScreenPoint(T).distSqr(n)<O?w=T:c.locationToScreenPoint(A).distSqr(n)<O&&(w=A)}for(;Math.abs(w.lng-c.center.lng)>180;){const T=c.locationToScreenPoint(w);if(T.x>=0&&T.y>=0&&T.x<=c.width&&T.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==_.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:_}const _c={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kh(w,n,c){const p=w.classList;for(const _ in _c)p.remove(`maplibregl-${c}-anchor-${_}`);p.add(`maplibregl-${c}-anchor-${n}`)}class Rh extends u.E{constructor(n){if(super(),this._onClick=c=>{this.fire(new u.l("click",{originalEvent:c}))},this._onKeyPress=c=>{const p=c.code,_=c.charCode||c.keyCode;p!=="Space"&&p!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=c=>{const p=c.originalEvent.target,_=this._element;this._popup&&(p===_||_.contains(p))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=vc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let _="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?_=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(_=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),$.setTransform(this._element,`${_c[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${_}`),G.frameAsync(new AbortController,this._map._ownerWindow).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.l("dragstart"))),this.fire(new u.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=u.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=$.create("div");const c=$.createNS("http://www.w3.org/2000/svg","svg"),p=41,_=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${p}px`),c.setAttributeNS(null,"width",`${_}px`),c.setAttributeNS(null,"viewBox",`0 0 ${_} ${p}`);const T=$.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const A=$.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill-rule","nonzero");const O=$.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of R){const we=$.createNS("http://www.w3.org/2000/svg","ellipse");we.setAttributeNS(null,"opacity","0.04"),we.setAttributeNS(null,"cx","10.5"),we.setAttributeNS(null,"cy","5.80029008"),we.setAttributeNS(null,"rx",ye.rx),we.setAttributeNS(null,"ry",ye.ry),O.appendChild(we)}const U=$.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"fill",this._color);const V=$.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),U.appendChild(V);const K=$.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const X=$.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(X);const re=$.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(6.0, 7.0)"),re.setAttributeNS(null,"fill","#FFFFFF");const oe=$.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const de=$.createNS("http://www.w3.org/2000/svg","circle");de.setAttributeNS(null,"fill","#000000"),de.setAttributeNS(null,"opacity","0.25"),de.setAttributeNS(null,"cx","5.5"),de.setAttributeNS(null,"cy","5.5"),de.setAttributeNS(null,"r","5.4999962");const ve=$.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#FFFFFF"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962"),oe.appendChild(de),oe.appendChild(ve),A.appendChild(O),A.appendChild(U),A.appendChild(K),A.appendChild(re),A.appendChild(oe),c.appendChild(A),c.setAttributeNS(null,"height",p*this._scale+"px"),c.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),kh(this._element,this._anchor,"marker"),this._element.addEventListener("click",this._onClick),n&&n.className)for(const c of n.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),$.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=u.V.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const _=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var c,p;const _=(c=this._map)===null||c===void 0?void 0:c.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!_||T){const re=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==re&&(this._element.style.opacity=re))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const A=this._map,O=A.terrain.depthAtPoint(this._pos),R=A.terrain.getElevationForLngLat(this._lngLat,A.transform);if(A.transform.lngLatToCameraDepth(this._lngLat,R)-O<.006)return void(this._element.style.opacity=this._opacity);const U=-this._offset.y/A.transform.pixelsPerMeter,V=Math.sin(A.getPitch()*Math.PI/180)*U,K=A.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),X=A.transform.lngLatToCameraDepth(this._lngLat,R+V)-K>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&X&&this._popup.remove(),this._element.style.opacity=X?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=u.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,c){return(this._opacity===void 0||n===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const Lh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let El=0,Fs=!1;const Pi={maxWidth:100,unit:"metric"};function vn(w,n,c){const p=c&&c.maxWidth||100,_=w._container.clientHeight/2,T=w._container.clientWidth/2,A=w.unproject([T-p/2,_]),O=w.unproject([T+p/2,_]),R=Math.round(w.project(O).x-w.project(A).x),U=Math.min(p,R,w._container.clientWidth),V=A.distanceTo(O);if(c&&c.unit==="imperial"){const K=3.2808*V;K>5280?ps(n,U,K/5280,w._getUIString("ScaleControl.Miles")):ps(n,U,K,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?ps(n,U,V/1852,w._getUIString("ScaleControl.NauticalMiles")):V>=1e3?ps(n,U,V/1e3,w._getUIString("ScaleControl.Kilometers")):ps(n,U,V,w._getUIString("ScaleControl.Meters"))}function ps(w,n,c,p){const _=(function(T){const A=Math.pow(10,`${Math.floor(T)}`.length-1);let O=T/A;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:(function(R){const U=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*U)/U})(O),A*O})(c);w.style.width=n*(_/c)+"px",w.innerHTML=`${_}&nbsp;${p}`}const gu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},yu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xc(w){if(w){if(typeof w=="number"){const n=Math.round(Math.abs(w)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,w),"top-left":new u.P(n,n),"top-right":new u.P(-n,n),bottom:new u.P(0,-w),"bottom-left":new u.P(n,-n),"bottom-right":new u.P(-n,-n),left:new u.P(w,0),right:new u.P(-w,0)}}if(w instanceof u.P||Array.isArray(w)){const n=u.P.convert(w);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:u.P.convert(w.center||[0,0]),top:u.P.convert(w.top||[0,0]),"top-left":u.P.convert(w["top-left"]||[0,0]),"top-right":u.P.convert(w["top-right"]||[0,0]),bottom:u.P.convert(w.bottom||[0,0]),"bottom-left":u.P.convert(w["bottom-left"]||[0,0]),"bottom-right":u.P.convert(w["bottom-right"]||[0,0]),left:u.P.convert(w.left||[0,0]),right:u.P.convert(w.right||[0,0])}}return xc(new u.P(0,0))}const Io=M;v.AJAXError=u.cJ,v.EXTENT=u.a5,v.Event=u.l,v.Evented=u.E,v.LngLat=u.V,v.MercatorCoordinate=u.a9,v.Point=u.P,v.addProtocol=u.cK,v.config=u.c,v.removeProtocol=u.cL,v.AttributionControl=Rn,v.BoxZoomHandler=Sl,v.CanvasSource=Ts,v.CooperativeGesturesHandler=Rt,v.DoubleClickZoomHandler=Xf,v.DragPanHandler=Qd,v.DragRotateHandler=ja,v.EdgeInsets=Pa,v.FullscreenControl=class extends u.E{constructor(w={}){var n;super(),this._onFullscreenChange=()=>{var c;let p=window.document.fullscreenElement||window.document.webkitFullscreenElement;for(;!((c=p?.shadowRoot)===null||c===void 0)&&c.fullscreenElement;)p=p.shadowRoot.fullscreenElement;p===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,this._pseudo=(n=w.pseudo)!==null&&n!==void 0&&n,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){$.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=$.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);$.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){this._pseudo?this._togglePseudoFullScreen():window.document.exitFullscreen?window.document.exitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._pseudo?this._togglePseudoFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},v.GeoJSONSource=oi,v.GeolocateControl=class extends u.E{constructor(w){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new u.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const c=new u.V(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,_=this._map.getBearing(),T=u.e({bearing:_},this.options.fitBoundsOptions),A=Lr.fromLngLat(c,p);this._map.fitBounds(A,T,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const c=new u.V(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Fs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this._geolocateButton=$.create("button","maplibregl-ctrl-geolocate",this._container),$.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Rh({element:this._dotElement}),this._circleElement=$.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Rh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const p=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.l("trackuserlocationend")),this.fire(new u.l("userlocationlostfocus")))}))}},this.options=u.e({},Lh,w)}onAdd(w){return this._map=w,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return u._(this,arguments,void 0,(function*(n=!1){if(Oo!==void 0&&!n)return Oo;if(window.navigator.permissions===void 0)return Oo=!!window.navigator.geolocation,Oo;try{Oo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Oo=!!window.navigator.geolocation}return Oo}))})().then((n=>this._finishSetupUI(n))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),$.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,El=0,Fs=!1}_isOutOfMapMaxBounds(w){const n=this._map.getMaxBounds(),c=w.coords;return n&&(c.longitude<n.getWest()||c.longitude>n.getEast()||c.latitude<n.getSouth()||c.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const n=this._map.project(w),c=this._map.unproject([n.x+100,n.y]),p=w.distanceTo(c)/100,_=2*this._accuracy/p;this._circleElement.style.width=`${_.toFixed(2)}px`,this._circleElement.style.height=`${_.toFixed(2)}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":El--,Fs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.l("trackuserlocationstart")),this.fire(new u.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),El++,El>1?(w={maximumAge:6e5,timeout:0},Fs=!0):(w=this.options.positionOptions,Fs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},v.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const n=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=$.create("button","maplibregl-ctrl-globe",this._container),$.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._map.on("projectiontransition",this._updateGlobeIcon),this._container}onRemove(){$.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._map.off("projectiontransition",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},v.Hash=Vn,v.ImageSource=Aa,v.KeyboardHandler=Ur,v.LngLatBounds=Lr,v.LogoControl=zh,v.Map=class extends qn{get _ownerWindow(){var w,n;return((n=(w=this._container)===null||w===void 0?void 0:w.ownerDocument)===null||n===void 0?void 0:n.defaultView)||window}constructor(w){var n,c;u.cH.mark(u.cI.create);const p=Object.assign(Object.assign(Object.assign({},Ns),w),{canvasContextAttributes:Object.assign(Object.assign({},Ns.canvasContextAttributes),w.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const _=new ei,T=new Jl;p.minZoom!==void 0&&_.setMinZoom(p.minZoom),p.maxZoom!==void 0&&_.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&_.setMinPitch(p.minPitch),p.maxPitch!==void 0&&_.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&_.setRenderWorldCopies(p.renderWorldCopies),p.transformConstrain!==null&&_.setConstrainOverride(p.transformConstrain),super(_,T,{bearingSnap:p.bearingSnap,zoomSnap:p.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Bs,this._controls=[],this._mapId=u.af(),this._lostContextStyle={style:null,images:null},this._contextLost=O=>{if(O.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy(),this._lostContextStyle=this._getStyleAndImages(),this.style){for(const R of Object.values(this.style._layers))if(R.type==="custom"&&console.warn(`Custom layer with id '${R.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),R._listeners)for(const[U]of Object.entries(R._listeners))console.warn(`Custom layer with id '${R.id}' had event listeners for event '${U}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this.style.destroy(),this.style=null,this.fire(new u.l("webglcontextlost",{originalEvent:O}))}else this.fire(new u.l("webglcontextlost",{originalEvent:O}))},this._contextRestored=O=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new u.l("webglcontextrestored",{originalEvent:O}))},this._onMapScroll=O=>{if(O.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._zoomSnap=p.zoomSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},pu),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this._zoomLevelsToOverscale=p.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=p.transformCameraUpdate,this.transformConstrain=p.transformConstrain,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,p.reduceMotion!==void 0&&(G.prefersReducedMotion=p.reduceMotion),this._imageQueueHandle=Se.addThrottleControl((()=>this.isMoving())),this._requestManager=new Ue(p.transformRequest),this._container=this._resolveContainer(p.container),p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new Ih(this,p),this._hash=p.hash&&new Vn(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,u.e({},p.fitBoundsOptions,{duration:0}))));const A=typeof p.style=="string"||((c=(n=p.style)===null||n===void 0?void 0:n.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,A),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Rn(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new zh,p.logoPosition),this.on("style.load",(()=>{if(A||this._resizeTransform(),this.transform.unmodified){const O=u.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(O)}})),this.on("data",(O=>{this._update(O.dataType==="style"),this.fire(new u.l(`${O.dataType}data`,O))})),this.on("dataloading",(O=>{this.fire(new u.l(`${O.dataType}dataloading`,O))})),this.on("dataabort",(O=>{this.fire(new u.l("sourcedataabort",O))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,n){return this.style.setGlobalStateProperty(w,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,n){if(n===void 0&&(n=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new u.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(c,p.firstChild):p.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new u.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(w);return n>-1&&this._controls.splice(n,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return fn(this.transform,w)}calculateCameraOptionsFromTo(w,n,c,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLat(c,this.transform)),super.calculateCameraOptionsFromTo(w,n,c,p)}resize(w,n=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(n);const c=!this._moving;return c&&(this.stop(),this.fire(new u.l("movestart",w)).fire(new u.l("move",w))),this.fire(new u.l("resize",w)),c&&this.fire(new u.l("moveend",w)),this}_resizeInternal(w=!0){const[n,c]=this._containerDimensions(),p=this._getClampedPixelRatio(n,c);if(this._resizeCanvas(n,c,p),this.painter.resize(n,c,p),this.painter.overLimit()){const _=this.painter.context.gl;this._maxCanvasSize=[_.drawingBufferWidth,_.drawingBufferHeight];const T=this._getClampedPixelRatio(n,c);this._resizeCanvas(n,c,T),this.painter.resize(n,c,T)}this._resizeTransform(w)}_resizeTransform(w=!0){var n;const[c,p]=this._containerDimensions();this.transform.resize(c,p,w),(n=this._requestedCameraState)===null||n===void 0||n.resize(c,p,w)}_getClampedPixelRatio(w,n){const{0:c,1:p}=this._maxCanvasSize,_=this.getPixelRatio(),T=w*_,A=n*_;return Math.min(T>c?c/T:1,A>p?p/A:1)*_}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Lr.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const n=this.transform.zoom,c=this._getTransformForUpdate();return c.setMinZoom(w),this._applyUpdatedTransform(c),this._update(),n!==this.transform.zoom&&this.fire(new u.l("zoomstart")).fire(new u.l("zoom")).fire(new u.l("zoomend")).fire(new u.l("movestart")).fire(new u.l("move")).fire(new u.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const n=this.transform.zoom,c=this._getTransformForUpdate();return c.setMaxZoom(w),this._applyUpdatedTransform(c),this._update(),n!==this.transform.zoom&&this.fire(new u.l("zoomstart")).fire(new u.l("zoom")).fire(new u.l("zoomend")).fire(new u.l("movestart")).fire(new u.l("move")).fire(new u.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch){const n=this.transform.pitch,c=this._getTransformForUpdate();return c.setMinPitch(w),this._applyUpdatedTransform(c),this._update(),n!==this.transform.pitch&&this.fire(new u.l("pitchstart")).fire(new u.l("pitch")).fire(new u.l("pitchend")).fire(new u.l("movestart")).fire(new u.l("move")).fire(new u.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch){const n=this.transform.pitch,c=this._getTransformForUpdate();return c.setMaxPitch(w),this._applyUpdatedTransform(c),this._update(),n!==this.transform.pitch&&this.fire(new u.l("pitchstart")).fire(new u.l("pitch")).fire(new u.l("pitchend")).fire(new u.l("movestart")).fire(new u.l("move")).fire(new u.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(u.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(u.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,n,c){if(w==="mouseenter"||w==="mouseover"){let p=!1;return{layers:n,listener:c,delegates:{mousemove:T=>{const A=n.filter((R=>this.getLayer(R))),O=A.length!==0?this.queryRenderedFeatures(T.point,{layers:A}):[];O.length?p||(p=!0,c.call(this,new ci(w,this,T.originalEvent,{features:O}))):p=!1},mouseout:()=>{p=!1}}}}if(w==="mouseleave"||w==="mouseout"){let p=!1;return{layers:n,listener:c,delegates:{mousemove:A=>{const O=n.filter((R=>this.getLayer(R)));(O.length!==0?this.queryRenderedFeatures(A.point,{layers:O}):[]).length?p=!0:p&&(p=!1,c.call(this,new ci(w,this,A.originalEvent)))},mouseout:A=>{p&&(p=!1,c.call(this,new ci(w,this,A.originalEvent)))}}}}{const p=_=>{const T=n.filter((O=>this.getLayer(O))),A=T.length!==0?this.queryRenderedFeatures(_.point,{layers:T}):[];A.length&&(_.features=A,c.call(this,_),delete _.features)};return{layers:n,listener:c,delegates:{[w]:p}}}}_saveDelegatedListener(w,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(n)}_removeDelegatedListener(w,n,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const p=this._delegatedListeners[w];for(let _=0;_<p.length;_++){const T=p[_];if(T.listener===c&&T.layers.length===n.length&&T.layers.every((A=>n.includes(A)))){for(const A in T.delegates)this.off(A,T.delegates[A]);return void p.splice(_,1)}}}on(w,n,c){if(c===void 0)return super.on(w,n);const p=typeof n=="string"?[n]:n,_=this._createDelegatedListener(w,p,c);this._saveDelegatedListener(w,_);for(const T in _.delegates)this.on(T,_.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(w,p,c)}}}once(w,n,c){if(c===void 0)return super.once(w,n);const p=typeof n=="string"?[n]:n,_=this._createDelegatedListener(w,p,c);for(const T in _.delegates){const A=_.delegates[T];_.delegates[T]=(...O)=>{this._removeDelegatedListener(w,p,c),A(...O)}}this._saveDelegatedListener(w,_);for(const T in _.delegates)this.once(T,_.delegates[T]);return this}off(w,n,c){return c===void 0?super.off(w,n):(this._removeDelegatedListener(w,typeof n=="string"?[n]:n,c),this)}queryRenderedFeatures(w,n){if(!this.style)return[];let c;const p=w instanceof u.P||Array.isArray(w),_=p?w:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(p?{}:w)||{},_ instanceof u.P||typeof _[0]=="number")c=[u.P.convert(_)];else{const T=u.P.convert(_[0]),A=u.P.convert(_[1]);c=[T,new u.P(A.x,T.y),A,new u.P(T.x,A.y),T]}return this.style.queryRenderedFeatures(c,n,this.transform)}querySourceFeatures(w,n){return this.style.querySourceFeatures(w,n)}setStyle(w,n){return(n=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(w,n))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const n=this._locale[w];if(n==null)throw new Error(`Missing UI string '${w}'`);return n}_updateStyle(w,n){var c,p;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,n)));const _=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new dl(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,n,_):this.style.loadJSON(w,n,_),this):((p=(c=this.style)===null||c===void 0?void 0:c.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,n){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");u.j(c,new AbortController).then((p=>{this._updateDiff(p.data,n)})).catch((p=>{p&&this.fire(new u.k(p))}))}else typeof w=="object"&&this._updateDiff(w,n)}_updateDiff(w,n){try{this.style.setState(w,n)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(w,n){return this._lazyInitEmptyStyle(),this.style.addSource(w,n),this._update(!0)}isSourceLoaded(w){const n=this.style&&this.style.tileManagers[w];if(n!==void 0)return n.loaded();this.fire(new u.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const n=this.style.tileManagers[w.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&n.reload();for(const c in this.style._layers){const p=this.style._layers[c];p.type==="hillshade"&&p.source===w.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===w.source&&u.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new vr(this.painter,n,w),this.painter.renderToTexture=new Do(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var p;c.dataType==="style"?this.terrain.tileManager.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=c.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new u.l("terrain",{terrain:w})),this}getTerrain(){var w,n;return(n=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const n of Object.values(w))if(!n.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,n,c){if(c){const p=this.getSource(c);if(!p)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);p.calculateTileZoom=Jt(Math.max(1,w),Math.max(1,n))}else for(const p in this.style.tileManagers)this.style.tileManagers[p].getSource().calculateTileZoom=Jt(Math.max(1,w),Math.max(1,n));return this._update(!0),this}refreshTiles(w,n){const c=this.style.tileManagers[w];if(!c)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);n===void 0?c.reload(!0):c.refreshTiles(n.map((p=>new u.ac(p.z,p.x,p.y))))}addImage(w,n,c={}){const{pixelRatio:p=1,sdf:_=!1,stretchX:T,stretchY:A,content:O,textFitWidth:R,textFitHeight:U}=c;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||u.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:V,height:K,data:X}=n,re=n;return this.style.addImage(w,{data:new u.R({width:V,height:K},new Uint8Array(X)),pixelRatio:p,stretchX:T,stretchY:A,content:O,textFitWidth:R,textFitHeight:U,sdf:_,version:0,userImage:re}),re.onAdd&&re.onAdd(this,w),this}}{const{width:V,height:K,data:X}=G.getImageData(n);this.style.addImage(w,{data:new u.R({width:V,height:K},X),pixelRatio:p,stretchX:T,stretchY:A,content:O,textFitWidth:R,textFitHeight:U,sdf:_,version:0})}}updateImage(w,n){const c=this.style.getImage(w);if(!c)return this.fire(new u.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||u.b(n)?G.getImageData(n):n,{width:_,height:T,data:A}=p;if(_===void 0||T===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==c.data.width||T!==c.data.height)return this.fire(new u.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const O=!(n instanceof HTMLImageElement||u.b(n));return c.data.replace(A,O),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new u.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Se.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,n){return this._lazyInitEmptyStyle(),this.style.addLayer(w,n),this._update(!0)}moveLayer(w,n){return this.style.moveLayer(w,n),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,n,c){return this.style.setLayerZoomRange(w,n,c),this._update(!0)}setFilter(w,n,c={}){return this.style.setFilter(w,n,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,n,c,p={}){return this.style.setPaintProperty(w,n,c,p),this._update(!0)}getPaintProperty(w,n){return this.style.getPaintProperty(w,n)}setLayoutProperty(w,n,c,p={}){return this.style.setLayoutProperty(w,n,c,p),this._update(!0)}getLayoutProperty(w,n){return this.style.getLayoutProperty(w,n)}setGlyphs(w,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,n,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,n,c,(p=>{p||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,n,(c=>{c||this._update(!0)})),this}setLight(w,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,n){return this.style.setFeatureState(w,n),this._update()}removeFeatureState(w,n){return this.style.removeFeatureState(w,n),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,n=0;return this._container&&(w=this._container.clientWidth||400,n=this._container.clientHeight||300),[w,n]}_setupResizeObserver(){var w;let n=!1;const c=Yd((_=>{this._trackResize&&!this._removed&&(this.resize(_),this.redraw())}),50),p=(w=this._ownerWindow.ResizeObserver)!==null&&w!==void 0?w:ResizeObserver;this._resizeObserver=new p((_=>{n?c(_):n=!0})),this._resizeObserver.observe(this._container)}_resolveContainer(w){if(typeof w=="string"){const n=document.getElementById(w);if(!n)throw new Error(`Container '${w}' not found.`);return n}if(w instanceof HTMLElement||w&&typeof w=="object"&&w.nodeType===1)return w;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const n=this._canvasContainer=$.create("div","maplibregl-canvas-container",w);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=$.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),p=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],p);const _=this._controlContainer=$.create("div","maplibregl-control-container",w),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((A=>{T[A]=$.create("div",`maplibregl-ctrl-${A} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,n,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*n),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",(p=>{n={requestedAttributes:w},p&&(n.statusMessage=p.statusMessage,n.type=p.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const p="Failed to initialize WebGL";throw n?(n.message=p,new Error(JSON.stringify(n))):new Error(p)}this.painter=new Pm(c,this.transform),se.testSupport(c)}migrateProjection(w,n){super.migrateProjection(w,n),this.painter.transform=w,this.fire(new u.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var n,c,p,_,T;const A=this._idleTriggered?this._fadeDuration:0,O=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,X=H();this.style.zoomHistory.update(K,X);const re=new u.H(K,{now:X,fadeDuration:A,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),oe=re.crossFadingFactor();oe===1&&oe===this._crossFadingFactor||(R=!0,this._crossFadingFactor=oe),this.style.update(re)}const U=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==O;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((_=this.style.projection)===null||_===void 0?void 0:_.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||U)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,A,this._crossSourceCollisions,U),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:A,showPadding:this.showPadding}),this.fire(new u.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.cH.mark(u.cI.load),this.fire(new u.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const V=this._sourcesDirty||this._styleDirty||this._placementDirty;return V||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.l("idle")),!this._loaded||this._fullyLoaded||V||(this._fullyLoaded=!0,u.cH.mark(u.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),Se.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),$.remove(this._canvasContainer),$.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),u.cH.remove(),this._removed=!0,this.fire(new u.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,G.frame(this._frameRequest,(w=>{u.cH.recordStartOfFrameAt(w),this._frameRequest=null;try{this._render(w)}catch(n){if(!u.Z(n)&&!(function(c){return c.message===bl})(n))throw n}}),(()=>{}),this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return mu}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},v.MapMouseEvent=ci,v.MapTouchEvent=Mo,v.MapWheelEvent=$f,v.Marker=Rh,v.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const n=this._map.getZoom(),c=n===this._map.getMaxZoom(),p=n===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,c)=>{const p=this._map._getUIString(`NavigationControl.${c}`);n.title=p,n.setAttribute("aria-label",p)},this.options=u.e({},Jd,w),this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(n=>this._map.zoomIn({},{originalEvent:n}))),$.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(n=>this._map.zoomOut({},{originalEvent:n}))),$.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})})),this._compassIcon=$.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new un(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){$.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,n){const c=$.create("button",w,this._container);return c.type="button",c.addEventListener("click",n),c}},v.Popup=class extends u.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&$.remove(this._content),this._container&&($.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=$.create("div","maplibregl-popup",this._map.getContainer()),this._tip=$.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const A of this.options.className.split(" "))this._container.classList.add(A);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=vc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const c=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const _=xc(this.options.offset);if(!p){const A=this._container.offsetWidth,O=this._container.offsetHeight,R=(function(V){var K,X,re,oe;return V?{top:(K=V.top)!==null&&K!==void 0?K:0,right:(X=V.right)!==null&&X!==void 0?X:0,bottom:(re=V.bottom)!==null&&re!==void 0?re:0,left:(oe=V.left)!==null&&oe!==void 0?oe:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let U;U=c.y+_.bottom.y<O+R.top?["top"]:c.y>this._map.transform.height-O-R.bottom?["bottom"]:[],c.x<A/2+R.left?U.push("left"):c.x>this._map.transform.width-A/2-R.right&&U.push("right"),p=U.length===0?"bottom":U.join("-")}let T=c.add(_[p]);this.options.subpixelPositioning||(T=T.round()),$.setTransform(this._container,`${_c[p]} translate(${T.x}px,${T.y}px)`),kh(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(gu),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=u.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const n=document.createDocumentFragment(),c=document.createElement("body");let p;for(c.innerHTML=w;p=c.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=$.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}setPadding(w){this.options.padding=w,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=$.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(yu);w&&w.focus()}},v.RasterDEMTileSource=Go,v.RasterTileSource=Ss,v.ScaleControl=class{constructor(w){this._onMove=()=>{vn(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,vn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Pi),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){$.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},v.ScrollZoomHandler=Dh,v.Style=dl,v.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=$.create("button","maplibregl-ctrl-terrain",this._container),$.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){$.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},v.TwoFingersTouchPitchHandler=Ls,v.TwoFingersTouchRotateHandler=Ch,v.TwoFingersTouchZoomHandler=fs,v.TwoFingersTouchZoomRotateHandler=du,v.VectorTileSource=il,v.VideoSource=Yu,v.addSourceType=(w,n)=>u._(void 0,void 0,void 0,(function*(){if(Qc(w))throw new Error(`A source type called "${w}" already exists.`);((c,p)=>{Es[c]=p})(w,n)})),v.clearPrewarmedResources=function(){const w=Gt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(zt),Gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},v.createTileMesh=mm,v.getMaxParallelImageRequests=function(){return u.c.MAX_PARALLEL_IMAGE_REQUESTS},v.getRTLTextPluginStatus=function(){return ne().getRTLTextPluginStatus()},v.getVersion=function(){return Io},v.getWorkerCount=function(){return $t.workerCount},v.getWorkerUrl=function(){return u.c.WORKER_URL},v.importScriptInWorkers=function(w){return mr().broadcast("IS",w)},v.isTimeFrozen=function(){return Y.isFrozen()},v.now=H,v.prewarm=function(){ht().acquire(zt)},v.restoreNow=function(){Y.restoreNow()},v.setMaxParallelImageRequests=function(w){u.c.MAX_PARALLEL_IMAGE_REQUESTS=w},v.setNow=function(w){Y.setNow(w)},v.setRTLTextPlugin=function(w,n){return ne().setRTLTextPlugin(w,n)},v.setWorkerCount=function(w){$t.workerCount=w},v.setWorkerUrl=function(w){u.c.WORKER_URL=w}}));var g=i;return g}))})(H0)),H0.exports}var c5=u5();const zv=Yc(c5);var Xs=Uint8Array,Vg=Uint16Array,h5=Int32Array,JD=new Xs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eO=new Xs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f5=new Xs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tO=function(e,t){for(var i=new Vg(31),a=0;a<31;++a)i[a]=t+=1<<e[a-1];for(var d=new h5(i[30]),a=1;a<30;++a)for(var g=i[a];g<i[a+1];++g)d[g]=g-i[a]<<5|a;return{b:i,r:d}},rO=tO(JD,2),nO=rO.b,d5=rO.r;nO[28]=258,d5[258]=28;var p5=tO(eO,0),m5=p5.b,o2=new Vg(32768);for(var Jn=0;Jn<32768;++Jn){var xd=(Jn&43690)>>1|(Jn&21845)<<1;xd=(xd&52428)>>2|(xd&13107)<<2,xd=(xd&61680)>>4|(xd&3855)<<4,o2[Jn]=((xd&65280)>>8|(xd&255)<<8)>>1}var Cv=(function(e,t,i){for(var a=e.length,d=0,g=new Vg(t);d<a;++d)e[d]&&++g[e[d]-1];var v=new Vg(t);for(d=1;d<t;++d)v[d]=v[d-1]+g[d-1]<<1;var u;if(i){u=new Vg(1<<t);var M=15-t;for(d=0;d<a;++d)if(e[d])for(var C=d<<4|e[d],D=t-e[d],I=v[e[d]-1]++<<D,N=I|(1<<D)-1;I<=N;++I)u[o2[I]>>M]=C}else for(u=new Vg(a),d=0;d<a;++d)e[d]&&(u[d]=o2[v[e[d]-1]++]>>15-e[d]);return u}),e_=new Xs(288);for(var Jn=0;Jn<144;++Jn)e_[Jn]=8;for(var Jn=144;Jn<256;++Jn)e_[Jn]=9;for(var Jn=256;Jn<280;++Jn)e_[Jn]=7;for(var Jn=280;Jn<288;++Jn)e_[Jn]=8;var iO=new Xs(32);for(var Jn=0;Jn<32;++Jn)iO[Jn]=5;var g5=Cv(e_,9,1),y5=Cv(iO,5,1),_1=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Bu=function(e,t,i){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&i},x1=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(t&7)},v5=function(e){return(e+7)/8|0},_5=function(e,t,i){return(i==null||i>e.length)&&(i=e.length),new Xs(e.subarray(t,i))},x5=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ys=function(e,t,i){var a=new Error(t||x5[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,Ys),!i)throw a;return a},fS=function(e,t,i,a){var d=e.length,g=0;if(!d||t.f&&!t.l)return i||new Xs(0);var v=!i,u=v||t.i!=2,M=t.i;v&&(i=new Xs(d*3));var C=function(mr){var St=i.length;if(mr>St){var Dn=new Xs(Math.max(St*2,mr));Dn.set(i),i=Dn}},D=t.f||0,I=t.p||0,N=t.b||0,G=t.l,Y=t.d,H=t.m,$=t.n,se=d*8;do{if(!G){D=Bu(e,I,1);var he=Bu(e,I+1,3);if(I+=3,he)if(he==1)G=g5,Y=y5,H=9,$=5;else if(he==2){var ge=Bu(e,I,31)+257,Se=Bu(e,I+10,15)+4,Ue=ge+Bu(e,I+5,31)+1;I+=14;for(var et=new Xs(Ue),vt=new Xs(19),pt=0;pt<Se;++pt)vt[f5[pt]]=Bu(e,I+pt*3,7);I+=Se*3;for(var Fe=_1(vt),Ct=(1<<Fe)-1,It=Cv(vt,Fe,1),pt=0;pt<Ue;){var jt=It[Bu(e,I,Ct)];I+=jt&15;var fe=jt>>4;if(fe<16)et[pt++]=fe;else{var $e=0,ct=0;for(fe==16?(ct=3+Bu(e,I,3),I+=2,$e=et[pt-1]):fe==17?(ct=3+Bu(e,I,7),I+=3):fe==18&&(ct=11+Bu(e,I,127),I+=7);ct--;)et[pt++]=$e}}var Et=et.subarray(0,ge),_t=et.subarray(ge);H=_1(Et),$=_1(_t),G=Cv(Et,H,1),Y=Cv(_t,$,1)}else Ys(1);else{var fe=v5(I)+4,me=e[fe-4]|e[fe-3]<<8,Ae=fe+me;if(Ae>d){M&&Ys(0);break}u&&C(N+me),i.set(e.subarray(fe,Ae),N),t.b=N+=me,t.p=I=Ae*8,t.f=D;continue}if(I>se){M&&Ys(0);break}}u&&C(N+131072);for(var Ut=(1<<H)-1,ze=(1<<$)-1,at=I;;at=I){var $e=G[x1(e,I)&Ut],Pt=$e>>4;if(I+=$e&15,I>se){M&&Ys(0);break}if($e||Ys(2),Pt<256)i[N++]=Pt;else if(Pt==256){at=I,G=null;break}else{var zt=Pt-254;if(Pt>264){var pt=Pt-257,$t=JD[pt];zt=Bu(e,I,(1<<$t)-1)+nO[pt],I+=$t}var Kt=Y[x1(e,I)&ze],Gt=Kt>>4;Kt||Ys(3),I+=Kt&15;var _t=m5[Gt];if(Gt>3){var $t=eO[Gt];_t+=x1(e,I)&(1<<$t)-1,I+=$t}if(I>se){M&&Ys(0);break}u&&C(N+131072);var Ar=N+zt;if(N<_t){var ht=g-_t,sr=Math.min(_t,Ar);for(ht+N<0&&Ys(3);N<sr;++N)i[N]=a[ht+N]}for(;N<Ar;++N)i[N]=i[N-_t]}}t.l=G,t.p=at,t.b=N,t.f=D,G&&(D=1,t.m=H,t.d=Y,t.n=$)}while(!D);return N!=i.length&&v?_5(i,0,N):i.subarray(0,N)},b5=new Xs(0),w5=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Ys(6,"invalid gzip data");var t=e[3],i=10;t&4&&(i+=(e[10]|e[11]<<8)+2);for(var a=(t>>3&1)+(t>>4&1);a>0;a-=!e[i++]);return i+(t&2)},S5=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},T5=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ys(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ys(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function E5(e,t){return fS(e,{i:2},t,t)}function A5(e,t){var i=w5(e);return i+8>e.length&&Ys(6,"invalid gzip data"),fS(e.subarray(i,-8),{i:2},new Xs(S5(e)),t)}function M5(e,t){return fS(e.subarray(T5(e),-4),{i:2},t,t)}function P5(e,t){return e[0]==31&&e[1]==139&&e[2]==8?A5(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?E5(e,t):M5(e,t)}var C5=typeof TextDecoder<"u"&&new TextDecoder,D5=0;try{C5.decode(b5,{stream:!0}),D5=1}catch{}var O5=Object.defineProperty,I5=Math.pow,Cn=(e,t)=>O5(e,"name",{value:t,configurable:!0}),_a=(e,t,i)=>new Promise((a,d)=>{var g=M=>{try{u(i.next(M))}catch(C){d(C)}},v=M=>{try{u(i.throw(M))}catch(C){d(C)}},u=M=>M.done?a(M.value):Promise.resolve(M.value).then(g,v);u((i=i.apply(e,t)).next())});Cn((e,t)=>{let i=!1,a="",d=L.GridLayer.extend({createTile:Cn((g,v)=>{let u=document.createElement("img"),M=new AbortController,C=M.signal;return u.cancel=()=>{M.abort()},i||(e.getHeader().then(D=>{D.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):D.tileType===2?a="image/png":D.tileType===3?a="image/jpeg":D.tileType===4?a="image/webp":D.tileType===5&&(a="image/avif")}),i=!0),e.getZxy(g.z,g.x,g.y,C).then(D=>{if(D){let I=new Blob([D.data],{type:a}),N=window.URL.createObjectURL(I);u.src=N}else u.style.display="none";u.cancel=void 0,v(void 0,u)}).catch(D=>{if(D.name!=="AbortError")throw D}),u},"createTile"),_removeTile:Cn(function(g){let v=this._tiles[g];v&&(v.el.cancel&&v.el.cancel(),v.el.width=0,v.el.height=0,v.el.deleted=!0,L.DomUtil.remove(v.el),delete this._tiles[g],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(g)}))},"_removeTile")});return new d(t)},"leafletRasterLayer");var z5=Cn(e=>(t,i)=>{if(i instanceof AbortController)return e(t,i);let a=new AbortController;return e(t,a).then(d=>i(void 0,d.data,d.cacheControl||"",d.expires||""),d=>i(d)).catch(d=>i(d)),{cancel:Cn(()=>a.abort(),"cancel")}},"v3compat"),aO=class{constructor(t){this.tilev4=Cn((i,a)=>_a(this,null,function*(){if(i.type==="json"){let G=i.url.substr(10),Y=this.tiles.get(G);if(Y||(Y=new kv(G),this.tiles.set(G,Y)),this.metadata){let $=yield Y.getTileJson(i.url);return a.signal.throwIfAborted(),{data:$}}let H=yield Y.getHeader();return a.signal.throwIfAborted(),(H.minLon>=H.maxLon||H.minLat>=H.maxLat)&&console.error(`Bounds of PMTiles archive ${H.minLon},${H.minLat},${H.maxLon},${H.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:H.minZoom,maxzoom:H.maxZoom,bounds:[H.minLon,H.minLat,H.maxLon,H.maxLat]}}}let d=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),g=i.url.match(d);if(!g)throw new Error("Invalid PMTiles protocol URL");let v=g[1],u=this.tiles.get(v);u||(u=new kv(v),this.tiles.set(v,u));let M=g[2],C=g[3],D=g[4],I=yield u.getHeader(),N=yield u?.getZxy(+M,+C,+D,a.signal);if(a.signal.throwIfAborted(),N)return{data:new Uint8Array(N.data),cacheControl:N.cacheControl,expires:N.expires};if(I.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=z5(this.tilev4),this.tiles=new Map,this.metadata=t?.metadata||!1,this.errorOnMissingTile=t?.errorOnMissingTile||!1}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};Cn(aO,"Protocol");var k5=aO;function oO(e,t){return(t>>>0)*4294967296+(e>>>0)}Cn(oO,"toNum");function sO(e,t){let i=t.buf,a=i[t.pos++],d=(a&112)>>4;if(a<128||(a=i[t.pos++],d|=(a&127)<<3,a<128)||(a=i[t.pos++],d|=(a&127)<<10,a<128)||(a=i[t.pos++],d|=(a&127)<<17,a<128)||(a=i[t.pos++],d|=(a&127)<<24,a<128)||(a=i[t.pos++],d|=(a&1)<<31,a<128))return oO(e,d);throw new Error("Expected varint not more than 10 bytes")}Cn(sO,"readVarintRemainder");function Fg(e){let t=e.buf,i=t[e.pos++],a=i&127;return i<128||(i=t[e.pos++],a|=(i&127)<<7,i<128)||(i=t[e.pos++],a|=(i&127)<<14,i<128)||(i=t[e.pos++],a|=(i&127)<<21,i<128)?a:(i=t[e.pos],a|=(i&15)<<28,sO(a,e))}Cn(Fg,"readVarint");function dS(e,t,i,a,d){return d===0?a!==0?[e-1-i,e-1-t]:[i,t]:[t,i]}Cn(dS,"rotate");function lO(e,t,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(t>=1<<e||i>=1<<e)throw new Error("tile x/y outside zoom level bounds");let a=((1<<e)*(1<<e)-1)/3,d=e-1,[g,v]=[t,i];for(let u=1<<d;u>0;u>>=1){let M=g&u,C=v&u;a+=(3*M^C)*(1<<d),[g,v]=dS(u,g,v,M,C),d--}return a}Cn(lO,"zxyToTileId");function uO(e){let t=3*e+1;return t<4294967296?31-Math.clz32(t):63-Math.clz32(t/4294967296)}Cn(uO,"tileIdToZ");function R5(e){let t=uO(e)>>1;if(t>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");let i=((1<<t)*(1<<t)-1)/3,a=e-i,d=0,g=0,v=1<<t;for(let u=1;u<v;u<<=1){let M=u&a/2,C=u&(a^M);[d,g]=dS(u,d,g,M,C),a=a/2,d+=M,g+=C}return[t,d,g]}Cn(R5,"tileIdToZxy");var L5=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(L5||{});function rb(e,t){return _a(this,null,function*(){if(t===1||t===0)return e;if(t===2){if(typeof globalThis.DecompressionStream>"u")return P5(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let a=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw new Error("Compression method not supported")})}Cn(rb,"defaultDecompress");var j5=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e[e.Mlt=6]="Mlt",e))(j5||{});function cO(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":e===6?".mlt":""}Cn(cO,"tileTypeExt");var B5=127;function hO(e,t){let i=0,a=e.length-1;for(;i<=a;){let d=a+i>>1,g=t-e[d].tileId;if(g>0)i=d+1;else if(g<0)a=d-1;else return e[d]}return a>=0&&(e[a].runLength===0||t-e[a].tileId<e[a].runLength)?e[a]:null}Cn(hO,"findTile");var N5=class{constructor(t){this.file=t}getKey(){return this.file.name}getBytes(t,i){return _a(this,null,function*(){return{data:yield this.file.slice(t,t+i).arrayBuffer()}})}};Cn(N5,"FileSource");var fO=class{constructor(t,i=new Headers){var a,d;this.url=t,this.customHeaders=i,this.mustReload=!1;let g="";"navigator"in globalThis&&(g=(d=(a=globalThis.navigator)==null?void 0:a.userAgent)!=null?d:"");let v=g.indexOf("Windows")>-1,u=/Chrome|Chromium|Edg|OPR|Brave/.test(g);this.chromeWindowsNoCache=!1,v&&u&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,i,a,d){return _a(this,null,function*(){let g,v;a?v=a:(g=new AbortController,v=g.signal);let u=new Headers(this.customHeaders);u.set("range",`bytes=${t}-${t+i-1}`);let M;this.mustReload?M="reload":this.chromeWindowsNoCache&&(M="no-store");let C=yield fetch(this.url,{signal:v,cache:M,headers:u});if(t===0&&C.status===416){let N=C.headers.get("Content-Range");if(!N||!N.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let G=+N.substr(8);C=yield fetch(this.url,{signal:v,cache:"reload",headers:{range:`bytes=0-${G-1}`}})}let D=C.headers.get("Etag");if(D!=null&&D.startsWith("W/")&&(D=null),C.status===416||d&&D&&D!==d)throw this.mustReload=!0,new s2(`Server returned non-matching ETag ${d} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(C.status>=300)throw new Error(`Bad response code: ${C.status}`);let I=C.headers.get("Content-Length");if(C.status===200&&(!I||+I>i))throw g&&g.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield C.arrayBuffer(),etag:D||void 0,cacheControl:C.headers.get("Cache-Control")||void 0,expires:C.headers.get("Expires")||void 0}})}};Cn(fO,"FetchSource");var F5=fO;function Fl(e,t){let i=e.getUint32(t+4,!0),a=e.getUint32(t+0,!0);return i*I5(2,32)+a}Cn(Fl,"getUint64");function dO(e,t){let i=new DataView(e),a=i.getUint8(7);if(a>3)throw new Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:Fl(i,8),rootDirectoryLength:Fl(i,16),jsonMetadataOffset:Fl(i,24),jsonMetadataLength:Fl(i,32),leafDirectoryOffset:Fl(i,40),leafDirectoryLength:Fl(i,48),tileDataOffset:Fl(i,56),tileDataLength:Fl(i,64),numAddressedTiles:Fl(i,72),numTileEntries:Fl(i,80),numTileContents:Fl(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:t}}Cn(dO,"bytesToHeader");function pS(e){let t={buf:new Uint8Array(e),pos:0},i=Fg(t),a=[],d=0;for(let g=0;g<i;g++){let v=Fg(t);a.push({tileId:d+v,offset:0,length:0,runLength:1}),d+=v}for(let g=0;g<i;g++)a[g].runLength=Fg(t);for(let g=0;g<i;g++)a[g].length=Fg(t);for(let g=0;g<i;g++){let v=Fg(t);v===0&&g>0?a[g].offset=a[g-1].offset+a[g-1].length:a[g].offset=v-1}return a}Cn(pS,"deserializeIndex");var pO=class extends Error{};Cn(pO,"EtagMismatch");var s2=pO;function mS(e,t){return _a(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let a=i.data.slice(0,B5),d=dO(a,i.etag),g=i.data.slice(d.rootDirectoryOffset,d.rootDirectoryOffset+d.rootDirectoryLength),v=`${e.getKey()}|${d.etag||""}|${d.rootDirectoryOffset}|${d.rootDirectoryLength}`,u=pS(yield t(g,d.internalCompression));return[d,[v,u.length,u]]})}Cn(mS,"getHeaderAndRoot");function gS(e,t,i,a,d){return _a(this,null,function*(){let g=yield e.getBytes(i,a,void 0,d.etag),v=yield t(g.data,d.internalCompression),u=pS(v);if(u.length===0)throw new Error("Empty directory is invalid");return u})}Cn(gS,"getDirectory");var U5=class{constructor(t=100,i=!0,a=rb){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=a}getHeader(t){return _a(this,null,function*(){let i=t.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,a.data;let d=yield mS(t,this.decompress);return d[1]&&this.cache.set(d[1][0],{lastUsed:this.counter++,data:d[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:d[0]}),this.prune(),d[0]})}getDirectory(t,i,a,d){return _a(this,null,function*(){let g=`${t.getKey()}|${d.etag||""}|${i}|${a}`,v=this.cache.get(g);if(v)return v.lastUsed=this.counter++,v.data;let u=yield gS(t,this.decompress,i,a,d);return this.cache.set(g,{lastUsed:this.counter++,data:u}),this.prune(),u})}prune(){if(this.cache.size>this.maxCacheEntries){let t=1/0,i;this.cache.forEach((a,d)=>{a.lastUsed<t&&(t=a.lastUsed,i=d)}),i&&this.cache.delete(i)}}invalidate(t){return _a(this,null,function*(){this.cache.delete(t.getKey())})}};Cn(U5,"ResolvedValueCache");var mO=class{constructor(t=100,i=!0,a=rb){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=a}getHeader(t){return _a(this,null,function*(){let i=t.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,yield a.data;let d=new Promise((g,v)=>{mS(t,this.decompress).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),g(u[0]),this.prune()}).catch(u=>{v(u)})});return this.cache.set(i,{lastUsed:this.counter++,data:d}),d})}getDirectory(t,i,a,d){return _a(this,null,function*(){let g=`${t.getKey()}|${d.etag||""}|${i}|${a}`,v=this.cache.get(g);if(v)return v.lastUsed=this.counter++,yield v.data;let u=new Promise((M,C)=>{gS(t,this.decompress,i,a,d).then(D=>{M(D),this.prune()}).catch(D=>{C(D)})});return this.cache.set(g,{lastUsed:this.counter++,data:u}),u})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,i;this.cache.forEach((a,d)=>{a.lastUsed<t&&(t=a.lastUsed,i=d)}),i&&this.cache.delete(i)}}invalidate(t){return _a(this,null,function*(){let i=t.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(t.getKey());let a=new Promise((d,g)=>{this.getHeader(t).then(v=>{d(),this.invalidations.delete(i)}).catch(v=>{g(v)})});this.invalidations.set(i,a)})}};Cn(mO,"SharedPromiseCache");var V5=mO,gO=class{constructor(t,i,a){typeof t=="string"?this.source=new F5(t):this.source=t,a?this.decompress=a:this.decompress=rb,i?this.cache=i:this.cache=new V5}getHeader(){return _a(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,i,a,d){return _a(this,null,function*(){let g=lO(t,i,a),v=yield this.cache.getHeader(this.source);if(t<v.minZoom||t>v.maxZoom)return;let u=v.rootDirectoryOffset,M=v.rootDirectoryLength;for(let C=0;C<=3;C++){let D=yield this.cache.getDirectory(this.source,u,M,v),I=hO(D,g);if(I){if(I.runLength>0){let N=yield this.source.getBytes(v.tileDataOffset+I.offset,I.length,d,v.etag);return{data:yield this.decompress(N.data,v.tileCompression),cacheControl:N.cacheControl,expires:N.expires}}u=v.leafDirectoryOffset+I.offset,M=I.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(t,i,a,d){return _a(this,null,function*(){try{return yield this.getZxyAttempt(t,i,a,d)}catch(g){if(g instanceof s2)return this.cache.invalidate(this.source),yield this.getZxyAttempt(t,i,a,d);throw g}})}getMetadataAttempt(){return _a(this,null,function*(){let t=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength,void 0,t.etag),a=yield this.decompress(i.data,t.internalCompression),d=new TextDecoder("utf-8");return JSON.parse(d.decode(a))})}getMetadata(){return _a(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof s2)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw t}})}getTileJson(t){return _a(this,null,function*(){let i=yield this.getHeader(),a=yield this.getMetadata(),d=cO(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${t}/{z}/{x}/{y}${d}`],vector_layers:a.vector_layers,attribution:a.attribution,description:a.description,name:a.name,version:a.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};Cn(gO,"PMTiles");var kv=gO;let q5=new k5;zv.addProtocol("pmtiles",q5.tile);const b1="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/unfpa_od_population_data.pmtiles",$5=({activeLayer:e,selectedYear:t="2023",onDistrictClick:i,gender:a="All",region:d="All",onResetClick:g})=>{const v=q.useRef(null),u=q.useRef(null),M=q.useRef(null),[C,D]=q.useState(null),I=q.useRef(5),N=q.useRef(i),G=q.useRef(g);q.useEffect(()=>{N.current=i,G.current=g},[i,g]),q.useEffect(()=>{(async()=>{try{const et=(await new kv(b1).getMetadata()).vector_layers?.find(vt=>vt.id==="zcta");et&&et.fields&&D(et.fields)}catch(Se){console.warn("Failed to fetch PMTiles metadata stats",Se)}})()},[]);const Y={dark:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"carto-dark":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://b.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://c.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png","https://d.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"],tileSize:256,attribution:" CARTO"}},layers:[{id:"carto-dark-layer",type:"raster",source:"carto-dark",minzoom:0,maxzoom:22}]},grey:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-grey":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri"}},layers:[{id:"esri-grey-layer",type:"raster",source:"esri-grey",minzoom:0,maxzoom:22}]},satellite:{version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{"esri-satellite":{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:" Esri, Maxar, Earthstar Geographics"}},layers:[{id:"background",type:"background",paint:{"background-color":"#000"}},{id:"esri-satellite-layer",type:"raster",source:"esri-satellite",minzoom:0,maxzoom:22}]}},[H,$]=q.useState("grey"),[se,he]=q.useState(!1),fe=ge=>{if(console.log("Setting up population layer for style:",H),ge.getSource("population-source")||ge.addSource("population-source",{type:"vector",url:`pmtiles://${b1}`}),!ge.getLayer("districts-fill")){let Se=["get",`pop_${t}_sum`],Ue=[0,1e6,2e6];a==="Male"?Se=["get",`male_${t}`]:a==="Female"&&(Se=["get",`female_${t}`]),a!=="All"&&(Ue=[0,50,100]),ge.addLayer({id:"districts-fill",type:"fill",source:"population-source","source-layer":"zcta",paint:{"fill-color":["interpolate",["linear"],Se,Ue[0],"#FEF2E8",Ue[1],"#F58220",Ue[2],"#D66B12"],"fill-opacity":.9,"fill-outline-color":"#FFFFFF"},layout:{visibility:e==="population"?"visible":"none"}}),ge.addLayer({id:"districts-border",type:"line",source:"population-source","source-layer":"zcta",paint:{"line-color":"#FFFFFF","line-width":.8,"line-opacity":.8},layout:{visibility:e==="population"?"visible":"none"}}),ge.on("click","districts-fill",et=>{if(et.features&&et.features.length>0){const vt=et.features[0],pt=vt.properties;if(N.current&&N.current(pt),vt.geometry){const Fe=new zv.LngLatBounds,Ct=It=>{Array.isArray(It[0])?It.forEach(jt=>Ct(jt)):Fe.extend(It)};Ct(vt.geometry.coordinates),Fe.isEmpty()||ge.fitBounds(Fe,{padding:80,duration:1200,essential:!0})}}}),ge.on("mouseenter","districts-fill",()=>{ge.getCanvas().style.cursor="pointer"}),ge.on("mouseleave","districts-fill",()=>{ge.getCanvas().style.cursor=""})}};q.useEffect(()=>{if(!v.current)return;const ge=new zv.Map({container:v.current,style:Y[H],center:[85.8245,20.2961],zoom:5,attributionControl:!1,interactive:!0});return ge.on("load",async()=>{ge.resize();try{const Ue=await new kv(b1).getHeader();if(Ue.minLon!==void 0){const et=[[Ue.minLon,Ue.minLat],[Ue.maxLon,Ue.maxLat]];M.current=et,ge.fitBounds(et,{padding:80,duration:0})}}catch(Se){console.warn("Could not auto-center from PMTiles header",Se)}fe(ge),ge.on("zoom",()=>{const Se=ge.getZoom(),Ue=Se<I.current;Se<4.8&&Ue&&G.current&&G.current(),I.current=Se})}),u.current=ge,()=>{u.current?.remove(),u.current=null}},[]),q.useEffect(()=>{const ge=u.current;if(!ge)return;const Se=()=>{ge.isStyleLoaded()?(console.log("Style fully loaded for:",H),ge.resize(),fe(ge),["esri-satellite-layer","carto-dark-layer","esri-grey-layer"].some(vt=>ge.getLayer(vt))&&(ge.getLayer("districts-fill")&&ge.moveLayer("districts-fill"),ge.getLayer("districts-border")&&ge.moveLayer("districts-border"))):setTimeout(Se,50)};return ge.once("style.load",Se),ge.setStyle(Y[H]),()=>{ge.off("style.load",Se)}},[H]),q.useEffect(()=>{u.current?.getLayer("districts-fill")&&u.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none"),u.current?.getLayer("districts-border")&&u.current.setLayoutProperty("districts-border","visibility",e==="population"?"visible":"none")},[e]),q.useEffect(()=>{if(u.current?.getLayer("districts-fill")){let ge,Se;if(a==="Male"?(ge=`male_${t}`,Se=[45,50,55]):a==="Female"?(ge=`female_${t}`,Se=[45,50,55]):(ge=`pop_${t}_sum`,Se=[1e5,1e6,25e5]),C&&C[ge]){const Ue=C[ge];if(Ue.min!==void 0&&Ue.max!==void 0){const et=Number(Ue.min),vt=Number(Ue.max);Se=[et,et+(vt-et)/2,vt]}}u.current.setPaintProperty("districts-fill","fill-color",["interpolate",["linear"],["get",ge],Se[0],"#FEF2E8",Se[1],"#F58220",Se[2],"#D66B12"]),u.current.setLayoutProperty("districts-fill","visibility",e==="population"?"visible":"none")}},[t,a,e,C]),q.useEffect(()=>{if(u.current?.getLayer("districts-fill")){const ge=d==="All"?null:["==",["get","region"],d];u.current.setFilter("districts-fill",ge),u.current?.getLayer("districts-border")&&u.current.setFilter("districts-border",ge)}},[d]);const me=()=>{g&&g(),u.current&&M.current?u.current.fitBounds(M.current,{padding:80,duration:1e3,essential:!0}):u.current&&u.current.flyTo({center:[85.8245,20.2961],zoom:5,duration:1e3})},Ae=[{id:"grey",label:"Grey Canvas"},{id:"dark",label:"Dark Matter"},{id:"satellite",label:"Satellite"}];return _e.jsxs("div",{className:"relative w-full h-full bg-slate-50",children:[_e.jsx("div",{ref:v,className:"w-full h-full"}),_e.jsxs("div",{className:"absolute bottom-5 right-5 flex items-end gap-3 z-20",children:[_e.jsxs("div",{className:"relative",children:[_e.jsxs("button",{onClick:()=>he(!se),className:"bg-white/70 backdrop-blur-md h-9 px-4 rounded-xl shadow-lg border border-gray-100 flex items-center gap-3 hover:bg-gray-50 transition-all min-w-[140px] justify-between",children:[_e.jsx("span",{className:"text-xs font-bold text-gray-700",children:Ae.find(ge=>ge.id===H)?.label}),_e.jsx(Xp,{className:`w-3.5 h-3.5 text-gray-400 transition-transform ${se?"rotate-180":""}`})]}),se&&_e.jsx("div",{className:"absolute right-0 bottom-full mb-2 w-48 bg-white/80 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 overflow-hidden animate-in fade-in slide-in-from-bottom-2 duration-200",children:Ae.map(ge=>_e.jsx("button",{onClick:()=>{$(ge.id),he(!1)},className:`w-full px-4 py-2.5 text-left text-xs font-bold transition-colors flex items-center justify-between ${H===ge.id?"bg-orange-50 text-primary":"text-gray-600 hover:bg-gray-50"}`,children:ge.label},ge.id))})]}),_e.jsxs("div",{className:"flex flex-col gap-2",children:[_e.jsx("button",{onClick:me,className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Reset View",children:_e.jsx(Hj,{className:"w-4 h-4"})}),_e.jsx("button",{onClick:()=>u.current?.zoomIn(),className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Zoom In",children:_e.jsx(e5,{className:"w-4 h-4"})}),_e.jsx("button",{onClick:()=>u.current?.zoomOut(),className:"bg-white/70 backdrop-blur-md w-9 h-9 flex items-center justify-center rounded-xl shadow-lg border border-gray-100 text-gray-600 hover:text-primary hover:border-primary transition-all active:scale-90",title:"Zoom Out",children:_e.jsx(Qj,{className:"w-4 h-4"})})]})]})]})},G5=({currentView:e,onViewChange:t,onDistrictChange:i,onDataChange:a})=>{const[d,g]=q.useState("population"),[v,u]=q.useState("2023"),[M,C]=q.useState("All"),[D,I]=q.useState("All"),[N,G]=q.useState(null);q.useEffect(()=>{if(N){const Fe=N.district_name||N.NAME||N.name||"Selected Area";i&&i(Fe),a&&a(N)}else i&&i("Odisha"),a&&a(null)},[N,i,a]);const[Y,H]=q.useState(["2023"]),[$,se]=q.useState(null),[he,fe]=q.useState({layer:"population",year:"2023",gender:"All",region:"All"}),me=[{id:"population",label:"Population Density"},{id:"lulc",label:"Land Use / Cover"},{id:"nightlight",label:"Night Lights"},{id:"buildup",label:"Built-up Area"}],Ae=["All","Male","Female"],ge=["All","Urban","Rural"],Se="https://dicratiler.blob.core.windows.net/dicra-dev/unfpa/unfpa_od_population_data.pmtiles";q.useEffect(()=>{(async()=>{try{const It=await new kv(Se).getMetadata();if(It.vector_layers){const jt=It.vector_layers.find($e=>$e.id==="zcta");if(jt&&jt.fields){const $e=Object.keys(jt.fields),ct=new Set;$e.forEach(_t=>{const Ut=_t.match(/(\d{4})/);Ut&&ct.add(Ut[1])});const Et=Array.from(ct).sort((_t,Ut)=>Ut.localeCompare(_t));Et.length>0&&(H(Et),Et.includes(v)||u(Et[0]))}}}catch(Ct){console.error("Error fetching PMTiles metadata:",Ct)}})()},[]);const Ue=()=>{fe({layer:d,year:v,gender:M,region:D}),se(null)},et=Fe=>{const Ct=typeof Fe=="string"?parseFloat(Fe):Fe;return isNaN(Ct)||Ct===null||Ct===void 0?"0":Ct>=1e6?(Ct/1e6).toFixed(2)+"M":Ct>=1e3?(Ct/1e3).toFixed(1)+"k":Math.floor(Ct).toString()},pt=(()=>{const Fe={name:"Odisha",pop:"47M",literacy:"73%",male:"51%",female:"49%"};if(!N)return Fe;const Ct=he.year,It=`pop_${Ct}_sum`,jt=N[`Literacy_${Ct}`]!==void 0?`Literacy_${Ct}`:`literacy_${Ct}`,$e=`male_${Ct}`,ct=`female_${Ct}`;return{name:N.district_name||N.NAME||N.name||"Selected Area",pop:N[It]!==void 0?et(N[It]):Fe.pop,literacy:N[jt]!==void 0?N[jt]+"%":Fe.literacy,male:N[$e]!==void 0?N[$e]+"%":Fe.male,female:N[ct]!==void 0?N[ct]+"%":Fe.female}})();return _e.jsxs("div",{className:"flex flex-col h-auto lg:h-[90vh] bg-[#F8FAFC] overflow-hidden",children:[_e.jsx("div",{className:"px-4 lg:px-6 py-4 z-[100]",children:_e.jsxs("div",{className:"max-w-[1600px] mx-auto bg-white rounded-2xl shadow-sm border border-gray-100 p-5 lg:p-6 transition-all hover:shadow-md",children:[_e.jsx("style",{dangerouslySetInnerHTML:{__html:`
                input[type=range]::-webkit-slider-thumb {
                    appearance: none;
                    height: 18px;
                    width: 18px;
                    border-radius: 50%;
                    background: #F58220;
                    cursor: pointer;
                    border: 3px solid white;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                    margin-top: -6px;
                }
                input[type=range]::-moz-range-thumb {
                    height: 18px;
                    width: 18px;
                    border-radius: 50%;
                    background: #F58220;
                    cursor: pointer;
                    border: 3px solid white;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                }
                input[type=range]::-webkit-slider-runnable-track {
                    width: 100%;
                    height: 6px;
                    cursor: pointer;
                    background: #E5E7EB;
                    border-radius: 3px;
                }
            `}}),_e.jsxs("div",{className:"flex flex-wrap lg:flex-nowrap items-center gap-4 lg:gap-8 overflow-visible",children:[_e.jsxs("div",{className:"relative flex-1 min-w-[140px] lg:max-w-[220px]",children:[_e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"Layers"}),_e.jsxs("button",{onClick:()=>se($==="layer"?null:"layer"),className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[_e.jsx("span",{children:me.find(Fe=>Fe.id===d)?.label}),_e.jsx(Xp,{className:`w-3.5 h-3.5 ml-2 transition-transform ${$==="layer"?"rotate-180":""}`})]}),$==="layer"&&_e.jsx("div",{className:"absolute left-0 top-full mt-2 w-full bg-white/80 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 z-[50] animate-in fade-in slide-in-from-top-2",children:me.map(Fe=>_e.jsx("button",{onClick:()=>{g(Fe.id),se(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${d===Fe.id?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:Fe.label},Fe.id))})]}),_e.jsxs("div",{className:"flex-1 min-w-[140px] w-full lg:w-auto",children:[_e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[_e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest opacity-70",children:"Time Period"}),_e.jsx("span",{className:"text-sm font-black text-[#F58220]",children:v})]}),_e.jsx("input",{type:"range",min:Y[Y.length-1],max:Y[0],value:v,onChange:Fe=>u(Fe.target.value),className:"w-full appearance-none bg-transparent"}),_e.jsxs("div",{className:"flex justify-between mt-1",children:[_e.jsx("span",{className:"text-[9px] font-bold text-gray-400",children:Y[Y.length-1]}),_e.jsx("span",{className:"text-[9px] font-bold text-gray-400",children:Y[0]})]})]}),_e.jsxs("div",{className:"relative flex-1 min-w-[120px] lg:max-w-[160px]",children:[_e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"Gender"}),_e.jsxs("button",{onClick:()=>se($==="gender"?null:"gender"),className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[_e.jsx("span",{children:M}),_e.jsx(Xp,{className:`w-3.5 h-3.5 ml-2 transition-transform ${$==="gender"?"rotate-180":""}`})]}),$==="gender"&&_e.jsx("div",{className:"absolute left-0 top-full mt-2 w-full bg-white/80 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 z-[50] animate-in fade-in slide-in-from-top-2",children:Ae.map(Fe=>_e.jsx("button",{onClick:()=>{C(Fe),se(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${M===Fe?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:Fe},Fe))})]}),_e.jsxs("div",{className:"relative flex-1 min-w-[120px] lg:max-w-[160px]",children:[_e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest mb-2 opacity-70 block",children:"Region"}),_e.jsxs("button",{onClick:()=>se($==="region"?null:"region"),className:"flex items-center justify-between w-full h-9 bg-white/40 backdrop-blur-sm px-4 rounded-xl border border-white/20 text-[13px] font-bold text-gray-800 hover:border-[#F58220] transition-all",children:[_e.jsx("span",{children:D}),_e.jsx(Xp,{className:`w-3.5 h-3.5 ml-2 transition-transform ${$==="region"?"rotate-180":""}`})]}),$==="region"&&_e.jsx("div",{className:"absolute left-0 top-full mt-2 w-full bg-white/80 backdrop-blur-md rounded-xl shadow-xl border border-gray-100 py-1 z-[50] animate-in fade-in slide-in-from-top-2",children:ge.map(Fe=>_e.jsx("button",{onClick:()=>{I(Fe),se(null)},className:`w-full px-4 py-2 text-left text-xs font-bold transition-colors ${D===Fe?"bg-orange-50 text-[#F58220]":"text-gray-600 hover:bg-gray-50"}`,children:Fe},Fe))})]}),_e.jsx("button",{onClick:Ue,className:"w-full lg:w-auto lg:self-end mb-0.5 px-8 h-10 bg-[#F58220] hover:bg-[#D66B12] text-white rounded-xl shadow-lg shadow-orange-500/20 transition-all font-black text-[11px] uppercase tracking-widest flex items-center justify-center gap-2 group active:scale-95 whitespace-nowrap",children:"Search"})]})]})}),_e.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 px-4 lg:px-6 pb-4 gap-4 overflow-hidden",children:[_e.jsxs("div",{className:"w-full h-[450px] lg:flex-1 relative overflow-hidden lg:h-full bg-white rounded-2xl shadow-sm border border-gray-100 group",children:[_e.jsx($5,{activeLayer:he.layer,selectedYear:he.year,gender:he.gender,region:he.region,onResetClick:()=>G(null),onDistrictClick:Fe=>{console.log("District selected:",Fe.district_name||Fe.NAME),G(Fe)}}),_e.jsx("div",{className:"absolute inset-0 pointer-events-none bg-[radial-gradient(#000000_1px,transparent_1px)] [background-size:24px_24px] opacity-[0.03] group-hover:opacity-[0.05] transition-opacity"})]}),_e.jsxs("div",{className:"w-full lg:w-80 h-auto lg:h-full bg-white border border-gray-100 rounded-2xl flex flex-col z-20 shadow-sm flex-shrink-0 overflow-hidden transition-all hover:shadow-md",children:[_e.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-start bg-gray-50/30",children:[_e.jsxs("div",{children:[_e.jsx("h3",{className:"text-xl font-bold text-gray-900 leading-tight",children:pt.name}),_e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5 mt-1 font-medium",children:[_e.jsx(XD,{className:"w-3 h-3"})," District Analysis"]})]}),_e.jsx("button",{className:"text-gray-400 hover:text-gray-600 p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:_e.jsx(Gj,{className:"w-5 h-5"})})]}),_e.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-8",children:_e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_e.jsxs("div",{className:"bg-orange-50/50 p-4 rounded-xl border border-orange-100/50 hover:bg-orange-50 hover:border-orange-200 transition-all group/stat",children:[_e.jsx("p",{className:"text-[10px] uppercase font-bold text-primary mb-1 tracking-wide opacity-70",children:"Total Pop."}),_e.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:pt.pop})]}),_e.jsxs("div",{className:"bg-blue-50/50 p-4 rounded-xl border border-blue-100/50 hover:bg-blue-50 hover:border-blue-200 transition-all group/stat",children:[_e.jsx("p",{className:"text-[10px] uppercase font-bold text-[#3B82F6] mb-1 tracking-wide opacity-70",children:"Literacy"}),_e.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:pt.literacy})]}),_e.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-100/50 hover:bg-gray-50 hover:border-gray-200 transition-all group/stat",children:[_e.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 tracking-wide opacity-70",children:"Male"}),_e.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:pt.male})]}),_e.jsxs("div",{className:"bg-gray-50/50 p-4 rounded-xl border border-gray-100/50 hover:bg-gray-50 hover:border-gray-200 transition-all group/stat",children:[_e.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1 tracking-wide opacity-70",children:"Female"}),_e.jsx("p",{className:"text-xl font-bold text-gray-900 group-hover/stat:scale-105 transition-transform origin-left",children:pt.female})]})]})})]})]})]})};function yO(e){var t,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var d=e.length;for(t=0;t<d;t++)e[t]&&(i=yO(e[t]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function bn(){for(var e,t,i=0,a="",d=arguments.length;i<d;i++)(e=arguments[i])&&(t=yO(e))&&(a&&(a+=" "),a+=t);return a}var Z5=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yS(e){if(typeof e!="string")return!1;var t=Z5;return t.includes(e)}var H5=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],W5=new Set(H5);function vO(e){return typeof e!="string"?!1:W5.has(e)}function _O(e){return typeof e=="string"&&e.startsWith("data-")}function el(e){if(typeof e!="object"||e===null)return{};var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(vO(i)||_O(i))&&(t[i]=e[i]);return t}function t_(e){if(e==null)return null;if(q.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return el(t)}return typeof e=="object"&&!Array.isArray(e)?el(e):null}function bo(e){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(vO(i)||_O(i)||yS(i))&&(t[i]=e[i]);return t}function Y5(e){return e==null?null:q.isValidElement(e)?bo(e.props):typeof e=="object"&&!Array.isArray(e)?bo(e):null}var X5=["children","width","height","viewBox","className","style","title","desc"];function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},l2.apply(null,arguments)}function K5(e,t){if(e==null)return{};var i,a,d=Q5(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function Q5(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var xO=q.forwardRef((e,t)=>{var{children:i,width:a,height:d,viewBox:g,className:v,style:u,title:M,desc:C}=e,D=K5(e,X5),I=g||{width:a,height:d,x:0,y:0},N=bn("recharts-surface",v);return q.createElement("svg",l2({},bo(D),{className:N,width:a,height:d,style:u,viewBox:"".concat(I.x," ").concat(I.y," ").concat(I.width," ").concat(I.height),ref:t}),q.createElement("title",null,M),q.createElement("desc",null,C),i)}),J5=["children","className"];function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},u2.apply(null,arguments)}function eB(e,t){if(e==null)return{};var i,a,d=tB(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function tB(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var wo=q.forwardRef((e,t)=>{var{children:i,className:a}=e,d=eB(e,J5),g=bn("recharts-layer",a);return q.createElement("g",u2({className:g},bo(d),{ref:t}),i)}),rB=q.createContext(null);function Zn(e){return function(){return e}}const bO=Math.cos,nx=Math.sin,Zu=Math.sqrt,ix=Math.PI,nb=2*ix,c2=Math.PI,h2=2*c2,qp=1e-6,nB=h2-qp;function wO(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function iB(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return wO;const i=10**t;return function(a){this._+=a[0];for(let d=1,g=a.length;d<g;++d)this._+=Math.round(arguments[d]*i)/i+a[d]}}class aB{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?wO:iB(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,a,d){this._append`Q${+t},${+i},${this._x1=+a},${this._y1=+d}`}bezierCurveTo(t,i,a,d,g,v){this._append`C${+t},${+i},${+a},${+d},${this._x1=+g},${this._y1=+v}`}arcTo(t,i,a,d,g){if(t=+t,i=+i,a=+a,d=+d,g=+g,g<0)throw new Error(`negative radius: ${g}`);let v=this._x1,u=this._y1,M=a-t,C=d-i,D=v-t,I=u-i,N=D*D+I*I;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(N>qp)if(!(Math.abs(I*M-C*D)>qp)||!g)this._append`L${this._x1=t},${this._y1=i}`;else{let G=a-v,Y=d-u,H=M*M+C*C,$=G*G+Y*Y,se=Math.sqrt(H),he=Math.sqrt(N),fe=g*Math.tan((c2-Math.acos((H+N-$)/(2*se*he)))/2),me=fe/he,Ae=fe/se;Math.abs(me-1)>qp&&this._append`L${t+me*D},${i+me*I}`,this._append`A${g},${g},0,0,${+(I*G>D*Y)},${this._x1=t+Ae*M},${this._y1=i+Ae*C}`}}arc(t,i,a,d,g,v){if(t=+t,i=+i,a=+a,v=!!v,a<0)throw new Error(`negative radius: ${a}`);let u=a*Math.cos(d),M=a*Math.sin(d),C=t+u,D=i+M,I=1^v,N=v?d-g:g-d;this._x1===null?this._append`M${C},${D}`:(Math.abs(this._x1-C)>qp||Math.abs(this._y1-D)>qp)&&this._append`L${C},${D}`,a&&(N<0&&(N=N%h2+h2),N>nB?this._append`A${a},${a},0,1,${I},${t-u},${i-M}A${a},${a},0,1,${I},${this._x1=C},${this._y1=D}`:N>qp&&this._append`A${a},${a},0,${+(N>=c2)},${I},${this._x1=t+a*Math.cos(g)},${this._y1=i+a*Math.sin(g)}`)}rect(t,i,a,d){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${a=+a}v${+d}h${-a}Z`}toString(){return this._}}function vS(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const a=Math.floor(i);if(!(a>=0))throw new RangeError(`invalid digits: ${i}`);t=a}return e},()=>new aB(t)}function _S(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function SO(e){this._context=e}SO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ib(e){return new SO(e)}function TO(e){return e[0]}function EO(e){return e[1]}function AO(e,t){var i=Zn(!0),a=null,d=ib,g=null,v=vS(u);e=typeof e=="function"?e:e===void 0?TO:Zn(e),t=typeof t=="function"?t:t===void 0?EO:Zn(t);function u(M){var C,D=(M=_S(M)).length,I,N=!1,G;for(a==null&&(g=d(G=v())),C=0;C<=D;++C)!(C<D&&i(I=M[C],C,M))===N&&((N=!N)?g.lineStart():g.lineEnd()),N&&g.point(+e(I,C,M),+t(I,C,M));if(G)return g=null,G+""||null}return u.x=function(M){return arguments.length?(e=typeof M=="function"?M:Zn(+M),u):e},u.y=function(M){return arguments.length?(t=typeof M=="function"?M:Zn(+M),u):t},u.defined=function(M){return arguments.length?(i=typeof M=="function"?M:Zn(!!M),u):i},u.curve=function(M){return arguments.length?(d=M,a!=null&&(g=d(a)),u):d},u.context=function(M){return arguments.length?(M==null?a=g=null:g=d(a=M),u):a},u}function P0(e,t,i){var a=null,d=Zn(!0),g=null,v=ib,u=null,M=vS(C);e=typeof e=="function"?e:e===void 0?TO:Zn(+e),t=typeof t=="function"?t:Zn(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?EO:Zn(+i);function C(I){var N,G,Y,H=(I=_S(I)).length,$,se=!1,he,fe=new Array(H),me=new Array(H);for(g==null&&(u=v(he=M())),N=0;N<=H;++N){if(!(N<H&&d($=I[N],N,I))===se)if(se=!se)G=N,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),Y=N-1;Y>=G;--Y)u.point(fe[Y],me[Y]);u.lineEnd(),u.areaEnd()}se&&(fe[N]=+e($,N,I),me[N]=+t($,N,I),u.point(a?+a($,N,I):fe[N],i?+i($,N,I):me[N]))}if(he)return u=null,he+""||null}function D(){return AO().defined(d).curve(v).context(g)}return C.x=function(I){return arguments.length?(e=typeof I=="function"?I:Zn(+I),a=null,C):e},C.x0=function(I){return arguments.length?(e=typeof I=="function"?I:Zn(+I),C):e},C.x1=function(I){return arguments.length?(a=I==null?null:typeof I=="function"?I:Zn(+I),C):a},C.y=function(I){return arguments.length?(t=typeof I=="function"?I:Zn(+I),i=null,C):t},C.y0=function(I){return arguments.length?(t=typeof I=="function"?I:Zn(+I),C):t},C.y1=function(I){return arguments.length?(i=I==null?null:typeof I=="function"?I:Zn(+I),C):i},C.lineX0=C.lineY0=function(){return D().x(e).y(t)},C.lineY1=function(){return D().x(e).y(i)},C.lineX1=function(){return D().x(a).y(t)},C.defined=function(I){return arguments.length?(d=typeof I=="function"?I:Zn(!!I),C):d},C.curve=function(I){return arguments.length?(v=I,g!=null&&(u=v(g)),C):v},C.context=function(I){return arguments.length?(I==null?g=u=null:u=v(g=I),C):g},C}class MO{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function oB(e){return new MO(e,!0)}function sB(e){return new MO(e,!1)}const xS={draw(e,t){const i=Zu(t/ix);e.moveTo(i,0),e.arc(0,0,i,0,nb)}},lB={draw(e,t){const i=Zu(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},PO=Zu(1/3),uB=PO*2,cB={draw(e,t){const i=Zu(t/uB),a=i*PO;e.moveTo(0,-i),e.lineTo(a,0),e.lineTo(0,i),e.lineTo(-a,0),e.closePath()}},hB={draw(e,t){const i=Zu(t),a=-i/2;e.rect(a,a,i,i)}},fB=.8908130915292852,CO=nx(ix/10)/nx(7*ix/10),dB=nx(nb/10)*CO,pB=-bO(nb/10)*CO,mB={draw(e,t){const i=Zu(t*fB),a=dB*i,d=pB*i;e.moveTo(0,-i),e.lineTo(a,d);for(let g=1;g<5;++g){const v=nb*g/5,u=bO(v),M=nx(v);e.lineTo(M*i,-u*i),e.lineTo(u*a-M*d,M*a+u*d)}e.closePath()}},w1=Zu(3),gB={draw(e,t){const i=-Zu(t/(w1*3));e.moveTo(0,i*2),e.lineTo(-w1*i,-i),e.lineTo(w1*i,-i),e.closePath()}},Bl=-.5,Nl=Zu(3)/2,f2=1/Zu(12),yB=(f2/2+1)*3,vB={draw(e,t){const i=Zu(t/yB),a=i/2,d=i*f2,g=a,v=i*f2+i,u=-g,M=v;e.moveTo(a,d),e.lineTo(g,v),e.lineTo(u,M),e.lineTo(Bl*a-Nl*d,Nl*a+Bl*d),e.lineTo(Bl*g-Nl*v,Nl*g+Bl*v),e.lineTo(Bl*u-Nl*M,Nl*u+Bl*M),e.lineTo(Bl*a+Nl*d,Bl*d-Nl*a),e.lineTo(Bl*g+Nl*v,Bl*v-Nl*g),e.lineTo(Bl*u+Nl*M,Bl*M-Nl*u),e.closePath()}};function _B(e,t){let i=null,a=vS(d);e=typeof e=="function"?e:Zn(e||xS),t=typeof t=="function"?t:Zn(t===void 0?64:+t);function d(){let g;if(i||(i=g=a()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),g)return i=null,g+""||null}return d.type=function(g){return arguments.length?(e=typeof g=="function"?g:Zn(g),d):e},d.size=function(g){return arguments.length?(t=typeof g=="function"?g:Zn(+g),d):t},d.context=function(g){return arguments.length?(i=g??null,d):i},d}function ax(){}function ox(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function DO(e){this._context=e}DO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ox(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ox(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xB(e){return new DO(e)}function OO(e){this._context=e}OO.prototype={areaStart:ax,areaEnd:ax,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ox(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bB(e){return new OO(e)}function IO(e){this._context=e}IO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:ox(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wB(e){return new IO(e)}function zO(e){this._context=e}zO.prototype={areaStart:ax,areaEnd:ax,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function SB(e){return new zO(e)}function kE(e){return e<0?-1:1}function RE(e,t,i){var a=e._x1-e._x0,d=t-e._x1,g=(e._y1-e._y0)/(a||d<0&&-0),v=(i-e._y1)/(d||a<0&&-0),u=(g*d+v*a)/(a+d);return(kE(g)+kE(v))*Math.min(Math.abs(g),Math.abs(v),.5*Math.abs(u))||0}function LE(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function S1(e,t,i){var a=e._x0,d=e._y0,g=e._x1,v=e._y1,u=(g-a)/3;e._context.bezierCurveTo(a+u,d+u*t,g-u,v-u*i,g,v)}function sx(e){this._context=e}sx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S1(this,this._t0,LE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,S1(this,LE(this,i=RE(this,e,t)),i);break;default:S1(this,this._t0,i=RE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function kO(e){this._context=new RO(e)}(kO.prototype=Object.create(sx.prototype)).point=function(e,t){sx.prototype.point.call(this,t,e)};function RO(e){this._context=e}RO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,a,d,g){this._context.bezierCurveTo(t,e,a,i,g,d)}};function TB(e){return new sx(e)}function EB(e){return new kO(e)}function LO(e){this._context=e}LO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var a=jE(e),d=jE(t),g=0,v=1;v<i;++g,++v)this._context.bezierCurveTo(a[0][g],d[0][g],a[1][g],d[1][g],e[v],t[v]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function jE(e){var t,i=e.length-1,a,d=new Array(i),g=new Array(i),v=new Array(i);for(d[0]=0,g[0]=2,v[0]=e[0]+2*e[1],t=1;t<i-1;++t)d[t]=1,g[t]=4,v[t]=4*e[t]+2*e[t+1];for(d[i-1]=2,g[i-1]=7,v[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)a=d[t]/g[t-1],g[t]-=a,v[t]-=a*v[t-1];for(d[i-1]=v[i-1]/g[i-1],t=i-2;t>=0;--t)d[t]=(v[t]-d[t+1])/g[t];for(g[i-1]=(e[i]+d[i-1])/2,t=0;t<i-1;++t)g[t]=2*e[t+1]-d[t+1];return[d,g]}function AB(e){return new LO(e)}function ab(e,t){this._context=e,this._t=t}ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function MB(e){return new ab(e,.5)}function PB(e){return new ab(e,0)}function CB(e){return new ab(e,1)}function tm(e,t){if((v=e.length)>1)for(var i=1,a,d,g=e[t[0]],v,u=g.length;i<v;++i)for(d=g,g=e[t[i]],a=0;a<u;++a)g[a][1]+=g[a][0]=isNaN(d[a][1])?d[a][0]:d[a][1]}function d2(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function DB(e,t){return e[t]}function OB(e){const t=[];return t.key=e,t}function IB(){var e=Zn([]),t=d2,i=tm,a=DB;function d(g){var v=Array.from(e.apply(this,arguments),OB),u,M=v.length,C=-1,D;for(const I of g)for(u=0,++C;u<M;++u)(v[u][C]=[0,+a(I,v[u].key,C,g)]).data=I;for(u=0,D=_S(t(v));u<M;++u)v[D[u]].index=u;return i(v,D),v}return d.keys=function(g){return arguments.length?(e=typeof g=="function"?g:Zn(Array.from(g)),d):e},d.value=function(g){return arguments.length?(a=typeof g=="function"?g:Zn(+g),d):a},d.order=function(g){return arguments.length?(t=g==null?d2:typeof g=="function"?g:Zn(Array.from(g)),d):t},d.offset=function(g){return arguments.length?(i=g??tm,d):i},d}function zB(e,t){if((a=e.length)>0){for(var i,a,d=0,g=e[0].length,v;d<g;++d){for(v=i=0;i<a;++i)v+=e[i][d][1]||0;if(v)for(i=0;i<a;++i)e[i][d][1]/=v}tm(e,t)}}function kB(e,t){if((d=e.length)>0){for(var i=0,a=e[t[0]],d,g=a.length;i<g;++i){for(var v=0,u=0;v<d;++v)u+=e[v][i][1]||0;a[i][1]+=a[i][0]=-u/2}tm(e,t)}}function RB(e,t){if(!(!((v=e.length)>0)||!((g=(d=e[t[0]]).length)>0))){for(var i=0,a=1,d,g,v;a<g;++a){for(var u=0,M=0,C=0;u<v;++u){for(var D=e[t[u]],I=D[a][1]||0,N=D[a-1][1]||0,G=(I-N)/2,Y=0;Y<u;++Y){var H=e[t[Y]],$=H[a][1]||0,se=H[a-1][1]||0;G+=$-se}M+=I,C+=G*I}d[a-1][1]+=d[a-1][0]=i,M&&(i-=C/M)}d[a-1][1]+=d[a-1][0]=i,tm(e,t)}}var T1={},E1={},BE;function LB(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==="__proto__"}e.isUnsafeProperty=t})(E1)),E1}var A1={},NE;function jO(){return NE||(NE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}e.isDeepKey=t})(A1)),A1}var M1={},FE;function bS(){return FE||(FE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="string"||typeof i=="symbol"?i:Object.is(i?.valueOf?.(),-0)?"-0":String(i)}e.toKey=t})(M1)),M1}var P1={},C1={},UE;function jB(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){if(i==null)return"";if(typeof i=="string")return i;if(Array.isArray(i))return i.map(t).join(",");const a=String(i);return a==="0"&&Object.is(Number(i),-0)?"-0":a}e.toString=t})(C1)),C1}var VE;function wS(){return VE||(VE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jB(),i=bS();function a(d){if(Array.isArray(d))return d.map(i.toKey);if(typeof d=="symbol")return[d];d=t.toString(d);const g=[],v=d.length;if(v===0)return g;let u=0,M="",C="",D=!1;for(d.charCodeAt(0)===46&&(g.push(""),u++);u<v;){const I=d[u];C?I==="\\"&&u+1<v?(u++,M+=d[u]):I===C?C="":M+=I:D?I==='"'||I==="'"?C=I:I==="]"?(D=!1,g.push(M),M=""):M+=I:I==="["?(D=!0,M&&(g.push(M),M="")):I==="."?M&&(g.push(M),M=""):M+=I,u++}return M&&g.push(M),g}e.toPath=a})(P1)),P1}var qE;function SS(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LB(),i=jO(),a=bS(),d=wS();function g(u,M,C){if(u==null)return C;switch(typeof M){case"string":{if(t.isUnsafeProperty(M))return C;const D=u[M];return D===void 0?i.isDeepKey(M)?g(u,d.toPath(M),C):C:D}case"number":case"symbol":{typeof M=="number"&&(M=a.toKey(M));const D=u[M];return D===void 0?C:D}default:{if(Array.isArray(M))return v(u,M,C);if(Object.is(M?.valueOf(),-0)?M="-0":M=String(M),t.isUnsafeProperty(M))return C;const D=u[M];return D===void 0?C:D}}}function v(u,M,C){if(M.length===0)return C;let D=u;for(let I=0;I<M.length;I++){if(D==null||t.isUnsafeProperty(M[I]))return C;D=D[M[I]]}return D===void 0?C:D}e.get=g})(T1)),T1}var D1,$E;function BB(){return $E||($E=1,D1=SS().get),D1}var NB=BB();const Yg=Yc(NB);var FB=4;function Td(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:FB,i=10**t,a=Math.round(e*i)/i;return Object.is(a,-0)?0:a}function Ei(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return e.reduce((d,g,v)=>{var u=i[v-1];return typeof u=="string"?d+u+g:u!==void 0?d+Td(u)+g:d+g},"")}var _s=e=>e===0?0:e>0?1:-1,qu=e=>typeof e=="number"&&e!=+e,rm=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,qt=e=>(typeof e=="number"||e instanceof Number)&&!qu(e),$c=e=>qt(e)||typeof e=="string",UB=0,Rv=e=>{var t=++UB;return"".concat(e||"").concat(t)},$u=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qt(t)&&typeof t!="string")return a;var g;if(rm(t)){if(i==null)return a;var v=t.indexOf("%");g=i*parseFloat(t.slice(0,v))/100}else g=+t;return qu(g)&&(g=a),d&&i!=null&&g>i&&(g=i),g},BO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,i={},a=0;a<t;a++)if(!i[String(e[a])])i[String(e[a])]=!0;else return!0;return!1};function Pn(e,t,i){return qt(e)&&qt(t)?Td(e+i*(t-e)):t}function NO(e,t,i){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Yg(a,t))===i)}var ai=e=>e===null||typeof e>"u",r_=e=>ai(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function xs(e){return e!=null}function Cd(){}var VB=["type","size","sizeType"];function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},p2.apply(null,arguments)}function GE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function ZE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(i),!0).forEach(function(a){qB(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function qB(e,t,i){return(t=$B(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $B(e){var t=GB(e,"string");return typeof t=="symbol"?t:t+""}function GB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZB(e,t){if(e==null)return{};var i,a,d=HB(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function HB(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var FO={symbolCircle:xS,symbolCross:lB,symbolDiamond:cB,symbolSquare:hB,symbolStar:mB,symbolTriangle:gB,symbolWye:vB},WB=Math.PI/180,YB=e=>{var t="symbol".concat(r_(e));return FO[t]||xS},XB=(e,t,i)=>{if(t==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*WB;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},KB=(e,t)=>{FO["symbol".concat(r_(e))]=t},UO=e=>{var{type:t="circle",size:i=64,sizeType:a="area"}=e,d=ZB(e,VB),g=ZE(ZE({},d),{},{type:t,size:i,sizeType:a}),v="circle";typeof t=="string"&&(v=t);var u=()=>{var N=YB(v),G=_B().type(N).size(XB(i,a,v)),Y=G();if(Y!==null)return Y},{className:M,cx:C,cy:D}=g,I=bo(g);return qt(C)&&qt(D)&&qt(i)?q.createElement("path",p2({},I,{className:bn("recharts-symbols",M),transform:"translate(".concat(C,", ").concat(D,")"),d:u()})):null};UO.registerSymbol=KB;var VO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,TS=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(q.isValidElement(e)&&(i=e.props),typeof i!="object"&&typeof i!="function")return null;var a={};return Object.keys(i).forEach(d=>{yS(d)&&(a[d]=(g=>i[d](i,g)))}),a},QB=(e,t,i)=>a=>(e(t,i,a),null),ES=(e,t,i)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(d=>{var g=e[d];yS(d)&&typeof g=="function"&&(a||(a={}),a[d]=QB(g,t,i))}),a};function HE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function JB(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(i),!0).forEach(function(a){eN(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HE(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function eN(e,t,i){return(t=tN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function tN(e){var t=rN(e,"string");return typeof t=="symbol"?t:t+""}function rN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ka(e,t){var i=JB({},e),a=t,d=Object.keys(t),g=d.reduce((v,u)=>(v[u]===void 0&&a[u]!==void 0&&(v[u]=a[u]),v),i);return g}var O1={},I1={},WE;function nN(){return WE||(WE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a){const d=new Map;for(let g=0;g<i.length;g++){const v=i[g],u=a(v,g,i);d.has(u)||d.set(u,v)}return Array.from(d.values())}e.uniqBy=t})(I1)),I1}var z1={},YE;function iN(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a){return function(...d){return i.apply(this,d.slice(0,a))}}e.ary=t})(z1)),z1}var k1={},XE;function qO(){return XE||(XE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i}e.identity=t})(k1)),k1}var R1={},L1={},j1={},KE;function aN(){return KE||(KE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Number.isSafeInteger(i)&&i>=0}e.isLength=t})(j1)),j1}var QE;function AS(){return QE||(QE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aN();function i(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=i})(L1)),L1}var B1={},JE;function oN(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="object"&&i!==null}e.isObjectLike=t})(B1)),B1}var eA;function sN(){return eA||(eA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AS(),i=oN();function a(d){return i.isObjectLike(d)&&t.isArrayLike(d)}e.isArrayLikeObject=a})(R1)),R1}var N1={},F1={},tA;function lN(){return tA||(tA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SS();function i(a){return function(d){return t.get(d,a)}}e.property=i})(F1)),F1}var U1={},V1={},q1={},$1={},rA;function $O(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i!==null&&(typeof i=="object"||typeof i=="function")}e.isObject=t})($1)),$1}var G1={},nA;function GO(){return nA||(nA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null||typeof i!="object"&&typeof i!="function"}e.isPrimitive=t})(G1)),G1}var Z1={},iA;function ZO(){return iA||(iA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a){return i===a||Number.isNaN(i)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(Z1)),Z1}var aA;function uN(){return aA||(aA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$O(),i=GO(),a=ZO();function d(D,I,N){return typeof N!="function"?d(D,I,()=>{}):g(D,I,function G(Y,H,$,se,he,fe){const me=N(Y,H,$,se,he,fe);return me!==void 0?!!me:g(Y,H,G,fe)},new Map)}function g(D,I,N,G){if(I===D)return!0;switch(typeof I){case"object":return v(D,I,N,G);case"function":return Object.keys(I).length>0?g(D,{...I},N,G):a.isEqualsSameValueZero(D,I);default:return t.isObject(D)?typeof I=="string"?I==="":!0:a.isEqualsSameValueZero(D,I)}}function v(D,I,N,G){if(I==null)return!0;if(Array.isArray(I))return M(D,I,N,G);if(I instanceof Map)return u(D,I,N,G);if(I instanceof Set)return C(D,I,N,G);const Y=Object.keys(I);if(D==null||i.isPrimitive(D))return Y.length===0;if(Y.length===0)return!0;if(G?.has(I))return G.get(I)===D;G?.set(I,D);try{for(let H=0;H<Y.length;H++){const $=Y[H];if(!i.isPrimitive(D)&&!($ in D)||I[$]===void 0&&D[$]!==void 0||I[$]===null&&D[$]!==null||!N(D[$],I[$],$,D,I,G))return!1}return!0}finally{G?.delete(I)}}function u(D,I,N,G){if(I.size===0)return!0;if(!(D instanceof Map))return!1;for(const[Y,H]of I.entries()){const $=D.get(Y);if(N($,H,Y,D,I,G)===!1)return!1}return!0}function M(D,I,N,G){if(I.length===0)return!0;if(!Array.isArray(D))return!1;const Y=new Set;for(let H=0;H<I.length;H++){const $=I[H];let se=!1;for(let he=0;he<D.length;he++){if(Y.has(he))continue;const fe=D[he];let me=!1;if(N(fe,$,H,D,I,G)&&(me=!0),me){Y.add(he),se=!0;break}}if(!se)return!1}return!0}function C(D,I,N,G){return I.size===0?!0:D instanceof Set?M([...D],[...I],N,G):!1}e.isMatchWith=d,e.isSetMatch=C})(q1)),q1}var oA;function HO(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uN();function i(a,d){return t.isMatchWith(a,d,()=>{})}e.isMatch=i})(V1)),V1}var H1={},W1={},Y1={},sA;function cN(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Object.getOwnPropertySymbols(i).filter(a=>Object.prototype.propertyIsEnumerable.call(i,a))}e.getSymbols=t})(Y1)),Y1}var X1={},lA;function MS(){return lA||(lA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}e.getTag=t})(X1)),X1}var K1={},uA;function WO(){return uA||(uA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",i="[object String]",a="[object Number]",d="[object Boolean]",g="[object Arguments]",v="[object Symbol]",u="[object Date]",M="[object Map]",C="[object Set]",D="[object Array]",I="[object Function]",N="[object ArrayBuffer]",G="[object Object]",Y="[object Error]",H="[object DataView]",$="[object Uint8Array]",se="[object Uint8ClampedArray]",he="[object Uint16Array]",fe="[object Uint32Array]",me="[object BigUint64Array]",Ae="[object Int8Array]",ge="[object Int16Array]",Se="[object Int32Array]",Ue="[object BigInt64Array]",et="[object Float32Array]",vt="[object Float64Array]";e.argumentsTag=g,e.arrayBufferTag=N,e.arrayTag=D,e.bigInt64ArrayTag=Ue,e.bigUint64ArrayTag=me,e.booleanTag=d,e.dataViewTag=H,e.dateTag=u,e.errorTag=Y,e.float32ArrayTag=et,e.float64ArrayTag=vt,e.functionTag=I,e.int16ArrayTag=ge,e.int32ArrayTag=Se,e.int8ArrayTag=Ae,e.mapTag=M,e.numberTag=a,e.objectTag=G,e.regexpTag=t,e.setTag=C,e.stringTag=i,e.symbolTag=v,e.uint16ArrayTag=he,e.uint32ArrayTag=fe,e.uint8ArrayTag=$,e.uint8ClampedArrayTag=se})(K1)),K1}var Q1={},cA;function hN(){return cA||(cA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}e.isTypedArray=t})(Q1)),Q1}var hA;function YO(){return hA||(hA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cN(),i=MS(),a=WO(),d=GO(),g=hN();function v(D,I){return u(D,void 0,D,new Map,I)}function u(D,I,N,G=new Map,Y=void 0){const H=Y?.(D,I,N,G);if(H!==void 0)return H;if(d.isPrimitive(D))return D;if(G.has(D))return G.get(D);if(Array.isArray(D)){const $=new Array(D.length);G.set(D,$);for(let se=0;se<D.length;se++)$[se]=u(D[se],se,N,G,Y);return Object.hasOwn(D,"index")&&($.index=D.index),Object.hasOwn(D,"input")&&($.input=D.input),$}if(D instanceof Date)return new Date(D.getTime());if(D instanceof RegExp){const $=new RegExp(D.source,D.flags);return $.lastIndex=D.lastIndex,$}if(D instanceof Map){const $=new Map;G.set(D,$);for(const[se,he]of D)$.set(se,u(he,se,N,G,Y));return $}if(D instanceof Set){const $=new Set;G.set(D,$);for(const se of D)$.add(u(se,void 0,N,G,Y));return $}if(typeof Buffer<"u"&&Buffer.isBuffer(D))return D.subarray();if(g.isTypedArray(D)){const $=new(Object.getPrototypeOf(D)).constructor(D.length);G.set(D,$);for(let se=0;se<D.length;se++)$[se]=u(D[se],se,N,G,Y);return $}if(D instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&D instanceof SharedArrayBuffer)return D.slice(0);if(D instanceof DataView){const $=new DataView(D.buffer.slice(0),D.byteOffset,D.byteLength);return G.set(D,$),M($,D,N,G,Y),$}if(typeof File<"u"&&D instanceof File){const $=new File([D],D.name,{type:D.type});return G.set(D,$),M($,D,N,G,Y),$}if(typeof Blob<"u"&&D instanceof Blob){const $=new Blob([D],{type:D.type});return G.set(D,$),M($,D,N,G,Y),$}if(D instanceof Error){const $=new D.constructor;return G.set(D,$),$.message=D.message,$.name=D.name,$.stack=D.stack,$.cause=D.cause,M($,D,N,G,Y),$}if(D instanceof Boolean){const $=new Boolean(D.valueOf());return G.set(D,$),M($,D,N,G,Y),$}if(D instanceof Number){const $=new Number(D.valueOf());return G.set(D,$),M($,D,N,G,Y),$}if(D instanceof String){const $=new String(D.valueOf());return G.set(D,$),M($,D,N,G,Y),$}if(typeof D=="object"&&C(D)){const $=Object.create(Object.getPrototypeOf(D));return G.set(D,$),M($,D,N,G,Y),$}return D}function M(D,I,N=D,G,Y){const H=[...Object.keys(I),...t.getSymbols(I)];for(let $=0;$<H.length;$++){const se=H[$],he=Object.getOwnPropertyDescriptor(D,se);(he==null||he.writable)&&(D[se]=u(I[se],se,N,G,Y))}}function C(D){switch(i.getTag(D)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=v,e.cloneDeepWithImpl=u,e.copyProperties=M})(W1)),W1}var fA;function fN(){return fA||(fA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YO();function i(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=i})(H1)),H1}var dA;function dN(){return dA||(dA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HO(),i=fN();function a(d){return d=i.cloneDeep(d),g=>t.isMatch(g,d)}e.matches=a})(U1)),U1}var J1={},ew={},tw={},pA;function pN(){return pA||(pA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YO(),i=MS(),a=WO();function d(g,v){return t.cloneDeepWith(g,(u,M,C,D)=>{const I=v?.(u,M,C,D);if(I!==void 0)return I;if(typeof g=="object"){if(i.getTag(g)===a.objectTag&&typeof g.constructor!="function"){const N={};return D.set(g,N),t.copyProperties(N,g,C,D),N}switch(Object.prototype.toString.call(g)){case a.numberTag:case a.stringTag:case a.booleanTag:{const N=new g.constructor(g?.valueOf());return t.copyProperties(N,g),N}case a.argumentsTag:{const N={};return t.copyProperties(N,g),N.length=g.length,N[Symbol.iterator]=g[Symbol.iterator],N}default:return}}})}e.cloneDeepWith=d})(tw)),tw}var mA;function mN(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pN();function i(a){return t.cloneDeepWith(a)}e.cloneDeep=i})(ew)),ew}var rw={},nw={},gA;function XO(){return gA||(gA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function i(a,d=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<d;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=i})(nw)),nw}var iw={},yA;function gN(){return yA||(yA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MS();function i(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=i})(iw)),iw}var vA;function yN(){return vA||(vA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jO(),i=XO(),a=gN(),d=wS();function g(v,u){let M;if(Array.isArray(u)?M=u:typeof u=="string"&&t.isDeepKey(u)&&v?.[u]==null?M=d.toPath(u):M=[u],M.length===0)return!1;let C=v;for(let D=0;D<M.length;D++){const I=M[D];if((C==null||!Object.hasOwn(C,I))&&!((Array.isArray(C)||a.isArguments(C))&&i.isIndex(I)&&I<C.length))return!1;C=C[I]}return!0}e.has=g})(rw)),rw}var _A;function vN(){return _A||(_A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HO(),i=bS(),a=mN(),d=SS(),g=yN();function v(u,M){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=i.toKey(u);break}}return M=a.cloneDeep(M),function(C){const D=d.get(C,u);return D===void 0?g.has(C,u):M===void 0?D===void 0:t.isMatch(D,M)}}e.matchesProperty=v})(J1)),J1}var xA;function _N(){return xA||(xA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qO(),i=lN(),a=dN(),d=vN();function g(v){if(v==null)return t.identity;switch(typeof v){case"function":return v;case"object":return Array.isArray(v)&&v.length===2?d.matchesProperty(v[0],v[1]):a.matches(v);case"string":case"symbol":case"number":return i.property(v)}}e.iteratee=g})(N1)),N1}var bA;function xN(){return bA||(bA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nN(),i=iN(),a=qO(),d=sN(),g=_N();function v(u,M=a.identity){return d.isArrayLikeObject(u)?t.uniqBy(Array.from(u),i.ary(g.iteratee(M),1)):[]}e.uniqBy=v})(O1)),O1}var aw,wA;function bN(){return wA||(wA=1,aw=xN().uniqBy),aw}var wN=bN();const SA=Yc(wN);function SN(e,t,i){return t===!0?SA(e,i):typeof t=="function"?SA(e,t):e}var ow={exports:{}},sw={},lw={exports:{}},uw={};var TA;function TN(){if(TA)return uw;TA=1;var e=ty();function t(I,N){return I===N&&(I!==0||1/I===1/N)||I!==I&&N!==N}var i=typeof Object.is=="function"?Object.is:t,a=e.useState,d=e.useEffect,g=e.useLayoutEffect,v=e.useDebugValue;function u(I,N){var G=N(),Y=a({inst:{value:G,getSnapshot:N}}),H=Y[0].inst,$=Y[1];return g(function(){H.value=G,H.getSnapshot=N,M(H)&&$({inst:H})},[I,G,N]),d(function(){return M(H)&&$({inst:H}),I(function(){M(H)&&$({inst:H})})},[I]),v(G),G}function M(I){var N=I.getSnapshot;I=I.value;try{var G=N();return!i(I,G)}catch{return!0}}function C(I,N){return N()}var D=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?C:u;return uw.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:D,uw}var EA;function EN(){return EA||(EA=1,lw.exports=TN()),lw.exports}var AA;function AN(){if(AA)return sw;AA=1;var e=ty(),t=EN();function i(C,D){return C===D&&(C!==0||1/C===1/D)||C!==C&&D!==D}var a=typeof Object.is=="function"?Object.is:i,d=t.useSyncExternalStore,g=e.useRef,v=e.useEffect,u=e.useMemo,M=e.useDebugValue;return sw.useSyncExternalStoreWithSelector=function(C,D,I,N,G){var Y=g(null);if(Y.current===null){var H={hasValue:!1,value:null};Y.current=H}else H=Y.current;Y=u(function(){function se(ge){if(!he){if(he=!0,fe=ge,ge=N(ge),G!==void 0&&H.hasValue){var Se=H.value;if(G(Se,ge))return me=Se}return me=ge}if(Se=me,a(fe,ge))return Se;var Ue=N(ge);return G!==void 0&&G(Se,Ue)?(fe=ge,Se):(fe=ge,me=Ue)}var he=!1,fe,me,Ae=I===void 0?null:I;return[function(){return se(D())},Ae===null?void 0:function(){return se(Ae())}]},[D,I,N,G]);var $=d(C,Y[0],Y[1]);return v(function(){H.hasValue=!0,H.value=$},[$]),M($),$},sw}var MA;function MN(){return MA||(MA=1,ow.exports=AN()),ow.exports}var PN=MN(),PS=q.createContext(null),CN=e=>e,Ii=()=>{var e=q.useContext(PS);return e?e.store.dispatch:CN},W0=()=>{},DN=()=>W0,ON=(e,t)=>e===t;function nr(e){var t=q.useContext(PS),i=q.useMemo(()=>t?a=>{if(a!=null)return e(a)}:W0,[t,e]);return PN.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:DN,t?t.store.getState:W0,t?t.store.getState:W0,i,ON)}function IN(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function zN(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function kN(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(i=>typeof i=="function")){const i=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${i}]`)}}var PA=e=>Array.isArray(e)?e:[e];function RN(e){const t=Array.isArray(e[0])?e[0]:e;return kN(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function LN(e,t){const i=[],{length:a}=e;for(let d=0;d<a;d++)i.push(e[d].apply(null,t));return i}var jN=class{constructor(e){this.value=e}deref(){return this.value}},BN=typeof WeakRef<"u"?WeakRef:jN,NN=0,CA=1;function C0(){return{s:NN,v:void 0,o:null,p:null}}function KO(e,t={}){let i=C0();const{resultEqualityCheck:a}=t;let d,g=0;function v(){let u=i;const{length:M}=arguments;for(let I=0,N=M;I<N;I++){const G=arguments[I];if(typeof G=="function"||typeof G=="object"&&G!==null){let Y=u.o;Y===null&&(u.o=Y=new WeakMap);const H=Y.get(G);H===void 0?(u=C0(),Y.set(G,u)):u=H}else{let Y=u.p;Y===null&&(u.p=Y=new Map);const H=Y.get(G);H===void 0?(u=C0(),Y.set(G,u)):u=H}}const C=u;let D;if(u.s===CA)D=u.v;else if(D=e.apply(null,arguments),g++,a){const I=d?.deref?.()??d;I!=null&&a(I,D)&&(D=I,g!==0&&g--),d=typeof D=="object"&&D!==null||typeof D=="function"?new BN(D):D}return C.s=CA,C.v=D,D}return v.clearCache=()=>{i=C0(),v.resetResultsCount()},v.resultsCount=()=>g,v.resetResultsCount=()=>{g=0},v}function FN(e,...t){const i=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...d)=>{let g=0,v=0,u,M={},C=d.pop();typeof C=="object"&&(M=C,C=d.pop()),IN(C,`createSelector expects an output function after the inputs, but received: [${typeof C}]`);const D={...i,...M},{memoize:I,memoizeOptions:N=[],argsMemoize:G=KO,argsMemoizeOptions:Y=[]}=D,H=PA(N),$=PA(Y),se=RN(d),he=I(function(){return g++,C.apply(null,arguments)},...H),fe=G(function(){v++;const Ae=LN(se,arguments);return u=he.apply(null,Ae),u},...$);return Object.assign(fe,{resultFunc:C,memoizedResultFunc:he,dependencies:se,dependencyRecomputations:()=>v,resetDependencyRecomputations:()=>{v=0},lastResult:()=>u,recomputations:()=>g,resetRecomputations:()=>{g=0},memoize:I,argsMemoize:G})};return Object.assign(a,{withTypes:()=>a}),a}var it=FN(KO),UN=Object.assign((e,t=it)=>{zN(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const i=Object.keys(e),a=i.map(g=>e[g]);return t(a,(...g)=>g.reduce((v,u,M)=>(v[i[M]]=u,v),{}))},{withTypes:()=>UN}),cw={},hw={},fw={},DA;function VN(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const i=(a,d,g)=>{if(a!==d){const v=t(a),u=t(d);if(v===u&&v===0){if(a<d)return g==="desc"?1:-1;if(a>d)return g==="desc"?-1:1}return g==="desc"?u-v:v-u}return 0};e.compareValues=i})(fw)),fw}var dw={},pw={},OA;function QO(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="symbol"||i instanceof Symbol}e.isSymbol=t})(pw)),pw}var IA;function qN(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QO(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function d(g,v){return Array.isArray(g)?!1:typeof g=="number"||typeof g=="boolean"||g==null||t.isSymbol(g)?!0:typeof g=="string"&&(a.test(g)||!i.test(g))||v!=null&&Object.hasOwn(v,g)}e.isKey=d})(dw)),dw}var zA;function $N(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VN(),i=qN(),a=wS();function d(g,v,u,M){if(g==null)return[];u=M?void 0:u,Array.isArray(g)||(g=Object.values(g)),Array.isArray(v)||(v=v==null?[null]:[v]),v.length===0&&(v=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(G=>String(G));const C=(G,Y)=>{let H=G;for(let $=0;$<Y.length&&H!=null;++$)H=H[Y[$]];return H},D=(G,Y)=>Y==null||G==null?Y:typeof G=="object"&&"key"in G?Object.hasOwn(Y,G.key)?Y[G.key]:C(Y,G.path):typeof G=="function"?G(Y):Array.isArray(G)?C(Y,G):typeof Y=="object"?Y[G]:Y,I=v.map(G=>(Array.isArray(G)&&G.length===1&&(G=G[0]),G==null||typeof G=="function"||Array.isArray(G)||i.isKey(G)?G:{key:G,path:a.toPath(G)}));return g.map(G=>({original:G,criteria:I.map(Y=>D(Y,G))})).slice().sort((G,Y)=>{for(let H=0;H<I.length;H++){const $=t.compareValues(G.criteria[H],Y.criteria[H],u[H]);if($!==0)return $}return 0}).map(G=>G.original)}e.orderBy=d})(hw)),hw}var mw={},kA;function GN(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a=1){const d=[],g=Math.floor(a),v=(u,M)=>{for(let C=0;C<u.length;C++){const D=u[C];Array.isArray(D)&&M<g?v(D,M+1):d.push(D)}};return v(i,0),d}e.flatten=t})(mw)),mw}var gw={},RA;function JO(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XO(),i=AS(),a=$O(),d=ZO();function g(v,u,M){return a.isObject(M)&&(typeof u=="number"&&i.isArrayLike(M)&&t.isIndex(u)&&u<M.length||typeof u=="string"&&u in M)?d.isEqualsSameValueZero(M[u],v):!1}e.isIterateeCall=g})(gw)),gw}var LA;function ZN(){return LA||(LA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$N(),i=GN(),a=JO();function d(g,...v){const u=v.length;return u>1&&a.isIterateeCall(g,v[0],v[1])?v=[]:u>2&&a.isIterateeCall(v[0],v[1],v[2])&&(v=[v[0]]),t.orderBy(g,i.flatten(v),["asc"])}e.sortBy=d})(cw)),cw}var yw,jA;function HN(){return jA||(jA=1,yw=ZN().sortBy),yw}var WN=HN();const ob=Yc(WN);var eI=e=>e.legend.settings,YN=e=>e.legend.size,XN=e=>e.legend.payload;it([XN,eI],(e,t)=>{var{itemSorter:i}=t,a=e.flat(1);return i?ob(a,i):a});var D0=1;function KN(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,i]=q.useState({height:0,left:0,top:0,width:0}),a=q.useCallback(d=>{if(d!=null){var g=d.getBoundingClientRect(),v={height:g.height,left:g.left,top:g.top,width:g.width};(Math.abs(v.height-t.height)>D0||Math.abs(v.left-t.left)>D0||Math.abs(v.top-t.top)>D0||Math.abs(v.width-t.width)>D0)&&i({height:v.height,left:v.left,top:v.top,width:v.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function Wa(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var QN=typeof Symbol=="function"&&Symbol.observable||"@@observable",BA=QN,vw=()=>Math.random().toString(36).substring(7).split("").join("."),JN={INIT:`@@redux/INIT${vw()}`,REPLACE:`@@redux/REPLACE${vw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vw()}`},lx=JN;function CS(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tI(e,t,i){if(typeof e!="function")throw new Error(Wa(2));if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Wa(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Wa(1));return i(tI)(e,t)}let a=e,d=t,g=new Map,v=g,u=0,M=!1;function C(){v===g&&(v=new Map,g.forEach(($,se)=>{v.set(se,$)}))}function D(){if(M)throw new Error(Wa(3));return d}function I($){if(typeof $!="function")throw new Error(Wa(4));if(M)throw new Error(Wa(5));let se=!0;C();const he=u++;return v.set(he,$),function(){if(se){if(M)throw new Error(Wa(6));se=!1,C(),v.delete(he),g=null}}}function N($){if(!CS($))throw new Error(Wa(7));if(typeof $.type>"u")throw new Error(Wa(8));if(typeof $.type!="string")throw new Error(Wa(17));if(M)throw new Error(Wa(9));try{M=!0,d=a(d,$)}finally{M=!1}return(g=v).forEach(he=>{he()}),$}function G($){if(typeof $!="function")throw new Error(Wa(10));a=$,N({type:lx.REPLACE})}function Y(){const $=I;return{subscribe(se){if(typeof se!="object"||se===null)throw new Error(Wa(11));function he(){const me=se;me.next&&me.next(D())}return he(),{unsubscribe:$(he)}},[BA](){return this}}}return N({type:lx.INIT}),{dispatch:N,subscribe:I,getState:D,replaceReducer:G,[BA]:Y}}function e4(e){Object.keys(e).forEach(t=>{const i=e[t];if(typeof i(void 0,{type:lx.INIT})>"u")throw new Error(Wa(12));if(typeof i(void 0,{type:lx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Wa(13))})}function rI(e){const t=Object.keys(e),i={};for(let g=0;g<t.length;g++){const v=t[g];typeof e[v]=="function"&&(i[v]=e[v])}const a=Object.keys(i);let d;try{e4(i)}catch(g){d=g}return function(v={},u){if(d)throw d;let M=!1;const C={};for(let D=0;D<a.length;D++){const I=a[D],N=i[I],G=v[I],Y=N(G,u);if(typeof Y>"u")throw u&&u.type,new Error(Wa(14));C[I]=Y,M=M||Y!==G}return M=M||a.length!==Object.keys(v).length,M?C:v}}function ux(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,i)=>(...a)=>t(i(...a)))}function t4(...e){return t=>(i,a)=>{const d=t(i,a);let g=()=>{throw new Error(Wa(15))};const v={getState:d.getState,dispatch:(M,...C)=>g(M,...C)},u=e.map(M=>M(v));return g=ux(...u)(d.dispatch),{...d,dispatch:g}}}function nI(e){return CS(e)&&"type"in e&&typeof e.type=="string"}var iI=Symbol.for("immer-nothing"),NA=Symbol.for("immer-draftable"),qo=Symbol.for("immer-state");function Nu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Qs=Object,Xg=Qs.getPrototypeOf,cx="constructor",sb="prototype",m2="configurable",hx="enumerable",Y0="writable",Lv="value",lf=e=>!!e&&!!e[qo];function Gu(e){return e?aI(e)||ub(e)||!!e[NA]||!!e[cx]?.[NA]||cb(e)||hb(e):!1}var r4=Qs[sb][cx].toString(),FA=new WeakMap;function aI(e){if(!e||!DS(e))return!1;const t=Xg(e);if(t===null||t===Qs[sb])return!0;const i=Qs.hasOwnProperty.call(t,cx)&&t[cx];if(i===Object)return!0;if(!Ug(i))return!1;let a=FA.get(i);return a===void 0&&(a=Function.toString.call(i),FA.set(i,a)),a===r4}function lb(e,t,i=!0){n_(e)===0?(i?Reflect.ownKeys(e):Qs.keys(e)).forEach(d=>{t(d,e[d],e)}):e.forEach((a,d)=>t(d,a,e))}function n_(e){const t=e[qo];return t?t.type_:ub(e)?1:cb(e)?2:hb(e)?3:0}var UA=(e,t,i=n_(e))=>i===2?e.has(t):Qs[sb].hasOwnProperty.call(e,t),g2=(e,t,i=n_(e))=>i===2?e.get(t):e[t],fx=(e,t,i,a=n_(e))=>{a===2?e.set(t,i):a===3?e.add(i):e[t]=i};function n4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ub=Array.isArray,cb=e=>e instanceof Map,hb=e=>e instanceof Set,DS=e=>typeof e=="object",Ug=e=>typeof e=="function",_w=e=>typeof e=="boolean";function i4(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Jh=e=>e.copy_||e.base_,OS=e=>e.modified_?e.copy_:e.base_;function y2(e,t){if(cb(e))return new Map(e);if(hb(e))return new Set(e);if(ub(e))return Array[sb].slice.call(e);const i=aI(e);if(t===!0||t==="class_only"&&!i){const a=Qs.getOwnPropertyDescriptors(e);delete a[qo];let d=Reflect.ownKeys(a);for(let g=0;g<d.length;g++){const v=d[g],u=a[v];u[Y0]===!1&&(u[Y0]=!0,u[m2]=!0),(u.get||u.set)&&(a[v]={[m2]:!0,[Y0]:!0,[hx]:u[hx],[Lv]:e[v]})}return Qs.create(Xg(e),a)}else{const a=Xg(e);if(a!==null&&i)return{...e};const d=Qs.create(a);return Qs.assign(d,e)}}function IS(e,t=!1){return fb(e)||lf(e)||!Gu(e)||(n_(e)>1&&Qs.defineProperties(e,{set:O0,add:O0,clear:O0,delete:O0}),Qs.freeze(e),t&&lb(e,(i,a)=>{IS(a,!0)},!1)),e}function a4(){Nu(2)}var O0={[Lv]:a4};function fb(e){return e===null||!DS(e)?!0:Qs.isFrozen(e)}var dx="MapSet",v2="Patches",VA="ArrayMethods",oI={};function nm(e){const t=oI[e];return t||Nu(0,e),t}var qA=e=>!!oI[e],jv,sI=()=>jv,o4=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:qA(dx)?nm(dx):void 0,arrayMethodsPlugin_:qA(VA)?nm(VA):void 0});function $A(e,t){t&&(e.patchPlugin_=nm(v2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function _2(e){x2(e),e.drafts_.forEach(s4),e.drafts_=null}function x2(e){e===jv&&(jv=e.parent_)}var GA=e=>jv=o4(jv,e);function s4(e){const t=e[qo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ZA(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];if(e!==void 0&&e!==i){i[qo].modified_&&(_2(t),Nu(4)),Gu(e)&&(e=HA(t,e));const{patchPlugin_:d}=t;d&&d.generateReplacementPatches_(i[qo].base_,e,t)}else e=HA(t,i);return l4(t,e,!0),_2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iI?e:void 0}function HA(e,t){if(fb(t))return t;const i=t[qo];if(!i)return px(t,e.handledSet_,e);if(!db(i,e))return t;if(!i.modified_)return i.base_;if(!i.finalized_){const{callbacks_:a}=i;if(a)for(;a.length>0;)a.pop()(e);cI(i,e)}return i.copy_}function l4(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&IS(t,i)}function lI(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var db=(e,t)=>e.scope_===t,u4=[];function uI(e,t,i,a){const d=Jh(e),g=e.type_;if(a!==void 0&&g2(d,a,g)===t){fx(d,a,i,g);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;lb(d,(M,C)=>{if(lf(C)){const D=u.get(C)||[];D.push(M),u.set(C,D)}})}const v=e.draftLocations_.get(t)??u4;for(const u of v)fx(d,u,i,g)}function c4(e,t,i){e.callbacks_.push(function(d){const g=t;if(!g||!db(g,d))return;d.mapSetPlugin_?.fixSetContents(g);const v=OS(g);uI(e,g.draft_??g,v,i),cI(g,d)})}function cI(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const d=a.getPath(e);d&&a.generatePatches_(e,d,t)}lI(e)}}function h4(e,t,i){const{scope_:a}=e;if(lf(i)){const d=i[qo];db(d,a)&&d.callbacks_.push(function(){X0(e);const v=OS(d);uI(e,i,v,t)})}else Gu(i)&&e.callbacks_.push(function(){const g=Jh(e);e.type_===3?g.has(i)&&px(i,a.handledSet_,a):g2(g,t,e.type_)===i&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&px(g2(e.copy_,t,e.type_),a.handledSet_,a)})}function px(e,t,i){return!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1||lf(e)||t.has(e)||!Gu(e)||fb(e)||(t.add(e),lb(e,(a,d)=>{if(lf(d)){const g=d[qo];if(db(g,i)){const v=OS(g);fx(e,a,v,e.type_),lI(g)}}else Gu(d)&&px(d,t,i)})),e}function f4(e,t){const i=ub(e),a={type_:i?1:0,scope_:t?t.scope_:sI(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let d=a,g=mx;i&&(d=[a],g=Bv);const{revoke:v,proxy:u}=Proxy.revocable(d,g);return a.draft_=u,a.revoke_=v,[u,a]}var mx={get(e,t){if(t===qo)return e;let i=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&i?.isArrayOperationMethod(t))return i.createMethodInterceptor(e,t);const d=Jh(e);if(!UA(d,t,e.type_))return d4(e,d,t);const g=d[t];if(e.finalized_||!Gu(g)||a&&e.operationMethod&&i?.isMutatingArrayMethod(e.operationMethod)&&i4(t))return g;if(g===xw(e.base_,t)){X0(e);const v=e.type_===1?+t:t,u=w2(e.scope_,g,e,v);return e.copy_[v]=u}return g},has(e,t){return t in Jh(e)},ownKeys(e){return Reflect.ownKeys(Jh(e))},set(e,t,i){const a=hI(Jh(e),t);if(a?.set)return a.set.call(e.draft_,i),!0;if(!e.modified_){const d=xw(Jh(e),t),g=d?.[qo];if(g&&g.base_===i)return e.copy_[t]=i,e.assigned_.set(t,!1),!0;if(n4(i,d)&&(i!==void 0||UA(e.base_,t,e.type_)))return!0;X0(e),b2(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_.set(t,!0),h4(e,t,i)),!0},deleteProperty(e,t){return X0(e),xw(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),b2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=Jh(e),a=Reflect.getOwnPropertyDescriptor(i,t);return a&&{[Y0]:!0,[m2]:e.type_!==1||t!=="length",[hx]:a[hx],[Lv]:i[t]}},defineProperty(){Nu(11)},getPrototypeOf(e){return Xg(e.base_)},setPrototypeOf(){Nu(12)}},Bv={};for(let e in mx){let t=mx[e];Bv[e]=function(){const i=arguments;return i[0]=i[0][0],t.apply(this,i)}}Bv.deleteProperty=function(e,t){return Bv.set.call(this,e,t,void 0)};Bv.set=function(e,t,i){return mx.set.call(this,e[0],t,i,e[0])};function xw(e,t){const i=e[qo];return(i?Jh(i):e)[t]}function d4(e,t,i){const a=hI(t,i);return a?Lv in a?a[Lv]:a.get?.call(e.draft_):void 0}function hI(e,t){if(!(t in e))return;let i=Xg(e);for(;i;){const a=Object.getOwnPropertyDescriptor(i,t);if(a)return a;i=Xg(i)}}function b2(e){e.modified_||(e.modified_=!0,e.parent_&&b2(e.parent_))}function X0(e){e.copy_||(e.assigned_=new Map,e.copy_=y2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var p4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(i,a,d)=>{if(Ug(i)&&!Ug(a)){const v=a;a=i;const u=this;return function(C=v,...D){return u.produce(C,I=>a.call(this,I,...D))}}Ug(a)||Nu(6),d!==void 0&&!Ug(d)&&Nu(7);let g;if(Gu(i)){const v=GA(this),u=w2(v,i,void 0);let M=!0;try{g=a(u),M=!1}finally{M?_2(v):x2(v)}return $A(v,d),ZA(g,v)}else if(!i||!DS(i)){if(g=a(i),g===void 0&&(g=i),g===iI&&(g=void 0),this.autoFreeze_&&IS(g,!0),d){const v=[],u=[];nm(v2).generateReplacementPatches_(i,g,{patches_:v,inversePatches_:u}),d(v,u)}return g}else Nu(1,i)},this.produceWithPatches=(i,a)=>{if(Ug(i))return(u,...M)=>this.produceWithPatches(u,C=>i(C,...M));let d,g;return[this.produce(i,a,(u,M)=>{d=u,g=M}),d,g]},_w(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),_w(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),_w(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Gu(t)||Nu(8),lf(t)&&(t=Vu(t));const i=GA(this),a=w2(i,t,void 0);return a[qo].isManual_=!0,x2(i),a}finishDraft(t,i){const a=t&&t[qo];(!a||!a.isManual_)&&Nu(9);const{scope_:d}=a;return $A(d,i),ZA(void 0,d)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,i){let a;for(a=i.length-1;a>=0;a--){const g=i[a];if(g.path.length===0&&g.op==="replace"){t=g.value;break}}a>-1&&(i=i.slice(a+1));const d=nm(v2).applyPatches_;return lf(t)?d(t,i):this.produce(t,g=>d(g,i))}};function w2(e,t,i,a){const[d,g]=cb(t)?nm(dx).proxyMap_(t,i):hb(t)?nm(dx).proxySet_(t,i):f4(t,i);return(i?.scope_??sI()).drafts_.push(d),g.callbacks_=i?.callbacks_??[],g.key_=a,i&&a!==void 0?c4(i,g,a):g.callbacks_.push(function(M){M.mapSetPlugin_?.fixSetContents(g);const{patchPlugin_:C}=M;g.modified_&&C&&C.generatePatches_(g,[],M)}),d}function Vu(e){return lf(e)||Nu(10,e),fI(e)}function fI(e){if(!Gu(e)||fb(e))return e;const t=e[qo];let i,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=y2(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else i=y2(e,!0);return lb(i,(d,g)=>{fx(i,d,fI(g))},a),t&&(t.finalized_=!1),i}var m4=new p4,dI=m4.produce;function pI(e){return({dispatch:i,getState:a})=>d=>g=>typeof g=="function"?g(i,a,e):d(g)}var g4=pI(),y4=pI,v4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ux:ux.apply(null,arguments)};function ql(e,t){function i(...a){if(t){let d=t(...a);if(!d)throw new Error(Js(0));return{type:e,payload:d.payload,..."meta"in d&&{meta:d.meta},..."error"in d&&{error:d.error}}}return{type:e,payload:a[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=a=>nI(a)&&a.type===e,i}var mI=class Av extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Av.prototype)}static get[Symbol.species](){return Av}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Av(...t[0].concat(this)):new Av(...t.concat(this))}};function WA(e){return Gu(e)?dI(e,()=>{}):e}function I0(e,t,i){return e.has(t)?e.get(t):e.set(t,i(t)).get(t)}function _4(e){return typeof e=="boolean"}var x4=()=>function(t){const{thunk:i=!0,immutableCheck:a=!0,serializableCheck:d=!0,actionCreatorCheck:g=!0}=t??{};let v=new mI;return i&&(_4(i)?v.push(g4):v.push(y4(i.extraArgument))),v},gI="RTK_autoBatch",ni=()=>e=>({payload:e,meta:{[gI]:!0}}),YA=e=>t=>{setTimeout(t,e)},yI=(e={type:"raf"})=>t=>(...i)=>{const a=t(...i);let d=!0,g=!1,v=!1;const u=new Set,M=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:YA(10):e.type==="callback"?e.queueNotification:YA(e.timeout),C=()=>{v=!1,g&&(g=!1,u.forEach(D=>D()))};return Object.assign({},a,{subscribe(D){const I=()=>d&&D(),N=a.subscribe(I);return u.add(D),()=>{N(),u.delete(D)}},dispatch(D){try{return d=!D?.meta?.[gI],g=!d,g&&(v||(v=!0,M(C))),a.dispatch(D)}finally{d=!0}}})},b4=e=>function(i){const{autoBatch:a=!0}=i??{};let d=new mI(e);return a&&d.push(yI(typeof a=="object"?a:void 0)),d};function w4(e){const t=x4(),{reducer:i=void 0,middleware:a,devTools:d=!0,preloadedState:g=void 0,enhancers:v=void 0}=e||{};let u;if(typeof i=="function")u=i;else if(CS(i))u=rI(i);else throw new Error(Js(1));let M;typeof a=="function"?M=a(t):M=t();let C=ux;d&&(C=v4({trace:!1,...typeof d=="object"&&d}));const D=t4(...M),I=b4(D);let N=typeof v=="function"?v(I):I();const G=C(...N);return tI(u,g,G)}function vI(e){const t={},i=[];let a;const d={addCase(g,v){const u=typeof g=="string"?g:g.type;if(!u)throw new Error(Js(28));if(u in t)throw new Error(Js(29));return t[u]=v,d},addAsyncThunk(g,v){return v.pending&&(t[g.pending.type]=v.pending),v.rejected&&(t[g.rejected.type]=v.rejected),v.fulfilled&&(t[g.fulfilled.type]=v.fulfilled),v.settled&&i.push({matcher:g.settled,reducer:v.settled}),d},addMatcher(g,v){return i.push({matcher:g,reducer:v}),d},addDefaultCase(g){return a=g,d}};return e(d),[t,i,a]}function S4(e){return typeof e=="function"}function T4(e,t){let[i,a,d]=vI(t),g;if(S4(e))g=()=>WA(e());else{const u=WA(e);g=()=>u}function v(u=g(),M){let C=[i[M.type],...a.filter(({matcher:D})=>D(M)).map(({reducer:D})=>D)];return C.filter(D=>!!D).length===0&&(C=[d]),C.reduce((D,I)=>{if(I)if(lf(D)){const G=I(D,M);return G===void 0?D:G}else{if(Gu(D))return dI(D,N=>I(N,M));{const N=I(D,M);if(N===void 0){if(D===null)return D;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}}return D},u)}return v.getInitialState=g,v}var E4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",A4=(e=21)=>{let t="",i=e;for(;i--;)t+=E4[Math.random()*64|0];return t},M4=Symbol.for("rtk-slice-createasyncthunk");function P4(e,t){return`${e}/${t}`}function C4({creators:e}={}){const t=e?.asyncThunk?.[M4];return function(a){const{name:d,reducerPath:g=d}=a;if(!d)throw new Error(Js(11));const v=(typeof a.reducers=="function"?a.reducers(O4()):a.reducers)||{},u=Object.keys(v),M={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},C={addCase(fe,me){const Ae=typeof fe=="string"?fe:fe.type;if(!Ae)throw new Error(Js(12));if(Ae in M.sliceCaseReducersByType)throw new Error(Js(13));return M.sliceCaseReducersByType[Ae]=me,C},addMatcher(fe,me){return M.sliceMatchers.push({matcher:fe,reducer:me}),C},exposeAction(fe,me){return M.actionCreators[fe]=me,C},exposeCaseReducer(fe,me){return M.sliceCaseReducersByName[fe]=me,C}};u.forEach(fe=>{const me=v[fe],Ae={reducerName:fe,type:P4(d,fe),createNotation:typeof a.reducers=="function"};z4(me)?R4(Ae,me,C,t):I4(Ae,me,C)});function D(){const[fe={},me=[],Ae=void 0]=typeof a.extraReducers=="function"?vI(a.extraReducers):[a.extraReducers],ge={...fe,...M.sliceCaseReducersByType};return T4(a.initialState,Se=>{for(let Ue in ge)Se.addCase(Ue,ge[Ue]);for(let Ue of M.sliceMatchers)Se.addMatcher(Ue.matcher,Ue.reducer);for(let Ue of me)Se.addMatcher(Ue.matcher,Ue.reducer);Ae&&Se.addDefaultCase(Ae)})}const I=fe=>fe,N=new Map,G=new WeakMap;let Y;function H(fe,me){return Y||(Y=D()),Y(fe,me)}function $(){return Y||(Y=D()),Y.getInitialState()}function se(fe,me=!1){function Ae(Se){let Ue=Se[fe];return typeof Ue>"u"&&me&&(Ue=I0(G,Ae,$)),Ue}function ge(Se=I){const Ue=I0(N,me,()=>new WeakMap);return I0(Ue,Se,()=>{const et={};for(const[vt,pt]of Object.entries(a.selectors??{}))et[vt]=D4(pt,Se,()=>I0(G,Se,$),me);return et})}return{reducerPath:fe,getSelectors:ge,get selectors(){return ge(Ae)},selectSlice:Ae}}const he={name:d,reducer:H,actions:M.actionCreators,caseReducers:M.sliceCaseReducersByName,getInitialState:$,...se(g),injectInto(fe,{reducerPath:me,...Ae}={}){const ge=me??g;return fe.inject({reducerPath:ge,reducer:H},Ae),{...he,...se(ge,!0)}}};return he}}function D4(e,t,i,a){function d(g,...v){let u=t(g);return typeof u>"u"&&a&&(u=i()),e(u,...v)}return d.unwrapped=e,d}var ws=C4();function O4(){function e(t,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...i}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...i){return t(...i)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:i}},asyncThunk:e}}function I4({type:e,reducerName:t,createNotation:i},a,d){let g,v;if("reducer"in a){if(i&&!k4(a))throw new Error(Js(17));g=a.reducer,v=a.prepare}else g=a;d.addCase(e,g).exposeCaseReducer(t,g).exposeAction(t,v?ql(e,v):ql(e))}function z4(e){return e._reducerDefinitionType==="asyncThunk"}function k4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function R4({type:e,reducerName:t},i,a,d){if(!d)throw new Error(Js(18));const{payloadCreator:g,fulfilled:v,pending:u,rejected:M,settled:C,options:D}=i,I=d(e,g,D);a.exposeAction(t,I),v&&a.addCase(I.fulfilled,v),u&&a.addCase(I.pending,u),M&&a.addCase(I.rejected,M),C&&a.addMatcher(I.settled,C),a.exposeCaseReducer(t,{fulfilled:v||z0,pending:u||z0,rejected:M||z0,settled:C||z0})}function z0(){}var L4="task",_I="listener",xI="completed",zS="cancelled",j4=`task-${zS}`,B4=`task-${xI}`,S2=`${_I}-${zS}`,N4=`${_I}-${xI}`,pb=class{constructor(e){this.code=e,this.message=`${L4} ${zS} (reason: ${e})`}name="TaskAbortError";message},kS=(e,t)=>{if(typeof e!="function")throw new TypeError(Js(32))},gx=()=>{},bI=(e,t=gx)=>(e.catch(t),e),wI=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Kp=e=>{if(e.aborted)throw new pb(e.reason)};function SI(e,t){let i=gx;return new Promise((a,d)=>{const g=()=>d(new pb(e.reason));if(e.aborted){g();return}i=wI(e,g),t.finally(()=>i()).then(a,d)}).finally(()=>{i=gx})}var F4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(i){return{status:i instanceof pb?"cancelled":"rejected",error:i}}finally{t?.()}},yx=e=>t=>bI(SI(e,t).then(i=>(Kp(e),i))),TI=e=>{const t=yx(e);return i=>t(new Promise(a=>setTimeout(a,i)))},{assign:Hg}=Object,XA={},mb="listenerMiddleware",U4=(e,t)=>{const i=a=>wI(e,()=>a.abort(e.reason));return(a,d)=>{kS(a);const g=new AbortController;i(g);const v=F4(async()=>{Kp(e),Kp(g.signal);const u=await a({pause:yx(g.signal),delay:TI(g.signal),signal:g.signal});return Kp(g.signal),u},()=>g.abort(B4));return d?.autoJoin&&t.push(v.catch(gx)),{result:yx(e)(v),cancel(){g.abort(j4)}}}},V4=(e,t)=>{const i=async(a,d)=>{Kp(t);let g=()=>{};const u=[new Promise((M,C)=>{let D=e({predicate:a,effect:(I,N)=>{N.unsubscribe(),M([I,N.getState(),N.getOriginalState()])}});g=()=>{D(),C()}})];d!=null&&u.push(new Promise(M=>setTimeout(M,d,null)));try{const M=await SI(t,Promise.race(u));return Kp(t),M}finally{g()}};return(a,d)=>bI(i(a,d))},EI=e=>{let{type:t,actionCreator:i,matcher:a,predicate:d,effect:g}=e;if(t)d=ql(t).match;else if(i)t=i.type,d=i.match;else if(a)d=a;else if(!d)throw new Error(Js(21));return kS(g),{predicate:d,type:t,effect:g}},AI=Hg(e=>{const{type:t,predicate:i,effect:a}=EI(e);return{id:A4(),effect:a,type:t,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(Js(22))}}},{withTypes:()=>AI}),KA=(e,t)=>{const{type:i,effect:a,predicate:d}=EI(t);return Array.from(e.values()).find(g=>(typeof i=="string"?g.type===i:g.predicate===d)&&g.effect===a)},T2=e=>{e.pending.forEach(t=>{t.abort(S2)})},q4=(e,t)=>()=>{for(const i of t.keys())T2(i);e.clear()},QA=(e,t,i)=>{try{e(t,i)}catch(a){setTimeout(()=>{throw a},0)}},MI=Hg(ql(`${mb}/add`),{withTypes:()=>MI}),$4=ql(`${mb}/removeAll`),PI=Hg(ql(`${mb}/remove`),{withTypes:()=>PI}),G4=(...e)=>{console.error(`${mb}/error`,...e)},i_=(e={})=>{const t=new Map,i=new Map,a=G=>{const Y=i.get(G)??0;i.set(G,Y+1)},d=G=>{const Y=i.get(G)??1;Y===1?i.delete(G):i.set(G,Y-1)},{extra:g,onError:v=G4}=e;kS(v);const u=G=>(G.unsubscribe=()=>t.delete(G.id),t.set(G.id,G),Y=>{G.unsubscribe(),Y?.cancelActive&&T2(G)}),M=G=>{const Y=KA(t,G)??AI(G);return u(Y)};Hg(M,{withTypes:()=>M});const C=G=>{const Y=KA(t,G);return Y&&(Y.unsubscribe(),G.cancelActive&&T2(Y)),!!Y};Hg(C,{withTypes:()=>C});const D=async(G,Y,H,$)=>{const se=new AbortController,he=V4(M,se.signal),fe=[];try{G.pending.add(se),a(G),await Promise.resolve(G.effect(Y,Hg({},H,{getOriginalState:$,condition:(me,Ae)=>he(me,Ae).then(Boolean),take:he,delay:TI(se.signal),pause:yx(se.signal),extra:g,signal:se.signal,fork:U4(se.signal,fe),unsubscribe:G.unsubscribe,subscribe:()=>{t.set(G.id,G)},cancelActiveListeners:()=>{G.pending.forEach((me,Ae,ge)=>{me!==se&&(me.abort(S2),ge.delete(me))})},cancel:()=>{se.abort(S2),G.pending.delete(se)},throwIfCancelled:()=>{Kp(se.signal)}})))}catch(me){me instanceof pb||QA(v,me,{raisedBy:"effect"})}finally{await Promise.all(fe),se.abort(N4),d(G),G.pending.delete(se)}},I=q4(t,i);return{middleware:G=>Y=>H=>{if(!nI(H))return Y(H);if(MI.match(H))return M(H.payload);if($4.match(H)){I();return}if(PI.match(H))return C(H.payload);let $=G.getState();const se=()=>{if($===XA)throw new Error(Js(23));return $};let he;try{if(he=Y(H),t.size>0){const fe=G.getState(),me=Array.from(t.values());for(const Ae of me){let ge=!1;try{ge=Ae.predicate(H,fe,$)}catch(Se){ge=!1,QA(v,Se,{raisedBy:"predicate"})}ge&&D(Ae,H,G,se)}}}finally{$=XA}return he},startListening:M,stopListening:C,clearListeners:I}};function Js(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Z4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},CI=ws({name:"chartLayout",initialState:Z4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var i,a,d,g;e.margin.top=(i=t.payload.top)!==null&&i!==void 0?i:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(d=t.payload.bottom)!==null&&d!==void 0?d:0,e.margin.left=(g=t.payload.left)!==null&&g!==void 0?g:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:H4,setLayout:W4,setChartSize:Y4,setScale:X4}=CI.actions,K4=CI.reducer;function DI(e,t,i){return Array.isArray(e)&&e&&t+i!==0?e.slice(t,i+1):e}function Dr(e){return Number.isFinite(e)}function Gc(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function JA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function qg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(i),!0).forEach(function(a){Q4(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):JA(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function Q4(e,t,i){return(t=J4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function J4(e){var t=eF(e,"string");return typeof t=="symbol"?t:t+""}function eF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ai(e,t,i){return ai(e)||ai(t)?i:$c(t)?Yg(e,t,i):typeof t=="function"?t(e):i}var tF=(e,t,i)=>{if(t&&i){var{width:a,height:d}=i,{align:g,verticalAlign:v,layout:u}=t;if((u==="vertical"||u==="horizontal"&&v==="middle")&&g!=="center"&&qt(e[g]))return qg(qg({},e),{},{[g]:e[g]+(a||0)});if((u==="horizontal"||u==="vertical"&&g==="center")&&v!=="middle"&&qt(e[v]))return qg(qg({},e),{},{[v]:e[v]+(d||0)})}return e},Hu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",OI=(e,t,i,a)=>{if(a)return e.map(u=>u.coordinate);var d,g,v=e.map(u=>(u.coordinate===t&&(d=!0),u.coordinate===i&&(g=!0),u.coordinate));return d||v.push(t),g||v.push(i),v},II=(e,t,i)=>{if(!e)return null;var{duplicateDomain:a,type:d,range:g,scale:v,realScaleType:u,isCategorical:M,categoricalDomain:C,tickCount:D,ticks:I,niceTicks:N,axisType:G}=e;if(!v)return null;var Y=u==="scaleBand"&&v.bandwidth?v.bandwidth()/2:2,H=d==="category"&&v.bandwidth?v.bandwidth()/Y:0;if(H=G==="angleAxis"&&g&&g.length>=2?_s(g[0]-g[1])*2*H:H,I||N){var $=(I||N||[]).map((se,he)=>{var fe=a?a.indexOf(se):se,me=v.map(fe);return Dr(me)?{coordinate:me+H,value:se,offset:H,index:he}:null}).filter(xs);return $}return M&&C?C.map((se,he)=>{var fe=v.map(se);return Dr(fe)?{coordinate:fe+H,value:se,index:he,offset:H}:null}).filter(xs):v.ticks&&D!=null?v.ticks(D).map((se,he)=>{var fe=v.map(se);return Dr(fe)?{coordinate:fe+H,value:se,index:he,offset:H}:null}).filter(xs):v.domain().map((se,he)=>{var fe=v.map(se);return Dr(fe)?{coordinate:fe+H,value:a?a[se]:se,index:he,offset:H}:null}).filter(xs)},rF=(e,t)=>{if(!t||t.length!==2||!qt(t[0])||!qt(t[1]))return e;var i=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),d=[e[0],e[1]];return(!qt(e[0])||e[0]<i)&&(d[0]=i),(!qt(e[1])||e[1]>a)&&(d[1]=a),d[0]>a&&(d[0]=a),d[1]<i&&(d[1]=i),d},nF=e=>{var t,i=e.length;if(!(i<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var d=0;d<a;++d)for(var g=0,v=0,u=0;u<i;++u){var M=e[u],C=M?.[d];if(C!=null){var D=C[1],I=C[0],N=qu(D)?I:D;N>=0?(C[0]=g,g+=N,C[1]=g):(C[0]=v,v+=N,C[1]=v)}}}},iF=e=>{var t,i=e.length;if(!(i<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var d=0;d<a;++d)for(var g=0,v=0;v<i;++v){var u=e[v],M=u?.[d];if(M!=null){var C=qu(M[1])?M[0]:M[1];C>=0?(M[0]=g,g+=C,M[1]=g):(M[0]=0,M[1]=0)}}}},aF={sign:nF,expand:zB,none:tm,silhouette:kB,wiggle:RB,positive:iF},oF=(e,t,i)=>{var a,d=(a=aF[i])!==null&&a!==void 0?a:tm,g=IB().keys(t).value((u,M)=>Number(Ai(u,M,0))).order(d2).offset(d),v=g(e);return v.forEach((u,M)=>{u.forEach((C,D)=>{var I=Ai(e[D],t[M],0);Array.isArray(I)&&I.length===2&&qt(I[0])&&qt(I[1])&&(C[0]=I[0],C[1]=I[1])})}),v};function zI(e){return e==null?void 0:String(e)}function vx(e){var{axis:t,ticks:i,bandSize:a,entry:d,index:g,dataKey:v}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ai(d[t.dataKey])){var u=NO(i,"value",d[t.dataKey]);if(u)return u.coordinate+a/2}return i!=null&&i[g]?i[g].coordinate+a/2:null}var M=Ai(d,ai(v)?t.dataKey:v),C=t.scale.map(M);return qt(C)?C:null}var eM=e=>{var{axis:t,ticks:i,offset:a,bandSize:d,entry:g,index:v}=e;if(t.type==="category")return i[v]?i[v].coordinate+a:null;var u=Ai(g,t.dataKey,t.scale.domain()[v]);if(ai(u))return null;var M=t.scale.map(u);return qt(M)?M-d/2+a:null},sF=e=>{var{numericAxis:t}=e,i=t.scale.domain();if(t.type==="number"){var a=Math.min(i[0],i[1]),d=Math.max(i[0],i[1]);return a<=0&&d>=0?0:d<0?d:a}return i[0]},lF=e=>{var t=e.flat(2).filter(qt);return[Math.min(...t),Math.max(...t)]},uF=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],cF=(e,t,i)=>{if(e!=null)return uF(Object.keys(e).reduce((a,d)=>{var g=e[d];if(!g)return a;var{stackedData:v}=g,u=v.reduce((M,C)=>{var D=DI(C,t,i),I=lF(D);return!Dr(I[0])||!Dr(I[1])?M:[Math.min(M[0],I[0]),Math.max(M[1],I[1])]},[1/0,-1/0]);return[Math.min(u[0],a[0]),Math.max(u[1],a[1])]},[1/0,-1/0]))},tM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Md=(e,t,i)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!i||a>0)return a}if(e&&t&&t.length>=2){for(var d=ob(t,D=>D.coordinate),g=1/0,v=1,u=d.length;v<u;v++){var M=d[v],C=d[v-1];g=Math.min((M?.coordinate||0)-(C?.coordinate||0),g)}return g===1/0?0:g}return i?void 0:0};function nM(e){var{tooltipEntrySettings:t,dataKey:i,payload:a,value:d,name:g}=e;return qg(qg({},t),{},{dataKey:i,payload:a,value:d,name:g})}function iy(e,t){if(e)return String(e);if(typeof t=="string")return t}var hF=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},fF=(e,t)=>t==="centric"?e.angle:e.radius,gf=e=>e.layout.width,yf=e=>e.layout.height,dF=e=>e.layout.scale,kI=e=>e.layout.margin,gb=it(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),yb=it(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),pF="data-recharts-item-index",mF="data-recharts-item-id",a_=60;function iM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function k0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?iM(Object(i),!0).forEach(function(a){gF(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function gF(e,t,i){return(t=yF(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yF(e){var t=vF(e,"string");return typeof t=="symbol"?t:t+""}function vF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _F=e=>e.brush.height;function xF(e){var t=yb(e);return t.reduce((i,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var d=typeof a.width=="number"?a.width:a_;return i+d}return i},0)}function bF(e){var t=yb(e);return t.reduce((i,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var d=typeof a.width=="number"?a.width:a_;return i+d}return i},0)}function wF(e){var t=gb(e);return t.reduce((i,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?i+a.height:i,0)}function SF(e){var t=gb(e);return t.reduce((i,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?i+a.height:i,0)}var xa=it([gf,yf,kI,_F,xF,bF,wF,SF,eI,YN],(e,t,i,a,d,g,v,u,M,C)=>{var D={left:(i.left||0)+d,right:(i.right||0)+g},I={top:(i.top||0)+v,bottom:(i.bottom||0)+u},N=k0(k0({},I),D),G=N.bottom;N.bottom+=a,N=tF(N,M,C);var Y=e-N.left-N.right,H=t-N.top-N.bottom;return k0(k0({brushBottom:G},N),{},{width:Math.max(Y,0),height:Math.max(H,0)})}),TF=it(xa,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),RS=it(gf,yf,(e,t)=>({x:0,y:0,width:e,height:t})),EF=q.createContext(null),ba=()=>q.useContext(EF)!=null,vb=e=>e.brush,_b=it([vb,xa,kI],(e,t,i)=>({height:e.height,x:qt(e.x)?e.x:t.left,y:qt(e.y)?e.y:t.top+t.height+t.brushBottom-(i?.bottom||0),width:qt(e.width)?e.width:t.width})),bw={},ww={},Sw={},aM;function AF(){return aM||(aM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,a,{signal:d,edges:g}={}){let v,u=null;const M=g!=null&&g.includes("leading"),C=g==null||g.includes("trailing"),D=()=>{u!==null&&(i.apply(v,u),v=void 0,u=null)},I=()=>{C&&D(),H()};let N=null;const G=()=>{N!=null&&clearTimeout(N),N=setTimeout(()=>{N=null,I()},a)},Y=()=>{N!==null&&(clearTimeout(N),N=null)},H=()=>{Y(),v=void 0,u=null},$=()=>{D()},se=function(...he){if(d?.aborted)return;v=this,u=he;const fe=N==null;G(),M&&fe&&D()};return se.schedule=G,se.cancel=H,se.flush=$,d?.addEventListener("abort",H,{once:!0}),se}e.debounce=t})(Sw)),Sw}var oM;function MF(){return oM||(oM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AF();function i(a,d=0,g={}){typeof g!="object"&&(g={});const{leading:v=!1,trailing:u=!0,maxWait:M}=g,C=Array(2);v&&(C[0]="leading"),u&&(C[1]="trailing");let D,I=null;const N=t.debounce(function(...H){D=a.apply(this,H),I=null},d,{edges:C}),G=function(...H){return M!=null&&(I===null&&(I=Date.now()),Date.now()-I>=M)?(D=a.apply(this,H),I=Date.now(),N.cancel(),N.schedule(),D):(N.apply(this,H),D)},Y=()=>(N.flush(),D);return G.cancel=N.cancel,G.flush=Y,G}e.debounce=i})(ww)),ww}var sM;function PF(){return sM||(sM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MF();function i(a,d=0,g={}){const{leading:v=!0,trailing:u=!0}=g;return t.debounce(a,d,{leading:v,maxWait:d,trailing:u})}e.throttle=i})(bw)),bw}var Tw,lM;function CF(){return lM||(lM=1,Tw=PF().throttle),Tw}var DF=CF();const OF=Yc(DF);var _x=function(t,i){for(var a=arguments.length,d=new Array(a>2?a-2:0),g=2;g<a;g++)d[g-2]=arguments[g];if(typeof console<"u"&&console.warn&&(i===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(i===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var v=0;console.warn(i.replace(/%s/g,()=>d[v++]))}},Fc={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},RI=(e,t,i)=>{var{width:a=Fc.width,height:d=Fc.height,aspect:g,maxHeight:v}=i,u=rm(a)?e:Number(a),M=rm(d)?t:Number(d);return g&&g>0&&(u?M=u/g:M&&(u=M*g),v&&M!=null&&M>v&&(M=v)),{calculatedWidth:u,calculatedHeight:M}},IF={width:0,height:0,overflow:"visible"},zF={width:0,overflowX:"visible"},kF={height:0,overflowY:"visible"},RF={},LF=e=>{var{width:t,height:i}=e,a=rm(t),d=rm(i);return a&&d?IF:a?zF:d?kF:RF};function jF(e){var{width:t,height:i,aspect:a}=e,d=t,g=i;return d===void 0&&g===void 0?(d=Fc.width,g=Fc.height):d===void 0?d=a&&a>0?void 0:Fc.width:g===void 0&&(g=a&&a>0?void 0:Fc.height),{width:d,height:g}}function E2(){return E2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},E2.apply(null,arguments)}function uM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function cM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?uM(Object(i),!0).forEach(function(a){BF(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function BF(e,t,i){return(t=NF(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function NF(e){var t=FF(e,"string");return typeof t=="symbol"?t:t+""}function FF(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LI=q.createContext(Fc.initialDimension);function UF(e){return Gc(e.width)&&Gc(e.height)}function jI(e){var{children:t,width:i,height:a}=e,d=q.useMemo(()=>({width:i,height:a}),[i,a]);return UF(d)?q.createElement(LI.Provider,{value:d},t):null}var LS=()=>q.useContext(LI),VF=q.forwardRef((e,t)=>{var{aspect:i,initialDimension:a=Fc.initialDimension,width:d,height:g,minWidth:v=Fc.minWidth,minHeight:u,maxHeight:M,children:C,debounce:D=Fc.debounce,id:I,className:N,onResize:G,style:Y={}}=e,H=q.useRef(null),$=q.useRef();$.current=G,q.useImperativeHandle(t,()=>H.current);var[se,he]=q.useState({containerWidth:a.width,containerHeight:a.height}),fe=q.useCallback((Ue,et)=>{he(vt=>{var pt=Math.round(Ue),Fe=Math.round(et);return vt.containerWidth===pt&&vt.containerHeight===Fe?vt:{containerWidth:pt,containerHeight:Fe}})},[]);q.useEffect(()=>{if(H.current==null||typeof ResizeObserver>"u")return Cd;var Ue=Fe=>{var Ct,It=Fe[0];if(It!=null){var{width:jt,height:$e}=It.contentRect;fe(jt,$e),(Ct=$.current)===null||Ct===void 0||Ct.call($,jt,$e)}};D>0&&(Ue=OF(Ue,D,{trailing:!0,leading:!1}));var et=new ResizeObserver(Ue),{width:vt,height:pt}=H.current.getBoundingClientRect();return fe(vt,pt),et.observe(H.current),()=>{et.disconnect()}},[fe,D]);var{containerWidth:me,containerHeight:Ae}=se;_x(!i||i>0,"The aspect(%s) must be greater than zero.",i);var{calculatedWidth:ge,calculatedHeight:Se}=RI(me,Ae,{width:d,height:g,aspect:i,maxHeight:M});return _x(ge!=null&&ge>0||Se!=null&&Se>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,ge,Se,d,g,v,u,i),q.createElement("div",{id:I?"".concat(I):void 0,className:bn("recharts-responsive-container",N),style:cM(cM({},Y),{},{width:d,height:g,minWidth:v,minHeight:u,maxHeight:M}),ref:H},q.createElement("div",{style:LF({width:d,height:g})},q.createElement(jI,{width:ge,height:Se},C)))}),Ew=q.forwardRef((e,t)=>{var i=LS();if(Gc(i.width)&&Gc(i.height))return e.children;var{width:a,height:d}=jF({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:g,calculatedHeight:v}=RI(void 0,void 0,{width:a,height:d,aspect:e.aspect,maxHeight:e.maxHeight});return qt(g)&&qt(v)?q.createElement(jI,{width:g,height:v},e.children):q.createElement(VF,E2({},e,{width:a,height:d,ref:t}))});function jS(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var xb=()=>{var e,t=ba(),i=nr(TF),a=nr(_b),d=(e=nr(vb))===null||e===void 0?void 0:e.padding;return!t||!a||!d?i:{width:a.width-d.left-d.right,height:a.height-d.top-d.bottom,x:d.left,y:d.top}},qF={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},BI=()=>{var e;return(e=nr(xa))!==null&&e!==void 0?e:qF},NI=()=>nr(gf),FI=()=>nr(yf),an=e=>e.layout.layoutType,Dd=()=>nr(an),BS=()=>{var e=Dd();if(e==="horizontal"||e==="vertical")return e},UI=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},$F=()=>{var e=Dd();return e!==void 0},o_=e=>{var t=Ii(),i=ba(),{width:a,height:d}=e,g=LS(),v=a,u=d;return g&&(v=g.width>0?g.width:a,u=g.height>0?g.height:d),q.useEffect(()=>{!i&&Gc(v)&&Gc(u)&&t(Y4({width:v,height:u}))},[t,i,v,u]),null},VI=Symbol.for("immer-nothing"),hM=Symbol.for("immer-draftable"),tl=Symbol.for("immer-state");function Fu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Nv=Object.getPrototypeOf;function Kg(e){return!!e&&!!e[tl]}function im(e){return e?qI(e)||Array.isArray(e)||!!e[hM]||!!e.constructor?.[hM]||s_(e)||wb(e):!1}var GF=Object.prototype.constructor.toString(),fM=new WeakMap;function qI(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(i===Object)return!0;if(typeof i!="function")return!1;let a=fM.get(i);return a===void 0&&(a=Function.toString.call(i),fM.set(i,a)),a===GF}function xx(e,t,i=!0){bb(e)===0?(i?Reflect.ownKeys(e):Object.keys(e)).forEach(d=>{t(d,e[d],e)}):e.forEach((a,d)=>t(d,a,e))}function bb(e){const t=e[tl];return t?t.type_:Array.isArray(e)?1:s_(e)?2:wb(e)?3:0}function A2(e,t){return bb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $I(e,t,i){const a=bb(e);a===2?e.set(t,i):a===3?e.add(i):e[t]=i}function ZF(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function s_(e){return e instanceof Map}function wb(e){return e instanceof Set}function $p(e){return e.copy_||e.base_}function M2(e,t){if(s_(e))return new Map(e);if(wb(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=qI(e);if(t===!0||t==="class_only"&&!i){const a=Object.getOwnPropertyDescriptors(e);delete a[tl];let d=Reflect.ownKeys(a);for(let g=0;g<d.length;g++){const v=d[g],u=a[v];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[v]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[v]})}return Object.create(Nv(e),a)}else{const a=Nv(e);if(a!==null&&i)return{...e};const d=Object.create(a);return Object.assign(d,e)}}function NS(e,t=!1){return Sb(e)||Kg(e)||!im(e)||(bb(e)>1&&Object.defineProperties(e,{set:R0,add:R0,clear:R0,delete:R0}),Object.freeze(e),t&&Object.values(e).forEach(i=>NS(i,!0))),e}function HF(){Fu(2)}var R0={value:HF};function Sb(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var WF={};function am(e){const t=WF[e];return t||Fu(0,e),t}var Fv;function GI(){return Fv}function YF(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dM(e,t){t&&(am("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function P2(e){C2(e),e.drafts_.forEach(XF),e.drafts_=null}function C2(e){e===Fv&&(Fv=e.parent_)}function pM(e){return Fv=YF(Fv,e)}function XF(e){const t=e[tl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function mM(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[tl].modified_&&(P2(t),Fu(4)),im(e)&&(e=bx(t,e),t.parent_||wx(t,e)),t.patches_&&am("Patches").generateReplacementPatches_(i[tl].base_,e,t.patches_,t.inversePatches_)):e=bx(t,i,[]),P2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==VI?e:void 0}function bx(e,t,i){if(Sb(t))return t;const a=e.immer_.shouldUseStrictIteration(),d=t[tl];if(!d)return xx(t,(g,v)=>gM(e,d,t,g,v,i),a),t;if(d.scope_!==e)return t;if(!d.modified_)return wx(e,d.base_,!0),d.base_;if(!d.finalized_){d.finalized_=!0,d.scope_.unfinalizedDrafts_--;const g=d.copy_;let v=g,u=!1;d.type_===3&&(v=new Set(g),g.clear(),u=!0),xx(v,(M,C)=>gM(e,d,g,M,C,i,u),a),wx(e,g,!1),i&&e.patches_&&am("Patches").generatePatches_(d,i,e.patches_,e.inversePatches_)}return d.copy_}function gM(e,t,i,a,d,g,v){if(d==null||typeof d!="object"&&!v)return;const u=Sb(d);if(!(u&&!v)){if(Kg(d)){const M=g&&t&&t.type_!==3&&!A2(t.assigned_,a)?g.concat(a):void 0,C=bx(e,d,M);if($I(i,a,C),Kg(C))e.canAutoFreeze_=!1;else return}else v&&i.add(d);if(im(d)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===d&&u)return;bx(e,d),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(s_(i)?i.has(a):Object.prototype.propertyIsEnumerable.call(i,a))&&wx(e,d)}}}function wx(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&NS(t,i)}function KF(e,t){const i=Array.isArray(e),a={type_:i?1:0,scope_:t?t.scope_:GI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let d=a,g=FS;i&&(d=[a],g=Uv);const{revoke:v,proxy:u}=Proxy.revocable(d,g);return a.draft_=u,a.revoke_=v,u}var FS={get(e,t){if(t===tl)return e;const i=$p(e);if(!A2(i,t))return QF(e,i,t);const a=i[t];return e.finalized_||!im(a)?a:a===Aw(e.base_,t)?(Mw(e),e.copy_[t]=O2(a,e)):a},has(e,t){return t in $p(e)},ownKeys(e){return Reflect.ownKeys($p(e))},set(e,t,i){const a=ZI($p(e),t);if(a?.set)return a.set.call(e.draft_,i),!0;if(!e.modified_){const d=Aw($p(e),t),g=d?.[tl];if(g&&g.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(ZF(i,d)&&(i!==void 0||A2(e.base_,t)))return!0;Mw(e),D2(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Aw(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Mw(e),D2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=$p(e),a=Reflect.getOwnPropertyDescriptor(i,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:i[t]}},defineProperty(){Fu(11)},getPrototypeOf(e){return Nv(e.base_)},setPrototypeOf(){Fu(12)}},Uv={};xx(FS,(e,t)=>{Uv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Uv.deleteProperty=function(e,t){return Uv.set.call(this,e,t,void 0)};Uv.set=function(e,t,i){return FS.set.call(this,e[0],t,i,e[0])};function Aw(e,t){const i=e[tl];return(i?$p(i):e)[t]}function QF(e,t,i){const a=ZI(t,i);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function ZI(e,t){if(!(t in e))return;let i=Nv(e);for(;i;){const a=Object.getOwnPropertyDescriptor(i,t);if(a)return a;i=Nv(i)}}function D2(e){e.modified_||(e.modified_=!0,e.parent_&&D2(e.parent_))}function Mw(e){e.copy_||(e.copy_=M2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var JF=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,i,a)=>{if(typeof t=="function"&&typeof i!="function"){const g=i;i=t;const v=this;return function(M=g,...C){return v.produce(M,D=>i.call(this,D,...C))}}typeof i!="function"&&Fu(6),a!==void 0&&typeof a!="function"&&Fu(7);let d;if(im(t)){const g=pM(this),v=O2(t,void 0);let u=!0;try{d=i(v),u=!1}finally{u?P2(g):C2(g)}return dM(g,a),mM(d,g)}else if(!t||typeof t!="object"){if(d=i(t),d===void 0&&(d=t),d===VI&&(d=void 0),this.autoFreeze_&&NS(d,!0),a){const g=[],v=[];am("Patches").generateReplacementPatches_(t,d,g,v),a(g,v)}return d}else Fu(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(v,...u)=>this.produceWithPatches(v,M=>t(M,...u));let a,d;return[this.produce(t,i,(v,u)=>{a=v,d=u}),a,d]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){im(e)||Fu(8),Kg(e)&&(e=e6(e));const t=pM(this),i=O2(e,void 0);return i[tl].isManual_=!0,C2(t),i}finishDraft(e,t){const i=e&&e[tl];(!i||!i.isManual_)&&Fu(9);const{scope_:a}=i;return dM(a,t),mM(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const d=t[i];if(d.path.length===0&&d.op==="replace"){e=d.value;break}}i>-1&&(t=t.slice(i+1));const a=am("Patches").applyPatches_;return Kg(e)?a(e,t):this.produce(e,d=>a(d,t))}};function O2(e,t){const i=s_(e)?am("MapSet").proxyMap_(e,t):wb(e)?am("MapSet").proxySet_(e,t):KF(e,t);return(t?t.scope_:GI()).drafts_.push(i),i}function e6(e){return Kg(e)||Fu(10,e),HI(e)}function HI(e){if(!im(e)||Sb(e))return e;const t=e[tl];let i,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=M2(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else i=M2(e,!0);return xx(i,(d,g)=>{$I(i,d,HI(g))},a),t&&(t.finalized_=!1),i}var t6=new JF;t6.produce;var r6={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},WI=ws({name:"legend",initialState:r6,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:ni()},replaceLegendPayload:{reducer(e,t){var{prev:i,next:a}=t.payload,d=Vu(e).payload.indexOf(i);d>-1&&(e.payload[d]=a)},prepare:ni()},removeLegendPayload:{reducer(e,t){var i=Vu(e).payload.indexOf(t.payload);i>-1&&e.payload.splice(i,1)},prepare:ni()}}}),{setLegendSize:KK,setLegendSettings:QK,addLegendPayload:n6,replaceLegendPayload:i6,removeLegendPayload:a6}=WI.actions,o6=WI.reducer;function I2(){return I2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},I2.apply(null,arguments)}function yM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function yv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yM(Object(i),!0).forEach(function(a){s6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function s6(e,t,i){return(t=l6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l6(e){var t=u6(e,"string");return typeof t=="symbol"?t:t+""}function u6(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c6(e){return Array.isArray(e)&&$c(e[0])&&$c(e[1])?e.join(" ~ "):e}var Rg={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},h6=e=>{var{separator:t=Rg.separator,contentStyle:i,itemStyle:a,labelStyle:d=Rg.labelStyle,payload:g,formatter:v,itemSorter:u,wrapperClassName:M,labelClassName:C,label:D,labelFormatter:I,accessibilityLayer:N=Rg.accessibilityLayer}=e,G=()=>{if(g&&g.length){var Ae={padding:0,margin:0},ge=(u?ob(g,u):g).map((Se,Ue)=>{if(Se.type==="none")return null;var et=Se.formatter||v||c6,{value:vt,name:pt}=Se,Fe=vt,Ct=pt;if(et){var It=et(vt,pt,Se,Ue,g);if(Array.isArray(It))[Fe,Ct]=It;else if(It!=null)Fe=It;else return null}var jt=yv(yv({},Rg.itemStyle),{},{color:Se.color||Rg.itemStyle.color},a);return q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Ue),style:jt},$c(Ct)?q.createElement("span",{className:"recharts-tooltip-item-name"},Ct):null,$c(Ct)?q.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,q.createElement("span",{className:"recharts-tooltip-item-value"},Fe),q.createElement("span",{className:"recharts-tooltip-item-unit"},Se.unit||""))});return q.createElement("ul",{className:"recharts-tooltip-item-list",style:Ae},ge)}return null},Y=yv(yv({},Rg.contentStyle),i),H=yv({margin:0},d),$=!ai(D),se=$?D:"",he=bn("recharts-default-tooltip",M),fe=bn("recharts-tooltip-label",C);$&&I&&g!==void 0&&g!==null&&(se=I(D,g));var me=N?{role:"status","aria-live":"assertive"}:{};return q.createElement("div",I2({className:he,style:Y},me),q.createElement("p",{className:fe,style:H},q.isValidElement(se)?se:"".concat(se)),G())},vv="recharts-tooltip-wrapper",f6={visibility:"hidden"};function d6(e){var{coordinate:t,translateX:i,translateY:a}=e;return bn(vv,{["".concat(vv,"-right")]:qt(i)&&t&&qt(t.x)&&i>=t.x,["".concat(vv,"-left")]:qt(i)&&t&&qt(t.x)&&i<t.x,["".concat(vv,"-bottom")]:qt(a)&&t&&qt(t.y)&&a>=t.y,["".concat(vv,"-top")]:qt(a)&&t&&qt(t.y)&&a<t.y})}function vM(e){var{allowEscapeViewBox:t,coordinate:i,key:a,offset:d,position:g,reverseDirection:v,tooltipDimension:u,viewBox:M,viewBoxDimension:C}=e;if(g&&qt(g[a]))return g[a];var D=i[a]-u-(d>0?d:0),I=i[a]+d;if(t[a])return v[a]?D:I;var N=M[a];if(N==null)return 0;if(v[a]){var G=D,Y=N;return G<Y?Math.max(I,N):Math.max(D,N)}if(C==null)return 0;var H=I+u,$=N+C;return H>$?Math.max(D,N):Math.max(I,N)}function p6(e){var{translateX:t,translateY:i,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function m6(e){var{allowEscapeViewBox:t,coordinate:i,offsetTop:a,offsetLeft:d,position:g,reverseDirection:v,tooltipBox:u,useTranslate3d:M,viewBox:C}=e,D,I,N;return u.height>0&&u.width>0&&i?(I=vM({allowEscapeViewBox:t,coordinate:i,key:"x",offset:d,position:g,reverseDirection:v,tooltipDimension:u.width,viewBox:C,viewBoxDimension:C.width}),N=vM({allowEscapeViewBox:t,coordinate:i,key:"y",offset:a,position:g,reverseDirection:v,tooltipDimension:u.height,viewBox:C,viewBoxDimension:C.height}),D=p6({translateX:I,translateY:N,useTranslate3d:M})):D=f6,{cssProperties:D,cssClasses:d6({translateX:I,translateY:N,coordinate:i})}}function _M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function L0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?_M(Object(i),!0).forEach(function(a){z2(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_M(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function z2(e,t,i){return(t=g6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g6(e){var t=y6(e,"string");return typeof t=="symbol"?t:t+""}function y6(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class v6 extends q.PureComponent{constructor(){super(...arguments),z2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),z2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var i,a,d,g;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&i!==void 0?i:0,y:(d=(g=this.props.coordinate)===null||g===void 0?void 0:g.y)!==null&&d!==void 0?d:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,i;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:i,animationDuration:a,animationEasing:d,children:g,coordinate:v,hasPayload:u,isAnimationActive:M,offset:C,position:D,reverseDirection:I,useTranslate3d:N,viewBox:G,wrapperStyle:Y,lastBoundingBox:H,innerRef:$,hasPortalFromProps:se}=this.props,he=typeof C=="number"?C:C.x,fe=typeof C=="number"?C:C.y,{cssClasses:me,cssProperties:Ae}=m6({allowEscapeViewBox:i,coordinate:v,offsetLeft:he,offsetTop:fe,position:D,reverseDirection:I,tooltipBox:{height:H.height,width:H.width},useTranslate3d:N,viewBox:G}),ge=se?{}:L0(L0({transition:M&&t?"transform ".concat(a,"ms ").concat(d):void 0},Ae),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),Se=L0(L0({},ge),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},Y);return q.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:me,style:Se,ref:$},g)}}var YI=()=>{var e;return(e=nr(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function k2(){return k2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},k2.apply(null,arguments)}function xM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function bM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?xM(Object(i),!0).forEach(function(a){_6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function _6(e,t,i){return(t=x6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function x6(e){var t=b6(e,"string");return typeof t=="symbol"?t:t+""}function b6(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wM={curveBasisClosed:bB,curveBasisOpen:wB,curveBasis:xB,curveBumpX:oB,curveBumpY:sB,curveLinearClosed:SB,curveLinear:ib,curveMonotoneX:TB,curveMonotoneY:EB,curveNatural:AB,curveStep:MB,curveStepAfter:CB,curveStepBefore:PB},Sx=e=>Dr(e.x)&&Dr(e.y),SM=e=>e.base!=null&&Sx(e.base)&&Sx(e),_v=e=>e.x,xv=e=>e.y,w6=(e,t)=>{if(typeof e=="function")return e;var i="curve".concat(r_(e));if((i==="curveMonotone"||i==="curveBump")&&t){var a=wM["".concat(i).concat(t==="vertical"?"Y":"X")];if(a)return a}return wM[i]||ib},TM={connectNulls:!1,type:"linear"},S6=e=>{var{type:t=TM.type,points:i=[],baseLine:a,layout:d,connectNulls:g=TM.connectNulls}=e,v=w6(t,d),u=g?i.filter(Sx):i;if(Array.isArray(a)){var M,C=i.map((Y,H)=>bM(bM({},Y),{},{base:a[H]}));d==="vertical"?M=P0().y(xv).x1(_v).x0(Y=>Y.base.x):M=P0().x(_v).y1(xv).y0(Y=>Y.base.y);var D=M.defined(SM).curve(v),I=g?C.filter(SM):C;return D(I)}var N;d==="vertical"&&qt(a)?N=P0().y(xv).x1(_v).x0(a):qt(a)?N=P0().x(_v).y1(xv).y0(a):N=AO().x(_v).y(xv);var G=N.defined(Sx).curve(v);return G(u)},Dv=e=>{var{className:t,points:i,path:a,pathRef:d}=e,g=Dd();if((!i||!i.length)&&!a)return null;var v={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||g,connectNulls:e.connectNulls},u=i&&i.length?S6(v):a;return q.createElement("path",k2({},el(e),TS(e),{className:bn("recharts-curve",t),d:u===null?void 0:u,ref:d}))},T6=["x","y","top","left","width","height","className"];function R2(){return R2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},R2.apply(null,arguments)}function EM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function E6(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?EM(Object(i),!0).forEach(function(a){A6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):EM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function A6(e,t,i){return(t=M6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function M6(e){var t=P6(e,"string");return typeof t=="symbol"?t:t+""}function P6(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C6(e,t){if(e==null)return{};var i,a,d=D6(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function D6(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var O6=(e,t,i,a,d,g)=>"M".concat(e,",").concat(d,"v").concat(a,"M").concat(g,",").concat(t,"h").concat(i),I6=e=>{var{x:t=0,y:i=0,top:a=0,left:d=0,width:g=0,height:v=0,className:u}=e,M=C6(e,T6),C=E6({x:t,y:i,top:a,left:d,width:g,height:v},M);return!qt(t)||!qt(i)||!qt(g)||!qt(v)||!qt(a)||!qt(d)?null:q.createElement("path",R2({},bo(C),{className:bn("recharts-cross",u),d:O6(t,i,g,v,a,d)}))};function z6(e,t,i,a){var d=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-d:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-d,width:e==="horizontal"?a:i.width-1,height:e==="horizontal"?i.height-1:a}}function AM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function MM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AM(Object(i),!0).forEach(function(a){k6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function k6(e,t,i){return(t=R6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function R6(e){var t=L6(e,"string");return typeof t=="symbol"?t:t+""}function L6(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j6=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),XI=(e,t,i)=>e.map(a=>"".concat(j6(a)," ").concat(t,"ms ").concat(i)).join(","),B6=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((i,a)=>i.filter(d=>a.includes(d))),Vv=(e,t)=>Object.keys(t).reduce((i,a)=>MM(MM({},i),{},{[a]:e(a,t[a])}),{});function PM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Ki(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?PM(Object(i),!0).forEach(function(a){N6(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):PM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function N6(e,t,i){return(t=F6(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function F6(e){var t=U6(e,"string");return typeof t=="symbol"?t:t+""}function U6(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tx=(e,t,i)=>e+(t-e)*i,L2=e=>{var{from:t,to:i}=e;return t!==i},KI=(e,t,i)=>{var a=Vv((d,g)=>{if(L2(g)){var[v,u]=e(g.from,g.to,g.velocity);return Ki(Ki({},g),{},{from:v,velocity:u})}return g},t);return i<1?Vv((d,g)=>L2(g)&&a[d]!=null?Ki(Ki({},g),{},{velocity:Tx(g.velocity,a[d].velocity,i),from:Tx(g.from,a[d].from,i)}):g,t):KI(e,a,i-1)};function V6(e,t,i,a,d,g){var v,u=a.reduce((N,G)=>Ki(Ki({},N),{},{[G]:{from:e[G],velocity:0,to:t[G]}}),{}),M=()=>Vv((N,G)=>G.from,u),C=()=>!Object.values(u).filter(L2).length,D=null,I=N=>{v||(v=N);var G=N-v,Y=G/i.dt;u=KI(i,u,Y),d(Ki(Ki(Ki({},e),t),M())),v=N,C()||(D=g.setTimeout(I))};return()=>(D=g.setTimeout(I),()=>{var N;(N=D)===null||N===void 0||N()})}function q6(e,t,i,a,d,g,v){var u=null,M=d.reduce((I,N)=>{var G=e[N],Y=t[N];return G==null||Y==null?I:Ki(Ki({},I),{},{[N]:[G,Y]})},{}),C,D=I=>{C||(C=I);var N=(I-C)/a,G=Vv((H,$)=>Tx(...$,i(N)),M);if(g(Ki(Ki(Ki({},e),t),G)),N<1)u=v.setTimeout(D);else{var Y=Vv((H,$)=>Tx(...$,i(1)),M);g(Ki(Ki(Ki({},e),t),Y))}};return()=>(u=v.setTimeout(D),()=>{var I;(I=u)===null||I===void 0||I()})}const $6=(e,t,i,a,d,g)=>{var v=B6(e,t);return i==null?()=>(d(Ki(Ki({},e),t)),()=>{}):i.isStepper===!0?V6(e,t,i,v,d,g):q6(e,t,i,a,v,d,g)};var Ex=1e-4,QI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],JI=(e,t)=>e.map((i,a)=>i*t**a).reduce((i,a)=>i+a),CM=(e,t)=>i=>{var a=QI(e,t);return JI(a,i)},G6=(e,t)=>i=>{var a=QI(e,t),d=[...a.map((g,v)=>g*v).slice(1),0];return JI(d,i)},Z6=e=>{var t,i=e.split("(");if(i.length!==2||i[0]!=="cubic-bezier")return null;var a=(t=i[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var d=a.map(g=>parseFloat(g));return[d[0],d[1],d[2],d[3]]},H6=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(i.length===1)switch(i[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var d=Z6(i[0]);if(d)return d}}return i.length===4?i:[0,0,1,1]},W6=(e,t,i,a)=>{var d=CM(e,i),g=CM(t,a),v=G6(e,i),u=C=>C>1?1:C<0?0:C,M=C=>{for(var D=C>1?1:C,I=D,N=0;N<8;++N){var G=d(I)-D,Y=v(I);if(Math.abs(G-D)<Ex||Y<Ex)return g(I);I=u(I-G/Y)}return g(I)};return M.isStepper=!1,M},DM=function(){return W6(...H6(...arguments))},Y6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:i=100,damping:a=8,dt:d=17}=t,g=(v,u,M)=>{var C=-(v-u)*i,D=M*a,I=M+(C-D)*d/1e3,N=M*d/1e3+v;return Math.abs(N-u)<Ex&&Math.abs(I)<Ex?[u,0]:[N,I]};return g.isStepper=!0,g.dt=d,g},X6=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return DM(e);case"spring":return Y6();default:if(e.split("(")[0]==="cubic-bezier")return DM(e)}return typeof e=="function"?e:null};function K6(e){var t,i=()=>null,a=!1,d=null,g=v=>{if(!a){if(Array.isArray(v)){if(!v.length)return;var u=v,[M,...C]=u;if(typeof M=="number"){d=e.setTimeout(g.bind(null,C),M);return}g(M),d=e.setTimeout(g.bind(null,C));return}typeof v=="string"&&(t=v,i(t)),typeof v=="object"&&(t=v,i(t)),typeof v=="function"&&v()}};return{stop:()=>{a=!0},start:v=>{a=!1,d&&(d(),d=null),g(v)},subscribe:v=>(i=v,()=>{i=()=>null}),getTimeoutController:()=>e}}class Q6{setTimeout(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),d=null,g=v=>{v-a>=i?t(v):typeof requestAnimationFrame=="function"&&(d=requestAnimationFrame(g))};return d=requestAnimationFrame(g),()=>{d!=null&&cancelAnimationFrame(d)}}}function J6(){return K6(new Q6)}var e8=q.createContext(J6);function t8(e,t){var i=q.useContext(e8);return q.useMemo(()=>t??i(e),[e,t,i])}var r8=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),l_={isSsr:r8()},n8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},OM={t:0},Pw={t:1};function u_(e){var t=Ka(e,n8),{isActive:i,canBegin:a,duration:d,easing:g,begin:v,onAnimationEnd:u,onAnimationStart:M,children:C}=t,D=i==="auto"?!l_.isSsr:i,I=t8(t.animationId,t.animationManager),[N,G]=q.useState(D?OM:Pw),Y=q.useRef(null);return q.useEffect(()=>{D||G(Pw)},[D]),q.useEffect(()=>{if(!D||!a)return Cd;var H=$6(OM,Pw,X6(g),d,G,I.getTimeoutController()),$=()=>{Y.current=H()};return I.start([M,v,$,d,u]),()=>{I.stop(),Y.current&&Y.current(),u()}},[D,a,d,g,v,M,u,I]),C(N.t)}function c_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",i=q.useRef(Rv(t)),a=q.useRef(e);return a.current!==e&&(i.current=Rv(t),a.current=e),i.current}var i8=["radius"],a8=["radius"],IM,zM,kM,RM,LM,jM,BM,NM,FM,UM;function VM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function qM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?VM(Object(i),!0).forEach(function(a){o8(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):VM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function o8(e,t,i){return(t=s8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s8(e){var t=l8(e,"string");return typeof t=="symbol"?t:t+""}function l8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ax.apply(null,arguments)}function $M(e,t){if(e==null)return{};var i,a,d=u8(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function u8(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function Lc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var GM=(e,t,i,a,d)=>{var g=Td(i),v=Td(a),u=Math.min(Math.abs(g)/2,Math.abs(v)/2),M=v>=0?1:-1,C=g>=0?1:-1,D=v>=0&&g>=0||v<0&&g<0?1:0,I;if(u>0&&Array.isArray(d)){for(var N=[0,0,0,0],G=0,Y=4;G<Y;G++){var H,$=(H=d[G])!==null&&H!==void 0?H:0;N[G]=$>u?u:$}I=Ei(IM||(IM=Lc(["M",",",""])),e,t+M*N[0]),N[0]>0&&(I+=Ei(zM||(zM=Lc(["A ",",",",0,0,",",",",",""])),N[0],N[0],D,e+C*N[0],t)),I+=Ei(kM||(kM=Lc(["L ",",",""])),e+i-C*N[1],t),N[1]>0&&(I+=Ei(RM||(RM=Lc(["A ",",",",0,0,",`,
        `,",",""])),N[1],N[1],D,e+i,t+M*N[1])),I+=Ei(LM||(LM=Lc(["L ",",",""])),e+i,t+a-M*N[2]),N[2]>0&&(I+=Ei(jM||(jM=Lc(["A ",",",",0,0,",`,
        `,",",""])),N[2],N[2],D,e+i-C*N[2],t+a)),I+=Ei(BM||(BM=Lc(["L ",",",""])),e+C*N[3],t+a),N[3]>0&&(I+=Ei(NM||(NM=Lc(["A ",",",",0,0,",`,
        `,",",""])),N[3],N[3],D,e,t+a-M*N[3])),I+="Z"}else if(u>0&&d===+d&&d>0){var se=Math.min(u,d);I=Ei(FM||(FM=Lc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+M*se,se,se,D,e+C*se,t,e+i-C*se,t,se,se,D,e+i,t+M*se,e+i,t+a-M*se,se,se,D,e+i-C*se,t+a,e+C*se,t+a,se,se,D,e,t+a-M*se)}else I=Ei(UM||(UM=Lc(["M ",","," h "," v "," h "," Z"])),e,t,i,a,-i);return I},ZM={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ez=e=>{var t=Ka(e,ZM),i=q.useRef(null),[a,d]=q.useState(-1);q.useEffect(()=>{if(i.current&&i.current.getTotalLength)try{var ct=i.current.getTotalLength();ct&&d(ct)}catch{}},[]);var{x:g,y:v,width:u,height:M,radius:C,className:D}=t,{animationEasing:I,animationDuration:N,animationBegin:G,isAnimationActive:Y,isUpdateAnimationActive:H}=t,$=q.useRef(u),se=q.useRef(M),he=q.useRef(g),fe=q.useRef(v),me=q.useMemo(()=>({x:g,y:v,width:u,height:M,radius:C}),[g,v,u,M,C]),Ae=c_(me,"rectangle-");if(g!==+g||v!==+v||u!==+u||M!==+M||u===0||M===0)return null;var ge=bn("recharts-rectangle",D);if(!H){var Se=bo(t),{radius:Ue}=Se,et=$M(Se,i8);return q.createElement("path",Ax({},et,{x:Td(g),y:Td(v),width:Td(u),height:Td(M),radius:typeof C=="number"?C:void 0,className:ge,d:GM(g,v,u,M,C)}))}var vt=$.current,pt=se.current,Fe=he.current,Ct=fe.current,It="0px ".concat(a===-1?1:a,"px"),jt="".concat(a,"px 0px"),$e=XI(["strokeDasharray"],N,typeof I=="string"?I:ZM.animationEasing);return q.createElement(u_,{animationId:Ae,key:Ae,canBegin:a>0,duration:N,easing:I,isActive:H,begin:G},ct=>{var Et=Pn(vt,u,ct),_t=Pn(pt,M,ct),Ut=Pn(Fe,g,ct),ze=Pn(Ct,v,ct);i.current&&($.current=Et,se.current=_t,he.current=Ut,fe.current=ze);var at;Y?ct>0?at={transition:$e,strokeDasharray:jt}:at={strokeDasharray:It}:at={strokeDasharray:jt};var Pt=bo(t),{radius:zt}=Pt,$t=$M(Pt,a8);return q.createElement("path",Ax({},$t,{radius:typeof C=="number"?C:void 0,className:ge,d:GM(Ut,ze,Et,_t,C),ref:i,style:qM(qM({},at),t.style)}))})};function HM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function WM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?HM(Object(i),!0).forEach(function(a){c8(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HM(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function c8(e,t,i){return(t=h8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h8(e){var t=f8(e,"string");return typeof t=="symbol"?t:t+""}function f8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mx=Math.PI/180,d8=e=>e*180/Math.PI,Xa=(e,t,i,a)=>({x:e+Math.cos(-Mx*a)*i,y:t+Math.sin(-Mx*a)*i}),p8=function(t,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(i-(a.top||0)-(a.bottom||0)))/2},m8=(e,t)=>{var{x:i,y:a}=e,{x:d,y:g}=t;return Math.sqrt((i-d)**2+(a-g)**2)},g8=(e,t)=>{var{x:i,y:a}=e,{cx:d,cy:g}=t,v=m8({x:i,y:a},{x:d,y:g});if(v<=0)return{radius:v,angle:0};var u=(i-d)/v,M=Math.acos(u);return a>g&&(M=2*Math.PI-M),{radius:v,angle:d8(M),angleInRadian:M}},y8=e=>{var{startAngle:t,endAngle:i}=e,a=Math.floor(t/360),d=Math.floor(i/360),g=Math.min(a,d);return{startAngle:t-g*360,endAngle:i-g*360}},v8=(e,t)=>{var{startAngle:i,endAngle:a}=t,d=Math.floor(i/360),g=Math.floor(a/360),v=Math.min(d,g);return e+v*360},_8=(e,t)=>{var{chartX:i,chartY:a}=e,{radius:d,angle:g}=g8({x:i,y:a},t),{innerRadius:v,outerRadius:u}=t;if(d<v||d>u||d===0)return null;var{startAngle:M,endAngle:C}=y8(t),D=g,I;if(M<=C){for(;D>C;)D-=360;for(;D<M;)D+=360;I=D>=M&&D<=C}else{for(;D>M;)D-=360;for(;D<C;)D+=360;I=D>=C&&D<=M}return I?WM(WM({},t),{},{radius:d,angle:v8(D,t)}):null};function tz(e){var{cx:t,cy:i,radius:a,startAngle:d,endAngle:g}=e,v=Xa(t,i,a,d),u=Xa(t,i,a,g);return{points:[v,u],cx:t,cy:i,radius:a,startAngle:d,endAngle:g}}var YM,XM,KM,QM,JM,eP,tP;function j2(){return j2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},j2.apply(null,arguments)}function Zp(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x8=(e,t)=>{var i=_s(t-e),a=Math.min(Math.abs(t-e),359.999);return i*a},j0=e=>{var{cx:t,cy:i,radius:a,angle:d,sign:g,isExternal:v,cornerRadius:u,cornerIsExternal:M}=e,C=u*(v?1:-1)+a,D=Math.asin(u/C)/Mx,I=M?d:d+g*D,N=Xa(t,i,C,I),G=Xa(t,i,a,I),Y=M?d-g*D:d,H=Xa(t,i,C*Math.cos(D*Mx),Y);return{center:N,circleTangency:G,lineTangency:H,theta:D}},rz=e=>{var{cx:t,cy:i,innerRadius:a,outerRadius:d,startAngle:g,endAngle:v}=e,u=x8(g,v),M=g+u,C=Xa(t,i,d,g),D=Xa(t,i,d,M),I=Ei(YM||(YM=Zp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),C.x,C.y,d,d,+(Math.abs(u)>180),+(g>M),D.x,D.y);if(a>0){var N=Xa(t,i,a,g),G=Xa(t,i,a,M);I+=Ei(XM||(XM=Zp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),G.x,G.y,a,a,+(Math.abs(u)>180),+(g<=M),N.x,N.y)}else I+=Ei(KM||(KM=Zp(["L ",","," Z"])),t,i);return I},b8=e=>{var{cx:t,cy:i,innerRadius:a,outerRadius:d,cornerRadius:g,forceCornerRadius:v,cornerIsExternal:u,startAngle:M,endAngle:C}=e,D=_s(C-M),{circleTangency:I,lineTangency:N,theta:G}=j0({cx:t,cy:i,radius:d,angle:M,sign:D,cornerRadius:g,cornerIsExternal:u}),{circleTangency:Y,lineTangency:H,theta:$}=j0({cx:t,cy:i,radius:d,angle:C,sign:-D,cornerRadius:g,cornerIsExternal:u}),se=u?Math.abs(M-C):Math.abs(M-C)-G-$;if(se<0)return v?Ei(QM||(QM=Zp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),N.x,N.y,g,g,g*2,g,g,-g*2):rz({cx:t,cy:i,innerRadius:a,outerRadius:d,startAngle:M,endAngle:C});var he=Ei(JM||(JM=Zp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),N.x,N.y,g,g,+(D<0),I.x,I.y,d,d,+(se>180),+(D<0),Y.x,Y.y,g,g,+(D<0),H.x,H.y);if(a>0){var{circleTangency:fe,lineTangency:me,theta:Ae}=j0({cx:t,cy:i,radius:a,angle:M,sign:D,isExternal:!0,cornerRadius:g,cornerIsExternal:u}),{circleTangency:ge,lineTangency:Se,theta:Ue}=j0({cx:t,cy:i,radius:a,angle:C,sign:-D,isExternal:!0,cornerRadius:g,cornerIsExternal:u}),et=u?Math.abs(M-C):Math.abs(M-C)-Ae-Ue;if(et<0&&g===0)return"".concat(he,"L").concat(t,",").concat(i,"Z");he+=Ei(eP||(eP=Zp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),Se.x,Se.y,g,g,+(D<0),ge.x,ge.y,a,a,+(et>180),+(D>0),fe.x,fe.y,g,g,+(D<0),me.x,me.y)}else he+=Ei(tP||(tP=Zp(["L",",","Z"])),t,i);return he},w8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nz=e=>{var t=Ka(e,w8),{cx:i,cy:a,innerRadius:d,outerRadius:g,cornerRadius:v,forceCornerRadius:u,cornerIsExternal:M,startAngle:C,endAngle:D,className:I}=t;if(g<d||C===D)return null;var N=bn("recharts-sector",I),G=g-d,Y=$u(v,G,0,!0),H;return Y>0&&Math.abs(C-D)<360?H=b8({cx:i,cy:a,innerRadius:d,outerRadius:g,cornerRadius:Math.min(Y,G/2),forceCornerRadius:u,cornerIsExternal:M,startAngle:C,endAngle:D}):H=rz({cx:i,cy:a,innerRadius:d,outerRadius:g,startAngle:C,endAngle:D}),q.createElement("path",j2({},bo(t),{className:N,d:H}))};function S8(e,t,i){if(e==="horizontal")return[{x:t.x,y:i.top},{x:t.x,y:i.top+i.height}];if(e==="vertical")return[{x:i.left,y:t.y},{x:i.left+i.width,y:t.y}];if(VO(t)){if(e==="centric"){var{cx:a,cy:d,innerRadius:g,outerRadius:v,angle:u}=t,M=Xa(a,d,g,u),C=Xa(a,d,v,u);return[{x:M.x,y:M.y},{x:C.x,y:C.y}]}return tz(t)}}var Cw={},Dw={},Ow={},rP;function T8(){return rP||(rP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QO();function i(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=i})(Ow)),Ow}var nP;function E8(){return nP||(nP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T8();function i(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=i})(Dw)),Dw}var iP;function A8(){return iP||(iP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JO(),i=E8();function a(d,g,v){v&&typeof v!="number"&&t.isIterateeCall(d,g,v)&&(g=v=void 0),d=i.toFinite(d),g===void 0?(g=d,d=0):g=i.toFinite(g),v=v===void 0?d<g?1:-1:i.toFinite(v);const u=Math.max(Math.ceil((g-d)/(v||1)),0),M=new Array(u);for(let C=0;C<u;C++)M[C]=d,d+=v;return M}e.range=a})(Cw)),Cw}var Iw,aP;function M8(){return aP||(aP=1,Iw=A8().range),Iw}var P8=M8();const iz=Yc(P8);function Ed(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function C8(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function US(e){let t,i,a;e.length!==2?(t=Ed,i=(u,M)=>Ed(e(u),M),a=(u,M)=>e(u)-M):(t=e===Ed||e===C8?e:D8,i=e,a=e);function d(u,M,C=0,D=u.length){if(C<D){if(t(M,M)!==0)return D;do{const I=C+D>>>1;i(u[I],M)<0?C=I+1:D=I}while(C<D)}return C}function g(u,M,C=0,D=u.length){if(C<D){if(t(M,M)!==0)return D;do{const I=C+D>>>1;i(u[I],M)<=0?C=I+1:D=I}while(C<D)}return C}function v(u,M,C=0,D=u.length){const I=d(u,M,C,D-1);return I>C&&a(u[I-1],M)>-a(u[I],M)?I-1:I}return{left:d,center:v,right:g}}function D8(){return 0}function az(e){return e===null?NaN:+e}function*O8(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const I8=US(Ed),h_=I8.right;US(az).center;class oP extends Map{constructor(t,i=R8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[a,d]of t)this.set(a,d)}get(t){return super.get(sP(this,t))}has(t){return super.has(sP(this,t))}set(t,i){return super.set(z8(this,t),i)}delete(t){return super.delete(k8(this,t))}}function sP({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):i}function z8({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function k8({_intern:e,_key:t},i){const a=t(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function R8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function L8(e=Ed){if(e===Ed)return oz;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const a=e(t,i);return a||a===0?a:(e(i,i)===0)-(e(t,t)===0)}}function oz(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const j8=Math.sqrt(50),B8=Math.sqrt(10),N8=Math.sqrt(2);function Px(e,t,i){const a=(t-e)/Math.max(0,i),d=Math.floor(Math.log10(a)),g=a/Math.pow(10,d),v=g>=j8?10:g>=B8?5:g>=N8?2:1;let u,M,C;return d<0?(C=Math.pow(10,-d)/v,u=Math.round(e*C),M=Math.round(t*C),u/C<e&&++u,M/C>t&&--M,C=-C):(C=Math.pow(10,d)*v,u=Math.round(e/C),M=Math.round(t/C),u*C<e&&++u,M*C>t&&--M),M<u&&.5<=i&&i<2?Px(e,t,i*2):[u,M,C]}function B2(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const a=t<e,[d,g,v]=a?Px(t,e,i):Px(e,t,i);if(!(g>=d))return[];const u=g-d+1,M=new Array(u);if(a)if(v<0)for(let C=0;C<u;++C)M[C]=(g-C)/-v;else for(let C=0;C<u;++C)M[C]=(g-C)*v;else if(v<0)for(let C=0;C<u;++C)M[C]=(d+C)/-v;else for(let C=0;C<u;++C)M[C]=(d+C)*v;return M}function N2(e,t,i){return t=+t,e=+e,i=+i,Px(e,t,i)[2]}function F2(e,t,i){t=+t,e=+e,i=+i;const a=t<e,d=a?N2(t,e,i):N2(e,t,i);return(a?-1:1)*(d<0?1/-d:d)}function lP(e,t){let i;for(const a of e)a!=null&&(i<a||i===void 0&&a>=a)&&(i=a);return i}function uP(e,t){let i;for(const a of e)a!=null&&(i>a||i===void 0&&a>=a)&&(i=a);return i}function sz(e,t,i=0,a=1/0,d){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),a=Math.floor(Math.min(e.length-1,a)),!(i<=t&&t<=a))return e;for(d=d===void 0?oz:L8(d);a>i;){if(a-i>600){const M=a-i+1,C=t-i+1,D=Math.log(M),I=.5*Math.exp(2*D/3),N=.5*Math.sqrt(D*I*(M-I)/M)*(C-M/2<0?-1:1),G=Math.max(i,Math.floor(t-C*I/M+N)),Y=Math.min(a,Math.floor(t+(M-C)*I/M+N));sz(e,t,G,Y,d)}const g=e[t];let v=i,u=a;for(bv(e,i,t),d(e[a],g)>0&&bv(e,i,a);v<u;){for(bv(e,v,u),++v,--u;d(e[v],g)<0;)++v;for(;d(e[u],g)>0;)--u}d(e[i],g)===0?bv(e,i,u):(++u,bv(e,u,a)),u<=t&&(i=u+1),t<=u&&(a=u-1)}return e}function bv(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}function F8(e,t,i){if(e=Float64Array.from(O8(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return uP(e);if(t>=1)return lP(e);var a,d=(a-1)*t,g=Math.floor(d),v=lP(sz(e,g).subarray(0,g+1)),u=uP(e.subarray(g+1));return v+(u-v)*(d-g)}}function U8(e,t,i=az){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+i(e[0],0,e);if(t>=1)return+i(e[a-1],a-1,e);var a,d=(a-1)*t,g=Math.floor(d),v=+i(e[g],g,e),u=+i(e[g+1],g+1,e);return v+(u-v)*(d-g)}}function V8(e,t,i){e=+e,t=+t,i=(d=arguments.length)<2?(t=e,e=0,1):d<3?1:+i;for(var a=-1,d=Math.max(0,Math.ceil((t-e)/i))|0,g=new Array(d);++a<d;)g[a]=e+a*i;return g}function Zl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function vf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const U2=Symbol("implicit");function VS(){var e=new oP,t=[],i=[],a=U2;function d(g){let v=e.get(g);if(v===void 0){if(a!==U2)return a;e.set(g,v=t.push(g)-1)}return i[v%i.length]}return d.domain=function(g){if(!arguments.length)return t.slice();t=[],e=new oP;for(const v of g)e.has(v)||e.set(v,t.push(v)-1);return d},d.range=function(g){return arguments.length?(i=Array.from(g),d):i.slice()},d.unknown=function(g){return arguments.length?(a=g,d):a},d.copy=function(){return VS(t,i).unknown(a)},Zl.apply(d,arguments),d}function qS(){var e=VS().unknown(void 0),t=e.domain,i=e.range,a=0,d=1,g,v,u=!1,M=0,C=0,D=.5;delete e.unknown;function I(){var N=t().length,G=d<a,Y=G?d:a,H=G?a:d;g=(H-Y)/Math.max(1,N-M+C*2),u&&(g=Math.floor(g)),Y+=(H-Y-g*(N-M))*D,v=g*(1-M),u&&(Y=Math.round(Y),v=Math.round(v));var $=V8(N).map(function(se){return Y+g*se});return i(G?$.reverse():$)}return e.domain=function(N){return arguments.length?(t(N),I()):t()},e.range=function(N){return arguments.length?([a,d]=N,a=+a,d=+d,I()):[a,d]},e.rangeRound=function(N){return[a,d]=N,a=+a,d=+d,u=!0,I()},e.bandwidth=function(){return v},e.step=function(){return g},e.round=function(N){return arguments.length?(u=!!N,I()):u},e.padding=function(N){return arguments.length?(M=Math.min(1,C=+N),I()):M},e.paddingInner=function(N){return arguments.length?(M=Math.min(1,N),I()):M},e.paddingOuter=function(N){return arguments.length?(C=+N,I()):C},e.align=function(N){return arguments.length?(D=Math.max(0,Math.min(1,N)),I()):D},e.copy=function(){return qS(t(),[a,d]).round(u).paddingInner(M).paddingOuter(C).align(D)},Zl.apply(I(),arguments)}function lz(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lz(t())},e}function q8(){return lz(qS.apply(null,arguments).paddingInner(1))}function $S(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function uz(e,t){var i=Object.create(e.prototype);for(var a in t)i[a]=t[a];return i}function f_(){}var qv=.7,Cx=1/qv,Wg="\\s*([+-]?\\d+)\\s*",$v="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$8=/^#([0-9a-f]{3,8})$/,G8=new RegExp(`^rgb\\(${Wg},${Wg},${Wg}\\)$`),Z8=new RegExp(`^rgb\\(${Vc},${Vc},${Vc}\\)$`),H8=new RegExp(`^rgba\\(${Wg},${Wg},${Wg},${$v}\\)$`),W8=new RegExp(`^rgba\\(${Vc},${Vc},${Vc},${$v}\\)$`),Y8=new RegExp(`^hsl\\(${$v},${Vc},${Vc}\\)$`),X8=new RegExp(`^hsla\\(${$v},${Vc},${Vc},${$v}\\)$`),cP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$S(f_,Gv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hP,formatHex:hP,formatHex8:K8,formatHsl:Q8,formatRgb:fP,toString:fP});function hP(){return this.rgb().formatHex()}function K8(){return this.rgb().formatHex8()}function Q8(){return cz(this).formatHsl()}function fP(){return this.rgb().formatRgb()}function Gv(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=$8.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?dP(t):i===3?new bs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?B0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?B0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=G8.exec(e))?new bs(t[1],t[2],t[3],1):(t=Z8.exec(e))?new bs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=H8.exec(e))?B0(t[1],t[2],t[3],t[4]):(t=W8.exec(e))?B0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Y8.exec(e))?gP(t[1],t[2]/100,t[3]/100,1):(t=X8.exec(e))?gP(t[1],t[2]/100,t[3]/100,t[4]):cP.hasOwnProperty(e)?dP(cP[e]):e==="transparent"?new bs(NaN,NaN,NaN,0):null}function dP(e){return new bs(e>>16&255,e>>8&255,e&255,1)}function B0(e,t,i,a){return a<=0&&(e=t=i=NaN),new bs(e,t,i,a)}function J8(e){return e instanceof f_||(e=Gv(e)),e?(e=e.rgb(),new bs(e.r,e.g,e.b,e.opacity)):new bs}function V2(e,t,i,a){return arguments.length===1?J8(e):new bs(e,t,i,a??1)}function bs(e,t,i,a){this.r=+e,this.g=+t,this.b=+i,this.opacity=+a}$S(bs,V2,uz(f_,{brighter(e){return e=e==null?Cx:Math.pow(Cx,e),new bs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?qv:Math.pow(qv,e),new bs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bs(Qp(this.r),Qp(this.g),Qp(this.b),Dx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pP,formatHex:pP,formatHex8:eU,formatRgb:mP,toString:mP}));function pP(){return`#${Hp(this.r)}${Hp(this.g)}${Hp(this.b)}`}function eU(){return`#${Hp(this.r)}${Hp(this.g)}${Hp(this.b)}${Hp((isNaN(this.opacity)?1:this.opacity)*255)}`}function mP(){const e=Dx(this.opacity);return`${e===1?"rgb(":"rgba("}${Qp(this.r)}, ${Qp(this.g)}, ${Qp(this.b)}${e===1?")":`, ${e})`}`}function Dx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hp(e){return e=Qp(e),(e<16?"0":"")+e.toString(16)}function gP(e,t,i,a){return a<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Uu(e,t,i,a)}function cz(e){if(e instanceof Uu)return new Uu(e.h,e.s,e.l,e.opacity);if(e instanceof f_||(e=Gv(e)),!e)return new Uu;if(e instanceof Uu)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,d=Math.min(t,i,a),g=Math.max(t,i,a),v=NaN,u=g-d,M=(g+d)/2;return u?(t===g?v=(i-a)/u+(i<a)*6:i===g?v=(a-t)/u+2:v=(t-i)/u+4,u/=M<.5?g+d:2-g-d,v*=60):u=M>0&&M<1?0:v,new Uu(v,u,M,e.opacity)}function tU(e,t,i,a){return arguments.length===1?cz(e):new Uu(e,t,i,a??1)}function Uu(e,t,i,a){this.h=+e,this.s=+t,this.l=+i,this.opacity=+a}$S(Uu,tU,uz(f_,{brighter(e){return e=e==null?Cx:Math.pow(Cx,e),new Uu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?qv:Math.pow(qv,e),new Uu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*t,d=2*i-a;return new bs(zw(e>=240?e-240:e+120,d,a),zw(e,d,a),zw(e<120?e+240:e-120,d,a),this.opacity)},clamp(){return new Uu(yP(this.h),N0(this.s),N0(this.l),Dx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Dx(this.opacity);return`${e===1?"hsl(":"hsla("}${yP(this.h)}, ${N0(this.s)*100}%, ${N0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yP(e){return e=(e||0)%360,e<0?e+360:e}function N0(e){return Math.max(0,Math.min(1,e||0))}function zw(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const GS=e=>()=>e;function rU(e,t){return function(i){return e+i*t}}function nU(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(a){return Math.pow(e+a*t,i)}}function iU(e){return(e=+e)==1?hz:function(t,i){return i-t?nU(t,i,e):GS(isNaN(t)?i:t)}}function hz(e,t){var i=t-e;return i?rU(e,i):GS(isNaN(e)?t:e)}const vP=(function e(t){var i=iU(t);function a(d,g){var v=i((d=V2(d)).r,(g=V2(g)).r),u=i(d.g,g.g),M=i(d.b,g.b),C=hz(d.opacity,g.opacity);return function(D){return d.r=v(D),d.g=u(D),d.b=M(D),d.opacity=C(D),d+""}}return a.gamma=e,a})(1);function aU(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,a=t.slice(),d;return function(g){for(d=0;d<i;++d)a[d]=e[d]*(1-g)+t[d]*g;return a}}function oU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sU(e,t){var i=t?t.length:0,a=e?Math.min(i,e.length):0,d=new Array(a),g=new Array(i),v;for(v=0;v<a;++v)d[v]=ay(e[v],t[v]);for(;v<i;++v)g[v]=t[v];return function(u){for(v=0;v<a;++v)g[v]=d[v](u);return g}}function lU(e,t){var i=new Date;return e=+e,t=+t,function(a){return i.setTime(e*(1-a)+t*a),i}}function Ox(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function uU(e,t){var i={},a={},d;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(d in t)d in e?i[d]=ay(e[d],t[d]):a[d]=t[d];return function(g){for(d in i)a[d]=i[d](g);return a}}var q2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kw=new RegExp(q2.source,"g");function cU(e){return function(){return e}}function hU(e){return function(t){return e(t)+""}}function fU(e,t){var i=q2.lastIndex=kw.lastIndex=0,a,d,g,v=-1,u=[],M=[];for(e=e+"",t=t+"";(a=q2.exec(e))&&(d=kw.exec(t));)(g=d.index)>i&&(g=t.slice(i,g),u[v]?u[v]+=g:u[++v]=g),(a=a[0])===(d=d[0])?u[v]?u[v]+=d:u[++v]=d:(u[++v]=null,M.push({i:v,x:Ox(a,d)})),i=kw.lastIndex;return i<t.length&&(g=t.slice(i),u[v]?u[v]+=g:u[++v]=g),u.length<2?M[0]?hU(M[0].x):cU(t):(t=M.length,function(C){for(var D=0,I;D<t;++D)u[(I=M[D]).i]=I.x(C);return u.join("")})}function ay(e,t){var i=typeof t,a;return t==null||i==="boolean"?GS(t):(i==="number"?Ox:i==="string"?(a=Gv(t))?(t=a,vP):fU:t instanceof Gv?vP:t instanceof Date?lU:oU(t)?aU:Array.isArray(t)?sU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?uU:Ox)(e,t)}function ZS(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function dU(e,t){t===void 0&&(t=e,e=ay);for(var i=0,a=t.length-1,d=t[0],g=new Array(a<0?0:a);i<a;)g[i]=e(d,d=t[++i]);return function(v){var u=Math.max(0,Math.min(a-1,Math.floor(v*=a)));return g[u](v-u)}}function pU(e){return function(){return e}}function Ix(e){return+e}var _P=[0,1];function Vo(e){return e}function $2(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:pU(isNaN(t)?NaN:.5)}function mU(e,t){var i;return e>t&&(i=e,e=t,t=i),function(a){return Math.max(e,Math.min(t,a))}}function gU(e,t,i){var a=e[0],d=e[1],g=t[0],v=t[1];return d<a?(a=$2(d,a),g=i(v,g)):(a=$2(a,d),g=i(g,v)),function(u){return g(a(u))}}function yU(e,t,i){var a=Math.min(e.length,t.length)-1,d=new Array(a),g=new Array(a),v=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++v<a;)d[v]=$2(e[v],e[v+1]),g[v]=i(t[v],t[v+1]);return function(u){var M=h_(e,u,1,a)-1;return g[M](d[M](u))}}function d_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Tb(){var e=_P,t=_P,i=ay,a,d,g,v=Vo,u,M,C;function D(){var N=Math.min(e.length,t.length);return v!==Vo&&(v=mU(e[0],e[N-1])),u=N>2?yU:gU,M=C=null,I}function I(N){return N==null||isNaN(N=+N)?g:(M||(M=u(e.map(a),t,i)))(a(v(N)))}return I.invert=function(N){return v(d((C||(C=u(t,e.map(a),Ox)))(N)))},I.domain=function(N){return arguments.length?(e=Array.from(N,Ix),D()):e.slice()},I.range=function(N){return arguments.length?(t=Array.from(N),D()):t.slice()},I.rangeRound=function(N){return t=Array.from(N),i=ZS,D()},I.clamp=function(N){return arguments.length?(v=N?!0:Vo,D()):v!==Vo},I.interpolate=function(N){return arguments.length?(i=N,D()):i},I.unknown=function(N){return arguments.length?(g=N,I):g},function(N,G){return a=N,d=G,D()}}function HS(){return Tb()(Vo,Vo)}function vU(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zx(e,t){if(!isFinite(e)||e===0)return null;var i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function Qg(e){return e=zx(Math.abs(e)),e?e[1]:NaN}function _U(e,t){return function(i,a){for(var d=i.length,g=[],v=0,u=e[0],M=0;d>0&&u>0&&(M+u+1>a&&(u=Math.max(1,a-M)),g.push(i.substring(d-=u,d+u)),!((M+=u+1)>a));)u=e[v=(v+1)%e.length];return g.reverse().join(t)}}function xU(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var bU=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Zv(e){if(!(t=bU.exec(e)))throw new Error("invalid format: "+e);var t;return new WS({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Zv.prototype=WS.prototype;function WS(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}WS.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wU(e){e:for(var t=e.length,i=1,a=-1,d;i<t;++i)switch(e[i]){case".":a=d=i;break;case"0":a===0&&(a=i),d=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(d+1):e}var kx;function SU(e,t){var i=zx(e,t);if(!i)return kx=void 0,e.toPrecision(t);var a=i[0],d=i[1],g=d-(kx=Math.max(-8,Math.min(8,Math.floor(d/3)))*3)+1,v=a.length;return g===v?a:g>v?a+new Array(g-v+1).join("0"):g>0?a.slice(0,g)+"."+a.slice(g):"0."+new Array(1-g).join("0")+zx(e,Math.max(0,t+g-1))[0]}function xP(e,t){var i=zx(e,t);if(!i)return e+"";var a=i[0],d=i[1];return d<0?"0."+new Array(-d).join("0")+a:a.length>d+1?a.slice(0,d+1)+"."+a.slice(d+1):a+new Array(d-a.length+2).join("0")}const bP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:vU,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xP(e*100,t),r:xP,s:SU,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wP(e){return e}var SP=Array.prototype.map,TP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function TU(e){var t=e.grouping===void 0||e.thousands===void 0?wP:_U(SP.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",d=e.decimal===void 0?".":e.decimal+"",g=e.numerals===void 0?wP:xU(SP.call(e.numerals,String)),v=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",M=e.nan===void 0?"NaN":e.nan+"";function C(I,N){I=Zv(I);var G=I.fill,Y=I.align,H=I.sign,$=I.symbol,se=I.zero,he=I.width,fe=I.comma,me=I.precision,Ae=I.trim,ge=I.type;ge==="n"?(fe=!0,ge="g"):bP[ge]||(me===void 0&&(me=12),Ae=!0,ge="g"),(se||G==="0"&&Y==="=")&&(se=!0,G="0",Y="=");var Se=(N&&N.prefix!==void 0?N.prefix:"")+($==="$"?i:$==="#"&&/[boxX]/.test(ge)?"0"+ge.toLowerCase():""),Ue=($==="$"?a:/[%p]/.test(ge)?v:"")+(N&&N.suffix!==void 0?N.suffix:""),et=bP[ge],vt=/[defgprs%]/.test(ge);me=me===void 0?6:/[gprs]/.test(ge)?Math.max(1,Math.min(21,me)):Math.max(0,Math.min(20,me));function pt(Fe){var Ct=Se,It=Ue,jt,$e,ct;if(ge==="c")It=et(Fe)+It,Fe="";else{Fe=+Fe;var Et=Fe<0||1/Fe<0;if(Fe=isNaN(Fe)?M:et(Math.abs(Fe),me),Ae&&(Fe=wU(Fe)),Et&&+Fe==0&&H!=="+"&&(Et=!1),Ct=(Et?H==="("?H:u:H==="-"||H==="("?"":H)+Ct,It=(ge==="s"&&!isNaN(Fe)&&kx!==void 0?TP[8+kx/3]:"")+It+(Et&&H==="("?")":""),vt){for(jt=-1,$e=Fe.length;++jt<$e;)if(ct=Fe.charCodeAt(jt),48>ct||ct>57){It=(ct===46?d+Fe.slice(jt+1):Fe.slice(jt))+It,Fe=Fe.slice(0,jt);break}}}fe&&!se&&(Fe=t(Fe,1/0));var _t=Ct.length+Fe.length+It.length,Ut=_t<he?new Array(he-_t+1).join(G):"";switch(fe&&se&&(Fe=t(Ut+Fe,Ut.length?he-It.length:1/0),Ut=""),Y){case"<":Fe=Ct+Fe+It+Ut;break;case"=":Fe=Ct+Ut+Fe+It;break;case"^":Fe=Ut.slice(0,_t=Ut.length>>1)+Ct+Fe+It+Ut.slice(_t);break;default:Fe=Ut+Ct+Fe+It;break}return g(Fe)}return pt.toString=function(){return I+""},pt}function D(I,N){var G=Math.max(-8,Math.min(8,Math.floor(Qg(N)/3)))*3,Y=Math.pow(10,-G),H=C((I=Zv(I),I.type="f",I),{suffix:TP[8+G/3]});return function($){return H(Y*$)}}return{format:C,formatPrefix:D}}var F0,YS,fz;EU({thousands:",",grouping:[3],currency:["$",""]});function EU(e){return F0=TU(e),YS=F0.format,fz=F0.formatPrefix,F0}function AU(e){return Math.max(0,-Qg(Math.abs(e)))}function MU(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qg(t)/3)))*3-Qg(Math.abs(e)))}function PU(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qg(t)-Qg(e))+1}function dz(e,t,i,a){var d=F2(e,t,i),g;switch(a=Zv(a??",f"),a.type){case"s":{var v=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(g=MU(d,v))&&(a.precision=g),fz(a,v)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(g=PU(d,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=g-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(g=AU(d))&&(a.precision=g-(a.type==="%")*2);break}}return YS(a)}function Od(e){var t=e.domain;return e.ticks=function(i){var a=t();return B2(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var d=t();return dz(d[0],d[d.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=t(),d=0,g=a.length-1,v=a[d],u=a[g],M,C,D=10;for(u<v&&(C=v,v=u,u=C,C=d,d=g,g=C);D-- >0;){if(C=N2(v,u,i),C===M)return a[d]=v,a[g]=u,t(a);if(C>0)v=Math.floor(v/C)*C,u=Math.ceil(u/C)*C;else if(C<0)v=Math.ceil(v*C)/C,u=Math.floor(u*C)/C;else break;M=C}return e},e}function pz(){var e=HS();return e.copy=function(){return d_(e,pz())},Zl.apply(e,arguments),Od(e)}function mz(e){var t;function i(a){return a==null||isNaN(a=+a)?t:a}return i.invert=i,i.domain=i.range=function(a){return arguments.length?(e=Array.from(a,Ix),i):e.slice()},i.unknown=function(a){return arguments.length?(t=a,i):t},i.copy=function(){return mz(e).unknown(t)},e=arguments.length?Array.from(e,Ix):[0,1],Od(i)}function gz(e,t){e=e.slice();var i=0,a=e.length-1,d=e[i],g=e[a],v;return g<d&&(v=i,i=a,a=v,v=d,d=g,g=v),e[i]=t.floor(d),e[a]=t.ceil(g),e}function EP(e){return Math.log(e)}function AP(e){return Math.exp(e)}function CU(e){return-Math.log(-e)}function DU(e){return-Math.exp(-e)}function OU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function IU(e){return e===10?OU:e===Math.E?Math.exp:t=>Math.pow(e,t)}function zU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function MP(e){return(t,i)=>-e(-t,i)}function XS(e){const t=e(EP,AP),i=t.domain;let a=10,d,g;function v(){return d=zU(a),g=IU(a),i()[0]<0?(d=MP(d),g=MP(g),e(CU,DU)):e(EP,AP),t}return t.base=function(u){return arguments.length?(a=+u,v()):a},t.domain=function(u){return arguments.length?(i(u),v()):i()},t.ticks=u=>{const M=i();let C=M[0],D=M[M.length-1];const I=D<C;I&&([C,D]=[D,C]);let N=d(C),G=d(D),Y,H;const $=u==null?10:+u;let se=[];if(!(a%1)&&G-N<$){if(N=Math.floor(N),G=Math.ceil(G),C>0){for(;N<=G;++N)for(Y=1;Y<a;++Y)if(H=N<0?Y/g(-N):Y*g(N),!(H<C)){if(H>D)break;se.push(H)}}else for(;N<=G;++N)for(Y=a-1;Y>=1;--Y)if(H=N>0?Y/g(-N):Y*g(N),!(H<C)){if(H>D)break;se.push(H)}se.length*2<$&&(se=B2(C,D,$))}else se=B2(N,G,Math.min(G-N,$)).map(g);return I?se.reverse():se},t.tickFormat=(u,M)=>{if(u==null&&(u=10),M==null&&(M=a===10?"s":","),typeof M!="function"&&(!(a%1)&&(M=Zv(M)).precision==null&&(M.trim=!0),M=YS(M)),u===1/0)return M;const C=Math.max(1,a*u/t.ticks().length);return D=>{let I=D/g(Math.round(d(D)));return I*a<a-.5&&(I*=a),I<=C?M(D):""}},t.nice=()=>i(gz(i(),{floor:u=>g(Math.floor(d(u))),ceil:u=>g(Math.ceil(d(u)))})),t}function yz(){const e=XS(Tb()).domain([1,10]);return e.copy=()=>d_(e,yz()).base(e.base()),Zl.apply(e,arguments),e}function PP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function CP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function KS(e){var t=1,i=e(PP(t),CP(t));return i.constant=function(a){return arguments.length?e(PP(t=+a),CP(t)):t},Od(i)}function vz(){var e=KS(Tb());return e.copy=function(){return d_(e,vz()).constant(e.constant())},Zl.apply(e,arguments)}function DP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function kU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function RU(e){return e<0?-e*e:e*e}function QS(e){var t=e(Vo,Vo),i=1;function a(){return i===1?e(Vo,Vo):i===.5?e(kU,RU):e(DP(i),DP(1/i))}return t.exponent=function(d){return arguments.length?(i=+d,a()):i},Od(t)}function JS(){var e=QS(Tb());return e.copy=function(){return d_(e,JS()).exponent(e.exponent())},Zl.apply(e,arguments),e}function LU(){return JS.apply(null,arguments).exponent(.5)}function OP(e){return Math.sign(e)*e*e}function jU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function _z(){var e=HS(),t=[0,1],i=!1,a;function d(g){var v=jU(e(g));return isNaN(v)?a:i?Math.round(v):v}return d.invert=function(g){return e.invert(OP(g))},d.domain=function(g){return arguments.length?(e.domain(g),d):e.domain()},d.range=function(g){return arguments.length?(e.range((t=Array.from(g,Ix)).map(OP)),d):t.slice()},d.rangeRound=function(g){return d.range(g).round(!0)},d.round=function(g){return arguments.length?(i=!!g,d):i},d.clamp=function(g){return arguments.length?(e.clamp(g),d):e.clamp()},d.unknown=function(g){return arguments.length?(a=g,d):a},d.copy=function(){return _z(e.domain(),t).round(i).clamp(e.clamp()).unknown(a)},Zl.apply(d,arguments),Od(d)}function xz(){var e=[],t=[],i=[],a;function d(){var v=0,u=Math.max(1,t.length);for(i=new Array(u-1);++v<u;)i[v-1]=U8(e,v/u);return g}function g(v){return v==null||isNaN(v=+v)?a:t[h_(i,v)]}return g.invertExtent=function(v){var u=t.indexOf(v);return u<0?[NaN,NaN]:[u>0?i[u-1]:e[0],u<i.length?i[u]:e[e.length-1]]},g.domain=function(v){if(!arguments.length)return e.slice();e=[];for(let u of v)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ed),d()},g.range=function(v){return arguments.length?(t=Array.from(v),d()):t.slice()},g.unknown=function(v){return arguments.length?(a=v,g):a},g.quantiles=function(){return i.slice()},g.copy=function(){return xz().domain(e).range(t).unknown(a)},Zl.apply(g,arguments)}function bz(){var e=0,t=1,i=1,a=[.5],d=[0,1],g;function v(M){return M!=null&&M<=M?d[h_(a,M,0,i)]:g}function u(){var M=-1;for(a=new Array(i);++M<i;)a[M]=((M+1)*t-(M-i)*e)/(i+1);return v}return v.domain=function(M){return arguments.length?([e,t]=M,e=+e,t=+t,u()):[e,t]},v.range=function(M){return arguments.length?(i=(d=Array.from(M)).length-1,u()):d.slice()},v.invertExtent=function(M){var C=d.indexOf(M);return C<0?[NaN,NaN]:C<1?[e,a[0]]:C>=i?[a[i-1],t]:[a[C-1],a[C]]},v.unknown=function(M){return arguments.length&&(g=M),v},v.thresholds=function(){return a.slice()},v.copy=function(){return bz().domain([e,t]).range(d).unknown(g)},Zl.apply(Od(v),arguments)}function wz(){var e=[.5],t=[0,1],i,a=1;function d(g){return g!=null&&g<=g?t[h_(e,g,0,a)]:i}return d.domain=function(g){return arguments.length?(e=Array.from(g),a=Math.min(e.length,t.length-1),d):e.slice()},d.range=function(g){return arguments.length?(t=Array.from(g),a=Math.min(e.length,t.length-1),d):t.slice()},d.invertExtent=function(g){var v=t.indexOf(g);return[e[v-1],e[v]]},d.unknown=function(g){return arguments.length?(i=g,d):i},d.copy=function(){return wz().domain(e).range(t).unknown(i)},Zl.apply(d,arguments)}const Rw=new Date,Lw=new Date;function Ji(e,t,i,a){function d(g){return e(g=arguments.length===0?new Date:new Date(+g)),g}return d.floor=g=>(e(g=new Date(+g)),g),d.ceil=g=>(e(g=new Date(g-1)),t(g,1),e(g),g),d.round=g=>{const v=d(g),u=d.ceil(g);return g-v<u-g?v:u},d.offset=(g,v)=>(t(g=new Date(+g),v==null?1:Math.floor(v)),g),d.range=(g,v,u)=>{const M=[];if(g=d.ceil(g),u=u==null?1:Math.floor(u),!(g<v)||!(u>0))return M;let C;do M.push(C=new Date(+g)),t(g,u),e(g);while(C<g&&g<v);return M},d.filter=g=>Ji(v=>{if(v>=v)for(;e(v),!g(v);)v.setTime(v-1)},(v,u)=>{if(v>=v)if(u<0)for(;++u<=0;)for(;t(v,-1),!g(v););else for(;--u>=0;)for(;t(v,1),!g(v););}),i&&(d.count=(g,v)=>(Rw.setTime(+g),Lw.setTime(+v),e(Rw),e(Lw),Math.floor(i(Rw,Lw))),d.every=g=>(g=Math.floor(g),!isFinite(g)||!(g>0)?null:g>1?d.filter(a?v=>a(v)%g===0:v=>d.count(0,v)%g===0):d)),d}const Rx=Ji(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Rx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ji(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):Rx);Rx.range;const tf=1e3,Vl=tf*60,rf=Vl*60,uf=rf*24,eT=uf*7,IP=uf*30,jw=uf*365,Wp=Ji(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*tf)},(e,t)=>(t-e)/tf,e=>e.getUTCSeconds());Wp.range;const tT=Ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tf)},(e,t)=>{e.setTime(+e+t*Vl)},(e,t)=>(t-e)/Vl,e=>e.getMinutes());tT.range;const rT=Ji(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Vl)},(e,t)=>(t-e)/Vl,e=>e.getUTCMinutes());rT.range;const nT=Ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*tf-e.getMinutes()*Vl)},(e,t)=>{e.setTime(+e+t*rf)},(e,t)=>(t-e)/rf,e=>e.getHours());nT.range;const iT=Ji(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*rf)},(e,t)=>(t-e)/rf,e=>e.getUTCHours());iT.range;const p_=Ji(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vl)/uf,e=>e.getDate()-1);p_.range;const Eb=Ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uf,e=>e.getUTCDate()-1);Eb.range;const Sz=Ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/uf,e=>Math.floor(e/uf));Sz.range;function um(e){return Ji(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Vl)/eT)}const Ab=um(0),Lx=um(1),BU=um(2),NU=um(3),Jg=um(4),FU=um(5),UU=um(6);Ab.range;Lx.range;BU.range;NU.range;Jg.range;FU.range;UU.range;function cm(e){return Ji(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/eT)}const Mb=cm(0),jx=cm(1),VU=cm(2),qU=cm(3),ey=cm(4),$U=cm(5),GU=cm(6);Mb.range;jx.range;VU.range;qU.range;ey.range;$U.range;GU.range;const aT=Ji(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());aT.range;const oT=Ji(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oT.range;const cf=Ji(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ji(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});cf.range;const hf=Ji(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());hf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ji(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});hf.range;function Tz(e,t,i,a,d,g){const v=[[Wp,1,tf],[Wp,5,5*tf],[Wp,15,15*tf],[Wp,30,30*tf],[g,1,Vl],[g,5,5*Vl],[g,15,15*Vl],[g,30,30*Vl],[d,1,rf],[d,3,3*rf],[d,6,6*rf],[d,12,12*rf],[a,1,uf],[a,2,2*uf],[i,1,eT],[t,1,IP],[t,3,3*IP],[e,1,jw]];function u(C,D,I){const N=D<C;N&&([C,D]=[D,C]);const G=I&&typeof I.range=="function"?I:M(C,D,I),Y=G?G.range(C,+D+1):[];return N?Y.reverse():Y}function M(C,D,I){const N=Math.abs(D-C)/I,G=US(([,,$])=>$).right(v,N);if(G===v.length)return e.every(F2(C/jw,D/jw,I));if(G===0)return Rx.every(Math.max(F2(C,D,I),1));const[Y,H]=v[N/v[G-1][2]<v[G][2]/N?G-1:G];return Y.every(H)}return[u,M]}const[ZU,HU]=Tz(hf,oT,Mb,Sz,iT,rT),[WU,YU]=Tz(cf,aT,Ab,p_,nT,tT);function Bw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Nw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wv(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function XU(e){var t=e.dateTime,i=e.date,a=e.time,d=e.periods,g=e.days,v=e.shortDays,u=e.months,M=e.shortMonths,C=Sv(d),D=Tv(d),I=Sv(g),N=Tv(g),G=Sv(v),Y=Tv(v),H=Sv(u),$=Tv(u),se=Sv(M),he=Tv(M),fe={a:ct,A:Et,b:_t,B:Ut,c:null,d:BP,e:BP,f:_V,g:CV,G:OV,H:gV,I:yV,j:vV,L:Ez,m:xV,M:bV,p:ze,q:at,Q:UP,s:VP,S:wV,u:SV,U:TV,V:EV,w:AV,W:MV,x:null,X:null,y:PV,Y:DV,Z:IV,"%":FP},me={a:Pt,A:zt,b:$t,B:Kt,c:null,d:NP,e:NP,f:LV,g:ZV,G:WV,H:zV,I:kV,j:RV,L:Mz,m:jV,M:BV,p:Gt,q:Ar,Q:UP,s:VP,S:NV,u:FV,U:UV,V:VV,w:qV,W:$V,x:null,X:null,y:GV,Y:HV,Z:YV,"%":FP},Ae={a:vt,A:pt,b:Fe,B:Ct,c:It,d:LP,e:LP,f:fV,g:RP,G:kP,H:jP,I:jP,j:lV,L:hV,m:sV,M:uV,p:et,q:oV,Q:pV,s:mV,S:cV,u:tV,U:rV,V:nV,w:eV,W:iV,x:jt,X:$e,y:RP,Y:kP,Z:aV,"%":dV};fe.x=ge(i,fe),fe.X=ge(a,fe),fe.c=ge(t,fe),me.x=ge(i,me),me.X=ge(a,me),me.c=ge(t,me);function ge(ht,sr){return function(mr){var St=[],Dn=-1,cr=0,Wr=ht.length,ln,Lr,Ea;for(mr instanceof Date||(mr=new Date(+mr));++Dn<Wr;)ht.charCodeAt(Dn)===37&&(St.push(ht.slice(cr,Dn)),(Lr=zP[ln=ht.charAt(++Dn)])!=null?ln=ht.charAt(++Dn):Lr=ln==="e"?" ":"0",(Ea=sr[ln])&&(ln=Ea(mr,Lr)),St.push(ln),cr=Dn+1);return St.push(ht.slice(cr,Dn)),St.join("")}}function Se(ht,sr){return function(mr){var St=wv(1900,void 0,1),Dn=Ue(St,ht,mr+="",0),cr,Wr;if(Dn!=mr.length)return null;if("Q"in St)return new Date(St.Q);if("s"in St)return new Date(St.s*1e3+("L"in St?St.L:0));if(sr&&!("Z"in St)&&(St.Z=0),"p"in St&&(St.H=St.H%12+St.p*12),St.m===void 0&&(St.m="q"in St?St.q:0),"V"in St){if(St.V<1||St.V>53)return null;"w"in St||(St.w=1),"Z"in St?(cr=Nw(wv(St.y,0,1)),Wr=cr.getUTCDay(),cr=Wr>4||Wr===0?jx.ceil(cr):jx(cr),cr=Eb.offset(cr,(St.V-1)*7),St.y=cr.getUTCFullYear(),St.m=cr.getUTCMonth(),St.d=cr.getUTCDate()+(St.w+6)%7):(cr=Bw(wv(St.y,0,1)),Wr=cr.getDay(),cr=Wr>4||Wr===0?Lx.ceil(cr):Lx(cr),cr=p_.offset(cr,(St.V-1)*7),St.y=cr.getFullYear(),St.m=cr.getMonth(),St.d=cr.getDate()+(St.w+6)%7)}else("W"in St||"U"in St)&&("w"in St||(St.w="u"in St?St.u%7:"W"in St?1:0),Wr="Z"in St?Nw(wv(St.y,0,1)).getUTCDay():Bw(wv(St.y,0,1)).getDay(),St.m=0,St.d="W"in St?(St.w+6)%7+St.W*7-(Wr+5)%7:St.w+St.U*7-(Wr+6)%7);return"Z"in St?(St.H+=St.Z/100|0,St.M+=St.Z%100,Nw(St)):Bw(St)}}function Ue(ht,sr,mr,St){for(var Dn=0,cr=sr.length,Wr=mr.length,ln,Lr;Dn<cr;){if(St>=Wr)return-1;if(ln=sr.charCodeAt(Dn++),ln===37){if(ln=sr.charAt(Dn++),Lr=Ae[ln in zP?sr.charAt(Dn++):ln],!Lr||(St=Lr(ht,mr,St))<0)return-1}else if(ln!=mr.charCodeAt(St++))return-1}return St}function et(ht,sr,mr){var St=C.exec(sr.slice(mr));return St?(ht.p=D.get(St[0].toLowerCase()),mr+St[0].length):-1}function vt(ht,sr,mr){var St=G.exec(sr.slice(mr));return St?(ht.w=Y.get(St[0].toLowerCase()),mr+St[0].length):-1}function pt(ht,sr,mr){var St=I.exec(sr.slice(mr));return St?(ht.w=N.get(St[0].toLowerCase()),mr+St[0].length):-1}function Fe(ht,sr,mr){var St=se.exec(sr.slice(mr));return St?(ht.m=he.get(St[0].toLowerCase()),mr+St[0].length):-1}function Ct(ht,sr,mr){var St=H.exec(sr.slice(mr));return St?(ht.m=$.get(St[0].toLowerCase()),mr+St[0].length):-1}function It(ht,sr,mr){return Ue(ht,t,sr,mr)}function jt(ht,sr,mr){return Ue(ht,i,sr,mr)}function $e(ht,sr,mr){return Ue(ht,a,sr,mr)}function ct(ht){return v[ht.getDay()]}function Et(ht){return g[ht.getDay()]}function _t(ht){return M[ht.getMonth()]}function Ut(ht){return u[ht.getMonth()]}function ze(ht){return d[+(ht.getHours()>=12)]}function at(ht){return 1+~~(ht.getMonth()/3)}function Pt(ht){return v[ht.getUTCDay()]}function zt(ht){return g[ht.getUTCDay()]}function $t(ht){return M[ht.getUTCMonth()]}function Kt(ht){return u[ht.getUTCMonth()]}function Gt(ht){return d[+(ht.getUTCHours()>=12)]}function Ar(ht){return 1+~~(ht.getUTCMonth()/3)}return{format:function(ht){var sr=ge(ht+="",fe);return sr.toString=function(){return ht},sr},parse:function(ht){var sr=Se(ht+="",!1);return sr.toString=function(){return ht},sr},utcFormat:function(ht){var sr=ge(ht+="",me);return sr.toString=function(){return ht},sr},utcParse:function(ht){var sr=Se(ht+="",!0);return sr.toString=function(){return ht},sr}}}var zP={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,KU=/^%/,QU=/[\\^$*+?|[\]().{}]/g;function nn(e,t,i){var a=e<0?"-":"",d=(a?-e:e)+"",g=d.length;return a+(g<i?new Array(i-g+1).join(t)+d:d)}function JU(e){return e.replace(QU,"\\$&")}function Sv(e){return new RegExp("^(?:"+e.map(JU).join("|")+")","i")}function Tv(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function eV(e,t,i){var a=wa.exec(t.slice(i,i+1));return a?(e.w=+a[0],i+a[0].length):-1}function tV(e,t,i){var a=wa.exec(t.slice(i,i+1));return a?(e.u=+a[0],i+a[0].length):-1}function rV(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.U=+a[0],i+a[0].length):-1}function nV(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.V=+a[0],i+a[0].length):-1}function iV(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.W=+a[0],i+a[0].length):-1}function kP(e,t,i){var a=wa.exec(t.slice(i,i+4));return a?(e.y=+a[0],i+a[0].length):-1}function RP(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function aV(e,t,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function oV(e,t,i){var a=wa.exec(t.slice(i,i+1));return a?(e.q=a[0]*3-3,i+a[0].length):-1}function sV(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.m=a[0]-1,i+a[0].length):-1}function LP(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.d=+a[0],i+a[0].length):-1}function lV(e,t,i){var a=wa.exec(t.slice(i,i+3));return a?(e.m=0,e.d=+a[0],i+a[0].length):-1}function jP(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.H=+a[0],i+a[0].length):-1}function uV(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.M=+a[0],i+a[0].length):-1}function cV(e,t,i){var a=wa.exec(t.slice(i,i+2));return a?(e.S=+a[0],i+a[0].length):-1}function hV(e,t,i){var a=wa.exec(t.slice(i,i+3));return a?(e.L=+a[0],i+a[0].length):-1}function fV(e,t,i){var a=wa.exec(t.slice(i,i+6));return a?(e.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function dV(e,t,i){var a=KU.exec(t.slice(i,i+1));return a?i+a[0].length:-1}function pV(e,t,i){var a=wa.exec(t.slice(i));return a?(e.Q=+a[0],i+a[0].length):-1}function mV(e,t,i){var a=wa.exec(t.slice(i));return a?(e.s=+a[0],i+a[0].length):-1}function BP(e,t){return nn(e.getDate(),t,2)}function gV(e,t){return nn(e.getHours(),t,2)}function yV(e,t){return nn(e.getHours()%12||12,t,2)}function vV(e,t){return nn(1+p_.count(cf(e),e),t,3)}function Ez(e,t){return nn(e.getMilliseconds(),t,3)}function _V(e,t){return Ez(e,t)+"000"}function xV(e,t){return nn(e.getMonth()+1,t,2)}function bV(e,t){return nn(e.getMinutes(),t,2)}function wV(e,t){return nn(e.getSeconds(),t,2)}function SV(e){var t=e.getDay();return t===0?7:t}function TV(e,t){return nn(Ab.count(cf(e)-1,e),t,2)}function Az(e){var t=e.getDay();return t>=4||t===0?Jg(e):Jg.ceil(e)}function EV(e,t){return e=Az(e),nn(Jg.count(cf(e),e)+(cf(e).getDay()===4),t,2)}function AV(e){return e.getDay()}function MV(e,t){return nn(Lx.count(cf(e)-1,e),t,2)}function PV(e,t){return nn(e.getFullYear()%100,t,2)}function CV(e,t){return e=Az(e),nn(e.getFullYear()%100,t,2)}function DV(e,t){return nn(e.getFullYear()%1e4,t,4)}function OV(e,t){var i=e.getDay();return e=i>=4||i===0?Jg(e):Jg.ceil(e),nn(e.getFullYear()%1e4,t,4)}function IV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nn(t/60|0,"0",2)+nn(t%60,"0",2)}function NP(e,t){return nn(e.getUTCDate(),t,2)}function zV(e,t){return nn(e.getUTCHours(),t,2)}function kV(e,t){return nn(e.getUTCHours()%12||12,t,2)}function RV(e,t){return nn(1+Eb.count(hf(e),e),t,3)}function Mz(e,t){return nn(e.getUTCMilliseconds(),t,3)}function LV(e,t){return Mz(e,t)+"000"}function jV(e,t){return nn(e.getUTCMonth()+1,t,2)}function BV(e,t){return nn(e.getUTCMinutes(),t,2)}function NV(e,t){return nn(e.getUTCSeconds(),t,2)}function FV(e){var t=e.getUTCDay();return t===0?7:t}function UV(e,t){return nn(Mb.count(hf(e)-1,e),t,2)}function Pz(e){var t=e.getUTCDay();return t>=4||t===0?ey(e):ey.ceil(e)}function VV(e,t){return e=Pz(e),nn(ey.count(hf(e),e)+(hf(e).getUTCDay()===4),t,2)}function qV(e){return e.getUTCDay()}function $V(e,t){return nn(jx.count(hf(e)-1,e),t,2)}function GV(e,t){return nn(e.getUTCFullYear()%100,t,2)}function ZV(e,t){return e=Pz(e),nn(e.getUTCFullYear()%100,t,2)}function HV(e,t){return nn(e.getUTCFullYear()%1e4,t,4)}function WV(e,t){var i=e.getUTCDay();return e=i>=4||i===0?ey(e):ey.ceil(e),nn(e.getUTCFullYear()%1e4,t,4)}function YV(){return"+0000"}function FP(){return"%"}function UP(e){return+e}function VP(e){return Math.floor(+e/1e3)}var Lg,Cz,Dz;XV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function XV(e){return Lg=XU(e),Cz=Lg.format,Lg.parse,Dz=Lg.utcFormat,Lg.utcParse,Lg}function KV(e){return new Date(e)}function QV(e){return e instanceof Date?+e:+new Date(+e)}function sT(e,t,i,a,d,g,v,u,M,C){var D=HS(),I=D.invert,N=D.domain,G=C(".%L"),Y=C(":%S"),H=C("%I:%M"),$=C("%I %p"),se=C("%a %d"),he=C("%b %d"),fe=C("%B"),me=C("%Y");function Ae(ge){return(M(ge)<ge?G:u(ge)<ge?Y:v(ge)<ge?H:g(ge)<ge?$:a(ge)<ge?d(ge)<ge?se:he:i(ge)<ge?fe:me)(ge)}return D.invert=function(ge){return new Date(I(ge))},D.domain=function(ge){return arguments.length?N(Array.from(ge,QV)):N().map(KV)},D.ticks=function(ge){var Se=N();return e(Se[0],Se[Se.length-1],ge??10)},D.tickFormat=function(ge,Se){return Se==null?Ae:C(Se)},D.nice=function(ge){var Se=N();return(!ge||typeof ge.range!="function")&&(ge=t(Se[0],Se[Se.length-1],ge??10)),ge?N(gz(Se,ge)):D},D.copy=function(){return d_(D,sT(e,t,i,a,d,g,v,u,M,C))},D}function JV(){return Zl.apply(sT(WU,YU,cf,aT,Ab,p_,nT,tT,Wp,Cz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function eq(){return Zl.apply(sT(ZU,HU,hf,oT,Mb,Eb,iT,rT,Wp,Dz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Pb(){var e=0,t=1,i,a,d,g,v=Vo,u=!1,M;function C(I){return I==null||isNaN(I=+I)?M:v(d===0?.5:(I=(g(I)-i)*d,u?Math.max(0,Math.min(1,I)):I))}C.domain=function(I){return arguments.length?([e,t]=I,i=g(e=+e),a=g(t=+t),d=i===a?0:1/(a-i),C):[e,t]},C.clamp=function(I){return arguments.length?(u=!!I,C):u},C.interpolator=function(I){return arguments.length?(v=I,C):v};function D(I){return function(N){var G,Y;return arguments.length?([G,Y]=N,v=I(G,Y),C):[v(0),v(1)]}}return C.range=D(ay),C.rangeRound=D(ZS),C.unknown=function(I){return arguments.length?(M=I,C):M},function(I){return g=I,i=I(e),a=I(t),d=i===a?0:1/(a-i),C}}function Id(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Oz(){var e=Od(Pb()(Vo));return e.copy=function(){return Id(e,Oz())},vf.apply(e,arguments)}function Iz(){var e=XS(Pb()).domain([1,10]);return e.copy=function(){return Id(e,Iz()).base(e.base())},vf.apply(e,arguments)}function zz(){var e=KS(Pb());return e.copy=function(){return Id(e,zz()).constant(e.constant())},vf.apply(e,arguments)}function lT(){var e=QS(Pb());return e.copy=function(){return Id(e,lT()).exponent(e.exponent())},vf.apply(e,arguments)}function tq(){return lT.apply(null,arguments).exponent(.5)}function kz(){var e=[],t=Vo;function i(a){if(a!=null&&!isNaN(a=+a))return t((h_(e,a,1)-1)/(e.length-1))}return i.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let d of a)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Ed),i},i.interpolator=function(a){return arguments.length?(t=a,i):t},i.range=function(){return e.map((a,d)=>t(d/(e.length-1)))},i.quantiles=function(a){return Array.from({length:a+1},(d,g)=>F8(e,g/a))},i.copy=function(){return kz(t).domain(e)},vf.apply(i,arguments)}function Cb(){var e=0,t=.5,i=1,a=1,d,g,v,u,M,C=Vo,D,I=!1,N;function G(H){return isNaN(H=+H)?N:(H=.5+((H=+D(H))-g)*(a*H<a*g?u:M),C(I?Math.max(0,Math.min(1,H)):H))}G.domain=function(H){return arguments.length?([e,t,i]=H,d=D(e=+e),g=D(t=+t),v=D(i=+i),u=d===g?0:.5/(g-d),M=g===v?0:.5/(v-g),a=g<d?-1:1,G):[e,t,i]},G.clamp=function(H){return arguments.length?(I=!!H,G):I},G.interpolator=function(H){return arguments.length?(C=H,G):C};function Y(H){return function($){var se,he,fe;return arguments.length?([se,he,fe]=$,C=dU(H,[se,he,fe]),G):[C(0),C(.5),C(1)]}}return G.range=Y(ay),G.rangeRound=Y(ZS),G.unknown=function(H){return arguments.length?(N=H,G):N},function(H){return D=H,d=H(e),g=H(t),v=H(i),u=d===g?0:.5/(g-d),M=g===v?0:.5/(v-g),a=g<d?-1:1,G}}function Rz(){var e=Od(Cb()(Vo));return e.copy=function(){return Id(e,Rz())},vf.apply(e,arguments)}function Lz(){var e=XS(Cb()).domain([.1,1,10]);return e.copy=function(){return Id(e,Lz()).base(e.base())},vf.apply(e,arguments)}function jz(){var e=KS(Cb());return e.copy=function(){return Id(e,jz()).constant(e.constant())},vf.apply(e,arguments)}function uT(){var e=QS(Cb());return e.copy=function(){return Id(e,uT()).exponent(e.exponent())},vf.apply(e,arguments)}function rq(){return uT.apply(null,arguments).exponent(.5)}const Mv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qS,scaleDiverging:Rz,scaleDivergingLog:Lz,scaleDivergingPow:uT,scaleDivergingSqrt:rq,scaleDivergingSymlog:jz,scaleIdentity:mz,scaleImplicit:U2,scaleLinear:pz,scaleLog:yz,scaleOrdinal:VS,scalePoint:q8,scalePow:JS,scaleQuantile:xz,scaleQuantize:bz,scaleRadial:_z,scaleSequential:Oz,scaleSequentialLog:Iz,scaleSequentialPow:lT,scaleSequentialQuantile:kz,scaleSequentialSqrt:tq,scaleSequentialSymlog:zz,scaleSqrt:LU,scaleSymlog:vz,scaleThreshold:wz,scaleTime:JV,scaleUtc:eq,tickFormat:dz},Symbol.toStringTag,{value:"Module"}));var _f=e=>e.chartData,Bz=it([_f],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),cT=(e,t,i,a)=>a?Bz(e):_f(e),Nz=(e,t,i)=>i?Bz(e):_f(e);function ff(e){if(Array.isArray(e)&&e.length===2){var[t,i]=e;if(Dr(t)&&Dr(i))return!0}return!1}function qP(e,t,i){return i?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Fz(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[i,a]=e,d,g;if(Dr(i))d=i;else if(typeof i=="function")return;if(Dr(a))g=a;else if(typeof a=="function")return;var v=[d,g];if(ff(v))return v}}function nq(e,t,i){if(!(!i&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,i);if(ff(a))return qP(a,t,i)}catch{}if(Array.isArray(e)&&e.length===2){var[d,g]=e,v,u;if(d==="auto")t!=null&&(v=Math.min(...t));else if(qt(d))v=d;else if(typeof d=="function")try{t!=null&&(v=d(t?.[0]))}catch{}else if(typeof d=="string"&&tM.test(d)){var M=tM.exec(d);if(M==null||M[1]==null||t==null)v=void 0;else{var C=+M[1];v=t[0]-C}}else v=t?.[0];if(g==="auto")t!=null&&(u=Math.max(...t));else if(qt(g))u=g;else if(typeof g=="function")try{t!=null&&(u=g(t?.[1]))}catch{}else if(typeof g=="string"&&rM.test(g)){var D=rM.exec(g);if(D==null||D[1]==null||t==null)u=void 0;else{var I=+D[1];u=t[1]+I}}else u=t?.[1];var N=[v,u];if(ff(N))return t==null?N:qP(N,t,i)}}}var oy=1e9,iq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},fT,ii=!0,$l="[DecimalError] ",Jp=$l+"Invalid argument: ",hT=$l+"Exponent out of range: ",sy=Math.floor,Gp=Math.pow,aq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ks,va=1e7,Qn=7,Uz=9007199254740991,Bx=sy(Uz/Qn),Ht={};Ht.absoluteValue=Ht.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ht.comparedTo=Ht.cmp=function(e){var t,i,a,d,g=this;if(e=new g.constructor(e),g.s!==e.s)return g.s||-e.s;if(g.e!==e.e)return g.e>e.e^g.s<0?1:-1;for(a=g.d.length,d=e.d.length,t=0,i=a<d?a:d;t<i;++t)if(g.d[t]!==e.d[t])return g.d[t]>e.d[t]^g.s<0?1:-1;return a===d?0:a>d^g.s<0?1:-1};Ht.decimalPlaces=Ht.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*Qn;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};Ht.dividedBy=Ht.div=function(e){return af(this,new this.constructor(e))};Ht.dividedToIntegerBy=Ht.idiv=function(e){var t=this,i=t.constructor;return Fn(af(t,new i(e),0,1),i.precision)};Ht.equals=Ht.eq=function(e){return!this.cmp(e)};Ht.exponent=function(){return Fi(this)};Ht.greaterThan=Ht.gt=function(e){return this.cmp(e)>0};Ht.greaterThanOrEqualTo=Ht.gte=function(e){return this.cmp(e)>=0};Ht.isInteger=Ht.isint=function(){return this.e>this.d.length-2};Ht.isNegative=Ht.isneg=function(){return this.s<0};Ht.isPositive=Ht.ispos=function(){return this.s>0};Ht.isZero=function(){return this.s===0};Ht.lessThan=Ht.lt=function(e){return this.cmp(e)<0};Ht.lessThanOrEqualTo=Ht.lte=function(e){return this.cmp(e)<1};Ht.logarithm=Ht.log=function(e){var t,i=this,a=i.constructor,d=a.precision,g=d+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(Ks))throw Error($l+"NaN");if(i.s<1)throw Error($l+(i.s?"NaN":"-Infinity"));return i.eq(Ks)?new a(0):(ii=!1,t=af(Hv(i,g),Hv(e,g),g),ii=!0,Fn(t,d))};Ht.minus=Ht.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$z(t,e):Vz(t,(e.s=-e.s,e))};Ht.modulo=Ht.mod=function(e){var t,i=this,a=i.constructor,d=a.precision;if(e=new a(e),!e.s)throw Error($l+"NaN");return i.s?(ii=!1,t=af(i,e,0,1).times(e),ii=!0,i.minus(t)):Fn(new a(i),d)};Ht.naturalExponential=Ht.exp=function(){return qz(this)};Ht.naturalLogarithm=Ht.ln=function(){return Hv(this)};Ht.negated=Ht.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ht.plus=Ht.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vz(t,e):$z(t,(e.s=-e.s,e))};Ht.precision=Ht.sd=function(e){var t,i,a,d=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Jp+e);if(t=Fi(d)+1,a=d.d.length-1,i=a*Qn+1,a=d.d[a],a){for(;a%10==0;a/=10)i--;for(a=d.d[0];a>=10;a/=10)i++}return e&&t>i?t:i};Ht.squareRoot=Ht.sqrt=function(){var e,t,i,a,d,g,v,u=this,M=u.constructor;if(u.s<1){if(!u.s)return new M(0);throw Error($l+"NaN")}for(e=Fi(u),ii=!1,d=Math.sqrt(+u),d==0||d==1/0?(t=Uc(u.d),(t.length+e)%2==0&&(t+="0"),d=Math.sqrt(t),e=sy((e+1)/2)-(e<0||e%2),d==1/0?t="5e"+e:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new M(t)):a=new M(d.toString()),i=M.precision,d=v=i+3;;)if(g=a,a=g.plus(af(u,g,v+2)).times(.5),Uc(g.d).slice(0,v)===(t=Uc(a.d)).slice(0,v)){if(t=t.slice(v-3,v+1),d==v&&t=="4999"){if(Fn(g,i+1,0),g.times(g).eq(u)){a=g;break}}else if(t!="9999")break;v+=4}return ii=!0,Fn(a,i)};Ht.times=Ht.mul=function(e){var t,i,a,d,g,v,u,M,C,D=this,I=D.constructor,N=D.d,G=(e=new I(e)).d;if(!D.s||!e.s)return new I(0);for(e.s*=D.s,i=D.e+e.e,M=N.length,C=G.length,M<C&&(g=N,N=G,G=g,v=M,M=C,C=v),g=[],v=M+C,a=v;a--;)g.push(0);for(a=C;--a>=0;){for(t=0,d=M+a;d>a;)u=g[d]+G[a]*N[d-a-1]+t,g[d--]=u%va|0,t=u/va|0;g[d]=(g[d]+t)%va|0}for(;!g[--v];)g.pop();return t?++i:g.shift(),e.d=g,e.e=i,ii?Fn(e,I.precision):e};Ht.toDecimalPlaces=Ht.todp=function(e,t){var i=this,a=i.constructor;return i=new a(i),e===void 0?i:(Zc(e,0,oy),t===void 0?t=a.rounding:Zc(t,0,8),Fn(i,e+Fi(i)+1,t))};Ht.toExponential=function(e,t){var i,a=this,d=a.constructor;return e===void 0?i=om(a,!0):(Zc(e,0,oy),t===void 0?t=d.rounding:Zc(t,0,8),a=Fn(new d(a),e+1,t),i=om(a,!0,e+1)),i};Ht.toFixed=function(e,t){var i,a,d=this,g=d.constructor;return e===void 0?om(d):(Zc(e,0,oy),t===void 0?t=g.rounding:Zc(t,0,8),a=Fn(new g(d),e+Fi(d)+1,t),i=om(a.abs(),!1,e+Fi(a)+1),d.isneg()&&!d.isZero()?"-"+i:i)};Ht.toInteger=Ht.toint=function(){var e=this,t=e.constructor;return Fn(new t(e),Fi(e)+1,t.rounding)};Ht.toNumber=function(){return+this};Ht.toPower=Ht.pow=function(e){var t,i,a,d,g,v,u=this,M=u.constructor,C=12,D=+(e=new M(e));if(!e.s)return new M(Ks);if(u=new M(u),!u.s){if(e.s<1)throw Error($l+"Infinity");return u}if(u.eq(Ks))return u;if(a=M.precision,e.eq(Ks))return Fn(u,a);if(t=e.e,i=e.d.length-1,v=t>=i,g=u.s,v){if((i=D<0?-D:D)<=Uz){for(d=new M(Ks),t=Math.ceil(a/Qn+4),ii=!1;i%2&&(d=d.times(u),GP(d.d,t)),i=sy(i/2),i!==0;)u=u.times(u),GP(u.d,t);return ii=!0,e.s<0?new M(Ks).div(d):Fn(d,a)}}else if(g<0)throw Error($l+"NaN");return g=g<0&&e.d[Math.max(t,i)]&1?-1:1,u.s=1,ii=!1,d=e.times(Hv(u,a+C)),ii=!0,d=qz(d),d.s=g,d};Ht.toPrecision=function(e,t){var i,a,d=this,g=d.constructor;return e===void 0?(i=Fi(d),a=om(d,i<=g.toExpNeg||i>=g.toExpPos)):(Zc(e,1,oy),t===void 0?t=g.rounding:Zc(t,0,8),d=Fn(new g(d),e,t),i=Fi(d),a=om(d,e<=i||i<=g.toExpNeg,e)),a};Ht.toSignificantDigits=Ht.tosd=function(e,t){var i=this,a=i.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Zc(e,1,oy),t===void 0?t=a.rounding:Zc(t,0,8)),Fn(new a(i),e,t)};Ht.toString=Ht.valueOf=Ht.val=Ht.toJSON=Ht[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Fi(e),i=e.constructor;return om(e,t<=i.toExpNeg||t>=i.toExpPos)};function Vz(e,t){var i,a,d,g,v,u,M,C,D=e.constructor,I=D.precision;if(!e.s||!t.s)return t.s||(t=new D(e)),ii?Fn(t,I):t;if(M=e.d,C=t.d,v=e.e,d=t.e,M=M.slice(),g=v-d,g){for(g<0?(a=M,g=-g,u=C.length):(a=C,d=v,u=M.length),v=Math.ceil(I/Qn),u=v>u?v+1:u+1,g>u&&(g=u,a.length=1),a.reverse();g--;)a.push(0);a.reverse()}for(u=M.length,g=C.length,u-g<0&&(g=u,a=C,C=M,M=a),i=0;g;)i=(M[--g]=M[g]+C[g]+i)/va|0,M[g]%=va;for(i&&(M.unshift(i),++d),u=M.length;M[--u]==0;)M.pop();return t.d=M,t.e=d,ii?Fn(t,I):t}function Zc(e,t,i){if(e!==~~e||e<t||e>i)throw Error(Jp+e)}function Uc(e){var t,i,a,d=e.length-1,g="",v=e[0];if(d>0){for(g+=v,t=1;t<d;t++)a=e[t]+"",i=Qn-a.length,i&&(g+=bd(i)),g+=a;v=e[t],a=v+"",i=Qn-a.length,i&&(g+=bd(i))}else if(v===0)return"0";for(;v%10===0;)v/=10;return g+v}var af=(function(){function e(a,d){var g,v=0,u=a.length;for(a=a.slice();u--;)g=a[u]*d+v,a[u]=g%va|0,v=g/va|0;return v&&a.unshift(v),a}function t(a,d,g,v){var u,M;if(g!=v)M=g>v?1:-1;else for(u=M=0;u<g;u++)if(a[u]!=d[u]){M=a[u]>d[u]?1:-1;break}return M}function i(a,d,g){for(var v=0;g--;)a[g]-=v,v=a[g]<d[g]?1:0,a[g]=v*va+a[g]-d[g];for(;!a[0]&&a.length>1;)a.shift()}return function(a,d,g,v){var u,M,C,D,I,N,G,Y,H,$,se,he,fe,me,Ae,ge,Se,Ue,et=a.constructor,vt=a.s==d.s?1:-1,pt=a.d,Fe=d.d;if(!a.s)return new et(a);if(!d.s)throw Error($l+"Division by zero");for(M=a.e-d.e,Se=Fe.length,Ae=pt.length,G=new et(vt),Y=G.d=[],C=0;Fe[C]==(pt[C]||0);)++C;if(Fe[C]>(pt[C]||0)&&--M,g==null?he=g=et.precision:v?he=g+(Fi(a)-Fi(d))+1:he=g,he<0)return new et(0);if(he=he/Qn+2|0,C=0,Se==1)for(D=0,Fe=Fe[0],he++;(C<Ae||D)&&he--;C++)fe=D*va+(pt[C]||0),Y[C]=fe/Fe|0,D=fe%Fe|0;else{for(D=va/(Fe[0]+1)|0,D>1&&(Fe=e(Fe,D),pt=e(pt,D),Se=Fe.length,Ae=pt.length),me=Se,H=pt.slice(0,Se),$=H.length;$<Se;)H[$++]=0;Ue=Fe.slice(),Ue.unshift(0),ge=Fe[0],Fe[1]>=va/2&&++ge;do D=0,u=t(Fe,H,Se,$),u<0?(se=H[0],Se!=$&&(se=se*va+(H[1]||0)),D=se/ge|0,D>1?(D>=va&&(D=va-1),I=e(Fe,D),N=I.length,$=H.length,u=t(I,H,N,$),u==1&&(D--,i(I,Se<N?Ue:Fe,N))):(D==0&&(u=D=1),I=Fe.slice()),N=I.length,N<$&&I.unshift(0),i(H,I,$),u==-1&&($=H.length,u=t(Fe,H,Se,$),u<1&&(D++,i(H,Se<$?Ue:Fe,$))),$=H.length):u===0&&(D++,H=[0]),Y[C++]=D,u&&H[0]?H[$++]=pt[me]||0:(H=[pt[me]],$=1);while((me++<Ae||H[0]!==void 0)&&he--)}return Y[0]||Y.shift(),G.e=M,Fn(G,v?g+Fi(G)+1:g)}})();function qz(e,t){var i,a,d,g,v,u,M=0,C=0,D=e.constructor,I=D.precision;if(Fi(e)>16)throw Error(hT+Fi(e));if(!e.s)return new D(Ks);for(ii=!1,u=I,v=new D(.03125);e.abs().gte(.1);)e=e.times(v),C+=5;for(a=Math.log(Gp(2,C))/Math.LN10*2+5|0,u+=a,i=d=g=new D(Ks),D.precision=u;;){if(d=Fn(d.times(e),u),i=i.times(++M),v=g.plus(af(d,i,u)),Uc(v.d).slice(0,u)===Uc(g.d).slice(0,u)){for(;C--;)g=Fn(g.times(g),u);return D.precision=I,t==null?(ii=!0,Fn(g,I)):g}g=v}}function Fi(e){for(var t=e.e*Qn,i=e.d[0];i>=10;i/=10)t++;return t}function Fw(e,t,i){if(t>e.LN10.sd())throw ii=!0,i&&(e.precision=i),Error($l+"LN10 precision limit exceeded");return Fn(new e(e.LN10),t)}function bd(e){for(var t="";e--;)t+="0";return t}function Hv(e,t){var i,a,d,g,v,u,M,C,D,I=1,N=10,G=e,Y=G.d,H=G.constructor,$=H.precision;if(G.s<1)throw Error($l+(G.s?"NaN":"-Infinity"));if(G.eq(Ks))return new H(0);if(t==null?(ii=!1,C=$):C=t,G.eq(10))return t==null&&(ii=!0),Fw(H,C);if(C+=N,H.precision=C,i=Uc(Y),a=i.charAt(0),g=Fi(G),Math.abs(g)<15e14){for(;a<7&&a!=1||a==1&&i.charAt(1)>3;)G=G.times(e),i=Uc(G.d),a=i.charAt(0),I++;g=Fi(G),a>1?(G=new H("0."+i),g++):G=new H(a+"."+i.slice(1))}else return M=Fw(H,C+2,$).times(g+""),G=Hv(new H(a+"."+i.slice(1)),C-N).plus(M),H.precision=$,t==null?(ii=!0,Fn(G,$)):G;for(u=v=G=af(G.minus(Ks),G.plus(Ks),C),D=Fn(G.times(G),C),d=3;;){if(v=Fn(v.times(D),C),M=u.plus(af(v,new H(d),C)),Uc(M.d).slice(0,C)===Uc(u.d).slice(0,C))return u=u.times(2),g!==0&&(u=u.plus(Fw(H,C+2,$).times(g+""))),u=af(u,new H(I),C),H.precision=$,t==null?(ii=!0,Fn(u,$)):u;u=M,d+=2}}function $P(e,t){var i,a,d;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(i<0&&(i=a),i+=+t.slice(a+1),t=t.substring(0,a)):i<0&&(i=t.length),a=0;t.charCodeAt(a)===48;)++a;for(d=t.length;t.charCodeAt(d-1)===48;)--d;if(t=t.slice(a,d),t){if(d-=a,i=i-a-1,e.e=sy(i/Qn),e.d=[],a=(i+1)%Qn,i<0&&(a+=Qn),a<d){for(a&&e.d.push(+t.slice(0,a)),d-=Qn;a<d;)e.d.push(+t.slice(a,a+=Qn));t=t.slice(a),a=Qn-t.length}else a-=d;for(;a--;)t+="0";if(e.d.push(+t),ii&&(e.e>Bx||e.e<-Bx))throw Error(hT+i)}else e.s=0,e.e=0,e.d=[0];return e}function Fn(e,t,i){var a,d,g,v,u,M,C,D,I=e.d;for(v=1,g=I[0];g>=10;g/=10)v++;if(a=t-v,a<0)a+=Qn,d=t,C=I[D=0];else{if(D=Math.ceil((a+1)/Qn),g=I.length,D>=g)return e;for(C=g=I[D],v=1;g>=10;g/=10)v++;a%=Qn,d=a-Qn+v}if(i!==void 0&&(g=Gp(10,v-d-1),u=C/g%10|0,M=t<0||I[D+1]!==void 0||C%g,M=i<4?(u||M)&&(i==0||i==(e.s<0?3:2)):u>5||u==5&&(i==4||M||i==6&&(a>0?d>0?C/Gp(10,v-d):0:I[D-1])%10&1||i==(e.s<0?8:7))),t<1||!I[0])return M?(g=Fi(e),I.length=1,t=t-g-1,I[0]=Gp(10,(Qn-t%Qn)%Qn),e.e=sy(-t/Qn)||0):(I.length=1,I[0]=e.e=e.s=0),e;if(a==0?(I.length=D,g=1,D--):(I.length=D+1,g=Gp(10,Qn-a),I[D]=d>0?(C/Gp(10,v-d)%Gp(10,d)|0)*g:0),M)for(;;)if(D==0){(I[0]+=g)==va&&(I[0]=1,++e.e);break}else{if(I[D]+=g,I[D]!=va)break;I[D--]=0,g=1}for(a=I.length;I[--a]===0;)I.pop();if(ii&&(e.e>Bx||e.e<-Bx))throw Error(hT+Fi(e));return e}function $z(e,t){var i,a,d,g,v,u,M,C,D,I,N=e.constructor,G=N.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new N(e),ii?Fn(t,G):t;if(M=e.d,I=t.d,a=t.e,C=e.e,M=M.slice(),v=C-a,v){for(D=v<0,D?(i=M,v=-v,u=I.length):(i=I,a=C,u=M.length),d=Math.max(Math.ceil(G/Qn),u)+2,v>d&&(v=d,i.length=1),i.reverse(),d=v;d--;)i.push(0);i.reverse()}else{for(d=M.length,u=I.length,D=d<u,D&&(u=d),d=0;d<u;d++)if(M[d]!=I[d]){D=M[d]<I[d];break}v=0}for(D&&(i=M,M=I,I=i,t.s=-t.s),u=M.length,d=I.length-u;d>0;--d)M[u++]=0;for(d=I.length;d>v;){if(M[--d]<I[d]){for(g=d;g&&M[--g]===0;)M[g]=va-1;--M[g],M[d]+=va}M[d]-=I[d]}for(;M[--u]===0;)M.pop();for(;M[0]===0;M.shift())--a;return M[0]?(t.d=M,t.e=a,ii?Fn(t,G):t):new N(0)}function om(e,t,i){var a,d=Fi(e),g=Uc(e.d),v=g.length;return t?(i&&(a=i-v)>0?g=g.charAt(0)+"."+g.slice(1)+bd(a):v>1&&(g=g.charAt(0)+"."+g.slice(1)),g=g+(d<0?"e":"e+")+d):d<0?(g="0."+bd(-d-1)+g,i&&(a=i-v)>0&&(g+=bd(a))):d>=v?(g+=bd(d+1-v),i&&(a=i-d-1)>0&&(g=g+"."+bd(a))):((a=d+1)<v&&(g=g.slice(0,a)+"."+g.slice(a)),i&&(a=i-v)>0&&(d+1===v&&(g+="."),g+=bd(a))),e.s<0?"-"+g:g}function GP(e,t){if(e.length>t)return e.length=t,!0}function Gz(e){var t,i,a;function d(g){var v=this;if(!(v instanceof d))return new d(g);if(v.constructor=d,g instanceof d){v.s=g.s,v.e=g.e,v.d=(g=g.d)?g.slice():g;return}if(typeof g=="number"){if(g*0!==0)throw Error(Jp+g);if(g>0)v.s=1;else if(g<0)g=-g,v.s=-1;else{v.s=0,v.e=0,v.d=[0];return}if(g===~~g&&g<1e7){v.e=0,v.d=[g];return}return $P(v,g.toString())}else if(typeof g!="string")throw Error(Jp+g);if(g.charCodeAt(0)===45?(g=g.slice(1),v.s=-1):v.s=1,aq.test(g))$P(v,g);else throw Error(Jp+g)}if(d.prototype=Ht,d.ROUND_UP=0,d.ROUND_DOWN=1,d.ROUND_CEIL=2,d.ROUND_FLOOR=3,d.ROUND_HALF_UP=4,d.ROUND_HALF_DOWN=5,d.ROUND_HALF_EVEN=6,d.ROUND_HALF_CEIL=7,d.ROUND_HALF_FLOOR=8,d.clone=Gz,d.config=d.set=oq,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(i=a[t++])||(e[i]=this[i]);return d.config(e),d}function oq(e){if(!e||typeof e!="object")throw Error($l+"Object expected");var t,i,a,d=["precision",1,oy,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<d.length;t+=3)if((a=e[i=d[t]])!==void 0)if(sy(a)===a&&a>=d[t+1]&&a<=d[t+2])this[i]=a;else throw Error(Jp+i+": "+a);if((a=e[i="LN10"])!==void 0)if(a==Math.LN10)this[i]=new this(a);else throw Error(Jp+i+": "+a);return this}var fT=Gz(iq);Ks=new fT(1);const xn=fT;function Zz(e){var t;return e===0?t=1:t=Math.floor(new xn(e).abs().log(10).toNumber())+1,t}function Hz(e,t,i){for(var a=new xn(e),d=0,g=[];a.lt(t)&&d<1e5;)g.push(a.toNumber()),a=a.add(i),d++;return g}var Wz=e=>{var[t,i]=e,[a,d]=[t,i];return t>i&&([a,d]=[i,t]),[a,d]},Yz=(e,t,i)=>{if(e.lte(0))return new xn(0);var a=Zz(e.toNumber()),d=new xn(10).pow(a),g=e.div(d),v=a!==1?.05:.1,u=new xn(Math.ceil(g.div(v).toNumber())).add(i).mul(v),M=u.mul(d);return t?new xn(M.toNumber()):new xn(Math.ceil(M.toNumber()))},sq=(e,t,i)=>{var a=new xn(1),d=new xn(e);if(!d.isint()&&i){var g=Math.abs(e);g<1?(a=new xn(10).pow(Zz(e)-1),d=new xn(Math.floor(d.div(a).toNumber())).mul(a)):g>1&&(d=new xn(Math.floor(e)))}else e===0?d=new xn(Math.floor((t-1)/2)):i||(d=new xn(Math.floor(e)));for(var v=Math.floor((t-1)/2),u=[],M=0;M<t;M++)u.push(d.add(new xn(M-v).mul(a)).toNumber());return u},Xz=function(t,i,a,d){var g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((i-t)/(a-1)))return{step:new xn(0),tickMin:new xn(0),tickMax:new xn(0)};var v=Yz(new xn(i).sub(t).div(a-1),d,g),u;t<=0&&i>=0?u=new xn(0):(u=new xn(t).add(i).div(2),u=u.sub(new xn(u).mod(v)));var M=Math.ceil(u.sub(t).div(v).toNumber()),C=Math.ceil(new xn(i).sub(u).div(v).toNumber()),D=M+C+1;return D>a?Xz(t,i,a,d,g+1):(D<a&&(C=i>0?C+(a-D):C,M=i>0?M:M+(a-D)),{step:v,tickMin:u.sub(new xn(M).mul(v)),tickMax:u.add(new xn(C).mul(v))})},lq=function(t){var[i,a]=t,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,v=Math.max(d,2),[u,M]=Wz([i,a]);if(u===-1/0||M===1/0){var C=M===1/0?[u,...Array(d-1).fill(1/0)]:[...Array(d-1).fill(-1/0),M];return i>a?C.reverse():C}if(u===M)return sq(u,d,g);var{step:D,tickMin:I,tickMax:N}=Xz(u,M,v,g,0),G=Hz(I,N.add(new xn(.1).mul(D)),D);return i>a?G.reverse():G},uq=function(t,i){var[a,d]=t,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[v,u]=Wz([a,d]);if(v===-1/0||u===1/0)return[a,d];if(v===u)return[v];var M=Math.max(i,2),C=Yz(new xn(u).sub(v).div(M-1),g,0),D=[...Hz(new xn(v),new xn(u),C),u];return g===!1&&(D=D.map(I=>Math.round(I))),a>d?D.reverse():D},Kz=e=>e.rootProps.maxBarSize,cq=e=>e.rootProps.barGap,Qz=e=>e.rootProps.barCategoryGap,hq=e=>e.rootProps.barSize,Db=e=>e.rootProps.stackOffset,Jz=e=>e.rootProps.reverseStackOrder,dT=e=>e.options.chartName,pT=e=>e.rootProps.syncId,ek=e=>e.rootProps.syncMethod,mT=e=>e.options.eventEmitter,fq=e=>e.rootProps.baseValue,Qi={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Vp={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},jc={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Ob=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Ib(e,t,i){if(i!=="auto")return i;if(e!=null)return Hu(e,t)?"category":"number"}function ZP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Nx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(i),!0).forEach(function(a){dq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function dq(e,t,i){return(t=pq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function pq(e){var t=mq(e,"string");return typeof t=="symbol"?t:t+""}function mq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HP={allowDataOverflow:Vp.allowDataOverflow,allowDecimals:Vp.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vp.angleAxisId,includeHidden:!1,name:void 0,reversed:Vp.reversed,scale:Vp.scale,tick:Vp.tick,tickCount:void 0,ticks:void 0,type:Vp.type,unit:void 0},WP={allowDataOverflow:jc.allowDataOverflow,allowDecimals:jc.allowDecimals,allowDuplicatedCategory:jc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jc.radiusAxisId,includeHidden:jc.includeHidden,name:void 0,reversed:jc.reversed,scale:jc.scale,tick:jc.tick,tickCount:jc.tickCount,ticks:void 0,type:jc.type,unit:void 0},gq=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},gT=it([gq,UI],(e,t)=>{var i;if(e!=null)return e;var a=(i=Ib(t,"angleAxis",HP.type))!==null&&i!==void 0?i:"category";return Nx(Nx({},HP),{},{type:a})}),yq=(e,t)=>e.polarAxis.radiusAxis[t],yT=it([yq,UI],(e,t)=>{var i;if(e!=null)return e;var a=(i=Ib(t,"radiusAxis",WP.type))!==null&&i!==void 0?i:"category";return Nx(Nx({},WP),{},{type:a})}),zb=e=>e.polarOptions,vT=it([gf,yf,xa],p8),tk=it([zb,vT],(e,t)=>{if(e!=null)return $u(e.innerRadius,t,0)}),rk=it([zb,vT],(e,t)=>{if(e!=null)return $u(e.outerRadius,t,t*.8)}),vq=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:i}=e;return[t,i]},nk=it([zb],vq);it([gT,nk],Ob);var ik=it([vT,tk,rk],(e,t,i)=>{if(!(e==null||t==null||i==null))return[t,i]});it([yT,ik],Ob);var ak=it([an,zb,tk,rk,gf,yf],(e,t,i,a,d,g)=>{if(!(e!=="centric"&&e!=="radial"||t==null||i==null||a==null)){var{cx:v,cy:u,startAngle:M,endAngle:C}=t;return{cx:$u(v,d,d/2),cy:$u(u,g,g/2),innerRadius:i,outerRadius:a,startAngle:M,endAngle:C,clockWise:!1}}}),Sa=(e,t)=>t,kb=(e,t,i)=>i;function Rb(e){return e?.id}function ok(e,t,i){var{chartData:a=[]}=t,{allowDuplicatedCategory:d,dataKey:g}=i,v=new Map;return e.forEach(u=>{var M,C=(M=u.data)!==null&&M!==void 0?M:a;if(!(C==null||C.length===0)){var D=Rb(u);C.forEach((I,N)=>{var G=g==null||d?N:String(Ai(I,g,null)),Y=Ai(I,u.dataKey,0),H;v.has(G)?H=v.get(G):H={},Object.assign(H,{[D]:Y}),v.set(G,H)})}}),Array.from(v.values())}function Lb(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var jb=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Bb(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function _q(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return!1}var Ta=e=>{var t=an(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ly=e=>e.tooltip.settings.axisId;function xq(e){if(e in Mv)return Mv[e]();var t="scale".concat(r_(e));if(t in Mv)return Mv[t]()}function YP(e){var t=e.ticks,i=e.bandwidth,a=e.range(),d=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(g){function v(){return g.apply(this,arguments)}return v.toString=function(){return g.toString()},v})(()=>d),rangeMin:()=>d[0],rangeMax:()=>d[1],isInRange(g){var v=d[0],u=d[1];return v<=u?g>=v&&g<=u:g>=u&&g<=v},bandwidth:i?()=>i.call(e):void 0,ticks:t?g=>t.call(e,g):void 0,map:(g,v)=>{var u=e(g);if(u!=null){if(e.bandwidth&&v!==null&&v!==void 0&&v.position){var M=e.bandwidth();switch(v.position){case"middle":u+=M/2;break;case"end":u+=M;break}}return u}}}}function XP(e,t,i){if(typeof e=="function")return YP(e.copy().domain(t).range(i));if(e!=null){var a=xq(e);if(a!=null)return a.domain(t).range(i),YP(a)}}var bq=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!ff(t)){for(var i,a,d=0;d<t.length;d++){var g=t[d];Dr(g)&&((i===void 0||g<i)&&(i=g),(a===void 0||g>a)&&(a=g))}return i!==void 0&&a!==void 0?[i,a]:void 0}return t}default:return t}};function KP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Fx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(i),!0).forEach(function(a){wq(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KP(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function wq(e,t,i){return(t=Sq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Sq(e){var t=Tq(e,"string");return typeof t=="symbol"?t:t+""}function Tq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G2=[0,"auto"],ga={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},sk=(e,t)=>e.cartesianAxis.xAxis[t],xf=(e,t)=>{var i=sk(e,t);return i??ga},ya={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:G2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:a_},lk=(e,t)=>e.cartesianAxis.yAxis[t],bf=(e,t)=>{var i=lk(e,t);return i??ya},Eq={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_T=(e,t)=>{var i=e.cartesianAxis.zAxis[t];return i??Eq},$o=(e,t,i)=>{switch(t){case"xAxis":return xf(e,i);case"yAxis":return bf(e,i);case"zAxis":return _T(e,i);case"angleAxis":return gT(e,i);case"radiusAxis":return yT(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},Aq=(e,t,i)=>{switch(t){case"xAxis":return xf(e,i);case"yAxis":return bf(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},m_=(e,t,i)=>{switch(t){case"xAxis":return xf(e,i);case"yAxis":return bf(e,i);case"angleAxis":return gT(e,i);case"radiusAxis":return yT(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},uk=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function ck(e,t){return i=>{switch(e){case"xAxis":return"xAxisId"in i&&i.xAxisId===t;case"yAxis":return"yAxisId"in i&&i.yAxisId===t;case"zAxis":return"zAxisId"in i&&i.zAxisId===t;case"angleAxis":return"angleAxisId"in i&&i.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in i&&i.radiusAxisId===t;default:return!1}}}var g_=e=>e.graphicalItems.cartesianItems,Mq=it([Sa,kb],ck),hk=(e,t,i)=>e.filter(i).filter(a=>t?.includeHidden===!0?!0:!a.hide),y_=it([g_,$o,Mq],hk,{memoizeOptions:{resultEqualityCheck:Bb}}),fk=it([y_],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Lb)),dk=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Pq=it([y_],dk),pk=e=>e.map(t=>t.data).filter(Boolean).flat(1),Cq=it([y_],pk,{memoizeOptions:{resultEqualityCheck:Bb}}),mk=(e,t)=>{var{chartData:i=[],dataStartIndex:a,dataEndIndex:d}=t;return e.length>0?e:i.slice(a,d+1)},xT=it([Cq,cT],mk),gk=(e,t,i)=>t?.dataKey!=null?e.map(a=>({value:Ai(a,t.dataKey)})):i.length>0?i.map(a=>a.dataKey).flatMap(a=>e.map(d=>({value:Ai(d,a)}))):e.map(a=>({value:a})),Nb=it([xT,$o,y_],gk);function yk(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function K0(e){if($c(e)||e instanceof Date){var t=Number(e);if(Dr(t))return t}}function QP(e){if(Array.isArray(e)){var t=[K0(e[0]),K0(e[1])];return ff(t)?t:void 0}var i=K0(e);if(i!=null)return[i,i]}function df(e){return e.map(K0).filter(xs)}function Dq(e,t,i){return!i||typeof t!="number"||qu(t)?[]:i.length?df(i.flatMap(a=>{var d=Ai(e,a.dataKey),g,v;if(Array.isArray(d)?[g,v]=d:g=v=d,!(!Dr(g)||!Dr(v)))return[t-g,t+v]})):[]}var ea=e=>{var t=Ta(e),i=ly(e);return m_(e,t,i)},v_=it([ea],e=>e?.dataKey),Oq=it([fk,cT,ea],ok),vk=(e,t,i,a)=>{var d={},g=t.reduce((v,u)=>{if(u.stackId==null)return v;var M=v[u.stackId];return M==null&&(M=[]),M.push(u),v[u.stackId]=M,v},d);return Object.fromEntries(Object.entries(g).map(v=>{var[u,M]=v,C=a?[...M].reverse():M,D=C.map(Rb);return[u,{stackedData:oF(e,D,i),graphicalItems:C}]}))},Ux=it([Oq,fk,Db,Jz],vk),_k=(e,t,i,a)=>{var{dataStartIndex:d,dataEndIndex:g}=t;if(a==null&&i!=="zAxis"){var v=cF(e,d,g);if(!(v!=null&&v[0]===0&&v[1]===0))return v}},Iq=it([$o],e=>e.allowDataOverflow),bT=e=>{var t;if(e==null||!("domain"in e))return G2;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var i=df(e.ticks);return[Math.min(...i),Math.max(...i)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:G2},xk=it([$o],bT),bk=it([xk,Iq],Fz),zq=it([Ux,_f,Sa,bk],_k,{memoizeOptions:{resultEqualityCheck:jb}}),wT=e=>e.errorBars,kq=(e,t,i)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>yk(i,a)),Vx=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var d=i.filter(Boolean);if(d.length!==0){var g=d.flat(),v=Math.min(...g),u=Math.max(...g);return[v,u]}},wk=(e,t,i,a,d)=>{var g,v;if(i.length>0&&e.forEach(u=>{i.forEach(M=>{var C,D,I=(C=a[M.id])===null||C===void 0?void 0:C.filter(se=>yk(d,se)),N=Ai(u,(D=t.dataKey)!==null&&D!==void 0?D:M.dataKey),G=Dq(u,N,I);if(G.length>=2){var Y=Math.min(...G),H=Math.max(...G);(g==null||Y<g)&&(g=Y),(v==null||H>v)&&(v=H)}var $=QP(N);$!=null&&(g=g==null?$[0]:Math.min(g,$[0]),v=v==null?$[1]:Math.max(v,$[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var M=QP(Ai(u,t.dataKey));M!=null&&(g=g==null?M[0]:Math.min(g,M[0]),v=v==null?M[1]:Math.max(v,M[1]))}),Dr(g)&&Dr(v))return[g,v]},Rq=it([xT,$o,Pq,wT,Sa],wk,{memoizeOptions:{resultEqualityCheck:jb}});function Lq(e){var{value:t}=e;if($c(t)||t instanceof Date)return t}var jq=(e,t,i)=>{var a=e.map(Lq).filter(d=>d!=null);return i&&(t.dataKey==null||t.allowDuplicatedCategory&&BO(a))?iz(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},Sk=e=>e.referenceElements.dots,uy=(e,t,i)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===i:a.yAxisId===i),Bq=it([Sk,Sa,kb],uy),Tk=e=>e.referenceElements.areas,Nq=it([Tk,Sa,kb],uy),Ek=e=>e.referenceElements.lines,Fq=it([Ek,Sa,kb],uy),Ak=(e,t)=>{if(e!=null){var i=df(e.map(a=>t==="xAxis"?a.x:a.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},Uq=it(Bq,Sa,Ak),Mk=(e,t)=>{if(e!=null){var i=df(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},Vq=it([Nq,Sa],Mk);function qq(e){var t;if(e.x!=null)return df([e.x]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return i==null||i.length===0?[]:df(i)}function $q(e){var t;if(e.y!=null)return df([e.y]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return i==null||i.length===0?[]:df(i)}var Pk=(e,t)=>{if(e!=null){var i=e.flatMap(a=>t==="xAxis"?qq(a):$q(a));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},Gq=it([Fq,Sa],Pk),Zq=it(Uq,Gq,Vq,(e,t,i)=>Vx(e,i,t)),Ck=(e,t,i,a,d,g,v,u)=>{if(i!=null)return i;var M=v==="vertical"&&u==="xAxis"||v==="horizontal"&&u==="yAxis",C=M?Vx(a,g,d):Vx(g,d);return nq(t,C,e.allowDataOverflow)},Hq=it([$o,xk,bk,zq,Rq,Zq,an,Sa],Ck,{memoizeOptions:{resultEqualityCheck:jb}}),Wq=[0,1],Dk=(e,t,i,a,d,g,v)=>{if(!((e==null||i==null||i.length===0)&&v===void 0)){var{dataKey:u,type:M}=e,C=Hu(t,g);if(C&&u==null){var D;return iz(0,(D=i?.length)!==null&&D!==void 0?D:0)}return M==="category"?jq(a,e,C):d==="expand"?Wq:v}},ST=it([$o,an,xT,Nb,Db,Sa,Hq],Dk);function Yq(e){return e in Mv}var Ok=(e,t,i)=>{if(e!=null){var{scale:a,type:d}=e;if(a==="auto")return d==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!t)?"point":d==="category"?"band":"linear";if(typeof a=="string"){var g="scale".concat(r_(a));return Yq(g)?g:"point"}}},cy=it([$o,uk,dT],Ok);function TT(e,t,i,a){if(!(i==null||a==null))return typeof e.scale=="function"?XP(e.scale,i,a):XP(t,i,a)}var Ik=(e,t,i)=>{var a=bT(t);if(!(i!=="auto"&&i!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&ff(e))return lq(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ff(e))return uq(e,t.tickCount,t.allowDecimals)}},ET=it([ST,m_,cy],Ik),zk=(e,t,i,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&ff(t)&&Array.isArray(i)&&i.length>0){var d,g,v=t[0],u=(d=i[0])!==null&&d!==void 0?d:0,M=t[1],C=(g=i[i.length-1])!==null&&g!==void 0?g:0;return[Math.min(v,u),Math.max(M,C)]}return t},Xq=it([$o,ST,ET,Sa],zk),Kq=it(Nb,$o,(e,t)=>{if(!(!t||t.type!=="number")){var i=1/0,a=Array.from(df(e.map(I=>I.value))).sort((I,N)=>I-N),d=a[0],g=a[a.length-1];if(d==null||g==null)return 1/0;var v=g-d;if(v===0)return 1/0;for(var u=0;u<a.length-1;u++){var M=a[u],C=a[u+1];if(!(M==null||C==null)){var D=C-M;i=Math.min(i,D)}}return i/v}}),kk=it(Kq,an,Qz,xa,(e,t,i,a,d)=>d,(e,t,i,a,d)=>{if(!Dr(e))return 0;var g=t==="vertical"?a.height:a.width;if(d==="gap")return e*g/2;if(d==="no-gap"){var v=$u(i,e*g),u=e*g/2;return u-v-(u-v)/g*v}return 0}),Qq=(e,t,i)=>{var a=xf(e,t);return a==null||typeof a.padding!="string"?0:kk(e,"xAxis",t,i,a.padding)},Jq=(e,t,i)=>{var a=bf(e,t);return a==null||typeof a.padding!="string"?0:kk(e,"yAxis",t,i,a.padding)},e$=it(xf,Qq,(e,t)=>{var i,a;if(e==null)return{left:0,right:0};var{padding:d}=e;return typeof d=="string"?{left:t,right:t}:{left:((i=d.left)!==null&&i!==void 0?i:0)+t,right:((a=d.right)!==null&&a!==void 0?a:0)+t}}),t$=it(bf,Jq,(e,t)=>{var i,a;if(e==null)return{top:0,bottom:0};var{padding:d}=e;return typeof d=="string"?{top:t,bottom:t}:{top:((i=d.top)!==null&&i!==void 0?i:0)+t,bottom:((a=d.bottom)!==null&&a!==void 0?a:0)+t}}),r$=it([xa,e$,_b,vb,(e,t,i)=>i],(e,t,i,a,d)=>{var{padding:g}=a;return d?[g.left,i.width-g.right]:[e.left+t.left,e.left+e.width-t.right]}),n$=it([xa,an,t$,_b,vb,(e,t,i)=>i],(e,t,i,a,d,g)=>{var{padding:v}=d;return g?[a.height-v.bottom,v.top]:t==="horizontal"?[e.top+e.height-i.bottom,e.top+i.top]:[e.top+i.top,e.top+e.height-i.bottom]}),__=(e,t,i,a)=>{var d;switch(t){case"xAxis":return r$(e,i,a);case"yAxis":return n$(e,i,a);case"zAxis":return(d=_T(e,i))===null||d===void 0?void 0:d.range;case"angleAxis":return nk(e);case"radiusAxis":return ik(e,i);default:return}},Rk=it([$o,__],Ob),i$=it([cy,Xq],bq),Fb=it([$o,cy,i$,Rk],TT);it([y_,wT,Sa],kq);function Lk(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ub=(e,t)=>t,Vb=(e,t,i)=>i,a$=it(gb,Ub,Vb,(e,t,i)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===i).sort(Lk)),o$=it(yb,Ub,Vb,(e,t,i)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===i).sort(Lk)),jk=(e,t)=>({width:e.width,height:t.height}),s$=(e,t)=>{var i=typeof t.width=="number"?t.width:a_;return{width:i,height:e.height}},Bk=it(xa,xf,jk),l$=(e,t,i)=>{switch(t){case"top":return e.top;case"bottom":return i-e.bottom;default:return 0}},u$=(e,t,i)=>{switch(t){case"left":return e.left;case"right":return i-e.right;default:return 0}},c$=it(yf,xa,a$,Ub,Vb,(e,t,i,a,d)=>{var g={},v;return i.forEach(u=>{var M=jk(t,u);v==null&&(v=l$(t,a,e));var C=a==="top"&&!d||a==="bottom"&&d;g[u.id]=v-Number(C)*M.height,v+=(C?-1:1)*M.height}),g}),h$=it(gf,xa,o$,Ub,Vb,(e,t,i,a,d)=>{var g={},v;return i.forEach(u=>{var M=s$(t,u);v==null&&(v=u$(t,a,e));var C=a==="left"&&!d||a==="right"&&d;g[u.id]=v-Number(C)*M.width,v+=(C?-1:1)*M.width}),g}),f$=(e,t)=>{var i=xf(e,t);if(i!=null)return c$(e,i.orientation,i.mirror)},d$=it([xa,xf,f$,(e,t)=>t],(e,t,i,a)=>{if(t!=null){var d=i?.[a];return d==null?{x:e.left,y:0}:{x:e.left,y:d}}}),p$=(e,t)=>{var i=bf(e,t);if(i!=null)return h$(e,i.orientation,i.mirror)},m$=it([xa,bf,p$,(e,t)=>t],(e,t,i,a)=>{if(t!=null){var d=i?.[a];return d==null?{x:0,y:e.top}:{x:d,y:e.top}}}),Nk=it(xa,bf,(e,t)=>{var i=typeof t.width=="number"?t.width:a_;return{width:i,height:e.height}}),JP=(e,t,i)=>{switch(t){case"xAxis":return Bk(e,i).width;case"yAxis":return Nk(e,i).height;default:return}},Fk=(e,t,i,a)=>{if(i!=null){var{allowDuplicatedCategory:d,type:g,dataKey:v}=i,u=Hu(e,a),M=t.map(C=>C.value);if(v&&u&&g==="category"&&d&&BO(M))return M}},AT=it([an,Nb,$o,Sa],Fk),Uk=(e,t,i,a)=>{if(!(i==null||i.dataKey==null)){var{type:d,scale:g}=i,v=Hu(e,a);if(v&&(d==="number"||g!=="auto"))return t.map(u=>u.value)}},MT=it([an,Nb,m_,Sa],Uk),eC=it([an,Aq,cy,Fb,AT,MT,__,ET,Sa],(e,t,i,a,d,g,v,u,M)=>{if(t!=null){var C=Hu(e,M);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:M,categoricalDomain:g,duplicateDomain:d,isCategorical:C,niceTicks:u,range:v,realScaleType:i,scale:a}}}),g$=(e,t,i,a,d,g,v,u,M)=>{if(!(t==null||a==null)){var C=Hu(e,M),{type:D,ticks:I,tickCount:N}=t,G=i==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,Y=D==="category"&&a.bandwidth?a.bandwidth()/G:0;Y=M==="angleAxis"&&g!=null&&g.length>=2?_s(g[0]-g[1])*2*Y:Y;var H=I||d;return H?H.map(($,se)=>{var he=v?v.indexOf($):$,fe=a.map(he);return Dr(fe)?{index:se,coordinate:fe+Y,value:$,offset:Y}:null}).filter(xs):C&&u?u.map(($,se)=>{var he=a.map($);return Dr(he)?{coordinate:he+Y,value:$,index:se,offset:Y}:null}).filter(xs):a.ticks?a.ticks(N).map(($,se)=>{var he=a.map($);return Dr(he)?{coordinate:he+Y,value:$,index:se,offset:Y}:null}).filter(xs):a.domain().map(($,se)=>{var he=a.map($);return Dr(he)?{coordinate:he+Y,value:v?v[$]:$,index:se,offset:Y}:null}).filter(xs)}},Vk=it([an,m_,cy,Fb,ET,__,AT,MT,Sa],g$),y$=(e,t,i,a,d,g,v)=>{if(!(t==null||i==null||a==null||a[0]===a[1])){var u=Hu(e,v),{tickCount:M}=t,C=0;return C=v==="angleAxis"&&a?.length>=2?_s(a[0]-a[1])*2*C:C,u&&g?g.map((D,I)=>{var N=i.map(D);return Dr(N)?{coordinate:N+C,value:D,index:I,offset:C}:null}).filter(xs):i.ticks?i.ticks(M).map((D,I)=>{var N=i.map(D);return Dr(N)?{coordinate:N+C,value:D,index:I,offset:C}:null}).filter(xs):i.domain().map((D,I)=>{var N=i.map(D);return Dr(N)?{coordinate:N+C,value:d?d[D]:D,index:I,offset:C}:null}).filter(xs)}},Hc=it([an,m_,Fb,__,AT,MT,Sa],y$),Wc=it($o,Fb,(e,t)=>{if(!(e==null||t==null))return Fx(Fx({},e),{},{scale:t})}),v$=it([$o,cy,ST,Rk],TT);it((e,t,i)=>_T(e,i),v$,(e,t)=>{if(!(e==null||t==null))return Fx(Fx({},e),{},{scale:t})});var _$=it([an,gb,yb],(e,t,i)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return i.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),qk=e=>e.options.defaultTooltipEventType,$k=e=>e.options.validateTooltipEventTypes;function Gk(e,t,i){if(e==null)return t;var a=e?"axis":"item";return i==null?t:i.includes(a)?a:t}function PT(e,t){var i=qk(e),a=$k(e);return Gk(t,i,a)}function x$(e){return nr(t=>PT(t,e))}var Zk=(e,t)=>{var i,a=Number(t);if(!(qu(a)||t==null))return a>=0?e==null||(i=e[a])===null||i===void 0?void 0:i.value:void 0},b$=e=>e.tooltip.settings,Sd={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},w$={itemInteraction:{click:Sd,hover:Sd},axisInteraction:{click:Sd,hover:Sd},keyboardInteraction:Sd,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Hk=ws({name:"tooltip",initialState:w$,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:ni()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:i,next:a}=t.payload,d=Vu(e).tooltipItemPayloads.indexOf(i);d>-1&&(e.tooltipItemPayloads[d]=a)},prepare:ni()},removeTooltipEntrySettings:{reducer(e,t){var i=Vu(e).tooltipItemPayloads.indexOf(t.payload);i>-1&&e.tooltipItemPayloads.splice(i,1)},prepare:ni()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:S$,replaceTooltipEntrySettings:T$,removeTooltipEntrySettings:E$,setTooltipSettingsState:A$,setActiveMouseOverItemIndex:Wk,mouseLeaveItem:M$,mouseLeaveChart:Yk,setActiveClickItemIndex:P$,setMouseOverAxisIndex:Xk,setMouseClickAxisIndex:C$,setSyncInteraction:Z2,setKeyboardInteraction:H2}=Hk.actions,D$=Hk.reducer;function tC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function U0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(i),!0).forEach(function(a){O$(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function O$(e,t,i){return(t=I$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I$(e){var t=z$(e,"string");return typeof t=="symbol"?t:t+""}function z$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k$(e,t,i){return t==="axis"?i==="click"?e.axisInteraction.click:e.axisInteraction.hover:i==="click"?e.itemInteraction.click:e.itemInteraction.hover}function R$(e){return e.index!=null}var Kk=(e,t,i,a)=>{if(t==null)return Sd;var d=k$(e,t,i);if(d==null)return Sd;if(d.active)return d;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var g=e.settings.active===!0;if(R$(d)){if(g)return U0(U0({},d),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return U0(U0({},Sd),{},{coordinate:d.coordinate})};function L$(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var i=Number(e);return Number.isFinite(i)?i:void 0}function j$(e,t){var i=L$(e),a=t[0],d=t[1];if(i===void 0)return!1;var g=Math.min(a,d),v=Math.max(a,d);return i>=g&&i<=v}function B$(e,t,i){if(i==null||t==null)return!0;var a=Ai(e,t);return a==null||!ff(i)?!0:j$(a,i)}var CT=(e,t,i,a)=>{var d=e?.index;if(d==null)return null;var g=Number(d);if(!Dr(g))return d;var v=0,u=1/0;t.length>0&&(u=t.length-1);var M=Math.max(v,Math.min(g,u)),C=t[M];return C==null||B$(C,i,a)?String(M):null},Qk=(e,t,i,a,d,g,v)=>{if(g!=null){var u=v[0],M=u?.getPosition(g);if(M!=null)return M;var C=d?.[Number(g)];if(C)return i==="horizontal"?{x:C.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:C.coordinate}}},Jk=(e,t,i,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var d;if(i==="hover"?d=e.itemInteraction.hover.graphicalItemId:d=e.itemInteraction.click.graphicalItemId,d==null&&a!=null){var g=e.tooltipItemPayloads[0];return g!=null?[g]:[]}return e.tooltipItemPayloads.filter(v=>{var u;return((u=v.settings)===null||u===void 0?void 0:u.graphicalItemId)===d})},eR=e=>e.options.tooltipPayloadSearcher,hy=e=>e.tooltip;function rC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function nC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(i),!0).forEach(function(a){N$(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function N$(e,t,i){return(t=F$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function F$(e){var t=U$(e,"string");return typeof t=="symbol"?t:t+""}function U$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V$(e,t){return e??t}var tR=(e,t,i,a,d,g,v)=>{if(!(t==null||g==null)){var{chartData:u,computedData:M,dataStartIndex:C,dataEndIndex:D}=i,I=[];return e.reduce((N,G)=>{var Y,{dataDefinedOnItem:H,settings:$}=G,se=V$(H,u),he=Array.isArray(se)?DI(se,C,D):se,fe=(Y=$?.dataKey)!==null&&Y!==void 0?Y:a,me=$?.nameKey,Ae;if(a&&Array.isArray(he)&&!Array.isArray(he[0])&&v==="axis"?Ae=NO(he,a,d):Ae=g(he,t,M,me),Array.isArray(Ae))Ae.forEach(Se=>{var Ue=nC(nC({},$),{},{name:Se.name,unit:Se.unit,color:void 0,fill:void 0});N.push(nM({tooltipEntrySettings:Ue,dataKey:Se.dataKey,payload:Se.payload,value:Ai(Se.payload,Se.dataKey),name:Se.name}))});else{var ge;N.push(nM({tooltipEntrySettings:$,dataKey:fe,payload:Ae,value:Ai(Ae,fe),name:(ge=Ai(Ae,me))!==null&&ge!==void 0?ge:$?.name}))}return N},I)}},DT=it([ea,uk,dT],Ok),q$=it([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),$$=it([Ta,ly],ck),fy=it([q$,ea,$$],hk,{memoizeOptions:{resultEqualityCheck:Bb}}),G$=it([fy],e=>e.filter(Lb)),Z$=it([fy],pk,{memoizeOptions:{resultEqualityCheck:Bb}}),dy=it([Z$,_f],mk),H$=it([G$,_f,ea],ok),OT=it([dy,ea,fy],gk),rR=it([ea],bT),W$=it([ea],e=>e.allowDataOverflow),nR=it([rR,W$],Fz),Y$=it([fy],e=>e.filter(Lb)),X$=it([H$,Y$,Db,Jz],vk),K$=it([X$,_f,Ta,nR],_k),Q$=it([fy],dk),J$=it([dy,ea,Q$,wT,Ta],wk,{memoizeOptions:{resultEqualityCheck:jb}}),eG=it([Sk,Ta,ly],uy),tG=it([eG,Ta],Ak),rG=it([Tk,Ta,ly],uy),nG=it([rG,Ta],Mk),iG=it([Ek,Ta,ly],uy),aG=it([iG,Ta],Pk),oG=it([tG,aG,nG],Vx),sG=it([ea,rR,nR,K$,J$,oG,an,Ta],Ck),x_=it([ea,an,dy,OT,Db,Ta,sG],Dk),lG=it([x_,ea,DT],Ik),uG=it([ea,x_,lG,Ta],zk),iR=e=>{var t=Ta(e),i=ly(e),a=!1;return __(e,t,i,a)},aR=it([ea,iR],Ob),oR=it([ea,DT,uG,aR],TT),cG=it([an,OT,ea,Ta],Fk),hG=it([an,OT,ea,Ta],Uk),fG=(e,t,i,a,d,g,v,u)=>{if(t){var{type:M}=t,C=Hu(e,u);if(a){var D=i==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,I=M==="category"&&a.bandwidth?a.bandwidth()/D:0;return I=u==="angleAxis"&&d!=null&&d?.length>=2?_s(d[0]-d[1])*2*I:I,C&&v?v.map((N,G)=>{var Y=a.map(N);return Dr(Y)?{coordinate:Y+I,value:N,index:G,offset:I}:null}).filter(xs):a.domain().map((N,G)=>{var Y=a.map(N);return Dr(Y)?{coordinate:Y+I,value:g?g[N]:N,index:G,offset:I}:null}).filter(xs)}}},wf=it([an,ea,DT,oR,iR,cG,hG,Ta],fG),IT=it([qk,$k,b$],(e,t,i)=>Gk(i.shared,e,t)),sR=e=>e.tooltip.settings.trigger,zT=e=>e.tooltip.settings.defaultIndex,b_=it([hy,IT,sR,zT],Kk),sm=it([b_,dy,v_,x_],CT),lR=it([wf,sm],Zk),uR=it([b_],e=>{if(e)return e.dataKey});it([b_],e=>{if(e)return e.graphicalItemId});var cR=it([hy,IT,sR,zT],Jk),dG=it([gf,yf,an,xa,wf,zT,cR],Qk),pG=it([b_,dG],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),mG=it([b_],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),gG=it([cR,sm,_f,v_,lR,eR,IT],tR),yG=it([gG],e=>{if(e!=null){var t=e.map(i=>i.payload).filter(i=>i!=null);return Array.from(new Set(t))}});function iC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function aC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(i),!0).forEach(function(a){vG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function vG(e,t,i){return(t=_G(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _G(e){var t=xG(e,"string");return typeof t=="symbol"?t:t+""}function xG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bG=()=>nr(ea),wG=()=>{var e=bG(),t=nr(wf),i=nr(oR);return Md(!e||!i?void 0:aC(aC({},e),{},{scale:i}),t)};function oC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function jg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(i),!0).forEach(function(a){SG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function SG(e,t,i){return(t=TG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function TG(e){var t=EG(e,"string");return typeof t=="symbol"?t:t+""}function EG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AG=(e,t,i,a)=>{var d=t.find(g=>g&&g.index===i);if(d){if(e==="horizontal")return{x:d.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:d.coordinate}}return{x:0,y:0}},MG=(e,t,i,a)=>{var d=t.find(C=>C&&C.index===i);if(d){if(e==="centric"){var g=d.coordinate,{radius:v}=a;return jg(jg(jg({},a),Xa(a.cx,a.cy,v,g)),{},{angle:g,radius:v})}var u=d.coordinate,{angle:M}=a;return jg(jg(jg({},a),Xa(a.cx,a.cy,u,M)),{},{angle:M,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function PG(e,t){var{chartX:i,chartY:a}=e;return i>=t.left&&i<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var hR=(e,t,i,a,d)=>{var g,v=(g=t?.length)!==null&&g!==void 0?g:0;if(v<=1||e==null)return 0;if(a==="angleAxis"&&d!=null&&Math.abs(Math.abs(d[1]-d[0])-360)<=1e-6)for(var u=0;u<v;u++){var M,C,D,I,N,G=u>0?(M=i[u-1])===null||M===void 0?void 0:M.coordinate:(C=i[v-1])===null||C===void 0?void 0:C.coordinate,Y=(D=i[u])===null||D===void 0?void 0:D.coordinate,H=u>=v-1?(I=i[0])===null||I===void 0?void 0:I.coordinate:(N=i[u+1])===null||N===void 0?void 0:N.coordinate,$=void 0;if(!(G==null||Y==null||H==null))if(_s(Y-G)!==_s(H-Y)){var se=[];if(_s(H-Y)===_s(d[1]-d[0])){$=H;var he=Y+d[1]-d[0];se[0]=Math.min(he,(he+G)/2),se[1]=Math.max(he,(he+G)/2)}else{$=G;var fe=H+d[1]-d[0];se[0]=Math.min(Y,(fe+Y)/2),se[1]=Math.max(Y,(fe+Y)/2)}var me=[Math.min(Y,($+Y)/2),Math.max(Y,($+Y)/2)];if(e>me[0]&&e<=me[1]||e>=se[0]&&e<=se[1]){var Ae;return(Ae=i[u])===null||Ae===void 0?void 0:Ae.index}}else{var ge=Math.min(G,H),Se=Math.max(G,H);if(e>(ge+Y)/2&&e<=(Se+Y)/2){var Ue;return(Ue=i[u])===null||Ue===void 0?void 0:Ue.index}}}else if(t)for(var et=0;et<v;et++){var vt=t[et];if(vt!=null){var pt=t[et+1],Fe=t[et-1];if(et===0&&pt!=null&&e<=(vt.coordinate+pt.coordinate)/2||et===v-1&&Fe!=null&&e>(vt.coordinate+Fe.coordinate)/2||et>0&&et<v-1&&Fe!=null&&pt!=null&&e>(vt.coordinate+Fe.coordinate)/2&&e<=(vt.coordinate+pt.coordinate)/2)return vt.index}}return-1},fR=()=>nr(dT),kT=(e,t)=>t,dR=(e,t,i)=>i,RT=(e,t,i,a)=>a,CG=it(wf,e=>ob(e,t=>t.coordinate)),LT=it([hy,kT,dR,RT],Kk),jT=it([LT,dy,v_,x_],CT),DG=(e,t,i)=>{if(t!=null){var a=hy(e);return t==="axis"?i==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:i==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},pR=it([hy,kT,dR,RT],Jk),qx=it([gf,yf,an,xa,wf,RT,pR],Qk),OG=it([LT,qx],(e,t)=>{var i;return(i=e.coordinate)!==null&&i!==void 0?i:t}),mR=it([wf,jT],Zk),IG=it([pR,jT,_f,v_,mR,eR,kT],tR),zG=it([LT,jT],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),kG=(e,t,i,a,d,g,v)=>{if(!(!e||!i||!a||!d)&&PG(e,v)){var u=hF(e,t),M=hR(u,g,d,i,a),C=AG(t,d,M,e);return{activeIndex:String(M),activeCoordinate:C}}},RG=(e,t,i,a,d,g,v)=>{if(!(!e||!a||!d||!g||!i)){var u=_8(e,i);if(u){var M=fF(u,t),C=hR(M,v,g,a,d),D=MG(t,g,C,u);return{activeIndex:String(C),activeCoordinate:D}}}},LG=(e,t,i,a,d,g,v,u)=>{if(!(!e||!t||!a||!d||!g))return t==="horizontal"||t==="vertical"?kG(e,t,a,d,g,v,u):RG(e,t,i,a,d,g,v)},jG=it(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,i)=>i,(e,t,i)=>{if(t!=null){var a=e[t];if(a!=null)return i?a.panoramaElement:a.element}}),BG=it(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(Qi)),i=Array.from(new Set(t));return i.sort((a,d)=>a-d)},{memoizeOptions:{resultEqualityCheck:_q}});function sC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function lC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(i),!0).forEach(function(a){NG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function NG(e,t,i){return(t=FG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function FG(e){var t=UG(e,"string");return typeof t=="symbol"?t:t+""}function UG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VG={},qG={zIndexMap:Object.values(Qi).reduce((e,t)=>lC(lC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),VG)},$G=new Set(Object.values(Qi));function GG(e){return $G.has(e)}var gR=ws({name:"zIndex",initialState:qG,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]?e.zIndexMap[i].consumers+=1:e.zIndexMap[i]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ni()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(e.zIndexMap[i].consumers-=1,e.zIndexMap[i].consumers<=0&&!GG(i)&&delete e.zIndexMap[i])},prepare:ni()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i,element:a,isPanorama:d}=t.payload;e.zIndexMap[i]?d?e.zIndexMap[i].panoramaElement=a:e.zIndexMap[i].element=a:e.zIndexMap[i]={consumers:0,element:d?void 0:a,panoramaElement:d?a:void 0}},prepare:ni()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(t.payload.isPanorama?e.zIndexMap[i].panoramaElement=void 0:e.zIndexMap[i].element=void 0)},prepare:ni()}}}),{registerZIndexPortal:ZG,unregisterZIndexPortal:HG,registerZIndexPortalElement:WG,unregisterZIndexPortalElement:YG}=gR.actions,XG=gR.reducer;function nl(e){var{zIndex:t,children:i}=e,a=$F(),d=a&&t!==void 0&&t!==0,g=ba(),v=Ii();q.useLayoutEffect(()=>d?(v(ZG({zIndex:t})),()=>{v(HG({zIndex:t}))}):Cd,[v,t,d]);var u=nr(M=>jG(M,t,g));return d?u?WD.createPortal(i,u):null:i}function W2(){return W2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},W2.apply(null,arguments)}function uC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function V0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(i),!0).forEach(function(a){KG(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):uC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function KG(e,t,i){return(t=QG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function QG(e){var t=JG(e,"string");return typeof t=="symbol"?t:t+""}function JG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e9(e){var{cursor:t,cursorComp:i,cursorProps:a}=e;return q.isValidElement(t)?q.cloneElement(t,a):q.createElement(i,a)}function t9(e){var t,{coordinate:i,payload:a,index:d,offset:g,tooltipAxisBandSize:v,layout:u,cursor:M,tooltipEventType:C,chartName:D}=e,I=i,N=a,G=d;if(!M||!I||D!=="ScatterChart"&&C!=="axis")return null;var Y,H,$;if(D==="ScatterChart")Y=I,H=I6,$=Qi.cursorLine;else if(D==="BarChart")Y=z6(u,I,g,v),H=ez,$=Qi.cursorRectangle;else if(u==="radial"&&VO(I)){var{cx:se,cy:he,radius:fe,startAngle:me,endAngle:Ae}=tz(I);Y={cx:se,cy:he,startAngle:me,endAngle:Ae,innerRadius:fe,outerRadius:fe},H=nz,$=Qi.cursorLine}else Y={points:S8(u,I,g)},H=Dv,$=Qi.cursorLine;var ge=typeof M=="object"&&"className"in M?M.className:void 0,Se=V0(V0(V0(V0({stroke:"#ccc",pointerEvents:"none"},g),Y),t_(M)),{},{payload:N,payloadIndex:G,className:bn("recharts-tooltip-cursor",ge)});return q.createElement(nl,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:$},q.createElement(e9,{cursor:M,cursorComp:H,cursorProps:Se}))}function r9(e){var t=wG(),i=BI(),a=Dd(),d=fR();return t==null||i==null||a==null||d==null?null:q.createElement(t9,W2({},e,{offset:i,layout:a,tooltipAxisBandSize:t,chartName:d}))}var yR=q.createContext(null),n9=()=>q.useContext(yR),Uw={exports:{}},cC;function i9(){return cC||(cC=1,(function(e){var t=Object.prototype.hasOwnProperty,i="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1));function d(M,C,D){this.fn=M,this.context=C,this.once=D||!1}function g(M,C,D,I,N){if(typeof D!="function")throw new TypeError("The listener must be a function");var G=new d(D,I||M,N),Y=i?i+C:C;return M._events[Y]?M._events[Y].fn?M._events[Y]=[M._events[Y],G]:M._events[Y].push(G):(M._events[Y]=G,M._eventsCount++),M}function v(M,C){--M._eventsCount===0?M._events=new a:delete M._events[C]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var C=[],D,I;if(this._eventsCount===0)return C;for(I in D=this._events)t.call(D,I)&&C.push(i?I.slice(1):I);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(D)):C},u.prototype.listeners=function(C){var D=i?i+C:C,I=this._events[D];if(!I)return[];if(I.fn)return[I.fn];for(var N=0,G=I.length,Y=new Array(G);N<G;N++)Y[N]=I[N].fn;return Y},u.prototype.listenerCount=function(C){var D=i?i+C:C,I=this._events[D];return I?I.fn?1:I.length:0},u.prototype.emit=function(C,D,I,N,G,Y){var H=i?i+C:C;if(!this._events[H])return!1;var $=this._events[H],se=arguments.length,he,fe;if($.fn){switch($.once&&this.removeListener(C,$.fn,void 0,!0),se){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,D),!0;case 3:return $.fn.call($.context,D,I),!0;case 4:return $.fn.call($.context,D,I,N),!0;case 5:return $.fn.call($.context,D,I,N,G),!0;case 6:return $.fn.call($.context,D,I,N,G,Y),!0}for(fe=1,he=new Array(se-1);fe<se;fe++)he[fe-1]=arguments[fe];$.fn.apply($.context,he)}else{var me=$.length,Ae;for(fe=0;fe<me;fe++)switch($[fe].once&&this.removeListener(C,$[fe].fn,void 0,!0),se){case 1:$[fe].fn.call($[fe].context);break;case 2:$[fe].fn.call($[fe].context,D);break;case 3:$[fe].fn.call($[fe].context,D,I);break;case 4:$[fe].fn.call($[fe].context,D,I,N);break;default:if(!he)for(Ae=1,he=new Array(se-1);Ae<se;Ae++)he[Ae-1]=arguments[Ae];$[fe].fn.apply($[fe].context,he)}}return!0},u.prototype.on=function(C,D,I){return g(this,C,D,I,!1)},u.prototype.once=function(C,D,I){return g(this,C,D,I,!0)},u.prototype.removeListener=function(C,D,I,N){var G=i?i+C:C;if(!this._events[G])return this;if(!D)return v(this,G),this;var Y=this._events[G];if(Y.fn)Y.fn===D&&(!N||Y.once)&&(!I||Y.context===I)&&v(this,G);else{for(var H=0,$=[],se=Y.length;H<se;H++)(Y[H].fn!==D||N&&!Y[H].once||I&&Y[H].context!==I)&&$.push(Y[H]);$.length?this._events[G]=$.length===1?$[0]:$:v(this,G)}return this},u.prototype.removeAllListeners=function(C){var D;return C?(D=i?i+C:C,this._events[D]&&v(this,D)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,e.exports=u})(Uw)),Uw.exports}var a9=i9();const o9=Yc(a9);var Wv=new o9,Y2="recharts.syncEvent.tooltip",hC="recharts.syncEvent.brush",BT=(e,t)=>{if(t&&Array.isArray(e)){var i=Number.parseInt(t,10);if(!qu(i))return e[i]}},s9={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},vR=ws({name:"options",initialState:s9,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),l9=vR.reducer,{createEventEmitter:u9}=vR.actions;function c9(e){return e.tooltip.syncInteraction}var h9={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},_R=ws({name:"chartData",initialState:h9,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:i,endIndex:a}=t.payload;i!=null&&(e.dataStartIndex=i),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:fC,setDataStartEndIndexes:f9,setComputedData:JK}=_R.actions,d9=_R.reducer,p9=["x","y"];function dC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Bg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(i),!0).forEach(function(a){m9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function m9(e,t,i){return(t=g9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g9(e){var t=y9(e,"string");return typeof t=="symbol"?t:t+""}function y9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v9(e,t){if(e==null)return{};var i,a,d=_9(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function _9(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function x9(){var e=nr(pT),t=nr(mT),i=Ii(),a=nr(ek),d=nr(wf),g=Dd(),v=xb(),u=nr(M=>M.rootProps.className);q.useEffect(()=>{if(e==null)return Cd;var M=(C,D,I)=>{if(t!==I&&e===C){if(a==="index"){var N;if(v&&D!==null&&D!==void 0&&(N=D.payload)!==null&&N!==void 0&&N.coordinate&&D.payload.sourceViewBox){var G=D.payload.coordinate,{x:Y,y:H}=G,$=v9(G,p9),{x:se,y:he,width:fe,height:me}=D.payload.sourceViewBox,Ae=Bg(Bg({},$),{},{x:v.x+(fe?(Y-se)/fe:0)*v.width,y:v.y+(me?(H-he)/me:0)*v.height});i(Bg(Bg({},D),{},{payload:Bg(Bg({},D.payload),{},{coordinate:Ae})}))}else i(D);return}if(d!=null){var ge;if(typeof a=="function"){var Se={activeTooltipIndex:D.payload.index==null?void 0:Number(D.payload.index),isTooltipActive:D.payload.active,activeIndex:D.payload.index==null?void 0:Number(D.payload.index),activeLabel:D.payload.label,activeDataKey:D.payload.dataKey,activeCoordinate:D.payload.coordinate},Ue=a(d,Se);ge=d[Ue]}else a==="value"&&(ge=d.find($e=>String($e.value)===D.payload.label));var{coordinate:et}=D.payload;if(ge==null||D.payload.active===!1||et==null||v==null){i(Z2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:vt,y:pt}=et,Fe=Math.min(vt,v.x+v.width),Ct=Math.min(pt,v.y+v.height),It={x:g==="horizontal"?ge.coordinate:Fe,y:g==="horizontal"?Ct:ge.coordinate},jt=Z2({active:D.payload.active,coordinate:It,dataKey:D.payload.dataKey,index:String(ge.index),label:D.payload.label,sourceViewBox:D.payload.sourceViewBox,graphicalItemId:D.payload.graphicalItemId});i(jt)}}};return Wv.on(Y2,M),()=>{Wv.off(Y2,M)}},[u,i,t,e,a,d,g,v])}function b9(){var e=nr(pT),t=nr(mT),i=Ii();q.useEffect(()=>{if(e==null)return Cd;var a=(d,g,v)=>{t!==v&&e===d&&i(f9(g))};return Wv.on(hC,a),()=>{Wv.off(hC,a)}},[i,t,e])}function w9(){var e=Ii();q.useEffect(()=>{e(u9())},[e]),x9(),b9()}function S9(e,t,i,a,d,g){var v=nr(G=>DG(G,e,t)),u=nr(mT),M=nr(pT),C=nr(ek),D=nr(c9),I=D?.active,N=xb();q.useEffect(()=>{if(!I&&M!=null&&u!=null){var G=Z2({active:g,coordinate:i,dataKey:v,index:d,label:typeof a=="number"?String(a):a,sourceViewBox:N,graphicalItemId:void 0});Wv.emit(Y2,M,G,u)}},[I,i,v,d,a,u,M,C,g,N])}function pC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function mC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(i),!0).forEach(function(a){T9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):pC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function T9(e,t,i){return(t=E9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function E9(e){var t=A9(e,"string");return typeof t=="symbol"?t:t+""}function A9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M9(e){return e.dataKey}function P9(e,t){return q.isValidElement(e)?q.cloneElement(e,t):typeof e=="function"?q.createElement(e,t):q.createElement(h6,t)}var gC=[],C9={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Vw(e){var t,i,a=Ka(e,C9),{active:d,allowEscapeViewBox:g,animationDuration:v,animationEasing:u,content:M,filterNull:C,isAnimationActive:D,offset:I,payloadUniqBy:N,position:G,reverseDirection:Y,useTranslate3d:H,wrapperStyle:$,cursor:se,shared:he,trigger:fe,defaultIndex:me,portal:Ae,axisId:ge}=a,Se=Ii(),Ue=typeof me=="number"?String(me):me;q.useEffect(()=>{Se(A$({shared:he,trigger:fe,axisId:ge,active:d,defaultIndex:Ue}))},[Se,he,fe,ge,d,Ue]);var et=xb(),vt=YI(),pt=x$(he),{activeIndex:Fe,isActive:Ct}=(t=nr(Gt=>zG(Gt,pt,fe,Ue)))!==null&&t!==void 0?t:{},It=nr(Gt=>IG(Gt,pt,fe,Ue)),jt=nr(Gt=>mR(Gt,pt,fe,Ue)),$e=nr(Gt=>OG(Gt,pt,fe,Ue)),ct=It,Et=n9(),_t=(i=d??Ct)!==null&&i!==void 0?i:!1,[Ut,ze]=KN([ct,_t]),at=pt==="axis"?jt:void 0;S9(pt,fe,$e,at,Fe,_t);var Pt=Ae??Et;if(Pt==null||et==null||pt==null)return null;var zt=ct??gC;_t||(zt=gC),C&&zt.length&&(zt=SN(zt.filter(Gt=>Gt.value!=null&&(Gt.hide!==!0||a.includeHidden)),N,M9));var $t=zt.length>0,Kt=q.createElement(v6,{allowEscapeViewBox:g,animationDuration:v,animationEasing:u,isAnimationActive:D,active:_t,coordinate:$e,hasPayload:$t,offset:I,position:G,reverseDirection:Y,useTranslate3d:H,viewBox:et,wrapperStyle:$,lastBoundingBox:Ut,innerRef:ze,hasPortalFromProps:!!Ae},P9(M,mC(mC({},a),{},{payload:zt,label:at,active:_t,activeIndex:Fe,coordinate:$e,accessibilityLayer:vt})));return q.createElement(q.Fragment,null,WD.createPortal(Kt,Pt),_t&&q.createElement(r9,{cursor:se,tooltipEventType:pt,coordinate:$e,payload:zt,index:Fe}))}var xR=e=>null;xR.displayName="Cell";function D9(e,t,i){return(t=O9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function O9(e){var t=I9(e,"string");return typeof t=="symbol"?t:t+""}function I9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class z9{constructor(t){D9(this,"cache",new Map),this.maxSize=t}get(t){var i=this.cache.get(t);return i!==void 0&&(this.cache.delete(t),this.cache.set(t,i)),i}set(t,i){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,i)}clear(){this.cache.clear()}size(){return this.cache.size}}function yC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function k9(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(i),!0).forEach(function(a){R9(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):yC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function R9(e,t,i){return(t=L9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function L9(e){var t=j9(e,"string");return typeof t=="symbol"?t:t+""}function j9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B9={cacheSize:2e3,enableCache:!0},bR=k9({},B9),vC=new z9(bR.cacheSize),N9={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_C="recharts_measurement_span";function F9(e,t){var i=t.fontSize||"",a=t.fontFamily||"",d=t.fontWeight||"",g=t.fontStyle||"",v=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(i,"|").concat(a,"|").concat(d,"|").concat(g,"|").concat(v,"|").concat(u)}var xC=(e,t)=>{try{var i=document.getElementById(_C);i||(i=document.createElement("span"),i.setAttribute("id",_C),i.setAttribute("aria-hidden","true"),document.body.appendChild(i)),Object.assign(i.style,N9,t),i.textContent="".concat(e);var a=i.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},Ov=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||l_.isSsr)return{width:0,height:0};if(!bR.enableCache)return xC(t,i);var a=F9(t,i),d=vC.get(a);if(d)return d;var g=xC(t,i);return vC.set(a,g),g},wR;function U9(e,t,i){return(t=V9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function V9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,wC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$9=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,G9=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Z9={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},H9=["cm","mm","pt","pc","in","Q","px"];function W9(e){return H9.includes(e)}var $g="NaN";function Y9(e,t){return e*Z9[t]}class Ya{static parse(t){var i,[,a,d]=(i=G9.exec(t))!==null&&i!==void 0?i:[];return a==null?Ya.NaN:new Ya(parseFloat(a),d??"")}constructor(t,i){this.num=t,this.unit=i,this.num=t,this.unit=i,qu(t)&&(this.unit=""),i!==""&&!$9.test(i)&&(this.num=NaN,this.unit=""),W9(i)&&(this.num=Y9(t,i),this.unit="px")}add(t){return this.unit!==t.unit?new Ya(NaN,""):new Ya(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ya(NaN,""):new Ya(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ya(NaN,""):new Ya(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ya(NaN,""):new Ya(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qu(this.num)}}wR=Ya;U9(Ya,"NaN",new wR(NaN,""));function SR(e){if(e==null||e.includes($g))return $g;for(var t=e;t.includes("*")||t.includes("/");){var i,[,a,d,g]=(i=bC.exec(t))!==null&&i!==void 0?i:[],v=Ya.parse(a??""),u=Ya.parse(g??""),M=d==="*"?v.multiply(u):v.divide(u);if(M.isNaN())return $g;t=t.replace(bC,M.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var C,[,D,I,N]=(C=wC.exec(t))!==null&&C!==void 0?C:[],G=Ya.parse(D??""),Y=Ya.parse(N??""),H=I==="+"?G.add(Y):G.subtract(Y);if(H.isNaN())return $g;t=t.replace(wC,H.toString())}return t}var SC=/\(([^()]*)\)/;function X9(e){for(var t=e,i;(i=SC.exec(t))!=null;){var[,a]=i;t=t.replace(SC,SR(a))}return t}function K9(e){var t=e.replace(/\s+/g,"");return t=X9(t),t=SR(t),t}function Q9(e){try{return K9(e)}catch{return $g}}function qw(e){var t=Q9(e.slice(5,-1));return t===$g?"":t}var J9=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],e7=["dx","dy","angle","className","breakAll"];function X2(){return X2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},X2.apply(null,arguments)}function TC(e,t){if(e==null)return{};var i,a,d=t7(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function t7(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var TR=/[ \f\n\r\t\v\u2028\u2029]+/,ER=e=>{var{children:t,breakAll:i,style:a}=e;try{var d=[];ai(t)||(i?d=t.toString().split(""):d=t.toString().split(TR));var g=d.map(u=>({word:u,width:Ov(u,a).width})),v=i?0:Ov("",a).width;return{wordsWithComputedWidth:g,spaceWidth:v}}catch{return null}};function r7(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var AR=(e,t,i,a)=>e.reduce((d,g)=>{var{word:v,width:u}=g,M=d[d.length-1];if(M&&u!=null&&(t==null||a||M.width+u+i<Number(t)))M.words.push(v),M.width+=u+i;else{var C={words:[v],width:u};d.push(C)}return d},[]),MR=e=>e.reduce((t,i)=>t.width>i.width?t:i),n7="",EC=(e,t,i,a,d,g,v,u)=>{var M=e.slice(0,t),C=ER({breakAll:i,style:a,children:M+n7});if(!C)return[!1,[]];var D=AR(C.wordsWithComputedWidth,g,v,u),I=D.length>d||MR(D).width>Number(g);return[I,D]},i7=(e,t,i,a,d)=>{var{maxLines:g,children:v,style:u,breakAll:M}=e,C=qt(g),D=String(v),I=AR(t,a,i,d);if(!C||d)return I;var N=I.length>g||MR(I).width>Number(a);if(!N)return I;for(var G=0,Y=D.length-1,H=0,$;G<=Y&&H<=D.length-1;){var se=Math.floor((G+Y)/2),he=se-1,[fe,me]=EC(D,he,M,u,g,a,i,d),[Ae]=EC(D,se,M,u,g,a,i,d);if(!fe&&!Ae&&(G=se+1),fe&&Ae&&(Y=se-1),!fe&&Ae){$=me;break}H++}return $||I},AC=e=>{var t=ai(e)?[]:e.toString().split(TR);return[{words:t,width:void 0}]},a7=e=>{var{width:t,scaleToFit:i,children:a,style:d,breakAll:g,maxLines:v}=e;if((t||i)&&!l_.isSsr){var u,M,C=ER({breakAll:g,children:a,style:d});if(C){var{wordsWithComputedWidth:D,spaceWidth:I}=C;u=D,M=I}else return AC(a);return i7({breakAll:g,children:a,maxLines:v,style:d},u,M,t,!!i)}return AC(a)},PR="#808080",o7={angle:0,breakAll:!1,capHeight:"0.71em",fill:PR,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},NT=q.forwardRef((e,t)=>{var i=Ka(e,o7),{x:a,y:d,lineHeight:g,capHeight:v,fill:u,scaleToFit:M,textAnchor:C,verticalAnchor:D}=i,I=TC(i,J9),N=q.useMemo(()=>a7({breakAll:I.breakAll,children:I.children,maxLines:I.maxLines,scaleToFit:M,style:I.style,width:I.width}),[I.breakAll,I.children,I.maxLines,M,I.style,I.width]),{dx:G,dy:Y,angle:H,className:$,breakAll:se}=I,he=TC(I,e7);if(!$c(a)||!$c(d)||N.length===0)return null;var fe=Number(a)+(qt(G)?G:0),me=Number(d)+(qt(Y)?Y:0);if(!Dr(fe)||!Dr(me))return null;var Ae;switch(D){case"start":Ae=qw("calc(".concat(v,")"));break;case"middle":Ae=qw("calc(".concat((N.length-1)/2," * -").concat(g," + (").concat(v," / 2))"));break;default:Ae=qw("calc(".concat(N.length-1," * -").concat(g,")"));break}var ge=[],Se=N[0];if(M&&Se!=null){var Ue=Se.width,{width:et}=I;ge.push("scale(".concat(qt(et)&&qt(Ue)?et/Ue:1,")"))}return H&&ge.push("rotate(".concat(H,", ").concat(fe,", ").concat(me,")")),ge.length&&(he.transform=ge.join(" ")),q.createElement("text",X2({},bo(he),{ref:t,x:fe,y:me,className:bn("recharts-text",$),textAnchor:C,fill:u.includes("url")?PR:u}),N.map((vt,pt)=>{var Fe=vt.words.join(se?"":" ");return q.createElement("tspan",{x:fe,dy:pt===0?Ae:g,key:"".concat(Fe,"-").concat(pt)},Fe)}))});NT.displayName="Text";function MC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Bc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(i),!0).forEach(function(a){s7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):MC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function s7(e,t,i){return(t=l7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l7(e){var t=u7(e,"string");return typeof t=="symbol"?t:t+""}function u7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c7=e=>{var{viewBox:t,position:i,offset:a=0,parentViewBox:d}=e,{x:g,y:v,height:u,upperWidth:M,lowerWidth:C}=jS(t),D=g,I=g+(M-C)/2,N=(D+I)/2,G=(M+C)/2,Y=D+M/2,H=u>=0?1:-1,$=H*a,se=H>0?"end":"start",he=H>0?"start":"end",fe=M>=0?1:-1,me=fe*a,Ae=fe>0?"end":"start",ge=fe>0?"start":"end",Se=d;if(i==="top"){var Ue={x:D+M/2,y:v-$,horizontalAnchor:"middle",verticalAnchor:se};return Se&&(Ue.height=Math.max(v-Se.y,0),Ue.width=M),Ue}if(i==="bottom"){var et={x:I+C/2,y:v+u+$,horizontalAnchor:"middle",verticalAnchor:he};return Se&&(et.height=Math.max(Se.y+Se.height-(v+u),0),et.width=C),et}if(i==="left"){var vt={x:N-me,y:v+u/2,horizontalAnchor:Ae,verticalAnchor:"middle"};return Se&&(vt.width=Math.max(vt.x-Se.x,0),vt.height=u),vt}if(i==="right"){var pt={x:N+G+me,y:v+u/2,horizontalAnchor:ge,verticalAnchor:"middle"};return Se&&(pt.width=Math.max(Se.x+Se.width-pt.x,0),pt.height=u),pt}var Fe=Se?{width:G,height:u}:{};return i==="insideLeft"?Bc({x:N+me,y:v+u/2,horizontalAnchor:ge,verticalAnchor:"middle"},Fe):i==="insideRight"?Bc({x:N+G-me,y:v+u/2,horizontalAnchor:Ae,verticalAnchor:"middle"},Fe):i==="insideTop"?Bc({x:D+M/2,y:v+$,horizontalAnchor:"middle",verticalAnchor:he},Fe):i==="insideBottom"?Bc({x:I+C/2,y:v+u-$,horizontalAnchor:"middle",verticalAnchor:se},Fe):i==="insideTopLeft"?Bc({x:D+me,y:v+$,horizontalAnchor:ge,verticalAnchor:he},Fe):i==="insideTopRight"?Bc({x:D+M-me,y:v+$,horizontalAnchor:Ae,verticalAnchor:he},Fe):i==="insideBottomLeft"?Bc({x:I+me,y:v+u-$,horizontalAnchor:ge,verticalAnchor:se},Fe):i==="insideBottomRight"?Bc({x:I+C-me,y:v+u-$,horizontalAnchor:Ae,verticalAnchor:se},Fe):i&&typeof i=="object"&&(qt(i.x)||rm(i.x))&&(qt(i.y)||rm(i.y))?Bc({x:g+$u(i.x,G),y:v+$u(i.y,u),horizontalAnchor:"end",verticalAnchor:"end"},Fe):Bc({x:Y,y:v+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},Fe)},h7=["labelRef"],f7=["content"];function PC(e,t){if(e==null)return{};var i,a,d=d7(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function d7(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function CC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Pv(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(i),!0).forEach(function(a){p7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function p7(e,t,i){return(t=m7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m7(e){var t=g7(e,"string");return typeof t=="symbol"?t:t+""}function g7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ef(){return ef=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},ef.apply(null,arguments)}var CR=q.createContext(null),y7=e=>{var{x:t,y:i,upperWidth:a,lowerWidth:d,width:g,height:v,children:u}=e,M=q.useMemo(()=>({x:t,y:i,upperWidth:a,lowerWidth:d,width:g,height:v}),[t,i,a,d,g,v]);return q.createElement(CR.Provider,{value:M},u)},DR=()=>{var e=q.useContext(CR),t=xb();return e||(t?jS(t):void 0)},v7=q.createContext(null),_7=()=>{var e=q.useContext(v7),t=nr(ak);return e||t},x7=e=>{var{value:t,formatter:i}=e,a=ai(e.children)?t:e.children;return typeof i=="function"?i(a):a},FT=e=>e!=null&&typeof e=="function",b7=(e,t)=>{var i=_s(t-e),a=Math.min(Math.abs(t-e),360);return i*a},w7=(e,t,i,a,d)=>{var{offset:g,className:v}=e,{cx:u,cy:M,innerRadius:C,outerRadius:D,startAngle:I,endAngle:N,clockWise:G}=d,Y=(C+D)/2,H=b7(I,N),$=H>=0?1:-1,se,he;switch(t){case"insideStart":se=I+$*g,he=G;break;case"insideEnd":se=N-$*g,he=!G;break;case"end":se=N+$*g,he=G;break;default:throw new Error("Unsupported position ".concat(t))}he=H<=0?he:!he;var fe=Xa(u,M,Y,se),me=Xa(u,M,Y,se+(he?1:-1)*359),Ae="M".concat(fe.x,",").concat(fe.y,`
    A`).concat(Y,",").concat(Y,",0,1,").concat(he?0:1,`,
    `).concat(me.x,",").concat(me.y),ge=ai(e.id)?Rv("recharts-radial-line-"):e.id;return q.createElement("text",ef({},a,{dominantBaseline:"central",className:bn("recharts-radial-bar-label",v)}),q.createElement("defs",null,q.createElement("path",{id:ge,d:Ae})),q.createElement("textPath",{xlinkHref:"#".concat(ge)},i))},S7=(e,t,i)=>{var{cx:a,cy:d,innerRadius:g,outerRadius:v,startAngle:u,endAngle:M}=e,C=(u+M)/2;if(i==="outside"){var{x:D,y:I}=Xa(a,d,v+t,C);return{x:D,y:I,textAnchor:D>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:d,textAnchor:"middle",verticalAnchor:"end"};var N=(g+v)/2,{x:G,y:Y}=Xa(a,d,N,C);return{x:G,y:Y,textAnchor:"middle",verticalAnchor:"middle"}},Q0=e=>e!=null&&"cx"in e&&qt(e.cx),T7={angle:0,offset:5,zIndex:Qi.label,position:"middle",textBreakAll:!1};function E7(e){if(!Q0(e))return e;var{cx:t,cy:i,outerRadius:a}=e,d=a*2;return{x:t-a,y:i-a,width:d,upperWidth:d,lowerWidth:d,height:d}}function wd(e){var t=Ka(e,T7),{viewBox:i,parentViewBox:a,position:d,value:g,children:v,content:u,className:M="",textBreakAll:C,labelRef:D}=t,I=_7(),N=DR(),G=d==="center"?N:I??N,Y,H,$;i==null?Y=G:Q0(i)?Y=i:Y=jS(i);var se=E7(Y);if(!Y||ai(g)&&ai(v)&&!q.isValidElement(u)&&typeof u!="function")return null;var he=Pv(Pv({},t),{},{viewBox:Y});if(q.isValidElement(u)){var{labelRef:fe}=he,me=PC(he,h7);return q.cloneElement(u,me)}if(typeof u=="function"){var{content:Ae}=he,ge=PC(he,f7);if(H=q.createElement(u,ge),q.isValidElement(H))return H}else H=x7(t);var Se=bo(t);if(Q0(Y)){if(d==="insideStart"||d==="insideEnd"||d==="end")return w7(t,d,H,Se,Y);$=S7(Y,t.offset,t.position)}else{if(!se)return null;var Ue=c7({viewBox:se,position:d,offset:t.offset,parentViewBox:Q0(a)?void 0:a});$=Pv(Pv({x:Ue.x,y:Ue.y,textAnchor:Ue.horizontalAnchor,verticalAnchor:Ue.verticalAnchor},Ue.width!==void 0?{width:Ue.width}:{}),Ue.height!==void 0?{height:Ue.height}:{})}return q.createElement(nl,{zIndex:t.zIndex},q.createElement(NT,ef({ref:D,className:bn("recharts-label",M)},Se,$,{textAnchor:r7(Se.textAnchor)?Se.textAnchor:$.textAnchor,breakAll:C}),H))}wd.displayName="Label";var A7=(e,t,i)=>{if(!e)return null;var a={viewBox:t,labelRef:i};return e===!0?q.createElement(wd,ef({key:"label-implicit"},a)):$c(e)?q.createElement(wd,ef({key:"label-implicit",value:e},a)):q.isValidElement(e)?e.type===wd?q.cloneElement(e,Pv({key:"label-implicit"},a)):q.createElement(wd,ef({key:"label-implicit",content:e},a)):FT(e)?q.createElement(wd,ef({key:"label-implicit",content:e},a)):e&&typeof e=="object"?q.createElement(wd,ef({},e,{key:"label-implicit"},a)):null};function M7(e){var{label:t,labelRef:i}=e,a=DR();return A7(t,a,i)||null}var $w={},Gw={},DC;function P7(){return DC||(DC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i[i.length-1]}e.last=t})(Gw)),Gw}var Zw={},OC;function C7(){return OC||(OC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Array.isArray(i)?i:Array.from(i)}e.toArray=t})(Zw)),Zw}var IC;function D7(){return IC||(IC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P7(),i=C7(),a=AS();function d(g){if(a.isArrayLike(g))return t.last(i.toArray(g))}e.last=d})($w)),$w}var Hw,zC;function O7(){return zC||(zC=1,Hw=D7().last),Hw}var I7=O7();const z7=Yc(I7);var k7=["valueAccessor"],R7=["dataKey","clockWise","id","textBreakAll","zIndex"];function $x(){return $x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},$x.apply(null,arguments)}function kC(e,t){if(e==null)return{};var i,a,d=L7(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function L7(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var j7=e=>Array.isArray(e.value)?z7(e.value):e.value,OR=q.createContext(void 0),UT=OR.Provider,IR=q.createContext(void 0);IR.Provider;function B7(){return q.useContext(OR)}function N7(){return q.useContext(IR)}function J0(e){var{valueAccessor:t=j7}=e,i=kC(e,k7),{dataKey:a,clockWise:d,id:g,textBreakAll:v,zIndex:u}=i,M=kC(i,R7),C=B7(),D=N7(),I=C||D;return!I||!I.length?null:q.createElement(nl,{zIndex:u??Qi.label},q.createElement(wo,{className:"recharts-label-list"},I.map((N,G)=>{var Y,H=ai(a)?t(N,G):Ai(N.payload,a),$=ai(g)?{}:{id:"".concat(g,"-").concat(G)};return q.createElement(wd,$x({key:"label-".concat(G)},bo(N),M,$,{fill:(Y=i.fill)!==null&&Y!==void 0?Y:N.fill,parentViewBox:N.parentViewBox,value:H,textBreakAll:v,viewBox:N.viewBox,index:G,zIndex:0}))})))}J0.displayName="LabelList";function VT(e){var{label:t}=e;return t?t===!0?q.createElement(J0,{key:"labelList-implicit"}):q.isValidElement(t)||FT(t)?q.createElement(J0,{key:"labelList-implicit",content:t}):typeof t=="object"?q.createElement(J0,$x({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function K2(){return K2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},K2.apply(null,arguments)}var zR=e=>{var{cx:t,cy:i,r:a,className:d}=e,g=bn("recharts-dot",d);return qt(t)&&qt(i)&&qt(a)?q.createElement("circle",K2({},el(e),TS(e),{className:g,cx:t,cy:i,r:a})):null},F7={radiusAxis:{},angleAxis:{}},kR=ws({name:"polarAxis",initialState:F7,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:eQ,removeRadiusAxis:tQ,addAngleAxis:rQ,removeAngleAxis:nQ}=kR.actions,U7=kR.reducer;function V7(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Ww={exports:{}},Mn={};var RC;function q7(){if(RC)return Mn;RC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),v=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.view_transition"),G=Symbol.for("react.client.reference");function Y(H){if(typeof H=="object"&&H!==null){var $=H.$$typeof;switch($){case e:switch(H=H.type,H){case i:case d:case a:case M:case C:case N:return H;default:switch(H=H&&H.$$typeof,H){case v:case u:case I:case D:return H;case g:return H;default:return $}}case t:return $}}}return Mn.ContextConsumer=g,Mn.ContextProvider=v,Mn.Element=e,Mn.ForwardRef=u,Mn.Fragment=i,Mn.Lazy=I,Mn.Memo=D,Mn.Portal=t,Mn.Profiler=d,Mn.StrictMode=a,Mn.Suspense=M,Mn.SuspenseList=C,Mn.isContextConsumer=function(H){return Y(H)===g},Mn.isContextProvider=function(H){return Y(H)===v},Mn.isElement=function(H){return typeof H=="object"&&H!==null&&H.$$typeof===e},Mn.isForwardRef=function(H){return Y(H)===u},Mn.isFragment=function(H){return Y(H)===i},Mn.isLazy=function(H){return Y(H)===I},Mn.isMemo=function(H){return Y(H)===D},Mn.isPortal=function(H){return Y(H)===t},Mn.isProfiler=function(H){return Y(H)===d},Mn.isStrictMode=function(H){return Y(H)===a},Mn.isSuspense=function(H){return Y(H)===M},Mn.isSuspenseList=function(H){return Y(H)===C},Mn.isValidElementType=function(H){return typeof H=="string"||typeof H=="function"||H===i||H===d||H===a||H===M||H===C||typeof H=="object"&&H!==null&&(H.$$typeof===I||H.$$typeof===D||H.$$typeof===v||H.$$typeof===g||H.$$typeof===u||H.$$typeof===G||H.getModuleId!==void 0)},Mn.typeOf=Y,Mn}var LC;function $7(){return LC||(LC=1,Ww.exports=q7()),Ww.exports}var G7=$7(),jC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",BC=null,Yw=null,RR=e=>{if(e===BC&&Array.isArray(Yw))return Yw;var t=[];return q.Children.forEach(e,i=>{ai(i)||(G7.isFragment(i)?t=t.concat(RR(i.props.children)):t.push(i))}),Yw=t,BC=e,t};function Z7(e,t){var i=[],a=[];return Array.isArray(t)?a=t.map(d=>jC(d)):a=[jC(t)],RR(e).forEach(d=>{var g=Yg(d,"type.displayName")||Yg(d,"type.name");g&&a.indexOf(g)!==-1&&i.push(d)}),i}var qT=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Xw={},NC;function H7(){return NC||(NC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){if(typeof i!="object"||i==null)return!1;if(Object.getPrototypeOf(i)===null)return!0;if(Object.prototype.toString.call(i)!=="[object Object]"){const d=i[Symbol.toStringTag];return d==null||!Object.getOwnPropertyDescriptor(i,Symbol.toStringTag)?.writable?!1:i.toString()===`[object ${d}]`}let a=i;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(i)===a}e.isPlainObject=t})(Xw)),Xw}var Kw,FC;function W7(){return FC||(FC=1,Kw=H7().isPlainObject),Kw}var Y7=W7();const X7=Yc(Y7);var UC,VC,qC,$C,GC;function ZC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function HC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ZC(Object(i),!0).forEach(function(a){K7(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function K7(e,t,i){return(t=Q7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Q7(e){var t=J7(e,"string");return typeof t=="symbol"?t:t+""}function J7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Gx.apply(null,arguments)}function Ev(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var WC=(e,t,i,a,d)=>{var g=i-a,v;return v=Ei(UC||(UC=Ev(["M ",",",""])),e,t),v+=Ei(VC||(VC=Ev(["L ",",",""])),e+i,t),v+=Ei(qC||(qC=Ev(["L ",",",""])),e+i-g/2,t+d),v+=Ei($C||($C=Ev(["L ",",",""])),e+i-g/2-a,t+d),v+=Ei(GC||(GC=Ev(["L ",","," Z"])),e,t),v},eZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},tZ=e=>{var t=Ka(e,eZ),{x:i,y:a,upperWidth:d,lowerWidth:g,height:v,className:u}=t,{animationEasing:M,animationDuration:C,animationBegin:D,isUpdateAnimationActive:I}=t,N=q.useRef(null),[G,Y]=q.useState(-1),H=q.useRef(d),$=q.useRef(g),se=q.useRef(v),he=q.useRef(i),fe=q.useRef(a),me=c_(e,"trapezoid-");if(q.useEffect(()=>{if(N.current&&N.current.getTotalLength)try{var It=N.current.getTotalLength();It&&Y(It)}catch{}},[]),i!==+i||a!==+a||d!==+d||g!==+g||v!==+v||d===0&&g===0||v===0)return null;var Ae=bn("recharts-trapezoid",u);if(!I)return q.createElement("g",null,q.createElement("path",Gx({},bo(t),{className:Ae,d:WC(i,a,d,g,v)})));var ge=H.current,Se=$.current,Ue=se.current,et=he.current,vt=fe.current,pt="0px ".concat(G===-1?1:G,"px"),Fe="".concat(G,"px 0px"),Ct=XI(["strokeDasharray"],C,M);return q.createElement(u_,{animationId:me,key:me,canBegin:G>0,duration:C,easing:M,isActive:I,begin:D},It=>{var jt=Pn(ge,d,It),$e=Pn(Se,g,It),ct=Pn(Ue,v,It),Et=Pn(et,i,It),_t=Pn(vt,a,It);N.current&&(H.current=jt,$.current=$e,se.current=ct,he.current=Et,fe.current=_t);var Ut=It>0?{transition:Ct,strokeDasharray:Fe}:{strokeDasharray:pt};return q.createElement("path",Gx({},bo(t),{className:Ae,d:WC(Et,_t,jt,$e,ct),ref:N,style:HC(HC({},Ut),t.style)}))})},rZ=["option","shapeType","activeClassName"];function nZ(e,t){if(e==null)return{};var i,a,d=iZ(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function iZ(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function YC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Zx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(i),!0).forEach(function(a){aZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):YC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function aZ(e,t,i){return(t=oZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function oZ(e){var t=sZ(e,"string");return typeof t=="symbol"?t:t+""}function sZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lZ(e,t){return Zx(Zx({},t),e)}function uZ(e,t){return e==="symbols"}function XC(e){var{shapeType:t,elementProps:i}=e;switch(t){case"rectangle":return q.createElement(ez,i);case"trapezoid":return q.createElement(tZ,i);case"sector":return q.createElement(nz,i);case"symbols":if(uZ(t))return q.createElement(UO,i);break;case"curve":return q.createElement(Dv,i);default:return null}}function cZ(e){return q.isValidElement(e)?e.props:e}function LR(e){var{option:t,shapeType:i,activeClassName:a="recharts-active-shape"}=e,d=nZ(e,rZ),g;if(q.isValidElement(t))g=q.cloneElement(t,Zx(Zx({},d),cZ(t)));else if(typeof t=="function")g=t(d,d.index);else if(X7(t)&&typeof t!="boolean"){var v=lZ(t,d);g=q.createElement(XC,{shapeType:i,elementProps:v})}else{var u=d;g=q.createElement(XC,{shapeType:i,elementProps:u})}return d.isActive?q.createElement(wo,{className:a},g):g}var jR=(e,t,i)=>{var a=Ii();return(d,g)=>v=>{e?.(d,g,v),a(Wk({activeIndex:String(g),activeDataKey:t,activeCoordinate:d.tooltipPosition,activeGraphicalItemId:i}))}},BR=e=>{var t=Ii();return(i,a)=>d=>{e?.(i,a,d),t(M$())}},NR=(e,t,i)=>{var a=Ii();return(d,g)=>v=>{e?.(d,g,v),a(P$({activeIndex:String(g),activeDataKey:t,activeCoordinate:d.tooltipPosition,activeGraphicalItemId:i}))}};function $T(e){var{tooltipEntrySettings:t}=e,i=Ii(),a=ba(),d=q.useRef(null);return q.useLayoutEffect(()=>{a||(d.current===null?i(S$(t)):d.current!==t&&i(T$({prev:d.current,next:t})),d.current=t)},[t,i,a]),q.useLayoutEffect(()=>()=>{d.current&&(i(E$(d.current)),d.current=null)},[i]),null}function GT(e){var{legendPayload:t}=e,i=Ii(),a=ba(),d=q.useRef(null);return q.useLayoutEffect(()=>{a||(d.current===null?i(n6(t)):d.current!==t&&i(i6({prev:d.current,next:t})),d.current=t)},[i,a,t]),q.useLayoutEffect(()=>()=>{d.current&&(i(a6(d.current)),d.current=null)},[i]),null}var Qw,hZ=()=>{var[e]=q.useState(()=>Rv("uid-"));return e},fZ=(Qw=YL.useId)!==null&&Qw!==void 0?Qw:hZ;function dZ(e,t){var i=fZ();return t||(e?"".concat(e,"-").concat(i):i)}var pZ=q.createContext(void 0),ZT=e=>{var{id:t,type:i,children:a}=e,d=dZ("recharts-".concat(i),t);return q.createElement(pZ.Provider,{value:d},a(d))},mZ={cartesianItems:[],polarItems:[]},FR=ws({name:"graphicalItems",initialState:mZ,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:ni()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:i,next:a}=t.payload,d=Vu(e).cartesianItems.indexOf(i);d>-1&&(e.cartesianItems[d]=a)},prepare:ni()},removeCartesianGraphicalItem:{reducer(e,t){var i=Vu(e).cartesianItems.indexOf(t.payload);i>-1&&e.cartesianItems.splice(i,1)},prepare:ni()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:ni()},removePolarGraphicalItem:{reducer(e,t){var i=Vu(e).polarItems.indexOf(t.payload);i>-1&&e.polarItems.splice(i,1)},prepare:ni()}}}),{addCartesianGraphicalItem:gZ,replaceCartesianGraphicalItem:yZ,removeCartesianGraphicalItem:vZ,addPolarGraphicalItem:iQ,removePolarGraphicalItem:aQ}=FR.actions,_Z=FR.reducer,xZ=e=>{var t=Ii(),i=q.useRef(null);return q.useLayoutEffect(()=>{i.current===null?t(gZ(e)):i.current!==e&&t(yZ({prev:i.current,next:e})),i.current=e},[t,e]),q.useLayoutEffect(()=>()=>{i.current&&(t(vZ(i.current)),i.current=null)},[t]),null},HT=q.memo(xZ),bZ=["points"];function KC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Jw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(i),!0).forEach(function(a){wZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function wZ(e,t,i){return(t=SZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function SZ(e){var t=TZ(e,"string");return typeof t=="symbol"?t:t+""}function TZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hx(){return Hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Hx.apply(null,arguments)}function EZ(e,t){if(e==null)return{};var i,a,d=AZ(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function AZ(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function MZ(e){var{option:t,dotProps:i,className:a}=e;if(q.isValidElement(t))return q.cloneElement(t,i);if(typeof t=="function")return t(i);var d=bn(a,typeof t!="boolean"?t.className:""),g=i??{},{points:v}=g,u=EZ(g,bZ);return q.createElement(zR,Hx({},u,{className:d}))}function PZ(e,t){return e==null?!1:t?!0:e.length===1}function UR(e){var{points:t,dot:i,className:a,dotClassName:d,dataKey:g,baseProps:v,needClip:u,clipPathId:M,zIndex:C=Qi.scatter}=e;if(!PZ(t,i))return null;var D=qT(i),I=Y5(i),N=t.map((Y,H)=>{var $,se,he=Jw(Jw(Jw({r:3},v),I),{},{index:H,cx:($=Y.x)!==null&&$!==void 0?$:void 0,cy:(se=Y.y)!==null&&se!==void 0?se:void 0,dataKey:g,value:Y.value,payload:Y.payload,points:t});return q.createElement(MZ,{key:"dot-".concat(H),option:i,dotProps:he,className:d})}),G={};return u&&M!=null&&(G.clipPath="url(#clipPath-".concat(D?"":"dots-").concat(M,")")),q.createElement(nl,{zIndex:C},q.createElement(wo,Hx({className:a},G),N))}function QC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function JC(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?QC(Object(i),!0).forEach(function(a){CZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QC(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function CZ(e,t,i){return(t=DZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function DZ(e){var t=OZ(e,"string");return typeof t=="symbol"?t:t+""}function OZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VR=0,IZ={xAxis:{},yAxis:{},zAxis:{}},qR=ws({name:"cartesianAxis",initialState:IZ,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:ni()},replaceXAxis:{reducer(e,t){var{prev:i,next:a}=t.payload;e.xAxis[i.id]!==void 0&&(i.id!==a.id&&delete e.xAxis[i.id],e.xAxis[a.id]=a)},prepare:ni()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:ni()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:ni()},replaceYAxis:{reducer(e,t){var{prev:i,next:a}=t.payload;e.yAxis[i.id]!==void 0&&(i.id!==a.id&&delete e.yAxis[i.id],e.yAxis[a.id]=a)},prepare:ni()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:ni()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:ni()},replaceZAxis:{reducer(e,t){var{prev:i,next:a}=t.payload;e.zAxis[i.id]!==void 0&&(i.id!==a.id&&delete e.zAxis[i.id],e.zAxis[a.id]=a)},prepare:ni()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:ni()},updateYAxisWidth(e,t){var{id:i,width:a}=t.payload,d=e.yAxis[i];if(d){var g,v=d.widthHistory||[];if(v.length===3&&v[0]===v[2]&&a===v[1]&&a!==d.width&&Math.abs(a-((g=v[0])!==null&&g!==void 0?g:0))<=1)return;var u=[...v,a].slice(-3);e.yAxis[i]=JC(JC({},d),{},{width:a,widthHistory:u})}}}}),{addXAxis:zZ,replaceXAxis:kZ,removeXAxis:RZ,addYAxis:LZ,replaceYAxis:jZ,removeYAxis:BZ,addZAxis:oQ,replaceZAxis:sQ,removeZAxis:lQ,updateYAxisWidth:NZ}=qR.actions,FZ=qR.reducer,UZ=it([xa],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),VZ=it([UZ,gf,yf],(e,t,i)=>{if(!(!e||t==null||i==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,i-e.top-e.bottom)}}),qb=()=>nr(VZ),qZ=()=>nr(yG);function eD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function e2(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?eD(Object(i),!0).forEach(function(a){$Z(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):eD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function $Z(e,t,i){return(t=GZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function GZ(e){var t=ZZ(e,"string");return typeof t=="symbol"?t:t+""}function ZZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HZ=e=>{var{point:t,childIndex:i,mainColor:a,activeDot:d,dataKey:g,clipPath:v}=e;if(d===!1||t.x==null||t.y==null)return null;var u={index:i,dataKey:g,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},M=e2(e2(e2({},u),t_(d)),TS(d)),C;return q.isValidElement(d)?C=q.cloneElement(d,M):typeof d=="function"?C=d(M):C=q.createElement(zR,M),q.createElement(wo,{className:"recharts-active-dot",clipPath:v},C)};function Q2(e){var{points:t,mainColor:i,activeDot:a,itemDataKey:d,clipPath:g,zIndex:v=Qi.activeDot}=e,u=nr(sm),M=qZ();if(t==null||M==null)return null;var C=t.find(D=>M.includes(D.payload));return ai(C)?null:q.createElement(nl,{zIndex:v},q.createElement(HZ,{point:C,childIndex:Number(u),mainColor:i,dataKey:d,activeDot:a,clipPath:g}))}var tD=(e,t,i)=>{var a=i??e;if(!ai(a))return $u(a,t,0)},WZ=(e,t,i)=>{var a={},d=e.filter(Lb),g=e.filter(C=>C.stackId==null),v=d.reduce((C,D)=>{var I=C[D.stackId];return I==null&&(I=[]),I.push(D),C[D.stackId]=I,C},a),u=Object.entries(v).map(C=>{var D,[I,N]=C,G=N.map(H=>H.dataKey),Y=tD(t,i,(D=N[0])===null||D===void 0?void 0:D.barSize);return{stackId:I,dataKeys:G,barSize:Y}}),M=g.map(C=>{var D=[C.dataKey].filter(N=>N!=null),I=tD(t,i,C.barSize);return{stackId:void 0,dataKeys:D,barSize:I}});return[...u,...M]};function rD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function q0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(i),!0).forEach(function(a){YZ(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):rD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function YZ(e,t,i){return(t=XZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function XZ(e){var t=KZ(e,"string");return typeof t=="symbol"?t:t+""}function KZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QZ(e,t,i,a,d){var g,v=a.length;if(!(v<1)){var u=$u(e,i,0,!0),M,C=[];if(Dr((g=a[0])===null||g===void 0?void 0:g.barSize)){var D=!1,I=i/v,N=a.reduce((he,fe)=>he+(fe.barSize||0),0);N+=(v-1)*u,N>=i&&(N-=(v-1)*u,u=0),N>=i&&I>0&&(D=!0,I*=.9,N=v*I);var G=(i-N)/2>>0,Y={offset:G-u,size:0};M=a.reduce((he,fe)=>{var me,Ae={stackId:fe.stackId,dataKeys:fe.dataKeys,position:{offset:Y.offset+Y.size+u,size:D?I:(me=fe.barSize)!==null&&me!==void 0?me:0}},ge=[...he,Ae];return Y=Ae.position,ge},C)}else{var H=$u(t,i,0,!0);i-2*H-(v-1)*u<=0&&(u=0);var $=(i-2*H-(v-1)*u)/v;$>1&&($>>=0);var se=Dr(d)?Math.min($,d):$;M=a.reduce((he,fe,me)=>[...he,{stackId:fe.stackId,dataKeys:fe.dataKeys,position:{offset:H+($+u)*me+($-se)/2,size:se}}],C)}return M}}var JZ=(e,t,i,a,d,g,v)=>{var u=ai(v)?t:v,M=QZ(i,a,d!==g?d:g,e,u);return d!==g&&M!=null&&(M=M.map(C=>q0(q0({},C),{},{position:q0(q0({},C.position),{},{offset:C.position.offset-d/2})}))),M},eH=(e,t)=>{var i=Rb(t);if(!(!e||i==null||t==null)){var{stackId:a}=t;if(a!=null){var d=e[a];if(d){var{stackedData:g}=d;if(g)return g.find(v=>v.key===i)}}}},tH=(e,t)=>{if(!(e==null||t==null)){var i=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(i!=null)return i.position}};function rH(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Dr(e.zIndex)?e.zIndex:t}var nH=e=>{var{chartData:t}=e,i=Ii(),a=ba();return q.useEffect(()=>a?()=>{}:(i(fC(t)),()=>{i(fC(void 0))}),[t,i,a]),null},nD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},$R=ws({name:"brush",initialState:nD,reducers:{setBrushSettings(e,t){return t.payload==null?nD:t.payload}}}),{setBrushSettings:uQ}=$R.actions,iH=$R.reducer;function aH(e){return(e%180+180)%180}var oH=function(t){var{width:i,height:a}=t,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=aH(d),v=g*Math.PI/180,u=Math.atan(a/i),M=v>u&&v<Math.PI-u?a/Math.sin(v):i/Math.cos(v);return Math.abs(M)},sH={dots:[],areas:[],lines:[]},GR=ws({name:"referenceElements",initialState:sH,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var i=Vu(e).dots.findIndex(a=>a===t.payload);i!==-1&&e.dots.splice(i,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var i=Vu(e).areas.findIndex(a=>a===t.payload);i!==-1&&e.areas.splice(i,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var i=Vu(e).lines.findIndex(a=>a===t.payload);i!==-1&&e.lines.splice(i,1)}}}),{addDot:cQ,removeDot:hQ,addArea:fQ,removeArea:dQ,addLine:pQ,removeLine:mQ}=GR.actions,lH=GR.reducer,uH=q.createContext(void 0),cH=e=>{var{children:t}=e,[i]=q.useState("".concat(Rv("recharts"),"-clip")),a=qb();if(a==null)return null;var{x:d,y:g,width:v,height:u}=a;return q.createElement(uH.Provider,{value:i},q.createElement("defs",null,q.createElement("clipPath",{id:i},q.createElement("rect",{x:d,y:g,height:u,width:v}))),t)};function ZR(e,t){if(t<1)return[];if(t===1)return e;for(var i=[],a=0;a<e.length;a+=t){var d=e[a];d!==void 0&&i.push(d)}return i}function hH(e,t,i){var a={width:e.width+t.width,height:e.height+t.height};return oH(a,i)}function fH(e,t,i){var a=i==="width",{x:d,y:g,width:v,height:u}=e;return t===1?{start:a?d:g,end:a?d+v:g+u}:{start:a?d+v:g+u,end:a?d:g}}function Yv(e,t,i,a,d){if(e*t<e*a||e*t>e*d)return!1;var g=i();return e*(t-e*g/2-a)>=0&&e*(t+e*g/2-d)<=0}function dH(e,t){return ZR(e,t+1)}function pH(e,t,i,a,d){for(var g=(a||[]).slice(),{start:v,end:u}=t,M=0,C=1,D=v,I=function(){var Y=a?.[M];if(Y===void 0)return{v:ZR(a,C)};var H=M,$,se=()=>($===void 0&&($=i(Y,H)),$),he=Y.coordinate,fe=M===0||Yv(e,he,se,D,u);fe||(M=0,D=v,C+=1),fe&&(D=he+e*(se()/2+d),M+=C)},N;C<=g.length;)if(N=I(),N)return N.v;return[]}function mH(e,t,i,a,d){var g=(a||[]).slice(),v=g.length;if(v===0)return[];for(var{start:u,end:M}=t,C=1;C<=v;C++){for(var D=(v-1)%C,I=u,N=!0,G=function(){var me=a[H];if(me==null)return 0;var Ae=H,ge,Se=()=>(ge===void 0&&(ge=i(me,Ae)),ge),Ue=me.coordinate,et=H===D||Yv(e,Ue,Se,I,M);if(!et)return N=!1,1;et&&(I=Ue+e*(Se()/2+d))},Y,H=D;H<v&&(Y=G(),!(Y!==0&&Y===1));H+=C);if(N){for(var $=[],se=D;se<v;se+=C){var he=a[se];he!=null&&$.push(he)}return $}}return[]}function iD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function _o(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?iD(Object(i),!0).forEach(function(a){gH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):iD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function gH(e,t,i){return(t=yH(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yH(e){var t=vH(e,"string");return typeof t=="symbol"?t:t+""}function vH(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _H(e,t,i,a,d){for(var g=(a||[]).slice(),v=g.length,{start:u}=t,{end:M}=t,C=function(N){var G=g[N];if(G==null)return 1;var Y=G,H,$=()=>(H===void 0&&(H=i(G,N)),H);if(N===v-1){var se=e*(Y.coordinate+e*$()/2-M);g[N]=Y=_o(_o({},Y),{},{tickCoord:se>0?Y.coordinate-se*e:Y.coordinate})}else g[N]=Y=_o(_o({},Y),{},{tickCoord:Y.coordinate});if(Y.tickCoord!=null){var he=Yv(e,Y.tickCoord,$,u,M);he&&(M=Y.tickCoord-e*($()/2+d),g[N]=_o(_o({},Y),{},{isShow:!0}))}},D=v-1;D>=0;D--)C(D);return g}function xH(e,t,i,a,d,g){var v=(a||[]).slice(),u=v.length,{start:M,end:C}=t;if(g){var D=a[u-1];if(D!=null){var I=i(D,u-1),N=e*(D.coordinate+e*I/2-C);if(v[u-1]=D=_o(_o({},D),{},{tickCoord:N>0?D.coordinate-N*e:D.coordinate}),D.tickCoord!=null){var G=Yv(e,D.tickCoord,()=>I,M,C);G&&(C=D.tickCoord-e*(I/2+d),v[u-1]=_o(_o({},D),{},{isShow:!0}))}}}for(var Y=g?u-1:u,H=function(he){var fe=v[he];if(fe==null)return 1;var me=fe,Ae,ge=()=>(Ae===void 0&&(Ae=i(fe,he)),Ae);if(he===0){var Se=e*(me.coordinate-e*ge()/2-M);v[he]=me=_o(_o({},me),{},{tickCoord:Se<0?me.coordinate-Se*e:me.coordinate})}else v[he]=me=_o(_o({},me),{},{tickCoord:me.coordinate});if(me.tickCoord!=null){var Ue=Yv(e,me.tickCoord,ge,M,C);Ue&&(M=me.tickCoord+e*(ge()/2+d),v[he]=_o(_o({},me),{},{isShow:!0}))}},$=0;$<Y;$++)H($);return v}function WT(e,t,i){var{tick:a,ticks:d,viewBox:g,minTickGap:v,orientation:u,interval:M,tickFormatter:C,unit:D,angle:I}=e;if(!d||!d.length||!a)return[];if(qt(M)||l_.isSsr){var N;return(N=dH(d,qt(M)?M:0))!==null&&N!==void 0?N:[]}var G=[],Y=u==="top"||u==="bottom"?"width":"height",H=D&&Y==="width"?Ov(D,{fontSize:t,letterSpacing:i}):{width:0,height:0},$=(Ae,ge)=>{var Se=typeof C=="function"?C(Ae.value,ge):Ae.value;return Y==="width"?hH(Ov(Se,{fontSize:t,letterSpacing:i}),H,I):Ov(Se,{fontSize:t,letterSpacing:i})[Y]},se=d[0],he=d[1],fe=d.length>=2&&se!=null&&he!=null?_s(he.coordinate-se.coordinate):1,me=fH(g,fe,Y);return M==="equidistantPreserveStart"?pH(fe,me,$,d,v):M==="equidistantPreserveEnd"?mH(fe,me,$,d,v):(M==="preserveStart"||M==="preserveStartEnd"?G=xH(fe,me,$,d,v,M==="preserveStartEnd"):G=_H(fe,me,$,d,v),G.filter(Ae=>Ae.isShow))}var bH=e=>{var{ticks:t,label:i,labelGapWithTick:a=5,tickSize:d=0,tickMargin:g=0}=e,v=0;if(t){Array.from(t).forEach(D=>{if(D){var I=D.getBoundingClientRect();I.width>v&&(v=I.width)}});var u=i?i.getBoundingClientRect().width:0,M=d+g,C=v+M+u+(i?a:0);return Math.round(C)}return 0},wH=["axisLine","width","height","className","hide","ticks","axisType"];function SH(e,t){if(e==null)return{};var i,a,d=TH(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function TH(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},lm.apply(null,arguments)}function aD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Ti(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aD(Object(i),!0).forEach(function(a){EH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function EH(e,t,i){return(t=AH(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function AH(e){var t=MH(e,"string");return typeof t=="symbol"?t:t+""}function MH(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var of={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Qi.axis};function PH(e){var{x:t,y:i,width:a,height:d,orientation:g,mirror:v,axisLine:u,otherSvgProps:M}=e;if(!u)return null;var C=Ti(Ti(Ti({},M),el(u)),{},{fill:"none"});if(g==="top"||g==="bottom"){var D=+(g==="top"&&!v||g==="bottom"&&v);C=Ti(Ti({},C),{},{x1:t,y1:i+D*d,x2:t+a,y2:i+D*d})}else{var I=+(g==="left"&&!v||g==="right"&&v);C=Ti(Ti({},C),{},{x1:t+I*a,y1:i,x2:t+I*a,y2:i+d})}return q.createElement("line",lm({},C,{className:bn("recharts-cartesian-axis-line",Yg(u,"className"))}))}function CH(e,t,i,a,d,g,v,u,M){var C,D,I,N,G,Y,H=u?-1:1,$=e.tickSize||v,se=qt(e.tickCoord)?e.tickCoord:e.coordinate;switch(g){case"top":C=D=e.coordinate,N=i+ +!u*d,I=N-H*$,Y=I-H*M,G=se;break;case"left":I=N=e.coordinate,D=t+ +!u*a,C=D-H*$,G=C-H*M,Y=se;break;case"right":I=N=e.coordinate,D=t+ +u*a,C=D+H*$,G=C+H*M,Y=se;break;default:C=D=e.coordinate,N=i+ +u*d,I=N+H*$,Y=I+H*M,G=se;break}return{line:{x1:C,y1:I,x2:D,y2:N},tick:{x:G,y:Y}}}function DH(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function OH(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function IH(e){var{option:t,tickProps:i,value:a}=e,d,g=bn(i.className,"recharts-cartesian-axis-tick-value");if(q.isValidElement(t))d=q.cloneElement(t,Ti(Ti({},i),{},{className:g}));else if(typeof t=="function")d=t(Ti(Ti({},i),{},{className:g}));else{var v="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(v=bn(v,V7(t))),d=q.createElement(NT,lm({},i,{className:v}),a)}return d}var zH=q.forwardRef((e,t)=>{var{ticks:i=[],tick:a,tickLine:d,stroke:g,tickFormatter:v,unit:u,padding:M,tickTextProps:C,orientation:D,mirror:I,x:N,y:G,width:Y,height:H,tickSize:$,tickMargin:se,fontSize:he,letterSpacing:fe,getTicksConfig:me,events:Ae,axisType:ge}=e,Se=WT(Ti(Ti({},me),{},{ticks:i}),he,fe),Ue=DH(D,I),et=OH(D,I),vt=el(me),pt=t_(a),Fe={};typeof d=="object"&&(Fe=d);var Ct=Ti(Ti({},vt),{},{fill:"none"},Fe),It=Se.map(ct=>Ti({entry:ct},CH(ct,N,G,Y,H,D,$,I,se))),jt=It.map(ct=>{var{entry:Et,line:_t}=ct;return q.createElement(wo,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Et.value,"-").concat(Et.coordinate,"-").concat(Et.tickCoord)},d&&q.createElement("line",lm({},Ct,_t,{className:bn("recharts-cartesian-axis-tick-line",Yg(d,"className"))})))}),$e=It.map((ct,Et)=>{var _t,Ut,{entry:ze,tick:at}=ct,Pt=Ti(Ti(Ti(Ti({verticalAnchor:et},vt),{},{textAnchor:Ue,stroke:"none",fill:g},at),{},{index:Et,payload:ze,visibleTicksCount:Se.length,tickFormatter:v,padding:M},C),{},{angle:(_t=(Ut=C?.angle)!==null&&Ut!==void 0?Ut:vt.angle)!==null&&_t!==void 0?_t:0}),zt=Ti(Ti({},Pt),pt);return q.createElement(wo,lm({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ze.value,"-").concat(ze.coordinate,"-").concat(ze.tickCoord)},ES(Ae,ze,Et)),a&&q.createElement(IH,{option:a,tickProps:zt,value:"".concat(typeof v=="function"?v(ze.value,Et):ze.value).concat(u||"")}))});return q.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(ge,"-ticks")},$e.length>0&&q.createElement(nl,{zIndex:Qi.label},q.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(ge,"-tick-labels"),ref:t},$e)),jt.length>0&&q.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(ge,"-tick-lines")},jt))}),kH=q.forwardRef((e,t)=>{var{axisLine:i,width:a,height:d,className:g,hide:v,ticks:u,axisType:M}=e,C=SH(e,wH),[D,I]=q.useState(""),[N,G]=q.useState(""),Y=q.useRef(null);q.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var $;return bH({ticks:Y.current,label:($=e.labelRef)===null||$===void 0?void 0:$.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var H=q.useCallback($=>{if($){var se=$.getElementsByClassName("recharts-cartesian-axis-tick-value");Y.current=se;var he=se[0];if(he){var fe=window.getComputedStyle(he),me=fe.fontSize,Ae=fe.letterSpacing;(me!==D||Ae!==N)&&(I(me),G(Ae))}}},[D,N]);return v||a!=null&&a<=0||d!=null&&d<=0?null:q.createElement(nl,{zIndex:e.zIndex},q.createElement(wo,{className:bn("recharts-cartesian-axis",g)},q.createElement(PH,{x:e.x,y:e.y,width:a,height:d,orientation:e.orientation,mirror:e.mirror,axisLine:i,otherSvgProps:el(e)}),q.createElement(zH,{ref:H,axisType:M,events:C,fontSize:D,getTicksConfig:e,height:e.height,letterSpacing:N,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),q.createElement(y7,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},q.createElement(M7,{label:e.label,labelRef:e.labelRef}),e.children)))}),YT=q.forwardRef((e,t)=>{var i=Ka(e,of);return q.createElement(kH,lm({},i,{ref:t}))});YT.displayName="CartesianAxis";var RH=["x1","y1","x2","y2","key"],LH=["offset"],jH=["xAxisId","yAxisId"],BH=["xAxisId","yAxisId"];function oD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function xo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?oD(Object(i),!0).forEach(function(a){NH(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):oD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function NH(e,t,i){return(t=FH(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function FH(e){var t=UH(e,"string");return typeof t=="symbol"?t:t+""}function UH(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Yp.apply(null,arguments)}function Wx(e,t){if(e==null)return{};var i,a,d=VH(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function VH(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var qH=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:i,x:a,y:d,width:g,height:v,ry:u}=e;return q.createElement("rect",{x:a,y:d,ry:u,width:g,height:v,stroke:"none",fill:t,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function HR(e){var{option:t,lineItemProps:i}=e,a;if(q.isValidElement(t))a=q.cloneElement(t,i);else if(typeof t=="function")a=t(i);else{var d,{x1:g,y1:v,x2:u,y2:M,key:C}=i,D=Wx(i,RH),I=(d=el(D))!==null&&d!==void 0?d:{},{offset:N}=I,G=Wx(I,LH);a=q.createElement("line",Yp({},G,{x1:g,y1:v,x2:u,y2:M,fill:"none",key:C}))}return a}function $H(e){var{x:t,width:i,horizontal:a=!0,horizontalPoints:d}=e;if(!a||!d||!d.length)return null;var{xAxisId:g,yAxisId:v}=e,u=Wx(e,jH),M=d.map((C,D)=>{var I=xo(xo({},u),{},{x1:t,y1:C,x2:t+i,y2:C,key:"line-".concat(D),index:D});return q.createElement(HR,{key:"line-".concat(D),option:a,lineItemProps:I})});return q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},M)}function GH(e){var{y:t,height:i,vertical:a=!0,verticalPoints:d}=e;if(!a||!d||!d.length)return null;var{xAxisId:g,yAxisId:v}=e,u=Wx(e,BH),M=d.map((C,D)=>{var I=xo(xo({},u),{},{x1:C,y1:t,x2:C,y2:t+i,key:"line-".concat(D),index:D});return q.createElement(HR,{option:a,lineItemProps:I,key:"line-".concat(D)})});return q.createElement("g",{className:"recharts-cartesian-grid-vertical"},M)}function ZH(e){var{horizontalFill:t,fillOpacity:i,x:a,y:d,width:g,height:v,horizontalPoints:u,horizontal:M=!0}=e;if(!M||!t||!t.length||u==null)return null;var C=u.map(I=>Math.round(I+d-d)).sort((I,N)=>I-N);d!==C[0]&&C.unshift(0);var D=C.map((I,N)=>{var G=C[N+1],Y=G==null,H=Y?d+v-I:G-I;if(H<=0)return null;var $=N%t.length;return q.createElement("rect",{key:"react-".concat(N),y:I,x:a,height:H,width:g,stroke:"none",fill:t[$],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},D)}function HH(e){var{vertical:t=!0,verticalFill:i,fillOpacity:a,x:d,y:g,width:v,height:u,verticalPoints:M}=e;if(!t||!i||!i.length)return null;var C=M.map(I=>Math.round(I+d-d)).sort((I,N)=>I-N);d!==C[0]&&C.unshift(0);var D=C.map((I,N)=>{var G=C[N+1],Y=G==null,H=Y?d+v-I:G-I;if(H<=0)return null;var $=N%i.length;return q.createElement("rect",{key:"react-".concat(N),x:I,y:g,width:H,height:u,stroke:"none",fill:i[$],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},D)}var WH=(e,t)=>{var{xAxis:i,width:a,height:d,offset:g}=e;return OI(WT(xo(xo(xo({},of),i),{},{ticks:II(i),viewBox:{x:0,y:0,width:a,height:d}})),g.left,g.left+g.width,t)},YH=(e,t)=>{var{yAxis:i,width:a,height:d,offset:g}=e;return OI(WT(xo(xo(xo({},of),i),{},{ticks:II(i),viewBox:{x:0,y:0,width:a,height:d}})),g.top,g.top+g.height,t)},XH={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Qi.grid};function ex(e){var t=NI(),i=FI(),a=BI(),d=xo(xo({},Ka(e,XH)),{},{x:qt(e.x)?e.x:a.left,y:qt(e.y)?e.y:a.top,width:qt(e.width)?e.width:a.width,height:qt(e.height)?e.height:a.height}),{xAxisId:g,yAxisId:v,x:u,y:M,width:C,height:D,syncWithTicks:I,horizontalValues:N,verticalValues:G}=d,Y=ba(),H=nr(et=>eC(et,"xAxis",g,Y)),$=nr(et=>eC(et,"yAxis",v,Y));if(!Gc(C)||!Gc(D)||!qt(u)||!qt(M))return null;var se=d.verticalCoordinatesGenerator||WH,he=d.horizontalCoordinatesGenerator||YH,{horizontalPoints:fe,verticalPoints:me}=d;if((!fe||!fe.length)&&typeof he=="function"){var Ae=N&&N.length,ge=he({yAxis:$?xo(xo({},$),{},{ticks:Ae?N:$.ticks}):void 0,width:t??C,height:i??D,offset:a},Ae?!0:I);_x(Array.isArray(ge),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof ge,"]")),Array.isArray(ge)&&(fe=ge)}if((!me||!me.length)&&typeof se=="function"){var Se=G&&G.length,Ue=se({xAxis:H?xo(xo({},H),{},{ticks:Se?G:H.ticks}):void 0,width:t??C,height:i??D,offset:a},Se?!0:I);_x(Array.isArray(Ue),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof Ue,"]")),Array.isArray(Ue)&&(me=Ue)}return q.createElement(nl,{zIndex:d.zIndex},q.createElement("g",{className:"recharts-cartesian-grid"},q.createElement(qH,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),q.createElement(ZH,Yp({},d,{horizontalPoints:fe})),q.createElement(HH,Yp({},d,{verticalPoints:me})),q.createElement($H,Yp({},d,{offset:a,horizontalPoints:fe,xAxis:H,yAxis:$})),q.createElement(GH,Yp({},d,{offset:a,verticalPoints:me,xAxis:H,yAxis:$}))))}ex.displayName="CartesianGrid";var KH={},WR=ws({name:"errorBars",initialState:KH,reducers:{addErrorBar:(e,t)=>{var{itemId:i,errorBar:a}=t.payload;e[i]||(e[i]=[]),e[i].push(a)},replaceErrorBar:(e,t)=>{var{itemId:i,prev:a,next:d}=t.payload;e[i]&&(e[i]=e[i].map(g=>g.dataKey===a.dataKey&&g.direction===a.direction?d:g))},removeErrorBar:(e,t)=>{var{itemId:i,errorBar:a}=t.payload;e[i]&&(e[i]=e[i].filter(d=>d.dataKey!==a.dataKey||d.direction!==a.direction))}}}),{addErrorBar:gQ,replaceErrorBar:yQ,removeErrorBar:vQ}=WR.actions,QH=WR.reducer,JH=["children"];function eW(e,t){if(e==null)return{};var i,a,d=tW(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function tW(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var rW={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},nW=q.createContext(rW);function YR(e){var{children:t}=e,i=eW(e,JH);return q.createElement(nW.Provider,{value:i},t)}function $b(e,t){var i,a,d=nr(C=>xf(C,e)),g=nr(C=>bf(C,t)),v=(i=d?.allowDataOverflow)!==null&&i!==void 0?i:ga.allowDataOverflow,u=(a=g?.allowDataOverflow)!==null&&a!==void 0?a:ya.allowDataOverflow,M=v||u;return{needClip:M,needClipX:v,needClipY:u}}function XT(e){var{xAxisId:t,yAxisId:i,clipPathId:a}=e,d=qb(),{needClipX:g,needClipY:v,needClip:u}=$b(t,i);if(!u||!d)return null;var{x:M,y:C,width:D,height:I}=d;return q.createElement("clipPath",{id:"clipPath-".concat(a)},q.createElement("rect",{x:g?M:M-D/2,y:v?C:C-I/2,width:g?D:D*2,height:v?I:I*2}))}var XR=(e,t,i,a)=>Wc(e,"xAxis",t,a),KR=(e,t,i,a)=>Hc(e,"xAxis",t,a),QR=(e,t,i,a)=>Wc(e,"yAxis",i,a),JR=(e,t,i,a)=>Hc(e,"yAxis",i,a),iW=it([an,XR,QR,KR,JR],(e,t,i,a,d)=>Hu(e,"xAxis")?Md(t,a,!1):Md(i,d,!1)),aW=(e,t,i,a,d)=>d;function oW(e){return e.type==="line"}var sW=it([g_,aW],(e,t)=>e.filter(oW).find(i=>i.id===t)),lW=it([an,XR,QR,KR,JR,sW,iW,cT],(e,t,i,a,d,g,v,u)=>{var{chartData:M,dataStartIndex:C,dataEndIndex:D}=u;if(!(g==null||t==null||i==null||a==null||d==null||a.length===0||d.length===0||v==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:I,data:N}=g,G;if(N!=null&&N.length>0?G=N:G=M?.slice(C,D+1),G!=null)return WW({layout:e,xAxis:t,yAxis:i,xAxisTicks:a,yAxisTicks:d,dataKey:I,bandSize:v,displayedData:G})}});function eL(e){var t=t_(e),i=3,a=2;if(t!=null){var{r:d,strokeWidth:g}=t,v=Number(d),u=Number(g);return(Number.isNaN(v)||v<0)&&(v=i),(Number.isNaN(u)||u<0)&&(u=a),{r:v,strokeWidth:u}}return{r:i,strokeWidth:a}}var t2={exports:{}},r2={};var sD;function uW(){if(sD)return r2;sD=1;var e=ty();function t(M,C){return M===C&&(M!==0||1/M===1/C)||M!==M&&C!==C}var i=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,d=e.useRef,g=e.useEffect,v=e.useMemo,u=e.useDebugValue;return r2.useSyncExternalStoreWithSelector=function(M,C,D,I,N){var G=d(null);if(G.current===null){var Y={hasValue:!1,value:null};G.current=Y}else Y=G.current;G=v(function(){function $(Ae){if(!se){if(se=!0,he=Ae,Ae=I(Ae),N!==void 0&&Y.hasValue){var ge=Y.value;if(N(ge,Ae))return fe=ge}return fe=Ae}if(ge=fe,i(he,Ae))return ge;var Se=I(Ae);return N!==void 0&&N(ge,Se)?(he=Ae,ge):(he=Ae,fe=Se)}var se=!1,he,fe,me=D===void 0?null:D;return[function(){return $(C())},me===null?void 0:function(){return $(me())}]},[C,D,I,N]);var H=a(M,G[0],G[1]);return g(function(){Y.hasValue=!0,Y.value=H},[H]),u(H),H},r2}var lD;function cW(){return lD||(lD=1,t2.exports=uW()),t2.exports}cW();function hW(e){e()}function fW(){let e=null,t=null;return{clear(){e=null,t=null},notify(){hW(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){const i=[];let a=e;for(;a;)i.push(a),a=a.next;return i},subscribe(i){let a=!0;const d=t={callback:i,next:null,prev:t};return d.prev?d.prev.next=d:e=d,function(){!a||e===null||(a=!1,d.next?d.next.prev=d.prev:t=d.prev,d.prev?d.prev.next=d.next:e=d.next)}}}}var uD={notify(){},get:()=>[]};function dW(e,t){let i,a=uD,d=0,g=!1;function v(H){D();const $=a.subscribe(H);let se=!1;return()=>{se||(se=!0,$(),I())}}function u(){a.notify()}function M(){Y.onStateChange&&Y.onStateChange()}function C(){return g}function D(){d++,i||(i=e.subscribe(M),a=fW())}function I(){d--,i&&d===0&&(i(),i=void 0,a.clear(),a=uD)}function N(){g||(g=!0,D())}function G(){g&&(g=!1,I())}const Y={addNestedSub:v,notifyNestedSubs:u,handleChangeWrapper:M,isSubscribed:C,trySubscribe:N,tryUnsubscribe:G,getListeners:()=>a};return Y}var pW=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mW=pW(),gW=()=>typeof navigator<"u"&&navigator.product==="ReactNative",yW=gW(),vW=()=>mW||yW?q.useLayoutEffect:q.useEffect,_W=vW();function cD(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xW(e,t){if(cD(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(let d=0;d<i.length;d++)if(!Object.prototype.hasOwnProperty.call(t,i[d])||!cD(e[i[d]],t[i[d]]))return!1;return!0}var bW=Symbol.for("react-redux-context"),wW=typeof globalThis<"u"?globalThis:{};function SW(){if(!q.createContext)return{};const e=wW[bW]??=new Map;let t=e.get(q.createContext);return t||(t=q.createContext(null),e.set(q.createContext,t)),t}var TW=SW();function EW(e){const{children:t,context:i,serverState:a,store:d}=e,g=q.useMemo(()=>{const M=dW(d);return{store:d,subscription:M,getServerState:a?()=>a:void 0}},[d,a]),v=q.useMemo(()=>d.getState(),[d]);_W(()=>{const{subscription:M}=g;return M.onStateChange=M.notifyNestedSubs,M.trySubscribe(),v!==d.getState()&&M.notifyNestedSubs(),()=>{M.tryUnsubscribe(),M.onStateChange=void 0}},[g,v]);const u=i||TW;return q.createElement(u.Provider,{value:g},t)}var AW=EW,MW=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function PW(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function w_(e,t){var i=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of i)if(MW.has(a)){if(e[a]==null&&t[a]==null)continue;if(!xW(e[a],t[a]))return!1}else if(!PW(e[a],t[a]))return!1;return!0}var CW=["id"],DW=["type","layout","connectNulls","needClip","shape"],OW=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Xv.apply(null,arguments)}function hD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Nc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?hD(Object(i),!0).forEach(function(a){IW(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function IW(e,t,i){return(t=zW(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zW(e){var t=kW(e,"string");return typeof t=="symbol"?t:t+""}function kW(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KT(e,t){if(e==null)return{};var i,a,d=RW(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function RW(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var LW=e=>{var{dataKey:t,name:i,stroke:a,legendType:d,hide:g}=e;return[{inactive:g,dataKey:t,type:d,color:a,value:iy(i,t),payload:e}]},jW=q.memo(e=>{var{dataKey:t,data:i,stroke:a,strokeWidth:d,fill:g,name:v,hide:u,unit:M,tooltipType:C,id:D}=e,I={dataDefinedOnItem:i,getPosition:Cd,settings:{stroke:a,strokeWidth:d,fill:g,dataKey:t,nameKey:void 0,name:iy(v,t),hide:u,type:C,color:a,unit:M,graphicalItemId:D}};return q.createElement($T,{tooltipEntrySettings:I})}),tL=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function BW(e,t){for(var i=e.length%2!==0?[...e,0]:e,a=[],d=0;d<t;++d)a=[...a,...i];return a}var NW=(e,t,i)=>{var a=i.reduce((G,Y)=>G+Y);if(!a)return tL(t,e);for(var d=Math.floor(e/a),g=e%a,v=t-e,u=[],M=0,C=0;M<i.length;C+=(D=i[M])!==null&&D!==void 0?D:0,++M){var D,I=i[M];if(I!=null&&C+I>g){u=[...i.slice(0,M),g-C];break}}var N=u.length%2===0?[0,v]:[v];return[...BW(i,d),...u,...N].map(G=>"".concat(G,"px")).join(", ")};function FW(e){var{clipPathId:t,points:i,props:a}=e,{dot:d,dataKey:g,needClip:v}=a,{id:u}=a,M=KT(a,CW),C=el(M);return q.createElement(UR,{points:i,dot:d,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:g,baseProps:C,needClip:v,clipPathId:t})}function UW(e){var{showLabels:t,children:i,points:a}=e,d=q.useMemo(()=>a?.map(g=>{var v,u,M={x:(v=g.x)!==null&&v!==void 0?v:0,y:(u=g.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Nc(Nc({},M),{},{value:g.value,payload:g.payload,viewBox:M,parentViewBox:void 0,fill:void 0})}),[a]);return q.createElement(UT,{value:t?d:void 0},i)}function fD(e){var{clipPathId:t,pathRef:i,points:a,strokeDasharray:d,props:g}=e,{type:v,layout:u,connectNulls:M,needClip:C,shape:D}=g,I=KT(g,DW),N=Nc(Nc({},bo(I)),{},{fill:"none",className:"recharts-line-curve",clipPath:C?"url(#clipPath-".concat(t,")"):void 0,points:a,type:v,layout:u,connectNulls:M,strokeDasharray:d??g.strokeDasharray});return q.createElement(q.Fragment,null,a?.length>1&&q.createElement(LR,Xv({shapeType:"curve",option:D},N,{pathRef:i})),q.createElement(FW,{points:a,clipPathId:t,props:g}))}function VW(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function qW(e){var{clipPathId:t,props:i,pathRef:a,previousPointsRef:d,longestAnimatedLengthRef:g}=e,{points:v,strokeDasharray:u,isAnimationActive:M,animationBegin:C,animationDuration:D,animationEasing:I,animateNewValues:N,width:G,height:Y,onAnimationEnd:H,onAnimationStart:$}=i,se=d.current,he=c_(v,"recharts-line-"),fe=q.useRef(he),[me,Ae]=q.useState(!1),ge=!me,Se=q.useCallback(()=>{typeof H=="function"&&H(),Ae(!1)},[H]),Ue=q.useCallback(()=>{typeof $=="function"&&$(),Ae(!0)},[$]),et=VW(a.current),vt=q.useRef(0);fe.current!==he&&(vt.current=g.current,fe.current=he);var pt=vt.current;return q.createElement(UW,{points:v,showLabels:ge},i.children,q.createElement(u_,{animationId:he,begin:C,duration:D,isActive:M,easing:I,onAnimationEnd:Se,onAnimationStart:Ue,key:he},Fe=>{var Ct=Pn(pt,et+pt,Fe),It=Math.min(Ct,et),jt;if(M)if(u){var $e="".concat(u).split(/[,\s]+/gim).map(_t=>parseFloat(_t));jt=NW(It,et,$e)}else jt=tL(et,It);else jt=u==null?void 0:String(u);if(Fe>0&&et>0&&(d.current=v,g.current=Math.max(g.current,It)),se){var ct=se.length/v.length,Et=Fe===1?v:v.map((_t,Ut)=>{var ze=Math.floor(Ut*ct);if(se[ze]){var at=se[ze];return Nc(Nc({},_t),{},{x:Pn(at.x,_t.x,Fe),y:Pn(at.y,_t.y,Fe)})}return N?Nc(Nc({},_t),{},{x:Pn(G*2,_t.x,Fe),y:Pn(Y/2,_t.y,Fe)}):Nc(Nc({},_t),{},{x:_t.x,y:_t.y})});return d.current=Et,q.createElement(fD,{props:i,points:Et,clipPathId:t,pathRef:a,strokeDasharray:jt})}return q.createElement(fD,{props:i,points:v,clipPathId:t,pathRef:a,strokeDasharray:jt})}),q.createElement(VT,{label:i.label}))}function $W(e){var{clipPathId:t,props:i}=e,a=q.useRef(null),d=q.useRef(0),g=q.useRef(null);return q.createElement(qW,{props:i,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:d,pathRef:g})}var GW=(e,t)=>{var i,a;return{x:(i=e.x)!==null&&i!==void 0?i:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Ai(e.payload,t)}};class ZW extends q.Component{render(){var{hide:t,dot:i,points:a,className:d,xAxisId:g,yAxisId:v,top:u,left:M,width:C,height:D,id:I,needClip:N,zIndex:G}=this.props;if(t)return null;var Y=bn("recharts-line",d),H=I,{r:$,strokeWidth:se}=eL(i),he=qT(i),fe=$*2+se,me=N?"url(#clipPath-".concat(he?"":"dots-").concat(H,")"):void 0;return q.createElement(nl,{zIndex:G},q.createElement(wo,{className:Y},N&&q.createElement("defs",null,q.createElement(XT,{clipPathId:H,xAxisId:g,yAxisId:v}),!he&&q.createElement("clipPath",{id:"clipPath-dots-".concat(H)},q.createElement("rect",{x:M-fe/2,y:u-fe/2,width:C+fe,height:D+fe}))),q.createElement(YR,{xAxisId:g,yAxisId:v,data:a,dataPointFormatter:GW,errorBarOffset:0},q.createElement($W,{props:this.props,clipPathId:H}))),q.createElement(Q2,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:me}))}}var rL={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Qi.line,type:"linear"};function HW(e){var t=Ka(e,rL),{activeDot:i,animateNewValues:a,animationBegin:d,animationDuration:g,animationEasing:v,connectNulls:u,dot:M,hide:C,isAnimationActive:D,label:I,legendType:N,xAxisId:G,yAxisId:Y,id:H}=t,$=KT(t,OW),{needClip:se}=$b(G,Y),he=qb(),fe=Dd(),me=ba(),Ae=nr(vt=>lW(vt,G,Y,me,H));if(fe!=="horizontal"&&fe!=="vertical"||Ae==null||he==null)return null;var{height:ge,width:Se,x:Ue,y:et}=he;return q.createElement(ZW,Xv({},$,{id:H,connectNulls:u,dot:M,activeDot:i,animateNewValues:a,animationBegin:d,animationDuration:g,animationEasing:v,isAnimationActive:D,hide:C,label:I,legendType:N,xAxisId:G,yAxisId:Y,points:Ae,layout:fe,height:ge,width:Se,left:Ue,top:et,needClip:se}))}function WW(e){var{layout:t,xAxis:i,yAxis:a,xAxisTicks:d,yAxisTicks:g,dataKey:v,bandSize:u,displayedData:M}=e;return M.map((C,D)=>{var I=Ai(C,v);if(t==="horizontal"){var N=vx({axis:i,ticks:d,bandSize:u,entry:C,index:D}),G=ai(I)?null:a.scale.map(I);return{x:N,y:G??null,value:I,payload:C}}var Y=ai(I)?null:i.scale.map(I),H=vx({axis:a,ticks:g,bandSize:u,entry:C,index:D});return Y==null||H==null?null:{x:Y,y:H,value:I,payload:C}}).filter(Boolean)}function YW(e){var t=Ka(e,rL),i=ba();return q.createElement(ZT,{id:t.id,type:"line"},a=>q.createElement(q.Fragment,null,q.createElement(GT,{legendPayload:LW(t)}),q.createElement(jW,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),q.createElement(HT,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:i}),q.createElement(HW,Xv({},t,{id:a}))))}var nL=q.memo(YW,w_);nL.displayName="Line";function Xc(e,t){var i,a;return(i=(a=e.graphicalItems.cartesianItems.find(d=>d.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&i!==void 0?i:VR}function Kc(e,t){var i,a;return(i=(a=e.graphicalItems.cartesianItems.find(d=>d.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&i!==void 0?i:VR}var iL=(e,t,i)=>Wc(e,"xAxis",Xc(e,t),i),aL=(e,t,i)=>Hc(e,"xAxis",Xc(e,t),i),oL=(e,t,i)=>Wc(e,"yAxis",Kc(e,t),i),sL=(e,t,i)=>Hc(e,"yAxis",Kc(e,t),i),XW=it([an,iL,oL,aL,sL],(e,t,i,a,d)=>Hu(e,"xAxis")?Md(t,a,!1):Md(i,d,!1)),KW=(e,t)=>t,lL=it([g_,KW],(e,t)=>e.filter(i=>i.type==="area").find(i=>i.id===t)),uL=e=>{var t=an(e),i=Hu(t,"xAxis");return i?"yAxis":"xAxis"},QW=(e,t)=>{var i=uL(e);return i==="yAxis"?Kc(e,t):Xc(e,t)},JW=(e,t,i)=>Ux(e,uL(e),QW(e,t),i),eY=it([lL,JW],(e,t)=>{var i;if(!(e==null||t==null)){var{stackId:a}=e,d=Rb(e);if(!(a==null||d==null)){var g=(i=t[a])===null||i===void 0?void 0:i.stackedData,v=g?.find(u=>u.key===d);if(v!=null)return v.map(u=>[u[0],u[1]])}}}),tY=it([an,iL,oL,aL,sL,eY,Nz,XW,lL,fq],(e,t,i,a,d,g,v,u,M,C)=>{var{chartData:D,dataStartIndex:I,dataEndIndex:N}=v;if(!(M==null||e!=="horizontal"&&e!=="vertical"||t==null||i==null||a==null||d==null||a.length===0||d.length===0||u==null)){var{data:G}=M,Y;if(G&&G.length>0?Y=G:Y=D?.slice(I,N+1),Y!=null)return xY({layout:e,xAxis:t,yAxis:i,xAxisTicks:a,yAxisTicks:d,dataStartIndex:I,areaSettings:M,stackedData:g,displayedData:Y,chartBaseValue:C,bandSize:u})}}),rY=["id"],nY=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},em.apply(null,arguments)}function cL(e,t){if(e==null)return{};var i,a,d=iY(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function iY(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function dD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Gg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?dD(Object(i),!0).forEach(function(a){aY(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function aY(e,t,i){return(t=oY(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function oY(e){var t=sY(e,"string");return typeof t=="symbol"?t:t+""}function sY(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yx(e,t){return e&&e!=="none"?e:t}var lY=e=>{var{dataKey:t,name:i,stroke:a,fill:d,legendType:g,hide:v}=e;return[{inactive:v,dataKey:t,type:g,color:Yx(a,d),value:iy(i,t),payload:e}]},uY=q.memo(e=>{var{dataKey:t,data:i,stroke:a,strokeWidth:d,fill:g,name:v,hide:u,unit:M,tooltipType:C,id:D}=e,I={dataDefinedOnItem:i,getPosition:Cd,settings:{stroke:a,strokeWidth:d,fill:g,dataKey:t,nameKey:void 0,name:iy(v,t),hide:u,type:C,color:Yx(a,g),unit:M,graphicalItemId:D}};return q.createElement($T,{tooltipEntrySettings:I})});function cY(e){var{clipPathId:t,points:i,props:a}=e,{needClip:d,dot:g,dataKey:v}=a,u=el(a);return q.createElement(UR,{points:i,dot:g,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:v,baseProps:u,needClip:d,clipPathId:t})}function hY(e){var{showLabels:t,children:i,points:a}=e,d=a.map(g=>{var v,u,M={x:(v=g.x)!==null&&v!==void 0?v:0,y:(u=g.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Gg(Gg({},M),{},{value:g.value,payload:g.payload,parentViewBox:void 0,viewBox:M,fill:void 0})});return q.createElement(UT,{value:t?d:void 0},i)}function pD(e){var{points:t,baseLine:i,needClip:a,clipPathId:d,props:g}=e,{layout:v,type:u,stroke:M,connectNulls:C,isRange:D}=g,{id:I}=g,N=cL(g,rY),G=el(N),Y=bo(N);return q.createElement(q.Fragment,null,t?.length>1&&q.createElement(wo,{clipPath:a?"url(#clipPath-".concat(d,")"):void 0},q.createElement(Dv,em({},Y,{id:I,points:t,connectNulls:C,type:u,baseLine:i,layout:v,stroke:"none",className:"recharts-area-area"})),M!=="none"&&q.createElement(Dv,em({},G,{className:"recharts-area-curve",layout:v,type:u,connectNulls:C,fill:"none",points:t})),M!=="none"&&D&&q.createElement(Dv,em({},G,{className:"recharts-area-curve",layout:v,type:u,connectNulls:C,fill:"none",points:i}))),q.createElement(cY,{points:t,props:N,clipPathId:d}))}function fY(e){var t,i,{alpha:a,baseLine:d,points:g,strokeWidth:v}=e,u=(t=g[0])===null||t===void 0?void 0:t.y,M=(i=g[g.length-1])===null||i===void 0?void 0:i.y;if(!Dr(u)||!Dr(M))return null;var C=a*Math.abs(u-M),D=Math.max(...g.map(I=>I.x||0));return qt(d)?D=Math.max(d,D):d&&Array.isArray(d)&&d.length&&(D=Math.max(...d.map(I=>I.x||0),D)),qt(D)?q.createElement("rect",{x:0,y:u<M?u:u-C,width:D+(v?parseInt("".concat(v),10):1),height:Math.floor(C)}):null}function dY(e){var t,i,{alpha:a,baseLine:d,points:g,strokeWidth:v}=e,u=(t=g[0])===null||t===void 0?void 0:t.x,M=(i=g[g.length-1])===null||i===void 0?void 0:i.x;if(!Dr(u)||!Dr(M))return null;var C=a*Math.abs(u-M),D=Math.max(...g.map(I=>I.y||0));return qt(d)?D=Math.max(d,D):d&&Array.isArray(d)&&d.length&&(D=Math.max(...d.map(I=>I.y||0),D)),qt(D)?q.createElement("rect",{x:u<M?u:u-C,y:0,width:C,height:Math.floor(D+(v?parseInt("".concat(v),10):1))}):null}function pY(e){var{alpha:t,layout:i,points:a,baseLine:d,strokeWidth:g}=e;return i==="vertical"?q.createElement(fY,{alpha:t,points:a,baseLine:d,strokeWidth:g}):q.createElement(dY,{alpha:t,points:a,baseLine:d,strokeWidth:g})}function mY(e){var{needClip:t,clipPathId:i,props:a,previousPointsRef:d,previousBaselineRef:g}=e,{points:v,baseLine:u,isAnimationActive:M,animationBegin:C,animationDuration:D,animationEasing:I,onAnimationStart:N,onAnimationEnd:G}=a,Y=q.useMemo(()=>({points:v,baseLine:u}),[v,u]),H=c_(Y,"recharts-area-"),$=BS(),[se,he]=q.useState(!1),fe=!se,me=q.useCallback(()=>{typeof G=="function"&&G(),he(!1)},[G]),Ae=q.useCallback(()=>{typeof N=="function"&&N(),he(!0)},[N]);if($==null)return null;var ge=d.current,Se=g.current;return q.createElement(hY,{showLabels:fe,points:v},a.children,q.createElement(u_,{animationId:H,begin:C,duration:D,isActive:M,easing:I,onAnimationEnd:me,onAnimationStart:Ae,key:H},Ue=>{if(ge){var et=ge.length/v.length,vt=Ue===1?v:v.map((Fe,Ct)=>{var It=Math.floor(Ct*et);if(ge[It]){var jt=ge[It];return Gg(Gg({},Fe),{},{x:Pn(jt.x,Fe.x,Ue),y:Pn(jt.y,Fe.y,Ue)})}return Fe}),pt;return qt(u)?pt=Pn(Se,u,Ue):ai(u)||qu(u)?pt=Pn(Se,0,Ue):pt=u.map((Fe,Ct)=>{var It=Math.floor(Ct*et);if(Array.isArray(Se)&&Se[It]){var jt=Se[It];return Gg(Gg({},Fe),{},{x:Pn(jt.x,Fe.x,Ue),y:Pn(jt.y,Fe.y,Ue)})}return Fe}),Ue>0&&(d.current=vt,g.current=pt),q.createElement(pD,{points:vt,baseLine:pt,needClip:t,clipPathId:i,props:a})}return Ue>0&&(d.current=v,g.current=u),q.createElement(wo,null,M&&q.createElement("defs",null,q.createElement("clipPath",{id:"animationClipPath-".concat(i)},q.createElement(pY,{alpha:Ue,points:v,baseLine:u,layout:$,strokeWidth:a.strokeWidth}))),q.createElement(wo,{clipPath:"url(#animationClipPath-".concat(i,")")},q.createElement(pD,{points:v,baseLine:u,needClip:t,clipPathId:i,props:a})))}),q.createElement(VT,{label:a.label}))}function gY(e){var{needClip:t,clipPathId:i,props:a}=e,d=q.useRef(null),g=q.useRef();return q.createElement(mY,{needClip:t,clipPathId:i,props:a,previousPointsRef:d,previousBaselineRef:g})}class yY extends q.PureComponent{render(){var{hide:t,dot:i,points:a,className:d,top:g,left:v,needClip:u,xAxisId:M,yAxisId:C,width:D,height:I,id:N,baseLine:G,zIndex:Y}=this.props;if(t)return null;var H=bn("recharts-area",d),$=N,{r:se,strokeWidth:he}=eL(i),fe=qT(i),me=se*2+he,Ae=u?"url(#clipPath-".concat(fe?"":"dots-").concat($,")"):void 0;return q.createElement(nl,{zIndex:Y},q.createElement(wo,{className:H},u&&q.createElement("defs",null,q.createElement(XT,{clipPathId:$,xAxisId:M,yAxisId:C}),!fe&&q.createElement("clipPath",{id:"clipPath-dots-".concat($)},q.createElement("rect",{x:v-me/2,y:g-me/2,width:D+me,height:I+me}))),q.createElement(gY,{needClip:u,clipPathId:$,props:this.props})),q.createElement(Q2,{points:a,mainColor:Yx(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Ae}),this.props.isRange&&Array.isArray(G)&&q.createElement(Q2,{points:G,mainColor:Yx(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:Ae}))}}var hL={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Qi.area};function vY(e){var t,i=Ka(e,hL),{activeDot:a,animationBegin:d,animationDuration:g,animationEasing:v,connectNulls:u,dot:M,fill:C,fillOpacity:D,hide:I,isAnimationActive:N,legendType:G,stroke:Y,xAxisId:H,yAxisId:$}=i,se=cL(i,nY),he=Dd(),fe=fR(),{needClip:me}=$b(H,$),Ae=ba(),{points:ge,isRange:Se,baseLine:Ue}=(t=nr(It=>tY(It,e.id,Ae)))!==null&&t!==void 0?t:{},et=qb();if(he!=="horizontal"&&he!=="vertical"||et==null||fe!=="AreaChart"&&fe!=="ComposedChart")return null;var{height:vt,width:pt,x:Fe,y:Ct}=et;return!ge||!ge.length?null:q.createElement(yY,em({},se,{activeDot:a,animationBegin:d,animationDuration:g,animationEasing:v,baseLine:Ue,connectNulls:u,dot:M,fill:C,fillOpacity:D,height:vt,hide:I,layout:he,isAnimationActive:N==="auto"?!l_.isSsr:N,isRange:Se,legendType:G,needClip:me,points:ge,stroke:Y,width:pt,left:Fe,top:Ct,xAxisId:H,yAxisId:$}))}var _Y=(e,t,i,a,d)=>{var g=i??t;if(qt(g))return g;var v=e==="horizontal"?d:a,u=v.scale.domain();if(v.type==="number"){var M=Math.max(u[0],u[1]),C=Math.min(u[0],u[1]);return g==="dataMin"?C:g==="dataMax"||M<0?M:Math.max(Math.min(u[0],u[1]),0)}return g==="dataMin"?u[0]:g==="dataMax"?u[1]:u[0]};function xY(e){var{areaSettings:{connectNulls:t,baseValue:i,dataKey:a},stackedData:d,layout:g,chartBaseValue:v,xAxis:u,yAxis:M,displayedData:C,dataStartIndex:D,xAxisTicks:I,yAxisTicks:N,bandSize:G}=e,Y=d&&d.length,H=_Y(g,v,i,u,M),$=g==="horizontal",se=!1,he=C.map((me,Ae)=>{var ge,Se,Ue,et;if(Y)et=d[D+Ae];else{var vt=Ai(me,a);Array.isArray(vt)?(et=vt,se=!0):et=[H,vt]}var pt=(ge=(Se=et)===null||Se===void 0?void 0:Se[1])!==null&&ge!==void 0?ge:null,Fe=pt==null||Y&&!t&&Ai(me,a)==null;if($){var Ct;return{x:vx({axis:u,ticks:I,bandSize:G,entry:me,index:Ae}),y:Fe?null:(Ct=M.scale.map(pt))!==null&&Ct!==void 0?Ct:null,value:et,payload:me}}return{x:Fe?null:(Ue=u.scale.map(pt))!==null&&Ue!==void 0?Ue:null,y:vx({axis:M,ticks:N,bandSize:G,entry:me,index:Ae}),value:et,payload:me}}),fe;return Y||se?fe=he.map(me=>{var Ae,ge=Array.isArray(me.value)?me.value[0]:null;if($){var Se;return{x:me.x,y:ge!=null&&me.y!=null&&(Se=M.scale.map(ge))!==null&&Se!==void 0?Se:null,payload:me.payload}}return{x:ge!=null&&(Ae=u.scale.map(ge))!==null&&Ae!==void 0?Ae:null,y:me.y,payload:me.payload}}):fe=$?M.scale.map(H):u.scale.map(H),{points:he,baseLine:fe??0,isRange:se}}function bY(e){var t=Ka(e,hL),i=ba();return q.createElement(ZT,{id:t.id,type:"area"},a=>q.createElement(q.Fragment,null,q.createElement(GT,{legendPayload:lY(t)}),q.createElement(uY,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),q.createElement(HT,{type:"area",id:a,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:zI(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:i,connectNulls:t.connectNulls}),q.createElement(vY,em({},t,{id:a}))))}var fL=q.memo(bY,w_);fL.displayName="Area";var wY="Invariant failed";function SY(e,t){throw new Error(wY)}function J2(){return J2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},J2.apply(null,arguments)}function Xx(e){return q.createElement(LR,J2({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var TY=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,d)=>{if(qt(t))return t;var g=qt(a)||ai(a);return g?t(a,d):(g||SY(),i)}},EY=(e,t,i)=>i,AY=(e,t)=>t,S_=it([g_,AY],(e,t)=>e.filter(i=>i.type==="bar").find(i=>i.id===t)),MY=it([S_],e=>e?.maxBarSize),PY=(e,t,i,a)=>a,CY=it([an,g_,Xc,Kc,EY],(e,t,i,a,d)=>t.filter(g=>e==="horizontal"?g.xAxisId===i:g.yAxisId===a).filter(g=>g.isPanorama===d).filter(g=>g.hide===!1).filter(g=>g.type==="bar")),DY=(e,t,i)=>{var a=an(e),d=Xc(e,t),g=Kc(e,t);if(!(d==null||g==null))return a==="horizontal"?Ux(e,"yAxis",g,i):Ux(e,"xAxis",d,i)},OY=(e,t)=>{var i=an(e),a=Xc(e,t),d=Kc(e,t);if(!(a==null||d==null))return i==="horizontal"?JP(e,"xAxis",a):JP(e,"yAxis",d)},IY=it([CY,hq,OY],WZ),zY=(e,t,i)=>{var a,d,g=S_(e,t);if(g==null)return 0;var v=Xc(e,t),u=Kc(e,t);if(v==null||u==null)return 0;var M=an(e),C=Kz(e),{maxBarSize:D}=g,I=ai(D)?C:D,N,G;return M==="horizontal"?(N=Wc(e,"xAxis",v,i),G=Hc(e,"xAxis",v,i)):(N=Wc(e,"yAxis",u,i),G=Hc(e,"yAxis",u,i)),(a=(d=Md(N,G,!0))!==null&&d!==void 0?d:I)!==null&&a!==void 0?a:0},dL=(e,t,i)=>{var a=an(e),d=Xc(e,t),g=Kc(e,t);if(!(d==null||g==null)){var v,u;return a==="horizontal"?(v=Wc(e,"xAxis",d,i),u=Hc(e,"xAxis",d,i)):(v=Wc(e,"yAxis",g,i),u=Hc(e,"yAxis",g,i)),Md(v,u)}},kY=it([IY,Kz,cq,Qz,zY,dL,MY],JZ),RY=(e,t,i)=>{var a=Xc(e,t);if(a!=null)return Wc(e,"xAxis",a,i)},LY=(e,t,i)=>{var a=Kc(e,t);if(a!=null)return Wc(e,"yAxis",a,i)},jY=(e,t,i)=>{var a=Xc(e,t);if(a!=null)return Hc(e,"xAxis",a,i)},BY=(e,t,i)=>{var a=Kc(e,t);if(a!=null)return Hc(e,"yAxis",a,i)},NY=it([kY,S_],tH),FY=it([DY,S_],eH),UY=it([xa,RS,RY,LY,jY,BY,NY,an,Nz,dL,FY,S_,PY],(e,t,i,a,d,g,v,u,M,C,D,I,N)=>{var{chartData:G,dataStartIndex:Y,dataEndIndex:H}=M;if(!(I==null||v==null||t==null||u!=="horizontal"&&u!=="vertical"||i==null||a==null||d==null||g==null||C==null)){var{data:$}=I,se;if($!=null&&$.length>0?se=$:se=G?.slice(Y,H+1),se!=null)return mX({layout:u,barSettings:I,pos:v,parentViewBox:t,bandSize:C,xAxis:i,yAxis:a,xAxisTicks:d,yAxisTicks:g,stackedData:D,displayedData:se,offset:e,cells:N,dataStartIndex:Y})}}),VY=["index"];function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},eS.apply(null,arguments)}function qY(e,t){if(e==null)return{};var i,a,d=$Y(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function $Y(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var pL=q.createContext(void 0),GY=e=>{var t=q.useContext(pL);if(t!=null)return t.stackId;if(e!=null)return zI(e)},ZY=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),HY=e=>{var t=q.useContext(pL);if(t!=null){var{stackId:i}=t;return"url(#".concat(ZY(i,e),")")}},mL=e=>{var{index:t}=e,i=qY(e,VY),a=HY(t);return q.createElement(wo,eS({className:"recharts-bar-stack-layer",clipPath:a},i))},WY=["onMouseEnter","onMouseLeave","onClick"],YY=["value","background","tooltipPosition"],XY=["id"],KY=["onMouseEnter","onClick","onMouseLeave"];function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},pf.apply(null,arguments)}function mD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function Uo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(i),!0).forEach(function(a){QY(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function QY(e,t,i){return(t=JY(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function JY(e){var t=eX(e,"string");return typeof t=="symbol"?t:t+""}function eX(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kx(e,t){if(e==null)return{};var i,a,d=tX(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function tX(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var rX=e=>{var{dataKey:t,name:i,fill:a,legendType:d,hide:g}=e;return[{inactive:g,dataKey:t,type:d,color:a,value:iy(i,t),payload:e}]},nX=q.memo(e=>{var{dataKey:t,stroke:i,strokeWidth:a,fill:d,name:g,hide:v,unit:u,tooltipType:M,id:C}=e,D={dataDefinedOnItem:void 0,getPosition:Cd,settings:{stroke:i,strokeWidth:a,fill:d,dataKey:t,nameKey:void 0,name:iy(g,t),hide:v,type:M,color:d,unit:u,graphicalItemId:C}};return q.createElement($T,{tooltipEntrySettings:D})});function iX(e){var t=nr(sm),{data:i,dataKey:a,background:d,allOtherBarProps:g}=e,{onMouseEnter:v,onMouseLeave:u,onClick:M}=g,C=Kx(g,WY),D=jR(v,a,g.id),I=BR(u),N=NR(M,a,g.id);if(!d||i==null)return null;var G=t_(d);return q.createElement(nl,{zIndex:rH(d,Qi.barBackground)},i.map((Y,H)=>{var{value:$,background:se,tooltipPosition:he}=Y,fe=Kx(Y,YY);if(!se)return null;var me=D(Y,H),Ae=I(Y,H),ge=N(Y,H),Se=Uo(Uo(Uo(Uo(Uo({option:d,isActive:String(H)===t},fe),{},{fill:"#eee"},se),G),ES(C,Y,H)),{},{onMouseEnter:me,onMouseLeave:Ae,onClick:ge,dataKey:a,index:H,className:"recharts-bar-background-rectangle"});return q.createElement(Xx,pf({key:"background-bar-".concat(H)},Se))}))}function aX(e){var{showLabels:t,children:i,rects:a}=e,d=a?.map(g=>{var v={x:g.x,y:g.y,width:g.width,lowerWidth:g.width,upperWidth:g.width,height:g.height};return Uo(Uo({},v),{},{value:g.value,payload:g.payload,parentViewBox:g.parentViewBox,viewBox:v,fill:g.fill})});return q.createElement(UT,{value:t?d:void 0},i)}function oX(e){var{shape:t,activeBar:i,baseProps:a,entry:d,index:g,dataKey:v}=e,u=nr(sm),M=nr(uR),C=i&&String(g)===u&&(M==null||v===M),D=C?i:t;return C?q.createElement(nl,{zIndex:Qi.activeBar},q.createElement(mL,{index:g},q.createElement(Xx,pf({},a,{name:String(a.name)},d,{isActive:C,option:D,index:g,dataKey:v})))):q.createElement(Xx,pf({},a,{name:String(a.name)},d,{isActive:C,option:D,index:g,dataKey:v}))}function sX(e){var{shape:t,baseProps:i,entry:a,index:d,dataKey:g}=e;return q.createElement(Xx,pf({},i,{name:String(i.name)},a,{isActive:!1,option:t,index:d,dataKey:g}))}function lX(e){var t,{data:i,props:a}=e,d=(t=el(a))!==null&&t!==void 0?t:{},{id:g}=d,v=Kx(d,XY),{shape:u,dataKey:M,activeBar:C}=a,{onMouseEnter:D,onClick:I,onMouseLeave:N}=a,G=Kx(a,KY),Y=jR(D,M,g),H=BR(N),$=NR(I,M,g);return i?q.createElement(q.Fragment,null,i.map((se,he)=>q.createElement(mL,pf({index:he,key:"rectangle-".concat(se?.x,"-").concat(se?.y,"-").concat(se?.value,"-").concat(he),className:"recharts-bar-rectangle"},ES(G,se,he),{onMouseEnter:Y(se,he),onMouseLeave:H(se,he),onClick:$(se,he)}),C?q.createElement(oX,{shape:u,activeBar:C,baseProps:v,entry:se,index:he,dataKey:M}):q.createElement(sX,{shape:u,baseProps:v,entry:se,index:he,dataKey:M})))):null}function uX(e){var{props:t,previousRectanglesRef:i}=e,{data:a,layout:d,isAnimationActive:g,animationBegin:v,animationDuration:u,animationEasing:M,onAnimationEnd:C,onAnimationStart:D}=t,I=i.current,N=c_(t,"recharts-bar-"),[G,Y]=q.useState(!1),H=!G,$=q.useCallback(()=>{typeof C=="function"&&C(),Y(!1)},[C]),se=q.useCallback(()=>{typeof D=="function"&&D(),Y(!0)},[D]);return q.createElement(aX,{showLabels:H,rects:a},q.createElement(u_,{animationId:N,begin:v,duration:u,isActive:g,easing:M,onAnimationEnd:$,onAnimationStart:se,key:N},he=>{var fe=he===1?a:a?.map((me,Ae)=>{var ge=I&&I[Ae];if(ge)return Uo(Uo({},me),{},{x:Pn(ge.x,me.x,he),y:Pn(ge.y,me.y,he),width:Pn(ge.width,me.width,he),height:Pn(ge.height,me.height,he)});if(d==="horizontal"){var Se=Pn(0,me.height,he),Ue=Pn(me.stackedBarStart,me.y,he);return Uo(Uo({},me),{},{y:Ue,height:Se})}var et=Pn(0,me.width,he),vt=Pn(me.stackedBarStart,me.x,he);return Uo(Uo({},me),{},{width:et,x:vt})});return he>0&&(i.current=fe??null),fe==null?null:q.createElement(wo,null,q.createElement(lX,{props:t,data:fe}))}),q.createElement(VT,{label:t.label}),t.children)}function cX(e){var t=q.useRef(null);return q.createElement(uX,{previousRectanglesRef:t,props:e})}var gL=0,hX=(e,t)=>{var i=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:i,errorVal:Ai(e,t)}};class fX extends q.PureComponent{render(){var{hide:t,data:i,dataKey:a,className:d,xAxisId:g,yAxisId:v,needClip:u,background:M,id:C}=this.props;if(t||i==null)return null;var D=bn("recharts-bar",d),I=C;return q.createElement(wo,{className:D,id:C},u&&q.createElement("defs",null,q.createElement(XT,{clipPathId:I,xAxisId:g,yAxisId:v})),q.createElement(wo,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(I,")"):void 0},q.createElement(iX,{data:i,dataKey:a,background:M,allOtherBarProps:this.props}),q.createElement(cX,this.props)))}}var dX={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:gL,xAxisId:0,yAxisId:0,zIndex:Qi.bar};function pX(e){var{xAxisId:t,yAxisId:i,hide:a,legendType:d,minPointSize:g,activeBar:v,animationBegin:u,animationDuration:M,animationEasing:C,isAnimationActive:D}=e,{needClip:I}=$b(t,i),N=Dd(),G=ba(),Y=Z7(e.children,xR),H=nr(he=>UY(he,e.id,G,Y));if(N!=="vertical"&&N!=="horizontal")return null;var $,se=H?.[0];return se==null||se.height==null||se.width==null?$=0:$=N==="vertical"?se.height/2:se.width/2,q.createElement(YR,{xAxisId:t,yAxisId:i,data:H,dataPointFormatter:hX,errorBarOffset:$},q.createElement(fX,pf({},e,{layout:N,needClip:I,data:H,xAxisId:t,yAxisId:i,hide:a,legendType:d,minPointSize:g,activeBar:v,animationBegin:u,animationDuration:M,animationEasing:C,isAnimationActive:D})))}function mX(e){var{layout:t,barSettings:{dataKey:i,minPointSize:a},pos:d,bandSize:g,xAxis:v,yAxis:u,xAxisTicks:M,yAxisTicks:C,stackedData:D,displayedData:I,offset:N,cells:G,parentViewBox:Y,dataStartIndex:H}=e,$=t==="horizontal"?u:v,se=D?$.scale.domain():null,he=sF({numericAxis:$}),fe=$.scale.map(he);return I.map((me,Ae)=>{var ge,Se,Ue,et,vt,pt;if(D){var Fe=D[Ae+H];if(Fe==null)return null;ge=rF(Fe,se)}else ge=Ai(me,i),Array.isArray(ge)||(ge=[he,ge]);var Ct=TY(a,gL)(ge[1],Ae);if(t==="horizontal"){var It,jt=u.scale.map(ge[0]),$e=u.scale.map(ge[1]);if(jt==null||$e==null)return null;Se=eM({axis:v,ticks:M,bandSize:g,offset:d.offset,entry:me,index:Ae}),Ue=(It=$e??jt)!==null&&It!==void 0?It:void 0,et=d.size;var ct=jt-$e;if(vt=qu(ct)?0:ct,pt={x:Se,y:N.top,width:et,height:N.height},Math.abs(Ct)>0&&Math.abs(vt)<Math.abs(Ct)){var Et=_s(vt||Ct)*(Math.abs(Ct)-Math.abs(vt));Ue-=Et,vt+=Et}}else{var _t=v.scale.map(ge[0]),Ut=v.scale.map(ge[1]);if(_t==null||Ut==null)return null;if(Se=_t,Ue=eM({axis:u,ticks:C,bandSize:g,offset:d.offset,entry:me,index:Ae}),et=Ut-_t,vt=d.size,pt={x:N.left,y:Ue,width:N.width,height:vt},Math.abs(Ct)>0&&Math.abs(et)<Math.abs(Ct)){var ze=_s(et||Ct)*(Math.abs(Ct)-Math.abs(et));et+=ze}}if(Se==null||Ue==null||et==null||vt==null)return null;var at=Uo(Uo({},me),{},{stackedBarStart:fe,x:Se,y:Ue,width:et,height:vt,value:D?ge:ge[1],payload:me,background:pt,tooltipPosition:{x:Se+et/2,y:Ue+vt/2},parentViewBox:Y},G&&G[Ae]&&G[Ae].props);return at}).filter(Boolean)}function gX(e){var t=Ka(e,dX),i=GY(t.stackId),a=ba();return q.createElement(ZT,{id:t.id,type:"bar"},d=>q.createElement(q.Fragment,null,q.createElement(GT,{legendPayload:rX(t)}),q.createElement(nX,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:d}),q.createElement(HT,{type:"bar",id:d,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:i,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),q.createElement(nl,{zIndex:t.zIndex},q.createElement(pX,pf({},t,{id:d})))))}var yL=q.memo(gX,w_);yL.displayName="Bar";var yX=["domain","range"],vX=["domain","range"];function gD(e,t){if(e==null)return{};var i,a,d=_X(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function _X(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function yD(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function vL(e,t){if(e===t)return!0;var{domain:i,range:a}=e,d=gD(e,yX),{domain:g,range:v}=t,u=gD(t,vX);return!yD(i,g)||!yD(a,v)?!1:w_(d,u)}var xX=["type"],bX=["dangerouslySetInnerHTML","ticks","scale"],wX=["id","scale"];function tS(){return tS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},tS.apply(null,arguments)}function vD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function _D(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?vD(Object(i),!0).forEach(function(a){SX(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function SX(e,t,i){return(t=TX(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function TX(e){var t=EX(e,"string");return typeof t=="symbol"?t:t+""}function EX(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rS(e,t){if(e==null)return{};var i,a,d=AX(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function AX(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function MX(e){var t=Ii(),i=q.useRef(null),a=BS(),{type:d}=e,g=rS(e,xX),v=Ib(a,"xAxis",d),u=q.useMemo(()=>{if(v!=null)return _D(_D({},g),{},{type:v})},[g,v]);return q.useLayoutEffect(()=>{u!=null&&(i.current===null?t(zZ(u)):i.current!==u&&t(kZ({prev:i.current,next:u})),i.current=u)},[u,t]),q.useLayoutEffect(()=>()=>{i.current&&(t(RZ(i.current)),i.current=null)},[t]),null}var PX=e=>{var{xAxisId:t,className:i}=e,a=nr(RS),d=ba(),g="xAxis",v=nr(se=>Vk(se,g,t,d)),u=nr(se=>Bk(se,t)),M=nr(se=>d$(se,t)),C=nr(se=>sk(se,t));if(u==null||M==null||C==null)return null;var{dangerouslySetInnerHTML:D,ticks:I,scale:N}=e,G=rS(e,bX),{id:Y,scale:H}=C,$=rS(C,wX);return q.createElement(YT,tS({},G,$,{x:M.x,y:M.y,width:u.width,height:u.height,className:bn("recharts-".concat(g," ").concat(g),i),viewBox:a,ticks:v,axisType:g}))},CX={allowDataOverflow:ga.allowDataOverflow,allowDecimals:ga.allowDecimals,allowDuplicatedCategory:ga.allowDuplicatedCategory,angle:ga.angle,axisLine:of.axisLine,height:ga.height,hide:!1,includeHidden:ga.includeHidden,interval:ga.interval,label:!1,minTickGap:ga.minTickGap,mirror:ga.mirror,orientation:ga.orientation,padding:ga.padding,reversed:ga.reversed,scale:ga.scale,tick:ga.tick,tickCount:ga.tickCount,tickLine:of.tickLine,tickSize:of.tickSize,type:ga.type,xAxisId:0},DX=e=>{var t=Ka(e,CX);return q.createElement(q.Fragment,null,q.createElement(MX,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),q.createElement(PX,t))},tx=q.memo(DX,vL);tx.displayName="XAxis";var OX=["type"],IX=["dangerouslySetInnerHTML","ticks","scale"],zX=["id","scale"];function nS(){return nS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},nS.apply(null,arguments)}function xD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function bD(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?xD(Object(i),!0).forEach(function(a){kX(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function kX(e,t,i){return(t=RX(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function RX(e){var t=LX(e,"string");return typeof t=="symbol"?t:t+""}function LX(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iS(e,t){if(e==null)return{};var i,a,d=jX(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function jX(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function BX(e){var t=Ii(),i=q.useRef(null),a=BS(),{type:d}=e,g=iS(e,OX),v=Ib(a,"yAxis",d),u=q.useMemo(()=>{if(v!=null)return bD(bD({},g),{},{type:v})},[v,g]);return q.useLayoutEffect(()=>{u!=null&&(i.current===null?t(LZ(u)):i.current!==u&&t(jZ({prev:i.current,next:u})),i.current=u)},[u,t]),q.useLayoutEffect(()=>()=>{i.current&&(t(BZ(i.current)),i.current=null)},[t]),null}function NX(e){var{yAxisId:t,className:i,width:a,label:d}=e,g=q.useRef(null),v=q.useRef(null),u=nr(RS),M=ba(),C=Ii(),D="yAxis",I=nr(ge=>Nk(ge,t)),N=nr(ge=>m$(ge,t)),G=nr(ge=>Vk(ge,D,t,M)),Y=nr(ge=>lk(ge,t));if(q.useLayoutEffect(()=>{if(!(a!=="auto"||!I||FT(d)||q.isValidElement(d)||Y==null)){var ge=g.current;if(ge){var Se=ge.getCalculatedWidth();Math.round(I.width)!==Math.round(Se)&&C(NZ({id:t,width:Se}))}}},[G,I,C,d,t,a,Y]),I==null||N==null||Y==null)return null;var{dangerouslySetInnerHTML:H,ticks:$,scale:se}=e,he=iS(e,IX),{id:fe,scale:me}=Y,Ae=iS(Y,zX);return q.createElement(YT,nS({},he,Ae,{ref:g,labelRef:v,x:N.x,y:N.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:I.width,height:I.height,className:bn("recharts-".concat(D," ").concat(D),i),viewBox:u,ticks:G,axisType:D}))}var FX={allowDataOverflow:ya.allowDataOverflow,allowDecimals:ya.allowDecimals,allowDuplicatedCategory:ya.allowDuplicatedCategory,angle:ya.angle,axisLine:of.axisLine,hide:!1,includeHidden:ya.includeHidden,interval:ya.interval,label:!1,minTickGap:ya.minTickGap,mirror:ya.mirror,orientation:ya.orientation,padding:ya.padding,reversed:ya.reversed,scale:ya.scale,tick:ya.tick,tickCount:ya.tickCount,tickLine:of.tickLine,tickSize:of.tickSize,type:ya.type,width:ya.width,yAxisId:0},UX=e=>{var t=Ka(e,FX);return q.createElement(q.Fragment,null,q.createElement(BX,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),q.createElement(NX,t))},_L=q.memo(UX,vL);_L.displayName="YAxis";var VX=(e,t)=>t,QT=it([VX,an,ak,Ta,aR,wf,CG,xa],LG),JT=e=>{var t=e.currentTarget.getBoundingClientRect(),i=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/i),chartY:Math.round((e.clientY-t.top)/a)}},xL=ql("mouseClick"),bL=i_();bL.startListening({actionCreator:xL,effect:(e,t)=>{var i=e.payload,a=QT(t.getState(),JT(i));a?.activeIndex!=null&&t.dispatch(C$({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var aS=ql("mouseMove"),wL=i_(),$0=null;wL.startListening({actionCreator:aS,effect:(e,t)=>{var i=e.payload;$0!==null&&cancelAnimationFrame($0);var a=JT(i);$0=requestAnimationFrame(()=>{var d=t.getState(),g=PT(d,d.tooltip.settings.shared);if(g==="axis"){var v=QT(d,a);v?.activeIndex!=null?t.dispatch(Xk({activeIndex:v.activeIndex,activeDataKey:void 0,activeCoordinate:v.activeCoordinate})):t.dispatch(Yk())}$0=null})}});function qX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var wD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},SL=ws({name:"rootProps",initialState:wD,reducers:{updateOptions:(e,t)=>{var i;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(i=t.payload.barGap)!==null&&i!==void 0?i:wD.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),$X=SL.reducer,{updateOptions:GX}=SL.actions,ZX=null,HX={updatePolarOptions:(e,t)=>t.payload},TL=ws({name:"polarOptions",initialState:ZX,reducers:HX}),{updatePolarOptions:_Q}=TL.actions,WX=TL.reducer,EL=ql("keyDown"),AL=ql("focus"),eE=i_();eE.startListening({actionCreator:EL,effect:(e,t)=>{var i=t.getState(),a=i.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:d}=i.tooltip,g=e.payload;if(!(g!=="ArrowRight"&&g!=="ArrowLeft"&&g!=="Enter")){var v=CT(d,dy(i),v_(i),x_(i)),u=v==null?-1:Number(v);if(!(!Number.isFinite(u)||u<0)){var M=wf(i);if(g==="Enter"){var C=qx(i,"axis","hover",String(d.index));t.dispatch(H2({active:!d.active,activeIndex:d.index,activeCoordinate:C}));return}var D=_$(i),I=D==="left-to-right"?1:-1,N=g==="ArrowRight"?1:-1,G=u+N*I;if(!(M==null||G>=M.length||G<0)){var Y=qx(i,"axis","hover",String(G));t.dispatch(H2({active:!0,activeIndex:G.toString(),activeCoordinate:Y}))}}}}}});eE.startListening({actionCreator:AL,effect:(e,t)=>{var i=t.getState(),a=i.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:d}=i.tooltip;if(!d.active&&d.index==null){var g="0",v=qx(i,"axis","hover",String(g));t.dispatch(H2({active:!0,activeIndex:g,activeCoordinate:v}))}}}});var Ul=ql("externalEvent"),ML=i_(),n2=new Map;ML.startListening({actionCreator:Ul,effect:(e,t)=>{var{handler:i,reactEvent:a}=e.payload;if(i!=null){a.persist();var d=a.type,g=n2.get(d);g!==void 0&&cancelAnimationFrame(g);var v=requestAnimationFrame(()=>{try{var u=t.getState(),M={activeCoordinate:pG(u),activeDataKey:uR(u),activeIndex:sm(u),activeLabel:lR(u),activeTooltipIndex:sm(u),isTooltipActive:mG(u)};i(M,a)}finally{n2.delete(d)}});n2.set(d,v)}}});var YX=it([hy],e=>e.tooltipItemPayloads),XX=it([YX,(e,t)=>t,(e,t,i)=>i],(e,t,i)=>{if(t!=null){var a=e.find(g=>g.settings.graphicalItemId===i);if(a!=null){var{getPosition:d}=a;if(d!=null)return d(t)}}}),PL=ql("touchMove"),CL=i_();CL.startListening({actionCreator:PL,effect:(e,t)=>{var i=e.payload;if(!(i.touches==null||i.touches.length===0)){var a=t.getState(),d=PT(a,a.tooltip.settings.shared);if(d==="axis"){var g=i.touches[0];if(g==null)return;var v=QT(a,JT({clientX:g.clientX,clientY:g.clientY,currentTarget:i.currentTarget}));v?.activeIndex!=null&&t.dispatch(Xk({activeIndex:v.activeIndex,activeDataKey:void 0,activeCoordinate:v.activeCoordinate}))}else if(d==="item"){var u,M=i.touches[0];if(document.elementFromPoint==null||M==null)return;var C=document.elementFromPoint(M.clientX,M.clientY);if(!C||!C.getAttribute)return;var D=C.getAttribute(pF),I=(u=C.getAttribute(mF))!==null&&u!==void 0?u:void 0,N=fy(a).find(H=>H.id===I);if(D==null||N==null||I==null)return;var{dataKey:G}=N,Y=XX(a,D,I);t.dispatch(Wk({activeDataKey:G,activeIndex:D,activeCoordinate:Y,activeGraphicalItemId:I}))}}}});var KX=rI({brush:iH,cartesianAxis:FZ,chartData:d9,errorBars:QH,graphicalItems:_Z,layout:K4,legend:o6,options:l9,polarAxis:U7,polarOptions:WX,referenceElements:lH,rootProps:$X,tooltip:D$,zIndex:XG}),QX=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return w4({reducer:KX,preloadedState:t,middleware:a=>{var d;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((d="es6")!==null&&d!==void 0?d:"")}).concat([bL.middleware,wL.middleware,eE.middleware,ML.middleware,CL.middleware])},enhancers:a=>{var d=a;return typeof a=="function"&&(d=a()),d.concat(yI({type:"raf"}))},devTools:{serialize:{replacer:qX},name:"recharts-".concat(i)}})};function JX(e){var{preloadedState:t,children:i,reduxStoreName:a}=e,d=ba(),g=q.useRef(null);if(d)return i;g.current==null&&(g.current=QX(t,a));var v=PS;return q.createElement(AW,{context:v,store:g.current},i)}function eK(e){var{layout:t,margin:i}=e,a=Ii(),d=ba();return q.useEffect(()=>{d||(a(W4(t)),a(H4(i)))},[a,d,t,i]),null}var tK=q.memo(eK,w_);function rK(e){var t=Ii();return q.useEffect(()=>{t(GX(e))},[t,e]),null}function SD(e){var{zIndex:t,isPanorama:i}=e,a=q.useRef(null),d=Ii();return q.useLayoutEffect(()=>(a.current&&d(WG({zIndex:t,element:a.current,isPanorama:i})),()=>{d(YG({zIndex:t,isPanorama:i}))}),[d,t,i]),q.createElement("g",{tabIndex:-1,ref:a})}function TD(e){var{children:t,isPanorama:i}=e,a=nr(BG);if(!a||a.length===0)return t;var d=a.filter(v=>v<0),g=a.filter(v=>v>0);return q.createElement(q.Fragment,null,d.map(v=>q.createElement(SD,{key:v,zIndex:v,isPanorama:i})),t,g.map(v=>q.createElement(SD,{key:v,zIndex:v,isPanorama:i})))}var nK=["children"];function iK(e,t){if(e==null)return{};var i,a,d=aK(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function aK(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function Qx(){return Qx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Qx.apply(null,arguments)}var oK={width:"100%",height:"100%",display:"block"},sK=q.forwardRef((e,t)=>{var i=NI(),a=FI(),d=YI();if(!Gc(i)||!Gc(a))return null;var{children:g,otherAttributes:v,title:u,desc:M}=e,C,D;return v!=null&&(typeof v.tabIndex=="number"?C=v.tabIndex:C=d?0:void 0,typeof v.role=="string"?D=v.role:D=d?"application":void 0),q.createElement(xO,Qx({},v,{title:u,desc:M,role:D,tabIndex:C,width:i,height:a,style:oK,ref:t}),g)}),lK=e=>{var{children:t}=e,i=nr(_b);if(!i)return null;var{width:a,height:d,y:g,x:v}=i;return q.createElement(xO,{width:a,height:d,x:v,y:g},t)},ED=q.forwardRef((e,t)=>{var{children:i}=e,a=iK(e,nK),d=ba();return d?q.createElement(lK,null,q.createElement(TD,{isPanorama:!0},i)):q.createElement(sK,Qx({ref:t},a),q.createElement(TD,{isPanorama:!1},i))});function uK(){var e=Ii(),[t,i]=q.useState(null),a=nr(dF);return q.useEffect(()=>{if(t!=null){var d=t.getBoundingClientRect(),g=d.width/t.offsetWidth;Dr(g)&&g!==a&&e(X4(g))}},[t,e,a]),i}function AD(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),i.push.apply(i,a)}return i}function cK(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?AD(Object(i),!0).forEach(function(a){hK(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AD(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function hK(e,t,i){return(t=fK(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fK(e){var t=dK(e,"string");return typeof t=="symbol"?t:t+""}function dK(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ad(){return Ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ad.apply(null,arguments)}var pK=()=>(w9(),null);function Jx(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var mK=q.forwardRef((e,t)=>{var i,a,d=q.useRef(null),[g,v]=q.useState({containerWidth:Jx((i=e.style)===null||i===void 0?void 0:i.width),containerHeight:Jx((a=e.style)===null||a===void 0?void 0:a.height)}),u=q.useCallback((C,D)=>{v(I=>{var N=Math.round(C),G=Math.round(D);return I.containerWidth===N&&I.containerHeight===G?I:{containerWidth:N,containerHeight:G}})},[]),M=q.useCallback(C=>{if(typeof t=="function"&&t(C),C!=null&&typeof ResizeObserver<"u"){var{width:D,height:I}=C.getBoundingClientRect();u(D,I);var N=Y=>{var H=Y[0];if(H!=null){var{width:$,height:se}=H.contentRect;u($,se)}},G=new ResizeObserver(N);G.observe(C),d.current=G}},[t,u]);return q.useEffect(()=>()=>{var C=d.current;C?.disconnect()},[u]),q.createElement(q.Fragment,null,q.createElement(o_,{width:g.containerWidth,height:g.containerHeight}),q.createElement("div",Ad({ref:M},e)))}),gK=q.forwardRef((e,t)=>{var{width:i,height:a}=e,[d,g]=q.useState({containerWidth:Jx(i),containerHeight:Jx(a)}),v=q.useCallback((M,C)=>{g(D=>{var I=Math.round(M),N=Math.round(C);return D.containerWidth===I&&D.containerHeight===N?D:{containerWidth:I,containerHeight:N}})},[]),u=q.useCallback(M=>{if(typeof t=="function"&&t(M),M!=null){var{width:C,height:D}=M.getBoundingClientRect();v(C,D)}},[t,v]);return q.createElement(q.Fragment,null,q.createElement(o_,{width:d.containerWidth,height:d.containerHeight}),q.createElement("div",Ad({ref:u},e)))}),yK=q.forwardRef((e,t)=>{var{width:i,height:a}=e;return q.createElement(q.Fragment,null,q.createElement(o_,{width:i,height:a}),q.createElement("div",Ad({ref:t},e)))}),vK=q.forwardRef((e,t)=>{var{width:i,height:a}=e;return typeof i=="string"||typeof a=="string"?q.createElement(gK,Ad({},e,{ref:t})):typeof i=="number"&&typeof a=="number"?q.createElement(yK,Ad({},e,{width:i,height:a,ref:t})):q.createElement(q.Fragment,null,q.createElement(o_,{width:i,height:a}),q.createElement("div",Ad({ref:t},e)))});function _K(e){return e?mK:vK}var xK=q.forwardRef((e,t)=>{var{children:i,className:a,height:d,onClick:g,onContextMenu:v,onDoubleClick:u,onMouseDown:M,onMouseEnter:C,onMouseLeave:D,onMouseMove:I,onMouseUp:N,onTouchEnd:G,onTouchMove:Y,onTouchStart:H,style:$,width:se,responsive:he,dispatchTouchEvents:fe=!0}=e,me=q.useRef(null),Ae=Ii(),[ge,Se]=q.useState(null),[Ue,et]=q.useState(null),vt=uK(),pt=LS(),Fe=pt?.width>0?pt.width:se,Ct=pt?.height>0?pt.height:d,It=q.useCallback(ht=>{vt(ht),typeof t=="function"&&t(ht),Se(ht),et(ht),ht!=null&&(me.current=ht)},[vt,t,Se,et]),jt=q.useCallback(ht=>{Ae(xL(ht)),Ae(Ul({handler:g,reactEvent:ht}))},[Ae,g]),$e=q.useCallback(ht=>{Ae(aS(ht)),Ae(Ul({handler:C,reactEvent:ht}))},[Ae,C]),ct=q.useCallback(ht=>{Ae(Yk()),Ae(Ul({handler:D,reactEvent:ht}))},[Ae,D]),Et=q.useCallback(ht=>{Ae(aS(ht)),Ae(Ul({handler:I,reactEvent:ht}))},[Ae,I]),_t=q.useCallback(()=>{Ae(AL())},[Ae]),Ut=q.useCallback(ht=>{Ae(EL(ht.key))},[Ae]),ze=q.useCallback(ht=>{Ae(Ul({handler:v,reactEvent:ht}))},[Ae,v]),at=q.useCallback(ht=>{Ae(Ul({handler:u,reactEvent:ht}))},[Ae,u]),Pt=q.useCallback(ht=>{Ae(Ul({handler:M,reactEvent:ht}))},[Ae,M]),zt=q.useCallback(ht=>{Ae(Ul({handler:N,reactEvent:ht}))},[Ae,N]),$t=q.useCallback(ht=>{Ae(Ul({handler:H,reactEvent:ht}))},[Ae,H]),Kt=q.useCallback(ht=>{fe&&Ae(PL(ht)),Ae(Ul({handler:Y,reactEvent:ht}))},[Ae,fe,Y]),Gt=q.useCallback(ht=>{Ae(Ul({handler:G,reactEvent:ht}))},[Ae,G]),Ar=_K(he);return q.createElement(yR.Provider,{value:ge},q.createElement(rB.Provider,{value:Ue},q.createElement(Ar,{width:Fe??$?.width,height:Ct??$?.height,className:bn("recharts-wrapper",a),style:cK({position:"relative",cursor:"default",width:Fe,height:Ct},$),onClick:jt,onContextMenu:ze,onDoubleClick:at,onFocus:_t,onKeyDown:Ut,onMouseDown:Pt,onMouseEnter:$e,onMouseLeave:ct,onMouseMove:Et,onMouseUp:zt,onTouchEnd:Gt,onTouchMove:Kt,onTouchStart:$t,ref:It},q.createElement(pK,null),i)))}),bK=["width","height","responsive","children","className","style","compact","title","desc"];function wK(e,t){if(e==null)return{};var i,a,d=SK(e,t);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(e);for(a=0;a<g.length;a++)i=g[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(d[i]=e[i])}return d}function SK(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}var TK=q.forwardRef((e,t)=>{var{width:i,height:a,responsive:d,children:g,className:v,style:u,compact:M,title:C,desc:D}=e,I=wK(e,bK),N=el(I);return M?q.createElement(q.Fragment,null,q.createElement(o_,{width:i,height:a}),q.createElement(ED,{otherAttributes:N,title:C,desc:D},g)):q.createElement(xK,{className:v,style:u,width:i,height:a,responsive:d??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},q.createElement(ED,{otherAttributes:N,title:C,desc:D,ref:t},q.createElement(cH,null,g)))});function oS(){return oS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},oS.apply(null,arguments)}var EK={top:5,right:5,bottom:5,left:5},AK={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:EK,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},tE=q.forwardRef(function(t,i){var a,d=Ka(t.categoricalChartProps,AK),{chartName:g,defaultTooltipEventType:v,validateTooltipEventTypes:u,tooltipPayloadSearcher:M,categoricalChartProps:C}=t,D={chartName:g,defaultTooltipEventType:v,validateTooltipEventTypes:u,tooltipPayloadSearcher:M,eventEmitter:void 0};return q.createElement(JX,{preloadedState:{options:D},reduxStoreName:(a=C.id)!==null&&a!==void 0?a:g},q.createElement(nH,{chartData:C.data}),q.createElement(tK,{layout:d.layout,margin:d.margin}),q.createElement(rK,{baseValue:d.baseValue,accessibilityLayer:d.accessibilityLayer,barCategoryGap:d.barCategoryGap,maxBarSize:d.maxBarSize,stackOffset:d.stackOffset,barGap:d.barGap,barSize:d.barSize,syncId:d.syncId,syncMethod:d.syncMethod,className:d.className,reverseStackOrder:d.reverseStackOrder}),q.createElement(TK,oS({},d,{ref:i})))}),MK=["axis"],PK=q.forwardRef((e,t)=>q.createElement(tE,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:MK,tooltipPayloadSearcher:BT,categoricalChartProps:e,ref:t})),CK=["axis","item"],DK=q.forwardRef((e,t)=>q.createElement(tE,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:CK,tooltipPayloadSearcher:BT,categoricalChartProps:e,ref:t})),OK=["axis"],IK=q.forwardRef((e,t)=>q.createElement(tE,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:OK,tooltipPayloadSearcher:BT,categoricalChartProps:e,ref:t}));const zK=["Khordha","Cuttack","Puri","Ganjam","Balasore","Sambalpur","Rourkela","Bhubaneswar"],kK="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",MD={version:8,sources:{satellite:{type:"raster",tiles:[kK],tileSize:256,attribution:" Esri, Maxar, Earthstar Geographics"}},layers:[{id:"satellite-layer",type:"raster",source:"satellite",minzoom:0,maxzoom:22}]};function RK(){const e=q.useRef(null),t=q.useRef(null),i=q.useRef(null),[a,d]=q.useState(50),[g,v]=q.useState(!1),u=q.useRef(null),M=q.useRef(null);q.useEffect(()=>{if(!t.current||!i.current)return;const D=[84.8245,20.2961],I=5.5;u.current=new zv.Map({container:t.current,style:MD,center:D,zoom:I,attributionControl:!1}),M.current=new zv.Map({container:i.current,style:MD,center:D,zoom:I,interactive:!1,attributionControl:!1});const N=u.current,G=M.current,Y=()=>{G.jumpTo({center:N.getCenter(),zoom:N.getZoom(),bearing:N.getBearing(),pitch:N.getPitch()})};N.on("move",Y),N.on("load",()=>{N.resize(),G.resize(),v(!0)});const H=setTimeout(()=>{N.resize(),G.resize()},500);return()=>{clearTimeout(H),N.remove(),G.remove()}},[]);const C=D=>{d(Number(D.target.value))};return _e.jsxs("div",{ref:e,className:"relative w-full h-full overflow-hidden bg-gray-900 shadow-inner",children:[_e.jsxs("div",{className:"absolute inset-0",children:[_e.jsx("div",{ref:t,className:"absolute inset-0 w-full h-full"}),_e.jsx("div",{ref:i,className:"absolute inset-0 w-full h-full pointer-events-none",style:{clipPath:`inset(0 0 0 ${a}%)`,zIndex:1}})]}),_e.jsxs("div",{className:"absolute inset-0 z-30 flex items-center justify-center pointer-events-none",children:[_e.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-[rgb(214,107,18)] z-20 flex items-center justify-center pointer-events-none",style:{left:`${a}%`,transform:"translateX(-50%)"},children:_e.jsx("div",{className:"absolute w-6 h-6 rounded-full bg-[rgb(214,107,18)] border-2 border-white shadow-lg top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2"})}),_e.jsx("input",{type:"range",min:"0",max:"100",step:"0.1",value:a,onChange:C,className:"absolute inset-x-0 w-full h-full opacity-0 cursor-ew-resize pointer-events-auto"})]}),!g&&_e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/80 z-50",children:_e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[_e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"}),_e.jsx("span",{className:"text-white text-[10px] font-bold tracking-widest uppercase opacity-50",children:"Initializing Comparison"})]})})]})}const LK=({selectedDistrict:e="Odisha",data:t})=>{const[i,a]=q.useState(2020),[d,g]=q.useState(2024),[v,u]=q.useState("lulc"),[M,C]=q.useState("Density"),D=zK.map((me,Ae)=>{const ge=me.length;return{rank:Ae+1,name:me,population:(.8+ge*.1).toFixed(2)+"M",density:(400+ge*50).toFixed(0)+"/km",migration:"+"+(5+ge*2).toFixed(1)+"k",growth:"+"+(1.2+ge*.3).toFixed(1)+"%",trendData:[30,40,35+ge,50+ge,60]}}),I=(me,Ae)=>{const Se=(me-2020)*25e3,Ue=Math.abs(12e5+Se+(Ae==="population"?0:-5e5)),et=Ae==="population"?Ue:Ue/1e3,vt=((et-(Ae==="population"?12e5:700))/(Ae==="population"?12e5:700)*100).toFixed(1);return{value:Ae==="population"?(et/1e6).toFixed(2)+"M":Math.round(et).toLocaleString(),growth:`${parseFloat(vt)>0?"+":""}${vt}%`,subMetric:Ae==="population"?"Total Population":Ae==="nightlight"?"Light Intensity":"Units",rawGrowth:parseFloat(vt)}},N=I(i,v),G=I(d,v),Y=(G.rawGrowth-N.rawGrowth).toFixed(1),H=[{year:"2019",value:30},{year:"2020",value:35},{year:"2021",value:45},{year:"2022",value:60},{year:"2023",value:85},{year:"2024",value:100}],$=(me,Ae)=>{if(!t)return Ae;const ge=`pop_${me}_sum`,Se=t[ge];if(Se==null)return Ae;const Ue=typeof Se=="string"?parseFloat(Se):Se;return Ue>1e3?Ue/1e6:Ue},he=(()=>{const me=["2019","2020","2021","2022","2023","2024"],Ae={2019:48.2,2020:50.5,2021:52.8,2022:55.1,2023:57.3,2024:59.5};if(!t)return me.map(Se=>({year:Se,pop:Ae[Se]}));const ge=Object.keys(t).filter(Se=>Se.startsWith("pop_")&&Se.endsWith("_sum")).map(Se=>Se.split("_")[1]).filter(Se=>/^\d{4}$/.test(Se)).sort((Se,Ue)=>Se.localeCompare(Ue));return ge.length===0?me.map(Se=>({year:Se,pop:Ae[Se]})):ge.map(Se=>({year:Se,pop:$(Se,0)}))})(),fe=Array.from({length:11},(me,Ae)=>2020+Ae);return _e.jsx("div",{className:"bg-white min-h-[500px]",children:_e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-10 space-y-12",children:[_e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[_e.jsxs("div",{children:[_e.jsxs("h2",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[_e.jsx(XD,{className:"w-6 h-6 text-black"}),"Comparative Analysis"]}),_e.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-medium italic",children:["Visualizing spatiotemporal changes in ",e," ",e==="Odisha"?"State":"District","."]})]}),_e.jsx("button",{className:"px-5 h-11 bg-white border-2 border-gray-100 rounded-xl text-[11px] font-black text-gray-700 hover:bg-orange-50 hover:border-orange-100 shadow-sm transition-all uppercase tracking-widest flex items-center gap-2",children:"Export Comparison"})]}),_e.jsx("section",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden",children:_e.jsxs("div",{className:"bg-gray-50 p-6 md:p-8",children:[_e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8",children:[_e.jsxs("div",{className:"space-y-1.5",children:[_e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Metric Layer"}),_e.jsxs("div",{className:"relative",children:[_e.jsxs("select",{value:v,onChange:me=>u(me.target.value),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:[_e.jsx("option",{value:"lulc",children:"Land Use / Land Cover"}),_e.jsx("option",{value:"nightlight",children:"Night Lights"}),_e.jsx("option",{value:"buildup",children:"Built-up Area"})]}),_e.jsx(Xp,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),_e.jsxs("div",{className:"space-y-1.5",children:[_e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Year 1 (Baseline)"}),_e.jsxs("div",{className:"relative",children:[_e.jsx("select",{value:i,onChange:me=>a(parseInt(me.target.value)),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:fe.map(me=>_e.jsx("option",{value:me,children:me},me))}),_e.jsx(Xp,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]}),_e.jsxs("div",{className:"space-y-1.5",children:[_e.jsx("label",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-wide",children:"Year 2 (Current)"}),_e.jsxs("div",{className:"relative",children:[_e.jsx("select",{value:d,onChange:me=>g(parseInt(me.target.value)),className:"w-full appearance-none bg-white border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-primary focus:border-primary block p-2.5 font-bold shadow-sm",children:fe.map(me=>_e.jsx("option",{value:me,children:me},me))}),_e.jsx(Xp,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]})]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-16 relative mb-8",children:[_e.jsx("div",{className:"hidden md:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full border border-gray-200 z-10 items-center justify-center shadow-sm text-[10px] font-bold text-gray-400",children:"VS"}),_e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm relative overflow-hidden group hover:border-gray-300 transition-colors",children:[_e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:_e.jsx(qj,{className:"w-20 h-20 text-gray-500"})}),_e.jsxs("div",{className:"relative z-10",children:[_e.jsxs("p",{className:"text-xs text-gray-500 font-bold uppercase mb-2",children:[i," Baseline"]}),_e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[_e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:N.value}),_e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:N.subMetric})]}),_e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold bg-gray-100 text-gray-600",children:"Ref."})]})]}),_e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-gray-100 shadow-sm relative overflow-hidden group hover:border-primary/50 transition-colors",children:[_e.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:_e.jsx(IE,{className:"w-20 h-20 text-primary"})}),_e.jsxs("div",{className:"relative z-10",children:[_e.jsxs("p",{className:"text-xs text-primary font-bold uppercase mb-2",children:[d," Current"]}),_e.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[_e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:G.value}),_e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:G.subMetric})]}),_e.jsx("div",{className:"flex items-center gap-2",children:_e.jsxs("span",{className:`inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-bold ${parseFloat(Y)>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[parseFloat(Y)>=0?"+":"",Y,"% Change"]})})]})]})]}),_e.jsx("div",{className:"relative w-full h-[400px] rounded-xl overflow-hidden shadow-sm border border-gray-200 select-none group",children:_e.jsx(RK,{})})]})}),_e.jsxs("div",{className:"space-y-6",children:[_e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[_e.jsxs("div",{children:[_e.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[_e.jsx(OE,{className:"w-6 h-6 text-black"}),"Population Projections - ",e]}),_e.jsxs("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:["Long-term demographic forecasting and growth trajectory modeling for ",e," ",e==="Odisha"?"State":"District","."]})]}),_e.jsx("button",{className:"px-5 h-10 bg-white border border-orange-100 rounded-xl text-[10px] font-black text-primary hover:bg-orange-100 shadow-sm transition-all uppercase tracking-widest",children:"View Full Report"})]}),_e.jsx("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8",children:_e.jsx("div",{className:"h-72 w-full",children:_e.jsx(Ew,{width:"100%",height:"100%",children:_e.jsxs(PK,{data:he,children:[_e.jsx(ex,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",strokeOpacity:.5}),_e.jsx(tx,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#6B7280"},dy:10}),_e.jsx(_L,{axisLine:!1,tickLine:!1,tick:{fontSize:10,fontWeight:700,fill:"#6B7280"},tickFormatter:me=>`${me}M`}),_e.jsx(Vw,{cursor:{stroke:"#F58220",strokeWidth:1,strokeDasharray:"4 4"},formatter:me=>[`${parseFloat(me).toFixed(2)}M`,"Projected Population"],contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",fontSize:"12px",fontWeight:"800",padding:"12px 16px"}}),_e.jsx(nL,{type:"monotone",dataKey:"pop",stroke:"#F58220",strokeWidth:4,dot:!1,activeDot:{r:8,strokeWidth:0,fill:"#D66B12"},animationDuration:2e3,name:"Projected Population"})]})})})})]}),_e.jsxs("div",{className:"space-y-6",children:[_e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[_e.jsxs("div",{children:[_e.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[_e.jsx(OE,{className:"w-6 h-6 text-black"}),"Change Analysis Summary"]}),_e.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]}),_e.jsx("button",{className:"px-5 h-10 bg-white border border-orange-100 rounded-xl text-[10px] font-black text-primary hover:bg-orange-100 shadow-sm transition-all uppercase tracking-widest",children:"View Full Report"})]}),_e.jsxs("section",{className:"bg-gray-50 border rounded-2xl p-6 md:p-8",children:[_e.jsxs("div",{className:"grid md:grid-cols-3 gap-8 text-sm mb-8",children:[_e.jsxs("div",{children:[_e.jsx("h4",{className:"font-bold font-black mb-2 uppercase text-xs tracking-wider",children:"What Changed?"}),_e.jsxs("p",{className:"text-gray-600 leading-relaxed",children:["Rapid urbanization in the northern corridors has led to a ",_e.jsx("span",{className:"font-semibold text-gray-900",children:"15% increase"})," in built-up areas, replacing traditional agricultural zones."]})]}),_e.jsxs("div",{children:[_e.jsx("h4",{className:"font-bold font-black mb-2 uppercase text-xs tracking-wider",children:"How it happened?"}),_e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"Infrastructure expansion, specifically the new ring road project, catalyzed residential development. Satellite data shows clear linear growth patterns."})]}),_e.jsxs("div",{children:[_e.jsx("h4",{className:"font-bold font-black mb-2 uppercase text-xs tracking-wider",children:"Why it matters?"}),_e.jsx("p",{className:"text-gray-600 leading-relaxed",children:"This shift places pressure on existing water infrastructure and demands immediate upgrades to the electrical grid to support 2030 targets."})]})]}),_e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t border-blue-200/50",children:[_e.jsxs("div",{className:"bg-white p-5 rounded-lg border border-blue-100 shadow-sm",children:[_e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-4",children:"Built-up Area Growth Index"}),_e.jsx("div",{className:"h-40",children:_e.jsx(Ew,{width:"100%",height:"100%",children:_e.jsxs(IK,{data:H,children:[_e.jsx("defs",{children:_e.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[_e.jsx("stop",{offset:"5%",stopColor:"#F58220",stopOpacity:.1}),_e.jsx("stop",{offset:"95%",stopColor:"#F58220",stopOpacity:0})]})}),_e.jsx(ex,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),_e.jsx(tx,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),_e.jsx(Vw,{contentStyle:{fontSize:"10px"}}),_e.jsx(fL,{type:"monotone",dataKey:"value",stroke:"#F58220",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:2})]})})})]}),_e.jsxs("div",{className:"bg-white p-5 rounded-lg border border-blue-100 shadow-sm",children:[_e.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-4",children:"Migration Inflow vs Capacity"}),_e.jsx("div",{className:"h-40",children:_e.jsx(Ew,{width:"100%",height:"100%",children:_e.jsxs(DK,{data:H,children:[_e.jsx(ex,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),_e.jsx(tx,{dataKey:"year",axisLine:!1,tickLine:!1,tick:{fontSize:10}}),_e.jsx(Vw,{contentStyle:{fontSize:"10px"}}),_e.jsx(yL,{dataKey:"value",fill:"#F58220",radius:[4,4,0,0],barSize:24})]})})})]})]})]})]}),_e.jsxs("div",{className:"space-y-6",children:[_e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[_e.jsxs("div",{children:[_e.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[_e.jsx(n5,{className:"w-6 h-6 text-black"}),"Regional Performance Matrix"]}),_e.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]}),_e.jsx("div",{className:"flex bg-gray-50 p-1 rounded-xl border border-gray-200 shadow-inner",children:["Density","Growth","Urbanization","Migration"].map(me=>_e.jsx("button",{onClick:()=>C(me),className:`px-4 py-2 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${M===me?"bg-[#F58220] text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:me},me))})]}),_e.jsxs("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8 overflow-hidden",children:[_e.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-100",children:_e.jsxs("table",{className:"w-full text-sm",children:[_e.jsx("thead",{className:"bg-gray-50 text-gray-500 uppercase text-[10px] font-bold tracking-wider",children:_e.jsxs("tr",{children:[_e.jsx("th",{className:"px-6 py-4 text-center w-20",children:"Rank"}),_e.jsx("th",{className:"px-6 py-4 text-left",children:"District Name"}),_e.jsx("th",{className:"px-6 py-4 text-right",children:"Total Population"}),_e.jsx("th",{className:"px-6 py-4 text-right",children:"Urban Density"}),_e.jsx("th",{className:"px-6 py-4 text-right",children:"Migration Net"}),_e.jsx("th",{className:"px-6 py-4 text-right",children:"YoY Growth"}),_e.jsx("th",{className:"px-6 py-4 text-center",children:"Trend"})]})}),_e.jsx("tbody",{className:"divide-y divide-gray-50",children:D.map(me=>_e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors group",children:[_e.jsxs("td",{className:"px-6 py-4 text-center font-bold text-gray-400 group-hover:text-primary transition-colors",children:["#",me.rank]}),_e.jsx("td",{className:"px-6 py-4 font-bold text-gray-900",children:me.name}),_e.jsx("td",{className:"px-6 py-4 text-right font-medium text-gray-600",children:me.population}),_e.jsx("td",{className:"px-6 py-4 text-right font-medium text-gray-600",children:me.density}),_e.jsx("td",{className:"px-6 py-4 text-right font-medium text-secondary",children:me.migration}),_e.jsx("td",{className:"px-6 py-4 text-right font-bold text-green-600 bg-green-50/50",children:me.growth}),_e.jsx("td",{className:"px-6 py-4 flex justify-center",children:_e.jsx(IE,{className:"w-4 h-4 text-gray-400 group-hover:text-green-500 transition-colors"})})]},me.rank))})]})}),_e.jsx("div",{className:"mt-4 text-center border-t border-gray-50 pt-4",children:_e.jsx("button",{className:"text-xs font-bold text-primary hover:underline flex items-center justify-center gap-1 mx-auto",children:"View Full Dataset"})})]})]}),_e.jsxs("div",{className:"space-y-6",children:[_e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:_e.jsxs("div",{children:[_e.jsxs("h3",{className:"text-2xl font-black text-gray-900 tracking-tight flex items-center gap-3",children:[_e.jsx(Uj,{className:"w-6 h-6 text-black"}),"Critical Insights & Recommendations"]}),_e.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry."})]})}),_e.jsx("section",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-6 md:p-8",children:_e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[_e.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border-t border-gray-200",children:[_e.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Resource Stress"}),_e.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:["Water stress levels projected to rise by ",_e.jsx("strong",{children:"20%"})," in urban pockets by 2026 due to the current density trajectory. Immediate aquifer recharge implementation recommended."]})]}),_e.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border border-gray-200",children:[_e.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Housing Capacity"}),_e.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:[_e.jsx("strong",{children:"Migration inflow"})," is currently exceeding housing development capacity in Sector 4 by a factor of 1.5x, leading to potential unregulated settlement expansion."]})]}),_e.jsxs("div",{className:"bg-white/60 p-4 rounded-lg border border-gray-200",children:[_e.jsx("h4",{className:"text-xs font-bold text-orange-900 uppercase mb-2",children:"Infrastructure Load"}),_e.jsxs("p",{className:"text-sm text-orange-900/80 leading-relaxed",children:["Energy grid loads are peaking at ",_e.jsx("strong",{children:"92%"})," capacity during summer months. Grid modernization required before 2026 to avoid brownouts."]})]})]})})]})]})})},Gb=({children:e,title:t})=>_e.jsx("div",{className:"relative min-h-screen bg-white",children:_e.jsxs("div",{className:"max-w-7xl mx-auto px-6 pt-2 pb-20",children:[_e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[t&&_e.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight",children:t}),_e.jsx(Zg,{to:"/",className:"p-2 text-gray-400 hover:text-orange-500 transition-colors group",title:"Close and return to dashboard",children:_e.jsx(KD,{className:"w-6 h-6"})})]}),_e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-700",children:e})]})}),jK=()=>_e.jsx(Gb,{title:"About the Project",children:_e.jsx("div",{className:"max-w-4xl",children:_e.jsx("div",{className:"prose prose-lg text-gray-600 leading-relaxed space-y-6"})})}),BK=()=>_e.jsx(Gb,{title:"Our Methodology",children:_e.jsx("div",{className:"max-w-4xl"})}),NK=()=>_e.jsx(Gb,{title:"Advanced Analytics",children:_e.jsx("div",{className:"max-w-4xl",children:_e.jsx("div",{className:"prose prose-lg text-gray-600 leading-relaxed space-y-6"})})}),FK=()=>_e.jsx(Gb,{title:"Data Catalog",children:_e.jsx("div",{className:"max-w-4xl",children:_e.jsx("div",{className:"prose prose-lg text-gray-600 leading-relaxed space-y-6"})})}),UK=()=>{const[e,t]=q.useState("Demographics"),[i,a]=q.useState("Odisha"),[d,g]=q.useState(null);return _e.jsxs(_e.Fragment,{children:[_e.jsx(G5,{currentView:e,onViewChange:t,onDistrictChange:a,onDataChange:g}),_e.jsx(LK,{selectedDistrict:i,data:d})]})},VK=()=>_e.jsx(Sj,{basename:"/unfpa-dashboard",children:_e.jsxs("div",{className:"flex flex-col h-screen overflow-hidden bg-background",children:[_e.jsx(o5,{}),_e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[_e.jsxs(J3,{children:[_e.jsx(Ng,{path:"/",element:_e.jsx(UK,{})}),_e.jsx(Ng,{path:"/about",element:_e.jsx(jK,{})}),_e.jsx(Ng,{path:"/methodology",element:_e.jsx(BK,{})}),_e.jsx(Ng,{path:"/analytics",element:_e.jsx(NK,{})}),_e.jsx(Ng,{path:"/catalog",element:_e.jsx(FK,{})})]}),_e.jsx(s5,{})]})]})});t3.createRoot(document.getElementById("root")).render(_e.jsx(q.StrictMode,{children:_e.jsx(VK,{})}));
